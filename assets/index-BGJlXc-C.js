(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function UE(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var wm={exports:{}},Jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function vA(){if(Mv)return Jl;Mv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:s,type:i,key:h,ref:o!==void 0?o:null,props:c}}return Jl.Fragment=e,Jl.jsx=t,Jl.jsxs=t,Jl}var kv;function EA(){return kv||(kv=1,wm.exports=vA()),wm.exports}var y=EA(),Tm={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function wA(){if(Vv)return Me;Vv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.iterator;function A(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,G={};function B(O,ne,ue){this.props=O,this.context=ne,this.refs=G,this.updater=ue||I}B.prototype.isReactComponent={},B.prototype.setState=function(O,ne){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ne,"setState")},B.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ie(){}ie.prototype=B.prototype;function ae(O,ne,ue){this.props=O,this.context=ne,this.refs=G,this.updater=ue||I}var oe=ae.prototype=new ie;oe.constructor=ae,L(oe,B.prototype),oe.isPureReactComponent=!0;var me=Array.isArray,he={H:null,A:null,T:null,S:null,V:null},Y=Object.prototype.hasOwnProperty;function D(O,ne,ue,se,ve,Pe){return ue=Pe.ref,{$$typeof:s,type:O,key:ne,ref:ue!==void 0?ue:null,props:Pe}}function x(O,ne){return D(O.type,ne,void 0,void 0,void 0,O.props)}function R(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function M(O){var ne={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ue){return ne[ue]})}var P=/\/+/g;function V(O,ne){return typeof O=="object"&&O!==null&&O.key!=null?M(""+O.key):ne.toString(36)}function C(){}function Ae(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(C,C):(O.status="pending",O.then(function(ne){O.status==="pending"&&(O.status="fulfilled",O.value=ne)},function(ne){O.status==="pending"&&(O.status="rejected",O.reason=ne)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function be(O,ne,ue,se,ve){var Pe=typeof O;(Pe==="undefined"||Pe==="boolean")&&(O=null);var xe=!1;if(O===null)xe=!0;else switch(Pe){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(O.$$typeof){case s:case e:xe=!0;break;case w:return xe=O._init,be(xe(O._payload),ne,ue,se,ve)}}if(xe)return ve=ve(O),xe=se===""?"."+V(O,0):se,me(ve)?(ue="",xe!=null&&(ue=xe.replace(P,"$&/")+"/"),be(ve,ne,ue,"",function(Jt){return Jt})):ve!=null&&(R(ve)&&(ve=x(ve,ue+(ve.key==null||O&&O.key===ve.key?"":(""+ve.key).replace(P,"$&/")+"/")+xe)),ne.push(ve)),1;xe=0;var Dt=se===""?".":se+":";if(me(O))for(var $e=0;$e<O.length;$e++)se=O[$e],Pe=Dt+V(se,$e),xe+=be(se,ne,ue,Pe,ve);else if($e=A(O),typeof $e=="function")for(O=$e.call(O),$e=0;!(se=O.next()).done;)se=se.value,Pe=Dt+V(se,$e++),xe+=be(se,ne,ue,Pe,ve);else if(Pe==="object"){if(typeof O.then=="function")return be(Ae(O),ne,ue,se,ve);throw ne=String(O),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return xe}function Q(O,ne,ue){if(O==null)return O;var se=[],ve=0;return be(O,se,"","",function(Pe){return ne.call(ue,Pe,ve++)}),se}function re(O){if(O._status===-1){var ne=O._result;ne=ne(),ne.then(function(ue){(O._status===0||O._status===-1)&&(O._status=1,O._result=ue)},function(ue){(O._status===0||O._status===-1)&&(O._status=2,O._result=ue)}),O._status===-1&&(O._status=0,O._result=ne)}if(O._status===1)return O._result.default;throw O._result}var X=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function ye(){}return Me.Children={map:Q,forEach:function(O,ne,ue){Q(O,function(){ne.apply(this,arguments)},ue)},count:function(O){var ne=0;return Q(O,function(){ne++}),ne},toArray:function(O){return Q(O,function(ne){return ne})||[]},only:function(O){if(!R(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Me.Component=B,Me.Fragment=t,Me.Profiler=o,Me.PureComponent=ae,Me.StrictMode=i,Me.Suspense=g,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=he,Me.__COMPILER_RUNTIME={__proto__:null,c:function(O){return he.H.useMemoCache(O)}},Me.cache=function(O){return function(){return O.apply(null,arguments)}},Me.cloneElement=function(O,ne,ue){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var se=L({},O.props),ve=O.key,Pe=void 0;if(ne!=null)for(xe in ne.ref!==void 0&&(Pe=void 0),ne.key!==void 0&&(ve=""+ne.key),ne)!Y.call(ne,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&ne.ref===void 0||(se[xe]=ne[xe]);var xe=arguments.length-2;if(xe===1)se.children=ue;else if(1<xe){for(var Dt=Array(xe),$e=0;$e<xe;$e++)Dt[$e]=arguments[$e+2];se.children=Dt}return D(O.type,ve,void 0,void 0,Pe,se)},Me.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},Me.createElement=function(O,ne,ue){var se,ve={},Pe=null;if(ne!=null)for(se in ne.key!==void 0&&(Pe=""+ne.key),ne)Y.call(ne,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ve[se]=ne[se]);var xe=arguments.length-2;if(xe===1)ve.children=ue;else if(1<xe){for(var Dt=Array(xe),$e=0;$e<xe;$e++)Dt[$e]=arguments[$e+2];ve.children=Dt}if(O&&O.defaultProps)for(se in xe=O.defaultProps,xe)ve[se]===void 0&&(ve[se]=xe[se]);return D(O,Pe,void 0,void 0,null,ve)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(O){return{$$typeof:m,render:O}},Me.isValidElement=R,Me.lazy=function(O){return{$$typeof:w,_payload:{_status:-1,_result:O},_init:re}},Me.memo=function(O,ne){return{$$typeof:_,type:O,compare:ne===void 0?null:ne}},Me.startTransition=function(O){var ne=he.T,ue={};he.T=ue;try{var se=O(),ve=he.S;ve!==null&&ve(ue,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(ye,X)}catch(Pe){X(Pe)}finally{he.T=ne}},Me.unstable_useCacheRefresh=function(){return he.H.useCacheRefresh()},Me.use=function(O){return he.H.use(O)},Me.useActionState=function(O,ne,ue){return he.H.useActionState(O,ne,ue)},Me.useCallback=function(O,ne){return he.H.useCallback(O,ne)},Me.useContext=function(O){return he.H.useContext(O)},Me.useDebugValue=function(){},Me.useDeferredValue=function(O,ne){return he.H.useDeferredValue(O,ne)},Me.useEffect=function(O,ne,ue){var se=he.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(O,ne)},Me.useId=function(){return he.H.useId()},Me.useImperativeHandle=function(O,ne,ue){return he.H.useImperativeHandle(O,ne,ue)},Me.useInsertionEffect=function(O,ne){return he.H.useInsertionEffect(O,ne)},Me.useLayoutEffect=function(O,ne){return he.H.useLayoutEffect(O,ne)},Me.useMemo=function(O,ne){return he.H.useMemo(O,ne)},Me.useOptimistic=function(O,ne){return he.H.useOptimistic(O,ne)},Me.useReducer=function(O,ne,ue){return he.H.useReducer(O,ne,ue)},Me.useRef=function(O){return he.H.useRef(O)},Me.useState=function(O){return he.H.useState(O)},Me.useSyncExternalStore=function(O,ne,ue){return he.H.useSyncExternalStore(O,ne,ue)},Me.useTransition=function(){return he.H.useTransition()},Me.version="19.1.1",Me}var Lv;function gg(){return Lv||(Lv=1,Tm.exports=wA()),Tm.exports}var $=gg();const TA=UE($);var bm={exports:{}},Zl={},Sm={exports:{}},Am={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function bA(){return jv||(jv=1,(function(s){function e(Q,re){var X=Q.length;Q.push(re);e:for(;0<X;){var ye=X-1>>>1,O=Q[ye];if(0<o(O,re))Q[ye]=re,Q[X]=O,X=ye;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var re=Q[0],X=Q.pop();if(X!==re){Q[0]=X;e:for(var ye=0,O=Q.length,ne=O>>>1;ye<ne;){var ue=2*(ye+1)-1,se=Q[ue],ve=ue+1,Pe=Q[ve];if(0>o(se,X))ve<O&&0>o(Pe,se)?(Q[ye]=Pe,Q[ve]=X,ye=ve):(Q[ye]=se,Q[ue]=X,ye=ue);else if(ve<O&&0>o(Pe,X))Q[ye]=Pe,Q[ve]=X,ye=ve;else break e}}return re}function o(Q,re){var X=Q.sortIndex-re.sortIndex;return X!==0?X:Q.id-re.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],_=[],w=1,b=null,A=3,I=!1,L=!1,G=!1,B=!1,ie=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function me(Q){for(var re=t(_);re!==null;){if(re.callback===null)i(_);else if(re.startTime<=Q)i(_),re.sortIndex=re.expirationTime,e(g,re);else break;re=t(_)}}function he(Q){if(G=!1,me(Q),!L)if(t(g)!==null)L=!0,Y||(Y=!0,V());else{var re=t(_);re!==null&&be(he,re.startTime-Q)}}var Y=!1,D=-1,x=5,R=-1;function M(){return B?!0:!(s.unstable_now()-R<x)}function P(){if(B=!1,Y){var Q=s.unstable_now();R=Q;var re=!0;try{e:{L=!1,G&&(G=!1,ae(D),D=-1),I=!0;var X=A;try{t:{for(me(Q),b=t(g);b!==null&&!(b.expirationTime>Q&&M());){var ye=b.callback;if(typeof ye=="function"){b.callback=null,A=b.priorityLevel;var O=ye(b.expirationTime<=Q);if(Q=s.unstable_now(),typeof O=="function"){b.callback=O,me(Q),re=!0;break t}b===t(g)&&i(g),me(Q)}else i(g);b=t(g)}if(b!==null)re=!0;else{var ne=t(_);ne!==null&&be(he,ne.startTime-Q),re=!1}}break e}finally{b=null,A=X,I=!1}re=void 0}}finally{re?V():Y=!1}}}var V;if(typeof oe=="function")V=function(){oe(P)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ae=C.port2;C.port1.onmessage=P,V=function(){Ae.postMessage(null)}}else V=function(){ie(P,0)};function be(Q,re){D=ie(function(){Q(s.unstable_now())},re)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Q){Q.callback=null},s.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<Q?Math.floor(1e3/Q):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(Q){switch(A){case 1:case 2:case 3:var re=3;break;default:re=A}var X=A;A=re;try{return Q()}finally{A=X}},s.unstable_requestPaint=function(){B=!0},s.unstable_runWithPriority=function(Q,re){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var X=A;A=Q;try{return re()}finally{A=X}},s.unstable_scheduleCallback=function(Q,re,X){var ye=s.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ye+X:ye):X=ye,Q){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=X+O,Q={id:w++,callback:re,priorityLevel:Q,startTime:X,expirationTime:O,sortIndex:-1},X>ye?(Q.sortIndex=X,e(_,Q),t(g)===null&&Q===t(_)&&(G?(ae(D),D=-1):G=!0,be(he,X-ye))):(Q.sortIndex=O,e(g,Q),L||I||(L=!0,Y||(Y=!0,V()))),Q},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(Q){var re=A;return function(){var X=A;A=re;try{return Q.apply(this,arguments)}finally{A=X}}}})(Am)),Am}var Uv;function SA(){return Uv||(Uv=1,Sm.exports=bA()),Sm.exports}var xm={exports:{}},un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function AA(){if(zv)return un;zv=1;var s=gg();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)_+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,_,w){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:_,implementation:w}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,un.createPortal=function(g,_){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(g,_,null,w)},un.flushSync=function(g){var _=h.T,w=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=_,i.p=w,i.d.f()}},un.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,i.d.C(g,_))},un.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},un.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var w=_.as,b=m(w,_.crossOrigin),A=typeof _.integrity=="string"?_.integrity:void 0,I=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;w==="style"?i.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:I}):w==="script"&&i.d.X(g,{crossOrigin:b,integrity:A,fetchPriority:I,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},un.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var w=m(_.as,_.crossOrigin);i.d.M(g,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&i.d.M(g)},un.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var w=_.as,b=m(w,_.crossOrigin);i.d.L(g,w,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},un.preloadModule=function(g,_){if(typeof g=="string")if(_){var w=m(_.as,_.crossOrigin);i.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else i.d.m(g)},un.requestFormReset=function(g){i.d.r(g)},un.unstable_batchedUpdates=function(g,_){return g(_)},un.useFormState=function(g,_,w){return h.H.useFormState(g,_,w)},un.useFormStatus=function(){return h.H.useHostTransitionStatus()},un.version="19.1.1",un}var qv;function xA(){if(qv)return xm.exports;qv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),xm.exports=AA(),xm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bv;function RA(){if(Bv)return Zl;Bv=1;var s=SA(),e=gg(),t=xA();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function h(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(i(188))}function g(n){var r=n.alternate;if(!r){if(r=c(n),r===null)throw Error(i(188));return r!==n?null:n}for(var a=n,l=r;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return m(d),n;if(f===l)return m(d),r;f=f.sibling}throw Error(i(188))}if(a.return!==l.return)a=d,l=f;else{for(var E=!1,T=d.child;T;){if(T===a){E=!0,a=d,l=f;break}if(T===l){E=!0,l=d,a=f;break}T=T.sibling}if(!E){for(T=f.child;T;){if(T===a){E=!0,a=f,l=d;break}if(T===l){E=!0,l=f,a=d;break}T=T.sibling}if(!E)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?n:r}function _(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=_(n),r!==null)return r;n=n.sibling}return null}var w=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),ae=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function V(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function Ae(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case L:return"Fragment";case B:return"Profiler";case G:return"StrictMode";case he:return"Suspense";case Y:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case I:return"Portal";case oe:return(n.displayName||"Context")+".Provider";case ae:return(n._context.displayName||"Context")+".Consumer";case me:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return r=n.displayName||null,r!==null?r:Ae(n.type)||"Memo";case x:r=n._payload,n=n._init;try{return Ae(n(r))}catch{}}return null}var be=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ye=[],O=-1;function ne(n){return{current:n}}function ue(n){0>O||(n.current=ye[O],ye[O]=null,O--)}function se(n,r){O++,ye[O]=n.current,n.current=r}var ve=ne(null),Pe=ne(null),xe=ne(null),Dt=ne(null);function $e(n,r){switch(se(xe,r),se(Pe,n),se(ve,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?lv(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=lv(r),n=cv(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ue(ve),se(ve,n)}function Jt(){ue(ve),ue(Pe),ue(xe)}function lr(n){n.memoizedState!==null&&se(Dt,n);var r=ve.current,a=cv(r,n.type);r!==a&&(se(Pe,n),se(ve,a))}function cr(n){Pe.current===n&&(ue(ve),ue(Pe)),Dt.current===n&&(ue(Dt),Kl._currentValue=X)}var br=Object.prototype.hasOwnProperty,es=s.unstable_scheduleCallback,Sr=s.unstable_cancelCallback,Ra=s.unstable_shouldYield,$o=s.unstable_requestPaint,yn=s.unstable_now,Ia=s.unstable_getCurrentPriorityLevel,ur=s.unstable_ImmediatePriority,zs=s.unstable_UserBlockingPriority,ts=s.unstable_NormalPriority,Wo=s.unstable_LowPriority,qs=s.unstable_IdlePriority,Bs=s.log,Ca=s.unstable_setDisableYieldValue,ft=null,Ze=null;function _n(n){if(typeof Bs=="function"&&Ca(n),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(ft,n)}catch{}}var Ht=Math.clz32?Math.clz32:ns,Na=Math.log,Jo=Math.LN2;function ns(n){return n>>>=0,n===0?32:31-(Na(n)/Jo|0)|0}var rs=256,ss=4194304;function Mn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Hs(n,r,a){var l=n.pendingLanes;if(l===0)return 0;var d=0,f=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?d=Mn(l):(E&=T,E!==0?d=Mn(E):a||(a=T&~n,a!==0&&(d=Mn(a))))):(T=l&~f,T!==0?d=Mn(T):E!==0?d=Mn(E):a||(a=l&~n,a!==0&&(d=Mn(a)))),d===0?0:r!==0&&r!==d&&(r&f)===0&&(f=d&-d,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:d}function is(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Fs(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ji(){var n=rs;return rs<<=1,(rs&4194048)===0&&(rs=256),n}function Ui(){var n=ss;return ss<<=1,(ss&62914560)===0&&(ss=4194304),n}function Kn(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function dr(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function hr(n,r,a,l,d,f){var E=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var T=n.entanglements,N=n.expirationTimes,q=n.hiddenUpdates;for(a=E&~a;0<a;){var J=31-Ht(a),ee=1<<J;T[J]=0,N[J]=-1;var H=q[J];if(H!==null)for(q[J]=null,J=0;J<H.length;J++){var F=H[J];F!==null&&(F.lane&=-536870913)}a&=~ee}l!==0&&Yn(n,l,0),f!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=f&~(E&~r))}function Yn(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var l=31-Ht(r);n.entangledLanes|=r,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function zi(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var l=31-Ht(a),d=1<<l;d&r|n[l]&r&&(n[l]|=r),a&=~d}}function Ar(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Gs(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function xr(){var n=re.p;return n!==0?n:(n=window.event,n===void 0?32:Iv(n.type))}function Da(n,r){var a=re.p;try{return re.p=n,r()}finally{re.p=a}}var dt=Math.random().toString(36).slice(2),At="__reactFiber$"+dt,wt="__reactProps$"+dt,xn="__reactContainer$"+dt,qi="__reactEvents$"+dt,ce="__reactListeners$"+dt,fe="__reactHandles$"+dt,ze="__reactResources$"+dt,vn="__reactMarker$"+dt;function Zt(n){delete n[At],delete n[wt],delete n[qi],delete n[ce],delete n[fe]}function En(n){var r=n[At];if(r)return r;for(var a=n.parentNode;a;){if(r=a[xn]||a[At]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=fv(n);n!==null;){if(a=n[At])return a;n=fv(n)}return r}n=a,a=n.parentNode}return null}function Rr(n){if(n=n[At]||n[xn]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function Ir(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function wn(n){var r=n[ze];return r||(r=n[ze]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function xt(n){n[vn]=!0}var Zo=new Set,Oa={};function fr(n,r){as(n,r),as(n+"Capture",r)}function as(n,r){for(Oa[n]=r,n=0;n<r.length;n++)Zo.add(r[n])}var Kc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yc={},Bi={};function Xc(n){return br.call(Bi,n)?!0:br.call(Yc,n)?!1:Kc.test(n)?Bi[n]=!0:(Yc[n]=!0,!1)}function Qs(n,r,a){if(Xc(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function Cr(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function en(n,r,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+l)}}var Hi,$c;function os(n){if(Hi===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Hi=r&&r[1]||"",$c=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hi+n+$c}var Pa=!1;function Ma(n,r){if(!n||Pa)return"";Pa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(F){var H=F}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(F){H=F}n.call(ee.prototype)}}else{try{throw Error()}catch(F){H=F}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(F){if(F&&H&&typeof F.stack=="string")return[F.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),E=f[0],T=f[1];if(E&&T){var N=E.split(`
`),q=T.split(`
`);for(d=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;if(l===N.length||d===q.length)for(l=N.length-1,d=q.length-1;1<=l&&0<=d&&N[l]!==q[d];)d--;for(;1<=l&&0<=d;l--,d--)if(N[l]!==q[d]){if(l!==1||d!==1)do if(l--,d--,0>d||N[l]!==q[d]){var J=`
`+N[l].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=l&&0<=d);break}}}finally{Pa=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?os(a):""}function el(n){switch(n.tag){case 26:case 27:case 5:return os(n.type);case 16:return os("Lazy");case 13:return os("Suspense");case 19:return os("SuspenseList");case 0:case 15:return Ma(n.type,!1);case 11:return Ma(n.type.render,!1);case 1:return Ma(n.type,!0);case 31:return os("Activity");default:return""}}function ka(n){try{var r="";do r+=el(n),n=n.return;while(n);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Tn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function tl(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Sh(n){var r=tl(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),l=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(E){l=""+E,f.call(this,E)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Va(n){n._valueTracker||(n._valueTracker=Sh(n))}function nl(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return n&&(l=tl(n)?n.checked?"true":"false":n.value),n=l,n!==a?(r.setValue(n),!0):!1}function Fi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ah=/[\n"\\]/g;function Ot(n){return n.replace(Ah,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function kn(n,r,a,l,d,f,E,T){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),r!=null?E==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Tn(r)):n.value!==""+Tn(r)&&(n.value=""+Tn(r)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),r!=null?Ks(n,E,Tn(r)):a!=null?Ks(n,E,Tn(a)):l!=null&&n.removeAttribute("value"),d==null&&f!=null&&(n.defaultChecked=!!f),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+Tn(T):n.removeAttribute("name")}function Gi(n,r,a,l,d,f,E,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(n.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null))return;a=a!=null?""+Tn(a):"",r=r!=null?""+Tn(r):a,T||r===n.value||(n.value=r),n.defaultValue=r}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=T?n.checked:!!l,n.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Ks(n,r,a){r==="number"&&Fi(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function ls(n,r,a,l){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&l&&(n[a].defaultSelected=!0)}else{for(a=""+Tn(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,l&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function it(n,r,a){if(r!=null&&(r=""+Tn(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+Tn(a):""}function Qi(n,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(be(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=Tn(r),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Xn(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Ki=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wc(n,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":l?n.setProperty(r,a):typeof a!="number"||a===0||Ki.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function rl(n,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var d in r)l=r[d],r.hasOwnProperty(d)&&a[d]!==l&&Wc(n,d,l)}else for(var f in r)r.hasOwnProperty(f)&&Wc(n,f,r[f])}function sl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function La(n){return Rh.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var cs=null;function $n(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var us=null,ds=null;function il(n){var r=Rr(n);if(r&&(n=r.stateNode)){var a=n[wt]||null;e:switch(n=r.stateNode,r.type){case"input":if(kn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ot(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==n&&l.form===n.form){var d=l[wt]||null;if(!d)throw Error(i(90));kn(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===n.form&&nl(l)}break e;case"textarea":it(n,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ls(n,!!a.multiple,r,!1)}}}var Nr=!1;function Jc(n,r,a){if(Nr)return n(r,a);Nr=!0;try{var l=n(r);return l}finally{if(Nr=!1,(us!==null||ds!==null)&&(Gu(),us&&(r=us,n=ds,ds=us=null,il(r),n)))for(r=0;r<n.length;r++)il(n[r])}}function Yi(n,r){var a=n.stateNode;if(a===null)return null;var l=a[wt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wn=!1;if(mr)try{var Xi={};Object.defineProperty(Xi,"passive",{get:function(){Wn=!0}}),window.addEventListener("test",Xi,Xi),window.removeEventListener("test",Xi,Xi)}catch{Wn=!1}var Dr=null,Ys=null,hs=null;function al(){if(hs)return hs;var n,r=Ys,a=r.length,l,d="value"in Dr?Dr.value:Dr.textContent,f=d.length;for(n=0;n<a&&r[n]===d[n];n++);var E=a-n;for(l=1;l<=E&&r[a-l]===d[f-l];l++);return hs=d.slice(n,1<l?1-l:void 0)}function Or(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Pr(){return!0}function ol(){return!1}function Ft(n){function r(a,l,d,f,E){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Pr:ol,this.isPropagationStopped=ol,this}return w(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Pr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Pr)},persist:function(){},isPersistent:Pr}),r}var tt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=Ft(tt),$i=w({},tt,{view:0,detail:0}),Zc=Ft($i),Ua,za,Mr,Wi=w({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ea,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Mr&&(Mr&&n.type==="mousemove"?(Ua=n.screenX-Mr.screenX,za=n.screenY-Mr.screenY):za=Ua=0,Mr=n),Ua)},movementY:function(n){return"movementY"in n?n.movementY:za}}),Jn=Ft(Wi),eu=w({},Wi,{dataTransfer:0}),Ih=Ft(eu),Ji=w({},$i,{relatedTarget:0}),qa=Ft(Ji),ll=w({},tt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ba=Ft(ll),tu=w({},tt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ha=Ft(tu),Ch=w({},tt,{data:0}),cl=Ft(Ch),Zi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ru={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ul(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=ru[n])?!!r[n]:!1}function ea(){return ul}var su=w({},$i,{key:function(n){if(n.key){var r=Zi[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Or(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?nu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ea,charCode:function(n){return n.type==="keypress"?Or(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Or(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Fa=Ft(su),iu=w({},Wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dl=Ft(iu),fs=w({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ea}),au=Ft(fs),ou=w({},tt,{propertyName:0,elapsedTime:0,pseudoElement:0}),lu=Ft(ou),cu=w({},Wi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ga=Ft(cu),bn=w({},tt,{newState:0,oldState:0}),uu=Ft(bn),du=[9,13,27,32],kr=mr&&"CompositionEvent"in window,u=null;mr&&"documentMode"in document&&(u=document.documentMode);var p=mr&&"TextEvent"in window&&!u,v=mr&&(!kr||u&&8<u&&11>=u),S=" ",U=!1;function K(n,r){switch(n){case"keyup":return du.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function le(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fe=!1;function jt(n,r){switch(n){case"compositionend":return le(r);case"keypress":return r.which!==32?null:(U=!0,S);case"textInput":return n=r.data,n===S&&U?null:n;default:return null}}function Ge(n,r){if(Fe)return n==="compositionend"||!kr&&K(n,r)?(n=al(),hs=Ys=Dr=null,Fe=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var Gt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ut(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Gt[n.type]:r==="textarea"}function ms(n,r,a,l){us?ds?ds.push(l):ds=[l]:us=l,r=Wu(r,"onChange"),0<r.length&&(a=new ja("onChange","change",null,a,l),n.push({event:a,listeners:r}))}var tn=null,Vr=null;function hl(n){rv(n,0)}function hu(n){var r=Ir(n);if(nl(r))return n}function Sp(n,r){if(n==="change")return r}var Ap=!1;if(mr){var Nh;if(mr){var Dh="oninput"in document;if(!Dh){var xp=document.createElement("div");xp.setAttribute("oninput","return;"),Dh=typeof xp.oninput=="function"}Nh=Dh}else Nh=!1;Ap=Nh&&(!document.documentMode||9<document.documentMode)}function Rp(){tn&&(tn.detachEvent("onpropertychange",Ip),Vr=tn=null)}function Ip(n){if(n.propertyName==="value"&&hu(Vr)){var r=[];ms(r,Vr,n,$n(n)),Jc(hl,r)}}function Xb(n,r,a){n==="focusin"?(Rp(),tn=r,Vr=a,tn.attachEvent("onpropertychange",Ip)):n==="focusout"&&Rp()}function $b(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return hu(Vr)}function Wb(n,r){if(n==="click")return hu(r)}function Jb(n,r){if(n==="input"||n==="change")return hu(r)}function Zb(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Vn=typeof Object.is=="function"?Object.is:Zb;function fl(n,r){if(Vn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!br.call(r,d)||!Vn(n[d],r[d]))return!1}return!0}function Cp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Np(n,r){var a=Cp(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=r&&l>=r)return{node:a,offset:r-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Cp(a)}}function Dp(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Dp(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Op(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Fi(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=Fi(n.document)}return r}function Oh(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var eS=mr&&"documentMode"in document&&11>=document.documentMode,Qa=null,Ph=null,ml=null,Mh=!1;function Pp(n,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Mh||Qa==null||Qa!==Fi(l)||(l=Qa,"selectionStart"in l&&Oh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ml&&fl(ml,l)||(ml=l,l=Wu(Ph,"onSelect"),0<l.length&&(r=new ja("onSelect","select",null,r,a),n.push({event:r,listeners:l}),r.target=Qa)))}function ta(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Ka={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionrun:ta("Transition","TransitionRun"),transitionstart:ta("Transition","TransitionStart"),transitioncancel:ta("Transition","TransitionCancel"),transitionend:ta("Transition","TransitionEnd")},kh={},Mp={};mr&&(Mp=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function na(n){if(kh[n])return kh[n];if(!Ka[n])return n;var r=Ka[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Mp)return kh[n]=r[a];return n}var kp=na("animationend"),Vp=na("animationiteration"),Lp=na("animationstart"),tS=na("transitionrun"),nS=na("transitionstart"),rS=na("transitioncancel"),jp=na("transitionend"),Up=new Map,Vh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vh.push("scrollEnd");function gr(n,r){Up.set(n,r),fr(r,[n])}var zp=new WeakMap;function Zn(n,r){if(typeof n=="object"&&n!==null){var a=zp.get(n);return a!==void 0?a:(r={value:n,source:r,stack:ka(r)},zp.set(n,r),r)}return{value:n,source:r,stack:ka(r)}}var er=[],Ya=0,Lh=0;function fu(){for(var n=Ya,r=Lh=Ya=0;r<n;){var a=er[r];er[r++]=null;var l=er[r];er[r++]=null;var d=er[r];er[r++]=null;var f=er[r];if(er[r++]=null,l!==null&&d!==null){var E=l.pending;E===null?d.next=d:(d.next=E.next,E.next=d),l.pending=d}f!==0&&qp(a,d,f)}}function mu(n,r,a,l){er[Ya++]=n,er[Ya++]=r,er[Ya++]=a,er[Ya++]=l,Lh|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function jh(n,r,a,l){return mu(n,r,a,l),gu(n)}function Xa(n,r){return mu(n,null,null,r),gu(n)}function qp(n,r,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var d=!1,f=n.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(n=f.stateNode,n===null||n._visibility&1||(d=!0)),n=f,f=f.return;return n.tag===3?(f=n.stateNode,d&&r!==null&&(d=31-Ht(a),n=f.hiddenUpdates,l=n[d],l===null?n[d]=[r]:l.push(r),r.lane=a|536870912),f):null}function gu(n){if(50<Ul)throw Ul=0,Gf=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var $a={};function sS(n,r,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(n,r,a,l){return new sS(n,r,a,l)}function Uh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function gs(n,r){var a=n.alternate;return a===null?(a=Ln(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Bp(n,r){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function pu(n,r,a,l,d,f){var E=0;if(l=n,typeof n=="function")Uh(n)&&(E=1);else if(typeof n=="string")E=aA(n,a,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=Ln(31,a,r,d),n.elementType=R,n.lanes=f,n;case L:return ra(a.children,d,f,r);case G:E=8,d|=24;break;case B:return n=Ln(12,a,r,d|2),n.elementType=B,n.lanes=f,n;case he:return n=Ln(13,a,r,d),n.elementType=he,n.lanes=f,n;case Y:return n=Ln(19,a,r,d),n.elementType=Y,n.lanes=f,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ie:case oe:E=10;break e;case ae:E=9;break e;case me:E=11;break e;case D:E=14;break e;case x:E=16,l=null;break e}E=29,a=Error(i(130,n===null?"null":typeof n,"")),l=null}return r=Ln(E,a,r,d),r.elementType=n,r.type=l,r.lanes=f,r}function ra(n,r,a,l){return n=Ln(7,n,l,r),n.lanes=a,n}function zh(n,r,a){return n=Ln(6,n,null,r),n.lanes=a,n}function qh(n,r,a){return r=Ln(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Wa=[],Ja=0,yu=null,_u=0,tr=[],nr=0,sa=null,ps=1,ys="";function ia(n,r){Wa[Ja++]=_u,Wa[Ja++]=yu,yu=n,_u=r}function Hp(n,r,a){tr[nr++]=ps,tr[nr++]=ys,tr[nr++]=sa,sa=n;var l=ps;n=ys;var d=32-Ht(l)-1;l&=~(1<<d),a+=1;var f=32-Ht(r)+d;if(30<f){var E=d-d%5;f=(l&(1<<E)-1).toString(32),l>>=E,d-=E,ps=1<<32-Ht(r)+d|a<<d|l,ys=f+n}else ps=1<<f|a<<d|l,ys=n}function Bh(n){n.return!==null&&(ia(n,1),Hp(n,1,0))}function Hh(n){for(;n===yu;)yu=Wa[--Ja],Wa[Ja]=null,_u=Wa[--Ja],Wa[Ja]=null;for(;n===sa;)sa=tr[--nr],tr[nr]=null,ys=tr[--nr],tr[nr]=null,ps=tr[--nr],tr[nr]=null}var Sn=null,Tt=null,et=!1,aa=null,Lr=!1,Fh=Error(i(519));function oa(n){var r=Error(i(418,""));throw yl(Zn(r,n)),Fh}function Fp(n){var r=n.stateNode,a=n.type,l=n.memoizedProps;switch(r[At]=n,r[wt]=l,a){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(a=0;a<ql.length;a++)Ue(ql[a],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ue("invalid",r),Gi(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Va(r);break;case"select":Ue("invalid",r);break;case"textarea":Ue("invalid",r),Qi(r,l.value,l.defaultValue,l.children),Va(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||ov(r.textContent,a)?(l.popover!=null&&(Ue("beforetoggle",r),Ue("toggle",r)),l.onScroll!=null&&Ue("scroll",r),l.onScrollEnd!=null&&Ue("scrollend",r),l.onClick!=null&&(r.onclick=Ju),r=!0):r=!1,r||oa(n)}function Gp(n){for(Sn=n.return;Sn;)switch(Sn.tag){case 5:case 13:Lr=!1;return;case 27:case 3:Lr=!0;return;default:Sn=Sn.return}}function gl(n){if(n!==Sn)return!1;if(!et)return Gp(n),et=!0,!1;var r=n.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||om(n.type,n.memoizedProps)),a=!a),a&&Tt&&oa(n),Gp(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(r===0){Tt=yr(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;n=n.nextSibling}Tt=null}}else r===27?(r=Tt,ui(n.type)?(n=dm,dm=null,Tt=n):Tt=r):Tt=Sn?yr(n.stateNode.nextSibling):null;return!0}function pl(){Tt=Sn=null,et=!1}function Qp(){var n=aa;return n!==null&&(Cn===null?Cn=n:Cn.push.apply(Cn,n),aa=null),n}function yl(n){aa===null?aa=[n]:aa.push(n)}var Gh=ne(null),la=null,_s=null;function Xs(n,r,a){se(Gh,r._currentValue),r._currentValue=a}function vs(n){n._currentValue=Gh.current,ue(Gh)}function Qh(n,r,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),n===a)break;n=n.return}}function Kh(n,r,a,l){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var f=d.dependencies;if(f!==null){var E=d.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=d;for(var N=0;N<r.length;N++)if(T.context===r[N]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),Qh(f.return,a,n),l||(E=null);break e}f=T.next}}else if(d.tag===18){if(E=d.return,E===null)throw Error(i(341));E.lanes|=a,f=E.alternate,f!==null&&(f.lanes|=a),Qh(E,a,n),E=null}else E=d.child;if(E!==null)E.return=d;else for(E=d;E!==null;){if(E===n){E=null;break}if(d=E.sibling,d!==null){d.return=E.return,E=d;break}E=E.return}d=E}}function _l(n,r,a,l){n=null;for(var d=r,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var E=d.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var T=d.type;Vn(d.pendingProps.value,E.value)||(n!==null?n.push(T):n=[T])}}else if(d===Dt.current){if(E=d.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Kl):n=[Kl])}d=d.return}n!==null&&Kh(r,n,a,l),r.flags|=262144}function vu(n){for(n=n.firstContext;n!==null;){if(!Vn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ca(n){la=n,_s=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function cn(n){return Kp(la,n)}function Eu(n,r){return la===null&&ca(n),Kp(n,r)}function Kp(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},_s===null){if(n===null)throw Error(i(308));_s=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else _s=_s.next=r;return a}var iS=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},aS=s.unstable_scheduleCallback,oS=s.unstable_NormalPriority,zt={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yh(){return{controller:new iS,data:new Map,refCount:0}}function vl(n){n.refCount--,n.refCount===0&&aS(oS,function(){n.controller.abort()})}var El=null,Xh=0,Za=0,eo=null;function lS(n,r){if(El===null){var a=El=[];Xh=0,Za=Jf(),eo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Xh++,r.then(Yp,Yp),r}function Yp(){if(--Xh===0&&El!==null){eo!==null&&(eo.status="fulfilled");var n=El;El=null,Za=0,eo=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function cS(n,r){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return n.then(function(){l.status="fulfilled",l.value=r;for(var d=0;d<a.length;d++)(0,a[d])(r)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Xp=Q.S;Q.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&lS(n,r),Xp!==null&&Xp(n,r)};var ua=ne(null);function $h(){var n=ua.current;return n!==null?n:ht.pooledCache}function wu(n,r){r===null?se(ua,ua.current):se(ua,r.pool)}function $p(){var n=$h();return n===null?null:{parent:zt._currentValue,pool:n}}var wl=Error(i(460)),Wp=Error(i(474)),Tu=Error(i(542)),Wh={then:function(){}};function Jp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function bu(){}function Zp(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(bu,bu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,ty(n),n;default:if(typeof r.status=="string")r.then(bu,bu);else{if(n=ht,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(l){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=l}},function(l){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,ty(n),n}throw Tl=r,wl}}var Tl=null;function ey(){if(Tl===null)throw Error(i(459));var n=Tl;return Tl=null,n}function ty(n){if(n===wl||n===Tu)throw Error(i(483))}var $s=!1;function Jh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zh(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ws(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Js(n,r,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(rt&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,r=gu(n),qp(n,null,a),r}return mu(n,l,r,a),gu(n)}function bl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,zi(n,a)}}function ef(n,r){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=E:f=f.next=E,a=a.next}while(a!==null);f===null?d=f=r:f=f.next=r}else d=f=r;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var tf=!1;function Sl(){if(tf){var n=eo;if(n!==null)throw n}}function Al(n,r,a,l){tf=!1;var d=n.updateQueue;$s=!1;var f=d.firstBaseUpdate,E=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var N=T,q=N.next;N.next=null,E===null?f=q:E.next=q,E=N;var J=n.alternate;J!==null&&(J=J.updateQueue,T=J.lastBaseUpdate,T!==E&&(T===null?J.firstBaseUpdate=q:T.next=q,J.lastBaseUpdate=N))}if(f!==null){var ee=d.baseState;E=0,J=q=N=null,T=f;do{var H=T.lane&-536870913,F=H!==T.lane;if(F?(Qe&H)===H:(l&H)===H){H!==0&&H===Za&&(tf=!0),J!==null&&(J=J.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ce=n,Te=T;H=r;var lt=a;switch(Te.tag){case 1:if(Ce=Te.payload,typeof Ce=="function"){ee=Ce.call(lt,ee,H);break e}ee=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Te.payload,H=typeof Ce=="function"?Ce.call(lt,ee,H):Ce,H==null)break e;ee=w({},ee,H);break e;case 2:$s=!0}}H=T.callback,H!==null&&(n.flags|=64,F&&(n.flags|=8192),F=d.callbacks,F===null?d.callbacks=[H]:F.push(H))}else F={lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},J===null?(q=J=F,N=ee):J=J.next=F,E|=H;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;F=T,T=F.next,F.next=null,d.lastBaseUpdate=F,d.shared.pending=null}}while(!0);J===null&&(N=ee),d.baseState=N,d.firstBaseUpdate=q,d.lastBaseUpdate=J,f===null&&(d.shared.lanes=0),ai|=E,n.lanes=E,n.memoizedState=ee}}function ny(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function ry(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)ny(a[n],r)}var to=ne(null),Su=ne(0);function sy(n,r){n=xs,se(Su,n),se(to,r),xs=n|r.baseLanes}function nf(){se(Su,xs),se(to,to.current)}function rf(){xs=Su.current,ue(to),ue(Su)}var Zs=0,Ve=null,at=null,Pt=null,Au=!1,no=!1,da=!1,xu=0,xl=0,ro=null,uS=0;function Rt(){throw Error(i(321))}function sf(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Vn(n[a],r[a]))return!1;return!0}function af(n,r,a,l,d,f){return Zs=f,Ve=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Q.H=n===null||n.memoizedState===null?qy:By,da=!1,f=a(l,d),da=!1,no&&(f=ay(r,a,l,d)),iy(n),f}function iy(n){Q.H=Ou;var r=at!==null&&at.next!==null;if(Zs=0,Pt=at=Ve=null,Au=!1,xl=0,ro=null,r)throw Error(i(300));n===null||Qt||(n=n.dependencies,n!==null&&vu(n)&&(Qt=!0))}function ay(n,r,a,l){Ve=n;var d=0;do{if(no&&(ro=null),xl=0,no=!1,25<=d)throw Error(i(301));if(d+=1,Pt=at=null,n.updateQueue!=null){var f=n.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=yS,f=r(a,l)}while(no);return f}function dS(){var n=Q.H,r=n.useState()[0];return r=typeof r.then=="function"?Rl(r):r,n=n.useState()[0],(at!==null?at.memoizedState:null)!==n&&(Ve.flags|=1024),r}function of(){var n=xu!==0;return xu=0,n}function lf(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function cf(n){if(Au){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Au=!1}Zs=0,Pt=at=Ve=null,no=!1,xl=xu=0,ro=null}function Rn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Ve.memoizedState=Pt=n:Pt=Pt.next=n,Pt}function Mt(){if(at===null){var n=Ve.alternate;n=n!==null?n.memoizedState:null}else n=at.next;var r=Pt===null?Ve.memoizedState:Pt.next;if(r!==null)Pt=r,at=n;else{if(n===null)throw Ve.alternate===null?Error(i(467)):Error(i(310));at=n,n={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Pt===null?Ve.memoizedState=Pt=n:Pt=Pt.next=n}return Pt}function uf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(n){var r=xl;return xl+=1,ro===null&&(ro=[]),n=Zp(ro,n,r),r=Ve,(Pt===null?r.memoizedState:Pt.next)===null&&(r=r.alternate,Q.H=r===null||r.memoizedState===null?qy:By),n}function Ru(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Rl(n);if(n.$$typeof===oe)return cn(n)}throw Error(i(438,String(n)))}function df(n){var r=null,a=Ve.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=uf(),Ve.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),l=0;l<n;l++)a[l]=M;return r.index++,a}function Es(n,r){return typeof r=="function"?r(n):r}function Iu(n){var r=Mt();return hf(r,at,n)}function hf(n,r,a){var l=n.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var d=n.baseQueue,f=l.pending;if(f!==null){if(d!==null){var E=d.next;d.next=f.next,f.next=E}r.baseQueue=d=f,l.pending=null}if(f=n.baseState,d===null)n.memoizedState=f;else{r=d.next;var T=E=null,N=null,q=r,J=!1;do{var ee=q.lane&-536870913;if(ee!==q.lane?(Qe&ee)===ee:(Zs&ee)===ee){var H=q.revertLane;if(H===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ee===Za&&(J=!0);else if((Zs&H)===H){q=q.next,H===Za&&(J=!0);continue}else ee={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(T=N=ee,E=f):N=N.next=ee,Ve.lanes|=H,ai|=H;ee=q.action,da&&a(f,ee),f=q.hasEagerState?q.eagerState:a(f,ee)}else H={lane:ee,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(T=N=H,E=f):N=N.next=H,Ve.lanes|=ee,ai|=ee;q=q.next}while(q!==null&&q!==r);if(N===null?E=f:N.next=T,!Vn(f,n.memoizedState)&&(Qt=!0,J&&(a=eo,a!==null)))throw a;n.memoizedState=f,n.baseState=E,n.baseQueue=N,l.lastRenderedState=f}return d===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function ff(n){var r=Mt(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=n;var l=a.dispatch,d=a.pending,f=r.memoizedState;if(d!==null){a.pending=null;var E=d=d.next;do f=n(f,E.action),E=E.next;while(E!==d);Vn(f,r.memoizedState)||(Qt=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function oy(n,r,a){var l=Ve,d=Mt(),f=et;if(f){if(a===void 0)throw Error(i(407));a=a()}else a=r();var E=!Vn((at||d).memoizedState,a);E&&(d.memoizedState=a,Qt=!0),d=d.queue;var T=uy.bind(null,l,d,n);if(Il(2048,8,T,[n]),d.getSnapshot!==r||E||Pt!==null&&Pt.memoizedState.tag&1){if(l.flags|=2048,so(9,Cu(),cy.bind(null,l,d,a,r),null),ht===null)throw Error(i(349));f||(Zs&124)!==0||ly(l,r,a)}return a}function ly(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Ve.updateQueue,r===null?(r=uf(),Ve.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function cy(n,r,a,l){r.value=a,r.getSnapshot=l,dy(r)&&hy(n)}function uy(n,r,a){return a(function(){dy(r)&&hy(n)})}function dy(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Vn(n,a)}catch{return!0}}function hy(n){var r=Xa(n,2);r!==null&&Bn(r,n,2)}function mf(n){var r=Rn();if(typeof n=="function"){var a=n;if(n=a(),da){_n(!0);try{a()}finally{_n(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:n},r}function fy(n,r,a,l){return n.baseState=a,hf(n,at,typeof l=="function"?l:Es)}function hS(n,r,a,l,d){if(Du(n))throw Error(i(485));if(n=r.action,n!==null){var f={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};Q.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,my(r,f)):(f.next=a.next,r.pending=a.next=f)}}function my(n,r){var a=r.action,l=r.payload,d=n.state;if(r.isTransition){var f=Q.T,E={};Q.T=E;try{var T=a(d,l),N=Q.S;N!==null&&N(E,T),gy(n,r,T)}catch(q){gf(n,r,q)}finally{Q.T=f}}else try{f=a(d,l),gy(n,r,f)}catch(q){gf(n,r,q)}}function gy(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){py(n,r,l)},function(l){return gf(n,r,l)}):py(n,r,a)}function py(n,r,a){r.status="fulfilled",r.value=a,yy(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,my(n,a)))}function gf(n,r,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,yy(r),r=r.next;while(r!==l)}n.action=null}function yy(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function _y(n,r){return r}function vy(n,r){if(et){var a=ht.formState;if(a!==null){e:{var l=Ve;if(et){if(Tt){t:{for(var d=Tt,f=Lr;d.nodeType!==8;){if(!f){d=null;break t}if(d=yr(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){Tt=yr(d.nextSibling),l=d.data==="F!";break e}}oa(l)}l=!1}l&&(r=a[0])}}return a=Rn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_y,lastRenderedState:r},a.queue=l,a=jy.bind(null,Ve,l),l.dispatch=a,l=mf(!1),f=Ef.bind(null,Ve,!1,l.queue),l=Rn(),d={state:r,dispatch:null,action:n,pending:null},l.queue=d,a=hS.bind(null,Ve,d,f,a),d.dispatch=a,l.memoizedState=n,[r,a,!1]}function Ey(n){var r=Mt();return wy(r,at,n)}function wy(n,r,a){if(r=hf(n,r,_y)[0],n=Iu(Es)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Rl(r)}catch(E){throw E===wl?Tu:E}else l=r;r=Mt();var d=r.queue,f=d.dispatch;return a!==r.memoizedState&&(Ve.flags|=2048,so(9,Cu(),fS.bind(null,d,a),null)),[l,f,n]}function fS(n,r){n.action=r}function Ty(n){var r=Mt(),a=at;if(a!==null)return wy(r,a,n);Mt(),r=r.memoizedState,a=Mt();var l=a.queue.dispatch;return a.memoizedState=n,[r,l,!1]}function so(n,r,a,l){return n={tag:n,create:a,deps:l,inst:r,next:null},r=Ve.updateQueue,r===null&&(r=uf(),Ve.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,r.lastEffect=n),n}function Cu(){return{destroy:void 0,resource:void 0}}function by(){return Mt().memoizedState}function Nu(n,r,a,l){var d=Rn();l=l===void 0?null:l,Ve.flags|=n,d.memoizedState=so(1|r,Cu(),a,l)}function Il(n,r,a,l){var d=Mt();l=l===void 0?null:l;var f=d.memoizedState.inst;at!==null&&l!==null&&sf(l,at.memoizedState.deps)?d.memoizedState=so(r,f,a,l):(Ve.flags|=n,d.memoizedState=so(1|r,f,a,l))}function Sy(n,r){Nu(8390656,8,n,r)}function Ay(n,r){Il(2048,8,n,r)}function xy(n,r){return Il(4,2,n,r)}function Ry(n,r){return Il(4,4,n,r)}function Iy(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Cy(n,r,a){a=a!=null?a.concat([n]):null,Il(4,4,Iy.bind(null,r,n),a)}function pf(){}function Ny(n,r){var a=Mt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&sf(r,l[1])?l[0]:(a.memoizedState=[n,r],n)}function Dy(n,r){var a=Mt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&sf(r,l[1]))return l[0];if(l=n(),da){_n(!0);try{n()}finally{_n(!1)}}return a.memoizedState=[l,r],l}function yf(n,r,a){return a===void 0||(Zs&1073741824)!==0?n.memoizedState=r:(n.memoizedState=a,n=M_(),Ve.lanes|=n,ai|=n,a)}function Oy(n,r,a,l){return Vn(a,r)?a:to.current!==null?(n=yf(n,a,l),Vn(n,r)||(Qt=!0),n):(Zs&42)===0?(Qt=!0,n.memoizedState=a):(n=M_(),Ve.lanes|=n,ai|=n,r)}function Py(n,r,a,l,d){var f=re.p;re.p=f!==0&&8>f?f:8;var E=Q.T,T={};Q.T=T,Ef(n,!1,r,a);try{var N=d(),q=Q.S;if(q!==null&&q(T,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var J=cS(N,l);Cl(n,r,J,qn(n))}else Cl(n,r,l,qn(n))}catch(ee){Cl(n,r,{then:function(){},status:"rejected",reason:ee},qn())}finally{re.p=f,Q.T=E}}function mS(){}function _f(n,r,a,l){if(n.tag!==5)throw Error(i(476));var d=My(n).queue;Py(n,d,r,X,a===null?mS:function(){return ky(n),a(l)})}function My(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:X},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function ky(n){var r=My(n).next.queue;Cl(n,r,{},qn())}function vf(){return cn(Kl)}function Vy(){return Mt().memoizedState}function Ly(){return Mt().memoizedState}function gS(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=qn();n=Ws(a);var l=Js(r,n,a);l!==null&&(Bn(l,r,a),bl(l,r,a)),r={cache:Yh()},n.payload=r;return}r=r.return}}function pS(n,r,a){var l=qn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Du(n)?Uy(r,a):(a=jh(n,r,a,l),a!==null&&(Bn(a,n,l),zy(a,r,l)))}function jy(n,r,a){var l=qn();Cl(n,r,a,l)}function Cl(n,r,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Du(n))Uy(r,d);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var E=r.lastRenderedState,T=f(E,a);if(d.hasEagerState=!0,d.eagerState=T,Vn(T,E))return mu(n,r,d,0),ht===null&&fu(),!1}catch{}finally{}if(a=jh(n,r,d,l),a!==null)return Bn(a,n,l),zy(a,r,l),!0}return!1}function Ef(n,r,a,l){if(l={lane:2,revertLane:Jf(),action:l,hasEagerState:!1,eagerState:null,next:null},Du(n)){if(r)throw Error(i(479))}else r=jh(n,a,l,2),r!==null&&Bn(r,n,2)}function Du(n){var r=n.alternate;return n===Ve||r!==null&&r===Ve}function Uy(n,r){no=Au=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function zy(n,r,a){if((a&4194048)!==0){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,zi(n,a)}}var Ou={readContext:cn,use:Ru,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},qy={readContext:cn,use:Ru,useCallback:function(n,r){return Rn().memoizedState=[n,r===void 0?null:r],n},useContext:cn,useEffect:Sy,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,Nu(4194308,4,Iy.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Nu(4194308,4,n,r)},useInsertionEffect:function(n,r){Nu(4,2,n,r)},useMemo:function(n,r){var a=Rn();r=r===void 0?null:r;var l=n();if(da){_n(!0);try{n()}finally{_n(!1)}}return a.memoizedState=[l,r],l},useReducer:function(n,r,a){var l=Rn();if(a!==void 0){var d=a(r);if(da){_n(!0);try{a(r)}finally{_n(!1)}}}else d=r;return l.memoizedState=l.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},l.queue=n,n=n.dispatch=pS.bind(null,Ve,n),[l.memoizedState,n]},useRef:function(n){var r=Rn();return n={current:n},r.memoizedState=n},useState:function(n){n=mf(n);var r=n.queue,a=jy.bind(null,Ve,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:pf,useDeferredValue:function(n,r){var a=Rn();return yf(a,n,r)},useTransition:function(){var n=mf(!1);return n=Py.bind(null,Ve,n.queue,!0,!1),Rn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var l=Ve,d=Rn();if(et){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),ht===null)throw Error(i(349));(Qe&124)!==0||ly(l,r,a)}d.memoizedState=a;var f={value:a,getSnapshot:r};return d.queue=f,Sy(uy.bind(null,l,f,n),[n]),l.flags|=2048,so(9,Cu(),cy.bind(null,l,f,a,r),null),a},useId:function(){var n=Rn(),r=ht.identifierPrefix;if(et){var a=ys,l=ps;a=(l&~(1<<32-Ht(l)-1)).toString(32)+a,r=""+r+"R"+a,a=xu++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=uS++,r=""+r+"r"+a.toString(32)+"";return n.memoizedState=r},useHostTransitionStatus:vf,useFormState:vy,useActionState:vy,useOptimistic:function(n){var r=Rn();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Ef.bind(null,Ve,!0,a),a.dispatch=r,[n,r]},useMemoCache:df,useCacheRefresh:function(){return Rn().memoizedState=gS.bind(null,Ve)}},By={readContext:cn,use:Ru,useCallback:Ny,useContext:cn,useEffect:Ay,useImperativeHandle:Cy,useInsertionEffect:xy,useLayoutEffect:Ry,useMemo:Dy,useReducer:Iu,useRef:by,useState:function(){return Iu(Es)},useDebugValue:pf,useDeferredValue:function(n,r){var a=Mt();return Oy(a,at.memoizedState,n,r)},useTransition:function(){var n=Iu(Es)[0],r=Mt().memoizedState;return[typeof n=="boolean"?n:Rl(n),r]},useSyncExternalStore:oy,useId:Vy,useHostTransitionStatus:vf,useFormState:Ey,useActionState:Ey,useOptimistic:function(n,r){var a=Mt();return fy(a,at,n,r)},useMemoCache:df,useCacheRefresh:Ly},yS={readContext:cn,use:Ru,useCallback:Ny,useContext:cn,useEffect:Ay,useImperativeHandle:Cy,useInsertionEffect:xy,useLayoutEffect:Ry,useMemo:Dy,useReducer:ff,useRef:by,useState:function(){return ff(Es)},useDebugValue:pf,useDeferredValue:function(n,r){var a=Mt();return at===null?yf(a,n,r):Oy(a,at.memoizedState,n,r)},useTransition:function(){var n=ff(Es)[0],r=Mt().memoizedState;return[typeof n=="boolean"?n:Rl(n),r]},useSyncExternalStore:oy,useId:Vy,useHostTransitionStatus:vf,useFormState:Ty,useActionState:Ty,useOptimistic:function(n,r){var a=Mt();return at!==null?fy(a,at,n,r):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:df,useCacheRefresh:Ly},io=null,Nl=0;function Pu(n){var r=Nl;return Nl+=1,io===null&&(io=[]),Zp(io,n,r)}function Dl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Mu(n,r){throw r.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Hy(n){var r=n._init;return r(n._payload)}function Fy(n){function r(j,k){if(n){var z=j.deletions;z===null?(j.deletions=[k],j.flags|=16):z.push(k)}}function a(j,k){if(!n)return null;for(;k!==null;)r(j,k),k=k.sibling;return null}function l(j){for(var k=new Map;j!==null;)j.key!==null?k.set(j.key,j):k.set(j.index,j),j=j.sibling;return k}function d(j,k){return j=gs(j,k),j.index=0,j.sibling=null,j}function f(j,k,z){return j.index=z,n?(z=j.alternate,z!==null?(z=z.index,z<k?(j.flags|=67108866,k):z):(j.flags|=67108866,k)):(j.flags|=1048576,k)}function E(j){return n&&j.alternate===null&&(j.flags|=67108866),j}function T(j,k,z,Z){return k===null||k.tag!==6?(k=zh(z,j.mode,Z),k.return=j,k):(k=d(k,z),k.return=j,k)}function N(j,k,z,Z){var pe=z.type;return pe===L?J(j,k,z.props.children,Z,z.key):k!==null&&(k.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===x&&Hy(pe)===k.type)?(k=d(k,z.props),Dl(k,z),k.return=j,k):(k=pu(z.type,z.key,z.props,null,j.mode,Z),Dl(k,z),k.return=j,k)}function q(j,k,z,Z){return k===null||k.tag!==4||k.stateNode.containerInfo!==z.containerInfo||k.stateNode.implementation!==z.implementation?(k=qh(z,j.mode,Z),k.return=j,k):(k=d(k,z.children||[]),k.return=j,k)}function J(j,k,z,Z,pe){return k===null||k.tag!==7?(k=ra(z,j.mode,Z,pe),k.return=j,k):(k=d(k,z),k.return=j,k)}function ee(j,k,z){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=zh(""+k,j.mode,z),k.return=j,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case A:return z=pu(k.type,k.key,k.props,null,j.mode,z),Dl(z,k),z.return=j,z;case I:return k=qh(k,j.mode,z),k.return=j,k;case x:var Z=k._init;return k=Z(k._payload),ee(j,k,z)}if(be(k)||V(k))return k=ra(k,j.mode,z,null),k.return=j,k;if(typeof k.then=="function")return ee(j,Pu(k),z);if(k.$$typeof===oe)return ee(j,Eu(j,k),z);Mu(j,k)}return null}function H(j,k,z,Z){var pe=k!==null?k.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return pe!==null?null:T(j,k,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case A:return z.key===pe?N(j,k,z,Z):null;case I:return z.key===pe?q(j,k,z,Z):null;case x:return pe=z._init,z=pe(z._payload),H(j,k,z,Z)}if(be(z)||V(z))return pe!==null?null:J(j,k,z,Z,null);if(typeof z.then=="function")return H(j,k,Pu(z),Z);if(z.$$typeof===oe)return H(j,k,Eu(j,z),Z);Mu(j,z)}return null}function F(j,k,z,Z,pe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return j=j.get(z)||null,T(k,j,""+Z,pe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return j=j.get(Z.key===null?z:Z.key)||null,N(k,j,Z,pe);case I:return j=j.get(Z.key===null?z:Z.key)||null,q(k,j,Z,pe);case x:var Le=Z._init;return Z=Le(Z._payload),F(j,k,z,Z,pe)}if(be(Z)||V(Z))return j=j.get(z)||null,J(k,j,Z,pe,null);if(typeof Z.then=="function")return F(j,k,z,Pu(Z),pe);if(Z.$$typeof===oe)return F(j,k,z,Eu(k,Z),pe);Mu(k,Z)}return null}function Ce(j,k,z,Z){for(var pe=null,Le=null,_e=k,Se=k=0,Yt=null;_e!==null&&Se<z.length;Se++){_e.index>Se?(Yt=_e,_e=null):Yt=_e.sibling;var We=H(j,_e,z[Se],Z);if(We===null){_e===null&&(_e=Yt);break}n&&_e&&We.alternate===null&&r(j,_e),k=f(We,k,Se),Le===null?pe=We:Le.sibling=We,Le=We,_e=Yt}if(Se===z.length)return a(j,_e),et&&ia(j,Se),pe;if(_e===null){for(;Se<z.length;Se++)_e=ee(j,z[Se],Z),_e!==null&&(k=f(_e,k,Se),Le===null?pe=_e:Le.sibling=_e,Le=_e);return et&&ia(j,Se),pe}for(_e=l(_e);Se<z.length;Se++)Yt=F(_e,j,Se,z[Se],Z),Yt!==null&&(n&&Yt.alternate!==null&&_e.delete(Yt.key===null?Se:Yt.key),k=f(Yt,k,Se),Le===null?pe=Yt:Le.sibling=Yt,Le=Yt);return n&&_e.forEach(function(gi){return r(j,gi)}),et&&ia(j,Se),pe}function Te(j,k,z,Z){if(z==null)throw Error(i(151));for(var pe=null,Le=null,_e=k,Se=k=0,Yt=null,We=z.next();_e!==null&&!We.done;Se++,We=z.next()){_e.index>Se?(Yt=_e,_e=null):Yt=_e.sibling;var gi=H(j,_e,We.value,Z);if(gi===null){_e===null&&(_e=Yt);break}n&&_e&&gi.alternate===null&&r(j,_e),k=f(gi,k,Se),Le===null?pe=gi:Le.sibling=gi,Le=gi,_e=Yt}if(We.done)return a(j,_e),et&&ia(j,Se),pe;if(_e===null){for(;!We.done;Se++,We=z.next())We=ee(j,We.value,Z),We!==null&&(k=f(We,k,Se),Le===null?pe=We:Le.sibling=We,Le=We);return et&&ia(j,Se),pe}for(_e=l(_e);!We.done;Se++,We=z.next())We=F(_e,j,Se,We.value,Z),We!==null&&(n&&We.alternate!==null&&_e.delete(We.key===null?Se:We.key),k=f(We,k,Se),Le===null?pe=We:Le.sibling=We,Le=We);return n&&_e.forEach(function(_A){return r(j,_A)}),et&&ia(j,Se),pe}function lt(j,k,z,Z){if(typeof z=="object"&&z!==null&&z.type===L&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case A:e:{for(var pe=z.key;k!==null;){if(k.key===pe){if(pe=z.type,pe===L){if(k.tag===7){a(j,k.sibling),Z=d(k,z.props.children),Z.return=j,j=Z;break e}}else if(k.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===x&&Hy(pe)===k.type){a(j,k.sibling),Z=d(k,z.props),Dl(Z,z),Z.return=j,j=Z;break e}a(j,k);break}else r(j,k);k=k.sibling}z.type===L?(Z=ra(z.props.children,j.mode,Z,z.key),Z.return=j,j=Z):(Z=pu(z.type,z.key,z.props,null,j.mode,Z),Dl(Z,z),Z.return=j,j=Z)}return E(j);case I:e:{for(pe=z.key;k!==null;){if(k.key===pe)if(k.tag===4&&k.stateNode.containerInfo===z.containerInfo&&k.stateNode.implementation===z.implementation){a(j,k.sibling),Z=d(k,z.children||[]),Z.return=j,j=Z;break e}else{a(j,k);break}else r(j,k);k=k.sibling}Z=qh(z,j.mode,Z),Z.return=j,j=Z}return E(j);case x:return pe=z._init,z=pe(z._payload),lt(j,k,z,Z)}if(be(z))return Ce(j,k,z,Z);if(V(z)){if(pe=V(z),typeof pe!="function")throw Error(i(150));return z=pe.call(z),Te(j,k,z,Z)}if(typeof z.then=="function")return lt(j,k,Pu(z),Z);if(z.$$typeof===oe)return lt(j,k,Eu(j,z),Z);Mu(j,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,k!==null&&k.tag===6?(a(j,k.sibling),Z=d(k,z),Z.return=j,j=Z):(a(j,k),Z=zh(z,j.mode,Z),Z.return=j,j=Z),E(j)):a(j,k)}return function(j,k,z,Z){try{Nl=0;var pe=lt(j,k,z,Z);return io=null,pe}catch(_e){if(_e===wl||_e===Tu)throw _e;var Le=Ln(29,_e,null,j.mode);return Le.lanes=Z,Le.return=j,Le}finally{}}}var ao=Fy(!0),Gy=Fy(!1),rr=ne(null),jr=null;function ei(n){var r=n.alternate;se(qt,qt.current&1),se(rr,n),jr===null&&(r===null||to.current!==null||r.memoizedState!==null)&&(jr=n)}function Qy(n){if(n.tag===22){if(se(qt,qt.current),se(rr,n),jr===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(jr=n)}}else ti()}function ti(){se(qt,qt.current),se(rr,rr.current)}function ws(n){ue(rr),jr===n&&(jr=null),ue(qt)}var qt=ne(0);function ku(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||um(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function wf(n,r,a,l){r=n.memoizedState,a=a(l,r),a=a==null?r:w({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Tf={enqueueSetState:function(n,r,a){n=n._reactInternals;var l=qn(),d=Ws(l);d.payload=r,a!=null&&(d.callback=a),r=Js(n,d,l),r!==null&&(Bn(r,n,l),bl(r,n,l))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var l=qn(),d=Ws(l);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=Js(n,d,l),r!==null&&(Bn(r,n,l),bl(r,n,l))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=qn(),l=Ws(a);l.tag=2,r!=null&&(l.callback=r),r=Js(n,l,a),r!==null&&(Bn(r,n,a),bl(r,n,a))}};function Ky(n,r,a,l,d,f,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,f,E):r.prototype&&r.prototype.isPureReactComponent?!fl(a,l)||!fl(d,f):!0}function Yy(n,r,a,l){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==n&&Tf.enqueueReplaceState(r,r.state,null)}function ha(n,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(n=n.defaultProps){a===r&&(a=w({},a));for(var d in n)a[d]===void 0&&(a[d]=n[d])}return a}var Vu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Xy(n){Vu(n)}function $y(n){console.error(n)}function Wy(n){Vu(n)}function Lu(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Jy(n,r,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function bf(n,r,a){return a=Ws(a),a.tag=3,a.payload={element:null},a.callback=function(){Lu(n,r)},a}function Zy(n){return n=Ws(n),n.tag=3,n}function e_(n,r,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;n.payload=function(){return d(f)},n.callback=function(){Jy(r,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Jy(r,a,l),typeof d!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function _S(n,r,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&_l(r,a,d,!0),a=rr.current,a!==null){switch(a.tag){case 13:return jr===null?Kf():a.alternate===null&&bt===0&&(bt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Wh?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Xf(n,l,d)),!1;case 22:return a.flags|=65536,l===Wh?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Xf(n,l,d)),!1}throw Error(i(435,a.tag))}return Xf(n,l,d),Kf(),!1}if(et)return r=rr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,l!==Fh&&(n=Error(i(422),{cause:l}),yl(Zn(n,a)))):(l!==Fh&&(r=Error(i(423),{cause:l}),yl(Zn(r,a))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,l=Zn(l,a),d=bf(n.stateNode,l,d),ef(n,d),bt!==4&&(bt=2)),!1;var f=Error(i(520),{cause:l});if(f=Zn(f,a),jl===null?jl=[f]:jl.push(f),bt!==4&&(bt=2),r===null)return!0;l=Zn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=d&-d,a.lanes|=n,n=bf(a.stateNode,l,n),ef(a,n),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(oi===null||!oi.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Zy(d),e_(d,n,a,l),ef(a,d),!1}a=a.return}while(a!==null);return!1}var t_=Error(i(461)),Qt=!1;function nn(n,r,a,l){r.child=n===null?Gy(r,null,a,l):ao(r,n.child,a,l)}function n_(n,r,a,l,d){a=a.render;var f=r.ref;if("ref"in l){var E={};for(var T in l)T!=="ref"&&(E[T]=l[T])}else E=l;return ca(r),l=af(n,r,a,E,f,d),T=of(),n!==null&&!Qt?(lf(n,r,d),Ts(n,r,d)):(et&&T&&Bh(r),r.flags|=1,nn(n,r,l,d),r.child)}function r_(n,r,a,l,d){if(n===null){var f=a.type;return typeof f=="function"&&!Uh(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,s_(n,r,f,l,d)):(n=pu(a.type,null,l,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(f=n.child,!Df(n,d)){var E=f.memoizedProps;if(a=a.compare,a=a!==null?a:fl,a(E,l)&&n.ref===r.ref)return Ts(n,r,d)}return r.flags|=1,n=gs(f,l),n.ref=r.ref,n.return=r,r.child=n}function s_(n,r,a,l,d){if(n!==null){var f=n.memoizedProps;if(fl(f,l)&&n.ref===r.ref)if(Qt=!1,r.pendingProps=l=f,Df(n,d))(n.flags&131072)!==0&&(Qt=!0);else return r.lanes=n.lanes,Ts(n,r,d)}return Sf(n,r,a,l,d)}function i_(n,r,a){var l=r.pendingProps,d=l.children,f=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,n!==null){for(d=r.child=n.child,f=0;d!==null;)f=f|d.lanes|d.childLanes,d=d.sibling;r.childLanes=f&~l}else r.childLanes=0,r.child=null;return a_(n,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&wu(r,f!==null?f.cachePool:null),f!==null?sy(r,f):nf(),Qy(r);else return r.lanes=r.childLanes=536870912,a_(n,r,f!==null?f.baseLanes|a:a,a)}else f!==null?(wu(r,f.cachePool),sy(r,f),ti(),r.memoizedState=null):(n!==null&&wu(r,null),nf(),ti());return nn(n,r,d,a),r.child}function a_(n,r,a,l){var d=$h();return d=d===null?null:{parent:zt._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},n!==null&&wu(r,null),nf(),Qy(r),n!==null&&_l(n,r,l,!0),null}function ju(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(n===null||n.ref!==a)&&(r.flags|=4194816)}}function Sf(n,r,a,l,d){return ca(r),a=af(n,r,a,l,void 0,d),l=of(),n!==null&&!Qt?(lf(n,r,d),Ts(n,r,d)):(et&&l&&Bh(r),r.flags|=1,nn(n,r,a,d),r.child)}function o_(n,r,a,l,d,f){return ca(r),r.updateQueue=null,a=ay(r,l,a,d),iy(n),l=of(),n!==null&&!Qt?(lf(n,r,f),Ts(n,r,f)):(et&&l&&Bh(r),r.flags|=1,nn(n,r,a,f),r.child)}function l_(n,r,a,l,d){if(ca(r),r.stateNode===null){var f=$a,E=a.contextType;typeof E=="object"&&E!==null&&(f=cn(E)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Tf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Jh(r),E=a.contextType,f.context=typeof E=="object"&&E!==null?cn(E):$a,f.state=r.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(wf(r,a,E,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&Tf.enqueueReplaceState(f,f.state,null),Al(r,l,f,d),Sl(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(n===null){f=r.stateNode;var T=r.memoizedProps,N=ha(a,T);f.props=N;var q=f.context,J=a.contextType;E=$a,typeof J=="object"&&J!==null&&(E=cn(J));var ee=a.getDerivedStateFromProps;J=typeof ee=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,J||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||q!==E)&&Yy(r,f,l,E),$s=!1;var H=r.memoizedState;f.state=H,Al(r,l,f,d),Sl(),q=r.memoizedState,T||H!==q||$s?(typeof ee=="function"&&(wf(r,a,ee,l),q=r.memoizedState),(N=$s||Ky(r,a,N,l,H,q,E))?(J||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=q),f.props=l,f.state=q,f.context=E,l=N):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,Zh(n,r),E=r.memoizedProps,J=ha(a,E),f.props=J,ee=r.pendingProps,H=f.context,q=a.contextType,N=$a,typeof q=="object"&&q!==null&&(N=cn(q)),T=a.getDerivedStateFromProps,(q=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==ee||H!==N)&&Yy(r,f,l,N),$s=!1,H=r.memoizedState,f.state=H,Al(r,l,f,d),Sl();var F=r.memoizedState;E!==ee||H!==F||$s||n!==null&&n.dependencies!==null&&vu(n.dependencies)?(typeof T=="function"&&(wf(r,a,T,l),F=r.memoizedState),(J=$s||Ky(r,a,J,l,H,F,N)||n!==null&&n.dependencies!==null&&vu(n.dependencies))?(q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,F,N),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,F,N)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=F),f.props=l,f.state=F,f.context=N,l=J):(typeof f.componentDidUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(r.flags|=1024),l=!1)}return f=l,ju(n,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,n!==null&&l?(r.child=ao(r,n.child,null,d),r.child=ao(r,null,a,d)):nn(n,r,a,d),r.memoizedState=f.state,n=r.child):n=Ts(n,r,d),n}function c_(n,r,a,l){return pl(),r.flags|=256,nn(n,r,a,l),r.child}var Af={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xf(n){return{baseLanes:n,cachePool:$p()}}function Rf(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=sr),n}function u_(n,r,a){var l=r.pendingProps,d=!1,f=(r.flags&128)!==0,E;if((E=f)||(E=n!==null&&n.memoizedState===null?!1:(qt.current&2)!==0),E&&(d=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,n===null){if(et){if(d?ei(r):ti(),et){var T=Tt,N;if(N=T){e:{for(N=T,T=Lr;N.nodeType!==8;){if(!T){T=null;break e}if(N=yr(N.nextSibling),N===null){T=null;break e}}T=N}T!==null?(r.memoizedState={dehydrated:T,treeContext:sa!==null?{id:ps,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},N=Ln(18,null,null,0),N.stateNode=T,N.return=r,r.child=N,Sn=r,Tt=null,N=!0):N=!1}N||oa(r)}if(T=r.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return um(T)?r.lanes=32:r.lanes=536870912,null;ws(r)}return T=l.children,l=l.fallback,d?(ti(),d=r.mode,T=Uu({mode:"hidden",children:T},d),l=ra(l,d,a,null),T.return=r,l.return=r,T.sibling=l,r.child=T,d=r.child,d.memoizedState=xf(a),d.childLanes=Rf(n,E,a),r.memoizedState=Af,l):(ei(r),If(r,T))}if(N=n.memoizedState,N!==null&&(T=N.dehydrated,T!==null)){if(f)r.flags&256?(ei(r),r.flags&=-257,r=Cf(n,r,a)):r.memoizedState!==null?(ti(),r.child=n.child,r.flags|=128,r=null):(ti(),d=l.fallback,T=r.mode,l=Uu({mode:"visible",children:l.children},T),d=ra(d,T,a,null),d.flags|=2,l.return=r,d.return=r,l.sibling=d,r.child=l,ao(r,n.child,null,a),l=r.child,l.memoizedState=xf(a),l.childLanes=Rf(n,E,a),r.memoizedState=Af,r=d);else if(ei(r),um(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var q=E.dgst;E=q,l=Error(i(419)),l.stack="",l.digest=E,yl({value:l,source:null,stack:null}),r=Cf(n,r,a)}else if(Qt||_l(n,r,a,!1),E=(a&n.childLanes)!==0,Qt||E){if(E=ht,E!==null&&(l=a&-a,l=(l&42)!==0?1:Ar(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==N.retryLane))throw N.retryLane=l,Xa(n,l),Bn(E,n,l),t_;T.data==="$?"||Kf(),r=Cf(n,r,a)}else T.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=N.treeContext,Tt=yr(T.nextSibling),Sn=r,et=!0,aa=null,Lr=!1,n!==null&&(tr[nr++]=ps,tr[nr++]=ys,tr[nr++]=sa,ps=n.id,ys=n.overflow,sa=r),r=If(r,l.children),r.flags|=4096);return r}return d?(ti(),d=l.fallback,T=r.mode,N=n.child,q=N.sibling,l=gs(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,q!==null?d=gs(q,d):(d=ra(d,T,a,null),d.flags|=2),d.return=r,l.return=r,l.sibling=d,r.child=l,l=d,d=r.child,T=n.child.memoizedState,T===null?T=xf(a):(N=T.cachePool,N!==null?(q=zt._currentValue,N=N.parent!==q?{parent:q,pool:q}:N):N=$p(),T={baseLanes:T.baseLanes|a,cachePool:N}),d.memoizedState=T,d.childLanes=Rf(n,E,a),r.memoizedState=Af,l):(ei(r),a=n.child,n=a.sibling,a=gs(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,n!==null&&(E=r.deletions,E===null?(r.deletions=[n],r.flags|=16):E.push(n)),r.child=a,r.memoizedState=null,a)}function If(n,r){return r=Uu({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Uu(n,r){return n=Ln(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Cf(n,r,a){return ao(r,n.child,null,a),n=If(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function d_(n,r,a){n.lanes|=r;var l=n.alternate;l!==null&&(l.lanes|=r),Qh(n.return,r,a)}function Nf(n,r,a,l,d){var f=n.memoizedState;f===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=d)}function h_(n,r,a){var l=r.pendingProps,d=l.revealOrder,f=l.tail;if(nn(n,r,l.children,a),l=qt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&d_(n,a,r);else if(n.tag===19)d_(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(se(qt,l),d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&ku(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Nf(r,!1,d,a,f);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&ku(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Nf(r,!0,a,null,f);break;case"together":Nf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ts(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),ai|=r.lanes,(a&r.childLanes)===0)if(n!==null){if(_l(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,a=gs(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=gs(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function Df(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&vu(n)))}function vS(n,r,a){switch(r.tag){case 3:$e(r,r.stateNode.containerInfo),Xs(r,zt,n.memoizedState.cache),pl();break;case 27:case 5:lr(r);break;case 4:$e(r,r.stateNode.containerInfo);break;case 10:Xs(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(ei(r),r.flags|=128,null):(a&r.child.childLanes)!==0?u_(n,r,a):(ei(r),n=Ts(n,r,a),n!==null?n.sibling:null);ei(r);break;case 19:var d=(n.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(_l(n,r,a,!1),l=(a&r.childLanes)!==0),d){if(l)return h_(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),se(qt,qt.current),l)break;return null;case 22:case 23:return r.lanes=0,i_(n,r,a);case 24:Xs(r,zt,n.memoizedState.cache)}return Ts(n,r,a)}function f_(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)Qt=!0;else{if(!Df(n,a)&&(r.flags&128)===0)return Qt=!1,vS(n,r,a);Qt=(n.flags&131072)!==0}else Qt=!1,et&&(r.flags&1048576)!==0&&Hp(r,_u,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var l=r.elementType,d=l._init;if(l=d(l._payload),r.type=l,typeof l=="function")Uh(l)?(n=ha(l,n),r.tag=1,r=l_(null,r,l,n,a)):(r.tag=0,r=Sf(null,r,l,n,a));else{if(l!=null){if(d=l.$$typeof,d===me){r.tag=11,r=n_(null,r,l,n,a);break e}else if(d===D){r.tag=14,r=r_(null,r,l,n,a);break e}}throw r=Ae(l)||l,Error(i(306,r,""))}}return r;case 0:return Sf(n,r,r.type,r.pendingProps,a);case 1:return l=r.type,d=ha(l,r.pendingProps),l_(n,r,l,d,a);case 3:e:{if($e(r,r.stateNode.containerInfo),n===null)throw Error(i(387));l=r.pendingProps;var f=r.memoizedState;d=f.element,Zh(n,r),Al(r,l,null,a);var E=r.memoizedState;if(l=E.cache,Xs(r,zt,l),l!==f.cache&&Kh(r,[zt],a,!0),Sl(),l=E.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=c_(n,r,l,a);break e}else if(l!==d){d=Zn(Error(i(424)),r),yl(d),r=c_(n,r,l,a);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Tt=yr(n.firstChild),Sn=r,et=!0,aa=null,Lr=!0,a=Gy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(pl(),l===d){r=Ts(n,r,a);break e}nn(n,r,l,a)}r=r.child}return r;case 26:return ju(n,r),n===null?(a=yv(r.type,null,r.pendingProps,null))?r.memoizedState=a:et||(a=r.type,n=r.pendingProps,l=Zu(xe.current).createElement(a),l[At]=r,l[wt]=n,sn(l,a,n),xt(l),r.stateNode=l):r.memoizedState=yv(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return lr(r),n===null&&et&&(l=r.stateNode=mv(r.type,r.pendingProps,xe.current),Sn=r,Lr=!0,d=Tt,ui(r.type)?(dm=d,Tt=yr(l.firstChild)):Tt=d),nn(n,r,r.pendingProps.children,a),ju(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&et&&((d=l=Tt)&&(l=KS(l,r.type,r.pendingProps,Lr),l!==null?(r.stateNode=l,Sn=r,Tt=yr(l.firstChild),Lr=!1,d=!0):d=!1),d||oa(r)),lr(r),d=r.type,f=r.pendingProps,E=n!==null?n.memoizedProps:null,l=f.children,om(d,f)?l=null:E!==null&&om(d,E)&&(r.flags|=32),r.memoizedState!==null&&(d=af(n,r,dS,null,null,a),Kl._currentValue=d),ju(n,r),nn(n,r,l,a),r.child;case 6:return n===null&&et&&((n=a=Tt)&&(a=YS(a,r.pendingProps,Lr),a!==null?(r.stateNode=a,Sn=r,Tt=null,n=!0):n=!1),n||oa(r)),null;case 13:return u_(n,r,a);case 4:return $e(r,r.stateNode.containerInfo),l=r.pendingProps,n===null?r.child=ao(r,null,l,a):nn(n,r,l,a),r.child;case 11:return n_(n,r,r.type,r.pendingProps,a);case 7:return nn(n,r,r.pendingProps,a),r.child;case 8:return nn(n,r,r.pendingProps.children,a),r.child;case 12:return nn(n,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Xs(r,r.type,l.value),nn(n,r,l.children,a),r.child;case 9:return d=r.type._context,l=r.pendingProps.children,ca(r),d=cn(d),l=l(d),r.flags|=1,nn(n,r,l,a),r.child;case 14:return r_(n,r,r.type,r.pendingProps,a);case 15:return s_(n,r,r.type,r.pendingProps,a);case 19:return h_(n,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},n===null?(a=Uu(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=gs(n.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return i_(n,r,a);case 24:return ca(r),l=cn(zt),n===null?(d=$h(),d===null&&(d=ht,f=Yh(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),r.memoizedState={parent:l,cache:d},Jh(r),Xs(r,zt,d)):((n.lanes&a)!==0&&(Zh(n,r),Al(r,null,null,a),Sl()),d=n.memoizedState,f=r.memoizedState,d.parent!==l?(d={parent:l,cache:l},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Xs(r,zt,l)):(l=f.cache,Xs(r,zt,l),l!==d.cache&&Kh(r,[zt],a,!0))),nn(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function bs(n){n.flags|=4}function m_(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Tv(r)){if(r=rr.current,r!==null&&((Qe&4194048)===Qe?jr!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||r!==jr))throw Tl=Wh,Wp;n.flags|=8192}}function zu(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Ui():536870912,n.lanes|=r,uo|=r)}function Ol(n,r){if(!et)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function yt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=l,n.childLanes=a,r}function ES(n,r,a){var l=r.pendingProps;switch(Hh(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(r),null;case 1:return yt(r),null;case 3:return a=r.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),vs(zt),Jt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(gl(r)?bs(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Qp())),yt(r),null;case 26:return a=r.memoizedState,n===null?(bs(r),a!==null?(yt(r),m_(r,a)):(yt(r),r.flags&=-16777217)):a?a!==n.memoizedState?(bs(r),yt(r),m_(r,a)):(yt(r),r.flags&=-16777217):(n.memoizedProps!==l&&bs(r),yt(r),r.flags&=-16777217),null;case 27:cr(r),a=xe.current;var d=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==l&&bs(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return yt(r),null}n=ve.current,gl(r)?Fp(r):(n=mv(d,l,a),r.stateNode=n,bs(r))}return yt(r),null;case 5:if(cr(r),a=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&bs(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return yt(r),null}if(n=ve.current,gl(r))Fp(r);else{switch(d=Zu(xe.current),n){case 1:n=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=d.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}n[At]=r,n[wt]=l;e:for(d=r.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break e;for(;d.sibling===null;){if(d.return===null||d.return===r)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}r.stateNode=n;e:switch(sn(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&bs(r)}}return yt(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==l&&bs(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(n=xe.current,gl(r)){if(n=r.stateNode,a=r.memoizedProps,l=null,d=Sn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}n[At]=r,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||ov(n.nodeValue,a)),n||oa(r)}else n=Zu(n).createTextNode(l),n[At]=r,r.stateNode=n}return yt(r),null;case 13:if(l=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=gl(r),l!==null&&l.dehydrated!==null){if(n===null){if(!d)throw Error(i(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[At]=r}else pl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;yt(r),d=!1}else d=Qp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(ws(r),r):(ws(r),null)}if(ws(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=r.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)}return a!==n&&a&&(r.child.flags|=8192),zu(r,r.updateQueue),yt(r),null;case 4:return Jt(),n===null&&nm(r.stateNode.containerInfo),yt(r),null;case 10:return vs(r.type),yt(r),null;case 19:if(ue(qt),d=r.memoizedState,d===null)return yt(r),null;if(l=(r.flags&128)!==0,f=d.rendering,f===null)if(l)Ol(d,!1);else{if(bt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(f=ku(n),f!==null){for(r.flags|=128,Ol(d,!1),n=f.updateQueue,r.updateQueue=n,zu(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)Bp(a,n),a=a.sibling;return se(qt,qt.current&1|2),r.child}n=n.sibling}d.tail!==null&&yn()>Hu&&(r.flags|=128,l=!0,Ol(d,!1),r.lanes=4194304)}else{if(!l)if(n=ku(f),n!==null){if(r.flags|=128,l=!0,n=n.updateQueue,r.updateQueue=n,zu(r,n),Ol(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!et)return yt(r),null}else 2*yn()-d.renderingStartTime>Hu&&a!==536870912&&(r.flags|=128,l=!0,Ol(d,!1),r.lanes=4194304);d.isBackwards?(f.sibling=r.child,r.child=f):(n=d.last,n!==null?n.sibling=f:r.child=f,d.last=f)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=yn(),r.sibling=null,n=qt.current,se(qt,l?n&1|2:n&1),r):(yt(r),null);case 22:case 23:return ws(r),rf(),l=r.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(yt(r),r.subtreeFlags&6&&(r.flags|=8192)):yt(r),a=r.updateQueue,a!==null&&zu(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),n!==null&&ue(ua),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),vs(zt),yt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function wS(n,r){switch(Hh(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return vs(zt),Jt(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return cr(r),null;case 13:if(ws(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));pl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return ue(qt),null;case 4:return Jt(),null;case 10:return vs(r.type),null;case 22:case 23:return ws(r),rf(),n!==null&&ue(ua),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return vs(zt),null;case 25:return null;default:return null}}function g_(n,r){switch(Hh(r),r.tag){case 3:vs(zt),Jt();break;case 26:case 27:case 5:cr(r);break;case 4:Jt();break;case 13:ws(r);break;case 19:ue(qt);break;case 10:vs(r.type);break;case 22:case 23:ws(r),rf(),n!==null&&ue(ua);break;case 24:vs(zt)}}function Pl(n,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&n)===n){l=void 0;var f=a.create,E=a.inst;l=f(),E.destroy=l}a=a.next}while(a!==d)}}catch(T){ut(r,r.return,T)}}function ni(n,r,a){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&n)===n){var E=l.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,d=r;var N=a,q=T;try{q()}catch(J){ut(d,N,J)}}}l=l.next}while(l!==f)}}catch(J){ut(r,r.return,J)}}function p_(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{ry(r,a)}catch(l){ut(n,n.return,l)}}}function y_(n,r,a){a.props=ha(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){ut(n,r,l)}}function Ml(n,r){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(d){ut(n,r,d)}}function Ur(n,r){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){ut(n,r,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){ut(n,r,d)}else a.current=null}function __(n){var r=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){ut(n,n.return,d)}}function Of(n,r,a){try{var l=n.stateNode;BS(l,n.type,a,r),l[wt]=r}catch(d){ut(n,n.return,d)}}function v_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ui(n.type)||n.tag===4}function Pf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||v_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ui(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Mf(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(n),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Ju));else if(l!==4&&(l===27&&ui(n.type)&&(a=n.stateNode,r=null),n=n.child,n!==null))for(Mf(n,r,a),n=n.sibling;n!==null;)Mf(n,r,a),n=n.sibling}function qu(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(l!==4&&(l===27&&ui(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(qu(n,r,a),n=n.sibling;n!==null;)qu(n,r,a),n=n.sibling}function E_(n){var r=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);sn(r,l,a),r[At]=n,r[wt]=a}catch(f){ut(n,n.return,f)}}var Ss=!1,It=!1,kf=!1,w_=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function TS(n,r){if(n=n.containerInfo,im=id,n=Op(n),Oh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var E=0,T=-1,N=-1,q=0,J=0,ee=n,H=null;t:for(;;){for(var F;ee!==a||d!==0&&ee.nodeType!==3||(T=E+d),ee!==f||l!==0&&ee.nodeType!==3||(N=E+l),ee.nodeType===3&&(E+=ee.nodeValue.length),(F=ee.firstChild)!==null;)H=ee,ee=F;for(;;){if(ee===n)break t;if(H===a&&++q===d&&(T=E),H===f&&++J===l&&(N=E),(F=ee.nextSibling)!==null)break;ee=H,H=ee.parentNode}ee=F}a=T===-1||N===-1?null:{start:T,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(am={focusedElem:n,selectionRange:a},id=!1,Kt=r;Kt!==null;)if(r=Kt,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,Kt=n;else for(;Kt!==null;){switch(r=Kt,f=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&f!==null){n=void 0,a=r,d=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Ce=ha(a.type,d,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(Ce,f),l.__reactInternalSnapshotBeforeUpdate=n}catch(Te){ut(a,a.return,Te)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)cm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":cm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Kt=n;break}Kt=r.return}}function T_(n,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ri(n,a),l&4&&Pl(5,a);break;case 1:if(ri(n,a),l&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(E){ut(a,a.return,E)}else{var d=ha(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(d,r,n.__reactInternalSnapshotBeforeUpdate)}catch(E){ut(a,a.return,E)}}l&64&&p_(a),l&512&&Ml(a,a.return);break;case 3:if(ri(n,a),l&64&&(n=a.updateQueue,n!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ry(n,r)}catch(E){ut(a,a.return,E)}}break;case 27:r===null&&l&4&&E_(a);case 26:case 5:ri(n,a),r===null&&l&4&&__(a),l&512&&Ml(a,a.return);break;case 12:ri(n,a);break;case 13:ri(n,a),l&4&&A_(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=DS.bind(null,a),XS(n,a))));break;case 22:if(l=a.memoizedState!==null||Ss,!l){r=r!==null&&r.memoizedState!==null||It,d=Ss;var f=It;Ss=l,(It=r)&&!f?si(n,a,(a.subtreeFlags&8772)!==0):ri(n,a),Ss=d,It=f}break;case 30:break;default:ri(n,a)}}function b_(n){var r=n.alternate;r!==null&&(n.alternate=null,b_(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Zt(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var mt=null,In=!1;function As(n,r,a){for(a=a.child;a!==null;)S_(n,r,a),a=a.sibling}function S_(n,r,a){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(ft,a)}catch{}switch(a.tag){case 26:It||Ur(a,r),As(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:It||Ur(a,r);var l=mt,d=In;ui(a.type)&&(mt=a.stateNode,In=!1),As(n,r,a),Hl(a.stateNode),mt=l,In=d;break;case 5:It||Ur(a,r);case 6:if(l=mt,d=In,mt=null,As(n,r,a),mt=l,In=d,mt!==null)if(In)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(a.stateNode)}catch(f){ut(a,r,f)}else try{mt.removeChild(a.stateNode)}catch(f){ut(a,r,f)}break;case 18:mt!==null&&(In?(n=mt,hv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Wl(n)):hv(mt,a.stateNode));break;case 4:l=mt,d=In,mt=a.stateNode.containerInfo,In=!0,As(n,r,a),mt=l,In=d;break;case 0:case 11:case 14:case 15:It||ni(2,a,r),It||ni(4,a,r),As(n,r,a);break;case 1:It||(Ur(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&y_(a,r,l)),As(n,r,a);break;case 21:As(n,r,a);break;case 22:It=(l=It)||a.memoizedState!==null,As(n,r,a),It=l;break;default:As(n,r,a)}}function A_(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Wl(n)}catch(a){ut(r,r.return,a)}}function bS(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new w_),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new w_),r;default:throw Error(i(435,n.tag))}}function Vf(n,r){var a=bS(n);r.forEach(function(l){var d=OS.bind(null,n,l);a.has(l)||(a.add(l),l.then(d,d))})}function jn(n,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],f=n,E=r,T=E;e:for(;T!==null;){switch(T.tag){case 27:if(ui(T.type)){mt=T.stateNode,In=!1;break e}break;case 5:mt=T.stateNode,In=!1;break e;case 3:case 4:mt=T.stateNode.containerInfo,In=!0;break e}T=T.return}if(mt===null)throw Error(i(160));S_(f,E,d),mt=null,In=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)x_(r,n),r=r.sibling}var pr=null;function x_(n,r){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:jn(r,n),Un(n),l&4&&(ni(3,n,n.return),Pl(3,n),ni(5,n,n.return));break;case 1:jn(r,n),Un(n),l&512&&(It||a===null||Ur(a,a.return)),l&64&&Ss&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=pr;if(jn(r,n),Un(n),l&512&&(It||a===null||Ur(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[vn]||f[At]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),sn(f,l,a),f[At]=n,xt(f),l=f;break e;case"link":var E=Ev("link","href",d).get(l+(a.href||""));if(E){for(var T=0;T<E.length;T++)if(f=E[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(T,1);break t}}f=d.createElement(l),sn(f,l,a),d.head.appendChild(f);break;case"meta":if(E=Ev("meta","content",d).get(l+(a.content||""))){for(T=0;T<E.length;T++)if(f=E[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(T,1);break t}}f=d.createElement(l),sn(f,l,a),d.head.appendChild(f);break;default:throw Error(i(468,l))}f[At]=n,xt(f),l=f}n.stateNode=l}else wv(d,n.type,n.stateNode);else n.stateNode=vv(d,l,n.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?wv(d,n.type,n.stateNode):vv(d,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Of(n,n.memoizedProps,a.memoizedProps)}break;case 27:jn(r,n),Un(n),l&512&&(It||a===null||Ur(a,a.return)),a!==null&&l&4&&Of(n,n.memoizedProps,a.memoizedProps);break;case 5:if(jn(r,n),Un(n),l&512&&(It||a===null||Ur(a,a.return)),n.flags&32){d=n.stateNode;try{Xn(d,"")}catch(F){ut(n,n.return,F)}}l&4&&n.stateNode!=null&&(d=n.memoizedProps,Of(n,d,a!==null?a.memoizedProps:d)),l&1024&&(kf=!0);break;case 6:if(jn(r,n),Un(n),l&4){if(n.stateNode===null)throw Error(i(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(F){ut(n,n.return,F)}}break;case 3:if(nd=null,d=pr,pr=ed(r.containerInfo),jn(r,n),pr=d,Un(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Wl(r.containerInfo)}catch(F){ut(n,n.return,F)}kf&&(kf=!1,R_(n));break;case 4:l=pr,pr=ed(n.stateNode.containerInfo),jn(r,n),Un(n),pr=l;break;case 12:jn(r,n),Un(n);break;case 13:jn(r,n),Un(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Bf=yn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Vf(n,l)));break;case 22:d=n.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,q=Ss,J=It;if(Ss=q||d,It=J||N,jn(r,n),It=J,Ss=q,Un(n),l&8192)e:for(r=n.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(a===null||N||Ss||It||fa(n)),a=null,r=n;;){if(r.tag===5||r.tag===26){if(a===null){N=a=r;try{if(f=N.stateNode,d)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=N.stateNode;var ee=N.memoizedProps.style,H=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;T.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(F){ut(N,N.return,F)}}}else if(r.tag===6){if(a===null){N=r;try{N.stateNode.nodeValue=d?"":N.memoizedProps}catch(F){ut(N,N.return,F)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Vf(n,a))));break;case 19:jn(r,n),Un(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Vf(n,l)));break;case 30:break;case 21:break;default:jn(r,n),Un(n)}}function Un(n){var r=n.flags;if(r&2){try{for(var a,l=n.return;l!==null;){if(v_(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,f=Pf(n);qu(n,f,d);break;case 5:var E=a.stateNode;a.flags&32&&(Xn(E,""),a.flags&=-33);var T=Pf(n);qu(n,T,E);break;case 3:case 4:var N=a.stateNode.containerInfo,q=Pf(n);Mf(n,q,N);break;default:throw Error(i(161))}}catch(J){ut(n,n.return,J)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function R_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;R_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function ri(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)T_(n,r.alternate,r),r=r.sibling}function fa(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:ni(4,r,r.return),fa(r);break;case 1:Ur(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&y_(r,r.return,a),fa(r);break;case 27:Hl(r.stateNode);case 26:case 5:Ur(r,r.return),fa(r);break;case 22:r.memoizedState===null&&fa(r);break;case 30:fa(r);break;default:fa(r)}n=n.sibling}}function si(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,d=n,f=r,E=f.flags;switch(f.tag){case 0:case 11:case 15:si(d,f,a),Pl(4,f);break;case 1:if(si(d,f,a),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(q){ut(l,l.return,q)}if(l=f,d=l.updateQueue,d!==null){var T=l.stateNode;try{var N=d.shared.hiddenCallbacks;if(N!==null)for(d.shared.hiddenCallbacks=null,d=0;d<N.length;d++)ny(N[d],T)}catch(q){ut(l,l.return,q)}}a&&E&64&&p_(f),Ml(f,f.return);break;case 27:E_(f);case 26:case 5:si(d,f,a),a&&l===null&&E&4&&__(f),Ml(f,f.return);break;case 12:si(d,f,a);break;case 13:si(d,f,a),a&&E&4&&A_(d,f);break;case 22:f.memoizedState===null&&si(d,f,a),Ml(f,f.return);break;case 30:break;default:si(d,f,a)}r=r.sibling}}function Lf(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&vl(a))}function jf(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&vl(n))}function zr(n,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)I_(n,r,a,l),r=r.sibling}function I_(n,r,a,l){var d=r.flags;switch(r.tag){case 0:case 11:case 15:zr(n,r,a,l),d&2048&&Pl(9,r);break;case 1:zr(n,r,a,l);break;case 3:zr(n,r,a,l),d&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&vl(n)));break;case 12:if(d&2048){zr(n,r,a,l),n=r.stateNode;try{var f=r.memoizedProps,E=f.id,T=f.onPostCommit;typeof T=="function"&&T(E,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){ut(r,r.return,N)}}else zr(n,r,a,l);break;case 13:zr(n,r,a,l);break;case 23:break;case 22:f=r.stateNode,E=r.alternate,r.memoizedState!==null?f._visibility&2?zr(n,r,a,l):kl(n,r):f._visibility&2?zr(n,r,a,l):(f._visibility|=2,oo(n,r,a,l,(r.subtreeFlags&10256)!==0)),d&2048&&Lf(E,r);break;case 24:zr(n,r,a,l),d&2048&&jf(r.alternate,r);break;default:zr(n,r,a,l)}}function oo(n,r,a,l,d){for(d=d&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var f=n,E=r,T=a,N=l,q=E.flags;switch(E.tag){case 0:case 11:case 15:oo(f,E,T,N,d),Pl(8,E);break;case 23:break;case 22:var J=E.stateNode;E.memoizedState!==null?J._visibility&2?oo(f,E,T,N,d):kl(f,E):(J._visibility|=2,oo(f,E,T,N,d)),d&&q&2048&&Lf(E.alternate,E);break;case 24:oo(f,E,T,N,d),d&&q&2048&&jf(E.alternate,E);break;default:oo(f,E,T,N,d)}r=r.sibling}}function kl(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,l=r,d=l.flags;switch(l.tag){case 22:kl(a,l),d&2048&&Lf(l.alternate,l);break;case 24:kl(a,l),d&2048&&jf(l.alternate,l);break;default:kl(a,l)}r=r.sibling}}var Vl=8192;function lo(n){if(n.subtreeFlags&Vl)for(n=n.child;n!==null;)C_(n),n=n.sibling}function C_(n){switch(n.tag){case 26:lo(n),n.flags&Vl&&n.memoizedState!==null&&lA(pr,n.memoizedState,n.memoizedProps);break;case 5:lo(n);break;case 3:case 4:var r=pr;pr=ed(n.stateNode.containerInfo),lo(n),pr=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=Vl,Vl=16777216,lo(n),Vl=r):lo(n));break;default:lo(n)}}function N_(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Ll(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Kt=l,O_(l,n)}N_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)D_(n),n=n.sibling}function D_(n){switch(n.tag){case 0:case 11:case 15:Ll(n),n.flags&2048&&ni(9,n,n.return);break;case 3:Ll(n);break;case 12:Ll(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Bu(n)):Ll(n);break;default:Ll(n)}}function Bu(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Kt=l,O_(l,n)}N_(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:ni(8,r,r.return),Bu(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Bu(r));break;default:Bu(r)}n=n.sibling}}function O_(n,r){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:ni(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:vl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Kt=l;else e:for(a=n;Kt!==null;){l=Kt;var d=l.sibling,f=l.return;if(b_(l),l===a){Kt=null;break e}if(d!==null){d.return=f,Kt=d;break e}Kt=f}}}var SS={getCacheForType:function(n){var r=cn(zt),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a}},AS=typeof WeakMap=="function"?WeakMap:Map,rt=0,ht=null,je=null,Qe=0,st=0,zn=null,ii=!1,co=!1,Uf=!1,xs=0,bt=0,ai=0,ma=0,zf=0,sr=0,uo=0,jl=null,Cn=null,qf=!1,Bf=0,Hu=1/0,Fu=null,oi=null,rn=0,li=null,ho=null,fo=0,Hf=0,Ff=null,P_=null,Ul=0,Gf=null;function qn(){if((rt&2)!==0&&Qe!==0)return Qe&-Qe;if(Q.T!==null){var n=Za;return n!==0?n:Jf()}return xr()}function M_(){sr===0&&(sr=(Qe&536870912)===0||et?ji():536870912);var n=rr.current;return n!==null&&(n.flags|=32),sr}function Bn(n,r,a){(n===ht&&(st===2||st===9)||n.cancelPendingCommit!==null)&&(mo(n,0),ci(n,Qe,sr,!1)),dr(n,a),((rt&2)===0||n!==ht)&&(n===ht&&((rt&2)===0&&(ma|=a),bt===4&&ci(n,Qe,sr,!1)),qr(n))}function k_(n,r,a){if((rt&6)!==0)throw Error(i(327));var l=!a&&(r&124)===0&&(r&n.expiredLanes)===0||is(n,r),d=l?IS(n,r):Yf(n,r,!0),f=l;do{if(d===0){co&&!l&&ci(n,r,0,!1);break}else{if(a=n.current.alternate,f&&!xS(a)){d=Yf(n,r,!1),f=!1;continue}if(d===2){if(f=r,n.errorRecoveryDisabledLanes&f)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var T=n;d=jl;var N=T.current.memoizedState.isDehydrated;if(N&&(mo(T,E).flags|=256),E=Yf(T,E,!1),E!==2){if(Uf&&!N){T.errorRecoveryDisabledLanes|=f,ma|=f,d=4;break e}f=Cn,Cn=d,f!==null&&(Cn===null?Cn=f:Cn.push.apply(Cn,f))}d=E}if(f=!1,d!==2)continue}}if(d===1){mo(n,0),ci(n,r,0,!0);break}e:{switch(l=n,f=d,f){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ci(l,r,sr,!ii);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(d=Bf+300-yn(),10<d)){if(ci(l,r,sr,!ii),Hs(l,0,!0)!==0)break e;l.timeoutHandle=uv(V_.bind(null,l,a,Cn,Fu,qf,r,sr,ma,uo,ii,f,2,-0,0),d);break e}V_(l,a,Cn,Fu,qf,r,sr,ma,uo,ii,f,0,-0,0)}}break}while(!0);qr(n)}function V_(n,r,a,l,d,f,E,T,N,q,J,ee,H,F){if(n.timeoutHandle=-1,ee=r.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(Ql={stylesheets:null,count:0,unsuspend:oA},C_(r),ee=cA(),ee!==null)){n.cancelPendingCommit=ee(H_.bind(null,n,r,f,a,l,d,E,T,N,J,1,H,F)),ci(n,f,E,!q);return}H_(n,r,f,a,l,d,E,T,N)}function xS(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],f=d.getSnapshot;d=d.value;try{if(!Vn(f(),d))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ci(n,r,a,l){r&=~zf,r&=~ma,n.suspendedLanes|=r,n.pingedLanes&=~r,l&&(n.warmLanes|=r),l=n.expirationTimes;for(var d=r;0<d;){var f=31-Ht(d),E=1<<f;l[f]=-1,d&=~E}a!==0&&Yn(n,a,r)}function Gu(){return(rt&6)===0?(zl(0),!1):!0}function Qf(){if(je!==null){if(st===0)var n=je.return;else n=je,_s=la=null,cf(n),io=null,Nl=0,n=je;for(;n!==null;)g_(n.alternate,n),n=n.return;je=null}}function mo(n,r){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,FS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Qf(),ht=n,je=a=gs(n.current,null),Qe=r,st=0,zn=null,ii=!1,co=is(n,r),Uf=!1,uo=sr=zf=ma=ai=bt=0,Cn=jl=null,qf=!1,(r&8)!==0&&(r|=r&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=r;0<l;){var d=31-Ht(l),f=1<<d;r|=n[d],l&=~f}return xs=r,fu(),a}function L_(n,r){Ve=null,Q.H=Ou,r===wl||r===Tu?(r=ey(),st=3):r===Wp?(r=ey(),st=4):st=r===t_?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,zn=r,je===null&&(bt=1,Lu(n,Zn(r,n.current)))}function j_(){var n=Q.H;return Q.H=Ou,n===null?Ou:n}function U_(){var n=Q.A;return Q.A=SS,n}function Kf(){bt=4,ii||(Qe&4194048)!==Qe&&rr.current!==null||(co=!0),(ai&134217727)===0&&(ma&134217727)===0||ht===null||ci(ht,Qe,sr,!1)}function Yf(n,r,a){var l=rt;rt|=2;var d=j_(),f=U_();(ht!==n||Qe!==r)&&(Fu=null,mo(n,r)),r=!1;var E=bt;e:do try{if(st!==0&&je!==null){var T=je,N=zn;switch(st){case 8:Qf(),E=6;break e;case 3:case 2:case 9:case 6:rr.current===null&&(r=!0);var q=st;if(st=0,zn=null,go(n,T,N,q),a&&co){E=0;break e}break;default:q=st,st=0,zn=null,go(n,T,N,q)}}RS(),E=bt;break}catch(J){L_(n,J)}while(!0);return r&&n.shellSuspendCounter++,_s=la=null,rt=l,Q.H=d,Q.A=f,je===null&&(ht=null,Qe=0,fu()),E}function RS(){for(;je!==null;)z_(je)}function IS(n,r){var a=rt;rt|=2;var l=j_(),d=U_();ht!==n||Qe!==r?(Fu=null,Hu=yn()+500,mo(n,r)):co=is(n,r);e:do try{if(st!==0&&je!==null){r=je;var f=zn;t:switch(st){case 1:st=0,zn=null,go(n,r,f,1);break;case 2:case 9:if(Jp(f)){st=0,zn=null,q_(r);break}r=function(){st!==2&&st!==9||ht!==n||(st=7),qr(n)},f.then(r,r);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:Jp(f)?(st=0,zn=null,q_(r)):(st=0,zn=null,go(n,r,f,7));break;case 5:var E=null;switch(je.tag){case 26:E=je.memoizedState;case 5:case 27:var T=je;if(!E||Tv(E)){st=0,zn=null;var N=T.sibling;if(N!==null)je=N;else{var q=T.return;q!==null?(je=q,Qu(q)):je=null}break t}}st=0,zn=null,go(n,r,f,5);break;case 6:st=0,zn=null,go(n,r,f,6);break;case 8:Qf(),bt=6;break e;default:throw Error(i(462))}}CS();break}catch(J){L_(n,J)}while(!0);return _s=la=null,Q.H=l,Q.A=d,rt=a,je!==null?0:(ht=null,Qe=0,fu(),bt)}function CS(){for(;je!==null&&!Ra();)z_(je)}function z_(n){var r=f_(n.alternate,n,xs);n.memoizedProps=n.pendingProps,r===null?Qu(n):je=r}function q_(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=o_(a,r,r.pendingProps,r.type,void 0,Qe);break;case 11:r=o_(a,r,r.pendingProps,r.type.render,r.ref,Qe);break;case 5:cf(r);default:g_(a,r),r=je=Bp(r,xs),r=f_(a,r,xs)}n.memoizedProps=n.pendingProps,r===null?Qu(n):je=r}function go(n,r,a,l){_s=la=null,cf(r),io=null,Nl=0;var d=r.return;try{if(_S(n,d,r,a,Qe)){bt=1,Lu(n,Zn(a,n.current)),je=null;return}}catch(f){if(d!==null)throw je=d,f;bt=1,Lu(n,Zn(a,n.current)),je=null;return}r.flags&32768?(et||l===1?n=!0:co||(Qe&536870912)!==0?n=!1:(ii=n=!0,(l===2||l===9||l===3||l===6)&&(l=rr.current,l!==null&&l.tag===13&&(l.flags|=16384))),B_(r,n)):Qu(r)}function Qu(n){var r=n;do{if((r.flags&32768)!==0){B_(r,ii);return}n=r.return;var a=ES(r.alternate,r,xs);if(a!==null){je=a;return}if(r=r.sibling,r!==null){je=r;return}je=r=n}while(r!==null);bt===0&&(bt=5)}function B_(n,r){do{var a=wS(n.alternate,n);if(a!==null){a.flags&=32767,je=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){je=n;return}je=n=a}while(n!==null);bt=6,je=null}function H_(n,r,a,l,d,f,E,T,N){n.cancelPendingCommit=null;do Ku();while(rn!==0);if((rt&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(f=r.lanes|r.childLanes,f|=Lh,hr(n,a,f,E,T,N),n===ht&&(je=ht=null,Qe=0),ho=r,li=n,fo=a,Hf=f,Ff=d,P_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,PS(ts,function(){return Y_(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,d=re.p,re.p=2,E=rt,rt|=4;try{TS(n,r,a)}finally{rt=E,re.p=d,Q.T=l}}rn=1,F_(),G_(),Q_()}}function F_(){if(rn===1){rn=0;var n=li,r=ho,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=re.p;re.p=2;var d=rt;rt|=4;try{x_(r,n);var f=am,E=Op(n.containerInfo),T=f.focusedElem,N=f.selectionRange;if(E!==T&&T&&T.ownerDocument&&Dp(T.ownerDocument.documentElement,T)){if(N!==null&&Oh(T)){var q=N.start,J=N.end;if(J===void 0&&(J=q),"selectionStart"in T)T.selectionStart=q,T.selectionEnd=Math.min(J,T.value.length);else{var ee=T.ownerDocument||document,H=ee&&ee.defaultView||window;if(H.getSelection){var F=H.getSelection(),Ce=T.textContent.length,Te=Math.min(N.start,Ce),lt=N.end===void 0?Te:Math.min(N.end,Ce);!F.extend&&Te>lt&&(E=lt,lt=Te,Te=E);var j=Np(T,Te),k=Np(T,lt);if(j&&k&&(F.rangeCount!==1||F.anchorNode!==j.node||F.anchorOffset!==j.offset||F.focusNode!==k.node||F.focusOffset!==k.offset)){var z=ee.createRange();z.setStart(j.node,j.offset),F.removeAllRanges(),Te>lt?(F.addRange(z),F.extend(k.node,k.offset)):(z.setEnd(k.node,k.offset),F.addRange(z))}}}}for(ee=[],F=T;F=F.parentNode;)F.nodeType===1&&ee.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ee.length;T++){var Z=ee[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}id=!!im,am=im=null}finally{rt=d,re.p=l,Q.T=a}}n.current=r,rn=2}}function G_(){if(rn===2){rn=0;var n=li,r=ho,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=re.p;re.p=2;var d=rt;rt|=4;try{T_(n,r.alternate,r)}finally{rt=d,re.p=l,Q.T=a}}rn=3}}function Q_(){if(rn===4||rn===3){rn=0,$o();var n=li,r=ho,a=fo,l=P_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?rn=5:(rn=0,ho=li=null,K_(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(oi=null),Gs(a),r=r.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(ft,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=Q.T,d=re.p,re.p=2,Q.T=null;try{for(var f=n.onRecoverableError,E=0;E<l.length;E++){var T=l[E];f(T.value,{componentStack:T.stack})}}finally{Q.T=r,re.p=d}}(fo&3)!==0&&Ku(),qr(n),d=n.pendingLanes,(a&4194090)!==0&&(d&42)!==0?n===Gf?Ul++:(Ul=0,Gf=n):Ul=0,zl(0)}}function K_(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,vl(r)))}function Ku(n){return F_(),G_(),Q_(),Y_()}function Y_(){if(rn!==5)return!1;var n=li,r=Hf;Hf=0;var a=Gs(fo),l=Q.T,d=re.p;try{re.p=32>a?32:a,Q.T=null,a=Ff,Ff=null;var f=li,E=fo;if(rn=0,ho=li=null,fo=0,(rt&6)!==0)throw Error(i(331));var T=rt;if(rt|=4,D_(f.current),I_(f,f.current,E,a),rt=T,zl(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(ft,f)}catch{}return!0}finally{re.p=d,Q.T=l,K_(n,r)}}function X_(n,r,a){r=Zn(a,r),r=bf(n.stateNode,r,2),n=Js(n,r,2),n!==null&&(dr(n,2),qr(n))}function ut(n,r,a){if(n.tag===3)X_(n,n,a);else for(;r!==null;){if(r.tag===3){X_(r,n,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(oi===null||!oi.has(l))){n=Zn(a,n),a=Zy(2),l=Js(r,a,2),l!==null&&(e_(a,l,r,n),dr(l,2),qr(l));break}}r=r.return}}function Xf(n,r,a){var l=n.pingCache;if(l===null){l=n.pingCache=new AS;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(a)||(Uf=!0,d.add(a),n=NS.bind(null,n,r,a),r.then(n,n))}function NS(n,r,a){var l=n.pingCache;l!==null&&l.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ht===n&&(Qe&a)===a&&(bt===4||bt===3&&(Qe&62914560)===Qe&&300>yn()-Bf?(rt&2)===0&&mo(n,0):zf|=a,uo===Qe&&(uo=0)),qr(n)}function $_(n,r){r===0&&(r=Ui()),n=Xa(n,r),n!==null&&(dr(n,r),qr(n))}function DS(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),$_(n,a)}function OS(n,r){var a=0;switch(n.tag){case 13:var l=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),$_(n,a)}function PS(n,r){return es(n,r)}var Yu=null,po=null,$f=!1,Xu=!1,Wf=!1,ga=0;function qr(n){n!==po&&n.next===null&&(po===null?Yu=po=n:po=po.next=n),Xu=!0,$f||($f=!0,kS())}function zl(n,r){if(!Wf&&Xu){Wf=!0;do for(var a=!1,l=Yu;l!==null;){if(n!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var E=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-Ht(42|n)+1)-1,f&=d&~(E&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,ev(l,f))}else f=Qe,f=Hs(l,l===ht?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||is(l,f)||(a=!0,ev(l,f));l=l.next}while(a);Wf=!1}}function MS(){W_()}function W_(){Xu=$f=!1;var n=0;ga!==0&&(HS()&&(n=ga),ga=0);for(var r=yn(),a=null,l=Yu;l!==null;){var d=l.next,f=J_(l,r);f===0?(l.next=null,a===null?Yu=d:a.next=d,d===null&&(po=a)):(a=l,(n!==0||(f&3)!==0)&&(Xu=!0)),l=d}zl(n)}function J_(n,r){for(var a=n.suspendedLanes,l=n.pingedLanes,d=n.expirationTimes,f=n.pendingLanes&-62914561;0<f;){var E=31-Ht(f),T=1<<E,N=d[E];N===-1?((T&a)===0||(T&l)!==0)&&(d[E]=Fs(T,r)):N<=r&&(n.expiredLanes|=T),f&=~T}if(r=ht,a=Qe,a=Hs(n,n===r?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===r&&(st===2||st===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Sr(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||is(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(l!==null&&Sr(l),Gs(a)){case 2:case 8:a=zs;break;case 32:a=ts;break;case 268435456:a=qs;break;default:a=ts}return l=Z_.bind(null,n),a=es(a,l),n.callbackPriority=r,n.callbackNode=a,r}return l!==null&&l!==null&&Sr(l),n.callbackPriority=2,n.callbackNode=null,2}function Z_(n,r){if(rn!==0&&rn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Ku()&&n.callbackNode!==a)return null;var l=Qe;return l=Hs(n,n===ht?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(k_(n,l,r),J_(n,yn()),n.callbackNode!=null&&n.callbackNode===a?Z_.bind(null,n):null)}function ev(n,r){if(Ku())return null;k_(n,r,!0)}function kS(){GS(function(){(rt&6)!==0?es(ur,MS):W_()})}function Jf(){return ga===0&&(ga=ji()),ga}function tv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:La(""+n)}function nv(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function VS(n,r,a,l,d){if(r==="submit"&&a&&a.stateNode===d){var f=tv((d[wt]||null).action),E=l.submitter;E&&(r=(r=E[wt]||null)?tv(r.formAction):E.getAttribute("formAction"),r!==null&&(f=r,E=null));var T=new ja("action","action",null,l,d);n.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ga!==0){var N=E?nv(d,E):new FormData(d);_f(a,{pending:!0,data:N,method:d.method,action:f},null,N)}}else typeof f=="function"&&(T.preventDefault(),N=E?nv(d,E):new FormData(d),_f(a,{pending:!0,data:N,method:d.method,action:f},f,N))},currentTarget:d}]})}}for(var Zf=0;Zf<Vh.length;Zf++){var em=Vh[Zf],LS=em.toLowerCase(),jS=em[0].toUpperCase()+em.slice(1);gr(LS,"on"+jS)}gr(kp,"onAnimationEnd"),gr(Vp,"onAnimationIteration"),gr(Lp,"onAnimationStart"),gr("dblclick","onDoubleClick"),gr("focusin","onFocus"),gr("focusout","onBlur"),gr(tS,"onTransitionRun"),gr(nS,"onTransitionStart"),gr(rS,"onTransitionCancel"),gr(jp,"onTransitionEnd"),as("onMouseEnter",["mouseout","mouseover"]),as("onMouseLeave",["mouseout","mouseover"]),as("onPointerEnter",["pointerout","pointerover"]),as("onPointerLeave",["pointerout","pointerover"]),fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fr("onBeforeInput",["compositionend","keypress","textInput","paste"]),fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),US=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ql));function rv(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],d=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var E=l.length-1;0<=E;E--){var T=l[E],N=T.instance,q=T.currentTarget;if(T=T.listener,N!==f&&d.isPropagationStopped())break e;f=T,d.currentTarget=q;try{f(d)}catch(J){Vu(J)}d.currentTarget=null,f=N}else for(E=0;E<l.length;E++){if(T=l[E],N=T.instance,q=T.currentTarget,T=T.listener,N!==f&&d.isPropagationStopped())break e;f=T,d.currentTarget=q;try{f(d)}catch(J){Vu(J)}d.currentTarget=null,f=N}}}}function Ue(n,r){var a=r[qi];a===void 0&&(a=r[qi]=new Set);var l=n+"__bubble";a.has(l)||(sv(r,n,2,!1),a.add(l))}function tm(n,r,a){var l=0;r&&(l|=4),sv(a,n,l,r)}var $u="_reactListening"+Math.random().toString(36).slice(2);function nm(n){if(!n[$u]){n[$u]=!0,Zo.forEach(function(a){a!=="selectionchange"&&(US.has(a)||tm(a,!1,n),tm(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[$u]||(r[$u]=!0,tm("selectionchange",!1,r))}}function sv(n,r,a,l){switch(Iv(r)){case 2:var d=hA;break;case 8:d=fA;break;default:d=pm}a=d.bind(null,r,a,n),d=void 0,!Wn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function rm(n,r,a,l,d){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var T=l.stateNode.containerInfo;if(T===d)break;if(E===4)for(E=l.return;E!==null;){var N=E.tag;if((N===3||N===4)&&E.stateNode.containerInfo===d)return;E=E.return}for(;T!==null;){if(E=En(T),E===null)return;if(N=E.tag,N===5||N===6||N===26||N===27){l=f=E;continue e}T=T.parentNode}}l=l.return}Jc(function(){var q=f,J=$n(a),ee=[];e:{var H=Up.get(n);if(H!==void 0){var F=ja,Ce=n;switch(n){case"keypress":if(Or(a)===0)break e;case"keydown":case"keyup":F=Fa;break;case"focusin":Ce="focus",F=qa;break;case"focusout":Ce="blur",F=qa;break;case"beforeblur":case"afterblur":F=qa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Jn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Ih;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=au;break;case kp:case Vp:case Lp:F=Ba;break;case jp:F=lu;break;case"scroll":case"scrollend":F=Zc;break;case"wheel":F=Ga;break;case"copy":case"cut":case"paste":F=Ha;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=dl;break;case"toggle":case"beforetoggle":F=uu}var Te=(r&4)!==0,lt=!Te&&(n==="scroll"||n==="scrollend"),j=Te?H!==null?H+"Capture":null:H;Te=[];for(var k=q,z;k!==null;){var Z=k;if(z=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||z===null||j===null||(Z=Yi(k,j),Z!=null&&Te.push(Bl(k,Z,z))),lt)break;k=k.return}0<Te.length&&(H=new F(H,Ce,null,a,J),ee.push({event:H,listeners:Te}))}}if((r&7)===0){e:{if(H=n==="mouseover"||n==="pointerover",F=n==="mouseout"||n==="pointerout",H&&a!==cs&&(Ce=a.relatedTarget||a.fromElement)&&(En(Ce)||Ce[xn]))break e;if((F||H)&&(H=J.window===J?J:(H=J.ownerDocument)?H.defaultView||H.parentWindow:window,F?(Ce=a.relatedTarget||a.toElement,F=q,Ce=Ce?En(Ce):null,Ce!==null&&(lt=c(Ce),Te=Ce.tag,Ce!==lt||Te!==5&&Te!==27&&Te!==6)&&(Ce=null)):(F=null,Ce=q),F!==Ce)){if(Te=Jn,Z="onMouseLeave",j="onMouseEnter",k="mouse",(n==="pointerout"||n==="pointerover")&&(Te=dl,Z="onPointerLeave",j="onPointerEnter",k="pointer"),lt=F==null?H:Ir(F),z=Ce==null?H:Ir(Ce),H=new Te(Z,k+"leave",F,a,J),H.target=lt,H.relatedTarget=z,Z=null,En(J)===q&&(Te=new Te(j,k+"enter",Ce,a,J),Te.target=z,Te.relatedTarget=lt,Z=Te),lt=Z,F&&Ce)t:{for(Te=F,j=Ce,k=0,z=Te;z;z=yo(z))k++;for(z=0,Z=j;Z;Z=yo(Z))z++;for(;0<k-z;)Te=yo(Te),k--;for(;0<z-k;)j=yo(j),z--;for(;k--;){if(Te===j||j!==null&&Te===j.alternate)break t;Te=yo(Te),j=yo(j)}Te=null}else Te=null;F!==null&&iv(ee,H,F,Te,!1),Ce!==null&&lt!==null&&iv(ee,lt,Ce,Te,!0)}}e:{if(H=q?Ir(q):window,F=H.nodeName&&H.nodeName.toLowerCase(),F==="select"||F==="input"&&H.type==="file")var pe=Sp;else if(Ut(H))if(Ap)pe=Jb;else{pe=$b;var Le=Xb}else F=H.nodeName,!F||F.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?q&&sl(q.elementType)&&(pe=Sp):pe=Wb;if(pe&&(pe=pe(n,q))){ms(ee,pe,a,J);break e}Le&&Le(n,H,q),n==="focusout"&&q&&H.type==="number"&&q.memoizedProps.value!=null&&Ks(H,"number",H.value)}switch(Le=q?Ir(q):window,n){case"focusin":(Ut(Le)||Le.contentEditable==="true")&&(Qa=Le,Ph=q,ml=null);break;case"focusout":ml=Ph=Qa=null;break;case"mousedown":Mh=!0;break;case"contextmenu":case"mouseup":case"dragend":Mh=!1,Pp(ee,a,J);break;case"selectionchange":if(eS)break;case"keydown":case"keyup":Pp(ee,a,J)}var _e;if(kr)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Fe?K(n,a)&&(Se="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(v&&a.locale!=="ko"&&(Fe||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Fe&&(_e=al()):(Dr=J,Ys="value"in Dr?Dr.value:Dr.textContent,Fe=!0)),Le=Wu(q,Se),0<Le.length&&(Se=new cl(Se,n,null,a,J),ee.push({event:Se,listeners:Le}),_e?Se.data=_e:(_e=le(a),_e!==null&&(Se.data=_e)))),(_e=p?jt(n,a):Ge(n,a))&&(Se=Wu(q,"onBeforeInput"),0<Se.length&&(Le=new cl("onBeforeInput","beforeinput",null,a,J),ee.push({event:Le,listeners:Se}),Le.data=_e)),VS(ee,n,q,a,J)}rv(ee,r)})}function Bl(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Wu(n,r){for(var a=r+"Capture",l=[];n!==null;){var d=n,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=Yi(n,a),d!=null&&l.unshift(Bl(n,d,f)),d=Yi(n,r),d!=null&&l.push(Bl(n,d,f))),n.tag===3)return l;n=n.return}return[]}function yo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function iv(n,r,a,l,d){for(var f=r._reactName,E=[];a!==null&&a!==l;){var T=a,N=T.alternate,q=T.stateNode;if(T=T.tag,N!==null&&N===l)break;T!==5&&T!==26&&T!==27||q===null||(N=q,d?(q=Yi(a,f),q!=null&&E.unshift(Bl(a,q,N))):d||(q=Yi(a,f),q!=null&&E.push(Bl(a,q,N)))),a=a.return}E.length!==0&&n.push({event:r,listeners:E})}var zS=/\r\n?/g,qS=/\u0000|\uFFFD/g;function av(n){return(typeof n=="string"?n:""+n).replace(zS,`
`).replace(qS,"")}function ov(n,r){return r=av(r),av(n)===r}function Ju(){}function ot(n,r,a,l,d,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Xn(n,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Xn(n,""+l);break;case"className":Cr(n,"class",l);break;case"tabIndex":Cr(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Cr(n,a,l);break;case"style":rl(n,l,f);break;case"data":if(r!=="object"){Cr(n,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=La(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&ot(n,r,"name",d.name,d,null),ot(n,r,"formEncType",d.formEncType,d,null),ot(n,r,"formMethod",d.formMethod,d,null),ot(n,r,"formTarget",d.formTarget,d,null)):(ot(n,r,"encType",d.encType,d,null),ot(n,r,"method",d.method,d,null),ot(n,r,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=La(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Ju);break;case"onScroll":l!=null&&Ue("scroll",n);break;case"onScrollEnd":l!=null&&Ue("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=La(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ue("beforetoggle",n),Ue("toggle",n),Qs(n,"popover",l);break;case"xlinkActuate":en(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":en(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":en(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":en(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":en(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":en(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":en(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":en(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":en(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Qs(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=xh.get(a)||a,Qs(n,a,l))}}function sm(n,r,a,l,d,f){switch(a){case"style":rl(n,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Xn(n,l):(typeof l=="number"||typeof l=="bigint")&&Xn(n,""+l);break;case"onScroll":l!=null&&Ue("scroll",n);break;case"onScrollEnd":l!=null&&Ue("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),r=a.slice(2,d?a.length-7:void 0),f=n[wt]||null,f=f!=null?f[a]:null,typeof f=="function"&&n.removeEventListener(r,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,l,d);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Qs(n,a,l)}}}function sn(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",n),Ue("load",n);var l=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var E=a[f];if(E!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ot(n,r,f,E,a,null)}}d&&ot(n,r,"srcSet",a.srcSet,a,null),l&&ot(n,r,"src",a.src,a,null);return;case"input":Ue("invalid",n);var T=f=E=d=null,N=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":d=J;break;case"type":E=J;break;case"checked":N=J;break;case"defaultChecked":q=J;break;case"value":f=J;break;case"defaultValue":T=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,r));break;default:ot(n,r,l,J,a,null)}}Gi(n,f,T,N,q,E,d,!1),Va(n);return;case"select":Ue("invalid",n),l=E=f=null;for(d in a)if(a.hasOwnProperty(d)&&(T=a[d],T!=null))switch(d){case"value":f=T;break;case"defaultValue":E=T;break;case"multiple":l=T;default:ot(n,r,d,T,a,null)}r=f,a=E,n.multiple=!!l,r!=null?ls(n,!!l,r,!1):a!=null&&ls(n,!!l,a,!0);return;case"textarea":Ue("invalid",n),f=d=l=null;for(E in a)if(a.hasOwnProperty(E)&&(T=a[E],T!=null))switch(E){case"value":l=T;break;case"defaultValue":d=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:ot(n,r,E,T,a,null)}Qi(n,l,d,f),Va(n);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ot(n,r,N,l,a,null)}return;case"dialog":Ue("beforetoggle",n),Ue("toggle",n),Ue("cancel",n),Ue("close",n);break;case"iframe":case"object":Ue("load",n);break;case"video":case"audio":for(l=0;l<ql.length;l++)Ue(ql[l],n);break;case"image":Ue("error",n),Ue("load",n);break;case"details":Ue("toggle",n);break;case"embed":case"source":case"link":Ue("error",n),Ue("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ot(n,r,q,l,a,null)}return;default:if(sl(r)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&sm(n,r,J,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&ot(n,r,T,l,a,null))}function BS(n,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,E=null,T=null,N=null,q=null,J=null;for(F in a){var ee=a[F];if(a.hasOwnProperty(F)&&ee!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":N=ee;default:l.hasOwnProperty(F)||ot(n,r,F,null,l,ee)}}for(var H in l){var F=l[H];if(ee=a[H],l.hasOwnProperty(H)&&(F!=null||ee!=null))switch(H){case"type":f=F;break;case"name":d=F;break;case"checked":q=F;break;case"defaultChecked":J=F;break;case"value":E=F;break;case"defaultValue":T=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,r));break;default:F!==ee&&ot(n,r,H,F,l,ee)}}kn(n,E,T,N,q,J,f,d);return;case"select":F=E=T=H=null;for(f in a)if(N=a[f],a.hasOwnProperty(f)&&N!=null)switch(f){case"value":break;case"multiple":F=N;default:l.hasOwnProperty(f)||ot(n,r,f,null,l,N)}for(d in l)if(f=l[d],N=a[d],l.hasOwnProperty(d)&&(f!=null||N!=null))switch(d){case"value":H=f;break;case"defaultValue":T=f;break;case"multiple":E=f;default:f!==N&&ot(n,r,d,f,l,N)}r=T,a=E,l=F,H!=null?ls(n,!!a,H,!1):!!l!=!!a&&(r!=null?ls(n,!!a,r,!0):ls(n,!!a,a?[]:"",!1));return;case"textarea":F=H=null;for(T in a)if(d=a[T],a.hasOwnProperty(T)&&d!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ot(n,r,T,null,l,d)}for(E in l)if(d=l[E],f=a[E],l.hasOwnProperty(E)&&(d!=null||f!=null))switch(E){case"value":H=d;break;case"defaultValue":F=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==f&&ot(n,r,E,d,l,f)}it(n,H,F);return;case"option":for(var Ce in a)if(H=a[Ce],a.hasOwnProperty(Ce)&&H!=null&&!l.hasOwnProperty(Ce))switch(Ce){case"selected":n.selected=!1;break;default:ot(n,r,Ce,null,l,H)}for(N in l)if(H=l[N],F=a[N],l.hasOwnProperty(N)&&H!==F&&(H!=null||F!=null))switch(N){case"selected":n.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:ot(n,r,N,H,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)H=a[Te],a.hasOwnProperty(Te)&&H!=null&&!l.hasOwnProperty(Te)&&ot(n,r,Te,null,l,H);for(q in l)if(H=l[q],F=a[q],l.hasOwnProperty(q)&&H!==F&&(H!=null||F!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,r));break;default:ot(n,r,q,H,l,F)}return;default:if(sl(r)){for(var lt in a)H=a[lt],a.hasOwnProperty(lt)&&H!==void 0&&!l.hasOwnProperty(lt)&&sm(n,r,lt,void 0,l,H);for(J in l)H=l[J],F=a[J],!l.hasOwnProperty(J)||H===F||H===void 0&&F===void 0||sm(n,r,J,H,l,F);return}}for(var j in a)H=a[j],a.hasOwnProperty(j)&&H!=null&&!l.hasOwnProperty(j)&&ot(n,r,j,null,l,H);for(ee in l)H=l[ee],F=a[ee],!l.hasOwnProperty(ee)||H===F||H==null&&F==null||ot(n,r,ee,H,l,F)}var im=null,am=null;function Zu(n){return n.nodeType===9?n:n.ownerDocument}function lv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cv(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function om(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var lm=null;function HS(){var n=window.event;return n&&n.type==="popstate"?n===lm?!1:(lm=n,!0):(lm=null,!1)}var uv=typeof setTimeout=="function"?setTimeout:void 0,FS=typeof clearTimeout=="function"?clearTimeout:void 0,dv=typeof Promise=="function"?Promise:void 0,GS=typeof queueMicrotask=="function"?queueMicrotask:typeof dv<"u"?function(n){return dv.resolve(null).then(n).catch(QS)}:uv;function QS(n){setTimeout(function(){throw n})}function ui(n){return n==="head"}function hv(n,r){var a=r,l=0,d=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var E=n.ownerDocument;if(a&1&&Hl(E.documentElement),a&2&&Hl(E.body),a&4)for(a=E.head,Hl(a),E=a.firstChild;E;){var T=E.nextSibling,N=E.nodeName;E[vn]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=T}}if(d===0){n.removeChild(f),Wl(r);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Wl(r)}function cm(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":cm(a),Zt(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function KS(n,r,a,l){for(;n.nodeType===1;){var d=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[vn])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(f=n.getAttribute("rel"),f==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(f!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(f=n.getAttribute("src"),(f!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===f)return n}else return n;if(n=yr(n.nextSibling),n===null)break}return null}function YS(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=yr(n.nextSibling),n===null))return null;return n}function um(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function XS(n,r){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function yr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var dm=null;function fv(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}function mv(n,r,a){switch(r=Zu(a),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Hl(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Zt(n)}var ir=new Map,gv=new Set;function ed(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Rs=re.d;re.d={f:$S,r:WS,D:JS,C:ZS,L:eA,m:tA,X:rA,S:nA,M:sA};function $S(){var n=Rs.f(),r=Gu();return n||r}function WS(n){var r=Rr(n);r!==null&&r.tag===5&&r.type==="form"?ky(r):Rs.r(n)}var _o=typeof document>"u"?null:document;function pv(n,r,a){var l=_o;if(l&&typeof r=="string"&&r){var d=Ot(r);d='link[rel="'+n+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),gv.has(d)||(gv.add(d),n={rel:n,crossOrigin:a,href:r},l.querySelector(d)===null&&(r=l.createElement("link"),sn(r,"link",n),xt(r),l.head.appendChild(r)))}}function JS(n){Rs.D(n),pv("dns-prefetch",n,null)}function ZS(n,r){Rs.C(n,r),pv("preconnect",n,r)}function eA(n,r,a){Rs.L(n,r,a);var l=_o;if(l&&n&&r){var d='link[rel="preload"][as="'+Ot(r)+'"]';r==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Ot(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Ot(a.imageSizes)+'"]')):d+='[href="'+Ot(n)+'"]';var f=d;switch(r){case"style":f=vo(n);break;case"script":f=Eo(n)}ir.has(f)||(n=w({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),ir.set(f,n),l.querySelector(d)!==null||r==="style"&&l.querySelector(Fl(f))||r==="script"&&l.querySelector(Gl(f))||(r=l.createElement("link"),sn(r,"link",n),xt(r),l.head.appendChild(r)))}}function tA(n,r){Rs.m(n,r);var a=_o;if(a&&n){var l=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+Ot(l)+'"][href="'+Ot(n)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Eo(n)}if(!ir.has(f)&&(n=w({rel:"modulepreload",href:n},r),ir.set(f,n),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Gl(f)))return}l=a.createElement("link"),sn(l,"link",n),xt(l),a.head.appendChild(l)}}}function nA(n,r,a){Rs.S(n,r,a);var l=_o;if(l&&n){var d=wn(l).hoistableStyles,f=vo(n);r=r||"default";var E=d.get(f);if(!E){var T={loading:0,preload:null};if(E=l.querySelector(Fl(f)))T.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":r},a),(a=ir.get(f))&&hm(n,a);var N=E=l.createElement("link");xt(N),sn(N,"link",n),N._p=new Promise(function(q,J){N.onload=q,N.onerror=J}),N.addEventListener("load",function(){T.loading|=1}),N.addEventListener("error",function(){T.loading|=2}),T.loading|=4,td(E,r,l)}E={type:"stylesheet",instance:E,count:1,state:T},d.set(f,E)}}}function rA(n,r){Rs.X(n,r);var a=_o;if(a&&n){var l=wn(a).hoistableScripts,d=Eo(n),f=l.get(d);f||(f=a.querySelector(Gl(d)),f||(n=w({src:n,async:!0},r),(r=ir.get(d))&&fm(n,r),f=a.createElement("script"),xt(f),sn(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function sA(n,r){Rs.M(n,r);var a=_o;if(a&&n){var l=wn(a).hoistableScripts,d=Eo(n),f=l.get(d);f||(f=a.querySelector(Gl(d)),f||(n=w({src:n,async:!0,type:"module"},r),(r=ir.get(d))&&fm(n,r),f=a.createElement("script"),xt(f),sn(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function yv(n,r,a,l){var d=(d=xe.current)?ed(d):null;if(!d)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=vo(a.href),a=wn(d).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=vo(a.href);var f=wn(d).hoistableStyles,E=f.get(n);if(E||(d=d.ownerDocument||d,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(n,E),(f=d.querySelector(Fl(n)))&&!f._p&&(E.instance=f,E.state.loading=5),ir.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ir.set(n,a),f||iA(d,n,a,E.state))),r&&l===null)throw Error(i(528,""));return E}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Eo(a),a=wn(d).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function vo(n){return'href="'+Ot(n)+'"'}function Fl(n){return'link[rel="stylesheet"]['+n+"]"}function _v(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function iA(n,r,a,l){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=n.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),sn(r,"link",a),xt(r),n.head.appendChild(r))}function Eo(n){return'[src="'+Ot(n)+'"]'}function Gl(n){return"script[async]"+n}function vv(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=n.querySelector('style[data-href~="'+Ot(a.href)+'"]');if(l)return r.instance=l,xt(l),l;var d=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),xt(l),sn(l,"style",d),td(l,a.precedence,n),r.instance=l;case"stylesheet":d=vo(a.href);var f=n.querySelector(Fl(d));if(f)return r.state.loading|=4,r.instance=f,xt(f),f;l=_v(a),(d=ir.get(d))&&hm(l,d),f=(n.ownerDocument||n).createElement("link"),xt(f);var E=f;return E._p=new Promise(function(T,N){E.onload=T,E.onerror=N}),sn(f,"link",l),r.state.loading|=4,td(f,a.precedence,n),r.instance=f;case"script":return f=Eo(a.src),(d=n.querySelector(Gl(f)))?(r.instance=d,xt(d),d):(l=a,(d=ir.get(f))&&(l=w({},a),fm(l,d)),n=n.ownerDocument||n,d=n.createElement("script"),xt(d),sn(d,"link",l),n.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,td(l,a.precedence,n));return r.instance}function td(n,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,E=0;E<l.length;E++){var T=l[E];if(T.dataset.precedence===r)f=T;else if(f!==d)break}f?f.parentNode.insertBefore(n,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function hm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function fm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var nd=null;function Ev(n,r,a){if(nd===null){var l=new Map,d=nd=new Map;d.set(a,l)}else d=nd,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),d=0;d<a.length;d++){var f=a[d];if(!(f[vn]||f[At]||n==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(r)||"";E=n+E;var T=l.get(E);T?T.push(f):l.set(E,[f])}}return l}function wv(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function aA(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Tv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Ql=null;function oA(){}function lA(n,r,a){if(Ql===null)throw Error(i(475));var l=Ql;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=vo(a.href),f=n.querySelector(Fl(d));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=rd.bind(l),n.then(l,l)),r.state.loading|=4,r.instance=f,xt(f);return}f=n.ownerDocument||n,a=_v(a),(d=ir.get(d))&&hm(a,d),f=f.createElement("link"),xt(f);var E=f;E._p=new Promise(function(T,N){E.onload=T,E.onerror=N}),sn(f,"link",a),r.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=rd.bind(l),n.addEventListener("load",r),n.addEventListener("error",r))}}function cA(){if(Ql===null)throw Error(i(475));var n=Ql;return n.stylesheets&&n.count===0&&mm(n,n.stylesheets),0<n.count?function(r){var a=setTimeout(function(){if(n.stylesheets&&mm(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(a)}}:null}function rd(){if(this.count--,this.count===0){if(this.stylesheets)mm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var sd=null;function mm(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,sd=new Map,r.forEach(uA,n),sd=null,rd.call(n))}function uA(n,r){if(!(r.state.loading&4)){var a=sd.get(n);if(a)var l=a.get(null);else{a=new Map,sd.set(n,a);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var E=d[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}d=r.instance,E=d.getAttribute("data-precedence"),f=a.get(E)||l,f===l&&a.set(null,d),a.set(E,d),this.count++,l=rd.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),r.state.loading|=4}}var Kl={$$typeof:oe,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function dA(n,r,a,l,d,f,E,T){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kn(0),this.hiddenUpdates=Kn(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function bv(n,r,a,l,d,f,E,T,N,q,J,ee){return n=new dA(n,r,a,E,T,N,q,ee),r=1,f===!0&&(r|=24),f=Ln(3,null,null,r),n.current=f,f.stateNode=n,r=Yh(),r.refCount++,n.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Jh(f),n}function Sv(n){return n?(n=$a,n):$a}function Av(n,r,a,l,d,f){d=Sv(d),l.context===null?l.context=d:l.pendingContext=d,l=Ws(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Js(n,l,r),a!==null&&(Bn(a,n,r),bl(a,n,r))}function xv(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function gm(n,r){xv(n,r),(n=n.alternate)&&xv(n,r)}function Rv(n){if(n.tag===13){var r=Xa(n,67108864);r!==null&&Bn(r,n,67108864),gm(n,67108864)}}var id=!0;function hA(n,r,a,l){var d=Q.T;Q.T=null;var f=re.p;try{re.p=2,pm(n,r,a,l)}finally{re.p=f,Q.T=d}}function fA(n,r,a,l){var d=Q.T;Q.T=null;var f=re.p;try{re.p=8,pm(n,r,a,l)}finally{re.p=f,Q.T=d}}function pm(n,r,a,l){if(id){var d=ym(l);if(d===null)rm(n,r,l,ad,a),Cv(n,l);else if(gA(d,n,r,a,l))l.stopPropagation();else if(Cv(n,l),r&4&&-1<mA.indexOf(n)){for(;d!==null;){var f=Rr(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=Mn(f.pendingLanes);if(E!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var N=1<<31-Ht(E);T.entanglements[1]|=N,E&=~N}qr(f),(rt&6)===0&&(Hu=yn()+500,zl(0))}}break;case 13:T=Xa(f,2),T!==null&&Bn(T,f,2),Gu(),gm(f,2)}if(f=ym(l),f===null&&rm(n,r,l,ad,a),f===d)break;d=f}d!==null&&l.stopPropagation()}else rm(n,r,l,null,a)}}function ym(n){return n=$n(n),_m(n)}var ad=null;function _m(n){if(ad=null,n=En(n),n!==null){var r=c(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=h(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return ad=n,null}function Iv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ia()){case ur:return 2;case zs:return 8;case ts:case Wo:return 32;case qs:return 268435456;default:return 32}default:return 32}}var vm=!1,di=null,hi=null,fi=null,Yl=new Map,Xl=new Map,mi=[],mA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cv(n,r){switch(n){case"focusin":case"focusout":di=null;break;case"dragenter":case"dragleave":hi=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":Yl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(r.pointerId)}}function $l(n,r,a,l,d,f){return n===null||n.nativeEvent!==f?(n={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},r!==null&&(r=Rr(r),r!==null&&Rv(r)),n):(n.eventSystemFlags|=l,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function gA(n,r,a,l,d){switch(r){case"focusin":return di=$l(di,n,r,a,l,d),!0;case"dragenter":return hi=$l(hi,n,r,a,l,d),!0;case"mouseover":return fi=$l(fi,n,r,a,l,d),!0;case"pointerover":var f=d.pointerId;return Yl.set(f,$l(Yl.get(f)||null,n,r,a,l,d)),!0;case"gotpointercapture":return f=d.pointerId,Xl.set(f,$l(Xl.get(f)||null,n,r,a,l,d)),!0}return!1}function Nv(n){var r=En(n.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){n.blockedOn=r,Da(n.priority,function(){if(a.tag===13){var l=qn();l=Ar(l);var d=Xa(a,l);d!==null&&Bn(d,a,l),gm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function od(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=ym(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);cs=l,a.target.dispatchEvent(l),cs=null}else return r=Rr(a),r!==null&&Rv(r),n.blockedOn=a,!1;r.shift()}return!0}function Dv(n,r,a){od(n)&&a.delete(r)}function pA(){vm=!1,di!==null&&od(di)&&(di=null),hi!==null&&od(hi)&&(hi=null),fi!==null&&od(fi)&&(fi=null),Yl.forEach(Dv),Xl.forEach(Dv)}function ld(n,r){n.blockedOn===r&&(n.blockedOn=null,vm||(vm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,pA)))}var cd=null;function Ov(n){cd!==n&&(cd=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){cd===n&&(cd=null);for(var r=0;r<n.length;r+=3){var a=n[r],l=n[r+1],d=n[r+2];if(typeof l!="function"){if(_m(l||a)===null)continue;break}var f=Rr(a);f!==null&&(n.splice(r,3),r-=3,_f(f,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function Wl(n){function r(N){return ld(N,n)}di!==null&&ld(di,n),hi!==null&&ld(hi,n),fi!==null&&ld(fi,n),Yl.forEach(r),Xl.forEach(r);for(var a=0;a<mi.length;a++){var l=mi[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<mi.length&&(a=mi[0],a.blockedOn===null);)Nv(a),a.blockedOn===null&&mi.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],f=a[l+1],E=d[wt]||null;if(typeof f=="function")E||Ov(a);else if(E){var T=null;if(f&&f.hasAttribute("formAction")){if(d=f,E=f[wt]||null)T=E.formAction;else if(_m(d)!==null)continue}else T=E.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),Ov(a)}}}function Em(n){this._internalRoot=n}ud.prototype.render=Em.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=qn();Av(a,l,n,r,null,null)},ud.prototype.unmount=Em.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Av(n.current,2,null,n,null,null),Gu(),r[xn]=null}};function ud(n){this._internalRoot=n}ud.prototype.unstable_scheduleHydration=function(n){if(n){var r=xr();n={blockedOn:null,target:n,priority:r};for(var a=0;a<mi.length&&r!==0&&r<mi[a].priority;a++);mi.splice(a,0,n),a===0&&Nv(n)}};var Pv=e.version;if(Pv!=="19.1.1")throw Error(i(527,Pv,"19.1.1"));re.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(r),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var yA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dd.isDisabled&&dd.supportsFiber)try{ft=dd.inject(yA),Ze=dd}catch{}}return Zl.createRoot=function(n,r){if(!o(n))throw Error(i(299));var a=!1,l="",d=Xy,f=$y,E=Wy,T=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(T=r.unstable_transitionCallbacks)),r=bv(n,1,!1,null,null,a,l,d,f,E,T,null),n[xn]=r.current,nm(n),new Em(r)},Zl.hydrateRoot=function(n,r,a){if(!o(n))throw Error(i(299));var l=!1,d="",f=Xy,E=$y,T=Wy,N=null,q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(q=a.formState)),r=bv(n,1,!0,r,a??null,l,d,f,E,T,N,q),r.context=Sv(null),a=r.current,l=qn(),l=Ar(l),d=Ws(l),d.callback=null,Js(a,d,l),a=l,r.current.lanes=a,dr(r,a),qr(r),n[xn]=r.current,nm(n),new ud(r)},Zl.version="19.1.1",Zl}var Hv;function IA(){if(Hv)return bm.exports;Hv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),bm.exports=RA(),bm.exports}var CA=IA();const NA=UE(CA);var ke=(s=>(s[s.Welcome=0]="Welcome",s[s.Setup=1]="Setup",s[s.Login=2]="Login",s[s.Profile=3]="Profile",s[s.Shop=4]="Shop",s[s.PackSelection=5]="PackSelection",s[s.RoundConfiguration=6]="RoundConfiguration",s[s.Game=7]="Game",s[s.RoundEnd=8]="RoundEnd",s[s.GameEnd=9]="GameEnd",s))(ke||{});const zE={CHANGES_BEFORE_AD:3};var ar=(s=>(s.Pack="pack",s.Question="question",s.Dare="dare",s))(ar||{}),lc=(s=>(s.Pending="pending",s.Discarded="discarded",s.Possible="possible",s.Accepted="accepted",s.Rejected="rejected",s))(lc||{});const gt={MAX_SUGGESTIONS_PER_DAY:5,MAX_SUGGESTIONS_PER_WEEK:15,MIN_TITLE_LENGTH:5,MAX_TITLE_LENGTH:100,MIN_CONTENT_LENGTH:10,MAX_CONTENT_LENGTH:500};var Hn=(s=>(s.PostGame="post_game",s.PostRound="post_round",s.QuestionChange="question_change",s.Banner="banner",s.Rewarded="rewarded",s.Interstitial="interstitial",s))(Hn||{});const Pn=({children:s,className:e})=>y.jsx("div",{className:`bg-gray-800 border border-purple-500/30 rounded-2xl shadow-lg shadow-purple-900/20 p-6 sm:p-8 ${e}`,children:s}),DA=({className:s})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Rm=({className:s})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),OA=({className:s})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),qE=({className:s})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),Ro=({className:s})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),PA=({className:s})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),BE=({className:s})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),MA=({className:s})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),kA=({className:s})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),VA=({players:s,setPlayers:e})=>{const[t,i]=$.useState(""),o=h=>{h.preventDefault(),t.trim()&&!s.includes(t.trim())&&(e([...s,t.trim()]),i(""))},c=h=>{e(s.filter((m,g)=>g!==h))};return y.jsxs(Pn,{children:[y.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-pink-400",children:"Aadir Jugadores"}),y.jsxs("form",{onSubmit:o,className:"flex flex-col gap-2 mb-4",children:[y.jsx("input",{type:"text",value:t,onChange:h=>i(h.target.value),placeholder:"Nombre del jugador",className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-purple-500"}),y.jsx("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md transition text-base",children:"Aadir"})]}),y.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:s.map((h,m)=>y.jsxs("li",{className:"flex justify-between items-center bg-gray-700/50 p-2 rounded-md animate-fade-in",children:[y.jsx("span",{className:"font-medium",children:h}),y.jsx("button",{onClick:()=>c(m),className:"text-gray-400 hover:text-red-500 transition",children:y.jsx(DA,{className:"w-5 h-5"})})]},m))})]})},Ne=({children:s,variant:e="primary",className:t,...i})=>{const o="px-6 py-3 font-bold rounded-lg text-white transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 disabled:opacity-50 disabled:cursor-not-allowed",c={primary:"bg-purple-600 hover:bg-purple-700 focus:ring-purple-500/50 shadow-lg shadow-purple-600/30",secondary:"bg-pink-500 hover:bg-pink-600 focus:ring-pink-500/50 shadow-lg shadow-pink-500/30",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500/50"};return y.jsx("button",{className:`${o} ${c[e]} ${t}`,...i,children:s})},LA=()=>{};var Fv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},jA=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const o=s[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[t++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[t++],h=s[t++],m=s[t++],g=((o&7)<<18|(c&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const c=s[t++],h=s[t++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},FE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const c=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,_=g?s[o+2]:0,w=c>>2,b=(c&3)<<4|m>>4;let A=(m&15)<<2|_>>6,I=_&63;g||(I=64,h||(A=64)),i.push(t[w],t[b],t[A],t[I])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(HE(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):jA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const c=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const _=o<s.length?t[s.charAt(o)]:64;++o;const b=o<s.length?t[s.charAt(o)]:64;if(++o,c==null||m==null||_==null||b==null)throw new UA;const A=c<<2|m>>4;if(i.push(A),_!==64){const I=m<<4&240|_>>2;if(i.push(I),b!==64){const L=_<<6&192|b;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class UA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zA=function(s){const e=HE(s);return FE.encodeByteArray(e,!0)},Dd=function(s){return zA(s).replace(/\./g,"")},GE=function(s){try{return FE.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=()=>qA().__FIREBASE_DEFAULTS__,HA=()=>{if(typeof process>"u"||typeof Fv>"u")return;const s=Fv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},FA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&GE(s[1]);return e&&JSON.parse(e)},th=()=>{try{return LA()||BA()||HA()||FA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},QE=s=>{var e,t;return(t=(e=th())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},GA=s=>{const e=QE(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},KE=()=>{var s;return(s=th())==null?void 0:s.config},YE=s=>{var e;return(e=th())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function XE(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Dd(JSON.stringify(t)),Dd(JSON.stringify(h)),""].join(".")}const cc={};function YA(){const s={prod:[],emulator:[]};for(const e of Object.keys(cc))cc[e]?s.emulator.push(e):s.prod.push(e);return s}function XA(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Gv=!1;function $E(s,e){if(typeof window>"u"||typeof document>"u"||!qo(window.location.host)||cc[s]===e||cc[s]||Gv)return;cc[s]=e;function t(A){return`__firebase__banner__${A}`}const i="__firebase__banner",c=YA().prod.length>0;function h(){const A=document.getElementById(i);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,I){A.setAttribute("width","24"),A.setAttribute("id",I),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function _(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Gv=!0,h()},A}function w(A,I){A.setAttribute("id",I),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function b(){const A=XA(i),I=t("text"),L=document.getElementById(I)||document.createElement("span"),G=t("learnmore"),B=document.getElementById(G)||document.createElement("a"),ie=t("preprendIcon"),ae=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const oe=A.element;m(oe),w(B,G);const me=_();g(ae,ie),oe.append(ae,L,B,me),document.body.appendChild(oe)}c?(L.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $A(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function WA(){var e;const s=(e=th())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function ex(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tx(){const s=pn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function nx(){return!WA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rx(){try{return typeof indexedDB=="object"}catch{return!1}}function sx(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="FirebaseError";class Ls extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=ix,Object.setPrototypeOf(this,Ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nc.prototype.create)}}class Nc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?ax(c,i):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Ls(o,m,i)}}function ax(s,e){return s.replace(ox,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const ox=/\{\$([^}]+)}/g;function lx(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ea(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const c=s[o],h=e[o];if(Qv(c)&&Qv(h)){if(!Ea(c,h))return!1}else if(c!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Qv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function nc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function rc(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function cx(s,e){const t=new ux(s,e);return t.subscribe.bind(t)}class ux{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");dx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Im),o.error===void 0&&(o.error=Im),o.complete===void 0&&(o.complete=Im);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dx(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Im(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(s){return s&&s._delegate?s._delegate:s}class wa{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new QA;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mx(e))try{this.getOrInitializeService({instanceIdentifier:pa})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pa){return this.instances.has(e)}getOptions(e=pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[c,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);i===m&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:fx(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=pa){return this.component?this.component.multipleInstances?e:pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fx(s){return s===pa?void 0:s}function mx(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(qe||(qe={}));const px={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},yx=qe.INFO,_x={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},vx=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=_x[e];if(o)console[o](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pg{constructor(e){this.name=e,this._logLevel=yx,this._logHandler=vx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?px[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const Ex=(s,e)=>e.some(t=>s instanceof t);let Kv,Yv;function wx(){return Kv||(Kv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tx(){return Yv||(Yv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WE=new WeakMap,qm=new WeakMap,JE=new WeakMap,Cm=new WeakMap,yg=new WeakMap;function bx(s){const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",h)},c=()=>{t(Ti(s.result)),o()},h=()=>{i(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&WE.set(t,s)}).catch(()=>{}),yg.set(e,s),e}function Sx(s){if(qm.has(s))return;const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",h),s.removeEventListener("abort",h)},c=()=>{t(),o()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",h),s.addEventListener("abort",h)});qm.set(s,e)}let Bm={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return qm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||JE.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ti(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Ax(s){Bm=s(Bm)}function xx(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(Nm(this),e,...t);return JE.set(i,e.sort?e.sort():[e]),Ti(i)}:Tx().includes(s)?function(...e){return s.apply(Nm(this),e),Ti(WE.get(this))}:function(...e){return Ti(s.apply(Nm(this),e))}}function Rx(s){return typeof s=="function"?xx(s):(s instanceof IDBTransaction&&Sx(s),Ex(s,wx())?new Proxy(s,Bm):s)}function Ti(s){if(s instanceof IDBRequest)return bx(s);if(Cm.has(s))return Cm.get(s);const e=Rx(s);return e!==s&&(Cm.set(s,e),yg.set(e,s)),e}const Nm=s=>yg.get(s);function Ix(s,e,{blocked:t,upgrade:i,blocking:o,terminated:c}={}){const h=indexedDB.open(s,e),m=Ti(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Ti(h.result),g.oldVersion,g.newVersion,Ti(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const Cx=["get","getKey","getAll","getAllKeys","count"],Nx=["put","add","delete","clear"],Dm=new Map;function Xv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Dm.get(e))return Dm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Nx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Cx.includes(t)))return;const c=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return i&&(_=_.index(m.shift())),(await Promise.all([_[t](...m),o&&g.done]))[0]};return Dm.set(e,c),c}Ax(s=>({...s,get:(e,t,i)=>Xv(e,t)||s.get(e,t,i),has:(e,t)=>!!Xv(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ox(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Ox(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hm="@firebase/app",$v="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new pg("@firebase/app"),Px="@firebase/app-compat",Mx="@firebase/analytics-compat",kx="@firebase/analytics",Vx="@firebase/app-check-compat",Lx="@firebase/app-check",jx="@firebase/auth",Ux="@firebase/auth-compat",zx="@firebase/database",qx="@firebase/data-connect",Bx="@firebase/database-compat",Hx="@firebase/functions",Fx="@firebase/functions-compat",Gx="@firebase/installations",Qx="@firebase/installations-compat",Kx="@firebase/messaging",Yx="@firebase/messaging-compat",Xx="@firebase/performance",$x="@firebase/performance-compat",Wx="@firebase/remote-config",Jx="@firebase/remote-config-compat",Zx="@firebase/storage",eR="@firebase/storage-compat",tR="@firebase/firestore",nR="@firebase/ai",rR="@firebase/firestore-compat",sR="firebase",iR="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="[DEFAULT]",aR={[Hm]:"fire-core",[Px]:"fire-core-compat",[kx]:"fire-analytics",[Mx]:"fire-analytics-compat",[Lx]:"fire-app-check",[Vx]:"fire-app-check-compat",[jx]:"fire-auth",[Ux]:"fire-auth-compat",[zx]:"fire-rtdb",[qx]:"fire-data-connect",[Bx]:"fire-rtdb-compat",[Hx]:"fire-fn",[Fx]:"fire-fn-compat",[Gx]:"fire-iid",[Qx]:"fire-iid-compat",[Kx]:"fire-fcm",[Yx]:"fire-fcm-compat",[Xx]:"fire-perf",[$x]:"fire-perf-compat",[Wx]:"fire-rc",[Jx]:"fire-rc-compat",[Zx]:"fire-gcs",[eR]:"fire-gcs-compat",[tR]:"fire-fst",[rR]:"fire-fst-compat",[nR]:"fire-vertex","fire-js":"fire-js",[sR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=new Map,oR=new Map,Gm=new Map;function Wv(s,e){try{s.container.addComponent(e)}catch(t){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Oo(s){const e=s.name;if(Gm.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;Gm.set(e,s);for(const t of Od.values())Wv(t,s);for(const t of oR.values())Wv(t,s);return!0}function _g(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Dn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new Nc("app","Firebase",lR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=iR;function ZE(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:Fm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw bi.create("bad-app-name",{appName:String(o)});if(t||(t=KE()),!t)throw bi.create("no-options");const c=Od.get(o);if(c){if(Ea(t,c.options)&&Ea(i,c.config))return c;throw bi.create("duplicate-app",{appName:o})}const h=new gx(o);for(const g of Gm.values())h.addComponent(g);const m=new cR(t,i,h);return Od.set(o,m),m}function ew(s=Fm){const e=Od.get(s);if(!e&&s===Fm&&KE())return ZE();if(!e)throw bi.create("no-app",{appName:s});return e}function Si(s,e,t){let i=aR[s]??s;t&&(i+=`-${t}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(h.join(" "));return}Oo(new wa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="firebase-heartbeat-database",dR=1,yc="firebase-heartbeat-store";let Om=null;function tw(){return Om||(Om=Ix(uR,dR,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(yc)}catch(t){console.warn(t)}}}}).catch(s=>{throw bi.create("idb-open",{originalErrorMessage:s.message})})),Om}async function hR(s){try{const t=(await tw()).transaction(yc),i=await t.objectStore(yc).get(nw(s));return await t.done,i}catch(e){if(e instanceof Ls)Ds.warn(e.message);else{const t=bi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(t.message)}}}async function Jv(s,e){try{const i=(await tw()).transaction(yc,"readwrite");await i.objectStore(yc).put(e,nw(s)),await i.done}catch(t){if(t instanceof Ls)Ds.warn(t.message);else{const i=bi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ds.warn(i.message)}}}function nw(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=1024,mR=30;class gR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yR(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Zv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>mR){const h=_R(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ds.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Zv(),{heartbeatsToSend:i,unsentEntries:o}=pR(this._heartbeatsCache.heartbeats),c=Dd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Ds.warn(t),""}}}function Zv(){return new Date().toISOString().substring(0,10)}function pR(s,e=fR){const t=[];let i=s.slice();for(const o of s){const c=t.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),e0(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),e0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class yR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rx()?sx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await hR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Jv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Jv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function e0(s){return Dd(JSON.stringify({version:2,heartbeats:s})).length}function _R(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(s){Oo(new wa("platform-logger",e=>new Dx(e),"PRIVATE")),Oo(new wa("heartbeat",e=>new gR(e),"PRIVATE")),Si(Hm,$v,s),Si(Hm,$v,"esm2020"),Si("fire-js","")}vR("");var ER="firebase",wR="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Si(ER,wR,"app");var t0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ai,rw;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,x){function R(){}R.prototype=x.prototype,D.D=x.prototype,D.prototype=new R,D.prototype.constructor=D,D.C=function(M,P,V){for(var C=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)C[Ae-2]=arguments[Ae];return x.prototype[P].apply(M,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,x,R){R||(R=0);var M=Array(16);if(typeof x=="string")for(var P=0;16>P;++P)M[P]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(P=0;16>P;++P)M[P]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=D.g[0],R=D.g[1],P=D.g[2];var V=D.g[3],C=x+(V^R&(P^V))+M[0]+3614090360&4294967295;x=R+(C<<7&4294967295|C>>>25),C=V+(P^x&(R^P))+M[1]+3905402710&4294967295,V=x+(C<<12&4294967295|C>>>20),C=P+(R^V&(x^R))+M[2]+606105819&4294967295,P=V+(C<<17&4294967295|C>>>15),C=R+(x^P&(V^x))+M[3]+3250441966&4294967295,R=P+(C<<22&4294967295|C>>>10),C=x+(V^R&(P^V))+M[4]+4118548399&4294967295,x=R+(C<<7&4294967295|C>>>25),C=V+(P^x&(R^P))+M[5]+1200080426&4294967295,V=x+(C<<12&4294967295|C>>>20),C=P+(R^V&(x^R))+M[6]+2821735955&4294967295,P=V+(C<<17&4294967295|C>>>15),C=R+(x^P&(V^x))+M[7]+4249261313&4294967295,R=P+(C<<22&4294967295|C>>>10),C=x+(V^R&(P^V))+M[8]+1770035416&4294967295,x=R+(C<<7&4294967295|C>>>25),C=V+(P^x&(R^P))+M[9]+2336552879&4294967295,V=x+(C<<12&4294967295|C>>>20),C=P+(R^V&(x^R))+M[10]+4294925233&4294967295,P=V+(C<<17&4294967295|C>>>15),C=R+(x^P&(V^x))+M[11]+2304563134&4294967295,R=P+(C<<22&4294967295|C>>>10),C=x+(V^R&(P^V))+M[12]+1804603682&4294967295,x=R+(C<<7&4294967295|C>>>25),C=V+(P^x&(R^P))+M[13]+4254626195&4294967295,V=x+(C<<12&4294967295|C>>>20),C=P+(R^V&(x^R))+M[14]+2792965006&4294967295,P=V+(C<<17&4294967295|C>>>15),C=R+(x^P&(V^x))+M[15]+1236535329&4294967295,R=P+(C<<22&4294967295|C>>>10),C=x+(P^V&(R^P))+M[1]+4129170786&4294967295,x=R+(C<<5&4294967295|C>>>27),C=V+(R^P&(x^R))+M[6]+3225465664&4294967295,V=x+(C<<9&4294967295|C>>>23),C=P+(x^R&(V^x))+M[11]+643717713&4294967295,P=V+(C<<14&4294967295|C>>>18),C=R+(V^x&(P^V))+M[0]+3921069994&4294967295,R=P+(C<<20&4294967295|C>>>12),C=x+(P^V&(R^P))+M[5]+3593408605&4294967295,x=R+(C<<5&4294967295|C>>>27),C=V+(R^P&(x^R))+M[10]+38016083&4294967295,V=x+(C<<9&4294967295|C>>>23),C=P+(x^R&(V^x))+M[15]+3634488961&4294967295,P=V+(C<<14&4294967295|C>>>18),C=R+(V^x&(P^V))+M[4]+3889429448&4294967295,R=P+(C<<20&4294967295|C>>>12),C=x+(P^V&(R^P))+M[9]+568446438&4294967295,x=R+(C<<5&4294967295|C>>>27),C=V+(R^P&(x^R))+M[14]+3275163606&4294967295,V=x+(C<<9&4294967295|C>>>23),C=P+(x^R&(V^x))+M[3]+4107603335&4294967295,P=V+(C<<14&4294967295|C>>>18),C=R+(V^x&(P^V))+M[8]+1163531501&4294967295,R=P+(C<<20&4294967295|C>>>12),C=x+(P^V&(R^P))+M[13]+2850285829&4294967295,x=R+(C<<5&4294967295|C>>>27),C=V+(R^P&(x^R))+M[2]+4243563512&4294967295,V=x+(C<<9&4294967295|C>>>23),C=P+(x^R&(V^x))+M[7]+1735328473&4294967295,P=V+(C<<14&4294967295|C>>>18),C=R+(V^x&(P^V))+M[12]+2368359562&4294967295,R=P+(C<<20&4294967295|C>>>12),C=x+(R^P^V)+M[5]+4294588738&4294967295,x=R+(C<<4&4294967295|C>>>28),C=V+(x^R^P)+M[8]+2272392833&4294967295,V=x+(C<<11&4294967295|C>>>21),C=P+(V^x^R)+M[11]+1839030562&4294967295,P=V+(C<<16&4294967295|C>>>16),C=R+(P^V^x)+M[14]+4259657740&4294967295,R=P+(C<<23&4294967295|C>>>9),C=x+(R^P^V)+M[1]+2763975236&4294967295,x=R+(C<<4&4294967295|C>>>28),C=V+(x^R^P)+M[4]+1272893353&4294967295,V=x+(C<<11&4294967295|C>>>21),C=P+(V^x^R)+M[7]+4139469664&4294967295,P=V+(C<<16&4294967295|C>>>16),C=R+(P^V^x)+M[10]+3200236656&4294967295,R=P+(C<<23&4294967295|C>>>9),C=x+(R^P^V)+M[13]+681279174&4294967295,x=R+(C<<4&4294967295|C>>>28),C=V+(x^R^P)+M[0]+3936430074&4294967295,V=x+(C<<11&4294967295|C>>>21),C=P+(V^x^R)+M[3]+3572445317&4294967295,P=V+(C<<16&4294967295|C>>>16),C=R+(P^V^x)+M[6]+76029189&4294967295,R=P+(C<<23&4294967295|C>>>9),C=x+(R^P^V)+M[9]+3654602809&4294967295,x=R+(C<<4&4294967295|C>>>28),C=V+(x^R^P)+M[12]+3873151461&4294967295,V=x+(C<<11&4294967295|C>>>21),C=P+(V^x^R)+M[15]+530742520&4294967295,P=V+(C<<16&4294967295|C>>>16),C=R+(P^V^x)+M[2]+3299628645&4294967295,R=P+(C<<23&4294967295|C>>>9),C=x+(P^(R|~V))+M[0]+4096336452&4294967295,x=R+(C<<6&4294967295|C>>>26),C=V+(R^(x|~P))+M[7]+1126891415&4294967295,V=x+(C<<10&4294967295|C>>>22),C=P+(x^(V|~R))+M[14]+2878612391&4294967295,P=V+(C<<15&4294967295|C>>>17),C=R+(V^(P|~x))+M[5]+4237533241&4294967295,R=P+(C<<21&4294967295|C>>>11),C=x+(P^(R|~V))+M[12]+1700485571&4294967295,x=R+(C<<6&4294967295|C>>>26),C=V+(R^(x|~P))+M[3]+2399980690&4294967295,V=x+(C<<10&4294967295|C>>>22),C=P+(x^(V|~R))+M[10]+4293915773&4294967295,P=V+(C<<15&4294967295|C>>>17),C=R+(V^(P|~x))+M[1]+2240044497&4294967295,R=P+(C<<21&4294967295|C>>>11),C=x+(P^(R|~V))+M[8]+1873313359&4294967295,x=R+(C<<6&4294967295|C>>>26),C=V+(R^(x|~P))+M[15]+4264355552&4294967295,V=x+(C<<10&4294967295|C>>>22),C=P+(x^(V|~R))+M[6]+2734768916&4294967295,P=V+(C<<15&4294967295|C>>>17),C=R+(V^(P|~x))+M[13]+1309151649&4294967295,R=P+(C<<21&4294967295|C>>>11),C=x+(P^(R|~V))+M[4]+4149444226&4294967295,x=R+(C<<6&4294967295|C>>>26),C=V+(R^(x|~P))+M[11]+3174756917&4294967295,V=x+(C<<10&4294967295|C>>>22),C=P+(x^(V|~R))+M[2]+718787259&4294967295,P=V+(C<<15&4294967295|C>>>17),C=R+(V^(P|~x))+M[9]+3951481745&4294967295,D.g[0]=D.g[0]+x&4294967295,D.g[1]=D.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+P&4294967295,D.g[3]=D.g[3]+V&4294967295}i.prototype.u=function(D,x){x===void 0&&(x=D.length);for(var R=x-this.blockSize,M=this.B,P=this.h,V=0;V<x;){if(P==0)for(;V<=R;)o(this,D,V),V+=this.blockSize;if(typeof D=="string"){for(;V<x;)if(M[P++]=D.charCodeAt(V++),P==this.blockSize){o(this,M),P=0;break}}else for(;V<x;)if(M[P++]=D[V++],P==this.blockSize){o(this,M),P=0;break}}this.h=P,this.o+=x},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var x=1;x<D.length-8;++x)D[x]=0;var R=8*this.o;for(x=D.length-8;x<D.length;++x)D[x]=R&255,R/=256;for(this.u(D),D=Array(16),x=R=0;4>x;++x)for(var M=0;32>M;M+=8)D[R++]=this.g[x]>>>M&255;return D};function c(D,x){var R=m;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=x(D)}function h(D,x){this.h=x;for(var R=[],M=!0,P=D.length-1;0<=P;P--){var V=D[P]|0;M&&V==x||(R[P]=V,M=!1)}this.g=R}var m={};function g(D){return-128<=D&&128>D?c(D,function(x){return new h([x|0],0>x?-1:0)}):new h([D|0],0>D?-1:0)}function _(D){if(isNaN(D)||!isFinite(D))return b;if(0>D)return B(_(-D));for(var x=[],R=1,M=0;D>=R;M++)x[M]=D/R|0,R*=4294967296;return new h(x,0)}function w(D,x){if(D.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(D.charAt(0)=="-")return B(w(D.substring(1),x));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=_(Math.pow(x,8)),M=b,P=0;P<D.length;P+=8){var V=Math.min(8,D.length-P),C=parseInt(D.substring(P,P+V),x);8>V?(V=_(Math.pow(x,V)),M=M.j(V).add(_(C))):(M=M.j(R),M=M.add(_(C)))}return M}var b=g(0),A=g(1),I=g(16777216);s=h.prototype,s.m=function(){if(G(this))return-B(this).m();for(var D=0,x=1,R=0;R<this.g.length;R++){var M=this.i(R);D+=(0<=M?M:4294967296+M)*x,x*=4294967296}return D},s.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(L(this))return"0";if(G(this))return"-"+B(this).toString(D);for(var x=_(Math.pow(D,6)),R=this,M="";;){var P=me(R,x).g;R=ie(R,P.j(x));var V=((0<R.g.length?R.g[0]:R.h)>>>0).toString(D);if(R=P,L(R))return V+M;for(;6>V.length;)V="0"+V;M=V+M}},s.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function L(D){if(D.h!=0)return!1;for(var x=0;x<D.g.length;x++)if(D.g[x]!=0)return!1;return!0}function G(D){return D.h==-1}s.l=function(D){return D=ie(this,D),G(D)?-1:L(D)?0:1};function B(D){for(var x=D.g.length,R=[],M=0;M<x;M++)R[M]=~D.g[M];return new h(R,~D.h).add(A)}s.abs=function(){return G(this)?B(this):this},s.add=function(D){for(var x=Math.max(this.g.length,D.g.length),R=[],M=0,P=0;P<=x;P++){var V=M+(this.i(P)&65535)+(D.i(P)&65535),C=(V>>>16)+(this.i(P)>>>16)+(D.i(P)>>>16);M=C>>>16,V&=65535,C&=65535,R[P]=C<<16|V}return new h(R,R[R.length-1]&-2147483648?-1:0)};function ie(D,x){return D.add(B(x))}s.j=function(D){if(L(this)||L(D))return b;if(G(this))return G(D)?B(this).j(B(D)):B(B(this).j(D));if(G(D))return B(this.j(B(D)));if(0>this.l(I)&&0>D.l(I))return _(this.m()*D.m());for(var x=this.g.length+D.g.length,R=[],M=0;M<2*x;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(var P=0;P<D.g.length;P++){var V=this.i(M)>>>16,C=this.i(M)&65535,Ae=D.i(P)>>>16,be=D.i(P)&65535;R[2*M+2*P]+=C*be,ae(R,2*M+2*P),R[2*M+2*P+1]+=V*be,ae(R,2*M+2*P+1),R[2*M+2*P+1]+=C*Ae,ae(R,2*M+2*P+1),R[2*M+2*P+2]+=V*Ae,ae(R,2*M+2*P+2)}for(M=0;M<x;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=x;M<2*x;M++)R[M]=0;return new h(R,0)};function ae(D,x){for(;(D[x]&65535)!=D[x];)D[x+1]+=D[x]>>>16,D[x]&=65535,x++}function oe(D,x){this.g=D,this.h=x}function me(D,x){if(L(x))throw Error("division by zero");if(L(D))return new oe(b,b);if(G(D))return x=me(B(D),x),new oe(B(x.g),B(x.h));if(G(x))return x=me(D,B(x)),new oe(B(x.g),x.h);if(30<D.g.length){if(G(D)||G(x))throw Error("slowDivide_ only works with positive integers.");for(var R=A,M=x;0>=M.l(D);)R=he(R),M=he(M);var P=Y(R,1),V=Y(M,1);for(M=Y(M,2),R=Y(R,2);!L(M);){var C=V.add(M);0>=C.l(D)&&(P=P.add(R),V=C),M=Y(M,1),R=Y(R,1)}return x=ie(D,P.j(x)),new oe(P,x)}for(P=b;0<=D.l(x);){for(R=Math.max(1,Math.floor(D.m()/x.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),V=_(R),C=V.j(x);G(C)||0<C.l(D);)R-=M,V=_(R),C=V.j(x);L(V)&&(V=A),P=P.add(V),D=ie(D,C)}return new oe(P,D)}s.A=function(D){return me(this,D).h},s.and=function(D){for(var x=Math.max(this.g.length,D.g.length),R=[],M=0;M<x;M++)R[M]=this.i(M)&D.i(M);return new h(R,this.h&D.h)},s.or=function(D){for(var x=Math.max(this.g.length,D.g.length),R=[],M=0;M<x;M++)R[M]=this.i(M)|D.i(M);return new h(R,this.h|D.h)},s.xor=function(D){for(var x=Math.max(this.g.length,D.g.length),R=[],M=0;M<x;M++)R[M]=this.i(M)^D.i(M);return new h(R,this.h^D.h)};function he(D){for(var x=D.g.length+1,R=[],M=0;M<x;M++)R[M]=D.i(M)<<1|D.i(M-1)>>>31;return new h(R,D.h)}function Y(D,x){var R=x>>5;x%=32;for(var M=D.g.length-R,P=[],V=0;V<M;V++)P[V]=0<x?D.i(V+R)>>>x|D.i(V+R+1)<<32-x:D.i(V+R);return new h(P,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,rw=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=w,Ai=h}).apply(typeof t0<"u"?t0:typeof self<"u"?self:typeof window<"u"?window:{});var hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sw,sc,iw,wd,Qm,aw,ow,lw;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,v){return u==Array.prototype||u==Object.prototype||(u[p]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof hd=="object"&&hd];for(var p=0;p<u.length;++p){var v=u[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var v=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var U=u[S];if(!(U in v))break e;v=v[U]}u=u[u.length-1],S=v[u],p=p(S),p!=S&&p!=null&&e(v,u,{configurable:!0,writable:!0,value:p})}}function c(u,p){u instanceof String&&(u+="");var v=0,S=!1,U={next:function(){if(!S&&v<u.length){var K=v++;return{value:p(K,u[K]),done:!1}}return S=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(u){return u||function(){return c(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function _(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function w(u,p,v){return u.call.apply(u.bind,arguments)}function b(u,p,v){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,S),u.apply(p,U)}}return function(){return u.apply(p,arguments)}}function A(u,p,v){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:b,A.apply(null,arguments)}function I(u,p){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function L(u,p){function v(){}v.prototype=p.prototype,u.aa=p.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(S,U,K){for(var le=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)le[Fe-2]=arguments[Fe];return p.prototype[U].apply(S,le)}}function G(u){const p=u.length;if(0<p){const v=Array(p);for(let S=0;S<p;S++)v[S]=u[S];return v}return[]}function B(u,p){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(g(S)){const U=u.length||0,K=S.length||0;u.length=U+K;for(let le=0;le<K;le++)u[U+le]=S[le]}else u.push(S)}}class ie{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ae(u){return/^[\s\xa0]*$/.test(u)}function oe(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function me(u){return me[" "](u),u}me[" "]=function(){};var he=oe().indexOf("Gecko")!=-1&&!(oe().toLowerCase().indexOf("webkit")!=-1&&oe().indexOf("Edge")==-1)&&!(oe().indexOf("Trident")!=-1||oe().indexOf("MSIE")!=-1)&&oe().indexOf("Edge")==-1;function Y(u,p,v){for(const S in u)p.call(v,u[S],S,u)}function D(u,p){for(const v in u)p.call(void 0,u[v],v,u)}function x(u){const p={};for(const v in u)p[v]=u[v];return p}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(u,p){let v,S;for(let U=1;U<arguments.length;U++){S=arguments[U];for(v in S)u[v]=S[v];for(let K=0;K<R.length;K++)v=R[K],Object.prototype.hasOwnProperty.call(S,v)&&(u[v]=S[v])}}function P(u){var p=1;u=u.split(":");const v=[];for(;0<p&&u.length;)v.push(u.shift()),p--;return u.length&&v.push(u.join(":")),v}function V(u){m.setTimeout(()=>{throw u},0)}function C(){var u=ye;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Ae{constructor(){this.h=this.g=null}add(p,v){const S=be.get();S.set(p,v),this.h?this.h.next=S:this.g=S,this.h=S}}var be=new ie(()=>new Q,u=>u.reset());class Q{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let re,X=!1,ye=new Ae,O=()=>{const u=m.Promise.resolve(void 0);re=()=>{u.then(ne)}};var ne=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(v){V(v)}var p=be;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}X=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};m.addEventListener("test",v,p),m.removeEventListener("test",v,p)}catch{}return u})();function Pe(u,p){if(se.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(he){e:{try{me(p.nodeName);var U=!0;break e}catch{}U=!1}U||(p=null)}}else v=="mouseover"?p=u.fromElement:v=="mouseout"&&(p=u.toElement);this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:xe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Pe.aa.h.call(this)}}L(Pe,se);var xe={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Dt="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Jt(u,p,v,S,U){this.listener=u,this.proxy=null,this.src=p,this.type=v,this.capture=!!S,this.ha=U,this.key=++$e,this.da=this.fa=!1}function lr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function cr(u){this.src=u,this.g={},this.h=0}cr.prototype.add=function(u,p,v,S,U){var K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);var le=es(u,p,S,U);return-1<le?(p=u[le],v||(p.fa=!1)):(p=new Jt(p,this.src,K,!!S,U),p.fa=v,u.push(p)),p};function br(u,p){var v=p.type;if(v in u.g){var S=u.g[v],U=Array.prototype.indexOf.call(S,p,void 0),K;(K=0<=U)&&Array.prototype.splice.call(S,U,1),K&&(lr(p),u.g[v].length==0&&(delete u.g[v],u.h--))}}function es(u,p,v,S){for(var U=0;U<u.length;++U){var K=u[U];if(!K.da&&K.listener==p&&K.capture==!!v&&K.ha==S)return U}return-1}var Sr="closure_lm_"+(1e6*Math.random()|0),Ra={};function $o(u,p,v,S,U){if(Array.isArray(p)){for(var K=0;K<p.length;K++)$o(u,p[K],v,S,U);return null}return v=Ca(v),u&&u[Dt]?u.K(p,v,_(S)?!!S.capture:!1,U):yn(u,p,v,!1,S,U)}function yn(u,p,v,S,U,K){if(!p)throw Error("Invalid event type");var le=_(U)?!!U.capture:!!U,Fe=qs(u);if(Fe||(u[Sr]=Fe=new cr(u)),v=Fe.add(p,v,S,le,K),v.proxy)return v;if(S=Ia(),v.proxy=S,S.src=u,S.listener=v,u.addEventListener)ve||(U=le),U===void 0&&(U=!1),u.addEventListener(p.toString(),S,U);else if(u.attachEvent)u.attachEvent(ts(p.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ia(){function u(v){return p.call(u.src,u.listener,v)}const p=Wo;return u}function ur(u,p,v,S,U){if(Array.isArray(p))for(var K=0;K<p.length;K++)ur(u,p[K],v,S,U);else S=_(S)?!!S.capture:!!S,v=Ca(v),u&&u[Dt]?(u=u.i,p=String(p).toString(),p in u.g&&(K=u.g[p],v=es(K,v,S,U),-1<v&&(lr(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete u.g[p],u.h--)))):u&&(u=qs(u))&&(p=u.g[p.toString()],u=-1,p&&(u=es(p,v,S,U)),(v=-1<u?p[u]:null)&&zs(v))}function zs(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Dt])br(p.i,u);else{var v=u.type,S=u.proxy;p.removeEventListener?p.removeEventListener(v,S,u.capture):p.detachEvent?p.detachEvent(ts(v),S):p.addListener&&p.removeListener&&p.removeListener(S),(v=qs(p))?(br(v,u),v.h==0&&(v.src=null,p[Sr]=null)):lr(u)}}}function ts(u){return u in Ra?Ra[u]:Ra[u]="on"+u}function Wo(u,p){if(u.da)u=!0;else{p=new Pe(p,this);var v=u.listener,S=u.ha||u.src;u.fa&&zs(u),u=v.call(S,p)}return u}function qs(u){return u=u[Sr],u instanceof cr?u:null}var Bs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ca(u){return typeof u=="function"?u:(u[Bs]||(u[Bs]=function(p){return u.handleEvent(p)}),u[Bs])}function ft(){ue.call(this),this.i=new cr(this),this.M=this,this.F=null}L(ft,ue),ft.prototype[Dt]=!0,ft.prototype.removeEventListener=function(u,p,v,S){ur(this,u,p,v,S)};function Ze(u,p){var v,S=u.F;if(S)for(v=[];S;S=S.F)v.push(S);if(u=u.M,S=p.type||p,typeof p=="string")p=new se(p,u);else if(p instanceof se)p.target=p.target||u;else{var U=p;p=new se(S,u),M(p,U)}if(U=!0,v)for(var K=v.length-1;0<=K;K--){var le=p.g=v[K];U=_n(le,S,!0,p)&&U}if(le=p.g=u,U=_n(le,S,!0,p)&&U,U=_n(le,S,!1,p)&&U,v)for(K=0;K<v.length;K++)le=p.g=v[K],U=_n(le,S,!1,p)&&U}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var v=u.g[p],S=0;S<v.length;S++)lr(v[S]);delete u.g[p],u.h--}}this.F=null},ft.prototype.K=function(u,p,v,S){return this.i.add(String(u),p,!1,v,S)},ft.prototype.L=function(u,p,v,S){return this.i.add(String(u),p,!0,v,S)};function _n(u,p,v,S){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var U=!0,K=0;K<p.length;++K){var le=p[K];if(le&&!le.da&&le.capture==v){var Fe=le.listener,jt=le.ha||le.src;le.fa&&br(u.i,le),U=Fe.call(jt,S)!==!1&&U}}return U&&!S.defaultPrevented}function Ht(u,p,v){if(typeof u=="function")v&&(u=A(u,v));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(u,p||0)}function Na(u){u.g=Ht(()=>{u.g=null,u.i&&(u.i=!1,Na(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Jo extends ue{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Na(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(u){ue.call(this),this.h=u,this.g={}}L(ns,ue);var rs=[];function ss(u){Y(u.g,function(p,v){this.g.hasOwnProperty(v)&&zs(p)},u),u.g={}}ns.prototype.N=function(){ns.aa.N.call(this),ss(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mn=m.JSON.stringify,Hs=m.JSON.parse,is=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function Fs(){}Fs.prototype.h=null;function ji(u){return u.h||(u.h=u.i())}function Ui(){}var Kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dr(){se.call(this,"d")}L(dr,se);function hr(){se.call(this,"c")}L(hr,se);var Yn={},zi=null;function Ar(){return zi=zi||new ft}Yn.La="serverreachability";function Gs(u){se.call(this,Yn.La,u)}L(Gs,se);function xr(u){const p=Ar();Ze(p,new Gs(p))}Yn.STAT_EVENT="statevent";function Da(u,p){se.call(this,Yn.STAT_EVENT,u),this.stat=p}L(Da,se);function dt(u){const p=Ar();Ze(p,new Da(p,u))}Yn.Ma="timingevent";function At(u,p){se.call(this,Yn.Ma,u),this.size=p}L(At,se);function wt(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},p)}function xn(){this.g=!0}xn.prototype.xa=function(){this.g=!1};function qi(u,p,v,S,U,K){u.info(function(){if(u.g)if(K)for(var le="",Fe=K.split("&"),jt=0;jt<Fe.length;jt++){var Ge=Fe[jt].split("=");if(1<Ge.length){var Gt=Ge[0];Ge=Ge[1];var Ut=Gt.split("_");le=2<=Ut.length&&Ut[1]=="type"?le+(Gt+"="+Ge+"&"):le+(Gt+"=redacted&")}}else le=null;else le=K;return"XMLHTTP REQ ("+S+") [attempt "+U+"]: "+p+`
`+v+`
`+le})}function ce(u,p,v,S,U,K,le){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+U+"]: "+p+`
`+v+`
`+K+" "+le})}function fe(u,p,v,S){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+vn(u,v)+(S?" "+S:"")})}function ze(u,p){u.info(function(){return"TIMEOUT: "+p})}xn.prototype.info=function(){};function vn(u,p){if(!u.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var S=v[u];if(!(2>S.length)){var U=S[1];if(Array.isArray(U)&&!(1>U.length)){var K=U[0];if(K!="noop"&&K!="stop"&&K!="close")for(var le=1;le<U.length;le++)U[le]=""}}}}return Mn(v)}catch{return p}}var Zt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},En={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rr;function Ir(){}L(Ir,Fs),Ir.prototype.g=function(){return new XMLHttpRequest},Ir.prototype.i=function(){return{}},Rr=new Ir;function wn(u,p,v,S){this.j=u,this.i=p,this.l=v,this.R=S||1,this.U=new ns(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xt}function xt(){this.i=null,this.g="",this.h=!1}var Zo={},Oa={};function fr(u,p,v){u.L=1,u.v=Qi(kn(p)),u.m=v,u.P=!0,as(u,null)}function as(u,p){u.F=Date.now(),Bi(u),u.A=kn(u.v);var v=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),il(v.i,"t",S),u.C=0,v=u.j.J,u.h=new xt,u.g=lu(u.j,v?p:null,!u.m),0<u.O&&(u.M=new Jo(A(u.Y,u,u.g),u.O)),p=u.U,v=u.g,S=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(rs[0]=U.toString()),U=rs);for(var K=0;K<U.length;K++){var le=$o(v,U[K],S||p.handleEvent,!1,p.h||p);if(!le)break;p.g[le.key]=le}p=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),xr(),qi(u.i,u.u,u.A,u.l,u.R,u.m)}wn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Jn(u)==3?p.j():this.Y(u)},wn.prototype.Y=function(u){try{if(u==this.g)e:{const Ut=Jn(this.g);var p=this.g.Ba();const ms=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||eu(this.g)))){this.J||Ut!=4||p==7||(p==8||0>=ms?xr(3):xr(2)),Qs(this);var v=this.g.Z();this.X=v;t:if(Kc(this)){var S=eu(this.g);u="";var U=S.length,K=Jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){en(this),Cr(this);var le="";break t}this.h.i=new m.TextDecoder}for(p=0;p<U;p++)this.h.h=!0,u+=this.h.i.decode(S[p],{stream:!(K&&p==U-1)});S.length=0,this.h.g+=u,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=v==200,ce(this.i,this.u,this.A,this.l,this.R,Ut,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,jt=this.g;if((Fe=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ae(Fe)){var Ge=Fe;break t}}Ge=null}if(v=Ge)fe(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hi(this,v);else{this.o=!1,this.s=3,dt(12),en(this),Cr(this);break e}}if(this.P){v=!0;let tn;for(;!this.J&&this.C<le.length;)if(tn=Yc(this,le),tn==Oa){Ut==4&&(this.s=4,dt(14),v=!1),fe(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==Zo){this.s=4,dt(15),fe(this.i,this.l,le,"[Invalid Chunk]"),v=!1;break}else fe(this.i,this.l,tn,null),Hi(this,tn);if(Kc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||le.length!=0||this.h.h||(this.s=1,dt(16),v=!1),this.o=this.o&&v,!v)fe(this.i,this.l,le,"[Invalid Chunked Response]"),en(this),Cr(this);else if(0<le.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),ea(Gt),Gt.M=!0,dt(11))}}else fe(this.i,this.l,le,null),Hi(this,le);Ut==4&&en(this),this.o&&!this.J&&(Ut==4?iu(this.j,this):(this.o=!1,Bi(this)))}else Ih(this.g),v==400&&0<le.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),en(this),Cr(this)}}}catch{}finally{}};function Kc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Yc(u,p){var v=u.C,S=p.indexOf(`
`,v);return S==-1?Oa:(v=Number(p.substring(v,S)),isNaN(v)?Zo:(S+=1,S+v>p.length?Oa:(p=p.slice(S,S+v),u.C=S+v,p)))}wn.prototype.cancel=function(){this.J=!0,en(this)};function Bi(u){u.S=Date.now()+u.I,Xc(u,u.I)}function Xc(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=wt(A(u.ba,u),p)}function Qs(u){u.B&&(m.clearTimeout(u.B),u.B=null)}wn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ze(this.i,this.A),this.L!=2&&(xr(),dt(17)),en(this),this.s=2,Cr(this)):Xc(this,this.S-u)};function Cr(u){u.j.G==0||u.J||iu(u.j,u)}function en(u){Qs(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,ss(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Hi(u,p){try{var v=u.j;if(v.G!=0&&(v.g==u||el(v.h,u))){if(!u.K&&el(v.h,u)&&v.G==3){try{var S=v.Da.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var U=S;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Fa(v),Ba(v);else break e;ul(v),dt(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=wt(A(v.Za,v),6e3));if(1>=Ma(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else fs(v,11)}else if((u.K||v.g==u)&&Fa(v),!ae(p))for(U=v.Da.g.parse(p),p=0;p<U.length;p++){let Ge=U[p];if(v.T=Ge[0],Ge=Ge[1],v.G==2)if(Ge[0]=="c"){v.K=Ge[1],v.ia=Ge[2];const Gt=Ge[3];Gt!=null&&(v.la=Gt,v.j.info("VER="+v.la));const Ut=Ge[4];Ut!=null&&(v.Aa=Ut,v.j.info("SVER="+v.Aa));const ms=Ge[5];ms!=null&&typeof ms=="number"&&0<ms&&(S=1.5*ms,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const tn=u.g;if(tn){const Vr=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vr){var K=S.h;K.g||Vr.indexOf("spdy")==-1&&Vr.indexOf("quic")==-1&&Vr.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(ka(K,K.h),K.h=null))}if(S.D){const hl=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;hl&&(S.ya=hl,it(S.I,S.D,hl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var le=u;if(S.qa=ou(S,S.J?S.ia:null,S.W),le.K){Tn(S.h,le);var Fe=le,jt=S.L;jt&&(Fe.I=jt),Fe.B&&(Qs(Fe),Bi(Fe)),S.g=le}else ru(S);0<v.i.length&&Ha(v)}else Ge[0]!="stop"&&Ge[0]!="close"||fs(v,7);else v.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?fs(v,7):ll(v):Ge[0]!="noop"&&v.l&&v.l.ta(Ge),v.v=0)}}xr(4)}catch{}}var $c=class{constructor(u,p){this.g=u,this.map=p}};function os(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ma(u){return u.h?1:u.g?u.g.size:0}function el(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function ka(u,p){u.g?u.g.add(p):u.h=p}function Tn(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}os.prototype.cancel=function(){if(this.i=tl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function tl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const v of u.g.values())p=p.concat(v.D);return p}return G(u.i)}function Sh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var p=[],v=u.length,S=0;S<v;S++)p.push(u[S]);return p}p=[],v=0;for(S in u)p[v++]=u[S];return p}function Va(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var p=[];u=u.length;for(var v=0;v<u;v++)p.push(v);return p}p=[],v=0;for(const S in u)p[v++]=S;return p}}}function nl(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var v=Va(u),S=Sh(u),U=S.length,K=0;K<U;K++)p.call(void 0,S[K],v&&v[K],u)}var Fi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ah(u,p){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var S=u[v].indexOf("="),U=null;if(0<=S){var K=u[v].substring(0,S);U=u[v].substring(S+1)}else K=u[v];p(K,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ot(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ot){this.h=u.h,Gi(this,u.j),this.o=u.o,this.g=u.g,Ks(this,u.s),this.l=u.l;var p=u.i,v=new cs;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),ls(this,v),this.m=u.m}else u&&(p=String(u).match(Fi))?(this.h=!1,Gi(this,p[1]||"",!0),this.o=Xn(p[2]||""),this.g=Xn(p[3]||"",!0),Ks(this,p[4]),this.l=Xn(p[5]||"",!0),ls(this,p[6]||"",!0),this.m=Xn(p[7]||"")):(this.h=!1,this.i=new cs(null,this.h))}Ot.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Ki(p,rl,!0),":");var v=this.g;return(v||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Ki(p,rl,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Ki(v,v.charAt(0)=="/"?xh:sl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Ki(v,La)),u.join("")};function kn(u){return new Ot(u)}function Gi(u,p,v){u.j=v?Xn(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Ks(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function ls(u,p,v){p instanceof cs?(u.i=p,Jc(u.i,u.h)):(v||(p=Ki(p,Rh)),u.i=new cs(p,u.h))}function it(u,p,v){u.i.set(p,v)}function Qi(u){return it(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Xn(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ki(u,p,v){return typeof u=="string"?(u=encodeURI(u).replace(p,Wc),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Wc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var rl=/[#\/\?@]/g,sl=/[#\?:]/g,xh=/[#\?]/g,Rh=/[#\?@]/g,La=/#/g;function cs(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function $n(u){u.g||(u.g=new Map,u.h=0,u.i&&Ah(u.i,function(p,v){u.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}s=cs.prototype,s.add=function(u,p){$n(this),this.i=null,u=Nr(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(p),this.h+=1,this};function us(u,p){$n(u),p=Nr(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function ds(u,p){return $n(u),p=Nr(u,p),u.g.has(p)}s.forEach=function(u,p){$n(this),this.g.forEach(function(v,S){v.forEach(function(U){u.call(p,U,S,this)},this)},this)},s.na=function(){$n(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let S=0;S<p.length;S++){const U=u[S];for(let K=0;K<U.length;K++)v.push(p[S])}return v},s.V=function(u){$n(this);let p=[];if(typeof u=="string")ds(this,u)&&(p=p.concat(this.g.get(Nr(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)p=p.concat(u[v])}return p},s.set=function(u,p){return $n(this),this.i=null,u=Nr(this,u),ds(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},s.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function il(u,p,v){us(u,p),0<v.length&&(u.i=null,u.g.set(Nr(u,p),G(v)),u.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var S=p[v];const K=encodeURIComponent(String(S)),le=this.V(S);for(S=0;S<le.length;S++){var U=K;le[S]!==""&&(U+="="+encodeURIComponent(String(le[S]))),u.push(U)}}return this.i=u.join("&")};function Nr(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Jc(u,p){p&&!u.j&&($n(u),u.i=null,u.g.forEach(function(v,S){var U=S.toLowerCase();S!=U&&(us(this,S),il(this,U,v))},u)),u.j=p}function Yi(u,p){const v=new xn;if(m.Image){const S=new Image;S.onload=I(Wn,v,"TestLoadImage: loaded",!0,p,S),S.onerror=I(Wn,v,"TestLoadImage: error",!1,p,S),S.onabort=I(Wn,v,"TestLoadImage: abort",!1,p,S),S.ontimeout=I(Wn,v,"TestLoadImage: timeout",!1,p,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else p(!1)}function mr(u,p){const v=new xn,S=new AbortController,U=setTimeout(()=>{S.abort(),Wn(v,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:S.signal}).then(K=>{clearTimeout(U),K.ok?Wn(v,"TestPingServer: ok",!0,p):Wn(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(U),Wn(v,"TestPingServer: error",!1,p)})}function Wn(u,p,v,S,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),S(v)}catch{}}function Xi(){this.g=new is}function Dr(u,p,v){const S=v||"";try{nl(u,function(U,K){let le=U;_(U)&&(le=Mn(U)),p.push(S+K+"="+encodeURIComponent(le))})}catch(U){throw p.push(S+"type="+encodeURIComponent("_badmap")),U}}function Ys(u){this.l=u.Ub||null,this.j=u.eb||!1}L(Ys,Fs),Ys.prototype.g=function(){return new hs(this.l,this.j)},Ys.prototype.i=(function(u){return function(){return u}})({});function hs(u,p){ft.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(hs,ft),s=hs.prototype,s.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Pr(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Or(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Pr(this)),this.g&&(this.readyState=3,Pr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;al(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function al(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Or(this):Pr(this),this.readyState==3&&al(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,Or(this))},s.Qa=function(u){this.g&&(this.response=u,Or(this))},s.ga=function(){this.g&&Or(this)};function Or(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Pr(u)}s.setRequestHeader=function(u,p){this.u.append(u,p)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=p.next();return u.join(`\r
`)};function Pr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(hs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ol(u){let p="";return Y(u,function(v,S){p+=S,p+=":",p+=v,p+=`\r
`}),p}function Ft(u,p,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=ol(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):it(u,p,v))}function tt(u){ft.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(tt,ft);var ja=/^https?$/i,$i=["POST","PUT"];s=tt.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,p,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rr.g(),this.v=this.o?ji(this.o):ji(Rr),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(K){Zc(this,K);return}if(u=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var U in S)v.set(U,S[U]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const K of S.keys())v.set(K,S.get(K));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),U=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call($i,p,void 0))||S||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,le]of v)this.g.setRequestHeader(K,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wi(this),this.u=!0,this.g.send(u),this.u=!1}catch(K){Zc(this,K)}};function Zc(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Ua(u),Mr(u)}function Ua(u){u.A||(u.A=!0,Ze(u,"complete"),Ze(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ze(this,"complete"),Ze(this,"abort"),Mr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mr(this,!0)),tt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?za(this):this.bb())},s.bb=function(){za(this)};function za(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Jn(u)!=4||u.Z()!=2)){if(u.u&&Jn(u)==4)Ht(u.Ea,0,u);else if(Ze(u,"readystatechange"),Jn(u)==4){u.h=!1;try{const le=u.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var S;if(S=le===0){var U=String(u.D).match(Fi)[1]||null;!U&&m.self&&m.self.location&&(U=m.self.location.protocol.slice(0,-1)),S=!ja.test(U?U.toLowerCase():"")}v=S}if(v)Ze(u,"complete"),Ze(u,"success");else{u.m=6;try{var K=2<Jn(u)?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.Z()+"]",Ua(u)}}finally{Mr(u)}}}}function Mr(u,p){if(u.g){Wi(u);const v=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Ze(u,"ready");try{v.onreadystatechange=S}catch{}}}function Wi(u){u.I&&(m.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function Jn(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<Jn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Hs(p)}};function eu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ih(u){const p={};u=(u.g&&2<=Jn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(ae(u[S]))continue;var v=P(u[S]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=p[U]||[];p[U]=K,K.push(v)}D(p,function(S){return S.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ji(u,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||p}function qa(u){this.Aa=0,this.i=[],this.j=new xn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ji("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ji("baseRetryDelayMs",5e3,u),this.cb=Ji("retryDelaySeedMs",1e4,u),this.Wa=Ji("forwardChannelMaxRetries",2,u),this.wa=Ji("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new os(u&&u.concurrentRequestLimit),this.Da=new Xi,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=qa.prototype,s.la=8,s.G=1,s.connect=function(u,p,v,S){dt(0),this.W=u,this.H=p||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=ou(this,null,this.W),Ha(this)};function ll(u){if(tu(u),u.G==3){var p=u.U++,v=kn(u.I);if(it(v,"SID",u.K),it(v,"RID",p),it(v,"TYPE","terminate"),Zi(u,v),p=new wn(u,u.j,p),p.L=2,p.v=Qi(kn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=p.v,v=!0),v||(p.g=lu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Bi(p)}au(u)}function Ba(u){u.g&&(ea(u),u.g.cancel(),u.g=null)}function tu(u){Ba(u),u.u&&(m.clearTimeout(u.u),u.u=null),Fa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function Ha(u){if(!Pa(u.h)&&!u.s){u.s=!0;var p=u.Ga;re||O(),X||(re(),X=!0),ye.add(p,u),u.B=0}}function Ch(u,p){return Ma(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=wt(A(u.Ga,u,p),dl(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new wn(this,this.j,u);let K=this.o;if(this.S&&(K?(K=x(K),M(K,this.S)):K=this.S),this.m!==null||this.O||(U.H=K,K=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(p+=S,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=nu(this,U,p),v=kn(this.I),it(v,"RID",u),it(v,"CVER",22),this.D&&it(v,"X-HTTP-Session-Id",this.D),Zi(this,v),K&&(this.O?p="headers="+encodeURIComponent(String(ol(K)))+"&"+p:this.m&&Ft(v,this.m,K)),ka(this.h,U),this.Ua&&it(v,"TYPE","init"),this.P?(it(v,"$req",p),it(v,"SID","null"),U.T=!0,fr(U,v,null)):fr(U,v,p),this.G=2}}else this.G==3&&(u?cl(this,u):this.i.length==0||Pa(this.h)||cl(this))};function cl(u,p){var v;p?v=p.l:v=u.U++;const S=kn(u.I);it(S,"SID",u.K),it(S,"RID",v),it(S,"AID",u.T),Zi(u,S),u.m&&u.o&&Ft(S,u.m,u.o),v=new wn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),p&&(u.i=p.D.concat(u.i)),p=nu(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ka(u.h,v),fr(v,S,p)}function Zi(u,p){u.H&&Y(u.H,function(v,S){it(p,S,v)}),u.l&&nl({},function(v,S){it(p,S,v)})}function nu(u,p,v){v=Math.min(u.i.length,v);var S=u.l?A(u.l.Na,u.l,u):null;e:{var U=u.i;let K=-1;for(;;){const le=["count="+v];K==-1?0<v?(K=U[0].g,le.push("ofs="+K)):K=0:le.push("ofs="+K);let Fe=!0;for(let jt=0;jt<v;jt++){let Ge=U[jt].g;const Gt=U[jt].map;if(Ge-=K,0>Ge)K=Math.max(0,U[jt].g-100),Fe=!1;else try{Dr(Gt,le,"req"+Ge+"_")}catch{S&&S(Gt)}}if(Fe){S=le.join("&");break e}}}return u=u.i.splice(0,v),p.D=u,S}function ru(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;re||O(),X||(re(),X=!0),ye.add(p,u),u.v=0}}function ul(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=wt(A(u.Fa,u),dl(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,su(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=wt(A(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Ba(this),su(this))};function ea(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function su(u){u.g=new wn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=kn(u.qa);it(p,"RID","rpc"),it(p,"SID",u.K),it(p,"AID",u.T),it(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&it(p,"TO",u.ja),it(p,"TYPE","xmlhttp"),Zi(u,p),u.m&&u.o&&Ft(p,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Qi(kn(p)),v.m=null,v.P=!0,as(v,u)}s.Za=function(){this.C!=null&&(this.C=null,Ba(this),ul(this),dt(19))};function Fa(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function iu(u,p){var v=null;if(u.g==p){Fa(u),ea(u),u.g=null;var S=2}else if(el(u.h,p))v=p.D,Tn(u.h,p),S=1;else return;if(u.G!=0){if(p.o)if(S==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var U=u.B;S=Ar(),Ze(S,new At(S,v)),Ha(u)}else ru(u);else if(U=p.s,U==3||U==0&&0<p.X||!(S==1&&Ch(u,p)||S==2&&ul(u)))switch(v&&0<v.length&&(p=u.h,p.i=p.i.concat(v)),U){case 1:fs(u,5);break;case 4:fs(u,10);break;case 3:fs(u,6);break;default:fs(u,2)}}}function dl(u,p){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*p}function fs(u,p){if(u.j.info("Error code "+p),p==2){var v=A(u.fb,u),S=u.Xa;const U=!S;S=new Ot(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Gi(S,"https"),Qi(S),U?Yi(S.toString(),v):mr(S.toString(),v)}else dt(2);u.G=0,u.l&&u.l.sa(p),au(u),tu(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function au(u){if(u.G=0,u.ka=[],u.l){const p=tl(u.h);(p.length!=0||u.i.length!=0)&&(B(u.ka,p),B(u.ka,u.i),u.h.i.length=0,G(u.i),u.i.length=0),u.l.ra()}}function ou(u,p,v){var S=v instanceof Ot?kn(v):new Ot(v);if(S.g!="")p&&(S.g=p+"."+S.g),Ks(S,S.s);else{var U=m.location;S=U.protocol,p=p?p+"."+U.hostname:U.hostname,U=+U.port;var K=new Ot(null);S&&Gi(K,S),p&&(K.g=p),U&&Ks(K,U),v&&(K.l=v),S=K}return v=u.D,p=u.ya,v&&p&&it(S,v,p),it(S,"VER",u.la),Zi(u,S),S}function lu(u,p,v){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new tt(new Ys({eb:v})):new tt(u.pa),p.Ha(u.J),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function cu(){}s=cu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ga(){}Ga.prototype.g=function(u,p){return new bn(u,p)};function bn(u,p){ft.call(this),this.g=new qa(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!ae(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ae(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new kr(this)}L(bn,ft),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){ll(this.g)},bn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Mn(u),u=v);p.i.push(new $c(p.Ya++,u)),p.G==3&&Ha(p)},bn.prototype.N=function(){this.g.l=null,delete this.j,ll(this.g),delete this.g,bn.aa.N.call(this)};function uu(u){dr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const v in p){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}L(uu,dr);function du(){hr.call(this),this.status=1}L(du,hr);function kr(u){this.g=u}L(kr,cu),kr.prototype.ua=function(){Ze(this.g,"a")},kr.prototype.ta=function(u){Ze(this.g,new uu(u))},kr.prototype.sa=function(u){Ze(this.g,new du)},kr.prototype.ra=function(){Ze(this.g,"b")},Ga.prototype.createWebChannel=Ga.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,lw=function(){return new Ga},ow=function(){return Ar()},aw=Yn,Qm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zt.NO_ERROR=0,Zt.TIMEOUT=8,Zt.HTTP_ERROR=6,wd=Zt,En.COMPLETE="complete",iw=En,Ui.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",ft.prototype.listen=ft.prototype.K,sc=Ui,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,sw=tt}).apply(typeof hd<"u"?hd:typeof self<"u"?self:typeof window<"u"?window:{});const n0="@firebase/firestore",r0="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new pg("@firebase/firestore");function wo(){return Ta.logLevel}function ge(s,...e){if(Ta.logLevel<=qe.DEBUG){const t=e.map(vg);Ta.debug(`Firestore (${Ho}): ${s}`,...t)}}function Os(s,...e){if(Ta.logLevel<=qe.ERROR){const t=e.map(vg);Ta.error(`Firestore (${Ho}): ${s}`,...t)}}function Po(s,...e){if(Ta.logLevel<=qe.WARN){const t=e.map(vg);Ta.warn(`Firestore (${Ho}): ${s}`,...t)}}function vg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,cw(s,i,t)}function cw(s,e,t){let i=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Os(i),new Error(i)}function Ye(s,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,s||cw(e,o,i)}function Oe(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Ls{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(mn.UNAUTHENTICATED)))}shutdown(){}}class bR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class SR{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ye(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let c=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Fr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Fr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ye(typeof i.accessToken=="string",31837,{l:i}),new uw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class AR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new AR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class s0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ye(this.o===void 0,3512);const i=c=>{c.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,ge("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new s0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new s0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=IR(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<t&&(i+=e.charAt(o[c]%62))}return i}}function Be(s,e){return s<e?-1:s>e?1:0}function Km(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const o=s.charAt(i),c=e.charAt(i);if(o!==c)return Pm(o)===Pm(c)?Be(o,c):Pm(o)?1:-1}return Be(s.length,e.length)}const CR=55296,NR=57343;function Pm(s){const e=s.charCodeAt(0);return e>=CR&&e<=NR}function Mo(s,e,t){return s.length===e.length&&s.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="__name__";class Br{constructor(e,t,i){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&we(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Br.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Br?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const c=Br.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return Be(e.length,t.length)}static compareSegments(e,t){const i=Br.isNumericId(e),o=Br.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Br.extractNumericId(e).compare(Br.extractNumericId(t)):Km(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ai.fromString(e.substring(4,e.length-2))}}class ct extends Br{construct(e,t,i){return new ct(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new ct(t)}static emptyPath(){return new ct([])}}const DR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Br{construct(e,t,i){return new on(e,t,i)}static isValidIdentifier(e){return DR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===i0}static keyField(){return new on([i0])}static fromServerFormat(e){const t=[];let i="",o=0;const c=()=>{if(i.length===0)throw new de(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new de(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new de(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(i+=m,o++):(c(),o++)}if(c(),h)throw new de(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(t)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ct.fromString(e))}static fromName(e){return new Ee(ct.fromString(e).popFirst(5))}static empty(){return new Ee(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(s,e,t){if(!t)throw new de(W.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function OR(s,e,t,i){if(e===!0&&i===!0)throw new de(W.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function a0(s){if(!Ee.isDocumentKey(s))throw new de(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function o0(s){if(Ee.isDocumentKey(s))throw new de(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function hw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function nh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":we(12329,{type:typeof s})}function On(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new de(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nh(s);throw new de(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function PR(s,e){if(e<=0)throw new de(W.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(s,e){const t={typeString:s};return e&&(t.value=e),t}function Oc(s,e){if(!hw(s))throw new de(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const h=s[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){t=`Expected '${i}' field to equal '${c.value}'`;break}}if(t)throw new de(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=-62135596800,c0=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*c0);return new Xe(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<l0)throw new de(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/c0}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oc(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-l0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:Lt("string",Xe._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new Xe(0,0))}static max(){return new Re(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=-1;function MR(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new Xe(t+1,0):new Xe(t,i));return new Ii(o,Ee.empty(),e)}function kR(s){return new Ii(s.readTime,s.key,_c)}class Ii{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ii(Re.min(),Ee.empty(),_c)}static max(){return new Ii(Re.max(),Ee.empty(),_c)}}function VR(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(s.documentKey,e.documentKey),t!==0?t:Be(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(s){if(s.code!==W.FAILED_PRECONDITION||s.message!==LR)throw s;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,i)=>{t(e)}))}static reject(e){return new te(((t,i)=>{i(e)}))}static waitFor(e){return new te(((t,i)=>{let o=0,c=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++c,h&&c===o&&t()}),(g=>i(g)))})),h=!0,c===o&&t()}))}static or(e){let t=te.resolve(!1);for(const i of e)t=t.next((o=>o?te.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,c)=>{i.push(t.call(this,o,c))})),this.waitFor(i)}static mapArray(e,t){return new te(((i,o)=>{const c=e.length,h=new Array(c);let m=0;for(let g=0;g<c;g++){const _=g;t(e[_]).next((w=>{h[_]=w,++m,m===c&&i(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new te(((i,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):i()};c()}))}}function UR(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Go(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}rh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg=-1;function Pc(s){return s==null}function Pd(s){return s===0&&1/s==-1/0}function zR(s){return typeof s=="number"&&Number.isInteger(s)&&!Pd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="";function qR(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=u0(e)),e=BR(s.get(t),e);return u0(e)}function BR(s,e){let t=e;const i=s.length;for(let o=0;o<i;o++){const c=s.charAt(o);switch(c){case"\0":t+="";break;case fw:t+="";break;default:t+=c}}return t}function u0(s){return s+fw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function ki(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function mw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){this.comparator=e,this.root=t||an.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fd(this.root,e,this.comparator,!0)}}class fd{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,t,i,o,c){this.key=e,this.value=t,this.color=i??an.RED,this.left=o??an.EMPTY,this.right=c??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,c){return new an(e??this.key,t??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,i),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return an.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,i,o,c){return this}insert(e,t,i){return new an(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new h0(this.data.getIterator())}getIteratorFrom(e){return new h0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class h0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Gn([])}unionWith(e){let t=new Bt(on.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new gw("Invalid base64 string: "+c):c}})(e);return new ln(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const HR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(s){if(Ye(!!s,39018),typeof s=="string"){let e=0;const t=HR.exec(s);if(Ye(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Nt(s.seconds),nanos:Nt(s.nanos)}}function Nt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ni(s){return typeof s=="string"?ln.fromBase64String(s):ln.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="server_timestamp",yw="__type__",_w="__previous_value__",vw="__local_write_time__";function Tg(s){var t,i;return((i=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[yw])==null?void 0:i.stringValue)===pw}function sh(s){const e=s.mapValue.fields[_w];return Tg(e)?sh(e):e}function vc(s){const e=Ci(s.mapValue.fields[vw].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,t,i,o,c,h,m,g,_,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=w}}const Md="(default)";class Ec{constructor(e,t){this.projectId=e,this.database=t||Md}static empty(){return new Ec("","")}get isDefaultDatabase(){return this.database===Md}isEqual(e){return e instanceof Ec&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="__type__",GR="__max__",md={mapValue:{}},ww="__vector__",kd="value";function Di(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Tg(s)?4:KR(s)?9007199254740991:QR(s)?10:11:we(28295,{value:s})}function $r(s,e){if(s===e)return!0;const t=Di(s);if(t!==Di(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return vc(s).isEqual(vc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=Ci(o.timestampValue),m=Ci(c.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,c){return Ni(o.bytesValue).isEqual(Ni(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,c){return Nt(o.geoPointValue.latitude)===Nt(c.geoPointValue.latitude)&&Nt(o.geoPointValue.longitude)===Nt(c.geoPointValue.longitude)})(s,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Nt(o.integerValue)===Nt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=Nt(o.doubleValue),m=Nt(c.doubleValue);return h===m?Pd(h)===Pd(m):isNaN(h)&&isNaN(m)}return!1})(s,e);case 9:return Mo(s.arrayValue.values||[],e.arrayValue.values||[],$r);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},m=c.mapValue.fields||{};if(d0(h)!==d0(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!$r(h[g],m[g])))return!1;return!0})(s,e);default:return we(52216,{left:s})}}function wc(s,e){return(s.values||[]).find((t=>$r(t,e)))!==void 0}function ko(s,e){if(s===e)return 0;const t=Di(s),i=Di(e);if(t!==i)return Be(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(s.booleanValue,e.booleanValue);case 2:return(function(c,h){const m=Nt(c.integerValue||c.doubleValue),g=Nt(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return f0(s.timestampValue,e.timestampValue);case 4:return f0(vc(s),vc(e));case 5:return Km(s.stringValue,e.stringValue);case 6:return(function(c,h){const m=Ni(c),g=Ni(h);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(c,h){const m=c.split("/"),g=h.split("/");for(let _=0;_<m.length&&_<g.length;_++){const w=Be(m[_],g[_]);if(w!==0)return w}return Be(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,h){const m=Be(Nt(c.latitude),Nt(h.latitude));return m!==0?m:Be(Nt(c.longitude),Nt(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return m0(s.arrayValue,e.arrayValue);case 10:return(function(c,h){var A,I,L,G;const m=c.fields||{},g=h.fields||{},_=(A=m[kd])==null?void 0:A.arrayValue,w=(I=g[kd])==null?void 0:I.arrayValue,b=Be(((L=_==null?void 0:_.values)==null?void 0:L.length)||0,((G=w==null?void 0:w.values)==null?void 0:G.length)||0);return b!==0?b:m0(_,w)})(s.mapValue,e.mapValue);case 11:return(function(c,h){if(c===md.mapValue&&h===md.mapValue)return 0;if(c===md.mapValue)return 1;if(h===md.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),_=h.fields||{},w=Object.keys(_);g.sort(),w.sort();for(let b=0;b<g.length&&b<w.length;++b){const A=Km(g[b],w[b]);if(A!==0)return A;const I=ko(m[g[b]],_[w[b]]);if(I!==0)return I}return Be(g.length,w.length)})(s.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function f0(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Be(s,e);const t=Ci(s),i=Ci(e),o=Be(t.seconds,i.seconds);return o!==0?o:Be(t.nanos,i.nanos)}function m0(s,e){const t=s.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const c=ko(t[o],i[o]);if(c)return c}return Be(t.length,i.length)}function Vo(s){return Ym(s)}function Ym(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=Ci(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Ni(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Ee.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",o=!0;for(const c of t.values||[])o?o=!1:i+=",",i+=Ym(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const h of i)c?c=!1:o+=",",o+=`${h}:${Ym(t.fields[h])}`;return o+"}"})(s.mapValue):we(61005,{value:s})}function Td(s){switch(Di(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sh(s);return e?16+Td(e):16;case 5:return 2*s.stringValue.length;case 6:return Ni(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,c)=>o+Td(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let o=0;return ki(i.fields,((c,h)=>{o+=c.length+Td(h)})),o})(s.mapValue);default:throw we(13486,{value:s})}}function g0(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Xm(s){return!!s&&"integerValue"in s}function bg(s){return!!s&&"arrayValue"in s}function p0(s){return!!s&&"nullValue"in s}function y0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function bd(s){return!!s&&"mapValue"in s}function QR(s){var t,i;return((i=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[Ew])==null?void 0:i.stringValue)===ww}function uc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return ki(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=uc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uc(s.arrayValue.values[t]);return e}return{...s}}function KR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===GR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!bd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uc(t)}setAll(e){let t=on.emptyPath(),i={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}h?i[m.lastSegment()]=uc(h):o.push(m.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,i,o)}delete(e){const t=this.field(e.popLast());bd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];bd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){ki(t,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new An(uc(this.value))}}function Tw(s){const e=[];return ki(s.fields,((t,i)=>{const o=new on([t]);if(bd(i)){const c=Tw(i.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)})),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,i,o,c,h,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=c,this.data=h,this.documentState=m}static newInvalidDocument(e){return new $t(e,0,Re.min(),Re.min(),Re.min(),An.empty(),0)}static newFoundDocument(e,t,i,o){return new $t(e,1,t,Re.min(),i,o,0)}static newNoDocument(e,t){return new $t(e,2,t,Re.min(),Re.min(),An.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Re.min(),Re.min(),An.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t){this.position=e,this.inclusive=t}}function _0(s,e,t){let i=0;for(let o=0;o<s.position.length;o++){const c=e[o],h=s.position[o];if(c.field.isKeyField()?i=Ee.comparator(Ee.fromName(h.referenceValue),t.key):i=ko(h,t.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function v0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!$r(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t="asc"){this.field=e,this.dir=t}}function YR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{}class Vt extends bw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new $R(e,t,i):t==="array-contains"?new ZR(e,i):t==="in"?new e1(e,i):t==="not-in"?new t1(e,i):t==="array-contains-any"?new n1(e,i):new Vt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new WR(e,i):new JR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ko(t,this.value)):t!==null&&Di(this.value)===Di(t)&&this.matchesComparison(ko(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wr extends bw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new wr(e,t)}matches(e){return Sw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Sw(s){return s.op==="and"}function Aw(s){return XR(s)&&Sw(s)}function XR(s){for(const e of s.filters)if(e instanceof wr)return!1;return!0}function $m(s){if(s instanceof Vt)return s.field.canonicalString()+s.op.toString()+Vo(s.value);if(Aw(s))return s.filters.map((e=>$m(e))).join(",");{const e=s.filters.map((t=>$m(t))).join(",");return`${s.op}(${e})`}}function xw(s,e){return s instanceof Vt?(function(i,o){return o instanceof Vt&&i.op===o.op&&i.field.isEqual(o.field)&&$r(i.value,o.value)})(s,e):s instanceof wr?(function(i,o){return o instanceof wr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,h,m)=>c&&xw(h,o.filters[m])),!0):!1})(s,e):void we(19439)}function Rw(s){return s instanceof Vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Vo(t.value)}`})(s):s instanceof wr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Rw).join(" ,")+"}"})(s):"Filter"}class $R extends Vt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class WR extends Vt{constructor(e,t){super(e,"in",t),this.keys=Iw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class JR extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=Iw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Iw(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class ZR extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bg(t)&&wc(t.arrayValue,this.value)}}class e1 extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wc(this.value.arrayValue,t)}}class t1 extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!wc(this.value.arrayValue,t)}}class n1 extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>wc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,t=null,i=[],o=[],c=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=h,this.endAt=m,this.Te=null}}function E0(s,e=null,t=[],i=[],o=null,c=null,h=null){return new r1(s,e,t,i,o,c,h)}function Sg(s){const e=Oe(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>$m(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),Pc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Vo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Vo(i))).join(",")),e.Te=t}return e.Te}function Ag(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!YR(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!xw(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!v0(s.startAt,e.startAt)&&v0(s.endAt,e.endAt)}function Wm(s){return Ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t=null,i=[],o=[],c=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function s1(s,e,t,i,o,c,h,m){return new Qo(s,e,t,i,o,c,h,m)}function ih(s){return new Qo(s)}function w0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Cw(s){return s.collectionGroup!==null}function dc(s){const e=Oe(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Bt(on.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Tc(c,i))})),t.has(on.keyField().canonicalString())||e.Ie.push(new Tc(on.keyField(),i))}return e.Ie}function Gr(s){const e=Oe(s);return e.Ee||(e.Ee=i1(e,dc(s))),e.Ee}function i1(s,e){if(s.limitType==="F")return E0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Tc(o.field,c)}));const t=s.endAt?new Vd(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Vd(s.startAt.position,s.startAt.inclusive):null;return E0(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function Jm(s,e){const t=s.filters.concat([e]);return new Qo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Ld(s,e,t){return new Qo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function ah(s,e){return Ag(Gr(s),Gr(e))&&s.limitType===e.limitType}function Nw(s){return`${Sg(Gr(s))}|lt:${s.limitType}`}function To(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Rw(o))).join(", ")}]`),Pc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Vo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Vo(o))).join(",")),`Target(${i})`})(Gr(s))}; limitType=${s.limitType})`}function oh(s,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Ee.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,o){for(const c of dc(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(h,m,g){const _=_0(h,m,g);return h.inclusive?_<=0:_<0})(i.startAt,dc(i),o)||i.endAt&&!(function(h,m,g){const _=_0(h,m,g);return h.inclusive?_>=0:_>0})(i.endAt,dc(i),o))})(s,e)}function a1(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Dw(s){return(e,t)=>{let i=!1;for(const o of dc(s)){const c=o1(o,e,t);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function o1(s,e,t){const i=s.field.isKeyField()?Ee.comparator(e.key,t.key):(function(c,h,m){const g=h.data.field(c),_=m.data.field(c);return g!==null&&_!==null?ko(g,_):we(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ki(this.inner,((t,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return mw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=new Et(Ee.comparator);function Ps(){return l1}const Ow=new Et(Ee.comparator);function ic(...s){let e=Ow;for(const t of s)e=e.insert(t.key,t);return e}function Pw(s){let e=Ow;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ya(){return hc()}function Mw(){return hc()}function hc(){return new Aa((s=>s.toString()),((s,e)=>s.isEqual(e)))}const c1=new Et(Ee.comparator),u1=new Bt(Ee.comparator);function He(...s){let e=u1;for(const t of s)e=e.add(t);return e}const d1=new Bt(Be);function h1(){return d1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pd(e)?"-0":e}}function kw(s){return{integerValue:""+s}}function Vw(s,e){return zR(e)?kw(e):xg(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(){this._=void 0}}function f1(s,e,t){return s instanceof jd?(function(o,c){const h={fields:{[yw]:{stringValue:pw},[vw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Tg(c)&&(c=sh(c)),c&&(h.fields[_w]=c),{mapValue:h}})(t,e):s instanceof bc?jw(s,e):s instanceof Sc?Uw(s,e):(function(o,c){const h=Lw(o,c),m=T0(h)+T0(o.Ae);return Xm(h)&&Xm(o.Ae)?kw(m):xg(o.serializer,m)})(s,e)}function m1(s,e,t){return s instanceof bc?jw(s,e):s instanceof Sc?Uw(s,e):t}function Lw(s,e){return s instanceof Ac?(function(i){return Xm(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class jd extends lh{}class bc extends lh{constructor(e){super(),this.elements=e}}function jw(s,e){const t=zw(e);for(const i of s.elements)t.some((o=>$r(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Sc extends lh{constructor(e){super(),this.elements=e}}function Uw(s,e){let t=zw(e);for(const i of s.elements)t=t.filter((o=>!$r(o,i)));return{arrayValue:{values:t}}}class Ac extends lh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function T0(s){return Nt(s.integerValue||s.doubleValue)}function zw(s){return bg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,t){this.field=e,this.transform=t}}function p1(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof bc&&o instanceof bc||i instanceof Sc&&o instanceof Sc?Mo(i.elements,o.elements,$r):i instanceof Ac&&o instanceof Ac?$r(i.Ae,o.Ae):i instanceof jd&&o instanceof jd})(s.transform,e.transform)}class y1{constructor(e,t){this.version=e,this.transformResults=t}}class gn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class ch{}function qw(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Rg(s.key,gn.none()):new Mc(s.key,s.data,gn.none());{const t=s.data,i=An.empty();let o=new Bt(on.comparator);for(let c of e.fields)if(!o.has(c)){let h=t.field(c);h===null&&c.length>1&&(c=c.popLast(),h=t.field(c)),h===null?i.delete(c):i.set(c,h),o=o.add(c)}return new Vi(s.key,i,new Gn(o.toArray()),gn.none())}}function _1(s,e,t){s instanceof Mc?(function(o,c,h){const m=o.value.clone(),g=S0(o.fieldTransforms,c,h.transformResults);m.setAll(g),c.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(s,e,t):s instanceof Vi?(function(o,c,h){if(!Sd(o.precondition,c))return void c.convertToUnknownDocument(h.version);const m=S0(o.fieldTransforms,c,h.transformResults),g=c.data;g.setAll(Bw(o)),g.setAll(m),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,t):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function fc(s,e,t,i){return s instanceof Mc?(function(c,h,m,g){if(!Sd(c.precondition,h))return m;const _=c.value.clone(),w=A0(c.fieldTransforms,g,h);return _.setAll(w),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(s,e,t,i):s instanceof Vi?(function(c,h,m,g){if(!Sd(c.precondition,h))return m;const _=A0(c.fieldTransforms,g,h),w=h.data;return w.setAll(Bw(c)),w.setAll(_),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(s,e,t,i):(function(c,h,m){return Sd(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(s,e,t)}function v1(s,e){let t=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),c=Lw(i.transform,o||null);c!=null&&(t===null&&(t=An.empty()),t.set(i.field,c))}return t||null}function b0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Mo(i,o,((c,h)=>p1(c,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Mc extends ch{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Vi extends ch{constructor(e,t,i,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Bw(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function S0(s,e,t){const i=new Map;Ye(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const c=s[o],h=c.transform,m=e.data.field(c.field);i.set(c.field,m1(h,m,t[o]))}return i}function A0(s,e,t){const i=new Map;for(const o of s){const c=o.transform,h=t.data.field(o.field);i.set(o.field,f1(c,h,e))}return i}class Rg extends ch{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hw extends ch{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&_1(c,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=fc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=fc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Mw();return this.mutations.forEach((o=>{const c=e.get(o.key),h=c.overlayedDocument;let m=this.applyToLocalView(h,c.mutatedFields);m=t.has(o.key)?null:m;const g=qw(h,m);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),He())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,((t,i)=>b0(t,i)))&&Mo(this.baseMutations,e.baseMutations,((t,i)=>b0(t,i)))}}class Ig{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ye(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return c1})();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,i[h].version);return new Ig(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Ke;function Fw(s){switch(s){case W.OK:return we(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return we(15467,{code:s})}}function Gw(s){if(s===void 0)return Os("GRPC error has no .code"),W.UNKNOWN;switch(s){case kt.OK:return W.OK;case kt.CANCELLED:return W.CANCELLED;case kt.UNKNOWN:return W.UNKNOWN;case kt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case kt.INTERNAL:return W.INTERNAL;case kt.UNAVAILABLE:return W.UNAVAILABLE;case kt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case kt.NOT_FOUND:return W.NOT_FOUND;case kt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case kt.ABORTED:return W.ABORTED;case kt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case kt.DATA_LOSS:return W.DATA_LOSS;default:return we(39323,{code:s})}}(Ke=kt||(kt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=new Ai([4294967295,4294967295],0);function x0(s){const e=b1().encode(s),t=new rw;return t.update(e),new Uint8Array(t.digest())}function R0(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ai([t,i],0),new Ai([o,c],0)]}class Cg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ac(`Invalid padding: ${t}`);if(i<0)throw new ac(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ac(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ac(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ai.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Ai.fromNumber(i)));return o.compare(S1)===1&&(o=new Ai([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=x0(e),[i,o]=R0(t);for(let c=0;c<this.hashCount;c++){const h=this.ye(i,o,c);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new Cg(c,o,t);return i.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const t=x0(e),[i,o]=R0(t);for(let c=0;c<this.hashCount;c++){const h=this.ye(i,o,c);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ac extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,t,i,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,kc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new uh(Re.min(),o,new Et(Be),Ps(),He())}}class kc{constructor(e,t,i,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new kc(i,t,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class Qw{constructor(e,t){this.targetId=e,this.Ce=t}}class Kw{constructor(e,t,i=ln.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class I0{constructor(){this.ve=0,this.Fe=C0(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),t=He(),i=He();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:we(38017,{changeType:c})}})),new kc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=C0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class A1{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ps(),this.Je=gd(),this.He=gd(),this.Ye=new Et(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(Wm(c))if(i===0){const h=new Ee(c.path);this.et(t,h,$t.newNoDocument(h,Re.min()))}else Ye(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const m=this.ut(e),g=m?this.ct(m,e,h):1;if(g!==0){this.it(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,_)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=t;let h,m;try{h=Ni(i).toUint8Array()}catch(g){if(g instanceof gw)return Po("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Cg(h,o,c)}catch(g){return Po(g instanceof ac?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((c=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,h)=>{const m=this.ot(h);if(m){if(c.current&&Wm(m.target)){const g=new Ee(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,$t.newNoDocument(g,e))}c.Be&&(t.set(h,c.ke()),c.qe())}}));let i=He();this.He.forEach(((c,h)=>{let m=!0;h.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(e)));const o=new uh(e,t,this.Ye,this.je,i);return this.je=Ps(),this.Je=gd(),this.He=gd(),this.Ye=new Et(Be),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new I0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Bt(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Bt(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new I0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function gd(){return new Et(Ee.comparator)}function C0(){return new Et(Ee.comparator)}const x1={asc:"ASCENDING",desc:"DESCENDING"},R1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},I1={and:"AND",or:"OR"};class C1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zm(s,e){return s.useProto3Json||Pc(e)?e:{value:e}}function Ud(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yw(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function N1(s,e){return Ud(s,e.toTimestamp())}function Qn(s){return Ye(!!s,49232),Re.fromTimestamp((function(t){const i=Ci(t);return new Xe(i.seconds,i.nanos)})(s))}function Ng(s,e){return eg(s,e).canonicalString()}function eg(s,e){const t=(function(o){return new ct(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function Xw(s){const e=ct.fromString(s);return Ye(tT(e),10190,{key:e.toString()}),e}function zd(s,e){return Ng(s.databaseId,e.path)}function mc(s,e){const t=Xw(e);if(t.get(1)!==s.databaseId.projectId)throw new de(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new de(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Ee(Ww(t))}function $w(s,e){return Ng(s.databaseId,e)}function D1(s){const e=Xw(s);return e.length===4?ct.emptyPath():Ww(e)}function tg(s){return new ct(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Ww(s){return Ye(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function N0(s,e,t){return{name:zd(s,e),fields:t.value.mapValue.fields}}function O1(s,e){return"found"in e?(function(i,o){Ye(!!o.found,43571),o.found.name,o.found.updateTime;const c=mc(i,o.found.name),h=Qn(o.found.updateTime),m=o.found.createTime?Qn(o.found.createTime):Re.min(),g=new An({mapValue:{fields:o.found.fields}});return $t.newFoundDocument(c,h,m,g)})(s,e):"missing"in e?(function(i,o){Ye(!!o.missing,3894),Ye(!!o.readTime,22933);const c=mc(i,o.missing),h=Qn(o.readTime);return $t.newNoDocument(c,h)})(s,e):we(7234,{result:e})}function P1(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:we(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(_,w){return _.useProto3Json?(Ye(w===void 0||typeof w=="string",58123),ln.fromBase64String(w||"")):(Ye(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),ln.fromUint8Array(w||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(_){const w=_.code===void 0?W.UNKNOWN:Gw(_.code);return new de(w,_.message||"")})(h);t=new Kw(i,o,c,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=mc(s,i.document.name),c=Qn(i.document.updateTime),h=i.document.createTime?Qn(i.document.createTime):Re.min(),m=new An({mapValue:{fields:i.document.fields}}),g=$t.newFoundDocument(o,c,h,m),_=i.targetIds||[],w=i.removedTargetIds||[];t=new Ad(_,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=mc(s,i.document),c=i.readTime?Qn(i.readTime):Re.min(),h=$t.newNoDocument(o,c),m=i.removedTargetIds||[];t=new Ad([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=mc(s,i.document),c=i.removedTargetIds||[];t=new Ad([],c,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,h=new T1(o,c),m=i.targetId;t=new Qw(m,h)}}return t}function Jw(s,e){let t;if(e instanceof Mc)t={update:N0(s,e.key,e.value)};else if(e instanceof Rg)t={delete:zd(s,e.key)};else if(e instanceof Vi)t={update:N0(s,e.key,e.data),updateMask:B1(e.fieldMask)};else{if(!(e instanceof Hw))return we(16599,{Vt:e.type});t={verify:zd(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(c,h){const m=h.transform;if(m instanceof jd)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof bc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Sc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Ac)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw we(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:N1(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:we(27497)})(s,e.precondition)),t}function M1(s,e){return s&&s.length>0?(Ye(e!==void 0,14353),s.map((t=>(function(o,c){let h=o.updateTime?Qn(o.updateTime):Qn(c);return h.isEqual(Re.min())&&(h=Qn(c)),new y1(h,o.transformResults||[])})(t,e)))):[]}function k1(s,e){return{documents:[$w(s,e.path)]}}function V1(s,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=$w(s,o);const c=(function(_){if(_.length!==0)return eT(wr.create(_,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const h=(function(_){if(_.length!==0)return _.map((w=>(function(A){return{field:bo(A.field),direction:U1(A.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=Zm(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:t,parent:o}}function L1(s){let e=D1(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ye(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let c=[];t.where&&(c=(function(b){const A=Zw(b);return A instanceof wr&&Aw(A)?A.getFilters():[A]})(t.where));let h=[];t.orderBy&&(h=(function(b){return b.map((A=>(function(L){return new Tc(So(L.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(A)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let A;return A=typeof b=="object"?b.value:b,Pc(A)?null:A})(t.limit));let g=null;t.startAt&&(g=(function(b){const A=!!b.before,I=b.values||[];return new Vd(I,A)})(t.startAt));let _=null;return t.endAt&&(_=(function(b){const A=!b.before,I=b.values||[];return new Vd(I,A)})(t.endAt)),s1(e,o,h,c,m,"F",g,_)}function j1(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Zw(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=So(t.unaryFilter.field);return Vt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=So(t.unaryFilter.field);return Vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=So(t.unaryFilter.field);return Vt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=So(t.unaryFilter.field);return Vt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Vt.create(So(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return wr.create(t.compositeFilter.filters.map((i=>Zw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(s):we(30097,{filter:s})}function U1(s){return x1[s]}function z1(s){return R1[s]}function q1(s){return I1[s]}function bo(s){return{fieldPath:s.canonicalString()}}function So(s){return on.fromServerFormat(s.fieldPath)}function eT(s){return s instanceof Vt?(function(t){if(t.op==="=="){if(y0(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NAN"}};if(p0(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(y0(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NOT_NAN"}};if(p0(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(t.field),op:z1(t.op),value:t.value}}})(s):s instanceof wr?(function(t){const i=t.getFilters().map((o=>eT(o)));return i.length===1?i[0]:{compositeFilter:{op:q1(t.op),filters:i}}})(s):we(54877,{filter:s})}function B1(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function tT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,t,i,o,c=Re.min(),h=Re.min(),m=ln.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.yt=e}}function F1(s){const e=L1({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Ld(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(){this.Cn=new Q1}addToCollectionParentIndex(e,t){return this.Cn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Ii.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Ii.min())}updateCollectionGroup(e,t,i){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class Q1{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Bt(ct.comparator),c=!o.has(i);return this.index[t]=o.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Bt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nT=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(nT,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lo(0)}static cr(){return new Lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="LruGarbageCollector",K1=1048576;function P0([s,e],[t,i]){const o=Be(s,t);return o===0?Be(e,i):o}class Y1{constructor(e){this.Ir=e,this.buffer=new Bt(P0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();P0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class X1{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(O0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Go(t)?ge(O0,"Ignoring IndexedDB error during garbage collection: ",t):await Fo(t)}await this.Vr(3e5)}))}}class $1{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(rh.ce);const i=new Y1(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(D0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),D0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,c,h,m,g,_;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,h=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(i=b,m=Date.now(),this.removeTargets(e,i,t)))).next((b=>(c=b,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(_=Date.now(),wo()<=qe.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(_-g)+`ms
Total Duration: ${_-w}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:b}))))}}function W1(s,e){return new $1(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(){this.changes=new Aa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&fc(i.mutation,o,Gn.empty(),Xe.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,He()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=He()){const o=ya();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((c=>{let h=ic();return c.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=ya();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,He())))}populateOverlays(e,t,i){const o=[];return i.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,i,o){let c=Ps();const h=hc(),m=(function(){return hc()})();return t.forEach(((g,_)=>{const w=i.get(_.key);o.has(_.key)&&(w===void 0||w.mutation instanceof Vi)?c=c.insert(_.key,_):w!==void 0?(h.set(_.key,w.mutation.getFieldMask()),fc(w.mutation,_,w.mutation.getFieldMask(),Xe.now())):h.set(_.key,Gn.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((_,w)=>h.set(_,w))),t.forEach(((_,w)=>m.set(_,new Z1(w,h.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=hc();let o=new Et(((h,m)=>h-m)),c=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((g=>{const _=t.get(g);if(_===null)return;let w=i.get(g)||Gn.empty();w=m.applyToLocalView(_,w),i.set(g,w);const b=(o.get(m.batchId)||He()).add(g);o=o.insert(m.batchId,b)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,w=g.value,b=Mw();w.forEach((A=>{if(!c.has(A)){const I=qw(t.get(A),i.get(A));I!==null&&b.set(A,I),c=c.add(A)}})),h.push(this.documentOverlayCache.saveOverlays(e,_,b))}return te.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return Ee.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-c.size):te.resolve(ya());let m=_c,g=c;return h.next((_=>te.forEach(_,((w,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),c.get(w)?te.resolve():this.remoteDocumentCache.getEntry(e,w).next((A=>{g=g.insert(w,A)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,g,_,He()))).next((w=>({batchId:m,changes:Pw(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=ic();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const c=t.collectionGroup;let h=ic();return this.indexManager.getCollectionParents(e,c).next((m=>te.forEach(m,(g=>{const _=(function(b,A){return new Qo(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next((w=>{w.forEach(((b,A)=>{h=h.insert(b,A)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,c,o)))).next((h=>{c.forEach(((g,_)=>{const w=_.getKey();h.get(w)===null&&(h=h.insert(w,$t.newInvalidDocument(w)))}));let m=ic();return h.forEach(((g,_)=>{const w=c.get(g);w!==void 0&&fc(w.mutation,_,Gn.empty(),Xe.now()),oh(t,_)&&(m=m.insert(g,_))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Qn(o.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:F1(o.bundledQuery),readTime:Qn(o.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.overlays=new Et(Ee.comparator),this.qr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ya();return te.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,c)=>{this.St(e,t,c)})),te.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(i)),te.resolve()}getOverlaysForCollection(e,t,i){const o=ya(),c=t.length+1,h=new Ee(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===c&&g.largestBatchId>i&&o.set(g.getKey(),g)}return te.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let c=new Et(((_,w)=>_-w));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let w=c.get(_.largestBatchId);w===null&&(w=ya(),c=c.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const m=ya(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,w)=>m.set(_,w))),!(m.size()>=o)););return te.resolve(m)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new w1(t,i));let c=this.qr.get(t);c===void 0&&(c=He(),this.qr.set(t,c)),this.qr.set(t,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(){this.Qr=new Bt(Xt.$r),this.Ur=new Bt(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Xt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Xt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ee(new ct([])),i=new Xt(t,e),o=new Xt(t,e+1),c=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new ct([])),i=new Xt(t,e),o=new Xt(t,e+1);let c=He();return this.Ur.forEachInRange([i,o],(h=>{c=c.add(h.key)})),c}containsKey(e){const t=new Xt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Xt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Bt(Xt.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new E1(c,t,i,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Xt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return te.resolve(h)}lookupMutationBatch(e,t){return te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),c=o<0?0:o;return te.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?wg:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Xt(t,0),o=new Xt(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,o],(h=>{const m=this.Xr(h.Yr);c.push(m)})),te.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Bt(Be);return t.forEach((o=>{const c=new Xt(o,0),h=new Xt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(m=>{i=i.add(m.Yr)}))})),te.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let c=i;Ee.isDocumentKey(c)||(c=c.child(""));const h=new Xt(new Ee(c),0);let m=new Bt(Be);return this.Zr.forEachWhile((g=>{const _=g.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Yr)),!0)}),h),te.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ye(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return te.forEach(t.mutations,(o=>{const c=new Xt(o.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Xt(t,0),o=this.Zr.firstAfterOrEqual(i);return te.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.ri=e,this.docs=(function(){return new Et(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),c=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return te.resolve(i?i.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let i=Ps();return t.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():$t.newInvalidDocument(o))})),te.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let c=Ps();const h=t.path,m=new Ee(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:w}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||VR(kR(w),i)<=0||(o.has(w.key)||oh(t,w))&&(c=c.insert(w.key,w.mutableCopy()))}return te.resolve(c)}getAllFromCollectionGroup(e,t,i,o){we(9500)}ii(e,t){return te.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new aI(this)}getSize(e){return te.resolve(this.size)}}class aI extends J1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.persistence=e,this.si=new Aa((t=>Sg(t)),Ag),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Dg,this.targetCount=0,this.ai=Lo.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Lo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Pr(t),te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,i){let o=0;const c=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),te.waitFor(c).next((()=>o))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return te.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),te.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((h=>{c.push(o.markPotentiallyOrphaned(e,h))})),te.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return te.resolve(i)}containsKey(e,t){return te.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,t){this.ui={},this.overlays={},this.ci=new rh(0),this.li=!1,this.li=!0,this.hi=new rI,this.referenceDelegate=e(this),this.Pi=new oI(this),this.indexManager=new G1,this.remoteDocumentCache=(function(o){return new iI(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new H1(t),this.Ii=new tI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new sI(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ge("MemoryPersistence","Starting transaction:",e);const o=new lI(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return te.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class lI extends jR{constructor(e){super(),this.currentSequenceNumber=e}}class Og{constructor(e){this.persistence=e,this.Ri=new Dg,this.Vi=null}static mi(e){return new Og(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),te.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(i=>{const o=Ee.fromPath(i);return this.gi(e,o).next((c=>{c||t.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return te.or([()=>te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class qd{constructor(e,t){this.persistence=e,this.pi=new Aa((i=>qR(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=W1(this,t)}static mi(e,t){return new qd(e,t)}Ei(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return te.forEach(this.pi,((i,o)=>this.br(e,i,o).next((c=>c?te.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((m=>{m||(i++,c.removeEntry(h,Re.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),te.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Td(e.data.value)),t}br(e,t,i){return te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return te.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=He(),o=He();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Pg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return nx()?8:UR(pn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const c={result:null};return this.ys(e,t).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(e,t,o,i).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new cI;return this.Ss(e,t,h).next((m=>{if(c.result=m,this.Vs)return this.bs(e,t,h,m.size)}))})).next((()=>c.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(wo()<=qe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",To(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(wo()<=qe.DEBUG&&ge("QueryEngine","Query:",To(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(wo()<=qe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",To(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(t))):te.resolve())}ys(e,t){if(w0(t))return te.resolve(null);let i=Gr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Ld(t,null,"F"),i=Gr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const h=He(...c);return this.ps.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const _=this.Ds(t,m);return this.Cs(t,_,h,g.readTime)?this.ys(e,Ld(t,null,"F")):this.vs(e,_,t,g)}))))})))))}ws(e,t,i,o){return w0(t)||o.isEqual(Re.min())?te.resolve(null):this.ps.getDocuments(e,i).next((c=>{const h=this.Ds(t,c);return this.Cs(t,h,i,o)?te.resolve(null):(wo()<=qe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),To(t)),this.vs(e,h,t,MR(o,_c)).next((m=>m)))}))}Ds(e,t){let i=new Bt(Dw(e));return t.forEach(((o,c)=>{oh(e,c)&&(i=i.add(c))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,i){return wo()<=qe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",To(t)),this.ps.getDocumentsMatchingQuery(e,t,Ii.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((c=>(t.forEach((h=>{c=c.insert(h.key,h)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="LocalStore",dI=3e8;class hI{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Et(Be),this.xs=new Aa((c=>Sg(c)),Ag),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function fI(s,e,t,i){return new hI(s,e,t,i)}async function sT(s,e){const t=Oe(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((c=>{const h=[],m=[];let g=He();for(const _ of o){h.push(_.batchId);for(const w of _.mutations)g=g.add(w.key)}for(const _ of c){m.push(_.batchId);for(const w of _.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(i,g).next((_=>({Ls:_,removedBatchIds:h,addedBatchIds:m})))}))}))}function mI(s,e){const t=Oe(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,_,w){const b=_.batch,A=b.keys();let I=te.resolve();return A.forEach((L=>{I=I.next((()=>w.getEntry(g,L))).next((G=>{const B=_.docVersions.get(L);Ye(B!==null,48541),G.version.compareTo(B)<0&&(b.applyToRemoteDocument(G,_),G.isValidDocument()&&(G.setReadTime(_.commitVersion),w.addEntry(G)))}))})),I.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(t,i,e,c).next((()=>c.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=He();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function iT(s){const e=Oe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function gI(s,e){const t=Oe(s),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((w,b)=>{const A=o.get(b);if(!A)return;m.push(t.Pi.removeMatchingKeys(c,w.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(c,w.addedDocuments,b))));let I=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?I=I.withResumeToken(ln.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):w.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(w.resumeToken,i)),o=o.insert(b,I),(function(G,B,ie){return G.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=dI?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(A,I,w)&&m.push(t.Pi.updateTargetData(c,I))}));let g=Ps(),_=He();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,w))})),m.push(pI(c,h,e.documentUpdates).next((w=>{g=w.ks,_=w.qs}))),!i.isEqual(Re.min())){const w=t.Pi.getLastRemoteSnapshotVersion(c).next((b=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i)));m.push(w)}return te.waitFor(m).next((()=>h.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,_))).next((()=>g))})).then((c=>(t.Ms=o,c)))}function pI(s,e,t){let i=He(),o=He();return t.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let h=Ps();return t.forEach(((m,g)=>{const _=c.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):ge(Mg,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function yI(s,e){const t=Oe(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=wg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function _I(s,e){const t=Oe(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((c=>c?(o=c,te.resolve(o)):t.Pi.allocateTargetId(i).next((h=>(o=new Ei(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function ng(s,e,t){const i=Oe(s),o=i.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",c,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Go(h))throw h;ge(Mg,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function M0(s,e,t){const i=Oe(s);let o=Re.min(),c=He();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,_,w){const b=Oe(g),A=b.xs.get(w);return A!==void 0?te.resolve(b.Ms.get(A)):b.Pi.getTargetData(_,w)})(i,h,Gr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{c=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:Re.min(),t?c:He()))).next((m=>(vI(i,a1(e),m),{documents:m,Qs:c})))))}function vI(s,e,t){let i=s.Os.get(e)||Re.min();t.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.Os.set(e,i)}class k0{constructor(){this.activeTargetIds=h1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EI{constructor(){this.Mo=new k0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new k0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="ConnectivityMonitor";class L0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(V0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(V0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pd=null;function rg(){return pd===null?pd=(function(){return 268435456+Math.round(2147483648*Math.random())})():pd++,"0x"+pd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="RestConnection",TI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Md?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,c){const h=rg(),m=this.zo(e,t.toUriEncodedString());ge(Mm,`Sending RPC '${e}' ${h}:`,m,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:_}=new URL(m),w=qo(_);return this.Jo(e,m,g,i,w).then((b=>(ge(Mm,`Received RPC '${e}' ${h}: `,b),b)),(b=>{throw Po(Mm,`RPC '${e}' ${h} failed with error: `,b,"url: ",m,"request:",i),b}))}Ho(e,t,i,o,c,h){return this.Go(e,t,i,o,c)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ho})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),i&&i.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const i=TI[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class AI extends bI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,c){const h=rg();return new Promise(((m,g)=>{const _=new sw;_.setWithCredentials(!0),_.listenOnce(iw.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case wd.NO_ERROR:const b=_.getResponseJson();ge(dn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(b)),m(b);break;case wd.TIMEOUT:ge(dn,`RPC '${e}' ${h} timed out`),g(new de(W.DEADLINE_EXCEEDED,"Request time out"));break;case wd.HTTP_ERROR:const A=_.getStatus();if(ge(dn,`RPC '${e}' ${h} failed with status:`,A,"response text:",_.getResponseText()),A>0){let I=_.getResponseJson();Array.isArray(I)&&(I=I[0]);const L=I==null?void 0:I.error;if(L&&L.status&&L.message){const G=(function(ie){const ae=ie.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ae)>=0?ae:W.UNKNOWN})(L.status);g(new de(G,L.message))}else g(new de(W.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new de(W.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{ge(dn,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);ge(dn,`RPC '${e}' ${h} sending request:`,o),_.send(t,"POST",w,i,15)}))}T_(e,t,i){const o=rg(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=lw(),m=ow(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const w=c.join("");ge(dn,`Creating RPC '${e}' stream ${o}: ${w}`,g);const b=h.createWebChannel(w,g);this.I_(b);let A=!1,I=!1;const L=new SI({Yo:B=>{I?ge(dn,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(A||(ge(dn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),A=!0),ge(dn,`RPC '${e}' stream ${o} sending:`,B),b.send(B))},Zo:()=>b.close()}),G=(B,ie,ae)=>{B.listen(ie,(oe=>{try{ae(oe)}catch(me){setTimeout((()=>{throw me}),0)}}))};return G(b,sc.EventType.OPEN,(()=>{I||(ge(dn,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),G(b,sc.EventType.CLOSE,(()=>{I||(I=!0,ge(dn,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(b))})),G(b,sc.EventType.ERROR,(B=>{I||(I=!0,Po(dn,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),L.a_(new de(W.UNAVAILABLE,"The operation could not be completed")))})),G(b,sc.EventType.MESSAGE,(B=>{var ie;if(!I){const ae=B.data[0];Ye(!!ae,16349);const oe=ae,me=(oe==null?void 0:oe.error)||((ie=oe[0])==null?void 0:ie.error);if(me){ge(dn,`RPC '${e}' stream ${o} received error:`,me);const he=me.status;let Y=(function(R){const M=kt[R];if(M!==void 0)return Gw(M)})(he),D=me.message;Y===void 0&&(Y=W.INTERNAL,D="Unknown error status: "+he+" with message "+me.message),I=!0,L.a_(new de(Y,D)),b.close()}else ge(dn,`RPC '${e}' stream ${o} received:`,ae),L.u_(ae)}})),G(m,aw.STAT_EVENT,(B=>{B.stat===Qm.PROXY?ge(dn,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===Qm.NOPROXY&&ge(dn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(s){return new C1(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,t,i=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="PersistentStream";class aT{constructor(e,t,i,o,c,h,m,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kg(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Os(t.toString()),Os("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new de(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(j0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ge(j0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xI extends aT{constructor(e,t,i,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=P1(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Re.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Re.min():h.readTime?Qn(h.readTime):Re.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=tg(this.serializer),t.addTarget=(function(c,h){let m;const g=h.target;if(m=Wm(g)?{documents:k1(c,g)}:{query:V1(c,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=Yw(c,h.resumeToken);const _=Zm(c,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(Re.min())>0){m.readTime=Ud(c,h.snapshotVersion.toTimestamp());const _=Zm(c,h.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const i=j1(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=tg(this.serializer),t.removeTarget=e,this.q_(t)}}class RI extends aT{constructor(e,t,i,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=M1(e.writeResults,e.commitTime),i=Qn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=tg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Jw(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{}class CI extends II{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new de(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(e,eg(t,i),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(W.UNKNOWN,c.toString())}))}Ho(e,t,i,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(e,eg(t,i),o,h,m,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new de(W.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class NI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Os(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="RemoteStore";class DI{constructor(e,t,i,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{xa(this)&&(ge(ba,"Restarting streams for network reachability change."),await(async function(g){const _=Oe(g);_.Ea.add(4),await Vc(_),_.Ra.set("Unknown"),_.Ea.delete(4),await hh(_)})(this))}))})),this.Ra=new NI(i,o)}}async function hh(s){if(xa(s))for(const e of s.da)await e(!0)}async function Vc(s){for(const e of s.da)await e(!1)}function oT(s,e){const t=Oe(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ug(t)?jg(t):Ko(t).O_()&&Lg(t,e))}function Vg(s,e){const t=Oe(s),i=Ko(t);t.Ia.delete(e),i.O_()&&lT(t,e),t.Ia.size===0&&(i.O_()?i.L_():xa(t)&&t.Ra.set("Unknown"))}function Lg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ko(s).Y_(e)}function lT(s,e){s.Va.Ue(e),Ko(s).Z_(e)}function jg(s){s.Va=new A1({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Ko(s).start(),s.Ra.ua()}function Ug(s){return xa(s)&&!Ko(s).x_()&&s.Ia.size>0}function xa(s){return Oe(s).Ea.size===0}function cT(s){s.Va=void 0}async function OI(s){s.Ra.set("Online")}async function PI(s){s.Ia.forEach(((e,t)=>{Lg(s,e)}))}async function MI(s,e){cT(s),Ug(s)?(s.Ra.ha(e),jg(s)):s.Ra.set("Unknown")}async function kI(s,e,t){if(s.Ra.set("Online"),e instanceof Kw&&e.state===2&&e.cause)try{await(async function(o,c){const h=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(s,e)}catch(i){ge(ba,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Bd(s,i)}else if(e instanceof Ad?s.Va.Ze(e):e instanceof Qw?s.Va.st(e):s.Va.tt(e),!t.isEqual(Re.min()))try{const i=await iT(s.localStore);t.compareTo(i)>=0&&await(function(c,h){const m=c.Va.Tt(h);return m.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const w=c.Ia.get(_);w&&c.Ia.set(_,w.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,_)=>{const w=c.Ia.get(g);if(!w)return;c.Ia.set(g,w.withResumeToken(ln.EMPTY_BYTE_STRING,w.snapshotVersion)),lT(c,g);const b=new Ei(w.target,g,_,w.sequenceNumber);Lg(c,b)})),c.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(i){ge(ba,"Failed to raise snapshot:",i),await Bd(s,i)}}async function Bd(s,e,t){if(!Go(e))throw e;s.Ea.add(1),await Vc(s),s.Ra.set("Offline"),t||(t=()=>iT(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ge(ba,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await hh(s)}))}function uT(s,e){return e().catch((t=>Bd(s,t,e)))}async function fh(s){const e=Oe(s),t=Oi(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wg;for(;VI(e);)try{const o=await yI(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,LI(e,o)}catch(o){await Bd(e,o)}dT(e)&&hT(e)}function VI(s){return xa(s)&&s.Ta.length<10}function LI(s,e){s.Ta.push(e);const t=Oi(s);t.O_()&&t.X_&&t.ea(e.mutations)}function dT(s){return xa(s)&&!Oi(s).x_()&&s.Ta.length>0}function hT(s){Oi(s).start()}async function jI(s){Oi(s).ra()}async function UI(s){const e=Oi(s);for(const t of s.Ta)e.ea(t.mutations)}async function zI(s,e,t){const i=s.Ta.shift(),o=Ig.from(i,e,t);await uT(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await fh(s)}async function qI(s,e){e&&Oi(s).X_&&await(async function(i,o){if((function(h){return Fw(h)&&h!==W.ABORTED})(o.code)){const c=i.Ta.shift();Oi(i).B_(),await uT(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await fh(i)}})(s,e),dT(s)&&hT(s)}async function U0(s,e){const t=Oe(s);t.asyncQueue.verifyOperationInProgress(),ge(ba,"RemoteStore received new credentials");const i=xa(t);t.Ea.add(3),await Vc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await hh(t)}async function BI(s,e){const t=Oe(s);e?(t.Ea.delete(2),await hh(t)):e||(t.Ea.add(2),await Vc(t),t.Ra.set("Unknown"))}function Ko(s){return s.ma||(s.ma=(function(t,i,o){const c=Oe(t);return c.sa(),new xI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:OI.bind(null,s),t_:PI.bind(null,s),r_:MI.bind(null,s),H_:kI.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Ug(s)?jg(s):s.Ra.set("Unknown")):(await s.ma.stop(),cT(s))}))),s.ma}function Oi(s){return s.fa||(s.fa=(function(t,i,o){const c=Oe(t);return c.sa(),new RI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:jI.bind(null,s),r_:qI.bind(null,s),ta:UI.bind(null,s),na:zI.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await fh(s)):(await s.fa.stop(),s.Ta.length>0&&(ge(ba,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,t,i,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,c){const h=Date.now()+i,m=new zg(e,t,h,o,c);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qg(s,e){if(Os("AsyncQueue",`${e}: ${s}`),Go(s))return new de(W.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{static emptySet(e){return new Io(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=ic(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Io;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(){this.ga=new Et(Ee.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class jo{constructor(e,t,i,o,c,h,m,g,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,c){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new jo(e,t,Io.emptySet(t),h,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class FI{constructor(){this.queries=q0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Oe(t),c=o.queries;o.queries=q0(),c.forEach(((h,m)=>{for(const g of m.Sa)g.onError(i)}))})(this,new de(W.ABORTED,"Firestore shutting down"))}}function q0(){return new Aa((s=>Nw(s)),ah)}async function Bg(s,e){const t=Oe(s);let i=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(i=2):(c=new HI,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=qg(h,`Initialization of query '${To(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Fg(t)}async function Hg(s,e){const t=Oe(s),i=e.query;let o=3;const c=t.queries.get(i);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function GI(s,e){const t=Oe(s);let i=!1;for(const o of e){const c=o.query,h=t.queries.get(c);if(h){for(const m of h.Sa)m.Fa(o)&&(i=!0);h.wa=o}}i&&Fg(t)}function QI(s,e,t){const i=Oe(s),o=i.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);i.queries.delete(e)}function Fg(s){s.Ca.forEach((e=>{e.next()}))}var sg,B0;(B0=sg||(sg={})).Ma="default",B0.Cache="cache";class Gg{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new jo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.key=e}}class mT{constructor(e){this.key=e}}class KI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=He(),this.mutatedKeys=He(),this.eu=Dw(e),this.tu=new Io(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new z0,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,b)=>{const A=o.get(w),I=oh(this.query,b)?b:null,L=!!A&&this.mutatedKeys.has(A.key),G=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let B=!1;A&&I?A.data.isEqual(I.data)?L!==G&&(i.track({type:3,doc:I}),B=!0):this.su(A,I)||(i.track({type:2,doc:I}),B=!0,(g&&this.eu(I,g)>0||_&&this.eu(I,_)<0)&&(m=!0)):!A&&I?(i.track({type:0,doc:I}),B=!0):A&&!I&&(i.track({type:1,doc:A}),B=!0,(g||_)&&(m=!0)),B&&(I?(h=h.add(I),c=G?c.add(w):c.delete(w)):(h=h.delete(w),c=c.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),c=c.delete(w.key),i.track({type:1,doc:w})}return{tu:h,iu:i,Cs:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,b)=>(function(I,L){const G=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:B})}};return G(I)-G(L)})(w.type,b.type)||this.eu(w.doc,b.doc))),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,_=g!==this.Za;return this.Za=g,h.length!==0||_?{snapshot:new jo(this.query,e.tu,c,h,e.mutatedKeys,g===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new z0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=He(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new mT(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new fT(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=He();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return jo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qg="SyncEngine";class YI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class XI{constructor(e){this.key=e,this.hu=!1}}class $I{constructor(e,t,i,o,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Aa((m=>Nw(m)),ah),this.Iu=new Map,this.Eu=new Set,this.du=new Et(Ee.comparator),this.Au=new Map,this.Ru=new Dg,this.Vu={},this.mu=new Map,this.fu=Lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WI(s,e,t=!0){const i=ET(s);let o;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await gT(i,e,t,!0),o}async function JI(s,e){const t=ET(s);await gT(t,e,!0,!1)}async function gT(s,e,t,i){const o=await _I(s.localStore,Gr(e)),c=o.targetId,h=s.sharedClientState.addLocalQueryTarget(c,t);let m;return i&&(m=await ZI(s,e,c,h==="current",o.resumeToken)),s.isPrimaryClient&&t&&oT(s.remoteStore,o),m}async function ZI(s,e,t,i,o){s.pu=(b,A,I)=>(async function(G,B,ie,ae){let oe=B.view.ru(ie);oe.Cs&&(oe=await M0(G.localStore,B.query,!1).then((({documents:D})=>B.view.ru(D,oe))));const me=ae&&ae.targetChanges.get(B.targetId),he=ae&&ae.targetMismatches.get(B.targetId)!=null,Y=B.view.applyChanges(oe,G.isPrimaryClient,me,he);return F0(G,B.targetId,Y.au),Y.snapshot})(s,b,A,I);const c=await M0(s.localStore,e,!0),h=new KI(e,c.Qs),m=h.ru(c.documents),g=kc.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",o),_=h.applyChanges(m,s.isPrimaryClient,g);F0(s,t,_.au);const w=new YI(e,t,h);return s.Tu.set(e,w),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),_.snapshot}async function eC(s,e,t){const i=Oe(s),o=i.Tu.get(e),c=i.Iu.get(o.targetId);if(c.length>1)return i.Iu.set(o.targetId,c.filter((h=>!ah(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await ng(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Vg(i.remoteStore,o.targetId),ig(i,o.targetId)})).catch(Fo)):(ig(i,o.targetId),await ng(i.localStore,o.targetId,!0))}async function tC(s,e){const t=Oe(s),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Vg(t.remoteStore,i.targetId))}async function nC(s,e,t){const i=cC(s);try{const o=await(function(h,m){const g=Oe(h),_=Xe.now(),w=m.reduce(((I,L)=>I.add(L.key)),He());let b,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let L=Ps(),G=He();return g.Ns.getEntries(I,w).next((B=>{L=B,L.forEach(((ie,ae)=>{ae.isValidDocument()||(G=G.add(ie))}))})).next((()=>g.localDocuments.getOverlayedDocuments(I,L))).next((B=>{b=B;const ie=[];for(const ae of m){const oe=v1(ae,b.get(ae.key).overlayedDocument);oe!=null&&ie.push(new Vi(ae.key,oe,Tw(oe.value.mapValue),gn.exists(!0)))}return g.mutationQueue.addMutationBatch(I,_,ie,m)})).next((B=>{A=B;const ie=B.applyToLocalDocumentSet(b,G);return g.documentOverlayCache.saveOverlays(I,B.batchId,ie)}))})).then((()=>({batchId:A.batchId,changes:Pw(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let _=h.Vu[h.currentUser.toKey()];_||(_=new Et(Be)),_=_.insert(m,g),h.Vu[h.currentUser.toKey()]=_})(i,o.batchId,t),await Lc(i,o.changes),await fh(i.remoteStore)}catch(o){const c=qg(o,"Failed to persist write");t.reject(c)}}async function pT(s,e){const t=Oe(s);try{const i=await gI(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const h=t.Au.get(c);h&&(Ye(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Ye(h.hu,14607):o.removedDocuments.size>0&&(Ye(h.hu,42227),h.hu=!1))})),await Lc(t,i,e)}catch(i){await Fo(i)}}function H0(s,e,t){const i=Oe(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((c,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=Oe(h);g.onlineState=m;let _=!1;g.queries.forEach(((w,b)=>{for(const A of b.Sa)A.va(m)&&(_=!0)})),_&&Fg(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function rC(s,e,t){const i=Oe(s);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),c=o&&o.key;if(c){let h=new Et(Ee.comparator);h=h.insert(c,$t.newNoDocument(c,Re.min()));const m=He().add(c),g=new uh(Re.min(),new Map,new Et(Be),h,m);await pT(i,g),i.du=i.du.remove(c),i.Au.delete(e),Kg(i)}else await ng(i.localStore,e,!1).then((()=>ig(i,e,t))).catch(Fo)}async function sC(s,e){const t=Oe(s),i=e.batch.batchId;try{const o=await mI(t.localStore,e);_T(t,i,null),yT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Lc(t,o)}catch(o){await Fo(o)}}async function iC(s,e,t){const i=Oe(s);try{const o=await(function(h,m){const g=Oe(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let w;return g.mutationQueue.lookupMutationBatch(_,m).next((b=>(Ye(b!==null,37113),w=b.keys(),g.mutationQueue.removeMutationBatch(_,b)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,w,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w))).next((()=>g.localDocuments.getDocuments(_,w)))}))})(i.localStore,e);_T(i,e,t),yT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Lc(i,o)}catch(o){await Fo(o)}}function yT(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function _T(s,e,t){const i=Oe(s);let o=i.Vu[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function ig(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||vT(s,i)}))}function vT(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(Vg(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),Kg(s))}function F0(s,e,t){for(const i of t)i instanceof fT?(s.Ru.addReference(i.key,e),aC(s,i)):i instanceof mT?(ge(Qg,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||vT(s,i.key)):we(19791,{wu:i})}function aC(s,e){const t=e.key,i=t.path.canonicalString();s.du.get(t)||s.Eu.has(i)||(ge(Qg,"New document in limbo: "+t),s.Eu.add(i),Kg(s))}function Kg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Ee(ct.fromString(e)),i=s.fu.next();s.Au.set(i,new XI(t)),s.du=s.du.insert(t,i),oT(s.remoteStore,new Ei(Gr(ih(t.path)),i,"TargetPurposeLimboResolution",rh.ce))}}async function Lc(s,e,t){const i=Oe(s),o=[],c=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,g)=>{h.push(i.pu(g,e,t).then((_=>{var w;if((_||t)&&i.isPrimaryClient){const b=_?!_.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:w.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(_){o.push(_);const b=Pg.As(g.targetId,_);c.push(b)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(g,_){const w=Oe(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>te.forEach(_,(A=>te.forEach(A.Es,(I=>w.persistence.referenceDelegate.addReference(b,A.targetId,I))).next((()=>te.forEach(A.ds,(I=>w.persistence.referenceDelegate.removeReference(b,A.targetId,I)))))))))}catch(b){if(!Go(b))throw b;ge(Mg,"Failed to update sequence numbers: "+b)}for(const b of _){const A=b.targetId;if(!b.fromCache){const I=w.Ms.get(A),L=I.snapshotVersion,G=I.withLastLimboFreeSnapshotVersion(L);w.Ms=w.Ms.insert(A,G)}}})(i.localStore,c))}async function oC(s,e){const t=Oe(s);if(!t.currentUser.isEqual(e)){ge(Qg,"User change. New user:",e.toKey());const i=await sT(t.localStore,e);t.currentUser=e,(function(c,h){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new de(W.CANCELLED,h))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Lc(t,i.Ls)}}function lC(s,e){const t=Oe(s),i=t.Au.get(e);if(i&&i.hu)return He().add(i.key);{let o=He();const c=t.Iu.get(e);if(!c)return o;for(const h of c){const m=t.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function ET(s){const e=Oe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=pT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rC.bind(null,e),e.Pu.H_=GI.bind(null,e.eventManager),e.Pu.yu=QI.bind(null,e.eventManager),e}function cC(s){const e=Oe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iC.bind(null,e),e}class Hd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return fI(this.persistence,new uI,e.initialUser,this.serializer)}Cu(e){return new rT(Og.mi,this.serializer)}Du(e){return new EI}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hd.provider={build:()=>new Hd};class uC extends Hd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ye(this.persistence.referenceDelegate instanceof qd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new X1(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new rT((i=>qd.mi(i,t)),this.serializer)}}class ag{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>H0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oC.bind(null,this.syncEngine),await BI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new FI})()}createDatastore(e){const t=dh(e.databaseInfo.databaseId),i=(function(c){return new AI(c)})(e.databaseInfo);return(function(c,h,m,g){return new CI(c,h,m,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,c,h,m){return new DI(i,o,c,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>H0(this.syncEngine,t,0)),(function(){return L0.v()?new L0:new wI})())}createSyncEngine(e,t){return(function(o,c,h,m,g,_,w){const b=new $I(o,c,h,m,g,_);return w&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const c=Oe(o);ge(ba,"RemoteStore shutting down."),c.Ea.add(5),await Vc(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ag.provider={build:()=>new ag};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Os("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new de(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,c){const h=Oe(o),m={documents:c.map((b=>zd(h.serializer,b)))},g=await h.Ho("BatchGetDocuments",h.serializer.databaseId,ct.emptyPath(),m,c.length),_=new Map;g.forEach((b=>{const A=O1(h.serializer,b);_.set(A.key.toString(),A)}));const w=[];return c.forEach((b=>{const A=_.get(b.toString());Ye(!!A,55234,{key:b}),w.push(A)})),w})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const o=Ee.fromPath(i);this.mutations.push(new Hw(o,this.precondition(o)))})),await(async function(i,o){const c=Oe(i),h={writes:o.map((m=>Jw(c.serializer,m)))};await c.Go("Commit",c.serializer.databaseId,ct.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw we(50498,{Gu:e.constructor.name});t=Re.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new de(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Re.min())?gn.exists(!1):gn.updateTime(t):gn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Re.min()))throw new de(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gn.updateTime(t)}return gn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t,i,o,c){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=o,this.deferred=c,this.zu=i.maxAttempts,this.M_=new kg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new dC(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((o=>{this.Yu(o)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Pc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Fw(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="FirestoreClient";class fC{constructor(e,t,i,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=mn.UNAUTHENTICATED,this.clientId=Eg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async h=>{ge(Pi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ge(Pi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=qg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Vm(s,e){s.asyncQueue.verifyOperationInProgress(),ge(Pi,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await sT(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function G0(s,e){s.asyncQueue.verifyOperationInProgress();const t=await mC(s);ge(Pi,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>U0(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>U0(e.remoteStore,o))),s._onlineComponents=e}async function mC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ge(Pi,"Using user provided OfflineComponentProvider");try{await Vm(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Po("Error using user provided cache. Falling back to memory cache: "+t),await Vm(s,new Hd)}}else ge(Pi,"Using default OfflineComponentProvider"),await Vm(s,new uC(void 0));return s._offlineComponents}async function Xg(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ge(Pi,"Using user provided OnlineComponentProvider"),await G0(s,s._uninitializedComponentsProvider._online)):(ge(Pi,"Using default OnlineComponentProvider"),await G0(s,new ag))),s._onlineComponents}function gC(s){return Xg(s).then((e=>e.syncEngine))}function pC(s){return Xg(s).then((e=>e.datastore))}async function Fd(s){const e=await Xg(s),t=e.eventManager;return t.onListen=WI.bind(null,e.syncEngine),t.onUnlisten=eC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=JI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tC.bind(null,e.syncEngine),t}function yC(s,e,t={}){const i=new Fr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,h,m,g,_){const w=new Yg({next:A=>{w.Nu(),h.enqueueAndForget((()=>Hg(c,b)));const I=A.docs.has(m);!I&&A.fromCache?_.reject(new de(W.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&A.fromCache&&g&&g.source==="server"?_.reject(new de(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(A)},error:A=>_.reject(A)}),b=new Gg(ih(m.path),w,{includeMetadataChanges:!0,qa:!0});return Bg(c,b)})(await Fd(s),s.asyncQueue,e,t,i))),i.promise}function _C(s,e,t={}){const i=new Fr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,h,m,g,_){const w=new Yg({next:A=>{w.Nu(),h.enqueueAndForget((()=>Hg(c,b))),A.fromCache&&g.source==="server"?_.reject(new de(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),b=new Gg(m,w,{includeMetadataChanges:!0,qa:!0});return Bg(c,b)})(await Fd(s),s.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="firestore.googleapis.com",K0=!0;class Y0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TT,this.ssl=K0}else this.host=e.host,this.ssl=e.ssl??K0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<K1)throw new de(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wT(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new TR;switch(i.type){case"firstParty":return new xR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Q0.get(t);i&&(ge("ComponentProvider","Removing Datastore"),Q0.delete(t),i.terminate())})(this),Promise.resolve()}}function vC(s,e,t,i={}){var _;s=On(s,mh);const o=qo(e),c=s._getSettings(),h={...c,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;o&&(XE(`https://${m}`),$E("Firestore",!0)),c.host!==TT&&c.host!==m&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:i};if(!Ea(g,h)&&(s._setSettings(g),i.mockUserToken)){let w,b;if(typeof i.mockUserToken=="string")w=i.mockUserToken,b=mn.MOCK_USER;else{w=KA(i.mockUserToken,(_=s._app)==null?void 0:_.options.projectId);const A=i.mockUserToken.sub||i.mockUserToken.user_id;if(!A)throw new de(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new mn(A)}s._authCredentials=new bR(new uw(w,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new js(this.firestore,e,this._query)}}class _t{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Oc(t,_t._jsonSchema))return new _t(e,i||null,new Ee(ct.fromString(t.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:Lt("string",_t._jsonSchemaVersion),referencePath:Lt("string")};class xi extends js{constructor(e,t,i){super(e,t,ih(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new Ee(e))}withConverter(e){return new xi(this.firestore,e,this._path)}}function nt(s,e,...t){if(s=vt(s),dw("collection","path",e),s instanceof mh){const i=ct.fromString(e,...t);return o0(i),new xi(s,null,i)}{if(!(s instanceof _t||s instanceof xi))throw new de(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(ct.fromString(e,...t));return o0(i),new xi(s.firestore,null,i)}}function Wt(s,e,...t){if(s=vt(s),arguments.length===1&&(e=Eg.newId()),dw("doc","path",e),s instanceof mh){const i=ct.fromString(e,...t);return a0(i),new _t(s,null,new Ee(i))}{if(!(s instanceof _t||s instanceof xi))throw new de(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(ct.fromString(e,...t));return a0(i),new _t(s.firestore,s instanceof xi?s.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="AsyncQueue";class $0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kg(this,"async_queue_retry"),this._c=()=>{const i=km();i&&ge(X0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=km();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=km();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Fr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Go(e))throw e;ge(X0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Os("INTERNAL UNHANDLED ERROR: ",W0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=zg.createAndSchedule(this,e,t,i,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:W0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function W0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(s){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of i)if(c in o&&typeof o[c]=="function")return!0;return!1})(s,["next","error","complete"])}class Ms extends mh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new $0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $0(e),this._firestoreClient=void 0,await e}}}function EC(s,e){const t=typeof s=="object"?s:ew(),i=typeof s=="string"?s:Md,o=_g(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=GA("firestore");c&&vC(o,...c)}return o}function jc(s){if(s._terminated)throw new de(W.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||wC(s),s._firestoreClient}function wC(s){var i,o,c;const e=s._freezeSettings(),t=(function(m,g,_,w){return new FR(m,g,_,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,wT(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(s._databaseId,((i=s._app)==null?void 0:i.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new fC(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(ln.fromBase64String(e))}catch(t){throw new de(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fn(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oc(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:Lt("string",Fn._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qr._jsonSchemaVersion}}static fromJSON(e){if(Oc(e,Qr._jsonSchema))return new Qr(e.latitude,e.longitude)}}Qr._jsonSchemaVersion="firestore/geoPoint/1.0",Qr._jsonSchema={type:Lt("string",Qr._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oc(e,Kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Kr(e.vectorValues);throw new de(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kr._jsonSchemaVersion="firestore/vectorValue/1.0",Kr._jsonSchema={type:Lt("string",Kr._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=/^__.*__$/;class bC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mc(e,this.data,t,this.fieldTransforms)}}class bT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ST(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:s})}}class $g{constructor(e,t,i,o,c,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $g({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Gd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ST(this.Ac)&&TC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class SC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||dh(e)}Cc(e,t,i,o=!1){return new $g({Ac:e,methodName:t,Dc:i,path:on.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zc(s){const e=s._freezeSettings(),t=dh(s._databaseId);return new SC(s._databaseId,!!e.ignoreUndefinedProperties,t)}function Wg(s,e,t,i,o,c={}){const h=s.Cc(c.merge||c.mergeFields?2:0,e,t,o);Zg("Data must be an object, but it was:",h,i);const m=RT(i,h);let g,_;if(c.merge)g=new Gn(h.fieldMask),_=h.fieldTransforms;else if(c.mergeFields){const w=[];for(const b of c.mergeFields){const A=og(e,b,t);if(!h.contains(A))throw new de(W.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);CT(w,A)||w.push(A)}g=new Gn(w),_=h.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,_=h.fieldTransforms;return new bC(new An(m),g,_)}class ph extends gh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ph}}class Jg extends gh{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Ac(e.serializer,Vw(e.serializer,this.Fc));return new g1(e.path,t)}isEqual(e){return e instanceof Jg&&this.Fc===e.Fc}}function AT(s,e,t,i){const o=s.Cc(1,e,t);Zg("Data must be an object, but it was:",o,i);const c=[],h=An.empty();ki(i,((g,_)=>{const w=ep(e,g,t);_=vt(_);const b=o.yc(w);if(_ instanceof ph)c.push(w);else{const A=qc(_,b);A!=null&&(c.push(w),h.set(w,A))}}));const m=new Gn(c);return new bT(h,m,o.fieldTransforms)}function xT(s,e,t,i,o,c){const h=s.Cc(1,e,t),m=[og(e,i,t)],g=[o];if(c.length%2!=0)throw new de(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<c.length;A+=2)m.push(og(e,c[A])),g.push(c[A+1]);const _=[],w=An.empty();for(let A=m.length-1;A>=0;--A)if(!CT(_,m[A])){const I=m[A];let L=g[A];L=vt(L);const G=h.yc(I);if(L instanceof ph)_.push(I);else{const B=qc(L,G);B!=null&&(_.push(I),w.set(I,B))}}const b=new Gn(_);return new bT(w,b,h.fieldTransforms)}function AC(s,e,t,i=!1){return qc(t,s.Cc(i?4:3,e))}function qc(s,e){if(IT(s=vt(s)))return Zg("Unsupported field value:",e,s),RT(s,e);if(s instanceof gh)return(function(i,o){if(!ST(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const c=[];let h=0;for(const m of i){let g=qc(m,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),h++}return{arrayValue:{values:c}}})(s,e)}return(function(i,o){if((i=vt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Vw(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Xe.fromDate(i);return{timestampValue:Ud(o.serializer,c)}}if(i instanceof Xe){const c=new Xe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ud(o.serializer,c)}}if(i instanceof Qr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Fn)return{bytesValue:Yw(o.serializer,i._byteString)};if(i instanceof _t){const c=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ng(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Kr)return(function(h,m){return{mapValue:{fields:{[Ew]:{stringValue:ww},[kd]:{arrayValue:{values:h.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return xg(m.serializer,_)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${nh(i)}`)})(s,e)}function RT(s,e){const t={};return mw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ki(s,((i,o)=>{const c=qc(o,e.mc(i));c!=null&&(t[i]=c)})),{mapValue:{fields:t}}}function IT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Xe||s instanceof Qr||s instanceof Fn||s instanceof _t||s instanceof gh||s instanceof Kr)}function Zg(s,e,t){if(!IT(t)||!hw(t)){const i=nh(t);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function og(s,e,t){if((e=vt(e))instanceof Uc)return e._internalPath;if(typeof e=="string")return ep(s,e);throw Gd("Field path arguments must be of type string or ",s,!1,void 0,t)}const xC=new RegExp("[~\\*/\\[\\]]");function ep(s,e,t){if(e.search(xC)>=0)throw Gd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Uc(...e.split("."))._internalPath}catch{throw Gd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Gd(s,e,t,i,o){const c=i&&!i.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||h)&&(g+=" (found",c&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new de(W.INVALID_ARGUMENT,m+s+g)}function CT(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t,i,o,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class RC extends Qd{data(){return super.data()}}function yh(s,e){return typeof e=="string"?ep(s,e):e instanceof Uc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new de(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tp{}class np extends tp{}function St(s,e,...t){let i=[];e instanceof tp&&i.push(e),i=i.concat(t),(function(c){const h=c.filter((g=>g instanceof rp)).length,m=c.filter((g=>g instanceof _h)).length;if(h>1||h>0&&m>0)throw new de(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)s=o._apply(s);return s}class _h extends np{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new _h(e,t,i)}_apply(e){const t=this._parse(e);return OT(e._query,t),new js(e.firestore,e.converter,Jm(e._query,t))}_parse(e){const t=zc(e.firestore);return(function(c,h,m,g,_,w,b){let A;if(_.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new de(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){eE(b,w);const L=[];for(const G of b)L.push(Z0(g,c,G));A={arrayValue:{values:L}}}else A=Z0(g,c,b)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||eE(b,w),A=AC(m,h,b,w==="in"||w==="not-in");return Vt.create(_,w,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Je(s,e,t){const i=e,o=yh("where",s);return _h._create(o,i,t)}class rp extends tp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rp(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:wr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let h=o;const m=c.getFlattenedFilters();for(const g of m)OT(h,g),h=Jm(h,g)})(e._query,t),new js(e.firestore,e.converter,Jm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sp extends np{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sp(e,t)}_apply(e){const t=(function(o,c,h){if(o.startAt!==null)throw new de(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tc(c,h)})(e._query,this._field,this._direction);return new js(e.firestore,e.converter,(function(o,c){const h=o.explicitOrderBy.concat([c]);return new Qo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function Kd(s,e="asc"){const t=e,i=yh("orderBy",s);return sp._create(i,t)}class ip extends np{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new ip(e,t,i)}_apply(e){return new js(e.firestore,e.converter,Ld(e._query,this._limit,this._limitType))}}function DT(s){return PR("limit",s),ip._create("limit",s,"F")}function Z0(s,e,t){if(typeof(t=vt(t))=="string"){if(t==="")throw new de(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cw(e)&&t.indexOf("/")!==-1)throw new de(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ct.fromString(t));if(!Ee.isDocumentKey(i))throw new de(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return g0(s,new Ee(i))}if(t instanceof _t)return g0(s,t._key);throw new de(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nh(t)}.`)}function eE(s,e){if(!Array.isArray(s)||s.length===0)throw new de(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OT(s,e){const t=(function(o,c){for(const h of o)for(const m of h.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class PT{convertValue(e,t="none"){switch(Di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ki(e,((o,c)=>{i[o]=this.convertValue(c,t)})),i}convertVectorValue(e){var i,o,c;const t=(c=(o=(i=e.fields)==null?void 0:i[kd].arrayValue)==null?void 0:o.values)==null?void 0:c.map((h=>Nt(h.doubleValue)));return new Kr(t)}convertGeoPoint(e){return new Qr(Nt(e.latitude),Nt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=sh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(vc(e));default:return null}}convertTimestamp(e){const t=Ci(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ct.fromString(e);Ye(tT(i),9688,{name:e});const o=new Ec(i.get(1),i.get(3)),c=new Ee(i.popFirst(5));return o.isEqual(t)||Os(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}class IC extends PT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}class Ao{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ri extends Qd{constructor(e,t,i,o,c,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(yh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ri._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ri._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ri._jsonSchema={type:Lt("string",Ri._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class xd extends Ri{data(e={}){return super.data(e)}}class va{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ao(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new xd(this._firestore,this._userDataWriter,i.key,i,new Ao(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new xd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ao(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new xd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ao(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,w=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),w=h.indexOf(m.doc.key)),{type:CC(m.type),doc:g,oldIndex:_,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=va._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Eg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CC(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(s){s=On(s,_t);const e=On(s.firestore,Ms);return yC(jc(e),s._key).then((t=>MT(e,s,t)))}va._jsonSchemaVersion="firestore/querySnapshot/1.0",va._jsonSchema={type:Lt("string",va._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class vh extends PT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}function pt(s){s=On(s,js);const e=On(s.firestore,Ms),t=jc(e),i=new vh(e);return NT(s._query),_C(t,s._query).then((o=>new va(e,i,s,o)))}function xc(s,e,t){s=On(s,_t);const i=On(s.firestore,Ms),o=ap(s.converter,e,t);return lp(i,[Wg(zc(i),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,gn.none())])}function op(s,e,t,...i){s=On(s,_t);const o=On(s.firestore,Ms),c=zc(o);let h;return h=typeof(e=vt(e))=="string"||e instanceof Uc?xT(c,"updateDoc",s._key,e,t,i):AT(c,"updateDoc",s._key,e),lp(o,[h.toMutation(s._key,gn.exists(!0))])}function Bc(s,e){const t=On(s.firestore,Ms),i=Wt(s),o=ap(s.converter,e);return lp(t,[Wg(zc(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,gn.exists(!1))]).then((()=>i))}function NC(s,...e){var g,_,w;s=vt(s);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||J0(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(J0(e[i])){const b=e[i];e[i]=(g=b.next)==null?void 0:g.bind(b),e[i+1]=(_=b.error)==null?void 0:_.bind(b),e[i+2]=(w=b.complete)==null?void 0:w.bind(b)}let c,h,m;if(s instanceof _t)h=On(s.firestore,Ms),m=ih(s._key.path),c={next:b=>{e[i]&&e[i](MT(h,s,b))},error:e[i+1],complete:e[i+2]};else{const b=On(s,js);h=On(b.firestore,Ms),m=b._query;const A=new vh(h);c={next:I=>{e[i]&&e[i](new va(h,A,b,I))},error:e[i+1],complete:e[i+2]},NT(s._query)}return(function(A,I,L,G){const B=new Yg(G),ie=new Gg(I,B,L);return A.asyncQueue.enqueueAndForget((async()=>Bg(await Fd(A),ie))),()=>{B.Nu(),A.asyncQueue.enqueueAndForget((async()=>Hg(await Fd(A),ie)))}})(jc(h),m,o,c)}function lp(s,e){return(function(i,o){const c=new Fr;return i.asyncQueue.enqueueAndForget((async()=>nC(await gC(i),o,c))),c.promise})(jc(s),e)}function MT(s,e,t){const i=t.docs.get(e._key),o=new vh(s);return new Ri(s,o,e._key,i,new Ao(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC={maxAttempts:5};function oc(s,e){if((s=vt(s)).firestore!==e)throw new de(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=zc(e)}get(e){const t=oc(e,this._firestore),i=new IC(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return we(24041);const c=o[0];if(c.isFoundDocument())return new Qd(this._firestore,i,c.key,c,t.converter);if(c.isNoDocument())return new Qd(this._firestore,i,t._key,null,t.converter);throw we(18433,{doc:c})}))}set(e,t,i){const o=oc(e,this._firestore),c=ap(o.converter,t,i),h=Wg(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,i);return this._transaction.set(o._key,h),this}update(e,t,i,...o){const c=oc(e,this._firestore);let h;return h=typeof(t=vt(t))=="string"||t instanceof Uc?xT(this._dataReader,"Transaction.update",c._key,t,i,o):AT(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,h),this}delete(e){const t=oc(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC extends OC{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=oc(e,this._firestore),i=new vh(this._firestore);return super.get(e).then((o=>new Ri(this._firestore,i,t._key,o._document,new Ao(!1,!1),t.converter)))}}function MC(s,e,t){s=On(s,Ms);const i={...DC,...t};return(function(c){if(c.maxAttempts<1)throw new de(W.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(c,h,m){const g=new Fr;return c.asyncQueue.enqueueAndForget((async()=>{const _=await pC(c);new hC(c.asyncQueue,_,m,h,g).ju()})),g.promise})(jc(s),(o=>e(new PC(s,o))),i)}function kT(s){return new Jg("increment",s)}(function(e,t=!0){(function(o){Ho=o})(Bo),Oo(new wa("firestore",((i,{instanceIdentifier:o,options:c})=>{const h=i.getProvider("app").getImmediate(),m=new Ms(new SR(i.getProvider("auth-internal")),new RR(h,i.getProvider("app-check-internal")),(function(_,w){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new de(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ec(_.options.projectId,w)})(h,o),h);return c={useFetchStreams:t,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Si(n0,r0,e),Si(n0,r0,"esm2020")})();function VT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kC=VT,LT=new Nc("auth","Firebase",VT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=new pg("@firebase/auth");function VC(s,...e){Yd.logLevel<=qe.WARN&&Yd.warn(`Auth (${Bo}): ${s}`,...e)}function Rd(s,...e){Yd.logLevel<=qe.ERROR&&Yd.error(`Auth (${Bo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(s,...e){throw up(s,...e)}function Er(s,...e){return up(s,...e)}function cp(s,e,t){const i={...kC(),[e]:t};return new Nc("auth","Firebase",i).create(e,{appName:s.name})}function Yr(s){return cp(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LC(s,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&or(s,"argument-error"),cp(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function up(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return LT.create(s,...e)}function Ie(s,e,...t){if(!s)throw up(e,...t)}function Cs(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Rd(e),new Error(e)}function ks(s,e){s||Cs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function jC(){return tE()==="http:"||tE()==="https:"}function tE(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jC()||ZA()||"connection"in navigator)?navigator.onLine:!0}function zC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ks(t>e,"Short delay should be less than long delay!"),this.isMobile=$A()||ex()}get(){return UC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(s,e){ks(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HC=new Hc(3e4,6e4);function Us(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Jr(s,e,t,i,o={}){return UT(s,o,async()=>{let c={},h={};i&&(e==="GET"?h=i:c={body:JSON.stringify(i)});const m=Dc({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const _={method:e,headers:g,...c};return JA()||(_.referrerPolicy="no-referrer"),s.emulatorConfig&&qo(s.emulatorConfig.host)&&(_.credentials="include"),jT.fetch()(await zT(s,s.config.apiHost,t,m),_)})}async function UT(s,e,t){s._canInitEmulator=!1;const i={...qC,...e};try{const o=new GC(s),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw yd(s,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const m=c.ok?h.errorMessage:h.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw yd(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw yd(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw yd(s,"user-disabled",h);const w=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw cp(s,w,_);or(s,w)}}catch(o){if(o instanceof Ls)throw o;or(s,"network-request-failed",{message:String(o)})}}async function Fc(s,e,t,i,o={}){const c=await Jr(s,e,t,i,o);return"mfaPendingCredential"in c&&or(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function zT(s,e,t,i){const o=`${e}${t}?${i}`,c=s,h=c.config.emulator?dp(s.config,o):`${s.config.apiScheme}://${o}`;return BC.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function FC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Er(this.auth,"network-request-failed")),HC.get())})}}function yd(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Er(s,e,i);return o.customData._tokenResponse=t,o}function nE(s){return s!==void 0&&s.enterprise!==void 0}class QC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return FC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KC(s,e){return Jr(s,"GET","/v2/recaptchaConfig",Us(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YC(s,e){return Jr(s,"POST","/v1/accounts:delete",e)}async function Xd(s,e){return Jr(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XC(s,e=!1){const t=vt(s),i=await t.getIdToken(e),o=hp(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c==null?void 0:c.sign_in_provider;return{claims:o,token:i,authTime:gc(Lm(o.auth_time)),issuedAtTime:gc(Lm(o.iat)),expirationTime:gc(Lm(o.exp)),signInProvider:h||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Lm(s){return Number(s)*1e3}function hp(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return Rd("JWT malformed, contained fewer than 3 sections"),null;try{const o=GE(t);return o?JSON.parse(o):(Rd("Failed to decode base64 JWT payload"),null)}catch(o){return Rd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function rE(s){const e=hp(s);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ls&&$C(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function $C({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gc(this.lastLoginAt),this.creationTime=gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $d(s){var b;const e=s.auth,t=await s.getIdToken(),i=await Uo(s,Xd(e,{idToken:t}));Ie(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const c=(b=o.providerUserInfo)!=null&&b.length?qT(o.providerUserInfo):[],h=ZC(s.providerData,c),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!(h!=null&&h.length),_=m?g:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new cg(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(s,w)}async function JC(s){const e=vt(s);await $d(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZC(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function qT(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(s,e){const t=await UT(s,{},async()=>{const i=Dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,h=await zT(s,o,"/v1/token",`key=${c}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:i};return s.emulatorConfig&&qo(s.emulatorConfig.host)&&(g.credentials="include"),jT.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tN(s,e){return Jr(s,"POST","/v2/accounts:revokeToken",Us(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=rE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:c}=await eN(e,t);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:c}=t,h=new Co;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(Ie(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Co,this.toJSON())}_performRefresh(){return Cs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(s,e){Ie(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class vr{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new WC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new cg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Uo(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return XC(this,e)}reload(){return JC(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await $d(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(Yr(this.auth));const e=await this.getIdToken();return await Uo(this,YC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,h=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,_=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:b,emailVerified:A,isAnonymous:I,providerData:L,stsTokenManager:G}=t;Ie(b&&G,e,"internal-error");const B=Co.fromJSON(this.name,G);Ie(typeof b=="string",e,"internal-error"),pi(i,e.name),pi(o,e.name),Ie(typeof A=="boolean",e,"internal-error"),Ie(typeof I=="boolean",e,"internal-error"),pi(c,e.name),pi(h,e.name),pi(m,e.name),pi(g,e.name),pi(_,e.name),pi(w,e.name);const ie=new vr({uid:b,auth:e,email:o,emailVerified:A,displayName:i,isAnonymous:I,photoURL:h,phoneNumber:c,tenantId:m,stsTokenManager:B,createdAt:_,lastLoginAt:w});return L&&Array.isArray(L)&&(ie.providerData=L.map(ae=>({...ae}))),g&&(ie._redirectEventId=g),ie}static async _fromIdTokenResponse(e,t,i=!1){const o=new Co;o.updateFromServerResponse(t);const c=new vr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await $d(c),c}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?qT(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),m=new Co;m.updateFromIdToken(i);const g=new vr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new cg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Map;function Ns(s){ks(s instanceof Function,"Expected a class definition");let e=sE.get(s);return e?(ks(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,sE.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}BT.type="NONE";const iE=BT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(s,e,t){return`firebase:${s}:${e}:${t}`}class No{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=Id(this.userKey,o.apiKey,c),this.fullPersistenceKey=Id("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Xd(this.auth,{idToken:e}).catch(()=>{});return t?vr._fromGetAccountInfoResponse(this.auth,t,e):null}return vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new No(Ns(iE),e,i);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=o[0]||Ns(iE);const h=Id(i,e.config.apiKey,e.name);let m=null;for(const _ of t)try{const w=await _._get(h);if(w){let b;if(typeof w=="string"){const A=await Xd(e,{idToken:w}).catch(()=>{});if(!A)break;b=await vr._fromGetAccountInfoResponse(e,A,w)}else b=vr._fromJSON(e,w);_!==c&&(m=b),c=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new No(c,e,i):(c=g[0],m&&await c._set(h,m.toJSON()),await Promise.all(t.map(async _=>{if(_!==c)try{await _._remove(h)}catch{}})),new No(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YT(e))return"Blackberry";if(XT(e))return"Webos";if(FT(e))return"Safari";if((e.includes("chrome/")||GT(e))&&!e.includes("edge/"))return"Chrome";if(KT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function HT(s=pn()){return/firefox\//i.test(s)}function FT(s=pn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GT(s=pn()){return/crios\//i.test(s)}function QT(s=pn()){return/iemobile/i.test(s)}function KT(s=pn()){return/android/i.test(s)}function YT(s=pn()){return/blackberry/i.test(s)}function XT(s=pn()){return/webos/i.test(s)}function fp(s=pn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function nN(s=pn()){var e;return fp(s)&&!!((e=window.navigator)!=null&&e.standalone)}function rN(){return tx()&&document.documentMode===10}function $T(s=pn()){return fp(s)||KT(s)||XT(s)||YT(s)||/windows phone/i.test(s)||QT(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(s,e=[]){let t;switch(s){case"Browser":t=aE(pn());break;case"Worker":t=`${aE(pn())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=c=>new Promise((h,m)=>{try{const g=e(c);h(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(s,e={}){return Jr(s,"GET","/v2/passwordPolicy",Us(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=6;class oN{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??aN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oE(this),this.idTokenSubscription=new oE(this),this.beforeStateQueue=new sN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ns(t)),this._initializationPromise=this.queue(async()=>{var i,o,c;if(!this._deleted&&(this.persistenceManager=await No.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Xd(this,{idToken:e}),i=await vr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Dn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(c=this.redirectUser)==null?void 0:c._redirectEventId,m=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $d(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(Yr(this));const t=e?vt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(Yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(Yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ns(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iN(this),t=new oN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await tN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ns(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await No.create(this,[Ns(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(m,this,"internal-error"),m.then(()=>{h||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&VC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Zr(s){return vt(s)}class oE{constructor(e){this.auth=e,this.observer=null,this.addObserver=cx(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cN(s){Eh=s}function JT(s){return Eh.loadJS(s)}function uN(){return Eh.recaptchaEnterpriseScript}function dN(){return Eh.gapiScript}function hN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class fN{constructor(){this.enterprise=new mN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class mN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const gN="recaptcha-enterprise",ZT="NO_RECAPTCHA";class pN{constructor(e){this.type=gN,this.auth=Zr(e)}async verify(e="verify",t=!1){async function i(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,m)=>{KC(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new QC(g);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,h(_.siteKey)}}).catch(g=>{m(g)})})}function o(c,h,m){const g=window.grecaptcha;nE(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(_=>{h(_)}).catch(()=>{h(ZT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fN().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{i(this.auth).then(m=>{if(!t&&nE(window.grecaptcha))o(m,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=uN();g.length!==0&&(g+=m),JT(g).then(()=>{o(m,c,h)}).catch(_=>{h(_)})}}).catch(m=>{h(m)})})}}async function lE(s,e,t,i=!1,o=!1){const c=new pN(s);let h;if(o)h=ZT;else try{h=await c.verify(t)}catch{h=await c.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Wd(s,e,t,i,o){var c;if((c=s._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await lE(s,e,t,t==="getOobCode");return i(s,h)}else return i(s,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await lE(s,e,t,t==="getOobCode");return i(s,m)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(s,e){const t=_g(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(Ea(c,e??{}))return o;or(o,"already-initialized")}return t.initialize({options:e})}function _N(s,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Ns);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function vN(s,e,t){const i=Zr(s);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=eb(e),{host:h,port:m}=EN(e),g=m===null?"":`:${m}`,_={url:`${c}//${h}${g}/`},w=Object.freeze({host:h,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(Ea(_,i.config.emulator)&&Ea(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=_,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,qo(h)?(XE(`${c}//${h}${g}`),$E("Auth",!0)):wN()}function eb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function EN(s){const e=eb(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:cE(i.substr(c.length+1))}}else{const[c,h]=i.split(":");return{host:c,port:cE(h)}}}function cE(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function wN(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Cs("not implemented")}_getIdTokenResponse(e){return Cs("not implemented")}_linkToIdToken(e,t){return Cs("not implemented")}_getReauthenticationResolver(e){return Cs("not implemented")}}async function TN(s,e){return Jr(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(s,e){return Fc(s,"POST","/v1/accounts:signInWithPassword",Us(s,e))}async function tb(s,e){return Jr(s,"POST","/v1/accounts:sendOobCode",Us(s,e))}async function SN(s,e){return tb(s,e)}async function AN(s,e){return tb(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(s,e){return Fc(s,"POST","/v1/accounts:signInWithEmailLink",Us(s,e))}async function RN(s,e){return Fc(s,"POST","/v1/accounts:signInWithEmailLink",Us(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends mp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Rc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Rc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wd(e,t,"signInWithPassword",bN);case"emailLink":return xN(e,{email:this._email,oobCode:this._password});default:or(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wd(e,i,"signUpPassword",TN);case"emailLink":return RN(e,{idToken:t,email:this._email,oobCode:this._password});default:or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(s,e){return Fc(s,"POST","/v1/accounts:signInWithIdp",Us(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="http://localhost";class Sa extends mp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):or("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=t;if(!i||!o)return null;const h=new Sa(i,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Do(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Do(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Do(e,t)}buildRequest(){const e={requestUri:IN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Dc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function NN(s){const e=nc(rc(s)).link,t=e?nc(rc(e)).deep_link_id:null,i=nc(rc(s)).deep_link_id;return(i?nc(rc(i)).link:null)||i||t||e||s}class gp{constructor(e){const t=nc(rc(e)),i=t.apiKey??null,o=t.oobCode??null,c=CN(t.mode??null);Ie(i&&o&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=NN(e);try{return new gp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.providerId=Yo.PROVIDER_ID}static credential(e,t){return Rc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=gp.parseLink(t);return Ie(i,"argument-error"),Rc._fromEmailAndCode(e,i.code,i.tenantId)}}Yo.PROVIDER_ID="password";Yo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends pp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Gc{constructor(){super("facebook.com")}static credential(e){return Sa._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends Gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Sa._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Is.credential(t,i)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Gc{constructor(){super("github.com")}static credential(e){return Sa._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.GITHUB_SIGN_IN_METHOD="github.com";_i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Gc{constructor(){super("twitter.com")}static credential(e,t){return Sa._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return vi.credential(t,i)}catch{return null}}}vi.TWITTER_SIGN_IN_METHOD="twitter.com";vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nb(s,e){return Fc(s,"POST","/v1/accounts:signUp",Us(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const c=await vr._fromIdTokenResponse(e,i,o),h=uE(i);return new Vs({user:c,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=uE(i);return new Vs({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function uE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(s){var o;if(Dn(s.app))return Promise.reject(Yr(s));const e=Zr(s);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new Vs({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await nb(e,{returnSecureToken:!0}),i=await Vs._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends Ls{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Jd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Jd(e,t,i,o)}}function rb(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Jd._fromErrorAndOperation(s,c,e,i):c})}async function ON(s,e,t=!1){const i=await Uo(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Vs._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(s,e,t=!1){const{auth:i}=s;if(Dn(i.app))return Promise.reject(Yr(i));const o="reauthenticate";try{const c=await Uo(s,rb(i,o,e,s),t);Ie(c.idToken,i,"internal-error");const h=hp(c.idToken);Ie(h,i,"internal-error");const{sub:m}=h;return Ie(s.uid===m,i,"user-mismatch"),Vs._forOperation(s,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&or(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sb(s,e,t=!1){if(Dn(s.app))return Promise.reject(Yr(s));const i="signIn",o=await rb(s,i,e),c=await Vs._fromIdTokenResponse(s,i,o);return t||await s._updateCurrentUser(c.user),c}async function MN(s,e){return sb(Zr(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ib(s){const e=Zr(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kN(s,e,t){const i=Zr(s);await Wd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",AN)}async function VN(s,e,t){if(Dn(s.app))return Promise.reject(Yr(s));const i=Zr(s),h=await Wd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nb).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&ib(s),g}),m=await Vs._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(m.user),m}function LN(s,e,t){return Dn(s.app)?Promise.reject(Yr(s)):MN(vt(s),Yo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&ib(s),i})}async function ab(s,e){const t=vt(s),o={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:c}=await SN(t.auth,o);c!==s.email&&await s.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(s,e){return Jr(s,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(s,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=vt(s),c={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},h=await Uo(i,jN(i.auth,c));i.displayName=h.displayName||null,i.photoURL=h.photoUrl||null;const m=i.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=i.displayName,m.photoURL=i.photoURL),await i._updateTokensIfNecessary(h)}function zN(s,e,t,i){return vt(s).onIdTokenChanged(e,t,i)}function qN(s,e,t){return vt(s).beforeAuthStateChanged(e,t)}function BN(s,e,t,i){return vt(s).onAuthStateChanged(e,t,i)}function HN(s){return vt(s).signOut()}const Zd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zd,"1"),this.storage.removeItem(Zd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=1e3,GN=10;class lb extends ob{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$T(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},c=this.storage.getItem(i);rN()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,GN):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},FN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}lb.type="LOCAL";const QN=lb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb extends ob{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}cb.type="SESSION";const ub=cb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new wh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:c}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(h).map(async _=>_(t.origin,c)),g=await KN(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((m,g)=>{const _=yp("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(b){const A=b;if(A.data.eventId===_)switch(A.data.status){case"ack":clearTimeout(w),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(A.data.response);break;default:clearTimeout(w),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(){return window}function XN(s){Xr().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(){return typeof Xr().WorkerGlobalScope<"u"&&typeof Xr().importScripts=="function"}async function $N(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WN(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function JN(){return db()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="firebaseLocalStorageDb",ZN=1,eh="firebaseLocalStorage",fb="fbase_key";class Qc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Th(s,e){return s.transaction([eh],e?"readwrite":"readonly").objectStore(eh)}function e2(){const s=indexedDB.deleteDatabase(hb);return new Qc(s).toPromise()}function ug(){const s=indexedDB.open(hb,ZN);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(eh,{keyPath:fb})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(eh)?e(i):(i.close(),await e2(),e(await ug()))})})}async function dE(s,e,t){const i=Th(s,!0).put({[fb]:e,value:t});return new Qc(i).toPromise()}async function t2(s,e){const t=Th(s,!1).get(e),i=await new Qc(t).toPromise();return i===void 0?null:i.value}function hE(s,e){const t=Th(s,!0).delete(e);return new Qc(t).toPromise()}const n2=800,r2=3;class mb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ug(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>r2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return db()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(JN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await $N(),!this.activeServiceWorker)return;this.sender=new YN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ug();return await dE(e,Zd,"1"),await hE(e,Zd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>dE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>t2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>hE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Th(o,!1).getAll();return new Qc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),n2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mb.type="LOCAL";const s2=mb;new Hc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(s,e){return e?Ns(e):(Ie(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p extends mp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Do(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Do(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Do(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function i2(s){return sb(s.auth,new _p(s),s.bypassAuthState)}function a2(s){const{auth:e,user:t}=s;return Ie(t,e,"internal-error"),PN(t,new _p(s),s.bypassAuthState)}async function o2(s){const{auth:e,user:t}=s;return Ie(t,e,"internal-error"),ON(t,new _p(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,t,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:c,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return i2;case"linkViaPopup":case"linkViaRedirect":return o2;case"reauthViaPopup":case"reauthViaRedirect":return a2;default:or(this.auth,"internal-error")}}resolve(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=new Hc(2e3,1e4);async function c2(s,e,t){if(Dn(s.app))return Promise.reject(Er(s,"operation-not-supported-in-this-environment"));const i=Zr(s);LC(s,e,pp);const o=gb(i,t);return new _a(i,"signInViaPopup",e,o).executeNotNull()}class _a extends pb{constructor(e,t,i,o,c){super(e,t,o,c),this.provider=i,this.authWindow=null,this.pollId=null,_a.currentPopupAction&&_a.currentPopupAction.cancel(),_a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){ks(this.filter.length===1,"Popup operations only handle one event");const e=yp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_a.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,l2.get())};e()}}_a.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="pendingRedirect",Cd=new Map;class d2 extends pb{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Cd.get(this.auth._key());if(!e){try{const i=await h2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Cd.set(this.auth._key(),e)}return this.bypassAuthState||Cd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function h2(s,e){const t=g2(e),i=m2(s);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function f2(s,e){Cd.set(s._key(),e)}function m2(s){return Ns(s._redirectPersistence)}function g2(s){return Id(u2,s.config.apiKey,s.name)}async function p2(s,e,t=!1){if(Dn(s.app))return Promise.reject(Yr(s));const i=Zr(s),o=gb(i,e),h=await new d2(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=600*1e3;class _2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!v2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!yb(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Er(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=y2&&this.cachedEventUids.clear(),this.cachedEventUids.has(fE(e))}saveEventToCache(e){this.cachedEventUids.add(fE(e)),this.lastProcessedEventTime=Date.now()}}function fE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function yb({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function v2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yb(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(s,e={}){return Jr(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T2=/^https?/;async function b2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await E2(s);for(const t of e)try{if(S2(t))return}catch{}or(s,"unauthorized-domain")}function S2(s){const e=lg(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!T2.test(t))return!1;if(w2.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=new Hc(3e4,6e4);function mE(){const s=Xr().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function x2(s){return new Promise((e,t)=>{var o,c,h;function i(){mE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mE(),t(Er(s,"network-request-failed"))},timeout:A2.get()})}if((c=(o=Xr().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((h=Xr().gapi)!=null&&h.load)i();else{const m=hN("iframefcb");return Xr()[m]=()=>{gapi.load?i():t(Er(s,"network-request-failed"))},JT(`${dN()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Nd=null,e})}let Nd=null;function R2(s){return Nd=Nd||x2(s),Nd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=new Hc(5e3,15e3),C2="__/auth/iframe",N2="emulator/auth/iframe",D2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function P2(s){const e=s.config;Ie(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?dp(e,N2):`https://${s.config.authDomain}/${C2}`,i={apiKey:e.apiKey,appName:s.name,v:Bo},o=O2.get(s.config.apiHost);o&&(i.eid=o);const c=s._getFrameworks();return c.length&&(i.fw=c.join(",")),`${t}?${Dc(i).slice(1)}`}async function M2(s){const e=await R2(s),t=Xr().gapi;return Ie(t,s,"internal-error"),e.open({where:document.body,url:P2(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:D2,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const h=Er(s,"network-request-failed"),m=Xr().setTimeout(()=>{c(h)},I2.get());function g(){Xr().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},V2=500,L2=600,j2="_blank",U2="http://localhost";class gE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function z2(s,e,t,i=V2,o=L2){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g={...k2,width:i.toString(),height:o.toString(),top:c,left:h},_=pn().toLowerCase();t&&(m=GT(_)?j2:t),HT(_)&&(e=e||U2,g.scrollbars="yes");const w=Object.entries(g).reduce((A,[I,L])=>`${A}${I}=${L},`,"");if(nN(_)&&m!=="_self")return q2(e||"",m),new gE(null);const b=window.open(e||"",m,w);Ie(b,s,"popup-blocked");try{b.focus()}catch{}return new gE(b)}function q2(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="__/auth/handler",H2="emulator/auth/handler",F2=encodeURIComponent("fac");async function pE(s,e,t,i,o,c){Ie(s.config.authDomain,s,"auth-domain-config-required"),Ie(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:Bo,eventId:o};if(e instanceof pp){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",lx(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,b]of Object.entries({}))h[w]=b}if(e instanceof Gc){const w=e.getScopes().filter(b=>b!=="");w.length>0&&(h.scopes=w.join(","))}s.tenantId&&(h.tid=s.tenantId);const m=h;for(const w of Object.keys(m))m[w]===void 0&&delete m[w];const g=await s._getAppCheckToken(),_=g?`#${F2}=${encodeURIComponent(g)}`:"";return`${G2(s)}?${Dc(m).slice(1)}${_}`}function G2({config:s}){return s.emulator?dp(s,H2):`https://${s.authDomain}/${B2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="webStorageSupport";class Q2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ub,this._completeRedirectFn=p2,this._overrideRedirectResult=f2}async _openPopup(e,t,i,o){var h;ks((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const c=await pE(e,t,i,lg(),o);return z2(e,c,yp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const c=await pE(e,t,i,lg(),o);return XN(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(ks(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await M2(e),i=new _2(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jm,{type:jm},o=>{var h;const c=(h=o==null?void 0:o[0])==null?void 0:h[jm];c!==void 0&&t(!!c),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=b2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $T()||FT()||fp()}}const K2=Q2;var yE="@firebase/auth",_E="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $2(s){Oo(new wa("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;Ie(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WT(s)},_=new lN(i,o,c,g);return _N(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Oo(new wa("auth-internal",e=>{const t=Zr(e.getProvider("auth").getImmediate());return(i=>new Y2(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Si(yE,_E,X2(s)),Si(yE,_E,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=300,J2=YE("authIdTokenMaxAge")||W2;let vE=null;const Z2=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>J2)return;const o=t==null?void 0:t.token;vE!==o&&(vE=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function eD(s=ew()){const e=_g(s,"auth");if(e.isInitialized())return e.getImmediate();const t=yN(s,{popupRedirectResolver:K2,persistence:[s2,QN,ub]}),i=YE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const h=Z2(c.toString());qN(t,h,()=>h(t.currentUser)),zN(t,m=>h(m))}}const o=QE("auth");return o&&vN(t,`http://${o}`),t}function tD(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}cN({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const c=Er("internal-error");c.customData=o,t(c)},i.type="text/javascript",i.charset="UTF-8",tD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$2("Browser");const nD={apiKey:"AIzaSyCDZJqOx5eXpu3cD_FBJ8oi-hYvLCpbDXE",authDomain:"verdadreto-bec6a.firebaseapp.com",projectId:"verdadreto-bec6a",storageBucket:"verdadreto-bec6a.firebasestorage.app",messagingSenderId:"938969209658",appId:"1:938969209658:web:534282f57a8ff381c00e03"},_b=ZE(nD),De=EC(_b),Tr=eD(_b),vb=new Is;vb.setCustomParameters({prompt:"select_account"});class rD{constructor(){this.currentUser=null,this.sessionId=this.generateSessionId()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setCurrentUser(e){this.currentUser=e}async trackEvent(e,t){var i,o,c;try{const h={eventType:e,isAnonymous:((i=this.currentUser)==null?void 0:i.isAnonymous)??!0,timestamp:Xe.now(),sessionId:this.sessionId,...t};(o=this.currentUser)!=null&&o.uid&&(h.userId=this.currentUser.uid),(c=this.currentUser)!=null&&c.email&&(h.userEmail=this.currentUser.email),await Bc(nt(De,"analytics"),h),console.log("Analytics event tracked:",e)}catch(h){console.error("Error tracking analytics event:",h)}}async trackGameStart(e,t,i){await this.trackEvent("game_start",{packId:e,packName:t,gameData:{playersCount:i}})}async trackGameEnd(e,t,i,o){await this.trackEvent("game_end",{packId:e,packName:t,gameData:{roundsPlayed:i,duration:o}})}async trackPackSelected(e,t){await this.trackEvent("pack_selected",{packId:e,packName:t})}async trackDemoUsed(e,t){await this.trackEvent("demo_used",{packId:e,packName:t})}async trackUserLogin(){await this.trackEvent("user_login")}async trackUserRegister(){await this.trackEvent("user_register")}async trackSessionStart(){await this.trackEvent("session_start")}async trackSessionEnd(){await this.trackEvent("session_end")}async getStatsForPeriod(e,t){const i=new Date;let o,c=i;switch(e){case"realtime":o=new Date(i.getTime()-300*1e3);break;case"day":o=t?new Date(t):new Date(i.getFullYear(),i.getMonth(),i.getDate()),c=new Date(o.getTime()+1440*60*1e3);break;case"month":o=t?new Date(t):new Date(i.getFullYear(),i.getMonth(),1),c=new Date(o.getFullYear(),o.getMonth()+1,0);break;case"year":o=t?new Date(t):new Date(i.getFullYear(),0,1),c=new Date(o.getFullYear()+1,0,0);break}const h=Xe.fromDate(o),m=Xe.fromDate(c),g=St(nt(De,"analytics"),Je("timestamp",">=",h),Je("timestamp","<=",m),Kd("timestamp","desc")),w=(await pt(g)).docs.map(b=>b.data());return this.calculateStats(w,e)}calculateStats(e,t){const i=new Set,o=new Set,c=new Set,h=new Map;let m=0,g=0,_=0;const w=Date.now()-300*1e3,b=new Set;e.forEach(I=>{switch(I.userId&&(i.add(I.userId),I.isAnonymous?c.add(I.userId):o.add(I.userId)),I.timestamp.toMillis()>w&&b.add(I.sessionId),I.eventType){case"game_start":if(m++,I.packId&&I.packName){const L=h.get(I.packId)||{name:I.packName,count:0};h.set(I.packId,{...L,count:L.count+1})}break;case"demo_used":g++;break}}),_=b.size;const A=Array.from(h.entries()).map(([I,L])=>({packId:I,packName:L.name,count:L.count})).sort((I,L)=>L.count-I.count).slice(0,10);return{totalUsers:i.size,registeredUsers:o.size,anonymousUsers:c.size,totalGames:m,totalDemos:g,activeUsers:_,mostPlayedPacks:A,gamesPerDay:t==="day"?m:Math.round(m/this.getDaysInPeriod(t)),demosPerDay:t==="day"?g:Math.round(g/this.getDaysInPeriod(t))}}getDaysInPeriod(e){switch(e){case"realtime":return 1;case"day":return 1;case"month":return 30;case"year":return 365;default:return 1}}async getRecentEvents(e=50){const t=St(nt(De,"analytics"),Kd("timestamp","desc"),DT(e));return(await pt(t)).docs.map(o=>({id:o.id,...o.data()}))}}const wi=new rD,sD=({availablePacks:s,purchasedPacks:e,adWatchedPacks:t,referralUnlockedPacks:i,suggestionUnlockedPacks:o,onContinue:c,onBack:h,onGoToShop:m,onPlayDemo:g})=>{const _=s.some(I=>I.id==="base"),w={id:"base",name:"Pack Base",description:"Preguntas y retos bsicos incluidos",price:"INCLUIDO",icon:"",questionsUrl:"",daresUrl:"",allowDemo:!1,demoPlaysCount:0},b=s.filter(I=>I.id!=="no-ads"),A=_?b:[w,...b];return e.length>0,y.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:y.jsxs(Pn,{className:"w-full max-w-2xl text-center",children:[y.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Packs Disponibles"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Estos son los packs que tienes disponibles para jugar"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:A.map(I=>{const L=I.id==="base"||e.includes(I.id),G=I.id==="base",B=t.includes(I.id),ie=i.includes(I.id),ae=o.includes(I.id),oe=L||ie||ae;return y.jsxs("div",{className:`relative p-4 rounded-lg border transition-all duration-200 ${L?"border-green-500 bg-green-500/10":ie?"border-blue-500 bg-blue-500/10":ae?"border-purple-500 bg-purple-500/10":B?"border-yellow-500 bg-yellow-500/10":"border-gray-600 bg-gray-800/50 opacity-60"}`,children:[y.jsx("div",{className:"absolute top-2 right-2",children:L?y.jsx(Rm,{className:"w-6 h-6 text-green-500"}):ie?y.jsx(Rm,{className:"w-6 h-6 text-blue-500"}):ae?y.jsx(Rm,{className:"w-6 h-6 text-purple-500"}):y.jsx(Ro,{className:"w-6 h-6 text-yellow-500"})}),y.jsx("div",{className:"text-4xl mb-2",children:I.icon}),y.jsx("h3",{className:`text-xl font-bold mb-2 ${oe||B?"text-white":"text-gray-400"}`,children:I.name}),y.jsx("p",{className:`text-sm mb-3 ${oe||B?"text-gray-300":"text-gray-500"}`,children:I.description}),I.isReferralUnlockable&&!oe&&y.jsxs("p",{className:"text-xs text-blue-400 mb-2",children:[" Requiere ",I.requiredReferrals," referidos"]}),I.isSuggestionUnlockable&&!oe&&y.jsxs("p",{className:"text-xs text-purple-400 mb-2",children:[" Requiere ",I.requiredApprovedSuggestions," sugerencias aprobadas"]}),y.jsx("div",{className:`text-lg font-semibold ${L?"text-green-400":ie?"text-blue-400":ae?"text-purple-400":"text-yellow-400"}`,children:G?"INCLUIDO":L?"COMPRADO":ie?"POR REFERIDOS":ae?"POR SUGERENCIAS":B?"DEMO VISTO":"PREMIUM"}),!oe&&!B&&y.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg flex items-center justify-center",children:y.jsxs("div",{className:"text-center",children:[y.jsx(Ro,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),y.jsx("p",{className:"text-yellow-400 font-semibold text-sm mb-3",children:I.isReferralUnlockable?`${I.requiredReferrals} REFERIDOS`:I.isSuggestionUnlockable?`${I.requiredApprovedSuggestions} SUGERENCIAS`:"PREMIUM"}),I.allowDemo&&y.jsx(Ne,{onClick:me=>{me.stopPropagation(),wi.trackDemoUsed(I.id,I.name),g(I.id)},variant:"secondary",className:"px-3 py-1 text-xs bg-yellow-500 hover:bg-yellow-600 text-white border border-yellow-400 shadow-md",children:" Jugar Demo"})]})})]},I.id)})}),s.some(I=>!e.includes(I.id))&&y.jsx("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:y.jsxs("p",{className:"text-yellow-400 text-sm",children:[y.jsx(Ro,{className:"w-4 h-4 inline mr-2"}),"Los packs premium estn bloqueados. Visita la tienda para desbloquearlos."]})}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[y.jsx(Ne,{onClick:h,variant:"secondary",className:"px-6",children:"Volver"}),y.jsx(Ne,{onClick:m,variant:"secondary",className:"px-6 bg-yellow-600 hover:bg-yellow-700 text-white",children:"Ir a la Tienda"}),y.jsx(Ne,{onClick:()=>{A.forEach(I=>{const L=I.id==="base"||e.includes(I.id),G=i.includes(I.id),B=o.includes(I.id);(L||G||B)&&wi.trackPackSelected(I.id,I.name)}),c()},className:"px-6",disabled:!1,children:"Continuar al Juego"})]})]})})},iD="modulepreload",aD=function(s,e){return new URL(s,e).href},EE={},Eb=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let h=function(w){return Promise.all(w.map(b=>Promise.resolve(b).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};const m=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),_=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=h(t.map(w=>{if(w=aD(w,i),w in EE)return;EE[w]=!0;const b=w.endsWith(".css"),A=b?'[rel="stylesheet"]':"";if(!!i)for(let G=m.length-1;G>=0;G--){const B=m[G];if(B.href===w&&(!b||B.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${A}`))return;const L=document.createElement("link");if(L.rel=b?"stylesheet":iD,b||(L.as="script"),L.crossOrigin="",L.href=w,_&&L.setAttribute("nonce",_),document.head.appendChild(L),b)return new Promise((G,B)=>{L.addEventListener("load",G),L.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${w}`)))})}))}function c(h){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=h,window.dispatchEvent(m),!m.defaultPrevented)throw h}return o.then(h=>{for(const m of h||[])m.status==="rejected"&&c(m.reason);return e().catch(c)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var zo;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(zo||(zo={}));class Um extends Error{constructor(e,t,i){super(e),this.message=e,this.code=t,this.data=i}}const oD=s=>{var e,t;return s!=null&&s.androidBridge?"android":!((t=(e=s==null?void 0:s.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},lD=s=>{const e=s.CapacitorCustomPlatform||null,t=s.Capacitor||{},i=t.Plugins=t.Plugins||{},o=()=>e!==null?e.name:oD(s),c=()=>o()!=="web",h=b=>{const A=_.get(b);return!!(A!=null&&A.platforms.has(o())||m(b))},m=b=>{var A;return(A=t.PluginHeaders)===null||A===void 0?void 0:A.find(I=>I.name===b)},g=b=>s.console.error(b),_=new Map,w=(b,A={})=>{const I=_.get(b);if(I)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),I.proxy;const L=o(),G=m(b);let B;const ie=async()=>(!B&&L in A?B=typeof A[L]=="function"?B=await A[L]():B=A[L]:e!==null&&!B&&"web"in A&&(B=typeof A.web=="function"?B=await A.web():B=A.web),B),ae=(x,R)=>{var M,P;if(G){const V=G==null?void 0:G.methods.find(C=>R===C.name);if(V)return V.rtype==="promise"?C=>t.nativePromise(b,R.toString(),C):(C,Ae)=>t.nativeCallback(b,R.toString(),C,Ae);if(x)return(M=x[R])===null||M===void 0?void 0:M.bind(x)}else{if(x)return(P=x[R])===null||P===void 0?void 0:P.bind(x);throw new Um(`"${b}" plugin is not implemented on ${L}`,zo.Unimplemented)}},oe=x=>{let R;const M=(...P)=>{const V=ie().then(C=>{const Ae=ae(C,x);if(Ae){const be=Ae(...P);return R=be==null?void 0:be.remove,be}else throw new Um(`"${b}.${x}()" is not implemented on ${L}`,zo.Unimplemented)});return x==="addListener"&&(V.remove=async()=>R()),V};return M.toString=()=>`${x.toString()}() { [capacitor code] }`,Object.defineProperty(M,"name",{value:x,writable:!1,configurable:!1}),M},me=oe("addListener"),he=oe("removeListener"),Y=(x,R)=>{const M=me({eventName:x},R),P=async()=>{const C=await M;he({eventName:x,callbackId:C},R)},V=new Promise(C=>M.then(()=>C({remove:P})));return V.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},V},D=new Proxy({},{get(x,R){switch(R){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return G?Y:me;case"removeListener":return he;default:return oe(R)}}});return i[b]=D,_.set(b,{name:b,proxy:D,platforms:new Set([...Object.keys(A),...G?[L]:[]])}),D};return t.convertFileSrc||(t.convertFileSrc=b=>b),t.getPlatform=o,t.handleError=g,t.isNativePlatform=c,t.isPluginAvailable=h,t.registerPlugin=w,t.Exception=Um,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},cD=s=>s.Capacitor=lD(s),fn=cD(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),vp=fn.registerPlugin;class wb{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(t);const c=this.windowListeners[e];c&&!c.registered&&this.addWindowListener(c),i&&this.sendRetainedArgumentsForEvent(e);const h=async()=>this.removeListener(e,t);return Promise.resolve({remove:h})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,i){const o=this.listeners[e];if(!o){if(i){let c=this.retainedEventArguments[e];c||(c=[]),c.push(t),this.retainedEventArguments[e]=c}return}o.forEach(c=>c(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:i=>{this.notifyListeners(t,i)}}}unimplemented(e="not implemented"){return new fn.Exception(e,zo.Unimplemented)}unavailable(e="not available"){return new fn.Exception(e,zo.Unavailable)}async removeListener(e,t){const i=this.listeners[e];if(!i)return;const o=i.indexOf(t);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(i=>{this.notifyListeners(e,i)}))}}const wE=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),TE=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class uD extends wb{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[o,c]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=TE(o).trim(),c=TE(c).trim(),t[o]=c}),t}async setCookie(e){try{const t=wE(e.key),i=wE(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,c=(e.path||"/").replace("path=",""),h=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${i||""}${o}; path=${c}; ${h};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}vp("CapacitorCookies",{web:()=>new uD});const dD=async s=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{const o=i.result;e(o.indexOf(",")>=0?o.split(",")[1]:o)},i.onerror=o=>t(o),i.readAsDataURL(s)}),hD=(s={})=>{const e=Object.keys(s);return Object.keys(s).map(o=>o.toLocaleLowerCase()).reduce((o,c,h)=>(o[c]=s[e[h]],o),{})},fD=(s,e=!0)=>s?Object.entries(s).reduce((i,o)=>{const[c,h]=o;let m,g;return Array.isArray(h)?(g="",h.forEach(_=>{m=e?encodeURIComponent(_):_,g+=`${c}=${m}&`}),g.slice(0,-1)):(m=e?encodeURIComponent(h):h,g=`${c}=${m}`),`${i}&${g}`},"").substr(1):null,mD=(s,e={})=>{const t=Object.assign({method:s.method||"GET",headers:s.headers},e),o=hD(s.headers)["content-type"]||"";if(typeof s.data=="string")t.body=s.data;else if(o.includes("application/x-www-form-urlencoded")){const c=new URLSearchParams;for(const[h,m]of Object.entries(s.data||{}))c.set(h,m);t.body=c.toString()}else if(o.includes("multipart/form-data")||s.data instanceof FormData){const c=new FormData;if(s.data instanceof FormData)s.data.forEach((m,g)=>{c.append(g,m)});else for(const m of Object.keys(s.data))c.append(m,s.data[m]);t.body=c;const h=new Headers(t.headers);h.delete("content-type"),t.headers=h}else(o.includes("application/json")||typeof s.data=="object")&&(t.body=JSON.stringify(s.data));return t};class gD extends wb{async request(e){const t=mD(e,e.webFetchExtra),i=fD(e.params,e.shouldEncodeUrlParams),o=i?`${e.url}?${i}`:e.url,c=await fetch(o,t),h=c.headers.get("content-type")||"";let{responseType:m="text"}=c.ok?e:{};h.includes("application/json")&&(m="json");let g,_;switch(m){case"arraybuffer":case"blob":_=await c.blob(),g=await dD(_);break;case"json":g=await c.json();break;case"document":case"text":default:g=await c.text()}const w={};return c.headers.forEach((b,A)=>{w[A]=b}),{data:g,headers:w,status:c.status,url:c.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}vp("CapacitorHttp",{web:()=>new gD});var bE;(function(s){s.General="General",s.ParentalGuidance="ParentalGuidance",s.Teen="Teen",s.MatureAudience="MatureAudience"})(bE||(bE={}));var SE;(function(s){s.SizeChanged="bannerAdSizeChanged",s.Loaded="bannerAdLoaded",s.FailedToLoad="bannerAdFailedToLoad",s.Opened="bannerAdOpened",s.Closed="bannerAdClosed",s.AdImpression="bannerAdImpression"})(SE||(SE={}));var dg;(function(s){s.TOP_CENTER="TOP_CENTER",s.CENTER="CENTER",s.BOTTOM_CENTER="BOTTOM_CENTER"})(dg||(dg={}));var hg;(function(s){s.BANNER="BANNER",s.FULL_BANNER="FULL_BANNER",s.LARGE_BANNER="LARGE_BANNER",s.MEDIUM_RECTANGLE="MEDIUM_RECTANGLE",s.LEADERBOARD="LEADERBOARD",s.ADAPTIVE_BANNER="ADAPTIVE_BANNER",s.SMART_BANNER="SMART_BANNER"})(hg||(hg={}));var pc;(function(s){s.Loaded="interstitialAdLoaded",s.FailedToLoad="interstitialAdFailedToLoad",s.Showed="interstitialAdShowed",s.FailedToShow="interstitialAdFailedToShow",s.Dismissed="interstitialAdDismissed"})(pc||(pc={}));var AE;(function(s){s.Loaded="onRewardedInterstitialAdLoaded",s.FailedToLoad="onRewardedInterstitialAdFailedToLoad",s.Showed="onRewardedInterstitialAdShowed",s.FailedToShow="onRewardedInterstitialAdFailedToShow",s.Dismissed="onRewardedInterstitialAdDismissed",s.Rewarded="onRewardedInterstitialAdReward"})(AE||(AE={}));var xo;(function(s){s.Loaded="onRewardedVideoAdLoaded",s.FailedToLoad="onRewardedVideoAdFailedToLoad",s.Showed="onRewardedVideoAdShowed",s.FailedToShow="onRewardedVideoAdFailedToShow",s.Dismissed="onRewardedVideoAdDismissed",s.Rewarded="onRewardedVideoAdReward"})(xo||(xo={}));var xE;(function(s){s.NOT_REQUIRED="NOT_REQUIRED",s.OBTAINED="OBTAINED",s.REQUIRED="REQUIRED",s.UNKNOWN="UNKNOWN"})(xE||(xE={}));var RE;(function(s){s[s.DISABLED=0]="DISABLED",s[s.EEA=1]="EEA",s[s.NOT_EEA=2]="NOT_EEA"})(RE||(RE={}));const hn=vp("AdMob",{web:()=>Eb(()=>import("./web-BE3w4Em-.js"),[],import.meta.url).then(s=>new s.AdMobWeb)}),_d={enabled:!0,questionChangeThreshold:zE.CHANGES_BEFORE_AD,adLoadingTime:1e3,adPlayingTime:3e3,showInRoundEnd:!0,showInGameEnd:!0,showInDemo:!0,autoPlay:!0,skipAfterSeconds:5,frequency:{questionChanges:3,roundEnd:1,gameEnd:1},types:{interstitial:!0,rewarded:!0,banner:!1}};class pD{constructor(){this.STORAGE_KEY="ads_config",this.config=this.loadConfig()}loadConfig(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){const t=JSON.parse(e);return{..._d,...t}}}catch(e){console.error("Error loading ads config:",e)}return{..._d}}saveConfig(){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.config))}catch(e){console.error("Error saving ads config:",e)}}getConfig(){return{...this.config}}updateConfig(e){this.config={...this.config,...e},this.saveConfig()}setEnabled(e){this.config.enabled=e,this.saveConfig()}isEnabled(){return this.config.enabled}shouldShowAdForQuestionChange(e){return this.config.enabled&&e>=this.config.questionChangeThreshold}shouldShowAdInRoundEnd(){return this.config.enabled&&this.config.showInRoundEnd}shouldShowAdInGameEnd(){return this.config.enabled&&this.config.showInGameEnd}shouldShowAdInDemo(){return this.config.enabled&&this.config.showInDemo}getAdLoadingTime(){return this.config.adLoadingTime}getAdPlayingTime(){return this.config.adPlayingTime}getQuestionChangeThreshold(){return this.config.questionChangeThreshold}resetToDefault(){this.config={..._d},this.saveConfig()}exportConfig(){return JSON.stringify(this.config,null,2)}importConfig(e){try{const t=JSON.parse(e);if(this.isValidConfig(t))return this.config={..._d,...t},this.saveConfig(),!0}catch(t){console.error("Error importing ads config:",t)}return!1}isValidConfig(e){return typeof e=="object"&&typeof e.enabled=="boolean"&&typeof e.questionChangeThreshold=="number"&&typeof e.adLoadingTime=="number"&&typeof e.adPlayingTime=="number"}getConfigStats(){return{enabled:this.config.enabled,questionChangeThreshold:this.config.questionChangeThreshold,totalTypes:Object.values(this.config.types).filter(Boolean).length,autoPlay:this.config.autoPlay,lastModified:localStorage.getItem(this.STORAGE_KEY+"_modified")||"Never"}}}const Ct=new pD;class yD{constructor(){this.isInitialized=!1,this.config=null,this.configUnsubscribe=null}async initialize(e){if(this.isInitialized){this.config={...this.config,...e};return}try{this.config=e,fn.isNativePlatform()?(await hn.initialize({requestTrackingAuthorization:!0,testingDevices:e.testMode?["YOUR_DEVICE_ID"]:[],initializeForTesting:e.testMode||!1}),this.isInitialized=!0,console.log("AdMob initialized successfully"),this.configUnsubscribe=Ct.onConfigChange(t=>{console.log("Configuracin de anuncios actualizada:",t)})):console.log("AdMob not available on web platform")}catch(t){throw console.error("Failed to initialize AdMob:",t),t}}async showBannerAd(e,t){const i={success:!1,adType:Hn.BANNER,error:null,timestamp:Date.now()};try{if(!Ct.canShowAd(Hn.BANNER,t))return i.error="Ad blocked by configuration or conditions",console.log("Banner ad blocked by configuration"),i;if(!this.isInitialized||!this.config)throw i.error="AdMob not initialized",new Error("AdMob not initialized");if(!fn.isNativePlatform())throw i.error="AdMob banners only available on native platforms",new Error("AdMob banners only available on native platforms");if(!this.config.bannerAdUnitId)throw i.error="bannerAdUnitId not configured",new Error("bannerAdUnitId not configured");const o={adId:this.config.bannerAdUnitId,adSize:hg.ADAPTIVE_BANNER,position:dg.BOTTOM_CENTER,margin:0,isTesting:this.config.testMode||!1,...e};return await hn.showBanner(o),Ct.recordAdShown(Hn.BANNER),i.success=!0,console.log("Banner ad shown successfully"),i}catch(o){return i.error=o instanceof Error?o.message:"Unknown error",console.error("Failed to show banner ad:",o),i}}async hideBannerAd(){if(this.isInitialized&&fn.isNativePlatform())try{await hn.hideBanner(),console.log("Banner ad hidden successfully")}catch(e){console.error("Failed to hide banner ad:",e)}}async resumeBannerAd(){if(this.isInitialized&&fn.isNativePlatform())try{await hn.resumeBanner(),console.log("Banner ad resumed successfully")}catch(e){console.error("Failed to resume banner ad:",e)}}async removeBannerAd(){if(this.isInitialized&&fn.isNativePlatform())try{await hn.removeBanner(),console.log("Banner ad removed successfully")}catch(e){console.error("Failed to remove banner ad:",e)}}async showInterstitial(e){const t={success:!1,adType:Hn.POST_GAME,error:null,timestamp:Date.now()};try{if(!Ct.canShowAd(Hn.POST_GAME,e))return t.error="Ad blocked by configuration or conditions",console.log("Interstitial ad blocked by configuration"),t;if(!this.isInitialized||!this.config)return t.error="AdMob not initialized",console.warn("AdMob not initialized"),t;if(!fn.isNativePlatform())return t.error="Interstitials are only available on native platforms",console.warn("Interstitials are only available on native platforms"),t;if(!this.config.interstitialAdUnitId)return t.error="No interstitialAdUnitId configured",console.warn("No interstitialAdUnitId configured"),t;let i=null,o=null,c=null;const h=new Promise((_,w)=>{setTimeout(()=>w(new Error("Interstitial ad timeout")),3e4)}),m=new Promise(async(_,w)=>{try{i=await hn.addListener(pc.Loaded,L=>{console.log("Interstitial loaded")}),c=await hn.addListener(pc.FailedToLoad,L=>{console.error("Interstitial failed to load:",L),w(new Error("Failed to load interstitial"))});let b=null;const A=new Promise(L=>{b=L});o=await hn.addListener(pc.Dismissed,()=>{console.log("Interstitial dismissed"),b&&b()});const I={adId:this.config.interstitialAdUnitId,isTesting:this.config.testMode||!1};await hn.prepareInterstitial(I),await hn.showInterstitial(),await A,_(!0)}catch(b){w(b)}});return await Promise.race([m,h])&&(Ct.recordAdShown(Hn.POST_GAME),t.success=!0),t}catch(i){return t.error=i instanceof Error?i.message:"Unknown error",console.error("Failed to show interstitial ad:",i),t}finally{try{loadedSub&&await loadedSub.remove(),dismissedSub&&await dismissedSub.remove(),failedSub&&await failedSub.remove()}catch(i){console.warn("Error cleaning up interstitial listeners:",i)}}}async showRewarded(e){const t={success:!1,adType:Hn.QUESTION_CHANGE,error:null,timestamp:Date.now()};try{if(!Ct.canShowAd(Hn.QUESTION_CHANGE,e))return t.error="Ad blocked by configuration or conditions",console.log("Rewarded ad blocked by configuration"),t;if(!this.isInitialized||!this.config)return t.error="AdMob not initialized",console.warn("AdMob not initialized"),t;if(!fn.isNativePlatform())return t.error="Rewarded ads are only available on native platforms",console.warn("Rewarded ads are only available on native platforms"),t;if(!this.config.rewardedAdUnitId)return t.error="No rewardedAdUnitId configured",console.warn("No rewardedAdUnitId configured"),t;let i=null,o=null,c=null,h=null;const m=new Promise((w,b)=>{setTimeout(()=>b(new Error("Rewarded ad timeout")),3e4)}),g=new Promise(async(w,b)=>{try{let A=!1;i=await hn.addListener(xo.Loaded,B=>{console.log("Rewarded loaded")}),h=await hn.addListener(xo.FailedToLoad,B=>{console.error("Rewarded failed to load:",B),b(new Error("Failed to load rewarded ad"))}),o=await hn.addListener(xo.Rewarded,B=>{A=!0,console.log("User rewarded",B)});let I=null;const L=new Promise(B=>{I=B});c=await hn.addListener(xo.Dismissed,()=>{console.log("Rewarded dismissed"),I&&I()});const G={adId:this.config.rewardedAdUnitId,isTesting:this.config.testMode||!1};await hn.prepareRewardVideoAd(G),await hn.showRewardVideoAd(),await L,w(A)}catch(A){b(A)}});return await Promise.race([g,m])&&(Ct.recordAdShown(Hn.QUESTION_CHANGE),t.success=!0,t.rewarded=!0),t}catch(i){return t.error=i instanceof Error?i.message:"Unknown error",console.error("Failed to show rewarded ad:",i),t}finally{try{loadedSub&&await loadedSub.remove(),rewardedSub&&await rewardedSub.remove(),dismissedSub&&await dismissedSub.remove(),failedSub&&await failedSub.remove()}catch(i){console.warn("Error cleaning up rewarded listeners:",i)}}}async showBestMonetizingAd(e){var t,i;if((t=this.config)!=null&&t.rewardedAdUnitId){const o=await this.showRewarded(e);if(o.success)return o}if((i=this.config)!=null&&i.interstitialAdUnitId){const o=await this.showInterstitial(e);if(o.success)return o}return{success:!1,adType:Hn.POST_GAME,error:"No ads available or all blocked",timestamp:Date.now()}}isNativePlatform(){return fn.isNativePlatform()}isWebPlatform(){return fn.getPlatform()==="web"}getConfig(){return this.config}async showPostGameAd(e){const t=await this.showInterstitial(e);return t.adType=Hn.POST_GAME,t}async showPostRoundAd(e){const t=await this.showInterstitial(e);return t.adType=Hn.POST_ROUND,t}async showQuestionChangeAd(e){return await this.showRewarded(e)}canShowAdType(e,t){return Ct.canShowAd(e,t)}getAdsConfig(){return Ct.getConfig()}getSessionState(){return Ct.getSessionState()}resetSession(){Ct.resetSessionState()}destroy(){this.configUnsubscribe&&(this.configUnsubscribe(),this.configUnsubscribe=null)}}const Hr=new yD,_D=({pack:s,isOpen:e,onClose:t,onStartDemo:i,onAdWatched:o,hasNoAds:c=!1,onStartDemoWithoutAd:h})=>{const[m,g]=$.useState(!1),[_,w]=$.useState(null);if(!e)return null;const b=()=>{h?h():(i(),t())},A=async()=>{g(!0),w(null);try{if(c||!Ct.shouldShowAdInDemo()){o&&o(s.id),i();return}const I=await Hr.showInterstitial();I.success?(o&&o(s.id),i()):(console.log("Error al mostrar anuncio:",I.error),w("Ahora mismo no se puede reproducir el anuncio por lo que no podr usarse el pack demo."))}catch(I){console.error("Error al mostrar anuncio:",I),w("Ahora mismo no se puede reproducir el anuncio por lo que no podr usarse el pack demo.")}finally{g(!1)}};return y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 animate-fade-in",children:y.jsxs(Pn,{className:"w-full max-w-md relative",children:[y.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:y.jsx(MA,{className:"w-6 h-6"})}),y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"text-6xl mb-4",children:s.icon}),y.jsxs("h2",{className:"text-2xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-500",children:["Demo: ",s.name]}),y.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:y.jsxs("div",{className:"flex items-start gap-3 text-left",children:[y.jsx(kA,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),y.jsxs("div",{className:"text-sm text-blue-300",children:[y.jsx("p",{className:"mb-2",children:y.jsx("strong",{children:"Qu incluye el demo?"})}),y.jsxs("ul",{className:"space-y-1 text-xs",children:[y.jsx("li",{children:" Podrs probar 5 preguntas y 5 retos que siempre sern los mismos (el pack incluye muchos ms)"}),y.jsx("li",{children:" Puedes jugar de forma ilimitada"}),y.jsx("li",{children:" Solo necesitas ver un anuncio antes de cada partida"}),y.jsx("li",{children:" Perfecto para probar si te gusta el pack"})]})]})]})}),_&&y.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 mb-4",children:y.jsx("p",{className:"text-red-400 text-sm font-medium",children:_})}),y.jsx("div",{className:"flex flex-col gap-3",children:_?y.jsxs(y.Fragment,{children:[y.jsx(Ne,{onClick:t,variant:"secondary",className:"w-full",children:"Volver atrs"}),y.jsx(Ne,{onClick:b,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700",children:y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y.jsx("span",{role:"img","aria-label":"play",children:""}),"Iniciar partida sin pack demo"]})})]}):y.jsxs(y.Fragment,{children:[y.jsx(Ne,{onClick:A,disabled:m,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:m?y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),c?"Iniciando demo...":"Cargando anuncio..."]}):y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y.jsx("span",{role:"img","aria-label":"gem",children:""}),c?"Jugar demo":"Ver anuncio y jugar demo"]})}),y.jsx(Ne,{onClick:t,variant:"secondary",className:"w-full",disabled:m,children:"Volver atrs"})]})}),y.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"Te gusta el pack? Al final de la partida podrs comprarlo completo."})]})]})})},vD=({players:s,currentPlayerIndex:e,onNextPlayer:t,onNewGame:i,questions:o,dares:c,roundConfig:h,gameProgress:m,onRoundEnd:g,onQuestionAsked:_,onDareCompleted:w,onQuestionChange:b,onAdRequired:A,questionChangeState:I={changesCount:0,isAdLoading:!1,isAdPlaying:!1},hasNoAds:L=!1})=>{const[G,B]=$.useState(null),[ie,ae]=$.useState(null),[oe,me]=$.useState(new Set),[he,Y]=$.useState(new Set),D=s[e];$.useEffect(()=>{wi.trackGameStart("mixed","Juego Mixto",s.length)},[]);const x=Ae=>{if(!Ae.includes("$jugador"))return Ae;const be=s.filter((re,X)=>X!==e);if(be.length===0)return Ae.replace(/\$jugador/g,"otro jugador");const Q=be[Math.floor(Math.random()*be.length)];return Ae.replace(/\$jugador/g,Q)},R=$.useMemo(()=>o.map((Ae,be)=>({item:Ae,index:be})),[o]),M=$.useMemo(()=>c.map((Ae,be)=>({item:Ae,index:be})),[c]),P=Ae=>{const be=Ae==="pregunta"?R:M,Q=Ae==="pregunta"?oe:he,re=Ae==="pregunta"?me:Y;if(be.length===0){console.error(`No hay ${Ae}s disponibles`);return}const X=be.filter(O=>!Q.has(O.index));let ye;if(X.length===0){re(new Set);const O=Math.floor(Math.random()*be.length);ye=be[O],re(new Set([ye.index]))}else{const O=Math.floor(Math.random()*X.length);ye=X[O],re(ne=>new Set(ne).add(ye.index))}B(ye.item),ae(Ae),Ae==="pregunta"&&_?_():Ae==="reto"&&w&&w()},V=async()=>{if(!G||!ie)return;if(Ct.shouldShowAdForQuestionChange(I.changesCount+1)&&A)try{await A()}catch(re){console.error("Error showing ad:",re);return}const be=ie==="pregunta"?R:M;if(be.length<=1){console.log("No hay suficientes items para cambiar");return}const Q=be.filter(re=>re.item.text!==G.text);if(Q.length>0){const re=Math.floor(Math.random()*Q.length),X=Q[re];B(X.item),(ie==="pregunta"?me:Y)(O=>new Set(O).add(X.index)),b&&b()}},C=()=>{B(null),ae(null),e===s.length-1?m.currentRound+1>h.totalRounds?t():g():t()};return y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center animate-fade-in",children:[y.jsxs(Pn,{className:"w-full max-w-lg min-h-[24rem] flex flex-col justify-between",children:[y.jsxs("div",{children:[y.jsx("div",{className:"mb-2",children:y.jsxs("p",{className:"text-sm text-gray-500",children:["Ronda ",m.currentRound," de ",h.totalRounds]})}),y.jsx("p",{className:"text-lg text-gray-400",children:"Turno de:"}),y.jsx("h2",{className:"text-4xl font-bold my-4 text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400",children:D})]}),G?y.jsxs("div",{className:"animate-fade-in",children:[y.jsx("h3",{className:"text-2xl font-bold mb-6 text-cyan-400 capitalize",children:ie}),y.jsx("p",{className:"text-xl md:text-2xl leading-relaxed",children:x(G.text)}),y.jsxs("div",{className:"mt-6 flex flex-col items-center gap-2",children:[y.jsxs(Ne,{onClick:V,variant:"secondary",className:"text-sm px-4 py-2",children:[" Cambiar ",ie]}),!L&&Ct.isEnabled()&&(I.isAdLoading||I.isAdPlaying)&&I.changesCount>=zE.CHANGES_BEFORE_AD&&y.jsx("p",{className:"text-xs text-yellow-400",children:I.isAdLoading?"Cargando anuncio...":"Reproduciendo anuncio..."})]})]}):y.jsxs("div",{className:"animate-fade-in",children:[y.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Verdad o Reto?"}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[y.jsx(Ne,{onClick:()=>P("pregunta"),className:"w-full sm:w-auto",children:"Pregunta"}),y.jsx(Ne,{onClick:()=>P("reto"),variant:"secondary",className:"w-full sm:w-auto",children:"Reto"})]})]}),y.jsx("div",{className:"mt-8",children:G&&y.jsx(Ne,{onClick:C,children:"Siguiente Jugador"})})]}),y.jsx("button",{onClick:i,className:"mt-6 text-sm text-gray-500 hover:text-gray-300 transition-colors duration-200 px-4 py-2 rounded-lg hover:bg-gray-800/50 focus:outline-none focus:ring-2 focus:ring-gray-600",children:"Empezar nuevo juego"})]})},ED=({onSelectRounds:s,onBack:e,hasNoAds:t=!1})=>{const i=[{value:5,label:"5 Rondas",description:"Partida rpida (15-20 min)"},{value:10,label:"10 Rondas",description:"Partida estndar (30-40 min)"},{value:15,label:"15 Rondas",description:"Partida larga (45-60 min)"}];return y.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:y.jsxs(Pn,{className:"w-full max-w-2xl text-center",children:[y.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Configurar Partida"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Elige cuntas rondas quieres jugar"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:i.map(o=>y.jsxs("div",{className:"relative p-6 rounded-lg border border-gray-600 bg-gray-800/50 hover:border-purple-500 transition-all duration-200 cursor-pointer group",onClick:()=>s(o.value),children:[y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:o.value}),y.jsx("div",{className:"text-lg font-semibold text-white mb-2",children:o.label}),y.jsx("div",{className:"text-sm text-gray-400",children:o.description})]}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]},o.value))}),!t&&y.jsx("div",{className:"text-sm text-gray-500 mb-6",children:" Al final de cada ronda se mostrar un anuncio breve"}),y.jsx("div",{className:"flex gap-4 justify-center",children:y.jsx(Ne,{onClick:e,variant:"secondary",className:"px-6",children:"Volver"})})]})})},wD=({roundStats:s,currentRound:e,totalRounds:t,onContinue:i,onEndGame:o,hasNoAds:c=!1})=>{var G;const[h,m]=$.useState(!1),[g,_]=$.useState(!1),[w,b]=$.useState(5);$.useEffect(()=>{m(!0),_(!0)},[]);const A=async()=>{if(!(!c&&Ct.shouldShowAdInRoundEnd())){i();return}m(!1),_(!1);try{m(!0),fn.isNativePlatform()?(await Hr.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),await Hr.showInterstitial()):console.log("Modo web: omitiendo simulacin de anuncio"),_(!0),i()}catch(ie){console.warn("Fallo al mostrar anuncio:",ie),_(!0),i()}},I=async()=>{if(!(!c&&Ct.shouldShowAdInRoundEnd())){o();return}m(!1),_(!1);try{m(!0),fn.isNativePlatform()?(await Hr.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),await Hr.showInterstitial()):console.log("Modo web: omitiendo simulacin de anuncio"),_(!0),o()}catch(ie){console.warn("Fallo al mostrar anuncio:",ie),_(!0),o()}},L=e>=t;return fn.isNativePlatform(),y.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:y.jsxs(Pn,{className:"w-full max-w-2xl text-center",children:[y.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-green-500 to-blue-500",children:L?"Partida Completada!":`Ronda ${s.roundNumber} Completada!`}),!L&&y.jsxs("p",{className:"text-gray-400 mb-6",children:["Ronda ",e," de ",t]}),y.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-6",children:[y.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Estadsticas de la Ronda"}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-2xl font-bold text-blue-400",children:s.questionsAsked}),y.jsx("div",{className:"text-sm text-gray-400",children:"Preguntas"})]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-2xl font-bold text-purple-400",children:s.daresCompleted}),y.jsx("div",{className:"text-sm text-gray-400",children:"Retos"})]})]}),y.jsxs("div",{className:"mt-4",children:[y.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Jugadores participantes:"}),y.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:((G=s.playersParticipated)==null?void 0:G.map((B,ie)=>y.jsx("span",{className:"px-3 py-1 bg-purple-600 text-white rounded-full text-sm",children:B},ie)))||y.jsx("span",{className:"text-gray-400 text-sm",children:"No hay jugadores registrados"})})]})]}),y.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:L?y.jsx(Ne,{onClick:I,className:"px-8 py-3 text-lg",children:"Ver Resultados Finales"}):y.jsxs(y.Fragment,{children:[y.jsx(Ne,{onClick:I,variant:"secondary",className:"px-6",children:"Terminar Partida"}),y.jsx(Ne,{onClick:A,className:"px-8 py-3 text-lg",children:"Siguiente Ronda"})]})})]})})},TD=({gameStats:s,players:e,onNewGame:t,onBackToMenu:i,hasNoAds:o=!1,isDemoMode:c=!1,demoPackId:h=null})=>{const m=s.gameEndTime&&s.gameStartTime?Math.round((s.gameEndTime.getTime()-s.gameStartTime.getTime())/1e3/60):0;s.totalRounds>0&&Math.round(s.totalQuestions/s.totalRounds),s.totalRounds>0&&Math.round(s.totalDares/s.totalRounds);const[g,_]=$.useState(!1),[w,b]=$.useState(!1),[A,I]=$.useState(!1),[L,G]=$.useState(null),[B,ie]=$.useState(5),ae=fn.isNativePlatform();$.useEffect(()=>{wi.trackGameEnd("mixed","Juego Mixto",s.totalRounds,m)},[]),$.useEffect(()=>{_(!0),b(!0),I(!1),G(null)},[]);const oe=async()=>{if(!(!o&&Ct.shouldShowAdInGameEnd())){t();return}b(!1),_(!1),I(!0),G(null);try{ae?(await Hr.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),b(!0),I(!1),await Hr.showInterstitial()):(b(!0),I(!1),console.log("Modo web: omitiendo simulacin de anuncio")),_(!0),t()}catch(Y){console.warn("Error mostrando anuncio al final de partida:",Y),G(Y instanceof Error?Y.message:"Error desconocido"),I(!1),b(!0),_(!0),t()}},me=async()=>{if(!(!o&&Ct.shouldShowAdInGameEnd())){i();return}b(!1),_(!1),I(!0),G(null);try{ae?(await Hr.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),b(!0),I(!1),await Hr.showInterstitial()):(b(!0),I(!1),console.log("Modo web: omitiendo simulacin de anuncio")),_(!0),i()}catch(Y){console.warn("Error mostrando anuncio al final de partida:",Y),G(Y instanceof Error?Y.message:"Error desconocido"),I(!1),b(!0),_(!0),i()}};return y.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:y.jsxs(Pn,{className:"w-full max-w-4xl text-center",children:[y.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500",children:" Partida Finalizada! "}),y.jsx("p",{className:"text-gray-400 mb-8 text-base sm:text-lg",children:"Esperamos que se hayan divertido mucho!"}),y.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-6",children:[y.jsx("h3",{className:"text-xl font-semibold mb-4 text-white text-center",children:"Estadsticas de la Partida"}),y.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[y.jsxs("div",{className:"text-center p-3 bg-gray-700/50 rounded-lg",children:[y.jsx("div",{className:"text-2xl font-bold text-purple-400",children:s.totalRounds}),y.jsx("div",{className:"text-sm text-gray-300",children:"Rondas"})]}),y.jsxs("div",{className:"text-center p-3 bg-gray-700/50 rounded-lg",children:[y.jsx("div",{className:"text-2xl font-bold text-blue-400",children:s.totalQuestions}),y.jsx("div",{className:"text-sm text-gray-300",children:"Preguntas"})]}),y.jsxs("div",{className:"text-center p-3 bg-gray-700/50 rounded-lg",children:[y.jsx("div",{className:"text-2xl font-bold text-green-400",children:s.totalDares}),y.jsx("div",{className:"text-sm text-gray-300",children:"Retos"})]})]})]}),y.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[y.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Jugadores Participantes"}),y.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:e.map((he,Y)=>y.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full",children:[y.jsx("span",{className:"text-lg",children:""}),y.jsx("span",{className:"font-medium",children:he})]},Y))})]}),c?y.jsx("div",{className:"bg-gradient-to-r from-yellow-600/20 to-orange-600/20 rounded-lg p-8 mb-8 border border-yellow-500/30",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"text-4xl mb-4",children:""}),y.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Demo Completado!"}),y.jsx("p",{className:"text-gray-300 mb-6 text-lg",children:"Te gust este pack? Desbloquea el contenido completo!"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[y.jsxs("div",{className:"bg-yellow-500/10 rounded-lg p-4 border border-yellow-500/30",children:[y.jsx("p",{className:"text-yellow-200 font-medium mb-2",children:" Pack Completo"}),y.jsx("p",{className:"text-gray-300 text-sm",children:"Ms de 50 preguntas y retos nicos"})]}),y.jsxs("div",{className:"bg-yellow-500/10 rounded-lg p-4 border border-yellow-500/30",children:[y.jsx("p",{className:"text-yellow-200 font-medium mb-2",children:" Sin Lmites"}),y.jsx("p",{className:"text-gray-300 text-sm",children:"Juega todas las veces que quieras"})]})]}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[y.jsx(Ne,{onClick:i,className:"px-8 py-3 text-lg bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-bold rounded-lg shadow-lg transform hover:scale-105 transition-all",children:" Comprar Pack Completo!"}),y.jsx(Ne,{onClick:oe,variant:"secondary",className:"px-8 py-3 text-lg border-2 border-yellow-500 text-yellow-400 hover:bg-yellow-500/10",children:" Jugar Demo Otra Vez"})]})]})}):y.jsx("div",{className:"bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-lg p-8 mb-8 border border-purple-500/30",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"text-3xl mb-4",children:""}),y.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Partida pica Completada!"}),y.jsx("p",{className:"text-gray-300 mb-6 text-lg",children:"Listos para ms diversin? La fiesta no tiene que terminar aqu!"}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[y.jsx(Ne,{onClick:oe,className:"px-8 py-3 text-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold rounded-lg shadow-lg transform hover:scale-105 transition-all",children:" Empezar Nueva Partida"}),y.jsx(Ne,{onClick:me,className:"px-8 py-3 text-lg bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-bold rounded-lg shadow-lg transform hover:scale-105 transition-all",children:" Explorar Ms Packs"})]})]})}),y.jsx("div",{className:"mt-4 text-xs text-gray-500 text-center",children:y.jsx("p",{children:"Gracias por jugar Verdad o Reto. Comparte tus mejores momentos!"})})]})})},IE=["PUTO","PUTA","MIERDA","JODER","COO","CABRON","CABRONA","PENDEJO","PENDEJA","IDIOTA","ESTUPIDO","ESTUPIDA","TONTO","TONTA","IMBECIL","GILIPOLLAS","HIJO","HIJA","MADRE","PADRE","MAMA","PAPA","SEXO","PORNO","XXX","NAZI","HITLER","MUERTE","MATAR","SUICIDIO","DROGA","DROGAS","MARICON","MARICA","GAY","LESBIANA","TRANS","HOMO","HETERO","NEGRO","BLANCO","CHINO","JUDIO","MUSULMAN","CRISTIANO","GORDO","GORDA","FEO","FEA","FLACOS","FLACA","FUCK","SHIT","BITCH","DAMN","HELL","ASS","ASSHOLE","BASTARD","STUPID","IDIOT","MORON","RETARD","DUMB","LOSER","FREAK","SEX","PORN","XXX","NUDE","NAKED","BOOBS","PENIS","VAGINA","NAZI","HITLER","KILL","DIE","DEATH","SUICIDE","DRUG","DRUGS","FAG","FAGGOT","HOMO","LESBIAN","TRANS","QUEER","BLACK","WHITE","ASIAN","JEWISH","MUSLIM","CHRISTIAN","FAT","UGLY","SKINNY","GROSS","DISGUSTING","WTF","OMFG","STFU","GTFO","LMAO","ROFL","ADMIN","MODERATOR","OWNER","STAFF","SUPPORT","VERDAD","RETO","GAME","JUEGO","APP","OFICIAL","666","420","69","88","1488","NULL","UNDEFINED","ERROR","ADMIN","ROOT","SYSTEM","DELETE","DROP","TRUNCATE","ALTER","CREATE"],bD=[/^\d+$/,/^[A-Z]\1{5}$/,/^(.)\1{2,}/,/^[0O1IL]{6}$/,/^(ABC|123|XYZ|QWE|ASD|ZXC)/],fg=s=>{if(!s||typeof s!="string")return!1;const e=s.toUpperCase().trim();if(e.length!==6||IE.includes(e))return!1;for(const h of IE)if(e.includes(h))return!1;for(const h of bD)if(h.test(e))return!1;const t="AEIOU",i="BCDFGHJKLMNPQRSTVWXYZ",o=e.split("").every(h=>t.includes(h)),c=e.split("").every(h=>i.includes(h));return!(o||c)},CE=(s=[])=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t=0;const i=1e3;for(;t<i;){let m="";for(let g=0;g<6;g++)m+=e.charAt(Math.floor(Math.random()*e.length));if(fg(m)&&!s.includes(m))return m;t++}const o=Date.now().toString(36).toUpperCase(),c=Math.random().toString(36).substring(2,4).toUpperCase(),h=(o+c).substring(0,6).padEnd(6,"0");return fg(h)?h:"REF001"},Tb=s=>{if(!s||typeof s!="string")return{isValid:!1,error:"El cdigo de referido es requerido"};const e=s.toUpperCase().trim().replace(/[^A-Z0-9]/g,"");return e.length!==6?{isValid:!1,error:"El cdigo de referido debe tener exactamente 6 caracteres"}:fg(e)?{isValid:!0,sanitizedCode:e}:{isValid:!1,error:"El cdigo de referido contiene contenido inapropiado o no vlido"}},SD=async()=>{try{const s=nt(De,"users"),e=await pt(s),t=[];return e.forEach(i=>{const o=i.data();o.referralCode&&t.push(o.referralCode)}),t}catch(s){return console.error("Error getting existing referral codes:",s),[]}},AD=async s=>{try{const e=nt(De,"users"),t=St(e,Je("referralCode","==",s));return!(await pt(t)).empty}catch(e){return console.error("Error checking referral code existence:",e),!1}},xD=async()=>{try{const s=await SD();return CE(s)}catch(s){return console.error("Error generating unique referral code:",s),CE([])}},Ep=async(s,e)=>{try{const t=Wt(De,"users",s.uid);if(!(await Wr(t)).exists()){const o=await xD();let c={};if(e){const g=Tb(e);g.isValid&&g.sanitizedCode?await AD(g.sanitizedCode)?c={usedReferralCode:g.sanitizedCode,referralProcessedAt:new Date}:console.warn("Referral code does not exist:",g.sanitizedCode):console.warn("Invalid referral code provided:",e,g.error)}const h={uid:s.uid,email:s.email,displayName:s.displayName,photoURL:s.photoURL,isAnonymous:s.isAnonymous,emailVerified:s.emailVerified,referralCode:o,referralCount:0,createdAt:new Date,lastLoginAt:new Date,migrationVersion:"1.0",usedReferralCode:null,referredBy:null,referralProcessedAt:null,lastKnownIP:null,deviceId:null,acceptedSuggestions:0,...c};await xc(t,h);const m=Wt(De,"userReferralCodes",s.uid);await xc(m,{referralCode:o,displayName:s.displayName||s.email||"Usuario",createdAt:new Date})}}catch(t){console.error("Error creating user profile:",t)}},Xo=s=>({uid:s.uid,email:s.email,displayName:s.displayName,photoURL:s.photoURL,isAnonymous:s.isAnonymous,emailVerified:s.emailVerified}),bb=async s=>{try{const e=await c2(Tr,vb);return await Ep(e.user,s),Xo(e.user)}catch(e){throw console.error("Error al iniciar sesin con Google:",e),new Error(e.message||"Error al iniciar sesin con Google")}},Sb=async(s,e)=>{try{const t=await LN(Tr,s,e);return Xo(t.user)}catch(t){throw console.error("Error al iniciar sesin:",t),new Error(Tp(t.code))}},Ab=async(s,e,t,i)=>{try{const o=await VN(Tr,s,e);return t&&await UN(o.user,{displayName:t}),await Ep(o.user,i),await ab(o.user),Xo(o.user)}catch(o){throw console.error("Error al registrarse:",o),new Error(Tp(o.code))}},xb=async()=>{try{const s=await DN(Tr);return await Ep(s.user),Xo(s.user)}catch(s){throw console.error("Error al iniciar sesin annima:",s),new Error("Error al iniciar sesin annima")}},Rb=async()=>{try{await HN(Tr)}catch(s){throw console.error("Error al cerrar sesin:",s),new Error("Error al cerrar sesin")}},Ib=async s=>{try{await kN(Tr,s)}catch(e){throw console.error("Error al enviar email de restablecimiento:",e),new Error(Tp(e.code))}},Cb=async()=>{try{if(Tr.currentUser)await ab(Tr.currentUser);else throw new Error("No hay usuario autenticado")}catch(s){throw console.error("Error al reenviar verificacin:",s),new Error("Error al reenviar verificacin de email")}},Nb=s=>BN(Tr,e=>{s(e?Xo(e):null)}),wp=()=>Tr.currentUser?Xo(Tr.currentUser):null,mg=()=>{const s=wp();return s!==null&&!s.isAnonymous&&s.emailVerified},Tp=s=>{switch(s){case"auth/user-not-found":return"No existe una cuenta con este email";case"auth/wrong-password":return"Contrasea incorrecta";case"auth/email-already-in-use":return"Ya existe una cuenta con este email";case"auth/weak-password":return"La contrasea debe tener al menos 6 caracteres";case"auth/invalid-email":return"Email invlido";case"auth/too-many-requests":return"Demasiados intentos fallidos. Intenta ms tarde";case"auth/network-request-failed":return"Error de conexin. Verifica tu internet";default:return"Error de autenticacin. Intenta nuevamente"}},RD=Object.freeze(Object.defineProperty({__proto__:null,canPurchase:mg,getCurrentUser:wp,logout:Rb,onAuthStateChange:Nb,registerWithEmail:Ab,resendEmailVerification:Cb,resetPassword:Ib,signInAnonymous:xb,signInWithEmail:Sb,signInWithGoogle:bb},Symbol.toStringTag,{value:"Module"})),ID=()=>{const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let t=0;t<6;t++)e+=s.charAt(Math.floor(Math.random()*s.length));return e},CD=async s=>{try{const e=nt(De,"users"),t=St(e,Je("referralCode","==",s));return(await pt(t)).empty}catch(e){return console.error("Error verificando unicidad del cdigo:",e),!1}},ND=async()=>{let s=0;const e=10;for(;s<e;){const t=ID();if(await CD(t))return t;s++}throw new Error("No se pudo generar un cdigo nico despus de "+e+" intentos")},Db=async s=>{try{if(!(s!=null&&s.uid)){console.warn("Usuario no vlido para migracin");return}const e=Wt(De,"users",s.uid),t=await Wr(e);if(!t.exists()){console.warn("Documento de usuario no encontrado:",s.uid);return}const i=t.data(),o={};let c=!1;if(!i.referralCode)try{const h=await ND();o.referralCode=h,c=!0,console.log(" Generando cdigo de referido para usuario:",s.uid,"-",h)}catch(h){console.error("Error generando cdigo de referido:",h),o.referralCode=`TEMP${Date.now().toString().slice(-6)}`,c=!0}if((i.referralCount===void 0||i.referralCount===null)&&(o.referralCount=0,c=!0),i.createdAt||(o.createdAt=new Date,c=!0),o.lastLoginAt=new Date,c=!0,i.usedReferralCode===void 0&&(o.usedReferralCode=null,c=!0),i.referredBy===void 0&&(o.referredBy=null,c=!0),i.referralProcessedAt===void 0&&(o.referralProcessedAt=null,c=!0),i.lastKnownIP===void 0&&(o.lastKnownIP=null,c=!0),i.deviceId===void 0&&(o.deviceId=null,c=!0),i.acceptedSuggestions===void 0&&(o.acceptedSuggestions=0,c=!0),i.deviceId===void 0&&(o.deviceId=null,c=!0),i.autoMigratedAt||(o.autoMigratedAt=new Date,o.migrationVersion=i.migrationVersion||"1.0",c=!0),c){if(await op(e,o),o.referralCode)try{const h=Wt(De,"userReferralCodes",s.uid);await xc(h,{referralCode:o.referralCode,displayName:i.displayName||i.email||"Usuario",createdAt:i.createdAt||o.createdAt||new Date}),console.log(" Documento de cdigo de referido creado para:",s.uid)}catch(h){console.error("Error creando documento de cdigo de referido:",h)}console.log(" Usuario migrado automticamente:",s.uid)}}catch(e){console.error("Error en migracin automtica de usuario:",e)}},Ob=$.createContext(void 0),DD=({children:s})=>{const[e,t]=$.useState({user:null,isLoading:!0,isAuthenticated:!1});$.useEffect(()=>{const m=Nb(async g=>{if(g&&!g.isAnonymous&&g.uid)try{await Db(g)}catch(_){console.error("Error durante la migracin automtica del usuario:",_)}t({user:g,isLoading:!1,isAuthenticated:g!==null&&!g.isAnonymous})});return()=>m()},[]);const h={...e,login:()=>{},logout:async()=>{try{const{logout:m}=await Eb(async()=>{const{logout:g}=await Promise.resolve().then(()=>RD);return{logout:g}},void 0,import.meta.url);await m()}catch(m){console.error("Error al cerrar sesin:",m)}},refreshUser:()=>{const m=wp();t(g=>({...g,user:m,isAuthenticated:m!==null&&!m.isAnonymous}))}};return y.jsx(Ob.Provider,{value:h,children:s})},Li=()=>{const s=$.useContext(Ob);if(s===void 0)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return s},Mi={PURCHASED_PACKS:"verdad_reto_purchased_packs",CACHED_GAME_ITEMS:"verdad_reto_cached_items",CACHED_CATEGORIES:"verdad_reto_cached_categories",CACHE_PERMISSION:"verdad_reto_cache_permission",LAST_SYNC:"verdad_reto_last_sync"},OD=()=>{const s=localStorage.getItem(Mi.CACHE_PERMISSION);if(s==="granted")return!0;if(s==="denied")return!1;const e=window.confirm(`Deseas permitir que la aplicacin guarde los packs comprados localmente para poder jugar sin conexin?

Esto mejorar tu experiencia permitindote acceder a tus packs incluso sin internet.`);return localStorage.setItem(Mi.CACHE_PERMISSION,e?"granted":"denied"),e},Ic=()=>localStorage.getItem(Mi.CACHE_PERMISSION)==="granted",PD=async(s,e,t)=>{if(!Ic()){console.log("Cache permission not granted, skipping cache");return}try{const i={pack:s,gameData:{items:e,categories:t,timestamp:Date.now()},timestamp:Date.now()},o=bp();o[s.id]=i,localStorage.setItem(Mi.PURCHASED_PACKS,JSON.stringify(o)),localStorage.setItem(Mi.LAST_SYNC,Date.now().toString()),console.log(`Pack ${s.name} cached successfully`)}catch(i){console.error("Error caching pack:",i)}},bp=()=>{try{const s=localStorage.getItem(Mi.PURCHASED_PACKS);return s?JSON.parse(s):{}}catch(s){return console.error("Error reading cached packs:",s),{}}},MD=s=>{if(!Ic())return null;try{const e=bp(),t=[],i=[];for(const o of s){const c=e[o];c&&(t.push(...c.gameData.items),i.push(...c.gameData.categories))}return t.length===0?null:{items:t,categories:[...new Set(i)]}}catch(e){return console.error("Error reading cached game data:",e),null}},kD=()=>{Object.values(Mi).forEach(s=>{localStorage.removeItem(s)}),console.log("Cache cleared successfully")},Pb=()=>{const s=bp(),e=localStorage.getItem(Mi.LAST_SYNC);return{hasPermission:Ic(),packsCount:Object.keys(s).length,lastSync:e?new Date(parseInt(e)):null,packs:Object.keys(s)}};var Mb="basil",VD=function(e){return e===3?"v3":e},kb="https://js.stripe.com",LD="".concat(kb,"/").concat(Mb,"/stripe.js"),jD=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,UD=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var zD=function(e){return jD.test(e)||UD.test(e)},qD=function(){for(var e=document.querySelectorAll('script[src^="'.concat(kb,'"]')),t=0;t<e.length;t++){var i=e[t];if(zD(i.src))return i}return null},NE=function(e){var t="",i=document.createElement("script");i.src="".concat(LD).concat(t);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(i),i},BD=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})},ec=null,vd=null,Ed=null,HD=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},FD=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},GD=function(e){return ec!==null?ec:(ec=new Promise(function(t,i){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var o=qD();if(!(o&&e)){if(!o)o=NE(e);else if(o&&Ed!==null&&vd!==null){var c;o.removeEventListener("load",Ed),o.removeEventListener("error",vd),(c=o.parentNode)===null||c===void 0||c.removeChild(o),o=NE(e)}}Ed=FD(t,i),vd=HD(i),o.addEventListener("load",Ed),o.addEventListener("error",vd)}catch(h){i(h);return}}),ec.catch(function(t){return ec=null,Promise.reject(t)}))},QD=function(e,t,i){if(e===null)return null;var o=t[0],c=o.match(/^pk_test/),h=VD(e.version),m=Mb;c&&h!==m&&console.warn("Stripe.js@".concat(h," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(m,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var g=e.apply(void 0,t);return BD(g,i),g},tc,Vb=!1,Lb=function(){return tc||(tc=GD(null).catch(function(e){return tc=null,Promise.reject(e)}),tc)};Promise.resolve().then(function(){return Lb()}).catch(function(s){Vb||console.warn(s)});var KD=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Vb=!0;var o=Date.now();return Lb().then(function(c){return QD(c,t,o)})};const jb=!0,DE=()=>{const s=window.location.origin,e=window.location.pathname.includes("/verdad-reto")?"/verdad-reto":"";return{success:`${s}${e}/shop?success=true`,cancel:`${s}${e}/shop?canceled=true`}},OE={useHostedCheckout:jb,successUrl:()=>DE().success,cancelUrl:()=>DE().cancel},YD="pk_live_51S2dpMEamlsERKowyMSm4kgm11dMknJLyZGy9gZsIBBd3BQo3l9Vnn0TYKWcmuDtnq23YEsHo7FL69hGEM3UAboz00Onx53LCm";let zm=null;const Ub=()=>(zm||(zm=KD(YD)),zm),XD=async()=>{try{const s=await Wr(Wt(De,"config","stripe"));return s.exists()?s.data():null}catch(s){return console.error("Error obteniendo configuracin de Stripe:",s),null}};const $D=async(s,e,t)=>{const i=await Ub();if(!i)throw new Error("Stripe no se pudo cargar");if(!s.isPremium)throw new Error("Este pack no requiere pago");s.priceAmount;const o=await i.redirectToCheckout({lineItems:[{price:s.stripePriceId,quantity:1}],mode:"payment",successUrl:`${OE.successUrl()}&pack=${s.id}&session_id={CHECKOUT_SESSION_ID}`,cancelUrl:OE.cancelUrl(),customerEmail:e,clientReferenceId:`${t}_${s.id}_${Date.now()}`});if(o.error)throw new Error(o.error.message)},WD=async(s,e,t)=>{try{if(jb)return await $D(s,e,t),null}catch(i){throw console.error("Error creando sesin de checkout:",i),i}},JD=async(s,e,t)=>{try{const i=await Ub();if(!i)throw new Error("Stripe no est disponible");const o=await WD(s,e,t);if(!o)throw new Error("No se pudo crear la sesin de pago");await ZD({userId:t,packId:s.id,stripeSessionId:o.sessionId,purchaseDate:new Date,amount:s.priceAmount||0,currency:s.currency||"EUR",status:"pending",email:e});const{error:c}=await i.redirectToCheckout({sessionId:o.sessionId});if(c)throw new Error(c.message)}catch(i){throw console.error("Error redirigiendo a checkout:",i),i}},ZD=async s=>{try{return(await Bc(nt(De,"userPurchases"),{...s,purchaseDate:s.purchaseDate.toISOString()})).id}catch(e){throw console.error("Error guardando compra pendiente:",e),e}},eO=async s=>{try{const e=St(nt(De,"userPurchases"),Je("userId","==",s),Je("status","==","completed"));return(await pt(e)).docs.map(i=>({id:i.id,...i.data(),purchaseDate:new Date(i.data().purchaseDate)}))}catch(e){return console.error("Error obteniendo compras del usuario:",e),[]}},PE=async s=>{try{return(await eO(s)).map(t=>t.packId)}catch(e){return console.error("Error obteniendo packs comprados:",e),[]}},tO=({onClose:s})=>{const[e,t]=$.useState(null),[i,o]=$.useState(!1);$.useEffect(()=>{c()},[]);const c=()=>{const g=Pb();t(g)},h=async()=>{o(!0);try{OD()&&c()}finally{o(!1)}},m=()=>{window.confirm("Ests seguro de que quieres eliminar todos los datos guardados localmente?")&&(kD(),c())};return e?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-xl font-bold",children:"Almacenamiento Local"}),y.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"font-semibold mb-2",children:"Estado del Cach"}),y.jsxs("div",{className:"space-y-2 text-sm",children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"Permiso:"}),y.jsx("span",{className:`font-medium ${e.hasPermission?"text-green-600":"text-red-600"}`,children:e.hasPermission?"Activado":"Desactivado"})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"Packs guardados:"}),y.jsx("span",{className:"font-medium",children:e.packsCount})]}),e.lastSync&&y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"ltima sincronizacin:"}),y.jsxs("span",{className:"font-medium text-xs",children:[e.lastSync.toLocaleDateString()," ",e.lastSync.toLocaleTimeString()]})]})]})]}),e.packsCount>0&&y.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"font-semibold mb-2",children:"Packs Disponibles Sin Conexin"}),y.jsx("div",{className:"space-y-1 text-sm",children:e.packs.map(g=>y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),y.jsx("span",{className:"capitalize",children:g.replace("-"," ")})]},g))})]}),y.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"font-semibold mb-2",children:"Qu es el almacenamiento local?"}),y.jsx("p",{className:"text-sm text-gray-700",children:"Permite guardar los packs que compres en tu dispositivo para poder jugar sin conexin a internet. Los datos se mantienen seguros en tu navegador."})]}),y.jsxs("div",{className:"flex flex-col space-y-2",children:[e.hasPermission?y.jsx("div",{className:"text-center text-green-600 font-medium",children:" Almacenamiento local activado"}):y.jsx(Ne,{onClick:h,disabled:i,className:"w-full bg-green-600 hover:bg-green-700",children:i?"Procesando...":"Activar Almacenamiento Local"}),e.packsCount>0&&y.jsx(Ne,{onClick:m,className:"w-full bg-red-600 hover:bg-red-700",children:"Limpiar Datos Guardados"}),y.jsx(Ne,{onClick:s,className:"w-full bg-gray-600 hover:bg-gray-700",children:"Cerrar"})]})]})]})}):y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:y.jsx("div",{className:"text-center",children:"Cargando informacin del cach..."})})})},nO=({pack:s,onBack:e,onSuccess:t})=>{const{user:i}=Li(),[o,c]=$.useState(!1),[h,m]=$.useState(null),[g,_]=$.useState(null);$.useEffect(()=>{(async()=>{try{const I=await XD();_(I)}catch{m("Error cargando configuracin de pago")}})()},[]);const w=async()=>{if(!i||!i.email){m("Debes estar autenticado para realizar una compra");return}if(!s.isPremium){m("Este pack no requiere pago");return}c(!0),m(null);try{await JD(s,i.email,i.uid),t&&t()}catch(A){m(A.message||"Error procesando el pago"),c(!1)}},b=(A,I)=>new Intl.NumberFormat("es-ES",{style:"currency",currency:I.toUpperCase()}).format(A/100);return g?y.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:y.jsxs("div",{className:"w-full max-w-md",children:[y.jsxs("div",{className:"relative text-center mb-8",children:[y.jsx("button",{onClick:e,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:y.jsx(qE,{className:"w-8 h-8"})}),y.jsx("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Checkout"})]}),y.jsxs(Pn,{className:"p-6",children:[y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("div",{className:"text-6xl mb-4",children:s.icon}),y.jsx("h2",{className:"text-2xl font-bold text-cyan-400 mb-2",children:s.name}),y.jsx("p",{className:"text-gray-400 mb-4",children:s.description}),s.priceAmount&&s.currency&&y.jsxs("div",{className:"bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-lg p-4 mb-4",children:[y.jsx("div",{className:"text-3xl font-bold text-white",children:b(s.priceAmount,s.currency)}),y.jsx("div",{className:"text-sm text-gray-300",children:"Pago nico"})]})]}),y.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 mb-6",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx(Ro,{className:"w-5 h-5 text-green-400"}),y.jsx("span",{className:"text-green-400 font-semibold",children:"Pago seguro"})]}),y.jsx("p",{className:"text-sm text-gray-300",children:"Tu pago est protegido por Stripe. No almacenamos informacin de tarjetas de crdito."})]}),i&&y.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:[y.jsxs("div",{className:"text-sm text-gray-300",children:[y.jsx("strong",{children:"Cuenta:"})," ",i.displayName||i.email]}),y.jsxs("div",{className:"text-sm text-gray-300",children:[y.jsx("strong",{children:"Email:"})," ",i.email]})]}),h&&y.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6",children:y.jsx("p",{className:"text-red-200 text-sm",children:h})}),y.jsx(Ne,{onClick:w,disabled:o||!i,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:o?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Procesando..."]}):y.jsxs(y.Fragment,{children:[y.jsx(BE,{className:"w-5 h-5"}),"Pagar con Stripe"]})}),y.jsx("div",{className:"mt-4 text-center",children:y.jsx("p",{className:"text-xs text-gray-400",children:"Al continuar, aceptas nuestros trminos de servicio y poltica de privacidad."})})]}),y.jsxs("div",{className:"mt-6 text-center",children:[y.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Mtodos de pago aceptados:"}),y.jsxs("div",{className:"flex justify-center gap-2",children:[y.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Visa"}),y.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Mastercard"}),y.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"American Express"})]})]})]})}):y.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),y.jsx("p",{className:"text-gray-400",children:"Cargando configuracin de pago..."})]})})},rO=({availablePacks:s,purchasedPacks:e,onPurchase:t,onBack:i,onGoToLogin:o})=>{const{user:c,isAuthenticated:h}=Li(),[m,g]=$.useState(!1),[_,w]=$.useState(!1),[b,A]=$.useState(!1),[I,L]=$.useState(null),[G,B]=$.useState([]),[ie,ae]=$.useState(!1);$.useEffect(()=>{(async()=>{if(c&&h){ae(!0);try{const D=await PE(c.uid);B(D)}catch(D){console.error("Error cargando compras del usuario:",D)}finally{ae(!1)}}else B([])})()},[c,h]);const oe=Y=>{const D=s.find(x=>x.id===Y);if(D){if(!D.isPremium||D.id==="base"){if(!mg()){g(!0),setTimeout(()=>g(!1),3e3);return}t(Y);return}if(!mg()){g(!0),setTimeout(()=>g(!1),3e3);return}L(D),A(!0)}},me=async()=>{if(A(!1),L(null),c&&h)try{const Y=await PE(c.uid);B(Y),I&&Y.includes(I.id)&&t(I.id)}catch(Y){console.error("Error actualizando compras:",Y)}},he=()=>{A(!1),L(null)};return Pb(),y.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in pt-16",children:y.jsxs("div",{className:"w-full max-w-2xl",children:[y.jsxs("div",{className:"relative text-center mb-8",children:[y.jsx("button",{onClick:i,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:y.jsx(qE,{className:"w-8 h-8"})}),y.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Tienda de Paquetes"}),y.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 text-sm",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(PA,{className:"w-4 h-4"}),c?y.jsx("span",{className:`${h?"text-green-400":"text-yellow-400"}`,children:h?`Conectado como ${c.displayName||c.email}`:"Usuario annimo - Inicia sesin para comprar"}):y.jsx("span",{className:"text-gray-400",children:"No conectado"})]}),c&&h&&y.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:y.jsx("a",{href:"https://verdad-reto.es.eu.org/delete-account.html",target:"_blank",rel:"noopener noreferrer",className:"hover:text-red-400 transition-colors",children:"Eliminar cuenta"})})]})]}),m&&y.jsxs("div",{className:"mb-6 p-4 bg-yellow-500/20 border border-yellow-500 rounded-lg text-center",children:[y.jsx("p",{className:"text-yellow-100 mb-2",children:"Necesitas iniciar sesin y verificar tu email para comprar packs premium"}),o&&y.jsx(Ne,{onClick:o,className:"bg-yellow-600 hover:bg-yellow-700",children:"Ir a Iniciar Sesin"})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(Y=>{const D=e.includes(Y.id),x=G.includes(Y.id),R=D||x,M=Y.id==="base",P=Y.isPremium&&!M,V=P&&!R;return y.jsxs(Pn,{className:`flex flex-col text-center border-2 transition-all ${R?"border-green-500/50":V?"border-yellow-500/50 opacity-75":"border-transparent hover:border-pink-500/50"}`,children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"text-5xl mb-4",children:Y.icon}),V&&y.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-500 rounded-full p-1",children:y.jsx(Ro,{className:"w-4 h-4 text-black"})})]}),y.jsx("h2",{className:`text-2xl font-bold ${R?"text-green-400":V?"text-yellow-400":"text-cyan-400"}`,children:Y.name}),y.jsx("p",{className:"text-gray-400 mt-2 mb-2 flex-grow",children:Y.description}),P&&Y.priceAmount&&Y.currency&&y.jsxs("div",{className:"mb-4",children:[Y.hasDiscount&&Y.originalPriceAmount?y.jsxs("div",{className:"space-y-1",children:[y.jsx("div",{className:"text-sm text-gray-500 line-through",children:new Intl.NumberFormat("es-ES",{style:"currency",currency:Y.currency.toUpperCase()}).format(Y.originalPriceAmount/100)}),y.jsx("div",{className:`text-lg font-bold ${R?"text-green-400":"text-red-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:Y.currency.toUpperCase()}).format(Y.priceAmount/100)}),y.jsx("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:Y.discountPercentage?`-${Y.discountPercentage}%`:`-${new Intl.NumberFormat("es-ES",{style:"currency",currency:Y.currency.toUpperCase()}).format((Y.originalPriceAmount-Y.priceAmount)/100)}`}),Y.discountReason&&y.jsx("div",{className:"text-xs text-yellow-400 italic",children:Y.discountReason})]}):y.jsx("div",{className:`text-lg font-bold ${R?"text-green-400":"text-yellow-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:Y.currency.toUpperCase()}).format(Y.priceAmount/100)}),y.jsx("div",{className:"text-xs text-gray-500",children:"Pago nico"})]}),R?y.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-green-700 text-green-200",children:" Comprado"}):M?y.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-blue-700 text-blue-200",children:"Incluido"}):P?y.jsx(Ne,{onClick:()=>oe(Y.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",disabled:ie,children:ie?y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):y.jsxs(y.Fragment,{children:[y.jsx(BE,{className:"w-4 h-4"}),"Comprar ",Y.price]})}):y.jsxs(Ne,{onClick:()=>oe(Y.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2",children:[y.jsx(Ro,{className:"w-4 h-4"}),"Desbloquear (",Y.price,")"]})]},Y.id)})}),_&&y.jsx(tO,{onClose:()=>w(!1)}),b&&I&&y.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:y.jsx("div",{className:"w-full h-full",children:y.jsx(nO,{pack:I,onBack:he,onSuccess:me})})})]})})},sO=s=>{var t;if(!s.hasDiscount||!s.priceAmount)return s;if(s.discountValidUntil&&new Date>s.discountValidUntil)return{...s,hasDiscount:!1};let e=s.priceAmount;return s.discountPercentage?e=s.priceAmount*(1-s.discountPercentage/100):s.discountAmount&&(e=s.priceAmount-s.discountAmount),e=Math.max(0,Math.round(e)),{...s,originalPriceAmount:s.priceAmount,priceAmount:e,price:new Intl.NumberFormat("es-ES",{style:"currency",currency:((t=s.currency)==null?void 0:t.toUpperCase())||"EUR"}).format(e/100)}},bh=async()=>{try{const s=nt(De,"packs"),e=await pt(s);return e.empty?(console.warn("No packs found in Firebase database"),[]):e.docs.map(o=>{const c=o.data();return{id:o.id,name:c.name,description:c.description,price:c.price,icon:c.icon,isActive:c.isActive??!0,priceAmount:c.priceAmount,currency:c.currency,isPremium:c.isPremium??!1,stripeProductId:c.stripeProductId,stripePriceId:c.stripePriceId,hasDiscount:c.hasDiscount??!1,discountPercentage:c.discountPercentage,discountAmount:c.discountAmount,discountReason:c.discountReason,discountValidUntil:c.discountValidUntil?c.discountValidUntil.toDate():void 0,originalPriceAmount:c.originalPriceAmount,allowDemo:c.allowDemo??!1,demoPlaysCount:c.demoPlaysCount??0}}).filter(o=>o.isActive).map(o=>sO(o))}catch(s){throw console.error("Error connecting to Firebase:",s),new Error("No se pudo conectar a la base de datos. Verifica tu conexin a internet.")}},iO=async(s,e)=>{try{if(!e||e.length===0)return console.warn("No pack IDs provided for questions query"),[];const t=nt(De,"gameItems"),i=St(t,Je("type","==","question"),Je("packId","in",e)),o=await pt(i);return o.empty?(console.warn("No questions found in Firebase database for packs:",e),[]):o.docs.map(h=>{const m=h.data();return{text:m.text,category:m.category,packId:m.packId}})}catch(t){throw console.error("Error fetching questions from Firebase:",t),new Error("No se pudieron cargar las preguntas. Verifica tu conexin a internet.")}},aO=async(s,e)=>{try{if(!e||e.length===0)return console.warn("No pack IDs provided for dares query"),[];const t=nt(De,"gameItems"),i=St(t,Je("type","==","dare"),Je("packId","in",e)),o=await pt(i);return o.empty?(console.warn("No dares found in Firebase database for packs:",e),[]):o.docs.map(h=>{const m=h.data();return{text:m.text,category:m.category,packId:m.packId}})}catch(t){throw console.error("Error fetching dares from Firebase:",t),new Error("No se pudieron cargar los retos. Verifica tu conexin a internet.")}},oO=async s=>{try{if(!s||s.length===0)return console.warn("No pack IDs provided for categories query"),[];const e=nt(De,"gameItems"),t=St(e,Je("packId","in",s)),i=await pt(t);return i.empty?(console.warn("No categories found in Firebase database for packs:",s),[]):[...new Set(i.docs.map(c=>c.data().category))]}catch(e){throw console.error("Error fetching categories from Firebase:",e),new Error("No se pudieron cargar las categoras. Verifica tu conexin a internet.")}},ME=async s=>{try{if(!s||s.length===0)return console.warn("No pack IDs provided for game data query"),{questions:[],dares:[],categories:[]};const e=await oO(s),[t,i]=await Promise.all([iO(e,s),aO(e,s)]);if(Ic()&&(t.length>0||i.length>0)){const o=[...t,...i],c=s.reduce((h,m)=>{const g=o.filter(w=>w.packId===m),_=e.filter(w=>g.some(b=>b.category===w));return g.length>0&&(h[m]={items:g,categories:_}),h},{});for(const[h,m]of Object.entries(c)){const _=(await bh()).find(w=>w.id===h);_&&await PD(_,m.items,m.categories)}}return{questions:t,dares:i,categories:e}}catch(e){console.error("Error fetching game data from Firebase:",e);const t=MD(s);if(t){console.log("Using cached game data for offline play");const i=t.items.filter(c=>!("type"in c)||c.type==="question"),o=t.items.filter(c=>"type"in c&&c.type==="dare");return{questions:i,dares:o,categories:t.categories}}throw Ic()?new Error("No hay conexin a internet y no tienes datos guardados para estos packs."):new Error("No hay conexin a internet y no tienes packs guardados localmente. Deseas activar el almacenamiento local para jugar sin conexin?")}},lO=async s=>{try{const e=nt(De,"gameItems"),t=St(e,Je("packId","==",s),Je("isDemo","==",!0)),o=(await pt(t)).docs.map(g=>({id:g.id,...g.data()})),c=o.filter(g=>g.type==="question").map(g=>({text:g.text,category:g.category,isDemo:!0,packId:g.packId})),h=o.filter(g=>g.type==="dare").map(g=>({text:g.text,category:g.category,isDemo:!0,packId:g.packId})),m=[...new Set(o.map(g=>g.category))];return{questions:c,dares:h,categories:m}}catch(e){return console.error("Error fetching demo data:",e),{questions:[],dares:[],categories:[]}}},cO=async(s,e)=>{try{const t={packId:s,userId:e||"anonymous",timestamp:new Date,type:"demo_play"};await Bc(nt(De,"demoLogs"),t);const i=nt(De,"packs"),o=Wt(i,s),c=await Wr(o);if(c.exists()){const h=c.data().demoPlaysCount||0;await op(o,{demoPlaysCount:h+1})}console.log("Demo play logged successfully")}catch(t){console.error("Error logging demo play:",t)}},zb=async(s,e)=>{try{if(!s||s.trim().length===0)return{isValid:!1,error:"El cdigo de referido no puede estar vaco"};const t=Tb(s);if(!t.isValid)return{isValid:!1,error:t.error||"El cdigo de referido no es vlido"};const i=t.sanitizedCode,o=nt(De,"userReferralCodes"),c=St(o,Je("referralCode","==",i)),h=await pt(c);if(h.empty)return{isValid:!1,error:"Cdigo de referido no vlido"};const m=h.docs[0],g=m.data(),_=m.id;if(_===e)return{isValid:!1,error:"No puedes usar tu propio cdigo de referido"};const w=await Wr(Wt(De,"users",e));if(w.exists()&&w.data().usedReferralCode)return{isValid:!1,error:"Ya has usado un cdigo de referido anteriormente"};const b=new Date,A=new Date(b.getTime()-3600*1e3),I=nt(De,"referrals"),L=St(I,Je("referrerUid","==",_),Je("createdAt",">=",A));if((await pt(L)).size>=5)return{isValid:!1,message:"Lmite de referidos por hora excedido. Intenta ms tarde."};const B=new Date(b.getTime()-1440*60*1e3),ie=St(I,Je("referrerUid","==",_),Je("createdAt",">=",B));return(await pt(ie)).size>=20?{isValid:!1,message:"Lmite diario de referidos excedido. Intenta maana."}:{isValid:!0,referrerName:g.displayName||g.email||"Usuario"}}catch(t){return console.error("Error validating referral code:",t),{isValid:!1,error:"Error al validar el cdigo de referido"}}},uO=async(s,e)=>{try{return await MC(De,async t=>{var me;const i=nt(De,"userReferralCodes"),o=St(i,Je("referralCode","==",s.toUpperCase())),c=await pt(o);if(c.empty)throw new Error("Cdigo de referido no vlido");const h=c.docs[0],m=Wt(De,"users",h.id),g=Wt(De,"users",e),_=await t.get(g);if(_.exists()&&_.data().usedReferralCode)throw new Error("Ya has usado un cdigo de referido");if(h.id===e)throw new Error("No puedes usar tu propio cdigo");const w=new Date,b=_.data(),A=((me=b==null?void 0:b.createdAt)==null?void 0:me.toDate())||new Date,I=new Date(w.getTime()-300*1e3);if(A>I)throw new Error("Usuario muy reciente, posible abuso");const L=b==null?void 0:b.lastKnownIP,G=h.data(),B=G==null?void 0:G.lastKnownIP;L&&B&&L===B&&console.warn("Posible abuso: misma IP para referrer y referido");const ie=b==null?void 0:b.deviceId,ae=G==null?void 0:G.deviceId;if(ie&&ae&&ie===ae)throw new Error("No se puede usar el mismo dispositivo para referir");t.update(m,{referralCount:kT(1)}),t.update(g,{usedReferralCode:s.toUpperCase(),referredBy:h.id,referralProcessedAt:w});const oe=Wt(nt(De,"referrals"));return t.set(oe,{referrerId:h.id,referredUserId:e,referralCode:s.toUpperCase(),createdAt:w,status:"completed",referrerIP:B||null,referredUserIP:L||null,sameIP:L&&B?L===B:!1,userAccountAge:w.getTime()-A.getTime()}),!0})}catch(t){return console.error("Error processing referral:",t),!1}},dO=async s=>{try{const e=await Wr(Wt(De,"users",s));if(!e.exists())return null;const t=e.data(),i=nt(De,"referrals"),o=St(i,Je("referrerId","==",s)),c=await pt(o),h=[];return c.forEach(m=>{var _;const g=m.data();h.push({id:g.referredUserId,name:`Usuario ${g.referredUserId.substring(0,8)}...`,joinedAt:((_=g.createdAt)==null?void 0:_.toDate())||new Date})}),{referralCode:t.referralCode||"",referralCount:t.referralCount||0,usedReferralCode:t.usedReferralCode||null,referredBy:t.referredBy||null,referredUsers:h}}catch(e){return console.error("Error getting user referral data:",e),null}},hO=async s=>{try{const e=await Wr(Wt(De,"users",s));if(!e.exists())return[];const i=e.data().referralCount||0,o=nt(De,"packs"),c=St(o,Je("isReferralUnlockable","==",!0)),h=await pt(c),m=[];return h.forEach(g=>{const w=g.data().requiredReferrals||0;i>=w&&m.push(g.id)}),m}catch(e){return console.error("Error checking referral pack unlocks:",e),[]}},fO=async s=>{try{const e=nt(De,"suggestions"),t=St(e,Je("authorId","==",s),Je("status","==","accepted")),o=(await pt(t)).size,c=nt(De,"packs"),h=St(c,Je("isSuggestionUnlockable","==",!0)),m=await pt(h),g=[];return m.forEach(_=>{const b=_.data().requiredApprovedSuggestions||0;o>=b&&g.push(_.id)}),g}catch(e){return console.error("Error checking suggestion pack unlocks:",e),[]}},kE=async(s,e)=>{try{const t=Wt(De,"userQuestionChangeStats",s);(await Wr(t)).exists()?await op(t,{totalChanges:kT(1),adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,updatedAt:new Date}):await xc(t,{userId:s,totalChanges:e.totalChanges,adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,createdAt:new Date,updatedAt:new Date}),console.log("Question change stats saved successfully")}catch(t){console.error("Error saving question change stats:",t)}},qb=async s=>{try{const e=nt(De,"suggestions"),t=St(e,Je("userId","==",s),Je("status","==","accepted"));return(await pt(t)).size}catch(e){return console.error("Error getting user accepted suggestions count:",e),0}},mO=({onBack:s,onSuccess:e})=>{const[t,i]=$.useState("login"),[o,c]=$.useState(""),[h,m]=$.useState(""),[g,_]=$.useState(""),[w,b]=$.useState(""),[A,I]=$.useState(""),[L,G]=$.useState(null),[B,ie]=$.useState(!1),[ae,oe]=$.useState(!1),[me,he]=$.useState(""),[Y,D]=$.useState(""),{refreshUser:x,user:R}=Li(),M=async()=>{oe(!0),he("");try{const X=t==="register"&&A&&(L!=null&&L.isValid)?A:void 0;await bb(X),x(),e()}catch(X){he(X.message)}finally{oe(!1)}},P=async()=>{oe(!0),he("");try{await xb(),x(),e()}catch(X){he(X.message)}finally{oe(!1)}},V=async X=>{X.preventDefault(),oe(!0),he(""),D("");try{if(t==="login"){const ye=await Sb(o,h);if(x(),!ye.emailVerified){D("Tu email no est verificado. Revisa tu bandeja de entrada o reenva la verificacin.");return}e()}else if(t==="register"){if(h!==g)throw new Error("Las contraseas no coinciden");const ye=A&&(L!=null&&L.isValid)?A:void 0;await Ab(o,h,w,ye),D("Cuenta creada exitosamente. Revisa tu email para verificar tu cuenta antes de poder comprar packs premium."),i("login")}else t==="forgot-password"&&(await Ib(o),D("Email de restablecimiento enviado. Revisa tu bandeja de entrada."),i("login"))}catch(ye){he(ye.message)}finally{oe(!1)}},C=async()=>{oe(!0),he("");try{await Cb(),D("Email de verificacin reenviado.")}catch(X){he(X.message)}finally{oe(!1)}},Ae=()=>{c(""),m(""),_(""),b(""),I(""),G(null),he(""),D("")},be=async X=>{if(!X.trim()){G(null);return}ie(!0);try{const ye="temp-"+Date.now(),O=await zb(X,ye);G({isValid:O.isValid,message:O.isValid?`Cdigo vlido de ${O.referrerName}`:O.error||"Cdigo no vlido"})}catch{G({isValid:!1,message:"Error al validar cdigo"})}finally{ie(!1)}},Q=X=>{I(X.toUpperCase()),X.trim().length>=6?be(X):G(null)},re=X=>{i(X),Ae()};return y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:y.jsxs(Pn,{className:"w-full max-w-md p-8 space-y-6",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:t==="login"?"Iniciar Sesin":t==="register"?"Crear Cuenta":"Recuperar Contrasea"}),y.jsx("p",{className:"text-white/80",children:t==="login"?"Accede a tu cuenta para comprar packs premium":t==="register"?"Crea una cuenta para acceder a contenido premium":"Ingresa tu email para recuperar tu contrasea"})]}),me&&y.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:me}),Y&&y.jsxs("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:[y.jsx("p",{children:Y}),Y.includes("no est verificado")&&y.jsx(Ne,{onClick:C,disabled:ae,className:"mt-2 bg-green-600 hover:bg-green-700 text-sm",children:"Reenviar verificacin"})]}),y.jsxs("form",{onSubmit:V,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Email"}),y.jsx("input",{type:"email",value:o,onChange:X=>c(X.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"tu@email.com",required:!0})]}),t!=="forgot-password"&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Contrasea"}),y.jsx("input",{type:"password",value:h,onChange:X=>m(X.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"",required:!0,minLength:6})]}),t==="register"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Confirmar Contrasea"}),y.jsx("input",{type:"password",value:g,onChange:X=>_(X.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"",required:!0,minLength:6})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Nombre (opcional)"}),y.jsx("input",{type:"text",value:w,onChange:X=>b(X.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"Tu nombre"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Cdigo de Referido (opcional)"}),y.jsx("input",{type:"text",value:A,onChange:X=>Q(X.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${L===null?"border-white/20 focus:ring-white/50":L.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ej: ABC123",maxLength:8}),B&&y.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando cdigo..."}),L&&y.jsx("p",{className:`text-sm mt-1 ${L.isValid?"text-green-400":"text-red-400"}`,children:L.message})]})]}),y.jsx(Ne,{type:"submit",disabled:ae,className:"w-full",children:ae?"Cargando...":t==="login"?"Iniciar Sesin":t==="register"?"Crear Cuenta":"Enviar Email"})]}),t!=="forgot-password"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-white/20"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-2 bg-transparent text-white/60",children:"o"})})]}),y.jsxs(Ne,{onClick:M,disabled:ae,className:"w-full bg-white text-gray-900 hover:bg-gray-100 flex items-center justify-center",children:[y.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[y.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),y.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),y.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),y.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar con Google"]})]}),y.jsxs("div",{className:"text-center space-y-2",children:[t==="login"&&y.jsxs(y.Fragment,{children:[y.jsx("button",{type:"button",onClick:()=>re("forgot-password"),className:"text-white/80 hover:text-white text-sm underline",children:"Olvidaste tu contrasea?"}),y.jsxs("div",{children:[y.jsx("span",{className:"text-white/60 text-sm",children:"No tienes cuenta? "}),y.jsx("button",{type:"button",onClick:()=>re("register"),className:"text-white hover:text-white/80 text-sm underline",children:"Regstrate"})]})]}),t==="register"&&y.jsxs("div",{children:[y.jsx("span",{className:"text-white/60 text-sm",children:"Ya tienes cuenta? "}),y.jsx("button",{type:"button",onClick:()=>re("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Inicia sesin"})]}),t==="forgot-password"&&y.jsx("button",{type:"button",onClick:()=>re("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Volver al inicio de sesin"})]}),y.jsxs("div",{className:"border-t border-white/20 pt-4",children:[y.jsx(Ne,{onClick:P,disabled:ae,className:"w-full bg-white/10 hover:bg-white/20 text-white border border-white/20",children:"Continuar sin cuenta"}),y.jsx("p",{className:"text-white/60 text-xs text-center mt-2",children:"Podrs jugar pero no comprar packs premium"})]}),y.jsx("div",{className:"text-center",children:y.jsx(Ne,{onClick:s,className:"text-white/80 hover:text-white bg-transparent",children:" Volver"})})]})})},Cc="suggestions",gO=async(s,e,t)=>{try{const i=new Date;if(!await Hb(e))throw new Error("Has alcanzado el lmite de sugerencias permitidas");const c=await Bb(e,s.title,s.content);if(!c.isValid)throw new Error(c.error||"Contenido no vlido");const h={type:s.type,authorUid:e,authorName:t,title:s.title,content:s.content,targetPackId:s.targetPackId,status:lc.Pending,createdAt:i,updatedAt:i};if(s.targetPackId){const _=await Wr(Wt(De,"packs",s.targetPackId));_.exists()&&(h.targetPackName=_.data().name)}const m={type:h.type,authorUid:h.authorUid,authorName:h.authorName,title:h.title,content:h.content,status:h.status,createdAt:Xe.fromDate(h.createdAt),updatedAt:Xe.fromDate(h.updatedAt)};return h.targetPackId!==void 0&&(m.targetPackId=h.targetPackId),h.targetPackName!==void 0&&(m.targetPackName=h.targetPackName),(await Bc(nt(De,Cc),m)).id}catch(i){throw console.error("Error creating suggestion:",i),i}},pO=["spam","test","prueba","asdf","qwerty","123","abc"],VE=s=>{const e=s.toLowerCase();return pO.some(t=>e.includes(t.toLowerCase()))},yO=async(s,e,t)=>{try{const i=St(nt(De,Cc),Je("authorUid","==",s),Kd("createdAt","desc"),DT(10)),o=await pt(i);for(const c of o.docs){const h=c.data();if(h.title===e||h.content===t)return!0;const m=LE(e,h.title),g=LE(t,h.content);if(m>.8||g>.8)return!0}return!1}catch(i){return console.error("Error checking duplicate content:",i),!1}},LE=(s,e)=>{const t=s.toLowerCase().split(/\s+/),i=e.toLowerCase().split(/\s+/),o=new Set(t),c=new Set(i),h=new Set([...o].filter(g=>c.has(g))),m=new Set([...o,...c]);return h.size/m.size},Bb=async(s,e,t)=>e.length<gt.MIN_TITLE_LENGTH?{isValid:!1,error:`El ttulo debe tener al menos ${gt.MIN_TITLE_LENGTH} caracteres`}:e.length>gt.MAX_TITLE_LENGTH?{isValid:!1,error:`El ttulo no puede exceder ${gt.MAX_TITLE_LENGTH} caracteres`}:t.length<gt.MIN_CONTENT_LENGTH?{isValid:!1,error:`El contenido debe tener al menos ${gt.MIN_CONTENT_LENGTH} caracteres`}:t.length>gt.MAX_CONTENT_LENGTH?{isValid:!1,error:`El contenido no puede exceder ${gt.MAX_CONTENT_LENGTH} caracteres`}:VE(e)||VE(t)?{isValid:!1,error:"El contenido contiene palabras no permitidas"}:await yO(s,e,t)?{isValid:!1,error:"Ya has enviado una sugerencia similar recientemente"}:{isValid:!0},Hb=async s=>{try{if(!s)return!0;const e=new Date,t=new Date(e.getTime()-1440*60*1e3),i=new Date(e.getTime()-10080*60*1e3),o=St(nt(De,Cc),Je("authorUid","==",s),Je("createdAt",">=",Xe.fromDate(t)));if((await pt(o)).size>=gt.MAX_SUGGESTIONS_PER_DAY)return!1;const h=St(nt(De,Cc),Je("authorUid","==",s),Je("createdAt",">=",Xe.fromDate(i)));return!((await pt(h)).size>=gt.MAX_SUGGESTIONS_PER_WEEK)}catch(e){return console.error("Error checking suggestion limits:",e),!0}},_O=async s=>{try{const e=await Fb(s),t={total:e.length,pending:0,approved:0,rejected:0};return e.forEach(i=>{switch(i.status){case lc.Pending:t.pending++;break;case lc.Accepted:t.approved++;break;case lc.Rejected:t.rejected++;break}}),t}catch(e){throw console.error("Error getting user suggestion stats:",e),e}},Fb=async s=>{try{const e=St(nt(De,Cc),Je("authorUid","==",s),Kd("createdAt","desc"));return(await pt(e)).docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt.toDate(),updatedAt:i.data().updatedAt.toDate()}))}catch(e){throw console.error("Error getting user suggestions:",e),e}},Gb=({onClose:s,onSuccess:e})=>{const{user:t}=Li(),[i,o]=$.useState({type:ar.Pack,title:"",content:"",targetPackId:void 0}),[c,h]=$.useState([]),[m,g]=$.useState(!1),[_,w]=$.useState(null),[b,A]=$.useState(!0),[I,L]=$.useState(0);$.useEffect(()=>{G(),B(),ie()},[t]);const G=async()=>{try{const Y=await bh();h(Y)}catch(Y){console.error("Error loading packs:",Y)}},B=async()=>{if(!t){A(!0),w(null);return}try{const Y=await Hb(t.uid);A(Y),w(Y?null:"Has alcanzado el lmite de sugerencias permitidas. Intenta ms tarde.")}catch(Y){console.error("Error checking user limits:",Y),A(!0),w(null)}},ie=async()=>{if(t)try{const Y=await qb(t.uid);L(Y)}catch(Y){console.error("Error loading accepted suggestions count:",Y)}},ae=Y=>{o(D=>({...D,type:Y,targetPackId:Y===ar.Pack?void 0:D.targetPackId}))},oe=async Y=>{if(Y.preventDefault(),!(!t||!b)){if(i.title.length<gt.MIN_TITLE_LENGTH){w(`El ttulo debe tener al menos ${gt.MIN_TITLE_LENGTH} caracteres`);return}if(i.title.length>gt.MAX_TITLE_LENGTH){w(`El ttulo no puede exceder ${gt.MAX_TITLE_LENGTH} caracteres`);return}if(i.content.length<gt.MIN_CONTENT_LENGTH){w(`El contenido debe tener al menos ${gt.MIN_CONTENT_LENGTH} caracteres`);return}if(i.content.length>gt.MAX_CONTENT_LENGTH){w(`El contenido no puede exceder ${gt.MAX_CONTENT_LENGTH} caracteres`);return}if(i.type!==ar.Pack&&!i.targetPackId){w("Debes seleccionar un pack para preguntas y retos");return}g(!0),w(null);try{const D=await Bb(t.uid,i.title,i.content);if(!D.isValid){w(D.error||"Contenido no vlido"),g(!1);return}await gO(i,t.uid,t.displayName||"Usuario annimo"),typeof e=="function"?e():s()}catch(D){w(D.message||"Error al enviar la sugerencia")}finally{g(!1)}}},me=Y=>{switch(Y){case ar.Pack:return"Pack nuevo";case ar.Question:return"Pregunta";case ar.Dare:return"Reto";default:return Y}},he=()=>{switch(i.type){case ar.Pack:return"Describe tu idea para un nuevo pack: temtica, tipo de preguntas/retos, etc.";case ar.Question:return"Escribe tu pregunta aqu...";case ar.Dare:return"Describe el reto que propones...";default:return"Describe tu sugerencia..."}};return t?y.jsx("div",{className:"suggestion-form-overlay",children:y.jsxs("div",{className:"suggestion-form",children:[y.jsxs("div",{className:"suggestion-form-header",children:[y.jsxs("div",{children:[y.jsx("h2",{children:"Enviar Sugerencia"}),y.jsxs("p",{className:"accepted-count",children:["Sugerencias aprobadas: ",y.jsx("strong",{children:I})]})]}),y.jsx("button",{className:"close-button",onClick:s,children:""})]}),y.jsxs("form",{onSubmit:oe,children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Tipo de sugerencia:"}),y.jsx("div",{className:"type-selector",children:Object.values(ar).map(Y=>y.jsx("button",{type:"button",className:`type-button ${i.type===Y?"active":""}`,onClick:()=>ae(Y),children:me(Y)},Y))})]}),i.type!==ar.Pack&&y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"targetPack",children:"Pack de destino:"}),y.jsxs("select",{id:"targetPack",value:i.targetPackId||"",onChange:Y=>o(D=>({...D,targetPackId:Y.target.value||void 0})),required:!0,children:[y.jsx("option",{value:"",children:"Selecciona un pack"}),c.map(Y=>y.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"title",children:"Ttulo:"}),y.jsx("input",{type:"text",id:"title",value:i.title,onChange:Y=>o(D=>({...D,title:Y.target.value})),placeholder:`Ttulo de tu ${me(i.type).toLowerCase()}`,maxLength:gt.MAX_TITLE_LENGTH,required:!0}),y.jsxs("small",{children:[i.title.length,"/",gt.MAX_TITLE_LENGTH," caracteres"]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"content",children:"Descripcin:"}),y.jsx("textarea",{id:"content",value:i.content,onChange:Y=>o(D=>({...D,content:Y.target.value})),placeholder:he(),maxLength:gt.MAX_CONTENT_LENGTH,rows:6,required:!0}),y.jsxs("small",{children:[i.content.length,"/",gt.MAX_CONTENT_LENGTH," caracteres"]})]}),_&&y.jsx("div",{className:"error-message",children:_}),y.jsxs("div",{className:"form-actions",children:[y.jsx("button",{type:"button",className:"cancel-button",onClick:s,children:"Cancelar"}),y.jsx("button",{type:"submit",className:"submit-button",disabled:m||!b,children:m?"Enviando...":"Enviar Sugerencia"})]})]}),y.jsxs("div",{className:"suggestion-info",children:[y.jsx("h4",{children:"Informacin importante:"}),y.jsxs("ul",{children:[y.jsxs("li",{children:["Mximo ",gt.MAX_SUGGESTIONS_PER_DAY," sugerencias por da"]}),y.jsxs("li",{children:["Mximo ",gt.MAX_SUGGESTIONS_PER_WEEK," sugerencias por semana"]}),y.jsx("li",{children:"No podrs editar ni eliminar tu sugerencia una vez enviada"}),y.jsx("li",{children:"Recibirs notificaciones sobre el estado de tu sugerencia"})]})]})]})}):y.jsx("div",{className:"suggestion-form-overlay",children:y.jsxs("div",{className:"suggestion-form",children:[y.jsxs("div",{className:"suggestion-form-header",children:[y.jsx("h2",{children:"Iniciar sesin requerido"}),y.jsx("button",{className:"close-button",onClick:s,children:""})]}),y.jsx("p",{children:"Debes iniciar sesin para enviar sugerencias."}),y.jsx("button",{className:"cancel-button",onClick:s,children:"Cerrar"})]})})},vO="incidents",EO=async s=>{try{return(await Bc(nt(De,vO),{...s,timestamp:Xe.fromDate(s.timestamp)})).id}catch(e){throw console.error("Error al reportar incidencia:",e),new Error("No se pudo reportar la incidencia")}},Qb=({onClose:s})=>{const[e,t]=$.useState(""),[i,o]=$.useState(!1),[c,h]=$.useState(!1),{user:m}=Li(),g=async _=>{if(_.preventDefault(),!!e.trim()){o(!0);try{await EO({userId:(m==null?void 0:m.uid)||"anonymous",userEmail:(m==null?void 0:m.email)||"Usuario annimo",description:e.trim(),timestamp:new Date,status:"pending"}),h(!0)}catch(w){console.error("Error al reportar incidencia:",w),alert("Error al enviar el reporte. Por favor, intntalo de nuevo.")}finally{o(!1)}}};return c?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[y.jsx("h2",{className:"text-xl font-bold mb-4 text-green-600",children:"Gracias!"}),y.jsx("p",{className:"text-gray-700 mb-6",children:"Muchas gracias por reportar la incidencia. El equipo de desarrollo la revisar y se pondr con ello."}),y.jsx(Ne,{onClick:s,className:"w-full bg-blue-500 hover:bg-blue-600 text-white",children:"Cerrar"})]})}):y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[y.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900",children:"Reportar Incidencia"}),y.jsxs("form",{onSubmit:g,children:[y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-black mb-2",children:"Describe la incidencia:"}),y.jsx("textarea",{id:"description",value:e,onChange:_=>t(_.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 placeholder-gray-500",rows:4,placeholder:"Describe el problema que has encontrado...",required:!0,disabled:i})]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx(Ne,{type:"button",onClick:s,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white",disabled:i,children:"Cancelar"}),y.jsx(Ne,{type:"submit",className:"flex-1 bg-red-500 hover:bg-red-600 text-white",disabled:i||!e.trim(),children:i?"Enviando...":"Reportar"})]})]})]})})},wO=({onBack:s})=>{const{user:e}=Li(),[t,i]=$.useState(null),[o,c]=$.useState(""),[h,m]=$.useState(null),[g,_]=$.useState(!1),[w,b]=$.useState(!1),[A,I]=$.useState(!0),[L,G]=$.useState(""),[B,ie]=$.useState(""),[ae,oe]=$.useState(0),[me,he]=$.useState(!1),[Y,D]=$.useState(!1),[x,R]=$.useState(null),[M,P]=$.useState([]);$.useEffect(()=>{V()},[e]);const V=async()=>{if(e!=null&&e.uid){I(!0);try{const[X,ye,O,ne]=await Promise.all([dO(e.uid),qb(e.uid),_O(e.uid),Fb(e.uid)]);i(X),oe(ye),R(O),P(ne)}catch(X){console.error("Error loading user data:",X),G("Error al cargar datos del usuario")}finally{I(!1)}}},C=async X=>{if(!X.trim()){m(null);return}if(!(e!=null&&e.uid)){m({isValid:!1,message:"Error de autenticacin"});return}_(!0);try{const ye=await zb(X,e.uid);m({isValid:ye.isValid,message:ye.isValid?`Cdigo vlido de ${ye.referrerName}`:ye.error||"Cdigo no vlido"})}catch{m({isValid:!1,message:"Error al validar cdigo"})}finally{_(!1)}},Ae=X=>{c(X.toUpperCase()),X.trim().length>=6?C(X):m(null)},be=async()=>{if(!(!(e!=null&&e.uid)||!o||!(h!=null&&h.isValid))){b(!0),G(""),ie("");try{await uO(o,e.uid)?(ie("Cdigo de referido aplicado exitosamente!"),c(""),m(null),await V()):G("Error al procesar el cdigo de referido")}catch{G("Error al procesar el cdigo de referido")}finally{b(!1)}}},Q=async()=>{if(t!=null&&t.referralCode)try{await navigator.clipboard.writeText(t.referralCode),ie("Cdigo copiado al portapapeles!"),setTimeout(()=>ie(""),3e3)}catch{G("Error al copiar el cdigo")}},re=async()=>{try{await Rb()}catch{G("Error al cerrar sesin")}};return A?y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:y.jsx(Pn,{className:"w-full max-w-2xl p-8",children:y.jsxs("div",{className:"text-center text-white",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),y.jsx("p",{children:"Cargando perfil..."})]})})}):y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:[y.jsxs(Pn,{className:"w-full max-w-2xl p-8 space-y-6",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h1",{className:"text-3xl font-bold text-white",children:"Mi Perfil"}),y.jsx(Ne,{onClick:s,className:"bg-white/20 hover:bg-white/30 text-white",children:"Volver"})]}),L&&y.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:L}),B&&y.jsx("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:B}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h2",{className:"text-xl font-semibold text-white",children:"Informacin Personal"}),y.jsx(Ne,{onClick:re,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2",children:"Cerrar Sesin"})]}),y.jsxs("div",{className:"space-y-2 text-white/80",children:[y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Email:"})," ",e==null?void 0:e.email]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Nombre:"})," ",(e==null?void 0:e.displayName)||"No especificado"]})]})]}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mi Cdigo de Referido"}),y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx("div",{className:"flex-1",children:y.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Tu cdigo:"}),y.jsx("p",{className:"text-2xl font-bold text-white tracking-wider",children:(t==null?void 0:t.referralCode)||"Cargando..."})]})}),y.jsx(Ne,{onClick:Q,className:"bg-blue-600 hover:bg-blue-700",disabled:!(t!=null&&t.referralCode),children:"Copiar"})]}),y.jsx("p",{className:"text-white/60 text-sm mt-2",children:"Comparte este cdigo con tus amigos para ganar referidos"})]}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mis Estadsticas"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[y.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-3xl font-bold text-white",children:(t==null?void 0:t.referralCount)||0}),y.jsx("p",{className:"text-white/60 text-sm",children:"Total de referidos"})]}),y.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-3xl font-bold text-green-400",children:ae}),y.jsx("p",{className:"text-white/60 text-sm",children:"Sugerencias aceptadas"})]})]}),(t==null?void 0:t.referredUsers)&&t.referredUsers.length>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Usuarios Referidos"}),y.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.referredUsers.map((X,ye)=>y.jsxs("div",{className:"bg-white/10 rounded p-3 flex justify-between items-center",children:[y.jsx("span",{className:"text-white",children:X.name}),y.jsx("span",{className:"text-white/60 text-sm",children:X.joinedAt.toLocaleDateString()})]},X.id))})]})]}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Contribuir con Sugerencias"}),y.jsx("p",{className:"text-white/60 text-sm mb-4",children:"Tienes ideas para nuevos packs, preguntas o retos? Comprtelas con nosotros!"}),y.jsx(Ne,{onClick:()=>he(!0),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:" Recomendar Pack/Pregunta/Reto"})]}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Reportar Problema"}),y.jsx("p",{className:"text-white/60 text-sm mb-4",children:"Encontraste un error o problema en la aplicacin? Reprtalo para que podamos solucionarlo."}),y.jsx(Ne,{onClick:()=>D(!0),className:"w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:" Reportar Incidencia"})]}),!(t!=null&&t.usedReferralCode)&&y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Usar Cdigo de Referido"}),y.jsx("p",{className:"text-white/60 text-sm mb-4",children:"Tienes un cdigo de referido? salo aqu para ayudar a un amigo."}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("input",{type:"text",value:o,onChange:X=>Ae(X.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${h===null?"border-white/20 focus:ring-white/50":h.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ingresa el cdigo de referido",maxLength:8}),g&&y.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando cdigo..."}),h&&y.jsx("p",{className:`text-sm mt-1 ${h.isValid?"text-green-400":"text-red-400"}`,children:h.message})]}),y.jsx(Ne,{onClick:be,disabled:!(h!=null&&h.isValid)||w,className:"w-full bg-green-600 hover:bg-green-700",children:w?"Procesando...":"Usar Cdigo"})]})]}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mis Sugerencias"}),x&&y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[y.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-2xl font-bold text-white",children:x.total}),y.jsx("p",{className:"text-white/60 text-sm",children:"Total"})]}),y.jsxs("div",{className:"bg-yellow-500/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-2xl font-bold text-yellow-300",children:x.pending}),y.jsx("p",{className:"text-white/60 text-sm",children:"Pendientes"})]}),y.jsxs("div",{className:"bg-green-500/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-2xl font-bold text-green-300",children:x.approved}),y.jsx("p",{className:"text-white/60 text-sm",children:"Aprobadas"})]}),y.jsxs("div",{className:"bg-red-500/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-2xl font-bold text-red-300",children:x.rejected}),y.jsx("p",{className:"text-white/60 text-sm",children:"Rechazadas"})]})]}),M.length>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Sugerencias Recientes"}),y.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:M.slice(0,5).map(X=>y.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[y.jsxs("div",{className:"flex justify-between items-start mb-2",children:[y.jsx("h4",{className:"font-medium text-white truncate flex-1 mr-2",children:X.title}),y.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${X.status==="pending"?"bg-yellow-500/20 text-yellow-300":X.status==="approved"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:X.status==="pending"?"Pendiente":X.status==="approved"?"Aprobada":"Rechazada"})]}),y.jsx("p",{className:"text-white/60 text-sm line-clamp-2",children:X.content}),y.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-white/40",children:[y.jsx("span",{children:X.type==="question"?"Pregunta":"Reto"}),y.jsx("span",{children:X.createdAt.toLocaleDateString()})]})]},X.id))}),M.length>5&&y.jsxs("p",{className:"text-white/60 text-sm mt-3 text-center",children:["Y ",M.length-5," sugerencias ms..."]})]}),M.length===0&&x&&y.jsxs("div",{className:"text-center py-8",children:[y.jsx("p",{className:"text-white/60",children:"An no has realizado ninguna sugerencia"}),y.jsx("p",{className:"text-white/40 text-sm mt-1",children:"Comparte tus ideas para mejorar el juego!"})]})]}),(t==null?void 0:t.usedReferralCode)&&y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Cdigo de Referido Usado"}),y.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[y.jsx("p",{className:"text-white/60 text-sm",children:"Ya has usado el cdigo:"}),y.jsx("p",{className:"text-xl font-bold text-white tracking-wider",children:t.usedReferralCode})]})]})]}),me&&y.jsx(Gb,{isOpen:me,onClose:()=>he(!1)}),Y&&y.jsx(Qb,{onClose:()=>D(!1)})]})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bO=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),jE=s=>{const e=bO(s);return e.charAt(0).toUpperCase()+e.slice(1)},Kb=(...s)=>s.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),SO=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=$.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:h,...m},g)=>$.createElement("svg",{ref:g,...AO,width:e,height:e,stroke:s,strokeWidth:i?Number(t)*24/Number(e):t,className:Kb("lucide",o),...!c&&!SO(m)&&{"aria-hidden":"true"},...m},[...h.map(([_,w])=>$.createElement(_,w)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=(s,e)=>{const t=$.forwardRef(({className:i,...o},c)=>$.createElement(xO,{ref:c,iconNode:e,className:Kb(`lucide-${TO(jE(s))}`,`lucide-${s}`,i),...o}));return t.displayName=jE(s),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],CO=RO("x",IO);class NO{constructor(){this.config=null,this.listeners=[],this.hasShownThisSession=!1,this.defaultConfig={enabled:!1,title:"Bienvenido a Verdad o Reto!",subtitle:"Disfruta de los mejores desafos",modules:[],showOnce:!1,showOnAppStart:!0,backgroundColor:"#1F2937",textColor:"#FFFFFF",version:"1.0.0",lastModified:Date.now()},this.config={...this.defaultConfig},console.log("Configuracin predeterminada establecida:",JSON.stringify(this.config)),this.loadConfig()}async loadConfig(){try{const e=Wt(De,"config","welcomeScreen");NC(e,t=>{t.exists()?(console.log("Configuracin de Firestore:",t.data()),this.config={...this.defaultConfig,...t.data()}):(console.log("No existe configuracin en Firestore, usando predeterminada"),this.config=this.defaultConfig),console.log("Configuracin final:",JSON.stringify(this.config)),this.notifyListeners()})}catch(e){console.error("Error loading welcome screen config:",e),this.config=this.defaultConfig,this.notifyListeners()}}getConfig(){return this.config}async saveConfig(e){try{const t={...e,version:this.generateNewVersion(),lastModified:Date.now()},i=Wt(De,"config","welcomeScreen");await xc(i,t)}catch(t){throw console.error("Error saving welcome screen config:",t),t}}generateNewVersion(){return`v${Date.now()}`}shouldShowWelcomeScreen(){return this.config?(console.log("Config de ventana de bienvenida:",JSON.stringify(this.config)),console.log("Enabled:",this.config.enabled),console.log("ShowOnAppStart:",this.config.showOnAppStart),this.config.enabled&&this.config.showOnAppStart?(console.log("La ventana de bienvenida debe mostrarse"),!0):this.config.showOnce&&this.hasShownThisSession?(console.log("La ventana ya se mostr en esta sesin"),!1):this.hasUserDisabledForCurrentVersion()?(console.log("El usuario ha desactivado la ventana para esta versin"),!1):(console.log("Valor final de showOnAppStart:",this.config.showOnAppStart),this.config.showOnAppStart)):(console.log("No hay configuracin de ventana de bienvenida"),!1)}markAsShown(){this.hasShownThisSession=!0}markAsSeen(){this.markAsShown()}markAsDisabled(){this.markAsDontShowAgain()}resetSessionFlag(){this.hasShownThisSession=!1}getStorageKey(){return"welcomeScreen_dontShowAgain"}hasUserDisabledForCurrentVersion(){var i;if(!((i=this.config)!=null&&i.version))return!1;const e=this.getStorageKey();return localStorage.getItem(e)===this.config.version}markAsDontShowAgain(){var t;if(!((t=this.config)!=null&&t.version))return;const e=this.getStorageKey();localStorage.setItem(e,this.config.version)}clearDontShowAgainPreference(){const e=this.getStorageKey();localStorage.removeItem(e)}canShowAgain(){return!this.hasUserDisabledForCurrentVersion()}addListener(e){this.listeners.push(e)}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}notifyListeners(){this.listeners.forEach(e=>e(this.config))}addModule(e){if(!this.config)return;const t=this.config.modules.findIndex(i=>i.id===e.id);t>=0?this.config.modules[t]=e:this.config.modules.push(e),this.config.modules.sort((i,o)=>i.order-o.order)}removeModule(e){this.config&&(this.config.modules=this.config.modules.filter(t=>t.id!==e))}getEnabledModules(){if(!this.config)return[];if(this.config.modules&&!Array.isArray(this.config.modules)){console.log("Modules es un objeto, convirtiendo a array");const e=[];return this.config.modules.referralProgress&&this.config.modules.referralProgress.enabled&&e.push({id:"referral_progress",type:"referral_progress",enabled:!0,order:1,config:this.config.modules.referralProgress}),this.config.modules.customMessages&&this.config.modules.customMessages.enabled&&e.push({id:"custom_message",type:"custom_message",enabled:!0,order:2,config:this.config.modules.customMessages}),this.config.modules.shopButton&&this.config.modules.shopButton.enabled&&e.push({id:"shop_button",type:"shop_button",enabled:!0,order:3,config:this.config.modules.shopButton}),e.sort((t,i)=>t.order-i.order)}return this.config.modules.filter(e=>e.enabled).sort((e,t)=>e.order-t.order)}createReferralProgressModule(e,t=1){return{id:"referral_progress",type:"referral_progress",enabled:!0,order:t,config:e}}createCustomMessageModule(e,t=2){return{id:`custom_message_${Date.now()}`,type:"custom_message",enabled:!0,order:t,config:e}}createShopButtonModule(e,t=3){return{id:"shop_button",type:"shop_button",enabled:!0,order:t,config:e}}async getUserReferralInfo(e){try{const t=Wt(De,"users",e),i=await Wr(t);if(i.exists()){const o=i.data();return{current:o.referralCount||0,target:o.referralTarget||5}}}catch(t){console.error("Error getting user referral info:",t)}return{current:0,target:5}}generateReferralLink(e,t){const i=/Android/i.test(navigator.userAgent),o=/iPhone|iPad|iPod/i.test(navigator.userAgent);return i?`https://play.google.com/store/apps/details?id=com.verdadreto.app&referrer=ref%3D${t}%26user%3D${e}`:o?`https://apps.apple.com/app/verdad-o-reto/id123456789?ref=${t}&user=${e}`:`${window.location.origin}?ref=${t}&user=${e}`}async shareApp(e,t,i){const o=this.generateReferralLink(e,t),c=`nete a Verdad o Reto! Usa mi cdigo de referido: ${t}`,h=i||c;if(navigator.share)try{await navigator.share({title:"Verdad o Reto",text:h,url:o})}catch(m){console.log("Error sharing:",m),this.fallbackShare(h,o)}else this.fallbackShare(h,o)}fallbackShare(e,t){const i=`${e}

${t}`;if(navigator.clipboard)navigator.clipboard.writeText(i).then(()=>{alert("Enlace copiado al portapapeles!")});else{const o=document.createElement("textarea");o.value=i,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),alert("Enlace copiado al portapapeles!")}}}const _r=new NO,DO=(s,e,t)=>{let i="",o="info";switch(s.messageType){case"plain":i=s.plainMessage||"",o="info";break;case"referral":const h=t.filter(m=>m.isReferralUnlockable&&m.requiredReferrals>e.current).sort((m,g)=>m.requiredReferrals-g.requiredReferrals)[0];if(h){const m=h.requiredReferrals-e.current;i=(s.referralMessage||"").replace(/\{remaining\}/g,m.toString()).replace(/\{pack\}/g,h.name)}else i=(s.referralMessage||"").replace(/\{remaining\}/g,"0").replace(/\{pack\}/g,"todos los packs");o="warning";break;case"shop":i=s.shopMessage||"",o="success";break;default:i=s.plainMessage||"",o="info"}return{message:i,type:o}},OO=({config:s,onContinue:e,onSkip:t,onShare:i,onGoToShop:o,onDontShowAgain:c})=>{var oe;const{user:h}=Li(),[m,g]=$.useState(s||null),[_,w]=$.useState({current:0,target:5}),[b,A]=$.useState(!1),[I,L]=$.useState(!1),[G,B]=$.useState([]);$.useEffect(()=>{if(s)g(s);else{const me=he=>{g(he)};return _r.addListener(me),g(_r.getConfig()),()=>{_r.removeListener(me)}}},[s]),$.useEffect(()=>{h!=null&&h.uid&&_r.getUserReferralInfo(h.uid).then(w)},[h]),$.useEffect(()=>{(async()=>{try{const he=await bh();B(he)}catch(he){console.error("Error loading available packs:",he)}})()},[]);const ie=()=>{I&&c&&c(),e()};if(!m||!m.enabled)return null;const ae=_r.getEnabledModules();return y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[y.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:t}),y.jsxs("div",{className:"relative w-full max-w-md mx-auto rounded-2xl shadow-2xl overflow-hidden",style:{backgroundColor:m.backgroundColor,color:m.textColor},children:[y.jsxs("div",{className:"relative p-6 text-center",children:[y.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-white hover:bg-opacity-10 transition-colors",children:y.jsx(CO,{size:20})}),y.jsx("h1",{className:"text-2xl font-bold mb-2",children:m.title})]}),y.jsxs("div",{className:"px-6 pb-6 space-y-4",children:[ae.find(me=>me.type==="custom_message")&&y.jsx("div",{className:"bg-white bg-opacity-10 rounded-xl p-4 text-center",children:y.jsx("p",{className:"text-lg",style:{color:m.textColor},children:DO((oe=ae.find(me=>me.type==="custom_message"))==null?void 0:oe.config,_,G).message})}),y.jsx("div",{className:"mt-6",children:y.jsx(Ne,{onClick:ie,className:"w-full",children:"JUGAR YA"})})]})]})]})},PO=()=>{const{user:s}=Li(),[e,t]=$.useState(ke.Welcome),[i,o]=$.useState(!0),[c,h]=$.useState(null);console.log("Estado inicial del juego:",e),$.useEffect(()=>{s||t(ke.Setup),wi.setCurrentUser(s),s&&(wi.trackSessionStart(),s.isAnonymous||wi.trackUserLogin())},[s]),$.useEffect(()=>{const ce=async()=>{try{_r.addListener(ze=>{console.log("Welcome screen config loaded:",ze),h(ze);const vn=_r.shouldShowWelcomeScreen();console.log("Should show welcome screen:",vn),o(vn),t(vn?ke.Welcome:ke.Setup)})}catch(ze){console.error("Error loading welcome screen config:",ze),o(!1),t(ke.Setup)}},fe=async()=>{try{await Hr.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),console.log("AdMob inicializado correctamente en App.tsx")}catch(ze){console.error("Error inicializando AdMob:",ze)}};ce(),fe()},[]);const[m,g]=$.useState([]),[_,w]=$.useState([]),[b,A]=$.useState([]),[I,L]=$.useState(0),[G,B]=$.useState({totalRounds:5}),[ie,ae]=$.useState({currentRound:1,playersCompletedInRound:0}),[oe,me]=$.useState({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),[he,Y]=$.useState({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),[D,x]=$.useState({isLoading:!0,error:null}),[R,M]=$.useState([]),[P,V]=$.useState(()=>{try{const ce=window.localStorage.getItem("purchasedPacks");return ce?JSON.parse(ce):[]}catch(ce){return console.error("Error reading from localStorage",ce),[]}}),[C,Ae]=$.useState(!1),[be,Q]=$.useState(null),[re,X]=$.useState(!1),[ye,O]=$.useState(null),[ne,ue]=$.useState([]),[se,ve]=$.useState([]),[Pe,xe]=$.useState([]),[Dt,$e]=$.useState({changesCount:0,isAdLoading:!1,isAdPlaying:!1,lastChangedItem:void 0}),[Jt,lr]=$.useState({totalChanges:0,adsWatched:0,lastChangeDate:void 0}),[cr,br]=$.useState(!1),[es,Sr]=$.useState(!1),[Ra,$o]=$.useState(!1),yn=$.useCallback(async ce=>{try{const fe=await hO(ce);ve(fe)}catch(fe){console.error("Error loading referral unlocked packs:",fe),ve([])}},[]),Ia=$.useCallback(async ce=>{try{const fe=await fO(ce);xe(fe)}catch(fe){console.error("Error loading suggestion unlocked packs:",fe),xe([])}},[]);$.useEffect(()=>{(async()=>{try{const fe=await bh();M(fe)}catch(fe){console.error("Error loading available packs:",fe)}})()},[]),$.useEffect(()=>{try{window.localStorage.setItem("purchasedPacks",JSON.stringify(P))}catch(ce){console.error("Error writing to localStorage",ce)}},[P,se,Pe]);const ur=$.useCallback(async()=>{x({isLoading:!0,error:null});try{const ce=["base",...P.filter(ze=>ze!=="base"),...se.filter(ze=>ze!=="base"&&!P.includes(ze)),...Pe.filter(ze=>ze!=="base"&&!P.includes(ze)&&!se.includes(ze))],fe=await ME(ce);w(fe.questions),A(fe.dares),x({isLoading:!1,error:null})}catch(ce){console.error("Error loading game data:",ce),x({isLoading:!1,error:ce instanceof Error?ce.message:"Error desconocido"})}},[P,Pe]);$.useEffect(()=>{ur()},[ur]);const zs=()=>{if(m.length<2){alert("Se necesitan al menos 2 jugadores para empezar.");return}t(ke.PackSelection)},ts=()=>{t(ke.RoundConfiguration)},Wo=()=>{t(ke.Setup)},qs=()=>{t(ke.Shop)},Bs=()=>{t(ke.Login)},Ca=async ce=>{var fe,ze;if(t(ke.Setup),((fe=ce==null?void 0:ce.metadata)==null?void 0:fe.creationTime)===((ze=ce==null?void 0:ce.metadata)==null?void 0:ze.lastSignInTime)&&wi.trackUserRegister(),ce!=null&&ce.uid)try{await Db(ce.uid),yn(ce.uid),Ia(ce.uid)}catch(vn){console.error("Error durante la migracin del usuario:",vn),yn(ce.uid),Ia(ce.uid)}},ft=$.useCallback(async()=>{const ce={...Jt,totalChanges:Jt.totalChanges+1,lastChangeDate:new Date};if($e(fe=>({...fe,changesCount:fe.changesCount+1})),lr(ce),s&&!s.isAnonymous)try{await kE(s.uid,ce)}catch(fe){console.error("Error saving question change stats:",fe)}},[Jt,s]),Ze=$.useCallback(async()=>new Promise((ce,fe)=>{if(!Ct.isEnabled()){$e(Zt=>({...Zt,changesCount:0})),ce();return}$e(Zt=>({...Zt,isAdLoading:!0}));const ze=Ct.getAdLoadingTime(),vn=Ct.getAdPlayingTime();setTimeout(()=>{$e(Zt=>({...Zt,isAdLoading:!1,isAdPlaying:!0})),setTimeout(()=>{$e(En=>({...En,isAdPlaying:!1,changesCount:0}));const Zt={...Jt,adsWatched:Jt.adsWatched+1};if(lr(Zt),s&&!s.isAnonymous)try{kE(s.uid,Zt).catch(En=>{console.error("Error saving ad watched stats:",En)})}catch(En){console.error("Error saving ad watched stats:",En)}ce()},vn)},ze)}),[Jt,s]),_n=()=>{t(ke.Setup)},Ht=ce=>{const fe=R.find(ze=>ze.id===ce);fe&&(O(fe),X(!0))},Na=()=>{X(!1),O(null)},Jo=ce=>{ue(fe=>fe.includes(ce)?fe:[...fe,ce])},ns=async()=>{if(ye)try{const ce=await lO(ye.id);if(ce.questions.length===0&&ce.dares.length===0){alert("Este pack no tiene contenido demo disponible.");return}Ae(!0),Q(ye.id),w(ce.questions),A(ce.dares),await cO(ye.id),t(ke.RoundConfiguration)}catch(ce){console.error("Error starting demo:",ce),alert("Error al cargar el demo. Intntalo de nuevo.")}},rs=async()=>{X(!1),O(null);try{const ce=["base",...P.filter(ze=>ze!=="base"),...se.filter(ze=>ze!=="base"&&!P.includes(ze)),...Pe.filter(ze=>ze!=="base"&&!P.includes(ze)&&!se.includes(ze))],fe=await ME(ce);w(fe.questions),A(fe.dares),Ae(!1),Q(null),t(ke.RoundConfiguration)}catch(ce){console.error("Error starting game without demo:",ce),alert("Error al cargar el juego. Intntalo de nuevo.")}},ss=ce=>{B(ce),me({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:new Date,gameEndTime:null,roundStats:[]}),Y({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),ae({currentRound:1,playersCompletedInRound:0}),t(ke.Game)},Mn=()=>{const ce=(I+1)%m.length;if(L(ce),ce===0){const fe=ie.currentRound+1;fe>G.totalRounds?Fs():(ae({currentRound:fe,playersCompletedInRound:0}),Y({roundNumber:fe,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}))}else ae(fe=>({...fe,playersCompletedInRound:fe.playersCompletedInRound+1}))},Hs=()=>{const ce={...he,roundEndTime:new Date};me(fe=>({...fe,totalRounds:fe.totalRounds+1,roundStats:[...fe.roundStats,ce]})),t(ke.RoundEnd)},is=()=>{const ce=ie.currentRound+1;ae({currentRound:ce,playersCompletedInRound:0}),Y({roundNumber:ce,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),L(0),t(ke.Game)},Fs=()=>{me(ce=>({...ce,gameEndTime:new Date})),t(ke.GameEnd)},ji=()=>{const ce=m[I];Y(fe=>({...fe,questionsAsked:fe.questionsAsked+1,playersParticipated:fe.playersParticipated.includes(ce)?fe.playersParticipated:[...fe.playersParticipated,ce]})),me(fe=>({...fe,totalQuestions:fe.totalQuestions+1}))},Ui=()=>{const ce=m[I];Y(fe=>({...fe,daresCompleted:fe.daresCompleted+1,playersParticipated:fe.playersParticipated.includes(ce)?fe.playersParticipated:[...fe.playersParticipated,ce]})),me(fe=>({...fe,totalDares:fe.totalDares+1}))},Kn=$.useCallback(()=>{t(ke.Setup),L(0),B({totalRounds:5}),ae({currentRound:1,playersCompletedInRound:0}),me({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),Y({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),Ae(!1),Q(null),X(!1),O(null),ue([]),ur()},[ur]),dr=ce=>{P.includes(ce)||V([...P,ce])},hr=()=>P.includes("no-ads"),Yn=()=>{br(!1)},zi=()=>{_r.markAsSeen(),o(!1),t(ke.Setup)},Ar=()=>{_r.markAsSeen(),o(!1),t(ke.Setup)},Gs=()=>{_r.markAsDisabled(),o(!1),t(ke.Setup)},xr=()=>{navigator.share?navigator.share({title:"Verdad o Reto",text:"nete a la diversin con Verdad o Reto!",url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("Enlace copiado al portapapeles"))},Da=()=>{_r.markAsSeen(),o(!1),t(ke.Shop)},dt=()=>{console.log("Sugerencia enviada exitosamente"),br(!1)},At=()=>{Sr(!0)},wt=()=>{Sr(!1)},xn=()=>{t(ke.Setup)},qi=()=>{switch(e){case ke.Welcome:return y.jsx(OO,{config:c,onContinue:zi,onSkip:Ar,onDontShowAgain:Gs,onShare:xr,onGoToShop:Da});case ke.Setup:return y.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-900 bg-opacity-50 backdrop-blur-sm",children:y.jsxs("div",{className:"w-full max-w-md mx-auto animate-fade-in",children:[y.jsx("h1",{className:"text-5xl font-extrabold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Verdad o Reto"}),y.jsx("p",{className:"text-center text-gray-400 mb-8",children:"El juego para animar la fiesta"}),y.jsxs("div",{className:"space-y-6",children:[y.jsx(VA,{players:m,setPlayers:g}),D.isLoading&&y.jsx(Pn,{className:"text-center text-gray-400",children:y.jsx("p",{children:"Cargando datos desde Firebase..."})}),D.error&&y.jsxs(Pn,{className:"text-center text-red-400",children:[y.jsxs("p",{children:["Error de conexin: ",D.error]}),y.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Verifica tu configuracin de Firebase"}),y.jsx(Ne,{onClick:ur,className:"mt-4",variant:"secondary",children:"Reintentar"})]}),!D.isLoading&&!D.error&&y.jsxs("div",{className:"flex flex-col gap-4",children:[y.jsx(Ne,{onClick:zs,className:"w-full text-lg",disabled:m.length<2||_.length===0||b.length===0,children:"Empezar a Jugar"}),s&&!s.isAnonymous?y.jsx(Ne,{onClick:()=>t(ke.Profile),variant:"secondary",className:"w-full text-lg",children:"Mi Perfil"}):y.jsx(Ne,{onClick:Bs,variant:"secondary",className:"w-full text-lg",children:"Iniciar Sesin"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsxs(Ne,{onClick:()=>t(ke.Shop),variant:"secondary",className:`flex-[2] text-lg bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 
                                      hover:from-yellow-500 hover:via-yellow-600 hover:to-yellow-700 
                                      text-white font-semibold shadow-lg hover:shadow-xl 
                                      transform hover:scale-105 transition-all duration-200 
                                      flex items-center justify-center gap-2 rounded-2xl`,children:[y.jsx(OA,{className:"w-5 h-5"}),"Tienda de Paquetes"]}),y.jsx(Ne,{onClick:At,variant:"secondary",className:"flex-1 text-sm bg-red-600 hover:bg-red-700 text-white",children:"Reportar"})]})]})]})]})});case ke.Login:return y.jsx(mO,{onBack:_n,onSuccess:Ca});case ke.Profile:return y.jsx(wO,{onBack:xn});case ke.Shop:return y.jsx(rO,{availablePacks:R,purchasedPacks:P,onPurchase:dr,onBack:()=>t(ke.Setup),onGoToLogin:Bs});case ke.PackSelection:return y.jsxs(y.Fragment,{children:[y.jsx(sD,{availablePacks:R,purchasedPacks:P,adWatchedPacks:ne,referralUnlockedPacks:se,suggestionUnlockedPacks:Pe,onContinue:ts,onBack:Wo,onGoToShop:qs,onPlayDemo:Ht}),y.jsx(_D,{pack:ye,isOpen:re,onClose:Na,onStartDemo:ns,onAdWatched:Jo,hasNoAds:hr(),onStartDemoWithoutAd:rs})]});case ke.RoundConfiguration:return y.jsx(ED,{onSelectRounds:ce=>{ss({totalRounds:ce})},onBack:()=>t(ke.PackSelection),hasNoAds:hr()});case ke.Game:return y.jsx(vD,{players:m,currentPlayerIndex:I,onNextPlayer:Mn,onNewGame:Kn,questions:_,dares:b,roundConfig:G,gameProgress:ie,onRoundEnd:Hs,onQuestionAsked:ji,onDareCompleted:Ui,onQuestionChange:ft,onAdRequired:Ze,questionChangeState:Dt,hasNoAds:hr()});case ke.RoundEnd:return y.jsx(wD,{roundStats:he,currentRound:ie.currentRound,totalRounds:G.totalRounds,onContinue:is,onEndGame:Fs,hasNoAds:hr()});case ke.GameEnd:return y.jsx(TD,{gameStats:oe,players:m,onNewGame:Kn,onBackToMenu:()=>t(ke.Setup),hasNoAds:hr(),isDemoMode:C,demoPackId:be});default:return y.jsx("div",{children:"Error: Estado de juego desconocido."})}};return y.jsxs("main",{className:"relative min-h-screen bg-gray-900 overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-purple-900/30 via-transparent to-pink-900/30"}),y.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-96 h-96 bg-purple-600 rounded-full filter blur-3xl opacity-20 animate-blob"}),y.jsx("div",{className:"absolute bottom-[-10%] right-[5%] w-96 h-96 bg-pink-600 rounded-full filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),y.jsx("div",{className:"absolute top-[10%] right-[-15%] w-80 h-80 bg-cyan-600 rounded-full filter blur-3xl opacity-10 animate-blob animation-delay-4000"}),y.jsx("div",{className:"relative z-10",children:qi()}),y.jsx("style",{children:`
          .animate-blob {
            animation: blob 7s infinite;
          }
          .animation-delay-2000 {
            animation-delay: 2s;
          }
          .animation-delay-4000 {
            animation-delay: 4s;
          }
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
          }
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `}),cr&&y.jsx(Gb,{onClose:Yn,onSuccess:dt}),es&&y.jsx(Qb,{onClose:wt})]})},Yb=document.getElementById("root");if(!Yb)throw new Error("Could not find root element to mount to");const MO=NA.createRoot(Yb);MO.render(y.jsx(TA.StrictMode,{children:y.jsx(DD,{children:y.jsx(PO,{})})}));export{xE as A,wb as W};
