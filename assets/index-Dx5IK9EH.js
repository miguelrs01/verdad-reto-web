(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function tE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Jf={exports:{}},zl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function NA(){if(rv)return zl;rv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:u}}return zl.Fragment=e,zl.jsx=n,zl.jsxs=n,zl}var iv;function DA(){return iv||(iv=1,Jf.exports=NA()),Jf.exports}var E=DA(),em={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv;function OA(){if(sv)return Ne;sv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.iterator;function S(D){return D===null||typeof D!="object"?null:(D=A&&D[A]||D["@@iterator"],typeof D=="function"?D:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,Y={};function H(D,Z,ae){this.props=D,this.context=Z,this.refs=Y,this.updater=ae||U}H.prototype.isReactComponent={},H.prototype.setState=function(D,Z){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Z,"setState")},H.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function le(){}le.prototype=H.prototype;function ie(D,Z,ae){this.props=D,this.context=Z,this.refs=Y,this.updater=ae||U}var re=ie.prototype=new le;re.constructor=ie,k(re,H.prototype),re.isPureReactComponent=!0;var ge=Array.isArray,ue={H:null,A:null,T:null,S:null,V:null},xe=Object.prototype.hasOwnProperty;function I(D,Z,ae,ne,_e,De){return ae=De.ref,{$$typeof:i,type:D,key:Z,ref:ae!==void 0?ae:null,props:De}}function R(D,Z){return I(D.type,Z,void 0,void 0,void 0,D.props)}function C(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function O(D){var Z={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ae){return Z[ae]})}var V=/\/+/g;function P(D,Z){return typeof D=="object"&&D!==null&&D.key!=null?O(""+D.key):Z.toString(36)}function x(){}function Fe(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(x,x):(D.status="pending",D.then(function(Z){D.status==="pending"&&(D.status="fulfilled",D.value=Z)},function(Z){D.status==="pending"&&(D.status="rejected",D.reason=Z)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Ce(D,Z,ae,ne,_e){var De=typeof D;(De==="undefined"||De==="boolean")&&(D=null);var Te=!1;if(D===null)Te=!0;else switch(De){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(D.$$typeof){case i:case e:Te=!0;break;case T:return Te=D._init,Ce(Te(D._payload),Z,ae,ne,_e)}}if(Te)return _e=_e(D),Te=ne===""?"."+P(D,0):ne,ge(_e)?(ae="",Te!=null&&(ae=Te.replace(V,"$&/")+"/"),Ce(_e,Z,ae,"",function(Dn){return Dn})):_e!=null&&(C(_e)&&(_e=R(_e,ae+(_e.key==null||D&&D.key===_e.key?"":(""+_e.key).replace(V,"$&/")+"/")+Te)),Z.push(_e)),1;Te=0;var Tt=ne===""?".":ne+":";if(ge(D))for(var Ze=0;Ze<D.length;Ze++)ne=D[Ze],De=Tt+P(ne,Ze),Te+=Ce(ne,Z,ae,De,_e);else if(Ze=S(D),typeof Ze=="function")for(D=Ze.call(D),Ze=0;!(ne=D.next()).done;)ne=ne.value,De=Tt+P(ne,Ze++),Te+=Ce(ne,Z,ae,De,_e);else if(De==="object"){if(typeof D.then=="function")return Ce(Fe(D),Z,ae,ne,_e);throw Z=String(D),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Te}function Q(D,Z,ae){if(D==null)return D;var ne=[],_e=0;return Ce(D,ne,"","",function(De){return Z.call(ae,De,_e++)}),ne}function te(D){if(D._status===-1){var Z=D._result;Z=Z(),Z.then(function(ae){(D._status===0||D._status===-1)&&(D._status=1,D._result=ae)},function(ae){(D._status===0||D._status===-1)&&(D._status=2,D._result=ae)}),D._status===-1&&(D._status=0,D._result=Z)}if(D._status===1)return D._result.default;throw D._result}var ee=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function pe(){}return Ne.Children={map:Q,forEach:function(D,Z,ae){Q(D,function(){Z.apply(this,arguments)},ae)},count:function(D){var Z=0;return Q(D,function(){Z++}),Z},toArray:function(D){return Q(D,function(Z){return Z})||[]},only:function(D){if(!C(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ne.Component=H,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=ie,Ne.StrictMode=s,Ne.Suspense=p,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(D){return ue.H.useMemoCache(D)}},Ne.cache=function(D){return function(){return D.apply(null,arguments)}},Ne.cloneElement=function(D,Z,ae){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ne=k({},D.props),_e=D.key,De=void 0;if(Z!=null)for(Te in Z.ref!==void 0&&(De=void 0),Z.key!==void 0&&(_e=""+Z.key),Z)!xe.call(Z,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&Z.ref===void 0||(ne[Te]=Z[Te]);var Te=arguments.length-2;if(Te===1)ne.children=ae;else if(1<Te){for(var Tt=Array(Te),Ze=0;Ze<Te;Ze++)Tt[Ze]=arguments[Ze+2];ne.children=Tt}return I(D.type,_e,void 0,void 0,De,ne)},Ne.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},Ne.createElement=function(D,Z,ae){var ne,_e={},De=null;if(Z!=null)for(ne in Z.key!==void 0&&(De=""+Z.key),Z)xe.call(Z,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(_e[ne]=Z[ne]);var Te=arguments.length-2;if(Te===1)_e.children=ae;else if(1<Te){for(var Tt=Array(Te),Ze=0;Ze<Te;Ze++)Tt[Ze]=arguments[Ze+2];_e.children=Tt}if(D&&D.defaultProps)for(ne in Te=D.defaultProps,Te)_e[ne]===void 0&&(_e[ne]=Te[ne]);return I(D,De,void 0,void 0,null,_e)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(D){return{$$typeof:m,render:D}},Ne.isValidElement=C,Ne.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:te}},Ne.memo=function(D,Z){return{$$typeof:y,type:D,compare:Z===void 0?null:Z}},Ne.startTransition=function(D){var Z=ue.T,ae={};ue.T=ae;try{var ne=D(),_e=ue.S;_e!==null&&_e(ae,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(pe,ee)}catch(De){ee(De)}finally{ue.T=Z}},Ne.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},Ne.use=function(D){return ue.H.use(D)},Ne.useActionState=function(D,Z,ae){return ue.H.useActionState(D,Z,ae)},Ne.useCallback=function(D,Z){return ue.H.useCallback(D,Z)},Ne.useContext=function(D){return ue.H.useContext(D)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(D,Z){return ue.H.useDeferredValue(D,Z)},Ne.useEffect=function(D,Z,ae){var ne=ue.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(D,Z)},Ne.useId=function(){return ue.H.useId()},Ne.useImperativeHandle=function(D,Z,ae){return ue.H.useImperativeHandle(D,Z,ae)},Ne.useInsertionEffect=function(D,Z){return ue.H.useInsertionEffect(D,Z)},Ne.useLayoutEffect=function(D,Z){return ue.H.useLayoutEffect(D,Z)},Ne.useMemo=function(D,Z){return ue.H.useMemo(D,Z)},Ne.useOptimistic=function(D,Z){return ue.H.useOptimistic(D,Z)},Ne.useReducer=function(D,Z,ae){return ue.H.useReducer(D,Z,ae)},Ne.useRef=function(D){return ue.H.useRef(D)},Ne.useState=function(D){return ue.H.useState(D)},Ne.useSyncExternalStore=function(D,Z,ae){return ue.H.useSyncExternalStore(D,Z,ae)},Ne.useTransition=function(){return ue.H.useTransition()},Ne.version="19.1.1",Ne}var av;function Ym(){return av||(av=1,em.exports=OA()),em.exports}var oe=Ym();const PA=tE(oe);var tm={exports:{}},ql={},nm={exports:{}},rm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ov;function VA(){return ov||(ov=1,(function(i){function e(Q,te){var ee=Q.length;Q.push(te);e:for(;0<ee;){var pe=ee-1>>>1,D=Q[pe];if(0<o(D,te))Q[pe]=te,Q[ee]=D,ee=pe;else break e}}function n(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var te=Q[0],ee=Q.pop();if(ee!==te){Q[0]=ee;e:for(var pe=0,D=Q.length,Z=D>>>1;pe<Z;){var ae=2*(pe+1)-1,ne=Q[ae],_e=ae+1,De=Q[_e];if(0>o(ne,ee))_e<D&&0>o(De,ne)?(Q[pe]=De,Q[_e]=ee,pe=_e):(Q[pe]=ne,Q[ae]=ee,pe=ae);else if(_e<D&&0>o(De,ee))Q[pe]=De,Q[_e]=ee,pe=_e;else break e}}return te}function o(Q,te){var ee=Q.sortIndex-te.sortIndex;return ee!==0?ee:Q.id-te.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var p=[],y=[],T=1,A=null,S=3,U=!1,k=!1,Y=!1,H=!1,le=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function ge(Q){for(var te=n(y);te!==null;){if(te.callback===null)s(y);else if(te.startTime<=Q)s(y),te.sortIndex=te.expirationTime,e(p,te);else break;te=n(y)}}function ue(Q){if(Y=!1,ge(Q),!k)if(n(p)!==null)k=!0,xe||(xe=!0,P());else{var te=n(y);te!==null&&Ce(ue,te.startTime-Q)}}var xe=!1,I=-1,R=5,C=-1;function O(){return H?!0:!(i.unstable_now()-C<R)}function V(){if(H=!1,xe){var Q=i.unstable_now();C=Q;var te=!0;try{e:{k=!1,Y&&(Y=!1,ie(I),I=-1),U=!0;var ee=S;try{t:{for(ge(Q),A=n(p);A!==null&&!(A.expirationTime>Q&&O());){var pe=A.callback;if(typeof pe=="function"){A.callback=null,S=A.priorityLevel;var D=pe(A.expirationTime<=Q);if(Q=i.unstable_now(),typeof D=="function"){A.callback=D,ge(Q),te=!0;break t}A===n(p)&&s(p),ge(Q)}else s(p);A=n(p)}if(A!==null)te=!0;else{var Z=n(y);Z!==null&&Ce(ue,Z.startTime-Q),te=!1}}break e}finally{A=null,S=ee,U=!1}te=void 0}}finally{te?P():xe=!1}}}var P;if(typeof re=="function")P=function(){re(V)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Fe=x.port2;x.port1.onmessage=V,P=function(){Fe.postMessage(null)}}else P=function(){le(V,0)};function Ce(Q,te){I=le(function(){Q(i.unstable_now())},te)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Q){Q.callback=null},i.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var te=3;break;default:te=S}var ee=S;S=te;try{return Q()}finally{S=ee}},i.unstable_requestPaint=function(){H=!0},i.unstable_runWithPriority=function(Q,te){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ee=S;S=Q;try{return te()}finally{S=ee}},i.unstable_scheduleCallback=function(Q,te,ee){var pe=i.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?pe+ee:pe):ee=pe,Q){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ee+D,Q={id:T++,callback:te,priorityLevel:Q,startTime:ee,expirationTime:D,sortIndex:-1},ee>pe?(Q.sortIndex=ee,e(y,Q),n(p)===null&&Q===n(y)&&(Y?(ie(I),I=-1):Y=!0,Ce(ue,ee-pe))):(Q.sortIndex=D,e(p,Q),k||U||(k=!0,xe||(xe=!0,P()))),Q},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(Q){var te=S;return function(){var ee=S;S=te;try{return Q.apply(this,arguments)}finally{S=ee}}}})(rm)),rm}var lv;function MA(){return lv||(lv=1,nm.exports=VA()),nm.exports}var im={exports:{}},Jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function kA(){if(uv)return Jt;uv=1;var i=Ym();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:p,containerInfo:y,implementation:T}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Jt.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,T)},Jt.flushSync=function(p){var y=d.T,T=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=y,s.p=T,s.d.f()}},Jt.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Jt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Jt.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var T=y.as,A=m(T,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,U=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:A,integrity:S,fetchPriority:U}):T==="script"&&s.d.X(p,{crossOrigin:A,integrity:S,fetchPriority:U,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Jt.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=m(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Jt.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,A=m(T,y.crossOrigin);s.d.L(p,T,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Jt.preloadModule=function(p,y){if(typeof p=="string")if(y){var T=m(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Jt.requestFormReset=function(p){s.d.r(p)},Jt.unstable_batchedUpdates=function(p,y){return p(y)},Jt.useFormState=function(p,y,T){return d.H.useFormState(p,y,T)},Jt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Jt.version="19.1.1",Jt}var cv;function LA(){if(cv)return im.exports;cv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),im.exports=kA(),im.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv;function UA(){if(hv)return ql;hv=1;var i=MA(),e=Ym(),n=LA();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),t;if(f===l)return m(h),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var v=!1,w=h.child;w;){if(w===a){v=!0,a=h,l=f;break}if(w===l){v=!0,l=h,a=f;break}w=w.sibling}if(!v){for(w=f.child;w;){if(w===a){v=!0,a=f,l=h;break}if(w===l){v=!0,l=f,a=h;break}w=w.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function y(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=y(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),le=Symbol.for("react.provider"),ie=Symbol.for("react.consumer"),re=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var x=Symbol.for("react.client.reference");function Fe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===x?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case k:return"Fragment";case H:return"Profiler";case Y:return"StrictMode";case ue:return"Suspense";case xe:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case U:return"Portal";case re:return(t.displayName||"Context")+".Provider";case ie:return(t._context.displayName||"Context")+".Consumer";case ge:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return r=t.displayName||null,r!==null?r:Fe(t.type)||"Memo";case R:r=t._payload,t=t._init;try{return Fe(t(r))}catch{}}return null}var Ce=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},pe=[],D=-1;function Z(t){return{current:t}}function ae(t){0>D||(t.current=pe[D],pe[D]=null,D--)}function ne(t,r){D++,pe[D]=t.current,t.current=r}var _e=Z(null),De=Z(null),Te=Z(null),Tt=Z(null);function Ze(t,r){switch(ne(Te,r),ne(De,t),ne(_e,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?D_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=D_(r),t=O_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ae(_e),ne(_e,t)}function Dn(){ae(_e),ae(De),ae(Te)}function ar(t){t.memoizedState!==null&&ne(Tt,t);var r=_e.current,a=O_(r,t.type);r!==a&&(ne(De,t),ne(_e,a))}function On(t){De.current===t&&(ae(_e),ae(De)),Tt.current===t&&(ae(Tt),Ml._currentValue=ee)}var Mr=Object.prototype.hasOwnProperty,kr=i.unstable_scheduleCallback,Lr=i.unstable_cancelCallback,_s=i.unstable_shouldYield,la=i.unstable_requestPaint,fn=i.unstable_now,Po=i.unstable_getCurrentPriorityLevel,vs=i.unstable_ImmediatePriority,Ti=i.unstable_UserBlockingPriority,Ur=i.unstable_NormalPriority,Vo=i.unstable_LowPriority,wi=i.unstable_IdlePriority,bi=i.log,ua=i.unstable_setDisableYieldValue,lt=null,Ge=null;function ln(t){if(typeof bi=="function"&&ua(t),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(lt,t)}catch{}}var kt=Math.clz32?Math.clz32:me,ca=Math.log,de=Math.LN2;function me(t){return t>>>=0,t===0?32:31-(ca(t)/de|0)|0}var gt=256,En=4194304;function Yn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ha(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~f,l!==0?h=Yn(l):(v&=w,v!==0?h=Yn(v):a||(a=w&~t,a!==0&&(h=Yn(a))))):(w=l&~f,w!==0?h=Yn(w):v!==0?h=Yn(v):a||(a=l&~t,a!==0&&(h=Yn(a)))),h===0?0:r!==0&&r!==h&&(r&f)===0&&(f=h&-h,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:h}function Es(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Mo(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ko(){var t=gt;return gt<<=1,(gt&4194048)===0&&(gt=256),t}function Lo(){var t=En;return En<<=1,(En&62914560)===0&&(En=4194304),t}function jr(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function zr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Uo(t,r,a,l,h,f){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,N=t.expirationTimes,q=t.hiddenUpdates;for(a=v&~a;0<a;){var K=31-kt(a),W=1<<K;w[K]=0,N[K]=-1;var B=q[K];if(B!==null)for(q[K]=null,K=0;K<B.length;K++){var F=B[K];F!==null&&(F.lane&=-536870913)}a&=~W}l!==0&&or(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(v&~r))}function or(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-kt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function jo(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-kt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function Ai(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function da(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Si(){var t=te.p;return t!==0?t:(t=window.event,t===void 0?32:W_(t.type))}function Ru(t,r){var a=te.p;try{return te.p=t,r()}finally{te.p=a}}var ut=Math.random().toString(36).slice(2),Nt="__reactFiber$"+ut,wt="__reactProps$"+ut,Pn="__reactContainer$"+ut,zo="__reactEvents$"+ut,td="__reactListeners$"+ut,Ri="__reactHandles$"+ut,xu="__reactResources$"+ut,Ts="__reactMarker$"+ut;function xi(t){delete t[Nt],delete t[wt],delete t[zo],delete t[td],delete t[Ri]}function qr(t){var r=t[Nt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Pn]||a[Nt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=k_(t);t!==null;){if(a=t[Nt])return a;t=k_(t)}return r}t=a,a=t.parentNode}return null}function lr(t){if(t=t[Nt]||t[Pn]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function ur(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function un(t){var r=t[xu];return r||(r=t[xu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function pt(t){t[Ts]=!0}var qo=new Set,fa={};function Xn(t,r){Br(t,r),Br(t+"Capture",r)}function Br(t,r){for(fa[t]=r,t=0;t<r.length;t++)qo.add(r[t])}var Iu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cu={},ws={};function Nu(t){return Mr.call(ws,t)?!0:Mr.call(Cu,t)?!1:Iu.test(t)?ws[t]=!0:(Cu[t]=!0,!1)}function Ii(t,r,a){if(Nu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function cr(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Ft(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var bs,Du;function Hr(t){if(bs===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);bs=r&&r[1]||"",Du=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bs+t+Du}var ma=!1;function ga(t,r){if(!t||ma)return"";ma=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(F){var B=F}Reflect.construct(t,[],W)}else{try{W.call()}catch(F){B=F}t.call(W.prototype)}}else{try{throw Error()}catch(F){B=F}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(F){if(F&&B&&typeof F.stack=="string")return[F.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),v=f[0],w=f[1];if(v&&w){var N=v.split(`
`),q=w.split(`
`);for(h=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(l===N.length||h===q.length)for(l=N.length-1,h=q.length-1;1<=l&&0<=h&&N[l]!==q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(N[l]!==q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||N[l]!==q[h]){var K=`
`+N[l].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=l&&0<=h);break}}}finally{ma=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Hr(a):""}function Bo(t){switch(t.tag){case 26:case 27:case 5:return Hr(t.type);case 16:return Hr("Lazy");case 13:return Hr("Suspense");case 19:return Hr("SuspenseList");case 0:case 15:return ga(t.type,!1);case 11:return ga(t.type.render,!1);case 1:return ga(t.type,!0);case 31:return Hr("Activity");default:return""}}function pa(t){try{var r="";do r+=Bo(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function cn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ho(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function nd(t){var r=Ho(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,f.call(this,v)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function ya(t){t._valueTracker||(t._valueTracker=nd(t))}function Fo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Ho(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function As(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var rd=/[\n"\\]/g;function bt(t){return t.replace(rd,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Tn(t,r,a,l,h,f,v,w){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),r!=null?v==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+cn(r)):t.value!==""+cn(r)&&(t.value=""+cn(r)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),r!=null?Ci(t,v,cn(r)):a!=null?Ci(t,v,cn(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+cn(w):t.removeAttribute("name")}function Ss(t,r,a,l,h,f,v,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null))return;a=a!=null?""+cn(a):"",r=r!=null?""+cn(r):a,w||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function Ci(t,r,a){r==="number"&&As(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Fr(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+cn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Je(t,r,a){if(r!=null&&(r=""+cn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+cn(a):""}function Rs(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Ce(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=cn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Vn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var xs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ou(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||xs.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Go(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&Ou(t,h,l)}else for(var f in r)r.hasOwnProperty(f)&&Ou(t,f,r[f])}function Qo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var id=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _a(t){return sd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Gr=null;function Mn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qr=null,Kr=null;function Ko(t){var r=lr(t);if(r&&(t=r.stateNode)){var a=t[wt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Tn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+bt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[wt]||null;if(!h)throw Error(s(90));Tn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Fo(l)}break e;case"textarea":Je(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Fr(t,!!a.multiple,r,!1)}}}var hr=!1;function Pu(t,r,a){if(hr)return t(r,a);hr=!0;try{var l=t(r);return l}finally{if(hr=!1,(Qr!==null||Kr!==null)&&(Rc(),Qr&&(r=Qr,t=Kr,Kr=Qr=null,Ko(r),t)))for(r=0;r<t.length;r++)Ko(t[r])}}function Is(t,r){var a=t.stateNode;if(a===null)return null;var l=a[wt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kn=!1;if($n)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){kn=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{kn=!1}var dr=null,Ni=null,Yr=null;function Yo(){if(Yr)return Yr;var t,r=Ni,a=r.length,l,h="value"in dr?dr.value:dr.textContent,f=h.length;for(t=0;t<a&&r[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&r[a-l]===h[f-l];l++);return Yr=h.slice(t,1<l?1-l:void 0)}function fr(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function mr(){return!0}function Xo(){return!1}function Lt(t){function r(a,l,h,f,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?mr:Xo,this.isPropagationStopped=Xo,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=mr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=mr)},persist:function(){},isPersistent:mr}),r}var Ye={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},va=Lt(Ye),Ns=T({},Ye,{view:0,detail:0}),Vu=Lt(Ns),Ea,Ta,gr,Ds=T({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gr&&(gr&&t.type==="mousemove"?(Ea=t.screenX-gr.screenX,Ta=t.screenY-gr.screenY):Ta=Ea=0,gr=t),Ea)},movementY:function(t){return"movementY"in t?t.movementY:Ta}}),Ln=Lt(Ds),Mu=T({},Ds,{dataTransfer:0}),ad=Lt(Mu),Os=T({},Ns,{relatedTarget:0}),wa=Lt(Os),$o=T({},Ye,{animationName:0,elapsedTime:0,pseudoElement:0}),ba=Lt($o),ku=T({},Ye,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Aa=Lt(ku),od=T({},Ye,{data:0}),Wo=Lt(od),Ps={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zo(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Uu[t])?!!r[t]:!1}function Vs(){return Zo}var ju=T({},Ns,{key:function(t){if(t.key){var r=Ps[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=fr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vs,charCode:function(t){return t.type==="keypress"?fr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Sa=Lt(ju),zu=T({},Ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jo=Lt(zu),Xr=T({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vs}),qu=Lt(Xr),Bu=T({},Ye,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hu=Lt(Bu),Fu=T({},Ds,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ra=Lt(Fu),hn=T({},Ye,{newState:0,oldState:0}),Gu=Lt(hn),Qu=[9,13,27,32],pr=$n&&"CompositionEvent"in window,c=null;$n&&"documentMode"in document&&(c=document.documentMode);var g=$n&&"TextEvent"in window&&!c,_=$n&&(!pr||c&&8<c&&11>=c),b=" ",j=!1;function G(t,r){switch(t){case"keyup":return Qu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function se(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var je=!1;function Dt(t,r){switch(t){case"compositionend":return se(r);case"keypress":return r.which!==32?null:(j=!0,b);case"textInput":return t=r.data,t===b&&j?null:t;default:return null}}function ze(t,r){if(je)return t==="compositionend"||!pr&&G(t,r)?(t=Yo(),Yr=Ni=dr=null,je=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _&&r.locale!=="ko"?null:r.data;default:return null}}var Ut={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ot(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Ut[t.type]:r==="textarea"}function $r(t,r,a,l){Qr?Kr?Kr.push(l):Kr=[l]:Qr=l,r=Oc(r,"onChange"),0<r.length&&(a=new va("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Gt=null,yr=null;function el(t){R_(t,0)}function Ku(t){var r=ur(t);if(Fo(r))return t}function Kg(t,r){if(t==="change")return r}var Yg=!1;if($n){var ld;if($n){var ud="oninput"in document;if(!ud){var Xg=document.createElement("div");Xg.setAttribute("oninput","return;"),ud=typeof Xg.oninput=="function"}ld=ud}else ld=!1;Yg=ld&&(!document.documentMode||9<document.documentMode)}function $g(){Gt&&(Gt.detachEvent("onpropertychange",Wg),yr=Gt=null)}function Wg(t){if(t.propertyName==="value"&&Ku(yr)){var r=[];$r(r,yr,t,Mn(t)),Pu(el,r)}}function ab(t,r,a){t==="focusin"?($g(),Gt=r,yr=a,Gt.attachEvent("onpropertychange",Wg)):t==="focusout"&&$g()}function ob(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ku(yr)}function lb(t,r){if(t==="click")return Ku(r)}function ub(t,r){if(t==="input"||t==="change")return Ku(r)}function cb(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var wn=typeof Object.is=="function"?Object.is:cb;function tl(t,r){if(wn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Mr.call(r,h)||!wn(t[h],r[h]))return!1}return!0}function Zg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jg(t,r){var a=Zg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Zg(a)}}function ep(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?ep(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function tp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=As(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=As(t.document)}return r}function cd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var hb=$n&&"documentMode"in document&&11>=document.documentMode,xa=null,hd=null,nl=null,dd=!1;function np(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;dd||xa==null||xa!==As(l)||(l=xa,"selectionStart"in l&&cd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),nl&&tl(nl,l)||(nl=l,l=Oc(hd,"onSelect"),0<l.length&&(r=new va("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=xa)))}function Ms(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Ia={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},fd={},rp={};$n&&(rp=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function ks(t){if(fd[t])return fd[t];if(!Ia[t])return t;var r=Ia[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in rp)return fd[t]=r[a];return t}var ip=ks("animationend"),sp=ks("animationiteration"),ap=ks("animationstart"),db=ks("transitionrun"),fb=ks("transitionstart"),mb=ks("transitioncancel"),op=ks("transitionend"),lp=new Map,md="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");md.push("scrollEnd");function Wn(t,r){lp.set(t,r),Xn(r,[t])}var up=new WeakMap;function Un(t,r){if(typeof t=="object"&&t!==null){var a=up.get(t);return a!==void 0?a:(r={value:t,source:r,stack:pa(r)},up.set(t,r),r)}return{value:t,source:r,stack:pa(r)}}var jn=[],Ca=0,gd=0;function Yu(){for(var t=Ca,r=gd=Ca=0;r<t;){var a=jn[r];jn[r++]=null;var l=jn[r];jn[r++]=null;var h=jn[r];jn[r++]=null;var f=jn[r];if(jn[r++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}f!==0&&cp(a,h,f)}}function Xu(t,r,a,l){jn[Ca++]=t,jn[Ca++]=r,jn[Ca++]=a,jn[Ca++]=l,gd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function pd(t,r,a,l){return Xu(t,r,a,l),$u(t)}function Na(t,r){return Xu(t,null,null,r),$u(t)}function cp(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&r!==null&&(h=31-kt(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),f):null}function $u(t){if(50<xl)throw xl=0,bf=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Da={};function gb(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(t,r,a,l){return new gb(t,r,a,l)}function yd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wr(t,r){var a=t.alternate;return a===null?(a=bn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function hp(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Wu(t,r,a,l,h,f){var v=0;if(l=t,typeof t=="function")yd(t)&&(v=1);else if(typeof t=="string")v=yA(t,a,_e.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=bn(31,a,r,h),t.elementType=C,t.lanes=f,t;case k:return Ls(a.children,h,f,r);case Y:v=8,h|=24;break;case H:return t=bn(12,a,r,h|2),t.elementType=H,t.lanes=f,t;case ue:return t=bn(13,a,r,h),t.elementType=ue,t.lanes=f,t;case xe:return t=bn(19,a,r,h),t.elementType=xe,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case le:case re:v=10;break e;case ie:v=9;break e;case ge:v=11;break e;case I:v=14;break e;case R:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=bn(v,a,r,h),r.elementType=t,r.type=l,r.lanes=f,r}function Ls(t,r,a,l){return t=bn(7,t,l,r),t.lanes=a,t}function _d(t,r,a){return t=bn(6,t,null,r),t.lanes=a,t}function vd(t,r,a){return r=bn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Oa=[],Pa=0,Zu=null,Ju=0,zn=[],qn=0,Us=null,Zr=1,Jr="";function js(t,r){Oa[Pa++]=Ju,Oa[Pa++]=Zu,Zu=t,Ju=r}function dp(t,r,a){zn[qn++]=Zr,zn[qn++]=Jr,zn[qn++]=Us,Us=t;var l=Zr;t=Jr;var h=32-kt(l)-1;l&=~(1<<h),a+=1;var f=32-kt(r)+h;if(30<f){var v=h-h%5;f=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Zr=1<<32-kt(r)+h|a<<h|l,Jr=f+t}else Zr=1<<f|a<<h|l,Jr=t}function Ed(t){t.return!==null&&(js(t,1),dp(t,1,0))}function Td(t){for(;t===Zu;)Zu=Oa[--Pa],Oa[Pa]=null,Ju=Oa[--Pa],Oa[Pa]=null;for(;t===Us;)Us=zn[--qn],zn[qn]=null,Jr=zn[--qn],zn[qn]=null,Zr=zn[--qn],zn[qn]=null}var dn=null,ft=null,Ke=!1,zs=null,_r=!1,wd=Error(s(519));function qs(t){var r=Error(s(418,""));throw sl(Un(r,t)),wd}function fp(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Nt]=t,r[wt]=l,a){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(a=0;a<Cl.length;a++)Me(Cl[a],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":Me("invalid",r),Ss(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ya(r);break;case"select":Me("invalid",r);break;case"textarea":Me("invalid",r),Rs(r,l.value,l.defaultValue,l.children),ya(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||N_(r.textContent,a)?(l.popover!=null&&(Me("beforetoggle",r),Me("toggle",r)),l.onScroll!=null&&Me("scroll",r),l.onScrollEnd!=null&&Me("scrollend",r),l.onClick!=null&&(r.onclick=Pc),r=!0):r=!1,r||qs(t)}function mp(t){for(dn=t.return;dn;)switch(dn.tag){case 5:case 13:_r=!1;return;case 27:case 3:_r=!0;return;default:dn=dn.return}}function rl(t){if(t!==dn)return!1;if(!Ke)return mp(t),Ke=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||jf(t.type,t.memoizedProps)),a=!a),a&&ft&&qs(t),mp(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){ft=Jn(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}ft=null}}else r===27?(r=ft,Qi(t.type)?(t=Hf,Hf=null,ft=t):ft=r):ft=dn?Jn(t.stateNode.nextSibling):null;return!0}function il(){ft=dn=null,Ke=!1}function gp(){var t=zs;return t!==null&&(pn===null?pn=t:pn.push.apply(pn,t),zs=null),t}function sl(t){zs===null?zs=[t]:zs.push(t)}var bd=Z(null),Bs=null,ei=null;function Di(t,r,a){ne(bd,r._currentValue),r._currentValue=a}function ti(t){t._currentValue=bd.current,ae(bd)}function Ad(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Sd(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=h;for(var N=0;N<r.length;N++)if(w.context===r[N]){f.lanes|=a,w=f.alternate,w!==null&&(w.lanes|=a),Ad(f.return,a,t),l||(v=null);break e}f=w.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),Ad(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function al(t,r,a,l){t=null;for(var h=r,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var w=h.type;wn(h.pendingProps.value,v.value)||(t!==null?t.push(w):t=[w])}}else if(h===Tt.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Ml):t=[Ml])}h=h.return}t!==null&&Sd(r,t,a,l),r.flags|=262144}function ec(t){for(t=t.firstContext;t!==null;){if(!wn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Hs(t){Bs=t,ei=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Zt(t){return pp(Bs,t)}function tc(t,r){return Bs===null&&Hs(t),pp(t,r)}function pp(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ei===null){if(t===null)throw Error(s(308));ei=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else ei=ei.next=r;return a}var pb=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},yb=i.unstable_scheduleCallback,_b=i.unstable_NormalPriority,Pt={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rd(){return{controller:new pb,data:new Map,refCount:0}}function ol(t){t.refCount--,t.refCount===0&&yb(_b,function(){t.controller.abort()})}var ll=null,xd=0,Va=0,Ma=null;function vb(t,r){if(ll===null){var a=ll=[];xd=0,Va=Nf(),Ma={status:"pending",value:void 0,then:function(l){a.push(l)}}}return xd++,r.then(yp,yp),r}function yp(){if(--xd===0&&ll!==null){Ma!==null&&(Ma.status="fulfilled");var t=ll;ll=null,Va=0,Ma=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Eb(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var _p=Q.S;Q.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&vb(t,r),_p!==null&&_p(t,r)};var Fs=Z(null);function Id(){var t=Fs.current;return t!==null?t:st.pooledCache}function nc(t,r){r===null?ne(Fs,Fs.current):ne(Fs,r.pool)}function vp(){var t=Id();return t===null?null:{parent:Pt._currentValue,pool:t}}var ul=Error(s(460)),Ep=Error(s(474)),rc=Error(s(542)),Cd={then:function(){}};function Tp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ic(){}function wp(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(ic,ic),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Ap(t),t;default:if(typeof r.status=="string")r.then(ic,ic);else{if(t=st,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Ap(t),t}throw cl=r,ul}}var cl=null;function bp(){if(cl===null)throw Error(s(459));var t=cl;return cl=null,t}function Ap(t){if(t===ul||t===rc)throw Error(s(483))}var Oi=!1;function Nd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Pi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Vi(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,($e&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=$u(t),cp(t,null,a),r}return Xu(t,l,r,a),$u(t)}function hl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,jo(t,a)}}function Od(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=r:f=f.next=r}else h=f=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Pd=!1;function dl(){if(Pd){var t=Ma;if(t!==null)throw t}}function fl(t,r,a,l){Pd=!1;var h=t.updateQueue;Oi=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var N=w,q=N.next;N.next=null,v===null?f=q:v.next=q,v=N;var K=t.alternate;K!==null&&(K=K.updateQueue,w=K.lastBaseUpdate,w!==v&&(w===null?K.firstBaseUpdate=q:w.next=q,K.lastBaseUpdate=N))}if(f!==null){var W=h.baseState;v=0,K=q=N=null,w=f;do{var B=w.lane&-536870913,F=B!==w.lane;if(F?(qe&B)===B:(l&B)===B){B!==0&&B===Va&&(Pd=!0),K!==null&&(K=K.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Se=t,Ee=w;B=r;var nt=a;switch(Ee.tag){case 1:if(Se=Ee.payload,typeof Se=="function"){W=Se.call(nt,W,B);break e}W=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ee.payload,B=typeof Se=="function"?Se.call(nt,W,B):Se,B==null)break e;W=T({},W,B);break e;case 2:Oi=!0}}B=w.callback,B!==null&&(t.flags|=64,F&&(t.flags|=8192),F=h.callbacks,F===null?h.callbacks=[B]:F.push(B))}else F={lane:B,tag:w.tag,payload:w.payload,callback:w.callback,next:null},K===null?(q=K=F,N=W):K=K.next=F,v|=B;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;F=w,w=F.next,F.next=null,h.lastBaseUpdate=F,h.shared.pending=null}}while(!0);K===null&&(N=W),h.baseState=N,h.firstBaseUpdate=q,h.lastBaseUpdate=K,f===null&&(h.shared.lanes=0),Bi|=v,t.lanes=v,t.memoizedState=W}}function Sp(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Rp(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Sp(a[t],r)}var ka=Z(null),sc=Z(0);function xp(t,r){t=li,ne(sc,t),ne(ka,r),li=t|r.baseLanes}function Vd(){ne(sc,li),ne(ka,ka.current)}function Md(){li=sc.current,ae(ka),ae(sc)}var Mi=0,Oe=null,et=null,At=null,ac=!1,La=!1,Gs=!1,oc=0,ml=0,Ua=null,Tb=0;function yt(){throw Error(s(321))}function kd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!wn(t[a],r[a]))return!1;return!0}function Ld(t,r,a,l,h,f){return Mi=f,Oe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Q.H=t===null||t.memoizedState===null?cy:hy,Gs=!1,f=a(l,h),Gs=!1,La&&(f=Cp(r,a,l,h)),Ip(t),f}function Ip(t){Q.H=fc;var r=et!==null&&et.next!==null;if(Mi=0,At=et=Oe=null,ac=!1,ml=0,Ua=null,r)throw Error(s(300));t===null||jt||(t=t.dependencies,t!==null&&ec(t)&&(jt=!0))}function Cp(t,r,a,l){Oe=t;var h=0;do{if(La&&(Ua=null),ml=0,La=!1,25<=h)throw Error(s(301));if(h+=1,At=et=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=Ib,f=r(a,l)}while(La);return f}function wb(){var t=Q.H,r=t.useState()[0];return r=typeof r.then=="function"?gl(r):r,t=t.useState()[0],(et!==null?et.memoizedState:null)!==t&&(Oe.flags|=1024),r}function Ud(){var t=oc!==0;return oc=0,t}function jd(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function zd(t){if(ac){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}ac=!1}Mi=0,At=et=Oe=null,La=!1,ml=oc=0,Ua=null}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Oe.memoizedState=At=t:At=At.next=t,At}function St(){if(et===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var r=At===null?Oe.memoizedState:At.next;if(r!==null)At=r,et=t;else{if(t===null)throw Oe.alternate===null?Error(s(467)):Error(s(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},At===null?Oe.memoizedState=At=t:At=At.next=t}return At}function qd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gl(t){var r=ml;return ml+=1,Ua===null&&(Ua=[]),t=wp(Ua,t,r),r=Oe,(At===null?r.memoizedState:At.next)===null&&(r=r.alternate,Q.H=r===null||r.memoizedState===null?cy:hy),t}function lc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gl(t);if(t.$$typeof===re)return Zt(t)}throw Error(s(438,String(t)))}function Bd(t){var r=null,a=Oe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=qd(),Oe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=O;return r.index++,a}function ni(t,r){return typeof r=="function"?r(t):r}function uc(t){var r=St();return Hd(r,et,t)}function Hd(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}r.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{r=h.next;var w=v=null,N=null,q=r,K=!1;do{var W=q.lane&-536870913;if(W!==q.lane?(qe&W)===W:(Mi&W)===W){var B=q.revertLane;if(B===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),W===Va&&(K=!0);else if((Mi&B)===B){q=q.next,B===Va&&(K=!0);continue}else W={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(w=N=W,v=f):N=N.next=W,Oe.lanes|=B,Bi|=B;W=q.action,Gs&&a(f,W),f=q.hasEagerState?q.eagerState:a(f,W)}else B={lane:W,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(w=N=B,v=f):N=N.next=B,Oe.lanes|=W,Bi|=W;q=q.next}while(q!==null&&q!==r);if(N===null?v=f:N.next=w,!wn(f,t.memoizedState)&&(jt=!0,K&&(a=Ma,a!==null)))throw a;t.memoizedState=f,t.baseState=v,t.baseQueue=N,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Fd(t){var r=St(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=r.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=t(f,v.action),v=v.next;while(v!==h);wn(f,r.memoizedState)||(jt=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function Np(t,r,a){var l=Oe,h=St(),f=Ke;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var v=!wn((et||h).memoizedState,a);v&&(h.memoizedState=a,jt=!0),h=h.queue;var w=Pp.bind(null,l,h,t);if(pl(2048,8,w,[t]),h.getSnapshot!==r||v||At!==null&&At.memoizedState.tag&1){if(l.flags|=2048,ja(9,cc(),Op.bind(null,l,h,a,r),null),st===null)throw Error(s(349));f||(Mi&124)!==0||Dp(l,r,a)}return a}function Dp(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Oe.updateQueue,r===null?(r=qd(),Oe.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Op(t,r,a,l){r.value=a,r.getSnapshot=l,Vp(r)&&Mp(t)}function Pp(t,r,a){return a(function(){Vp(r)&&Mp(t)})}function Vp(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!wn(t,a)}catch{return!0}}function Mp(t){var r=Na(t,2);r!==null&&In(r,t,2)}function Gd(t){var r=mn();if(typeof t=="function"){var a=t;if(t=a(),Gs){ln(!0);try{a()}finally{ln(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:t},r}function kp(t,r,a,l){return t.baseState=a,Hd(t,et,typeof l=="function"?l:ni)}function bb(t,r,a,l,h){if(dc(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};Q.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,Lp(r,f)):(f.next=a.next,r.pending=a.next=f)}}function Lp(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var f=Q.T,v={};Q.T=v;try{var w=a(h,l),N=Q.S;N!==null&&N(v,w),Up(t,r,w)}catch(q){Qd(t,r,q)}finally{Q.T=f}}else try{f=a(h,l),Up(t,r,f)}catch(q){Qd(t,r,q)}}function Up(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){jp(t,r,l)},function(l){return Qd(t,r,l)}):jp(t,r,a)}function jp(t,r,a){r.status="fulfilled",r.value=a,zp(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Lp(t,a)))}function Qd(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,zp(r),r=r.next;while(r!==l)}t.action=null}function zp(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function qp(t,r){return r}function Bp(t,r){if(Ke){var a=st.formState;if(a!==null){e:{var l=Oe;if(Ke){if(ft){t:{for(var h=ft,f=_r;h.nodeType!==8;){if(!f){h=null;break t}if(h=Jn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){ft=Jn(h.nextSibling),l=h.data==="F!";break e}}qs(l)}l=!1}l&&(r=a[0])}}return a=mn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qp,lastRenderedState:r},a.queue=l,a=oy.bind(null,Oe,l),l.dispatch=a,l=Gd(!1),f=Wd.bind(null,Oe,!1,l.queue),l=mn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=bb.bind(null,Oe,h,f,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function Hp(t){var r=St();return Fp(r,et,t)}function Fp(t,r,a){if(r=Hd(t,r,qp)[0],t=uc(ni)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=gl(r)}catch(v){throw v===ul?rc:v}else l=r;r=St();var h=r.queue,f=h.dispatch;return a!==r.memoizedState&&(Oe.flags|=2048,ja(9,cc(),Ab.bind(null,h,a),null)),[l,f,t]}function Ab(t,r){t.action=r}function Gp(t){var r=St(),a=et;if(a!==null)return Fp(r,a,t);St(),r=r.memoizedState,a=St();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function ja(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Oe.updateQueue,r===null&&(r=qd(),Oe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function cc(){return{destroy:void 0,resource:void 0}}function Qp(){return St().memoizedState}function hc(t,r,a,l){var h=mn();l=l===void 0?null:l,Oe.flags|=t,h.memoizedState=ja(1|r,cc(),a,l)}function pl(t,r,a,l){var h=St();l=l===void 0?null:l;var f=h.memoizedState.inst;et!==null&&l!==null&&kd(l,et.memoizedState.deps)?h.memoizedState=ja(r,f,a,l):(Oe.flags|=t,h.memoizedState=ja(1|r,f,a,l))}function Kp(t,r){hc(8390656,8,t,r)}function Yp(t,r){pl(2048,8,t,r)}function Xp(t,r){return pl(4,2,t,r)}function $p(t,r){return pl(4,4,t,r)}function Wp(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Zp(t,r,a){a=a!=null?a.concat([t]):null,pl(4,4,Wp.bind(null,r,t),a)}function Kd(){}function Jp(t,r){var a=St();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&kd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function ey(t,r){var a=St();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&kd(r,l[1]))return l[0];if(l=t(),Gs){ln(!0);try{t()}finally{ln(!1)}}return a.memoizedState=[l,r],l}function Yd(t,r,a){return a===void 0||(Mi&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=r_(),Oe.lanes|=t,Bi|=t,a)}function ty(t,r,a,l){return wn(a,r)?a:ka.current!==null?(t=Yd(t,a,l),wn(t,r)||(jt=!0),t):(Mi&42)===0?(jt=!0,t.memoizedState=a):(t=r_(),Oe.lanes|=t,Bi|=t,r)}function ny(t,r,a,l,h){var f=te.p;te.p=f!==0&&8>f?f:8;var v=Q.T,w={};Q.T=w,Wd(t,!1,r,a);try{var N=h(),q=Q.S;if(q!==null&&q(w,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var K=Eb(N,l);yl(t,r,K,xn(t))}else yl(t,r,l,xn(t))}catch(W){yl(t,r,{then:function(){},status:"rejected",reason:W},xn())}finally{te.p=f,Q.T=v}}function Sb(){}function Xd(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=ry(t).queue;ny(t,h,r,ee,a===null?Sb:function(){return iy(t),a(l)})}function ry(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:ee},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function iy(t){var r=ry(t).next.queue;yl(t,r,{},xn())}function $d(){return Zt(Ml)}function sy(){return St().memoizedState}function ay(){return St().memoizedState}function Rb(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=xn();t=Pi(a);var l=Vi(r,t,a);l!==null&&(In(l,r,a),hl(l,r,a)),r={cache:Rd()},t.payload=r;return}r=r.return}}function xb(t,r,a){var l=xn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},dc(t)?ly(r,a):(a=pd(t,r,a,l),a!==null&&(In(a,t,l),uy(a,r,l)))}function oy(t,r,a){var l=xn();yl(t,r,a,l)}function yl(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(dc(t))ly(r,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var v=r.lastRenderedState,w=f(v,a);if(h.hasEagerState=!0,h.eagerState=w,wn(w,v))return Xu(t,r,h,0),st===null&&Yu(),!1}catch{}finally{}if(a=pd(t,r,h,l),a!==null)return In(a,t,l),uy(a,r,l),!0}return!1}function Wd(t,r,a,l){if(l={lane:2,revertLane:Nf(),action:l,hasEagerState:!1,eagerState:null,next:null},dc(t)){if(r)throw Error(s(479))}else r=pd(t,a,l,2),r!==null&&In(r,t,2)}function dc(t){var r=t.alternate;return t===Oe||r!==null&&r===Oe}function ly(t,r){La=ac=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function uy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,jo(t,a)}}var fc={readContext:Zt,use:lc,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt},cy={readContext:Zt,use:lc,useCallback:function(t,r){return mn().memoizedState=[t,r===void 0?null:r],t},useContext:Zt,useEffect:Kp,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,hc(4194308,4,Wp.bind(null,r,t),a)},useLayoutEffect:function(t,r){return hc(4194308,4,t,r)},useInsertionEffect:function(t,r){hc(4,2,t,r)},useMemo:function(t,r){var a=mn();r=r===void 0?null:r;var l=t();if(Gs){ln(!0);try{t()}finally{ln(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=mn();if(a!==void 0){var h=a(r);if(Gs){ln(!0);try{a(r)}finally{ln(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=xb.bind(null,Oe,t),[l.memoizedState,t]},useRef:function(t){var r=mn();return t={current:t},r.memoizedState=t},useState:function(t){t=Gd(t);var r=t.queue,a=oy.bind(null,Oe,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Kd,useDeferredValue:function(t,r){var a=mn();return Yd(a,t,r)},useTransition:function(){var t=Gd(!1);return t=ny.bind(null,Oe,t.queue,!0,!1),mn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Oe,h=mn();if(Ke){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),st===null)throw Error(s(349));(qe&124)!==0||Dp(l,r,a)}h.memoizedState=a;var f={value:a,getSnapshot:r};return h.queue=f,Kp(Pp.bind(null,l,f,t),[t]),l.flags|=2048,ja(9,cc(),Op.bind(null,l,f,a,r),null),a},useId:function(){var t=mn(),r=st.identifierPrefix;if(Ke){var a=Jr,l=Zr;a=(l&~(1<<32-kt(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=oc++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=Tb++,r="«"+r+"r"+a.toString(32)+"»";return t.memoizedState=r},useHostTransitionStatus:$d,useFormState:Bp,useActionState:Bp,useOptimistic:function(t){var r=mn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Wd.bind(null,Oe,!0,a),a.dispatch=r,[t,r]},useMemoCache:Bd,useCacheRefresh:function(){return mn().memoizedState=Rb.bind(null,Oe)}},hy={readContext:Zt,use:lc,useCallback:Jp,useContext:Zt,useEffect:Yp,useImperativeHandle:Zp,useInsertionEffect:Xp,useLayoutEffect:$p,useMemo:ey,useReducer:uc,useRef:Qp,useState:function(){return uc(ni)},useDebugValue:Kd,useDeferredValue:function(t,r){var a=St();return ty(a,et.memoizedState,t,r)},useTransition:function(){var t=uc(ni)[0],r=St().memoizedState;return[typeof t=="boolean"?t:gl(t),r]},useSyncExternalStore:Np,useId:sy,useHostTransitionStatus:$d,useFormState:Hp,useActionState:Hp,useOptimistic:function(t,r){var a=St();return kp(a,et,t,r)},useMemoCache:Bd,useCacheRefresh:ay},Ib={readContext:Zt,use:lc,useCallback:Jp,useContext:Zt,useEffect:Yp,useImperativeHandle:Zp,useInsertionEffect:Xp,useLayoutEffect:$p,useMemo:ey,useReducer:Fd,useRef:Qp,useState:function(){return Fd(ni)},useDebugValue:Kd,useDeferredValue:function(t,r){var a=St();return et===null?Yd(a,t,r):ty(a,et.memoizedState,t,r)},useTransition:function(){var t=Fd(ni)[0],r=St().memoizedState;return[typeof t=="boolean"?t:gl(t),r]},useSyncExternalStore:Np,useId:sy,useHostTransitionStatus:$d,useFormState:Gp,useActionState:Gp,useOptimistic:function(t,r){var a=St();return et!==null?kp(a,et,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Bd,useCacheRefresh:ay},za=null,_l=0;function mc(t){var r=_l;return _l+=1,za===null&&(za=[]),wp(za,t,r)}function vl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function gc(t,r){throw r.$$typeof===A?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function dy(t){var r=t._init;return r(t._payload)}function fy(t){function r(L,M){if(t){var z=L.deletions;z===null?(L.deletions=[M],L.flags|=16):z.push(M)}}function a(L,M){if(!t)return null;for(;M!==null;)r(L,M),M=M.sibling;return null}function l(L){for(var M=new Map;L!==null;)L.key!==null?M.set(L.key,L):M.set(L.index,L),L=L.sibling;return M}function h(L,M){return L=Wr(L,M),L.index=0,L.sibling=null,L}function f(L,M,z){return L.index=z,t?(z=L.alternate,z!==null?(z=z.index,z<M?(L.flags|=67108866,M):z):(L.flags|=67108866,M)):(L.flags|=1048576,M)}function v(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function w(L,M,z,X){return M===null||M.tag!==6?(M=_d(z,L.mode,X),M.return=L,M):(M=h(M,z),M.return=L,M)}function N(L,M,z,X){var fe=z.type;return fe===k?K(L,M,z.props.children,X,z.key):M!==null&&(M.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===R&&dy(fe)===M.type)?(M=h(M,z.props),vl(M,z),M.return=L,M):(M=Wu(z.type,z.key,z.props,null,L.mode,X),vl(M,z),M.return=L,M)}function q(L,M,z,X){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=vd(z,L.mode,X),M.return=L,M):(M=h(M,z.children||[]),M.return=L,M)}function K(L,M,z,X,fe){return M===null||M.tag!==7?(M=Ls(z,L.mode,X,fe),M.return=L,M):(M=h(M,z),M.return=L,M)}function W(L,M,z){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=_d(""+M,L.mode,z),M.return=L,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case S:return z=Wu(M.type,M.key,M.props,null,L.mode,z),vl(z,M),z.return=L,z;case U:return M=vd(M,L.mode,z),M.return=L,M;case R:var X=M._init;return M=X(M._payload),W(L,M,z)}if(Ce(M)||P(M))return M=Ls(M,L.mode,z,null),M.return=L,M;if(typeof M.then=="function")return W(L,mc(M),z);if(M.$$typeof===re)return W(L,tc(L,M),z);gc(L,M)}return null}function B(L,M,z,X){var fe=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return fe!==null?null:w(L,M,""+z,X);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return z.key===fe?N(L,M,z,X):null;case U:return z.key===fe?q(L,M,z,X):null;case R:return fe=z._init,z=fe(z._payload),B(L,M,z,X)}if(Ce(z)||P(z))return fe!==null?null:K(L,M,z,X,null);if(typeof z.then=="function")return B(L,M,mc(z),X);if(z.$$typeof===re)return B(L,M,tc(L,z),X);gc(L,z)}return null}function F(L,M,z,X,fe){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return L=L.get(z)||null,w(M,L,""+X,fe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case S:return L=L.get(X.key===null?z:X.key)||null,N(M,L,X,fe);case U:return L=L.get(X.key===null?z:X.key)||null,q(M,L,X,fe);case R:var Pe=X._init;return X=Pe(X._payload),F(L,M,z,X,fe)}if(Ce(X)||P(X))return L=L.get(z)||null,K(M,L,X,fe,null);if(typeof X.then=="function")return F(L,M,z,mc(X),fe);if(X.$$typeof===re)return F(L,M,z,tc(M,X),fe);gc(M,X)}return null}function Se(L,M,z,X){for(var fe=null,Pe=null,ye=M,we=M=0,qt=null;ye!==null&&we<z.length;we++){ye.index>we?(qt=ye,ye=null):qt=ye.sibling;var Qe=B(L,ye,z[we],X);if(Qe===null){ye===null&&(ye=qt);break}t&&ye&&Qe.alternate===null&&r(L,ye),M=f(Qe,M,we),Pe===null?fe=Qe:Pe.sibling=Qe,Pe=Qe,ye=qt}if(we===z.length)return a(L,ye),Ke&&js(L,we),fe;if(ye===null){for(;we<z.length;we++)ye=W(L,z[we],X),ye!==null&&(M=f(ye,M,we),Pe===null?fe=ye:Pe.sibling=ye,Pe=ye);return Ke&&js(L,we),fe}for(ye=l(ye);we<z.length;we++)qt=F(ye,L,we,z[we],X),qt!==null&&(t&&qt.alternate!==null&&ye.delete(qt.key===null?we:qt.key),M=f(qt,M,we),Pe===null?fe=qt:Pe.sibling=qt,Pe=qt);return t&&ye.forEach(function(Wi){return r(L,Wi)}),Ke&&js(L,we),fe}function Ee(L,M,z,X){if(z==null)throw Error(s(151));for(var fe=null,Pe=null,ye=M,we=M=0,qt=null,Qe=z.next();ye!==null&&!Qe.done;we++,Qe=z.next()){ye.index>we?(qt=ye,ye=null):qt=ye.sibling;var Wi=B(L,ye,Qe.value,X);if(Wi===null){ye===null&&(ye=qt);break}t&&ye&&Wi.alternate===null&&r(L,ye),M=f(Wi,M,we),Pe===null?fe=Wi:Pe.sibling=Wi,Pe=Wi,ye=qt}if(Qe.done)return a(L,ye),Ke&&js(L,we),fe;if(ye===null){for(;!Qe.done;we++,Qe=z.next())Qe=W(L,Qe.value,X),Qe!==null&&(M=f(Qe,M,we),Pe===null?fe=Qe:Pe.sibling=Qe,Pe=Qe);return Ke&&js(L,we),fe}for(ye=l(ye);!Qe.done;we++,Qe=z.next())Qe=F(ye,L,we,Qe.value,X),Qe!==null&&(t&&Qe.alternate!==null&&ye.delete(Qe.key===null?we:Qe.key),M=f(Qe,M,we),Pe===null?fe=Qe:Pe.sibling=Qe,Pe=Qe);return t&&ye.forEach(function(CA){return r(L,CA)}),Ke&&js(L,we),fe}function nt(L,M,z,X){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case S:e:{for(var fe=z.key;M!==null;){if(M.key===fe){if(fe=z.type,fe===k){if(M.tag===7){a(L,M.sibling),X=h(M,z.props.children),X.return=L,L=X;break e}}else if(M.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===R&&dy(fe)===M.type){a(L,M.sibling),X=h(M,z.props),vl(X,z),X.return=L,L=X;break e}a(L,M);break}else r(L,M);M=M.sibling}z.type===k?(X=Ls(z.props.children,L.mode,X,z.key),X.return=L,L=X):(X=Wu(z.type,z.key,z.props,null,L.mode,X),vl(X,z),X.return=L,L=X)}return v(L);case U:e:{for(fe=z.key;M!==null;){if(M.key===fe)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){a(L,M.sibling),X=h(M,z.children||[]),X.return=L,L=X;break e}else{a(L,M);break}else r(L,M);M=M.sibling}X=vd(z,L.mode,X),X.return=L,L=X}return v(L);case R:return fe=z._init,z=fe(z._payload),nt(L,M,z,X)}if(Ce(z))return Se(L,M,z,X);if(P(z)){if(fe=P(z),typeof fe!="function")throw Error(s(150));return z=fe.call(z),Ee(L,M,z,X)}if(typeof z.then=="function")return nt(L,M,mc(z),X);if(z.$$typeof===re)return nt(L,M,tc(L,z),X);gc(L,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,M!==null&&M.tag===6?(a(L,M.sibling),X=h(M,z),X.return=L,L=X):(a(L,M),X=_d(z,L.mode,X),X.return=L,L=X),v(L)):a(L,M)}return function(L,M,z,X){try{_l=0;var fe=nt(L,M,z,X);return za=null,fe}catch(ye){if(ye===ul||ye===rc)throw ye;var Pe=bn(29,ye,null,L.mode);return Pe.lanes=X,Pe.return=L,Pe}finally{}}}var qa=fy(!0),my=fy(!1),Bn=Z(null),vr=null;function ki(t){var r=t.alternate;ne(Vt,Vt.current&1),ne(Bn,t),vr===null&&(r===null||ka.current!==null||r.memoizedState!==null)&&(vr=t)}function gy(t){if(t.tag===22){if(ne(Vt,Vt.current),ne(Bn,t),vr===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(vr=t)}}else Li()}function Li(){ne(Vt,Vt.current),ne(Bn,Bn.current)}function ri(t){ae(Bn),vr===t&&(vr=null),ae(Vt)}var Vt=Z(0);function pc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Bf(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Zd(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Jd={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=xn(),h=Pi(l);h.payload=r,a!=null&&(h.callback=a),r=Vi(t,h,l),r!==null&&(In(r,t,l),hl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=xn(),h=Pi(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Vi(t,h,l),r!==null&&(In(r,t,l),hl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=xn(),l=Pi(a);l.tag=2,r!=null&&(l.callback=r),r=Vi(t,l,a),r!==null&&(In(r,t,a),hl(r,t,a))}};function py(t,r,a,l,h,f,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,v):r.prototype&&r.prototype.isPureReactComponent?!tl(a,l)||!tl(h,f):!0}function yy(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Jd.enqueueReplaceState(r,r.state,null)}function Qs(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var yc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function _y(t){yc(t)}function vy(t){console.error(t)}function Ey(t){yc(t)}function _c(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Ty(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ef(t,r,a){return a=Pi(a),a.tag=3,a.payload={element:null},a.callback=function(){_c(t,r)},a}function wy(t){return t=Pi(t),t.tag=3,t}function by(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){Ty(r,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Ty(r,a,l),typeof h!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function Cb(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&al(r,a,h,!0),a=Bn.current,a!==null){switch(a.tag){case 13:return vr===null?Sf():a.alternate===null&&mt===0&&(mt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Cd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),xf(t,l,h)),!1;case 22:return a.flags|=65536,l===Cd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),xf(t,l,h)),!1}throw Error(s(435,a.tag))}return xf(t,l,h),Sf(),!1}if(Ke)return r=Bn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==wd&&(t=Error(s(422),{cause:l}),sl(Un(t,a)))):(l!==wd&&(r=Error(s(423),{cause:l}),sl(Un(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Un(l,a),h=ef(t.stateNode,l,h),Od(t,h),mt!==4&&(mt=2)),!1;var f=Error(s(520),{cause:l});if(f=Un(f,a),Rl===null?Rl=[f]:Rl.push(f),mt!==4&&(mt=2),r===null)return!0;l=Un(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=ef(a.stateNode,l,t),Od(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Hi===null||!Hi.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=wy(h),by(h,t,a,l),Od(a,h),!1}a=a.return}while(a!==null);return!1}var Ay=Error(s(461)),jt=!1;function Qt(t,r,a,l){r.child=t===null?my(r,null,a,l):qa(r,t.child,a,l)}function Sy(t,r,a,l,h){a=a.render;var f=r.ref;if("ref"in l){var v={};for(var w in l)w!=="ref"&&(v[w]=l[w])}else v=l;return Hs(r),l=Ld(t,r,a,v,f,h),w=Ud(),t!==null&&!jt?(jd(t,r,h),ii(t,r,h)):(Ke&&w&&Ed(r),r.flags|=1,Qt(t,r,l,h),r.child)}function Ry(t,r,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!yd(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,xy(t,r,f,l,h)):(t=Wu(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!uf(t,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:tl,a(v,l)&&t.ref===r.ref)return ii(t,r,h)}return r.flags|=1,t=Wr(f,l),t.ref=r.ref,t.return=r,r.child=t}function xy(t,r,a,l,h){if(t!==null){var f=t.memoizedProps;if(tl(f,l)&&t.ref===r.ref)if(jt=!1,r.pendingProps=l=f,uf(t,h))(t.flags&131072)!==0&&(jt=!0);else return r.lanes=t.lanes,ii(t,r,h)}return tf(t,r,a,l,h)}function Iy(t,r,a){var l=r.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=r.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;r.childLanes=f&~l}else r.childLanes=0,r.child=null;return Cy(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&nc(r,f!==null?f.cachePool:null),f!==null?xp(r,f):Vd(),gy(r);else return r.lanes=r.childLanes=536870912,Cy(t,r,f!==null?f.baseLanes|a:a,a)}else f!==null?(nc(r,f.cachePool),xp(r,f),Li(),r.memoizedState=null):(t!==null&&nc(r,null),Vd(),Li());return Qt(t,r,h,a),r.child}function Cy(t,r,a,l){var h=Id();return h=h===null?null:{parent:Pt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&nc(r,null),Vd(),gy(r),t!==null&&al(t,r,l,!0),null}function vc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function tf(t,r,a,l,h){return Hs(r),a=Ld(t,r,a,l,void 0,h),l=Ud(),t!==null&&!jt?(jd(t,r,h),ii(t,r,h)):(Ke&&l&&Ed(r),r.flags|=1,Qt(t,r,a,h),r.child)}function Ny(t,r,a,l,h,f){return Hs(r),r.updateQueue=null,a=Cp(r,l,a,h),Ip(t),l=Ud(),t!==null&&!jt?(jd(t,r,f),ii(t,r,f)):(Ke&&l&&Ed(r),r.flags|=1,Qt(t,r,a,f),r.child)}function Dy(t,r,a,l,h){if(Hs(r),r.stateNode===null){var f=Da,v=a.contextType;typeof v=="object"&&v!==null&&(f=Zt(v)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Jd,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Nd(r),v=a.contextType,f.context=typeof v=="object"&&v!==null?Zt(v):Da,f.state=r.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Zd(r,a,v,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Jd.enqueueReplaceState(f,f.state,null),fl(r,l,f,h),dl(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var w=r.memoizedProps,N=Qs(a,w);f.props=N;var q=f.context,K=a.contextType;v=Da,typeof K=="object"&&K!==null&&(v=Zt(K));var W=a.getDerivedStateFromProps;K=typeof W=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,K||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||q!==v)&&yy(r,f,l,v),Oi=!1;var B=r.memoizedState;f.state=B,fl(r,l,f,h),dl(),q=r.memoizedState,w||B!==q||Oi?(typeof W=="function"&&(Zd(r,a,W,l),q=r.memoizedState),(N=Oi||py(r,a,N,l,B,q,v))?(K||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=q),f.props=l,f.state=q,f.context=v,l=N):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,Dd(t,r),v=r.memoizedProps,K=Qs(a,v),f.props=K,W=r.pendingProps,B=f.context,q=a.contextType,N=Da,typeof q=="object"&&q!==null&&(N=Zt(q)),w=a.getDerivedStateFromProps,(q=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==W||B!==N)&&yy(r,f,l,N),Oi=!1,B=r.memoizedState,f.state=B,fl(r,l,f,h),dl();var F=r.memoizedState;v!==W||B!==F||Oi||t!==null&&t.dependencies!==null&&ec(t.dependencies)?(typeof w=="function"&&(Zd(r,a,w,l),F=r.memoizedState),(K=Oi||py(r,a,K,l,B,F,N)||t!==null&&t.dependencies!==null&&ec(t.dependencies))?(q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,F,N),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,F,N)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=F),f.props=l,f.state=F,f.context=N,l=K):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,vc(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=qa(r,t.child,null,h),r.child=qa(r,null,a,h)):Qt(t,r,a,h),r.memoizedState=f.state,t=r.child):t=ii(t,r,h),t}function Oy(t,r,a,l){return il(),r.flags|=256,Qt(t,r,a,l),r.child}var nf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rf(t){return{baseLanes:t,cachePool:vp()}}function sf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Hn),t}function Py(t,r,a){var l=r.pendingProps,h=!1,f=(r.flags&128)!==0,v;if((v=f)||(v=t!==null&&t.memoizedState===null?!1:(Vt.current&2)!==0),v&&(h=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ke){if(h?ki(r):Li(),Ke){var w=ft,N;if(N=w){e:{for(N=w,w=_r;N.nodeType!==8;){if(!w){w=null;break e}if(N=Jn(N.nextSibling),N===null){w=null;break e}}w=N}w!==null?(r.memoizedState={dehydrated:w,treeContext:Us!==null?{id:Zr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},N=bn(18,null,null,0),N.stateNode=w,N.return=r,r.child=N,dn=r,ft=null,N=!0):N=!1}N||qs(r)}if(w=r.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return Bf(w)?r.lanes=32:r.lanes=536870912,null;ri(r)}return w=l.children,l=l.fallback,h?(Li(),h=r.mode,w=Ec({mode:"hidden",children:w},h),l=Ls(l,h,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,h=r.child,h.memoizedState=rf(a),h.childLanes=sf(t,v,a),r.memoizedState=nf,l):(ki(r),af(r,w))}if(N=t.memoizedState,N!==null&&(w=N.dehydrated,w!==null)){if(f)r.flags&256?(ki(r),r.flags&=-257,r=of(t,r,a)):r.memoizedState!==null?(Li(),r.child=t.child,r.flags|=128,r=null):(Li(),h=l.fallback,w=r.mode,l=Ec({mode:"visible",children:l.children},w),h=Ls(h,w,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,qa(r,t.child,null,a),l=r.child,l.memoizedState=rf(a),l.childLanes=sf(t,v,a),r.memoizedState=nf,r=h);else if(ki(r),Bf(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var q=v.dgst;v=q,l=Error(s(419)),l.stack="",l.digest=v,sl({value:l,source:null,stack:null}),r=of(t,r,a)}else if(jt||al(t,r,a,!1),v=(a&t.childLanes)!==0,jt||v){if(v=st,v!==null&&(l=a&-a,l=(l&42)!==0?1:Ai(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==N.retryLane))throw N.retryLane=l,Na(t,l),In(v,t,l),Ay;w.data==="$?"||Sf(),r=of(t,r,a)}else w.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=N.treeContext,ft=Jn(w.nextSibling),dn=r,Ke=!0,zs=null,_r=!1,t!==null&&(zn[qn++]=Zr,zn[qn++]=Jr,zn[qn++]=Us,Zr=t.id,Jr=t.overflow,Us=r),r=af(r,l.children),r.flags|=4096);return r}return h?(Li(),h=l.fallback,w=r.mode,N=t.child,q=N.sibling,l=Wr(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,q!==null?h=Wr(q,h):(h=Ls(h,w,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,w=t.child.memoizedState,w===null?w=rf(a):(N=w.cachePool,N!==null?(q=Pt._currentValue,N=N.parent!==q?{parent:q,pool:q}:N):N=vp(),w={baseLanes:w.baseLanes|a,cachePool:N}),h.memoizedState=w,h.childLanes=sf(t,v,a),r.memoizedState=nf,l):(ki(r),a=t.child,t=a.sibling,a=Wr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(v=r.deletions,v===null?(r.deletions=[t],r.flags|=16):v.push(t)),r.child=a,r.memoizedState=null,a)}function af(t,r){return r=Ec({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Ec(t,r){return t=bn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function of(t,r,a){return qa(r,t.child,null,a),t=af(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Vy(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Ad(t.return,r,a)}function lf(t,r,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function My(t,r,a){var l=r.pendingProps,h=l.revealOrder,f=l.tail;if(Qt(t,r,l.children,a),l=Vt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vy(t,a,r);else if(t.tag===19)Vy(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ne(Vt,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&pc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),lf(r,!1,h,a,f);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&pc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}lf(r,!0,a,null,f);break;case"together":lf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ii(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Bi|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(al(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Wr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Wr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function uf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&ec(t)))}function Nb(t,r,a){switch(r.tag){case 3:Ze(r,r.stateNode.containerInfo),Di(r,Pt,t.memoizedState.cache),il();break;case 27:case 5:ar(r);break;case 4:Ze(r,r.stateNode.containerInfo);break;case 10:Di(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(ki(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Py(t,r,a):(ki(r),t=ii(t,r,a),t!==null?t.sibling:null);ki(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(al(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return My(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ne(Vt,Vt.current),l)break;return null;case 22:case 23:return r.lanes=0,Iy(t,r,a);case 24:Di(r,Pt,t.memoizedState.cache)}return ii(t,r,a)}function ky(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)jt=!0;else{if(!uf(t,a)&&(r.flags&128)===0)return jt=!1,Nb(t,r,a);jt=(t.flags&131072)!==0}else jt=!1,Ke&&(r.flags&1048576)!==0&&dp(r,Ju,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")yd(l)?(t=Qs(l,t),r.tag=1,r=Dy(null,r,l,t,a)):(r.tag=0,r=tf(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===ge){r.tag=11,r=Sy(null,r,l,t,a);break e}else if(h===I){r.tag=14,r=Ry(null,r,l,t,a);break e}}throw r=Fe(l)||l,Error(s(306,r,""))}}return r;case 0:return tf(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=Qs(l,r.pendingProps),Dy(t,r,l,h,a);case 3:e:{if(Ze(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;h=f.element,Dd(t,r),fl(r,l,null,a);var v=r.memoizedState;if(l=v.cache,Di(r,Pt,l),l!==f.cache&&Sd(r,[Pt],a,!0),dl(),l=v.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=Oy(t,r,l,a);break e}else if(l!==h){h=Un(Error(s(424)),r),sl(h),r=Oy(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ft=Jn(t.firstChild),dn=r,Ke=!0,zs=null,_r=!0,a=my(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(il(),l===h){r=ii(t,r,a);break e}Qt(t,r,l,a)}r=r.child}return r;case 26:return vc(t,r),t===null?(a=z_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ke||(a=r.type,t=r.pendingProps,l=Vc(Te.current).createElement(a),l[Nt]=r,l[wt]=t,Yt(l,a,t),pt(l),r.stateNode=l):r.memoizedState=z_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ar(r),t===null&&Ke&&(l=r.stateNode=L_(r.type,r.pendingProps,Te.current),dn=r,_r=!0,h=ft,Qi(r.type)?(Hf=h,ft=Jn(l.firstChild)):ft=h),Qt(t,r,r.pendingProps.children,a),vc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ke&&((h=l=ft)&&(l=iA(l,r.type,r.pendingProps,_r),l!==null?(r.stateNode=l,dn=r,ft=Jn(l.firstChild),_r=!1,h=!0):h=!1),h||qs(r)),ar(r),h=r.type,f=r.pendingProps,v=t!==null?t.memoizedProps:null,l=f.children,jf(h,f)?l=null:v!==null&&jf(h,v)&&(r.flags|=32),r.memoizedState!==null&&(h=Ld(t,r,wb,null,null,a),Ml._currentValue=h),vc(t,r),Qt(t,r,l,a),r.child;case 6:return t===null&&Ke&&((t=a=ft)&&(a=sA(a,r.pendingProps,_r),a!==null?(r.stateNode=a,dn=r,ft=null,t=!0):t=!1),t||qs(r)),null;case 13:return Py(t,r,a);case 4:return Ze(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=qa(r,null,l,a):Qt(t,r,l,a),r.child;case 11:return Sy(t,r,r.type,r.pendingProps,a);case 7:return Qt(t,r,r.pendingProps,a),r.child;case 8:return Qt(t,r,r.pendingProps.children,a),r.child;case 12:return Qt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Di(r,r.type,l.value),Qt(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Hs(r),h=Zt(h),l=l(h),r.flags|=1,Qt(t,r,l,a),r.child;case 14:return Ry(t,r,r.type,r.pendingProps,a);case 15:return xy(t,r,r.type,r.pendingProps,a);case 19:return My(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Ec(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Wr(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return Iy(t,r,a);case 24:return Hs(r),l=Zt(Pt),t===null?(h=Id(),h===null&&(h=st,f=Rd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),r.memoizedState={parent:l,cache:h},Nd(r),Di(r,Pt,h)):((t.lanes&a)!==0&&(Dd(t,r),fl(r,null,null,a),dl()),h=t.memoizedState,f=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Di(r,Pt,l)):(l=f.cache,Di(r,Pt,l),l!==h.cache&&Sd(r,[Pt],a,!0))),Qt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function si(t){t.flags|=4}function Ly(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!G_(r)){if(r=Bn.current,r!==null&&((qe&4194048)===qe?vr!==null:(qe&62914560)!==qe&&(qe&536870912)===0||r!==vr))throw cl=Cd,Ep;t.flags|=8192}}function Tc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Lo():536870912,t.lanes|=r,Ga|=r)}function El(t,r){if(!Ke)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ht(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function Db(t,r,a){var l=r.pendingProps;switch(Td(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(r),null;case 1:return ht(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ti(Pt),Dn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(rl(r)?si(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,gp())),ht(r),null;case 26:return a=r.memoizedState,t===null?(si(r),a!==null?(ht(r),Ly(r,a)):(ht(r),r.flags&=-16777217)):a?a!==t.memoizedState?(si(r),ht(r),Ly(r,a)):(ht(r),r.flags&=-16777217):(t.memoizedProps!==l&&si(r),ht(r),r.flags&=-16777217),null;case 27:On(r),a=Te.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&si(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ht(r),null}t=_e.current,rl(r)?fp(r):(t=L_(h,l,a),r.stateNode=t,si(r))}return ht(r),null;case 5:if(On(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&si(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ht(r),null}if(t=_e.current,rl(r))fp(r);else{switch(h=Vc(Te.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Nt]=r,t[wt]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(Yt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&si(r)}}return ht(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&si(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Te.current,rl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=dn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Nt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||N_(t.nodeValue,a)),t||qs(r)}else t=Vc(t).createTextNode(l),t[Nt]=r,r.stateNode=t}return ht(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=rl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Nt]=r}else il(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ht(r),h=!1}else h=gp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(ri(r),r):(ri(r),null)}if(ri(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Tc(r,r.updateQueue),ht(r),null;case 4:return Dn(),t===null&&Vf(r.stateNode.containerInfo),ht(r),null;case 10:return ti(r.type),ht(r),null;case 19:if(ae(Vt),h=r.memoizedState,h===null)return ht(r),null;if(l=(r.flags&128)!==0,f=h.rendering,f===null)if(l)El(h,!1);else{if(mt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=pc(t),f!==null){for(r.flags|=128,El(h,!1),t=f.updateQueue,r.updateQueue=t,Tc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)hp(a,t),a=a.sibling;return ne(Vt,Vt.current&1|2),r.child}t=t.sibling}h.tail!==null&&fn()>Ac&&(r.flags|=128,l=!0,El(h,!1),r.lanes=4194304)}else{if(!l)if(t=pc(f),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Tc(r,t),El(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Ke)return ht(r),null}else 2*fn()-h.renderingStartTime>Ac&&a!==536870912&&(r.flags|=128,l=!0,El(h,!1),r.lanes=4194304);h.isBackwards?(f.sibling=r.child,r.child=f):(t=h.last,t!==null?t.sibling=f:r.child=f,h.last=f)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=fn(),r.sibling=null,t=Vt.current,ne(Vt,l?t&1|2:t&1),r):(ht(r),null);case 22:case 23:return ri(r),Md(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(ht(r),r.subtreeFlags&6&&(r.flags|=8192)):ht(r),a=r.updateQueue,a!==null&&Tc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&ae(Fs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ti(Pt),ht(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function Ob(t,r){switch(Td(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ti(Pt),Dn(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return On(r),null;case 13:if(ri(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));il()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ae(Vt),null;case 4:return Dn(),null;case 10:return ti(r.type),null;case 22:case 23:return ri(r),Md(),t!==null&&ae(Fs),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ti(Pt),null;case 25:return null;default:return null}}function Uy(t,r){switch(Td(r),r.tag){case 3:ti(Pt),Dn();break;case 26:case 27:case 5:On(r);break;case 4:Dn();break;case 13:ri(r);break;case 19:ae(Vt);break;case 10:ti(r.type);break;case 22:case 23:ri(r),Md(),t!==null&&ae(Fs);break;case 24:ti(Pt)}}function Tl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,v=a.inst;l=f(),v.destroy=l}a=a.next}while(a!==h)}}catch(w){rt(r,r.return,w)}}function Ui(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var v=l.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,h=r;var N=a,q=w;try{q()}catch(K){rt(h,N,K)}}}l=l.next}while(l!==f)}}catch(K){rt(r,r.return,K)}}function jy(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Rp(r,a)}catch(l){rt(t,t.return,l)}}}function zy(t,r,a){a.props=Qs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){rt(t,r,l)}}function wl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){rt(t,r,h)}}function Er(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){rt(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){rt(t,r,h)}else a.current=null}function qy(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){rt(t,t.return,h)}}function cf(t,r,a){try{var l=t.stateNode;Jb(l,t.type,a,r),l[wt]=r}catch(h){rt(t,t.return,h)}}function By(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Qi(t.type)||t.tag===4}function hf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||By(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Qi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function df(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Pc));else if(l!==4&&(l===27&&Qi(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(df(t,r,a),t=t.sibling;t!==null;)df(t,r,a),t=t.sibling}function wc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Qi(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(wc(t,r,a),t=t.sibling;t!==null;)wc(t,r,a),t=t.sibling}function Hy(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Yt(r,l,a),r[Nt]=t,r[wt]=a}catch(f){rt(t,t.return,f)}}var ai=!1,_t=!1,ff=!1,Fy=typeof WeakSet=="function"?WeakSet:Set,zt=null;function Pb(t,r){if(t=t.containerInfo,Lf=zc,t=tp(t),cd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,w=-1,N=-1,q=0,K=0,W=t,B=null;t:for(;;){for(var F;W!==a||h!==0&&W.nodeType!==3||(w=v+h),W!==f||l!==0&&W.nodeType!==3||(N=v+l),W.nodeType===3&&(v+=W.nodeValue.length),(F=W.firstChild)!==null;)B=W,W=F;for(;;){if(W===t)break t;if(B===a&&++q===h&&(w=v),B===f&&++K===l&&(N=v),(F=W.nextSibling)!==null)break;W=B,B=W.parentNode}W=F}a=w===-1||N===-1?null:{start:w,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Uf={focusedElem:t,selectionRange:a},zc=!1,zt=r;zt!==null;)if(r=zt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,zt=t;else for(;zt!==null;){switch(r=zt,f=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Se=Qs(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Se,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ee){rt(a,a.return,Ee)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)qf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":qf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,zt=t;break}zt=r.return}}function Gy(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ji(t,a),l&4&&Tl(5,a);break;case 1:if(ji(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(v){rt(a,a.return,v)}else{var h=Qs(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(v){rt(a,a.return,v)}}l&64&&jy(a),l&512&&wl(a,a.return);break;case 3:if(ji(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Rp(t,r)}catch(v){rt(a,a.return,v)}}break;case 27:r===null&&l&4&&Hy(a);case 26:case 5:ji(t,a),r===null&&l&4&&qy(a),l&512&&wl(a,a.return);break;case 12:ji(t,a);break;case 13:ji(t,a),l&4&&Yy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Bb.bind(null,a),aA(t,a))));break;case 22:if(l=a.memoizedState!==null||ai,!l){r=r!==null&&r.memoizedState!==null||_t,h=ai;var f=_t;ai=l,(_t=r)&&!f?zi(t,a,(a.subtreeFlags&8772)!==0):ji(t,a),ai=h,_t=f}break;case 30:break;default:ji(t,a)}}function Qy(t){var r=t.alternate;r!==null&&(t.alternate=null,Qy(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&xi(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ct=null,gn=!1;function oi(t,r,a){for(a=a.child;a!==null;)Ky(t,r,a),a=a.sibling}function Ky(t,r,a){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(lt,a)}catch{}switch(a.tag){case 26:_t||Er(a,r),oi(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:_t||Er(a,r);var l=ct,h=gn;Qi(a.type)&&(ct=a.stateNode,gn=!1),oi(t,r,a),Dl(a.stateNode),ct=l,gn=h;break;case 5:_t||Er(a,r);case 6:if(l=ct,h=gn,ct=null,oi(t,r,a),ct=l,gn=h,ct!==null)if(gn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(a.stateNode)}catch(f){rt(a,r,f)}else try{ct.removeChild(a.stateNode)}catch(f){rt(a,r,f)}break;case 18:ct!==null&&(gn?(t=ct,M_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),jl(t)):M_(ct,a.stateNode));break;case 4:l=ct,h=gn,ct=a.stateNode.containerInfo,gn=!0,oi(t,r,a),ct=l,gn=h;break;case 0:case 11:case 14:case 15:_t||Ui(2,a,r),_t||Ui(4,a,r),oi(t,r,a);break;case 1:_t||(Er(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&zy(a,r,l)),oi(t,r,a);break;case 21:oi(t,r,a);break;case 22:_t=(l=_t)||a.memoizedState!==null,oi(t,r,a),_t=l;break;default:oi(t,r,a)}}function Yy(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{jl(t)}catch(a){rt(r,r.return,a)}}function Vb(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Fy),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Fy),r;default:throw Error(s(435,t.tag))}}function mf(t,r){var a=Vb(t);r.forEach(function(l){var h=Hb.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function An(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,v=r,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(Qi(w.type)){ct=w.stateNode,gn=!1;break e}break;case 5:ct=w.stateNode,gn=!1;break e;case 3:case 4:ct=w.stateNode.containerInfo,gn=!0;break e}w=w.return}if(ct===null)throw Error(s(160));Ky(f,v,h),ct=null,gn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Xy(r,t),r=r.sibling}var Zn=null;function Xy(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:An(r,t),Sn(t),l&4&&(Ui(3,t,t.return),Tl(3,t),Ui(5,t,t.return));break;case 1:An(r,t),Sn(t),l&512&&(_t||a===null||Er(a,a.return)),l&64&&ai&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Zn;if(An(r,t),Sn(t),l&512&&(_t||a===null||Er(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Ts]||f[Nt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Yt(f,l,a),f[Nt]=t,pt(f),l=f;break e;case"link":var v=H_("link","href",h).get(l+(a.href||""));if(v){for(var w=0;w<v.length;w++)if(f=v[w],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(w,1);break t}}f=h.createElement(l),Yt(f,l,a),h.head.appendChild(f);break;case"meta":if(v=H_("meta","content",h).get(l+(a.content||""))){for(w=0;w<v.length;w++)if(f=v[w],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(w,1);break t}}f=h.createElement(l),Yt(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[Nt]=t,pt(f),l=f}t.stateNode=l}else F_(h,t.type,t.stateNode);else t.stateNode=B_(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?F_(h,t.type,t.stateNode):B_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&cf(t,t.memoizedProps,a.memoizedProps)}break;case 27:An(r,t),Sn(t),l&512&&(_t||a===null||Er(a,a.return)),a!==null&&l&4&&cf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(An(r,t),Sn(t),l&512&&(_t||a===null||Er(a,a.return)),t.flags&32){h=t.stateNode;try{Vn(h,"")}catch(F){rt(t,t.return,F)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,cf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(ff=!0);break;case 6:if(An(r,t),Sn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(F){rt(t,t.return,F)}}break;case 3:if(Lc=null,h=Zn,Zn=Mc(r.containerInfo),An(r,t),Zn=h,Sn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{jl(r.containerInfo)}catch(F){rt(t,t.return,F)}ff&&(ff=!1,$y(t));break;case 4:l=Zn,Zn=Mc(t.stateNode.containerInfo),An(r,t),Sn(t),Zn=l;break;case 12:An(r,t),Sn(t);break;case 13:An(r,t),Sn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ef=fn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,mf(t,l)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,q=ai,K=_t;if(ai=q||h,_t=K||N,An(r,t),_t=K,ai=q,Sn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||N||ai||_t||Ks(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){N=a=r;try{if(f=N.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=N.stateNode;var W=N.memoizedProps.style,B=W!=null&&W.hasOwnProperty("display")?W.display:null;w.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(F){rt(N,N.return,F)}}}else if(r.tag===6){if(a===null){N=r;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(F){rt(N,N.return,F)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,mf(t,a))));break;case 19:An(r,t),Sn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,mf(t,l)));break;case 30:break;case 21:break;default:An(r,t),Sn(t)}}function Sn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(By(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=hf(t);wc(t,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(Vn(v,""),a.flags&=-33);var w=hf(t);wc(t,w,v);break;case 3:case 4:var N=a.stateNode.containerInfo,q=hf(t);df(t,q,N);break;default:throw Error(s(161))}}catch(K){rt(t,t.return,K)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function $y(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;$y(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function ji(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Gy(t,r.alternate,r),r=r.sibling}function Ks(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Ui(4,r,r.return),Ks(r);break;case 1:Er(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&zy(r,r.return,a),Ks(r);break;case 27:Dl(r.stateNode);case 26:case 5:Er(r,r.return),Ks(r);break;case 22:r.memoizedState===null&&Ks(r);break;case 30:Ks(r);break;default:Ks(r)}t=t.sibling}}function zi(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,f=r,v=f.flags;switch(f.tag){case 0:case 11:case 15:zi(h,f,a),Tl(4,f);break;case 1:if(zi(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){rt(l,l.return,q)}if(l=f,h=l.updateQueue,h!==null){var w=l.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)Sp(N[h],w)}catch(q){rt(l,l.return,q)}}a&&v&64&&jy(f),wl(f,f.return);break;case 27:Hy(f);case 26:case 5:zi(h,f,a),a&&l===null&&v&4&&qy(f),wl(f,f.return);break;case 12:zi(h,f,a);break;case 13:zi(h,f,a),a&&v&4&&Yy(h,f);break;case 22:f.memoizedState===null&&zi(h,f,a),wl(f,f.return);break;case 30:break;default:zi(h,f,a)}r=r.sibling}}function gf(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ol(a))}function pf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ol(t))}function Tr(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Wy(t,r,a,l),r=r.sibling}function Wy(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Tr(t,r,a,l),h&2048&&Tl(9,r);break;case 1:Tr(t,r,a,l);break;case 3:Tr(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ol(t)));break;case 12:if(h&2048){Tr(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,v=f.id,w=f.onPostCommit;typeof w=="function"&&w(v,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){rt(r,r.return,N)}}else Tr(t,r,a,l);break;case 13:Tr(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,v=r.alternate,r.memoizedState!==null?f._visibility&2?Tr(t,r,a,l):bl(t,r):f._visibility&2?Tr(t,r,a,l):(f._visibility|=2,Ba(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&gf(v,r);break;case 24:Tr(t,r,a,l),h&2048&&pf(r.alternate,r);break;default:Tr(t,r,a,l)}}function Ba(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var f=t,v=r,w=a,N=l,q=v.flags;switch(v.tag){case 0:case 11:case 15:Ba(f,v,w,N,h),Tl(8,v);break;case 23:break;case 22:var K=v.stateNode;v.memoizedState!==null?K._visibility&2?Ba(f,v,w,N,h):bl(f,v):(K._visibility|=2,Ba(f,v,w,N,h)),h&&q&2048&&gf(v.alternate,v);break;case 24:Ba(f,v,w,N,h),h&&q&2048&&pf(v.alternate,v);break;default:Ba(f,v,w,N,h)}r=r.sibling}}function bl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:bl(a,l),h&2048&&gf(l.alternate,l);break;case 24:bl(a,l),h&2048&&pf(l.alternate,l);break;default:bl(a,l)}r=r.sibling}}var Al=8192;function Ha(t){if(t.subtreeFlags&Al)for(t=t.child;t!==null;)Zy(t),t=t.sibling}function Zy(t){switch(t.tag){case 26:Ha(t),t.flags&Al&&t.memoizedState!==null&&vA(Zn,t.memoizedState,t.memoizedProps);break;case 5:Ha(t);break;case 3:case 4:var r=Zn;Zn=Mc(t.stateNode.containerInfo),Ha(t),Zn=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Al,Al=16777216,Ha(t),Al=r):Ha(t));break;default:Ha(t)}}function Jy(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Sl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];zt=l,t_(l,t)}Jy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)e_(t),t=t.sibling}function e_(t){switch(t.tag){case 0:case 11:case 15:Sl(t),t.flags&2048&&Ui(9,t,t.return);break;case 3:Sl(t);break;case 12:Sl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,bc(t)):Sl(t);break;default:Sl(t)}}function bc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];zt=l,t_(l,t)}Jy(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Ui(8,r,r.return),bc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,bc(r));break;default:bc(r)}t=t.sibling}}function t_(t,r){for(;zt!==null;){var a=zt;switch(a.tag){case 0:case 11:case 15:Ui(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ol(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,zt=l;else e:for(a=t;zt!==null;){l=zt;var h=l.sibling,f=l.return;if(Qy(l),l===a){zt=null;break e}if(h!==null){h.return=f,zt=h;break e}zt=f}}}var Mb={getCacheForType:function(t){var r=Zt(Pt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},kb=typeof WeakMap=="function"?WeakMap:Map,$e=0,st=null,Ve=null,qe=0,We=0,Rn=null,qi=!1,Fa=!1,yf=!1,li=0,mt=0,Bi=0,Ys=0,_f=0,Hn=0,Ga=0,Rl=null,pn=null,vf=!1,Ef=0,Ac=1/0,Sc=null,Hi=null,Kt=0,Fi=null,Qa=null,Ka=0,Tf=0,wf=null,n_=null,xl=0,bf=null;function xn(){if(($e&2)!==0&&qe!==0)return qe&-qe;if(Q.T!==null){var t=Va;return t!==0?t:Nf()}return Si()}function r_(){Hn===0&&(Hn=(qe&536870912)===0||Ke?ko():536870912);var t=Bn.current;return t!==null&&(t.flags|=32),Hn}function In(t,r,a){(t===st&&(We===2||We===9)||t.cancelPendingCommit!==null)&&(Ya(t,0),Gi(t,qe,Hn,!1)),zr(t,a),(($e&2)===0||t!==st)&&(t===st&&(($e&2)===0&&(Ys|=a),mt===4&&Gi(t,qe,Hn,!1)),wr(t))}function i_(t,r,a){if(($e&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||Es(t,r),h=l?jb(t,r):Rf(t,r,!0),f=l;do{if(h===0){Fa&&!l&&Gi(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!Lb(a)){h=Rf(t,r,!1),f=!1;continue}if(h===2){if(f=r,t.errorRecoveryDisabledLanes&f)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var w=t;h=Rl;var N=w.current.memoizedState.isDehydrated;if(N&&(Ya(w,v).flags|=256),v=Rf(w,v,!1),v!==2){if(yf&&!N){w.errorRecoveryDisabledLanes|=f,Ys|=f,h=4;break e}f=pn,pn=h,f!==null&&(pn===null?pn=f:pn.push.apply(pn,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){Ya(t,0),Gi(t,r,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Gi(l,r,Hn,!qi);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=Ef+300-fn(),10<h)){if(Gi(l,r,Hn,!qi),ha(l,0,!0)!==0)break e;l.timeoutHandle=P_(s_.bind(null,l,a,pn,Sc,vf,r,Hn,Ys,Ga,qi,f,2,-0,0),h);break e}s_(l,a,pn,Sc,vf,r,Hn,Ys,Ga,qi,f,0,-0,0)}}break}while(!0);wr(t)}function s_(t,r,a,l,h,f,v,w,N,q,K,W,B,F){if(t.timeoutHandle=-1,W=r.subtreeFlags,(W&8192||(W&16785408)===16785408)&&(Vl={stylesheets:null,count:0,unsuspend:_A},Zy(r),W=EA(),W!==null)){t.cancelPendingCommit=W(d_.bind(null,t,r,f,a,l,h,v,w,N,K,1,B,F)),Gi(t,f,v,!q);return}d_(t,r,f,a,l,h,v,w,N)}function Lb(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!wn(f(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Gi(t,r,a,l){r&=~_f,r&=~Ys,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var f=31-kt(h),v=1<<f;l[f]=-1,h&=~v}a!==0&&or(t,a,r)}function Rc(){return($e&6)===0?(Il(0),!1):!0}function Af(){if(Ve!==null){if(We===0)var t=Ve.return;else t=Ve,ei=Bs=null,zd(t),za=null,_l=0,t=Ve;for(;t!==null;)Uy(t.alternate,t),t=t.return;Ve=null}}function Ya(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,tA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Af(),st=t,Ve=a=Wr(t.current,null),qe=r,We=0,Rn=null,qi=!1,Fa=Es(t,r),yf=!1,Ga=Hn=_f=Ys=Bi=mt=0,pn=Rl=null,vf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-kt(l),f=1<<h;r|=t[h],l&=~f}return li=r,Yu(),a}function a_(t,r){Oe=null,Q.H=fc,r===ul||r===rc?(r=bp(),We=3):r===Ep?(r=bp(),We=4):We=r===Ay?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Rn=r,Ve===null&&(mt=1,_c(t,Un(r,t.current)))}function o_(){var t=Q.H;return Q.H=fc,t===null?fc:t}function l_(){var t=Q.A;return Q.A=Mb,t}function Sf(){mt=4,qi||(qe&4194048)!==qe&&Bn.current!==null||(Fa=!0),(Bi&134217727)===0&&(Ys&134217727)===0||st===null||Gi(st,qe,Hn,!1)}function Rf(t,r,a){var l=$e;$e|=2;var h=o_(),f=l_();(st!==t||qe!==r)&&(Sc=null,Ya(t,r)),r=!1;var v=mt;e:do try{if(We!==0&&Ve!==null){var w=Ve,N=Rn;switch(We){case 8:Af(),v=6;break e;case 3:case 2:case 9:case 6:Bn.current===null&&(r=!0);var q=We;if(We=0,Rn=null,Xa(t,w,N,q),a&&Fa){v=0;break e}break;default:q=We,We=0,Rn=null,Xa(t,w,N,q)}}Ub(),v=mt;break}catch(K){a_(t,K)}while(!0);return r&&t.shellSuspendCounter++,ei=Bs=null,$e=l,Q.H=h,Q.A=f,Ve===null&&(st=null,qe=0,Yu()),v}function Ub(){for(;Ve!==null;)u_(Ve)}function jb(t,r){var a=$e;$e|=2;var l=o_(),h=l_();st!==t||qe!==r?(Sc=null,Ac=fn()+500,Ya(t,r)):Fa=Es(t,r);e:do try{if(We!==0&&Ve!==null){r=Ve;var f=Rn;t:switch(We){case 1:We=0,Rn=null,Xa(t,r,f,1);break;case 2:case 9:if(Tp(f)){We=0,Rn=null,c_(r);break}r=function(){We!==2&&We!==9||st!==t||(We=7),wr(t)},f.then(r,r);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Tp(f)?(We=0,Rn=null,c_(r)):(We=0,Rn=null,Xa(t,r,f,7));break;case 5:var v=null;switch(Ve.tag){case 26:v=Ve.memoizedState;case 5:case 27:var w=Ve;if(!v||G_(v)){We=0,Rn=null;var N=w.sibling;if(N!==null)Ve=N;else{var q=w.return;q!==null?(Ve=q,xc(q)):Ve=null}break t}}We=0,Rn=null,Xa(t,r,f,5);break;case 6:We=0,Rn=null,Xa(t,r,f,6);break;case 8:Af(),mt=6;break e;default:throw Error(s(462))}}zb();break}catch(K){a_(t,K)}while(!0);return ei=Bs=null,Q.H=l,Q.A=h,$e=a,Ve!==null?0:(st=null,qe=0,Yu(),mt)}function zb(){for(;Ve!==null&&!_s();)u_(Ve)}function u_(t){var r=ky(t.alternate,t,li);t.memoizedProps=t.pendingProps,r===null?xc(t):Ve=r}function c_(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Ny(a,r,r.pendingProps,r.type,void 0,qe);break;case 11:r=Ny(a,r,r.pendingProps,r.type.render,r.ref,qe);break;case 5:zd(r);default:Uy(a,r),r=Ve=hp(r,li),r=ky(a,r,li)}t.memoizedProps=t.pendingProps,r===null?xc(t):Ve=r}function Xa(t,r,a,l){ei=Bs=null,zd(r),za=null,_l=0;var h=r.return;try{if(Cb(t,h,r,a,qe)){mt=1,_c(t,Un(a,t.current)),Ve=null;return}}catch(f){if(h!==null)throw Ve=h,f;mt=1,_c(t,Un(a,t.current)),Ve=null;return}r.flags&32768?(Ke||l===1?t=!0:Fa||(qe&536870912)!==0?t=!1:(qi=t=!0,(l===2||l===9||l===3||l===6)&&(l=Bn.current,l!==null&&l.tag===13&&(l.flags|=16384))),h_(r,t)):xc(r)}function xc(t){var r=t;do{if((r.flags&32768)!==0){h_(r,qi);return}t=r.return;var a=Db(r.alternate,r,li);if(a!==null){Ve=a;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=t}while(r!==null);mt===0&&(mt=5)}function h_(t,r){do{var a=Ob(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);mt=6,Ve=null}function d_(t,r,a,l,h,f,v,w,N){t.cancelPendingCommit=null;do Ic();while(Kt!==0);if(($e&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=gd,Uo(t,a,f,v,w,N),t===st&&(Ve=st=null,qe=0),Qa=r,Fi=t,Ka=a,Tf=f,wf=h,n_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Fb(Ur,function(){return y_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=te.p,te.p=2,v=$e,$e|=4;try{Pb(t,r,a)}finally{$e=v,te.p=h,Q.T=l}}Kt=1,f_(),m_(),g_()}}function f_(){if(Kt===1){Kt=0;var t=Fi,r=Qa,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=te.p;te.p=2;var h=$e;$e|=4;try{Xy(r,t);var f=Uf,v=tp(t.containerInfo),w=f.focusedElem,N=f.selectionRange;if(v!==w&&w&&w.ownerDocument&&ep(w.ownerDocument.documentElement,w)){if(N!==null&&cd(w)){var q=N.start,K=N.end;if(K===void 0&&(K=q),"selectionStart"in w)w.selectionStart=q,w.selectionEnd=Math.min(K,w.value.length);else{var W=w.ownerDocument||document,B=W&&W.defaultView||window;if(B.getSelection){var F=B.getSelection(),Se=w.textContent.length,Ee=Math.min(N.start,Se),nt=N.end===void 0?Ee:Math.min(N.end,Se);!F.extend&&Ee>nt&&(v=nt,nt=Ee,Ee=v);var L=Jg(w,Ee),M=Jg(w,nt);if(L&&M&&(F.rangeCount!==1||F.anchorNode!==L.node||F.anchorOffset!==L.offset||F.focusNode!==M.node||F.focusOffset!==M.offset)){var z=W.createRange();z.setStart(L.node,L.offset),F.removeAllRanges(),Ee>nt?(F.addRange(z),F.extend(M.node,M.offset)):(z.setEnd(M.node,M.offset),F.addRange(z))}}}}for(W=[],F=w;F=F.parentNode;)F.nodeType===1&&W.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<W.length;w++){var X=W[w];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}zc=!!Lf,Uf=Lf=null}finally{$e=h,te.p=l,Q.T=a}}t.current=r,Kt=2}}function m_(){if(Kt===2){Kt=0;var t=Fi,r=Qa,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=te.p;te.p=2;var h=$e;$e|=4;try{Gy(t,r.alternate,r)}finally{$e=h,te.p=l,Q.T=a}}Kt=3}}function g_(){if(Kt===4||Kt===3){Kt=0,la();var t=Fi,r=Qa,a=Ka,l=n_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Kt=5:(Kt=0,Qa=Fi=null,p_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Hi=null),da(a),r=r.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(lt,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=Q.T,h=te.p,te.p=2,Q.T=null;try{for(var f=t.onRecoverableError,v=0;v<l.length;v++){var w=l[v];f(w.value,{componentStack:w.stack})}}finally{Q.T=r,te.p=h}}(Ka&3)!==0&&Ic(),wr(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===bf?xl++:(xl=0,bf=t):xl=0,Il(0)}}function p_(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,ol(r)))}function Ic(t){return f_(),m_(),g_(),y_()}function y_(){if(Kt!==5)return!1;var t=Fi,r=Tf;Tf=0;var a=da(Ka),l=Q.T,h=te.p;try{te.p=32>a?32:a,Q.T=null,a=wf,wf=null;var f=Fi,v=Ka;if(Kt=0,Qa=Fi=null,Ka=0,($e&6)!==0)throw Error(s(331));var w=$e;if($e|=4,e_(f.current),Wy(f,f.current,v,a),$e=w,Il(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(lt,f)}catch{}return!0}finally{te.p=h,Q.T=l,p_(t,r)}}function __(t,r,a){r=Un(a,r),r=ef(t.stateNode,r,2),t=Vi(t,r,2),t!==null&&(zr(t,2),wr(t))}function rt(t,r,a){if(t.tag===3)__(t,t,a);else for(;r!==null;){if(r.tag===3){__(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Hi===null||!Hi.has(l))){t=Un(a,t),a=wy(2),l=Vi(r,a,2),l!==null&&(by(a,l,r,t),zr(l,2),wr(l));break}}r=r.return}}function xf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new kb;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(yf=!0,h.add(a),t=qb.bind(null,t,r,a),r.then(t,t))}function qb(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,st===t&&(qe&a)===a&&(mt===4||mt===3&&(qe&62914560)===qe&&300>fn()-Ef?($e&2)===0&&Ya(t,0):_f|=a,Ga===qe&&(Ga=0)),wr(t)}function v_(t,r){r===0&&(r=Lo()),t=Na(t,r),t!==null&&(zr(t,r),wr(t))}function Bb(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),v_(t,a)}function Hb(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),v_(t,a)}function Fb(t,r){return kr(t,r)}var Cc=null,$a=null,If=!1,Nc=!1,Cf=!1,Xs=0;function wr(t){t!==$a&&t.next===null&&($a===null?Cc=$a=t:$a=$a.next=t),Nc=!0,If||(If=!0,Qb())}function Il(t,r){if(!Cf&&Nc){Cf=!0;do for(var a=!1,l=Cc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var v=l.suspendedLanes,w=l.pingedLanes;f=(1<<31-kt(42|t)+1)-1,f&=h&~(v&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,b_(l,f))}else f=qe,f=ha(l,l===st?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Es(l,f)||(a=!0,b_(l,f));l=l.next}while(a);Cf=!1}}function Gb(){E_()}function E_(){Nc=If=!1;var t=0;Xs!==0&&(eA()&&(t=Xs),Xs=0);for(var r=fn(),a=null,l=Cc;l!==null;){var h=l.next,f=T_(l,r);f===0?(l.next=null,a===null?Cc=h:a.next=h,h===null&&($a=a)):(a=l,(t!==0||(f&3)!==0)&&(Nc=!0)),l=h}Il(t)}function T_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var v=31-kt(f),w=1<<v,N=h[v];N===-1?((w&a)===0||(w&l)!==0)&&(h[v]=Mo(w,r)):N<=r&&(t.expiredLanes|=w),f&=~w}if(r=st,a=qe,a=ha(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(We===2||We===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Lr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Es(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Lr(l),da(a)){case 2:case 8:a=Ti;break;case 32:a=Ur;break;case 268435456:a=wi;break;default:a=Ur}return l=w_.bind(null,t),a=kr(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Lr(l),t.callbackPriority=2,t.callbackNode=null,2}function w_(t,r){if(Kt!==0&&Kt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Ic()&&t.callbackNode!==a)return null;var l=qe;return l=ha(t,t===st?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(i_(t,l,r),T_(t,fn()),t.callbackNode!=null&&t.callbackNode===a?w_.bind(null,t):null)}function b_(t,r){if(Ic())return null;i_(t,r,!0)}function Qb(){nA(function(){($e&6)!==0?kr(vs,Gb):E_()})}function Nf(){return Xs===0&&(Xs=ko()),Xs}function A_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:_a(""+t)}function S_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function Kb(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var f=A_((h[wt]||null).action),v=l.submitter;v&&(r=(r=v[wt]||null)?A_(r.formAction):v.getAttribute("formAction"),r!==null&&(f=r,v=null));var w=new va("action","action",null,l,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Xs!==0){var N=v?S_(h,v):new FormData(h);Xd(a,{pending:!0,data:N,method:h.method,action:f},null,N)}}else typeof f=="function"&&(w.preventDefault(),N=v?S_(h,v):new FormData(h),Xd(a,{pending:!0,data:N,method:h.method,action:f},f,N))},currentTarget:h}]})}}for(var Df=0;Df<md.length;Df++){var Of=md[Df],Yb=Of.toLowerCase(),Xb=Of[0].toUpperCase()+Of.slice(1);Wn(Yb,"on"+Xb)}Wn(ip,"onAnimationEnd"),Wn(sp,"onAnimationIteration"),Wn(ap,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(db,"onTransitionRun"),Wn(fb,"onTransitionStart"),Wn(mb,"onTransitionCancel"),Wn(op,"onTransitionEnd"),Br("onMouseEnter",["mouseout","mouseover"]),Br("onMouseLeave",["mouseout","mouseover"]),Br("onPointerEnter",["pointerout","pointerover"]),Br("onPointerLeave",["pointerout","pointerover"]),Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$b=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cl));function R_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var v=l.length-1;0<=v;v--){var w=l[v],N=w.instance,q=w.currentTarget;if(w=w.listener,N!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=q;try{f(h)}catch(K){yc(K)}h.currentTarget=null,f=N}else for(v=0;v<l.length;v++){if(w=l[v],N=w.instance,q=w.currentTarget,w=w.listener,N!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=q;try{f(h)}catch(K){yc(K)}h.currentTarget=null,f=N}}}}function Me(t,r){var a=r[zo];a===void 0&&(a=r[zo]=new Set);var l=t+"__bubble";a.has(l)||(x_(r,t,2,!1),a.add(l))}function Pf(t,r,a){var l=0;r&&(l|=4),x_(a,t,l,r)}var Dc="_reactListening"+Math.random().toString(36).slice(2);function Vf(t){if(!t[Dc]){t[Dc]=!0,qo.forEach(function(a){a!=="selectionchange"&&($b.has(a)||Pf(a,!1,t),Pf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Dc]||(r[Dc]=!0,Pf("selectionchange",!1,r))}}function x_(t,r,a,l){switch(W_(r)){case 2:var h=bA;break;case 8:h=AA;break;default:h=Yf}a=h.bind(null,r,a,t),h=void 0,!kn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function Mf(t,r,a,l,h){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var w=l.stateNode.containerInfo;if(w===h)break;if(v===4)for(v=l.return;v!==null;){var N=v.tag;if((N===3||N===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;w!==null;){if(v=qr(w),v===null)return;if(N=v.tag,N===5||N===6||N===26||N===27){l=f=v;continue e}w=w.parentNode}}l=l.return}Pu(function(){var q=f,K=Mn(a),W=[];e:{var B=lp.get(t);if(B!==void 0){var F=va,Se=t;switch(t){case"keypress":if(fr(a)===0)break e;case"keydown":case"keyup":F=Sa;break;case"focusin":Se="focus",F=wa;break;case"focusout":Se="blur",F=wa;break;case"beforeblur":case"afterblur":F=wa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Ln;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=ad;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=qu;break;case ip:case sp:case ap:F=ba;break;case op:F=Hu;break;case"scroll":case"scrollend":F=Vu;break;case"wheel":F=Ra;break;case"copy":case"cut":case"paste":F=Aa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Jo;break;case"toggle":case"beforetoggle":F=Gu}var Ee=(r&4)!==0,nt=!Ee&&(t==="scroll"||t==="scrollend"),L=Ee?B!==null?B+"Capture":null:B;Ee=[];for(var M=q,z;M!==null;){var X=M;if(z=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||z===null||L===null||(X=Is(M,L),X!=null&&Ee.push(Nl(M,X,z))),nt)break;M=M.return}0<Ee.length&&(B=new F(B,Se,null,a,K),W.push({event:B,listeners:Ee}))}}if((r&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",F=t==="mouseout"||t==="pointerout",B&&a!==Gr&&(Se=a.relatedTarget||a.fromElement)&&(qr(Se)||Se[Pn]))break e;if((F||B)&&(B=K.window===K?K:(B=K.ownerDocument)?B.defaultView||B.parentWindow:window,F?(Se=a.relatedTarget||a.toElement,F=q,Se=Se?qr(Se):null,Se!==null&&(nt=u(Se),Ee=Se.tag,Se!==nt||Ee!==5&&Ee!==27&&Ee!==6)&&(Se=null)):(F=null,Se=q),F!==Se)){if(Ee=Ln,X="onMouseLeave",L="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(Ee=Jo,X="onPointerLeave",L="onPointerEnter",M="pointer"),nt=F==null?B:ur(F),z=Se==null?B:ur(Se),B=new Ee(X,M+"leave",F,a,K),B.target=nt,B.relatedTarget=z,X=null,qr(K)===q&&(Ee=new Ee(L,M+"enter",Se,a,K),Ee.target=z,Ee.relatedTarget=nt,X=Ee),nt=X,F&&Se)t:{for(Ee=F,L=Se,M=0,z=Ee;z;z=Wa(z))M++;for(z=0,X=L;X;X=Wa(X))z++;for(;0<M-z;)Ee=Wa(Ee),M--;for(;0<z-M;)L=Wa(L),z--;for(;M--;){if(Ee===L||L!==null&&Ee===L.alternate)break t;Ee=Wa(Ee),L=Wa(L)}Ee=null}else Ee=null;F!==null&&I_(W,B,F,Ee,!1),Se!==null&&nt!==null&&I_(W,nt,Se,Ee,!0)}}e:{if(B=q?ur(q):window,F=B.nodeName&&B.nodeName.toLowerCase(),F==="select"||F==="input"&&B.type==="file")var fe=Kg;else if(Ot(B))if(Yg)fe=ub;else{fe=ob;var Pe=ab}else F=B.nodeName,!F||F.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?q&&Qo(q.elementType)&&(fe=Kg):fe=lb;if(fe&&(fe=fe(t,q))){$r(W,fe,a,K);break e}Pe&&Pe(t,B,q),t==="focusout"&&q&&B.type==="number"&&q.memoizedProps.value!=null&&Ci(B,"number",B.value)}switch(Pe=q?ur(q):window,t){case"focusin":(Ot(Pe)||Pe.contentEditable==="true")&&(xa=Pe,hd=q,nl=null);break;case"focusout":nl=hd=xa=null;break;case"mousedown":dd=!0;break;case"contextmenu":case"mouseup":case"dragend":dd=!1,np(W,a,K);break;case"selectionchange":if(hb)break;case"keydown":case"keyup":np(W,a,K)}var ye;if(pr)e:{switch(t){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else je?G(t,a)&&(we="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(_&&a.locale!=="ko"&&(je||we!=="onCompositionStart"?we==="onCompositionEnd"&&je&&(ye=Yo()):(dr=K,Ni="value"in dr?dr.value:dr.textContent,je=!0)),Pe=Oc(q,we),0<Pe.length&&(we=new Wo(we,t,null,a,K),W.push({event:we,listeners:Pe}),ye?we.data=ye:(ye=se(a),ye!==null&&(we.data=ye)))),(ye=g?Dt(t,a):ze(t,a))&&(we=Oc(q,"onBeforeInput"),0<we.length&&(Pe=new Wo("onBeforeInput","beforeinput",null,a,K),W.push({event:Pe,listeners:we}),Pe.data=ye)),Kb(W,t,q,a,K)}R_(W,r)})}function Nl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Oc(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Is(t,a),h!=null&&l.unshift(Nl(t,h,f)),h=Is(t,r),h!=null&&l.push(Nl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function Wa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function I_(t,r,a,l,h){for(var f=r._reactName,v=[];a!==null&&a!==l;){var w=a,N=w.alternate,q=w.stateNode;if(w=w.tag,N!==null&&N===l)break;w!==5&&w!==26&&w!==27||q===null||(N=q,h?(q=Is(a,f),q!=null&&v.unshift(Nl(a,q,N))):h||(q=Is(a,f),q!=null&&v.push(Nl(a,q,N)))),a=a.return}v.length!==0&&t.push({event:r,listeners:v})}var Wb=/\r\n?/g,Zb=/\u0000|\uFFFD/g;function C_(t){return(typeof t=="string"?t:""+t).replace(Wb,`
`).replace(Zb,"")}function N_(t,r){return r=C_(r),C_(t)===r}function Pc(){}function tt(t,r,a,l,h,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Vn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Vn(t,""+l);break;case"className":cr(t,"class",l);break;case"tabIndex":cr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":cr(t,a,l);break;case"style":Go(t,l,f);break;case"data":if(r!=="object"){cr(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=_a(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&tt(t,r,"name",h.name,h,null),tt(t,r,"formEncType",h.formEncType,h,null),tt(t,r,"formMethod",h.formMethod,h,null),tt(t,r,"formTarget",h.formTarget,h,null)):(tt(t,r,"encType",h.encType,h,null),tt(t,r,"method",h.method,h,null),tt(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=_a(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Pc);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=_a(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Me("beforetoggle",t),Me("toggle",t),Ii(t,"popover",l);break;case"xlinkActuate":Ft(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ft(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ft(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ft(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ft(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ft(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ft(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ft(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ft(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ii(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=id.get(a)||a,Ii(t,a,l))}}function kf(t,r,a,l,h,f){switch(a){case"style":Go(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Vn(t,l):(typeof l=="number"||typeof l=="bigint")&&Vn(t,""+l);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Pc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),f=t[wt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ii(t,a,l)}}}function Yt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",t),Me("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:tt(t,r,f,v,a,null)}}h&&tt(t,r,"srcSet",a.srcSet,a,null),l&&tt(t,r,"src",a.src,a,null);return;case"input":Me("invalid",t);var w=f=v=h=null,N=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":h=K;break;case"type":v=K;break;case"checked":N=K;break;case"defaultChecked":q=K;break;case"value":f=K;break;case"defaultValue":w=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:tt(t,r,l,K,a,null)}}Ss(t,f,w,N,q,v,h,!1),ya(t);return;case"select":Me("invalid",t),l=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":f=w;break;case"defaultValue":v=w;break;case"multiple":l=w;default:tt(t,r,h,w,a,null)}r=f,a=v,t.multiple=!!l,r!=null?Fr(t,!!l,r,!1):a!=null&&Fr(t,!!l,a,!0);return;case"textarea":Me("invalid",t),f=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(w=a[v],w!=null))switch(v){case"value":l=w;break;case"defaultValue":h=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:tt(t,r,v,w,a,null)}Rs(t,l,h,f),ya(t);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:tt(t,r,N,l,a,null)}return;case"dialog":Me("beforetoggle",t),Me("toggle",t),Me("cancel",t),Me("close",t);break;case"iframe":case"object":Me("load",t);break;case"video":case"audio":for(l=0;l<Cl.length;l++)Me(Cl[l],t);break;case"image":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"embed":case"source":case"link":Me("error",t),Me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:tt(t,r,q,l,a,null)}return;default:if(Qo(r)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&kf(t,r,K,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&tt(t,r,w,l,a,null))}function Jb(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,w=null,N=null,q=null,K=null;for(F in a){var W=a[F];if(a.hasOwnProperty(F)&&W!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":N=W;default:l.hasOwnProperty(F)||tt(t,r,F,null,l,W)}}for(var B in l){var F=l[B];if(W=a[B],l.hasOwnProperty(B)&&(F!=null||W!=null))switch(B){case"type":f=F;break;case"name":h=F;break;case"checked":q=F;break;case"defaultChecked":K=F;break;case"value":v=F;break;case"defaultValue":w=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,r));break;default:F!==W&&tt(t,r,B,F,l,W)}}Tn(t,v,w,N,q,K,f,h);return;case"select":F=v=w=B=null;for(f in a)if(N=a[f],a.hasOwnProperty(f)&&N!=null)switch(f){case"value":break;case"multiple":F=N;default:l.hasOwnProperty(f)||tt(t,r,f,null,l,N)}for(h in l)if(f=l[h],N=a[h],l.hasOwnProperty(h)&&(f!=null||N!=null))switch(h){case"value":B=f;break;case"defaultValue":w=f;break;case"multiple":v=f;default:f!==N&&tt(t,r,h,f,l,N)}r=w,a=v,l=F,B!=null?Fr(t,!!a,B,!1):!!l!=!!a&&(r!=null?Fr(t,!!a,r,!0):Fr(t,!!a,a?[]:"",!1));return;case"textarea":F=B=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:tt(t,r,w,null,l,h)}for(v in l)if(h=l[v],f=a[v],l.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":B=h;break;case"defaultValue":F=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&tt(t,r,v,h,l,f)}Je(t,B,F);return;case"option":for(var Se in a)if(B=a[Se],a.hasOwnProperty(Se)&&B!=null&&!l.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:tt(t,r,Se,null,l,B)}for(N in l)if(B=l[N],F=a[N],l.hasOwnProperty(N)&&B!==F&&(B!=null||F!=null))switch(N){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:tt(t,r,N,B,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)B=a[Ee],a.hasOwnProperty(Ee)&&B!=null&&!l.hasOwnProperty(Ee)&&tt(t,r,Ee,null,l,B);for(q in l)if(B=l[q],F=a[q],l.hasOwnProperty(q)&&B!==F&&(B!=null||F!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,r));break;default:tt(t,r,q,B,l,F)}return;default:if(Qo(r)){for(var nt in a)B=a[nt],a.hasOwnProperty(nt)&&B!==void 0&&!l.hasOwnProperty(nt)&&kf(t,r,nt,void 0,l,B);for(K in l)B=l[K],F=a[K],!l.hasOwnProperty(K)||B===F||B===void 0&&F===void 0||kf(t,r,K,B,l,F);return}}for(var L in a)B=a[L],a.hasOwnProperty(L)&&B!=null&&!l.hasOwnProperty(L)&&tt(t,r,L,null,l,B);for(W in l)B=l[W],F=a[W],!l.hasOwnProperty(W)||B===F||B==null&&F==null||tt(t,r,W,B,l,F)}var Lf=null,Uf=null;function Vc(t){return t.nodeType===9?t:t.ownerDocument}function D_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function O_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function jf(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var zf=null;function eA(){var t=window.event;return t&&t.type==="popstate"?t===zf?!1:(zf=t,!0):(zf=null,!1)}var P_=typeof setTimeout=="function"?setTimeout:void 0,tA=typeof clearTimeout=="function"?clearTimeout:void 0,V_=typeof Promise=="function"?Promise:void 0,nA=typeof queueMicrotask=="function"?queueMicrotask:typeof V_<"u"?function(t){return V_.resolve(null).then(t).catch(rA)}:P_;function rA(t){setTimeout(function(){throw t})}function Qi(t){return t==="head"}function M_(t,r){var a=r,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var v=t.ownerDocument;if(a&1&&Dl(v.documentElement),a&2&&Dl(v.body),a&4)for(a=v.head,Dl(a),v=a.firstChild;v;){var w=v.nextSibling,N=v.nodeName;v[Ts]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=w}}if(h===0){t.removeChild(f),jl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);jl(r)}function qf(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":qf(a),xi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function iA(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ts])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Jn(t.nextSibling),t===null)break}return null}function sA(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Jn(t.nextSibling),t===null))return null;return t}function Bf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function aA(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Jn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var Hf=null;function k_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function L_(t,r,a){switch(r=Vc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Dl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);xi(t)}var Fn=new Map,U_=new Set;function Mc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ui=te.d;te.d={f:oA,r:lA,D:uA,C:cA,L:hA,m:dA,X:mA,S:fA,M:gA};function oA(){var t=ui.f(),r=Rc();return t||r}function lA(t){var r=lr(t);r!==null&&r.tag===5&&r.type==="form"?iy(r):ui.r(t)}var Za=typeof document>"u"?null:document;function j_(t,r,a){var l=Za;if(l&&typeof r=="string"&&r){var h=bt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),U_.has(h)||(U_.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Yt(r,"link",t),pt(r),l.head.appendChild(r)))}}function uA(t){ui.D(t),j_("dns-prefetch",t,null)}function cA(t,r){ui.C(t,r),j_("preconnect",t,r)}function hA(t,r,a){ui.L(t,r,a);var l=Za;if(l&&t&&r){var h='link[rel="preload"][as="'+bt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+bt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+bt(a.imageSizes)+'"]')):h+='[href="'+bt(t)+'"]';var f=h;switch(r){case"style":f=Ja(t);break;case"script":f=eo(t)}Fn.has(f)||(t=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Fn.set(f,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(Ol(f))||r==="script"&&l.querySelector(Pl(f))||(r=l.createElement("link"),Yt(r,"link",t),pt(r),l.head.appendChild(r)))}}function dA(t,r){ui.m(t,r);var a=Za;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+bt(l)+'"][href="'+bt(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=eo(t)}if(!Fn.has(f)&&(t=T({rel:"modulepreload",href:t},r),Fn.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Pl(f)))return}l=a.createElement("link"),Yt(l,"link",t),pt(l),a.head.appendChild(l)}}}function fA(t,r,a){ui.S(t,r,a);var l=Za;if(l&&t){var h=un(l).hoistableStyles,f=Ja(t);r=r||"default";var v=h.get(f);if(!v){var w={loading:0,preload:null};if(v=l.querySelector(Ol(f)))w.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Fn.get(f))&&Ff(t,a);var N=v=l.createElement("link");pt(N),Yt(N,"link",t),N._p=new Promise(function(q,K){N.onload=q,N.onerror=K}),N.addEventListener("load",function(){w.loading|=1}),N.addEventListener("error",function(){w.loading|=2}),w.loading|=4,kc(v,r,l)}v={type:"stylesheet",instance:v,count:1,state:w},h.set(f,v)}}}function mA(t,r){ui.X(t,r);var a=Za;if(a&&t){var l=un(a).hoistableScripts,h=eo(t),f=l.get(h);f||(f=a.querySelector(Pl(h)),f||(t=T({src:t,async:!0},r),(r=Fn.get(h))&&Gf(t,r),f=a.createElement("script"),pt(f),Yt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function gA(t,r){ui.M(t,r);var a=Za;if(a&&t){var l=un(a).hoistableScripts,h=eo(t),f=l.get(h);f||(f=a.querySelector(Pl(h)),f||(t=T({src:t,async:!0,type:"module"},r),(r=Fn.get(h))&&Gf(t,r),f=a.createElement("script"),pt(f),Yt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function z_(t,r,a,l){var h=(h=Te.current)?Mc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Ja(a.href),a=un(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ja(a.href);var f=un(h).hoistableStyles,v=f.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,v),(f=h.querySelector(Ol(t)))&&!f._p&&(v.instance=f,v.state.loading=5),Fn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Fn.set(t,a),f||pA(h,t,a,v.state))),r&&l===null)throw Error(s(528,""));return v}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=eo(a),a=un(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ja(t){return'href="'+bt(t)+'"'}function Ol(t){return'link[rel="stylesheet"]['+t+"]"}function q_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function pA(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Yt(r,"link",a),pt(r),t.head.appendChild(r))}function eo(t){return'[src="'+bt(t)+'"]'}function Pl(t){return"script[async]"+t}function B_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+bt(a.href)+'"]');if(l)return r.instance=l,pt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),pt(l),Yt(l,"style",h),kc(l,a.precedence,t),r.instance=l;case"stylesheet":h=Ja(a.href);var f=t.querySelector(Ol(h));if(f)return r.state.loading|=4,r.instance=f,pt(f),f;l=q_(a),(h=Fn.get(h))&&Ff(l,h),f=(t.ownerDocument||t).createElement("link"),pt(f);var v=f;return v._p=new Promise(function(w,N){v.onload=w,v.onerror=N}),Yt(f,"link",l),r.state.loading|=4,kc(f,a.precedence,t),r.instance=f;case"script":return f=eo(a.src),(h=t.querySelector(Pl(f)))?(r.instance=h,pt(h),h):(l=a,(h=Fn.get(f))&&(l=T({},a),Gf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),pt(h),Yt(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,kc(l,a.precedence,t));return r.instance}function kc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,v=0;v<l.length;v++){var w=l[v];if(w.dataset.precedence===r)f=w;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Ff(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Gf(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Lc=null;function H_(t,r,a){if(Lc===null){var l=new Map,h=Lc=new Map;h.set(a,l)}else h=Lc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Ts]||f[Nt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(r)||"";v=t+v;var w=l.get(v);w?w.push(f):l.set(v,[f])}}return l}function F_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function yA(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function G_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Vl=null;function _A(){}function vA(t,r,a){if(Vl===null)throw Error(s(475));var l=Vl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=Ja(a.href),f=t.querySelector(Ol(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Uc.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=f,pt(f);return}f=t.ownerDocument||t,a=q_(a),(h=Fn.get(h))&&Ff(a,h),f=f.createElement("link"),pt(f);var v=f;v._p=new Promise(function(w,N){v.onload=w,v.onerror=N}),Yt(f,"link",a),r.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Uc.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function EA(){if(Vl===null)throw Error(s(475));var t=Vl;return t.stylesheets&&t.count===0&&Qf(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&Qf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Uc(){if(this.count--,this.count===0){if(this.stylesheets)Qf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var jc=null;function Qf(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,jc=new Map,r.forEach(TA,t),jc=null,Uc.call(t))}function TA(t,r){if(!(r.state.loading&4)){var a=jc.get(t);if(a)var l=a.get(null);else{a=new Map,jc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=r.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||l,f===l&&a.set(null,h),a.set(v,h),this.count++,l=Uc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Ml={$$typeof:re,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function wA(t,r,a,l,h,f,v,w){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jr(0),this.hiddenUpdates=jr(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Q_(t,r,a,l,h,f,v,w,N,q,K,W){return t=new wA(t,r,a,v,w,N,q,W),r=1,f===!0&&(r|=24),f=bn(3,null,null,r),t.current=f,f.stateNode=t,r=Rd(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Nd(f),t}function K_(t){return t?(t=Da,t):Da}function Y_(t,r,a,l,h,f){h=K_(h),l.context===null?l.context=h:l.pendingContext=h,l=Pi(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Vi(t,l,r),a!==null&&(In(a,t,r),hl(a,t,r))}function X_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Kf(t,r){X_(t,r),(t=t.alternate)&&X_(t,r)}function $_(t){if(t.tag===13){var r=Na(t,67108864);r!==null&&In(r,t,67108864),Kf(t,67108864)}}var zc=!0;function bA(t,r,a,l){var h=Q.T;Q.T=null;var f=te.p;try{te.p=2,Yf(t,r,a,l)}finally{te.p=f,Q.T=h}}function AA(t,r,a,l){var h=Q.T;Q.T=null;var f=te.p;try{te.p=8,Yf(t,r,a,l)}finally{te.p=f,Q.T=h}}function Yf(t,r,a,l){if(zc){var h=Xf(l);if(h===null)Mf(t,r,l,qc,a),Z_(t,l);else if(RA(h,t,r,a,l))l.stopPropagation();else if(Z_(t,l),r&4&&-1<SA.indexOf(t)){for(;h!==null;){var f=lr(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Yn(f.pendingLanes);if(v!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var N=1<<31-kt(v);w.entanglements[1]|=N,v&=~N}wr(f),($e&6)===0&&(Ac=fn()+500,Il(0))}}break;case 13:w=Na(f,2),w!==null&&In(w,f,2),Rc(),Kf(f,2)}if(f=Xf(l),f===null&&Mf(t,r,l,qc,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else Mf(t,r,l,null,a)}}function Xf(t){return t=Mn(t),$f(t)}var qc=null;function $f(t){if(qc=null,t=qr(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return qc=t,null}function W_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Po()){case vs:return 2;case Ti:return 8;case Ur:case Vo:return 32;case wi:return 268435456;default:return 32}default:return 32}}var Wf=!1,Ki=null,Yi=null,Xi=null,kl=new Map,Ll=new Map,$i=[],SA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Z_(t,r){switch(t){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":kl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(r.pointerId)}}function Ul(t,r,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},r!==null&&(r=lr(r),r!==null&&$_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function RA(t,r,a,l,h){switch(r){case"focusin":return Ki=Ul(Ki,t,r,a,l,h),!0;case"dragenter":return Yi=Ul(Yi,t,r,a,l,h),!0;case"mouseover":return Xi=Ul(Xi,t,r,a,l,h),!0;case"pointerover":var f=h.pointerId;return kl.set(f,Ul(kl.get(f)||null,t,r,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Ll.set(f,Ul(Ll.get(f)||null,t,r,a,l,h)),!0}return!1}function J_(t){var r=qr(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,Ru(t.priority,function(){if(a.tag===13){var l=xn();l=Ai(l);var h=Na(a,l);h!==null&&In(h,a,l),Kf(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bc(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Xf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Gr=l,a.target.dispatchEvent(l),Gr=null}else return r=lr(a),r!==null&&$_(r),t.blockedOn=a,!1;r.shift()}return!0}function ev(t,r,a){Bc(t)&&a.delete(r)}function xA(){Wf=!1,Ki!==null&&Bc(Ki)&&(Ki=null),Yi!==null&&Bc(Yi)&&(Yi=null),Xi!==null&&Bc(Xi)&&(Xi=null),kl.forEach(ev),Ll.forEach(ev)}function Hc(t,r){t.blockedOn===r&&(t.blockedOn=null,Wf||(Wf=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,xA)))}var Fc=null;function tv(t){Fc!==t&&(Fc=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Fc===t&&(Fc=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if($f(l||a)===null)continue;break}var f=lr(a);f!==null&&(t.splice(r,3),r-=3,Xd(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function jl(t){function r(N){return Hc(N,t)}Ki!==null&&Hc(Ki,t),Yi!==null&&Hc(Yi,t),Xi!==null&&Hc(Xi,t),kl.forEach(r),Ll.forEach(r);for(var a=0;a<$i.length;a++){var l=$i[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<$i.length&&(a=$i[0],a.blockedOn===null);)J_(a),a.blockedOn===null&&$i.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],v=h[wt]||null;if(typeof f=="function")v||tv(a);else if(v){var w=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[wt]||null)w=v.formAction;else if($f(h)!==null)continue}else w=v.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),tv(a)}}}function Zf(t){this._internalRoot=t}Gc.prototype.render=Zf.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=xn();Y_(a,l,t,r,null,null)},Gc.prototype.unmount=Zf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Y_(t.current,2,null,t,null,null),Rc(),r[Pn]=null}};function Gc(t){this._internalRoot=t}Gc.prototype.unstable_scheduleHydration=function(t){if(t){var r=Si();t={blockedOn:null,target:t,priority:r};for(var a=0;a<$i.length&&r!==0&&r<$i[a].priority;a++);$i.splice(a,0,t),a===0&&J_(t)}};var nv=e.version;if(nv!=="19.1.1")throw Error(s(527,nv,"19.1.1"));te.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var IA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qc.isDisabled&&Qc.supportsFiber)try{lt=Qc.inject(IA),Ge=Qc}catch{}}return ql.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=_y,f=vy,v=Ey,w=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(w=r.unstable_transitionCallbacks)),r=Q_(t,1,!1,null,null,a,l,h,f,v,w,null),t[Pn]=r.current,Vf(t),new Zf(r)},ql.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=_y,v=vy,w=Ey,N=null,q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(q=a.formState)),r=Q_(t,1,!0,r,a??null,l,h,f,v,w,N,q),r.context=K_(null),a=r.current,l=xn(),l=Ai(l),h=Pi(l),h.callback=null,Vi(a,h,l),a=l,r.current.lanes=a,zr(r,a),wr(r),t[Pn]=r.current,Vf(t),new Gc(r)},ql.version="19.1.1",ql}var dv;function jA(){if(dv)return tm.exports;dv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),tm.exports=UA(),tm.exports}var zA=jA();const qA=tE(zA);var it=(i=>(i[i.Setup=0]="Setup",i[i.Login=1]="Login",i[i.Shop=2]="Shop",i[i.PackSelection=3]="PackSelection",i[i.RoundConfiguration=4]="RoundConfiguration",i[i.Game=5]="Game",i[i.RoundEnd=6]="RoundEnd",i[i.GameEnd=7]="GameEnd",i))(it||{});const Kc={CHANGES_BEFORE_AD:3,MAX_CHANGE_ATTEMPTS:10},Qn=({children:i,className:e})=>E.jsx("div",{className:`bg-gray-800 border border-purple-500/30 rounded-2xl shadow-lg shadow-purple-900/20 p-6 sm:p-8 ${e}`,children:i}),BA=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),fv=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),nE=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),rE=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),ao=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),HA=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),iE=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),FA=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),GA=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),QA=({players:i,setPlayers:e})=>{const[n,s]=oe.useState(""),o=d=>{d.preventDefault(),n.trim()&&!i.includes(n.trim())&&(e([...i,n.trim()]),s(""))},u=d=>{e(i.filter((m,p)=>p!==d))};return E.jsxs(Qn,{children:[E.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-pink-400",children:"Añadir Jugadores"}),E.jsxs("form",{onSubmit:o,className:"flex flex-col gap-2 mb-4",children:[E.jsx("input",{type:"text",value:n,onChange:d=>s(d.target.value),placeholder:"Nombre del jugador",className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-purple-500"}),E.jsx("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md transition text-base",children:"Añadir"})]}),E.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:i.map((d,m)=>E.jsxs("li",{className:"flex justify-between items-center bg-gray-700/50 p-2 rounded-md animate-fade-in",children:[E.jsx("span",{className:"font-medium",children:d}),E.jsx("button",{onClick:()=>u(m),className:"text-gray-400 hover:text-red-500 transition",children:E.jsx(BA,{className:"w-5 h-5"})})]},m))})]})},He=({children:i,variant:e="primary",className:n,...s})=>{const o="px-6 py-3 font-bold rounded-lg text-white transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 disabled:opacity-50 disabled:cursor-not-allowed",u={primary:"bg-purple-600 hover:bg-purple-700 focus:ring-purple-500/50 shadow-lg shadow-purple-600/30",secondary:"bg-pink-500 hover:bg-pink-600 focus:ring-pink-500/50 shadow-lg shadow-pink-500/30",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500/50"};return E.jsx("button",{className:`${o} ${u[e]} ${n}`,...s,children:i})},KA=({availablePacks:i,purchasedPacks:e,adWatchedPacks:n,referralUnlockedPacks:s,onContinue:o,onBack:u,onGoToShop:d,onPlayDemo:m})=>{const T=i.some(A=>A.id==="base")?i:[{id:"base",name:"Pack Base",description:"Preguntas y retos básicos incluidos",price:"INCLUIDO",icon:"🎮",questionsUrl:"",daresUrl:"",allowDemo:!1,demoPlaysCount:0},...i];return e.length>0,E.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:E.jsxs(Qn,{className:"w-full max-w-2xl text-center",children:[E.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Packs Disponibles"}),E.jsx("p",{className:"text-gray-400 mb-8",children:"Estos son los packs que tienes disponibles para jugar"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:T.map(A=>{const S=A.id==="base"||e.includes(A.id),U=A.id==="base",k=n.includes(A.id),Y=s.includes(A.id),H=S||Y;return E.jsxs("div",{className:`relative p-4 rounded-lg border transition-all duration-200 ${S?"border-green-500 bg-green-500/10":Y?"border-blue-500 bg-blue-500/10":k?"border-yellow-500 bg-yellow-500/10":"border-gray-600 bg-gray-800/50 opacity-60"}`,children:[E.jsx("div",{className:"absolute top-2 right-2",children:S?E.jsx(fv,{className:"w-6 h-6 text-green-500"}):Y?E.jsx(fv,{className:"w-6 h-6 text-blue-500"}):E.jsx(ao,{className:"w-6 h-6 text-yellow-500"})}),E.jsx("div",{className:"text-4xl mb-2",children:A.icon}),E.jsx("h3",{className:`text-xl font-bold mb-2 ${H||k?"text-white":"text-gray-400"}`,children:A.name}),E.jsx("p",{className:`text-sm mb-3 ${H||k?"text-gray-300":"text-gray-500"}`,children:A.description}),A.isReferralUnlockable&&!H&&E.jsxs("p",{className:"text-xs text-blue-400 mb-2",children:["🎯 Requiere ",A.requiredReferrals," referidos"]}),E.jsx("div",{className:`text-lg font-semibold ${S?"text-green-400":Y?"text-blue-400":"text-yellow-400"}`,children:U?"INCLUIDO":S?"COMPRADO":Y?"POR REFERIDOS":k?"DEMO VISTO":"PREMIUM"}),!H&&!k&&E.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg flex items-center justify-center",children:E.jsxs("div",{className:"text-center",children:[E.jsx(ao,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),E.jsx("p",{className:"text-yellow-400 font-semibold text-sm mb-3",children:A.isReferralUnlockable?`${A.requiredReferrals} REFERIDOS`:"PREMIUM"}),A.allowDemo&&E.jsx(He,{onClick:le=>{le.stopPropagation(),m(A.id)},variant:"secondary",className:"px-3 py-1 text-xs bg-yellow-500 hover:bg-yellow-600 text-white border border-yellow-400 shadow-md",children:"💎 Jugar Demo"})]})})]},A.id)})}),i.some(A=>!e.includes(A.id))&&E.jsx("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:E.jsxs("p",{className:"text-yellow-400 text-sm",children:[E.jsx(ao,{className:"w-4 h-4 inline mr-2"}),"Los packs premium están bloqueados. Visita la tienda para desbloquearlos."]})}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[E.jsx(He,{onClick:u,variant:"secondary",className:"px-6",children:"Volver"}),E.jsx(He,{onClick:d,variant:"secondary",className:"px-6 bg-yellow-600 hover:bg-yellow-700 text-white",children:"Ir a la Tienda"}),E.jsx(He,{onClick:o,className:"px-6",disabled:!1,children:"Continuar al Juego"})]})]})})},YA="modulepreload",XA=function(i,e){return new URL(i,e).href},mv={},sE=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let d=function(T){return Promise.all(T.map(A=>Promise.resolve(A).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};const m=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),y=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=d(n.map(T=>{if(T=XA(T,s),T in mv)return;mv[T]=!0;const A=T.endsWith(".css"),S=A?'[rel="stylesheet"]':"";if(!!s)for(let Y=m.length-1;Y>=0;Y--){const H=m[Y];if(H.href===T&&(!A||H.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${T}"]${S}`))return;const k=document.createElement("link");if(k.rel=A?"stylesheet":YA,A||(k.as="script"),k.crossOrigin="",k.href=T,y&&k.setAttribute("nonce",y),document.head.appendChild(k),A)return new Promise((Y,H)=>{k.addEventListener("load",Y),k.addEventListener("error",()=>H(new Error(`Unable to preload CSS for ${T}`)))})}))}function u(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return o.then(d=>{for(const m of d||[])m.status==="rejected"&&u(m.reason);return e().catch(u)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var fo;(function(i){i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE"})(fo||(fo={}));class sm extends Error{constructor(e,n,s){super(e),this.message=e,this.code=n,this.data=s}}const $A=i=>{var e,n;return i!=null&&i.androidBridge?"android":!((n=(e=i==null?void 0:i.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},WA=i=>{const e=i.CapacitorCustomPlatform||null,n=i.Capacitor||{},s=n.Plugins=n.Plugins||{},o=()=>e!==null?e.name:$A(i),u=()=>o()!=="web",d=A=>{const S=y.get(A);return!!(S!=null&&S.platforms.has(o())||m(A))},m=A=>{var S;return(S=n.PluginHeaders)===null||S===void 0?void 0:S.find(U=>U.name===A)},p=A=>i.console.error(A),y=new Map,T=(A,S={})=>{const U=y.get(A);if(U)return console.warn(`Capacitor plugin "${A}" already registered. Cannot register plugins twice.`),U.proxy;const k=o(),Y=m(A);let H;const le=async()=>(!H&&k in S?H=typeof S[k]=="function"?H=await S[k]():H=S[k]:e!==null&&!H&&"web"in S&&(H=typeof S.web=="function"?H=await S.web():H=S.web),H),ie=(R,C)=>{var O,V;if(Y){const P=Y==null?void 0:Y.methods.find(x=>C===x.name);if(P)return P.rtype==="promise"?x=>n.nativePromise(A,C.toString(),x):(x,Fe)=>n.nativeCallback(A,C.toString(),x,Fe);if(R)return(O=R[C])===null||O===void 0?void 0:O.bind(R)}else{if(R)return(V=R[C])===null||V===void 0?void 0:V.bind(R);throw new sm(`"${A}" plugin is not implemented on ${k}`,fo.Unimplemented)}},re=R=>{let C;const O=(...V)=>{const P=le().then(x=>{const Fe=ie(x,R);if(Fe){const Ce=Fe(...V);return C=Ce==null?void 0:Ce.remove,Ce}else throw new sm(`"${A}.${R}()" is not implemented on ${k}`,fo.Unimplemented)});return R==="addListener"&&(P.remove=async()=>C()),P};return O.toString=()=>`${R.toString()}() { [capacitor code] }`,Object.defineProperty(O,"name",{value:R,writable:!1,configurable:!1}),O},ge=re("addListener"),ue=re("removeListener"),xe=(R,C)=>{const O=ge({eventName:R},C),V=async()=>{const x=await O;ue({eventName:R,callbackId:x},C)},P=new Promise(x=>O.then(()=>x({remove:V})));return P.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await V()},P},I=new Proxy({},{get(R,C){switch(C){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Y?xe:ge;case"removeListener":return ue;default:return re(C)}}});return s[A]=I,y.set(A,{name:A,proxy:I,platforms:new Set([...Object.keys(S),...Y?[k]:[]])}),I};return n.convertFileSrc||(n.convertFileSrc=A=>A),n.getPlatform=o,n.handleError=p,n.isNativePlatform=u,n.isPluginAvailable=d,n.registerPlugin=T,n.Exception=sm,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},ZA=i=>i.Capacitor=WA(i),nn=ZA(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Xm=nn.registerPlugin;class aE{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(n);const u=this.windowListeners[e];u&&!u.registered&&this.addWindowListener(u),s&&this.sendRetainedArgumentsForEvent(e);const d=async()=>this.removeListener(e,n);return Promise.resolve({remove:d})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,s){const o=this.listeners[e];if(!o){if(s){let u=this.retainedEventArguments[e];u||(u=[]),u.push(n),this.retainedEventArguments[e]=u}return}o.forEach(u=>u(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:s=>{this.notifyListeners(n,s)}}}unimplemented(e="not implemented"){return new nn.Exception(e,fo.Unimplemented)}unavailable(e="not available"){return new nn.Exception(e,fo.Unavailable)}async removeListener(e,n){const s=this.listeners[e];if(!s)return;const o=s.indexOf(n);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(s=>{this.notifyListeners(e,s)}))}}const gv=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),pv=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class JA extends aE{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(s=>{if(s.length<=0)return;let[o,u]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=pv(o).trim(),u=pv(u).trim(),n[o]=u}),n}async setCookie(e){try{const n=gv(e.key),s=gv(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,u=(e.path||"/").replace("path=",""),d=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${s||""}${o}; path=${u}; ${d};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Xm("CapacitorCookies",{web:()=>new JA});const eS=async i=>new Promise((e,n)=>{const s=new FileReader;s.onload=()=>{const o=s.result;e(o.indexOf(",")>=0?o.split(",")[1]:o)},s.onerror=o=>n(o),s.readAsDataURL(i)}),tS=(i={})=>{const e=Object.keys(i);return Object.keys(i).map(o=>o.toLocaleLowerCase()).reduce((o,u,d)=>(o[u]=i[e[d]],o),{})},nS=(i,e=!0)=>i?Object.entries(i).reduce((s,o)=>{const[u,d]=o;let m,p;return Array.isArray(d)?(p="",d.forEach(y=>{m=e?encodeURIComponent(y):y,p+=`${u}=${m}&`}),p.slice(0,-1)):(m=e?encodeURIComponent(d):d,p=`${u}=${m}`),`${s}&${p}`},"").substr(1):null,rS=(i,e={})=>{const n=Object.assign({method:i.method||"GET",headers:i.headers},e),o=tS(i.headers)["content-type"]||"";if(typeof i.data=="string")n.body=i.data;else if(o.includes("application/x-www-form-urlencoded")){const u=new URLSearchParams;for(const[d,m]of Object.entries(i.data||{}))u.set(d,m);n.body=u.toString()}else if(o.includes("multipart/form-data")||i.data instanceof FormData){const u=new FormData;if(i.data instanceof FormData)i.data.forEach((m,p)=>{u.append(p,m)});else for(const m of Object.keys(i.data))u.append(m,i.data[m]);n.body=u;const d=new Headers(n.headers);d.delete("content-type"),n.headers=d}else(o.includes("application/json")||typeof i.data=="object")&&(n.body=JSON.stringify(i.data));return n};class iS extends aE{async request(e){const n=rS(e,e.webFetchExtra),s=nS(e.params,e.shouldEncodeUrlParams),o=s?`${e.url}?${s}`:e.url,u=await fetch(o,n),d=u.headers.get("content-type")||"";let{responseType:m="text"}=u.ok?e:{};d.includes("application/json")&&(m="json");let p,y;switch(m){case"arraybuffer":case"blob":y=await u.blob(),p=await eS(y);break;case"json":p=await u.json();break;case"document":case"text":default:p=await u.text()}const T={};return u.headers.forEach((A,S)=>{T[S]=A}),{data:p,headers:T,status:u.status,url:u.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Xm("CapacitorHttp",{web:()=>new iS});var yv;(function(i){i.General="General",i.ParentalGuidance="ParentalGuidance",i.Teen="Teen",i.MatureAudience="MatureAudience"})(yv||(yv={}));var _v;(function(i){i.SizeChanged="bannerAdSizeChanged",i.Loaded="bannerAdLoaded",i.FailedToLoad="bannerAdFailedToLoad",i.Opened="bannerAdOpened",i.Closed="bannerAdClosed",i.AdImpression="bannerAdImpression"})(_v||(_v={}));var vm;(function(i){i.TOP_CENTER="TOP_CENTER",i.CENTER="CENTER",i.BOTTOM_CENTER="BOTTOM_CENTER"})(vm||(vm={}));var Em;(function(i){i.BANNER="BANNER",i.FULL_BANNER="FULL_BANNER",i.LARGE_BANNER="LARGE_BANNER",i.MEDIUM_RECTANGLE="MEDIUM_RECTANGLE",i.LEADERBOARD="LEADERBOARD",i.ADAPTIVE_BANNER="ADAPTIVE_BANNER",i.SMART_BANNER="SMART_BANNER"})(Em||(Em={}));var $l;(function(i){i.Loaded="interstitialAdLoaded",i.FailedToLoad="interstitialAdFailedToLoad",i.Showed="interstitialAdShowed",i.FailedToShow="interstitialAdFailedToShow",i.Dismissed="interstitialAdDismissed"})($l||($l={}));var vv;(function(i){i.Loaded="onRewardedInterstitialAdLoaded",i.FailedToLoad="onRewardedInterstitialAdFailedToLoad",i.Showed="onRewardedInterstitialAdShowed",i.FailedToShow="onRewardedInterstitialAdFailedToShow",i.Dismissed="onRewardedInterstitialAdDismissed",i.Rewarded="onRewardedInterstitialAdReward"})(vv||(vv={}));var so;(function(i){i.Loaded="onRewardedVideoAdLoaded",i.FailedToLoad="onRewardedVideoAdFailedToLoad",i.Showed="onRewardedVideoAdShowed",i.FailedToShow="onRewardedVideoAdFailedToShow",i.Dismissed="onRewardedVideoAdDismissed",i.Rewarded="onRewardedVideoAdReward"})(so||(so={}));var Ev;(function(i){i.NOT_REQUIRED="NOT_REQUIRED",i.OBTAINED="OBTAINED",i.REQUIRED="REQUIRED",i.UNKNOWN="UNKNOWN"})(Ev||(Ev={}));var Tv;(function(i){i[i.DISABLED=0]="DISABLED",i[i.EEA=1]="EEA",i[i.NOT_EEA=2]="NOT_EEA"})(Tv||(Tv={}));const en=Xm("AdMob",{web:()=>sE(()=>import("./web-DwffpxAa.js"),[],import.meta.url).then(i=>new i.AdMobWeb)});class sS{constructor(){this.isInitialized=!1,this.config=null}async initialize(e){if(this.isInitialized){this.config={...this.config,...e};return}try{this.config=e,nn.isNativePlatform()?(await en.initialize({requestTrackingAuthorization:!0,testingDevices:e.testMode?["YOUR_DEVICE_ID"]:[],initializeForTesting:e.testMode||!1}),this.isInitialized=!0,console.log("AdMob initialized successfully")):console.log("AdMob not available on web platform")}catch(n){throw console.error("Failed to initialize AdMob:",n),n}}async showBannerAd(e){if(!this.isInitialized||!this.config)throw new Error("AdMob not initialized");if(!nn.isNativePlatform())throw new Error("AdMob banners only available on native platforms");if(!this.config.bannerAdUnitId)throw new Error("bannerAdUnitId not configured");try{const n={adId:this.config.bannerAdUnitId,adSize:Em.ADAPTIVE_BANNER,position:vm.BOTTOM_CENTER,margin:0,isTesting:this.config.testMode||!1,...e};await en.showBanner(n),console.log("Banner ad shown successfully")}catch(n){throw console.error("Failed to show banner ad:",n),n}}async hideBannerAd(){if(this.isInitialized&&nn.isNativePlatform())try{await en.hideBanner(),console.log("Banner ad hidden successfully")}catch(e){console.error("Failed to hide banner ad:",e)}}async resumeBannerAd(){if(this.isInitialized&&nn.isNativePlatform())try{await en.resumeBanner(),console.log("Banner ad resumed successfully")}catch(e){console.error("Failed to resume banner ad:",e)}}async removeBannerAd(){if(this.isInitialized&&nn.isNativePlatform())try{await en.removeBanner(),console.log("Banner ad removed successfully")}catch(e){console.error("Failed to remove banner ad:",e)}}async showInterstitial(){if(!this.isInitialized||!this.config)return console.warn("AdMob not initialized"),!1;if(!nn.isNativePlatform())return console.warn("Interstitials are only available on native platforms"),!1;if(!this.config.interstitialAdUnitId)return console.warn("No interstitialAdUnitId configured"),!1;let e=null,n=null,s=null;try{const o=new Promise((m,p)=>{setTimeout(()=>p(new Error("Interstitial ad timeout")),3e4)}),u=new Promise(async(m,p)=>{try{e=await en.addListener($l.Loaded,S=>{console.log("Interstitial loaded")}),s=await en.addListener($l.FailedToLoad,S=>{console.error("Interstitial failed to load:",S),p(new Error("Failed to load interstitial"))});let y=null;const T=new Promise(S=>{y=S});n=await en.addListener($l.Dismissed,()=>{console.log("Interstitial dismissed"),y&&y()});const A={adId:this.config.interstitialAdUnitId,isTesting:this.config.testMode||!1};await en.prepareInterstitial(A),await en.showInterstitial(),await T,m(!0)}catch(y){p(y)}});return await Promise.race([u,o])}catch(o){return console.error("Failed to show interstitial ad:",o),!1}finally{try{e&&await e.remove(),n&&await n.remove(),s&&await s.remove()}catch(o){console.warn("Error cleaning up interstitial listeners:",o)}}}async showRewarded(){if(!this.isInitialized||!this.config)return console.warn("AdMob not initialized"),!1;if(!nn.isNativePlatform())return console.warn("Rewarded ads are only available on native platforms"),!1;if(!this.config.rewardedAdUnitId)return console.warn("No rewardedAdUnitId configured"),!1;let e=null,n=null,s=null,o=null;try{const u=new Promise((p,y)=>{setTimeout(()=>y(new Error("Rewarded ad timeout")),3e4)}),d=new Promise(async(p,y)=>{try{let T=!1;e=await en.addListener(so.Loaded,k=>{console.log("Rewarded loaded")}),o=await en.addListener(so.FailedToLoad,k=>{console.error("Rewarded failed to load:",k),y(new Error("Failed to load rewarded ad"))}),n=await en.addListener(so.Rewarded,k=>{T=!0,console.log("User rewarded",k)});let A=null;const S=new Promise(k=>{A=k});s=await en.addListener(so.Dismissed,()=>{console.log("Rewarded dismissed"),A&&A()});const U={adId:this.config.rewardedAdUnitId,isTesting:this.config.testMode||!1};await en.prepareRewardVideoAd(U),await en.showRewardVideoAd(),await S,p(T)}catch(T){y(T)}});return await Promise.race([d,u])}catch(u){return console.error("Failed to show rewarded ad:",u),!1}finally{try{e&&await e.remove(),n&&await n.remove(),s&&await s.remove(),o&&await o.remove()}catch(u){console.warn("Error cleaning up rewarded listeners:",u)}}}async showBestMonetizingAd(){var e,n;return(e=this.config)!=null&&e.rewardedAdUnitId&&await this.showRewarded()?"rewarded":(n=this.config)!=null&&n.interstitialAdUnitId&&await this.showInterstitial()?"interstitial":"none"}isNativePlatform(){return nn.isNativePlatform()}isWebPlatform(){return nn.getPlatform()==="web"}getConfig(){return this.config}}const rs=new sS,aS=({pack:i,isOpen:e,onClose:n,onStartDemo:s,onAdWatched:o})=>{const[u,d]=oe.useState(!1),[m,p]=oe.useState(null);if(!e)return null;const y=async()=>{d(!0),p(null);try{await rs.showInterstitial()?(o&&o(i.id),s(),n()):p("No se pudo cargar el anuncio. Necesitas ver un anuncio para jugar el demo.")}catch(T){console.error("Error al mostrar anuncio:",T),p("Error al cargar el anuncio. Necesitas ver un anuncio para jugar el demo.")}finally{d(!1)}};return E.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 animate-fade-in",children:E.jsxs(Qn,{className:"w-full max-w-md relative",children:[E.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:E.jsx(FA,{className:"w-6 h-6"})}),E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"text-6xl mb-4",children:i.icon}),E.jsxs("h2",{className:"text-2xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-500",children:["Demo: ",i.name]}),E.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:E.jsxs("div",{className:"flex items-start gap-3 text-left",children:[E.jsx(GA,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),E.jsxs("div",{className:"text-sm text-blue-300",children:[E.jsx("p",{className:"mb-2",children:E.jsx("strong",{children:"¿Qué incluye el demo?"})}),E.jsxs("ul",{className:"space-y-1 text-xs",children:[E.jsx("li",{children:"• Podrás probar 5 preguntas y 5 retos que siempre serán los mismos (el pack incluye muchos más)"}),E.jsx("li",{children:"• Puedes jugar de forma ilimitada"}),E.jsx("li",{children:"• Solo necesitas ver un anuncio antes de cada partida"}),E.jsx("li",{children:"• Perfecto para probar si te gusta el pack"})]})]})]})}),m&&E.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mb-4",children:E.jsx("p",{className:"text-yellow-400 text-sm",children:m})}),E.jsxs("div",{className:"flex flex-col gap-3",children:[E.jsx(He,{onClick:y,disabled:u,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:u?E.jsxs("div",{className:"flex items-center justify-center gap-2",children:[E.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Cargando anuncio..."]}):E.jsxs("div",{className:"flex items-center justify-center gap-2",children:[E.jsx("span",{role:"img","aria-label":"gem",children:"💎"}),"Ver anuncio y jugar demo"]})}),E.jsx(He,{onClick:n,variant:"secondary",className:"w-full",disabled:u,children:"Volver atrás"})]}),E.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"¿Te gusta el pack? Al final de la partida podrás comprarlo completo."})]})]})})},oS=({players:i,currentPlayerIndex:e,onNextPlayer:n,onNewGame:s,questions:o,dares:u,roundConfig:d,gameProgress:m,onRoundEnd:p,onQuestionAsked:y,onDareCompleted:T,onQuestionChange:A,onAdRequired:S,questionChangeState:U={changesCount:0,isAdLoading:!1,isAdPlaying:!1}})=>{const[k,Y]=oe.useState(null),[H,le]=oe.useState(null),[ie,re]=oe.useState(new Set),[ge,ue]=oe.useState(new Set),xe=i[e],I=oe.useMemo(()=>o.map((P,x)=>({item:P,index:x})),[o]),R=oe.useMemo(()=>u.map((P,x)=>({item:P,index:x})),[u]),C=P=>{const x=P==="pregunta"?I:R,Fe=P==="pregunta"?ie:ge,Ce=P==="pregunta"?re:ue,Q=x.filter(te=>!Fe.has(te.index));if(Q.length===0){Ce(new Set);const te=Math.floor(Math.random()*x.length),ee=x[te];Y(ee.item),Ce(pe=>new Set(pe).add(ee.index))}else{const te=Math.floor(Math.random()*Q.length),ee=Q[te];Y(ee.item),Ce(pe=>new Set(pe).add(ee.index))}le(P),P==="pregunta"&&y?y():P==="reto"&&T&&T()},O=async()=>{if(!k||!H)return;if(U.changesCount>=Kc.CHANGES_BEFORE_AD-1&&S)try{await S()}catch(ee){console.error("Error showing ad:",ee);return}const x=H==="pregunta"?I:R,Fe=H==="pregunta"?ie:ge,Ce=H==="pregunta"?re:ue;let Q=0,te=null;for(;Q<Kc.MAX_CHANGE_ATTEMPTS&&!te;){const ee=x.filter(pe=>!Fe.has(pe.index)&&pe.item.text!==k.text);if(ee.length===0){Ce(new Set);const pe=x.filter(D=>D.item.text!==k.text);if(pe.length>0){const D=Math.floor(Math.random()*pe.length),Z=pe[D];te=Z.item,Ce(ae=>new Set([Z.index]))}else break}else{const pe=Math.floor(Math.random()*ee.length),D=ee[pe];te=D.item,Ce(Z=>new Set(Z).add(D.index))}Q++}te&&(Y(te),A&&A())},V=()=>{Y(null),le(null),e===i.length-1?m.currentRound+1>d.totalRounds?n():p():n()};return E.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center animate-fade-in",children:[E.jsxs(Qn,{className:"w-full max-w-lg min-h-[24rem] flex flex-col justify-between",children:[E.jsxs("div",{children:[E.jsx("div",{className:"mb-2",children:E.jsxs("p",{className:"text-sm text-gray-500",children:["Ronda ",m.currentRound," de ",d.totalRounds]})}),E.jsx("p",{className:"text-lg text-gray-400",children:"Turno de:"}),E.jsx("h2",{className:"text-4xl font-bold my-4 text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400",children:xe})]}),k?E.jsxs("div",{className:"animate-fade-in",children:[E.jsx("h3",{className:"text-2xl font-bold mb-6 text-cyan-400 capitalize",children:H}),E.jsx("p",{className:"text-xl md:text-2xl leading-relaxed",children:k.text}),E.jsxs("div",{className:"mt-6 flex flex-col items-center gap-2",children:[E.jsxs(He,{onClick:O,variant:"secondary",className:"text-sm px-4 py-2",disabled:U.isAdLoading||U.isAdPlaying,children:["🔄 Cambiar ",H]}),E.jsxs("p",{className:"text-xs text-gray-500",children:["Cambios restantes antes del anuncio: ",Kc.CHANGES_BEFORE_AD-U.changesCount%Kc.CHANGES_BEFORE_AD]}),(U.isAdLoading||U.isAdPlaying)&&E.jsx("p",{className:"text-xs text-yellow-400",children:U.isAdLoading?"Cargando anuncio...":"Reproduciendo anuncio..."})]})]}):E.jsxs("div",{className:"animate-fade-in",children:[E.jsx("h3",{className:"text-2xl font-bold mb-6",children:"¿Verdad o Reto?"}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[E.jsx(He,{onClick:()=>C("pregunta"),className:"w-full sm:w-auto",children:"Pregunta"}),E.jsx(He,{onClick:()=>C("reto"),variant:"secondary",className:"w-full sm:w-auto",children:"Reto"})]})]}),E.jsx("div",{className:"mt-8",children:k&&E.jsx(He,{onClick:V,children:"Siguiente Jugador"})})]}),E.jsx("button",{onClick:s,className:"mt-6 text-sm text-gray-500 hover:text-gray-300 transition",children:"Empezar nuevo juego"})]})},lS=({onSelectRounds:i,onBack:e})=>{const n=[{value:5,label:"5 Rondas",description:"Partida rápida (15-20 min)"},{value:10,label:"10 Rondas",description:"Partida estándar (30-40 min)"},{value:15,label:"15 Rondas",description:"Partida larga (45-60 min)"}];return E.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:E.jsxs(Qn,{className:"w-full max-w-2xl text-center",children:[E.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Configurar Partida"}),E.jsx("p",{className:"text-gray-400 mb-8",children:"Elige cuántas rondas quieres jugar"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:n.map(s=>E.jsxs("div",{className:"relative p-6 rounded-lg border border-gray-600 bg-gray-800/50 hover:border-purple-500 transition-all duration-200 cursor-pointer group",onClick:()=>i(s.value),children:[E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:s.value}),E.jsx("div",{className:"text-lg font-semibold text-white mb-2",children:s.label}),E.jsx("div",{className:"text-sm text-gray-400",children:s.description})]}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]},s.value))}),E.jsx("div",{className:"text-sm text-gray-500 mb-6",children:"💡 Al final de cada ronda se mostrará un anuncio breve"}),E.jsx("div",{className:"flex gap-4 justify-center",children:E.jsx(He,{onClick:e,variant:"secondary",className:"px-6",children:"Volver"})})]})})},oE=({dataAdSlot:i,className:e,style:n,fallbackContent:s,timeout:o=5e3,admobConfig:u})=>{const[d,m]=oe.useState("loading"),[p,y]=oe.useState(!1),[T,A]=oe.useState(!1);return oe.useEffect(()=>{let S,U=null,k=!0;return(async()=>{try{S=setTimeout(()=>{k&&d==="loading"&&(console.warn("Ad loading timeout reached"),m("timeout"),y(!0))},o);const H=nn.isNativePlatform();if(A(H),H&&u)try{await rs.initialize({...u,bannerAdUnitId:i}),await rs.showBannerAd(),k&&(m("loaded"),clearTimeout(S));return}catch(le){console.warn("AdMob failed:",le),k&&(m("error"),y(!0),clearTimeout(S));return}if(typeof window<"u"&&!H){let le=0;const ie=10,re=()=>{if(k)if(window.adsbygoogle||le>=ie)try{(window.adsbygoogle=window.adsbygoogle||[]).push({}),setTimeout(()=>{if(k){if(U=document.querySelector(`[data-ad-slot="${i}"]`),U){const ge=U.innerHTML;ge&&ge.trim()!==""?m("loaded"):(m("error"),y(!0))}else m("error"),y(!0);clearTimeout(S)}},2e3)}catch(ge){console.error("Error loading AdSense ad:",ge),k&&(m("error"),y(!0),clearTimeout(S))}else le++,setTimeout(re,200)};re()}else H&&!u&&(console.warn("Native platform detected but no AdMob config provided"),k&&(m("error"),y(!0),clearTimeout(S)))}catch(H){console.error("Error in ad loading process:",H),k&&(m("error"),y(!0),clearTimeout(S))}})(),()=>{k=!1,S&&clearTimeout(S),T&&d==="loaded"&&rs.removeBannerAd().catch(console.error)}},[i,o,u]),p?E.jsx("div",{className:`ad-fallback ${e||""}`,style:n,children:s||E.jsx("div",{className:"ad-fallback-message"})}):E.jsxs("div",{className:`ad-container ${e||""}`,style:n,children:[d==="loading"&&E.jsx("div",{className:"ad-loading",children:E.jsx("div",{className:"loading-spinner"})}),E.jsx("ins",{className:"adsbygoogle",style:{display:d==="loaded"?"block":"none",textAlign:"center",width:"100%",height:"auto"},"data-ad-client":"ca-pub-XXXXXXXXXXXXXXXX","data-ad-slot":i,"data-ad-format":"auto","data-full-width-responsive":"true"})]})},uS=({roundStats:i,currentRound:e,totalRounds:n,onContinue:s,onEndGame:o,hasNoAds:u=!1})=>{var k;const[d,m]=oe.useState(!1),[p,y]=oe.useState(!1),[T,A]=oe.useState(5);oe.useEffect(()=>{let Y=!0;const H=async()=>{try{await rs.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),m(!0);const re=await rs.showInterstitial();Y&&(y(!0),console.log("Anuncio intersticial mostrado:",re))}catch(re){console.warn("Fallo al mostrar anuncio nativo:",re),Y&&(m(!0),y(!0))}};if(!u&&nn.isNativePlatform())return H(),()=>{Y=!1};if(u){m(!0),y(!0);return}const le=setTimeout(()=>{m(!0)},800);let ie;return d&&!p&&(ie=setInterval(()=>{A(re=>re<=1?(y(!0),ie&&clearInterval(ie),0):re-1)},1e3)),()=>{clearTimeout(le),ie&&clearInterval(ie)}},[u,d,p]);const S=e>=n,U=nn.isNativePlatform();return E.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:E.jsxs(Qn,{className:"w-full max-w-2xl text-center",children:[E.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-green-500 to-blue-500",children:S?"¡Partida Completada!":`¡Ronda ${i.roundNumber} Completada!`}),!S&&E.jsxs("p",{className:"text-gray-400 mb-6",children:["Ronda ",e," de ",n]}),E.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-6",children:[E.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Estadísticas de la Ronda"}),E.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[E.jsxs("div",{children:[E.jsx("div",{className:"text-2xl font-bold text-blue-400",children:i.questionsAsked}),E.jsx("div",{className:"text-sm text-gray-400",children:"Preguntas"})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-2xl font-bold text-purple-400",children:i.daresCompleted}),E.jsx("div",{className:"text-sm text-gray-400",children:"Retos"})]})]}),E.jsxs("div",{className:"mt-4",children:[E.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Jugadores participantes:"}),E.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:((k=i.playersParticipated)==null?void 0:k.map((Y,H)=>E.jsx("span",{className:"px-3 py-1 bg-purple-600 text-white rounded-full text-sm",children:Y},H)))||E.jsx("span",{className:"text-gray-400 text-sm",children:"No hay jugadores registrados"})})]})]}),!u&&E.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[E.jsxs("div",{className:"text-center mb-4",children:[E.jsx("div",{className:"text-lg font-semibold mb-2",children:"📺 Anuncio"}),p?E.jsx("div",{className:"text-green-400 mb-4",children:"✅ Anuncio completado"}):E.jsxs("div",{className:"mb-4",children:[E.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",U?"":`${T}s`]}),!U&&E.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:E.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-T)/5*100}%`}})})]})]}),!U&&E.jsx(oE,{dataAdSlot:"1234567890",className:"round-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},fallbackContent:E.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),E.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:S?E.jsx(He,{onClick:o,className:"px-8 py-3 text-lg",disabled:!u&&!p,children:"Ver Resultados Finales"}):E.jsxs(E.Fragment,{children:[E.jsx(He,{onClick:o,variant:"secondary",className:"px-6",disabled:!u&&!p,children:"Terminar Partida"}),E.jsx(He,{onClick:s,className:"px-8 py-3 text-lg",disabled:!u&&!p,children:"Siguiente Ronda"})]})}),!p&&E.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Los botones se habilitarán cuando termine el anuncio"})]})})},cS=({gameStats:i,players:e,onNewGame:n,onBackToMenu:s,hasNoAds:o=!1,isDemoMode:u=!1,demoPackId:d=null})=>{const m=i.gameEndTime&&i.gameStartTime?Math.round((i.gameEndTime.getTime()-i.gameStartTime.getTime())/1e3/60):0,p=i.totalRounds>0?Math.round(i.totalQuestions/i.totalRounds):0,y=i.totalRounds>0?Math.round(i.totalDares/i.totalRounds):0,[T,A]=oe.useState(!1),[S,U]=oe.useState(!1),[k,Y]=oe.useState(5),H=nn.isNativePlatform();return oe.useEffect(()=>{let le=!0;const ie=async()=>{try{await rs.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),U(!0);const ue=await rs.showInterstitial();le&&(A(!0),console.log("Anuncio intersticial al final de partida mostrado:",ue))}catch(ue){console.warn("Error mostrando anuncio al final de partida:",ue),le&&(U(!0),A(!0))}};if(!o&&H)return ie(),()=>{le=!1};if(o){A(!0),U(!0);return}const re=setTimeout(()=>U(!0),800);let ge;return S&&!T&&(ge=setInterval(()=>{Y(ue=>ue<=1?(A(!0),ge&&clearInterval(ge),0):ue-1)},1e3)),()=>{clearTimeout(re),ge&&clearInterval(ge)}},[o,H,S,T]),E.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:E.jsxs(Qn,{className:"w-full max-w-4xl text-center",children:[E.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500",children:"🎉 ¡Partida Finalizada! 🎉"}),E.jsx("p",{className:"text-gray-400 mb-8 text-base sm:text-lg",children:"¡Esperamos que se hayan divertido mucho!"}),!o&&E.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[E.jsxs("div",{className:"text-center mb-4",children:[E.jsx("div",{className:"text-lg font-semibold mb-2",children:"📺 Anuncio"}),T?E.jsx("div",{className:"text-green-400 mb-4",children:"✅ Anuncio completado"}):E.jsxs("div",{className:"mb-4",children:[E.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",H?"":`${k}s`]}),!H&&E.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:E.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-k)/5*100}%`}})})]})]}),!H&&E.jsx(oE,{dataAdSlot:"1234567890",className:"game-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},fallbackContent:E.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[E.jsxs("div",{className:"bg-gradient-to-br from-blue-600/20 to-blue-800/20 rounded-lg p-6 border border-blue-500/30",children:[E.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-blue-400 mb-2",children:i.totalRounds}),E.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Rondas Jugadas"}),E.jsxs("div",{className:"text-sm text-gray-400",children:[m," minutos"]})]}),E.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-purple-800/20 rounded-lg p-6 border border-purple-500/30",children:[E.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-purple-400 mb-2",children:i.totalQuestions}),E.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Preguntas"}),E.jsxs("div",{className:"text-sm text-gray-400",children:[p," por ronda"]})]}),E.jsxs("div",{className:"bg-gradient-to-br from-pink-600/20 to-pink-800/20 rounded-lg p-6 border border-pink-500/30",children:[E.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-pink-400 mb-2",children:i.totalDares}),E.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Retos"}),E.jsxs("div",{className:"text-sm text-gray-400",children:[y," por ronda"]})]})]}),E.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[E.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Jugadores Participantes"}),E.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:e.map((le,ie)=>E.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full",children:[E.jsx("span",{className:"text-lg",children:"🎮"}),E.jsx("span",{className:"font-medium",children:le})]},ie))})]}),i.roundStats.length>0&&E.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[E.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Resumen por Rondas"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.roundStats.map((le,ie)=>{var re;return E.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 border border-gray-600",children:[E.jsxs("div",{className:"text-base sm:text-lg font-semibold text-purple-400 mb-2",children:["Ronda ",le.roundNumber]}),E.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[E.jsxs("div",{children:["📝 ",le.questionsAsked," preguntas"]}),E.jsxs("div",{children:["🎯 ",le.daresCompleted," retos"]}),E.jsxs("div",{children:["👥 ",((re=le.playersParticipated)==null?void 0:re.length)||0," jugadores"]})]})]},ie)})})]}),u?E.jsxs("div",{className:"bg-gradient-to-r from-yellow-600/20 to-orange-600/20 rounded-lg p-6 mb-8 border border-yellow-500/30",children:[E.jsx("div",{className:"text-3xl mb-3",children:"🎮✨"}),E.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"¡Demo Completado!"}),E.jsx("p",{className:"text-gray-300 mb-4",children:"¿Te gustó este pack? ¡Hay muchas más preguntas y retos esperándote!"}),E.jsxs("div",{className:"bg-yellow-500/10 rounded-lg p-4 border border-yellow-500/30",children:[E.jsx("p",{className:"text-yellow-200 font-medium mb-2",children:"💡 ¿Sabías que?"}),E.jsx("p",{className:"text-gray-300 text-sm",children:"El pack completo incluye más de 50 preguntas y retos únicos, ¡perfectos para cualquier ocasión!"})]}),E.jsx("div",{className:"mt-4",children:E.jsx(He,{onClick:s,className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-semibold rounded-lg",children:"🛒 ¡Ir a la Tienda!"})})]}):E.jsxs("div",{className:"bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-lg p-6 mb-8 border border-purple-500/30",children:[E.jsx("div",{className:"text-2xl mb-2",children:"🌟"}),E.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"¡Gracias por jugar!"}),E.jsx("p",{className:"text-gray-300",children:"Esperamos que hayan creado recuerdos increíbles. ¡No olviden compartir sus mejores momentos!"})]}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[E.jsx(He,{onClick:n,className:"px-8 py-3 text-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",disabled:!o&&!T,children:"🎮 Nueva Partida"}),E.jsx(He,{onClick:s,variant:"secondary",className:"px-8 py-3 text-lg",disabled:!o&&!T,children:"🏠 Menú Principal"})]}),E.jsxs("div",{className:"mt-8 text-xs text-gray-500",children:[E.jsx("p",{children:"¿Te gustó el juego? ¡Compártelo con tus amigos!"}),E.jsx("p",{className:"mt-1",children:"Verdad o Reto - La diversión nunca termina"})]})]})})},hS=()=>{};var wv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},dS=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],d=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},uE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],d=o+1<i.length,m=d?i[o+1]:0,p=o+2<i.length,y=p?i[o+2]:0,T=u>>2,A=(u&3)<<4|m>>4;let S=(m&15)<<2|y>>6,U=y&63;p||(U=64,d||(S=64)),s.push(n[T],n[A],n[S],n[U])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(lE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):dS(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const A=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||y==null||A==null)throw new fS;const S=u<<2|m>>4;if(s.push(S),y!==64){const U=m<<4&240|y>>2;if(s.push(U),A!==64){const k=y<<6&192|A;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class fS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mS=function(i){const e=lE(i);return uE.encodeByteArray(e,!0)},dh=function(i){return mS(i).replace(/\./g,"")},cE=function(i){try{return uE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=()=>gS().__FIREBASE_DEFAULTS__,yS=()=>{if(typeof process>"u"||typeof wv>"u")return;const i=wv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},_S=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&cE(i[1]);return e&&JSON.parse(e)},Oh=()=>{try{return hS()||pS()||yS()||_S()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},hE=i=>{var e,n;return(n=(e=Oh())==null?void 0:e.emulatorHosts)==null?void 0:n[i]},vS=i=>{const e=hE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},dE=()=>{var i;return(i=Oh())==null?void 0:i.config},fE=i=>{var e;return(e=Oh())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mE(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[dh(JSON.stringify(n)),dh(JSON.stringify(d)),""].join(".")}const Wl={};function wS(){const i={prod:[],emulator:[]};for(const e of Object.keys(Wl))Wl[e]?i.emulator.push(e):i.prod.push(e);return i}function bS(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let bv=!1;function gE(i,e){if(typeof window>"u"||typeof document>"u"||!wo(window.location.host)||Wl[i]===e||Wl[i]||bv)return;Wl[i]=e;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=wS().prod.length>0;function d(){const S=document.getElementById(s);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,U){S.setAttribute("width","24"),S.setAttribute("id",U),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{bv=!0,d()},S}function T(S,U){S.setAttribute("id",U),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function A(){const S=bS(s),U=n("text"),k=document.getElementById(U)||document.createElement("span"),Y=n("learnmore"),H=document.getElementById(Y)||document.createElement("a"),le=n("preprendIcon"),ie=document.getElementById(le)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const re=S.element;m(re),T(H,Y);const ge=y();p(ie,le),re.append(ie,k,H,ge),document.body.appendChild(re)}u?(k.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function SS(){var e;const i=(e=Oh())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xS(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function IS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CS(){const i=on();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function NS(){return!SS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DS(){try{return typeof indexedDB=="object"}catch{return!1}}function OS(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="FirebaseError";class vi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=PS,Object.setPrototypeOf(this,vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fu.prototype.create)}}class fu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?VS(u,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new vi(o,m,s)}}function VS(i,e){return i.replace(MS,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const MS=/\{\$([^}]+)}/g;function kS(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ea(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],d=e[o];if(Av(u)&&Av(d)){if(!ea(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Av(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Fl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Gl(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function LS(i,e){const n=new US(i,e);return n.subscribe.bind(n)}class US{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");jS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=am),o.error===void 0&&(o.error=am),o.complete===void 0&&(o.complete=am);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jS(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function am(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(i){return i&&i._delegate?i._delegate:i}class ta{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new ES;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BS(e))try{this.getOrInitializeService({instanceIdentifier:$s})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=$s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$s){return this.instances.has(e)}getOptions(e=$s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:qS(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=$s){return this.component?this.component.multipleInstances?e:$s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qS(i){return i===$s?void 0:i}function BS(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ke||(ke={}));const FS={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},GS=ke.INFO,QS={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},KS=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=QS[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $m{constructor(e){this.name=e,this._logLevel=GS,this._logHandler=KS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const YS=(i,e)=>e.some(n=>i instanceof n);let Sv,Rv;function XS(){return Sv||(Sv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $S(){return Rv||(Rv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pE=new WeakMap,Tm=new WeakMap,yE=new WeakMap,om=new WeakMap,Wm=new WeakMap;function WS(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(is(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&pE.set(n,i)}).catch(()=>{}),Wm.set(e,i),e}function ZS(i){if(Tm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});Tm.set(i,e)}let wm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Tm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||yE.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return is(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function JS(i){wm=i(wm)}function e1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(lm(this),e,...n);return yE.set(s,e.sort?e.sort():[e]),is(s)}:$S().includes(i)?function(...e){return i.apply(lm(this),e),is(pE.get(this))}:function(...e){return is(i.apply(lm(this),e))}}function t1(i){return typeof i=="function"?e1(i):(i instanceof IDBTransaction&&ZS(i),YS(i,XS())?new Proxy(i,wm):i)}function is(i){if(i instanceof IDBRequest)return WS(i);if(om.has(i))return om.get(i);const e=t1(i);return e!==i&&(om.set(i,e),Wm.set(e,i)),e}const lm=i=>Wm.get(i);function n1(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(i,e),m=is(d);return s&&d.addEventListener("upgradeneeded",p=>{s(is(d.result),p.oldVersion,p.newVersion,is(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const r1=["get","getKey","getAll","getAllKeys","count"],i1=["put","add","delete","clear"],um=new Map;function xv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(um.get(e))return um.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=i1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||r1.includes(n)))return;const u=async function(d,...m){const p=this.transaction(d,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&p.done]))[0]};return um.set(e,u),u}JS(i=>({...i,get:(e,n,s)=>xv(e,n)||i.get(e,n,s),has:(e,n)=>!!xv(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(a1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function a1(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bm="@firebase/app",Iv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new $m("@firebase/app"),o1="@firebase/app-compat",l1="@firebase/analytics-compat",u1="@firebase/analytics",c1="@firebase/app-check-compat",h1="@firebase/app-check",d1="@firebase/auth",f1="@firebase/auth-compat",m1="@firebase/database",g1="@firebase/data-connect",p1="@firebase/database-compat",y1="@firebase/functions",_1="@firebase/functions-compat",v1="@firebase/installations",E1="@firebase/installations-compat",T1="@firebase/messaging",w1="@firebase/messaging-compat",b1="@firebase/performance",A1="@firebase/performance-compat",S1="@firebase/remote-config",R1="@firebase/remote-config-compat",x1="@firebase/storage",I1="@firebase/storage-compat",C1="@firebase/firestore",N1="@firebase/ai",D1="@firebase/firestore-compat",O1="firebase",P1="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="[DEFAULT]",V1={[bm]:"fire-core",[o1]:"fire-core-compat",[u1]:"fire-analytics",[l1]:"fire-analytics-compat",[h1]:"fire-app-check",[c1]:"fire-app-check-compat",[d1]:"fire-auth",[f1]:"fire-auth-compat",[m1]:"fire-rtdb",[g1]:"fire-data-connect",[p1]:"fire-rtdb-compat",[y1]:"fire-fn",[_1]:"fire-fn-compat",[v1]:"fire-iid",[E1]:"fire-iid-compat",[T1]:"fire-fcm",[w1]:"fire-fcm-compat",[b1]:"fire-perf",[A1]:"fire-perf-compat",[S1]:"fire-rc",[R1]:"fire-rc-compat",[x1]:"fire-gcs",[I1]:"fire-gcs-compat",[C1]:"fire-fst",[D1]:"fire-fst-compat",[N1]:"fire-vertex","fire-js":"fire-js",[O1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new Map,M1=new Map,Sm=new Map;function Cv(i,e){try{i.container.addComponent(e)}catch(n){mi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function mo(i){const e=i.name;if(Sm.has(e))return mi.debug(`There were multiple attempts to register component ${e}.`),!1;Sm.set(e,i);for(const n of fh.values())Cv(n,i);for(const n of M1.values())Cv(n,i);return!0}function Zm(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function _n(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new fu("app","Firebase",k1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ta("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=P1;function _E(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:Am,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ss.create("bad-app-name",{appName:String(o)});if(n||(n=dE()),!n)throw ss.create("no-options");const u=fh.get(o);if(u){if(ea(n,u.options)&&ea(s,u.config))return u;throw ss.create("duplicate-app",{appName:o})}const d=new HS(o);for(const p of Sm.values())d.addComponent(p);const m=new L1(n,s,d);return fh.set(o,m),m}function vE(i=Am){const e=fh.get(i);if(!e&&i===Am&&dE())return _E();if(!e)throw ss.create("no-app",{appName:i});return e}function as(i,e,n){let s=V1[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mi.warn(d.join(" "));return}mo(new ta(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="firebase-heartbeat-database",j1=1,ru="firebase-heartbeat-store";let cm=null;function EE(){return cm||(cm=n1(U1,j1,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ru)}catch(n){console.warn(n)}}}}).catch(i=>{throw ss.create("idb-open",{originalErrorMessage:i.message})})),cm}async function z1(i){try{const n=(await EE()).transaction(ru),s=await n.objectStore(ru).get(TE(i));return await n.done,s}catch(e){if(e instanceof vi)mi.warn(e.message);else{const n=ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mi.warn(n.message)}}}async function Nv(i,e){try{const s=(await EE()).transaction(ru,"readwrite");await s.objectStore(ru).put(e,TE(i)),await s.done}catch(n){if(n instanceof vi)mi.warn(n.message);else{const s=ss.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mi.warn(s.message)}}}function TE(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=1024,B1=30;class H1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new G1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Dv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>B1){const d=Q1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){mi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Dv(),{heartbeatsToSend:s,unsentEntries:o}=F1(this._heartbeatsCache.heartbeats),u=dh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return mi.warn(n),""}}}function Dv(){return new Date().toISOString().substring(0,10)}function F1(i,e=q1){const n=[];let s=i.slice();for(const o of i){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),Ov(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Ov(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class G1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DS()?OS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await z1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Nv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Nv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ov(i){return dh(JSON.stringify({version:2,heartbeats:i})).length}function Q1(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(i){mo(new ta("platform-logger",e=>new s1(e),"PRIVATE")),mo(new ta("heartbeat",e=>new H1(e),"PRIVATE")),as(bm,Iv,i),as(bm,Iv,"esm2020"),as("fire-js","")}K1("");function wE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Y1=wE,bE=new fu("auth","Firebase",wE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new $m("@firebase/auth");function X1(i,...e){mh.logLevel<=ke.WARN&&mh.warn(`Auth (${bo}): ${i}`,...e)}function nh(i,...e){mh.logLevel<=ke.ERROR&&mh.error(`Auth (${bo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(i,...e){throw eg(i,...e)}function tr(i,...e){return eg(i,...e)}function Jm(i,e,n){const s={...Y1(),[e]:n};return new fu("auth","Firebase",s).create(e,{appName:i.name})}function Ar(i){return Jm(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $1(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Kn(i,"argument-error"),Jm(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function eg(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return bE.create(i,...e)}function be(i,e,...n){if(!i)throw eg(e,...n)}function hi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw nh(e),new Error(e)}function gi(i,e){i||hi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function W1(){return Pv()==="http:"||Pv()==="https:"}function Pv(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(W1()||xS()||"connection"in navigator)?navigator.onLine:!0}function J1(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n){this.shortDelay=e,this.longDelay=n,gi(n>e,"Short delay should be less than long delay!"),this.isMobile=AS()||IS()}get(){return Z1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(i,e){gi(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nR=new gu(3e4,6e4);function Ei(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Pr(i,e,n,s,o={}){return SE(i,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const m=mu({key:i.config.apiKey,...d}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:p,...u};return RS()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&wo(i.emulatorConfig.host)&&(y.credentials="include"),AE.fetch()(await RE(i,i.config.apiHost,n,m),y)})}async function SE(i,e,n){i._canInitEmulator=!1;const s={...eR,...e};try{const o=new iR(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Yc(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yc(i,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw Yc(i,"email-already-in-use",d);if(p==="USER_DISABLED")throw Yc(i,"user-disabled",d);const T=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Jm(i,T,y);Kn(i,T)}}catch(o){if(o instanceof vi)throw o;Kn(i,"network-request-failed",{message:String(o)})}}async function pu(i,e,n,s,o={}){const u=await Pr(i,e,n,s,o);return"mfaPendingCredential"in u&&Kn(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function RE(i,e,n,s){const o=`${e}${n}?${s}`,u=i,d=u.config.emulator?tg(i.config,o):`${i.config.apiScheme}://${o}`;return tR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function rR(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(tr(this.auth,"network-request-failed")),nR.get())})}}function Yc(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=tr(i,e,s);return o.customData._tokenResponse=n,o}function Vv(i){return i!==void 0&&i.enterprise!==void 0}class sR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function aR(i,e){return Pr(i,"GET","/v2/recaptchaConfig",Ei(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(i,e){return Pr(i,"POST","/v1/accounts:delete",e)}async function gh(i,e){return Pr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lR(i,e=!1){const n=Ct(i),s=await n.getIdToken(e),o=ng(s);be(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Zl(hm(o.auth_time)),issuedAtTime:Zl(hm(o.iat)),expirationTime:Zl(hm(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function hm(i){return Number(i)*1e3}function ng(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return nh("JWT malformed, contained fewer than 3 sections"),null;try{const o=cE(n);return o?JSON.parse(o):(nh("Failed to decode base64 JWT payload"),null)}catch(o){return nh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Mv(i){const e=ng(i);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof vi&&uR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function uR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zl(this.lastLoginAt),this.creationTime=Zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(i){var A;const e=i.auth,n=await i.getIdToken(),s=await go(i,gh(e,{idToken:n}));be(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=(A=o.providerUserInfo)!=null&&A.length?xE(o.providerUserInfo):[],d=dR(i.providerData,u),m=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!(d!=null&&d.length),y=m?p:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new xm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,T)}async function hR(i){const e=Ct(i);await ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function xE(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(i,e){const n=await SE(i,{},async()=>{const s=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,d=await RE(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return i.emulatorConfig&&wo(i.emulatorConfig.host)&&(p.credentials="include"),AE.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function mR(i,e){return Pr(i,"POST","/v2/accounts:revokeToken",Ei(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=Mv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await fR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new oo;return s&&(be(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(be(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(be(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oo,this.toJSON())}_performRefresh(){return hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(i,e){be(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class er{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new cR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await go(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lR(this,e)}reload(){return hR(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new er({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ph(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(Ar(this.auth));const e=await this.getIdToken();return await go(this,oR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:A,emailVerified:S,isAnonymous:U,providerData:k,stsTokenManager:Y}=n;be(A&&Y,e,"internal-error");const H=oo.fromJSON(this.name,Y);be(typeof A=="string",e,"internal-error"),Zi(s,e.name),Zi(o,e.name),be(typeof S=="boolean",e,"internal-error"),be(typeof U=="boolean",e,"internal-error"),Zi(u,e.name),Zi(d,e.name),Zi(m,e.name),Zi(p,e.name),Zi(y,e.name),Zi(T,e.name);const le=new er({uid:A,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:U,photoURL:d,phoneNumber:u,tenantId:m,stsTokenManager:H,createdAt:y,lastLoginAt:T});return k&&Array.isArray(k)&&(le.providerData=k.map(ie=>({...ie}))),p&&(le._redirectEventId=p),le}static async _fromIdTokenResponse(e,n,s=!1){const o=new oo;o.updateFromServerResponse(n);const u=new er({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await ph(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];be(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?xE(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new oo;m.updateFromIdToken(s);const p=new er({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new xm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=new Map;function di(i){gi(i instanceof Function,"Expected a class definition");let e=kv.get(i);return e?(gi(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,kv.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}IE.type="NONE";const Lv=IE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(i,e,n){return`firebase:${i}:${e}:${n}`}class lo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=rh(this.userKey,o.apiKey,u),this.fullPersistenceKey=rh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await gh(this.auth,{idToken:e}).catch(()=>{});return n?er._fromGetAccountInfoResponse(this.auth,n,e):null}return er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new lo(di(Lv),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||di(Lv);const d=rh(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const T=await y._get(d);if(T){let A;if(typeof T=="string"){const S=await gh(e,{idToken:T}).catch(()=>{});if(!S)break;A=await er._fromGetAccountInfoResponse(e,S,T)}else A=er._fromJSON(e,T);y!==u&&(m=A),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new lo(u,e,s):(u=p[0],m&&await u._set(d,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new lo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VE(e))return"Blackberry";if(ME(e))return"Webos";if(NE(e))return"Safari";if((e.includes("chrome/")||DE(e))&&!e.includes("edge/"))return"Chrome";if(PE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function CE(i=on()){return/firefox\//i.test(i)}function NE(i=on()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DE(i=on()){return/crios\//i.test(i)}function OE(i=on()){return/iemobile/i.test(i)}function PE(i=on()){return/android/i.test(i)}function VE(i=on()){return/blackberry/i.test(i)}function ME(i=on()){return/webos/i.test(i)}function rg(i=on()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function gR(i=on()){var e;return rg(i)&&!!((e=window.navigator)!=null&&e.standalone)}function pR(){return CS()&&document.documentMode===10}function kE(i=on()){return rg(i)||PE(i)||ME(i)||VE(i)||/windows phone/i.test(i)||OE(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(i,e=[]){let n;switch(i){case"Browser":n=Uv(on());break;case"Worker":n=`${Uv(on())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,m)=>{try{const p=e(u);d(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(i,e={}){return Pr(i,"GET","/v2/passwordPolicy",Ei(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=6;class ER{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??vR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jv(this),this.idTokenSubscription=new jv(this),this.beforeStateQueue=new yR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=di(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await lo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await gh(this,{idToken:e}),s=await er._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(_n(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(u=this.redirectUser)==null?void 0:u._redirectEventId,m=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===m)&&(p!=null&&p.user)&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(d){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=J1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(Ar(this));const n=e?Ct(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(Ar(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(Ar(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _R(this),n=new ER(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await mR(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&di(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await lo.create(this,[di(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&X1(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Vr(i){return Ct(i)}class jv{constructor(e){this.auth=e,this.observer=null,this.addObserver=LS(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wR(i){Ph=i}function UE(i){return Ph.loadJS(i)}function bR(){return Ph.recaptchaEnterpriseScript}function AR(){return Ph.gapiScript}function SR(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class RR{constructor(){this.enterprise=new xR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class xR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const IR="recaptcha-enterprise",jE="NO_RECAPTCHA";class CR{constructor(e){this.type=IR,this.auth=Vr(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,m)=>{aR(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new sR(p);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(p=>{m(p)})})}function o(u,d,m){const p=window.grecaptcha;Vv(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(jE)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RR().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{s(this.auth).then(m=>{if(!n&&Vv(window.grecaptcha))o(m,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=bR();p.length!==0&&(p+=m),UE(p).then(()=>{o(m,u,d)}).catch(y=>{d(y)})}}).catch(m=>{d(m)})})}}async function zv(i,e,n,s=!1,o=!1){const u=new CR(i);let d;if(o)d=jE;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function yh(i,e,n,s,o){var u;if((u=i._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await zv(i,e,n,n==="getOobCode");return s(i,d)}else return s(i,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await zv(i,e,n,n==="getOobCode");return s(i,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(i,e){const n=Zm(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ea(u,e??{}))return o;Kn(o,"already-initialized")}return n.initialize({options:e})}function DR(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(di);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function OR(i,e,n){const s=Vr(i);be(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=zE(e),{host:d,port:m}=PR(e),p=m===null?"":`:${m}`,y={url:`${u}//${d}${p}/`},T=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){be(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),be(ea(y,s.config.emulator)&&ea(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,wo(d)?(mE(`${u}//${d}${p}`),gE("Auth",!0)):VR()}function zE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function PR(i){const e=zE(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:qv(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:qv(d)}}}function qv(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function VR(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hi("not implemented")}_getIdTokenResponse(e){return hi("not implemented")}_linkToIdToken(e,n){return hi("not implemented")}_getReauthenticationResolver(e){return hi("not implemented")}}async function MR(i,e){return Pr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(i,e){return pu(i,"POST","/v1/accounts:signInWithPassword",Ei(i,e))}async function qE(i,e){return Pr(i,"POST","/v1/accounts:sendOobCode",Ei(i,e))}async function LR(i,e){return qE(i,e)}async function UR(i,e){return qE(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(i,e){return pu(i,"POST","/v1/accounts:signInWithEmailLink",Ei(i,e))}async function zR(i,e){return pu(i,"POST","/v1/accounts:signInWithEmailLink",Ei(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends ig{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new iu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new iu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yh(e,n,"signInWithPassword",kR);case"emailLink":return jR(e,{email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yh(e,s,"signUpPassword",MR);case"emailLink":return zR(e,{idToken:n,email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(i,e){return pu(i,"POST","/v1/accounts:signInWithIdp",Ei(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="http://localhost";class na extends ig{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new na(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const d=new na(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return uo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,uo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uo(e,n)}buildRequest(){const e={requestUri:qR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function HR(i){const e=Fl(Gl(i)).link,n=e?Fl(Gl(e)).deep_link_id:null,s=Fl(Gl(i)).deep_link_id;return(s?Fl(Gl(s)).link:null)||s||n||e||i}class sg{constructor(e){const n=Fl(Gl(e)),s=n.apiKey??null,o=n.oobCode??null,u=BR(n.mode??null);be(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=HR(e);try{return new sg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.providerId=Ao.PROVIDER_ID}static credential(e,n){return iu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=sg.parseLink(n);return be(s,"argument-error"),iu._fromEmailAndCode(e,s.code,s.tenantId)}}Ao.PROVIDER_ID="password";Ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends ag{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends yu{constructor(){super("facebook.com")}static credential(e){return na._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ji.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return na._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ci.credential(n,s)}catch{return null}}}ci.GOOGLE_SIGN_IN_METHOD="google.com";ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends yu{constructor(){super("github.com")}static credential(e){return na._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.GITHUB_SIGN_IN_METHOD="github.com";es.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends yu{constructor(){super("twitter.com")}static credential(e,n){return na._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ts.credential(n,s)}catch{return null}}}ts.TWITTER_SIGN_IN_METHOD="twitter.com";ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BE(i,e){return pu(i,"POST","/v1/accounts:signUp",Ei(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await er._fromIdTokenResponse(e,s,o),d=Bv(s);return new pi({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Bv(s);return new pi({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Bv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(i){var o;if(_n(i.app))return Promise.reject(Ar(i));const e=Vr(i);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new pi({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await BE(e,{returnSecureToken:!0}),s=await pi._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h extends vi{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,_h.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new _h(e,n,s,o)}}function HE(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?_h._fromErrorAndOperation(i,u,e,s):u})}async function GR(i,e,n=!1){const s=await go(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return pi._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(i,e,n=!1){const{auth:s}=i;if(_n(s.app))return Promise.reject(Ar(s));const o="reauthenticate";try{const u=await go(i,HE(s,o,e,i),n);be(u.idToken,s,"internal-error");const d=ng(u.idToken);be(d,s,"internal-error");const{sub:m}=d;return be(i.uid===m,s,"user-mismatch"),pi._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Kn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FE(i,e,n=!1){if(_n(i.app))return Promise.reject(Ar(i));const s="signIn",o=await HE(i,s,e),u=await pi._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function KR(i,e){return FE(Vr(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GE(i){const e=Vr(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function YR(i,e,n){const s=Vr(i);await yh(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",UR)}async function XR(i,e,n){if(_n(i.app))return Promise.reject(Ar(i));const s=Vr(i),d=await yh(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BE).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&GE(i),p}),m=await pi._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function $R(i,e,n){return _n(i.app)?Promise.reject(Ar(i)):KR(Ct(i),Ao.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&GE(i),s})}async function QE(i,e){const n=Ct(i),o={requestType:"VERIFY_EMAIL",idToken:await i.getIdToken()},{email:u}=await LR(n.auth,o);u!==i.email&&await i.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(i,e){return Pr(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(i,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=Ct(i),u={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},d=await go(s,WR(s.auth,u));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const m=s.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function JR(i,e,n,s){return Ct(i).onIdTokenChanged(e,n,s)}function ex(i,e,n){return Ct(i).beforeAuthStateChanged(e,n)}function tx(i,e,n,s){return Ct(i).onAuthStateChanged(e,n,s)}function nx(i){return Ct(i).signOut()}const vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vh,"1"),this.storage.removeItem(vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=1e3,ix=10;class YE extends KE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);pR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ix):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},rx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}YE.type="LOCAL";const sx=YE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE extends KE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}XE.type="SESSION";const $E=XE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Vh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async y=>y(n.origin,u)),p=await ax(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,p)=>{const y=og("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(A){const S=A;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(S.data.response);break;default:clearTimeout(T),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(){return window}function lx(i){Sr().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}async function ux(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cx(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function hx(){return WE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="firebaseLocalStorageDb",dx=1,Eh="firebaseLocalStorage",JE="fbase_key";class _u{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mh(i,e){return i.transaction([Eh],e?"readwrite":"readonly").objectStore(Eh)}function fx(){const i=indexedDB.deleteDatabase(ZE);return new _u(i).toPromise()}function Im(){const i=indexedDB.open(ZE,dx);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Eh,{keyPath:JE})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Eh)?e(s):(s.close(),await fx(),e(await Im()))})})}async function Hv(i,e,n){const s=Mh(i,!0).put({[JE]:e,value:n});return new _u(s).toPromise()}async function mx(i,e){const n=Mh(i,!1).get(e),s=await new _u(n).toPromise();return s===void 0?null:s.value}function Fv(i,e){const n=Mh(i,!0).delete(e);return new _u(n).toPromise()}const gx=800,px=3;class eT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Im(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>px)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vh._getInstance(hx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await ux(),!this.activeServiceWorker)return;this.sender=new ox(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Im();return await Hv(e,vh,"1"),await Fv(e,vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Hv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>mx(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Fv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Mh(o,!1).getAll();return new _u(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eT.type="LOCAL";const yx=eT;new gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(i,e){return e?di(e):(be(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg extends ig{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _x(i){return FE(i.auth,new lg(i),i.bypassAuthState)}function vx(i){const{auth:e,user:n}=i;return be(n,e,"internal-error"),QR(n,new lg(i),i.bypassAuthState)}async function Ex(i){const{auth:e,user:n}=i;return be(n,e,"internal-error"),GR(n,new lg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _x;case"linkViaPopup":case"linkViaRedirect":return Ex;case"reauthViaPopup":case"reauthViaRedirect":return vx;default:Kn(this.auth,"internal-error")}}resolve(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new gu(2e3,1e4);async function wx(i,e,n){if(_n(i.app))return Promise.reject(tr(i,"operation-not-supported-in-this-environment"));const s=Vr(i);$1(i,e,ag);const o=tT(s,n);return new Ws(s,"signInViaPopup",e,o).executeNotNull()}class Ws extends nT{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Ws.currentPopupAction&&Ws.currentPopupAction.cancel(),Ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){gi(this.filter.length===1,"Popup operations only handle one event");const e=og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Tx.get())};e()}}Ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="pendingRedirect",ih=new Map;class Ax extends nT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ih.get(this.auth._key());if(!e){try{const s=await Sx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ih.set(this.auth._key(),e)}return this.bypassAuthState||ih.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Sx(i,e){const n=Ix(e),s=xx(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function Rx(i,e){ih.set(i._key(),e)}function xx(i){return di(i._redirectPersistence)}function Ix(i){return rh(bx,i.config.apiKey,i.name)}async function Cx(i,e,n=!1){if(_n(i.app))return Promise.reject(Ar(i));const s=Vr(i),o=tT(s,e),d=await new Ax(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=600*1e3;class Dx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ox(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!rT(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(tr(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Nx&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gv(e))}saveEventToCache(e){this.cachedEventUids.add(Gv(e)),this.lastProcessedEventTime=Date.now()}}function Gv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function rT({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Ox(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rT(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Px(i,e={}){return Pr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mx=/^https?/;async function kx(i){if(i.config.emulator)return;const{authorizedDomains:e}=await Px(i);for(const n of e)try{if(Lx(n))return}catch{}Kn(i,"unauthorized-domain")}function Lx(i){const e=Rm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!Mx.test(n))return!1;if(Vx.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=new gu(3e4,6e4);function Qv(){const i=Sr().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function jx(i){return new Promise((e,n)=>{var o,u,d;function s(){Qv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qv(),n(tr(i,"network-request-failed"))},timeout:Ux.get()})}if((u=(o=Sr().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((d=Sr().gapi)!=null&&d.load)s();else{const m=SR("iframefcb");return Sr()[m]=()=>{gapi.load?s():n(tr(i,"network-request-failed"))},UE(`${AR()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw sh=null,e})}let sh=null;function zx(i){return sh=sh||jx(i),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=new gu(5e3,15e3),Bx="__/auth/iframe",Hx="emulator/auth/iframe",Fx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qx(i){const e=i.config;be(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?tg(e,Hx):`https://${i.config.authDomain}/${Bx}`,s={apiKey:e.apiKey,appName:i.name,v:bo},o=Gx.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${mu(s).slice(1)}`}async function Kx(i){const e=await zx(i),n=Sr().gapi;return be(n,i,"internal-error"),e.open({where:document.body,url:Qx(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fx,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=tr(i,"network-request-failed"),m=Sr().setTimeout(()=>{u(d)},qx.get());function p(){Sr().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xx=500,$x=600,Wx="_blank",Zx="http://localhost";class Kv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Jx(i,e,n,s=Xx,o=$x){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...Yx,width:s.toString(),height:o.toString(),top:u,left:d},y=on().toLowerCase();n&&(m=DE(y)?Wx:n),CE(y)&&(e=e||Zx,p.scrollbars="yes");const T=Object.entries(p).reduce((S,[U,k])=>`${S}${U}=${k},`,"");if(gR(y)&&m!=="_self")return eI(e||"",m),new Kv(null);const A=window.open(e||"",m,T);be(A,i,"popup-blocked");try{A.focus()}catch{}return new Kv(A)}function eI(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="__/auth/handler",nI="emulator/auth/handler",rI=encodeURIComponent("fac");async function Yv(i,e,n,s,o,u){be(i.config.authDomain,i,"auth-domain-config-required"),be(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:bo,eventId:o};if(e instanceof ag){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",kS(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,A]of Object.entries({}))d[T]=A}if(e instanceof yu){const T=e.getScopes().filter(A=>A!=="");T.length>0&&(d.scopes=T.join(","))}i.tenantId&&(d.tid=i.tenantId);const m=d;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const p=await i._getAppCheckToken(),y=p?`#${rI}=${encodeURIComponent(p)}`:"";return`${iI(i)}?${mu(m).slice(1)}${y}`}function iI({config:i}){return i.emulator?tg(i,nI):`https://${i.authDomain}/${tI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="webStorageSupport";class sI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$E,this._completeRedirectFn=Cx,this._overrideRedirectResult=Rx}async _openPopup(e,n,s,o){var d;gi((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const u=await Yv(e,n,s,Rm(),o);return Jx(e,u,og())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await Yv(e,n,s,Rm(),o);return lx(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(gi(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await Kx(e),s=new Dx(e);return n.register("authEvent",o=>(be(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dm,{type:dm},o=>{var d;const u=(d=o==null?void 0:o[0])==null?void 0:d[dm];u!==void 0&&n(!!u),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kE()||NE()||rg()}}const aI=sI;var Xv="@firebase/auth",$v="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uI(i){mo(new ta("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;be(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LE(i)},y=new TR(s,o,u,p);return DR(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),mo(new ta("auth-internal",e=>{const n=Vr(e.getProvider("auth").getImmediate());return(s=>new oI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),as(Xv,$v,lI(i)),as(Xv,$v,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=300,hI=fE("authIdTokenMaxAge")||cI;let Wv=null;const dI=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>hI)return;const o=n==null?void 0:n.token;Wv!==o&&(Wv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function fI(i=vE()){const e=Zm(i,"auth");if(e.isInitialized())return e.getImmediate();const n=NR(i,{popupRedirectResolver:aI,persistence:[yx,sx,$E]}),s=fE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=dI(u.toString());ex(n,d,()=>d(n.currentUser)),JR(n,m=>d(m))}}const o=hE("auth");return o&&OR(n,`http://${o}`),n}function mI(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}wR({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=tr("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",mI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uI("Browser");var Zv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var os,iT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function C(){}C.prototype=R.prototype,I.D=R.prototype,I.prototype=new C,I.prototype.constructor=I,I.C=function(O,V,P){for(var x=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)x[Fe-2]=arguments[Fe];return R.prototype[V].apply(O,x)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,R,C){C||(C=0);var O=Array(16);if(typeof R=="string")for(var V=0;16>V;++V)O[V]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(V=0;16>V;++V)O[V]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=I.g[0],C=I.g[1],V=I.g[2];var P=I.g[3],x=R+(P^C&(V^P))+O[0]+3614090360&4294967295;R=C+(x<<7&4294967295|x>>>25),x=P+(V^R&(C^V))+O[1]+3905402710&4294967295,P=R+(x<<12&4294967295|x>>>20),x=V+(C^P&(R^C))+O[2]+606105819&4294967295,V=P+(x<<17&4294967295|x>>>15),x=C+(R^V&(P^R))+O[3]+3250441966&4294967295,C=V+(x<<22&4294967295|x>>>10),x=R+(P^C&(V^P))+O[4]+4118548399&4294967295,R=C+(x<<7&4294967295|x>>>25),x=P+(V^R&(C^V))+O[5]+1200080426&4294967295,P=R+(x<<12&4294967295|x>>>20),x=V+(C^P&(R^C))+O[6]+2821735955&4294967295,V=P+(x<<17&4294967295|x>>>15),x=C+(R^V&(P^R))+O[7]+4249261313&4294967295,C=V+(x<<22&4294967295|x>>>10),x=R+(P^C&(V^P))+O[8]+1770035416&4294967295,R=C+(x<<7&4294967295|x>>>25),x=P+(V^R&(C^V))+O[9]+2336552879&4294967295,P=R+(x<<12&4294967295|x>>>20),x=V+(C^P&(R^C))+O[10]+4294925233&4294967295,V=P+(x<<17&4294967295|x>>>15),x=C+(R^V&(P^R))+O[11]+2304563134&4294967295,C=V+(x<<22&4294967295|x>>>10),x=R+(P^C&(V^P))+O[12]+1804603682&4294967295,R=C+(x<<7&4294967295|x>>>25),x=P+(V^R&(C^V))+O[13]+4254626195&4294967295,P=R+(x<<12&4294967295|x>>>20),x=V+(C^P&(R^C))+O[14]+2792965006&4294967295,V=P+(x<<17&4294967295|x>>>15),x=C+(R^V&(P^R))+O[15]+1236535329&4294967295,C=V+(x<<22&4294967295|x>>>10),x=R+(V^P&(C^V))+O[1]+4129170786&4294967295,R=C+(x<<5&4294967295|x>>>27),x=P+(C^V&(R^C))+O[6]+3225465664&4294967295,P=R+(x<<9&4294967295|x>>>23),x=V+(R^C&(P^R))+O[11]+643717713&4294967295,V=P+(x<<14&4294967295|x>>>18),x=C+(P^R&(V^P))+O[0]+3921069994&4294967295,C=V+(x<<20&4294967295|x>>>12),x=R+(V^P&(C^V))+O[5]+3593408605&4294967295,R=C+(x<<5&4294967295|x>>>27),x=P+(C^V&(R^C))+O[10]+38016083&4294967295,P=R+(x<<9&4294967295|x>>>23),x=V+(R^C&(P^R))+O[15]+3634488961&4294967295,V=P+(x<<14&4294967295|x>>>18),x=C+(P^R&(V^P))+O[4]+3889429448&4294967295,C=V+(x<<20&4294967295|x>>>12),x=R+(V^P&(C^V))+O[9]+568446438&4294967295,R=C+(x<<5&4294967295|x>>>27),x=P+(C^V&(R^C))+O[14]+3275163606&4294967295,P=R+(x<<9&4294967295|x>>>23),x=V+(R^C&(P^R))+O[3]+4107603335&4294967295,V=P+(x<<14&4294967295|x>>>18),x=C+(P^R&(V^P))+O[8]+1163531501&4294967295,C=V+(x<<20&4294967295|x>>>12),x=R+(V^P&(C^V))+O[13]+2850285829&4294967295,R=C+(x<<5&4294967295|x>>>27),x=P+(C^V&(R^C))+O[2]+4243563512&4294967295,P=R+(x<<9&4294967295|x>>>23),x=V+(R^C&(P^R))+O[7]+1735328473&4294967295,V=P+(x<<14&4294967295|x>>>18),x=C+(P^R&(V^P))+O[12]+2368359562&4294967295,C=V+(x<<20&4294967295|x>>>12),x=R+(C^V^P)+O[5]+4294588738&4294967295,R=C+(x<<4&4294967295|x>>>28),x=P+(R^C^V)+O[8]+2272392833&4294967295,P=R+(x<<11&4294967295|x>>>21),x=V+(P^R^C)+O[11]+1839030562&4294967295,V=P+(x<<16&4294967295|x>>>16),x=C+(V^P^R)+O[14]+4259657740&4294967295,C=V+(x<<23&4294967295|x>>>9),x=R+(C^V^P)+O[1]+2763975236&4294967295,R=C+(x<<4&4294967295|x>>>28),x=P+(R^C^V)+O[4]+1272893353&4294967295,P=R+(x<<11&4294967295|x>>>21),x=V+(P^R^C)+O[7]+4139469664&4294967295,V=P+(x<<16&4294967295|x>>>16),x=C+(V^P^R)+O[10]+3200236656&4294967295,C=V+(x<<23&4294967295|x>>>9),x=R+(C^V^P)+O[13]+681279174&4294967295,R=C+(x<<4&4294967295|x>>>28),x=P+(R^C^V)+O[0]+3936430074&4294967295,P=R+(x<<11&4294967295|x>>>21),x=V+(P^R^C)+O[3]+3572445317&4294967295,V=P+(x<<16&4294967295|x>>>16),x=C+(V^P^R)+O[6]+76029189&4294967295,C=V+(x<<23&4294967295|x>>>9),x=R+(C^V^P)+O[9]+3654602809&4294967295,R=C+(x<<4&4294967295|x>>>28),x=P+(R^C^V)+O[12]+3873151461&4294967295,P=R+(x<<11&4294967295|x>>>21),x=V+(P^R^C)+O[15]+530742520&4294967295,V=P+(x<<16&4294967295|x>>>16),x=C+(V^P^R)+O[2]+3299628645&4294967295,C=V+(x<<23&4294967295|x>>>9),x=R+(V^(C|~P))+O[0]+4096336452&4294967295,R=C+(x<<6&4294967295|x>>>26),x=P+(C^(R|~V))+O[7]+1126891415&4294967295,P=R+(x<<10&4294967295|x>>>22),x=V+(R^(P|~C))+O[14]+2878612391&4294967295,V=P+(x<<15&4294967295|x>>>17),x=C+(P^(V|~R))+O[5]+4237533241&4294967295,C=V+(x<<21&4294967295|x>>>11),x=R+(V^(C|~P))+O[12]+1700485571&4294967295,R=C+(x<<6&4294967295|x>>>26),x=P+(C^(R|~V))+O[3]+2399980690&4294967295,P=R+(x<<10&4294967295|x>>>22),x=V+(R^(P|~C))+O[10]+4293915773&4294967295,V=P+(x<<15&4294967295|x>>>17),x=C+(P^(V|~R))+O[1]+2240044497&4294967295,C=V+(x<<21&4294967295|x>>>11),x=R+(V^(C|~P))+O[8]+1873313359&4294967295,R=C+(x<<6&4294967295|x>>>26),x=P+(C^(R|~V))+O[15]+4264355552&4294967295,P=R+(x<<10&4294967295|x>>>22),x=V+(R^(P|~C))+O[6]+2734768916&4294967295,V=P+(x<<15&4294967295|x>>>17),x=C+(P^(V|~R))+O[13]+1309151649&4294967295,C=V+(x<<21&4294967295|x>>>11),x=R+(V^(C|~P))+O[4]+4149444226&4294967295,R=C+(x<<6&4294967295|x>>>26),x=P+(C^(R|~V))+O[11]+3174756917&4294967295,P=R+(x<<10&4294967295|x>>>22),x=V+(R^(P|~C))+O[2]+718787259&4294967295,V=P+(x<<15&4294967295|x>>>17),x=C+(P^(V|~R))+O[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(V+(x<<21&4294967295|x>>>11))&4294967295,I.g[2]=I.g[2]+V&4294967295,I.g[3]=I.g[3]+P&4294967295}s.prototype.u=function(I,R){R===void 0&&(R=I.length);for(var C=R-this.blockSize,O=this.B,V=this.h,P=0;P<R;){if(V==0)for(;P<=C;)o(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<R;)if(O[V++]=I.charCodeAt(P++),V==this.blockSize){o(this,O),V=0;break}}else for(;P<R;)if(O[V++]=I[P++],V==this.blockSize){o(this,O),V=0;break}}this.h=V,this.o+=R},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;var C=8*this.o;for(R=I.length-8;R<I.length;++R)I[R]=C&255,C/=256;for(this.u(I),I=Array(16),R=C=0;4>R;++R)for(var O=0;32>O;O+=8)I[C++]=this.g[R]>>>O&255;return I};function u(I,R){var C=m;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=R(I)}function d(I,R){this.h=R;for(var C=[],O=!0,V=I.length-1;0<=V;V--){var P=I[V]|0;O&&P==R||(C[V]=P,O=!1)}this.g=C}var m={};function p(I){return-128<=I&&128>I?u(I,function(R){return new d([R|0],0>R?-1:0)}):new d([I|0],0>I?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return A;if(0>I)return H(y(-I));for(var R=[],C=1,O=0;I>=C;O++)R[O]=I/C|0,C*=4294967296;return new d(R,0)}function T(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return H(T(I.substring(1),R));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(R,8)),O=A,V=0;V<I.length;V+=8){var P=Math.min(8,I.length-V),x=parseInt(I.substring(V,V+P),R);8>P?(P=y(Math.pow(R,P)),O=O.j(P).add(y(x))):(O=O.j(C),O=O.add(y(x)))}return O}var A=p(0),S=p(1),U=p(16777216);i=d.prototype,i.m=function(){if(Y(this))return-H(this).m();for(var I=0,R=1,C=0;C<this.g.length;C++){var O=this.i(C);I+=(0<=O?O:4294967296+O)*R,R*=4294967296}return I},i.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k(this))return"0";if(Y(this))return"-"+H(this).toString(I);for(var R=y(Math.pow(I,6)),C=this,O="";;){var V=ge(C,R).g;C=le(C,V.j(R));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(I);if(C=V,k(C))return P+O;for(;6>P.length;)P="0"+P;O=P+O}},i.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function k(I){if(I.h!=0)return!1;for(var R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function Y(I){return I.h==-1}i.l=function(I){return I=le(this,I),Y(I)?-1:k(I)?0:1};function H(I){for(var R=I.g.length,C=[],O=0;O<R;O++)C[O]=~I.g[O];return new d(C,~I.h).add(S)}i.abs=function(){return Y(this)?H(this):this},i.add=function(I){for(var R=Math.max(this.g.length,I.g.length),C=[],O=0,V=0;V<=R;V++){var P=O+(this.i(V)&65535)+(I.i(V)&65535),x=(P>>>16)+(this.i(V)>>>16)+(I.i(V)>>>16);O=x>>>16,P&=65535,x&=65535,C[V]=x<<16|P}return new d(C,C[C.length-1]&-2147483648?-1:0)};function le(I,R){return I.add(H(R))}i.j=function(I){if(k(this)||k(I))return A;if(Y(this))return Y(I)?H(this).j(H(I)):H(H(this).j(I));if(Y(I))return H(this.j(H(I)));if(0>this.l(U)&&0>I.l(U))return y(this.m()*I.m());for(var R=this.g.length+I.g.length,C=[],O=0;O<2*R;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<I.g.length;V++){var P=this.i(O)>>>16,x=this.i(O)&65535,Fe=I.i(V)>>>16,Ce=I.i(V)&65535;C[2*O+2*V]+=x*Ce,ie(C,2*O+2*V),C[2*O+2*V+1]+=P*Ce,ie(C,2*O+2*V+1),C[2*O+2*V+1]+=x*Fe,ie(C,2*O+2*V+1),C[2*O+2*V+2]+=P*Fe,ie(C,2*O+2*V+2)}for(O=0;O<R;O++)C[O]=C[2*O+1]<<16|C[2*O];for(O=R;O<2*R;O++)C[O]=0;return new d(C,0)};function ie(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function re(I,R){this.g=I,this.h=R}function ge(I,R){if(k(R))throw Error("division by zero");if(k(I))return new re(A,A);if(Y(I))return R=ge(H(I),R),new re(H(R.g),H(R.h));if(Y(R))return R=ge(I,H(R)),new re(H(R.g),R.h);if(30<I.g.length){if(Y(I)||Y(R))throw Error("slowDivide_ only works with positive integers.");for(var C=S,O=R;0>=O.l(I);)C=ue(C),O=ue(O);var V=xe(C,1),P=xe(O,1);for(O=xe(O,2),C=xe(C,2);!k(O);){var x=P.add(O);0>=x.l(I)&&(V=V.add(C),P=x),O=xe(O,1),C=xe(C,1)}return R=le(I,V.j(R)),new re(V,R)}for(V=A;0<=I.l(R);){for(C=Math.max(1,Math.floor(I.m()/R.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),P=y(C),x=P.j(R);Y(x)||0<x.l(I);)C-=O,P=y(C),x=P.j(R);k(P)&&(P=S),V=V.add(P),I=le(I,x)}return new re(V,I)}i.A=function(I){return ge(this,I).h},i.and=function(I){for(var R=Math.max(this.g.length,I.g.length),C=[],O=0;O<R;O++)C[O]=this.i(O)&I.i(O);return new d(C,this.h&I.h)},i.or=function(I){for(var R=Math.max(this.g.length,I.g.length),C=[],O=0;O<R;O++)C[O]=this.i(O)|I.i(O);return new d(C,this.h|I.h)},i.xor=function(I){for(var R=Math.max(this.g.length,I.g.length),C=[],O=0;O<R;O++)C[O]=this.i(O)^I.i(O);return new d(C,this.h^I.h)};function ue(I){for(var R=I.g.length+1,C=[],O=0;O<R;O++)C[O]=I.i(O)<<1|I.i(O-1)>>>31;return new d(C,I.h)}function xe(I,R){var C=R>>5;R%=32;for(var O=I.g.length-C,V=[],P=0;P<O;P++)V[P]=0<R?I.i(P+C)>>>R|I.i(P+C+1)<<32-R:I.i(P+C);return new d(V,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,iT=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=T,os=d}).apply(typeof Zv<"u"?Zv:typeof self<"u"?self:typeof window<"u"?window:{});var Xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sT,Ql,aT,ah,Cm,oT,lT,uT;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xc=="object"&&Xc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,g){if(g)e:{var _=s;c=c.split(".");for(var b=0;b<c.length-1;b++){var j=c[b];if(!(j in _))break e;_=_[j]}c=c[c.length-1],b=_[c],g=g(b),g!=b&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function u(c,g){c instanceof String&&(c+="");var _=0,b=!1,j={next:function(){if(!b&&_<c.length){var G=_++;return{value:g(G,c[G]),done:!1}}return b=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(c){return c||function(){return u(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function p(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function y(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function T(c,g,_){return c.call.apply(c.bind,arguments)}function A(c,g,_){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,b),c.apply(g,j)}}return function(){return c.apply(g,arguments)}}function S(c,g,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:A,S.apply(null,arguments)}function U(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var b=_.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function k(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(b,j,G){for(var se=Array(arguments.length-2),je=2;je<arguments.length;je++)se[je-2]=arguments[je];return g.prototype[j].apply(b,se)}}function Y(c){const g=c.length;if(0<g){const _=Array(g);for(let b=0;b<g;b++)_[b]=c[b];return _}return[]}function H(c,g){for(let _=1;_<arguments.length;_++){const b=arguments[_];if(p(b)){const j=c.length||0,G=b.length||0;c.length=j+G;for(let se=0;se<G;se++)c[j+se]=b[se]}else c.push(b)}}class le{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function ie(c){return/^[\s\xa0]*$/.test(c)}function re(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function ge(c){return ge[" "](c),c}ge[" "]=function(){};var ue=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function xe(c,g,_){for(const b in c)g.call(_,c[b],b,c)}function I(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function R(c){const g={};for(const _ in c)g[_]=c[_];return g}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,g){let _,b;for(let j=1;j<arguments.length;j++){b=arguments[j];for(_ in b)c[_]=b[_];for(let G=0;G<C.length;G++)_=C[G],Object.prototype.hasOwnProperty.call(b,_)&&(c[_]=b[_])}}function V(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function P(c){m.setTimeout(()=>{throw c},0)}function x(){var c=pe;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Fe{constructor(){this.h=this.g=null}add(g,_){const b=Ce.get();b.set(g,_),this.h?this.h.next=b:this.g=b,this.h=b}}var Ce=new le(()=>new Q,c=>c.reset());class Q{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let te,ee=!1,pe=new Fe,D=()=>{const c=m.Promise.resolve(void 0);te=()=>{c.then(Z)}};var Z=()=>{for(var c;c=x();){try{c.h.call(c.g)}catch(_){P(_)}var g=Ce;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ee=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,g),m.removeEventListener("test",_,g)}catch{}return c})();function De(c,g){if(ne.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(ue){e:{try{ge(g.nodeName);var j=!0;break e}catch{}j=!1}j||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Te[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&De.aa.h.call(this)}}k(De,ne);var Te={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Tt="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function Dn(c,g,_,b,j){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!b,this.ha=j,this.key=++Ze,this.da=this.fa=!1}function ar(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function On(c){this.src=c,this.g={},this.h=0}On.prototype.add=function(c,g,_,b,j){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var se=kr(c,g,b,j);return-1<se?(g=c[se],_||(g.fa=!1)):(g=new Dn(g,this.src,G,!!b,j),g.fa=_,c.push(g)),g};function Mr(c,g){var _=g.type;if(_ in c.g){var b=c.g[_],j=Array.prototype.indexOf.call(b,g,void 0),G;(G=0<=j)&&Array.prototype.splice.call(b,j,1),G&&(ar(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function kr(c,g,_,b){for(var j=0;j<c.length;++j){var G=c[j];if(!G.da&&G.listener==g&&G.capture==!!_&&G.ha==b)return j}return-1}var Lr="closure_lm_"+(1e6*Math.random()|0),_s={};function la(c,g,_,b,j){if(Array.isArray(g)){for(var G=0;G<g.length;G++)la(c,g[G],_,b,j);return null}return _=ua(_),c&&c[Tt]?c.K(g,_,y(b)?!!b.capture:!1,j):fn(c,g,_,!1,b,j)}function fn(c,g,_,b,j,G){if(!g)throw Error("Invalid event type");var se=y(j)?!!j.capture:!!j,je=wi(c);if(je||(c[Lr]=je=new On(c)),_=je.add(g,_,b,se,G),_.proxy)return _;if(b=Po(),_.proxy=b,b.src=c,b.listener=_,c.addEventListener)_e||(j=se),j===void 0&&(j=!1),c.addEventListener(g.toString(),b,j);else if(c.attachEvent)c.attachEvent(Ur(g.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Po(){function c(_){return g.call(c.src,c.listener,_)}const g=Vo;return c}function vs(c,g,_,b,j){if(Array.isArray(g))for(var G=0;G<g.length;G++)vs(c,g[G],_,b,j);else b=y(b)?!!b.capture:!!b,_=ua(_),c&&c[Tt]?(c=c.i,g=String(g).toString(),g in c.g&&(G=c.g[g],_=kr(G,_,b,j),-1<_&&(ar(G[_]),Array.prototype.splice.call(G,_,1),G.length==0&&(delete c.g[g],c.h--)))):c&&(c=wi(c))&&(g=c.g[g.toString()],c=-1,g&&(c=kr(g,_,b,j)),(_=-1<c?g[c]:null)&&Ti(_))}function Ti(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Tt])Mr(g.i,c);else{var _=c.type,b=c.proxy;g.removeEventListener?g.removeEventListener(_,b,c.capture):g.detachEvent?g.detachEvent(Ur(_),b):g.addListener&&g.removeListener&&g.removeListener(b),(_=wi(g))?(Mr(_,c),_.h==0&&(_.src=null,g[Lr]=null)):ar(c)}}}function Ur(c){return c in _s?_s[c]:_s[c]="on"+c}function Vo(c,g){if(c.da)c=!0;else{g=new De(g,this);var _=c.listener,b=c.ha||c.src;c.fa&&Ti(c),c=_.call(b,g)}return c}function wi(c){return c=c[Lr],c instanceof On?c:null}var bi="__closure_events_fn_"+(1e9*Math.random()>>>0);function ua(c){return typeof c=="function"?c:(c[bi]||(c[bi]=function(g){return c.handleEvent(g)}),c[bi])}function lt(){ae.call(this),this.i=new On(this),this.M=this,this.F=null}k(lt,ae),lt.prototype[Tt]=!0,lt.prototype.removeEventListener=function(c,g,_,b){vs(this,c,g,_,b)};function Ge(c,g){var _,b=c.F;if(b)for(_=[];b;b=b.F)_.push(b);if(c=c.M,b=g.type||g,typeof g=="string")g=new ne(g,c);else if(g instanceof ne)g.target=g.target||c;else{var j=g;g=new ne(b,c),O(g,j)}if(j=!0,_)for(var G=_.length-1;0<=G;G--){var se=g.g=_[G];j=ln(se,b,!0,g)&&j}if(se=g.g=c,j=ln(se,b,!0,g)&&j,j=ln(se,b,!1,g)&&j,_)for(G=0;G<_.length;G++)se=g.g=_[G],j=ln(se,b,!1,g)&&j}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],b=0;b<_.length;b++)ar(_[b]);delete c.g[g],c.h--}}this.F=null},lt.prototype.K=function(c,g,_,b){return this.i.add(String(c),g,!1,_,b)},lt.prototype.L=function(c,g,_,b){return this.i.add(String(c),g,!0,_,b)};function ln(c,g,_,b){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var j=!0,G=0;G<g.length;++G){var se=g[G];if(se&&!se.da&&se.capture==_){var je=se.listener,Dt=se.ha||se.src;se.fa&&Mr(c.i,se),j=je.call(Dt,b)!==!1&&j}}return j&&!b.defaultPrevented}function kt(c,g,_){if(typeof c=="function")_&&(c=S(c,_));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:m.setTimeout(c,g||0)}function ca(c){c.g=kt(()=>{c.g=null,c.i&&(c.i=!1,ca(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class de extends ae{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ca(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function me(c){ae.call(this),this.h=c,this.g={}}k(me,ae);var gt=[];function En(c){xe(c.g,function(g,_){this.g.hasOwnProperty(_)&&Ti(g)},c),c.g={}}me.prototype.N=function(){me.aa.N.call(this),En(this)},me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yn=m.JSON.stringify,ha=m.JSON.parse,Es=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Mo(){}Mo.prototype.h=null;function ko(c){return c.h||(c.h=c.i())}function Lo(){}var jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zr(){ne.call(this,"d")}k(zr,ne);function Uo(){ne.call(this,"c")}k(Uo,ne);var or={},jo=null;function Ai(){return jo=jo||new lt}or.La="serverreachability";function da(c){ne.call(this,or.La,c)}k(da,ne);function Si(c){const g=Ai();Ge(g,new da(g))}or.STAT_EVENT="statevent";function Ru(c,g){ne.call(this,or.STAT_EVENT,c),this.stat=g}k(Ru,ne);function ut(c){const g=Ai();Ge(g,new Ru(g,c))}or.Ma="timingevent";function Nt(c,g){ne.call(this,or.Ma,c),this.size=g}k(Nt,ne);function wt(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},g)}function Pn(){this.g=!0}Pn.prototype.xa=function(){this.g=!1};function zo(c,g,_,b,j,G){c.info(function(){if(c.g)if(G)for(var se="",je=G.split("&"),Dt=0;Dt<je.length;Dt++){var ze=je[Dt].split("=");if(1<ze.length){var Ut=ze[0];ze=ze[1];var Ot=Ut.split("_");se=2<=Ot.length&&Ot[1]=="type"?se+(Ut+"="+ze+"&"):se+(Ut+"=redacted&")}}else se=null;else se=G;return"XMLHTTP REQ ("+b+") [attempt "+j+"]: "+g+`
`+_+`
`+se})}function td(c,g,_,b,j,G,se){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+j+"]: "+g+`
`+_+`
`+G+" "+se})}function Ri(c,g,_,b){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ts(c,_)+(b?" "+b:"")})}function xu(c,g){c.info(function(){return"TIMEOUT: "+g})}Pn.prototype.info=function(){};function Ts(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var b=_[c];if(!(2>b.length)){var j=b[1];if(Array.isArray(j)&&!(1>j.length)){var G=j[0];if(G!="noop"&&G!="stop"&&G!="close")for(var se=1;se<j.length;se++)j[se]=""}}}}return Yn(_)}catch{return g}}var xi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lr;function ur(){}k(ur,Mo),ur.prototype.g=function(){return new XMLHttpRequest},ur.prototype.i=function(){return{}},lr=new ur;function un(c,g,_,b){this.j=c,this.i=g,this.l=_,this.R=b||1,this.U=new me(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pt}function pt(){this.i=null,this.g="",this.h=!1}var qo={},fa={};function Xn(c,g,_){c.L=1,c.v=Rs(Tn(g)),c.m=_,c.P=!0,Br(c,null)}function Br(c,g){c.F=Date.now(),ws(c),c.A=Tn(c.v);var _=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),Ko(_.i,"t",b),c.C=0,_=c.j.J,c.h=new pt,c.g=Hu(c.j,_?g:null,!c.m),0<c.O&&(c.M=new de(S(c.Y,c,c.g),c.O)),g=c.U,_=c.g,b=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(gt[0]=j.toString()),j=gt);for(var G=0;G<j.length;G++){var se=la(_,j[G],b||g.handleEvent,!1,g.h||g);if(!se)break;g.g[se.key]=se}g=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Si(),zo(c.i,c.u,c.A,c.l,c.R,c.m)}un.prototype.ca=function(c){c=c.target;const g=this.M;g&&Ln(c)==3?g.j():this.Y(c)},un.prototype.Y=function(c){try{if(c==this.g)e:{const Ot=Ln(this.g);var g=this.g.Ba();const $r=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||Mu(this.g)))){this.J||Ot!=4||g==7||(g==8||0>=$r?Si(3):Si(2)),Ii(this);var _=this.g.Z();this.X=_;t:if(Iu(this)){var b=Mu(this.g);c="";var j=b.length,G=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ft(this),cr(this);var se="";break t}this.h.i=new m.TextDecoder}for(g=0;g<j;g++)this.h.h=!0,c+=this.h.i.decode(b[g],{stream:!(G&&g==j-1)});b.length=0,this.h.g+=c,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=_==200,td(this.i,this.u,this.A,this.l,this.R,Ot,_),this.o){if(this.T&&!this.K){t:{if(this.g){var je,Dt=this.g;if((je=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(je)){var ze=je;break t}}ze=null}if(_=ze)Ri(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bs(this,_);else{this.o=!1,this.s=3,ut(12),Ft(this),cr(this);break e}}if(this.P){_=!0;let Gt;for(;!this.J&&this.C<se.length;)if(Gt=Cu(this,se),Gt==fa){Ot==4&&(this.s=4,ut(14),_=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==qo){this.s=4,ut(15),Ri(this.i,this.l,se,"[Invalid Chunk]"),_=!1;break}else Ri(this.i,this.l,Gt,null),bs(this,Gt);if(Iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||se.length!=0||this.h.h||(this.s=1,ut(16),_=!1),this.o=this.o&&_,!_)Ri(this.i,this.l,se,"[Invalid Chunked Response]"),Ft(this),cr(this);else if(0<se.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Vs(Ut),Ut.M=!0,ut(11))}}else Ri(this.i,this.l,se,null),bs(this,se);Ot==4&&Ft(this),this.o&&!this.J&&(Ot==4?zu(this.j,this):(this.o=!1,ws(this)))}else ad(this.g),_==400&&0<se.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),Ft(this),cr(this)}}}catch{}finally{}};function Iu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Cu(c,g){var _=c.C,b=g.indexOf(`
`,_);return b==-1?fa:(_=Number(g.substring(_,b)),isNaN(_)?qo:(b+=1,b+_>g.length?fa:(g=g.slice(b,b+_),c.C=b+_,g)))}un.prototype.cancel=function(){this.J=!0,Ft(this)};function ws(c){c.S=Date.now()+c.I,Nu(c,c.I)}function Nu(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=wt(S(c.ba,c),g)}function Ii(c){c.B&&(m.clearTimeout(c.B),c.B=null)}un.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(xu(this.i,this.A),this.L!=2&&(Si(),ut(17)),Ft(this),this.s=2,cr(this)):Nu(this,this.S-c)};function cr(c){c.j.G==0||c.J||zu(c.j,c)}function Ft(c){Ii(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,En(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function bs(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||Bo(_.h,c))){if(!c.K&&Bo(_.h,c)&&_.G==3){try{var b=_.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var j=b;if(j[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Sa(_),ba(_);else break e;Zo(_),ut(18)}}else _.za=j[1],0<_.za-_.T&&37500>j[2]&&_.F&&_.v==0&&!_.C&&(_.C=wt(S(_.Za,_),6e3));if(1>=ga(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Xr(_,11)}else if((c.K||_.g==c)&&Sa(_),!ie(g))for(j=_.Da.g.parse(g),g=0;g<j.length;g++){let ze=j[g];if(_.T=ze[0],ze=ze[1],_.G==2)if(ze[0]=="c"){_.K=ze[1],_.ia=ze[2];const Ut=ze[3];Ut!=null&&(_.la=Ut,_.j.info("VER="+_.la));const Ot=ze[4];Ot!=null&&(_.Aa=Ot,_.j.info("SVER="+_.Aa));const $r=ze[5];$r!=null&&typeof $r=="number"&&0<$r&&(b=1.5*$r,_.L=b,_.j.info("backChannelRequestTimeoutMs_="+b)),b=_;const Gt=c.g;if(Gt){const yr=Gt.g?Gt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yr){var G=b.h;G.g||yr.indexOf("spdy")==-1&&yr.indexOf("quic")==-1&&yr.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(pa(G,G.h),G.h=null))}if(b.D){const el=Gt.g?Gt.g.getResponseHeader("X-HTTP-Session-Id"):null;el&&(b.ya=el,Je(b.I,b.D,el))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),b=_;var se=c;if(b.qa=Bu(b,b.J?b.ia:null,b.W),se.K){cn(b.h,se);var je=se,Dt=b.L;Dt&&(je.I=Dt),je.B&&(Ii(je),ws(je)),b.g=se}else Uu(b);0<_.i.length&&Aa(_)}else ze[0]!="stop"&&ze[0]!="close"||Xr(_,7);else _.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Xr(_,7):$o(_):ze[0]!="noop"&&_.l&&_.l.ta(ze),_.v=0)}}Si(4)}catch{}}var Du=class{constructor(c,g){this.g=c,this.map=g}};function Hr(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ma(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ga(c){return c.h?1:c.g?c.g.size:0}function Bo(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function pa(c,g){c.g?c.g.add(g):c.h=g}function cn(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Hr.prototype.cancel=function(){if(this.i=Ho(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ho(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return Y(c.i)}function nd(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var g=[],_=c.length,b=0;b<_;b++)g.push(c[b]);return g}g=[],_=0;for(b in c)g[_++]=c[b];return g}function ya(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const b in c)g[_++]=b;return g}}}function Fo(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=ya(c),b=nd(c),j=b.length,G=0;G<j;G++)g.call(void 0,b[G],_&&_[G],c)}var As=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rd(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var b=c[_].indexOf("="),j=null;if(0<=b){var G=c[_].substring(0,b);j=c[_].substring(b+1)}else G=c[_];g(G,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function bt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof bt){this.h=c.h,Ss(this,c.j),this.o=c.o,this.g=c.g,Ci(this,c.s),this.l=c.l;var g=c.i,_=new Gr;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Fr(this,_),this.m=c.m}else c&&(g=String(c).match(As))?(this.h=!1,Ss(this,g[1]||"",!0),this.o=Vn(g[2]||""),this.g=Vn(g[3]||"",!0),Ci(this,g[4]),this.l=Vn(g[5]||"",!0),Fr(this,g[6]||"",!0),this.m=Vn(g[7]||"")):(this.h=!1,this.i=new Gr(null,this.h))}bt.prototype.toString=function(){var c=[],g=this.j;g&&c.push(xs(g,Go,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(xs(g,Go,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(xs(_,_.charAt(0)=="/"?id:Qo,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",xs(_,_a)),c.join("")};function Tn(c){return new bt(c)}function Ss(c,g,_){c.j=_?Vn(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Ci(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Fr(c,g,_){g instanceof Gr?(c.i=g,Pu(c.i,c.h)):(_||(g=xs(g,sd)),c.i=new Gr(g,c.h))}function Je(c,g,_){c.i.set(g,_)}function Rs(c){return Je(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Vn(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function xs(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,Ou),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ou(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Go=/[#\/\?@]/g,Qo=/[#\?:]/g,id=/[#\?]/g,sd=/[#\?@]/g,_a=/#/g;function Gr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Mn(c){c.g||(c.g=new Map,c.h=0,c.i&&rd(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}i=Gr.prototype,i.add=function(c,g){Mn(this),this.i=null,c=hr(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Qr(c,g){Mn(c),g=hr(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Kr(c,g){return Mn(c),g=hr(c,g),c.g.has(g)}i.forEach=function(c,g){Mn(this),this.g.forEach(function(_,b){_.forEach(function(j){c.call(g,j,b,this)},this)},this)},i.na=function(){Mn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let b=0;b<g.length;b++){const j=c[b];for(let G=0;G<j.length;G++)_.push(g[b])}return _},i.V=function(c){Mn(this);let g=[];if(typeof c=="string")Kr(this,c)&&(g=g.concat(this.g.get(hr(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},i.set=function(c,g){return Mn(this),this.i=null,c=hr(this,c),Kr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},i.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Ko(c,g,_){Qr(c,g),0<_.length&&(c.i=null,c.g.set(hr(c,g),Y(_)),c.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var b=g[_];const G=encodeURIComponent(String(b)),se=this.V(b);for(b=0;b<se.length;b++){var j=G;se[b]!==""&&(j+="="+encodeURIComponent(String(se[b]))),c.push(j)}}return this.i=c.join("&")};function hr(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Pu(c,g){g&&!c.j&&(Mn(c),c.i=null,c.g.forEach(function(_,b){var j=b.toLowerCase();b!=j&&(Qr(this,b),Ko(this,j,_))},c)),c.j=g}function Is(c,g){const _=new Pn;if(m.Image){const b=new Image;b.onload=U(kn,_,"TestLoadImage: loaded",!0,g,b),b.onerror=U(kn,_,"TestLoadImage: error",!1,g,b),b.onabort=U(kn,_,"TestLoadImage: abort",!1,g,b),b.ontimeout=U(kn,_,"TestLoadImage: timeout",!1,g,b),m.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else g(!1)}function $n(c,g){const _=new Pn,b=new AbortController,j=setTimeout(()=>{b.abort(),kn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:b.signal}).then(G=>{clearTimeout(j),G.ok?kn(_,"TestPingServer: ok",!0,g):kn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(j),kn(_,"TestPingServer: error",!1,g)})}function kn(c,g,_,b,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),b(_)}catch{}}function Cs(){this.g=new Es}function dr(c,g,_){const b=_||"";try{Fo(c,function(j,G){let se=j;y(j)&&(se=Yn(j)),g.push(b+G+"="+encodeURIComponent(se))})}catch(j){throw g.push(b+"type="+encodeURIComponent("_badmap")),j}}function Ni(c){this.l=c.Ub||null,this.j=c.eb||!1}k(Ni,Mo),Ni.prototype.g=function(){return new Yr(this.l,this.j)},Ni.prototype.i=(function(c){return function(){return c}})({});function Yr(c,g){lt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Yr,lt),i=Yr.prototype,i.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,mr(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||m).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fr(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,mr(this)),this.g&&(this.readyState=3,mr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?fr(this):mr(this),this.readyState==3&&Yo(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,fr(this))},i.Qa=function(c){this.g&&(this.response=c,fr(this))},i.ga=function(){this.g&&fr(this)};function fr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,mr(c)}i.setRequestHeader=function(c,g){this.u.append(c,g)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function mr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Yr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Xo(c){let g="";return xe(c,function(_,b){g+=b,g+=":",g+=_,g+=`\r
`}),g}function Lt(c,g,_){e:{for(b in _){var b=!1;break e}b=!0}b||(_=Xo(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Je(c,g,_))}function Ye(c){lt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Ye,lt);var va=/^https?$/i,Ns=["POST","PUT"];i=Ye.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,g,_,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lr.g(),this.v=this.o?ko(this.o):ko(lr),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(G){Vu(this,G);return}if(c=_||"",_=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var j in b)_.set(j,b[j]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const G of b.keys())_.set(G,b.get(G));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(_.keys()).find(G=>G.toLowerCase()=="content-type"),j=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Ns,g,void 0))||b||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,se]of _)this.g.setRequestHeader(G,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ds(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){Vu(this,G)}};function Vu(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Ea(c),gr(c)}function Ea(c){c.A||(c.A=!0,Ge(c,"complete"),Ge(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ge(this,"complete"),Ge(this,"abort"),gr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gr(this,!0)),Ye.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ta(this):this.bb())},i.bb=function(){Ta(this)};function Ta(c){if(c.h&&typeof d<"u"&&(!c.v[1]||Ln(c)!=4||c.Z()!=2)){if(c.u&&Ln(c)==4)kt(c.Ea,0,c);else if(Ge(c,"readystatechange"),Ln(c)==4){c.h=!1;try{const se=c.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var b;if(b=se===0){var j=String(c.D).match(As)[1]||null;!j&&m.self&&m.self.location&&(j=m.self.location.protocol.slice(0,-1)),b=!va.test(j?j.toLowerCase():"")}_=b}if(_)Ge(c,"complete"),Ge(c,"success");else{c.m=6;try{var G=2<Ln(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",Ea(c)}}finally{gr(c)}}}}function gr(c,g){if(c.g){Ds(c);const _=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Ge(c,"ready");try{_.onreadystatechange=b}catch{}}}function Ds(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function Ln(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),ha(g)}};function Mu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ad(c){const g={};c=(c.g&&2<=Ln(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(ie(c[b]))continue;var _=V(c[b]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const G=g[j]||[];g[j]=G,G.push(_)}I(g,function(b){return b.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function wa(c){this.Aa=0,this.i=[],this.j=new Pn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Os("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Os("baseRetryDelayMs",5e3,c),this.cb=Os("retryDelaySeedMs",1e4,c),this.Wa=Os("forwardChannelMaxRetries",2,c),this.wa=Os("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Hr(c&&c.concurrentRequestLimit),this.Da=new Cs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=wa.prototype,i.la=8,i.G=1,i.connect=function(c,g,_,b){ut(0),this.W=c,this.H=g||{},_&&b!==void 0&&(this.H.OSID=_,this.H.OAID=b),this.F=this.X,this.I=Bu(this,null,this.W),Aa(this)};function $o(c){if(ku(c),c.G==3){var g=c.U++,_=Tn(c.I);if(Je(_,"SID",c.K),Je(_,"RID",g),Je(_,"TYPE","terminate"),Ps(c,_),g=new un(c,c.j,g),g.L=2,g.v=Rs(Tn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=g.v,_=!0),_||(g.g=Hu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ws(g)}qu(c)}function ba(c){c.g&&(Vs(c),c.g.cancel(),c.g=null)}function ku(c){ba(c),c.u&&(m.clearTimeout(c.u),c.u=null),Sa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Aa(c){if(!ma(c.h)&&!c.s){c.s=!0;var g=c.Ga;te||D(),ee||(te(),ee=!0),pe.add(g,c),c.B=0}}function od(c,g){return ga(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=wt(S(c.Ga,c,g),Jo(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new un(this,this.j,c);let G=this.o;if(this.S&&(G?(G=R(G),O(G,this.S)):G=this.S),this.m!==null||this.O||(j.H=G,G=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var b=this.i[_];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Lu(this,j,g),_=Tn(this.I),Je(_,"RID",c),Je(_,"CVER",22),this.D&&Je(_,"X-HTTP-Session-Id",this.D),Ps(this,_),G&&(this.O?g="headers="+encodeURIComponent(String(Xo(G)))+"&"+g:this.m&&Lt(_,this.m,G)),pa(this.h,j),this.Ua&&Je(_,"TYPE","init"),this.P?(Je(_,"$req",g),Je(_,"SID","null"),j.T=!0,Xn(j,_,null)):Xn(j,_,g),this.G=2}}else this.G==3&&(c?Wo(this,c):this.i.length==0||ma(this.h)||Wo(this))};function Wo(c,g){var _;g?_=g.l:_=c.U++;const b=Tn(c.I);Je(b,"SID",c.K),Je(b,"RID",_),Je(b,"AID",c.T),Ps(c,b),c.m&&c.o&&Lt(b,c.m,c.o),_=new un(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Lu(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),pa(c.h,_),Xn(_,b,g)}function Ps(c,g){c.H&&xe(c.H,function(_,b){Je(g,b,_)}),c.l&&Fo({},function(_,b){Je(g,b,_)})}function Lu(c,g,_){_=Math.min(c.i.length,_);var b=c.l?S(c.l.Na,c.l,c):null;e:{var j=c.i;let G=-1;for(;;){const se=["count="+_];G==-1?0<_?(G=j[0].g,se.push("ofs="+G)):G=0:se.push("ofs="+G);let je=!0;for(let Dt=0;Dt<_;Dt++){let ze=j[Dt].g;const Ut=j[Dt].map;if(ze-=G,0>ze)G=Math.max(0,j[Dt].g-100),je=!1;else try{dr(Ut,se,"req"+ze+"_")}catch{b&&b(Ut)}}if(je){b=se.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,b}function Uu(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;te||D(),ee||(te(),ee=!0),pe.add(g,c),c.v=0}}function Zo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=wt(S(c.Fa,c),Jo(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,ju(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=wt(S(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),ba(this),ju(this))};function Vs(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function ju(c){c.g=new un(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=Tn(c.qa);Je(g,"RID","rpc"),Je(g,"SID",c.K),Je(g,"AID",c.T),Je(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Je(g,"TO",c.ja),Je(g,"TYPE","xmlhttp"),Ps(c,g),c.m&&c.o&&Lt(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Rs(Tn(g)),_.m=null,_.P=!0,Br(_,c)}i.Za=function(){this.C!=null&&(this.C=null,ba(this),Zo(this),ut(19))};function Sa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function zu(c,g){var _=null;if(c.g==g){Sa(c),Vs(c),c.g=null;var b=2}else if(Bo(c.h,g))_=g.D,cn(c.h,g),b=1;else return;if(c.G!=0){if(g.o)if(b==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var j=c.B;b=Ai(),Ge(b,new Nt(b,_)),Aa(c)}else Uu(c);else if(j=g.s,j==3||j==0&&0<g.X||!(b==1&&od(c,g)||b==2&&Zo(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),j){case 1:Xr(c,5);break;case 4:Xr(c,10);break;case 3:Xr(c,6);break;default:Xr(c,2)}}}function Jo(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Xr(c,g){if(c.j.info("Error code "+g),g==2){var _=S(c.fb,c),b=c.Xa;const j=!b;b=new bt(b||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ss(b,"https"),Rs(b),j?Is(b.toString(),_):$n(b.toString(),_)}else ut(2);c.G=0,c.l&&c.l.sa(g),qu(c),ku(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function qu(c){if(c.G=0,c.ka=[],c.l){const g=Ho(c.h);(g.length!=0||c.i.length!=0)&&(H(c.ka,g),H(c.ka,c.i),c.h.i.length=0,Y(c.i),c.i.length=0),c.l.ra()}}function Bu(c,g,_){var b=_ instanceof bt?Tn(_):new bt(_);if(b.g!="")g&&(b.g=g+"."+b.g),Ci(b,b.s);else{var j=m.location;b=j.protocol,g=g?g+"."+j.hostname:j.hostname,j=+j.port;var G=new bt(null);b&&Ss(G,b),g&&(G.g=g),j&&Ci(G,j),_&&(G.l=_),b=G}return _=c.D,g=c.ya,_&&g&&Je(b,_,g),Je(b,"VER",c.la),Ps(c,b),b}function Hu(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Ye(new Ni({eb:_})):new Ye(c.pa),g.Ha(c.J),g}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fu(){}i=Fu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Ra(){}Ra.prototype.g=function(c,g){return new hn(c,g)};function hn(c,g){lt.call(this),this.g=new wa(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!ie(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!ie(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new pr(this)}k(hn,lt),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){$o(this.g)},hn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Yn(c),c=_);g.i.push(new Du(g.Ya++,c)),g.G==3&&Aa(g)},hn.prototype.N=function(){this.g.l=null,delete this.j,$o(this.g),delete this.g,hn.aa.N.call(this)};function Gu(c){zr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}k(Gu,zr);function Qu(){Uo.call(this),this.status=1}k(Qu,Uo);function pr(c){this.g=c}k(pr,Fu),pr.prototype.ua=function(){Ge(this.g,"a")},pr.prototype.ta=function(c){Ge(this.g,new Gu(c))},pr.prototype.sa=function(c){Ge(this.g,new Qu)},pr.prototype.ra=function(){Ge(this.g,"b")},Ra.prototype.createWebChannel=Ra.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,uT=function(){return new Ra},lT=function(){return Ai()},oT=or,Cm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xi.NO_ERROR=0,xi.TIMEOUT=8,xi.HTTP_ERROR=6,ah=xi,qr.COMPLETE="complete",aT=qr,Lo.EventType=jr,jr.OPEN="a",jr.CLOSE="b",jr.ERROR="c",jr.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Ql=Lo,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,sT=Ye}).apply(typeof Xc<"u"?Xc:typeof self<"u"?self:typeof window<"u"?window:{});const Jv="@firebase/firestore",e0="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let So="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=new $m("@firebase/firestore");function to(){return ra.logLevel}function he(i,...e){if(ra.logLevel<=ke.DEBUG){const n=e.map(ug);ra.debug(`Firestore (${So}): ${i}`,...n)}}function yi(i,...e){if(ra.logLevel<=ke.ERROR){const n=e.map(ug);ra.error(`Firestore (${So}): ${i}`,...n)}}function po(i,...e){if(ra.logLevel<=ke.WARN){const n=e.map(ug);ra.warn(`Firestore (${So}): ${i}`,...n)}}function ug(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,cT(i,s,n)}function cT(i,e,n){let s=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw yi(s),new Error(s)}function Xe(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||cT(e,o,s)}function Ie(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends vi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(rn.UNAUTHENTICATED)))}shutdown(){}}class pI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class yI{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new fi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new fi,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new fi)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Xe(typeof s.accessToken=="string",31837,{l:s}),new hT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class _I{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new _I(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class t0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Xe(this.o===void 0,3512);const s=u=>{u.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,he("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new t0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new t0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=TI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Le(i,e){return i<e?-1:i>e?1:0}function Nm(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return fm(o)===fm(u)?Le(o,u):fm(o)?1:-1}return Le(i.length,e.length)}const wI=55296,bI=57343;function fm(i){const e=i.charCodeAt(0);return e>=wI&&e<=bI}function yo(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="__name__";class br{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return br.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof br?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=br.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Le(e.length,n.length)}static compareSegments(e,n){const s=br.isNumericId(e),o=br.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?br.extractNumericId(e).compare(br.extractNumericId(n)):Nm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return os.fromString(e.substring(4,e.length-2))}}class at extends br{construct(e,n,s){return new at(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new at(n)}static emptyPath(){return new at([])}}const AI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends br{construct(e,n,s){return new $t(e,n,s)}static isValidIdentifier(e){return AI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===n0}static keyField(){return new $t([n0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ce($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ce($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(u(),o++)}if(u(),d)throw new ce($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(n)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(at.fromString(e))}static fromName(e){return new ve(at.fromString(e).popFirst(5))}static empty(){return new ve(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(i,e,n){if(!n)throw new ce($.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function SI(i,e,n,s){if(e===!0&&s===!0)throw new ce($.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function r0(i){if(!ve.isDocumentKey(i))throw new ce($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function i0(i){if(ve.isDocumentKey(i))throw new ce($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function fT(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function kh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ae(12329,{type:typeof i})}function Dr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ce($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kh(i);throw new ce($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(i,e){const n={typeString:i};return e&&(n.value=e),n}function vu(i,e){if(!fT(i))throw new ce($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new ce($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=-62135596800,a0=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*a0);return new ot(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<s0)throw new ce($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a0}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vu(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-s0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:It("string",ot._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ot(0,0))}static max(){return new Re(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=-1;function RI(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(s===1e9?new ot(n+1,0):new ot(n,s));return new us(o,ve.empty(),e)}function xI(i){return new us(i.readTime,i.key,su)}class us{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new us(Re.min(),ve.empty(),su)}static max(){return new us(Re.max(),ve.empty(),su)}}function II(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(i.documentKey,e.documentKey),n!==0?n:Le(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(i){if(i.code!==$.FAILED_PRECONDITION||i.message!==CI)throw i;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):J.reject(n)}static resolve(e){return new J(((n,s)=>{n(e)}))}static reject(e){return new J(((n,s)=>{s(e)}))}static waitFor(e){return new J(((n,s)=>{let o=0,u=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++u,d&&u===o&&n()}),(p=>s(p)))})),d=!0,u===o&&n()}))}static or(e){let n=J.resolve(!1);for(const s of e)n=n.next((o=>o?J.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new J(((s,o)=>{const u=e.length,d=new Array(u);let m=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next((T=>{d[y]=T,++m,m===u&&s(d)}),(T=>o(T)))}}))}static doWhile(e,n){return new J(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function DI(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Lh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=-1;function Uh(i){return i==null}function Th(i){return i===0&&1/i==-1/0}function OI(i){return typeof i=="number"&&Number.isInteger(i)&&!Th(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="";function PI(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=o0(e)),e=VI(i.get(n),e);return o0(e)}function VI(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case mT:n+="";break;default:n+=u}}return n}function o0(i){return i+mT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function ps(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function gT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){this.comparator=e,this.root=n||Xt.EMPTY}insert(e,n){return new dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $c(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $c(this.root,e,this.comparator,!1)}getReverseIterator(){return new $c(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $c(this.root,e,this.comparator,!0)}}class $c{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Xt.RED,this.left=o??Xt.EMPTY,this.right=u??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Xt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new u0(this.data.getIterator())}getIteratorFrom(e){return new u0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Mt(this.comparator);return n.data=e,n}}class u0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new Mt($t.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new pT("Invalid base64 string: "+u):u}})(e);return new Wt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const MI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cs(i){if(Xe(!!i,39018),typeof i=="string"){let e=0;const n=MI.exec(i);if(Xe(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:vt(i.seconds),nanos:vt(i.nanos)}}function vt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function hs(i){return typeof i=="string"?Wt.fromBase64String(i):Wt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="server_timestamp",_T="__type__",vT="__previous_value__",ET="__local_write_time__";function dg(i){var n,s;return((s=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[_T])==null?void 0:s.stringValue)===yT}function jh(i){const e=i.mapValue.fields[vT];return dg(e)?jh(e):e}function au(i){const e=cs(i.mapValue.fields[ET].timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n,s,o,u,d,m,p,y,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=T}}const wh="(default)";class ou{constructor(e,n){this.projectId=e,this.database=n||wh}static empty(){return new ou("","")}get isDefaultDatabase(){return this.database===wh}isEqual(e){return e instanceof ou&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="__type__",LI="__max__",Wc={mapValue:{}},wT="__vector__",bh="value";function ds(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?dg(i)?4:jI(i)?9007199254740991:UI(i)?10:11:Ae(28295,{value:i})}function Or(i,e){if(i===e)return!0;const n=ds(i);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return au(i).isEqual(au(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=cs(o.timestampValue),m=cs(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return hs(o.bytesValue).isEqual(hs(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return vt(o.geoPointValue.latitude)===vt(u.geoPointValue.latitude)&&vt(o.geoPointValue.longitude)===vt(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return vt(o.integerValue)===vt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=vt(o.doubleValue),m=vt(u.doubleValue);return d===m?Th(d)===Th(m):isNaN(d)&&isNaN(m)}return!1})(i,e);case 9:return yo(i.arrayValue.values||[],e.arrayValue.values||[],Or);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(l0(d)!==l0(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!Or(d[p],m[p])))return!1;return!0})(i,e);default:return Ae(52216,{left:i})}}function lu(i,e){return(i.values||[]).find((n=>Or(n,e)))!==void 0}function _o(i,e){if(i===e)return 0;const n=ds(i),s=ds(e);if(n!==s)return Le(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(i.booleanValue,e.booleanValue);case 2:return(function(u,d){const m=vt(u.integerValue||u.doubleValue),p=vt(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(i,e);case 3:return c0(i.timestampValue,e.timestampValue);case 4:return c0(au(i),au(e));case 5:return Nm(i.stringValue,e.stringValue);case 6:return(function(u,d){const m=hs(u),p=hs(d);return m.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(u,d){const m=u.split("/"),p=d.split("/");for(let y=0;y<m.length&&y<p.length;y++){const T=Le(m[y],p[y]);if(T!==0)return T}return Le(m.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,d){const m=Le(vt(u.latitude),vt(d.latitude));return m!==0?m:Le(vt(u.longitude),vt(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return h0(i.arrayValue,e.arrayValue);case 10:return(function(u,d){var S,U,k,Y;const m=u.fields||{},p=d.fields||{},y=(S=m[bh])==null?void 0:S.arrayValue,T=(U=p[bh])==null?void 0:U.arrayValue,A=Le(((k=y==null?void 0:y.values)==null?void 0:k.length)||0,((Y=T==null?void 0:T.values)==null?void 0:Y.length)||0);return A!==0?A:h0(y,T)})(i.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Wc.mapValue&&d===Wc.mapValue)return 0;if(u===Wc.mapValue)return 1;if(d===Wc.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),y=d.fields||{},T=Object.keys(y);p.sort(),T.sort();for(let A=0;A<p.length&&A<T.length;++A){const S=Nm(p[A],T[A]);if(S!==0)return S;const U=_o(m[p[A]],y[T[A]]);if(U!==0)return U}return Le(p.length,T.length)})(i.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function c0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Le(i,e);const n=cs(i),s=cs(e),o=Le(n.seconds,s.seconds);return o!==0?o:Le(n.nanos,s.nanos)}function h0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=_o(n[o],s[o]);if(u)return u}return Le(n.length,s.length)}function vo(i){return Dm(i)}function Dm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=cs(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return hs(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return ve.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Dm(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${Dm(n.fields[d])}`;return o+"}"})(i.mapValue):Ae(61005,{value:i})}function oh(i){switch(ds(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jh(i);return e?16+oh(e):16;case 5:return 2*i.stringValue.length;case 6:return hs(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+oh(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return ps(s.fields,((u,d)=>{o+=u.length+oh(d)})),o})(i.mapValue);default:throw Ae(13486,{value:i})}}function d0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Om(i){return!!i&&"integerValue"in i}function fg(i){return!!i&&"arrayValue"in i}function f0(i){return!!i&&"nullValue"in i}function m0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function lh(i){return!!i&&"mapValue"in i}function UI(i){var n,s;return((s=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[TT])==null?void 0:s.stringValue)===wT}function Jl(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return ps(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Jl(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jl(i.arrayValue.values[n]);return e}return{...i}}function jI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===LI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jl(n)}setAll(e){let n=$t.emptyPath(),s={},o=[];e.forEach(((d,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}d?s[m.lastSegment()]=Jl(d):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Or(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];lh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){ps(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new vn(Jl(this.value))}}function bT(i){const e=[];return ps(i.fields,((n,s)=>{const o=new $t([n]);if(lh(s)){const u=bT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n,s,o,u,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new sn(e,0,Re.min(),Re.min(),Re.min(),vn.empty(),0)}static newFoundDocument(e,n,s,o){return new sn(e,1,n,Re.min(),s,o,0)}static newNoDocument(e,n){return new sn(e,2,n,Re.min(),Re.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new sn(e,3,n,Re.min(),Re.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n){this.position=e,this.inclusive=n}}function g0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],d=i.position[o];if(u.field.isKeyField()?s=ve.comparator(ve.fromName(d.referenceValue),n.key):s=_o(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function p0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Or(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n="asc"){this.field=e,this.dir=n}}function zI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{}class xt extends AT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new BI(e,n,s):n==="array-contains"?new GI(e,s):n==="in"?new QI(e,s):n==="not-in"?new KI(e,s):n==="array-contains-any"?new YI(e,s):new xt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new HI(e,s):new FI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(_o(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(_o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ir extends AT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ir(e,n)}matches(e){return ST(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ST(i){return i.op==="and"}function RT(i){return qI(i)&&ST(i)}function qI(i){for(const e of i.filters)if(e instanceof ir)return!1;return!0}function Pm(i){if(i instanceof xt)return i.field.canonicalString()+i.op.toString()+vo(i.value);if(RT(i))return i.filters.map((e=>Pm(e))).join(",");{const e=i.filters.map((n=>Pm(n))).join(",");return`${i.op}(${e})`}}function xT(i,e){return i instanceof xt?(function(s,o){return o instanceof xt&&s.op===o.op&&s.field.isEqual(o.field)&&Or(s.value,o.value)})(i,e):i instanceof ir?(function(s,o){return o instanceof ir&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,d,m)=>u&&xT(d,o.filters[m])),!0):!1})(i,e):void Ae(19439)}function IT(i){return i instanceof xt?(function(n){return`${n.field.canonicalString()} ${n.op} ${vo(n.value)}`})(i):i instanceof ir?(function(n){return n.op.toString()+" {"+n.getFilters().map(IT).join(" ,")+"}"})(i):"Filter"}class BI extends xt{constructor(e,n,s){super(e,n,s),this.key=ve.fromName(s.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class HI extends xt{constructor(e,n){super(e,"in",n),this.keys=CT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class FI extends xt{constructor(e,n){super(e,"not-in",n),this.keys=CT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function CT(i,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((s=>ve.fromName(s.referenceValue)))}class GI extends xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fg(n)&&lu(n.arrayValue,this.value)}}class QI extends xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&lu(this.value.arrayValue,n)}}class KI extends xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!lu(this.value.arrayValue,n)}}class YI extends xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>lu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n=null,s=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.Te=null}}function y0(i,e=null,n=[],s=[],o=null,u=null,d=null){return new XI(i,e,n,s,o,u,d)}function mg(i){const e=Ie(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Pm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Uh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>vo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>vo(s))).join(",")),e.Te=n}return e.Te}function gg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!zI(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!xT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!p0(i.startAt,e.startAt)&&p0(i.endAt,e.endAt)}function Vm(i){return ve.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n=null,s=[],o=[],u=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $I(i,e,n,s,o,u,d,m){return new Eu(i,e,n,s,o,u,d,m)}function pg(i){return new Eu(i)}function _0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function NT(i){return i.collectionGroup!==null}function eu(i){const e=Ie(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Mt($t.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Sh(u,s))})),n.has($t.keyField().canonicalString())||e.Ie.push(new Sh($t.keyField(),s))}return e.Ie}function Rr(i){const e=Ie(i);return e.Ee||(e.Ee=WI(e,eu(i))),e.Ee}function WI(i,e){if(i.limitType==="F")return y0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Sh(o.field,u)}));const n=i.endAt?new Ah(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Ah(i.startAt.position,i.startAt.inclusive):null;return y0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Mm(i,e){const n=i.filters.concat([e]);return new Eu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function km(i,e,n){return new Eu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function zh(i,e){return gg(Rr(i),Rr(e))&&i.limitType===e.limitType}function DT(i){return`${mg(Rr(i))}|lt:${i.limitType}`}function no(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>IT(o))).join(", ")}]`),Uh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>vo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>vo(o))).join(",")),`Target(${s})`})(Rr(i))}; limitType=${i.limitType})`}function qh(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ve.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of eu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(d,m,p){const y=g0(d,m,p);return d.inclusive?y<=0:y<0})(s.startAt,eu(s),o)||s.endAt&&!(function(d,m,p){const y=g0(d,m,p);return d.inclusive?y>=0:y>0})(s.endAt,eu(s),o))})(i,e)}function ZI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function OT(i){return(e,n)=>{let s=!1;for(const o of eu(i)){const u=JI(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function JI(i,e,n){const s=i.field.isKeyField()?ve.comparator(e.key,n.key):(function(u,d,m){const p=d.data.field(u),y=m.data.field(u);return p!==null&&y!==null?_o(p,y):Ae(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ps(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return gT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=new dt(ve.comparator);function _i(){return eC}const PT=new dt(ve.comparator);function Kl(...i){let e=PT;for(const n of i)e=e.insert(n.key,n);return e}function VT(i){let e=PT;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Zs(){return tu()}function MT(){return tu()}function tu(){return new sa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const tC=new dt(ve.comparator),nC=new Mt(ve.comparator);function Ue(...i){let e=nC;for(const n of i)e=e.add(n);return e}const rC=new Mt(Le);function iC(){return rC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Th(e)?"-0":e}}function kT(i){return{integerValue:""+i}}function LT(i,e){return OI(e)?kT(e):yg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(){this._=void 0}}function sC(i,e,n){return i instanceof Rh?(function(o,u){const d={fields:{[_T]:{stringValue:yT},[ET]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&dg(u)&&(u=jh(u)),u&&(d.fields[vT]=u),{mapValue:d}})(n,e):i instanceof uu?jT(i,e):i instanceof cu?zT(i,e):(function(o,u){const d=UT(o,u),m=v0(d)+v0(o.Ae);return Om(d)&&Om(o.Ae)?kT(m):yg(o.serializer,m)})(i,e)}function aC(i,e,n){return i instanceof uu?jT(i,e):i instanceof cu?zT(i,e):n}function UT(i,e){return i instanceof hu?(function(s){return Om(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Rh extends Bh{}class uu extends Bh{constructor(e){super(),this.elements=e}}function jT(i,e){const n=qT(e);for(const s of i.elements)n.some((o=>Or(o,s)))||n.push(s);return{arrayValue:{values:n}}}class cu extends Bh{constructor(e){super(),this.elements=e}}function zT(i,e){let n=qT(e);for(const s of i.elements)n=n.filter((o=>!Or(o,s)));return{arrayValue:{values:n}}}class hu extends Bh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function v0(i){return vt(i.integerValue||i.doubleValue)}function qT(i){return fg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n){this.field=e,this.transform=n}}function lC(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof uu&&o instanceof uu||s instanceof cu&&o instanceof cu?yo(s.elements,o.elements,Or):s instanceof hu&&o instanceof hu?Or(s.Ae,o.Ae):s instanceof Rh&&o instanceof Rh})(i.transform,e.transform)}class uC{constructor(e,n){this.version=e,this.transformResults=n}}class nr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Hh{}function BT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new FT(i.key,nr.none()):new Tu(i.key,i.data,nr.none());{const n=i.data,s=vn.empty();let o=new Mt($t.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new ys(i.key,s,new Cn(o.toArray()),nr.none())}}function cC(i,e,n){i instanceof Tu?(function(o,u,d){const m=o.value.clone(),p=T0(o.fieldTransforms,u,d.transformResults);m.setAll(p),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(i,e,n):i instanceof ys?(function(o,u,d){if(!uh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=T0(o.fieldTransforms,u,d.transformResults),p=u.data;p.setAll(HT(o)),p.setAll(m),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(i,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function nu(i,e,n,s){return i instanceof Tu?(function(u,d,m,p){if(!uh(u.precondition,d))return m;const y=u.value.clone(),T=w0(u.fieldTransforms,p,d);return y.setAll(T),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(i,e,n,s):i instanceof ys?(function(u,d,m,p){if(!uh(u.precondition,d))return m;const y=w0(u.fieldTransforms,p,d),T=d.data;return T.setAll(HT(u)),T.setAll(y),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(i,e,n,s):(function(u,d,m){return uh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(i,e,n)}function hC(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=UT(s.transform,o||null);u!=null&&(n===null&&(n=vn.empty()),n.set(s.field,u))}return n||null}function E0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&yo(s,o,((u,d)=>lC(u,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Tu extends Hh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ys extends Hh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function HT(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function T0(i,e,n){const s=new Map;Xe(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],d=u.transform,m=e.data.field(u.field);s.set(u.field,aC(d,m,n[o]))}return s}function w0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,d=n.data.field(o.field);s.set(o.field,sC(u,d,e))}return s}class FT extends Hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dC extends Hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&cC(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=nu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=nu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=MT();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=n.has(o.key)?null:m;const p=BT(d,m);p!==null&&s.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(Re.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,((n,s)=>E0(n,s)))&&yo(this.baseMutations,e.baseMutations,((n,s)=>E0(n,s)))}}class _g{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Xe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return tC})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new _g(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt,Be;function pC(i){switch(i){case $.OK:return Ae(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return Ae(15467,{code:i})}}function GT(i){if(i===void 0)return yi("GRPC error has no .code"),$.UNKNOWN;switch(i){case Rt.OK:return $.OK;case Rt.CANCELLED:return $.CANCELLED;case Rt.UNKNOWN:return $.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return $.INTERNAL;case Rt.UNAVAILABLE:return $.UNAVAILABLE;case Rt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Rt.NOT_FOUND:return $.NOT_FOUND;case Rt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Rt.ABORTED:return $.ABORTED;case Rt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Rt.DATA_LOSS:return $.DATA_LOSS;default:return Ae(39323,{code:i})}}(Be=Rt||(Rt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=new os([4294967295,4294967295],0);function b0(i){const e=yC().encode(i),n=new iT;return n.update(e),new Uint8Array(n.digest())}function A0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new os([n,s],0),new os([o,u],0)]}class vg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Yl(`Invalid padding: ${n}`);if(s<0)throw new Yl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Yl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Yl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=os.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(os.fromNumber(s)));return o.compare(_C)===1&&(o=new os([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=b0(e),[s,o]=A0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new vg(u,o,n);return s.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const n=b0(e),[s,o]=A0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Fh(Re.min(),o,new dt(Le),_i(),Ue())}}class wu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new wu(s,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class QT{constructor(e,n){this.targetId=e,this.Ce=n}}class KT{constructor(e,n,s=Wt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class S0{constructor(){this.ve=0,this.Fe=R0(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),n=Ue(),s=Ue();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:u})}})),new wu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=R0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vC{constructor(e){this.Ge=e,this.ze=new Map,this.je=_i(),this.Je=Zc(),this.He=Zc(),this.Ye=new dt(Le)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Vm(u))if(s===0){const d=new ve(u.path);this.et(n,d,sn.newNoDocument(d,Re.min()))}else Xe(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const m=this.ut(e),p=m?this.ct(m,e,d):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,m;try{d=hs(s).toUint8Array()}catch(p){if(p instanceof pT)return po("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new vg(d,o,u)}catch(p){return po(p instanceof Yl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const m=this.ot(d);if(m){if(u.current&&Vm(m.target)){const p=new ve(m.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,sn.newNoDocument(p,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let s=Ue();this.He.forEach(((u,d)=>{let m=!0;d.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new Fh(e,n,this.Ye,this.je,s);return this.je=_i(),this.Je=Zc(),this.He=Zc(),this.Ye=new dt(Le),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new S0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Mt(Le),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Mt(Le),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new S0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Zc(){return new dt(ve.comparator)}function R0(){return new dt(ve.comparator)}const EC={asc:"ASCENDING",desc:"DESCENDING"},TC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wC={and:"AND",or:"OR"};class bC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lm(i,e){return i.useProto3Json||Uh(e)?e:{value:e}}function xh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function AC(i,e){return xh(i,e.toTimestamp())}function xr(i){return Xe(!!i,49232),Re.fromTimestamp((function(n){const s=cs(n);return new ot(s.seconds,s.nanos)})(i))}function Eg(i,e){return Um(i,e).canonicalString()}function Um(i,e){const n=(function(o){return new at(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function XT(i){const e=at.fromString(i);return Xe(ew(e),10190,{key:e.toString()}),e}function jm(i,e){return Eg(i.databaseId,e.path)}function mm(i,e){const n=XT(e);if(n.get(1)!==i.databaseId.projectId)throw new ce($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ce($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ve(WT(n))}function $T(i,e){return Eg(i.databaseId,e)}function SC(i){const e=XT(i);return e.length===4?at.emptyPath():WT(e)}function zm(i){return new at(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function WT(i){return Xe(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function x0(i,e,n){return{name:jm(i,e),fields:n.value.mapValue.fields}}function RC(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ae(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,T){return y.useProto3Json?(Xe(T===void 0||typeof T=="string",58123),Wt.fromBase64String(T||"")):(Xe(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Wt.fromUint8Array(T||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(y){const T=y.code===void 0?$.UNKNOWN:GT(y.code);return new ce(T,y.message||"")})(d);n=new KT(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=mm(i,s.document.name),u=xr(s.document.updateTime),d=s.document.createTime?xr(s.document.createTime):Re.min(),m=new vn({mapValue:{fields:s.document.fields}}),p=sn.newFoundDocument(o,u,d,m),y=s.targetIds||[],T=s.removedTargetIds||[];n=new ch(y,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=mm(i,s.document),u=s.readTime?xr(s.readTime):Re.min(),d=sn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new ch([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=mm(i,s.document),u=s.removedTargetIds||[];n=new ch([],u,o,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new gC(o,u),m=s.targetId;n=new QT(m,d)}}return n}function xC(i,e){let n;if(e instanceof Tu)n={update:x0(i,e.key,e.value)};else if(e instanceof FT)n={delete:jm(i,e.key)};else if(e instanceof ys)n={update:x0(i,e.key,e.data),updateMask:kC(e.fieldMask)};else{if(!(e instanceof dC))return Ae(16599,{Vt:e.type});n={verify:jm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,d){const m=d.transform;if(m instanceof Rh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof uu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof cu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof hu)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw Ae(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:AC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ae(27497)})(i,e.precondition)),n}function IC(i,e){return i&&i.length>0?(Xe(e!==void 0,14353),i.map((n=>(function(o,u){let d=o.updateTime?xr(o.updateTime):xr(u);return d.isEqual(Re.min())&&(d=xr(u)),new uC(d,o.transformResults||[])})(n,e)))):[]}function CC(i,e){return{documents:[$T(i,e.path)]}}function NC(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=$T(i,o);const u=(function(y){if(y.length!==0)return JT(ir.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((T=>(function(S){return{field:ro(S.field),direction:PC(S.dir)}})(T)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=Lm(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function DC(i){let e=SC(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Xe(s===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=(function(A){const S=ZT(A);return S instanceof ir&&RT(S)?S.getFilters():[S]})(n.where));let d=[];n.orderBy&&(d=(function(A){return A.map((S=>(function(k){return new Sh(io(k.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(S)))})(n.orderBy));let m=null;n.limit&&(m=(function(A){let S;return S=typeof A=="object"?A.value:A,Uh(S)?null:S})(n.limit));let p=null;n.startAt&&(p=(function(A){const S=!!A.before,U=A.values||[];return new Ah(U,S)})(n.startAt));let y=null;return n.endAt&&(y=(function(A){const S=!A.before,U=A.values||[];return new Ah(U,S)})(n.endAt)),$I(e,o,d,u,m,"F",p,y)}function OC(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ZT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=io(n.unaryFilter.field);return xt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=io(n.unaryFilter.field);return xt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=io(n.unaryFilter.field);return xt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=io(n.unaryFilter.field);return xt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(i):i.fieldFilter!==void 0?(function(n){return xt.create(io(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return ir.create(n.compositeFilter.filters.map((s=>ZT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(i):Ae(30097,{filter:i})}function PC(i){return EC[i]}function VC(i){return TC[i]}function MC(i){return wC[i]}function ro(i){return{fieldPath:i.canonicalString()}}function io(i){return $t.fromServerFormat(i.fieldPath)}function JT(i){return i instanceof xt?(function(n){if(n.op==="=="){if(m0(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NAN"}};if(f0(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(m0(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NAN"}};if(f0(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(n.field),op:VC(n.op),value:n.value}}})(i):i instanceof ir?(function(n){const s=n.getFilters().map((o=>JT(o)));return s.length===1?s[0]:{compositeFilter:{op:MC(n.op),filters:s}}})(i):Ae(54877,{filter:i})}function kC(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ew(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n,s,o,u=Re.min(),d=Re.min(),m=Wt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.yt=e}}function UC(i){const e=DC({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?km(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this.Cn=new zC}addToCollectionParentIndex(e,n){return this.Cn.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(us.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(us.min())}updateCollectionGroup(e,n,s){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class zC{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Mt(at.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Mt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tw=41943040;class yn{static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(tw,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Eo(0)}static cr(){return new Eo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="LruGarbageCollector",qC=1048576;function N0([i,e],[n,s]){const o=Le(i,n);return o===0?Le(e,s):o}class BC{constructor(e){this.Ir=e,this.buffer=new Mt(N0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();N0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class HC{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(C0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){xo(n)?he(C0,"Ignoring IndexedDB error during garbage collection: ",n):await Ro(n)}await this.Vr(3e5)}))}}class FC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return J.resolve(Lh.ce);const s=new BC(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(I0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),I0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,d,m,p,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,d=Date.now(),this.nthSequenceNumber(e,o)))).next((A=>(s=A,m=Date.now(),this.removeTargets(e,s,n)))).next((A=>(u=A,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((A=>(y=Date.now(),to()<=ke.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${A} documents in `+(y-p)+`ms
Total Duration: ${y-T}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A}))))}}function GC(i,e){return new FC(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.changes=new sa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?J.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&nu(s.mutation,o,Cn.empty(),ot.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ue()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ue()){const o=Zs();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let d=Kl();return u.forEach(((m,p)=>{d=d.insert(m,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=Zs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ue())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,m)=>{n.set(d,m)}))}))}computeViews(e,n,s,o){let u=_i();const d=tu(),m=(function(){return tu()})();return n.forEach(((p,y)=>{const T=s.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof ys)?u=u.insert(y.key,y):T!==void 0?(d.set(y.key,T.mutation.getFieldMask()),nu(T.mutation,y,T.mutation.getFieldMask(),ot.now())):d.set(y.key,Cn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((y,T)=>d.set(y,T))),n.forEach(((y,T)=>m.set(y,new KC(T,d.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=tu();let o=new dt(((d,m)=>d-m)),u=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const m of d)m.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let T=s.get(p)||Cn.empty();T=m.applyToLocalView(y,T),s.set(p,T);const A=(o.get(m.batchId)||Ue()).add(p);o=o.insert(m.batchId,A)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,T=p.value,A=MT();T.forEach((S=>{if(!u.has(S)){const U=BT(n.get(S),s.get(S));U!==null&&A.set(S,U),u=u.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,A))}return J.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return ve.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):J.resolve(Zs());let m=su,p=u;return d.next((y=>J.forEach(y,((T,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(T)?J.resolve():this.remoteDocumentCache.getEntry(e,T).next((S=>{p=p.insert(T,S)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,p,y,Ue()))).next((T=>({batchId:m,changes:VT(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((s=>{let o=Kl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=Kl();return this.indexManager.getCollectionParents(e,u).next((m=>J.forEach(m,(p=>{const y=(function(A,S){return new Eu(S,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((T=>{T.forEach(((A,S)=>{d=d.insert(A,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((d=>{u.forEach(((p,y)=>{const T=y.getKey();d.get(T)===null&&(d=d.insert(T,sn.newInvalidDocument(T)))}));let m=Kl();return d.forEach(((p,y)=>{const T=u.get(p);T!==void 0&&nu(T.mutation,y,Cn.empty(),ot.now()),qh(n,y)&&(m=m.insert(p,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return J.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:xr(o.createTime)}})(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:UC(o.bundledQuery),readTime:xr(o.readTime)}})(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.overlays=new dt(ve.comparator),this.qr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Zs();return J.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),J.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),J.resolve()}getOverlaysForCollection(e,n,s){const o=Zs(),u=n.length+1,d=new ve(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return J.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new dt(((y,T)=>y-T));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=u.get(y.largestBatchId);T===null&&(T=Zs(),u=u.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const m=Zs(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,T)=>m.set(y,T))),!(m.size()>=o)););return J.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new mC(n,s));let u=this.qr.get(n);u===void 0&&(u=Ue(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(){this.Qr=new Mt(Bt.$r),this.Ur=new Mt(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Bt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Bt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ve(new at([])),s=new Bt(n,e),o=new Bt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ve(new at([])),s=new Bt(n,e),o=new Bt(n,e+1);let u=Ue();return this.Ur.forEachInRange([s,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new Bt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Bt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ve.comparator(e.key,n.key)||Le(e.Yr,n.Yr)}static Kr(e,n){return Le(e.Yr,n.Yr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Mt(Bt.$r)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new fC(u,n,s,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new Bt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return J.resolve(d)}lookupMutationBatch(e,n){return J.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return J.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?hg:this.tr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Bt(n,0),o=new Bt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(d=>{const m=this.Xr(d.Yr);u.push(m)})),J.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Mt(Le);return n.forEach((o=>{const u=new Bt(o,0),d=new Bt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(m=>{s=s.add(m.Yr)}))})),J.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ve.isDocumentKey(u)||(u=u.child(""));const d=new Bt(new ve(u),0);let m=new Mt(Le);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Yr)),!0)}),d),J.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Xe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return J.forEach(n.mutations,(o=>{const u=new Bt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Bt(n,0),o=this.Zr.firstAfterOrEqual(s);return J.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.ri=e,this.docs=(function(){return new dt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return J.resolve(s?s.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let s=_i();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():sn.newInvalidDocument(o))})),J.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=_i();const d=n.path,m=new ve(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:T}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||II(xI(T),s)<=0||(o.has(T.key)||qh(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return J.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ae(9500)}ii(e,n){return J.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new eN(this)}getSize(e){return J.resolve(this.size)}}class eN extends QC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),J.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.persistence=e,this.si=new sa((n=>mg(n)),gg),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Tg,this.targetCount=0,this.ai=Eo.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),J.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Eo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Pr(n),J.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),J.waitFor(u).next((()=>o))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return J.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),J.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),J.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return J.resolve(s)}containsKey(e,n){return J.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Lh(0),this.li=!1,this.li=!0,this.hi=new WC,this.referenceDelegate=e(this),this.Pi=new tN(this),this.indexManager=new jC,this.remoteDocumentCache=(function(o){return new JC(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new LC(n),this.Ii=new XC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $C,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new ZC(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){he("MemoryPersistence","Starting transaction:",e);const o=new nN(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return J.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class nN extends NI{constructor(e){super(),this.currentSequenceNumber=e}}class wg{constructor(e){this.persistence=e,this.Ri=new Tg,this.Vi=null}static mi(e){return new wg(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),J.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),J.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.fi,(s=>{const o=ve.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return J.or([()=>J.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ih{constructor(e,n){this.persistence=e,this.pi=new sa((s=>PI(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=GC(this,n)}static mi(e,n){return new Ih(e,n)}Ei(){}di(e){return J.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return J.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?J.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((m=>{m||(s++,u.removeEntry(d,Re.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),J.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),J.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),J.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=oh(e.data.value)),n}br(e,n,s){return J.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return J.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Ue(),o=Ue();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new bg(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return NS()?8:DI(on())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new rN;return this.Ss(e,n,d).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,d,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(to()<=ke.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",no(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),J.resolve()):(to()<=ke.DEBUG&&he("QueryEngine","Query:",no(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(to()<=ke.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",no(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rr(n))):J.resolve())}ys(e,n){if(_0(n))return J.resolve(null);let s=Rr(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=km(n,null,"F"),s=Rr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const d=Ue(...u);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const y=this.Ds(n,m);return this.Cs(n,y,d,p.readTime)?this.ys(e,km(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,s,o){return _0(n)||o.isEqual(Re.min())?J.resolve(null):this.ps.getDocuments(e,s).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,s,o)?J.resolve(null):(to()<=ke.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),no(n)),this.vs(e,d,n,RI(o,su)).next((m=>m)))}))}Ds(e,n){let s=new Mt(OT(e));return n.forEach(((o,u)=>{qh(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return to()<=ke.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",no(n)),this.ps.getDocumentsMatchingQuery(e,n,us.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="LocalStore",sN=3e8;class aN{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new dt(Le),this.xs=new sa((u=>mg(u)),gg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function oN(i,e,n,s){return new aN(i,e,n,s)}async function rw(i,e){const n=Ie(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const d=[],m=[];let p=Ue();for(const y of o){d.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}for(const y of u){m.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(s,p).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:m})))}))}))}function lN(i,e){const n=Ie(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,y,T){const A=y.batch,S=A.keys();let U=J.resolve();return S.forEach((k=>{U=U.next((()=>T.getEntry(p,k))).next((Y=>{const H=y.docVersions.get(k);Xe(H!==null,48541),Y.version.compareTo(H)<0&&(A.applyToRemoteDocument(Y,y),Y.isValidDocument()&&(Y.setReadTime(y.commitVersion),T.addEntry(Y)))}))})),U.next((()=>m.mutationQueue.removeMutationBatch(p,A)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=Ue();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function iw(i){const e=Ie(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function uN(i,e){const n=Ie(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((T,A)=>{const S=o.get(A);if(!S)return;m.push(n.Pi.removeMatchingKeys(u,T.removedDocuments,A).next((()=>n.Pi.addMatchingKeys(u,T.addedDocuments,A))));let U=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?U=U.withResumeToken(Wt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):T.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(T.resumeToken,s)),o=o.insert(A,U),(function(Y,H,le){return Y.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=sN?!0:le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0})(S,U,T)&&m.push(n.Pi.updateTargetData(u,U))}));let p=_i(),y=Ue();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))})),m.push(cN(u,d,e.documentUpdates).next((T=>{p=T.ks,y=T.qs}))),!s.isEqual(Re.min())){const T=n.Pi.getLastRemoteSnapshotVersion(u).next((A=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(T)}return J.waitFor(m).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,y))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function cN(i,e,n){let s=Ue(),o=Ue();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let d=_i();return n.forEach(((m,p)=>{const y=u.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):he(Ag,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)})),{ks:d,qs:o}}))}function hN(i,e){const n=Ie(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=hg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function dN(i,e){const n=Ie(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,J.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new ns(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function qm(i,e,n){const s=Ie(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!xo(d))throw d;he(Ag,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function D0(i,e,n){const s=Ie(i);let o=Re.min(),u=Ue();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,y,T){const A=Ie(p),S=A.xs.get(T);return S!==void 0?J.resolve(A.Ms.get(S)):A.Pi.getTargetData(y,T)})(s,d,Rr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:Re.min(),n?u:Ue()))).next((m=>(fN(s,ZI(e),m),{documents:m,Qs:u})))))}function fN(i,e,n){let s=i.Os.get(e)||Re.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class O0{constructor(){this.activeTargetIds=iC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mN{constructor(){this.Mo=new O0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new O0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="ConnectivityMonitor";class V0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(P0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(P0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc=null;function Bm(){return Jc===null?Jc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jc++,"0x"+Jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="RestConnection",pN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===wh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const d=Bm(),m=this.zo(e,n.toUriEncodedString());he(gm,`Sending RPC '${e}' ${d}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:y}=new URL(m),T=wo(y);return this.Jo(e,m,p,s,T).then((A=>(he(gm,`Received RPC '${e}' ${d}: `,A),A)),(A=>{throw po(gm,`RPC '${e}' ${d} failed with error: `,A,"url: ",m,"request:",s),A}))}Ho(e,n,s,o,u,d){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+So})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=pN[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class vN extends yN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const d=Bm();return new Promise(((m,p)=>{const y=new sT;y.setWithCredentials(!0),y.listenOnce(aT.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case ah.NO_ERROR:const A=y.getResponseJson();he(tn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(A)),m(A);break;case ah.TIMEOUT:he(tn,`RPC '${e}' ${d} timed out`),p(new ce($.DEADLINE_EXCEEDED,"Request time out"));break;case ah.HTTP_ERROR:const S=y.getStatus();if(he(tn,`RPC '${e}' ${d} failed with status:`,S,"response text:",y.getResponseText()),S>0){let U=y.getResponseJson();Array.isArray(U)&&(U=U[0]);const k=U==null?void 0:U.error;if(k&&k.status&&k.message){const Y=(function(le){const ie=le.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(ie)>=0?ie:$.UNKNOWN})(k.status);p(new ce(Y,k.message))}else p(new ce($.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ce($.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he(tn,`RPC '${e}' ${d} completed.`)}}));const T=JSON.stringify(o);he(tn,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",T,s,15)}))}T_(e,n,s){const o=Bm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=uT(),m=lT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const T=u.join("");he(tn,`Creating RPC '${e}' stream ${o}: ${T}`,p);const A=d.createWebChannel(T,p);this.I_(A);let S=!1,U=!1;const k=new _N({Yo:H=>{U?he(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(S||(he(tn,`Opening RPC '${e}' stream ${o} transport.`),A.open(),S=!0),he(tn,`RPC '${e}' stream ${o} sending:`,H),A.send(H))},Zo:()=>A.close()}),Y=(H,le,ie)=>{H.listen(le,(re=>{try{ie(re)}catch(ge){setTimeout((()=>{throw ge}),0)}}))};return Y(A,Ql.EventType.OPEN,(()=>{U||(he(tn,`RPC '${e}' stream ${o} transport opened.`),k.o_())})),Y(A,Ql.EventType.CLOSE,(()=>{U||(U=!0,he(tn,`RPC '${e}' stream ${o} transport closed`),k.a_(),this.E_(A))})),Y(A,Ql.EventType.ERROR,(H=>{U||(U=!0,po(tn,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),k.a_(new ce($.UNAVAILABLE,"The operation could not be completed")))})),Y(A,Ql.EventType.MESSAGE,(H=>{var le;if(!U){const ie=H.data[0];Xe(!!ie,16349);const re=ie,ge=(re==null?void 0:re.error)||((le=re[0])==null?void 0:le.error);if(ge){he(tn,`RPC '${e}' stream ${o} received error:`,ge);const ue=ge.status;let xe=(function(C){const O=Rt[C];if(O!==void 0)return GT(O)})(ue),I=ge.message;xe===void 0&&(xe=$.INTERNAL,I="Unknown error status: "+ue+" with message "+ge.message),U=!0,k.a_(new ce(xe,I)),A.close()}else he(tn,`RPC '${e}' stream ${o} received:`,ie),k.u_(ie)}})),Y(m,oT.STAT_EVENT,(H=>{H.stat===Cm.PROXY?he(tn,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===Cm.NOPROXY&&he(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function pm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(i){return new bC(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="PersistentStream";class aw{constructor(e,n,s,o,u,d,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(yi(n.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new ce($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(M0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(he(M0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class EN extends aw{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=RC(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Re.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Re.min():d.readTime?xr(d.readTime):Re.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=zm(this.serializer),n.addTarget=(function(u,d){let m;const p=d.target;if(m=Vm(p)?{documents:CC(u,p)}:{query:NC(u,p).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=YT(u,d.resumeToken);const y=Lm(u,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(Re.min())>0){m.readTime=xh(u,d.snapshotVersion.toTimestamp());const y=Lm(u,d.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const s=OC(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=zm(this.serializer),n.removeTarget=e,this.q_(n)}}class TN extends aw{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=IC(e.writeResults,e.commitTime),s=xr(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=zm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>xC(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{}class bN extends wN{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ce($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,Um(n,s),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce($.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,Um(n,s),o,d,m,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ce($.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class AN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yi(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="RemoteStore";class SN{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{aa(this)&&(he(ia,"Restarting streams for network reachability change."),await(async function(p){const y=Ie(p);y.Ea.add(4),await bu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Qh(y)})(this))}))})),this.Ra=new AN(s,o)}}async function Qh(i){if(aa(i))for(const e of i.da)await e(!0)}async function bu(i){for(const e of i.da)await e(!1)}function ow(i,e){const n=Ie(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ig(n)?xg(n):Io(n).O_()&&Rg(n,e))}function Sg(i,e){const n=Ie(i),s=Io(n);n.Ia.delete(e),s.O_()&&lw(n,e),n.Ia.size===0&&(s.O_()?s.L_():aa(n)&&n.Ra.set("Unknown"))}function Rg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Io(i).Y_(e)}function lw(i,e){i.Va.Ue(e),Io(i).Z_(e)}function xg(i){i.Va=new vC({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Io(i).start(),i.Ra.ua()}function Ig(i){return aa(i)&&!Io(i).x_()&&i.Ia.size>0}function aa(i){return Ie(i).Ea.size===0}function uw(i){i.Va=void 0}async function RN(i){i.Ra.set("Online")}async function xN(i){i.Ia.forEach(((e,n)=>{Rg(i,e)}))}async function IN(i,e){uw(i),Ig(i)?(i.Ra.ha(e),xg(i)):i.Ra.set("Unknown")}async function CN(i,e,n){if(i.Ra.set("Online"),e instanceof KT&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(s){he(ia,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ch(i,s)}else if(e instanceof ch?i.Va.Ze(e):e instanceof QT?i.Va.st(e):i.Va.tt(e),!n.isEqual(Re.min()))try{const s=await iw(i.localStore);n.compareTo(s)>=0&&await(function(u,d){const m=u.Va.Tt(d);return m.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const T=u.Ia.get(y);T&&u.Ia.set(y,T.withResumeToken(p.resumeToken,d))}})),m.targetMismatches.forEach(((p,y)=>{const T=u.Ia.get(p);if(!T)return;u.Ia.set(p,T.withResumeToken(Wt.EMPTY_BYTE_STRING,T.snapshotVersion)),lw(u,p);const A=new ns(T.target,p,y,T.sequenceNumber);Rg(u,A)})),u.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){he(ia,"Failed to raise snapshot:",s),await Ch(i,s)}}async function Ch(i,e,n){if(!xo(e))throw e;i.Ea.add(1),await bu(i),i.Ra.set("Offline"),n||(n=()=>iw(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{he(ia,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Qh(i)}))}function cw(i,e){return e().catch((n=>Ch(i,n,e)))}async function Kh(i){const e=Ie(i),n=fs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hg;for(;NN(e);)try{const o=await hN(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,DN(e,o)}catch(o){await Ch(e,o)}hw(e)&&dw(e)}function NN(i){return aa(i)&&i.Ta.length<10}function DN(i,e){i.Ta.push(e);const n=fs(i);n.O_()&&n.X_&&n.ea(e.mutations)}function hw(i){return aa(i)&&!fs(i).x_()&&i.Ta.length>0}function dw(i){fs(i).start()}async function ON(i){fs(i).ra()}async function PN(i){const e=fs(i);for(const n of i.Ta)e.ea(n.mutations)}async function VN(i,e,n){const s=i.Ta.shift(),o=_g.from(s,e,n);await cw(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Kh(i)}async function MN(i,e){e&&fs(i).X_&&await(async function(s,o){if((function(d){return pC(d)&&d!==$.ABORTED})(o.code)){const u=s.Ta.shift();fs(s).B_(),await cw(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Kh(s)}})(i,e),hw(i)&&dw(i)}async function k0(i,e){const n=Ie(i);n.asyncQueue.verifyOperationInProgress(),he(ia,"RemoteStore received new credentials");const s=aa(n);n.Ea.add(3),await bu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Qh(n)}async function kN(i,e){const n=Ie(i);e?(n.Ea.delete(2),await Qh(n)):e||(n.Ea.add(2),await bu(n),n.Ra.set("Unknown"))}function Io(i){return i.ma||(i.ma=(function(n,s,o){const u=Ie(n);return u.sa(),new EN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:RN.bind(null,i),t_:xN.bind(null,i),r_:IN.bind(null,i),H_:CN.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Ig(i)?xg(i):i.Ra.set("Unknown")):(await i.ma.stop(),uw(i))}))),i.ma}function fs(i){return i.fa||(i.fa=(function(n,s,o){const u=Ie(n);return u.sa(),new TN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:ON.bind(null,i),r_:MN.bind(null,i),ta:PN.bind(null,i),na:VN.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Kh(i)):(await i.fa.stop(),i.Ta.length>0&&(he(ia,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,m=new Cg(e,n,d,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ng(i,e){if(yi("AsyncQueue",`${e}: ${i}`),xo(i))return new ce($.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{static emptySet(e){return new co(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ve.comparator(n.key,s.key):(n,s)=>ve.comparator(n.key,s.key),this.keyedMap=Kl(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new co;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.ga=new dt(ve.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class To{constructor(e,n,s,o,u,d,m,p,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach((m=>{d.push({type:0,doc:m})})),new To(e,n,co.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class UN{constructor(){this.queries=U0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Ie(n),u=o.queries;o.queries=U0(),u.forEach(((d,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new ce($.ABORTED,"Firestore shutting down"))}}function U0(){return new sa((i=>DT(i)),zh)}async function fw(i,e){const n=Ie(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new LN,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=Ng(d,`Initialization of query '${no(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Dg(n)}async function mw(i,e){const n=Ie(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function jN(i,e){const n=Ie(i);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const m of d.Sa)m.Fa(o)&&(s=!0);d.wa=o}}s&&Dg(n)}function zN(i,e,n){const s=Ie(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function Dg(i){i.Ca.forEach((e=>{e.next()}))}var Hm,j0;(j0=Hm||(Hm={})).Ma="default",j0.Cache="cache";class gw{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new To(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=To.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){this.key=e}}class yw{constructor(e){this.key=e}}class qN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=OT(e),this.tu=new co(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new L0,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,A)=>{const S=o.get(T),U=qh(this.query,A)?A:null,k=!!S&&this.mutatedKeys.has(S.key),Y=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let H=!1;S&&U?S.data.isEqual(U.data)?k!==Y&&(s.track({type:3,doc:U}),H=!0):this.su(S,U)||(s.track({type:2,doc:U}),H=!0,(p&&this.eu(U,p)>0||y&&this.eu(U,y)<0)&&(m=!0)):!S&&U?(s.track({type:0,doc:U}),H=!0):S&&!U&&(s.track({type:1,doc:S}),H=!0,(p||y)&&(m=!0)),H&&(U?(d=d.add(U),u=Y?u.add(T):u.delete(T)):(d=d.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),u=u.delete(T.key),s.track({type:1,doc:T})}return{tu:d,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((T,A)=>(function(U,k){const Y=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:H})}};return Y(U)-Y(k)})(T.type,A.type)||this.eu(T.doc,A.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,d.length!==0||y?{snapshot:new To(this.query,e.tu,u,d,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new L0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new yw(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new pw(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return To.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Og="SyncEngine";class BN{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class HN{constructor(e){this.key=e,this.hu=!1}}class FN{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new sa((m=>DT(m)),zh),this.Iu=new Map,this.Eu=new Set,this.du=new dt(ve.comparator),this.Au=new Map,this.Ru=new Tg,this.Vu={},this.mu=new Map,this.fu=Eo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GN(i,e,n=!0){const s=bw(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await _w(s,e,n,!0),o}async function QN(i,e){const n=bw(i);await _w(n,e,!0,!1)}async function _w(i,e,n,s){const o=await dN(i.localStore,Rr(e)),u=o.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await KN(i,e,u,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&ow(i.remoteStore,o),m}async function KN(i,e,n,s,o){i.pu=(A,S,U)=>(async function(Y,H,le,ie){let re=H.view.ru(le);re.Cs&&(re=await D0(Y.localStore,H.query,!1).then((({documents:I})=>H.view.ru(I,re))));const ge=ie&&ie.targetChanges.get(H.targetId),ue=ie&&ie.targetMismatches.get(H.targetId)!=null,xe=H.view.applyChanges(re,Y.isPrimaryClient,ge,ue);return q0(Y,H.targetId,xe.au),xe.snapshot})(i,A,S,U);const u=await D0(i.localStore,e,!0),d=new qN(e,u.Qs),m=d.ru(u.documents),p=wu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),y=d.applyChanges(m,i.isPrimaryClient,p);q0(i,n,y.au);const T=new BN(e,n,d);return i.Tu.set(e,T),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),y.snapshot}async function YN(i,e,n){const s=Ie(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((d=>!zh(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await qm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Sg(s.remoteStore,o.targetId),Fm(s,o.targetId)})).catch(Ro)):(Fm(s,o.targetId),await qm(s.localStore,o.targetId,!0))}async function XN(i,e){const n=Ie(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Sg(n.remoteStore,s.targetId))}async function $N(i,e,n){const s=r2(i);try{const o=await(function(d,m){const p=Ie(d),y=ot.now(),T=m.reduce(((U,k)=>U.add(k.key)),Ue());let A,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let k=_i(),Y=Ue();return p.Ns.getEntries(U,T).next((H=>{k=H,k.forEach(((le,ie)=>{ie.isValidDocument()||(Y=Y.add(le))}))})).next((()=>p.localDocuments.getOverlayedDocuments(U,k))).next((H=>{A=H;const le=[];for(const ie of m){const re=hC(ie,A.get(ie.key).overlayedDocument);re!=null&&le.push(new ys(ie.key,re,bT(re.value.mapValue),nr.exists(!0)))}return p.mutationQueue.addMutationBatch(U,y,le,m)})).next((H=>{S=H;const le=H.applyToLocalDocumentSet(A,Y);return p.documentOverlayCache.saveOverlays(U,H.batchId,le)}))})).then((()=>({batchId:S.batchId,changes:VT(A)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,m,p){let y=d.Vu[d.currentUser.toKey()];y||(y=new dt(Le)),y=y.insert(m,p),d.Vu[d.currentUser.toKey()]=y})(s,o.batchId,n),await Au(s,o.changes),await Kh(s.remoteStore)}catch(o){const u=Ng(o,"Failed to persist write");n.reject(u)}}async function vw(i,e){const n=Ie(i);try{const s=await uN(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Xe(d.hu,14607):o.removedDocuments.size>0&&(Xe(d.hu,42227),d.hu=!1))})),await Au(n,s,e)}catch(s){await Ro(s)}}function z0(i,e,n){const s=Ie(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const p=Ie(d);p.onlineState=m;let y=!1;p.queries.forEach(((T,A)=>{for(const S of A.Sa)S.va(m)&&(y=!0)})),y&&Dg(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function WN(i,e,n){const s=Ie(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let d=new dt(ve.comparator);d=d.insert(u,sn.newNoDocument(u,Re.min()));const m=Ue().add(u),p=new Fh(Re.min(),new Map,new dt(Le),d,m);await vw(s,p),s.du=s.du.remove(u),s.Au.delete(e),Pg(s)}else await qm(s.localStore,e,!1).then((()=>Fm(s,e,n))).catch(Ro)}async function ZN(i,e){const n=Ie(i),s=e.batch.batchId;try{const o=await lN(n.localStore,e);Tw(n,s,null),Ew(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Au(n,o)}catch(o){await Ro(o)}}async function JN(i,e,n){const s=Ie(i);try{const o=await(function(d,m){const p=Ie(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return p.mutationQueue.lookupMutationBatch(y,m).next((A=>(Xe(A!==null,37113),T=A.keys(),p.mutationQueue.removeMutationBatch(y,A)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,T,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>p.localDocuments.getDocuments(y,T)))}))})(s.localStore,e);Tw(s,e,n),Ew(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Au(s,o)}catch(o){await Ro(o)}}function Ew(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function Tw(i,e,n){const s=Ie(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Fm(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||ww(i,s)}))}function ww(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Sg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Pg(i))}function q0(i,e,n){for(const s of n)s instanceof pw?(i.Ru.addReference(s.key,e),e2(i,s)):s instanceof yw?(he(Og,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||ww(i,s.key)):Ae(19791,{wu:s})}function e2(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(he(Og,"New document in limbo: "+n),i.Eu.add(s),Pg(i))}function Pg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new ve(at.fromString(e)),s=i.fu.next();i.Au.set(s,new HN(n)),i.du=i.du.insert(n,s),ow(i.remoteStore,new ns(Rr(pg(n.path)),s,"TargetPurposeLimboResolution",Lh.ce))}}async function Au(i,e,n){const s=Ie(i),o=[],u=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{d.push(s.pu(p,e,n).then((y=>{var T;if((y||n)&&s.isPrimaryClient){const A=y?!y.fromCache:(T=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(p.targetId,A?"current":"not-current")}if(y){o.push(y);const A=bg.As(p.targetId,y);u.push(A)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(p,y){const T=Ie(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>J.forEach(y,(S=>J.forEach(S.Es,(U=>T.persistence.referenceDelegate.addReference(A,S.targetId,U))).next((()=>J.forEach(S.ds,(U=>T.persistence.referenceDelegate.removeReference(A,S.targetId,U)))))))))}catch(A){if(!xo(A))throw A;he(Ag,"Failed to update sequence numbers: "+A)}for(const A of y){const S=A.targetId;if(!A.fromCache){const U=T.Ms.get(S),k=U.snapshotVersion,Y=U.withLastLimboFreeSnapshotVersion(k);T.Ms=T.Ms.insert(S,Y)}}})(s.localStore,u))}async function t2(i,e){const n=Ie(i);if(!n.currentUser.isEqual(e)){he(Og,"User change. New user:",e.toKey());const s=await rw(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new ce($.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Au(n,s.Ls)}}function n2(i,e){const n=Ie(i),s=n.Au.get(e);if(s&&s.hu)return Ue().add(s.key);{let o=Ue();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const m=n.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function bw(i){const e=Ie(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=vw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=n2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WN.bind(null,e),e.Pu.H_=jN.bind(null,e.eventManager),e.Pu.yu=zN.bind(null,e.eventManager),e}function r2(i){const e=Ie(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JN.bind(null,e),e}class Nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return oN(this.persistence,new iN,e.initialUser,this.serializer)}Cu(e){return new nw(wg.mi,this.serializer)}Du(e){return new mN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nh.provider={build:()=>new Nh};class i2 extends Nh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Xe(this.persistence.referenceDelegate instanceof Ih,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new HC(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new nw((s=>Ih.mi(s,n)),this.serializer)}}class Gm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>z0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=t2.bind(null,this.syncEngine),await kN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UN})()}createDatastore(e){const n=Gh(e.databaseInfo.databaseId),s=(function(u){return new vN(u)})(e.databaseInfo);return(function(u,d,m,p){return new bN(u,d,m,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,d,m){return new SN(s,o,u,d,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>z0(this.syncEngine,n,0)),(function(){return V0.v()?new V0:new gN})())}createSyncEngine(e,n){return(function(o,u,d,m,p,y,T){const A=new FN(o,u,d,m,p,y);return T&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=Ie(o);he(ia,"RemoteStore shutting down."),u.Ea.add(5),await bu(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Gm.provider={build:()=>new Gm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="FirestoreClient";class s2{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=rn.UNAUTHENTICATED,this.clientId=cg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async d=>{he(ms,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(he(ms,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Ng(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function ym(i,e){i.asyncQueue.verifyOperationInProgress(),he(ms,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await rw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function B0(i,e){i.asyncQueue.verifyOperationInProgress();const n=await a2(i);he(ms,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>k0(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>k0(e.remoteStore,o))),i._onlineComponents=e}async function a2(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){he(ms,"Using user provided OfflineComponentProvider");try{await ym(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===$.FAILED_PRECONDITION||o.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;po("Error using user provided cache. Falling back to memory cache: "+n),await ym(i,new Nh)}}else he(ms,"Using default OfflineComponentProvider"),await ym(i,new i2(void 0));return i._offlineComponents}async function Sw(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(he(ms,"Using user provided OnlineComponentProvider"),await B0(i,i._uninitializedComponentsProvider._online)):(he(ms,"Using default OnlineComponentProvider"),await B0(i,new Gm))),i._onlineComponents}function o2(i){return Sw(i).then((e=>e.syncEngine))}async function Rw(i){const e=await Sw(i),n=e.eventManager;return n.onListen=GN.bind(null,e.syncEngine),n.onUnlisten=YN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=QN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XN.bind(null,e.syncEngine),n}function l2(i,e,n={}){const s=new fi;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,m,p,y){const T=new Aw({next:S=>{T.Nu(),d.enqueueAndForget((()=>mw(u,A)));const U=S.docs.has(m);!U&&S.fromCache?y.reject(new ce($.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&S.fromCache&&p&&p.source==="server"?y.reject(new ce($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),A=new gw(pg(m.path),T,{includeMetadataChanges:!0,qa:!0});return fw(u,A)})(await Rw(i),i.asyncQueue,e,n,s))),s.promise}function u2(i,e,n={}){const s=new fi;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,m,p,y){const T=new Aw({next:S=>{T.Nu(),d.enqueueAndForget((()=>mw(u,A))),S.fromCache&&p.source==="server"?y.reject(new ce($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),A=new gw(m,T,{includeMetadataChanges:!0,qa:!0});return fw(u,A)})(await Rw(i),i.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="firestore.googleapis.com",F0=!0;class G0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Iw,this.ssl=F0}else this.host=e.host,this.ssl=e.ssl??F0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qC)throw new ce($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new G0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new G0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new gI;switch(s.type){case"firstParty":return new vI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=H0.get(n);s&&(he("ComponentProvider","Removing Datastore"),H0.delete(n),s.terminate())})(this),Promise.resolve()}}function c2(i,e,n,s={}){var y;i=Dr(i,Yh);const o=wo(e),u=i._getSettings(),d={...u,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(mE(`https://${m}`),gE("Firestore",!0)),u.host!==Iw&&u.host!==m&&po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!ea(p,d)&&(i._setSettings(p),s.mockUserToken)){let T,A;if(typeof s.mockUserToken=="string")T=s.mockUserToken,A=rn.MOCK_USER;else{T=TS(s.mockUserToken,(y=i._app)==null?void 0:y.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new ce($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new rn(S)}i._authCredentials=new pI(new hT(T,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Co(this.firestore,e,this._query)}}class Et{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}toJSON(){return{type:Et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(vu(n,Et._jsonSchema))return new Et(e,s||null,new ve(at.fromString(n.referencePath)))}}Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:It("string",Et._jsonSchemaVersion),referencePath:It("string")};class ls extends Co{constructor(e,n,s){super(e,n,pg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new ve(e))}withConverter(e){return new ls(this.firestore,e,this._path)}}function Nn(i,e,...n){if(i=Ct(i),dT("collection","path",e),i instanceof Yh){const s=at.fromString(e,...n);return i0(s),new ls(i,null,s)}{if(!(i instanceof Et||i instanceof ls))throw new ce($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(at.fromString(e,...n));return i0(s),new ls(i.firestore,null,s)}}function oa(i,e,...n){if(i=Ct(i),arguments.length===1&&(e=cg.newId()),dT("doc","path",e),i instanceof Yh){const s=at.fromString(e,...n);return r0(s),new Et(i,null,new ve(s))}{if(!(i instanceof Et||i instanceof ls))throw new ce($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(at.fromString(e,...n));return r0(s),new Et(i.firestore,i instanceof ls?i.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="AsyncQueue";class K0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sw(this,"async_queue_retry"),this._c=()=>{const s=pm();s&&he(Q0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=pm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=pm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new fi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xo(e))throw e;he(Q0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,yi("INTERNAL UNHANDLED ERROR: ",Y0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Cg.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:Y0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Y0(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class No extends Yh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new K0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new K0(e),this._firestoreClient=void 0,await e}}}function h2(i,e){const n=typeof i=="object"?i:vE(),s=typeof i=="string"?i:wh,o=Zm(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=vS("firestore");u&&c2(o,...u)}return o}function Vg(i){if(i._terminated)throw new ce($.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||d2(i),i._firestoreClient}function d2(i){var s,o,u;const e=i._freezeSettings(),n=(function(m,p,y,T){return new kI(m,p,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,xw(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(i._databaseId,((s=i._app)==null?void 0:s.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new s2(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gn(Wt.fromBase64String(e))}catch(n){throw new ce($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vu(e,Gn._jsonSchema))return Gn.fromBase64String(e.bytes)}}Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:It("string",Gn._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ir._jsonSchemaVersion}}static fromJSON(e){if(vu(e,Ir._jsonSchema))return new Ir(e.latitude,e.longitude)}}Ir._jsonSchemaVersion="firestore/geoPoint/1.0",Ir._jsonSchema={type:It("string",Ir._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Cr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vu(e,Cr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Cr(e.vectorValues);throw new ce($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cr._jsonSchemaVersion="firestore/vectorValue/1.0",Cr._jsonSchema={type:It("string",Cr._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=/^__.*__$/;class m2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ys(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tu(e,this.data,n,this.fieldTransforms)}}class Cw{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ys(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Nw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:i})}}class Mg{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Mg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Dh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Nw(this.Ac)&&f2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class g2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Gh(e)}Cc(e,n,s,o=!1){return new Mg({Ac:e,methodName:n,Dc:s,path:$t.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wh(i){const e=i._freezeSettings(),n=Gh(i._databaseId);return new g2(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Dw(i,e,n,s,o,u={}){const d=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);Lg("Data must be an object, but it was:",d,s);const m=Ow(s,d);let p,y;if(u.merge)p=new Cn(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const T=[];for(const A of u.mergeFields){const S=Qm(e,A,n);if(!d.contains(S))throw new ce($.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Vw(T,S)||T.push(S)}p=new Cn(T),y=d.fieldTransforms.filter((A=>p.covers(A.field)))}else p=null,y=d.fieldTransforms;return new m2(new vn(m),p,y)}class Zh extends $h{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zh}}class kg extends $h{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new hu(e.serializer,LT(e.serializer,this.Fc));return new oC(e.path,n)}isEqual(e){return e instanceof kg&&this.Fc===e.Fc}}function p2(i,e,n,s){const o=i.Cc(1,e,n);Lg("Data must be an object, but it was:",o,s);const u=[],d=vn.empty();ps(s,((p,y)=>{const T=Ug(e,p,n);y=Ct(y);const A=o.yc(T);if(y instanceof Zh)u.push(T);else{const S=Su(y,A);S!=null&&(u.push(T),d.set(T,S))}}));const m=new Cn(u);return new Cw(d,m,o.fieldTransforms)}function y2(i,e,n,s,o,u){const d=i.Cc(1,e,n),m=[Qm(e,s,n)],p=[o];if(u.length%2!=0)throw new ce($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(Qm(e,u[S])),p.push(u[S+1]);const y=[],T=vn.empty();for(let S=m.length-1;S>=0;--S)if(!Vw(y,m[S])){const U=m[S];let k=p[S];k=Ct(k);const Y=d.yc(U);if(k instanceof Zh)y.push(U);else{const H=Su(k,Y);H!=null&&(y.push(U),T.set(U,H))}}const A=new Cn(y);return new Cw(T,A,d.fieldTransforms)}function _2(i,e,n,s=!1){return Su(n,i.Cc(s?4:3,e))}function Su(i,e){if(Pw(i=Ct(i)))return Lg("Unsupported field value:",e,i),Ow(i,e);if(i instanceof $h)return(function(s,o){if(!Nw(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let d=0;for(const m of s){let p=Su(m,o.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),d++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=Ct(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return LT(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ot.fromDate(s);return{timestampValue:xh(o.serializer,u)}}if(s instanceof ot){const u=new ot(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:xh(o.serializer,u)}}if(s instanceof Ir)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Gn)return{bytesValue:YT(o.serializer,s._byteString)};if(s instanceof Et){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Eg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Cr)return(function(d,m){return{mapValue:{fields:{[TT]:{stringValue:wT},[bh]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return yg(m.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${kh(s)}`)})(i,e)}function Ow(i,e){const n={};return gT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ps(i,((s,o)=>{const u=Su(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function Pw(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ot||i instanceof Ir||i instanceof Gn||i instanceof Et||i instanceof $h||i instanceof Cr)}function Lg(i,e,n){if(!Pw(n)||!fT(n)){const s=kh(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function Qm(i,e,n){if((e=Ct(e))instanceof Xh)return e._internalPath;if(typeof e=="string")return Ug(i,e);throw Dh("Field path arguments must be of type string or ",i,!1,void 0,n)}const v2=new RegExp("[~\\*/\\[\\]]");function Ug(i,e,n){if(e.search(v2)>=0)throw Dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Xh(...e.split("."))._internalPath}catch{throw Dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Dh(i,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||d)&&(p+=" (found",u&&(p+=` in field ${s}`),d&&(p+=` in document ${o}`),p+=")"),new ce($.INVALID_ARGUMENT,m+i+p)}function Vw(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new E2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class E2 extends Mw{data(){return super.data()}}function jg(i,e){return typeof e=="string"?Ug(i,e):e instanceof Xh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ce($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zg{}class w2 extends zg{}function Nr(i,e,...n){let s=[];e instanceof zg&&s.push(e),s=s.concat(n),(function(u){const d=u.filter((p=>p instanceof qg)).length,m=u.filter((p=>p instanceof Jh)).length;if(d>1||d>0&&m>0)throw new ce($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Jh extends w2{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Jh(e,n,s)}_apply(e){const n=this._parse(e);return kw(e._query,n),new Co(e.firestore,e.converter,Mm(e._query,n))}_parse(e){const n=Wh(e.firestore);return(function(u,d,m,p,y,T,A){let S;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ce($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){$0(A,T);const k=[];for(const Y of A)k.push(X0(p,u,Y));S={arrayValue:{values:k}}}else S=X0(p,u,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||$0(A,T),S=_2(m,d,A,T==="in"||T==="not-in");return xt.create(y,T,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function an(i,e,n){const s=e,o=jg("where",i);return Jh._create(o,s,n)}class qg extends zg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new qg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:ir.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let d=o;const m=u.getFlattenedFilters();for(const p of m)kw(d,p),d=Mm(d,p)})(e._query,n),new Co(e.firestore,e.converter,Mm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function X0(i,e,n){if(typeof(n=Ct(n))=="string"){if(n==="")throw new ce($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NT(e)&&n.indexOf("/")!==-1)throw new ce($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(at.fromString(n));if(!ve.isDocumentKey(s))throw new ce($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return d0(i,new ve(s))}if(n instanceof Et)return d0(i,n._key);throw new ce($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kh(n)}.`)}function $0(i,e){if(!Array.isArray(i)||i.length===0)throw new ce($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kw(i,e){const n=(function(o,u){for(const d of o)for(const m of d.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ce($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class b2{convertValue(e,n="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ps(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){var s,o,u;const n=(u=(o=(s=e.fields)==null?void 0:s[bh].arrayValue)==null?void 0:o.values)==null?void 0:u.map((d=>vt(d.doubleValue)));return new Cr(n)}convertGeoPoint(e){return new Ir(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=jh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(au(e));default:return null}}convertTimestamp(e){const n=cs(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=at.fromString(e);Xe(ew(s),9688,{name:e});const o=new ou(s.get(1),s.get(3)),u=new ve(s.popFirst(5));return o.isEqual(n)||yi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class Xl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Js extends Mw{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(jg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Js._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Js._jsonSchemaVersion="firestore/documentSnapshot/1.0",Js._jsonSchema={type:It("string",Js._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class hh extends Js{data(e={}){return super.data(e)}}class ho{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Xl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new hh(this._firestore,this._userDataWriter,s.key,s,new Xl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const p=new hh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Xl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new hh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Xl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),T=d.indexOf(m.doc.key)),{type:A2(m.type),doc:p,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ho._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=cg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function A2(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(i){i=Dr(i,Et);const e=Dr(i.firestore,No);return l2(Vg(e),i._key).then((n=>S2(e,i,n)))}ho._jsonSchemaVersion="firestore/querySnapshot/1.0",ho._jsonSchema={type:It("string",ho._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class Uw extends b2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}function rr(i){i=Dr(i,Co);const e=Dr(i.firestore,No),n=Vg(e),s=new Uw(e);return T2(i._query),u2(n,i._query).then((o=>new ho(e,s,i,o)))}function jw(i,e,n){i=Dr(i,Et);const s=Dr(i.firestore,No),o=Lw(i.converter,e);return Bg(s,[Dw(Wh(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,nr.none())])}function zw(i,e,n,...s){i=Dr(i,Et);const o=Dr(i.firestore,No),u=Wh(o);let d;return d=typeof(e=Ct(e))=="string"||e instanceof Xh?y2(u,"updateDoc",i._key,e,n,s):p2(u,"updateDoc",i._key,e),Bg(o,[d.toMutation(i._key,nr.exists(!0))])}function qw(i,e){const n=Dr(i.firestore,No),s=oa(i),o=Lw(i.converter,e);return Bg(n,[Dw(Wh(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,nr.exists(!1))]).then((()=>s))}function Bg(i,e){return(function(s,o){const u=new fi;return s.asyncQueue.enqueueAndForget((async()=>$N(await o2(s),o,u))),u.promise})(Vg(i),e)}function S2(i,e,n){const s=n.docs.get(e._key),o=new Uw(i);return new Js(i,o,e._key,s,new Xl(n.hasPendingWrites,n.fromCache),e.converter)}function R2(i){return new kg("increment",i)}(function(e,n=!0){(function(o){So=o})(bo),mo(new ta("firestore",((s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),m=new No(new yI(s.getProvider("auth-internal")),new EI(d,s.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ce($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ou(y.options.projectId,T)})(d,o),d);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),as(Jv,e0,e),as(Jv,e0,"esm2020")})();var x2="firebase",I2="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */as(x2,I2,"app");const C2={apiKey:"AIzaSyCDZJqOx5eXpu3cD_FBJ8oi-hYvLCpbDXE",authDomain:"verdadreto-bec6a.firebaseapp.com",projectId:"verdadreto-bec6a",storageBucket:"verdadreto-bec6a.firebasestorage.app",messagingSenderId:"938969209658",appId:"1:938969209658:web:534282f57a8ff381c00e03"},Bw=_E(C2),Ht=h2(Bw),sr=fI(Bw),Hw=new ci;Hw.setCustomParameters({prompt:"select_account"});const W0=()=>{const i="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<6;n++)e+=i.charAt(Math.floor(Math.random()*i.length));return e},N2=async i=>{try{const e=Nn(Ht,"users"),n=Nr(e,an("referralCode","==",i));return(await rr(n)).empty}catch(e){return console.error("Error checking referral code uniqueness:",e),!1}},D2=async()=>{let i,e=!1,n=0;const s=10;do i=W0(),e=await N2(i),n++;while(!e&&n<s);return e||(i=W0()+Date.now().toString().slice(-2)),i},Hg=async(i,e)=>{try{const n=oa(Ht,"users",i.uid);if(!(await Do(n)).exists()){const o=await D2(),u={uid:i.uid,email:i.email,displayName:i.displayName,photoURL:i.photoURL,isAnonymous:i.isAnonymous,emailVerified:i.emailVerified,referralCode:o,referralCount:0,createdAt:new Date,...e&&{usedReferralCode:e}};await jw(n,u)}}catch(n){console.error("Error creating user profile:",n)}},Oo=i=>({uid:i.uid,email:i.email,displayName:i.displayName,photoURL:i.photoURL,isAnonymous:i.isAnonymous,emailVerified:i.emailVerified}),Fw=async i=>{try{const e=await wx(sr,Hw);return await Hg(e.user,i),Oo(e.user)}catch(e){throw console.error("Error al iniciar sesión con Google:",e),new Error(e.message||"Error al iniciar sesión con Google")}},Gw=async(i,e)=>{try{const n=await $R(sr,i,e);return Oo(n.user)}catch(n){throw console.error("Error al iniciar sesión:",n),new Error(Gg(n.code))}},Qw=async(i,e,n,s)=>{try{const o=await XR(sr,i,e);return n&&await ZR(o.user,{displayName:n}),await Hg(o.user,s),await QE(o.user),Oo(o.user)}catch(o){throw console.error("Error al registrarse:",o),new Error(Gg(o.code))}},Kw=async()=>{try{const i=await FR(sr);return await Hg(i.user),Oo(i.user)}catch(i){throw console.error("Error al iniciar sesión anónima:",i),new Error("Error al iniciar sesión anónima")}},O2=async()=>{try{await nx(sr)}catch(i){throw console.error("Error al cerrar sesión:",i),new Error("Error al cerrar sesión")}},Yw=async i=>{try{await YR(sr,i)}catch(e){throw console.error("Error al enviar email de restablecimiento:",e),new Error(Gg(e.code))}},Xw=async()=>{try{if(sr.currentUser)await QE(sr.currentUser);else throw new Error("No hay usuario autenticado")}catch(i){throw console.error("Error al reenviar verificación:",i),new Error("Error al reenviar verificación de email")}},$w=i=>tx(sr,e=>{i(e?Oo(e):null)}),Fg=()=>sr.currentUser?Oo(sr.currentUser):null,Km=()=>{const i=Fg();return i!==null&&!i.isAnonymous&&i.emailVerified},Gg=i=>{switch(i){case"auth/user-not-found":return"No existe una cuenta con este email";case"auth/wrong-password":return"Contraseña incorrecta";case"auth/email-already-in-use":return"Ya existe una cuenta con este email";case"auth/weak-password":return"La contraseña debe tener al menos 6 caracteres";case"auth/invalid-email":return"Email inválido";case"auth/too-many-requests":return"Demasiados intentos fallidos. Intenta más tarde";case"auth/network-request-failed":return"Error de conexión. Verifica tu internet";default:return"Error de autenticación. Intenta nuevamente"}},P2=Object.freeze(Object.defineProperty({__proto__:null,canPurchase:Km,getCurrentUser:Fg,logout:O2,onAuthStateChange:$w,registerWithEmail:Qw,resendEmailVerification:Xw,resetPassword:Yw,signInAnonymous:Kw,signInWithEmail:Gw,signInWithGoogle:Fw},Symbol.toStringTag,{value:"Module"})),Ww=oe.createContext(void 0),V2=({children:i})=>{const[e,n]=oe.useState({user:null,isLoading:!0,isAuthenticated:!1});oe.useEffect(()=>{const m=$w(p=>{n({user:p,isLoading:!1,isAuthenticated:p!==null&&!p.isAnonymous})});return()=>m()},[]);const d={...e,login:()=>{},logout:async()=>{try{const{logout:m}=await sE(async()=>{const{logout:p}=await Promise.resolve().then(()=>P2);return{logout:p}},void 0,import.meta.url);await m()}catch(m){console.error("Error al cerrar sesión:",m)}},refreshUser:()=>{const m=Fg();n(p=>({...p,user:m,isAuthenticated:m!==null&&!m.isAnonymous}))}};return E.jsx(Ww.Provider,{value:d,children:i})},ed=()=>{const i=oe.useContext(Ww);if(i===void 0)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return i},gs={PURCHASED_PACKS:"verdad_reto_purchased_packs",CACHED_GAME_ITEMS:"verdad_reto_cached_items",CACHED_CATEGORIES:"verdad_reto_cached_categories",CACHE_PERMISSION:"verdad_reto_cache_permission",LAST_SYNC:"verdad_reto_last_sync"},M2=()=>{const i=localStorage.getItem(gs.CACHE_PERMISSION);if(i==="granted")return!0;if(i==="denied")return!1;const e=window.confirm(`¿Deseas permitir que la aplicación guarde los packs comprados localmente para poder jugar sin conexión?

Esto mejorará tu experiencia permitiéndote acceder a tus packs incluso sin internet.`);return localStorage.setItem(gs.CACHE_PERMISSION,e?"granted":"denied"),e},du=()=>localStorage.getItem(gs.CACHE_PERMISSION)==="granted",k2=async(i,e,n)=>{if(!du()){console.log("Cache permission not granted, skipping cache");return}try{const s={pack:i,gameData:{items:e,categories:n,timestamp:Date.now()},timestamp:Date.now()},o=Qg();o[i.id]=s,localStorage.setItem(gs.PURCHASED_PACKS,JSON.stringify(o)),localStorage.setItem(gs.LAST_SYNC,Date.now().toString()),console.log(`Pack ${i.name} cached successfully`)}catch(s){console.error("Error caching pack:",s)}},Qg=()=>{try{const i=localStorage.getItem(gs.PURCHASED_PACKS);return i?JSON.parse(i):{}}catch(i){return console.error("Error reading cached packs:",i),{}}},L2=i=>{if(!du())return null;try{const e=Qg(),n=[],s=[];for(const o of i){const u=e[o];u&&(n.push(...u.gameData.items),s.push(...u.gameData.categories))}return n.length===0?null:{items:n,categories:[...new Set(s)]}}catch(e){return console.error("Error reading cached game data:",e),null}},U2=()=>{Object.values(gs).forEach(i=>{localStorage.removeItem(i)}),console.log("Cache cleared successfully")},Zw=()=>{const i=Qg(),e=localStorage.getItem(gs.LAST_SYNC);return{hasPermission:du(),packsCount:Object.keys(i).length,lastSync:e?new Date(parseInt(e)):null,packs:Object.keys(i)}};var Jw="basil",j2=function(e){return e===3?"v3":e},eb="https://js.stripe.com",z2="".concat(eb,"/").concat(Jw,"/stripe.js"),q2=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,B2=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var H2=function(e){return q2.test(e)||B2.test(e)},F2=function(){for(var e=document.querySelectorAll('script[src^="'.concat(eb,'"]')),n=0;n<e.length;n++){var s=e[n];if(H2(s.src))return s}return null},Z0=function(e){var n="",s=document.createElement("script");s.src="".concat(z2).concat(n);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(s),s},G2=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:n})},Bl=null,eh=null,th=null,Q2=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},K2=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},Y2=function(e){return Bl!==null?Bl:(Bl=new Promise(function(n,s){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var o=F2();if(!(o&&e)){if(!o)o=Z0(e);else if(o&&th!==null&&eh!==null){var u;o.removeEventListener("load",th),o.removeEventListener("error",eh),(u=o.parentNode)===null||u===void 0||u.removeChild(o),o=Z0(e)}}th=K2(n,s),eh=Q2(s),o.addEventListener("load",th),o.addEventListener("error",eh)}catch(d){s(d);return}}),Bl.catch(function(n){return Bl=null,Promise.reject(n)}))},X2=function(e,n,s){if(e===null)return null;var o=n[0],u=o.match(/^pk_test/),d=j2(e.version),m=Jw;u&&d!==m&&console.warn("Stripe.js@".concat(d," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(m,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var p=e.apply(void 0,n);return G2(p,s),p},Hl,tb=!1,nb=function(){return Hl||(Hl=Y2(null).catch(function(e){return Hl=null,Promise.reject(e)}),Hl)};Promise.resolve().then(function(){return nb()}).catch(function(i){tb||console.warn(i)});var $2=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];tb=!0;var o=Date.now();return nb().then(function(u){return X2(u,n,o)})};const W2="pk_live_51S2dpMEamlsERKowyMSm4kgm11dMknJLyZGy9gZsIBBd3BQo3l9Vnn0TYKWcmuDtnq23YEsHo7FL69hGEM3UAboz00Onx53LCm";let _m=null;const Z2=()=>(_m||(_m=$2(W2)),_m),rb=async()=>{try{const i=await Do(oa(Ht,"config","stripe"));return i.exists()?i.data():null}catch(i){return console.error("Error obteniendo configuración de Stripe:",i),null}},J2=async(i,e,n)=>{try{if(!i.isPremium)throw new Error("Este pack no requiere pago");const s=await rb();if(!s)throw new Error("Configuración de Stripe no disponible");const o=i.priceAmount||0,u=i.originalPriceAmount||i.priceAmount||0;console.log("Creando sesión de checkout:",{packId:i.id,originalAmount:u,finalAmount:o,hasDiscount:i.hasDiscount,discountReason:i.discountReason});const d=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packId:i.id,priceId:i.stripePriceId,userEmail:e,userId:n,successUrl:`${window.location.origin}${s.successUrl}&pack=${i.id}`,cancelUrl:`${window.location.origin}${s.cancelUrl}`,hasDiscount:i.hasDiscount,finalAmount:o,originalAmount:u,discountReason:i.discountReason})});if(!d.ok){const p=await d.json();throw new Error(p.error||"Error creando sesión de pago")}const m=await d.json();return{sessionId:m.id,url:m.url}}catch(s){throw console.error("Error creando sesión de checkout:",s),s}},eD=async(i,e,n)=>{try{const s=await Z2();if(!s)throw new Error("Stripe no está disponible");const o=await J2(i,e,n);if(!o)throw new Error("No se pudo crear la sesión de pago");await tD({userId:n,packId:i.id,stripeSessionId:o.sessionId,purchaseDate:new Date,amount:i.priceAmount||0,currency:i.currency||"EUR",status:"pending",email:e});const{error:u}=await s.redirectToCheckout({sessionId:o.sessionId});if(u)throw new Error(u.message)}catch(s){throw console.error("Error redirigiendo a checkout:",s),s}},tD=async i=>{try{return(await qw(Nn(Ht,"userPurchases"),{...i,purchaseDate:i.purchaseDate.toISOString()})).id}catch(e){throw console.error("Error guardando compra pendiente:",e),e}},nD=async i=>{try{const e=Nr(Nn(Ht,"userPurchases"),an("userId","==",i),an("status","==","completed"));return(await rr(e)).docs.map(s=>({id:s.id,...s.data(),purchaseDate:new Date(s.data().purchaseDate)}))}catch(e){return console.error("Error obteniendo compras del usuario:",e),[]}},J0=async i=>{try{return(await nD(i)).map(n=>n.packId)}catch(e){return console.error("Error obteniendo packs comprados:",e),[]}},rD=({onClose:i})=>{const[e,n]=oe.useState(null),[s,o]=oe.useState(!1);oe.useEffect(()=>{u()},[]);const u=()=>{const p=Zw();n(p)},d=async()=>{o(!0);try{M2()&&u()}finally{o(!1)}},m=()=>{window.confirm("¿Estás seguro de que quieres eliminar todos los datos guardados localmente?")&&(U2(),u())};return e?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("h2",{className:"text-xl font-bold",children:"Almacenamiento Local"}),E.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"Estado del Caché"}),E.jsxs("div",{className:"space-y-2 text-sm",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Permiso:"}),E.jsx("span",{className:`font-medium ${e.hasPermission?"text-green-600":"text-red-600"}`,children:e.hasPermission?"Activado":"Desactivado"})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Packs guardados:"}),E.jsx("span",{className:"font-medium",children:e.packsCount})]}),e.lastSync&&E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Última sincronización:"}),E.jsxs("span",{className:"font-medium text-xs",children:[e.lastSync.toLocaleDateString()," ",e.lastSync.toLocaleTimeString()]})]})]})]}),e.packsCount>0&&E.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"Packs Disponibles Sin Conexión"}),E.jsx("div",{className:"space-y-1 text-sm",children:e.packs.map(p=>E.jsxs("div",{className:"flex items-center",children:[E.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),E.jsx("span",{className:"capitalize",children:p.replace("-"," ")})]},p))})]}),E.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"¿Qué es el almacenamiento local?"}),E.jsx("p",{className:"text-sm text-gray-700",children:"Permite guardar los packs que compres en tu dispositivo para poder jugar sin conexión a internet. Los datos se mantienen seguros en tu navegador."})]}),E.jsxs("div",{className:"flex flex-col space-y-2",children:[e.hasPermission?E.jsx("div",{className:"text-center text-green-600 font-medium",children:"✓ Almacenamiento local activado"}):E.jsx(He,{onClick:d,disabled:s,className:"w-full bg-green-600 hover:bg-green-700",children:s?"Procesando...":"Activar Almacenamiento Local"}),e.packsCount>0&&E.jsx(He,{onClick:m,className:"w-full bg-red-600 hover:bg-red-700",children:"Limpiar Datos Guardados"}),E.jsx(He,{onClick:i,className:"w-full bg-gray-600 hover:bg-gray-700",children:"Cerrar"})]})]})]})}):E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:E.jsx("div",{className:"text-center",children:"Cargando información del caché..."})})})},iD=({pack:i,onBack:e,onSuccess:n})=>{const{user:s}=ed(),[o,u]=oe.useState(!1),[d,m]=oe.useState(null),[p,y]=oe.useState(null);oe.useEffect(()=>{(async()=>{try{const U=await rb();y(U)}catch{m("Error cargando configuración de pago")}})()},[]);const T=async()=>{if(!s||!s.email){m("Debes estar autenticado para realizar una compra");return}if(!i.isPremium){m("Este pack no requiere pago");return}u(!0),m(null);try{await eD(i,s.email,s.uid),n&&n()}catch(S){m(S.message||"Error procesando el pago"),u(!1)}},A=(S,U)=>new Intl.NumberFormat("es-ES",{style:"currency",currency:U.toUpperCase()}).format(S/100);return p?E.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:E.jsxs("div",{className:"w-full max-w-md",children:[E.jsxs("div",{className:"relative text-center mb-8",children:[E.jsx("button",{onClick:e,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:E.jsx(rE,{className:"w-8 h-8"})}),E.jsx("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Checkout"})]}),E.jsxs(Qn,{className:"p-6",children:[E.jsxs("div",{className:"text-center mb-6",children:[E.jsx("div",{className:"text-6xl mb-4",children:i.icon}),E.jsx("h2",{className:"text-2xl font-bold text-cyan-400 mb-2",children:i.name}),E.jsx("p",{className:"text-gray-400 mb-4",children:i.description}),i.priceAmount&&i.currency&&E.jsxs("div",{className:"bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-lg p-4 mb-4",children:[E.jsx("div",{className:"text-3xl font-bold text-white",children:A(i.priceAmount,i.currency)}),E.jsx("div",{className:"text-sm text-gray-300",children:"Pago único"})]})]}),E.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 mb-6",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[E.jsx(ao,{className:"w-5 h-5 text-green-400"}),E.jsx("span",{className:"text-green-400 font-semibold",children:"Pago seguro"})]}),E.jsx("p",{className:"text-sm text-gray-300",children:"Tu pago está protegido por Stripe. No almacenamos información de tarjetas de crédito."})]}),s&&E.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:[E.jsxs("div",{className:"text-sm text-gray-300",children:[E.jsx("strong",{children:"Cuenta:"})," ",s.displayName||s.email]}),E.jsxs("div",{className:"text-sm text-gray-300",children:[E.jsx("strong",{children:"Email:"})," ",s.email]})]}),d&&E.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6",children:E.jsx("p",{className:"text-red-200 text-sm",children:d})}),E.jsx(He,{onClick:T,disabled:o||!s,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:o?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Procesando..."]}):E.jsxs(E.Fragment,{children:[E.jsx(iE,{className:"w-5 h-5"}),"Pagar con Stripe"]})}),E.jsx("div",{className:"mt-4 text-center",children:E.jsx("p",{className:"text-xs text-gray-400",children:"Al continuar, aceptas nuestros términos de servicio y política de privacidad."})})]}),E.jsxs("div",{className:"mt-6 text-center",children:[E.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Métodos de pago aceptados:"}),E.jsxs("div",{className:"flex justify-center gap-2",children:[E.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Visa"}),E.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Mastercard"}),E.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"American Express"})]})]})]})}):E.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),E.jsx("p",{className:"text-gray-400",children:"Cargando configuración de pago..."})]})})},sD=({availablePacks:i,purchasedPacks:e,onPurchase:n,onBack:s,onGoToLogin:o})=>{const{user:u,isAuthenticated:d}=ed(),[m,p]=oe.useState(!1),[y,T]=oe.useState(!1),[A,S]=oe.useState(!1),[U,k]=oe.useState(null),[Y,H]=oe.useState([]),[le,ie]=oe.useState(!1);oe.useEffect(()=>{(async()=>{if(u&&d){ie(!0);try{const R=await J0(u.uid);H(R)}catch(R){console.error("Error cargando compras del usuario:",R)}finally{ie(!1)}}else H([])})()},[u,d]);const re=I=>{const R=i.find(C=>C.id===I);if(R){if(!R.isPremium||R.id==="base"){if(!Km()){p(!0),setTimeout(()=>p(!1),3e3);return}n(I);return}if(!Km()){p(!0),setTimeout(()=>p(!1),3e3);return}k(R),S(!0)}},ge=async()=>{if(S(!1),k(null),u&&d)try{const I=await J0(u.uid);H(I),U&&I.includes(U.id)&&n(U.id)}catch(I){console.error("Error actualizando compras:",I)}},ue=()=>{S(!1),k(null)},xe=Zw();return E.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:E.jsxs("div",{className:"w-full max-w-2xl",children:[E.jsxs("div",{className:"relative text-center mb-8",children:[E.jsx("button",{onClick:s,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:E.jsx(rE,{className:"w-8 h-8"})}),E.jsx("button",{onClick:()=>T(!0),className:"absolute right-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",title:"Gestionar almacenamiento local",children:E.jsxs("div",{className:"relative",children:[E.jsx(nE,{className:"w-8 h-8"}),xe.packsCount>0&&E.jsx("span",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:xe.packsCount})]})}),E.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Tienda de Paquetes"}),E.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 text-sm",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(HA,{className:"w-4 h-4"}),u?E.jsx("span",{className:`${d?"text-green-400":"text-yellow-400"}`,children:d?`Conectado como ${u.displayName||u.email}`:"Usuario anónimo - Inicia sesión para comprar"}):E.jsx("span",{className:"text-gray-400",children:"No conectado"})]}),u&&d&&E.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:E.jsx("a",{href:"https://verdad-reto.es.eu.org/delete-account.html",target:"_blank",rel:"noopener noreferrer",className:"hover:text-red-400 transition-colors",children:"Eliminar cuenta"})})]})]}),m&&E.jsxs("div",{className:"mb-6 p-4 bg-yellow-500/20 border border-yellow-500 rounded-lg text-center",children:[E.jsx("p",{className:"text-yellow-100 mb-2",children:"Necesitas iniciar sesión y verificar tu email para comprar packs premium"}),o&&E.jsx(He,{onClick:o,className:"bg-yellow-600 hover:bg-yellow-700",children:"Ir a Iniciar Sesión"})]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(I=>{const R=e.includes(I.id),C=Y.includes(I.id),O=R||C,V=I.id==="base",P=I.isPremium&&!V,x=P&&!O;return E.jsxs(Qn,{className:`flex flex-col text-center border-2 transition-all ${O?"border-green-500/50":x?"border-yellow-500/50 opacity-75":"border-transparent hover:border-pink-500/50"}`,children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"text-5xl mb-4",children:I.icon}),x&&E.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-500 rounded-full p-1",children:E.jsx(ao,{className:"w-4 h-4 text-black"})})]}),E.jsx("h2",{className:`text-2xl font-bold ${O?"text-green-400":x?"text-yellow-400":"text-cyan-400"}`,children:I.name}),E.jsx("p",{className:"text-gray-400 mt-2 mb-2 flex-grow",children:I.description}),P&&I.priceAmount&&I.currency&&E.jsxs("div",{className:"mb-4",children:[I.hasDiscount&&I.originalPriceAmount?E.jsxs("div",{className:"space-y-1",children:[E.jsx("div",{className:"text-sm text-gray-500 line-through",children:new Intl.NumberFormat("es-ES",{style:"currency",currency:I.currency.toUpperCase()}).format(I.originalPriceAmount/100)}),E.jsx("div",{className:`text-lg font-bold ${O?"text-green-400":"text-red-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:I.currency.toUpperCase()}).format(I.priceAmount/100)}),E.jsx("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:I.discountPercentage?`-${I.discountPercentage}%`:`-${new Intl.NumberFormat("es-ES",{style:"currency",currency:I.currency.toUpperCase()}).format((I.originalPriceAmount-I.priceAmount)/100)}`}),I.discountReason&&E.jsx("div",{className:"text-xs text-yellow-400 italic",children:I.discountReason})]}):E.jsx("div",{className:`text-lg font-bold ${O?"text-green-400":"text-yellow-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:I.currency.toUpperCase()}).format(I.priceAmount/100)}),E.jsx("div",{className:"text-xs text-gray-500",children:"Pago único"})]}),O?E.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-green-700 text-green-200",children:"✓ Comprado"}):V?E.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-blue-700 text-blue-200",children:"Incluido"}):P?E.jsx(He,{onClick:()=>re(I.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",disabled:le,children:le?E.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):E.jsxs(E.Fragment,{children:[E.jsx(iE,{className:"w-4 h-4"}),"Comprar ",I.price]})}):E.jsxs(He,{onClick:()=>re(I.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2",children:[E.jsx(ao,{className:"w-4 h-4"}),"Desbloquear (",I.price,")"]})]},I.id)})}),y&&E.jsx(rD,{onClose:()=>T(!1)}),A&&U&&E.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:E.jsx("div",{className:"w-full h-full",children:E.jsx(iD,{pack:U,onBack:ue,onSuccess:ge})})})]})})},aD=i=>{var n;if(!i.hasDiscount||!i.priceAmount)return i;if(i.discountValidUntil&&new Date>i.discountValidUntil)return{...i,hasDiscount:!1};let e=i.priceAmount;return i.discountPercentage?e=i.priceAmount*(1-i.discountPercentage/100):i.discountAmount&&(e=i.priceAmount-i.discountAmount),e=Math.max(0,Math.round(e)),{...i,originalPriceAmount:i.priceAmount,priceAmount:e,price:new Intl.NumberFormat("es-ES",{style:"currency",currency:((n=i.currency)==null?void 0:n.toUpperCase())||"EUR"}).format(e/100)}},ib=async()=>{try{const i=Nn(Ht,"packs"),e=await rr(i);return e.empty?(console.warn("No packs found in Firebase database"),[]):e.docs.map(o=>{const u=o.data();return{id:o.id,name:u.name,description:u.description,price:u.price,icon:u.icon,isActive:u.isActive??!0,priceAmount:u.priceAmount,currency:u.currency,isPremium:u.isPremium??!1,stripeProductId:u.stripeProductId,stripePriceId:u.stripePriceId,hasDiscount:u.hasDiscount??!1,discountPercentage:u.discountPercentage,discountAmount:u.discountAmount,discountReason:u.discountReason,discountValidUntil:u.discountValidUntil?u.discountValidUntil.toDate():void 0,originalPriceAmount:u.originalPriceAmount,allowDemo:u.allowDemo??!1,demoPlaysCount:u.demoPlaysCount??0}}).filter(o=>o.isActive).map(o=>aD(o))}catch(i){throw console.error("Error connecting to Firebase:",i),new Error("No se pudo conectar a la base de datos. Verifica tu conexión a internet.")}},oD=async i=>{try{if(!i||i.length===0)return console.warn("No categories provided for questions query"),[];const e=Nn(Ht,"gameItems"),n=Nr(e,an("type","==","question"),an("category","in",i)),s=await rr(n);return s.empty?(console.warn("No questions found in Firebase database for categories:",i),[]):s.docs.map(u=>{const d=u.data();return{text:d.text,category:d.category}})}catch(e){throw console.error("Error fetching questions from Firebase:",e),new Error("No se pudieron cargar las preguntas. Verifica tu conexión a internet.")}},lD=async i=>{try{if(!i||i.length===0)return console.warn("No categories provided for dares query"),[];const e=Nn(Ht,"gameItems"),n=Nr(e,an("type","==","dare"),an("category","in",i)),s=await rr(n);return s.empty?(console.warn("No dares found in Firebase database for categories:",i),[]):s.docs.map(u=>{const d=u.data();return{text:d.text,category:d.category}})}catch(e){throw console.error("Error fetching dares from Firebase:",e),new Error("No se pudieron cargar los retos. Verifica tu conexión a internet.")}},uD=async i=>{try{if(!i||i.length===0)return console.warn("No pack IDs provided for categories query"),[];const e=Nn(Ht,"gameItems"),n=Nr(e,an("packId","in",i)),s=await rr(n);return s.empty?(console.warn("No categories found in Firebase database for packs:",i),[]):[...new Set(s.docs.map(u=>u.data().category))]}catch(e){throw console.error("Error fetching categories from Firebase:",e),new Error("No se pudieron cargar las categorías. Verifica tu conexión a internet.")}},cD=async i=>{try{if(!i||i.length===0)return console.warn("No pack IDs provided for game data query"),{questions:[],dares:[],categories:[]};const e=await uD(i),[n,s]=await Promise.all([oD(e),lD(e)]);if(du()&&(n.length>0||s.length>0)){const o=[...n,...s],u=i.reduce((d,m)=>{const p=o.filter(T=>T.packId===m),y=e.filter(T=>p.some(A=>A.category===T));return p.length>0&&(d[m]={items:p,categories:y}),d},{});for(const[d,m]of Object.entries(u)){const y=(await ib()).find(T=>T.id===d);y&&await k2(y,m.items,m.categories)}}return{questions:n,dares:s,categories:e}}catch(e){console.error("Error fetching game data from Firebase:",e);const n=L2(i);if(n){console.log("Using cached game data for offline play");const s=n.items.filter(u=>!("type"in u)||u.type==="question"),o=n.items.filter(u=>"type"in u&&u.type==="dare");return{questions:s,dares:o,categories:n.categories}}throw du()?new Error("No hay conexión a internet y no tienes datos guardados para estos packs."):new Error("No hay conexión a internet y no tienes packs guardados localmente. ¿Deseas activar el almacenamiento local para jugar sin conexión?")}},hD=async i=>{try{const e=Nn(Ht,"gameItems"),n=Nr(e,an("packId","==",i),an("isDemo","==",!0)),o=(await rr(n)).docs.map(p=>({id:p.id,...p.data()})),u=o.filter(p=>p.type==="question").map(p=>({text:p.text,category:p.category,isDemo:!0,packId:p.packId})),d=o.filter(p=>p.type==="dare").map(p=>({text:p.text,category:p.category,isDemo:!0,packId:p.packId})),m=[...new Set(o.map(p=>p.category))];return{questions:u,dares:d,categories:m}}catch(e){return console.error("Error fetching demo data:",e),{questions:[],dares:[],categories:[]}}},dD=async(i,e)=>{try{const n={packId:i,userId:e||"anonymous",timestamp:new Date,type:"demo_play"};await qw(Nn(Ht,"demoLogs"),n);const s=Nn(Ht,"packs"),o=oa(s,i),u=await Do(o);if(u.exists()){const d=u.data().demoPlaysCount||0;await zw(o,{demoPlaysCount:d+1})}console.log("Demo play logged successfully")}catch(n){console.error("Error logging demo play:",n)}},fD=async(i,e)=>{try{if(!i||i.trim().length===0)return{isValid:!1,error:"El código de referido no puede estar vacío"};const n=Nn(Ht,"users"),s=Nr(n,an("referralCode","==",i.toUpperCase())),o=await rr(s);if(o.empty)return{isValid:!1,error:"Código de referido no válido"};const u=o.docs[0],d=u.data(),m=u.id;if(m===e)return{isValid:!1,error:"No puedes usar tu propio código de referido"};const p=await Do(oa(Ht,"users",e));if(p.exists()&&p.data().usedReferralCode)return{isValid:!1,error:"Ya has usado un código de referido anteriormente"};const y=new Date,T=new Date(y.getTime()-3600*1e3),A=Nn(Ht,"referrals"),S=Nr(A,an("referrerUid","==",m),an("createdAt",">=",T));if((await rr(S)).size>=5)return{isValid:!1,message:"Límite de referidos por hora excedido. Intenta más tarde."};const k=new Date(y.getTime()-1440*60*1e3),Y=Nr(A,an("referrerUid","==",m),an("createdAt",">=",k));return(await rr(Y)).size>=20?{isValid:!1,message:"Límite diario de referidos excedido. Intenta mañana."}:{isValid:!0,referrerName:d.displayName||d.email||"Usuario"}}catch(n){return console.error("Error validating referral code:",n),{isValid:!1,error:"Error al validar el código de referido"}}},mD=async i=>{try{const e=await Do(oa(Ht,"users",i));if(!e.exists())return[];const s=e.data().referralCount||0,o=Nn(Ht,"packs"),u=Nr(o,an("isReferralUnlockable","==",!0)),d=await rr(u),m=[];return d.forEach(p=>{const T=p.data().requiredReferrals||0;s>=T&&m.push(p.id)}),m}catch(e){return console.error("Error checking referral pack unlocks:",e),[]}},eE=async(i,e)=>{try{const n=oa(Ht,"userQuestionChangeStats",i);(await Do(n)).exists()?await zw(n,{totalChanges:R2(1),adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,updatedAt:new Date}):await jw(n,{userId:i,totalChanges:e.totalChanges,adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,createdAt:new Date,updatedAt:new Date}),console.log("Question change stats saved successfully")}catch(n){console.error("Error saving question change stats:",n)}},gD=({onBack:i,onSuccess:e})=>{const[n,s]=oe.useState("login"),[o,u]=oe.useState(""),[d,m]=oe.useState(""),[p,y]=oe.useState(""),[T,A]=oe.useState(""),[S,U]=oe.useState(""),[k,Y]=oe.useState(null),[H,le]=oe.useState(!1),[ie,re]=oe.useState(!1),[ge,ue]=oe.useState(""),[xe,I]=oe.useState(""),{refreshUser:R,user:C}=ed(),O=async()=>{re(!0),ue("");try{const ee=n==="register"&&S&&(k!=null&&k.isValid)?S:void 0;await Fw(ee),R(),e()}catch(ee){ue(ee.message)}finally{re(!1)}},V=async()=>{re(!0),ue("");try{await Kw(),R(),e()}catch(ee){ue(ee.message)}finally{re(!1)}},P=async ee=>{ee.preventDefault(),re(!0),ue(""),I("");try{if(n==="login"){const pe=await Gw(o,d);if(R(),!pe.emailVerified){I("Tu email no está verificado. Revisa tu bandeja de entrada o reenvía la verificación.");return}e()}else if(n==="register"){if(d!==p)throw new Error("Las contraseñas no coinciden");const pe=S&&(k!=null&&k.isValid)?S:void 0;await Qw(o,d,T,pe),I("Cuenta creada exitosamente. Revisa tu email para verificar tu cuenta antes de poder comprar packs premium."),s("login")}else n==="forgot-password"&&(await Yw(o),I("Email de restablecimiento enviado. Revisa tu bandeja de entrada."),s("login"))}catch(pe){ue(pe.message)}finally{re(!1)}},x=async()=>{re(!0),ue("");try{await Xw(),I("Email de verificación reenviado.")}catch(ee){ue(ee.message)}finally{re(!1)}},Fe=()=>{u(""),m(""),y(""),A(""),U(""),Y(null),ue(""),I("")},Ce=async ee=>{if(!ee.trim()){Y(null);return}le(!0);try{const pe="temp-"+Date.now(),D=await fD(ee,pe);Y({isValid:D.isValid,message:D.isValid?`Código válido de ${D.referrerName}`:D.error||"Código no válido"})}catch{Y({isValid:!1,message:"Error al validar código"})}finally{le(!1)}},Q=ee=>{U(ee.toUpperCase()),ee.trim().length>=6?Ce(ee):Y(null)},te=ee=>{s(ee),Fe()};return E.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:E.jsxs(Qn,{className:"w-full max-w-md p-8 space-y-6",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:n==="login"?"Iniciar Sesión":n==="register"?"Crear Cuenta":"Recuperar Contraseña"}),E.jsx("p",{className:"text-white/80",children:n==="login"?"Accede a tu cuenta para comprar packs premium":n==="register"?"Crea una cuenta para acceder a contenido premium":"Ingresa tu email para recuperar tu contraseña"})]}),ge&&E.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:ge}),xe&&E.jsxs("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:[E.jsx("p",{children:xe}),xe.includes("no está verificado")&&E.jsx(He,{onClick:x,disabled:ie,className:"mt-2 bg-green-600 hover:bg-green-700 text-sm",children:"Reenviar verificación"})]}),E.jsxs("form",{onSubmit:P,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Email"}),E.jsx("input",{type:"email",value:o,onChange:ee=>u(ee.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"tu@email.com",required:!0})]}),n!=="forgot-password"&&E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Contraseña"}),E.jsx("input",{type:"password",value:d,onChange:ee=>m(ee.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"••••••••",required:!0,minLength:6})]}),n==="register"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Confirmar Contraseña"}),E.jsx("input",{type:"password",value:p,onChange:ee=>y(ee.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"••••••••",required:!0,minLength:6})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Nombre (opcional)"}),E.jsx("input",{type:"text",value:T,onChange:ee=>A(ee.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"Tu nombre"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Código de Referido (opcional)"}),E.jsx("input",{type:"text",value:S,onChange:ee=>Q(ee.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${k===null?"border-white/20 focus:ring-white/50":k.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ej: ABC123",maxLength:8}),H&&E.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando código..."}),k&&E.jsx("p",{className:`text-sm mt-1 ${k.isValid?"text-green-400":"text-red-400"}`,children:k.message})]})]}),E.jsx(He,{type:"submit",disabled:ie,className:"w-full",children:ie?"Cargando...":n==="login"?"Iniciar Sesión":n==="register"?"Crear Cuenta":"Enviar Email"})]}),n!=="forgot-password"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-white/20"})}),E.jsx("div",{className:"relative flex justify-center text-sm",children:E.jsx("span",{className:"px-2 bg-transparent text-white/60",children:"o"})})]}),E.jsxs(He,{onClick:O,disabled:ie,className:"w-full bg-white text-gray-900 hover:bg-gray-100",children:[E.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[E.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),E.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),E.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),E.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar con Google"]})]}),E.jsxs("div",{className:"text-center space-y-2",children:[n==="login"&&E.jsxs(E.Fragment,{children:[E.jsx("button",{type:"button",onClick:()=>te("forgot-password"),className:"text-white/80 hover:text-white text-sm underline",children:"¿Olvidaste tu contraseña?"}),E.jsxs("div",{children:[E.jsx("span",{className:"text-white/60 text-sm",children:"¿No tienes cuenta? "}),E.jsx("button",{type:"button",onClick:()=>te("register"),className:"text-white hover:text-white/80 text-sm underline",children:"Regístrate"})]})]}),n==="register"&&E.jsxs("div",{children:[E.jsx("span",{className:"text-white/60 text-sm",children:"¿Ya tienes cuenta? "}),E.jsx("button",{type:"button",onClick:()=>te("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Inicia sesión"})]}),n==="forgot-password"&&E.jsx("button",{type:"button",onClick:()=>te("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Volver al inicio de sesión"})]}),E.jsxs("div",{className:"border-t border-white/20 pt-4",children:[E.jsx(He,{onClick:V,disabled:ie,className:"w-full bg-white/10 hover:bg-white/20 text-white border border-white/20",children:"Continuar sin cuenta"}),E.jsx("p",{className:"text-white/60 text-xs text-center mt-2",children:"Podrás jugar pero no comprar packs premium"})]}),E.jsx("div",{className:"text-center",children:E.jsx(He,{onClick:i,className:"text-white/80 hover:text-white bg-transparent",children:"← Volver"})})]})})},pD=()=>{const{user:i}=ed(),[e,n]=oe.useState(it.Setup),[s,o]=oe.useState([]),[u,d]=oe.useState([]),[m,p]=oe.useState([]),[y,T]=oe.useState(0),[A,S]=oe.useState({totalRounds:5}),[U,k]=oe.useState({currentRound:1,playersCompletedInRound:0}),[Y,H]=oe.useState({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),[le,ie]=oe.useState({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),[re,ge]=oe.useState({isLoading:!0,error:null}),[ue,xe]=oe.useState([]),[I,R]=oe.useState(()=>{try{const de=window.localStorage.getItem("purchasedPacks");return de?JSON.parse(de):[]}catch(de){return console.error("Error reading from localStorage",de),[]}}),[C,O]=oe.useState(!1),[V,P]=oe.useState(null),[x,Fe]=oe.useState(!1),[Ce,Q]=oe.useState(null),[te,ee]=oe.useState([]),[pe,D]=oe.useState([]),[Z,ae]=oe.useState({changesCount:0,isAdLoading:!1,isAdPlaying:!1,lastChangedItem:void 0}),[ne,_e]=oe.useState({totalChanges:0,adsWatched:0,lastChangeDate:void 0}),De=oe.useCallback(async de=>{try{const me=await mD(de);D(me)}catch(me){console.error("Error loading referral unlocked packs:",me),D([])}},[]);oe.useEffect(()=>{(async()=>{try{const me=await ib();xe(me)}catch(me){console.error("Error loading available packs:",me)}})()},[]),oe.useEffect(()=>{try{window.localStorage.setItem("purchasedPacks",JSON.stringify(I))}catch(de){console.error("Error writing to localStorage",de)}},[I,pe]);const Te=oe.useCallback(async()=>{ge({isLoading:!0,error:null});try{const de=["base",...I.filter(gt=>gt!=="base"),...pe.filter(gt=>gt!=="base"&&!I.includes(gt))],me=await cD(de);d(me.questions),p(me.dares),ge({isLoading:!1,error:null})}catch(de){console.error("Error loading game data:",de),ge({isLoading:!1,error:de instanceof Error?de.message:"Error desconocido"})}},[I]);oe.useEffect(()=>{Te()},[Te]);const Tt=()=>{if(s.length<2){alert("Se necesitan al menos 2 jugadores para empezar.");return}n(it.PackSelection)},Ze=()=>{n(it.RoundConfiguration)},Dn=()=>{n(it.Setup)},ar=()=>{n(it.Shop)},On=()=>{n(it.Login)},Mr=de=>{n(it.Setup),de!=null&&de.uid&&De(de.uid)},kr=oe.useCallback(async()=>{const de={...ne,totalChanges:ne.totalChanges+1,lastChangeDate:new Date};if(ae(me=>({...me,changesCount:me.changesCount+1})),_e(de),i&&!i.isAnonymous)try{await eE(i.uid,de)}catch(me){console.error("Error saving question change stats:",me)}},[ne,i]),Lr=oe.useCallback(async()=>new Promise((de,me)=>{ae(gt=>({...gt,isAdLoading:!0})),setTimeout(()=>{ae(gt=>({...gt,isAdLoading:!1,isAdPlaying:!0})),setTimeout(()=>{ae(En=>({...En,isAdPlaying:!1,changesCount:0}));const gt={...ne,adsWatched:ne.adsWatched+1};if(_e(gt),i&&!i.isAnonymous)try{eE(i.uid,gt).catch(En=>{console.error("Error saving ad watched stats:",En)})}catch(En){console.error("Error saving ad watched stats:",En)}de()},3e3)},1e3)}),[ne,i]),_s=()=>{n(it.Setup)},la=de=>{const me=ue.find(gt=>gt.id===de);me&&(Q(me),Fe(!0))},fn=()=>{Fe(!1),Q(null)},Po=de=>{ee(me=>me.includes(de)?me:[...me,de])},vs=async()=>{if(Ce)try{const de=await hD(Ce.id);if(de.questions.length===0&&de.dares.length===0){alert("Este pack no tiene contenido demo disponible.");return}O(!0),P(Ce.id),d(de.questions),p(de.dares),await dD(Ce.id),n(it.RoundConfiguration)}catch(de){console.error("Error starting demo:",de),alert("Error al cargar el demo. Inténtalo de nuevo.")}},Ti=de=>{S(de),H({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:new Date,gameEndTime:null,roundStats:[]}),ie({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),k({currentRound:1,playersCompletedInRound:0}),n(it.Game)},Ur=()=>{const de=(y+1)%s.length;if(T(de),de===0){const me=U.currentRound+1;me>A.totalRounds?bi():(k({currentRound:me,playersCompletedInRound:0}),ie({roundNumber:me,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}))}else k(me=>({...me,playersCompletedInRound:me.playersCompletedInRound+1}))},Vo=()=>{const de={...le,roundEndTime:new Date};H(me=>({...me,totalRounds:me.totalRounds+1,roundStats:[...me.roundStats,de]})),n(it.RoundEnd)},wi=()=>{const de=U.currentRound+1;k({currentRound:de,playersCompletedInRound:0}),ie({roundNumber:de,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),T(0),n(it.Game)},bi=()=>{H(de=>({...de,gameEndTime:new Date})),n(it.GameEnd)},ua=()=>{const de=s[y];ie(me=>({...me,questionsAsked:me.questionsAsked+1,playersParticipated:me.playersParticipated.includes(de)?me.playersParticipated:[...me.playersParticipated,de]})),H(me=>({...me,totalQuestions:me.totalQuestions+1}))},lt=()=>{const de=s[y];ie(me=>({...me,daresCompleted:me.daresCompleted+1,playersParticipated:me.playersParticipated.includes(de)?me.playersParticipated:[...me.playersParticipated,de]})),H(me=>({...me,totalDares:me.totalDares+1}))},Ge=oe.useCallback(()=>{n(it.Setup),o([]),T(0),S({totalRounds:5}),k({currentRound:1,playersCompletedInRound:0}),H({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),ie({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),O(!1),P(null),Fe(!1),Q(null),ee([])},[]),ln=de=>{I.includes(de)||R([...I,de])},kt=()=>I.includes("no-ads"),ca=()=>{switch(e){case it.Setup:return E.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-900 bg-opacity-50 backdrop-blur-sm",children:E.jsxs("div",{className:"w-full max-w-md mx-auto animate-fade-in",children:[E.jsx("h1",{className:"text-5xl font-extrabold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Verdad o Reto"}),E.jsx("p",{className:"text-center text-gray-400 mb-8",children:"El juego para animar la fiesta"}),E.jsxs("div",{className:"space-y-6",children:[E.jsx(QA,{players:s,setPlayers:o}),re.isLoading&&E.jsx(Qn,{className:"text-center text-gray-400",children:E.jsx("p",{children:"Cargando datos desde Firebase..."})}),re.error&&E.jsxs(Qn,{className:"text-center text-red-400",children:[E.jsxs("p",{children:["Error de conexión: ",re.error]}),E.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Verifica tu configuración de Firebase"}),E.jsx(He,{onClick:Te,className:"mt-4",variant:"secondary",children:"Reintentar"})]}),!re.isLoading&&!re.error&&E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsx(He,{onClick:Tt,className:"w-full text-lg",disabled:s.length<2||u.length===0||m.length===0,children:"Empezar a Jugar"}),E.jsxs(He,{onClick:()=>n(it.Shop),variant:"secondary",className:"w-full text-lg flex items-center justify-center gap-2",children:[E.jsx(nE,{className:"w-6 h-6"}),"Tienda de Paquetes"]}),E.jsx(He,{onClick:On,variant:"secondary",className:"w-full text-lg",children:"Iniciar Sesión"})]})]})]})});case it.Login:return E.jsx(gD,{onBack:_s,onSuccess:Mr});case it.Shop:return E.jsx(sD,{availablePacks:ue,purchasedPacks:I,onPurchase:ln,onBack:()=>n(it.Setup),onGoToLogin:On});case it.PackSelection:return E.jsxs(E.Fragment,{children:[E.jsx(KA,{availablePacks:ue,purchasedPacks:I,adWatchedPacks:te,referralUnlockedPacks:pe,onContinue:Ze,onBack:Dn,onGoToShop:ar,onPlayDemo:la}),E.jsx(aS,{pack:Ce,isOpen:x,onClose:fn,onStartDemo:vs,onAdWatched:Po})]});case it.RoundConfiguration:return E.jsx(lS,{onSelectRounds:de=>{Ti({totalRounds:de})},onBack:()=>n(it.PackSelection)});case it.Game:return E.jsx(oS,{players:s,currentPlayerIndex:y,onNextPlayer:Ur,onNewGame:Ge,questions:u,dares:m,roundConfig:A,gameProgress:U,onRoundEnd:Vo,onQuestionAsked:ua,onDareCompleted:lt,onQuestionChange:kr,onAdRequired:Lr,questionChangeState:Z});case it.RoundEnd:return E.jsx(uS,{roundStats:le,currentRound:U.currentRound,totalRounds:A.totalRounds,onContinue:wi,onEndGame:bi,hasNoAds:kt()});case it.GameEnd:return E.jsx(cS,{gameStats:Y,players:s,onNewGame:Ge,onBackToMenu:()=>n(it.Setup),isDemoMode:C,demoPackId:V});default:return E.jsx("div",{children:"Error: Estado de juego desconocido."})}};return E.jsxs("main",{className:"relative min-h-screen bg-gray-900 overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-purple-900/30 via-transparent to-pink-900/30"}),E.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-96 h-96 bg-purple-600 rounded-full filter blur-3xl opacity-20 animate-blob"}),E.jsx("div",{className:"absolute bottom-[-10%] right-[5%] w-96 h-96 bg-pink-600 rounded-full filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),E.jsx("div",{className:"absolute top-[10%] right-[-15%] w-80 h-80 bg-cyan-600 rounded-full filter blur-3xl opacity-10 animate-blob animation-delay-4000"}),E.jsx("div",{className:"relative z-10",children:ca()}),E.jsx("style",{children:`
          .animate-blob {
            animation: blob 7s infinite;
          }
          .animation-delay-2000 {
            animation-delay: 2s;
          }
          .animation-delay-4000 {
            animation-delay: 4s;
          }
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
          }
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `})]})},sb=document.getElementById("root");if(!sb)throw new Error("Could not find root element to mount to");const yD=qA.createRoot(sb);yD.render(E.jsx(PA.StrictMode,{children:E.jsx(V2,{children:E.jsx(pD,{})})}));export{Ev as A,aE as W};
