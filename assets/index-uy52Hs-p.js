(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function xE(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var mm={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function oS(){if(xv)return Ql;xv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:s,type:i,key:h,ref:o!==void 0?o:null,props:c}}return Ql.Fragment=e,Ql.jsx=n,Ql.jsxs=n,Ql}var Rv;function lS(){return Rv||(Rv=1,mm.exports=oS()),mm.exports}var p=lS(),gm={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function cS(){if(Iv)return Me;Iv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,G={};function B(O,Z,le){this.props=O,this.context=Z,this.refs=G,this.updater=le||N}B.prototype.isReactComponent={},B.prototype.setState=function(O,Z){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Z,"setState")},B.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ae(){}ae.prototype=B.prototype;function re(O,Z,le){this.props=O,this.context=Z,this.refs=G,this.updater=le||N}var se=re.prototype=new ae;se.constructor=re,j(se,B.prototype),se.isPureReactComponent=!0;var ge=Array.isArray,ue={H:null,A:null,T:null,S:null,V:null},W=Object.prototype.hasOwnProperty;function C(O,Z,le,oe,_e,Ce){return le=Ce.ref,{$$typeof:s,type:O,key:Z,ref:le!==void 0?le:null,props:Ce}}function x(O,Z){return C(O.type,Z,void 0,void 0,void 0,O.props)}function I(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function P(O){var Z={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(le){return Z[le]})}var M=/\/+/g;function k(O,Z){return typeof O=="object"&&O!==null&&O.key!=null?P(""+O.key):Z.toString(36)}function R(){}function Ie(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(R,R):(O.status="pending",O.then(function(Z){O.status==="pending"&&(O.status="fulfilled",O.value=Z)},function(Z){O.status==="pending"&&(O.status="rejected",O.reason=Z)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Oe(O,Z,le,oe,_e){var Ce=typeof O;(Ce==="undefined"||Ce==="boolean")&&(O=null);var Ae=!1;if(O===null)Ae=!0;else switch(Ce){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(O.$$typeof){case s:case e:Ae=!0;break;case w:return Ae=O._init,Oe(Ae(O._payload),Z,le,oe,_e)}}if(Ae)return _e=_e(O),Ae=oe===""?"."+k(O,0):oe,ge(_e)?(le="",Ae!=null&&(le=Ae.replace(M,"$&/")+"/"),Oe(_e,Z,le,"",function(zn){return zn})):_e!=null&&(I(_e)&&(_e=x(_e,le+(_e.key==null||O&&O.key===_e.key?"":(""+_e.key).replace(M,"$&/")+"/")+Ae)),Z.push(_e)),1;Ae=0;var It=oe===""?".":oe+":";if(ge(O))for(var rt=0;rt<O.length;rt++)oe=O[rt],Ce=It+k(oe,rt),Ae+=Oe(oe,Z,le,Ce,_e);else if(rt=S(O),typeof rt=="function")for(O=rt.call(O),rt=0;!(oe=O.next()).done;)oe=oe.value,Ce=It+k(oe,rt++),Ae+=Oe(oe,Z,le,Ce,_e);else if(Ce==="object"){if(typeof O.then=="function")return Oe(Ie(O),Z,le,oe,_e);throw Z=String(O),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function Q(O,Z,le){if(O==null)return O;var oe=[],_e=0;return Oe(O,oe,"","",function(Ce){return Z.call(le,Ce,_e++)}),oe}function ie(O){if(O._status===-1){var Z=O._result;Z=Z(),Z.then(function(le){(O._status===0||O._status===-1)&&(O._status=1,O._result=le)},function(le){(O._status===0||O._status===-1)&&(O._status=2,O._result=le)}),O._status===-1&&(O._status=0,O._result=Z)}if(O._status===1)return O._result.default;throw O._result}var Y=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function pe(){}return Me.Children={map:Q,forEach:function(O,Z,le){Q(O,function(){Z.apply(this,arguments)},le)},count:function(O){var Z=0;return Q(O,function(){Z++}),Z},toArray:function(O){return Q(O,function(Z){return Z})||[]},only:function(O){if(!I(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Me.Component=B,Me.Fragment=n,Me.Profiler=o,Me.PureComponent=re,Me.StrictMode=i,Me.Suspense=g,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,Me.__COMPILER_RUNTIME={__proto__:null,c:function(O){return ue.H.useMemoCache(O)}},Me.cache=function(O){return function(){return O.apply(null,arguments)}},Me.cloneElement=function(O,Z,le){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var oe=j({},O.props),_e=O.key,Ce=void 0;if(Z!=null)for(Ae in Z.ref!==void 0&&(Ce=void 0),Z.key!==void 0&&(_e=""+Z.key),Z)!W.call(Z,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&Z.ref===void 0||(oe[Ae]=Z[Ae]);var Ae=arguments.length-2;if(Ae===1)oe.children=le;else if(1<Ae){for(var It=Array(Ae),rt=0;rt<Ae;rt++)It[rt]=arguments[rt+2];oe.children=It}return C(O.type,_e,void 0,void 0,Ce,oe)},Me.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},Me.createElement=function(O,Z,le){var oe,_e={},Ce=null;if(Z!=null)for(oe in Z.key!==void 0&&(Ce=""+Z.key),Z)W.call(Z,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(_e[oe]=Z[oe]);var Ae=arguments.length-2;if(Ae===1)_e.children=le;else if(1<Ae){for(var It=Array(Ae),rt=0;rt<Ae;rt++)It[rt]=arguments[rt+2];_e.children=It}if(O&&O.defaultProps)for(oe in Ae=O.defaultProps,Ae)_e[oe]===void 0&&(_e[oe]=Ae[oe]);return C(O,Ce,void 0,void 0,null,_e)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(O){return{$$typeof:m,render:O}},Me.isValidElement=I,Me.lazy=function(O){return{$$typeof:w,_payload:{_status:-1,_result:O},_init:ie}},Me.memo=function(O,Z){return{$$typeof:_,type:O,compare:Z===void 0?null:Z}},Me.startTransition=function(O){var Z=ue.T,le={};ue.T=le;try{var oe=O(),_e=ue.S;_e!==null&&_e(le,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(pe,Y)}catch(Ce){Y(Ce)}finally{ue.T=Z}},Me.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},Me.use=function(O){return ue.H.use(O)},Me.useActionState=function(O,Z,le){return ue.H.useActionState(O,Z,le)},Me.useCallback=function(O,Z){return ue.H.useCallback(O,Z)},Me.useContext=function(O){return ue.H.useContext(O)},Me.useDebugValue=function(){},Me.useDeferredValue=function(O,Z){return ue.H.useDeferredValue(O,Z)},Me.useEffect=function(O,Z,le){var oe=ue.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(O,Z)},Me.useId=function(){return ue.H.useId()},Me.useImperativeHandle=function(O,Z,le){return ue.H.useImperativeHandle(O,Z,le)},Me.useInsertionEffect=function(O,Z){return ue.H.useInsertionEffect(O,Z)},Me.useLayoutEffect=function(O,Z){return ue.H.useLayoutEffect(O,Z)},Me.useMemo=function(O,Z){return ue.H.useMemo(O,Z)},Me.useOptimistic=function(O,Z){return ue.H.useOptimistic(O,Z)},Me.useReducer=function(O,Z,le){return ue.H.useReducer(O,Z,le)},Me.useRef=function(O){return ue.H.useRef(O)},Me.useState=function(O){return ue.H.useState(O)},Me.useSyncExternalStore=function(O,Z,le){return ue.H.useSyncExternalStore(O,Z,le)},Me.useTransition=function(){return ue.H.useTransition()},Me.version="19.1.1",Me}var Nv;function lg(){return Nv||(Nv=1,gm.exports=cS()),gm.exports}var te=lg();const uS=xE(te);var pm={exports:{}},Kl={},ym={exports:{}},_m={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function dS(){return Cv||(Cv=1,(function(s){function e(Q,ie){var Y=Q.length;Q.push(ie);e:for(;0<Y;){var pe=Y-1>>>1,O=Q[pe];if(0<o(O,ie))Q[pe]=ie,Q[Y]=O,Y=pe;else break e}}function n(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var ie=Q[0],Y=Q.pop();if(Y!==ie){Q[0]=Y;e:for(var pe=0,O=Q.length,Z=O>>>1;pe<Z;){var le=2*(pe+1)-1,oe=Q[le],_e=le+1,Ce=Q[_e];if(0>o(oe,Y))_e<O&&0>o(Ce,oe)?(Q[pe]=Ce,Q[_e]=Y,pe=_e):(Q[pe]=oe,Q[le]=Y,pe=le);else if(_e<O&&0>o(Ce,Y))Q[pe]=Ce,Q[_e]=Y,pe=_e;else break e}}return ie}function o(Q,ie){var Y=Q.sortIndex-ie.sortIndex;return Y!==0?Y:Q.id-ie.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],_=[],w=1,b=null,S=3,N=!1,j=!1,G=!1,B=!1,ae=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function ge(Q){for(var ie=n(_);ie!==null;){if(ie.callback===null)i(_);else if(ie.startTime<=Q)i(_),ie.sortIndex=ie.expirationTime,e(g,ie);else break;ie=n(_)}}function ue(Q){if(G=!1,ge(Q),!j)if(n(g)!==null)j=!0,W||(W=!0,k());else{var ie=n(_);ie!==null&&Oe(ue,ie.startTime-Q)}}var W=!1,C=-1,x=5,I=-1;function P(){return B?!0:!(s.unstable_now()-I<x)}function M(){if(B=!1,W){var Q=s.unstable_now();I=Q;var ie=!0;try{e:{j=!1,G&&(G=!1,re(C),C=-1),N=!0;var Y=S;try{t:{for(ge(Q),b=n(g);b!==null&&!(b.expirationTime>Q&&P());){var pe=b.callback;if(typeof pe=="function"){b.callback=null,S=b.priorityLevel;var O=pe(b.expirationTime<=Q);if(Q=s.unstable_now(),typeof O=="function"){b.callback=O,ge(Q),ie=!0;break t}b===n(g)&&i(g),ge(Q)}else i(g);b=n(g)}if(b!==null)ie=!0;else{var Z=n(_);Z!==null&&Oe(ue,Z.startTime-Q),ie=!1}}break e}finally{b=null,S=Y,N=!1}ie=void 0}}finally{ie?k():W=!1}}}var k;if(typeof se=="function")k=function(){se(M)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Ie=R.port2;R.port1.onmessage=M,k=function(){Ie.postMessage(null)}}else k=function(){ae(M,0)};function Oe(Q,ie){C=ae(function(){Q(s.unstable_now())},ie)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Q){Q.callback=null},s.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<Q?Math.floor(1e3/Q):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var ie=3;break;default:ie=S}var Y=S;S=ie;try{return Q()}finally{S=Y}},s.unstable_requestPaint=function(){B=!0},s.unstable_runWithPriority=function(Q,ie){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Y=S;S=Q;try{return ie()}finally{S=Y}},s.unstable_scheduleCallback=function(Q,ie,Y){var pe=s.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?pe+Y:pe):Y=pe,Q){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Y+O,Q={id:w++,callback:ie,priorityLevel:Q,startTime:Y,expirationTime:O,sortIndex:-1},Y>pe?(Q.sortIndex=Y,e(_,Q),n(g)===null&&Q===n(_)&&(G?(re(C),C=-1):G=!0,Oe(ue,Y-pe))):(Q.sortIndex=O,e(g,Q),j||N||(j=!0,W||(W=!0,k()))),Q},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(Q){var ie=S;return function(){var Y=S;S=ie;try{return Q.apply(this,arguments)}finally{S=Y}}}})(_m)),_m}var Dv;function hS(){return Dv||(Dv=1,ym.exports=dS()),ym.exports}var vm={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function fS(){if(Ov)return on;Ov=1;var s=lg();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)_+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,_,w){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:_,implementation:w}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,on.createPortal=function(g,_){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(g,_,null,w)},on.flushSync=function(g){var _=h.T,w=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=_,i.p=w,i.d.f()}},on.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,i.d.C(g,_))},on.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},on.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var w=_.as,b=m(w,_.crossOrigin),S=typeof _.integrity=="string"?_.integrity:void 0,N=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;w==="style"?i.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:N}):w==="script"&&i.d.X(g,{crossOrigin:b,integrity:S,fetchPriority:N,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},on.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var w=m(_.as,_.crossOrigin);i.d.M(g,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&i.d.M(g)},on.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var w=_.as,b=m(w,_.crossOrigin);i.d.L(g,w,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},on.preloadModule=function(g,_){if(typeof g=="string")if(_){var w=m(_.as,_.crossOrigin);i.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else i.d.m(g)},on.requestFormReset=function(g){i.d.r(g)},on.unstable_batchedUpdates=function(g,_){return g(_)},on.useFormState=function(g,_,w){return h.H.useFormState(g,_,w)},on.useFormStatus=function(){return h.H.useHostTransitionStatus()},on.version="19.1.1",on}var Pv;function mS(){if(Pv)return vm.exports;Pv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),vm.exports=fS(),vm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function gS(){if(Mv)return Kl;Mv=1;var s=hS(),e=lg(),n=mS();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(i(188))}function g(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(i(188));return r!==t?null:t}for(var a=t,l=r;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return m(d),t;if(f===l)return m(d),r;f=f.sibling}throw Error(i(188))}if(a.return!==l.return)a=d,l=f;else{for(var E=!1,T=d.child;T;){if(T===a){E=!0,a=d,l=f;break}if(T===l){E=!0,l=d,a=f;break}T=T.sibling}if(!E){for(T=f.child;T;){if(T===a){E=!0,a=f,l=d;break}if(T===l){E=!0,l=f,a=d;break}T=T.sibling}if(!E)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:r}function _(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=_(t),r!==null)return r;t=t.sibling}return null}var w=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),ae=Symbol.for("react.provider"),re=Symbol.for("react.consumer"),se=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function Ie(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case j:return"Fragment";case B:return"Profiler";case G:return"StrictMode";case ue:return"Suspense";case W:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case se:return(t.displayName||"Context")+".Provider";case re:return(t._context.displayName||"Context")+".Consumer";case ge:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return r=t.displayName||null,r!==null?r:Ie(t.type)||"Memo";case x:r=t._payload,t=t._init;try{return Ie(t(r))}catch{}}return null}var Oe=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},pe=[],O=-1;function Z(t){return{current:t}}function le(t){0>O||(t.current=pe[O],pe[O]=null,O--)}function oe(t,r){O++,pe[O]=t.current,t.current=r}var _e=Z(null),Ce=Z(null),Ae=Z(null),It=Z(null);function rt(t,r){switch(oe(Ae,r),oe(Ce,t),oe(_e,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?ev(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=ev(r),t=tv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}le(_e),oe(_e,t)}function zn(){le(_e),le(Ce),le(Ae)}function nr(t){t.memoizedState!==null&&oe(It,t);var r=_e.current,a=tv(r,t.type);r!==a&&(oe(Ce,t),oe(_e,a))}function gr(t){Ce.current===t&&(le(_e),le(Ce)),It.current===t&&(le(It),ql._currentValue=Y)}var Os=Object.prototype.hasOwnProperty,pr=s.unstable_scheduleCallback,yr=s.unstable_cancelCallback,Fr=s.unstable_shouldYield,wa=s.unstable_requestPaint,wn=s.unstable_now,Ho=s.unstable_getCurrentPriorityLevel,Ni=s.unstable_ImmediatePriority,Gr=s.unstable_UserBlockingPriority,Qr=s.unstable_NormalPriority,Fo=s.unstable_LowPriority,Ps=s.unstable_IdlePriority,Ci=s.log,Ta=s.unstable_setDisableYieldValue,ht=null,$e=null;function mn(t){if(typeof Ci=="function"&&Ta(t),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(ht,t)}catch{}}var Bt=Math.clz32?Math.clz32:Kr,ba=Math.log,Go=Math.LN2;function Kr(t){return t>>>=0,t===0?32:31-(ba(t)/Go|0)|0}var _r=256,Yr=4194304;function In(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Xr(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,f=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?d=In(l):(E&=T,E!==0?d=In(E):a||(a=T&~t,a!==0&&(d=In(a))))):(T=l&~f,T!==0?d=In(T):E!==0?d=In(E):a||(a=l&~t,a!==0&&(d=In(a)))),d===0?0:r!==0&&r!==d&&(r&f)===0&&(f=d&-d,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:d}function $r(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Wr(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Di(){var t=_r;return _r<<=1,(_r&4194048)===0&&(_r=256),t}function Oi(){var t=Yr;return Yr<<=1,(Yr&62914560)===0&&(Yr=4194304),t}function rr(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function sr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Pi(t,r,a,l,d,f){var E=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,D=t.expirationTimes,q=t.hiddenUpdates;for(a=E&~a;0<a;){var $=31-Bt(a),ee=1<<$;T[$]=0,D[$]=-1;var H=q[$];if(H!==null)for(q[$]=null,$=0;$<H.length;$++){var F=H[$];F!==null&&(F.lane&=-536870913)}a&=~ee}l!==0&&qn(t,l,0),f!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=f&~(E&~r))}function qn(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Bt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function he(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Bt(a),d=1<<l;d&r|t[l]&r&&(t[l]|=r),a&=~d}}function fe(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ct(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function sn(){var t=ie.p;return t!==0?t:(t=window.event,t===void 0?32:Ev(t.type))}function Uc(t,r){var a=ie.p;try{return ie.p=t,r()}finally{ie.p=a}}var ft=Math.random().toString(36).slice(2),kt="__reactFiber$"+ft,Nt="__reactProps$"+ft,Bn="__reactContainer$"+ft,Qo="__reactEvents$"+ft,ph="__reactListeners$"+ft,Ms="__reactHandles$"+ft,zc="__reactResources$"+ft,Mi="__reactMarker$"+ft;function Vs(t){delete t[kt],delete t[Nt],delete t[Qo],delete t[ph],delete t[Ms]}function Zr(t){var r=t[kt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Bn]||a[kt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=iv(t);t!==null;){if(a=t[kt])return a;t=iv(t)}return r}t=a,a=t.parentNode}return null}function vr(t){if(t=t[kt]||t[Bn]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Er(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function gn(t){var r=t[zc];return r||(r=t[zc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function At(t){t[Mi]=!0}var Ko=new Set,Aa={};function ir(t,r){Jr(t,r),Jr(t+"Capture",r)}function Jr(t,r){for(Aa[t]=r,t=0;t<r.length;t++)Ko.add(r[t])}var qc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bc={},Vi={};function Hc(t){return Os.call(Vi,t)?!0:Os.call(Bc,t)?!1:qc.test(t)?Vi[t]=!0:(Bc[t]=!0,!1)}function ks(t,r,a){if(Hc(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function wr(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function $t(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var ki,Fc;function es(t){if(ki===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);ki=r&&r[1]||"",Fc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ki+t+Fc}var Sa=!1;function xa(t,r){if(!t||Sa)return"";Sa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(F){var H=F}Reflect.construct(t,[],ee)}else{try{ee.call()}catch(F){H=F}t.call(ee.prototype)}}else{try{throw Error()}catch(F){H=F}(ee=t())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(F){if(F&&H&&typeof F.stack=="string")return[F.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),E=f[0],T=f[1];if(E&&T){var D=E.split(`
`),q=T.split(`
`);for(d=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;if(l===D.length||d===q.length)for(l=D.length-1,d=q.length-1;1<=l&&0<=d&&D[l]!==q[d];)d--;for(;1<=l&&0<=d;l--,d--)if(D[l]!==q[d]){if(l!==1||d!==1)do if(l--,d--,0>d||D[l]!==q[d]){var $=`
`+D[l].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=l&&0<=d);break}}}finally{Sa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?es(a):""}function Yo(t){switch(t.tag){case 26:case 27:case 5:return es(t.type);case 16:return es("Lazy");case 13:return es("Suspense");case 19:return es("SuspenseList");case 0:case 15:return xa(t.type,!1);case 11:return xa(t.type.render,!1);case 1:return xa(t.type,!0);case 31:return es("Activity");default:return""}}function Ra(t){try{var r="";do r+=Yo(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function pn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function yh(t){var r=Xo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return d.call(this)},set:function(E){l=""+E,f.call(this,E)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ia(t){t._valueTracker||(t._valueTracker=yh(t))}function $o(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Xo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function ji(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var _h=/[\n"\\]/g;function Ct(t){return t.replace(_h,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Nn(t,r,a,l,d,f,E,T){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),r!=null?E==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+pn(r)):t.value!==""+pn(r)&&(t.value=""+pn(r)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),r!=null?js(t,E,pn(r)):a!=null?js(t,E,pn(a)):l!=null&&t.removeAttribute("value"),d==null&&f!=null&&(t.defaultChecked=!!f),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+pn(T):t.removeAttribute("name")}function Li(t,r,a,l,d,f,E,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null))return;a=a!=null?""+pn(a):"",r=r!=null?""+pn(r):a,T||r===t.value||(t.value=r),t.defaultValue=r}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function js(t,r,a){r==="number"&&ji(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ts(t,r,a,l){if(t=t.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=r.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+pn(a),r=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}r!==null||t[d].disabled||(r=t[d])}r!==null&&(r.selected=!0)}}function st(t,r,a){if(r!=null&&(r=""+pn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+pn(a):""}function Ui(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(Oe(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=pn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Hn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var zi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gc(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||zi.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Wo(t,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in r)l=r[d],r.hasOwnProperty(d)&&a[d]!==l&&Gc(t,d,l)}else for(var f in r)r.hasOwnProperty(f)&&Gc(t,f,r[f])}function Zo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Eh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(t){return Eh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var ns=null;function Fn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rs=null,ss=null;function Jo(t){var r=vr(t);if(r&&(t=r.stateNode)){var a=t[Nt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Nn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ct(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var d=l[Nt]||null;if(!d)throw Error(i(90));Nn(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&$o(l)}break e;case"textarea":st(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ts(t,!!a.multiple,r,!1)}}}var Tr=!1;function Qc(t,r,a){if(Tr)return t(r,a);Tr=!0;try{var l=t(r);return l}finally{if(Tr=!1,(rs!==null||ss!==null)&&(Uu(),rs&&(r=rs,t=ss,ss=rs=null,Jo(r),t)))for(r=0;r<t.length;r++)Jo(t[r])}}function qi(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Nt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gn=!1;if(ar)try{var Bi={};Object.defineProperty(Bi,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",Bi,Bi),window.removeEventListener("test",Bi,Bi)}catch{Gn=!1}var br=null,Ls=null,is=null;function el(){if(is)return is;var t,r=Ls,a=r.length,l,d="value"in br?br.value:br.textContent,f=d.length;for(t=0;t<a&&r[t]===d[t];t++);var E=a-t;for(l=1;l<=E&&r[a-l]===d[f-l];l++);return is=d.slice(t,1<l?1-l:void 0)}function Ar(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Sr(){return!0}function tl(){return!1}function Ht(t){function r(a,l,d,f,E){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Sr:tl,this.isPropagationStopped=tl,this}return w(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Sr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Sr)},persist:function(){},isPersistent:Sr}),r}var Je={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=Ht(Je),Hi=w({},Je,{view:0,detail:0}),Kc=Ht(Hi),Da,Oa,xr,Fi=w({},Hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ki,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xr&&(xr&&t.type==="mousemove"?(Da=t.screenX-xr.screenX,Oa=t.screenY-xr.screenY):Oa=Da=0,xr=t),Da)},movementY:function(t){return"movementY"in t?t.movementY:Oa}}),Qn=Ht(Fi),Yc=w({},Fi,{dataTransfer:0}),wh=Ht(Yc),Gi=w({},Hi,{relatedTarget:0}),Pa=Ht(Gi),nl=w({},Je,{animationName:0,elapsedTime:0,pseudoElement:0}),Ma=Ht(nl),Xc=w({},Je,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Va=Ht(Xc),Th=w({},Je,{data:0}),rl=Ht(Th),Qi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$c={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sl(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Wc[t])?!!r[t]:!1}function Ki(){return sl}var Zc=w({},Hi,{key:function(t){if(t.key){var r=Qi[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ar(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$c[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ki,charCode:function(t){return t.type==="keypress"?Ar(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ar(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ka=Ht(Zc),Jc=w({},Fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),il=Ht(Jc),as=w({},Hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ki}),eu=Ht(as),tu=w({},Je,{propertyName:0,elapsedTime:0,pseudoElement:0}),nu=Ht(tu),ru=w({},Fi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ja=Ht(ru),yn=w({},Je,{newState:0,oldState:0}),su=Ht(yn),iu=[9,13,27,32],Rr=ar&&"CompositionEvent"in window,u=null;ar&&"documentMode"in document&&(u=document.documentMode);var y=ar&&"TextEvent"in window&&!u,v=ar&&(!Rr||u&&8<u&&11>=u),A=" ",U=!1;function K(t,r){switch(t){case"keyup":return iu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Be=!1;function jt(t,r){switch(t){case"compositionend":return ce(r);case"keypress":return r.which!==32?null:(U=!0,A);case"textInput":return t=r.data,t===A&&U?null:t;default:return null}}function He(t,r){if(Be)return t==="compositionend"||!Rr&&K(t,r)?(t=el(),is=Ls=br=null,Be=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var Ft={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Ft[t.type]:r==="textarea"}function os(t,r,a,l){rs?ss?ss.push(l):ss=[l]:rs=l,r=Gu(r,"onChange"),0<r.length&&(a=new Ca("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Wt=null,Ir=null;function al(t){X_(t,0)}function au(t){var r=Er(t);if($o(r))return t}function pp(t,r){if(t==="change")return r}var yp=!1;if(ar){var bh;if(ar){var Ah="oninput"in document;if(!Ah){var _p=document.createElement("div");_p.setAttribute("oninput","return;"),Ah=typeof _p.oninput=="function"}bh=Ah}else bh=!1;yp=bh&&(!document.documentMode||9<document.documentMode)}function vp(){Wt&&(Wt.detachEvent("onpropertychange",Ep),Ir=Wt=null)}function Ep(t){if(t.propertyName==="value"&&au(Ir)){var r=[];os(r,Ir,t,Fn(t)),Qc(al,r)}}function jb(t,r,a){t==="focusin"?(vp(),Wt=r,Ir=a,Wt.attachEvent("onpropertychange",Ep)):t==="focusout"&&vp()}function Lb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return au(Ir)}function Ub(t,r){if(t==="click")return au(r)}function zb(t,r){if(t==="input"||t==="change")return au(r)}function qb(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Cn=typeof Object.is=="function"?Object.is:qb;function ol(t,r){if(Cn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Os.call(r,d)||!Cn(t[d],r[d]))return!1}return!0}function wp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tp(t,r){var a=wp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=wp(a)}}function bp(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?bp(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ap(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=ji(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=ji(t.document)}return r}function Sh(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Bb=ar&&"documentMode"in document&&11>=document.documentMode,La=null,xh=null,ll=null,Rh=!1;function Sp(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Rh||La==null||La!==ji(l)||(l=La,"selectionStart"in l&&Sh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ll&&ol(ll,l)||(ll=l,l=Gu(xh,"onSelect"),0<l.length&&(r=new Ca("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=La)))}function Yi(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Ua={animationend:Yi("Animation","AnimationEnd"),animationiteration:Yi("Animation","AnimationIteration"),animationstart:Yi("Animation","AnimationStart"),transitionrun:Yi("Transition","TransitionRun"),transitionstart:Yi("Transition","TransitionStart"),transitioncancel:Yi("Transition","TransitionCancel"),transitionend:Yi("Transition","TransitionEnd")},Ih={},xp={};ar&&(xp=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function Xi(t){if(Ih[t])return Ih[t];if(!Ua[t])return t;var r=Ua[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in xp)return Ih[t]=r[a];return t}var Rp=Xi("animationend"),Ip=Xi("animationiteration"),Np=Xi("animationstart"),Hb=Xi("transitionrun"),Fb=Xi("transitionstart"),Gb=Xi("transitioncancel"),Cp=Xi("transitionend"),Dp=new Map,Nh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nh.push("scrollEnd");function or(t,r){Dp.set(t,r),ir(r,[t])}var Op=new WeakMap;function Kn(t,r){if(typeof t=="object"&&t!==null){var a=Op.get(t);return a!==void 0?a:(r={value:t,source:r,stack:Ra(r)},Op.set(t,r),r)}return{value:t,source:r,stack:Ra(r)}}var Yn=[],za=0,Ch=0;function ou(){for(var t=za,r=Ch=za=0;r<t;){var a=Yn[r];Yn[r++]=null;var l=Yn[r];Yn[r++]=null;var d=Yn[r];Yn[r++]=null;var f=Yn[r];if(Yn[r++]=null,l!==null&&d!==null){var E=l.pending;E===null?d.next=d:(d.next=E.next,E.next=d),l.pending=d}f!==0&&Pp(a,d,f)}}function lu(t,r,a,l){Yn[za++]=t,Yn[za++]=r,Yn[za++]=a,Yn[za++]=l,Ch|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Dh(t,r,a,l){return lu(t,r,a,l),cu(t)}function qa(t,r){return lu(t,null,null,r),cu(t)}function Pp(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(d=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,d&&r!==null&&(d=31-Bt(a),t=f.hiddenUpdates,l=t[d],l===null?t[d]=[r]:l.push(r),r.lane=a|536870912),f):null}function cu(t){if(50<Pl)throw Pl=0,Lf=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ba={};function Qb(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,r,a,l){return new Qb(t,r,a,l)}function Oh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ls(t,r){var a=t.alternate;return a===null?(a=Dn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Mp(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function uu(t,r,a,l,d,f){var E=0;if(l=t,typeof t=="function")Oh(t)&&(E=1);else if(typeof t=="string")E=YA(t,a,_e.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=Dn(31,a,r,d),t.elementType=I,t.lanes=f,t;case j:return $i(a.children,d,f,r);case G:E=8,d|=24;break;case B:return t=Dn(12,a,r,d|2),t.elementType=B,t.lanes=f,t;case ue:return t=Dn(13,a,r,d),t.elementType=ue,t.lanes=f,t;case W:return t=Dn(19,a,r,d),t.elementType=W,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ae:case se:E=10;break e;case re:E=9;break e;case ge:E=11;break e;case C:E=14;break e;case x:E=16,l=null;break e}E=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return r=Dn(E,a,r,d),r.elementType=t,r.type=l,r.lanes=f,r}function $i(t,r,a,l){return t=Dn(7,t,l,r),t.lanes=a,t}function Ph(t,r,a){return t=Dn(6,t,null,r),t.lanes=a,t}function Mh(t,r,a){return r=Dn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ha=[],Fa=0,du=null,hu=0,Xn=[],$n=0,Wi=null,cs=1,us="";function Zi(t,r){Ha[Fa++]=hu,Ha[Fa++]=du,du=t,hu=r}function Vp(t,r,a){Xn[$n++]=cs,Xn[$n++]=us,Xn[$n++]=Wi,Wi=t;var l=cs;t=us;var d=32-Bt(l)-1;l&=~(1<<d),a+=1;var f=32-Bt(r)+d;if(30<f){var E=d-d%5;f=(l&(1<<E)-1).toString(32),l>>=E,d-=E,cs=1<<32-Bt(r)+d|a<<d|l,us=f+t}else cs=1<<f|a<<d|l,us=t}function Vh(t){t.return!==null&&(Zi(t,1),Vp(t,1,0))}function kh(t){for(;t===du;)du=Ha[--Fa],Ha[Fa]=null,hu=Ha[--Fa],Ha[Fa]=null;for(;t===Wi;)Wi=Xn[--$n],Xn[$n]=null,us=Xn[--$n],Xn[$n]=null,cs=Xn[--$n],Xn[$n]=null}var _n=null,vt=null,We=!1,Ji=null,Nr=!1,jh=Error(i(519));function ea(t){var r=Error(i(418,""));throw dl(Kn(r,t)),jh}function kp(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[kt]=t,r[Nt]=l,a){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(a=0;a<Vl.length;a++)Le(Vl[a],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),Li(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ia(r);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Ui(r,l.value,l.defaultValue,l.children),Ia(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||J_(r.textContent,a)?(l.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),l.onScroll!=null&&Le("scroll",r),l.onScrollEnd!=null&&Le("scrollend",r),l.onClick!=null&&(r.onclick=Qu),r=!0):r=!1,r||ea(t)}function jp(t){for(_n=t.return;_n;)switch(_n.tag){case 5:case 13:Nr=!1;return;case 27:case 3:Nr=!0;return;default:_n=_n.return}}function cl(t){if(t!==_n)return!1;if(!We)return jp(t),We=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||em(t.type,t.memoizedProps)),a=!a),a&&vt&&ea(t),jp(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){vt=cr(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}vt=null}}else r===27?(r=vt,ei(t.type)?(t=sm,sm=null,vt=t):vt=r):vt=_n?cr(t.stateNode.nextSibling):null;return!0}function ul(){vt=_n=null,We=!1}function Lp(){var t=Ji;return t!==null&&(An===null?An=t:An.push.apply(An,t),Ji=null),t}function dl(t){Ji===null?Ji=[t]:Ji.push(t)}var Lh=Z(null),ta=null,ds=null;function Us(t,r,a){oe(Lh,r._currentValue),r._currentValue=a}function hs(t){t._currentValue=Lh.current,le(Lh)}function Uh(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function zh(t,r,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var f=d.dependencies;if(f!==null){var E=d.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=d;for(var D=0;D<r.length;D++)if(T.context===r[D]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),Uh(f.return,a,t),l||(E=null);break e}f=T.next}}else if(d.tag===18){if(E=d.return,E===null)throw Error(i(341));E.lanes|=a,f=E.alternate,f!==null&&(f.lanes|=a),Uh(E,a,t),E=null}else E=d.child;if(E!==null)E.return=d;else for(E=d;E!==null;){if(E===t){E=null;break}if(d=E.sibling,d!==null){d.return=E.return,E=d;break}E=E.return}d=E}}function hl(t,r,a,l){t=null;for(var d=r,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var E=d.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var T=d.type;Cn(d.pendingProps.value,E.value)||(t!==null?t.push(T):t=[T])}}else if(d===It.current){if(E=d.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(ql):t=[ql])}d=d.return}t!==null&&zh(r,t,a,l),r.flags|=262144}function fu(t){for(t=t.firstContext;t!==null;){if(!Cn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function na(t){ta=t,ds=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function an(t){return Up(ta,t)}function mu(t,r){return ta===null&&na(t),Up(t,r)}function Up(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ds===null){if(t===null)throw Error(i(308));ds=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else ds=ds.next=r;return a}var Kb=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},Yb=s.unstable_scheduleCallback,Xb=s.unstable_NormalPriority,Ut={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qh(){return{controller:new Kb,data:new Map,refCount:0}}function fl(t){t.refCount--,t.refCount===0&&Yb(Xb,function(){t.controller.abort()})}var ml=null,Bh=0,Ga=0,Qa=null;function $b(t,r){if(ml===null){var a=ml=[];Bh=0,Ga=Gf(),Qa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Bh++,r.then(zp,zp),r}function zp(){if(--Bh===0&&ml!==null){Qa!==null&&(Qa.status="fulfilled");var t=ml;ml=null,Ga=0,Qa=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Wb(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var d=0;d<a.length;d++)(0,a[d])(r)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var qp=Q.S;Q.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&$b(t,r),qp!==null&&qp(t,r)};var ra=Z(null);function Hh(){var t=ra.current;return t!==null?t:dt.pooledCache}function gu(t,r){r===null?oe(ra,ra.current):oe(ra,r.pool)}function Bp(){var t=Hh();return t===null?null:{parent:Ut._currentValue,pool:t}}var gl=Error(i(460)),Hp=Error(i(474)),pu=Error(i(542)),Fh={then:function(){}};function Fp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function yu(){}function Gp(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(yu,yu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Kp(t),t;default:if(typeof r.status=="string")r.then(yu,yu);else{if(t=dt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=l}},function(l){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Kp(t),t}throw pl=r,gl}}var pl=null;function Qp(){if(pl===null)throw Error(i(459));var t=pl;return pl=null,t}function Kp(t){if(t===gl||t===pu)throw Error(i(483))}var zs=!1;function Gh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qh(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function qs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(tt&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,r=cu(t),Pp(t,null,a),r}return lu(t,l,r,a),cu(t)}function yl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,he(t,a)}}function Kh(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=E:f=f.next=E,a=a.next}while(a!==null);f===null?d=f=r:f=f.next=r}else d=f=r;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Yh=!1;function _l(){if(Yh){var t=Qa;if(t!==null)throw t}}function vl(t,r,a,l){Yh=!1;var d=t.updateQueue;zs=!1;var f=d.firstBaseUpdate,E=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var D=T,q=D.next;D.next=null,E===null?f=q:E.next=q,E=D;var $=t.alternate;$!==null&&($=$.updateQueue,T=$.lastBaseUpdate,T!==E&&(T===null?$.firstBaseUpdate=q:T.next=q,$.lastBaseUpdate=D))}if(f!==null){var ee=d.baseState;E=0,$=q=D=null,T=f;do{var H=T.lane&-536870913,F=H!==T.lane;if(F?(Fe&H)===H:(l&H)===H){H!==0&&H===Ga&&(Yh=!0),$!==null&&($=$.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Re=t,Te=T;H=r;var ot=a;switch(Te.tag){case 1:if(Re=Te.payload,typeof Re=="function"){ee=Re.call(ot,ee,H);break e}ee=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Te.payload,H=typeof Re=="function"?Re.call(ot,ee,H):Re,H==null)break e;ee=w({},ee,H);break e;case 2:zs=!0}}H=T.callback,H!==null&&(t.flags|=64,F&&(t.flags|=8192),F=d.callbacks,F===null?d.callbacks=[H]:F.push(H))}else F={lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},$===null?(q=$=F,D=ee):$=$.next=F,E|=H;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;F=T,T=F.next,F.next=null,d.lastBaseUpdate=F,d.shared.pending=null}}while(!0);$===null&&(D=ee),d.baseState=D,d.firstBaseUpdate=q,d.lastBaseUpdate=$,f===null&&(d.shared.lanes=0),$s|=E,t.lanes=E,t.memoizedState=ee}}function Yp(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function Xp(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Yp(a[t],r)}var Ka=Z(null),_u=Z(0);function $p(t,r){t=vs,oe(_u,t),oe(Ka,r),vs=t|r.baseLanes}function Xh(){oe(_u,vs),oe(Ka,Ka.current)}function $h(){vs=_u.current,le(Ka),le(_u)}var Hs=0,Ve=null,it=null,Dt=null,vu=!1,Ya=!1,sa=!1,Eu=0,El=0,Xa=null,Zb=0;function St(){throw Error(i(321))}function Wh(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Cn(t[a],r[a]))return!1;return!0}function Zh(t,r,a,l,d,f){return Hs=f,Ve=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Q.H=t===null||t.memoizedState===null?Py:My,sa=!1,f=a(l,d),sa=!1,Ya&&(f=Zp(r,a,l,d)),Wp(t),f}function Wp(t){Q.H=xu;var r=it!==null&&it.next!==null;if(Hs=0,Dt=it=Ve=null,vu=!1,El=0,Xa=null,r)throw Error(i(300));t===null||Gt||(t=t.dependencies,t!==null&&fu(t)&&(Gt=!0))}function Zp(t,r,a,l){Ve=t;var d=0;do{if(Ya&&(Xa=null),El=0,Ya=!1,25<=d)throw Error(i(301));if(d+=1,Dt=it=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=iA,f=r(a,l)}while(Ya);return f}function Jb(){var t=Q.H,r=t.useState()[0];return r=typeof r.then=="function"?wl(r):r,t=t.useState()[0],(it!==null?it.memoizedState:null)!==t&&(Ve.flags|=1024),r}function Jh(){var t=Eu!==0;return Eu=0,t}function ef(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function tf(t){if(vu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}vu=!1}Hs=0,Dt=it=Ve=null,Ya=!1,El=Eu=0,Xa=null}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Ve.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function Ot(){if(it===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var r=Dt===null?Ve.memoizedState:Dt.next;if(r!==null)Dt=r,it=t;else{if(t===null)throw Ve.alternate===null?Error(i(467)):Error(i(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Dt===null?Ve.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function nf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(t){var r=El;return El+=1,Xa===null&&(Xa=[]),t=Gp(Xa,t,r),r=Ve,(Dt===null?r.memoizedState:Dt.next)===null&&(r=r.alternate,Q.H=r===null||r.memoizedState===null?Py:My),t}function wu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wl(t);if(t.$$typeof===se)return an(t)}throw Error(i(438,String(t)))}function rf(t){var r=null,a=Ve.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=nf(),Ve.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=P;return r.index++,a}function fs(t,r){return typeof r=="function"?r(t):r}function Tu(t){var r=Ot();return sf(r,it,t)}function sf(t,r,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var d=t.baseQueue,f=l.pending;if(f!==null){if(d!==null){var E=d.next;d.next=f.next,f.next=E}r.baseQueue=d=f,l.pending=null}if(f=t.baseState,d===null)t.memoizedState=f;else{r=d.next;var T=E=null,D=null,q=r,$=!1;do{var ee=q.lane&-536870913;if(ee!==q.lane?(Fe&ee)===ee:(Hs&ee)===ee){var H=q.revertLane;if(H===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ee===Ga&&($=!0);else if((Hs&H)===H){q=q.next,H===Ga&&($=!0);continue}else ee={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(T=D=ee,E=f):D=D.next=ee,Ve.lanes|=H,$s|=H;ee=q.action,sa&&a(f,ee),f=q.hasEagerState?q.eagerState:a(f,ee)}else H={lane:ee,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(T=D=H,E=f):D=D.next=H,Ve.lanes|=ee,$s|=ee;q=q.next}while(q!==null&&q!==r);if(D===null?E=f:D.next=T,!Cn(f,t.memoizedState)&&(Gt=!0,$&&(a=Qa,a!==null)))throw a;t.memoizedState=f,t.baseState=E,t.baseQueue=D,l.lastRenderedState=f}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function af(t){var r=Ot(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,f=r.memoizedState;if(d!==null){a.pending=null;var E=d=d.next;do f=t(f,E.action),E=E.next;while(E!==d);Cn(f,r.memoizedState)||(Gt=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function Jp(t,r,a){var l=Ve,d=Ot(),f=We;if(f){if(a===void 0)throw Error(i(407));a=a()}else a=r();var E=!Cn((it||d).memoizedState,a);E&&(d.memoizedState=a,Gt=!0),d=d.queue;var T=ny.bind(null,l,d,t);if(Tl(2048,8,T,[t]),d.getSnapshot!==r||E||Dt!==null&&Dt.memoizedState.tag&1){if(l.flags|=2048,$a(9,bu(),ty.bind(null,l,d,a,r),null),dt===null)throw Error(i(349));f||(Hs&124)!==0||ey(l,r,a)}return a}function ey(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Ve.updateQueue,r===null?(r=nf(),Ve.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function ty(t,r,a,l){r.value=a,r.getSnapshot=l,ry(r)&&sy(t)}function ny(t,r,a){return a(function(){ry(r)&&sy(t)})}function ry(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Cn(t,a)}catch{return!0}}function sy(t){var r=qa(t,2);r!==null&&kn(r,t,2)}function of(t){var r=Tn();if(typeof t=="function"){var a=t;if(t=a(),sa){mn(!0);try{a()}finally{mn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:t},r}function iy(t,r,a,l){return t.baseState=a,sf(t,it,typeof l=="function"?l:fs)}function eA(t,r,a,l,d){if(Su(t))throw Error(i(485));if(t=r.action,t!==null){var f={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};Q.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,ay(r,f)):(f.next=a.next,r.pending=a.next=f)}}function ay(t,r){var a=r.action,l=r.payload,d=t.state;if(r.isTransition){var f=Q.T,E={};Q.T=E;try{var T=a(d,l),D=Q.S;D!==null&&D(E,T),oy(t,r,T)}catch(q){lf(t,r,q)}finally{Q.T=f}}else try{f=a(d,l),oy(t,r,f)}catch(q){lf(t,r,q)}}function oy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ly(t,r,l)},function(l){return lf(t,r,l)}):ly(t,r,a)}function ly(t,r,a){r.status="fulfilled",r.value=a,cy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,ay(t,a)))}function lf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,cy(r),r=r.next;while(r!==l)}t.action=null}function cy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function uy(t,r){return r}function dy(t,r){if(We){var a=dt.formState;if(a!==null){e:{var l=Ve;if(We){if(vt){t:{for(var d=vt,f=Nr;d.nodeType!==8;){if(!f){d=null;break t}if(d=cr(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){vt=cr(d.nextSibling),l=d.data==="F!";break e}}ea(l)}l=!1}l&&(r=a[0])}}return a=Tn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uy,lastRenderedState:r},a.queue=l,a=Cy.bind(null,Ve,l),l.dispatch=a,l=of(!1),f=ff.bind(null,Ve,!1,l.queue),l=Tn(),d={state:r,dispatch:null,action:t,pending:null},l.queue=d,a=eA.bind(null,Ve,d,f,a),d.dispatch=a,l.memoizedState=t,[r,a,!1]}function hy(t){var r=Ot();return fy(r,it,t)}function fy(t,r,a){if(r=sf(t,r,uy)[0],t=Tu(fs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=wl(r)}catch(E){throw E===gl?pu:E}else l=r;r=Ot();var d=r.queue,f=d.dispatch;return a!==r.memoizedState&&(Ve.flags|=2048,$a(9,bu(),tA.bind(null,d,a),null)),[l,f,t]}function tA(t,r){t.action=r}function my(t){var r=Ot(),a=it;if(a!==null)return fy(r,a,t);Ot(),r=r.memoizedState,a=Ot();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function $a(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Ve.updateQueue,r===null&&(r=nf(),Ve.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function bu(){return{destroy:void 0,resource:void 0}}function gy(){return Ot().memoizedState}function Au(t,r,a,l){var d=Tn();l=l===void 0?null:l,Ve.flags|=t,d.memoizedState=$a(1|r,bu(),a,l)}function Tl(t,r,a,l){var d=Ot();l=l===void 0?null:l;var f=d.memoizedState.inst;it!==null&&l!==null&&Wh(l,it.memoizedState.deps)?d.memoizedState=$a(r,f,a,l):(Ve.flags|=t,d.memoizedState=$a(1|r,f,a,l))}function py(t,r){Au(8390656,8,t,r)}function yy(t,r){Tl(2048,8,t,r)}function _y(t,r){return Tl(4,2,t,r)}function vy(t,r){return Tl(4,4,t,r)}function Ey(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function wy(t,r,a){a=a!=null?a.concat([t]):null,Tl(4,4,Ey.bind(null,r,t),a)}function cf(){}function Ty(t,r){var a=Ot();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Wh(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function by(t,r){var a=Ot();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Wh(r,l[1]))return l[0];if(l=t(),sa){mn(!0);try{t()}finally{mn(!1)}}return a.memoizedState=[l,r],l}function uf(t,r,a){return a===void 0||(Hs&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=x_(),Ve.lanes|=t,$s|=t,a)}function Ay(t,r,a,l){return Cn(a,r)?a:Ka.current!==null?(t=uf(t,a,l),Cn(t,r)||(Gt=!0),t):(Hs&42)===0?(Gt=!0,t.memoizedState=a):(t=x_(),Ve.lanes|=t,$s|=t,r)}function Sy(t,r,a,l,d){var f=ie.p;ie.p=f!==0&&8>f?f:8;var E=Q.T,T={};Q.T=T,ff(t,!1,r,a);try{var D=d(),q=Q.S;if(q!==null&&q(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var $=Wb(D,l);bl(t,r,$,Vn(t))}else bl(t,r,l,Vn(t))}catch(ee){bl(t,r,{then:function(){},status:"rejected",reason:ee},Vn())}finally{ie.p=f,Q.T=E}}function nA(){}function df(t,r,a,l){if(t.tag!==5)throw Error(i(476));var d=xy(t).queue;Sy(t,d,r,Y,a===null?nA:function(){return Ry(t),a(l)})}function xy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:Y},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Ry(t){var r=xy(t).next.queue;bl(t,r,{},Vn())}function hf(){return an(ql)}function Iy(){return Ot().memoizedState}function Ny(){return Ot().memoizedState}function rA(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Vn();t=qs(a);var l=Bs(r,t,a);l!==null&&(kn(l,r,a),yl(l,r,a)),r={cache:qh()},t.payload=r;return}r=r.return}}function sA(t,r,a){var l=Vn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Su(t)?Dy(r,a):(a=Dh(t,r,a,l),a!==null&&(kn(a,t,l),Oy(a,r,l)))}function Cy(t,r,a){var l=Vn();bl(t,r,a,l)}function bl(t,r,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Su(t))Dy(r,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var E=r.lastRenderedState,T=f(E,a);if(d.hasEagerState=!0,d.eagerState=T,Cn(T,E))return lu(t,r,d,0),dt===null&&ou(),!1}catch{}finally{}if(a=Dh(t,r,d,l),a!==null)return kn(a,t,l),Oy(a,r,l),!0}return!1}function ff(t,r,a,l){if(l={lane:2,revertLane:Gf(),action:l,hasEagerState:!1,eagerState:null,next:null},Su(t)){if(r)throw Error(i(479))}else r=Dh(t,a,l,2),r!==null&&kn(r,t,2)}function Su(t){var r=t.alternate;return t===Ve||r!==null&&r===Ve}function Dy(t,r){Ya=vu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Oy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,he(t,a)}}var xu={readContext:an,use:wu,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St},Py={readContext:an,use:wu,useCallback:function(t,r){return Tn().memoizedState=[t,r===void 0?null:r],t},useContext:an,useEffect:py,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Au(4194308,4,Ey.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Au(4194308,4,t,r)},useInsertionEffect:function(t,r){Au(4,2,t,r)},useMemo:function(t,r){var a=Tn();r=r===void 0?null:r;var l=t();if(sa){mn(!0);try{t()}finally{mn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Tn();if(a!==void 0){var d=a(r);if(sa){mn(!0);try{a(r)}finally{mn(!1)}}}else d=r;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=sA.bind(null,Ve,t),[l.memoizedState,t]},useRef:function(t){var r=Tn();return t={current:t},r.memoizedState=t},useState:function(t){t=of(t);var r=t.queue,a=Cy.bind(null,Ve,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:cf,useDeferredValue:function(t,r){var a=Tn();return uf(a,t,r)},useTransition:function(){var t=of(!1);return t=Sy.bind(null,Ve,t.queue,!0,!1),Tn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Ve,d=Tn();if(We){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),dt===null)throw Error(i(349));(Fe&124)!==0||ey(l,r,a)}d.memoizedState=a;var f={value:a,getSnapshot:r};return d.queue=f,py(ny.bind(null,l,f,t),[t]),l.flags|=2048,$a(9,bu(),ty.bind(null,l,f,a,r),null),a},useId:function(){var t=Tn(),r=dt.identifierPrefix;if(We){var a=us,l=cs;a=(l&~(1<<32-Bt(l)-1)).toString(32)+a,r=""+r+"R"+a,a=Eu++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=Zb++,r=""+r+"r"+a.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:hf,useFormState:dy,useActionState:dy,useOptimistic:function(t){var r=Tn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=ff.bind(null,Ve,!0,a),a.dispatch=r,[t,r]},useMemoCache:rf,useCacheRefresh:function(){return Tn().memoizedState=rA.bind(null,Ve)}},My={readContext:an,use:wu,useCallback:Ty,useContext:an,useEffect:yy,useImperativeHandle:wy,useInsertionEffect:_y,useLayoutEffect:vy,useMemo:by,useReducer:Tu,useRef:gy,useState:function(){return Tu(fs)},useDebugValue:cf,useDeferredValue:function(t,r){var a=Ot();return Ay(a,it.memoizedState,t,r)},useTransition:function(){var t=Tu(fs)[0],r=Ot().memoizedState;return[typeof t=="boolean"?t:wl(t),r]},useSyncExternalStore:Jp,useId:Iy,useHostTransitionStatus:hf,useFormState:hy,useActionState:hy,useOptimistic:function(t,r){var a=Ot();return iy(a,it,t,r)},useMemoCache:rf,useCacheRefresh:Ny},iA={readContext:an,use:wu,useCallback:Ty,useContext:an,useEffect:yy,useImperativeHandle:wy,useInsertionEffect:_y,useLayoutEffect:vy,useMemo:by,useReducer:af,useRef:gy,useState:function(){return af(fs)},useDebugValue:cf,useDeferredValue:function(t,r){var a=Ot();return it===null?uf(a,t,r):Ay(a,it.memoizedState,t,r)},useTransition:function(){var t=af(fs)[0],r=Ot().memoizedState;return[typeof t=="boolean"?t:wl(t),r]},useSyncExternalStore:Jp,useId:Iy,useHostTransitionStatus:hf,useFormState:my,useActionState:my,useOptimistic:function(t,r){var a=Ot();return it!==null?iy(a,it,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:rf,useCacheRefresh:Ny},Wa=null,Al=0;function Ru(t){var r=Al;return Al+=1,Wa===null&&(Wa=[]),Gp(Wa,t,r)}function Sl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Iu(t,r){throw r.$$typeof===b?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Vy(t){var r=t._init;return r(t._payload)}function ky(t){function r(L,V){if(t){var z=L.deletions;z===null?(L.deletions=[V],L.flags|=16):z.push(V)}}function a(L,V){if(!t)return null;for(;V!==null;)r(L,V),V=V.sibling;return null}function l(L){for(var V=new Map;L!==null;)L.key!==null?V.set(L.key,L):V.set(L.index,L),L=L.sibling;return V}function d(L,V){return L=ls(L,V),L.index=0,L.sibling=null,L}function f(L,V,z){return L.index=z,t?(z=L.alternate,z!==null?(z=z.index,z<V?(L.flags|=67108866,V):z):(L.flags|=67108866,V)):(L.flags|=1048576,V)}function E(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function T(L,V,z,J){return V===null||V.tag!==6?(V=Ph(z,L.mode,J),V.return=L,V):(V=d(V,z),V.return=L,V)}function D(L,V,z,J){var ye=z.type;return ye===j?$(L,V,z.props.children,J,z.key):V!==null&&(V.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===x&&Vy(ye)===V.type)?(V=d(V,z.props),Sl(V,z),V.return=L,V):(V=uu(z.type,z.key,z.props,null,L.mode,J),Sl(V,z),V.return=L,V)}function q(L,V,z,J){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=Mh(z,L.mode,J),V.return=L,V):(V=d(V,z.children||[]),V.return=L,V)}function $(L,V,z,J,ye){return V===null||V.tag!==7?(V=$i(z,L.mode,J,ye),V.return=L,V):(V=d(V,z),V.return=L,V)}function ee(L,V,z){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Ph(""+V,L.mode,z),V.return=L,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return z=uu(V.type,V.key,V.props,null,L.mode,z),Sl(z,V),z.return=L,z;case N:return V=Mh(V,L.mode,z),V.return=L,V;case x:var J=V._init;return V=J(V._payload),ee(L,V,z)}if(Oe(V)||k(V))return V=$i(V,L.mode,z,null),V.return=L,V;if(typeof V.then=="function")return ee(L,Ru(V),z);if(V.$$typeof===se)return ee(L,mu(L,V),z);Iu(L,V)}return null}function H(L,V,z,J){var ye=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return ye!==null?null:T(L,V,""+z,J);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return z.key===ye?D(L,V,z,J):null;case N:return z.key===ye?q(L,V,z,J):null;case x:return ye=z._init,z=ye(z._payload),H(L,V,z,J)}if(Oe(z)||k(z))return ye!==null?null:$(L,V,z,J,null);if(typeof z.then=="function")return H(L,V,Ru(z),J);if(z.$$typeof===se)return H(L,V,mu(L,z),J);Iu(L,z)}return null}function F(L,V,z,J,ye){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return L=L.get(z)||null,T(V,L,""+J,ye);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case S:return L=L.get(J.key===null?z:J.key)||null,D(V,L,J,ye);case N:return L=L.get(J.key===null?z:J.key)||null,q(V,L,J,ye);case x:var ke=J._init;return J=ke(J._payload),F(L,V,z,J,ye)}if(Oe(J)||k(J))return L=L.get(z)||null,$(V,L,J,ye,null);if(typeof J.then=="function")return F(L,V,z,Ru(J),ye);if(J.$$typeof===se)return F(L,V,z,mu(V,J),ye);Iu(V,J)}return null}function Re(L,V,z,J){for(var ye=null,ke=null,ve=V,be=V=0,Kt=null;ve!==null&&be<z.length;be++){ve.index>be?(Kt=ve,ve=null):Kt=ve.sibling;var Ye=H(L,ve,z[be],J);if(Ye===null){ve===null&&(ve=Kt);break}t&&ve&&Ye.alternate===null&&r(L,ve),V=f(Ye,V,be),ke===null?ye=Ye:ke.sibling=Ye,ke=Ye,ve=Kt}if(be===z.length)return a(L,ve),We&&Zi(L,be),ye;if(ve===null){for(;be<z.length;be++)ve=ee(L,z[be],J),ve!==null&&(V=f(ve,V,be),ke===null?ye=ve:ke.sibling=ve,ke=ve);return We&&Zi(L,be),ye}for(ve=l(ve);be<z.length;be++)Kt=F(ve,L,be,z[be],J),Kt!==null&&(t&&Kt.alternate!==null&&ve.delete(Kt.key===null?be:Kt.key),V=f(Kt,V,be),ke===null?ye=Kt:ke.sibling=Kt,ke=Kt);return t&&ve.forEach(function(ii){return r(L,ii)}),We&&Zi(L,be),ye}function Te(L,V,z,J){if(z==null)throw Error(i(151));for(var ye=null,ke=null,ve=V,be=V=0,Kt=null,Ye=z.next();ve!==null&&!Ye.done;be++,Ye=z.next()){ve.index>be?(Kt=ve,ve=null):Kt=ve.sibling;var ii=H(L,ve,Ye.value,J);if(ii===null){ve===null&&(ve=Kt);break}t&&ve&&ii.alternate===null&&r(L,ve),V=f(ii,V,be),ke===null?ye=ii:ke.sibling=ii,ke=ii,ve=Kt}if(Ye.done)return a(L,ve),We&&Zi(L,be),ye;if(ve===null){for(;!Ye.done;be++,Ye=z.next())Ye=ee(L,Ye.value,J),Ye!==null&&(V=f(Ye,V,be),ke===null?ye=Ye:ke.sibling=Ye,ke=Ye);return We&&Zi(L,be),ye}for(ve=l(ve);!Ye.done;be++,Ye=z.next())Ye=F(ve,L,be,Ye.value,J),Ye!==null&&(t&&Ye.alternate!==null&&ve.delete(Ye.key===null?be:Ye.key),V=f(Ye,V,be),ke===null?ye=Ye:ke.sibling=Ye,ke=Ye);return t&&ve.forEach(function(aS){return r(L,aS)}),We&&Zi(L,be),ye}function ot(L,V,z,J){if(typeof z=="object"&&z!==null&&z.type===j&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case S:e:{for(var ye=z.key;V!==null;){if(V.key===ye){if(ye=z.type,ye===j){if(V.tag===7){a(L,V.sibling),J=d(V,z.props.children),J.return=L,L=J;break e}}else if(V.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===x&&Vy(ye)===V.type){a(L,V.sibling),J=d(V,z.props),Sl(J,z),J.return=L,L=J;break e}a(L,V);break}else r(L,V);V=V.sibling}z.type===j?(J=$i(z.props.children,L.mode,J,z.key),J.return=L,L=J):(J=uu(z.type,z.key,z.props,null,L.mode,J),Sl(J,z),J.return=L,L=J)}return E(L);case N:e:{for(ye=z.key;V!==null;){if(V.key===ye)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(L,V.sibling),J=d(V,z.children||[]),J.return=L,L=J;break e}else{a(L,V);break}else r(L,V);V=V.sibling}J=Mh(z,L.mode,J),J.return=L,L=J}return E(L);case x:return ye=z._init,z=ye(z._payload),ot(L,V,z,J)}if(Oe(z))return Re(L,V,z,J);if(k(z)){if(ye=k(z),typeof ye!="function")throw Error(i(150));return z=ye.call(z),Te(L,V,z,J)}if(typeof z.then=="function")return ot(L,V,Ru(z),J);if(z.$$typeof===se)return ot(L,V,mu(L,z),J);Iu(L,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,V!==null&&V.tag===6?(a(L,V.sibling),J=d(V,z),J.return=L,L=J):(a(L,V),J=Ph(z,L.mode,J),J.return=L,L=J),E(L)):a(L,V)}return function(L,V,z,J){try{Al=0;var ye=ot(L,V,z,J);return Wa=null,ye}catch(ve){if(ve===gl||ve===pu)throw ve;var ke=Dn(29,ve,null,L.mode);return ke.lanes=J,ke.return=L,ke}finally{}}}var Za=ky(!0),jy=ky(!1),Wn=Z(null),Cr=null;function Fs(t){var r=t.alternate;oe(zt,zt.current&1),oe(Wn,t),Cr===null&&(r===null||Ka.current!==null||r.memoizedState!==null)&&(Cr=t)}function Ly(t){if(t.tag===22){if(oe(zt,zt.current),oe(Wn,t),Cr===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Cr=t)}}else Gs()}function Gs(){oe(zt,zt.current),oe(Wn,Wn.current)}function ms(t){le(Wn),Cr===t&&(Cr=null),le(zt)}var zt=Z(0);function Nu(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||rm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function mf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:w({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var gf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Vn(),d=qs(l);d.payload=r,a!=null&&(d.callback=a),r=Bs(t,d,l),r!==null&&(kn(r,t,l),yl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Vn(),d=qs(l);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=Bs(t,d,l),r!==null&&(kn(r,t,l),yl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Vn(),l=qs(a);l.tag=2,r!=null&&(l.callback=r),r=Bs(t,l,a),r!==null&&(kn(r,t,a),yl(r,t,a))}};function Uy(t,r,a,l,d,f,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,E):r.prototype&&r.prototype.isPureReactComponent?!ol(a,l)||!ol(d,f):!0}function zy(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&gf.enqueueReplaceState(r,r.state,null)}function ia(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=w({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}var Cu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function qy(t){Cu(t)}function By(t){console.error(t)}function Hy(t){Cu(t)}function Du(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Fy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function pf(t,r,a){return a=qs(a),a.tag=3,a.payload={element:null},a.callback=function(){Du(t,r)},a}function Gy(t){return t=qs(t),t.tag=3,t}function Qy(t,r,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;t.payload=function(){return d(f)},t.callback=function(){Fy(r,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){Fy(r,a,l),typeof d!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function aA(t,r,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&hl(r,a,d,!0),a=Wn.current,a!==null){switch(a.tag){case 13:return Cr===null?zf():a.alternate===null&&Et===0&&(Et=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Fh?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Bf(t,l,d)),!1;case 22:return a.flags|=65536,l===Fh?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Bf(t,l,d)),!1}throw Error(i(435,a.tag))}return Bf(t,l,d),zf(),!1}if(We)return r=Wn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,l!==jh&&(t=Error(i(422),{cause:l}),dl(Kn(t,a)))):(l!==jh&&(r=Error(i(423),{cause:l}),dl(Kn(r,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=Kn(l,a),d=pf(t.stateNode,l,d),Kh(t,d),Et!==4&&(Et=2)),!1;var f=Error(i(520),{cause:l});if(f=Kn(f,a),Ol===null?Ol=[f]:Ol.push(f),Et!==4&&(Et=2),r===null)return!0;l=Kn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=pf(a.stateNode,l,t),Kh(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ws===null||!Ws.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Gy(d),Qy(d,t,a,l),Kh(a,d),!1}a=a.return}while(a!==null);return!1}var Ky=Error(i(461)),Gt=!1;function Zt(t,r,a,l){r.child=t===null?jy(r,null,a,l):Za(r,t.child,a,l)}function Yy(t,r,a,l,d){a=a.render;var f=r.ref;if("ref"in l){var E={};for(var T in l)T!=="ref"&&(E[T]=l[T])}else E=l;return na(r),l=Zh(t,r,a,E,f,d),T=Jh(),t!==null&&!Gt?(ef(t,r,d),gs(t,r,d)):(We&&T&&Vh(r),r.flags|=1,Zt(t,r,l,d),r.child)}function Xy(t,r,a,l,d){if(t===null){var f=a.type;return typeof f=="function"&&!Oh(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,$y(t,r,f,l,d)):(t=uu(a.type,null,l,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!Af(t,d)){var E=f.memoizedProps;if(a=a.compare,a=a!==null?a:ol,a(E,l)&&t.ref===r.ref)return gs(t,r,d)}return r.flags|=1,t=ls(f,l),t.ref=r.ref,t.return=r,r.child=t}function $y(t,r,a,l,d){if(t!==null){var f=t.memoizedProps;if(ol(f,l)&&t.ref===r.ref)if(Gt=!1,r.pendingProps=l=f,Af(t,d))(t.flags&131072)!==0&&(Gt=!0);else return r.lanes=t.lanes,gs(t,r,d)}return yf(t,r,a,l,d)}function Wy(t,r,a){var l=r.pendingProps,d=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(d=r.child=t.child,f=0;d!==null;)f=f|d.lanes|d.childLanes,d=d.sibling;r.childLanes=f&~l}else r.childLanes=0,r.child=null;return Zy(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&gu(r,f!==null?f.cachePool:null),f!==null?$p(r,f):Xh(),Ly(r);else return r.lanes=r.childLanes=536870912,Zy(t,r,f!==null?f.baseLanes|a:a,a)}else f!==null?(gu(r,f.cachePool),$p(r,f),Gs(),r.memoizedState=null):(t!==null&&gu(r,null),Xh(),Gs());return Zt(t,r,d,a),r.child}function Zy(t,r,a,l){var d=Hh();return d=d===null?null:{parent:Ut._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},t!==null&&gu(r,null),Xh(),Ly(r),t!==null&&hl(t,r,l,!0),null}function Ou(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function yf(t,r,a,l,d){return na(r),a=Zh(t,r,a,l,void 0,d),l=Jh(),t!==null&&!Gt?(ef(t,r,d),gs(t,r,d)):(We&&l&&Vh(r),r.flags|=1,Zt(t,r,a,d),r.child)}function Jy(t,r,a,l,d,f){return na(r),r.updateQueue=null,a=Zp(r,l,a,d),Wp(t),l=Jh(),t!==null&&!Gt?(ef(t,r,f),gs(t,r,f)):(We&&l&&Vh(r),r.flags|=1,Zt(t,r,a,f),r.child)}function e_(t,r,a,l,d){if(na(r),r.stateNode===null){var f=Ba,E=a.contextType;typeof E=="object"&&E!==null&&(f=an(E)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=gf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Gh(r),E=a.contextType,f.context=typeof E=="object"&&E!==null?an(E):Ba,f.state=r.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(mf(r,a,E,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&gf.enqueueReplaceState(f,f.state,null),vl(r,l,f,d),_l(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var T=r.memoizedProps,D=ia(a,T);f.props=D;var q=f.context,$=a.contextType;E=Ba,typeof $=="object"&&$!==null&&(E=an($));var ee=a.getDerivedStateFromProps;$=typeof ee=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,$||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||q!==E)&&zy(r,f,l,E),zs=!1;var H=r.memoizedState;f.state=H,vl(r,l,f,d),_l(),q=r.memoizedState,T||H!==q||zs?(typeof ee=="function"&&(mf(r,a,ee,l),q=r.memoizedState),(D=zs||Uy(r,a,D,l,H,q,E))?($||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=q),f.props=l,f.state=q,f.context=E,l=D):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,Qh(t,r),E=r.memoizedProps,$=ia(a,E),f.props=$,ee=r.pendingProps,H=f.context,q=a.contextType,D=Ba,typeof q=="object"&&q!==null&&(D=an(q)),T=a.getDerivedStateFromProps,(q=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==ee||H!==D)&&zy(r,f,l,D),zs=!1,H=r.memoizedState,f.state=H,vl(r,l,f,d),_l();var F=r.memoizedState;E!==ee||H!==F||zs||t!==null&&t.dependencies!==null&&fu(t.dependencies)?(typeof T=="function"&&(mf(r,a,T,l),F=r.memoizedState),($=zs||Uy(r,a,$,l,H,F,D)||t!==null&&t.dependencies!==null&&fu(t.dependencies))?(q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,F,D),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,F,D)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&H===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&H===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=F),f.props=l,f.state=F,f.context=D,l=$):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&H===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&H===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,Ou(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=Za(r,t.child,null,d),r.child=Za(r,null,a,d)):Zt(t,r,a,d),r.memoizedState=f.state,t=r.child):t=gs(t,r,d),t}function t_(t,r,a,l){return ul(),r.flags|=256,Zt(t,r,a,l),r.child}var _f={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vf(t){return{baseLanes:t,cachePool:Bp()}}function Ef(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Zn),t}function n_(t,r,a){var l=r.pendingProps,d=!1,f=(r.flags&128)!==0,E;if((E=f)||(E=t!==null&&t.memoizedState===null?!1:(zt.current&2)!==0),E&&(d=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,t===null){if(We){if(d?Fs(r):Gs(),We){var T=vt,D;if(D=T){e:{for(D=T,T=Nr;D.nodeType!==8;){if(!T){T=null;break e}if(D=cr(D.nextSibling),D===null){T=null;break e}}T=D}T!==null?(r.memoizedState={dehydrated:T,treeContext:Wi!==null?{id:cs,overflow:us}:null,retryLane:536870912,hydrationErrors:null},D=Dn(18,null,null,0),D.stateNode=T,D.return=r,r.child=D,_n=r,vt=null,D=!0):D=!1}D||ea(r)}if(T=r.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return rm(T)?r.lanes=32:r.lanes=536870912,null;ms(r)}return T=l.children,l=l.fallback,d?(Gs(),d=r.mode,T=Pu({mode:"hidden",children:T},d),l=$i(l,d,a,null),T.return=r,l.return=r,T.sibling=l,r.child=T,d=r.child,d.memoizedState=vf(a),d.childLanes=Ef(t,E,a),r.memoizedState=_f,l):(Fs(r),wf(r,T))}if(D=t.memoizedState,D!==null&&(T=D.dehydrated,T!==null)){if(f)r.flags&256?(Fs(r),r.flags&=-257,r=Tf(t,r,a)):r.memoizedState!==null?(Gs(),r.child=t.child,r.flags|=128,r=null):(Gs(),d=l.fallback,T=r.mode,l=Pu({mode:"visible",children:l.children},T),d=$i(d,T,a,null),d.flags|=2,l.return=r,d.return=r,l.sibling=d,r.child=l,Za(r,t.child,null,a),l=r.child,l.memoizedState=vf(a),l.childLanes=Ef(t,E,a),r.memoizedState=_f,r=d);else if(Fs(r),rm(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var q=E.dgst;E=q,l=Error(i(419)),l.stack="",l.digest=E,dl({value:l,source:null,stack:null}),r=Tf(t,r,a)}else if(Gt||hl(t,r,a,!1),E=(a&t.childLanes)!==0,Gt||E){if(E=dt,E!==null&&(l=a&-a,l=(l&42)!==0?1:fe(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==D.retryLane))throw D.retryLane=l,qa(t,l),kn(E,t,l),Ky;T.data==="$?"||zf(),r=Tf(t,r,a)}else T.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=D.treeContext,vt=cr(T.nextSibling),_n=r,We=!0,Ji=null,Nr=!1,t!==null&&(Xn[$n++]=cs,Xn[$n++]=us,Xn[$n++]=Wi,cs=t.id,us=t.overflow,Wi=r),r=wf(r,l.children),r.flags|=4096);return r}return d?(Gs(),d=l.fallback,T=r.mode,D=t.child,q=D.sibling,l=ls(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,q!==null?d=ls(q,d):(d=$i(d,T,a,null),d.flags|=2),d.return=r,l.return=r,l.sibling=d,r.child=l,l=d,d=r.child,T=t.child.memoizedState,T===null?T=vf(a):(D=T.cachePool,D!==null?(q=Ut._currentValue,D=D.parent!==q?{parent:q,pool:q}:D):D=Bp(),T={baseLanes:T.baseLanes|a,cachePool:D}),d.memoizedState=T,d.childLanes=Ef(t,E,a),r.memoizedState=_f,l):(Fs(r),a=t.child,t=a.sibling,a=ls(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(E=r.deletions,E===null?(r.deletions=[t],r.flags|=16):E.push(t)),r.child=a,r.memoizedState=null,a)}function wf(t,r){return r=Pu({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Pu(t,r){return t=Dn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Tf(t,r,a){return Za(r,t.child,null,a),t=wf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function r_(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Uh(t.return,r,a)}function bf(t,r,a,l,d){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=d)}function s_(t,r,a){var l=r.pendingProps,d=l.revealOrder,f=l.tail;if(Zt(t,r,l.children,a),l=zt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&r_(t,a,r);else if(t.tag===19)r_(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(oe(zt,l),d){case"forwards":for(a=r.child,d=null;a!==null;)t=a.alternate,t!==null&&Nu(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),bf(r,!1,d,a,f);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&Nu(t)===null){r.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}bf(r,!0,a,null,f);break;case"together":bf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function gs(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),$s|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(hl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,a=ls(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=ls(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Af(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&fu(t)))}function oA(t,r,a){switch(r.tag){case 3:rt(r,r.stateNode.containerInfo),Us(r,Ut,t.memoizedState.cache),ul();break;case 27:case 5:nr(r);break;case 4:rt(r,r.stateNode.containerInfo);break;case 10:Us(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Fs(r),r.flags|=128,null):(a&r.child.childLanes)!==0?n_(t,r,a):(Fs(r),t=gs(t,r,a),t!==null?t.sibling:null);Fs(r);break;case 19:var d=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(hl(t,r,a,!1),l=(a&r.childLanes)!==0),d){if(l)return s_(t,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),oe(zt,zt.current),l)break;return null;case 22:case 23:return r.lanes=0,Wy(t,r,a);case 24:Us(r,Ut,t.memoizedState.cache)}return gs(t,r,a)}function i_(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Gt=!0;else{if(!Af(t,a)&&(r.flags&128)===0)return Gt=!1,oA(t,r,a);Gt=(t.flags&131072)!==0}else Gt=!1,We&&(r.flags&1048576)!==0&&Vp(r,hu,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,d=l._init;if(l=d(l._payload),r.type=l,typeof l=="function")Oh(l)?(t=ia(l,t),r.tag=1,r=e_(null,r,l,t,a)):(r.tag=0,r=yf(null,r,l,t,a));else{if(l!=null){if(d=l.$$typeof,d===ge){r.tag=11,r=Yy(null,r,l,t,a);break e}else if(d===C){r.tag=14,r=Xy(null,r,l,t,a);break e}}throw r=Ie(l)||l,Error(i(306,r,""))}}return r;case 0:return yf(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,d=ia(l,r.pendingProps),e_(t,r,l,d,a);case 3:e:{if(rt(r,r.stateNode.containerInfo),t===null)throw Error(i(387));l=r.pendingProps;var f=r.memoizedState;d=f.element,Qh(t,r),vl(r,l,null,a);var E=r.memoizedState;if(l=E.cache,Us(r,Ut,l),l!==f.cache&&zh(r,[Ut],a,!0),_l(),l=E.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=t_(t,r,l,a);break e}else if(l!==d){d=Kn(Error(i(424)),r),dl(d),r=t_(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(vt=cr(t.firstChild),_n=r,We=!0,Ji=null,Nr=!0,a=jy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ul(),l===d){r=gs(t,r,a);break e}Zt(t,r,l,a)}r=r.child}return r;case 26:return Ou(t,r),t===null?(a=cv(r.type,null,r.pendingProps,null))?r.memoizedState=a:We||(a=r.type,t=r.pendingProps,l=Ku(Ae.current).createElement(a),l[kt]=r,l[Nt]=t,en(l,a,t),At(l),r.stateNode=l):r.memoizedState=cv(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return nr(r),t===null&&We&&(l=r.stateNode=av(r.type,r.pendingProps,Ae.current),_n=r,Nr=!0,d=vt,ei(r.type)?(sm=d,vt=cr(l.firstChild)):vt=d),Zt(t,r,r.pendingProps.children,a),Ou(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&We&&((d=l=vt)&&(l=VA(l,r.type,r.pendingProps,Nr),l!==null?(r.stateNode=l,_n=r,vt=cr(l.firstChild),Nr=!1,d=!0):d=!1),d||ea(r)),nr(r),d=r.type,f=r.pendingProps,E=t!==null?t.memoizedProps:null,l=f.children,em(d,f)?l=null:E!==null&&em(d,E)&&(r.flags|=32),r.memoizedState!==null&&(d=Zh(t,r,Jb,null,null,a),ql._currentValue=d),Ou(t,r),Zt(t,r,l,a),r.child;case 6:return t===null&&We&&((t=a=vt)&&(a=kA(a,r.pendingProps,Nr),a!==null?(r.stateNode=a,_n=r,vt=null,t=!0):t=!1),t||ea(r)),null;case 13:return n_(t,r,a);case 4:return rt(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Za(r,null,l,a):Zt(t,r,l,a),r.child;case 11:return Yy(t,r,r.type,r.pendingProps,a);case 7:return Zt(t,r,r.pendingProps,a),r.child;case 8:return Zt(t,r,r.pendingProps.children,a),r.child;case 12:return Zt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Us(r,r.type,l.value),Zt(t,r,l.children,a),r.child;case 9:return d=r.type._context,l=r.pendingProps.children,na(r),d=an(d),l=l(d),r.flags|=1,Zt(t,r,l,a),r.child;case 14:return Xy(t,r,r.type,r.pendingProps,a);case 15:return $y(t,r,r.type,r.pendingProps,a);case 19:return s_(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Pu(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=ls(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return Wy(t,r,a);case 24:return na(r),l=an(Ut),t===null?(d=Hh(),d===null&&(d=dt,f=qh(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),r.memoizedState={parent:l,cache:d},Gh(r),Us(r,Ut,d)):((t.lanes&a)!==0&&(Qh(t,r),vl(r,null,null,a),_l()),d=t.memoizedState,f=r.memoizedState,d.parent!==l?(d={parent:l,cache:l},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Us(r,Ut,l)):(l=f.cache,Us(r,Ut,l),l!==d.cache&&zh(r,[Ut],a,!0))),Zt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ps(t){t.flags|=4}function a_(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!mv(r)){if(r=Wn.current,r!==null&&((Fe&4194048)===Fe?Cr!==null:(Fe&62914560)!==Fe&&(Fe&536870912)===0||r!==Cr))throw pl=Fh,Hp;t.flags|=8192}}function Mu(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Oi():536870912,t.lanes|=r,no|=r)}function xl(t,r){if(!We)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function yt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function lA(t,r,a){var l=r.pendingProps;switch(kh(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(r),null;case 1:return yt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),hs(Ut),zn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(cl(r)?ps(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Lp())),yt(r),null;case 26:return a=r.memoizedState,t===null?(ps(r),a!==null?(yt(r),a_(r,a)):(yt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(ps(r),yt(r),a_(r,a)):(yt(r),r.flags&=-16777217):(t.memoizedProps!==l&&ps(r),yt(r),r.flags&=-16777217),null;case 27:gr(r),a=Ae.current;var d=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&ps(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return yt(r),null}t=_e.current,cl(r)?kp(r):(t=av(d,l,a),r.stateNode=t,ps(r))}return yt(r),null;case 5:if(gr(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&ps(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return yt(r),null}if(t=_e.current,cl(r))kp(r);else{switch(d=Ku(Ae.current),t){case 1:t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}t[kt]=r,t[Nt]=l;e:for(d=r.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break e;for(;d.sibling===null;){if(d.return===null||d.return===r)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}r.stateNode=t;e:switch(en(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ps(r)}}return yt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&ps(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(t=Ae.current,cl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,d=_n,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[kt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||J_(t.nodeValue,a)),t||ea(r)}else t=Ku(t).createTextNode(l),t[kt]=r,r.stateNode=t}return yt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=cl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(i(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[kt]=r}else ul(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;yt(r),d=!1}else d=Lp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(ms(r),r):(ms(r),null)}if(ms(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Mu(r,r.updateQueue),yt(r),null;case 4:return zn(),t===null&&Xf(r.stateNode.containerInfo),yt(r),null;case 10:return hs(r.type),yt(r),null;case 19:if(le(zt),d=r.memoizedState,d===null)return yt(r),null;if(l=(r.flags&128)!==0,f=d.rendering,f===null)if(l)xl(d,!1);else{if(Et!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=Nu(t),f!==null){for(r.flags|=128,xl(d,!1),t=f.updateQueue,r.updateQueue=t,Mu(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Mp(a,t),a=a.sibling;return oe(zt,zt.current&1|2),r.child}t=t.sibling}d.tail!==null&&wn()>ju&&(r.flags|=128,l=!0,xl(d,!1),r.lanes=4194304)}else{if(!l)if(t=Nu(f),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Mu(r,t),xl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!We)return yt(r),null}else 2*wn()-d.renderingStartTime>ju&&a!==536870912&&(r.flags|=128,l=!0,xl(d,!1),r.lanes=4194304);d.isBackwards?(f.sibling=r.child,r.child=f):(t=d.last,t!==null?t.sibling=f:r.child=f,d.last=f)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=wn(),r.sibling=null,t=zt.current,oe(zt,l?t&1|2:t&1),r):(yt(r),null);case 22:case 23:return ms(r),$h(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(yt(r),r.subtreeFlags&6&&(r.flags|=8192)):yt(r),a=r.updateQueue,a!==null&&Mu(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&le(ra),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),hs(Ut),yt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function cA(t,r){switch(kh(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return hs(Ut),zn(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return gr(r),null;case 13:if(ms(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));ul()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return le(zt),null;case 4:return zn(),null;case 10:return hs(r.type),null;case 22:case 23:return ms(r),$h(),t!==null&&le(ra),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return hs(Ut),null;case 25:return null;default:return null}}function o_(t,r){switch(kh(r),r.tag){case 3:hs(Ut),zn();break;case 26:case 27:case 5:gr(r);break;case 4:zn();break;case 13:ms(r);break;case 19:le(zt);break;case 10:hs(r.type);break;case 22:case 23:ms(r),$h(),t!==null&&le(ra);break;case 24:hs(Ut)}}function Rl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var f=a.create,E=a.inst;l=f(),E.destroy=l}a=a.next}while(a!==d)}}catch(T){ut(r,r.return,T)}}function Qs(t,r,a){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&t)===t){var E=l.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,d=r;var D=a,q=T;try{q()}catch($){ut(d,D,$)}}}l=l.next}while(l!==f)}}catch($){ut(r,r.return,$)}}function l_(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Xp(r,a)}catch(l){ut(t,t.return,l)}}}function c_(t,r,a){a.props=ia(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ut(t,r,l)}}function Il(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){ut(t,r,d)}}function Dr(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){ut(t,r,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){ut(t,r,d)}else a.current=null}function u_(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){ut(t,t.return,d)}}function Sf(t,r,a){try{var l=t.stateNode;CA(l,t.type,a,r),l[Nt]=r}catch(d){ut(t,t.return,d)}}function d_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ei(t.type)||t.tag===4}function xf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||d_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ei(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Qu));else if(l!==4&&(l===27&&ei(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Rf(t,r,a),t=t.sibling;t!==null;)Rf(t,r,a),t=t.sibling}function Vu(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&ei(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Vu(t,r,a),t=t.sibling;t!==null;)Vu(t,r,a),t=t.sibling}function h_(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);en(r,l,a),r[kt]=t,r[Nt]=a}catch(f){ut(t,t.return,f)}}var ys=!1,xt=!1,If=!1,f_=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function uA(t,r){if(t=t.containerInfo,Zf=Ju,t=Ap(t),Sh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var E=0,T=-1,D=-1,q=0,$=0,ee=t,H=null;t:for(;;){for(var F;ee!==a||d!==0&&ee.nodeType!==3||(T=E+d),ee!==f||l!==0&&ee.nodeType!==3||(D=E+l),ee.nodeType===3&&(E+=ee.nodeValue.length),(F=ee.firstChild)!==null;)H=ee,ee=F;for(;;){if(ee===t)break t;if(H===a&&++q===d&&(T=E),H===f&&++$===l&&(D=E),(F=ee.nextSibling)!==null)break;ee=H,H=ee.parentNode}ee=F}a=T===-1||D===-1?null:{start:T,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Jf={focusedElem:t,selectionRange:a},Ju=!1,Qt=r;Qt!==null;)if(r=Qt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Qt=t;else for(;Qt!==null;){switch(r=Qt,f=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,d=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Re=ia(a.type,d,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Re,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Te){ut(a,a.return,Te)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)nm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":nm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,Qt=t;break}Qt=r.return}}function m_(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ks(t,a),l&4&&Rl(5,a);break;case 1:if(Ks(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(E){ut(a,a.return,E)}else{var d=ia(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(d,r,t.__reactInternalSnapshotBeforeUpdate)}catch(E){ut(a,a.return,E)}}l&64&&l_(a),l&512&&Il(a,a.return);break;case 3:if(Ks(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Xp(t,r)}catch(E){ut(a,a.return,E)}}break;case 27:r===null&&l&4&&h_(a);case 26:case 5:Ks(t,a),r===null&&l&4&&u_(a),l&512&&Il(a,a.return);break;case 12:Ks(t,a);break;case 13:Ks(t,a),l&4&&y_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=vA.bind(null,a),jA(t,a))));break;case 22:if(l=a.memoizedState!==null||ys,!l){r=r!==null&&r.memoizedState!==null||xt,d=ys;var f=xt;ys=l,(xt=r)&&!f?Ys(t,a,(a.subtreeFlags&8772)!==0):Ks(t,a),ys=d,xt=f}break;case 30:break;default:Ks(t,a)}}function g_(t){var r=t.alternate;r!==null&&(t.alternate=null,g_(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Vs(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var mt=null,bn=!1;function _s(t,r,a){for(a=a.child;a!==null;)p_(t,r,a),a=a.sibling}function p_(t,r,a){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(ht,a)}catch{}switch(a.tag){case 26:xt||Dr(a,r),_s(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:xt||Dr(a,r);var l=mt,d=bn;ei(a.type)&&(mt=a.stateNode,bn=!1),_s(t,r,a),jl(a.stateNode),mt=l,bn=d;break;case 5:xt||Dr(a,r);case 6:if(l=mt,d=bn,mt=null,_s(t,r,a),mt=l,bn=d,mt!==null)if(bn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(a.stateNode)}catch(f){ut(a,r,f)}else try{mt.removeChild(a.stateNode)}catch(f){ut(a,r,f)}break;case 18:mt!==null&&(bn?(t=mt,sv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Gl(t)):sv(mt,a.stateNode));break;case 4:l=mt,d=bn,mt=a.stateNode.containerInfo,bn=!0,_s(t,r,a),mt=l,bn=d;break;case 0:case 11:case 14:case 15:xt||Qs(2,a,r),xt||Qs(4,a,r),_s(t,r,a);break;case 1:xt||(Dr(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&c_(a,r,l)),_s(t,r,a);break;case 21:_s(t,r,a);break;case 22:xt=(l=xt)||a.memoizedState!==null,_s(t,r,a),xt=l;break;default:_s(t,r,a)}}function y_(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Gl(t)}catch(a){ut(r,r.return,a)}}function dA(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new f_),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new f_),r;default:throw Error(i(435,t.tag))}}function Nf(t,r){var a=dA(t);r.forEach(function(l){var d=EA.bind(null,t,l);a.has(l)||(a.add(l),l.then(d,d))})}function On(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],f=t,E=r,T=E;e:for(;T!==null;){switch(T.tag){case 27:if(ei(T.type)){mt=T.stateNode,bn=!1;break e}break;case 5:mt=T.stateNode,bn=!1;break e;case 3:case 4:mt=T.stateNode.containerInfo,bn=!0;break e}T=T.return}if(mt===null)throw Error(i(160));p_(f,E,d),mt=null,bn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)__(r,t),r=r.sibling}var lr=null;function __(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:On(r,t),Pn(t),l&4&&(Qs(3,t,t.return),Rl(3,t),Qs(5,t,t.return));break;case 1:On(r,t),Pn(t),l&512&&(xt||a===null||Dr(a,a.return)),l&64&&ys&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=lr;if(On(r,t),Pn(t),l&512&&(xt||a===null||Dr(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[Mi]||f[kt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),en(f,l,a),f[kt]=t,At(f),l=f;break e;case"link":var E=hv("link","href",d).get(l+(a.href||""));if(E){for(var T=0;T<E.length;T++)if(f=E[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(T,1);break t}}f=d.createElement(l),en(f,l,a),d.head.appendChild(f);break;case"meta":if(E=hv("meta","content",d).get(l+(a.content||""))){for(T=0;T<E.length;T++)if(f=E[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(T,1);break t}}f=d.createElement(l),en(f,l,a),d.head.appendChild(f);break;default:throw Error(i(468,l))}f[kt]=t,At(f),l=f}t.stateNode=l}else fv(d,t.type,t.stateNode);else t.stateNode=dv(d,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?fv(d,t.type,t.stateNode):dv(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Sf(t,t.memoizedProps,a.memoizedProps)}break;case 27:On(r,t),Pn(t),l&512&&(xt||a===null||Dr(a,a.return)),a!==null&&l&4&&Sf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(On(r,t),Pn(t),l&512&&(xt||a===null||Dr(a,a.return)),t.flags&32){d=t.stateNode;try{Hn(d,"")}catch(F){ut(t,t.return,F)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,Sf(t,d,a!==null?a.memoizedProps:d)),l&1024&&(If=!0);break;case 6:if(On(r,t),Pn(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(F){ut(t,t.return,F)}}break;case 3:if($u=null,d=lr,lr=Yu(r.containerInfo),On(r,t),lr=d,Pn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Gl(r.containerInfo)}catch(F){ut(t,t.return,F)}If&&(If=!1,v_(t));break;case 4:l=lr,lr=Yu(t.stateNode.containerInfo),On(r,t),Pn(t),lr=l;break;case 12:On(r,t),Pn(t);break;case 13:On(r,t),Pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Vf=wn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Nf(t,l)));break;case 22:d=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,q=ys,$=xt;if(ys=q||d,xt=$||D,On(r,t),xt=$,ys=q,Pn(t),l&8192)e:for(r=t.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(a===null||D||ys||xt||aa(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){D=a=r;try{if(f=D.stateNode,d)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=D.stateNode;var ee=D.memoizedProps.style,H=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;T.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(F){ut(D,D.return,F)}}}else if(r.tag===6){if(a===null){D=r;try{D.stateNode.nodeValue=d?"":D.memoizedProps}catch(F){ut(D,D.return,F)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Nf(t,a))));break;case 19:On(r,t),Pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Nf(t,l)));break;case 30:break;case 21:break;default:On(r,t),Pn(t)}}function Pn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(d_(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,f=xf(t);Vu(t,f,d);break;case 5:var E=a.stateNode;a.flags&32&&(Hn(E,""),a.flags&=-33);var T=xf(t);Vu(t,T,E);break;case 3:case 4:var D=a.stateNode.containerInfo,q=xf(t);Rf(t,q,D);break;default:throw Error(i(161))}}catch($){ut(t,t.return,$)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function v_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;v_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ks(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)m_(t,r.alternate,r),r=r.sibling}function aa(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Qs(4,r,r.return),aa(r);break;case 1:Dr(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&c_(r,r.return,a),aa(r);break;case 27:jl(r.stateNode);case 26:case 5:Dr(r,r.return),aa(r);break;case 22:r.memoizedState===null&&aa(r);break;case 30:aa(r);break;default:aa(r)}t=t.sibling}}function Ys(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,d=t,f=r,E=f.flags;switch(f.tag){case 0:case 11:case 15:Ys(d,f,a),Rl(4,f);break;case 1:if(Ys(d,f,a),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(q){ut(l,l.return,q)}if(l=f,d=l.updateQueue,d!==null){var T=l.stateNode;try{var D=d.shared.hiddenCallbacks;if(D!==null)for(d.shared.hiddenCallbacks=null,d=0;d<D.length;d++)Yp(D[d],T)}catch(q){ut(l,l.return,q)}}a&&E&64&&l_(f),Il(f,f.return);break;case 27:h_(f);case 26:case 5:Ys(d,f,a),a&&l===null&&E&4&&u_(f),Il(f,f.return);break;case 12:Ys(d,f,a);break;case 13:Ys(d,f,a),a&&E&4&&y_(d,f);break;case 22:f.memoizedState===null&&Ys(d,f,a),Il(f,f.return);break;case 30:break;default:Ys(d,f,a)}r=r.sibling}}function Cf(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&fl(a))}function Df(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&fl(t))}function Or(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)E_(t,r,a,l),r=r.sibling}function E_(t,r,a,l){var d=r.flags;switch(r.tag){case 0:case 11:case 15:Or(t,r,a,l),d&2048&&Rl(9,r);break;case 1:Or(t,r,a,l);break;case 3:Or(t,r,a,l),d&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&fl(t)));break;case 12:if(d&2048){Or(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,E=f.id,T=f.onPostCommit;typeof T=="function"&&T(E,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){ut(r,r.return,D)}}else Or(t,r,a,l);break;case 13:Or(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,E=r.alternate,r.memoizedState!==null?f._visibility&2?Or(t,r,a,l):Nl(t,r):f._visibility&2?Or(t,r,a,l):(f._visibility|=2,Ja(t,r,a,l,(r.subtreeFlags&10256)!==0)),d&2048&&Cf(E,r);break;case 24:Or(t,r,a,l),d&2048&&Df(r.alternate,r);break;default:Or(t,r,a,l)}}function Ja(t,r,a,l,d){for(d=d&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var f=t,E=r,T=a,D=l,q=E.flags;switch(E.tag){case 0:case 11:case 15:Ja(f,E,T,D,d),Rl(8,E);break;case 23:break;case 22:var $=E.stateNode;E.memoizedState!==null?$._visibility&2?Ja(f,E,T,D,d):Nl(f,E):($._visibility|=2,Ja(f,E,T,D,d)),d&&q&2048&&Cf(E.alternate,E);break;case 24:Ja(f,E,T,D,d),d&&q&2048&&Df(E.alternate,E);break;default:Ja(f,E,T,D,d)}r=r.sibling}}function Nl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,d=l.flags;switch(l.tag){case 22:Nl(a,l),d&2048&&Cf(l.alternate,l);break;case 24:Nl(a,l),d&2048&&Df(l.alternate,l);break;default:Nl(a,l)}r=r.sibling}}var Cl=8192;function eo(t){if(t.subtreeFlags&Cl)for(t=t.child;t!==null;)w_(t),t=t.sibling}function w_(t){switch(t.tag){case 26:eo(t),t.flags&Cl&&t.memoizedState!==null&&$A(lr,t.memoizedState,t.memoizedProps);break;case 5:eo(t);break;case 3:case 4:var r=lr;lr=Yu(t.stateNode.containerInfo),eo(t),lr=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Cl,Cl=16777216,eo(t),Cl=r):eo(t));break;default:eo(t)}}function T_(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Dl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Qt=l,A_(l,t)}T_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)b_(t),t=t.sibling}function b_(t){switch(t.tag){case 0:case 11:case 15:Dl(t),t.flags&2048&&Qs(9,t,t.return);break;case 3:Dl(t);break;case 12:Dl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,ku(t)):Dl(t);break;default:Dl(t)}}function ku(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Qt=l,A_(l,t)}T_(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Qs(8,r,r.return),ku(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,ku(r));break;default:ku(r)}t=t.sibling}}function A_(t,r){for(;Qt!==null;){var a=Qt;switch(a.tag){case 0:case 11:case 15:Qs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:fl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Qt=l;else e:for(a=t;Qt!==null;){l=Qt;var d=l.sibling,f=l.return;if(g_(l),l===a){Qt=null;break e}if(d!==null){d.return=f,Qt=d;break e}Qt=f}}}var hA={getCacheForType:function(t){var r=an(Ut),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},fA=typeof WeakMap=="function"?WeakMap:Map,tt=0,dt=null,je=null,Fe=0,nt=0,Mn=null,Xs=!1,to=!1,Of=!1,vs=0,Et=0,$s=0,oa=0,Pf=0,Zn=0,no=0,Ol=null,An=null,Mf=!1,Vf=0,ju=1/0,Lu=null,Ws=null,Jt=0,Zs=null,ro=null,so=0,kf=0,jf=null,S_=null,Pl=0,Lf=null;function Vn(){if((tt&2)!==0&&Fe!==0)return Fe&-Fe;if(Q.T!==null){var t=Ga;return t!==0?t:Gf()}return sn()}function x_(){Zn===0&&(Zn=(Fe&536870912)===0||We?Di():536870912);var t=Wn.current;return t!==null&&(t.flags|=32),Zn}function kn(t,r,a){(t===dt&&(nt===2||nt===9)||t.cancelPendingCommit!==null)&&(io(t,0),Js(t,Fe,Zn,!1)),sr(t,a),((tt&2)===0||t!==dt)&&(t===dt&&((tt&2)===0&&(oa|=a),Et===4&&Js(t,Fe,Zn,!1)),Pr(t))}function R_(t,r,a){if((tt&6)!==0)throw Error(i(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||$r(t,r),d=l?pA(t,r):qf(t,r,!0),f=l;do{if(d===0){to&&!l&&Js(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!mA(a)){d=qf(t,r,!1),f=!1;continue}if(d===2){if(f=r,t.errorRecoveryDisabledLanes&f)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var T=t;d=Ol;var D=T.current.memoizedState.isDehydrated;if(D&&(io(T,E).flags|=256),E=qf(T,E,!1),E!==2){if(Of&&!D){T.errorRecoveryDisabledLanes|=f,oa|=f,d=4;break e}f=An,An=d,f!==null&&(An===null?An=f:An.push.apply(An,f))}d=E}if(f=!1,d!==2)continue}}if(d===1){io(t,0),Js(t,r,0,!0);break}e:{switch(l=t,f=d,f){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Js(l,r,Zn,!Xs);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(d=Vf+300-wn(),10<d)){if(Js(l,r,Zn,!Xs),Xr(l,0,!0)!==0)break e;l.timeoutHandle=nv(I_.bind(null,l,a,An,Lu,Mf,r,Zn,oa,no,Xs,f,2,-0,0),d);break e}I_(l,a,An,Lu,Mf,r,Zn,oa,no,Xs,f,0,-0,0)}}break}while(!0);Pr(t)}function I_(t,r,a,l,d,f,E,T,D,q,$,ee,H,F){if(t.timeoutHandle=-1,ee=r.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(zl={stylesheets:null,count:0,unsuspend:XA},w_(r),ee=WA(),ee!==null)){t.cancelPendingCommit=ee(V_.bind(null,t,r,f,a,l,d,E,T,D,$,1,H,F)),Js(t,f,E,!q);return}V_(t,r,f,a,l,d,E,T,D)}function mA(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],f=d.getSnapshot;d=d.value;try{if(!Cn(f(),d))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Js(t,r,a,l){r&=~Pf,r&=~oa,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var d=r;0<d;){var f=31-Bt(d),E=1<<f;l[f]=-1,d&=~E}a!==0&&qn(t,a,r)}function Uu(){return(tt&6)===0?(Ml(0),!1):!0}function Uf(){if(je!==null){if(nt===0)var t=je.return;else t=je,ds=ta=null,tf(t),Wa=null,Al=0,t=je;for(;t!==null;)o_(t.alternate,t),t=t.return;je=null}}function io(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,OA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Uf(),dt=t,je=a=ls(t.current,null),Fe=r,nt=0,Mn=null,Xs=!1,to=$r(t,r),Of=!1,no=Zn=Pf=oa=$s=Et=0,An=Ol=null,Mf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var d=31-Bt(l),f=1<<d;r|=t[d],l&=~f}return vs=r,ou(),a}function N_(t,r){Ve=null,Q.H=xu,r===gl||r===pu?(r=Qp(),nt=3):r===Hp?(r=Qp(),nt=4):nt=r===Ky?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Mn=r,je===null&&(Et=1,Du(t,Kn(r,t.current)))}function C_(){var t=Q.H;return Q.H=xu,t===null?xu:t}function D_(){var t=Q.A;return Q.A=hA,t}function zf(){Et=4,Xs||(Fe&4194048)!==Fe&&Wn.current!==null||(to=!0),($s&134217727)===0&&(oa&134217727)===0||dt===null||Js(dt,Fe,Zn,!1)}function qf(t,r,a){var l=tt;tt|=2;var d=C_(),f=D_();(dt!==t||Fe!==r)&&(Lu=null,io(t,r)),r=!1;var E=Et;e:do try{if(nt!==0&&je!==null){var T=je,D=Mn;switch(nt){case 8:Uf(),E=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(r=!0);var q=nt;if(nt=0,Mn=null,ao(t,T,D,q),a&&to){E=0;break e}break;default:q=nt,nt=0,Mn=null,ao(t,T,D,q)}}gA(),E=Et;break}catch($){N_(t,$)}while(!0);return r&&t.shellSuspendCounter++,ds=ta=null,tt=l,Q.H=d,Q.A=f,je===null&&(dt=null,Fe=0,ou()),E}function gA(){for(;je!==null;)O_(je)}function pA(t,r){var a=tt;tt|=2;var l=C_(),d=D_();dt!==t||Fe!==r?(Lu=null,ju=wn()+500,io(t,r)):to=$r(t,r);e:do try{if(nt!==0&&je!==null){r=je;var f=Mn;t:switch(nt){case 1:nt=0,Mn=null,ao(t,r,f,1);break;case 2:case 9:if(Fp(f)){nt=0,Mn=null,P_(r);break}r=function(){nt!==2&&nt!==9||dt!==t||(nt=7),Pr(t)},f.then(r,r);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:Fp(f)?(nt=0,Mn=null,P_(r)):(nt=0,Mn=null,ao(t,r,f,7));break;case 5:var E=null;switch(je.tag){case 26:E=je.memoizedState;case 5:case 27:var T=je;if(!E||mv(E)){nt=0,Mn=null;var D=T.sibling;if(D!==null)je=D;else{var q=T.return;q!==null?(je=q,zu(q)):je=null}break t}}nt=0,Mn=null,ao(t,r,f,5);break;case 6:nt=0,Mn=null,ao(t,r,f,6);break;case 8:Uf(),Et=6;break e;default:throw Error(i(462))}}yA();break}catch($){N_(t,$)}while(!0);return ds=ta=null,Q.H=l,Q.A=d,tt=a,je!==null?0:(dt=null,Fe=0,ou(),Et)}function yA(){for(;je!==null&&!Fr();)O_(je)}function O_(t){var r=i_(t.alternate,t,vs);t.memoizedProps=t.pendingProps,r===null?zu(t):je=r}function P_(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Jy(a,r,r.pendingProps,r.type,void 0,Fe);break;case 11:r=Jy(a,r,r.pendingProps,r.type.render,r.ref,Fe);break;case 5:tf(r);default:o_(a,r),r=je=Mp(r,vs),r=i_(a,r,vs)}t.memoizedProps=t.pendingProps,r===null?zu(t):je=r}function ao(t,r,a,l){ds=ta=null,tf(r),Wa=null,Al=0;var d=r.return;try{if(aA(t,d,r,a,Fe)){Et=1,Du(t,Kn(a,t.current)),je=null;return}}catch(f){if(d!==null)throw je=d,f;Et=1,Du(t,Kn(a,t.current)),je=null;return}r.flags&32768?(We||l===1?t=!0:to||(Fe&536870912)!==0?t=!1:(Xs=t=!0,(l===2||l===9||l===3||l===6)&&(l=Wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),M_(r,t)):zu(r)}function zu(t){var r=t;do{if((r.flags&32768)!==0){M_(r,Xs);return}t=r.return;var a=lA(r.alternate,r,vs);if(a!==null){je=a;return}if(r=r.sibling,r!==null){je=r;return}je=r=t}while(r!==null);Et===0&&(Et=5)}function M_(t,r){do{var a=cA(t.alternate,t);if(a!==null){a.flags&=32767,je=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){je=t;return}je=t=a}while(t!==null);Et=6,je=null}function V_(t,r,a,l,d,f,E,T,D){t.cancelPendingCommit=null;do qu();while(Jt!==0);if((tt&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(f=r.lanes|r.childLanes,f|=Ch,Pi(t,a,f,E,T,D),t===dt&&(je=dt=null,Fe=0),ro=r,Zs=t,so=a,kf=f,jf=d,S_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,wA(Qr,function(){return z_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,d=ie.p,ie.p=2,E=tt,tt|=4;try{uA(t,r,a)}finally{tt=E,ie.p=d,Q.T=l}}Jt=1,k_(),j_(),L_()}}function k_(){if(Jt===1){Jt=0;var t=Zs,r=ro,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=ie.p;ie.p=2;var d=tt;tt|=4;try{__(r,t);var f=Jf,E=Ap(t.containerInfo),T=f.focusedElem,D=f.selectionRange;if(E!==T&&T&&T.ownerDocument&&bp(T.ownerDocument.documentElement,T)){if(D!==null&&Sh(T)){var q=D.start,$=D.end;if($===void 0&&($=q),"selectionStart"in T)T.selectionStart=q,T.selectionEnd=Math.min($,T.value.length);else{var ee=T.ownerDocument||document,H=ee&&ee.defaultView||window;if(H.getSelection){var F=H.getSelection(),Re=T.textContent.length,Te=Math.min(D.start,Re),ot=D.end===void 0?Te:Math.min(D.end,Re);!F.extend&&Te>ot&&(E=ot,ot=Te,Te=E);var L=Tp(T,Te),V=Tp(T,ot);if(L&&V&&(F.rangeCount!==1||F.anchorNode!==L.node||F.anchorOffset!==L.offset||F.focusNode!==V.node||F.focusOffset!==V.offset)){var z=ee.createRange();z.setStart(L.node,L.offset),F.removeAllRanges(),Te>ot?(F.addRange(z),F.extend(V.node,V.offset)):(z.setEnd(V.node,V.offset),F.addRange(z))}}}}for(ee=[],F=T;F=F.parentNode;)F.nodeType===1&&ee.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ee.length;T++){var J=ee[T];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Ju=!!Zf,Jf=Zf=null}finally{tt=d,ie.p=l,Q.T=a}}t.current=r,Jt=2}}function j_(){if(Jt===2){Jt=0;var t=Zs,r=ro,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=ie.p;ie.p=2;var d=tt;tt|=4;try{m_(t,r.alternate,r)}finally{tt=d,ie.p=l,Q.T=a}}Jt=3}}function L_(){if(Jt===4||Jt===3){Jt=0,wa();var t=Zs,r=ro,a=so,l=S_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Jt=5:(Jt=0,ro=Zs=null,U_(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Ws=null),ct(a),r=r.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(ht,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=Q.T,d=ie.p,ie.p=2,Q.T=null;try{for(var f=t.onRecoverableError,E=0;E<l.length;E++){var T=l[E];f(T.value,{componentStack:T.stack})}}finally{Q.T=r,ie.p=d}}(so&3)!==0&&qu(),Pr(t),d=t.pendingLanes,(a&4194090)!==0&&(d&42)!==0?t===Lf?Pl++:(Pl=0,Lf=t):Pl=0,Ml(0)}}function U_(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,fl(r)))}function qu(t){return k_(),j_(),L_(),z_()}function z_(){if(Jt!==5)return!1;var t=Zs,r=kf;kf=0;var a=ct(so),l=Q.T,d=ie.p;try{ie.p=32>a?32:a,Q.T=null,a=jf,jf=null;var f=Zs,E=so;if(Jt=0,ro=Zs=null,so=0,(tt&6)!==0)throw Error(i(331));var T=tt;if(tt|=4,b_(f.current),E_(f,f.current,E,a),tt=T,Ml(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(ht,f)}catch{}return!0}finally{ie.p=d,Q.T=l,U_(t,r)}}function q_(t,r,a){r=Kn(a,r),r=pf(t.stateNode,r,2),t=Bs(t,r,2),t!==null&&(sr(t,2),Pr(t))}function ut(t,r,a){if(t.tag===3)q_(t,t,a);else for(;r!==null;){if(r.tag===3){q_(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ws===null||!Ws.has(l))){t=Kn(a,t),a=Gy(2),l=Bs(r,a,2),l!==null&&(Qy(a,l,r,t),sr(l,2),Pr(l));break}}r=r.return}}function Bf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new fA;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(a)||(Of=!0,d.add(a),t=_A.bind(null,t,r,a),r.then(t,t))}function _A(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,dt===t&&(Fe&a)===a&&(Et===4||Et===3&&(Fe&62914560)===Fe&&300>wn()-Vf?(tt&2)===0&&io(t,0):Pf|=a,no===Fe&&(no=0)),Pr(t)}function B_(t,r){r===0&&(r=Oi()),t=qa(t,r),t!==null&&(sr(t,r),Pr(t))}function vA(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),B_(t,a)}function EA(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),B_(t,a)}function wA(t,r){return pr(t,r)}var Bu=null,oo=null,Hf=!1,Hu=!1,Ff=!1,la=0;function Pr(t){t!==oo&&t.next===null&&(oo===null?Bu=oo=t:oo=oo.next=t),Hu=!0,Hf||(Hf=!0,bA())}function Ml(t,r){if(!Ff&&Hu){Ff=!0;do for(var a=!1,l=Bu;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var E=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-Bt(42|t)+1)-1,f&=d&~(E&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Q_(l,f))}else f=Fe,f=Xr(l,l===dt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||$r(l,f)||(a=!0,Q_(l,f));l=l.next}while(a);Ff=!1}}function TA(){H_()}function H_(){Hu=Hf=!1;var t=0;la!==0&&(DA()&&(t=la),la=0);for(var r=wn(),a=null,l=Bu;l!==null;){var d=l.next,f=F_(l,r);f===0?(l.next=null,a===null?Bu=d:a.next=d,d===null&&(oo=a)):(a=l,(t!==0||(f&3)!==0)&&(Hu=!0)),l=d}Ml(t)}function F_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var E=31-Bt(f),T=1<<E,D=d[E];D===-1?((T&a)===0||(T&l)!==0)&&(d[E]=Wr(T,r)):D<=r&&(t.expiredLanes|=T),f&=~T}if(r=dt,a=Fe,a=Xr(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(nt===2||nt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&yr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||$r(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&yr(l),ct(a)){case 2:case 8:a=Gr;break;case 32:a=Qr;break;case 268435456:a=Ps;break;default:a=Qr}return l=G_.bind(null,t),a=pr(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&yr(l),t.callbackPriority=2,t.callbackNode=null,2}function G_(t,r){if(Jt!==0&&Jt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(qu()&&t.callbackNode!==a)return null;var l=Fe;return l=Xr(t,t===dt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(R_(t,l,r),F_(t,wn()),t.callbackNode!=null&&t.callbackNode===a?G_.bind(null,t):null)}function Q_(t,r){if(qu())return null;R_(t,r,!0)}function bA(){PA(function(){(tt&6)!==0?pr(Ni,TA):H_()})}function Gf(){return la===0&&(la=Di()),la}function K_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Na(""+t)}function Y_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function AA(t,r,a,l,d){if(r==="submit"&&a&&a.stateNode===d){var f=K_((d[Nt]||null).action),E=l.submitter;E&&(r=(r=E[Nt]||null)?K_(r.formAction):E.getAttribute("formAction"),r!==null&&(f=r,E=null));var T=new Ca("action","action",null,l,d);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(la!==0){var D=E?Y_(d,E):new FormData(d);df(a,{pending:!0,data:D,method:d.method,action:f},null,D)}}else typeof f=="function"&&(T.preventDefault(),D=E?Y_(d,E):new FormData(d),df(a,{pending:!0,data:D,method:d.method,action:f},f,D))},currentTarget:d}]})}}for(var Qf=0;Qf<Nh.length;Qf++){var Kf=Nh[Qf],SA=Kf.toLowerCase(),xA=Kf[0].toUpperCase()+Kf.slice(1);or(SA,"on"+xA)}or(Rp,"onAnimationEnd"),or(Ip,"onAnimationIteration"),or(Np,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(Hb,"onTransitionRun"),or(Fb,"onTransitionStart"),or(Gb,"onTransitionCancel"),or(Cp,"onTransitionEnd"),Jr("onMouseEnter",["mouseout","mouseover"]),Jr("onMouseLeave",["mouseout","mouseover"]),Jr("onPointerEnter",["pointerout","pointerover"]),Jr("onPointerLeave",["pointerout","pointerover"]),ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vl));function X_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var E=l.length-1;0<=E;E--){var T=l[E],D=T.instance,q=T.currentTarget;if(T=T.listener,D!==f&&d.isPropagationStopped())break e;f=T,d.currentTarget=q;try{f(d)}catch($){Cu($)}d.currentTarget=null,f=D}else for(E=0;E<l.length;E++){if(T=l[E],D=T.instance,q=T.currentTarget,T=T.listener,D!==f&&d.isPropagationStopped())break e;f=T,d.currentTarget=q;try{f(d)}catch($){Cu($)}d.currentTarget=null,f=D}}}}function Le(t,r){var a=r[Qo];a===void 0&&(a=r[Qo]=new Set);var l=t+"__bubble";a.has(l)||($_(r,t,2,!1),a.add(l))}function Yf(t,r,a){var l=0;r&&(l|=4),$_(a,t,l,r)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function Xf(t){if(!t[Fu]){t[Fu]=!0,Ko.forEach(function(a){a!=="selectionchange"&&(RA.has(a)||Yf(a,!1,t),Yf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Fu]||(r[Fu]=!0,Yf("selectionchange",!1,r))}}function $_(t,r,a,l){switch(Ev(r)){case 2:var d=eS;break;case 8:d=tS;break;default:d=cm}a=d.bind(null,r,a,t),d=void 0,!Gn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(r,a,{capture:!0,passive:d}):t.addEventListener(r,a,!0):d!==void 0?t.addEventListener(r,a,{passive:d}):t.addEventListener(r,a,!1)}function $f(t,r,a,l,d){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var T=l.stateNode.containerInfo;if(T===d)break;if(E===4)for(E=l.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===d)return;E=E.return}for(;T!==null;){if(E=Zr(T),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){l=f=E;continue e}T=T.parentNode}}l=l.return}Qc(function(){var q=f,$=Fn(a),ee=[];e:{var H=Dp.get(t);if(H!==void 0){var F=Ca,Re=t;switch(t){case"keypress":if(Ar(a)===0)break e;case"keydown":case"keyup":F=ka;break;case"focusin":Re="focus",F=Pa;break;case"focusout":Re="blur",F=Pa;break;case"beforeblur":case"afterblur":F=Pa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Qn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=wh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=eu;break;case Rp:case Ip:case Np:F=Ma;break;case Cp:F=nu;break;case"scroll":case"scrollend":F=Kc;break;case"wheel":F=ja;break;case"copy":case"cut":case"paste":F=Va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=il;break;case"toggle":case"beforetoggle":F=su}var Te=(r&4)!==0,ot=!Te&&(t==="scroll"||t==="scrollend"),L=Te?H!==null?H+"Capture":null:H;Te=[];for(var V=q,z;V!==null;){var J=V;if(z=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||z===null||L===null||(J=qi(V,L),J!=null&&Te.push(kl(V,J,z))),ot)break;V=V.return}0<Te.length&&(H=new F(H,Re,null,a,$),ee.push({event:H,listeners:Te}))}}if((r&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",F=t==="mouseout"||t==="pointerout",H&&a!==ns&&(Re=a.relatedTarget||a.fromElement)&&(Zr(Re)||Re[Bn]))break e;if((F||H)&&(H=$.window===$?$:(H=$.ownerDocument)?H.defaultView||H.parentWindow:window,F?(Re=a.relatedTarget||a.toElement,F=q,Re=Re?Zr(Re):null,Re!==null&&(ot=c(Re),Te=Re.tag,Re!==ot||Te!==5&&Te!==27&&Te!==6)&&(Re=null)):(F=null,Re=q),F!==Re)){if(Te=Qn,J="onMouseLeave",L="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Te=il,J="onPointerLeave",L="onPointerEnter",V="pointer"),ot=F==null?H:Er(F),z=Re==null?H:Er(Re),H=new Te(J,V+"leave",F,a,$),H.target=ot,H.relatedTarget=z,J=null,Zr($)===q&&(Te=new Te(L,V+"enter",Re,a,$),Te.target=z,Te.relatedTarget=ot,J=Te),ot=J,F&&Re)t:{for(Te=F,L=Re,V=0,z=Te;z;z=lo(z))V++;for(z=0,J=L;J;J=lo(J))z++;for(;0<V-z;)Te=lo(Te),V--;for(;0<z-V;)L=lo(L),z--;for(;V--;){if(Te===L||L!==null&&Te===L.alternate)break t;Te=lo(Te),L=lo(L)}Te=null}else Te=null;F!==null&&W_(ee,H,F,Te,!1),Re!==null&&ot!==null&&W_(ee,ot,Re,Te,!0)}}e:{if(H=q?Er(q):window,F=H.nodeName&&H.nodeName.toLowerCase(),F==="select"||F==="input"&&H.type==="file")var ye=pp;else if(Lt(H))if(yp)ye=zb;else{ye=Lb;var ke=jb}else F=H.nodeName,!F||F.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?q&&Zo(q.elementType)&&(ye=pp):ye=Ub;if(ye&&(ye=ye(t,q))){os(ee,ye,a,$);break e}ke&&ke(t,H,q),t==="focusout"&&q&&H.type==="number"&&q.memoizedProps.value!=null&&js(H,"number",H.value)}switch(ke=q?Er(q):window,t){case"focusin":(Lt(ke)||ke.contentEditable==="true")&&(La=ke,xh=q,ll=null);break;case"focusout":ll=xh=La=null;break;case"mousedown":Rh=!0;break;case"contextmenu":case"mouseup":case"dragend":Rh=!1,Sp(ee,a,$);break;case"selectionchange":if(Bb)break;case"keydown":case"keyup":Sp(ee,a,$)}var ve;if(Rr)e:{switch(t){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Be?K(t,a)&&(be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(v&&a.locale!=="ko"&&(Be||be!=="onCompositionStart"?be==="onCompositionEnd"&&Be&&(ve=el()):(br=$,Ls="value"in br?br.value:br.textContent,Be=!0)),ke=Gu(q,be),0<ke.length&&(be=new rl(be,t,null,a,$),ee.push({event:be,listeners:ke}),ve?be.data=ve:(ve=ce(a),ve!==null&&(be.data=ve)))),(ve=y?jt(t,a):He(t,a))&&(be=Gu(q,"onBeforeInput"),0<be.length&&(ke=new rl("onBeforeInput","beforeinput",null,a,$),ee.push({event:ke,listeners:be}),ke.data=ve)),AA(ee,t,q,a,$)}X_(ee,r)})}function kl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Gu(t,r){for(var a=r+"Capture",l=[];t!==null;){var d=t,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=qi(t,a),d!=null&&l.unshift(kl(t,d,f)),d=qi(t,r),d!=null&&l.push(kl(t,d,f))),t.tag===3)return l;t=t.return}return[]}function lo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function W_(t,r,a,l,d){for(var f=r._reactName,E=[];a!==null&&a!==l;){var T=a,D=T.alternate,q=T.stateNode;if(T=T.tag,D!==null&&D===l)break;T!==5&&T!==26&&T!==27||q===null||(D=q,d?(q=qi(a,f),q!=null&&E.unshift(kl(a,q,D))):d||(q=qi(a,f),q!=null&&E.push(kl(a,q,D)))),a=a.return}E.length!==0&&t.push({event:r,listeners:E})}var IA=/\r\n?/g,NA=/\u0000|\uFFFD/g;function Z_(t){return(typeof t=="string"?t:""+t).replace(IA,`
`).replace(NA,"")}function J_(t,r){return r=Z_(r),Z_(t)===r}function Qu(){}function at(t,r,a,l,d,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Hn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Hn(t,""+l);break;case"className":wr(t,"class",l);break;case"tabIndex":wr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":wr(t,a,l);break;case"style":Wo(t,l,f);break;case"data":if(r!=="object"){wr(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Na(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&at(t,r,"name",d.name,d,null),at(t,r,"formEncType",d.formEncType,d,null),at(t,r,"formMethod",d.formMethod,d,null),at(t,r,"formTarget",d.formTarget,d,null)):(at(t,r,"encType",d.encType,d,null),at(t,r,"method",d.method,d,null),at(t,r,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Na(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Qu);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Na(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Le("beforetoggle",t),Le("toggle",t),ks(t,"popover",l);break;case"xlinkActuate":$t(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":$t(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":$t(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":$t(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":$t(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":$t(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":$t(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":$t(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":$t(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ks(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=vh.get(a)||a,ks(t,a,l))}}function Wf(t,r,a,l,d,f){switch(a){case"style":Wo(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Hn(t,l):(typeof l=="number"||typeof l=="bigint")&&Hn(t,""+l);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Qu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Aa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),r=a.slice(2,d?a.length-7:void 0),f=t[Nt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ks(t,a,l)}}}function en(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",t),Le("load",t);var l=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var E=a[f];if(E!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:at(t,r,f,E,a,null)}}d&&at(t,r,"srcSet",a.srcSet,a,null),l&&at(t,r,"src",a.src,a,null);return;case"input":Le("invalid",t);var T=f=E=d=null,D=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var $=a[l];if($!=null)switch(l){case"name":d=$;break;case"type":E=$;break;case"checked":D=$;break;case"defaultChecked":q=$;break;case"value":f=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,r));break;default:at(t,r,l,$,a,null)}}Li(t,f,T,D,q,E,d,!1),Ia(t);return;case"select":Le("invalid",t),l=E=f=null;for(d in a)if(a.hasOwnProperty(d)&&(T=a[d],T!=null))switch(d){case"value":f=T;break;case"defaultValue":E=T;break;case"multiple":l=T;default:at(t,r,d,T,a,null)}r=f,a=E,t.multiple=!!l,r!=null?ts(t,!!l,r,!1):a!=null&&ts(t,!!l,a,!0);return;case"textarea":Le("invalid",t),f=d=l=null;for(E in a)if(a.hasOwnProperty(E)&&(T=a[E],T!=null))switch(E){case"value":l=T;break;case"defaultValue":d=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:at(t,r,E,T,a,null)}Ui(t,l,d,f),Ia(t);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:at(t,r,D,l,a,null)}return;case"dialog":Le("beforetoggle",t),Le("toggle",t),Le("cancel",t),Le("close",t);break;case"iframe":case"object":Le("load",t);break;case"video":case"audio":for(l=0;l<Vl.length;l++)Le(Vl[l],t);break;case"image":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"embed":case"source":case"link":Le("error",t),Le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:at(t,r,q,l,a,null)}return;default:if(Zo(r)){for($ in a)a.hasOwnProperty($)&&(l=a[$],l!==void 0&&Wf(t,r,$,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&at(t,r,T,l,a,null))}function CA(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,E=null,T=null,D=null,q=null,$=null;for(F in a){var ee=a[F];if(a.hasOwnProperty(F)&&ee!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":D=ee;default:l.hasOwnProperty(F)||at(t,r,F,null,l,ee)}}for(var H in l){var F=l[H];if(ee=a[H],l.hasOwnProperty(H)&&(F!=null||ee!=null))switch(H){case"type":f=F;break;case"name":d=F;break;case"checked":q=F;break;case"defaultChecked":$=F;break;case"value":E=F;break;case"defaultValue":T=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,r));break;default:F!==ee&&at(t,r,H,F,l,ee)}}Nn(t,E,T,D,q,$,f,d);return;case"select":F=E=T=H=null;for(f in a)if(D=a[f],a.hasOwnProperty(f)&&D!=null)switch(f){case"value":break;case"multiple":F=D;default:l.hasOwnProperty(f)||at(t,r,f,null,l,D)}for(d in l)if(f=l[d],D=a[d],l.hasOwnProperty(d)&&(f!=null||D!=null))switch(d){case"value":H=f;break;case"defaultValue":T=f;break;case"multiple":E=f;default:f!==D&&at(t,r,d,f,l,D)}r=T,a=E,l=F,H!=null?ts(t,!!a,H,!1):!!l!=!!a&&(r!=null?ts(t,!!a,r,!0):ts(t,!!a,a?[]:"",!1));return;case"textarea":F=H=null;for(T in a)if(d=a[T],a.hasOwnProperty(T)&&d!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:at(t,r,T,null,l,d)}for(E in l)if(d=l[E],f=a[E],l.hasOwnProperty(E)&&(d!=null||f!=null))switch(E){case"value":H=d;break;case"defaultValue":F=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==f&&at(t,r,E,d,l,f)}st(t,H,F);return;case"option":for(var Re in a)if(H=a[Re],a.hasOwnProperty(Re)&&H!=null&&!l.hasOwnProperty(Re))switch(Re){case"selected":t.selected=!1;break;default:at(t,r,Re,null,l,H)}for(D in l)if(H=l[D],F=a[D],l.hasOwnProperty(D)&&H!==F&&(H!=null||F!=null))switch(D){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:at(t,r,D,H,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)H=a[Te],a.hasOwnProperty(Te)&&H!=null&&!l.hasOwnProperty(Te)&&at(t,r,Te,null,l,H);for(q in l)if(H=l[q],F=a[q],l.hasOwnProperty(q)&&H!==F&&(H!=null||F!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,r));break;default:at(t,r,q,H,l,F)}return;default:if(Zo(r)){for(var ot in a)H=a[ot],a.hasOwnProperty(ot)&&H!==void 0&&!l.hasOwnProperty(ot)&&Wf(t,r,ot,void 0,l,H);for($ in l)H=l[$],F=a[$],!l.hasOwnProperty($)||H===F||H===void 0&&F===void 0||Wf(t,r,$,H,l,F);return}}for(var L in a)H=a[L],a.hasOwnProperty(L)&&H!=null&&!l.hasOwnProperty(L)&&at(t,r,L,null,l,H);for(ee in l)H=l[ee],F=a[ee],!l.hasOwnProperty(ee)||H===F||H==null&&F==null||at(t,r,ee,H,l,F)}var Zf=null,Jf=null;function Ku(t){return t.nodeType===9?t:t.ownerDocument}function ev(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function em(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var tm=null;function DA(){var t=window.event;return t&&t.type==="popstate"?t===tm?!1:(tm=t,!0):(tm=null,!1)}var nv=typeof setTimeout=="function"?setTimeout:void 0,OA=typeof clearTimeout=="function"?clearTimeout:void 0,rv=typeof Promise=="function"?Promise:void 0,PA=typeof queueMicrotask=="function"?queueMicrotask:typeof rv<"u"?function(t){return rv.resolve(null).then(t).catch(MA)}:nv;function MA(t){setTimeout(function(){throw t})}function ei(t){return t==="head"}function sv(t,r){var a=r,l=0,d=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var E=t.ownerDocument;if(a&1&&jl(E.documentElement),a&2&&jl(E.body),a&4)for(a=E.head,jl(a),E=a.firstChild;E;){var T=E.nextSibling,D=E.nodeName;E[Mi]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=T}}if(d===0){t.removeChild(f),Gl(r);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Gl(r)}function nm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":nm(a),Vs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function VA(t,r,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Mi])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=cr(t.nextSibling),t===null)break}return null}function kA(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=cr(t.nextSibling),t===null))return null;return t}function rm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function jA(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function cr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var sm=null;function iv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function av(t,r,a){switch(r=Ku(a),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function jl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Vs(t)}var Jn=new Map,ov=new Set;function Yu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Es=ie.d;ie.d={f:LA,r:UA,D:zA,C:qA,L:BA,m:HA,X:GA,S:FA,M:QA};function LA(){var t=Es.f(),r=Uu();return t||r}function UA(t){var r=vr(t);r!==null&&r.tag===5&&r.type==="form"?Ry(r):Es.r(t)}var co=typeof document>"u"?null:document;function lv(t,r,a){var l=co;if(l&&typeof r=="string"&&r){var d=Ct(r);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),ov.has(d)||(ov.add(d),t={rel:t,crossOrigin:a,href:r},l.querySelector(d)===null&&(r=l.createElement("link"),en(r,"link",t),At(r),l.head.appendChild(r)))}}function zA(t){Es.D(t),lv("dns-prefetch",t,null)}function qA(t,r){Es.C(t,r),lv("preconnect",t,r)}function BA(t,r,a){Es.L(t,r,a);var l=co;if(l&&t&&r){var d='link[rel="preload"][as="'+Ct(r)+'"]';r==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Ct(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Ct(a.imageSizes)+'"]')):d+='[href="'+Ct(t)+'"]';var f=d;switch(r){case"style":f=uo(t);break;case"script":f=ho(t)}Jn.has(f)||(t=w({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Jn.set(f,t),l.querySelector(d)!==null||r==="style"&&l.querySelector(Ll(f))||r==="script"&&l.querySelector(Ul(f))||(r=l.createElement("link"),en(r,"link",t),At(r),l.head.appendChild(r)))}}function HA(t,r){Es.m(t,r);var a=co;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+Ct(l)+'"][href="'+Ct(t)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=ho(t)}if(!Jn.has(f)&&(t=w({rel:"modulepreload",href:t},r),Jn.set(f,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ul(f)))return}l=a.createElement("link"),en(l,"link",t),At(l),a.head.appendChild(l)}}}function FA(t,r,a){Es.S(t,r,a);var l=co;if(l&&t){var d=gn(l).hoistableStyles,f=uo(t);r=r||"default";var E=d.get(f);if(!E){var T={loading:0,preload:null};if(E=l.querySelector(Ll(f)))T.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Jn.get(f))&&im(t,a);var D=E=l.createElement("link");At(D),en(D,"link",t),D._p=new Promise(function(q,$){D.onload=q,D.onerror=$}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Xu(E,r,l)}E={type:"stylesheet",instance:E,count:1,state:T},d.set(f,E)}}}function GA(t,r){Es.X(t,r);var a=co;if(a&&t){var l=gn(a).hoistableScripts,d=ho(t),f=l.get(d);f||(f=a.querySelector(Ul(d)),f||(t=w({src:t,async:!0},r),(r=Jn.get(d))&&am(t,r),f=a.createElement("script"),At(f),en(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function QA(t,r){Es.M(t,r);var a=co;if(a&&t){var l=gn(a).hoistableScripts,d=ho(t),f=l.get(d);f||(f=a.querySelector(Ul(d)),f||(t=w({src:t,async:!0,type:"module"},r),(r=Jn.get(d))&&am(t,r),f=a.createElement("script"),At(f),en(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function cv(t,r,a,l){var d=(d=Ae.current)?Yu(d):null;if(!d)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=uo(a.href),a=gn(d).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=uo(a.href);var f=gn(d).hoistableStyles,E=f.get(t);if(E||(d=d.ownerDocument||d,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,E),(f=d.querySelector(Ll(t)))&&!f._p&&(E.instance=f,E.state.loading=5),Jn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Jn.set(t,a),f||KA(d,t,a,E.state))),r&&l===null)throw Error(i(528,""));return E}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ho(a),a=gn(d).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function uo(t){return'href="'+Ct(t)+'"'}function Ll(t){return'link[rel="stylesheet"]['+t+"]"}function uv(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function KA(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),en(r,"link",a),At(r),t.head.appendChild(r))}function ho(t){return'[src="'+Ct(t)+'"]'}function Ul(t){return"script[async]"+t}function dv(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Ct(a.href)+'"]');if(l)return r.instance=l,At(l),l;var d=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),At(l),en(l,"style",d),Xu(l,a.precedence,t),r.instance=l;case"stylesheet":d=uo(a.href);var f=t.querySelector(Ll(d));if(f)return r.state.loading|=4,r.instance=f,At(f),f;l=uv(a),(d=Jn.get(d))&&im(l,d),f=(t.ownerDocument||t).createElement("link"),At(f);var E=f;return E._p=new Promise(function(T,D){E.onload=T,E.onerror=D}),en(f,"link",l),r.state.loading|=4,Xu(f,a.precedence,t),r.instance=f;case"script":return f=ho(a.src),(d=t.querySelector(Ul(f)))?(r.instance=d,At(d),d):(l=a,(d=Jn.get(f))&&(l=w({},a),am(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),At(d),en(d,"link",l),t.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Xu(l,a.precedence,t));return r.instance}function Xu(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,E=0;E<l.length;E++){var T=l[E];if(T.dataset.precedence===r)f=T;else if(f!==d)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function im(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function am(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var $u=null;function hv(t,r,a){if($u===null){var l=new Map,d=$u=new Map;d.set(a,l)}else d=$u,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var f=a[d];if(!(f[Mi]||f[kt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(r)||"";E=t+E;var T=l.get(E);T?T.push(f):l.set(E,[f])}}return l}function fv(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function YA(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function mv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var zl=null;function XA(){}function $A(t,r,a){if(zl===null)throw Error(i(475));var l=zl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=uo(a.href),f=t.querySelector(Ll(d));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Wu.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=f,At(f);return}f=t.ownerDocument||t,a=uv(a),(d=Jn.get(d))&&im(a,d),f=f.createElement("link"),At(f);var E=f;E._p=new Promise(function(T,D){E.onload=T,E.onerror=D}),en(f,"link",a),r.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Wu.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function WA(){if(zl===null)throw Error(i(475));var t=zl;return t.stylesheets&&t.count===0&&om(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&om(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Wu(){if(this.count--,this.count===0){if(this.stylesheets)om(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Zu=null;function om(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Zu=new Map,r.forEach(ZA,t),Zu=null,Wu.call(t))}function ZA(t,r){if(!(r.state.loading&4)){var a=Zu.get(t);if(a)var l=a.get(null);else{a=new Map,Zu.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var E=d[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}d=r.instance,E=d.getAttribute("data-precedence"),f=a.get(E)||l,f===l&&a.set(null,d),a.set(E,d),this.count++,l=Wu.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),r.state.loading|=4}}var ql={$$typeof:se,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function JA(t,r,a,l,d,f,E,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rr(0),this.hiddenUpdates=rr(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function gv(t,r,a,l,d,f,E,T,D,q,$,ee){return t=new JA(t,r,a,E,T,D,q,ee),r=1,f===!0&&(r|=24),f=Dn(3,null,null,r),t.current=f,f.stateNode=t,r=qh(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Gh(f),t}function pv(t){return t?(t=Ba,t):Ba}function yv(t,r,a,l,d,f){d=pv(d),l.context===null?l.context=d:l.pendingContext=d,l=qs(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Bs(t,l,r),a!==null&&(kn(a,t,r),yl(a,t,r))}function _v(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function lm(t,r){_v(t,r),(t=t.alternate)&&_v(t,r)}function vv(t){if(t.tag===13){var r=qa(t,67108864);r!==null&&kn(r,t,67108864),lm(t,67108864)}}var Ju=!0;function eS(t,r,a,l){var d=Q.T;Q.T=null;var f=ie.p;try{ie.p=2,cm(t,r,a,l)}finally{ie.p=f,Q.T=d}}function tS(t,r,a,l){var d=Q.T;Q.T=null;var f=ie.p;try{ie.p=8,cm(t,r,a,l)}finally{ie.p=f,Q.T=d}}function cm(t,r,a,l){if(Ju){var d=um(l);if(d===null)$f(t,r,l,ed,a),wv(t,l);else if(rS(d,t,r,a,l))l.stopPropagation();else if(wv(t,l),r&4&&-1<nS.indexOf(t)){for(;d!==null;){var f=vr(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=In(f.pendingLanes);if(E!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var D=1<<31-Bt(E);T.entanglements[1]|=D,E&=~D}Pr(f),(tt&6)===0&&(ju=wn()+500,Ml(0))}}break;case 13:T=qa(f,2),T!==null&&kn(T,f,2),Uu(),lm(f,2)}if(f=um(l),f===null&&$f(t,r,l,ed,a),f===d)break;d=f}d!==null&&l.stopPropagation()}else $f(t,r,l,null,a)}}function um(t){return t=Fn(t),dm(t)}var ed=null;function dm(t){if(ed=null,t=Zr(t),t!==null){var r=c(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=h(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return ed=t,null}function Ev(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ho()){case Ni:return 2;case Gr:return 8;case Qr:case Fo:return 32;case Ps:return 268435456;default:return 32}default:return 32}}var hm=!1,ti=null,ni=null,ri=null,Bl=new Map,Hl=new Map,si=[],nS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wv(t,r){switch(t){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":ri=null;break;case"pointerover":case"pointerout":Bl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(r.pointerId)}}function Fl(t,r,a,l,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},r!==null&&(r=vr(r),r!==null&&vv(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),t)}function rS(t,r,a,l,d){switch(r){case"focusin":return ti=Fl(ti,t,r,a,l,d),!0;case"dragenter":return ni=Fl(ni,t,r,a,l,d),!0;case"mouseover":return ri=Fl(ri,t,r,a,l,d),!0;case"pointerover":var f=d.pointerId;return Bl.set(f,Fl(Bl.get(f)||null,t,r,a,l,d)),!0;case"gotpointercapture":return f=d.pointerId,Hl.set(f,Fl(Hl.get(f)||null,t,r,a,l,d)),!0}return!1}function Tv(t){var r=Zr(t.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){t.blockedOn=r,Uc(t.priority,function(){if(a.tag===13){var l=Vn();l=fe(l);var d=qa(a,l);d!==null&&kn(d,a,l),lm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function td(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=um(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);ns=l,a.target.dispatchEvent(l),ns=null}else return r=vr(a),r!==null&&vv(r),t.blockedOn=a,!1;r.shift()}return!0}function bv(t,r,a){td(t)&&a.delete(r)}function sS(){hm=!1,ti!==null&&td(ti)&&(ti=null),ni!==null&&td(ni)&&(ni=null),ri!==null&&td(ri)&&(ri=null),Bl.forEach(bv),Hl.forEach(bv)}function nd(t,r){t.blockedOn===r&&(t.blockedOn=null,hm||(hm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,sS)))}var rd=null;function Av(t){rd!==t&&(rd=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){rd===t&&(rd=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],d=t[r+2];if(typeof l!="function"){if(dm(l||a)===null)continue;break}var f=vr(a);f!==null&&(t.splice(r,3),r-=3,df(f,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function Gl(t){function r(D){return nd(D,t)}ti!==null&&nd(ti,t),ni!==null&&nd(ni,t),ri!==null&&nd(ri,t),Bl.forEach(r),Hl.forEach(r);for(var a=0;a<si.length;a++){var l=si[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<si.length&&(a=si[0],a.blockedOn===null);)Tv(a),a.blockedOn===null&&si.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],f=a[l+1],E=d[Nt]||null;if(typeof f=="function")E||Av(a);else if(E){var T=null;if(f&&f.hasAttribute("formAction")){if(d=f,E=f[Nt]||null)T=E.formAction;else if(dm(d)!==null)continue}else T=E.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),Av(a)}}}function fm(t){this._internalRoot=t}sd.prototype.render=fm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=Vn();yv(a,l,t,r,null,null)},sd.prototype.unmount=fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;yv(t.current,2,null,t,null,null),Uu(),r[Bn]=null}};function sd(t){this._internalRoot=t}sd.prototype.unstable_scheduleHydration=function(t){if(t){var r=sn();t={blockedOn:null,target:t,priority:r};for(var a=0;a<si.length&&r!==0&&r<si[a].priority;a++);si.splice(a,0,t),a===0&&Tv(t)}};var Sv=e.version;if(Sv!=="19.1.1")throw Error(i(527,Sv,"19.1.1"));ie.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=g(r),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var iS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!id.isDisabled&&id.supportsFiber)try{ht=id.inject(iS),$e=id}catch{}}return Kl.createRoot=function(t,r){if(!o(t))throw Error(i(299));var a=!1,l="",d=qy,f=By,E=Hy,T=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(T=r.unstable_transitionCallbacks)),r=gv(t,1,!1,null,null,a,l,d,f,E,T,null),t[Bn]=r.current,Xf(t),new fm(r)},Kl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(i(299));var l=!1,d="",f=qy,E=By,T=Hy,D=null,q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(q=a.formState)),r=gv(t,1,!0,r,a??null,l,d,f,E,T,D,q),r.context=pv(null),a=r.current,l=Vn(),l=fe(l),d=qs(l),d.callback=null,Bs(a,d,l),a=l,r.current.lanes=a,sr(r,a),Pr(r),t[Bn]=r.current,Xf(t),new sd(r)},Kl.version="19.1.1",Kl}var Vv;function pS(){if(Vv)return pm.exports;Vv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),pm.exports=gS(),pm.exports}var yS=pS();const _S=xE(yS);var Ze=(s=>(s[s.Setup=0]="Setup",s[s.Login=1]="Login",s[s.Profile=2]="Profile",s[s.Shop=3]="Shop",s[s.PackSelection=4]="PackSelection",s[s.RoundConfiguration=5]="RoundConfiguration",s[s.Game=6]="Game",s[s.RoundEnd=7]="RoundEnd",s[s.GameEnd=8]="GameEnd",s))(Ze||{});const ad={CHANGES_BEFORE_AD:3,MAX_CHANGE_ATTEMPTS:10};var er=(s=>(s.Pack="pack",s.Question="question",s.Dare="dare",s))(er||{}),nc=(s=>(s.Pending="pending",s.Discarded="discarded",s.Possible="possible",s.Accepted="accepted",s))(nc||{});const gt={MAX_SUGGESTIONS_PER_DAY:5,MAX_SUGGESTIONS_PER_WEEK:15,MIN_TITLE_LENGTH:5,MAX_TITLE_LENGTH:100,MIN_CONTENT_LENGTH:10,MAX_CONTENT_LENGTH:500},Rn=({children:s,className:e})=>p.jsx("div",{className:`bg-gray-800 border border-purple-500/30 rounded-2xl shadow-lg shadow-purple-900/20 p-6 sm:p-8 ${e}`,children:s}),vS=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Em=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),ES=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),RE=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),vo=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),wS=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),IE=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),TS=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),bS=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),AS=({players:s,setPlayers:e})=>{const[n,i]=te.useState(""),o=h=>{h.preventDefault(),n.trim()&&!s.includes(n.trim())&&(e([...s,n.trim()]),i(""))},c=h=>{e(s.filter((m,g)=>g!==h))};return p.jsxs(Rn,{children:[p.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-pink-400",children:"Aadir Jugadores"}),p.jsxs("form",{onSubmit:o,className:"flex flex-col gap-2 mb-4",children:[p.jsx("input",{type:"text",value:n,onChange:h=>i(h.target.value),placeholder:"Nombre del jugador",className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-purple-500"}),p.jsx("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md transition text-base",children:"Aadir"})]}),p.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:s.map((h,m)=>p.jsxs("li",{className:"flex justify-between items-center bg-gray-700/50 p-2 rounded-md animate-fade-in",children:[p.jsx("span",{className:"font-medium",children:h}),p.jsx("button",{onClick:()=>c(m),className:"text-gray-400 hover:text-red-500 transition",children:p.jsx(vS,{className:"w-5 h-5"})})]},m))})]})},De=({children:s,variant:e="primary",className:n,...i})=>{const o="px-6 py-3 font-bold rounded-lg text-white transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 disabled:opacity-50 disabled:cursor-not-allowed",c={primary:"bg-purple-600 hover:bg-purple-700 focus:ring-purple-500/50 shadow-lg shadow-purple-600/30",secondary:"bg-pink-500 hover:bg-pink-600 focus:ring-pink-500/50 shadow-lg shadow-pink-500/30",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500/50"};return p.jsx("button",{className:`${o} ${c[e]} ${n}`,...i,children:s})},SS=()=>{};var kv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},xS=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const o=s[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],h=s[n++],m=s[n++],g=((o&7)<<18|(c&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const c=s[n++],h=s[n++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},CE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const c=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,_=g?s[o+2]:0,w=c>>2,b=(c&3)<<4|m>>4;let S=(m&15)<<2|_>>6,N=_&63;g||(N=64,h||(S=64)),i.push(n[w],n[b],n[S],n[N])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(NE(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):xS(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],m=o<s.length?n[s.charAt(o)]:0;++o;const _=o<s.length?n[s.charAt(o)]:64;++o;const b=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||m==null||_==null||b==null)throw new RS;const S=c<<2|m>>4;if(i.push(S),_!==64){const N=m<<4&240|_>>2;if(i.push(N),b!==64){const j=_<<6&192|b;i.push(j)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class RS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IS=function(s){const e=NE(s);return CE.encodeByteArray(e,!0)},Sd=function(s){return IS(s).replace(/\./g,"")},DE=function(s){try{return CE.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=()=>NS().__FIREBASE_DEFAULTS__,DS=()=>{if(typeof process>"u"||typeof kv>"u")return;const s=kv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},OS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&DE(s[1]);return e&&JSON.parse(e)},Xd=()=>{try{return SS()||CS()||DS()||OS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},OE=s=>{var e,n;return(n=(e=Xd())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},PS=s=>{const e=OE(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},PE=()=>{var s;return(s=Xd())==null?void 0:s.config},ME=s=>{var e;return(e=Xd())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function VE(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Sd(JSON.stringify(n)),Sd(JSON.stringify(h)),""].join(".")}const rc={};function kS(){const s={prod:[],emulator:[]};for(const e of Object.keys(rc))rc[e]?s.emulator.push(e):s.prod.push(e);return s}function jS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let jv=!1;function kE(s,e){if(typeof window>"u"||typeof document>"u"||!Mo(window.location.host)||rc[s]===e||rc[s]||jv)return;rc[s]=e;function n(S){return`__firebase__banner__${S}`}const i="__firebase__banner",c=kS().prod.length>0;function h(){const S=document.getElementById(i);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,N){S.setAttribute("width","24"),S.setAttribute("id",N),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function _(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{jv=!0,h()},S}function w(S,N){S.setAttribute("id",N),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function b(){const S=jS(i),N=n("text"),j=document.getElementById(N)||document.createElement("span"),G=n("learnmore"),B=document.getElementById(G)||document.createElement("a"),ae=n("preprendIcon"),re=document.getElementById(ae)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const se=S.element;m(se),w(B,G);const ge=_();g(re,ae),se.append(re,j,B,ge),document.body.appendChild(se)}c?(j.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function US(){var e;const s=(e=Xd())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function BS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HS(){const s=fn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function FS(){return!US()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GS(){try{return typeof indexedDB=="object"}catch{return!1}}function QS(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="FirebaseError";class Ns extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=KS,Object.setPrototypeOf(this,Ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bc.prototype.create)}}class bc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?YS(c,i):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Ns(o,m,i)}}function YS(s,e){return s.replace(XS,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const XS=/\{\$([^}]+)}/g;function $S(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ha(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const c=s[o],h=e[o];if(Lv(c)&&Lv(h)){if(!ha(c,h))return!1}else if(c!==h)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Lv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $l(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Wl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function WS(s,e){const n=new ZS(s,e);return n.subscribe.bind(n)}class ZS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");JS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=wm),o.error===void 0&&(o.error=wm),o.complete===void 0&&(o.complete=wm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function wm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(s){return s&&s._delegate?s._delegate:s}class fa{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new MS;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nx(e))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ca){return this.instances.has(e)}getOptions(e=ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);i===m&&h.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:tx(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ca){return this.component?this.component.multipleInstances?e:ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tx(s){return s===ca?void 0:s}function nx(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ex(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ue||(Ue={}));const sx={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},ix=Ue.INFO,ax={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},ox=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=ax[e];if(o)console[o](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cg{constructor(e){this.name=e,this._logLevel=ix,this._logHandler=ox,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const lx=(s,e)=>e.some(n=>s instanceof n);let Uv,zv;function cx(){return Uv||(Uv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ux(){return zv||(zv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jE=new WeakMap,Mm=new WeakMap,LE=new WeakMap,Tm=new WeakMap,ug=new WeakMap;function dx(s){const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",h)},c=()=>{n(hi(s.result)),o()},h=()=>{i(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&jE.set(n,s)}).catch(()=>{}),ug.set(e,s),e}function hx(s){if(Mm.has(s))return;const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",h),s.removeEventListener("abort",h)},c=()=>{n(),o()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",h),s.addEventListener("abort",h)});Mm.set(s,e)}let Vm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Mm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||LE.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hi(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function fx(s){Vm=s(Vm)}function mx(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(bm(this),e,...n);return LE.set(i,e.sort?e.sort():[e]),hi(i)}:ux().includes(s)?function(...e){return s.apply(bm(this),e),hi(jE.get(this))}:function(...e){return hi(s.apply(bm(this),e))}}function gx(s){return typeof s=="function"?mx(s):(s instanceof IDBTransaction&&hx(s),lx(s,cx())?new Proxy(s,Vm):s)}function hi(s){if(s instanceof IDBRequest)return dx(s);if(Tm.has(s))return Tm.get(s);const e=gx(s);return e!==s&&(Tm.set(s,e),ug.set(e,s)),e}const bm=s=>ug.get(s);function px(s,e,{blocked:n,upgrade:i,blocking:o,terminated:c}={}){const h=indexedDB.open(s,e),m=hi(h);return i&&h.addEventListener("upgradeneeded",g=>{i(hi(h.result),g.oldVersion,g.newVersion,hi(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const yx=["get","getKey","getAll","getAllKeys","count"],_x=["put","add","delete","clear"],Am=new Map;function qv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Am.get(e))return Am.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=_x.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||yx.includes(n)))return;const c=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return i&&(_=_.index(m.shift())),(await Promise.all([_[n](...m),o&&g.done]))[0]};return Am.set(e,c),c}fx(s=>({...s,get:(e,n,i)=>qv(e,n)||s.get(e,n,i),has:(e,n)=>!!qv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ex(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Ex(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const km="@firebase/app",Bv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new cg("@firebase/app"),wx="@firebase/app-compat",Tx="@firebase/analytics-compat",bx="@firebase/analytics",Ax="@firebase/app-check-compat",Sx="@firebase/app-check",xx="@firebase/auth",Rx="@firebase/auth-compat",Ix="@firebase/database",Nx="@firebase/data-connect",Cx="@firebase/database-compat",Dx="@firebase/functions",Ox="@firebase/functions-compat",Px="@firebase/installations",Mx="@firebase/installations-compat",Vx="@firebase/messaging",kx="@firebase/messaging-compat",jx="@firebase/performance",Lx="@firebase/performance-compat",Ux="@firebase/remote-config",zx="@firebase/remote-config-compat",qx="@firebase/storage",Bx="@firebase/storage-compat",Hx="@firebase/firestore",Fx="@firebase/ai",Gx="@firebase/firestore-compat",Qx="firebase",Kx="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="[DEFAULT]",Yx={[km]:"fire-core",[wx]:"fire-core-compat",[bx]:"fire-analytics",[Tx]:"fire-analytics-compat",[Sx]:"fire-app-check",[Ax]:"fire-app-check-compat",[xx]:"fire-auth",[Rx]:"fire-auth-compat",[Ix]:"fire-rtdb",[Nx]:"fire-data-connect",[Cx]:"fire-rtdb-compat",[Dx]:"fire-fn",[Ox]:"fire-fn-compat",[Px]:"fire-iid",[Mx]:"fire-iid-compat",[Vx]:"fire-fcm",[kx]:"fire-fcm-compat",[jx]:"fire-perf",[Lx]:"fire-perf-compat",[Ux]:"fire-rc",[zx]:"fire-rc-compat",[qx]:"fire-gcs",[Bx]:"fire-gcs-compat",[Hx]:"fire-fst",[Gx]:"fire-fst-compat",[Fx]:"fire-vertex","fire-js":"fire-js",[Qx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Map,Xx=new Map,Lm=new Map;function Hv(s,e){try{s.container.addComponent(e)}catch(n){As.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function So(s){const e=s.name;if(Lm.has(e))return As.debug(`There were multiple attempts to register component ${e}.`),!1;Lm.set(e,s);for(const n of xd.values())Hv(n,s);for(const n of Xx.values())Hv(n,s);return!0}function dg(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function xn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fi=new bc("app","Firebase",$x);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new fa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=Kx;function UE(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:jm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw fi.create("bad-app-name",{appName:String(o)});if(n||(n=PE()),!n)throw fi.create("no-options");const c=xd.get(o);if(c){if(ha(n,c.options)&&ha(i,c.config))return c;throw fi.create("duplicate-app",{appName:o})}const h=new rx(o);for(const g of Lm.values())h.addComponent(g);const m=new Wx(n,i,h);return xd.set(o,m),m}function zE(s=jm){const e=xd.get(s);if(!e&&s===jm&&PE())return UE();if(!e)throw fi.create("no-app",{appName:s});return e}function mi(s,e,n){let i=Yx[s]??s;n&&(i+=`-${n}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),As.warn(h.join(" "));return}So(new fa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="firebase-heartbeat-database",Jx=1,dc="firebase-heartbeat-store";let Sm=null;function qE(){return Sm||(Sm=px(Zx,Jx,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(dc)}catch(n){console.warn(n)}}}}).catch(s=>{throw fi.create("idb-open",{originalErrorMessage:s.message})})),Sm}async function eR(s){try{const n=(await qE()).transaction(dc),i=await n.objectStore(dc).get(BE(s));return await n.done,i}catch(e){if(e instanceof Ns)As.warn(e.message);else{const n=fi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});As.warn(n.message)}}}async function Fv(s,e){try{const i=(await qE()).transaction(dc,"readwrite");await i.objectStore(dc).put(e,BE(s)),await i.done}catch(n){if(n instanceof Ns)As.warn(n.message);else{const i=fi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});As.warn(i.message)}}}function BE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=1024,nR=30;class rR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Gv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>nR){const h=aR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){As.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Gv(),{heartbeatsToSend:i,unsentEntries:o}=sR(this._heartbeatsCache.heartbeats),c=Sd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return As.warn(n),""}}}function Gv(){return new Date().toISOString().substring(0,10)}function sR(s,e=tR){const n=[];let i=s.slice();for(const o of s){const c=n.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),Qv(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Qv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class iR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GS()?QS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Fv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Fv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Qv(s){return Sd(JSON.stringify({version:2,heartbeats:s})).length}function aR(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(s){So(new fa("platform-logger",e=>new vx(e),"PRIVATE")),So(new fa("heartbeat",e=>new rR(e),"PRIVATE")),mi(km,Bv,s),mi(km,Bv,"esm2020"),mi("fire-js","")}oR("");var lR="firebase",cR="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi(lR,cR,"app");var Kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gi,HE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,x){function I(){}I.prototype=x.prototype,C.D=x.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(P,M,k){for(var R=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)R[Ie-2]=arguments[Ie];return x.prototype[M].apply(P,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,x,I){I||(I=0);var P=Array(16);if(typeof x=="string")for(var M=0;16>M;++M)P[M]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(M=0;16>M;++M)P[M]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=C.g[0],I=C.g[1],M=C.g[2];var k=C.g[3],R=x+(k^I&(M^k))+P[0]+3614090360&4294967295;x=I+(R<<7&4294967295|R>>>25),R=k+(M^x&(I^M))+P[1]+3905402710&4294967295,k=x+(R<<12&4294967295|R>>>20),R=M+(I^k&(x^I))+P[2]+606105819&4294967295,M=k+(R<<17&4294967295|R>>>15),R=I+(x^M&(k^x))+P[3]+3250441966&4294967295,I=M+(R<<22&4294967295|R>>>10),R=x+(k^I&(M^k))+P[4]+4118548399&4294967295,x=I+(R<<7&4294967295|R>>>25),R=k+(M^x&(I^M))+P[5]+1200080426&4294967295,k=x+(R<<12&4294967295|R>>>20),R=M+(I^k&(x^I))+P[6]+2821735955&4294967295,M=k+(R<<17&4294967295|R>>>15),R=I+(x^M&(k^x))+P[7]+4249261313&4294967295,I=M+(R<<22&4294967295|R>>>10),R=x+(k^I&(M^k))+P[8]+1770035416&4294967295,x=I+(R<<7&4294967295|R>>>25),R=k+(M^x&(I^M))+P[9]+2336552879&4294967295,k=x+(R<<12&4294967295|R>>>20),R=M+(I^k&(x^I))+P[10]+4294925233&4294967295,M=k+(R<<17&4294967295|R>>>15),R=I+(x^M&(k^x))+P[11]+2304563134&4294967295,I=M+(R<<22&4294967295|R>>>10),R=x+(k^I&(M^k))+P[12]+1804603682&4294967295,x=I+(R<<7&4294967295|R>>>25),R=k+(M^x&(I^M))+P[13]+4254626195&4294967295,k=x+(R<<12&4294967295|R>>>20),R=M+(I^k&(x^I))+P[14]+2792965006&4294967295,M=k+(R<<17&4294967295|R>>>15),R=I+(x^M&(k^x))+P[15]+1236535329&4294967295,I=M+(R<<22&4294967295|R>>>10),R=x+(M^k&(I^M))+P[1]+4129170786&4294967295,x=I+(R<<5&4294967295|R>>>27),R=k+(I^M&(x^I))+P[6]+3225465664&4294967295,k=x+(R<<9&4294967295|R>>>23),R=M+(x^I&(k^x))+P[11]+643717713&4294967295,M=k+(R<<14&4294967295|R>>>18),R=I+(k^x&(M^k))+P[0]+3921069994&4294967295,I=M+(R<<20&4294967295|R>>>12),R=x+(M^k&(I^M))+P[5]+3593408605&4294967295,x=I+(R<<5&4294967295|R>>>27),R=k+(I^M&(x^I))+P[10]+38016083&4294967295,k=x+(R<<9&4294967295|R>>>23),R=M+(x^I&(k^x))+P[15]+3634488961&4294967295,M=k+(R<<14&4294967295|R>>>18),R=I+(k^x&(M^k))+P[4]+3889429448&4294967295,I=M+(R<<20&4294967295|R>>>12),R=x+(M^k&(I^M))+P[9]+568446438&4294967295,x=I+(R<<5&4294967295|R>>>27),R=k+(I^M&(x^I))+P[14]+3275163606&4294967295,k=x+(R<<9&4294967295|R>>>23),R=M+(x^I&(k^x))+P[3]+4107603335&4294967295,M=k+(R<<14&4294967295|R>>>18),R=I+(k^x&(M^k))+P[8]+1163531501&4294967295,I=M+(R<<20&4294967295|R>>>12),R=x+(M^k&(I^M))+P[13]+2850285829&4294967295,x=I+(R<<5&4294967295|R>>>27),R=k+(I^M&(x^I))+P[2]+4243563512&4294967295,k=x+(R<<9&4294967295|R>>>23),R=M+(x^I&(k^x))+P[7]+1735328473&4294967295,M=k+(R<<14&4294967295|R>>>18),R=I+(k^x&(M^k))+P[12]+2368359562&4294967295,I=M+(R<<20&4294967295|R>>>12),R=x+(I^M^k)+P[5]+4294588738&4294967295,x=I+(R<<4&4294967295|R>>>28),R=k+(x^I^M)+P[8]+2272392833&4294967295,k=x+(R<<11&4294967295|R>>>21),R=M+(k^x^I)+P[11]+1839030562&4294967295,M=k+(R<<16&4294967295|R>>>16),R=I+(M^k^x)+P[14]+4259657740&4294967295,I=M+(R<<23&4294967295|R>>>9),R=x+(I^M^k)+P[1]+2763975236&4294967295,x=I+(R<<4&4294967295|R>>>28),R=k+(x^I^M)+P[4]+1272893353&4294967295,k=x+(R<<11&4294967295|R>>>21),R=M+(k^x^I)+P[7]+4139469664&4294967295,M=k+(R<<16&4294967295|R>>>16),R=I+(M^k^x)+P[10]+3200236656&4294967295,I=M+(R<<23&4294967295|R>>>9),R=x+(I^M^k)+P[13]+681279174&4294967295,x=I+(R<<4&4294967295|R>>>28),R=k+(x^I^M)+P[0]+3936430074&4294967295,k=x+(R<<11&4294967295|R>>>21),R=M+(k^x^I)+P[3]+3572445317&4294967295,M=k+(R<<16&4294967295|R>>>16),R=I+(M^k^x)+P[6]+76029189&4294967295,I=M+(R<<23&4294967295|R>>>9),R=x+(I^M^k)+P[9]+3654602809&4294967295,x=I+(R<<4&4294967295|R>>>28),R=k+(x^I^M)+P[12]+3873151461&4294967295,k=x+(R<<11&4294967295|R>>>21),R=M+(k^x^I)+P[15]+530742520&4294967295,M=k+(R<<16&4294967295|R>>>16),R=I+(M^k^x)+P[2]+3299628645&4294967295,I=M+(R<<23&4294967295|R>>>9),R=x+(M^(I|~k))+P[0]+4096336452&4294967295,x=I+(R<<6&4294967295|R>>>26),R=k+(I^(x|~M))+P[7]+1126891415&4294967295,k=x+(R<<10&4294967295|R>>>22),R=M+(x^(k|~I))+P[14]+2878612391&4294967295,M=k+(R<<15&4294967295|R>>>17),R=I+(k^(M|~x))+P[5]+4237533241&4294967295,I=M+(R<<21&4294967295|R>>>11),R=x+(M^(I|~k))+P[12]+1700485571&4294967295,x=I+(R<<6&4294967295|R>>>26),R=k+(I^(x|~M))+P[3]+2399980690&4294967295,k=x+(R<<10&4294967295|R>>>22),R=M+(x^(k|~I))+P[10]+4293915773&4294967295,M=k+(R<<15&4294967295|R>>>17),R=I+(k^(M|~x))+P[1]+2240044497&4294967295,I=M+(R<<21&4294967295|R>>>11),R=x+(M^(I|~k))+P[8]+1873313359&4294967295,x=I+(R<<6&4294967295|R>>>26),R=k+(I^(x|~M))+P[15]+4264355552&4294967295,k=x+(R<<10&4294967295|R>>>22),R=M+(x^(k|~I))+P[6]+2734768916&4294967295,M=k+(R<<15&4294967295|R>>>17),R=I+(k^(M|~x))+P[13]+1309151649&4294967295,I=M+(R<<21&4294967295|R>>>11),R=x+(M^(I|~k))+P[4]+4149444226&4294967295,x=I+(R<<6&4294967295|R>>>26),R=k+(I^(x|~M))+P[11]+3174756917&4294967295,k=x+(R<<10&4294967295|R>>>22),R=M+(x^(k|~I))+P[2]+718787259&4294967295,M=k+(R<<15&4294967295|R>>>17),R=I+(k^(M|~x))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+x&4294967295,C.g[1]=C.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+k&4294967295}i.prototype.u=function(C,x){x===void 0&&(x=C.length);for(var I=x-this.blockSize,P=this.B,M=this.h,k=0;k<x;){if(M==0)for(;k<=I;)o(this,C,k),k+=this.blockSize;if(typeof C=="string"){for(;k<x;)if(P[M++]=C.charCodeAt(k++),M==this.blockSize){o(this,P),M=0;break}}else for(;k<x;)if(P[M++]=C[k++],M==this.blockSize){o(this,P),M=0;break}}this.h=M,this.o+=x},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var x=1;x<C.length-8;++x)C[x]=0;var I=8*this.o;for(x=C.length-8;x<C.length;++x)C[x]=I&255,I/=256;for(this.u(C),C=Array(16),x=I=0;4>x;++x)for(var P=0;32>P;P+=8)C[I++]=this.g[x]>>>P&255;return C};function c(C,x){var I=m;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=x(C)}function h(C,x){this.h=x;for(var I=[],P=!0,M=C.length-1;0<=M;M--){var k=C[M]|0;P&&k==x||(I[M]=k,P=!1)}this.g=I}var m={};function g(C){return-128<=C&&128>C?c(C,function(x){return new h([x|0],0>x?-1:0)}):new h([C|0],0>C?-1:0)}function _(C){if(isNaN(C)||!isFinite(C))return b;if(0>C)return B(_(-C));for(var x=[],I=1,P=0;C>=I;P++)x[P]=C/I|0,I*=4294967296;return new h(x,0)}function w(C,x){if(C.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C.charAt(0)=="-")return B(w(C.substring(1),x));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=_(Math.pow(x,8)),P=b,M=0;M<C.length;M+=8){var k=Math.min(8,C.length-M),R=parseInt(C.substring(M,M+k),x);8>k?(k=_(Math.pow(x,k)),P=P.j(k).add(_(R))):(P=P.j(I),P=P.add(_(R)))}return P}var b=g(0),S=g(1),N=g(16777216);s=h.prototype,s.m=function(){if(G(this))return-B(this).m();for(var C=0,x=1,I=0;I<this.g.length;I++){var P=this.i(I);C+=(0<=P?P:4294967296+P)*x,x*=4294967296}return C},s.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(j(this))return"0";if(G(this))return"-"+B(this).toString(C);for(var x=_(Math.pow(C,6)),I=this,P="";;){var M=ge(I,x).g;I=ae(I,M.j(x));var k=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=M,j(I))return k+P;for(;6>k.length;)k="0"+k;P=k+P}},s.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function j(C){if(C.h!=0)return!1;for(var x=0;x<C.g.length;x++)if(C.g[x]!=0)return!1;return!0}function G(C){return C.h==-1}s.l=function(C){return C=ae(this,C),G(C)?-1:j(C)?0:1};function B(C){for(var x=C.g.length,I=[],P=0;P<x;P++)I[P]=~C.g[P];return new h(I,~C.h).add(S)}s.abs=function(){return G(this)?B(this):this},s.add=function(C){for(var x=Math.max(this.g.length,C.g.length),I=[],P=0,M=0;M<=x;M++){var k=P+(this.i(M)&65535)+(C.i(M)&65535),R=(k>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);P=R>>>16,k&=65535,R&=65535,I[M]=R<<16|k}return new h(I,I[I.length-1]&-2147483648?-1:0)};function ae(C,x){return C.add(B(x))}s.j=function(C){if(j(this)||j(C))return b;if(G(this))return G(C)?B(this).j(B(C)):B(B(this).j(C));if(G(C))return B(this.j(B(C)));if(0>this.l(N)&&0>C.l(N))return _(this.m()*C.m());for(var x=this.g.length+C.g.length,I=[],P=0;P<2*x;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var M=0;M<C.g.length;M++){var k=this.i(P)>>>16,R=this.i(P)&65535,Ie=C.i(M)>>>16,Oe=C.i(M)&65535;I[2*P+2*M]+=R*Oe,re(I,2*P+2*M),I[2*P+2*M+1]+=k*Oe,re(I,2*P+2*M+1),I[2*P+2*M+1]+=R*Ie,re(I,2*P+2*M+1),I[2*P+2*M+2]+=k*Ie,re(I,2*P+2*M+2)}for(P=0;P<x;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=x;P<2*x;P++)I[P]=0;return new h(I,0)};function re(C,x){for(;(C[x]&65535)!=C[x];)C[x+1]+=C[x]>>>16,C[x]&=65535,x++}function se(C,x){this.g=C,this.h=x}function ge(C,x){if(j(x))throw Error("division by zero");if(j(C))return new se(b,b);if(G(C))return x=ge(B(C),x),new se(B(x.g),B(x.h));if(G(x))return x=ge(C,B(x)),new se(B(x.g),x.h);if(30<C.g.length){if(G(C)||G(x))throw Error("slowDivide_ only works with positive integers.");for(var I=S,P=x;0>=P.l(C);)I=ue(I),P=ue(P);var M=W(I,1),k=W(P,1);for(P=W(P,2),I=W(I,2);!j(P);){var R=k.add(P);0>=R.l(C)&&(M=M.add(I),k=R),P=W(P,1),I=W(I,1)}return x=ae(C,M.j(x)),new se(M,x)}for(M=b;0<=C.l(x);){for(I=Math.max(1,Math.floor(C.m()/x.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),k=_(I),R=k.j(x);G(R)||0<R.l(C);)I-=P,k=_(I),R=k.j(x);j(k)&&(k=S),M=M.add(k),C=ae(C,R)}return new se(M,C)}s.A=function(C){return ge(this,C).h},s.and=function(C){for(var x=Math.max(this.g.length,C.g.length),I=[],P=0;P<x;P++)I[P]=this.i(P)&C.i(P);return new h(I,this.h&C.h)},s.or=function(C){for(var x=Math.max(this.g.length,C.g.length),I=[],P=0;P<x;P++)I[P]=this.i(P)|C.i(P);return new h(I,this.h|C.h)},s.xor=function(C){for(var x=Math.max(this.g.length,C.g.length),I=[],P=0;P<x;P++)I[P]=this.i(P)^C.i(P);return new h(I,this.h^C.h)};function ue(C){for(var x=C.g.length+1,I=[],P=0;P<x;P++)I[P]=C.i(P)<<1|C.i(P-1)>>>31;return new h(I,C.h)}function W(C,x){var I=x>>5;x%=32;for(var P=C.g.length-I,M=[],k=0;k<P;k++)M[k]=0<x?C.i(k+I)>>>x|C.i(k+I+1)<<32-x:C.i(k+I);return new h(M,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,HE=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=w,gi=h}).apply(typeof Kv<"u"?Kv:typeof self<"u"?self:typeof window<"u"?window:{});var od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FE,Zl,GE,gd,Um,QE,KE,YE;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,y,v){return u==Array.prototype||u==Object.prototype||(u[y]=v.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof od=="object"&&od];for(var y=0;y<u.length;++y){var v=u[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=n(this);function o(u,y){if(y)e:{var v=i;u=u.split(".");for(var A=0;A<u.length-1;A++){var U=u[A];if(!(U in v))break e;v=v[U]}u=u[u.length-1],A=v[u],y=y(A),y!=A&&y!=null&&e(v,u,{configurable:!0,writable:!0,value:y})}}function c(u,y){u instanceof String&&(u+="");var v=0,A=!1,U={next:function(){if(!A&&v<u.length){var K=v++;return{value:y(K,u[K]),done:!1}}return A=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(u){return u||function(){return c(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(u){var y=typeof u;return y=y!="object"?y:u?Array.isArray(u)?"array":y:"null",y=="array"||y=="object"&&typeof u.length=="number"}function _(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function w(u,y,v){return u.call.apply(u.bind,arguments)}function b(u,y,v){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,A),u.apply(y,U)}}return function(){return u.apply(y,arguments)}}function S(u,y,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:b,S.apply(null,arguments)}function N(u,y){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function j(u,y){function v(){}v.prototype=y.prototype,u.aa=y.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(A,U,K){for(var ce=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ce[Be-2]=arguments[Be];return y.prototype[U].apply(A,ce)}}function G(u){const y=u.length;if(0<y){const v=Array(y);for(let A=0;A<y;A++)v[A]=u[A];return v}return[]}function B(u,y){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(g(A)){const U=u.length||0,K=A.length||0;u.length=U+K;for(let ce=0;ce<K;ce++)u[U+ce]=A[ce]}else u.push(A)}}class ae{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function re(u){return/^[\s\xa0]*$/.test(u)}function se(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function ge(u){return ge[" "](u),u}ge[" "]=function(){};var ue=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function W(u,y,v){for(const A in u)y.call(v,u[A],A,u)}function C(u,y){for(const v in u)y.call(void 0,u[v],v,u)}function x(u){const y={};for(const v in u)y[v]=u[v];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,y){let v,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(v in A)u[v]=A[v];for(let K=0;K<I.length;K++)v=I[K],Object.prototype.hasOwnProperty.call(A,v)&&(u[v]=A[v])}}function M(u){var y=1;u=u.split(":");const v=[];for(;0<y&&u.length;)v.push(u.shift()),y--;return u.length&&v.push(u.join(":")),v}function k(u){m.setTimeout(()=>{throw u},0)}function R(){var u=pe;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class Ie{constructor(){this.h=this.g=null}add(y,v){const A=Oe.get();A.set(y,v),this.h?this.h.next=A:this.g=A,this.h=A}}var Oe=new ae(()=>new Q,u=>u.reset());class Q{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,Y=!1,pe=new Ie,O=()=>{const u=m.Promise.resolve(void 0);ie=()=>{u.then(Z)}};var Z=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(v){k(v)}var y=Oe;y.j(u),100>y.h&&(y.h++,u.next=y.g,y.g=u)}Y=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return u})();function Ce(u,y){if(oe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget){if(ue){e:{try{ge(y.nodeName);var U=!0;break e}catch{}U=!1}U||(y=null)}}else v=="mouseover"?y=u.fromElement:v=="mouseout"&&(y=u.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ae[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ce.aa.h.call(this)}}j(Ce,oe);var Ae={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var It="closure_listenable_"+(1e6*Math.random()|0),rt=0;function zn(u,y,v,A,U){this.listener=u,this.proxy=null,this.src=y,this.type=v,this.capture=!!A,this.ha=U,this.key=++rt,this.da=this.fa=!1}function nr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function gr(u){this.src=u,this.g={},this.h=0}gr.prototype.add=function(u,y,v,A,U){var K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);var ce=pr(u,y,A,U);return-1<ce?(y=u[ce],v||(y.fa=!1)):(y=new zn(y,this.src,K,!!A,U),y.fa=v,u.push(y)),y};function Os(u,y){var v=y.type;if(v in u.g){var A=u.g[v],U=Array.prototype.indexOf.call(A,y,void 0),K;(K=0<=U)&&Array.prototype.splice.call(A,U,1),K&&(nr(y),u.g[v].length==0&&(delete u.g[v],u.h--))}}function pr(u,y,v,A){for(var U=0;U<u.length;++U){var K=u[U];if(!K.da&&K.listener==y&&K.capture==!!v&&K.ha==A)return U}return-1}var yr="closure_lm_"+(1e6*Math.random()|0),Fr={};function wa(u,y,v,A,U){if(Array.isArray(y)){for(var K=0;K<y.length;K++)wa(u,y[K],v,A,U);return null}return v=Ta(v),u&&u[It]?u.K(y,v,_(A)?!!A.capture:!1,U):wn(u,y,v,!1,A,U)}function wn(u,y,v,A,U,K){if(!y)throw Error("Invalid event type");var ce=_(U)?!!U.capture:!!U,Be=Ps(u);if(Be||(u[yr]=Be=new gr(u)),v=Be.add(y,v,A,ce,K),v.proxy)return v;if(A=Ho(),v.proxy=A,A.src=u,A.listener=v,u.addEventListener)_e||(U=ce),U===void 0&&(U=!1),u.addEventListener(y.toString(),A,U);else if(u.attachEvent)u.attachEvent(Qr(y.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ho(){function u(v){return y.call(u.src,u.listener,v)}const y=Fo;return u}function Ni(u,y,v,A,U){if(Array.isArray(y))for(var K=0;K<y.length;K++)Ni(u,y[K],v,A,U);else A=_(A)?!!A.capture:!!A,v=Ta(v),u&&u[It]?(u=u.i,y=String(y).toString(),y in u.g&&(K=u.g[y],v=pr(K,v,A,U),-1<v&&(nr(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete u.g[y],u.h--)))):u&&(u=Ps(u))&&(y=u.g[y.toString()],u=-1,y&&(u=pr(y,v,A,U)),(v=-1<u?y[u]:null)&&Gr(v))}function Gr(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[It])Os(y.i,u);else{var v=u.type,A=u.proxy;y.removeEventListener?y.removeEventListener(v,A,u.capture):y.detachEvent?y.detachEvent(Qr(v),A):y.addListener&&y.removeListener&&y.removeListener(A),(v=Ps(y))?(Os(v,u),v.h==0&&(v.src=null,y[yr]=null)):nr(u)}}}function Qr(u){return u in Fr?Fr[u]:Fr[u]="on"+u}function Fo(u,y){if(u.da)u=!0;else{y=new Ce(y,this);var v=u.listener,A=u.ha||u.src;u.fa&&Gr(u),u=v.call(A,y)}return u}function Ps(u){return u=u[yr],u instanceof gr?u:null}var Ci="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ta(u){return typeof u=="function"?u:(u[Ci]||(u[Ci]=function(y){return u.handleEvent(y)}),u[Ci])}function ht(){le.call(this),this.i=new gr(this),this.M=this,this.F=null}j(ht,le),ht.prototype[It]=!0,ht.prototype.removeEventListener=function(u,y,v,A){Ni(this,u,y,v,A)};function $e(u,y){var v,A=u.F;if(A)for(v=[];A;A=A.F)v.push(A);if(u=u.M,A=y.type||y,typeof y=="string")y=new oe(y,u);else if(y instanceof oe)y.target=y.target||u;else{var U=y;y=new oe(A,u),P(y,U)}if(U=!0,v)for(var K=v.length-1;0<=K;K--){var ce=y.g=v[K];U=mn(ce,A,!0,y)&&U}if(ce=y.g=u,U=mn(ce,A,!0,y)&&U,U=mn(ce,A,!1,y)&&U,v)for(K=0;K<v.length;K++)ce=y.g=v[K],U=mn(ce,A,!1,y)&&U}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,y;for(y in u.g){for(var v=u.g[y],A=0;A<v.length;A++)nr(v[A]);delete u.g[y],u.h--}}this.F=null},ht.prototype.K=function(u,y,v,A){return this.i.add(String(u),y,!1,v,A)},ht.prototype.L=function(u,y,v,A){return this.i.add(String(u),y,!0,v,A)};function mn(u,y,v,A){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();for(var U=!0,K=0;K<y.length;++K){var ce=y[K];if(ce&&!ce.da&&ce.capture==v){var Be=ce.listener,jt=ce.ha||ce.src;ce.fa&&Os(u.i,ce),U=Be.call(jt,A)!==!1&&U}}return U&&!A.defaultPrevented}function Bt(u,y,v){if(typeof u=="function")v&&(u=S(u,v));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(u,y||0)}function ba(u){u.g=Bt(()=>{u.g=null,u.i&&(u.i=!1,ba(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class Go extends le{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ba(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kr(u){le.call(this),this.h=u,this.g={}}j(Kr,le);var _r=[];function Yr(u){W(u.g,function(y,v){this.g.hasOwnProperty(v)&&Gr(y)},u),u.g={}}Kr.prototype.N=function(){Kr.aa.N.call(this),Yr(this)},Kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var In=m.JSON.stringify,Xr=m.JSON.parse,$r=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function Wr(){}Wr.prototype.h=null;function Di(u){return u.h||(u.h=u.i())}function Oi(){}var rr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sr(){oe.call(this,"d")}j(sr,oe);function Pi(){oe.call(this,"c")}j(Pi,oe);var qn={},he=null;function fe(){return he=he||new ht}qn.La="serverreachability";function ct(u){oe.call(this,qn.La,u)}j(ct,oe);function sn(u){const y=fe();$e(y,new ct(y))}qn.STAT_EVENT="statevent";function Uc(u,y){oe.call(this,qn.STAT_EVENT,u),this.stat=y}j(Uc,oe);function ft(u){const y=fe();$e(y,new Uc(y,u))}qn.Ma="timingevent";function kt(u,y){oe.call(this,qn.Ma,u),this.size=y}j(kt,oe);function Nt(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},y)}function Bn(){this.g=!0}Bn.prototype.xa=function(){this.g=!1};function Qo(u,y,v,A,U,K){u.info(function(){if(u.g)if(K)for(var ce="",Be=K.split("&"),jt=0;jt<Be.length;jt++){var He=Be[jt].split("=");if(1<He.length){var Ft=He[0];He=He[1];var Lt=Ft.split("_");ce=2<=Lt.length&&Lt[1]=="type"?ce+(Ft+"="+He+"&"):ce+(Ft+"=redacted&")}}else ce=null;else ce=K;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+y+`
`+v+`
`+ce})}function ph(u,y,v,A,U,K,ce){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+y+`
`+v+`
`+K+" "+ce})}function Ms(u,y,v,A){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Mi(u,v)+(A?" "+A:"")})}function zc(u,y){u.info(function(){return"TIMEOUT: "+y})}Bn.prototype.info=function(){};function Mi(u,y){if(!u.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var A=v[u];if(!(2>A.length)){var U=A[1];if(Array.isArray(U)&&!(1>U.length)){var K=U[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ce=1;ce<U.length;ce++)U[ce]=""}}}}return In(v)}catch{return y}}var Vs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vr;function Er(){}j(Er,Wr),Er.prototype.g=function(){return new XMLHttpRequest},Er.prototype.i=function(){return{}},vr=new Er;function gn(u,y,v,A){this.j=u,this.i=y,this.l=v,this.R=A||1,this.U=new Kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new At}function At(){this.i=null,this.g="",this.h=!1}var Ko={},Aa={};function ir(u,y,v){u.L=1,u.v=Ui(Nn(y)),u.m=v,u.P=!0,Jr(u,null)}function Jr(u,y){u.F=Date.now(),Vi(u),u.A=Nn(u.v);var v=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Jo(v.i,"t",A),u.C=0,v=u.j.J,u.h=new At,u.g=nu(u.j,v?y:null,!u.m),0<u.O&&(u.M=new Go(S(u.Y,u,u.g),u.O)),y=u.U,v=u.g,A=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(_r[0]=U.toString()),U=_r);for(var K=0;K<U.length;K++){var ce=wa(v,U[K],A||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,y)):(u.u="GET",u.g.ea(u.A,u.u,null,y)),sn(),Qo(u.i,u.u,u.A,u.l,u.R,u.m)}gn.prototype.ca=function(u){u=u.target;const y=this.M;y&&Qn(u)==3?y.j():this.Y(u)},gn.prototype.Y=function(u){try{if(u==this.g)e:{const Lt=Qn(this.g);var y=this.g.Ba();const os=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||Yc(this.g)))){this.J||Lt!=4||y==7||(y==8||0>=os?sn(3):sn(2)),ks(this);var v=this.g.Z();this.X=v;t:if(qc(this)){var A=Yc(this.g);u="";var U=A.length,K=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$t(this),wr(this);var ce="";break t}this.h.i=new m.TextDecoder}for(y=0;y<U;y++)this.h.h=!0,u+=this.h.i.decode(A[y],{stream:!(K&&y==U-1)});A.length=0,this.h.g+=u,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=v==200,ph(this.i,this.u,this.A,this.l,this.R,Lt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,jt=this.g;if((Be=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(Be)){var He=Be;break t}}He=null}if(v=He)Ms(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ki(this,v);else{this.o=!1,this.s=3,ft(12),$t(this),wr(this);break e}}if(this.P){v=!0;let Wt;for(;!this.J&&this.C<ce.length;)if(Wt=Bc(this,ce),Wt==Aa){Lt==4&&(this.s=4,ft(14),v=!1),Ms(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==Ko){this.s=4,ft(15),Ms(this.i,this.l,ce,"[Invalid Chunk]"),v=!1;break}else Ms(this.i,this.l,Wt,null),ki(this,Wt);if(qc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||ce.length!=0||this.h.h||(this.s=1,ft(16),v=!1),this.o=this.o&&v,!v)Ms(this.i,this.l,ce,"[Invalid Chunked Response]"),$t(this),wr(this);else if(0<ce.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Ki(Ft),Ft.M=!0,ft(11))}}else Ms(this.i,this.l,ce,null),ki(this,ce);Lt==4&&$t(this),this.o&&!this.J&&(Lt==4?Jc(this.j,this):(this.o=!1,Vi(this)))}else wh(this.g),v==400&&0<ce.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),$t(this),wr(this)}}}catch{}finally{}};function qc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Bc(u,y){var v=u.C,A=y.indexOf(`
`,v);return A==-1?Aa:(v=Number(y.substring(v,A)),isNaN(v)?Ko:(A+=1,A+v>y.length?Aa:(y=y.slice(A,A+v),u.C=A+v,y)))}gn.prototype.cancel=function(){this.J=!0,$t(this)};function Vi(u){u.S=Date.now()+u.I,Hc(u,u.I)}function Hc(u,y){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Nt(S(u.ba,u),y)}function ks(u){u.B&&(m.clearTimeout(u.B),u.B=null)}gn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(zc(this.i,this.A),this.L!=2&&(sn(),ft(17)),$t(this),this.s=2,wr(this)):Hc(this,this.S-u)};function wr(u){u.j.G==0||u.J||Jc(u.j,u)}function $t(u){ks(u);var y=u.M;y&&typeof y.ma=="function"&&y.ma(),u.M=null,Yr(u.U),u.g&&(y=u.g,u.g=null,y.abort(),y.ma())}function ki(u,y){try{var v=u.j;if(v.G!=0&&(v.g==u||Yo(v.h,u))){if(!u.K&&Yo(v.h,u)&&v.G==3){try{var A=v.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)ka(v),Ma(v);else break e;sl(v),ft(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=Nt(S(v.Za,v),6e3));if(1>=xa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else as(v,11)}else if((u.K||v.g==u)&&ka(v),!re(y))for(U=v.Da.g.parse(y),y=0;y<U.length;y++){let He=U[y];if(v.T=He[0],He=He[1],v.G==2)if(He[0]=="c"){v.K=He[1],v.ia=He[2];const Ft=He[3];Ft!=null&&(v.la=Ft,v.j.info("VER="+v.la));const Lt=He[4];Lt!=null&&(v.Aa=Lt,v.j.info("SVER="+v.Aa));const os=He[5];os!=null&&typeof os=="number"&&0<os&&(A=1.5*os,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Wt=u.g;if(Wt){const Ir=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ir){var K=A.h;K.g||Ir.indexOf("spdy")==-1&&Ir.indexOf("quic")==-1&&Ir.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Ra(K,K.h),K.h=null))}if(A.D){const al=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;al&&(A.ya=al,st(A.I,A.D,al))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var ce=u;if(A.qa=tu(A,A.J?A.ia:null,A.W),ce.K){pn(A.h,ce);var Be=ce,jt=A.L;jt&&(Be.I=jt),Be.B&&(ks(Be),Vi(Be)),A.g=ce}else Wc(A);0<v.i.length&&Va(v)}else He[0]!="stop"&&He[0]!="close"||as(v,7);else v.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?as(v,7):nl(v):He[0]!="noop"&&v.l&&v.l.ta(He),v.v=0)}}sn(4)}catch{}}var Fc=class{constructor(u,y){this.g=u,this.map=y}};function es(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function xa(u){return u.h?1:u.g?u.g.size:0}function Yo(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function Ra(u,y){u.g?u.g.add(y):u.h=y}function pn(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}es.prototype.cancel=function(){if(this.i=Xo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Xo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const v of u.g.values())y=y.concat(v.D);return y}return G(u.i)}function yh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var y=[],v=u.length,A=0;A<v;A++)y.push(u[A]);return y}y=[],v=0;for(A in u)y[v++]=u[A];return y}function Ia(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var y=[];u=u.length;for(var v=0;v<u;v++)y.push(v);return y}y=[],v=0;for(const A in u)y[v++]=A;return y}}}function $o(u,y){if(u.forEach&&typeof u.forEach=="function")u.forEach(y,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,y,void 0);else for(var v=Ia(u),A=yh(u),U=A.length,K=0;K<U;K++)y.call(void 0,A[K],v&&v[K],u)}var ji=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _h(u,y){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var A=u[v].indexOf("="),U=null;if(0<=A){var K=u[v].substring(0,A);U=u[v].substring(A+1)}else K=u[v];y(K,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ct(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ct){this.h=u.h,Li(this,u.j),this.o=u.o,this.g=u.g,js(this,u.s),this.l=u.l;var y=u.i,v=new ns;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),ts(this,v),this.m=u.m}else u&&(y=String(u).match(ji))?(this.h=!1,Li(this,y[1]||"",!0),this.o=Hn(y[2]||""),this.g=Hn(y[3]||"",!0),js(this,y[4]),this.l=Hn(y[5]||"",!0),ts(this,y[6]||"",!0),this.m=Hn(y[7]||"")):(this.h=!1,this.i=new ns(null,this.h))}Ct.prototype.toString=function(){var u=[],y=this.j;y&&u.push(zi(y,Wo,!0),":");var v=this.g;return(v||y=="file")&&(u.push("//"),(y=this.o)&&u.push(zi(y,Wo,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(zi(v,v.charAt(0)=="/"?vh:Zo,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",zi(v,Na)),u.join("")};function Nn(u){return new Ct(u)}function Li(u,y,v){u.j=v?Hn(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function js(u,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);u.s=y}else u.s=null}function ts(u,y,v){y instanceof ns?(u.i=y,Qc(u.i,u.h)):(v||(y=zi(y,Eh)),u.i=new ns(y,u.h))}function st(u,y,v){u.i.set(y,v)}function Ui(u){return st(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Hn(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function zi(u,y,v){return typeof u=="string"?(u=encodeURI(u).replace(y,Gc),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Gc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Wo=/[#\/\?@]/g,Zo=/[#\?:]/g,vh=/[#\?]/g,Eh=/[#\?@]/g,Na=/#/g;function ns(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function Fn(u){u.g||(u.g=new Map,u.h=0,u.i&&_h(u.i,function(y,v){u.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=ns.prototype,s.add=function(u,y){Fn(this),this.i=null,u=Tr(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(y),this.h+=1,this};function rs(u,y){Fn(u),y=Tr(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function ss(u,y){return Fn(u),y=Tr(u,y),u.g.has(y)}s.forEach=function(u,y){Fn(this),this.g.forEach(function(v,A){v.forEach(function(U){u.call(y,U,A,this)},this)},this)},s.na=function(){Fn(this);const u=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let A=0;A<y.length;A++){const U=u[A];for(let K=0;K<U.length;K++)v.push(y[A])}return v},s.V=function(u){Fn(this);let y=[];if(typeof u=="string")ss(this,u)&&(y=y.concat(this.g.get(Tr(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)y=y.concat(u[v])}return y},s.set=function(u,y){return Fn(this),this.i=null,u=Tr(this,u),ss(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},s.get=function(u,y){return u?(u=this.V(u),0<u.length?String(u[0]):y):y};function Jo(u,y,v){rs(u,y),0<v.length&&(u.i=null,u.g.set(Tr(u,y),G(v)),u.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var A=y[v];const K=encodeURIComponent(String(A)),ce=this.V(A);for(A=0;A<ce.length;A++){var U=K;ce[A]!==""&&(U+="="+encodeURIComponent(String(ce[A]))),u.push(U)}}return this.i=u.join("&")};function Tr(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Qc(u,y){y&&!u.j&&(Fn(u),u.i=null,u.g.forEach(function(v,A){var U=A.toLowerCase();A!=U&&(rs(this,A),Jo(this,U,v))},u)),u.j=y}function qi(u,y){const v=new Bn;if(m.Image){const A=new Image;A.onload=N(Gn,v,"TestLoadImage: loaded",!0,y,A),A.onerror=N(Gn,v,"TestLoadImage: error",!1,y,A),A.onabort=N(Gn,v,"TestLoadImage: abort",!1,y,A),A.ontimeout=N(Gn,v,"TestLoadImage: timeout",!1,y,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else y(!1)}function ar(u,y){const v=new Bn,A=new AbortController,U=setTimeout(()=>{A.abort(),Gn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:A.signal}).then(K=>{clearTimeout(U),K.ok?Gn(v,"TestPingServer: ok",!0,y):Gn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),Gn(v,"TestPingServer: error",!1,y)})}function Gn(u,y,v,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(v)}catch{}}function Bi(){this.g=new $r}function br(u,y,v){const A=v||"";try{$o(u,function(U,K){let ce=U;_(U)&&(ce=In(U)),y.push(A+K+"="+encodeURIComponent(ce))})}catch(U){throw y.push(A+"type="+encodeURIComponent("_badmap")),U}}function Ls(u){this.l=u.Ub||null,this.j=u.eb||!1}j(Ls,Wr),Ls.prototype.g=function(){return new is(this.l,this.j)},Ls.prototype.i=(function(u){return function(){return u}})({});function is(u,y){ht.call(this),this.D=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(is,ht),s=is.prototype,s.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=y,this.readyState=1,Sr(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(y.body=u),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Sr(this)),this.g&&(this.readyState=3,Sr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;el(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function el(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?Ar(this):Sr(this),this.readyState==3&&el(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,Ar(this))},s.Qa=function(u){this.g&&(this.response=u,Ar(this))},s.ga=function(){this.g&&Ar(this)};function Ar(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Sr(u)}s.setRequestHeader=function(u,y){this.u.append(u,y)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=y.next();return u.join(`\r
`)};function Sr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(is.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function tl(u){let y="";return W(u,function(v,A){y+=A,y+=":",y+=v,y+=`\r
`}),y}function Ht(u,y,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=tl(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):st(u,y,v))}function Je(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(Je,ht);var Ca=/^https?$/i,Hi=["POST","PUT"];s=Je.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,y,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vr.g(),this.v=this.o?Di(this.o):Di(vr),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(K){Kc(this,K);return}if(u=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)v.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())v.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),U=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Hi,y,void 0))||A||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ce]of v)this.g.setRequestHeader(K,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fi(this),this.u=!0,this.g.send(u),this.u=!1}catch(K){Kc(this,K)}};function Kc(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.m=5,Da(u),xr(u)}function Da(u){u.A||(u.A=!0,$e(u,"complete"),$e(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,$e(this,"complete"),$e(this,"abort"),xr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xr(this,!0)),Je.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Oa(this):this.bb())},s.bb=function(){Oa(this)};function Oa(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Qn(u)!=4||u.Z()!=2)){if(u.u&&Qn(u)==4)Bt(u.Ea,0,u);else if($e(u,"readystatechange"),Qn(u)==4){u.h=!1;try{const ce=u.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var A;if(A=ce===0){var U=String(u.D).match(ji)[1]||null;!U&&m.self&&m.self.location&&(U=m.self.location.protocol.slice(0,-1)),A=!Ca.test(U?U.toLowerCase():"")}v=A}if(v)$e(u,"complete"),$e(u,"success");else{u.m=6;try{var K=2<Qn(u)?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.Z()+"]",Da(u)}}finally{xr(u)}}}}function xr(u,y){if(u.g){Fi(u);const v=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,y||$e(u,"ready");try{v.onreadystatechange=A}catch{}}}function Fi(u){u.I&&(m.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function Qn(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),Xr(y)}};function Yc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function wh(u){const y={};u=(u.g&&2<=Qn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(re(u[A]))continue;var v=M(u[A]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=y[U]||[];y[U]=K,K.push(v)}C(y,function(A){return A.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gi(u,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||y}function Pa(u){this.Aa=0,this.i=[],this.j=new Bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gi("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gi("baseRetryDelayMs",5e3,u),this.cb=Gi("retryDelaySeedMs",1e4,u),this.Wa=Gi("forwardChannelMaxRetries",2,u),this.wa=Gi("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new es(u&&u.concurrentRequestLimit),this.Da=new Bi,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Pa.prototype,s.la=8,s.G=1,s.connect=function(u,y,v,A){ft(0),this.W=u,this.H=y||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=tu(this,null,this.W),Va(this)};function nl(u){if(Xc(u),u.G==3){var y=u.U++,v=Nn(u.I);if(st(v,"SID",u.K),st(v,"RID",y),st(v,"TYPE","terminate"),Qi(u,v),y=new gn(u,u.j,y),y.L=2,y.v=Ui(Nn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=nu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Vi(y)}eu(u)}function Ma(u){u.g&&(Ki(u),u.g.cancel(),u.g=null)}function Xc(u){Ma(u),u.u&&(m.clearTimeout(u.u),u.u=null),ka(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function Va(u){if(!Sa(u.h)&&!u.s){u.s=!0;var y=u.Ga;ie||O(),Y||(ie(),Y=!0),pe.add(y,u),u.B=0}}function Th(u,y){return xa(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=y.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Nt(S(u.Ga,u,y),il(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new gn(this,this.j,u);let K=this.o;if(this.S&&(K?(K=x(K),P(K,this.S)):K=this.S),this.m!==null||this.O||(U.H=K,K=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=$c(this,U,y),v=Nn(this.I),st(v,"RID",u),st(v,"CVER",22),this.D&&st(v,"X-HTTP-Session-Id",this.D),Qi(this,v),K&&(this.O?y="headers="+encodeURIComponent(String(tl(K)))+"&"+y:this.m&&Ht(v,this.m,K)),Ra(this.h,U),this.Ua&&st(v,"TYPE","init"),this.P?(st(v,"$req",y),st(v,"SID","null"),U.T=!0,ir(U,v,null)):ir(U,v,y),this.G=2}}else this.G==3&&(u?rl(this,u):this.i.length==0||Sa(this.h)||rl(this))};function rl(u,y){var v;y?v=y.l:v=u.U++;const A=Nn(u.I);st(A,"SID",u.K),st(A,"RID",v),st(A,"AID",u.T),Qi(u,A),u.m&&u.o&&Ht(A,u.m,u.o),v=new gn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),y&&(u.i=y.D.concat(u.i)),y=$c(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ra(u.h,v),ir(v,A,y)}function Qi(u,y){u.H&&W(u.H,function(v,A){st(y,A,v)}),u.l&&$o({},function(v,A){st(y,A,v)})}function $c(u,y,v){v=Math.min(u.i.length,v);var A=u.l?S(u.l.Na,u.l,u):null;e:{var U=u.i;let K=-1;for(;;){const ce=["count="+v];K==-1?0<v?(K=U[0].g,ce.push("ofs="+K)):K=0:ce.push("ofs="+K);let Be=!0;for(let jt=0;jt<v;jt++){let He=U[jt].g;const Ft=U[jt].map;if(He-=K,0>He)K=Math.max(0,U[jt].g-100),Be=!1;else try{br(Ft,ce,"req"+He+"_")}catch{A&&A(Ft)}}if(Be){A=ce.join("&");break e}}}return u=u.i.splice(0,v),y.D=u,A}function Wc(u){if(!u.g&&!u.u){u.Y=1;var y=u.Fa;ie||O(),Y||(ie(),Y=!0),pe.add(y,u),u.v=0}}function sl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Nt(S(u.Fa,u),il(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,Zc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Nt(S(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),Ma(this),Zc(this))};function Ki(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function Zc(u){u.g=new gn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var y=Nn(u.qa);st(y,"RID","rpc"),st(y,"SID",u.K),st(y,"AID",u.T),st(y,"CI",u.F?"0":"1"),!u.F&&u.ja&&st(y,"TO",u.ja),st(y,"TYPE","xmlhttp"),Qi(u,y),u.m&&u.o&&Ht(y,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Ui(Nn(y)),v.m=null,v.P=!0,Jr(v,u)}s.Za=function(){this.C!=null&&(this.C=null,Ma(this),sl(this),ft(19))};function ka(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function Jc(u,y){var v=null;if(u.g==y){ka(u),Ki(u),u.g=null;var A=2}else if(Yo(u.h,y))v=y.D,pn(u.h,y),A=1;else return;if(u.G!=0){if(y.o)if(A==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var U=u.B;A=fe(),$e(A,new kt(A,v)),Va(u)}else Wc(u);else if(U=y.s,U==3||U==0&&0<y.X||!(A==1&&Th(u,y)||A==2&&sl(u)))switch(v&&0<v.length&&(y=u.h,y.i=y.i.concat(v)),U){case 1:as(u,5);break;case 4:as(u,10);break;case 3:as(u,6);break;default:as(u,2)}}}function il(u,y){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*y}function as(u,y){if(u.j.info("Error code "+y),y==2){var v=S(u.fb,u),A=u.Xa;const U=!A;A=new Ct(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Li(A,"https"),Ui(A),U?qi(A.toString(),v):ar(A.toString(),v)}else ft(2);u.G=0,u.l&&u.l.sa(y),eu(u),Xc(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function eu(u){if(u.G=0,u.ka=[],u.l){const y=Xo(u.h);(y.length!=0||u.i.length!=0)&&(B(u.ka,y),B(u.ka,u.i),u.h.i.length=0,G(u.i),u.i.length=0),u.l.ra()}}function tu(u,y,v){var A=v instanceof Ct?Nn(v):new Ct(v);if(A.g!="")y&&(A.g=y+"."+A.g),js(A,A.s);else{var U=m.location;A=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;var K=new Ct(null);A&&Li(K,A),y&&(K.g=y),U&&js(K,U),v&&(K.l=v),A=K}return v=u.D,y=u.ya,v&&y&&st(A,v,y),st(A,"VER",u.la),Qi(u,A),A}function nu(u,y,v){if(y&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Ca&&!u.pa?new Je(new Ls({eb:v})):new Je(u.pa),y.Ha(u.J),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function ru(){}s=ru.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function ja(){}ja.prototype.g=function(u,y){return new yn(u,y)};function yn(u,y){ht.call(this),this.g=new Pa(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(u?u["X-WebChannel-Client-Profile"]=y.va:u={"X-WebChannel-Client-Profile":y.va}),this.g.S=u,(u=y&&y.Sb)&&!re(u)&&(this.g.m=u),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!re(y)&&(this.g.D=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new Rr(this)}j(yn,ht),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){nl(this.g)},yn.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=In(u),u=v);y.i.push(new Fc(y.Ya++,u)),y.G==3&&Va(y)},yn.prototype.N=function(){this.g.l=null,delete this.j,nl(this.g),delete this.g,yn.aa.N.call(this)};function su(u){sr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const v in y){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}j(su,sr);function iu(){Pi.call(this),this.status=1}j(iu,Pi);function Rr(u){this.g=u}j(Rr,ru),Rr.prototype.ua=function(){$e(this.g,"a")},Rr.prototype.ta=function(u){$e(this.g,new su(u))},Rr.prototype.sa=function(u){$e(this.g,new iu)},Rr.prototype.ra=function(){$e(this.g,"b")},ja.prototype.createWebChannel=ja.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,YE=function(){return new ja},KE=function(){return fe()},QE=qn,Um={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vs.NO_ERROR=0,Vs.TIMEOUT=8,Vs.HTTP_ERROR=6,gd=Vs,Zr.COMPLETE="complete",GE=Zr,Oi.EventType=rr,rr.OPEN="a",rr.CLOSE="b",rr.ERROR="c",rr.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Zl=Oi,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,FE=Je}).apply(typeof od<"u"?od:typeof self<"u"?self:typeof window<"u"?window:{});const Yv="@firebase/firestore",Xv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ko="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new cg("@firebase/firestore");function fo(){return ma.logLevel}function me(s,...e){if(ma.logLevel<=Ue.DEBUG){const n=e.map(hg);ma.debug(`Firestore (${ko}): ${s}`,...n)}}function Ss(s,...e){if(ma.logLevel<=Ue.ERROR){const n=e.map(hg);ma.error(`Firestore (${ko}): ${s}`,...n)}}function xo(s,...e){if(ma.logLevel<=Ue.WARN){const n=e.map(hg);ma.warn(`Firestore (${ko}): ${s}`,...n)}}function hg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,XE(s,i,n)}function XE(s,e,n){let i=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ss(i),new Error(i)}function Qe(s,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,s||XE(e,o,i)}function Ne(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Ns{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(dn.UNAUTHENTICATED)))}shutdown(){}}class dR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class hR{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let c=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Vr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Vr)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string",31837,{l:i}),new $E(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new dn(e)}}class fR{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mR{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new fR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $v{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const i=c=>{c.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,me("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $v(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $v(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=pR(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<n&&(i+=e.charAt(o[c]%62))}return i}}function ze(s,e){return s<e?-1:s>e?1:0}function zm(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const o=s.charAt(i),c=e.charAt(i);if(o!==c)return xm(o)===xm(c)?ze(o,c):xm(o)?1:-1}return ze(s.length,e.length)}const yR=55296,_R=57343;function xm(s){const e=s.charCodeAt(0);return e>=yR&&e<=_R}function Ro(s,e,n){return s.length===e.length&&s.every(((i,o)=>n(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="__name__";class Mr{constructor(e,n,i){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&we(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const c=Mr.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return ze(e.length,n.length)}static compareSegments(e,n){const i=Mr.isNumericId(e),o=Mr.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?Mr.extractNumericId(e).compare(Mr.extractNumericId(n)):zm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gi.fromString(e.substring(4,e.length-2))}}class lt extends Mr{construct(e,n,i){return new lt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new lt(n)}static emptyPath(){return new lt([])}}const vR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Mr{construct(e,n,i){return new nn(e,n,i)}static isValidIdentifier(e){return vR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wv}static keyField(){return new nn([Wv])}static fromServerFormat(e){const n=[];let i="",o=0;const c=()=>{if(i.length===0)throw new de(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new de(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new de(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(i+=m,o++):(c(),o++)}if(c(),h)throw new de(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(n)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(lt.fromString(e))}static fromName(e){return new Ee(lt.fromString(e).popFirst(5))}static empty(){return new Ee(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(s,e,n){if(!n)throw new de(X.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function ER(s,e,n,i){if(e===!0&&i===!0)throw new de(X.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Zv(s){if(!Ee.isDocumentKey(s))throw new de(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Jv(s){if(Ee.isDocumentKey(s))throw new de(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function ZE(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function $d(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":we(12329,{type:typeof s})}function hr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new de(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$d(s);throw new de(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function wR(s,e){if(e<=0)throw new de(X.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Sc(s,e){if(!ZE(s))throw new de(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const h=s[i];if(o&&typeof h!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new de(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=-62135596800,t0=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*t0);return new Ke(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<e0)throw new de(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/t0}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sc(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-e0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:Vt("string",Ke._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Ke(0,0))}static max(){return new Se(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=-1;function TR(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(i===1e9?new Ke(n+1,0):new Ke(n,i));return new vi(o,Ee.empty(),e)}function bR(s){return new vi(s.readTime,s.key,hc)}class vi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new vi(Se.min(),Ee.empty(),hc)}static max(){return new vi(Se.max(),Ee.empty(),hc)}}function AR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(s.documentKey,e.documentKey),n!==0?n:ze(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(s){if(s.code!==X.FAILED_PRECONDITION||s.message!==SR)throw s;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ne.reject(n)}static resolve(e){return new ne(((n,i)=>{n(e)}))}static reject(e){return new ne(((n,i)=>{i(e)}))}static waitFor(e){return new ne(((n,i)=>{let o=0,c=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++c,h&&c===o&&n()}),(g=>i(g)))})),h=!0,c===o&&n()}))}static or(e){let n=ne.resolve(!1);for(const i of e)n=n.next((o=>o?ne.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,c)=>{i.push(n.call(this,o,c))})),this.waitFor(i)}static mapArray(e,n){return new ne(((i,o)=>{const c=e.length,h=new Array(c);let m=0;for(let g=0;g<c;g++){const _=g;n(e[_]).next((w=>{h[_]=w,++m,m===c&&i(h)}),(w=>o(w)))}}))}static doWhile(e,n){return new ne(((i,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):i()};c()}))}}function RR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=-1;function xc(s){return s==null}function Rd(s){return s===0&&1/s==-1/0}function IR(s){return typeof s=="number"&&Number.isInteger(s)&&!Rd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="";function NR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=n0(e)),e=CR(s.get(n),e);return n0(e)}function CR(s,e){let n=e;const i=s.length;for(let o=0;o<i;o++){const c=s.charAt(o);switch(c){case"\0":n+="";break;case JE:n+="";break;default:n+=c}}return n}function n0(s){return s+JE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function xi(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function ew(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new _t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ld(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ld(this.root,e,this.comparator,!1)}getReverseIterator(){return new ld(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ld(this.root,e,this.comparator,!0)}}class ld{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,i,o,c){this.key=e,this.value=n,this.color=i??tn.RED,this.left=o??tn.EMPTY,this.right=c??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,c){return new tn(e??this.key,n??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,i),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return tn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,i,o,c){return this}insert(e,n,i){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new s0(this.data.getIterator())}getIteratorFrom(e){return new s0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class s0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new qt(nn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ro(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new tw("Invalid base64 string: "+c):c}})(e);return new rn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(e);return new rn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const DR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(s){if(Qe(!!s,39018),typeof s=="string"){let e=0;const n=DR.exec(s);if(Qe(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Rt(s.seconds),nanos:Rt(s.nanos)}}function Rt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function wi(s){return typeof s=="string"?rn.fromBase64String(s):rn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="server_timestamp",rw="__type__",sw="__previous_value__",iw="__local_write_time__";function gg(s){var n,i;return((i=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[rw])==null?void 0:i.stringValue)===nw}function Zd(s){const e=s.mapValue.fields[sw];return gg(e)?Zd(e):e}function fc(s){const e=Ei(s.mapValue.fields[iw].timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n,i,o,c,h,m,g,_,w){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=w}}const Id="(default)";class mc{constructor(e,n){this.projectId=e,this.database=n||Id}static empty(){return new mc("","")}get isDefaultDatabase(){return this.database===Id}isEqual(e){return e instanceof mc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="__type__",PR="__max__",cd={mapValue:{}},ow="__vector__",Nd="value";function Ti(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?gg(s)?4:VR(s)?9007199254740991:MR(s)?10:11:we(28295,{value:s})}function qr(s,e){if(s===e)return!0;const n=Ti(s);if(n!==Ti(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return fc(s).isEqual(fc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=Ei(o.timestampValue),m=Ei(c.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,c){return wi(o.bytesValue).isEqual(wi(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,c){return Rt(o.geoPointValue.latitude)===Rt(c.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(c.geoPointValue.longitude)})(s,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Rt(o.integerValue)===Rt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=Rt(o.doubleValue),m=Rt(c.doubleValue);return h===m?Rd(h)===Rd(m):isNaN(h)&&isNaN(m)}return!1})(s,e);case 9:return Ro(s.arrayValue.values||[],e.arrayValue.values||[],qr);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},m=c.mapValue.fields||{};if(r0(h)!==r0(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!qr(h[g],m[g])))return!1;return!0})(s,e);default:return we(52216,{left:s})}}function gc(s,e){return(s.values||[]).find((n=>qr(n,e)))!==void 0}function Io(s,e){if(s===e)return 0;const n=Ti(s),i=Ti(e);if(n!==i)return ze(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(s.booleanValue,e.booleanValue);case 2:return(function(c,h){const m=Rt(c.integerValue||c.doubleValue),g=Rt(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return i0(s.timestampValue,e.timestampValue);case 4:return i0(fc(s),fc(e));case 5:return zm(s.stringValue,e.stringValue);case 6:return(function(c,h){const m=wi(c),g=wi(h);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(c,h){const m=c.split("/"),g=h.split("/");for(let _=0;_<m.length&&_<g.length;_++){const w=ze(m[_],g[_]);if(w!==0)return w}return ze(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,h){const m=ze(Rt(c.latitude),Rt(h.latitude));return m!==0?m:ze(Rt(c.longitude),Rt(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return a0(s.arrayValue,e.arrayValue);case 10:return(function(c,h){var S,N,j,G;const m=c.fields||{},g=h.fields||{},_=(S=m[Nd])==null?void 0:S.arrayValue,w=(N=g[Nd])==null?void 0:N.arrayValue,b=ze(((j=_==null?void 0:_.values)==null?void 0:j.length)||0,((G=w==null?void 0:w.values)==null?void 0:G.length)||0);return b!==0?b:a0(_,w)})(s.mapValue,e.mapValue);case 11:return(function(c,h){if(c===cd.mapValue&&h===cd.mapValue)return 0;if(c===cd.mapValue)return 1;if(h===cd.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),_=h.fields||{},w=Object.keys(_);g.sort(),w.sort();for(let b=0;b<g.length&&b<w.length;++b){const S=zm(g[b],w[b]);if(S!==0)return S;const N=Io(m[g[b]],_[w[b]]);if(N!==0)return N}return ze(g.length,w.length)})(s.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function i0(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ze(s,e);const n=Ei(s),i=Ei(e),o=ze(n.seconds,i.seconds);return o!==0?o:ze(n.nanos,i.nanos)}function a0(s,e){const n=s.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const c=Io(n[o],i[o]);if(c)return c}return ze(n.length,i.length)}function No(s){return qm(s)}function qm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=Ei(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return wi(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Ee.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",o=!0;for(const c of n.values||[])o?o=!1:i+=",",i+=qm(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const h of i)c?c=!1:o+=",",o+=`${h}:${qm(n.fields[h])}`;return o+"}"})(s.mapValue):we(61005,{value:s})}function pd(s){switch(Ti(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zd(s);return e?16+pd(e):16;case 5:return 2*s.stringValue.length;case 6:return wi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,c)=>o+pd(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let o=0;return xi(i.fields,((c,h)=>{o+=c.length+pd(h)})),o})(s.mapValue);default:throw we(13486,{value:s})}}function o0(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Bm(s){return!!s&&"integerValue"in s}function pg(s){return!!s&&"arrayValue"in s}function l0(s){return!!s&&"nullValue"in s}function c0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function yd(s){return!!s&&"mapValue"in s}function MR(s){var n,i;return((i=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[aw])==null?void 0:i.stringValue)===ow}function sc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return xi(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=sc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sc(s.arrayValue.values[n]);return e}return{...s}}function VR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===PR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!yd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(n)}setAll(e){let n=nn.emptyPath(),i={},o=[];e.forEach(((h,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,i,o),i={},o=[],n=m.popLast()}h?i[m.lastSegment()]=sc(h):o.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,o)}delete(e){const n=this.field(e.popLast());yd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];yd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){xi(n,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new vn(sc(this.value))}}function lw(s){const e=[];return xi(s.fields,((n,i)=>{const o=new nn([n]);if(yd(i)){const c=lw(i.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)})),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,i,o,c,h,m){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=c,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Xt(e,0,Se.min(),Se.min(),Se.min(),vn.empty(),0)}static newFoundDocument(e,n,i,o){return new Xt(e,1,n,Se.min(),i,o,0)}static newNoDocument(e,n){return new Xt(e,2,n,Se.min(),Se.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,Se.min(),Se.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.position=e,this.inclusive=n}}function u0(s,e,n){let i=0;for(let o=0;o<s.position.length;o++){const c=e[o],h=s.position[o];if(c.field.isKeyField()?i=Ee.comparator(Ee.fromName(h.referenceValue),n.key):i=Io(h,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function d0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!qr(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n="asc"){this.field=e,this.dir=n}}function kR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{}class Mt extends cw{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new LR(e,n,i):n==="array-contains"?new qR(e,i):n==="in"?new BR(e,i):n==="not-in"?new HR(e,i):n==="array-contains-any"?new FR(e,i):new Mt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new UR(e,i):new zR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Io(n,this.value)):n!==null&&Ti(this.value)===Ti(n)&&this.matchesComparison(Io(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends cw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new fr(e,n)}matches(e){return uw(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uw(s){return s.op==="and"}function dw(s){return jR(s)&&uw(s)}function jR(s){for(const e of s.filters)if(e instanceof fr)return!1;return!0}function Hm(s){if(s instanceof Mt)return s.field.canonicalString()+s.op.toString()+No(s.value);if(dw(s))return s.filters.map((e=>Hm(e))).join(",");{const e=s.filters.map((n=>Hm(n))).join(",");return`${s.op}(${e})`}}function hw(s,e){return s instanceof Mt?(function(i,o){return o instanceof Mt&&i.op===o.op&&i.field.isEqual(o.field)&&qr(i.value,o.value)})(s,e):s instanceof fr?(function(i,o){return o instanceof fr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,h,m)=>c&&hw(h,o.filters[m])),!0):!1})(s,e):void we(19439)}function fw(s){return s instanceof Mt?(function(n){return`${n.field.canonicalString()} ${n.op} ${No(n.value)}`})(s):s instanceof fr?(function(n){return n.op.toString()+" {"+n.getFilters().map(fw).join(" ,")+"}"})(s):"Filter"}class LR extends Mt{constructor(e,n,i){super(e,n,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class UR extends Mt{constructor(e,n){super(e,"in",n),this.keys=mw("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class zR extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=mw("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function mw(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class qR extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pg(n)&&gc(n.arrayValue,this.value)}}class BR extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gc(this.value.arrayValue,n)}}class HR extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!gc(this.value.arrayValue,n)}}class FR extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>gc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n=null,i=[],o=[],c=null,h=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=h,this.endAt=m,this.Te=null}}function h0(s,e=null,n=[],i=[],o=null,c=null,h=null){return new GR(s,e,n,i,o,c,h)}function yg(s){const e=Ne(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Hm(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),xc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>No(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>No(i))).join(",")),e.Te=n}return e.Te}function _g(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!kR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!hw(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!d0(s.startAt,e.startAt)&&d0(s.endAt,e.endAt)}function Fm(s){return Ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n=null,i=[],o=[],c=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function QR(s,e,n,i,o,c,h,m){return new Uo(s,e,n,i,o,c,h,m)}function vg(s){return new Uo(s)}function f0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function gw(s){return s.collectionGroup!==null}function ic(s){const e=Ne(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new qt(nn.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new pc(c,i))})),n.has(nn.keyField().canonicalString())||e.Ie.push(new pc(nn.keyField(),i))}return e.Ie}function kr(s){const e=Ne(s);return e.Ee||(e.Ee=KR(e,ic(s))),e.Ee}function KR(s,e){if(s.limitType==="F")return h0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new pc(o.field,c)}));const n=s.endAt?new Cd(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Cd(s.startAt.position,s.startAt.inclusive):null;return h0(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Gm(s,e){const n=s.filters.concat([e]);return new Uo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Dd(s,e,n){return new Uo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Jd(s,e){return _g(kr(s),kr(e))&&s.limitType===e.limitType}function pw(s){return`${yg(kr(s))}|lt:${s.limitType}`}function mo(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>fw(o))).join(", ")}]`),xc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>No(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>No(o))).join(",")),`Target(${i})`})(kr(s))}; limitType=${s.limitType})`}function eh(s,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Ee.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,o){for(const c of ic(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(h,m,g){const _=u0(h,m,g);return h.inclusive?_<=0:_<0})(i.startAt,ic(i),o)||i.endAt&&!(function(h,m,g){const _=u0(h,m,g);return h.inclusive?_>=0:_>0})(i.endAt,ic(i),o))})(s,e)}function YR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function yw(s){return(e,n)=>{let i=!1;for(const o of ic(s)){const c=XR(o,e,n);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function XR(s,e,n){const i=s.field.isKeyField()?Ee.comparator(e.key,n.key):(function(c,h,m){const g=h.data.field(c),_=m.data.field(c);return g!==null&&_!==null?Io(g,_):we(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xi(this.inner,((n,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return ew(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=new _t(Ee.comparator);function xs(){return $R}const _w=new _t(Ee.comparator);function Jl(...s){let e=_w;for(const n of s)e=e.insert(n.key,n);return e}function vw(s){let e=_w;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ua(){return ac()}function Ew(){return ac()}function ac(){return new ya((s=>s.toString()),((s,e)=>s.isEqual(e)))}const WR=new _t(Ee.comparator),ZR=new qt(Ee.comparator);function qe(...s){let e=ZR;for(const n of s)e=e.add(n);return e}const JR=new qt(ze);function e1(){return JR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function ww(s){return{integerValue:""+s}}function Tw(s,e){return IR(e)?ww(e):Eg(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(){this._=void 0}}function t1(s,e,n){return s instanceof Od?(function(o,c){const h={fields:{[rw]:{stringValue:nw},[iw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&gg(c)&&(c=Zd(c)),c&&(h.fields[sw]=c),{mapValue:h}})(n,e):s instanceof yc?Aw(s,e):s instanceof _c?Sw(s,e):(function(o,c){const h=bw(o,c),m=m0(h)+m0(o.Ae);return Bm(h)&&Bm(o.Ae)?ww(m):Eg(o.serializer,m)})(s,e)}function n1(s,e,n){return s instanceof yc?Aw(s,e):s instanceof _c?Sw(s,e):n}function bw(s,e){return s instanceof vc?(function(i){return Bm(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class Od extends th{}class yc extends th{constructor(e){super(),this.elements=e}}function Aw(s,e){const n=xw(e);for(const i of s.elements)n.some((o=>qr(o,i)))||n.push(i);return{arrayValue:{values:n}}}class _c extends th{constructor(e){super(),this.elements=e}}function Sw(s,e){let n=xw(e);for(const i of s.elements)n=n.filter((o=>!qr(o,i)));return{arrayValue:{values:n}}}class vc extends th{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function m0(s){return Rt(s.integerValue||s.doubleValue)}function xw(s){return pg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n){this.field=e,this.transform=n}}function s1(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof yc&&o instanceof yc||i instanceof _c&&o instanceof _c?Ro(i.elements,o.elements,qr):i instanceof vc&&o instanceof vc?qr(i.Ae,o.Ae):i instanceof Od&&o instanceof Od})(s.transform,e.transform)}class i1{constructor(e,n){this.version=e,this.transformResults=n}}class hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _d(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class nh{}function Rw(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new wg(s.key,hn.none()):new Rc(s.key,s.data,hn.none());{const n=s.data,i=vn.empty();let o=new qt(nn.comparator);for(let c of e.fields)if(!o.has(c)){let h=n.field(c);h===null&&c.length>1&&(c=c.popLast(),h=n.field(c)),h===null?i.delete(c):i.set(c,h),o=o.add(c)}return new Ri(s.key,i,new Ln(o.toArray()),hn.none())}}function a1(s,e,n){s instanceof Rc?(function(o,c,h){const m=o.value.clone(),g=p0(o.fieldTransforms,c,h.transformResults);m.setAll(g),c.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(s,e,n):s instanceof Ri?(function(o,c,h){if(!_d(o.precondition,c))return void c.convertToUnknownDocument(h.version);const m=p0(o.fieldTransforms,c,h.transformResults),g=c.data;g.setAll(Iw(o)),g.setAll(m),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function oc(s,e,n,i){return s instanceof Rc?(function(c,h,m,g){if(!_d(c.precondition,h))return m;const _=c.value.clone(),w=y0(c.fieldTransforms,g,h);return _.setAll(w),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(s,e,n,i):s instanceof Ri?(function(c,h,m,g){if(!_d(c.precondition,h))return m;const _=y0(c.fieldTransforms,g,h),w=h.data;return w.setAll(Iw(c)),w.setAll(_),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(s,e,n,i):(function(c,h,m){return _d(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(s,e,n)}function o1(s,e){let n=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),c=bw(i.transform,o||null);c!=null&&(n===null&&(n=vn.empty()),n.set(i.field,c))}return n||null}function g0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ro(i,o,((c,h)=>s1(c,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Rc extends nh{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ri extends nh{constructor(e,n,i,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Iw(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function p0(s,e,n){const i=new Map;Qe(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const c=s[o],h=c.transform,m=e.data.field(c.field);i.set(c.field,n1(h,m,n[o]))}return i}function y0(s,e,n){const i=new Map;for(const o of s){const c=o.transform,h=n.data.field(o.field);i.set(o.field,t1(c,h,e))}return i}class wg extends nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nw extends nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&a1(c,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=oc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=oc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Ew();return this.mutations.forEach((o=>{const c=e.get(o.key),h=c.overlayedDocument;let m=this.applyToLocalView(h,c.mutatedFields);m=n.has(o.key)?null:m;const g=Rw(h,m);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Se.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),qe())}isEqual(e){return this.batchId===e.batchId&&Ro(this.mutations,e.mutations,((n,i)=>g0(n,i)))&&Ro(this.baseMutations,e.baseMutations,((n,i)=>g0(n,i)))}}class Tg{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){Qe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return WR})();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,i[h].version);return new Tg(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Ge;function Cw(s){switch(s){case X.OK:return we(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return we(15467,{code:s})}}function Dw(s){if(s===void 0)return Ss("GRPC error has no .code"),X.UNKNOWN;switch(s){case Pt.OK:return X.OK;case Pt.CANCELLED:return X.CANCELLED;case Pt.UNKNOWN:return X.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return X.INTERNAL;case Pt.UNAVAILABLE:return X.UNAVAILABLE;case Pt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Pt.NOT_FOUND:return X.NOT_FOUND;case Pt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Pt.ABORTED:return X.ABORTED;case Pt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Pt.DATA_LOSS:return X.DATA_LOSS;default:return we(39323,{code:s})}}(Ge=Pt||(Pt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=new gi([4294967295,4294967295],0);function _0(s){const e=d1().encode(s),n=new HE;return n.update(e),new Uint8Array(n.digest())}function v0(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new gi([n,i],0),new gi([o,c],0)]}class bg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ec(`Invalid padding: ${n}`);if(i<0)throw new ec(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ec(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ec(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=gi.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(gi.fromNumber(i)));return o.compare(h1)===1&&(o=new gi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=_0(e),[i,o]=v0(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(i,o,c);if(!this.we(h))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new bg(c,o,n);return i.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const n=_0(e),[i,o]=v0(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(i,o,c);this.Se(h)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n,i,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new rh(Se.min(),o,new _t(ze),xs(),qe())}}class Ic{constructor(e,n,i,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ic(i,n,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,i,o){this.be=e,this.removedTargetIds=n,this.key=i,this.De=o}}class Ow{constructor(e,n){this.targetId=e,this.Ce=n}}class Pw{constructor(e,n,i=rn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class E0{constructor(){this.ve=0,this.Fe=w0(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),n=qe(),i=qe();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:we(38017,{changeType:c})}})),new Ic(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=w0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class f1{constructor(e){this.Ge=e,this.ze=new Map,this.je=xs(),this.Je=ud(),this.He=ud(),this.Ye=new _t(ze)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(Fm(c))if(i===0){const h=new Ee(c.path);this.et(n,h,Xt.newNoDocument(h,Se.min()))}else Qe(i===1,20013,{expectedCount:i});else{const h=this._t(n);if(h!==i){const m=this.ut(e),g=m?this.ct(m,e,h):1;if(g!==0){this.it(n);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=n;let h,m;try{h=wi(i).toUint8Array()}catch(g){if(g instanceof tw)return xo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new bg(h,o,c)}catch(g){return xo(g instanceof ec?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach((c=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,h)=>{const m=this.ot(h);if(m){if(c.current&&Fm(m.target)){const g=new Ee(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Xt.newNoDocument(g,e))}c.Be&&(n.set(h,c.ke()),c.qe())}}));let i=qe();this.He.forEach(((c,h)=>{let m=!0;h.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(e)));const o=new rh(e,n,this.Ye,this.je,i);return this.je=xs(),this.Je=ud(),this.He=ud(),this.Ye=new _t(ze),o}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new E0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qt(ze),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qt(ze),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new E0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ud(){return new _t(Ee.comparator)}function w0(){return new _t(Ee.comparator)}const m1={asc:"ASCENDING",desc:"DESCENDING"},g1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p1={and:"AND",or:"OR"};class y1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Qm(s,e){return s.useProto3Json||xc(e)?e:{value:e}}function Pd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mw(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function _1(s,e){return Pd(s,e.toTimestamp())}function Un(s){return Qe(!!s,49232),Se.fromTimestamp((function(n){const i=Ei(n);return new Ke(i.seconds,i.nanos)})(s))}function Ag(s,e){return Km(s,e).canonicalString()}function Km(s,e){const n=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function Vw(s){const e=lt.fromString(s);return Qe(qw(e),10190,{key:e.toString()}),e}function Md(s,e){return Ag(s.databaseId,e.path)}function lc(s,e){const n=Vw(e);if(n.get(1)!==s.databaseId.projectId)throw new de(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new de(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Ee(jw(n))}function kw(s,e){return Ag(s.databaseId,e)}function v1(s){const e=Vw(s);return e.length===4?lt.emptyPath():jw(e)}function Ym(s){return new lt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function jw(s){return Qe(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function T0(s,e,n){return{name:Md(s,e),fields:n.value.mapValue.fields}}function E1(s,e){return"found"in e?(function(i,o){Qe(!!o.found,43571),o.found.name,o.found.updateTime;const c=lc(i,o.found.name),h=Un(o.found.updateTime),m=o.found.createTime?Un(o.found.createTime):Se.min(),g=new vn({mapValue:{fields:o.found.fields}});return Xt.newFoundDocument(c,h,m,g)})(s,e):"missing"in e?(function(i,o){Qe(!!o.missing,3894),Qe(!!o.readTime,22933);const c=lc(i,o.missing),h=Un(o.readTime);return Xt.newNoDocument(c,h)})(s,e):we(7234,{result:e})}function w1(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:we(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(_,w){return _.useProto3Json?(Qe(w===void 0||typeof w=="string",58123),rn.fromBase64String(w||"")):(Qe(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),rn.fromUint8Array(w||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(_){const w=_.code===void 0?X.UNKNOWN:Dw(_.code);return new de(w,_.message||"")})(h);n=new Pw(i,o,c,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=lc(s,i.document.name),c=Un(i.document.updateTime),h=i.document.createTime?Un(i.document.createTime):Se.min(),m=new vn({mapValue:{fields:i.document.fields}}),g=Xt.newFoundDocument(o,c,h,m),_=i.targetIds||[],w=i.removedTargetIds||[];n=new vd(_,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=lc(s,i.document),c=i.readTime?Un(i.readTime):Se.min(),h=Xt.newNoDocument(o,c),m=i.removedTargetIds||[];n=new vd([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=lc(s,i.document),c=i.removedTargetIds||[];n=new vd([],c,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,h=new u1(o,c),m=i.targetId;n=new Ow(m,h)}}return n}function Lw(s,e){let n;if(e instanceof Rc)n={update:T0(s,e.key,e.value)};else if(e instanceof wg)n={delete:Md(s,e.key)};else if(e instanceof Ri)n={update:T0(s,e.key,e.data),updateMask:C1(e.fieldMask)};else{if(!(e instanceof Nw))return we(16599,{Vt:e.type});n={verify:Md(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,h){const m=h.transform;if(m instanceof Od)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof yc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof _c)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof vc)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw we(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:_1(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:we(27497)})(s,e.precondition)),n}function T1(s,e){return s&&s.length>0?(Qe(e!==void 0,14353),s.map((n=>(function(o,c){let h=o.updateTime?Un(o.updateTime):Un(c);return h.isEqual(Se.min())&&(h=Un(c)),new i1(h,o.transformResults||[])})(n,e)))):[]}function b1(s,e){return{documents:[kw(s,e.path)]}}function A1(s,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=kw(s,o);const c=(function(_){if(_.length!==0)return zw(fr.create(_,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const h=(function(_){if(_.length!==0)return _.map((w=>(function(S){return{field:go(S.field),direction:R1(S.dir)}})(w)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const m=Qm(s,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:o}}function S1(s){let e=v1(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){Qe(i===1,65062);const w=n.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let c=[];n.where&&(c=(function(b){const S=Uw(b);return S instanceof fr&&dw(S)?S.getFilters():[S]})(n.where));let h=[];n.orderBy&&(h=(function(b){return b.map((S=>(function(j){return new pc(po(j.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(S)))})(n.orderBy));let m=null;n.limit&&(m=(function(b){let S;return S=typeof b=="object"?b.value:b,xc(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(b){const S=!!b.before,N=b.values||[];return new Cd(N,S)})(n.startAt));let _=null;return n.endAt&&(_=(function(b){const S=!b.before,N=b.values||[];return new Cd(N,S)})(n.endAt)),QR(e,o,h,c,m,"F",g,_)}function x1(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Uw(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=po(n.unaryFilter.field);return Mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=po(n.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=po(n.unaryFilter.field);return Mt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=po(n.unaryFilter.field);return Mt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Mt.create(po(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return fr.create(n.compositeFilter.filters.map((i=>Uw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(n.compositeFilter.op))})(s):we(30097,{filter:s})}function R1(s){return m1[s]}function I1(s){return g1[s]}function N1(s){return p1[s]}function go(s){return{fieldPath:s.canonicalString()}}function po(s){return nn.fromServerFormat(s.fieldPath)}function zw(s){return s instanceof Mt?(function(n){if(n.op==="=="){if(c0(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NAN"}};if(l0(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(c0(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NAN"}};if(l0(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(n.field),op:I1(n.op),value:n.value}}})(s):s instanceof fr?(function(n){const i=n.getFilters().map((o=>zw(o)));return i.length===1?i[0]:{compositeFilter:{op:N1(n.op),filters:i}}})(s):we(54877,{filter:s})}function C1(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function qw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n,i,o,c=Se.min(),h=Se.min(),m=rn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ui(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.yt=e}}function O1(s){const e=S1({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Dd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(){this.Cn=new M1}addToCollectionParentIndex(e,n){return this.Cn.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(vi.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(vi.min())}updateCollectionGroup(e,n,i){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class M1{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new qt(lt.comparator),c=!o.has(i);return this.index[n]=o.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new qt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bw=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(Bw,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Co(0)}static cr(){return new Co(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="LruGarbageCollector",V1=1048576;function S0([s,e],[n,i]){const o=ze(s,n);return o===0?ze(e,i):o}class k1{constructor(e){this.Ir=e,this.buffer=new qt(S0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();S0(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class j1{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(A0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Lo(n)?me(A0,"Ignoring IndexedDB error during garbage collection: ",n):await jo(n)}await this.Vr(3e5)}))}}class L1{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(Wd.ce);const i=new k1(n);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(b0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),b0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,c,h,m,g,_;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,h=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(i=b,m=Date.now(),this.removeTargets(e,i,n)))).next((b=>(c=b,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(_=Date.now(),fo()<=Ue.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(_-g)+`ms
Total Duration: ${_-w}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:b}))))}}function U1(s,e){return new L1(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this.changes=new ya((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ne.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&oc(i.mutation,o,Ln.empty(),Ke.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,qe()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=qe()){const o=ua();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((c=>{let h=Jl();return c.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const i=ua();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,qe())))}populateOverlays(e,n,i){const o=[];return i.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((h,m)=>{n.set(h,m)}))}))}computeViews(e,n,i,o){let c=xs();const h=ac(),m=(function(){return ac()})();return n.forEach(((g,_)=>{const w=i.get(_.key);o.has(_.key)&&(w===void 0||w.mutation instanceof Ri)?c=c.insert(_.key,_):w!==void 0?(h.set(_.key,w.mutation.getFieldMask()),oc(w.mutation,_,w.mutation.getFieldMask(),Ke.now())):h.set(_.key,Ln.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((_,w)=>h.set(_,w))),n.forEach(((_,w)=>m.set(_,new q1(w,h.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,n){const i=ac();let o=new _t(((h,m)=>h-m)),c=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const m of h)m.keys().forEach((g=>{const _=n.get(g);if(_===null)return;let w=i.get(g)||Ln.empty();w=m.applyToLocalView(_,w),i.set(g,w);const b=(o.get(m.batchId)||qe()).add(g);o=o.insert(m.batchId,b)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,w=g.value,b=Ew();w.forEach((S=>{if(!c.has(S)){const N=Rw(n.get(S),i.get(S));N!==null&&b.set(S,N),c=c.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,_,b))}return ne.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(h){return Ee.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-c.size):ne.resolve(ua());let m=hc,g=c;return h.next((_=>ne.forEach(_,((w,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),c.get(w)?ne.resolve():this.remoteDocumentCache.getEntry(e,w).next((S=>{g=g.insert(w,S)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,g,_,qe()))).next((w=>({batchId:m,changes:vw(w)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((i=>{let o=Jl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const c=n.collectionGroup;let h=Jl();return this.indexManager.getCollectionParents(e,c).next((m=>ne.forEach(m,(g=>{const _=(function(b,S){return new Uo(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next((w=>{w.forEach(((b,S)=>{h=h.insert(b,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,o)))).next((h=>{c.forEach(((g,_)=>{const w=_.getKey();h.get(w)===null&&(h=h.insert(w,Xt.newInvalidDocument(w)))}));let m=Jl();return h.forEach(((g,_)=>{const w=c.get(g);w!==void 0&&oc(w.mutation,_,Ln.empty(),Ke.now()),eh(n,_)&&(m=m.insert(g,_))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ne.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Un(o.createTime)}})(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:O1(o.bundledQuery),readTime:Un(o.readTime)}})(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.overlays=new _t(Ee.comparator),this.qr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ua();return ne.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,c)=>{this.St(e,n,c)})),ne.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(i)),ne.resolve()}getOverlaysForCollection(e,n,i){const o=ua(),c=n.length+1,h=new Ee(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===c&&g.largestBatchId>i&&o.set(g.getKey(),g)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let c=new _t(((_,w)=>_-w));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>i){let w=c.get(_.largestBatchId);w===null&&(w=ua(),c=c.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const m=ua(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,w)=>m.set(_,w))),!(m.size()>=o)););return ne.resolve(m)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new c1(n,i));let c=this.qr.get(n);c===void 0&&(c=qe(),this.qr.set(n,c)),this.qr.set(n,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(){this.Qr=new qt(Yt.$r),this.Ur=new qt(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Yt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new Yt(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Ee(new lt([])),i=new Yt(n,e),o=new Yt(n,e+1),c=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ee(new lt([])),i=new Yt(n,e),o=new Yt(n,e+1);let c=qe();return this.Ur.forEachInRange([i,o],(h=>{c=c.add(h.key)})),c}containsKey(e){const n=new Yt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Yt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ee.comparator(e.key,n.key)||ze(e.Yr,n.Yr)}static Kr(e,n){return ze(e.Yr,n.Yr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qt(Yt.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new l1(c,n,i,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Yt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(h)}lookupMutationBatch(e,n){return ne.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ei(i),c=o<0?0:o;return ne.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?mg:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Yt(n,0),o=new Yt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,o],(h=>{const m=this.Xr(h.Yr);c.push(m)})),ne.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new qt(ze);return n.forEach((o=>{const c=new Yt(o,0),h=new Yt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(m=>{i=i.add(m.Yr)}))})),ne.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let c=i;Ee.isDocumentKey(c)||(c=c.child(""));const h=new Yt(new Ee(c),0);let m=new qt(ze);return this.Zr.forEachWhile((g=>{const _=g.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Yr)),!0)}),h),ne.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ne.forEach(n.mutations,(o=>{const c=new Yt(o.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new Yt(n,0),o=this.Zr.firstAfterOrEqual(i);return ne.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.ri=e,this.docs=(function(){return new _t(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),c=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ne.resolve(i?i.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let i=xs();return n.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():Xt.newInvalidDocument(o))})),ne.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let c=xs();const h=n.path,m=new Ee(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:w}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||AR(bR(w),i)<=0||(o.has(w.key)||eh(n,w))&&(c=c.insert(w.key,w.mutableCopy()))}return ne.resolve(c)}getAllFromCollectionGroup(e,n,i,o){we(9500)}ii(e,n){return ne.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new Y1(this)}getSize(e){return ne.resolve(this.size)}}class Y1 extends z1{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),ne.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.persistence=e,this.si=new ya((n=>yg(n)),_g),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new Sg,this.targetCount=0,this.ai=Co.ur()}forEachTarget(e,n){return this.si.forEach(((i,o)=>n(o))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),ne.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Co(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.Pr(n),ne.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,i){let o=0;const c=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=n&&i.get(m.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ne.waitFor(c).next((()=>o))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return ne.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),ne.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((h=>{c.push(o.markPotentiallyOrphaned(e,h))})),ne.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return ne.resolve(i)}containsKey(e,n){return ne.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Wd(0),this.li=!1,this.li=!0,this.hi=new G1,this.referenceDelegate=e(this),this.Pi=new X1(this),this.indexManager=new P1,this.remoteDocumentCache=(function(o){return new K1(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new D1(n),this.Ii=new H1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new F1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new Q1(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){me("MemoryPersistence","Starting transaction:",e);const o=new $1(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return ne.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class $1 extends xR{constructor(e){super(),this.currentSequenceNumber=e}}class xg{constructor(e){this.persistence=e,this.Ri=new Sg,this.Vi=null}static mi(e){return new xg(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),ne.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ne.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(i=>{const o=Ee.fromPath(i);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ne.or([()=>ne.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Vd{constructor(e,n){this.persistence=e,this.pi=new ya((i=>NR(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=U1(this,n)}static mi(e,n){return new Vd(e,n)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((o=>i+o))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return ne.forEach(this.pi,((i,o)=>this.br(e,i,o).next((c=>c?ne.resolve():n(o)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((m=>{m||(i++,c.removeEntry(h,Se.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ne.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pd(e.data.value)),n}br(e,n,i){return ne.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ne.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=qe(),o=qe();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Rg(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return FS()?8:RR(fn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const c={result:null};return this.ys(e,n).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(e,n,o,i).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new W1;return this.Ss(e,n,h).next((m=>{if(c.result=m,this.Vs)return this.bs(e,n,h,m.size)}))})).next((()=>c.result))}bs(e,n,i,o){return i.documentReadCount<this.fs?(fo()<=Ue.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(fo()<=Ue.DEBUG&&me("QueryEngine","Query:",mo(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(fo()<=Ue.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kr(n))):ne.resolve())}ys(e,n){if(f0(n))return ne.resolve(null);let i=kr(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Dd(n,null,"F"),i=kr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const h=qe(...c);return this.ps.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const _=this.Ds(n,m);return this.Cs(n,_,h,g.readTime)?this.ys(e,Dd(n,null,"F")):this.vs(e,_,n,g)}))))})))))}ws(e,n,i,o){return f0(n)||o.isEqual(Se.min())?ne.resolve(null):this.ps.getDocuments(e,i).next((c=>{const h=this.Ds(n,c);return this.Cs(n,h,i,o)?ne.resolve(null):(fo()<=Ue.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),mo(n)),this.vs(e,h,n,TR(o,hc)).next((m=>m)))}))}Ds(e,n){let i=new qt(yw(e));return n.forEach(((o,c)=>{eh(e,c)&&(i=i.add(c))})),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,i){return fo()<=Ue.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",mo(n)),this.ps.getDocumentsMatchingQuery(e,n,vi.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((c=>(n.forEach((h=>{c=c.insert(h.key,h)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="LocalStore",J1=3e8;class eI{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new _t(ze),this.xs=new ya((c=>yg(c)),_g),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function tI(s,e,n,i){return new eI(s,e,n,i)}async function Fw(s,e){const n=Ne(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const h=[],m=[];let g=qe();for(const _ of o){h.push(_.batchId);for(const w of _.mutations)g=g.add(w.key)}for(const _ of c){m.push(_.batchId);for(const w of _.mutations)g=g.add(w.key)}return n.localDocuments.getDocuments(i,g).next((_=>({Ls:_,removedBatchIds:h,addedBatchIds:m})))}))}))}function nI(s,e){const n=Ne(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,_,w){const b=_.batch,S=b.keys();let N=ne.resolve();return S.forEach((j=>{N=N.next((()=>w.getEntry(g,j))).next((G=>{const B=_.docVersions.get(j);Qe(B!==null,48541),G.version.compareTo(B)<0&&(b.applyToRemoteDocument(G,_),G.isValidDocument()&&(G.setReadTime(_.commitVersion),w.addEntry(G)))}))})),N.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=qe();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function Gw(s){const e=Ne(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function rI(s,e){const n=Ne(s),i=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((w,b)=>{const S=o.get(b);if(!S)return;m.push(n.Pi.removeMatchingKeys(c,w.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(c,w.addedDocuments,b))));let N=S.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?N=N.withResumeToken(rn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):w.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(w.resumeToken,i)),o=o.insert(b,N),(function(G,B,ae){return G.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=J1?!0:ae.addedDocuments.size+ae.modifiedDocuments.size+ae.removedDocuments.size>0})(S,N,w)&&m.push(n.Pi.updateTargetData(c,N))}));let g=xs(),_=qe();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,w))})),m.push(sI(c,h,e.documentUpdates).next((w=>{g=w.ks,_=w.qs}))),!i.isEqual(Se.min())){const w=n.Pi.getLastRemoteSnapshotVersion(c).next((b=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i)));m.push(w)}return ne.waitFor(m).next((()=>h.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,_))).next((()=>g))})).then((c=>(n.Ms=o,c)))}function sI(s,e,n){let i=qe(),o=qe();return n.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let h=xs();return n.forEach(((m,g)=>{const _=c.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Se.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):me(Ig,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function iI(s,e){const n=Ne(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=mg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function aI(s,e){const n=Ne(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Pi.getTargetData(i,e).next((c=>c?(o=c,ne.resolve(o)):n.Pi.allocateTargetId(i).next((h=>(o=new ui(e,h,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function Xm(s,e,n){const i=Ne(s),o=i.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Lo(h))throw h;me(Ig,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function x0(s,e,n){const i=Ne(s);let o=Se.min(),c=qe();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,_,w){const b=Ne(g),S=b.xs.get(w);return S!==void 0?ne.resolve(b.Ms.get(S)):b.Pi.getTargetData(_,w)})(i,h,kr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{c=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,n?o:Se.min(),n?c:qe()))).next((m=>(oI(i,YR(e),m),{documents:m,Qs:c})))))}function oI(s,e,n){let i=s.Os.get(e)||Se.min();n.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.Os.set(e,i)}class R0{constructor(){this.activeTargetIds=e1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lI{constructor(){this.Mo=new R0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new R0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="ConnectivityMonitor";class N0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(I0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(I0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dd=null;function $m(){return dd===null?dd=(function(){return 268435456+Math.round(2147483648*Math.random())})():dd++,"0x"+dd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="RestConnection",uI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Id?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,c){const h=$m(),m=this.zo(e,n.toUriEncodedString());me(Rm,`Sending RPC '${e}' ${h}:`,m,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:_}=new URL(m),w=Mo(_);return this.Jo(e,m,g,i,w).then((b=>(me(Rm,`Received RPC '${e}' ${h}: `,b),b)),(b=>{throw xo(Rm,`RPC '${e}' ${h} failed with error: `,b,"url: ",m,"request:",i),b}))}Ho(e,n,i,o,c,h){return this.Go(e,n,i,o,c)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ko})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),i&&i.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const i=uI[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class fI extends dI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,c){const h=$m();return new Promise(((m,g)=>{const _=new FE;_.setWithCredentials(!0),_.listenOnce(GE.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case gd.NO_ERROR:const b=_.getResponseJson();me(ln,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(b)),m(b);break;case gd.TIMEOUT:me(ln,`RPC '${e}' ${h} timed out`),g(new de(X.DEADLINE_EXCEEDED,"Request time out"));break;case gd.HTTP_ERROR:const S=_.getStatus();if(me(ln,`RPC '${e}' ${h} failed with status:`,S,"response text:",_.getResponseText()),S>0){let N=_.getResponseJson();Array.isArray(N)&&(N=N[0]);const j=N==null?void 0:N.error;if(j&&j.status&&j.message){const G=(function(ae){const re=ae.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(re)>=0?re:X.UNKNOWN})(j.status);g(new de(G,j.message))}else g(new de(X.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new de(X.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{me(ln,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);me(ln,`RPC '${e}' ${h} sending request:`,o),_.send(n,"POST",w,i,15)}))}T_(e,n,i){const o=$m(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=YE(),m=KE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,i),g.encodeInitMessageHeaders=!0;const w=c.join("");me(ln,`Creating RPC '${e}' stream ${o}: ${w}`,g);const b=h.createWebChannel(w,g);this.I_(b);let S=!1,N=!1;const j=new hI({Yo:B=>{N?me(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(S||(me(ln,`Opening RPC '${e}' stream ${o} transport.`),b.open(),S=!0),me(ln,`RPC '${e}' stream ${o} sending:`,B),b.send(B))},Zo:()=>b.close()}),G=(B,ae,re)=>{B.listen(ae,(se=>{try{re(se)}catch(ge){setTimeout((()=>{throw ge}),0)}}))};return G(b,Zl.EventType.OPEN,(()=>{N||(me(ln,`RPC '${e}' stream ${o} transport opened.`),j.o_())})),G(b,Zl.EventType.CLOSE,(()=>{N||(N=!0,me(ln,`RPC '${e}' stream ${o} transport closed`),j.a_(),this.E_(b))})),G(b,Zl.EventType.ERROR,(B=>{N||(N=!0,xo(ln,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),j.a_(new de(X.UNAVAILABLE,"The operation could not be completed")))})),G(b,Zl.EventType.MESSAGE,(B=>{var ae;if(!N){const re=B.data[0];Qe(!!re,16349);const se=re,ge=(se==null?void 0:se.error)||((ae=se[0])==null?void 0:ae.error);if(ge){me(ln,`RPC '${e}' stream ${o} received error:`,ge);const ue=ge.status;let W=(function(I){const P=Pt[I];if(P!==void 0)return Dw(P)})(ue),C=ge.message;W===void 0&&(W=X.INTERNAL,C="Unknown error status: "+ue+" with message "+ge.message),N=!0,j.a_(new de(W,C)),b.close()}else me(ln,`RPC '${e}' stream ${o} received:`,re),j.u_(re)}})),G(m,QE.STAT_EVENT,(B=>{B.stat===Um.PROXY?me(ln,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===Um.NOPROXY&&me(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(s){return new y1(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n,i=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="PersistentStream";class Qw{constructor(e,n,i,o,c,h,m,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ng(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(Ss(n.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===n&&this.G_(i,o)}),(i=>{e((()=>{const o=new de(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(C0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(me(C0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mI extends Qw{constructor(e,n,i,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,h),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=w1(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Se.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Se.min():h.readTime?Un(h.readTime):Se.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Ym(this.serializer),n.addTarget=(function(c,h){let m;const g=h.target;if(m=Fm(g)?{documents:b1(c,g)}:{query:A1(c,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=Mw(c,h.resumeToken);const _=Qm(c,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(Se.min())>0){m.readTime=Pd(c,h.snapshotVersion.toTimestamp());const _=Qm(c,h.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const i=x1(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Ym(this.serializer),n.removeTarget=e,this.q_(n)}}class gI extends Qw{constructor(e,n,i,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=T1(e.writeResults,e.commitTime),i=Un(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Ym(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>Lw(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{}class yI extends pI{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new de(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(e,Km(n,i),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(X.UNKNOWN,c.toString())}))}Ho(e,n,i,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(e,Km(n,i),o,h,m,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new de(X.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class _I{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ss(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="RemoteStore";class vI{constructor(e,n,i,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{_a(this)&&(me(ga,"Restarting streams for network reachability change."),await(async function(g){const _=Ne(g);_.Ea.add(4),await Nc(_),_.Ra.set("Unknown"),_.Ea.delete(4),await ih(_)})(this))}))})),this.Ra=new _I(i,o)}}async function ih(s){if(_a(s))for(const e of s.da)await e(!0)}async function Nc(s){for(const e of s.da)await e(!1)}function Kw(s,e){const n=Ne(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Pg(n)?Og(n):zo(n).O_()&&Dg(n,e))}function Cg(s,e){const n=Ne(s),i=zo(n);n.Ia.delete(e),i.O_()&&Yw(n,e),n.Ia.size===0&&(i.O_()?i.L_():_a(n)&&n.Ra.set("Unknown"))}function Dg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zo(s).Y_(e)}function Yw(s,e){s.Va.Ue(e),zo(s).Z_(e)}function Og(s){s.Va=new f1({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),zo(s).start(),s.Ra.ua()}function Pg(s){return _a(s)&&!zo(s).x_()&&s.Ia.size>0}function _a(s){return Ne(s).Ea.size===0}function Xw(s){s.Va=void 0}async function EI(s){s.Ra.set("Online")}async function wI(s){s.Ia.forEach(((e,n)=>{Dg(s,e)}))}async function TI(s,e){Xw(s),Pg(s)?(s.Ra.ha(e),Og(s)):s.Ra.set("Unknown")}async function bI(s,e,n){if(s.Ra.set("Online"),e instanceof Pw&&e.state===2&&e.cause)try{await(async function(o,c){const h=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(s,e)}catch(i){me(ga,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await kd(s,i)}else if(e instanceof vd?s.Va.Ze(e):e instanceof Ow?s.Va.st(e):s.Va.tt(e),!n.isEqual(Se.min()))try{const i=await Gw(s.localStore);n.compareTo(i)>=0&&await(function(c,h){const m=c.Va.Tt(h);return m.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const w=c.Ia.get(_);w&&c.Ia.set(_,w.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,_)=>{const w=c.Ia.get(g);if(!w)return;c.Ia.set(g,w.withResumeToken(rn.EMPTY_BYTE_STRING,w.snapshotVersion)),Yw(c,g);const b=new ui(w.target,g,_,w.sequenceNumber);Dg(c,b)})),c.remoteSyncer.applyRemoteEvent(m)})(s,n)}catch(i){me(ga,"Failed to raise snapshot:",i),await kd(s,i)}}async function kd(s,e,n){if(!Lo(e))throw e;s.Ea.add(1),await Nc(s),s.Ra.set("Offline"),n||(n=()=>Gw(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{me(ga,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await ih(s)}))}function $w(s,e){return e().catch((n=>kd(s,n,e)))}async function ah(s){const e=Ne(s),n=bi(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:mg;for(;AI(e);)try{const o=await iI(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,SI(e,o)}catch(o){await kd(e,o)}Ww(e)&&Zw(e)}function AI(s){return _a(s)&&s.Ta.length<10}function SI(s,e){s.Ta.push(e);const n=bi(s);n.O_()&&n.X_&&n.ea(e.mutations)}function Ww(s){return _a(s)&&!bi(s).x_()&&s.Ta.length>0}function Zw(s){bi(s).start()}async function xI(s){bi(s).ra()}async function RI(s){const e=bi(s);for(const n of s.Ta)e.ea(n.mutations)}async function II(s,e,n){const i=s.Ta.shift(),o=Tg.from(i,e,n);await $w(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await ah(s)}async function NI(s,e){e&&bi(s).X_&&await(async function(i,o){if((function(h){return Cw(h)&&h!==X.ABORTED})(o.code)){const c=i.Ta.shift();bi(i).B_(),await $w(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await ah(i)}})(s,e),Ww(s)&&Zw(s)}async function D0(s,e){const n=Ne(s);n.asyncQueue.verifyOperationInProgress(),me(ga,"RemoteStore received new credentials");const i=_a(n);n.Ea.add(3),await Nc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ih(n)}async function CI(s,e){const n=Ne(s);e?(n.Ea.delete(2),await ih(n)):e||(n.Ea.add(2),await Nc(n),n.Ra.set("Unknown"))}function zo(s){return s.ma||(s.ma=(function(n,i,o){const c=Ne(n);return c.sa(),new mI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:EI.bind(null,s),t_:wI.bind(null,s),r_:TI.bind(null,s),H_:bI.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Pg(s)?Og(s):s.Ra.set("Unknown")):(await s.ma.stop(),Xw(s))}))),s.ma}function bi(s){return s.fa||(s.fa=(function(n,i,o){const c=Ne(n);return c.sa(),new gI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:xI.bind(null,s),r_:NI.bind(null,s),ta:RI.bind(null,s),na:II.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await ah(s)):(await s.fa.stop(),s.Ta.length>0&&(me(ga,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n,i,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,c){const h=Date.now()+i,m=new Mg(e,n,h,o,c);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vg(s,e){if(Ss("AsyncQueue",`${e}: ${s}`),Lo(s))return new de(X.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{static emptySet(e){return new Eo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ee.comparator(n.key,i.key):(n,i)=>Ee.comparator(n.key,i.key),this.keyedMap=Jl(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Eo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(){this.ga=new _t(Ee.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Do{constructor(e,n,i,o,c,h,m,g,_){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,n,i,o,c){const h=[];return n.forEach((m=>{h.push({type:0,doc:m})})),new Do(e,n,Eo.emptySet(n),h,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class OI{constructor(){this.queries=P0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Ne(n),c=o.queries;o.queries=P0(),c.forEach(((h,m)=>{for(const g of m.Sa)g.onError(i)}))})(this,new de(X.ABORTED,"Firestore shutting down"))}}function P0(){return new ya((s=>pw(s)),Jd)}async function Jw(s,e){const n=Ne(s);let i=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(i=2):(c=new DI,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const m=Vg(h,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&kg(n)}async function eT(s,e){const n=Ne(s),i=e.query;let o=3;const c=n.queries.get(i);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function PI(s,e){const n=Ne(s);let i=!1;for(const o of e){const c=o.query,h=n.queries.get(c);if(h){for(const m of h.Sa)m.Fa(o)&&(i=!0);h.wa=o}}i&&kg(n)}function MI(s,e,n){const i=Ne(s),o=i.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);i.queries.delete(e)}function kg(s){s.Ca.forEach((e=>{e.next()}))}var Wm,M0;(M0=Wm||(Wm={})).Ma="default",M0.Cache="cache";class tT{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Do(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Do.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Wm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){this.key=e}}class rT{constructor(e){this.key=e}}class VI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=yw(e),this.tu=new Eo(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new O0,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,b)=>{const S=o.get(w),N=eh(this.query,b)?b:null,j=!!S&&this.mutatedKeys.has(S.key),G=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let B=!1;S&&N?S.data.isEqual(N.data)?j!==G&&(i.track({type:3,doc:N}),B=!0):this.su(S,N)||(i.track({type:2,doc:N}),B=!0,(g&&this.eu(N,g)>0||_&&this.eu(N,_)<0)&&(m=!0)):!S&&N?(i.track({type:0,doc:N}),B=!0):S&&!N&&(i.track({type:1,doc:S}),B=!0,(g||_)&&(m=!0)),B&&(N?(h=h.add(N),c=G?c.add(w):c.delete(w)):(h=h.delete(w),c=c.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),c=c.delete(w.key),i.track({type:1,doc:w})}return{tu:h,iu:i,Cs:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,b)=>(function(N,j){const G=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:B})}};return G(N)-G(j)})(w.type,b.type)||this.eu(w.doc,b.doc))),this.ou(i),o=o??!1;const m=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,_=g!==this.Za;return this.Za=g,h.length!==0||_?{snapshot:new Do(this.query,e.tu,c,h,e.mutatedKeys,g===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new O0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new rT(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new nT(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=qe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Do.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jg="SyncEngine";class kI{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class jI{constructor(e){this.key=e,this.hu=!1}}class LI{constructor(e,n,i,o,c,h){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new ya((m=>pw(m)),Jd),this.Iu=new Map,this.Eu=new Set,this.du=new _t(Ee.comparator),this.Au=new Map,this.Ru=new Sg,this.Vu={},this.mu=new Map,this.fu=Co.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function UI(s,e,n=!0){const i=cT(s);let o;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await sT(i,e,n,!0),o}async function zI(s,e){const n=cT(s);await sT(n,e,!0,!1)}async function sT(s,e,n,i){const o=await aI(s.localStore,kr(e)),c=o.targetId,h=s.sharedClientState.addLocalQueryTarget(c,n);let m;return i&&(m=await qI(s,e,c,h==="current",o.resumeToken)),s.isPrimaryClient&&n&&Kw(s.remoteStore,o),m}async function qI(s,e,n,i,o){s.pu=(b,S,N)=>(async function(G,B,ae,re){let se=B.view.ru(ae);se.Cs&&(se=await x0(G.localStore,B.query,!1).then((({documents:C})=>B.view.ru(C,se))));const ge=re&&re.targetChanges.get(B.targetId),ue=re&&re.targetMismatches.get(B.targetId)!=null,W=B.view.applyChanges(se,G.isPrimaryClient,ge,ue);return k0(G,B.targetId,W.au),W.snapshot})(s,b,S,N);const c=await x0(s.localStore,e,!0),h=new VI(e,c.Qs),m=h.ru(c.documents),g=Ic.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",o),_=h.applyChanges(m,s.isPrimaryClient,g);k0(s,n,_.au);const w=new kI(e,n,h);return s.Tu.set(e,w),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),_.snapshot}async function BI(s,e,n){const i=Ne(s),o=i.Tu.get(e),c=i.Iu.get(o.targetId);if(c.length>1)return i.Iu.set(o.targetId,c.filter((h=>!Jd(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Xm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Cg(i.remoteStore,o.targetId),Zm(i,o.targetId)})).catch(jo)):(Zm(i,o.targetId),await Xm(i.localStore,o.targetId,!0))}async function HI(s,e){const n=Ne(s),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Cg(n.remoteStore,i.targetId))}async function FI(s,e,n){const i=WI(s);try{const o=await(function(h,m){const g=Ne(h),_=Ke.now(),w=m.reduce(((N,j)=>N.add(j.key)),qe());let b,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let j=xs(),G=qe();return g.Ns.getEntries(N,w).next((B=>{j=B,j.forEach(((ae,re)=>{re.isValidDocument()||(G=G.add(ae))}))})).next((()=>g.localDocuments.getOverlayedDocuments(N,j))).next((B=>{b=B;const ae=[];for(const re of m){const se=o1(re,b.get(re.key).overlayedDocument);se!=null&&ae.push(new Ri(re.key,se,lw(se.value.mapValue),hn.exists(!0)))}return g.mutationQueue.addMutationBatch(N,_,ae,m)})).next((B=>{S=B;const ae=B.applyToLocalDocumentSet(b,G);return g.documentOverlayCache.saveOverlays(N,B.batchId,ae)}))})).then((()=>({batchId:S.batchId,changes:vw(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let _=h.Vu[h.currentUser.toKey()];_||(_=new _t(ze)),_=_.insert(m,g),h.Vu[h.currentUser.toKey()]=_})(i,o.batchId,n),await Cc(i,o.changes),await ah(i.remoteStore)}catch(o){const c=Vg(o,"Failed to persist write");n.reject(c)}}async function iT(s,e){const n=Ne(s);try{const i=await rI(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const h=n.Au.get(c);h&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Qe(h.hu,14607):o.removedDocuments.size>0&&(Qe(h.hu,42227),h.hu=!1))})),await Cc(n,i,e)}catch(i){await jo(i)}}function V0(s,e,n){const i=Ne(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach(((c,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=Ne(h);g.onlineState=m;let _=!1;g.queries.forEach(((w,b)=>{for(const S of b.Sa)S.va(m)&&(_=!0)})),_&&kg(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function GI(s,e,n){const i=Ne(s);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),c=o&&o.key;if(c){let h=new _t(Ee.comparator);h=h.insert(c,Xt.newNoDocument(c,Se.min()));const m=qe().add(c),g=new rh(Se.min(),new Map,new _t(ze),h,m);await iT(i,g),i.du=i.du.remove(c),i.Au.delete(e),Lg(i)}else await Xm(i.localStore,e,!1).then((()=>Zm(i,e,n))).catch(jo)}async function QI(s,e){const n=Ne(s),i=e.batch.batchId;try{const o=await nI(n.localStore,e);oT(n,i,null),aT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Cc(n,o)}catch(o){await jo(o)}}async function KI(s,e,n){const i=Ne(s);try{const o=await(function(h,m){const g=Ne(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let w;return g.mutationQueue.lookupMutationBatch(_,m).next((b=>(Qe(b!==null,37113),w=b.keys(),g.mutationQueue.removeMutationBatch(_,b)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,w,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w))).next((()=>g.localDocuments.getDocuments(_,w)))}))})(i.localStore,e);oT(i,e,n),aT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Cc(i,o)}catch(o){await jo(o)}}function aT(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function oT(s,e,n){const i=Ne(s);let o=i.Vu[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Zm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||lT(s,i)}))}function lT(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(Cg(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Lg(s))}function k0(s,e,n){for(const i of n)i instanceof nT?(s.Ru.addReference(i.key,e),YI(s,i)):i instanceof rT?(me(jg,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||lT(s,i.key)):we(19791,{wu:i})}function YI(s,e){const n=e.key,i=n.path.canonicalString();s.du.get(n)||s.Eu.has(i)||(me(jg,"New document in limbo: "+n),s.Eu.add(i),Lg(s))}function Lg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Ee(lt.fromString(e)),i=s.fu.next();s.Au.set(i,new jI(n)),s.du=s.du.insert(n,i),Kw(s.remoteStore,new ui(kr(vg(n.path)),i,"TargetPurposeLimboResolution",Wd.ce))}}async function Cc(s,e,n){const i=Ne(s),o=[],c=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,g)=>{h.push(i.pu(g,e,n).then((_=>{var w;if((_||n)&&i.isPrimaryClient){const b=_?!_.fromCache:(w=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:w.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(_){o.push(_);const b=Rg.As(g.targetId,_);c.push(b)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(g,_){const w=Ne(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ne.forEach(_,(S=>ne.forEach(S.Es,(N=>w.persistence.referenceDelegate.addReference(b,S.targetId,N))).next((()=>ne.forEach(S.ds,(N=>w.persistence.referenceDelegate.removeReference(b,S.targetId,N)))))))))}catch(b){if(!Lo(b))throw b;me(Ig,"Failed to update sequence numbers: "+b)}for(const b of _){const S=b.targetId;if(!b.fromCache){const N=w.Ms.get(S),j=N.snapshotVersion,G=N.withLastLimboFreeSnapshotVersion(j);w.Ms=w.Ms.insert(S,G)}}})(i.localStore,c))}async function XI(s,e){const n=Ne(s);if(!n.currentUser.isEqual(e)){me(jg,"User change. New user:",e.toKey());const i=await Fw(n.localStore,e);n.currentUser=e,(function(c,h){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new de(X.CANCELLED,h))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Cc(n,i.Ls)}}function $I(s,e){const n=Ne(s),i=n.Au.get(e);if(i&&i.hu)return qe().add(i.key);{let o=qe();const c=n.Iu.get(e);if(!c)return o;for(const h of c){const m=n.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function cT(s){const e=Ne(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=iT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$I.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GI.bind(null,e),e.Pu.H_=PI.bind(null,e.eventManager),e.Pu.yu=MI.bind(null,e.eventManager),e}function WI(s){const e=Ne(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KI.bind(null,e),e}class jd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return tI(this.persistence,new Z1,e.initialUser,this.serializer)}Cu(e){return new Hw(xg.mi,this.serializer)}Du(e){return new lI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jd.provider={build:()=>new jd};class ZI extends jd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Qe(this.persistence.referenceDelegate instanceof Vd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new j1(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new Hw((i=>Vd.mi(i,n)),this.serializer)}}class Jm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>V0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=XI.bind(null,this.syncEngine),await CI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new OI})()}createDatastore(e){const n=sh(e.databaseInfo.databaseId),i=(function(c){return new fI(c)})(e.databaseInfo);return(function(c,h,m,g){return new yI(c,h,m,g)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,c,h,m){return new vI(i,o,c,h,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>V0(this.syncEngine,n,0)),(function(){return N0.v()?new N0:new cI})())}createSyncEngine(e,n){return(function(o,c,h,m,g,_,w){const b=new LI(o,c,h,m,g,_);return w&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const c=Ne(o);me(ga,"RemoteStore shutting down."),c.Ea.add(5),await Nc(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Jm.provider={build:()=>new Jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ss("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new de(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,c){const h=Ne(o),m={documents:c.map((b=>Md(h.serializer,b)))},g=await h.Ho("BatchGetDocuments",h.serializer.databaseId,lt.emptyPath(),m,c.length),_=new Map;g.forEach((b=>{const S=E1(h.serializer,b);_.set(S.key.toString(),S)}));const w=[];return c.forEach((b=>{const S=_.get(b.toString());Qe(!!S,55234,{key:b}),w.push(S)})),w})(this.datastore,e);return n.forEach((i=>this.recordVersion(i))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new wg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,i)=>{const o=Ee.fromPath(i);this.mutations.push(new Nw(o,this.precondition(o)))})),await(async function(i,o){const c=Ne(i),h={writes:o.map((m=>Lw(c.serializer,m)))};await c.Go("Commit",c.serializer.databaseId,lt.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw we(50498,{Gu:e.constructor.name});n=Se.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new de(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Se.min())?hn.exists(!1):hn.updateTime(n):hn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Se.min()))throw new de(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hn.updateTime(n)}return hn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,n,i,o,c){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=o,this.deferred=c,this.zu=i.maxAttempts,this.M_=new Ng(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new JI(this.datastore),n=this.Hu(e);n&&n.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((o=>{this.Yu(o)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const n=this.updateFunction(e);return!xc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Cw(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="FirestoreClient";class tN{constructor(e,n,i,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=dn.UNAUTHENTICATED,this.clientId=fg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async h=>{me(Ai,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(me(Ai,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Vg(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Nm(s,e){s.asyncQueue.verifyOperationInProgress(),me(Ai,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Fw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function j0(s,e){s.asyncQueue.verifyOperationInProgress();const n=await nN(s);me(Ai,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>D0(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>D0(e.remoteStore,o))),s._onlineComponents=e}async function nN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){me(Ai,"Using user provided OfflineComponentProvider");try{await Nm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;xo("Error using user provided cache. Falling back to memory cache: "+n),await Nm(s,new jd)}}else me(Ai,"Using default OfflineComponentProvider"),await Nm(s,new ZI(void 0));return s._offlineComponents}async function Ug(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(me(Ai,"Using user provided OnlineComponentProvider"),await j0(s,s._uninitializedComponentsProvider._online)):(me(Ai,"Using default OnlineComponentProvider"),await j0(s,new Jm))),s._onlineComponents}function rN(s){return Ug(s).then((e=>e.syncEngine))}function sN(s){return Ug(s).then((e=>e.datastore))}async function dT(s){const e=await Ug(s),n=e.eventManager;return n.onListen=UI.bind(null,e.syncEngine),n.onUnlisten=BI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HI.bind(null,e.syncEngine),n}function iN(s,e,n={}){const i=new Vr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,h,m,g,_){const w=new uT({next:S=>{w.Nu(),h.enqueueAndForget((()=>eT(c,b)));const N=S.docs.has(m);!N&&S.fromCache?_.reject(new de(X.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&g&&g.source==="server"?_.reject(new de(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),b=new tT(vg(m.path),w,{includeMetadataChanges:!0,qa:!0});return Jw(c,b)})(await dT(s),s.asyncQueue,e,n,i))),i.promise}function aN(s,e,n={}){const i=new Vr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,h,m,g,_){const w=new uT({next:S=>{w.Nu(),h.enqueueAndForget((()=>eT(c,b))),S.fromCache&&g.source==="server"?_.reject(new de(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),b=new tT(m,w,{includeMetadataChanges:!0,qa:!0});return Jw(c,b)})(await dT(s),s.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="firestore.googleapis.com",U0=!0;class z0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fT,this.ssl=U0}else this.host=e.host,this.ssl=e.ssl??U0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Bw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<V1)throw new de(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ER("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hT(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oh{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new z0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new z0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new uR;switch(i.type){case"firstParty":return new mR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=L0.get(n);i&&(me("ComponentProvider","Removing Datastore"),L0.delete(n),i.terminate())})(this),Promise.resolve()}}function oN(s,e,n,i={}){var _;s=hr(s,oh);const o=Mo(e),c=s._getSettings(),h={...c,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${n}`;o&&(VE(`https://${m}`),kE("Firestore",!0)),c.host!==fT&&c.host!==m&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:i};if(!ha(g,h)&&(s._setSettings(g),i.mockUserToken)){let w,b;if(typeof i.mockUserToken=="string")w=i.mockUserToken,b=dn.MOCK_USER;else{w=VS(i.mockUserToken,(_=s._app)==null?void 0:_.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new de(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new dn(S)}s._authCredentials=new dR(new $E(w,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ii(this.firestore,e,this._query)}}class wt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Sc(n,wt._jsonSchema))return new wt(e,i||null,new Ee(lt.fromString(n.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:Vt("string",wt._jsonSchemaVersion),referencePath:Vt("string")};class pi extends Ii{constructor(e,n,i){super(e,n,vg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new Ee(e))}withConverter(e){return new pi(this.firestore,e,this._path)}}function et(s,e,...n){if(s=bt(s),WE("collection","path",e),s instanceof oh){const i=lt.fromString(e,...n);return Jv(i),new pi(s,null,i)}{if(!(s instanceof wt||s instanceof pi))throw new de(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(lt.fromString(e,...n));return Jv(i),new pi(s.firestore,null,i)}}function En(s,e,...n){if(s=bt(s),arguments.length===1&&(e=fg.newId()),WE("doc","path",e),s instanceof oh){const i=lt.fromString(e,...n);return Zv(i),new wt(s,null,new Ee(i))}{if(!(s instanceof wt||s instanceof pi))throw new de(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(lt.fromString(e,...n));return Zv(i),new wt(s.firestore,s instanceof pi?s.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="AsyncQueue";class B0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ng(this,"async_queue_retry"),this._c=()=>{const i=Im();i&&me(q0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Im();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Im();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Vr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Lo(e))throw e;me(q0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ss("INTERNAL UNHANDLED ERROR: ",H0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Mg.createAndSchedule(this,e,n,i,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:H0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function H0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class va extends oh{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new B0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new B0(e),this._firestoreClient=void 0,await e}}}function lN(s,e){const n=typeof s=="object"?s:zE(),i=typeof s=="string"?s:Id,o=dg(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=PS("firestore");c&&oN(o,...c)}return o}function lh(s){if(s._terminated)throw new de(X.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||cN(s),s._firestoreClient}function cN(s){var i,o,c;const e=s._freezeSettings(),n=(function(m,g,_,w){return new OR(m,g,_,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,hT(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(s._databaseId,((i=s._app)==null?void 0:i.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new tN(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(rn.fromBase64String(e))}catch(n){throw new de(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jn(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sc(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:Vt("string",jn._jsonSchemaVersion),bytes:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:jr._jsonSchemaVersion}}static fromJSON(e){if(Sc(e,jr._jsonSchema))return new jr(e.latitude,e.longitude)}}jr._jsonSchemaVersion="firestore/geoPoint/1.0",jr._jsonSchema={type:Vt("string",jr._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Lr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sc(e,Lr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Lr(e.vectorValues);throw new de(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Lr._jsonSchemaVersion="firestore/vectorValue/1.0",Lr._jsonSchema={type:Vt("string",Lr._jsonSchemaVersion),vectorValues:Vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=/^__.*__$/;class dN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ri(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rc(e,this.data,n,this.fieldTransforms)}}class mT{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ri(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:s})}}class zg{constructor(e,n,i,o,c,h){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new zg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ld(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gT(this.Ac)&&uN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class hN{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||sh(e)}Cc(e,n,i,o=!1){return new zg({Ac:e,methodName:n,Dc:i,path:nn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Oc(s){const e=s._freezeSettings(),n=sh(s._databaseId);return new hN(s._databaseId,!!e.ignoreUndefinedProperties,n)}function qg(s,e,n,i,o,c={}){const h=s.Cc(c.merge||c.mergeFields?2:0,e,n,o);Hg("Data must be an object, but it was:",h,i);const m=_T(i,h);let g,_;if(c.merge)g=new Ln(h.fieldMask),_=h.fieldTransforms;else if(c.mergeFields){const w=[];for(const b of c.mergeFields){const S=eg(e,b,n);if(!h.contains(S))throw new de(X.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);ET(w,S)||w.push(S)}g=new Ln(w),_=h.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,_=h.fieldTransforms;return new dN(new vn(m),g,_)}class uh extends ch{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uh}}class Bg extends ch{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new vc(e.serializer,Tw(e.serializer,this.Fc));return new r1(e.path,n)}isEqual(e){return e instanceof Bg&&this.Fc===e.Fc}}function pT(s,e,n,i){const o=s.Cc(1,e,n);Hg("Data must be an object, but it was:",o,i);const c=[],h=vn.empty();xi(i,((g,_)=>{const w=Fg(e,g,n);_=bt(_);const b=o.yc(w);if(_ instanceof uh)c.push(w);else{const S=Pc(_,b);S!=null&&(c.push(w),h.set(w,S))}}));const m=new Ln(c);return new mT(h,m,o.fieldTransforms)}function yT(s,e,n,i,o,c){const h=s.Cc(1,e,n),m=[eg(e,i,n)],g=[o];if(c.length%2!=0)throw new de(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<c.length;S+=2)m.push(eg(e,c[S])),g.push(c[S+1]);const _=[],w=vn.empty();for(let S=m.length-1;S>=0;--S)if(!ET(_,m[S])){const N=m[S];let j=g[S];j=bt(j);const G=h.yc(N);if(j instanceof uh)_.push(N);else{const B=Pc(j,G);B!=null&&(_.push(N),w.set(N,B))}}const b=new Ln(_);return new mT(w,b,h.fieldTransforms)}function fN(s,e,n,i=!1){return Pc(n,s.Cc(i?4:3,e))}function Pc(s,e){if(vT(s=bt(s)))return Hg("Unsupported field value:",e,s),_T(s,e);if(s instanceof ch)return(function(i,o){if(!gT(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const c=[];let h=0;for(const m of i){let g=Pc(m,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),h++}return{arrayValue:{values:c}}})(s,e)}return(function(i,o){if((i=bt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Tw(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Ke.fromDate(i);return{timestampValue:Pd(o.serializer,c)}}if(i instanceof Ke){const c=new Ke(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Pd(o.serializer,c)}}if(i instanceof jr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof jn)return{bytesValue:Mw(o.serializer,i._byteString)};if(i instanceof wt){const c=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ag(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Lr)return(function(h,m){return{mapValue:{fields:{[aw]:{stringValue:ow},[Nd]:{arrayValue:{values:h.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return Eg(m.serializer,_)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${$d(i)}`)})(s,e)}function _T(s,e){const n={};return ew(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xi(s,((i,o)=>{const c=Pc(o,e.mc(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function vT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ke||s instanceof jr||s instanceof jn||s instanceof wt||s instanceof ch||s instanceof Lr)}function Hg(s,e,n){if(!vT(n)||!ZE(n)){const i=$d(n);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function eg(s,e,n){if((e=bt(e))instanceof Dc)return e._internalPath;if(typeof e=="string")return Fg(s,e);throw Ld("Field path arguments must be of type string or ",s,!1,void 0,n)}const mN=new RegExp("[~\\*/\\[\\]]");function Fg(s,e,n){if(e.search(mN)>=0)throw Ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Dc(...e.split("."))._internalPath}catch{throw Ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Ld(s,e,n,i,o){const c=i&&!i.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||h)&&(g+=" (found",c&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new de(X.INVALID_ARGUMENT,m+s+g)}function ET(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n,i,o,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gN extends Ud{data(){return super.data()}}function dh(s,e){return typeof e=="string"?Fg(s,e):e instanceof Dc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new de(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gg{}class Qg extends Gg{}function Tt(s,e,...n){let i=[];e instanceof Gg&&i.push(e),i=i.concat(n),(function(c){const h=c.filter((g=>g instanceof Kg)).length,m=c.filter((g=>g instanceof hh)).length;if(h>1||h>0&&m>0)throw new de(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)s=o._apply(s);return s}class hh extends Qg{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new hh(e,n,i)}_apply(e){const n=this._parse(e);return TT(e._query,n),new Ii(e.firestore,e.converter,Gm(e._query,n))}_parse(e){const n=Oc(e.firestore);return(function(c,h,m,g,_,w,b){let S;if(_.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new de(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){G0(b,w);const j=[];for(const G of b)j.push(F0(g,c,G));S={arrayValue:{values:j}}}else S=F0(g,c,b)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||G0(b,w),S=fN(m,h,b,w==="in"||w==="not-in");return Mt.create(_,w,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xe(s,e,n){const i=e,o=dh("where",s);return hh._create(o,i,n)}class Kg extends Gg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Kg(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:fr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let h=o;const m=c.getFlattenedFilters();for(const g of m)TT(h,g),h=Gm(h,g)})(e._query,n),new Ii(e.firestore,e.converter,Gm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yg extends Qg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Yg(e,n)}_apply(e){const n=(function(o,c,h){if(o.startAt!==null)throw new de(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pc(c,h)})(e._query,this._field,this._direction);return new Ii(e.firestore,e.converter,(function(o,c){const h=o.explicitOrderBy.concat([c]);return new Uo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function zd(s,e="asc"){const n=e,i=dh("orderBy",s);return Yg._create(i,n)}class Xg extends Qg{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Xg(e,n,i)}_apply(e){return new Ii(e.firestore,e.converter,Dd(e._query,this._limit,this._limitType))}}function wT(s){return wR("limit",s),Xg._create("limit",s,"F")}function F0(s,e,n){if(typeof(n=bt(n))=="string"){if(n==="")throw new de(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gw(e)&&n.indexOf("/")!==-1)throw new de(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(lt.fromString(n));if(!Ee.isDocumentKey(i))throw new de(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return o0(s,new Ee(i))}if(n instanceof wt)return o0(s,n._key);throw new de(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$d(n)}.`)}function G0(s,e){if(!Array.isArray(s)||s.length===0)throw new de(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TT(s,e){const n=(function(o,c){for(const h of o)for(const m of h.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new de(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class bT{convertValue(e,n="none"){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return xi(e,((o,c)=>{i[o]=this.convertValue(c,n)})),i}convertVectorValue(e){var i,o,c;const n=(c=(o=(i=e.fields)==null?void 0:i[Nd].arrayValue)==null?void 0:o.values)==null?void 0:c.map((h=>Rt(h.doubleValue)));return new Lr(n)}convertGeoPoint(e){return new jr(Rt(e.latitude),Rt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Zd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(fc(e));default:return null}}convertTimestamp(e){const n=Ei(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=lt.fromString(e);Qe(qw(i),9688,{name:e});const o=new mc(i.get(1),i.get(3)),c=new Ee(i.popFirst(5));return o.isEqual(n)||Ss(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}class yN extends bT{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}}class yo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yi extends Ud{constructor(e,n,i,o,c,h){super(e,n,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(dh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=yi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}yi._jsonSchemaVersion="firestore/documentSnapshot/1.0",yi._jsonSchema={type:Vt("string",yi._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class Ed extends yi{data(e={}){return super.data(e)}}class wo{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new yo(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Ed(this._firestore,this._userDataWriter,i.key,i,new yo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new Ed(o._firestore,o._userDataWriter,m.doc.key,m.doc,new yo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new Ed(o._firestore,o._userDataWriter,m.doc.key,m.doc,new yo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,w=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),w=h.indexOf(m.doc.key)),{type:_N(m.type),doc:g,oldIndex:_,newIndex:w}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _N(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(s){s=hr(s,wt);const e=hr(s.firestore,va);return iN(lh(e),s._key).then((n=>vN(e,s,n)))}wo._jsonSchemaVersion="firestore/querySnapshot/1.0",wo._jsonSchema={type:Vt("string",wo._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class Wg extends bT{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}}function pt(s){s=hr(s,Ii);const e=hr(s.firestore,va),n=lh(e),i=new Wg(e);return pN(s._query),aN(n,s._query).then((o=>new wo(e,i,s,o)))}function qd(s,e,n){s=hr(s,wt);const i=hr(s.firestore,va),o=$g(s.converter,e,n);return Jg(i,[qg(Oc(i),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,hn.none())])}function Zg(s,e,n,...i){s=hr(s,wt);const o=hr(s.firestore,va),c=Oc(o);let h;return h=typeof(e=bt(e))=="string"||e instanceof Dc?yT(c,"updateDoc",s._key,e,n,i):pT(c,"updateDoc",s._key,e),Jg(o,[h.toMutation(s._key,hn.exists(!0))])}function Mc(s,e){const n=hr(s.firestore,va),i=En(s),o=$g(s.converter,e);return Jg(n,[qg(Oc(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,hn.exists(!1))]).then((()=>i))}function Jg(s,e){return(function(i,o){const c=new Vr;return i.asyncQueue.enqueueAndForget((async()=>FI(await rN(i),o,c))),c.promise})(lh(s),e)}function vN(s,e,n){const i=n.docs.get(e._key),o=new Wg(s);return new yi(s,o,e._key,i,new yo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN={maxAttempts:5};function tc(s,e){if((s=bt(s)).firestore!==e)throw new de(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Oc(e)}get(e){const n=tc(e,this._firestore),i=new yN(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return we(24041);const c=o[0];if(c.isFoundDocument())return new Ud(this._firestore,i,c.key,c,n.converter);if(c.isNoDocument())return new Ud(this._firestore,i,n._key,null,n.converter);throw we(18433,{doc:c})}))}set(e,n,i){const o=tc(e,this._firestore),c=$g(o.converter,n,i),h=qg(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,i);return this._transaction.set(o._key,h),this}update(e,n,i,...o){const c=tc(e,this._firestore);let h;return h=typeof(n=bt(n))=="string"||n instanceof Dc?yT(this._dataReader,"Transaction.update",c._key,n,i,o):pT(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,h),this}delete(e){const n=tc(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN extends wN{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=tc(e,this._firestore),i=new Wg(this._firestore);return super.get(e).then((o=>new yi(this._firestore,i,n._key,o._document,new yo(!1,!1),n.converter)))}}function bN(s,e,n){s=hr(s,va);const i={...EN,...n};return(function(c){if(c.maxAttempts<1)throw new de(X.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(c,h,m){const g=new Vr;return c.asyncQueue.enqueueAndForget((async()=>{const _=await sN(c);new eN(c.asyncQueue,_,m,h,g).ju()})),g.promise})(lh(s),(o=>e(new TN(s,o))),i)}function AT(s){return new Bg("increment",s)}(function(e,n=!0){(function(o){ko=o})(Vo),So(new fa("firestore",((i,{instanceIdentifier:o,options:c})=>{const h=i.getProvider("app").getImmediate(),m=new va(new hR(i.getProvider("auth-internal")),new gR(h,i.getProvider("app-check-internal")),(function(_,w){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new de(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(_.options.projectId,w)})(h,o),h);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),mi(Yv,Xv,e),mi(Yv,Xv,"esm2020")})();function ST(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AN=ST,xT=new bc("auth","Firebase",ST());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=new cg("@firebase/auth");function SN(s,...e){Bd.logLevel<=Ue.WARN&&Bd.warn(`Auth (${Vo}): ${s}`,...e)}function wd(s,...e){Bd.logLevel<=Ue.ERROR&&Bd.error(`Auth (${Vo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(s,...e){throw tp(s,...e)}function dr(s,...e){return tp(s,...e)}function ep(s,e,n){const i={...AN(),[e]:n};return new bc("auth","Firebase",i).create(e,{appName:s.name})}function Ur(s){return ep(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xN(s,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&tr(s,"argument-error"),ep(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tp(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return xT.create(s,...e)}function xe(s,e,...n){if(!s)throw tp(e,...n)}function Ts(s){const e="INTERNAL ASSERTION FAILED: "+s;throw wd(e),new Error(e)}function Rs(s,e){s||Ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function RN(){return Q0()==="http:"||Q0()==="https:"}function Q0(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RN()||qS()||"connection"in navigator)?navigator.onLine:!0}function NN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rs(n>e,"Short delay should be less than long delay!"),this.isMobile=LS()||BS()}get(){return IN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(s,e){Rs(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ON=new Vc(3e4,6e4);function Ds(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Br(s,e,n,i,o={}){return IT(s,o,async()=>{let c={},h={};i&&(e==="GET"?h=i:c={body:JSON.stringify(i)});const m=Ac({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const _={method:e,headers:g,...c};return zS()||(_.referrerPolicy="no-referrer"),s.emulatorConfig&&Mo(s.emulatorConfig.host)&&(_.credentials="include"),RT.fetch()(await NT(s,s.config.apiHost,n,m),_)})}async function IT(s,e,n){s._canInitEmulator=!1;const i={...CN,...e};try{const o=new MN(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw hd(s,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const m=c.ok?h.errorMessage:h.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw hd(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw hd(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw hd(s,"user-disabled",h);const w=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw ep(s,w,_);tr(s,w)}}catch(o){if(o instanceof Ns)throw o;tr(s,"network-request-failed",{message:String(o)})}}async function kc(s,e,n,i,o={}){const c=await Br(s,e,n,i,o);return"mfaPendingCredential"in c&&tr(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function NT(s,e,n,i){const o=`${e}${n}?${i}`,c=s,h=c.config.emulator?np(s.config,o):`${s.config.apiScheme}://${o}`;return DN.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function PN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class MN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(dr(this.auth,"network-request-failed")),ON.get())})}}function hd(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=dr(s,e,i);return o.customData._tokenResponse=n,o}function K0(s){return s!==void 0&&s.enterprise!==void 0}class VN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return PN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kN(s,e){return Br(s,"GET","/v2/recaptchaConfig",Ds(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(s,e){return Br(s,"POST","/v1/accounts:delete",e)}async function Hd(s,e){return Br(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LN(s,e=!1){const n=bt(s),i=await n.getIdToken(e),o=rp(i);xe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c==null?void 0:c.sign_in_provider;return{claims:o,token:i,authTime:cc(Cm(o.auth_time)),issuedAtTime:cc(Cm(o.iat)),expirationTime:cc(Cm(o.exp)),signInProvider:h||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Cm(s){return Number(s)*1e3}function rp(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return wd("JWT malformed, contained fewer than 3 sections"),null;try{const o=DE(n);return o?JSON.parse(o):(wd("Failed to decode base64 JWT payload"),null)}catch(o){return wd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Y0(s){const e=rp(s);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ns&&UN(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function UN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fd(s){var b;const e=s.auth,n=await s.getIdToken(),i=await Oo(s,Hd(e,{idToken:n}));xe(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const c=(b=o.providerUserInfo)!=null&&b.length?CT(o.providerUserInfo):[],h=BN(s.providerData,c),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!(h!=null&&h.length),_=m?g:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new ng(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(s,w)}async function qN(s){const e=bt(s);await Fd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BN(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function CT(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(s,e){const n=await IT(s,{},async()=>{const i=Ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,h=await NT(s,o,"/v1/token",`key=${c}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:i};return s.emulatorConfig&&Mo(s.emulatorConfig.host)&&(g.credentials="include"),RT.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function FN(s,e){return Br(s,"POST","/v2/accounts:revokeToken",Ds(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Y0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=Y0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:c}=await HN(e,n);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:c}=n,h=new To;return i&&(xe(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(xe(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(xe(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new To,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(s,e){xe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ur{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new zN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ng(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Oo(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LN(this,e)}reload(){return qN(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ur({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Fd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await Oo(this,jN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,h=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,_=n.createdAt??void 0,w=n.lastLoginAt??void 0,{uid:b,emailVerified:S,isAnonymous:N,providerData:j,stsTokenManager:G}=n;xe(b&&G,e,"internal-error");const B=To.fromJSON(this.name,G);xe(typeof b=="string",e,"internal-error"),ai(i,e.name),ai(o,e.name),xe(typeof S=="boolean",e,"internal-error"),xe(typeof N=="boolean",e,"internal-error"),ai(c,e.name),ai(h,e.name),ai(m,e.name),ai(g,e.name),ai(_,e.name),ai(w,e.name);const ae=new ur({uid:b,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:N,photoURL:h,phoneNumber:c,tenantId:m,stsTokenManager:B,createdAt:_,lastLoginAt:w});return j&&Array.isArray(j)&&(ae.providerData=j.map(re=>({...re}))),g&&(ae._redirectEventId=g),ae}static async _fromIdTokenResponse(e,n,i=!1){const o=new To;o.updateFromServerResponse(n);const c=new ur({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Fd(c),c}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];xe(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?CT(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),m=new To;m.updateFromIdToken(i);const g=new ur({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new ng(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=new Map;function bs(s){Rs(s instanceof Function,"Expected a class definition");let e=X0.get(s);return e?(Rs(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,X0.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}DT.type="NONE";const $0=DT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(s,e,n){return`firebase:${s}:${e}:${n}`}class bo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=Td(this.userKey,o.apiKey,c),this.fullPersistenceKey=Td("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hd(this.auth,{idToken:e}).catch(()=>{});return n?ur._fromGetAccountInfoResponse(this.auth,n,e):null}return ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new bo(bs($0),e,i);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=o[0]||bs($0);const h=Td(i,e.config.apiKey,e.name);let m=null;for(const _ of n)try{const w=await _._get(h);if(w){let b;if(typeof w=="string"){const S=await Hd(e,{idToken:w}).catch(()=>{});if(!S)break;b=await ur._fromGetAccountInfoResponse(e,S,w)}else b=ur._fromJSON(e,w);_!==c&&(m=b),c=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new bo(c,e,i):(c=g[0],m&&await c._set(h,m.toJSON()),await Promise.all(n.map(async _=>{if(_!==c)try{await _._remove(h)}catch{}})),new bo(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jT(e))return"Blackberry";if(LT(e))return"Webos";if(PT(e))return"Safari";if((e.includes("chrome/")||MT(e))&&!e.includes("edge/"))return"Chrome";if(kT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function OT(s=fn()){return/firefox\//i.test(s)}function PT(s=fn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MT(s=fn()){return/crios\//i.test(s)}function VT(s=fn()){return/iemobile/i.test(s)}function kT(s=fn()){return/android/i.test(s)}function jT(s=fn()){return/blackberry/i.test(s)}function LT(s=fn()){return/webos/i.test(s)}function sp(s=fn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function GN(s=fn()){var e;return sp(s)&&!!((e=window.navigator)!=null&&e.standalone)}function QN(){return HS()&&document.documentMode===10}function UT(s=fn()){return sp(s)||kT(s)||LT(s)||jT(s)||/windows phone/i.test(s)||VT(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(s,e=[]){let n;switch(s){case"Browser":n=W0(fn());break;case"Worker":n=`${W0(fn())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((h,m)=>{try{const g=e(c);h(g)}catch(g){m(g)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(s,e={}){return Br(s,"GET","/v2/passwordPolicy",Ds(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=6;class $N{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??XN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Z0(this),this.idTokenSubscription=new Z0(this),this.beforeStateQueue=new KN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=bs(n)),this._initializationPromise=this.queue(async()=>{var i,o,c;if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hd(this,{idToken:e}),i=await ur._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(xn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(c=this.redirectUser)==null?void 0:c._redirectEventId,m=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(Ur(this));const n=e?bt(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YN(this),n=new $N(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await FN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&bs(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[bs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(m,this,"internal-error"),m.then(()=>{h||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&SN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Hr(s){return bt(s)}class Z0{constructor(e){this.auth=e,this.observer=null,this.addObserver=WS(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZN(s){fh=s}function qT(s){return fh.loadJS(s)}function JN(){return fh.recaptchaEnterpriseScript}function eC(){return fh.gapiScript}function tC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class nC{constructor(){this.enterprise=new rC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class rC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const sC="recaptcha-enterprise",BT="NO_RECAPTCHA";class iC{constructor(e){this.type=sC,this.auth=Hr(e)}async verify(e="verify",n=!1){async function i(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,m)=>{kN(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new VN(g);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,h(_.siteKey)}}).catch(g=>{m(g)})})}function o(c,h,m){const g=window.grecaptcha;K0(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(_=>{h(_)}).catch(()=>{h(BT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new nC().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{i(this.auth).then(m=>{if(!n&&K0(window.grecaptcha))o(m,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=JN();g.length!==0&&(g+=m),qT(g).then(()=>{o(m,c,h)}).catch(_=>{h(_)})}}).catch(m=>{h(m)})})}}async function J0(s,e,n,i=!1,o=!1){const c=new iC(s);let h;if(o)h=BT;else try{h=await c.verify(n)}catch{h=await c.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Gd(s,e,n,i,o){var c;if((c=s._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await J0(s,e,n,n==="getOobCode");return i(s,h)}else return i(s,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await J0(s,e,n,n==="getOobCode");return i(s,m)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(s,e){const n=dg(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(ha(c,e??{}))return o;tr(o,"already-initialized")}return n.initialize({options:e})}function oC(s,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(bs);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function lC(s,e,n){const i=Hr(s);xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=HT(e),{host:h,port:m}=cC(e),g=m===null?"":`:${m}`,_={url:`${c}//${h}${g}/`},w=Object.freeze({host:h,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){xe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xe(ha(_,i.config.emulator)&&ha(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=_,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,Mo(h)?(VE(`${c}//${h}${g}`),kE("Auth",!0)):uC()}function HT(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function cC(s){const e=HT(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:eE(i.substr(c.length+1))}}else{const[c,h]=i.split(":");return{host:c,port:eE(h)}}}function eE(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function uC(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,n){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}async function dC(s,e){return Br(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(s,e){return kc(s,"POST","/v1/accounts:signInWithPassword",Ds(s,e))}async function FT(s,e){return Br(s,"POST","/v1/accounts:sendOobCode",Ds(s,e))}async function fC(s,e){return FT(s,e)}async function mC(s,e){return FT(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(s,e){return kc(s,"POST","/v1/accounts:signInWithEmailLink",Ds(s,e))}async function pC(s,e){return kc(s,"POST","/v1/accounts:signInWithEmailLink",Ds(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends ip{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Ec(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Ec(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gd(e,n,"signInWithPassword",hC);case"emailLink":return gC(e,{email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gd(e,i,"signUpPassword",dC);case"emailLink":return pC(e,{idToken:n,email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(s,e){return kc(s,"POST","/v1/accounts:signInWithIdp",Ds(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="http://localhost";class pa extends ip{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):tr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=n;if(!i||!o)return null;const h=new pa(i,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Ao(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ao(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ao(e,n)}buildRequest(){const e={requestUri:yC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ac(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vC(s){const e=$l(Wl(s)).link,n=e?$l(Wl(e)).deep_link_id:null,i=$l(Wl(s)).deep_link_id;return(i?$l(Wl(i)).link:null)||i||n||e||s}class ap{constructor(e){const n=$l(Wl(e)),i=n.apiKey??null,o=n.oobCode??null,c=_C(n.mode??null);xe(i&&o&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=vC(e);try{return new ap(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.providerId=qo.PROVIDER_ID}static credential(e,n){return Ec._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=ap.parseLink(n);return xe(i,"argument-error"),Ec._fromEmailAndCode(e,i.code,i.tenantId)}}qo.PROVIDER_ID="password";qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends op{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends jc{constructor(){super("facebook.com")}static credential(e){return pa._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pa._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ws.credential(n,i)}catch{return null}}}ws.GOOGLE_SIGN_IN_METHOD="google.com";ws.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends jc{constructor(){super("github.com")}static credential(e){return pa._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return li.credential(e.oauthAccessToken)}catch{return null}}}li.GITHUB_SIGN_IN_METHOD="github.com";li.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends jc{constructor(){super("twitter.com")}static credential(e,n){return pa._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ci.credential(n,i)}catch{return null}}}ci.TWITTER_SIGN_IN_METHOD="twitter.com";ci.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GT(s,e){return kc(s,"POST","/v1/accounts:signUp",Ds(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const c=await ur._fromIdTokenResponse(e,i,o),h=tE(i);return new Is({user:c,providerId:h,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=tE(i);return new Is({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function tE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC(s){var o;if(xn(s.app))return Promise.reject(Ur(s));const e=Hr(s);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new Is({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await GT(e,{returnSecureToken:!0}),i=await Is._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd extends Ns{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Qd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new Qd(e,n,i,o)}}function QT(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Qd._fromErrorAndOperation(s,c,e,i):c})}async function wC(s,e,n=!1){const i=await Oo(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Is._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(s,e,n=!1){const{auth:i}=s;if(xn(i.app))return Promise.reject(Ur(i));const o="reauthenticate";try{const c=await Oo(s,QT(i,o,e,s),n);xe(c.idToken,i,"internal-error");const h=rp(c.idToken);xe(h,i,"internal-error");const{sub:m}=h;return xe(s.uid===m,i,"user-mismatch"),Is._forOperation(s,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&tr(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KT(s,e,n=!1){if(xn(s.app))return Promise.reject(Ur(s));const i="signIn",o=await QT(s,i,e),c=await Is._fromIdTokenResponse(s,i,o);return n||await s._updateCurrentUser(c.user),c}async function bC(s,e){return KT(Hr(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YT(s){const e=Hr(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function AC(s,e,n){const i=Hr(s);await Gd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",mC)}async function SC(s,e,n){if(xn(s.app))return Promise.reject(Ur(s));const i=Hr(s),h=await Gd(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GT).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&YT(s),g}),m=await Is._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(m.user),m}function xC(s,e,n){return xn(s.app)?Promise.reject(Ur(s)):bC(bt(s),qo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&YT(s),i})}async function XT(s,e){const n=bt(s),o={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:c}=await fC(n.auth,o);c!==s.email&&await s.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(s,e){return Br(s,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(s,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=bt(s),c={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},h=await Oo(i,RC(i.auth,c));i.displayName=h.displayName||null,i.photoURL=h.photoUrl||null;const m=i.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=i.displayName,m.photoURL=i.photoURL),await i._updateTokensIfNecessary(h)}function NC(s,e,n,i){return bt(s).onIdTokenChanged(e,n,i)}function CC(s,e,n){return bt(s).beforeAuthStateChanged(e,n)}function DC(s,e,n,i){return bt(s).onAuthStateChanged(e,n,i)}function OC(s){return bt(s).signOut()}const Kd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kd,"1"),this.storage.removeItem(Kd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=1e3,MC=10;class WT extends $T{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!n&&this.localCache[i]===h||this.notifyListeners(i,h)},c=this.storage.getItem(i);QN()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,MC):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},PC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}WT.type="LOCAL";const VC=WT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT extends $T{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ZT.type="SESSION";const JT=ZT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new mh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:c}=n.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(h).map(async _=>_(n.origin,c)),g=await kC(m);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((m,g)=>{const _=lp("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(b){const S=b;if(S.data.eventId===_)switch(S.data.status){case"ack":clearTimeout(w),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(S.data.response);break;default:clearTimeout(w),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(){return window}function LC(s){zr().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(){return typeof zr().WorkerGlobalScope<"u"&&typeof zr().importScripts=="function"}async function UC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zC(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function qC(){return eb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="firebaseLocalStorageDb",BC=1,Yd="firebaseLocalStorage",nb="fbase_key";class Lc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gh(s,e){return s.transaction([Yd],e?"readwrite":"readonly").objectStore(Yd)}function HC(){const s=indexedDB.deleteDatabase(tb);return new Lc(s).toPromise()}function rg(){const s=indexedDB.open(tb,BC);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Yd,{keyPath:nb})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Yd)?e(i):(i.close(),await HC(),e(await rg()))})})}async function nE(s,e,n){const i=gh(s,!0).put({[nb]:e,value:n});return new Lc(i).toPromise()}async function FC(s,e){const n=gh(s,!1).get(e),i=await new Lc(n).toPromise();return i===void 0?null:i.value}function rE(s,e){const n=gh(s,!0).delete(e);return new Lc(n).toPromise()}const GC=800,QC=3;class rb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>QC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mh._getInstance(qC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await UC(),!this.activeServiceWorker)return;this.sender=new jC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rg();return await nE(e,Kd,"1"),await rE(e,Kd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>nE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>FC(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=gh(o,!1).getAll();return new Lc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rb.type="LOCAL";const KC=rb;new Vc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(s,e){return e?bs(e):(xe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp extends ip{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ao(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ao(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function YC(s){return KT(s.auth,new cp(s),s.bypassAuthState)}function XC(s){const{auth:e,user:n}=s;return xe(n,e,"internal-error"),TC(n,new cp(s),s.bypassAuthState)}async function $C(s){const{auth:e,user:n}=s;return xe(n,e,"internal-error"),wC(n,new cp(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,n,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:c,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YC;case"linkViaPopup":case"linkViaRedirect":return $C;case"reauthViaPopup":case"reauthViaRedirect":return XC;default:tr(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=new Vc(2e3,1e4);async function ZC(s,e,n){if(xn(s.app))return Promise.reject(dr(s,"operation-not-supported-in-this-environment"));const i=Hr(s);xN(s,e,op);const o=sb(i,n);return new da(i,"signInViaPopup",e,o).executeNotNull()}class da extends ib{constructor(e,n,i,o,c){super(e,n,o,c),this.provider=i,this.authWindow=null,this.pollId=null,da.currentPopupAction&&da.currentPopupAction.cancel(),da.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const e=lp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,da.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WC.get())};e()}}da.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="pendingRedirect",bd=new Map;class e2 extends ib{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=bd.get(this.auth._key());if(!e){try{const i=await t2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}bd.set(this.auth._key(),e)}return this.bypassAuthState||bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function t2(s,e){const n=s2(e),i=r2(s);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function n2(s,e){bd.set(s._key(),e)}function r2(s){return bs(s._redirectPersistence)}function s2(s){return Td(JC,s.config.apiKey,s.name)}async function i2(s,e,n=!1){if(xn(s.app))return Promise.reject(Ur(s));const i=Hr(s),o=sb(i,e),h=await new e2(i,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=600*1e3;class o2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!l2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!ab(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(dr(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=a2&&this.cachedEventUids.clear(),this.cachedEventUids.has(sE(e))}saveEventToCache(e){this.cachedEventUids.add(sE(e)),this.lastProcessedEventTime=Date.now()}}function sE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function ab({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function l2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ab(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c2(s,e={}){return Br(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d2=/^https?/;async function h2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await c2(s);for(const n of e)try{if(f2(n))return}catch{}tr(s,"unauthorized-domain")}function f2(s){const e=tg(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===i}if(!d2.test(n))return!1;if(u2.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=new Vc(3e4,6e4);function iE(){const s=zr().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function g2(s){return new Promise((e,n)=>{var o,c,h;function i(){iE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iE(),n(dr(s,"network-request-failed"))},timeout:m2.get()})}if((c=(o=zr().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((h=zr().gapi)!=null&&h.load)i();else{const m=tC("iframefcb");return zr()[m]=()=>{gapi.load?i():n(dr(s,"network-request-failed"))},qT(`${eC()}?onload=${m}`).catch(g=>n(g))}}).catch(e=>{throw Ad=null,e})}let Ad=null;function p2(s){return Ad=Ad||g2(s),Ad}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=new Vc(5e3,15e3),_2="__/auth/iframe",v2="emulator/auth/iframe",E2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function T2(s){const e=s.config;xe(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?np(e,v2):`https://${s.config.authDomain}/${_2}`,i={apiKey:e.apiKey,appName:s.name,v:Vo},o=w2.get(s.config.apiHost);o&&(i.eid=o);const c=s._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${Ac(i).slice(1)}`}async function b2(s){const e=await p2(s),n=zr().gapi;return xe(n,s,"internal-error"),e.open({where:document.body,url:T2(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:E2,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const h=dr(s,"network-request-failed"),m=zr().setTimeout(()=>{c(h)},y2.get());function g(){zr().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},S2=500,x2=600,R2="_blank",I2="http://localhost";class aE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function N2(s,e,n,i=S2,o=x2){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g={...A2,width:i.toString(),height:o.toString(),top:c,left:h},_=fn().toLowerCase();n&&(m=MT(_)?R2:n),OT(_)&&(e=e||I2,g.scrollbars="yes");const w=Object.entries(g).reduce((S,[N,j])=>`${S}${N}=${j},`,"");if(GN(_)&&m!=="_self")return C2(e||"",m),new aE(null);const b=window.open(e||"",m,w);xe(b,s,"popup-blocked");try{b.focus()}catch{}return new aE(b)}function C2(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="__/auth/handler",O2="emulator/auth/handler",P2=encodeURIComponent("fac");async function oE(s,e,n,i,o,c){xe(s.config.authDomain,s,"auth-domain-config-required"),xe(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:Vo,eventId:o};if(e instanceof op){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",$S(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,b]of Object.entries({}))h[w]=b}if(e instanceof jc){const w=e.getScopes().filter(b=>b!=="");w.length>0&&(h.scopes=w.join(","))}s.tenantId&&(h.tid=s.tenantId);const m=h;for(const w of Object.keys(m))m[w]===void 0&&delete m[w];const g=await s._getAppCheckToken(),_=g?`#${P2}=${encodeURIComponent(g)}`:"";return`${M2(s)}?${Ac(m).slice(1)}${_}`}function M2({config:s}){return s.emulator?np(s,O2):`https://${s.authDomain}/${D2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="webStorageSupport";class V2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JT,this._completeRedirectFn=i2,this._overrideRedirectResult=n2}async _openPopup(e,n,i,o){var h;Rs((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const c=await oE(e,n,i,tg(),o);return N2(e,c,lp())}async _openRedirect(e,n,i,o){await this._originValidation(e);const c=await oE(e,n,i,tg(),o);return LC(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Rs(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await b2(e),i=new o2(e);return n.register("authEvent",o=>(xe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dm,{type:Dm},o=>{var h;const c=(h=o==null?void 0:o[0])==null?void 0:h[Dm];c!==void 0&&n(!!c),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=h2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return UT()||PT()||sp()}}const k2=V2;var lE="@firebase/auth",cE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function U2(s){So(new fa("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;xe(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zT(s)},_=new WN(i,o,c,g);return oC(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),So(new fa("auth-internal",e=>{const n=Hr(e.getProvider("auth").getImmediate());return(i=>new j2(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mi(lE,cE,L2(s)),mi(lE,cE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=300,q2=ME("authIdTokenMaxAge")||z2;let uE=null;const B2=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>q2)return;const o=n==null?void 0:n.token;uE!==o&&(uE=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function H2(s=zE()){const e=dg(s,"auth");if(e.isInitialized())return e.getImmediate();const n=aC(s,{popupRedirectResolver:k2,persistence:[KC,VC,JT]}),i=ME("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const h=B2(c.toString());CC(n,h,()=>h(n.currentUser)),NC(n,m=>h(m))}}const o=OE("auth");return o&&lC(n,`http://${o}`),n}function F2(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}ZN({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const c=dr("internal-error");c.customData=o,n(c)},i.type="text/javascript",i.charset="UTF-8",F2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});U2("Browser");const G2={apiKey:"AIzaSyCDZJqOx5eXpu3cD_FBJ8oi-hYvLCpbDXE",authDomain:"verdadreto-bec6a.firebaseapp.com",projectId:"verdadreto-bec6a",storageBucket:"verdadreto-bec6a.firebasestorage.app",messagingSenderId:"938969209658",appId:"1:938969209658:web:534282f57a8ff381c00e03"},ob=UE(G2),Pe=lN(ob),mr=H2(ob),lb=new ws;lb.setCustomParameters({prompt:"select_account"});class Q2{constructor(){this.currentUser=null,this.sessionId=this.generateSessionId()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setCurrentUser(e){this.currentUser=e}async trackEvent(e,n){var i,o,c;try{const h={eventType:e,userId:(i=this.currentUser)==null?void 0:i.uid,userEmail:((o=this.currentUser)==null?void 0:o.email)||void 0,isAnonymous:((c=this.currentUser)==null?void 0:c.isAnonymous)??!0,timestamp:Ke.now(),sessionId:this.sessionId,...n};await Mc(et(Pe,"analytics"),h),console.log("Analytics event tracked:",e)}catch(h){console.error("Error tracking analytics event:",h)}}async trackGameStart(e,n,i){await this.trackEvent("game_start",{packId:e,packName:n,gameData:{playersCount:i}})}async trackGameEnd(e,n,i,o){await this.trackEvent("game_end",{packId:e,packName:n,gameData:{roundsPlayed:i,duration:o}})}async trackPackSelected(e,n){await this.trackEvent("pack_selected",{packId:e,packName:n})}async trackDemoUsed(e,n){await this.trackEvent("demo_used",{packId:e,packName:n})}async trackUserLogin(){await this.trackEvent("user_login")}async trackUserRegister(){await this.trackEvent("user_register")}async trackSessionStart(){await this.trackEvent("session_start")}async trackSessionEnd(){await this.trackEvent("session_end")}async getStatsForPeriod(e,n){const i=new Date;let o,c=i;switch(e){case"realtime":o=new Date(i.getTime()-300*1e3);break;case"day":o=n?new Date(n):new Date(i.getFullYear(),i.getMonth(),i.getDate()),c=new Date(o.getTime()+1440*60*1e3);break;case"month":o=n?new Date(n):new Date(i.getFullYear(),i.getMonth(),1),c=new Date(o.getFullYear(),o.getMonth()+1,0);break;case"year":o=n?new Date(n):new Date(i.getFullYear(),0,1),c=new Date(o.getFullYear()+1,0,0);break}const h=Ke.fromDate(o),m=Ke.fromDate(c),g=Tt(et(Pe,"analytics"),Xe("timestamp",">=",h),Xe("timestamp","<=",m),zd("timestamp","desc")),w=(await pt(g)).docs.map(b=>b.data());return this.calculateStats(w,e)}calculateStats(e,n){const i=new Set,o=new Set,c=new Set,h=new Map;let m=0,g=0,_=0;const w=Date.now()-300*1e3,b=new Set;e.forEach(N=>{switch(N.userId&&(i.add(N.userId),N.isAnonymous?c.add(N.userId):o.add(N.userId)),N.timestamp.toMillis()>w&&b.add(N.sessionId),N.eventType){case"game_start":if(m++,N.packId&&N.packName){const j=h.get(N.packId)||{name:N.packName,count:0};h.set(N.packId,{...j,count:j.count+1})}break;case"demo_used":g++;break}}),_=b.size;const S=Array.from(h.entries()).map(([N,j])=>({packId:N,packName:j.name,count:j.count})).sort((N,j)=>j.count-N.count).slice(0,10);return{totalUsers:i.size,registeredUsers:o.size,anonymousUsers:c.size,totalGames:m,totalDemos:g,activeUsers:_,mostPlayedPacks:S,gamesPerDay:n==="day"?m:Math.round(m/this.getDaysInPeriod(n)),demosPerDay:n==="day"?g:Math.round(g/this.getDaysInPeriod(n))}}getDaysInPeriod(e){switch(e){case"realtime":return 1;case"day":return 1;case"month":return 30;case"year":return 365;default:return 1}}async getRecentEvents(e=50){const n=Tt(et(Pe,"analytics"),zd("timestamp","desc"),wT(e));return(await pt(n)).docs.map(o=>({id:o.id,...o.data()}))}}const di=new Q2,K2=({availablePacks:s,purchasedPacks:e,adWatchedPacks:n,referralUnlockedPacks:i,suggestionUnlockedPacks:o,onContinue:c,onBack:h,onGoToShop:m,onPlayDemo:g})=>{const _=s.some(N=>N.id==="base"),w={id:"base",name:"Pack Base",description:"Preguntas y retos bsicos incluidos",price:"INCLUIDO",icon:"",questionsUrl:"",daresUrl:"",allowDemo:!1,demoPlaysCount:0},b=s.filter(N=>N.id!=="no-ads"),S=_?b:[w,...b];return e.length>0,p.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:p.jsxs(Rn,{className:"w-full max-w-2xl text-center",children:[p.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Packs Disponibles"}),p.jsx("p",{className:"text-gray-400 mb-8",children:"Estos son los packs que tienes disponibles para jugar"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:S.map(N=>{const j=N.id==="base"||e.includes(N.id),G=N.id==="base",B=n.includes(N.id),ae=i.includes(N.id),re=o.includes(N.id),se=j||ae||re;return p.jsxs("div",{className:`relative p-4 rounded-lg border transition-all duration-200 ${j?"border-green-500 bg-green-500/10":ae?"border-blue-500 bg-blue-500/10":re?"border-purple-500 bg-purple-500/10":B?"border-yellow-500 bg-yellow-500/10":"border-gray-600 bg-gray-800/50 opacity-60"}`,children:[p.jsx("div",{className:"absolute top-2 right-2",children:j?p.jsx(Em,{className:"w-6 h-6 text-green-500"}):ae?p.jsx(Em,{className:"w-6 h-6 text-blue-500"}):re?p.jsx(Em,{className:"w-6 h-6 text-purple-500"}):p.jsx(vo,{className:"w-6 h-6 text-yellow-500"})}),p.jsx("div",{className:"text-4xl mb-2",children:N.icon}),p.jsx("h3",{className:`text-xl font-bold mb-2 ${se||B?"text-white":"text-gray-400"}`,children:N.name}),p.jsx("p",{className:`text-sm mb-3 ${se||B?"text-gray-300":"text-gray-500"}`,children:N.description}),N.isReferralUnlockable&&!se&&p.jsxs("p",{className:"text-xs text-blue-400 mb-2",children:[" Requiere ",N.requiredReferrals," referidos"]}),N.isSuggestionUnlockable&&!se&&p.jsxs("p",{className:"text-xs text-purple-400 mb-2",children:[" Requiere ",N.requiredApprovedSuggestions," sugerencias aprobadas"]}),p.jsx("div",{className:`text-lg font-semibold ${j?"text-green-400":ae?"text-blue-400":re?"text-purple-400":"text-yellow-400"}`,children:G?"INCLUIDO":j?"COMPRADO":ae?"POR REFERIDOS":re?"POR SUGERENCIAS":B?"DEMO VISTO":"PREMIUM"}),!se&&!B&&p.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx(vo,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),p.jsx("p",{className:"text-yellow-400 font-semibold text-sm mb-3",children:N.isReferralUnlockable?`${N.requiredReferrals} REFERIDOS`:N.isSuggestionUnlockable?`${N.requiredApprovedSuggestions} SUGERENCIAS`:"PREMIUM"}),N.allowDemo&&p.jsx(De,{onClick:ge=>{ge.stopPropagation(),di.trackDemoUsed(N.id,N.name),g(N.id)},variant:"secondary",className:"px-3 py-1 text-xs bg-yellow-500 hover:bg-yellow-600 text-white border border-yellow-400 shadow-md",children:" Jugar Demo"})]})})]},N.id)})}),s.some(N=>!e.includes(N.id))&&p.jsx("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:p.jsxs("p",{className:"text-yellow-400 text-sm",children:[p.jsx(vo,{className:"w-4 h-4 inline mr-2"}),"Los packs premium estn bloqueados. Visita la tienda para desbloquearlos."]})}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(De,{onClick:h,variant:"secondary",className:"px-6",children:"Volver"}),p.jsx(De,{onClick:m,variant:"secondary",className:"px-6 bg-yellow-600 hover:bg-yellow-700 text-white",children:"Ir a la Tienda"}),p.jsx(De,{onClick:()=>{S.forEach(N=>{const j=N.id==="base"||e.includes(N.id),G=i.includes(N.id),B=o.includes(N.id);(j||G||B)&&di.trackPackSelected(N.id,N.name)}),c()},className:"px-6",disabled:!1,children:"Continuar al Juego"})]})]})})},Y2="modulepreload",X2=function(s,e){return new URL(s,e).href},dE={},cb=function(e,n,i){let o=Promise.resolve();if(n&&n.length>0){let h=function(w){return Promise.all(w.map(b=>Promise.resolve(b).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};const m=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),_=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=h(n.map(w=>{if(w=X2(w,i),w in dE)return;dE[w]=!0;const b=w.endsWith(".css"),S=b?'[rel="stylesheet"]':"";if(!!i)for(let G=m.length-1;G>=0;G--){const B=m[G];if(B.href===w&&(!b||B.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${S}`))return;const j=document.createElement("link");if(j.rel=b?"stylesheet":Y2,b||(j.as="script"),j.crossOrigin="",j.href=w,_&&j.setAttribute("nonce",_),document.head.appendChild(j),b)return new Promise((G,B)=>{j.addEventListener("load",G),j.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${w}`)))})}))}function c(h){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=h,window.dispatchEvent(m),!m.defaultPrevented)throw h}return o.then(h=>{for(const m of h||[])m.status==="rejected"&&c(m.reason);return e().catch(c)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Po;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(Po||(Po={}));class Om extends Error{constructor(e,n,i){super(e),this.message=e,this.code=n,this.data=i}}const $2=s=>{var e,n;return s!=null&&s.androidBridge?"android":!((n=(e=s==null?void 0:s.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},W2=s=>{const e=s.CapacitorCustomPlatform||null,n=s.Capacitor||{},i=n.Plugins=n.Plugins||{},o=()=>e!==null?e.name:$2(s),c=()=>o()!=="web",h=b=>{const S=_.get(b);return!!(S!=null&&S.platforms.has(o())||m(b))},m=b=>{var S;return(S=n.PluginHeaders)===null||S===void 0?void 0:S.find(N=>N.name===b)},g=b=>s.console.error(b),_=new Map,w=(b,S={})=>{const N=_.get(b);if(N)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),N.proxy;const j=o(),G=m(b);let B;const ae=async()=>(!B&&j in S?B=typeof S[j]=="function"?B=await S[j]():B=S[j]:e!==null&&!B&&"web"in S&&(B=typeof S.web=="function"?B=await S.web():B=S.web),B),re=(x,I)=>{var P,M;if(G){const k=G==null?void 0:G.methods.find(R=>I===R.name);if(k)return k.rtype==="promise"?R=>n.nativePromise(b,I.toString(),R):(R,Ie)=>n.nativeCallback(b,I.toString(),R,Ie);if(x)return(P=x[I])===null||P===void 0?void 0:P.bind(x)}else{if(x)return(M=x[I])===null||M===void 0?void 0:M.bind(x);throw new Om(`"${b}" plugin is not implemented on ${j}`,Po.Unimplemented)}},se=x=>{let I;const P=(...M)=>{const k=ae().then(R=>{const Ie=re(R,x);if(Ie){const Oe=Ie(...M);return I=Oe==null?void 0:Oe.remove,Oe}else throw new Om(`"${b}.${x}()" is not implemented on ${j}`,Po.Unimplemented)});return x==="addListener"&&(k.remove=async()=>I()),k};return P.toString=()=>`${x.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:x,writable:!1,configurable:!1}),P},ge=se("addListener"),ue=se("removeListener"),W=(x,I)=>{const P=ge({eventName:x},I),M=async()=>{const R=await P;ue({eventName:x,callbackId:R},I)},k=new Promise(R=>P.then(()=>R({remove:M})));return k.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await M()},k},C=new Proxy({},{get(x,I){switch(I){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return G?W:ge;case"removeListener":return ue;default:return se(I)}}});return i[b]=C,_.set(b,{name:b,proxy:C,platforms:new Set([...Object.keys(S),...G?[j]:[]])}),C};return n.convertFileSrc||(n.convertFileSrc=b=>b),n.getPlatform=o,n.handleError=g,n.isNativePlatform=c,n.isPluginAvailable=h,n.registerPlugin=w,n.Exception=Om,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Z2=s=>s.Capacitor=W2(s),un=Z2(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),up=un.registerPlugin;class ub{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(n);const c=this.windowListeners[e];c&&!c.registered&&this.addWindowListener(c),i&&this.sendRetainedArgumentsForEvent(e);const h=async()=>this.removeListener(e,n);return Promise.resolve({remove:h})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,i){const o=this.listeners[e];if(!o){if(i){let c=this.retainedEventArguments[e];c||(c=[]),c.push(n),this.retainedEventArguments[e]=c}return}o.forEach(c=>c(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:i=>{this.notifyListeners(n,i)}}}unimplemented(e="not implemented"){return new un.Exception(e,Po.Unimplemented)}unavailable(e="not available"){return new un.Exception(e,Po.Unavailable)}async removeListener(e,n){const i=this.listeners[e];if(!i)return;const o=i.indexOf(n);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(i=>{this.notifyListeners(e,i)}))}}const hE=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),fE=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class J2 extends ub{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[o,c]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=fE(o).trim(),c=fE(c).trim(),n[o]=c}),n}async setCookie(e){try{const n=hE(e.key),i=hE(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,c=(e.path||"/").replace("path=",""),h=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${i||""}${o}; path=${c}; ${h};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}up("CapacitorCookies",{web:()=>new J2});const eD=async s=>new Promise((e,n)=>{const i=new FileReader;i.onload=()=>{const o=i.result;e(o.indexOf(",")>=0?o.split(",")[1]:o)},i.onerror=o=>n(o),i.readAsDataURL(s)}),tD=(s={})=>{const e=Object.keys(s);return Object.keys(s).map(o=>o.toLocaleLowerCase()).reduce((o,c,h)=>(o[c]=s[e[h]],o),{})},nD=(s,e=!0)=>s?Object.entries(s).reduce((i,o)=>{const[c,h]=o;let m,g;return Array.isArray(h)?(g="",h.forEach(_=>{m=e?encodeURIComponent(_):_,g+=`${c}=${m}&`}),g.slice(0,-1)):(m=e?encodeURIComponent(h):h,g=`${c}=${m}`),`${i}&${g}`},"").substr(1):null,rD=(s,e={})=>{const n=Object.assign({method:s.method||"GET",headers:s.headers},e),o=tD(s.headers)["content-type"]||"";if(typeof s.data=="string")n.body=s.data;else if(o.includes("application/x-www-form-urlencoded")){const c=new URLSearchParams;for(const[h,m]of Object.entries(s.data||{}))c.set(h,m);n.body=c.toString()}else if(o.includes("multipart/form-data")||s.data instanceof FormData){const c=new FormData;if(s.data instanceof FormData)s.data.forEach((m,g)=>{c.append(g,m)});else for(const m of Object.keys(s.data))c.append(m,s.data[m]);n.body=c;const h=new Headers(n.headers);h.delete("content-type"),n.headers=h}else(o.includes("application/json")||typeof s.data=="object")&&(n.body=JSON.stringify(s.data));return n};class sD extends ub{async request(e){const n=rD(e,e.webFetchExtra),i=nD(e.params,e.shouldEncodeUrlParams),o=i?`${e.url}?${i}`:e.url,c=await fetch(o,n),h=c.headers.get("content-type")||"";let{responseType:m="text"}=c.ok?e:{};h.includes("application/json")&&(m="json");let g,_;switch(m){case"arraybuffer":case"blob":_=await c.blob(),g=await eD(_);break;case"json":g=await c.json();break;case"document":case"text":default:g=await c.text()}const w={};return c.headers.forEach((b,S)=>{w[S]=b}),{data:g,headers:w,status:c.status,url:c.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}up("CapacitorHttp",{web:()=>new sD});var mE;(function(s){s.General="General",s.ParentalGuidance="ParentalGuidance",s.Teen="Teen",s.MatureAudience="MatureAudience"})(mE||(mE={}));var gE;(function(s){s.SizeChanged="bannerAdSizeChanged",s.Loaded="bannerAdLoaded",s.FailedToLoad="bannerAdFailedToLoad",s.Opened="bannerAdOpened",s.Closed="bannerAdClosed",s.AdImpression="bannerAdImpression"})(gE||(gE={}));var sg;(function(s){s.TOP_CENTER="TOP_CENTER",s.CENTER="CENTER",s.BOTTOM_CENTER="BOTTOM_CENTER"})(sg||(sg={}));var ig;(function(s){s.BANNER="BANNER",s.FULL_BANNER="FULL_BANNER",s.LARGE_BANNER="LARGE_BANNER",s.MEDIUM_RECTANGLE="MEDIUM_RECTANGLE",s.LEADERBOARD="LEADERBOARD",s.ADAPTIVE_BANNER="ADAPTIVE_BANNER",s.SMART_BANNER="SMART_BANNER"})(ig||(ig={}));var uc;(function(s){s.Loaded="interstitialAdLoaded",s.FailedToLoad="interstitialAdFailedToLoad",s.Showed="interstitialAdShowed",s.FailedToShow="interstitialAdFailedToShow",s.Dismissed="interstitialAdDismissed"})(uc||(uc={}));var pE;(function(s){s.Loaded="onRewardedInterstitialAdLoaded",s.FailedToLoad="onRewardedInterstitialAdFailedToLoad",s.Showed="onRewardedInterstitialAdShowed",s.FailedToShow="onRewardedInterstitialAdFailedToShow",s.Dismissed="onRewardedInterstitialAdDismissed",s.Rewarded="onRewardedInterstitialAdReward"})(pE||(pE={}));var _o;(function(s){s.Loaded="onRewardedVideoAdLoaded",s.FailedToLoad="onRewardedVideoAdFailedToLoad",s.Showed="onRewardedVideoAdShowed",s.FailedToShow="onRewardedVideoAdFailedToShow",s.Dismissed="onRewardedVideoAdDismissed",s.Rewarded="onRewardedVideoAdReward"})(_o||(_o={}));var yE;(function(s){s.NOT_REQUIRED="NOT_REQUIRED",s.OBTAINED="OBTAINED",s.REQUIRED="REQUIRED",s.UNKNOWN="UNKNOWN"})(yE||(yE={}));var _E;(function(s){s[s.DISABLED=0]="DISABLED",s[s.EEA=1]="EEA",s[s.NOT_EEA=2]="NOT_EEA"})(_E||(_E={}));const cn=up("AdMob",{web:()=>cb(()=>import("./web-B86gqcCH.js"),[],import.meta.url).then(s=>new s.AdMobWeb)});class iD{constructor(){this.isInitialized=!1,this.config=null}async initialize(e){if(this.isInitialized){this.config={...this.config,...e};return}try{this.config=e,un.isNativePlatform()?(await cn.initialize({requestTrackingAuthorization:!0,testingDevices:e.testMode?["YOUR_DEVICE_ID"]:[],initializeForTesting:e.testMode||!1}),this.isInitialized=!0,console.log("AdMob initialized successfully")):console.log("AdMob not available on web platform")}catch(n){throw console.error("Failed to initialize AdMob:",n),n}}async showBannerAd(e){if(!this.isInitialized||!this.config)throw new Error("AdMob not initialized");if(!un.isNativePlatform())throw new Error("AdMob banners only available on native platforms");if(!this.config.bannerAdUnitId)throw new Error("bannerAdUnitId not configured");try{const n={adId:this.config.bannerAdUnitId,adSize:ig.ADAPTIVE_BANNER,position:sg.BOTTOM_CENTER,margin:0,isTesting:this.config.testMode||!1,...e};await cn.showBanner(n),console.log("Banner ad shown successfully")}catch(n){throw console.error("Failed to show banner ad:",n),n}}async hideBannerAd(){if(this.isInitialized&&un.isNativePlatform())try{await cn.hideBanner(),console.log("Banner ad hidden successfully")}catch(e){console.error("Failed to hide banner ad:",e)}}async resumeBannerAd(){if(this.isInitialized&&un.isNativePlatform())try{await cn.resumeBanner(),console.log("Banner ad resumed successfully")}catch(e){console.error("Failed to resume banner ad:",e)}}async removeBannerAd(){if(this.isInitialized&&un.isNativePlatform())try{await cn.removeBanner(),console.log("Banner ad removed successfully")}catch(e){console.error("Failed to remove banner ad:",e)}}async showInterstitial(){if(!this.isInitialized||!this.config)return console.warn("AdMob not initialized"),!1;if(!un.isNativePlatform())return console.warn("Interstitials are only available on native platforms"),!1;if(!this.config.interstitialAdUnitId)return console.warn("No interstitialAdUnitId configured"),!1;let e=null,n=null,i=null;try{const o=new Promise((m,g)=>{setTimeout(()=>g(new Error("Interstitial ad timeout")),3e4)}),c=new Promise(async(m,g)=>{try{e=await cn.addListener(uc.Loaded,S=>{console.log("Interstitial loaded")}),i=await cn.addListener(uc.FailedToLoad,S=>{console.error("Interstitial failed to load:",S),g(new Error("Failed to load interstitial"))});let _=null;const w=new Promise(S=>{_=S});n=await cn.addListener(uc.Dismissed,()=>{console.log("Interstitial dismissed"),_&&_()});const b={adId:this.config.interstitialAdUnitId,isTesting:this.config.testMode||!1};await cn.prepareInterstitial(b),await cn.showInterstitial(),await w,m(!0)}catch(_){g(_)}});return await Promise.race([c,o])}catch(o){return console.error("Failed to show interstitial ad:",o),!1}finally{try{e&&await e.remove(),n&&await n.remove(),i&&await i.remove()}catch(o){console.warn("Error cleaning up interstitial listeners:",o)}}}async showRewarded(){if(!this.isInitialized||!this.config)return console.warn("AdMob not initialized"),!1;if(!un.isNativePlatform())return console.warn("Rewarded ads are only available on native platforms"),!1;if(!this.config.rewardedAdUnitId)return console.warn("No rewardedAdUnitId configured"),!1;let e=null,n=null,i=null,o=null;try{const c=new Promise((g,_)=>{setTimeout(()=>_(new Error("Rewarded ad timeout")),3e4)}),h=new Promise(async(g,_)=>{try{let w=!1;e=await cn.addListener(_o.Loaded,j=>{console.log("Rewarded loaded")}),o=await cn.addListener(_o.FailedToLoad,j=>{console.error("Rewarded failed to load:",j),_(new Error("Failed to load rewarded ad"))}),n=await cn.addListener(_o.Rewarded,j=>{w=!0,console.log("User rewarded",j)});let b=null;const S=new Promise(j=>{b=j});i=await cn.addListener(_o.Dismissed,()=>{console.log("Rewarded dismissed"),b&&b()});const N={adId:this.config.rewardedAdUnitId,isTesting:this.config.testMode||!1};await cn.prepareRewardVideoAd(N),await cn.showRewardVideoAd(),await S,g(w)}catch(w){_(w)}});return await Promise.race([h,c])}catch(c){return console.error("Failed to show rewarded ad:",c),!1}finally{try{e&&await e.remove(),n&&await n.remove(),i&&await i.remove(),o&&await o.remove()}catch(c){console.warn("Error cleaning up rewarded listeners:",c)}}}async showBestMonetizingAd(){var e,n;return(e=this.config)!=null&&e.rewardedAdUnitId&&await this.showRewarded()?"rewarded":(n=this.config)!=null&&n.interstitialAdUnitId&&await this.showInterstitial()?"interstitial":"none"}isNativePlatform(){return un.isNativePlatform()}isWebPlatform(){return un.getPlatform()==="web"}getConfig(){return this.config}}const _i=new iD,aD=({pack:s,isOpen:e,onClose:n,onStartDemo:i,onAdWatched:o,hasNoAds:c=!1})=>{const[h,m]=te.useState(!1),[g,_]=te.useState(null);if(!e)return null;const w=async()=>{m(!0),_(null);try{if(c){o&&o(s.id),i();return}await _i.showInterstitial()?(o&&o(s.id),i(),n()):_("No se pudo cargar el anuncio. Necesitas ver un anuncio para jugar el demo.")}catch(b){console.error("Error al mostrar anuncio:",b),_("Error al cargar el anuncio. Necesitas ver un anuncio para jugar el demo.")}finally{m(!1)}};return p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 animate-fade-in",children:p.jsxs(Rn,{className:"w-full max-w-md relative",children:[p.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:p.jsx(TS,{className:"w-6 h-6"})}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-6xl mb-4",children:s.icon}),p.jsxs("h2",{className:"text-2xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-500",children:["Demo: ",s.name]}),p.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:p.jsxs("div",{className:"flex items-start gap-3 text-left",children:[p.jsx(bS,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),p.jsxs("div",{className:"text-sm text-blue-300",children:[p.jsx("p",{className:"mb-2",children:p.jsx("strong",{children:"Qu incluye el demo?"})}),p.jsxs("ul",{className:"space-y-1 text-xs",children:[p.jsx("li",{children:" Podrs probar 5 preguntas y 5 retos que siempre sern los mismos (el pack incluye muchos ms)"}),p.jsx("li",{children:" Puedes jugar de forma ilimitada"}),p.jsx("li",{children:" Solo necesitas ver un anuncio antes de cada partida"}),p.jsx("li",{children:" Perfecto para probar si te gusta el pack"})]})]})]})}),g&&p.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mb-4",children:p.jsx("p",{className:"text-yellow-400 text-sm",children:g})}),p.jsxs("div",{className:"flex flex-col gap-3",children:[p.jsx(De,{onClick:w,disabled:h,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:h?p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Cargando anuncio..."]}):p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx("span",{role:"img","aria-label":"gem",children:""}),"Ver anuncio y jugar demo"]})}),p.jsx(De,{onClick:n,variant:"secondary",className:"w-full",disabled:h,children:"Volver atrs"})]}),p.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"Te gusta el pack? Al final de la partida podrs comprarlo completo."})]})]})})},oD=({players:s,currentPlayerIndex:e,onNextPlayer:n,onNewGame:i,questions:o,dares:c,roundConfig:h,gameProgress:m,onRoundEnd:g,onQuestionAsked:_,onDareCompleted:w,onQuestionChange:b,onAdRequired:S,questionChangeState:N={changesCount:0,isAdLoading:!1,isAdPlaying:!1}})=>{const[j,G]=te.useState(null),[B,ae]=te.useState(null),[re,se]=te.useState(new Set),[ge,ue]=te.useState(new Set),W=s[e];te.useEffect(()=>{di.trackGameStart("mixed","Juego Mixto",s.length)},[]);const C=R=>{if(!R.includes("$jugador"))return R;const Ie=s.filter((Q,ie)=>ie!==e);if(Ie.length===0)return R.replace(/\$jugador/g,"otro jugador");const Oe=Ie[Math.floor(Math.random()*Ie.length)];return R.replace(/\$jugador/g,Oe)},x=te.useMemo(()=>o.map((R,Ie)=>({item:R,index:Ie})),[o]),I=te.useMemo(()=>c.map((R,Ie)=>({item:R,index:Ie})),[c]),P=R=>{const Ie=R==="pregunta"?x:I,Oe=R==="pregunta"?re:ge,Q=R==="pregunta"?se:ue,ie=Ie.filter(Y=>!Oe.has(Y.index));if(ie.length===0){Q(new Set);const Y=Math.floor(Math.random()*Ie.length),pe=Ie[Y];G(pe.item),Q(O=>new Set(O).add(pe.index))}else{const Y=Math.floor(Math.random()*ie.length),pe=ie[Y];G(pe.item),Q(O=>new Set(O).add(pe.index))}ae(R),R==="pregunta"&&_?_():R==="reto"&&w&&w()},M=async()=>{if(!j||!B)return;if(N.changesCount>=ad.CHANGES_BEFORE_AD-1&&S)try{await S()}catch(pe){console.error("Error showing ad:",pe);return}const Ie=B==="pregunta"?x:I,Oe=B==="pregunta"?re:ge,Q=B==="pregunta"?se:ue;let ie=0,Y=null;for(;ie<ad.MAX_CHANGE_ATTEMPTS&&!Y;){const pe=Ie.filter(O=>!Oe.has(O.index)&&O.item.text!==j.text);if(pe.length===0){Q(new Set);const O=Ie.filter(Z=>Z.item.text!==j.text);if(O.length>0){const Z=Math.floor(Math.random()*O.length),le=O[Z];Y=le.item,Q(oe=>new Set([le.index]))}else break}else{const O=Math.floor(Math.random()*pe.length),Z=pe[O];Y=Z.item,Q(le=>new Set(le).add(Z.index))}ie++}Y&&(G(Y),b&&b())},k=()=>{G(null),ae(null),e===s.length-1?m.currentRound+1>h.totalRounds?n():g():n()};return p.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center animate-fade-in",children:[p.jsxs(Rn,{className:"w-full max-w-lg min-h-[24rem] flex flex-col justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"mb-2",children:p.jsxs("p",{className:"text-sm text-gray-500",children:["Ronda ",m.currentRound," de ",h.totalRounds]})}),p.jsx("p",{className:"text-lg text-gray-400",children:"Turno de:"}),p.jsx("h2",{className:"text-4xl font-bold my-4 text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400",children:W})]}),j?p.jsxs("div",{className:"animate-fade-in",children:[p.jsx("h3",{className:"text-2xl font-bold mb-6 text-cyan-400 capitalize",children:B}),p.jsx("p",{className:"text-xl md:text-2xl leading-relaxed",children:C(j.text)}),p.jsxs("div",{className:"mt-6 flex flex-col items-center gap-2",children:[p.jsxs(De,{onClick:M,variant:"secondary",className:"text-sm px-4 py-2",disabled:N.isAdLoading||N.isAdPlaying,children:[" Cambiar ",B]}),p.jsxs("p",{className:"text-xs text-gray-500",children:["Cambios restantes antes del anuncio: ",ad.CHANGES_BEFORE_AD-N.changesCount%ad.CHANGES_BEFORE_AD]}),(N.isAdLoading||N.isAdPlaying)&&p.jsx("p",{className:"text-xs text-yellow-400",children:N.isAdLoading?"Cargando anuncio...":"Reproduciendo anuncio..."})]})]}):p.jsxs("div",{className:"animate-fade-in",children:[p.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Verdad o Reto?"}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(De,{onClick:()=>P("pregunta"),className:"w-full sm:w-auto",children:"Pregunta"}),p.jsx(De,{onClick:()=>P("reto"),variant:"secondary",className:"w-full sm:w-auto",children:"Reto"})]})]}),p.jsx("div",{className:"mt-8",children:j&&p.jsx(De,{onClick:k,children:"Siguiente Jugador"})})]}),p.jsx("button",{onClick:i,className:"mt-6 text-sm text-gray-500 hover:text-gray-300 transition",children:"Empezar nuevo juego"})]})},lD=({onSelectRounds:s,onBack:e})=>{const n=[{value:5,label:"5 Rondas",description:"Partida rpida (15-20 min)"},{value:10,label:"10 Rondas",description:"Partida estndar (30-40 min)"},{value:15,label:"15 Rondas",description:"Partida larga (45-60 min)"}];return p.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:p.jsxs(Rn,{className:"w-full max-w-2xl text-center",children:[p.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Configurar Partida"}),p.jsx("p",{className:"text-gray-400 mb-8",children:"Elige cuntas rondas quieres jugar"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:n.map(i=>p.jsxs("div",{className:"relative p-6 rounded-lg border border-gray-600 bg-gray-800/50 hover:border-purple-500 transition-all duration-200 cursor-pointer group",onClick:()=>s(i.value),children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:i.value}),p.jsx("div",{className:"text-lg font-semibold text-white mb-2",children:i.label}),p.jsx("div",{className:"text-sm text-gray-400",children:i.description})]}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]},i.value))}),p.jsx("div",{className:"text-sm text-gray-500 mb-6",children:" Al final de cada ronda se mostrar un anuncio breve"}),p.jsx("div",{className:"flex gap-4 justify-center",children:p.jsx(De,{onClick:e,variant:"secondary",className:"px-6",children:"Volver"})})]})})},db=({dataAdSlot:s,className:e,style:n,fallbackContent:i,timeout:o=5e3,admobConfig:c,hasNoAds:h=!1})=>{const[m,g]=te.useState("loading"),[_,w]=te.useState(!1),[b,S]=te.useState(!1);return te.useEffect(()=>{let N,j=null,G=!0;return(async()=>{if(h){G&&w(!0);return}try{N=setTimeout(()=>{G&&m==="loading"&&(console.warn("Ad loading timeout reached"),g("timeout"),w(!0))},o);const ae=un.isNativePlatform();if(S(ae),ae&&c)try{await _i.initialize({...c,bannerAdUnitId:s}),await _i.showBannerAd(),G&&(g("loaded"),clearTimeout(N));return}catch(re){console.warn("AdMob failed:",re),G&&(g("error"),w(!0),clearTimeout(N));return}if(typeof window<"u"&&!ae){let re=0;const se=10,ge=()=>{if(G)if(window.adsbygoogle||re>=se)try{(window.adsbygoogle=window.adsbygoogle||[]).push({}),setTimeout(()=>{if(G){if(j=document.querySelector(`[data-ad-slot="${s}"]`),j){const ue=j.innerHTML;ue&&ue.trim()!==""?g("loaded"):(g("error"),w(!0))}else g("error"),w(!0);clearTimeout(N)}},2e3)}catch(ue){console.error("Error loading AdSense ad:",ue),G&&(g("error"),w(!0),clearTimeout(N))}else re++,setTimeout(ge,200)};ge()}else ae&&!c&&(console.warn("Native platform detected but no AdMob config provided"),G&&(g("error"),w(!0),clearTimeout(N)))}catch(ae){console.error("Error in ad loading process:",ae),G&&(g("error"),w(!0),clearTimeout(N))}})(),()=>{G=!1,N&&clearTimeout(N),b&&m==="loaded"&&_i.removeBannerAd().catch(console.error)}},[s,o,c,h]),_?p.jsx("div",{className:`ad-fallback ${e||""}`,style:n,children:i||p.jsx("div",{className:"ad-fallback-message"})}):p.jsxs("div",{className:`ad-container ${e||""}`,style:n,children:[m==="loading"&&p.jsx("div",{className:"ad-loading",children:p.jsx("div",{className:"loading-spinner"})}),p.jsx("ins",{className:"adsbygoogle",style:{display:m==="loaded"?"block":"none",textAlign:"center",width:"100%",height:"auto"},"data-ad-client":"ca-pub-XXXXXXXXXXXXXXXX","data-ad-slot":s,"data-ad-format":"auto","data-full-width-responsive":"true"})]})},cD=({roundStats:s,currentRound:e,totalRounds:n,onContinue:i,onEndGame:o,hasNoAds:c=!1})=>{var j;const[h,m]=te.useState(!1),[g,_]=te.useState(!1),[w,b]=te.useState(5);te.useEffect(()=>{let G=!0;const B=async()=>{try{await _i.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),m(!0);const se=await _i.showInterstitial();G&&(_(!0),console.log("Anuncio intersticial mostrado:",se))}catch(se){console.warn("Fallo al mostrar anuncio nativo:",se),G&&(m(!0),_(!0))}};if(!c&&un.isNativePlatform())return B(),()=>{G=!1};if(c){m(!0),_(!0);return}const ae=setTimeout(()=>{m(!0)},800);let re;return h&&!g&&(re=setInterval(()=>{b(se=>se<=1?(_(!0),re&&clearInterval(re),0):se-1)},1e3)),()=>{clearTimeout(ae),re&&clearInterval(re)}},[c,h,g]);const S=e>=n,N=un.isNativePlatform();return p.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:p.jsxs(Rn,{className:"w-full max-w-2xl text-center",children:[p.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-green-500 to-blue-500",children:S?"Partida Completada!":`Ronda ${s.roundNumber} Completada!`}),!S&&p.jsxs("p",{className:"text-gray-400 mb-6",children:["Ronda ",e," de ",n]}),p.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-6",children:[p.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Estadsticas de la Ronda"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-2xl font-bold text-blue-400",children:s.questionsAsked}),p.jsx("div",{className:"text-sm text-gray-400",children:"Preguntas"})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-2xl font-bold text-purple-400",children:s.daresCompleted}),p.jsx("div",{className:"text-sm text-gray-400",children:"Retos"})]})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Jugadores participantes:"}),p.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:((j=s.playersParticipated)==null?void 0:j.map((G,B)=>p.jsx("span",{className:"px-3 py-1 bg-purple-600 text-white rounded-full text-sm",children:G},B)))||p.jsx("span",{className:"text-gray-400 text-sm",children:"No hay jugadores registrados"})})]})]}),!c&&p.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[p.jsxs("div",{className:"text-center mb-4",children:[p.jsx("div",{className:"text-lg font-semibold mb-2",children:" Anuncio"}),g?p.jsx("div",{className:"text-green-400 mb-4",children:" Anuncio completado"}):p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",N?"":`${w}s`]}),!N&&p.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:p.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-w)/5*100}%`}})})]})]}),!N&&p.jsx(db,{dataAdSlot:"1234567890",className:"round-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},hasNoAds:c,fallbackContent:p.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),p.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:S?p.jsx(De,{onClick:o,className:"px-8 py-3 text-lg",disabled:!c&&!g,children:"Ver Resultados Finales"}):p.jsxs(p.Fragment,{children:[p.jsx(De,{onClick:o,variant:"secondary",className:"px-6",disabled:!c&&!g,children:"Terminar Partida"}),p.jsx(De,{onClick:i,className:"px-8 py-3 text-lg",disabled:!c&&!g,children:"Siguiente Ronda"})]})}),!g&&p.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Los botones se habilitarn cuando termine el anuncio"})]})})},uD=({gameStats:s,players:e,onNewGame:n,onBackToMenu:i,hasNoAds:o=!1,isDemoMode:c=!1,demoPackId:h=null})=>{const m=s.gameEndTime&&s.gameStartTime?Math.round((s.gameEndTime.getTime()-s.gameStartTime.getTime())/1e3/60):0,g=s.totalRounds>0?Math.round(s.totalQuestions/s.totalRounds):0,_=s.totalRounds>0?Math.round(s.totalDares/s.totalRounds):0,[w,b]=te.useState(!1),[S,N]=te.useState(!1),[j,G]=te.useState(5),B=un.isNativePlatform();return te.useEffect(()=>{di.trackGameEnd("mixed","Juego Mixto",s.totalRounds,m)},[]),te.useEffect(()=>{let ae=!0;const re=async()=>{try{await _i.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),N(!0);const ue=await _i.showInterstitial();ae&&(b(!0),console.log("Anuncio intersticial al final de partida mostrado:",ue))}catch(ue){console.warn("Error mostrando anuncio al final de partida:",ue),ae&&(N(!0),b(!0))}};if(!o&&B)return re(),()=>{ae=!1};if(o){b(!0),N(!0);return}const se=setTimeout(()=>N(!0),800);let ge;return S&&!w&&(ge=setInterval(()=>{G(ue=>ue<=1?(b(!0),ge&&clearInterval(ge),0):ue-1)},1e3)),()=>{clearTimeout(se),ge&&clearInterval(ge)}},[o,B,S,w]),p.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:p.jsxs(Rn,{className:"w-full max-w-4xl text-center",children:[p.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500",children:" Partida Finalizada! "}),p.jsx("p",{className:"text-gray-400 mb-8 text-base sm:text-lg",children:"Esperamos que se hayan divertido mucho!"}),!o&&p.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[p.jsxs("div",{className:"text-center mb-4",children:[p.jsx("div",{className:"text-lg font-semibold mb-2",children:" Anuncio"}),w?p.jsx("div",{className:"text-green-400 mb-4",children:" Anuncio completado"}):p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",B?"":`${j}s`]}),!B&&p.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:p.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-j)/5*100}%`}})})]})]}),!B&&p.jsx(db,{dataAdSlot:"1234567890",className:"game-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},hasNoAds:o,fallbackContent:p.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[p.jsxs("div",{className:"bg-gradient-to-br from-blue-600/20 to-blue-800/20 rounded-lg p-6 border border-blue-500/30",children:[p.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-blue-400 mb-2",children:s.totalRounds}),p.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Rondas Jugadas"}),p.jsxs("div",{className:"text-sm text-gray-400",children:[m," minutos"]})]}),p.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-purple-800/20 rounded-lg p-6 border border-purple-500/30",children:[p.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-purple-400 mb-2",children:s.totalQuestions}),p.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Preguntas"}),p.jsxs("div",{className:"text-sm text-gray-400",children:[g," por ronda"]})]}),p.jsxs("div",{className:"bg-gradient-to-br from-pink-600/20 to-pink-800/20 rounded-lg p-6 border border-pink-500/30",children:[p.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-pink-400 mb-2",children:s.totalDares}),p.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Retos"}),p.jsxs("div",{className:"text-sm text-gray-400",children:[_," por ronda"]})]})]}),p.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[p.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Jugadores Participantes"}),p.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:e.map((ae,re)=>p.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full",children:[p.jsx("span",{className:"text-lg",children:""}),p.jsx("span",{className:"font-medium",children:ae})]},re))})]}),s.roundStats.length>0&&p.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[p.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Resumen por Rondas"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.roundStats.map((ae,re)=>{var se;return p.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 border border-gray-600",children:[p.jsxs("div",{className:"text-base sm:text-lg font-semibold text-purple-400 mb-2",children:["Ronda ",ae.roundNumber]}),p.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[p.jsxs("div",{children:[" ",ae.questionsAsked," preguntas"]}),p.jsxs("div",{children:[" ",ae.daresCompleted," retos"]}),p.jsxs("div",{children:[" ",((se=ae.playersParticipated)==null?void 0:se.length)||0," jugadores"]})]})]},re)})})]}),c?p.jsxs("div",{className:"bg-gradient-to-r from-yellow-600/20 to-orange-600/20 rounded-lg p-6 mb-8 border border-yellow-500/30",children:[p.jsx("div",{className:"text-3xl mb-3",children:""}),p.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"Demo Completado!"}),p.jsx("p",{className:"text-gray-300 mb-4",children:"Te gust este pack? Hay muchas ms preguntas y retos esperndote!"}),p.jsxs("div",{className:"bg-yellow-500/10 rounded-lg p-4 border border-yellow-500/30",children:[p.jsx("p",{className:"text-yellow-200 font-medium mb-2",children:" Sabas que?"}),p.jsx("p",{className:"text-gray-300 text-sm",children:"El pack completo incluye ms de 50 preguntas y retos nicos, perfectos para cualquier ocasin!"})]}),p.jsx("div",{className:"mt-4",children:p.jsx(De,{onClick:i,className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-semibold rounded-lg",children:" Ir a la Tienda!"})})]}):p.jsxs("div",{className:"bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-lg p-6 mb-8 border border-purple-500/30",children:[p.jsx("div",{className:"text-2xl mb-2",children:""}),p.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Gracias por jugar!"}),p.jsx("p",{className:"text-gray-300",children:"Esperamos que hayan creado recuerdos increbles. No olviden compartir sus mejores momentos!"})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(De,{onClick:n,className:"px-8 py-3 text-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",disabled:!o&&!w,children:" Nueva Partida"}),p.jsx(De,{onClick:i,variant:"secondary",className:"px-8 py-3 text-lg",disabled:!o&&!w,children:" Men Principal"})]}),p.jsxs("div",{className:"mt-8 text-xs text-gray-500",children:[p.jsx("p",{children:"Te gust el juego? Comprtelo con tus amigos!"}),p.jsx("p",{className:"mt-1",children:"Verdad o Reto - La diversin nunca termina"})]})]})})},vE=["PUTO","PUTA","MIERDA","JODER","COO","CABRON","CABRONA","PENDEJO","PENDEJA","IDIOTA","ESTUPIDO","ESTUPIDA","TONTO","TONTA","IMBECIL","GILIPOLLAS","HIJO","HIJA","MADRE","PADRE","MAMA","PAPA","SEXO","PORNO","XXX","NAZI","HITLER","MUERTE","MATAR","SUICIDIO","DROGA","DROGAS","MARICON","MARICA","GAY","LESBIANA","TRANS","HOMO","HETERO","NEGRO","BLANCO","CHINO","JUDIO","MUSULMAN","CRISTIANO","GORDO","GORDA","FEO","FEA","FLACOS","FLACA","FUCK","SHIT","BITCH","DAMN","HELL","ASS","ASSHOLE","BASTARD","STUPID","IDIOT","MORON","RETARD","DUMB","LOSER","FREAK","SEX","PORN","XXX","NUDE","NAKED","BOOBS","PENIS","VAGINA","NAZI","HITLER","KILL","DIE","DEATH","SUICIDE","DRUG","DRUGS","FAG","FAGGOT","HOMO","LESBIAN","TRANS","QUEER","BLACK","WHITE","ASIAN","JEWISH","MUSLIM","CHRISTIAN","FAT","UGLY","SKINNY","GROSS","DISGUSTING","WTF","OMFG","STFU","GTFO","LMAO","ROFL","ADMIN","MODERATOR","OWNER","STAFF","SUPPORT","VERDAD","RETO","GAME","JUEGO","APP","OFICIAL","666","420","69","88","1488","NULL","UNDEFINED","ERROR","ADMIN","ROOT","SYSTEM","DELETE","DROP","TRUNCATE","ALTER","CREATE"],dD=[/^\d+$/,/^[A-Z]\1{5}$/,/^(.)\1{2,}/,/^[0O1IL]{6}$/,/^(ABC|123|XYZ|QWE|ASD|ZXC)/],ag=s=>{if(!s||typeof s!="string")return!1;const e=s.toUpperCase().trim();if(e.length!==6||vE.includes(e))return!1;for(const h of vE)if(e.includes(h))return!1;for(const h of dD)if(h.test(e))return!1;const n="AEIOU",i="BCDFGHJKLMNPQRSTVWXYZ",o=e.split("").every(h=>n.includes(h)),c=e.split("").every(h=>i.includes(h));return!(o||c)},EE=(s=[])=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n=0;const i=1e3;for(;n<i;){let m="";for(let g=0;g<6;g++)m+=e.charAt(Math.floor(Math.random()*e.length));if(ag(m)&&!s.includes(m))return m;n++}const o=Date.now().toString(36).toUpperCase(),c=Math.random().toString(36).substring(2,4).toUpperCase(),h=(o+c).substring(0,6).padEnd(6,"0");return ag(h)?h:"REF001"},hb=s=>{if(!s||typeof s!="string")return{isValid:!1,error:"El cdigo de referido es requerido"};const e=s.toUpperCase().trim().replace(/[^A-Z0-9]/g,"");return e.length!==6?{isValid:!1,error:"El cdigo de referido debe tener exactamente 6 caracteres"}:ag(e)?{isValid:!0,sanitizedCode:e}:{isValid:!1,error:"El cdigo de referido contiene contenido inapropiado o no vlido"}},hD=async()=>{try{const s=et(Pe,"users"),e=await pt(s),n=[];return e.forEach(i=>{const o=i.data();o.referralCode&&n.push(o.referralCode)}),n}catch(s){return console.error("Error getting existing referral codes:",s),[]}},fD=async s=>{try{const e=et(Pe,"users"),n=Tt(e,Xe("referralCode","==",s));return!(await pt(n)).empty}catch(e){return console.error("Error checking referral code existence:",e),!1}},mD=async()=>{try{const s=await hD();return EE(s)}catch(s){return console.error("Error generating unique referral code:",s),EE([])}},dp=async(s,e)=>{try{const n=En(Pe,"users",s.uid);if(!(await Cs(n)).exists()){const o=await mD();let c={};if(e){const g=hb(e);g.isValid&&g.sanitizedCode?await fD(g.sanitizedCode)?c={usedReferralCode:g.sanitizedCode,referralProcessedAt:new Date}:console.warn("Referral code does not exist:",g.sanitizedCode):console.warn("Invalid referral code provided:",e,g.error)}const h={uid:s.uid,email:s.email,displayName:s.displayName,photoURL:s.photoURL,isAnonymous:s.isAnonymous,emailVerified:s.emailVerified,referralCode:o,referralCount:0,createdAt:new Date,lastLoginAt:new Date,migrationVersion:"1.0",usedReferralCode:null,referredBy:null,referralProcessedAt:null,lastKnownIP:null,deviceId:null,acceptedSuggestions:0,...c};await qd(n,h);const m=En(Pe,"userReferralCodes",s.uid);await qd(m,{referralCode:o,displayName:s.displayName||s.email||"Usuario",createdAt:new Date})}}catch(n){console.error("Error creating user profile:",n)}},Bo=s=>({uid:s.uid,email:s.email,displayName:s.displayName,photoURL:s.photoURL,isAnonymous:s.isAnonymous,emailVerified:s.emailVerified}),fb=async s=>{try{const e=await ZC(mr,lb);return await dp(e.user,s),Bo(e.user)}catch(e){throw console.error("Error al iniciar sesin con Google:",e),new Error(e.message||"Error al iniciar sesin con Google")}},mb=async(s,e)=>{try{const n=await xC(mr,s,e);return Bo(n.user)}catch(n){throw console.error("Error al iniciar sesin:",n),new Error(fp(n.code))}},gb=async(s,e,n,i)=>{try{const o=await SC(mr,s,e);return n&&await IC(o.user,{displayName:n}),await dp(o.user,i),await XT(o.user),Bo(o.user)}catch(o){throw console.error("Error al registrarse:",o),new Error(fp(o.code))}},pb=async()=>{try{const s=await EC(mr);return await dp(s.user),Bo(s.user)}catch(s){throw console.error("Error al iniciar sesin annima:",s),new Error("Error al iniciar sesin annima")}},yb=async()=>{try{await OC(mr)}catch(s){throw console.error("Error al cerrar sesin:",s),new Error("Error al cerrar sesin")}},_b=async s=>{try{await AC(mr,s)}catch(e){throw console.error("Error al enviar email de restablecimiento:",e),new Error(fp(e.code))}},vb=async()=>{try{if(mr.currentUser)await XT(mr.currentUser);else throw new Error("No hay usuario autenticado")}catch(s){throw console.error("Error al reenviar verificacin:",s),new Error("Error al reenviar verificacin de email")}},Eb=s=>DC(mr,e=>{s(e?Bo(e):null)}),hp=()=>mr.currentUser?Bo(mr.currentUser):null,og=()=>{const s=hp();return s!==null&&!s.isAnonymous&&s.emailVerified},fp=s=>{switch(s){case"auth/user-not-found":return"No existe una cuenta con este email";case"auth/wrong-password":return"Contrasea incorrecta";case"auth/email-already-in-use":return"Ya existe una cuenta con este email";case"auth/weak-password":return"La contrasea debe tener al menos 6 caracteres";case"auth/invalid-email":return"Email invlido";case"auth/too-many-requests":return"Demasiados intentos fallidos. Intenta ms tarde";case"auth/network-request-failed":return"Error de conexin. Verifica tu internet";default:return"Error de autenticacin. Intenta nuevamente"}},gD=Object.freeze(Object.defineProperty({__proto__:null,canPurchase:og,getCurrentUser:hp,logout:yb,onAuthStateChange:Eb,registerWithEmail:gb,resendEmailVerification:vb,resetPassword:_b,signInAnonymous:pb,signInWithEmail:mb,signInWithGoogle:fb},Symbol.toStringTag,{value:"Module"})),pD=()=>{const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<6;n++)e+=s.charAt(Math.floor(Math.random()*s.length));return e},yD=async s=>{try{const e=et(Pe,"users"),n=Tt(e,Xe("referralCode","==",s));return(await pt(n)).empty}catch(e){return console.error("Error verificando unicidad del cdigo:",e),!1}},_D=async()=>{let s=0;const e=10;for(;s<e;){const n=pD();if(await yD(n))return n;s++}throw new Error("No se pudo generar un cdigo nico despus de "+e+" intentos")},wb=async s=>{try{if(!(s!=null&&s.uid)){console.warn("Usuario no vlido para migracin");return}const e=En(Pe,"users",s.uid),n=await Cs(e);if(!n.exists()){console.warn("Documento de usuario no encontrado:",s.uid);return}const i=n.data(),o={};let c=!1;if(!i.referralCode)try{const h=await _D();o.referralCode=h,c=!0,console.log(" Generando cdigo de referido para usuario:",s.uid,"-",h)}catch(h){console.error("Error generando cdigo de referido:",h),o.referralCode=`TEMP${Date.now().toString().slice(-6)}`,c=!0}if((i.referralCount===void 0||i.referralCount===null)&&(o.referralCount=0,c=!0),i.createdAt||(o.createdAt=new Date,c=!0),o.lastLoginAt=new Date,c=!0,i.usedReferralCode===void 0&&(o.usedReferralCode=null,c=!0),i.referredBy===void 0&&(o.referredBy=null,c=!0),i.referralProcessedAt===void 0&&(o.referralProcessedAt=null,c=!0),i.lastKnownIP===void 0&&(o.lastKnownIP=null,c=!0),i.deviceId===void 0&&(o.deviceId=null,c=!0),i.acceptedSuggestions===void 0&&(o.acceptedSuggestions=0,c=!0),i.deviceId===void 0&&(o.deviceId=null,c=!0),i.autoMigratedAt||(o.autoMigratedAt=new Date,o.migrationVersion=i.migrationVersion||"1.0",c=!0),c){if(await Zg(e,o),o.referralCode)try{const h=En(Pe,"userReferralCodes",s.uid);await qd(h,{referralCode:o.referralCode,displayName:i.displayName||i.email||"Usuario",createdAt:i.createdAt||o.createdAt||new Date}),console.log(" Documento de cdigo de referido creado para:",s.uid)}catch(h){console.error("Error creando documento de cdigo de referido:",h)}console.log(" Usuario migrado automticamente:",s.uid)}}catch(e){console.error("Error en migracin automtica de usuario:",e)}},Tb=te.createContext(void 0),vD=({children:s})=>{const[e,n]=te.useState({user:null,isLoading:!0,isAuthenticated:!1});te.useEffect(()=>{const m=Eb(async g=>{if(g&&!g.isAnonymous&&g.uid)try{await wb(g)}catch(_){console.error("Error durante la migracin automtica del usuario:",_)}n({user:g,isLoading:!1,isAuthenticated:g!==null&&!g.isAnonymous})});return()=>m()},[]);const h={...e,login:()=>{},logout:async()=>{try{const{logout:m}=await cb(async()=>{const{logout:g}=await Promise.resolve().then(()=>gD);return{logout:g}},void 0,import.meta.url);await m()}catch(m){console.error("Error al cerrar sesin:",m)}},refreshUser:()=>{const m=hp();n(g=>({...g,user:m,isAuthenticated:m!==null&&!m.isAnonymous}))}};return p.jsx(Tb.Provider,{value:h,children:s})},Ea=()=>{const s=te.useContext(Tb);if(s===void 0)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return s},Si={PURCHASED_PACKS:"verdad_reto_purchased_packs",CACHED_GAME_ITEMS:"verdad_reto_cached_items",CACHED_CATEGORIES:"verdad_reto_cached_categories",CACHE_PERMISSION:"verdad_reto_cache_permission",LAST_SYNC:"verdad_reto_last_sync"},ED=()=>{const s=localStorage.getItem(Si.CACHE_PERMISSION);if(s==="granted")return!0;if(s==="denied")return!1;const e=window.confirm(`Deseas permitir que la aplicacin guarde los packs comprados localmente para poder jugar sin conexin?

Esto mejorar tu experiencia permitindote acceder a tus packs incluso sin internet.`);return localStorage.setItem(Si.CACHE_PERMISSION,e?"granted":"denied"),e},wc=()=>localStorage.getItem(Si.CACHE_PERMISSION)==="granted",wD=async(s,e,n)=>{if(!wc()){console.log("Cache permission not granted, skipping cache");return}try{const i={pack:s,gameData:{items:e,categories:n,timestamp:Date.now()},timestamp:Date.now()},o=mp();o[s.id]=i,localStorage.setItem(Si.PURCHASED_PACKS,JSON.stringify(o)),localStorage.setItem(Si.LAST_SYNC,Date.now().toString()),console.log(`Pack ${s.name} cached successfully`)}catch(i){console.error("Error caching pack:",i)}},mp=()=>{try{const s=localStorage.getItem(Si.PURCHASED_PACKS);return s?JSON.parse(s):{}}catch(s){return console.error("Error reading cached packs:",s),{}}},TD=s=>{if(!wc())return null;try{const e=mp(),n=[],i=[];for(const o of s){const c=e[o];c&&(n.push(...c.gameData.items),i.push(...c.gameData.categories))}return n.length===0?null:{items:n,categories:[...new Set(i)]}}catch(e){return console.error("Error reading cached game data:",e),null}},bD=()=>{Object.values(Si).forEach(s=>{localStorage.removeItem(s)}),console.log("Cache cleared successfully")},bb=()=>{const s=mp(),e=localStorage.getItem(Si.LAST_SYNC);return{hasPermission:wc(),packsCount:Object.keys(s).length,lastSync:e?new Date(parseInt(e)):null,packs:Object.keys(s)}};var Ab="basil",AD=function(e){return e===3?"v3":e},Sb="https://js.stripe.com",SD="".concat(Sb,"/").concat(Ab,"/stripe.js"),xD=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,RD=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var ID=function(e){return xD.test(e)||RD.test(e)},ND=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Sb,'"]')),n=0;n<e.length;n++){var i=e[n];if(ID(i.src))return i}return null},wE=function(e){var n="",i=document.createElement("script");i.src="".concat(SD).concat(n);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(i),i},CD=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:n})},Yl=null,fd=null,md=null,DD=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},OD=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},PD=function(e){return Yl!==null?Yl:(Yl=new Promise(function(n,i){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var o=ND();if(!(o&&e)){if(!o)o=wE(e);else if(o&&md!==null&&fd!==null){var c;o.removeEventListener("load",md),o.removeEventListener("error",fd),(c=o.parentNode)===null||c===void 0||c.removeChild(o),o=wE(e)}}md=OD(n,i),fd=DD(i),o.addEventListener("load",md),o.addEventListener("error",fd)}catch(h){i(h);return}}),Yl.catch(function(n){return Yl=null,Promise.reject(n)}))},MD=function(e,n,i){if(e===null)return null;var o=n[0],c=o.match(/^pk_test/),h=AD(e.version),m=Ab;c&&h!==m&&console.warn("Stripe.js@".concat(h," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(m,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var g=e.apply(void 0,n);return CD(g,i),g},Xl,xb=!1,Rb=function(){return Xl||(Xl=PD(null).catch(function(e){return Xl=null,Promise.reject(e)}),Xl)};Promise.resolve().then(function(){return Rb()}).catch(function(s){xb||console.warn(s)});var VD=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];xb=!0;var o=Date.now();return Rb().then(function(c){return MD(c,n,o)})};const kD="pk_live_51S2dpMEamlsERKowyMSm4kgm11dMknJLyZGy9gZsIBBd3BQo3l9Vnn0TYKWcmuDtnq23YEsHo7FL69hGEM3UAboz00Onx53LCm";let Pm=null;const jD=()=>(Pm||(Pm=VD(kD)),Pm),Ib=async()=>{try{const s=await Cs(En(Pe,"config","stripe"));return s.exists()?s.data():null}catch(s){return console.error("Error obteniendo configuracin de Stripe:",s),null}},LD=async(s,e,n)=>{try{if(!s.isPremium)throw new Error("Este pack no requiere pago");const i=await Ib();if(!i)throw new Error("Configuracin de Stripe no disponible");const o=s.priceAmount||0,c=s.originalPriceAmount||s.priceAmount||0;console.log("Creando sesin de checkout:",{packId:s.id,originalAmount:c,finalAmount:o,hasDiscount:s.hasDiscount,discountReason:s.discountReason});const h=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packId:s.id,priceId:s.stripePriceId,userEmail:e,userId:n,successUrl:`${window.location.origin}${i.successUrl}&pack=${s.id}`,cancelUrl:`${window.location.origin}${i.cancelUrl}`,hasDiscount:s.hasDiscount,finalAmount:o,originalAmount:c,discountReason:s.discountReason})});if(!h.ok){const g=await h.json();throw new Error(g.error||"Error creando sesin de pago")}const m=await h.json();return{sessionId:m.id,url:m.url}}catch(i){throw console.error("Error creando sesin de checkout:",i),i}},UD=async(s,e,n)=>{try{const i=await jD();if(!i)throw new Error("Stripe no est disponible");const o=await LD(s,e,n);if(!o)throw new Error("No se pudo crear la sesin de pago");await zD({userId:n,packId:s.id,stripeSessionId:o.sessionId,purchaseDate:new Date,amount:s.priceAmount||0,currency:s.currency||"EUR",status:"pending",email:e});const{error:c}=await i.redirectToCheckout({sessionId:o.sessionId});if(c)throw new Error(c.message)}catch(i){throw console.error("Error redirigiendo a checkout:",i),i}},zD=async s=>{try{return(await Mc(et(Pe,"userPurchases"),{...s,purchaseDate:s.purchaseDate.toISOString()})).id}catch(e){throw console.error("Error guardando compra pendiente:",e),e}},qD=async s=>{try{const e=Tt(et(Pe,"userPurchases"),Xe("userId","==",s),Xe("status","==","completed"));return(await pt(e)).docs.map(i=>({id:i.id,...i.data(),purchaseDate:new Date(i.data().purchaseDate)}))}catch(e){return console.error("Error obteniendo compras del usuario:",e),[]}},TE=async s=>{try{return(await qD(s)).map(n=>n.packId)}catch(e){return console.error("Error obteniendo packs comprados:",e),[]}},BD=({onClose:s})=>{const[e,n]=te.useState(null),[i,o]=te.useState(!1);te.useEffect(()=>{c()},[]);const c=()=>{const g=bb();n(g)},h=async()=>{o(!0);try{ED()&&c()}finally{o(!1)}},m=()=>{window.confirm("Ests seguro de que quieres eliminar todos los datos guardados localmente?")&&(bD(),c())};return e?p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h2",{className:"text-xl font-bold",children:"Almacenamiento Local"}),p.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Estado del Cach"}),p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Permiso:"}),p.jsx("span",{className:`font-medium ${e.hasPermission?"text-green-600":"text-red-600"}`,children:e.hasPermission?"Activado":"Desactivado"})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Packs guardados:"}),p.jsx("span",{className:"font-medium",children:e.packsCount})]}),e.lastSync&&p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"ltima sincronizacin:"}),p.jsxs("span",{className:"font-medium text-xs",children:[e.lastSync.toLocaleDateString()," ",e.lastSync.toLocaleTimeString()]})]})]})]}),e.packsCount>0&&p.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Packs Disponibles Sin Conexin"}),p.jsx("div",{className:"space-y-1 text-sm",children:e.packs.map(g=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),p.jsx("span",{className:"capitalize",children:g.replace("-"," ")})]},g))})]}),p.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Qu es el almacenamiento local?"}),p.jsx("p",{className:"text-sm text-gray-700",children:"Permite guardar los packs que compres en tu dispositivo para poder jugar sin conexin a internet. Los datos se mantienen seguros en tu navegador."})]}),p.jsxs("div",{className:"flex flex-col space-y-2",children:[e.hasPermission?p.jsx("div",{className:"text-center text-green-600 font-medium",children:" Almacenamiento local activado"}):p.jsx(De,{onClick:h,disabled:i,className:"w-full bg-green-600 hover:bg-green-700",children:i?"Procesando...":"Activar Almacenamiento Local"}),e.packsCount>0&&p.jsx(De,{onClick:m,className:"w-full bg-red-600 hover:bg-red-700",children:"Limpiar Datos Guardados"}),p.jsx(De,{onClick:s,className:"w-full bg-gray-600 hover:bg-gray-700",children:"Cerrar"})]})]})]})}):p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:p.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:p.jsx("div",{className:"text-center",children:"Cargando informacin del cach..."})})})},HD=({pack:s,onBack:e,onSuccess:n})=>{const{user:i}=Ea(),[o,c]=te.useState(!1),[h,m]=te.useState(null),[g,_]=te.useState(null);te.useEffect(()=>{(async()=>{try{const N=await Ib();_(N)}catch{m("Error cargando configuracin de pago")}})()},[]);const w=async()=>{if(!i||!i.email){m("Debes estar autenticado para realizar una compra");return}if(!s.isPremium){m("Este pack no requiere pago");return}c(!0),m(null);try{await UD(s,i.email,i.uid),n&&n()}catch(S){m(S.message||"Error procesando el pago"),c(!1)}},b=(S,N)=>new Intl.NumberFormat("es-ES",{style:"currency",currency:N.toUpperCase()}).format(S/100);return g?p.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"w-full max-w-md",children:[p.jsxs("div",{className:"relative text-center mb-8",children:[p.jsx("button",{onClick:e,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:p.jsx(RE,{className:"w-8 h-8"})}),p.jsx("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Checkout"})]}),p.jsxs(Rn,{className:"p-6",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("div",{className:"text-6xl mb-4",children:s.icon}),p.jsx("h2",{className:"text-2xl font-bold text-cyan-400 mb-2",children:s.name}),p.jsx("p",{className:"text-gray-400 mb-4",children:s.description}),s.priceAmount&&s.currency&&p.jsxs("div",{className:"bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-lg p-4 mb-4",children:[p.jsx("div",{className:"text-3xl font-bold text-white",children:b(s.priceAmount,s.currency)}),p.jsx("div",{className:"text-sm text-gray-300",children:"Pago nico"})]})]}),p.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 mb-6",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(vo,{className:"w-5 h-5 text-green-400"}),p.jsx("span",{className:"text-green-400 font-semibold",children:"Pago seguro"})]}),p.jsx("p",{className:"text-sm text-gray-300",children:"Tu pago est protegido por Stripe. No almacenamos informacin de tarjetas de crdito."})]}),i&&p.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:[p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsx("strong",{children:"Cuenta:"})," ",i.displayName||i.email]}),p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsx("strong",{children:"Email:"})," ",i.email]})]}),h&&p.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6",children:p.jsx("p",{className:"text-red-200 text-sm",children:h})}),p.jsx(De,{onClick:w,disabled:o||!i,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:o?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Procesando..."]}):p.jsxs(p.Fragment,{children:[p.jsx(IE,{className:"w-5 h-5"}),"Pagar con Stripe"]})}),p.jsx("div",{className:"mt-4 text-center",children:p.jsx("p",{className:"text-xs text-gray-400",children:"Al continuar, aceptas nuestros trminos de servicio y poltica de privacidad."})})]}),p.jsxs("div",{className:"mt-6 text-center",children:[p.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Mtodos de pago aceptados:"}),p.jsxs("div",{className:"flex justify-center gap-2",children:[p.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Visa"}),p.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Mastercard"}),p.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"American Express"})]})]})]})}):p.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-400",children:"Cargando configuracin de pago..."})]})})},FD=({availablePacks:s,purchasedPacks:e,onPurchase:n,onBack:i,onGoToLogin:o})=>{const{user:c,isAuthenticated:h}=Ea(),[m,g]=te.useState(!1),[_,w]=te.useState(!1),[b,S]=te.useState(!1),[N,j]=te.useState(null),[G,B]=te.useState([]),[ae,re]=te.useState(!1);te.useEffect(()=>{(async()=>{if(c&&h){re(!0);try{const C=await TE(c.uid);B(C)}catch(C){console.error("Error cargando compras del usuario:",C)}finally{re(!1)}}else B([])})()},[c,h]);const se=W=>{const C=s.find(x=>x.id===W);if(C){if(!C.isPremium||C.id==="base"){if(!og()){g(!0),setTimeout(()=>g(!1),3e3);return}n(W);return}if(!og()){g(!0),setTimeout(()=>g(!1),3e3);return}j(C),S(!0)}},ge=async()=>{if(S(!1),j(null),c&&h)try{const W=await TE(c.uid);B(W),N&&W.includes(N.id)&&n(N.id)}catch(W){console.error("Error actualizando compras:",W)}},ue=()=>{S(!1),j(null)};return bb(),p.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in pt-16",children:p.jsxs("div",{className:"w-full max-w-2xl",children:[p.jsxs("div",{className:"relative text-center mb-8",children:[p.jsx("button",{onClick:i,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:p.jsx(RE,{className:"w-8 h-8"})}),p.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Tienda de Paquetes"}),p.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(wS,{className:"w-4 h-4"}),c?p.jsx("span",{className:`${h?"text-green-400":"text-yellow-400"}`,children:h?`Conectado como ${c.displayName||c.email}`:"Usuario annimo - Inicia sesin para comprar"}):p.jsx("span",{className:"text-gray-400",children:"No conectado"})]}),c&&h&&p.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:p.jsx("a",{href:"https://verdad-reto.es.eu.org/delete-account.html",target:"_blank",rel:"noopener noreferrer",className:"hover:text-red-400 transition-colors",children:"Eliminar cuenta"})})]})]}),m&&p.jsxs("div",{className:"mb-6 p-4 bg-yellow-500/20 border border-yellow-500 rounded-lg text-center",children:[p.jsx("p",{className:"text-yellow-100 mb-2",children:"Necesitas iniciar sesin y verificar tu email para comprar packs premium"}),o&&p.jsx(De,{onClick:o,className:"bg-yellow-600 hover:bg-yellow-700",children:"Ir a Iniciar Sesin"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(W=>{const C=e.includes(W.id),x=G.includes(W.id),I=C||x,P=W.id==="base",M=W.isPremium&&!P,k=M&&!I;return p.jsxs(Rn,{className:`flex flex-col text-center border-2 transition-all ${I?"border-green-500/50":k?"border-yellow-500/50 opacity-75":"border-transparent hover:border-pink-500/50"}`,children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"text-5xl mb-4",children:W.icon}),k&&p.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-500 rounded-full p-1",children:p.jsx(vo,{className:"w-4 h-4 text-black"})})]}),p.jsx("h2",{className:`text-2xl font-bold ${I?"text-green-400":k?"text-yellow-400":"text-cyan-400"}`,children:W.name}),p.jsx("p",{className:"text-gray-400 mt-2 mb-2 flex-grow",children:W.description}),M&&W.priceAmount&&W.currency&&p.jsxs("div",{className:"mb-4",children:[W.hasDiscount&&W.originalPriceAmount?p.jsxs("div",{className:"space-y-1",children:[p.jsx("div",{className:"text-sm text-gray-500 line-through",children:new Intl.NumberFormat("es-ES",{style:"currency",currency:W.currency.toUpperCase()}).format(W.originalPriceAmount/100)}),p.jsx("div",{className:`text-lg font-bold ${I?"text-green-400":"text-red-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:W.currency.toUpperCase()}).format(W.priceAmount/100)}),p.jsx("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:W.discountPercentage?`-${W.discountPercentage}%`:`-${new Intl.NumberFormat("es-ES",{style:"currency",currency:W.currency.toUpperCase()}).format((W.originalPriceAmount-W.priceAmount)/100)}`}),W.discountReason&&p.jsx("div",{className:"text-xs text-yellow-400 italic",children:W.discountReason})]}):p.jsx("div",{className:`text-lg font-bold ${I?"text-green-400":"text-yellow-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:W.currency.toUpperCase()}).format(W.priceAmount/100)}),p.jsx("div",{className:"text-xs text-gray-500",children:"Pago nico"})]}),I?p.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-green-700 text-green-200",children:" Comprado"}):P?p.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-blue-700 text-blue-200",children:"Incluido"}):M?p.jsx(De,{onClick:()=>se(W.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",disabled:ae,children:ae?p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):p.jsxs(p.Fragment,{children:[p.jsx(IE,{className:"w-4 h-4"}),"Comprar ",W.price]})}):p.jsxs(De,{onClick:()=>se(W.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2",children:[p.jsx(vo,{className:"w-4 h-4"}),"Desbloquear (",W.price,")"]})]},W.id)})}),_&&p.jsx(BD,{onClose:()=>w(!1)}),b&&N&&p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:p.jsx("div",{className:"w-full h-full",children:p.jsx(HD,{pack:N,onBack:ue,onSuccess:ge})})})]})})},GD=s=>{var n;if(!s.hasDiscount||!s.priceAmount)return s;if(s.discountValidUntil&&new Date>s.discountValidUntil)return{...s,hasDiscount:!1};let e=s.priceAmount;return s.discountPercentage?e=s.priceAmount*(1-s.discountPercentage/100):s.discountAmount&&(e=s.priceAmount-s.discountAmount),e=Math.max(0,Math.round(e)),{...s,originalPriceAmount:s.priceAmount,priceAmount:e,price:new Intl.NumberFormat("es-ES",{style:"currency",currency:((n=s.currency)==null?void 0:n.toUpperCase())||"EUR"}).format(e/100)}},gp=async()=>{try{const s=et(Pe,"packs"),e=await pt(s);return e.empty?(console.warn("No packs found in Firebase database"),[]):e.docs.map(o=>{const c=o.data();return{id:o.id,name:c.name,description:c.description,price:c.price,icon:c.icon,isActive:c.isActive??!0,priceAmount:c.priceAmount,currency:c.currency,isPremium:c.isPremium??!1,stripeProductId:c.stripeProductId,stripePriceId:c.stripePriceId,hasDiscount:c.hasDiscount??!1,discountPercentage:c.discountPercentage,discountAmount:c.discountAmount,discountReason:c.discountReason,discountValidUntil:c.discountValidUntil?c.discountValidUntil.toDate():void 0,originalPriceAmount:c.originalPriceAmount,allowDemo:c.allowDemo??!1,demoPlaysCount:c.demoPlaysCount??0}}).filter(o=>o.isActive).map(o=>GD(o))}catch(s){throw console.error("Error connecting to Firebase:",s),new Error("No se pudo conectar a la base de datos. Verifica tu conexin a internet.")}},QD=async s=>{try{if(!s||s.length===0)return console.warn("No categories provided for questions query"),[];const e=et(Pe,"gameItems"),n=Tt(e,Xe("type","==","question"),Xe("category","in",s)),i=await pt(n);return i.empty?(console.warn("No questions found in Firebase database for categories:",s),[]):i.docs.map(c=>{const h=c.data();return{text:h.text,category:h.category}})}catch(e){throw console.error("Error fetching questions from Firebase:",e),new Error("No se pudieron cargar las preguntas. Verifica tu conexin a internet.")}},KD=async s=>{try{if(!s||s.length===0)return console.warn("No categories provided for dares query"),[];const e=et(Pe,"gameItems"),n=Tt(e,Xe("type","==","dare"),Xe("category","in",s)),i=await pt(n);return i.empty?(console.warn("No dares found in Firebase database for categories:",s),[]):i.docs.map(c=>{const h=c.data();return{text:h.text,category:h.category}})}catch(e){throw console.error("Error fetching dares from Firebase:",e),new Error("No se pudieron cargar los retos. Verifica tu conexin a internet.")}},YD=async s=>{try{if(!s||s.length===0)return console.warn("No pack IDs provided for categories query"),[];const e=et(Pe,"gameItems"),n=Tt(e,Xe("packId","in",s)),i=await pt(n);return i.empty?(console.warn("No categories found in Firebase database for packs:",s),[]):[...new Set(i.docs.map(c=>c.data().category))]}catch(e){throw console.error("Error fetching categories from Firebase:",e),new Error("No se pudieron cargar las categoras. Verifica tu conexin a internet.")}},XD=async s=>{try{if(!s||s.length===0)return console.warn("No pack IDs provided for game data query"),{questions:[],dares:[],categories:[]};const e=await YD(s),[n,i]=await Promise.all([QD(e),KD(e)]);if(wc()&&(n.length>0||i.length>0)){const o=[...n,...i],c=s.reduce((h,m)=>{const g=o.filter(w=>w.packId===m),_=e.filter(w=>g.some(b=>b.category===w));return g.length>0&&(h[m]={items:g,categories:_}),h},{});for(const[h,m]of Object.entries(c)){const _=(await gp()).find(w=>w.id===h);_&&await wD(_,m.items,m.categories)}}return{questions:n,dares:i,categories:e}}catch(e){console.error("Error fetching game data from Firebase:",e);const n=TD(s);if(n){console.log("Using cached game data for offline play");const i=n.items.filter(c=>!("type"in c)||c.type==="question"),o=n.items.filter(c=>"type"in c&&c.type==="dare");return{questions:i,dares:o,categories:n.categories}}throw wc()?new Error("No hay conexin a internet y no tienes datos guardados para estos packs."):new Error("No hay conexin a internet y no tienes packs guardados localmente. Deseas activar el almacenamiento local para jugar sin conexin?")}},$D=async s=>{try{const e=et(Pe,"gameItems"),n=Tt(e,Xe("packId","==",s),Xe("isDemo","==",!0)),o=(await pt(n)).docs.map(g=>({id:g.id,...g.data()})),c=o.filter(g=>g.type==="question").map(g=>({text:g.text,category:g.category,isDemo:!0,packId:g.packId})),h=o.filter(g=>g.type==="dare").map(g=>({text:g.text,category:g.category,isDemo:!0,packId:g.packId})),m=[...new Set(o.map(g=>g.category))];return{questions:c,dares:h,categories:m}}catch(e){return console.error("Error fetching demo data:",e),{questions:[],dares:[],categories:[]}}},WD=async(s,e)=>{try{const n={packId:s,userId:e||"anonymous",timestamp:new Date,type:"demo_play"};await Mc(et(Pe,"demoLogs"),n);const i=et(Pe,"packs"),o=En(i,s),c=await Cs(o);if(c.exists()){const h=c.data().demoPlaysCount||0;await Zg(o,{demoPlaysCount:h+1})}console.log("Demo play logged successfully")}catch(n){console.error("Error logging demo play:",n)}},Nb=async(s,e)=>{try{if(!s||s.trim().length===0)return{isValid:!1,error:"El cdigo de referido no puede estar vaco"};const n=hb(s);if(!n.isValid)return{isValid:!1,error:n.error||"El cdigo de referido no es vlido"};const i=n.sanitizedCode,o=et(Pe,"userReferralCodes"),c=Tt(o,Xe("referralCode","==",i)),h=await pt(c);if(h.empty)return{isValid:!1,error:"Cdigo de referido no vlido"};const m=h.docs[0],g=m.data(),_=m.id;if(_===e)return{isValid:!1,error:"No puedes usar tu propio cdigo de referido"};const w=await Cs(En(Pe,"users",e));if(w.exists()&&w.data().usedReferralCode)return{isValid:!1,error:"Ya has usado un cdigo de referido anteriormente"};const b=new Date,S=new Date(b.getTime()-3600*1e3),N=et(Pe,"referrals"),j=Tt(N,Xe("referrerUid","==",_),Xe("createdAt",">=",S));if((await pt(j)).size>=5)return{isValid:!1,message:"Lmite de referidos por hora excedido. Intenta ms tarde."};const B=new Date(b.getTime()-1440*60*1e3),ae=Tt(N,Xe("referrerUid","==",_),Xe("createdAt",">=",B));return(await pt(ae)).size>=20?{isValid:!1,message:"Lmite diario de referidos excedido. Intenta maana."}:{isValid:!0,referrerName:g.displayName||g.email||"Usuario"}}catch(n){return console.error("Error validating referral code:",n),{isValid:!1,error:"Error al validar el cdigo de referido"}}},ZD=async(s,e)=>{try{return await bN(Pe,async n=>{var ge;const i=et(Pe,"userReferralCodes"),o=Tt(i,Xe("referralCode","==",s.toUpperCase())),c=await pt(o);if(c.empty)throw new Error("Cdigo de referido no vlido");const h=c.docs[0],m=En(Pe,"users",h.id),g=En(Pe,"users",e),_=await n.get(g);if(_.exists()&&_.data().usedReferralCode)throw new Error("Ya has usado un cdigo de referido");if(h.id===e)throw new Error("No puedes usar tu propio cdigo");const w=new Date,b=_.data(),S=((ge=b==null?void 0:b.createdAt)==null?void 0:ge.toDate())||new Date,N=new Date(w.getTime()-300*1e3);if(S>N)throw new Error("Usuario muy reciente, posible abuso");const j=b==null?void 0:b.lastKnownIP,G=h.data(),B=G==null?void 0:G.lastKnownIP;j&&B&&j===B&&console.warn("Posible abuso: misma IP para referrer y referido");const ae=b==null?void 0:b.deviceId,re=G==null?void 0:G.deviceId;if(ae&&re&&ae===re)throw new Error("No se puede usar el mismo dispositivo para referir");n.update(m,{referralCount:AT(1)}),n.update(g,{usedReferralCode:s.toUpperCase(),referredBy:h.id,referralProcessedAt:w});const se=En(et(Pe,"referrals"));return n.set(se,{referrerId:h.id,referredUserId:e,referralCode:s.toUpperCase(),createdAt:w,status:"completed",referrerIP:B||null,referredUserIP:j||null,sameIP:j&&B?j===B:!1,userAccountAge:w.getTime()-S.getTime()}),!0})}catch(n){return console.error("Error processing referral:",n),!1}},JD=async s=>{try{const e=await Cs(En(Pe,"users",s));if(!e.exists())return null;const n=e.data(),i=et(Pe,"referrals"),o=Tt(i,Xe("referrerId","==",s)),c=await pt(o),h=[];return c.forEach(m=>{var _;const g=m.data();h.push({id:g.referredUserId,name:`Usuario ${g.referredUserId.substring(0,8)}...`,joinedAt:((_=g.createdAt)==null?void 0:_.toDate())||new Date})}),{referralCode:n.referralCode||"",referralCount:n.referralCount||0,usedReferralCode:n.usedReferralCode||null,referredBy:n.referredBy||null,referredUsers:h}}catch(e){return console.error("Error getting user referral data:",e),null}},eO=async s=>{try{const e=await Cs(En(Pe,"users",s));if(!e.exists())return[];const i=e.data().referralCount||0,o=et(Pe,"packs"),c=Tt(o,Xe("isReferralUnlockable","==",!0)),h=await pt(c),m=[];return h.forEach(g=>{const w=g.data().requiredReferrals||0;i>=w&&m.push(g.id)}),m}catch(e){return console.error("Error checking referral pack unlocks:",e),[]}},tO=async s=>{try{const e=et(Pe,"suggestions"),n=Tt(e,Xe("authorId","==",s),Xe("status","==","accepted")),o=(await pt(n)).size,c=et(Pe,"packs"),h=Tt(c,Xe("isSuggestionUnlockable","==",!0)),m=await pt(h),g=[];return m.forEach(_=>{const b=_.data().requiredApprovedSuggestions||0;o>=b&&g.push(_.id)}),g}catch(e){return console.error("Error checking suggestion pack unlocks:",e),[]}},bE=async(s,e)=>{try{const n=En(Pe,"userQuestionChangeStats",s);(await Cs(n)).exists()?await Zg(n,{totalChanges:AT(1),adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,updatedAt:new Date}):await qd(n,{userId:s,totalChanges:e.totalChanges,adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,createdAt:new Date,updatedAt:new Date}),console.log("Question change stats saved successfully")}catch(n){console.error("Error saving question change stats:",n)}},Cb=async s=>{try{const e=et(Pe,"suggestions"),n=Tt(e,Xe("userId","==",s),Xe("status","==","accepted"));return(await pt(n)).size}catch(e){return console.error("Error getting user accepted suggestions count:",e),0}},nO=({onBack:s,onSuccess:e})=>{const[n,i]=te.useState("login"),[o,c]=te.useState(""),[h,m]=te.useState(""),[g,_]=te.useState(""),[w,b]=te.useState(""),[S,N]=te.useState(""),[j,G]=te.useState(null),[B,ae]=te.useState(!1),[re,se]=te.useState(!1),[ge,ue]=te.useState(""),[W,C]=te.useState(""),{refreshUser:x,user:I}=Ea(),P=async()=>{se(!0),ue("");try{const Y=n==="register"&&S&&(j!=null&&j.isValid)?S:void 0;await fb(Y),x(),e()}catch(Y){ue(Y.message)}finally{se(!1)}},M=async()=>{se(!0),ue("");try{await pb(),x(),e()}catch(Y){ue(Y.message)}finally{se(!1)}},k=async Y=>{Y.preventDefault(),se(!0),ue(""),C("");try{if(n==="login"){const pe=await mb(o,h);if(x(),!pe.emailVerified){C("Tu email no est verificado. Revisa tu bandeja de entrada o reenva la verificacin.");return}e()}else if(n==="register"){if(h!==g)throw new Error("Las contraseas no coinciden");const pe=S&&(j!=null&&j.isValid)?S:void 0;await gb(o,h,w,pe),C("Cuenta creada exitosamente. Revisa tu email para verificar tu cuenta antes de poder comprar packs premium."),i("login")}else n==="forgot-password"&&(await _b(o),C("Email de restablecimiento enviado. Revisa tu bandeja de entrada."),i("login"))}catch(pe){ue(pe.message)}finally{se(!1)}},R=async()=>{se(!0),ue("");try{await vb(),C("Email de verificacin reenviado.")}catch(Y){ue(Y.message)}finally{se(!1)}},Ie=()=>{c(""),m(""),_(""),b(""),N(""),G(null),ue(""),C("")},Oe=async Y=>{if(!Y.trim()){G(null);return}ae(!0);try{const pe="temp-"+Date.now(),O=await Nb(Y,pe);G({isValid:O.isValid,message:O.isValid?`Cdigo vlido de ${O.referrerName}`:O.error||"Cdigo no vlido"})}catch{G({isValid:!1,message:"Error al validar cdigo"})}finally{ae(!1)}},Q=Y=>{N(Y.toUpperCase()),Y.trim().length>=6?Oe(Y):G(null)},ie=Y=>{i(Y),Ie()};return p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:p.jsxs(Rn,{className:"w-full max-w-md p-8 space-y-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:n==="login"?"Iniciar Sesin":n==="register"?"Crear Cuenta":"Recuperar Contrasea"}),p.jsx("p",{className:"text-white/80",children:n==="login"?"Accede a tu cuenta para comprar packs premium":n==="register"?"Crea una cuenta para acceder a contenido premium":"Ingresa tu email para recuperar tu contrasea"})]}),ge&&p.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:ge}),W&&p.jsxs("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:[p.jsx("p",{children:W}),W.includes("no est verificado")&&p.jsx(De,{onClick:R,disabled:re,className:"mt-2 bg-green-600 hover:bg-green-700 text-sm",children:"Reenviar verificacin"})]}),p.jsxs("form",{onSubmit:k,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Email"}),p.jsx("input",{type:"email",value:o,onChange:Y=>c(Y.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"tu@email.com",required:!0})]}),n!=="forgot-password"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Contrasea"}),p.jsx("input",{type:"password",value:h,onChange:Y=>m(Y.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"",required:!0,minLength:6})]}),n==="register"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Confirmar Contrasea"}),p.jsx("input",{type:"password",value:g,onChange:Y=>_(Y.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"",required:!0,minLength:6})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Nombre (opcional)"}),p.jsx("input",{type:"text",value:w,onChange:Y=>b(Y.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"Tu nombre"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Cdigo de Referido (opcional)"}),p.jsx("input",{type:"text",value:S,onChange:Y=>Q(Y.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${j===null?"border-white/20 focus:ring-white/50":j.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ej: ABC123",maxLength:8}),B&&p.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando cdigo..."}),j&&p.jsx("p",{className:`text-sm mt-1 ${j.isValid?"text-green-400":"text-red-400"}`,children:j.message})]})]}),p.jsx(De,{type:"submit",disabled:re,className:"w-full",children:re?"Cargando...":n==="login"?"Iniciar Sesin":n==="register"?"Crear Cuenta":"Enviar Email"})]}),n!=="forgot-password"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-white/20"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-2 bg-transparent text-white/60",children:"o"})})]}),p.jsxs(De,{onClick:P,disabled:re,className:"w-full bg-white text-gray-900 hover:bg-gray-100 flex items-center justify-center",children:[p.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar con Google"]})]}),p.jsxs("div",{className:"text-center space-y-2",children:[n==="login"&&p.jsxs(p.Fragment,{children:[p.jsx("button",{type:"button",onClick:()=>ie("forgot-password"),className:"text-white/80 hover:text-white text-sm underline",children:"Olvidaste tu contrasea?"}),p.jsxs("div",{children:[p.jsx("span",{className:"text-white/60 text-sm",children:"No tienes cuenta? "}),p.jsx("button",{type:"button",onClick:()=>ie("register"),className:"text-white hover:text-white/80 text-sm underline",children:"Regstrate"})]})]}),n==="register"&&p.jsxs("div",{children:[p.jsx("span",{className:"text-white/60 text-sm",children:"Ya tienes cuenta? "}),p.jsx("button",{type:"button",onClick:()=>ie("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Inicia sesin"})]}),n==="forgot-password"&&p.jsx("button",{type:"button",onClick:()=>ie("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Volver al inicio de sesin"})]}),p.jsxs("div",{className:"border-t border-white/20 pt-4",children:[p.jsx(De,{onClick:M,disabled:re,className:"w-full bg-white/10 hover:bg-white/20 text-white border border-white/20",children:"Continuar sin cuenta"}),p.jsx("p",{className:"text-white/60 text-xs text-center mt-2",children:"Podrs jugar pero no comprar packs premium"})]}),p.jsx("div",{className:"text-center",children:p.jsx(De,{onClick:s,className:"text-white/80 hover:text-white bg-transparent",children:" Volver"})})]})})},Tc="suggestions",rO=async(s,e,n)=>{try{const i=new Date;if(!await Ob(e))throw new Error("Has alcanzado el lmite de sugerencias permitidas");const c=await Db(e,s.title,s.content);if(!c.isValid)throw new Error(c.error||"Contenido no vlido");const h={type:s.type,authorUid:e,authorName:n,title:s.title,content:s.content,targetPackId:s.targetPackId,status:nc.Pending,createdAt:i,updatedAt:i};if(s.targetPackId){const g=await Cs(En(Pe,"packs",s.targetPackId));g.exists()&&(h.targetPackName=g.data().name)}return(await Mc(et(Pe,Tc),{...h,createdAt:Ke.fromDate(h.createdAt),updatedAt:Ke.fromDate(h.updatedAt)})).id}catch(i){throw console.error("Error creating suggestion:",i),i}},sO=["spam","test","prueba","asdf","qwerty","123","abc"],AE=s=>{const e=s.toLowerCase();return sO.some(n=>e.includes(n.toLowerCase()))},iO=async(s,e,n)=>{try{const i=Tt(et(Pe,Tc),Xe("authorUid","==",s),zd("createdAt","desc"),wT(10)),o=await pt(i);for(const c of o.docs){const h=c.data();if(h.title===e||h.content===n)return!0;const m=SE(e,h.title),g=SE(n,h.content);if(m>.8||g>.8)return!0}return!1}catch(i){return console.error("Error checking duplicate content:",i),!1}},SE=(s,e)=>{const n=s.toLowerCase().split(/\s+/),i=e.toLowerCase().split(/\s+/),o=new Set(n),c=new Set(i),h=new Set([...o].filter(g=>c.has(g))),m=new Set([...o,...c]);return h.size/m.size},Db=async(s,e,n)=>e.length<gt.MIN_TITLE_LENGTH?{isValid:!1,error:`El ttulo debe tener al menos ${gt.MIN_TITLE_LENGTH} caracteres`}:e.length>gt.MAX_TITLE_LENGTH?{isValid:!1,error:`El ttulo no puede exceder ${gt.MAX_TITLE_LENGTH} caracteres`}:n.length<gt.MIN_CONTENT_LENGTH?{isValid:!1,error:`El contenido debe tener al menos ${gt.MIN_CONTENT_LENGTH} caracteres`}:n.length>gt.MAX_CONTENT_LENGTH?{isValid:!1,error:`El contenido no puede exceder ${gt.MAX_CONTENT_LENGTH} caracteres`}:AE(e)||AE(n)?{isValid:!1,error:"El contenido contiene palabras no permitidas"}:await iO(s,e,n)?{isValid:!1,error:"Ya has enviado una sugerencia similar recientemente"}:{isValid:!0},Ob=async s=>{try{const e=new Date,n=new Date(e.getTime()-1440*60*1e3),i=new Date(e.getTime()-10080*60*1e3),o=Tt(et(Pe,Tc),Xe("authorUid","==",s),Xe("createdAt",">=",Ke.fromDate(n)));if((await pt(o)).size>=gt.MAX_SUGGESTIONS_PER_DAY)return!1;const h=Tt(et(Pe,Tc),Xe("authorUid","==",s),Xe("createdAt",">=",Ke.fromDate(i)));return!((await pt(h)).size>=gt.MAX_SUGGESTIONS_PER_WEEK)}catch(e){return console.error("Error checking suggestion limits:",e),!1}},aO=async s=>{try{const e=await Pb(s),n={total:e.length,pending:0,approved:0,rejected:0};return e.forEach(i=>{switch(i.status){case nc.Pending:n.pending++;break;case nc.Approved:n.approved++;break;case nc.Rejected:n.rejected++;break}}),n}catch(e){throw console.error("Error getting user suggestion stats:",e),e}},Pb=async s=>{try{const e=Tt(et(Pe,Tc),Xe("authorUid","==",s),zd("createdAt","desc"));return(await pt(e)).docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt.toDate(),updatedAt:i.data().updatedAt.toDate()}))}catch(e){throw console.error("Error getting user suggestions:",e),e}},Mb=({onClose:s,onSuccess:e})=>{const{user:n}=Ea(),[i,o]=te.useState({type:er.Pack,title:"",content:"",targetPackId:void 0}),[c,h]=te.useState([]),[m,g]=te.useState(!1),[_,w]=te.useState(null),[b,S]=te.useState(!0),[N,j]=te.useState(0);te.useEffect(()=>{G(),B(),ae()},[n]);const G=async()=>{try{const W=await gp();h(W)}catch(W){console.error("Error loading packs:",W)}},B=async()=>{if(n)try{const W=await Ob(n.uid);S(W),W||w("Has alcanzado el lmite de sugerencias permitidas. Intenta ms tarde.")}catch(W){console.error("Error checking user limits:",W)}},ae=async()=>{if(n)try{const W=await Cb(n.uid);j(W)}catch(W){console.error("Error loading accepted suggestions count:",W)}},re=W=>{o(C=>({...C,type:W,targetPackId:W===er.Pack?void 0:C.targetPackId}))},se=async W=>{if(W.preventDefault(),!(!n||!b)){if(i.title.length<gt.MIN_TITLE_LENGTH){w(`El ttulo debe tener al menos ${gt.MIN_TITLE_LENGTH} caracteres`);return}if(i.title.length>gt.MAX_TITLE_LENGTH){w(`El ttulo no puede exceder ${gt.MAX_TITLE_LENGTH} caracteres`);return}if(i.content.length<gt.MIN_CONTENT_LENGTH){w(`El contenido debe tener al menos ${gt.MIN_CONTENT_LENGTH} caracteres`);return}if(i.content.length>gt.MAX_CONTENT_LENGTH){w(`El contenido no puede exceder ${gt.MAX_CONTENT_LENGTH} caracteres`);return}if(i.type!==er.Pack&&!i.targetPackId){w("Debes seleccionar un pack para preguntas y retos");return}g(!0),w(null);try{const C=await Db(n.uid,i.title,i.content);if(!C.isValid){w(C.error||"Contenido no vlido"),g(!1);return}await rO(i,n.uid,n.displayName||"Usuario annimo"),e(),s()}catch(C){w(C.message||"Error al enviar la sugerencia")}finally{g(!1)}}},ge=W=>{switch(W){case er.Pack:return"Pack nuevo";case er.Question:return"Pregunta";case er.Dare:return"Reto";default:return W}},ue=()=>{switch(i.type){case er.Pack:return"Describe tu idea para un nuevo pack: temtica, tipo de preguntas/retos, etc.";case er.Question:return"Escribe tu pregunta aqu...";case er.Dare:return"Describe el reto que propones...";default:return"Describe tu sugerencia..."}};return n?p.jsx("div",{className:"suggestion-form-overlay",children:p.jsxs("div",{className:"suggestion-form",children:[p.jsxs("div",{className:"suggestion-form-header",children:[p.jsxs("div",{children:[p.jsx("h2",{children:"Enviar Sugerencia"}),p.jsxs("p",{className:"accepted-count",children:["Sugerencias aprobadas: ",p.jsx("strong",{children:N})]})]}),p.jsx("button",{className:"close-button",onClick:s,children:""})]}),p.jsxs("form",{onSubmit:se,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Tipo de sugerencia:"}),p.jsx("div",{className:"type-selector",children:Object.values(er).map(W=>p.jsx("button",{type:"button",className:`type-button ${i.type===W?"active":""}`,onClick:()=>re(W),children:ge(W)},W))})]}),i.type!==er.Pack&&p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"targetPack",children:"Pack de destino:"}),p.jsxs("select",{id:"targetPack",value:i.targetPackId||"",onChange:W=>o(C=>({...C,targetPackId:W.target.value||void 0})),required:!0,children:[p.jsx("option",{value:"",children:"Selecciona un pack"}),c.map(W=>p.jsx("option",{value:W.id,children:W.name},W.id))]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"title",children:"Ttulo:"}),p.jsx("input",{type:"text",id:"title",value:i.title,onChange:W=>o(C=>({...C,title:W.target.value})),placeholder:`Ttulo de tu ${ge(i.type).toLowerCase()}`,maxLength:gt.MAX_TITLE_LENGTH,required:!0}),p.jsxs("small",{children:[i.title.length,"/",gt.MAX_TITLE_LENGTH," caracteres"]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"content",children:"Descripcin:"}),p.jsx("textarea",{id:"content",value:i.content,onChange:W=>o(C=>({...C,content:W.target.value})),placeholder:ue(),maxLength:gt.MAX_CONTENT_LENGTH,rows:6,required:!0}),p.jsxs("small",{children:[i.content.length,"/",gt.MAX_CONTENT_LENGTH," caracteres"]})]}),_&&p.jsx("div",{className:"error-message",children:_}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",className:"cancel-button",onClick:s,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"submit-button",disabled:m||!b,children:m?"Enviando...":"Enviar Sugerencia"})]})]}),p.jsxs("div",{className:"suggestion-info",children:[p.jsx("h4",{children:"Informacin importante:"}),p.jsxs("ul",{children:[p.jsxs("li",{children:["Mximo ",gt.MAX_SUGGESTIONS_PER_DAY," sugerencias por da"]}),p.jsxs("li",{children:["Mximo ",gt.MAX_SUGGESTIONS_PER_WEEK," sugerencias por semana"]}),p.jsx("li",{children:"No podrs editar ni eliminar tu sugerencia una vez enviada"}),p.jsx("li",{children:"Recibirs notificaciones sobre el estado de tu sugerencia"})]})]})]})}):p.jsx("div",{className:"suggestion-form-overlay",children:p.jsxs("div",{className:"suggestion-form",children:[p.jsxs("div",{className:"suggestion-form-header",children:[p.jsx("h2",{children:"Iniciar sesin requerido"}),p.jsx("button",{className:"close-button",onClick:s,children:""})]}),p.jsx("p",{children:"Debes iniciar sesin para enviar sugerencias."}),p.jsx("button",{className:"cancel-button",onClick:s,children:"Cerrar"})]})})},oO="incidents",lO=async s=>{try{return(await Mc(et(Pe,oO),{...s,timestamp:Ke.fromDate(s.timestamp)})).id}catch(e){throw console.error("Error al reportar incidencia:",e),new Error("No se pudo reportar la incidencia")}},Vb=({onClose:s})=>{const[e,n]=te.useState(""),[i,o]=te.useState(!1),[c,h]=te.useState(!1),{user:m}=Ea(),g=async _=>{if(_.preventDefault(),!!e.trim()){o(!0);try{await lO({userId:(m==null?void 0:m.uid)||"anonymous",userEmail:(m==null?void 0:m.email)||"Usuario annimo",description:e.trim(),timestamp:new Date,status:"pending"}),h(!0)}catch(w){console.error("Error al reportar incidencia:",w),alert("Error al enviar el reporte. Por favor, intntalo de nuevo.")}finally{o(!1)}}};return c?p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-green-600",children:"Gracias!"}),p.jsx("p",{className:"text-gray-700 mb-6",children:"Muchas gracias por reportar la incidencia. El equipo de desarrollo la revisar y se pondr con ello."}),p.jsx(De,{onClick:s,className:"w-full bg-blue-500 hover:bg-blue-600 text-white",children:"Cerrar"})]})}):p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900",children:"Reportar Incidencia"}),p.jsxs("form",{onSubmit:g,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-black mb-2",children:"Describe la incidencia:"}),p.jsx("textarea",{id:"description",value:e,onChange:_=>n(_.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 placeholder-gray-500",rows:4,placeholder:"Describe el problema que has encontrado...",required:!0,disabled:i})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx(De,{type:"button",onClick:s,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white",disabled:i,children:"Cancelar"}),p.jsx(De,{type:"submit",className:"flex-1 bg-red-500 hover:bg-red-600 text-white",disabled:i||!e.trim(),children:i?"Enviando...":"Reportar"})]})]})]})})},cO=({onBack:s})=>{const{user:e}=Ea(),[n,i]=te.useState(null),[o,c]=te.useState(""),[h,m]=te.useState(null),[g,_]=te.useState(!1),[w,b]=te.useState(!1),[S,N]=te.useState(!0),[j,G]=te.useState(""),[B,ae]=te.useState(""),[re,se]=te.useState(0),[ge,ue]=te.useState(!1),[W,C]=te.useState(!1),[x,I]=te.useState(null),[P,M]=te.useState([]);te.useEffect(()=>{k()},[e]);const k=async()=>{if(e!=null&&e.uid){N(!0);try{const[Y,pe,O,Z]=await Promise.all([JD(e.uid),Cb(e.uid),aO(e.uid),Pb(e.uid)]);i(Y),se(pe),I(O),M(Z)}catch(Y){console.error("Error loading user data:",Y),G("Error al cargar datos del usuario")}finally{N(!1)}}},R=async Y=>{if(!Y.trim()){m(null);return}if(!(e!=null&&e.uid)){m({isValid:!1,message:"Error de autenticacin"});return}_(!0);try{const pe=await Nb(Y,e.uid);m({isValid:pe.isValid,message:pe.isValid?`Cdigo vlido de ${pe.referrerName}`:pe.error||"Cdigo no vlido"})}catch{m({isValid:!1,message:"Error al validar cdigo"})}finally{_(!1)}},Ie=Y=>{c(Y.toUpperCase()),Y.trim().length>=6?R(Y):m(null)},Oe=async()=>{if(!(!(e!=null&&e.uid)||!o||!(h!=null&&h.isValid))){b(!0),G(""),ae("");try{await ZD(o,e.uid)?(ae("Cdigo de referido aplicado exitosamente!"),c(""),m(null),await k()):G("Error al procesar el cdigo de referido")}catch{G("Error al procesar el cdigo de referido")}finally{b(!1)}}},Q=async()=>{if(n!=null&&n.referralCode)try{await navigator.clipboard.writeText(n.referralCode),ae("Cdigo copiado al portapapeles!"),setTimeout(()=>ae(""),3e3)}catch{G("Error al copiar el cdigo")}},ie=async()=>{try{await yb()}catch{G("Error al cerrar sesin")}};return S?p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:p.jsx(Rn,{className:"w-full max-w-2xl p-8",children:p.jsxs("div",{className:"text-center text-white",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),p.jsx("p",{children:"Cargando perfil..."})]})})}):p.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:[p.jsxs(Rn,{className:"w-full max-w-2xl p-8 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h1",{className:"text-3xl font-bold text-white",children:"Mi Perfil"}),p.jsx(De,{onClick:s,className:"bg-white/20 hover:bg-white/30 text-white",children:"Volver"})]}),j&&p.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:j}),B&&p.jsx("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:B}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h2",{className:"text-xl font-semibold text-white",children:"Informacin Personal"}),p.jsx(De,{onClick:ie,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2",children:"Cerrar Sesin"})]}),p.jsxs("div",{className:"space-y-2 text-white/80",children:[p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Email:"})," ",e==null?void 0:e.email]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Nombre:"})," ",(e==null?void 0:e.displayName)||"No especificado"]})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mi Cdigo de Referido"}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("div",{className:"flex-1",children:p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Tu cdigo:"}),p.jsx("p",{className:"text-2xl font-bold text-white tracking-wider",children:(n==null?void 0:n.referralCode)||"Cargando..."})]})}),p.jsx(De,{onClick:Q,className:"bg-blue-600 hover:bg-blue-700",disabled:!(n!=null&&n.referralCode),children:"Copiar"})]}),p.jsx("p",{className:"text-white/60 text-sm mt-2",children:"Comparte este cdigo con tus amigos para ganar referidos"})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mis Estadsticas"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-3xl font-bold text-white",children:(n==null?void 0:n.referralCount)||0}),p.jsx("p",{className:"text-white/60 text-sm",children:"Total de referidos"})]}),p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-3xl font-bold text-green-400",children:re}),p.jsx("p",{className:"text-white/60 text-sm",children:"Sugerencias aceptadas"})]})]}),(n==null?void 0:n.referredUsers)&&n.referredUsers.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Usuarios Referidos"}),p.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:n.referredUsers.map((Y,pe)=>p.jsxs("div",{className:"bg-white/10 rounded p-3 flex justify-between items-center",children:[p.jsx("span",{className:"text-white",children:Y.name}),p.jsx("span",{className:"text-white/60 text-sm",children:Y.joinedAt.toLocaleDateString()})]},Y.id))})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Contribuir con Sugerencias"}),p.jsx("p",{className:"text-white/60 text-sm mb-4",children:"Tienes ideas para nuevos packs, preguntas o retos? Comprtelas con nosotros!"}),p.jsx(De,{onClick:()=>ue(!0),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:" Recomendar Pack/Pregunta/Reto"})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Reportar Problema"}),p.jsx("p",{className:"text-white/60 text-sm mb-4",children:"Encontraste un error o problema en la aplicacin? Reprtalo para que podamos solucionarlo."}),p.jsx(De,{onClick:()=>C(!0),className:"w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:" Reportar Incidencia"})]}),!(n!=null&&n.usedReferralCode)&&p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Usar Cdigo de Referido"}),p.jsx("p",{className:"text-white/60 text-sm mb-4",children:"Tienes un cdigo de referido? salo aqu para ayudar a un amigo."}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("input",{type:"text",value:o,onChange:Y=>Ie(Y.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${h===null?"border-white/20 focus:ring-white/50":h.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ingresa el cdigo de referido",maxLength:8}),g&&p.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando cdigo..."}),h&&p.jsx("p",{className:`text-sm mt-1 ${h.isValid?"text-green-400":"text-red-400"}`,children:h.message})]}),p.jsx(De,{onClick:Oe,disabled:!(h!=null&&h.isValid)||w,className:"w-full bg-green-600 hover:bg-green-700",children:w?"Procesando...":"Usar Cdigo"})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mis Sugerencias"}),x&&p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-white",children:x.total}),p.jsx("p",{className:"text-white/60 text-sm",children:"Total"})]}),p.jsxs("div",{className:"bg-yellow-500/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-yellow-300",children:x.pending}),p.jsx("p",{className:"text-white/60 text-sm",children:"Pendientes"})]}),p.jsxs("div",{className:"bg-green-500/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-green-300",children:x.approved}),p.jsx("p",{className:"text-white/60 text-sm",children:"Aprobadas"})]}),p.jsxs("div",{className:"bg-red-500/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-red-300",children:x.rejected}),p.jsx("p",{className:"text-white/60 text-sm",children:"Rechazadas"})]})]}),P.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Sugerencias Recientes"}),p.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:P.slice(0,5).map(Y=>p.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsx("h4",{className:"font-medium text-white truncate flex-1 mr-2",children:Y.title}),p.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Y.status==="pending"?"bg-yellow-500/20 text-yellow-300":Y.status==="approved"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:Y.status==="pending"?"Pendiente":Y.status==="approved"?"Aprobada":"Rechazada"})]}),p.jsx("p",{className:"text-white/60 text-sm line-clamp-2",children:Y.content}),p.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-white/40",children:[p.jsx("span",{children:Y.type==="question"?"Pregunta":"Reto"}),p.jsx("span",{children:Y.createdAt.toLocaleDateString()})]})]},Y.id))}),P.length>5&&p.jsxs("p",{className:"text-white/60 text-sm mt-3 text-center",children:["Y ",P.length-5," sugerencias ms..."]})]}),P.length===0&&x&&p.jsxs("div",{className:"text-center py-8",children:[p.jsx("p",{className:"text-white/60",children:"An no has realizado ninguna sugerencia"}),p.jsx("p",{className:"text-white/40 text-sm mt-1",children:"Comparte tus ideas para mejorar el juego!"})]})]}),(n==null?void 0:n.usedReferralCode)&&p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Cdigo de Referido Usado"}),p.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[p.jsx("p",{className:"text-white/60 text-sm",children:"Ya has usado el cdigo:"}),p.jsx("p",{className:"text-xl font-bold text-white tracking-wider",children:n.usedReferralCode})]})]})]}),ge&&p.jsx(Mb,{isOpen:ge,onClose:()=>ue(!1)}),W&&p.jsx(Vb,{onClose:()=>C(!1)})]})},uO=()=>{const{user:s}=Ea(),[e,n]=te.useState(Ze.Setup);te.useEffect(()=>{s||n(Ze.Setup),di.setCurrentUser(s),s&&(di.trackSessionStart(),s.isAnonymous||di.trackUserLogin())},[s]);const[i,o]=te.useState([]),[c,h]=te.useState([]),[m,g]=te.useState([]),[_,w]=te.useState(0),[b,S]=te.useState({totalRounds:5}),[N,j]=te.useState({currentRound:1,playersCompletedInRound:0}),[G,B]=te.useState({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),[ae,re]=te.useState({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),[se,ge]=te.useState({isLoading:!0,error:null}),[ue,W]=te.useState([]),[C,x]=te.useState(()=>{try{const he=window.localStorage.getItem("purchasedPacks");return he?JSON.parse(he):[]}catch(he){return console.error("Error reading from localStorage",he),[]}}),[I,P]=te.useState(!1),[M,k]=te.useState(null),[R,Ie]=te.useState(!1),[Oe,Q]=te.useState(null),[ie,Y]=te.useState([]),[pe,O]=te.useState([]),[Z,le]=te.useState([]),[oe,_e]=te.useState({changesCount:0,isAdLoading:!1,isAdPlaying:!1,lastChangedItem:void 0}),[Ce,Ae]=te.useState({totalChanges:0,adsWatched:0,lastChangeDate:void 0}),[It,rt]=te.useState(!1),[zn,nr]=te.useState(!1),[gr,Os]=te.useState(!1),pr=te.useCallback(async he=>{try{const fe=await eO(he);O(fe)}catch(fe){console.error("Error loading referral unlocked packs:",fe),O([])}},[]),yr=te.useCallback(async he=>{try{const fe=await tO(he);le(fe)}catch(fe){console.error("Error loading suggestion unlocked packs:",fe),le([])}},[]);te.useEffect(()=>{(async()=>{try{const fe=await gp();W(fe)}catch(fe){console.error("Error loading available packs:",fe)}})()},[]),te.useEffect(()=>{try{window.localStorage.setItem("purchasedPacks",JSON.stringify(C))}catch(he){console.error("Error writing to localStorage",he)}},[C,pe,Z]);const Fr=te.useCallback(async()=>{ge({isLoading:!0,error:null});try{const he=["base",...C.filter(ct=>ct!=="base"),...pe.filter(ct=>ct!=="base"&&!C.includes(ct)),...Z.filter(ct=>ct!=="base"&&!C.includes(ct)&&!pe.includes(ct))],fe=await XD(he);h(fe.questions),g(fe.dares),ge({isLoading:!1,error:null})}catch(he){console.error("Error loading game data:",he),ge({isLoading:!1,error:he instanceof Error?he.message:"Error desconocido"})}},[C,Z]);te.useEffect(()=>{Fr()},[Fr]);const wa=()=>{if(i.length<2){alert("Se necesitan al menos 2 jugadores para empezar.");return}n(Ze.PackSelection)},wn=()=>{n(Ze.RoundConfiguration)},Ho=()=>{n(Ze.Setup)},Ni=()=>{n(Ze.Shop)},Gr=()=>{n(Ze.Login)},Qr=async he=>{var fe,ct;if(n(Ze.Setup),((fe=he==null?void 0:he.metadata)==null?void 0:fe.creationTime)===((ct=he==null?void 0:he.metadata)==null?void 0:ct.lastSignInTime)&&di.trackUserRegister(),he!=null&&he.uid)try{await wb(he.uid),pr(he.uid),yr(he.uid)}catch(sn){console.error("Error durante la migracin del usuario:",sn),pr(he.uid),yr(he.uid)}},Fo=te.useCallback(async()=>{const he={...Ce,totalChanges:Ce.totalChanges+1,lastChangeDate:new Date};if(_e(fe=>({...fe,changesCount:fe.changesCount+1})),Ae(he),s&&!s.isAnonymous)try{await bE(s.uid,he)}catch(fe){console.error("Error saving question change stats:",fe)}},[Ce,s]),Ps=te.useCallback(async()=>new Promise((he,fe)=>{_e(ct=>({...ct,isAdLoading:!0})),setTimeout(()=>{_e(ct=>({...ct,isAdLoading:!1,isAdPlaying:!0})),setTimeout(()=>{_e(sn=>({...sn,isAdPlaying:!1,changesCount:0}));const ct={...Ce,adsWatched:Ce.adsWatched+1};if(Ae(ct),s&&!s.isAnonymous)try{bE(s.uid,ct).catch(sn=>{console.error("Error saving ad watched stats:",sn)})}catch(sn){console.error("Error saving ad watched stats:",sn)}he()},3e3)},1e3)}),[Ce,s]),Ci=()=>{n(Ze.Setup)},Ta=he=>{const fe=ue.find(ct=>ct.id===he);fe&&(Q(fe),Ie(!0))},ht=()=>{Ie(!1),Q(null)},$e=he=>{Y(fe=>fe.includes(he)?fe:[...fe,he])},mn=async()=>{if(Oe)try{const he=await $D(Oe.id);if(he.questions.length===0&&he.dares.length===0){alert("Este pack no tiene contenido demo disponible.");return}P(!0),k(Oe.id),h(he.questions),g(he.dares),await WD(Oe.id),n(Ze.RoundConfiguration)}catch(he){console.error("Error starting demo:",he),alert("Error al cargar el demo. Intntalo de nuevo.")}},Bt=he=>{S(he),B({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:new Date,gameEndTime:null,roundStats:[]}),re({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),j({currentRound:1,playersCompletedInRound:0}),n(Ze.Game)},ba=()=>{const he=(_+1)%i.length;if(w(he),he===0){const fe=N.currentRound+1;fe>b.totalRounds?_r():(j({currentRound:fe,playersCompletedInRound:0}),re({roundNumber:fe,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}))}else j(fe=>({...fe,playersCompletedInRound:fe.playersCompletedInRound+1}))},Go=()=>{const he={...ae,roundEndTime:new Date};B(fe=>({...fe,totalRounds:fe.totalRounds+1,roundStats:[...fe.roundStats,he]})),n(Ze.RoundEnd)},Kr=()=>{const he=N.currentRound+1;j({currentRound:he,playersCompletedInRound:0}),re({roundNumber:he,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),w(0),n(Ze.Game)},_r=()=>{B(he=>({...he,gameEndTime:new Date})),n(Ze.GameEnd)},Yr=()=>{const he=i[_];re(fe=>({...fe,questionsAsked:fe.questionsAsked+1,playersParticipated:fe.playersParticipated.includes(he)?fe.playersParticipated:[...fe.playersParticipated,he]})),B(fe=>({...fe,totalQuestions:fe.totalQuestions+1}))},In=()=>{const he=i[_];re(fe=>({...fe,daresCompleted:fe.daresCompleted+1,playersParticipated:fe.playersParticipated.includes(he)?fe.playersParticipated:[...fe.playersParticipated,he]})),B(fe=>({...fe,totalDares:fe.totalDares+1}))},Xr=te.useCallback(()=>{n(Ze.Setup),o([]),w(0),S({totalRounds:5}),j({currentRound:1,playersCompletedInRound:0}),B({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),re({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),P(!1),k(null),Ie(!1),Q(null),Y([])},[]),$r=he=>{C.includes(he)||x([...C,he])},Wr=()=>C.includes("no-ads"),Di=()=>{rt(!1)},Oi=()=>{console.log("Sugerencia enviada exitosamente")},rr=()=>{nr(!0)},sr=()=>{nr(!1)},Pi=()=>{n(Ze.Setup)},qn=()=>{switch(e){case Ze.Setup:return p.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-900 bg-opacity-50 backdrop-blur-sm",children:p.jsxs("div",{className:"w-full max-w-md mx-auto animate-fade-in",children:[p.jsx("h1",{className:"text-5xl font-extrabold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Verdad o Reto"}),p.jsx("p",{className:"text-center text-gray-400 mb-8",children:"El juego para animar la fiesta"}),p.jsxs("div",{className:"space-y-6",children:[p.jsx(AS,{players:i,setPlayers:o}),se.isLoading&&p.jsx(Rn,{className:"text-center text-gray-400",children:p.jsx("p",{children:"Cargando datos desde Firebase..."})}),se.error&&p.jsxs(Rn,{className:"text-center text-red-400",children:[p.jsxs("p",{children:["Error de conexin: ",se.error]}),p.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Verifica tu configuracin de Firebase"}),p.jsx(De,{onClick:Fr,className:"mt-4",variant:"secondary",children:"Reintentar"})]}),!se.isLoading&&!se.error&&p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx(De,{onClick:wa,className:"w-full text-lg",disabled:i.length<2||c.length===0||m.length===0,children:"Empezar a Jugar"}),s&&!s.isAnonymous?p.jsx(De,{onClick:()=>n(Ze.Profile),variant:"secondary",className:"w-full text-lg",children:"Mi Perfil"}):p.jsx(De,{onClick:Gr,variant:"secondary",className:"w-full text-lg",children:"Iniciar Sesin"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(De,{onClick:()=>n(Ze.Shop),variant:"secondary",className:`flex-[2] text-lg bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 
                                      hover:from-yellow-500 hover:via-yellow-600 hover:to-yellow-700 
                                      text-white font-semibold shadow-lg hover:shadow-xl 
                                      transform hover:scale-105 transition-all duration-200 
                                      flex items-center justify-center gap-2 rounded-2xl`,children:[p.jsx(ES,{className:"w-5 h-5"}),"Tienda de Paquetes"]}),p.jsx(De,{onClick:rr,variant:"secondary",className:"flex-1 text-sm bg-red-600 hover:bg-red-700 text-white",children:"Reportar"})]})]})]})]})});case Ze.Login:return p.jsx(nO,{onBack:Ci,onSuccess:Qr});case Ze.Profile:return p.jsx(cO,{onBack:Pi});case Ze.Shop:return p.jsx(FD,{availablePacks:ue,purchasedPacks:C,onPurchase:$r,onBack:()=>n(Ze.Setup),onGoToLogin:Gr});case Ze.PackSelection:return p.jsxs(p.Fragment,{children:[p.jsx(K2,{availablePacks:ue,purchasedPacks:C,adWatchedPacks:ie,referralUnlockedPacks:pe,suggestionUnlockedPacks:Z,onContinue:wn,onBack:Ho,onGoToShop:Ni,onPlayDemo:Ta}),p.jsx(aD,{pack:Oe,isOpen:R,onClose:ht,onStartDemo:mn,onAdWatched:$e,hasNoAds:Wr()})]});case Ze.RoundConfiguration:return p.jsx(lD,{onSelectRounds:he=>{Bt({totalRounds:he})},onBack:()=>n(Ze.PackSelection)});case Ze.Game:return p.jsx(oD,{players:i,currentPlayerIndex:_,onNextPlayer:ba,onNewGame:Xr,questions:c,dares:m,roundConfig:b,gameProgress:N,onRoundEnd:Go,onQuestionAsked:Yr,onDareCompleted:In,onQuestionChange:Fo,onAdRequired:Ps,questionChangeState:oe});case Ze.RoundEnd:return p.jsx(cD,{roundStats:ae,currentRound:N.currentRound,totalRounds:b.totalRounds,onContinue:Kr,onEndGame:_r,hasNoAds:Wr()});case Ze.GameEnd:return p.jsx(uD,{gameStats:G,players:i,onNewGame:Xr,onBackToMenu:()=>n(Ze.Setup),hasNoAds:Wr(),isDemoMode:I,demoPackId:M});default:return p.jsx("div",{children:"Error: Estado de juego desconocido."})}};return p.jsxs("main",{className:"relative min-h-screen bg-gray-900 overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-purple-900/30 via-transparent to-pink-900/30"}),p.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-96 h-96 bg-purple-600 rounded-full filter blur-3xl opacity-20 animate-blob"}),p.jsx("div",{className:"absolute bottom-[-10%] right-[5%] w-96 h-96 bg-pink-600 rounded-full filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),p.jsx("div",{className:"absolute top-[10%] right-[-15%] w-80 h-80 bg-cyan-600 rounded-full filter blur-3xl opacity-10 animate-blob animation-delay-4000"}),p.jsx("div",{className:"relative z-10",children:qn()}),p.jsx("style",{children:`
          .animate-blob {
            animation: blob 7s infinite;
          }
          .animation-delay-2000 {
            animation-delay: 2s;
          }
          .animation-delay-4000 {
            animation-delay: 4s;
          }
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
          }
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `}),It&&p.jsx(Mb,{onClose:Di,onSuccess:Oi}),zn&&p.jsx(Vb,{onClose:sr})]})},kb=document.getElementById("root");if(!kb)throw new Error("Could not find root element to mount to");const dO=_S.createRoot(kb);dO.render(p.jsx(uS.StrictMode,{children:p.jsx(vD,{children:p.jsx(uO,{})})}));export{yE as A,ub as W};
