(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function jE(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var wm={exports:{}},Jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function yA(){if(k0)return Jl;k0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:r,type:i,key:d,ref:o!==void 0?o:null,props:c}}return Jl.Fragment=e,Jl.jsx=t,Jl.jsxs=t,Jl}var V0;function _A(){return V0||(V0=1,wm.exports=yA()),wm.exports}var p=_A(),Tm={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function vA(){if(j0)return Pe;j0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.iterator;function A(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,H={};function U(O,ee,ce){this.props=O,this.context=ee,this.refs=H,this.updater=ce||I}U.prototype.isReactComponent={},U.prototype.setState=function(O,ee){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ee,"setState")},U.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function re(){}re.prototype=U.prototype;function se(O,ee,ce){this.props=O,this.context=ee,this.refs=H,this.updater=ce||I}var ie=se.prototype=new re;ie.constructor=se,j(ie,U.prototype),ie.isPureReactComponent=!0;var fe=Array.isArray,de={H:null,A:null,T:null,S:null,V:null},X=Object.prototype.hasOwnProperty;function D(O,ee,ce,oe,ve,Oe){return ce=Oe.ref,{$$typeof:r,type:O,key:ee,ref:ce!==void 0?ce:null,props:Oe}}function x(O,ee){return D(O.type,ee,void 0,void 0,void 0,O.props)}function C(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function P(O){var ee={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ce){return ee[ce]})}var M=/\/+/g;function V(O,ee){return typeof O=="object"&&O!==null&&O.key!=null?P(""+O.key):ee.toString(36)}function R(){}function De(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(R,R):(O.status="pending",O.then(function(ee){O.status==="pending"&&(O.status="fulfilled",O.value=ee)},function(ee){O.status==="pending"&&(O.status="rejected",O.reason=ee)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Me(O,ee,ce,oe,ve){var Oe=typeof O;(Oe==="undefined"||Oe==="boolean")&&(O=null);var Se=!1;if(O===null)Se=!0;else switch(Oe){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(O.$$typeof){case r:case e:Se=!0;break;case w:return Se=O._init,Me(Se(O._payload),ee,ce,oe,ve)}}if(Se)return ve=ve(O),Se=oe===""?"."+V(O,0):oe,fe(ve)?(ce="",Se!=null&&(ce=Se.replace(M,"$&/")+"/"),Me(ve,ee,ce,"",function(Zt){return Zt})):ve!=null&&(C(ve)&&(ve=x(ve,ce+(ve.key==null||O&&O.key===ve.key?"":(""+ve.key).replace(M,"$&/")+"/")+Se)),ee.push(ve)),1;Se=0;var Nt=oe===""?".":oe+":";if(fe(O))for(var We=0;We<O.length;We++)oe=O[We],Oe=Nt+V(oe,We),Se+=Me(oe,ee,ce,Oe,ve);else if(We=A(O),typeof We=="function")for(O=We.call(O),We=0;!(oe=O.next()).done;)oe=oe.value,Oe=Nt+V(oe,We++),Se+=Me(oe,ee,ce,Oe,ve);else if(Oe==="object"){if(typeof O.then=="function")return Me(De(O),ee,ce,oe,ve);throw ee=String(O),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Se}function Q(O,ee,ce){if(O==null)return O;var oe=[],ve=0;return Me(O,oe,"","",function(Oe){return ee.call(ce,Oe,ve++)}),oe}function ae(O){if(O._status===-1){var ee=O._result;ee=ee(),ee.then(function(ce){(O._status===0||O._status===-1)&&(O._status=1,O._result=ce)},function(ce){(O._status===0||O._status===-1)&&(O._status=2,O._result=ce)}),O._status===-1&&(O._status=0,O._result=ee)}if(O._status===1)return O._result.default;throw O._result}var Y=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function pe(){}return Pe.Children={map:Q,forEach:function(O,ee,ce){Q(O,function(){ee.apply(this,arguments)},ce)},count:function(O){var ee=0;return Q(O,function(){ee++}),ee},toArray:function(O){return Q(O,function(ee){return ee})||[]},only:function(O){if(!C(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Pe.Component=U,Pe.Fragment=t,Pe.Profiler=o,Pe.PureComponent=se,Pe.StrictMode=i,Pe.Suspense=g,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=de,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return de.H.useMemoCache(O)}},Pe.cache=function(O){return function(){return O.apply(null,arguments)}},Pe.cloneElement=function(O,ee,ce){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var oe=j({},O.props),ve=O.key,Oe=void 0;if(ee!=null)for(Se in ee.ref!==void 0&&(Oe=void 0),ee.key!==void 0&&(ve=""+ee.key),ee)!X.call(ee,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&ee.ref===void 0||(oe[Se]=ee[Se]);var Se=arguments.length-2;if(Se===1)oe.children=ce;else if(1<Se){for(var Nt=Array(Se),We=0;We<Se;We++)Nt[We]=arguments[We+2];oe.children=Nt}return D(O.type,ve,void 0,void 0,Oe,oe)},Pe.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},Pe.createElement=function(O,ee,ce){var oe,ve={},Oe=null;if(ee!=null)for(oe in ee.key!==void 0&&(Oe=""+ee.key),ee)X.call(ee,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ve[oe]=ee[oe]);var Se=arguments.length-2;if(Se===1)ve.children=ce;else if(1<Se){for(var Nt=Array(Se),We=0;We<Se;We++)Nt[We]=arguments[We+2];ve.children=Nt}if(O&&O.defaultProps)for(oe in Se=O.defaultProps,Se)ve[oe]===void 0&&(ve[oe]=Se[oe]);return D(O,Oe,void 0,void 0,null,ve)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(O){return{$$typeof:m,render:O}},Pe.isValidElement=C,Pe.lazy=function(O){return{$$typeof:w,_payload:{_status:-1,_result:O},_init:ae}},Pe.memo=function(O,ee){return{$$typeof:_,type:O,compare:ee===void 0?null:ee}},Pe.startTransition=function(O){var ee=de.T,ce={};de.T=ce;try{var oe=O(),ve=de.S;ve!==null&&ve(ce,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(pe,Y)}catch(Oe){Y(Oe)}finally{de.T=ee}},Pe.unstable_useCacheRefresh=function(){return de.H.useCacheRefresh()},Pe.use=function(O){return de.H.use(O)},Pe.useActionState=function(O,ee,ce){return de.H.useActionState(O,ee,ce)},Pe.useCallback=function(O,ee){return de.H.useCallback(O,ee)},Pe.useContext=function(O){return de.H.useContext(O)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(O,ee){return de.H.useDeferredValue(O,ee)},Pe.useEffect=function(O,ee,ce){var oe=de.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(O,ee)},Pe.useId=function(){return de.H.useId()},Pe.useImperativeHandle=function(O,ee,ce){return de.H.useImperativeHandle(O,ee,ce)},Pe.useInsertionEffect=function(O,ee){return de.H.useInsertionEffect(O,ee)},Pe.useLayoutEffect=function(O,ee){return de.H.useLayoutEffect(O,ee)},Pe.useMemo=function(O,ee){return de.H.useMemo(O,ee)},Pe.useOptimistic=function(O,ee){return de.H.useOptimistic(O,ee)},Pe.useReducer=function(O,ee,ce){return de.H.useReducer(O,ee,ce)},Pe.useRef=function(O){return de.H.useRef(O)},Pe.useState=function(O){return de.H.useState(O)},Pe.useSyncExternalStore=function(O,ee,ce){return de.H.useSyncExternalStore(O,ee,ce)},Pe.useTransition=function(){return de.H.useTransition()},Pe.version="19.1.1",Pe}var L0;function gg(){return L0||(L0=1,Tm.exports=vA()),Tm.exports}var $=gg();const EA=jE($);var bm={exports:{}},ec={},Sm={exports:{}},Am={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0;function wA(){return U0||(U0=1,(function(r){function e(Q,ae){var Y=Q.length;Q.push(ae);e:for(;0<Y;){var pe=Y-1>>>1,O=Q[pe];if(0<o(O,ae))Q[pe]=ae,Q[Y]=O,Y=pe;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var ae=Q[0],Y=Q.pop();if(Y!==ae){Q[0]=Y;e:for(var pe=0,O=Q.length,ee=O>>>1;pe<ee;){var ce=2*(pe+1)-1,oe=Q[ce],ve=ce+1,Oe=Q[ve];if(0>o(oe,Y))ve<O&&0>o(Oe,oe)?(Q[pe]=Oe,Q[ve]=Y,pe=ve):(Q[pe]=oe,Q[ce]=Y,pe=ce);else if(ve<O&&0>o(Oe,Y))Q[pe]=Oe,Q[ve]=Y,pe=ve;else break e}}return ae}function o(Q,ae){var Y=Q.sortIndex-ae.sortIndex;return Y!==0?Y:Q.id-ae.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();r.unstable_now=function(){return d.now()-m}}var g=[],_=[],w=1,b=null,A=3,I=!1,j=!1,H=!1,U=!1,re=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function fe(Q){for(var ae=t(_);ae!==null;){if(ae.callback===null)i(_);else if(ae.startTime<=Q)i(_),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=t(_)}}function de(Q){if(H=!1,fe(Q),!j)if(t(g)!==null)j=!0,X||(X=!0,V());else{var ae=t(_);ae!==null&&Me(de,ae.startTime-Q)}}var X=!1,D=-1,x=5,C=-1;function P(){return U?!0:!(r.unstable_now()-C<x)}function M(){if(U=!1,X){var Q=r.unstable_now();C=Q;var ae=!0;try{e:{j=!1,H&&(H=!1,se(D),D=-1),I=!0;var Y=A;try{t:{for(fe(Q),b=t(g);b!==null&&!(b.expirationTime>Q&&P());){var pe=b.callback;if(typeof pe=="function"){b.callback=null,A=b.priorityLevel;var O=pe(b.expirationTime<=Q);if(Q=r.unstable_now(),typeof O=="function"){b.callback=O,fe(Q),ae=!0;break t}b===t(g)&&i(g),fe(Q)}else i(g);b=t(g)}if(b!==null)ae=!0;else{var ee=t(_);ee!==null&&Me(de,ee.startTime-Q),ae=!1}}break e}finally{b=null,A=Y,I=!1}ae=void 0}}finally{ae?V():X=!1}}}var V;if(typeof ie=="function")V=function(){ie(M)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,De=R.port2;R.port1.onmessage=M,V=function(){De.postMessage(null)}}else V=function(){re(M,0)};function Me(Q,ae){D=re(function(){Q(r.unstable_now())},ae)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(Q){switch(A){case 1:case 2:case 3:var ae=3;break;default:ae=A}var Y=A;A=ae;try{return Q()}finally{A=Y}},r.unstable_requestPaint=function(){U=!0},r.unstable_runWithPriority=function(Q,ae){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Y=A;A=Q;try{return ae()}finally{A=Y}},r.unstable_scheduleCallback=function(Q,ae,Y){var pe=r.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?pe+Y:pe):Y=pe,Q){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Y+O,Q={id:w++,callback:ae,priorityLevel:Q,startTime:Y,expirationTime:O,sortIndex:-1},Y>pe?(Q.sortIndex=Y,e(_,Q),t(g)===null&&Q===t(_)&&(H?(se(D),D=-1):H=!0,Me(de,Y-pe))):(Q.sortIndex=O,e(g,Q),j||I||(j=!0,X||(X=!0,V()))),Q},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(Q){var ae=A;return function(){var Y=A;A=ae;try{return Q.apply(this,arguments)}finally{A=Y}}}})(Am)),Am}var z0;function TA(){return z0||(z0=1,Sm.exports=wA()),Sm.exports}var xm={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0;function bA(){if(q0)return cn;q0=1;var r=gg();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)_+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,_,w){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:_,implementation:w}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cn.createPortal=function(g,_){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(g,_,null,w)},cn.flushSync=function(g){var _=d.T,w=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=_,i.p=w,i.d.f()}},cn.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,i.d.C(g,_))},cn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},cn.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var w=_.as,b=m(w,_.crossOrigin),A=typeof _.integrity=="string"?_.integrity:void 0,I=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;w==="style"?i.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:I}):w==="script"&&i.d.X(g,{crossOrigin:b,integrity:A,fetchPriority:I,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},cn.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var w=m(_.as,_.crossOrigin);i.d.M(g,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&i.d.M(g)},cn.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var w=_.as,b=m(w,_.crossOrigin);i.d.L(g,w,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},cn.preloadModule=function(g,_){if(typeof g=="string")if(_){var w=m(_.as,_.crossOrigin);i.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else i.d.m(g)},cn.requestFormReset=function(g){i.d.r(g)},cn.unstable_batchedUpdates=function(g,_){return g(_)},cn.useFormState=function(g,_,w){return d.H.useFormState(g,_,w)},cn.useFormStatus=function(){return d.H.useHostTransitionStatus()},cn.version="19.1.1",cn}var B0;function SA(){if(B0)return xm.exports;B0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),xm.exports=bA(),xm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0;function AA(){if(H0)return ec;H0=1;var r=TA(),e=gg(),t=SA();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function d(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(i(188))}function g(n){var s=n.alternate;if(!s){if(s=c(n),s===null)throw Error(i(188));return s!==n?null:n}for(var a=n,l=s;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),n;if(f===l)return m(h),s;f=f.sibling}throw Error(i(188))}if(a.return!==l.return)a=h,l=f;else{for(var E=!1,T=h.child;T;){if(T===a){E=!0,a=h,l=f;break}if(T===l){E=!0,l=h,a=f;break}T=T.sibling}if(!E){for(T=f.child;T;){if(T===a){E=!0,a=f,l=h;break}if(T===l){E=!0,l=f,a=h;break}T=T.sibling}if(!E)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?n:s}function _(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=_(n),s!==null)return s;n=n.sibling}return null}var w=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function V(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function De(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case U:return"Profiler";case H:return"StrictMode";case de:return"Suspense";case X:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case I:return"Portal";case ie:return(n.displayName||"Context")+".Provider";case se:return(n._context.displayName||"Context")+".Consumer";case fe:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return s=n.displayName||null,s!==null?s:De(n.type)||"Memo";case x:s=n._payload,n=n._init;try{return De(n(s))}catch{}}return null}var Me=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},pe=[],O=-1;function ee(n){return{current:n}}function ce(n){0>O||(n.current=pe[O],pe[O]=null,O--)}function oe(n,s){O++,pe[O]=n.current,n.current=s}var ve=ee(null),Oe=ee(null),Se=ee(null),Nt=ee(null);function We(n,s){switch(oe(Se,s),oe(Oe,n),oe(ve,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?c0(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=c0(s),n=u0(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ce(ve),oe(ve,n)}function Zt(){ce(ve),ce(Oe),ce(Se)}function ar(n){n.memoizedState!==null&&oe(Nt,n);var s=ve.current,a=u0(s,n.type);s!==a&&(oe(Oe,n),oe(ve,a))}function or(n){Oe.current===n&&(ce(ve),ce(Oe)),Nt.current===n&&(ce(Nt),Yl._currentValue=Y)}var vr=Object.prototype.hasOwnProperty,$r=r.unstable_scheduleCallback,Er=r.unstable_cancelCallback,Ia=r.unstable_shouldYield,Wo=r.unstable_requestPaint,pn=r.unstable_now,Ca=r.unstable_getCurrentPriorityLevel,Wr=r.unstable_ImmediatePriority,js=r.unstable_UserBlockingPriority,Zr=r.unstable_NormalPriority,Zo=r.unstable_LowPriority,Ls=r.unstable_IdlePriority,Us=r.log,Na=r.unstable_setDisableYieldValue,ht=null,Ze=null;function yn(n){if(typeof Us=="function"&&Na(n),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(ht,n)}catch{}}var Ht=Math.clz32?Math.clz32:Jr,Da=Math.log,Jo=Math.LN2;function Jr(n){return n>>>=0,n===0?32:31-(Da(n)/Jo|0)|0}var es=256,ts=4194304;function Nn(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function zs(n,s,a){var l=n.pendingLanes;if(l===0)return 0;var h=0,f=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?h=Nn(l):(E&=T,E!==0?h=Nn(E):a||(a=T&~n,a!==0&&(h=Nn(a))))):(T=l&~f,T!==0?h=Nn(T):E!==0?h=Nn(E):a||(a=l&~n,a!==0&&(h=Nn(a)))),h===0?0:s!==0&&s!==h&&(s&f)===0&&(f=h&-h,a=s&-s,f>=a||f===32&&(a&4194048)!==0)?s:h}function wr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function ji(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Li(){var n=es;return es<<=1,(es&4194048)===0&&(es=256),n}function qs(){var n=ts;return ts<<=1,(ts&62914560)===0&&(ts=4194304),n}function lr(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Dn(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ui(n,s,a,l,h,f){var E=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var T=n.entanglements,N=n.expirationTimes,B=n.hiddenUpdates;for(a=E&~a;0<a;){var Z=31-Ht(a),te=1<<Z;T[Z]=0,N[Z]=-1;var F=B[Z];if(F!==null)for(B[Z]=null,Z=0;Z<F.length;Z++){var G=F[Z];G!==null&&(G.lane&=-536870913)}a&=~te}l!==0&&Gn(n,l,0),f!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=f&~(E&~s))}function Gn(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-Ht(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function zi(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var l=31-Ht(a),h=1<<l;h&s|n[l]&s&&(n[l]|=s),a&=~h}}function Tr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Bs(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function br(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:C0(n.type))}function Oa(n,s){var a=ae.p;try{return ae.p=n,s()}finally{ae.p=a}}var ut=Math.random().toString(36).slice(2),At="__reactFiber$"+ut,Et="__reactProps$"+ut,le="__reactContainer$"+ut,me="__reactEvents$"+ut,wt="__reactListeners$"+ut,Qn="__reactHandles$"+ut,cr="__reactResources$"+ut,On="__reactMarker$"+ut;function Hs(n){delete n[At],delete n[Et],delete n[me],delete n[wt],delete n[Qn]}function ns(n){var s=n[At];if(s)return s;for(var a=n.parentNode;a;){if(s=a[le]||a[At]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=m0(n);n!==null;){if(a=n[At])return a;n=m0(n)}return s}n=a,a=n.parentNode}return null}function Sr(n){if(n=n[At]||n[le]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Ar(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function _n(n){var s=n[cr];return s||(s=n[cr]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function xt(n){n[On]=!0}var el=new Set,Pa={};function ur(n,s){rs(n,s),rs(n+"Capture",s)}function rs(n,s){for(Pa[n]=s,n=0;n<s.length;n++)el.add(s[n])}var Yc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xc={},qi={};function $c(n){return vr.call(qi,n)?!0:vr.call(Xc,n)?!1:Yc.test(n)?qi[n]=!0:(Xc[n]=!0,!1)}function Fs(n,s,a){if($c(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function xr(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function Jt(n,s,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+l)}}var Bi,Wc;function ss(n){if(Bi===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Bi=s&&s[1]||"",Wc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bi+n+Wc}var Ma=!1;function ka(n,s){if(!n||Ma)return"";Ma=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(G){var F=G}Reflect.construct(n,[],te)}else{try{te.call()}catch(G){F=G}n.call(te.prototype)}}else{try{throw Error()}catch(G){F=G}(te=n())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(G){if(G&&F&&typeof G.stack=="string")return[G.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),E=f[0],T=f[1];if(E&&T){var N=E.split(`
`),B=T.split(`
`);for(h=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===N.length||h===B.length)for(l=N.length-1,h=B.length-1;1<=l&&0<=h&&N[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(N[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||N[l]!==B[h]){var Z=`
`+N[l].replace(" at new "," at ");return n.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",n.displayName)),Z}while(1<=l&&0<=h);break}}}finally{Ma=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?ss(a):""}function tl(n){switch(n.tag){case 26:case 27:case 5:return ss(n.type);case 16:return ss("Lazy");case 13:return ss("Suspense");case 19:return ss("SuspenseList");case 0:case 15:return ka(n.type,!1);case 11:return ka(n.type.render,!1);case 1:return ka(n.type,!0);case 31:return ss("Activity");default:return""}}function Va(n){try{var s="";do s+=tl(n),n=n.return;while(n);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function vn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function nl(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Sh(n){var s=nl(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),l=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,f.call(this,E)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ja(n){n._valueTracker||(n._valueTracker=Sh(n))}function rl(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return n&&(l=nl(n)?n.checked?"true":"false":n.value),n=l,n!==a?(s.setValue(n),!0):!1}function Hi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ah=/[\n"\\]/g;function Dt(n){return n.replace(Ah,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Pn(n,s,a,l,h,f,E,T){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+vn(s)):n.value!==""+vn(s)&&(n.value=""+vn(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?Gs(n,E,vn(s)):a!=null?Gs(n,E,vn(a)):l!=null&&n.removeAttribute("value"),h==null&&f!=null&&(n.defaultChecked=!!f),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+vn(T):n.removeAttribute("name")}function Fi(n,s,a,l,h,f,E,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(n.type=f),s!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||s!=null))return;a=a!=null?""+vn(a):"",s=s!=null?""+vn(s):a,T||s===n.value||(n.value=s),n.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=T?n.checked:!!l,n.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Gs(n,s,a){s==="number"&&Hi(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function is(n,s,a,l){if(n=n.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=s.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&l&&(n[a].defaultSelected=!0)}else{for(a=""+vn(a),s=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,l&&(n[h].defaultSelected=!0);return}s!==null||n[h].disabled||(s=n[h])}s!==null&&(s.selected=!0)}}function st(n,s,a){if(s!=null&&(s=""+vn(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+vn(a):""}function Gi(n,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(i(92));if(Me(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=vn(s),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Kn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Qi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zc(n,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,a):typeof a!="number"||a===0||Qi.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function sl(n,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&Zc(n,h,l)}else for(var f in s)s.hasOwnProperty(f)&&Zc(n,f,s[f])}function il(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function La(n){return Rh.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var as=null;function Yn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var os=null,ls=null;function al(n){var s=Sr(n);if(s&&(n=s.stateNode)){var a=n[Et]||null;e:switch(n=s.stateNode,s.type){case"input":if(Pn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Dt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==n&&l.form===n.form){var h=l[Et]||null;if(!h)throw Error(i(90));Pn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===n.form&&rl(l)}break e;case"textarea":st(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&is(n,!!a.multiple,s,!1)}}}var Rr=!1;function Jc(n,s,a){if(Rr)return n(s,a);Rr=!0;try{var l=n(s);return l}finally{if(Rr=!1,(os!==null||ls!==null)&&(Qu(),os&&(s=os,n=ls,ls=os=null,al(s),n)))for(s=0;s<n.length;s++)al(n[s])}}function Ki(n,s){var a=n.stateNode;if(a===null)return null;var l=a[Et]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xn=!1;if(dr)try{var Yi={};Object.defineProperty(Yi,"passive",{get:function(){Xn=!0}}),window.addEventListener("test",Yi,Yi),window.removeEventListener("test",Yi,Yi)}catch{Xn=!1}var Ir=null,Qs=null,cs=null;function ol(){if(cs)return cs;var n,s=Qs,a=s.length,l,h="value"in Ir?Ir.value:Ir.textContent,f=h.length;for(n=0;n<a&&s[n]===h[n];n++);var E=a-n;for(l=1;l<=E&&s[a-l]===h[f-l];l++);return cs=h.slice(n,1<l?1-l:void 0)}function Cr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Nr(){return!0}function ll(){return!1}function Ft(n){function s(a,l,h,f,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Nr:ll,this.isPropagationStopped=ll,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),s}var et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=Ft(et),Xi=w({},et,{view:0,detail:0}),eu=Ft(Xi),za,qa,Dr,$i=w({},Xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ji,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Dr&&(Dr&&n.type==="mousemove"?(za=n.screenX-Dr.screenX,qa=n.screenY-Dr.screenY):qa=za=0,Dr=n),za)},movementY:function(n){return"movementY"in n?n.movementY:qa}}),$n=Ft($i),tu=w({},$i,{dataTransfer:0}),Ih=Ft(tu),Wi=w({},Xi,{relatedTarget:0}),Ba=Ft(Wi),cl=w({},et,{animationName:0,elapsedTime:0,pseudoElement:0}),Ha=Ft(cl),nu=w({},et,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Fa=Ft(nu),Ch=w({},et,{data:0}),ul=Ft(Ch),Zi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=su[n])?!!s[n]:!1}function Ji(){return dl}var iu=w({},Xi,{key:function(n){if(n.key){var s=Zi[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Cr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ru[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ji,charCode:function(n){return n.type==="keypress"?Cr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Cr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ga=Ft(iu),au=w({},$i,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hl=Ft(au),us=w({},Xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ji}),ou=Ft(us),lu=w({},et,{propertyName:0,elapsedTime:0,pseudoElement:0}),cu=Ft(lu),uu=w({},$i,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Qa=Ft(uu),En=w({},et,{newState:0,oldState:0}),du=Ft(En),hu=[9,13,27,32],Or=dr&&"CompositionEvent"in window,u=null;dr&&"documentMode"in document&&(u=document.documentMode);var y=dr&&"TextEvent"in window&&!u,v=dr&&(!Or||u&&8<u&&11>=u),S=" ",z=!1;function K(n,s){switch(n){case"keyup":return hu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ue(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var He=!1;function Lt(n,s){switch(n){case"compositionend":return ue(s);case"keypress":return s.which!==32?null:(z=!0,S);case"textInput":return n=s.data,n===S&&z?null:n;default:return null}}function Fe(n,s){if(He)return n==="compositionend"||!Or&&K(n,s)?(n=ol(),cs=Qs=Ir=null,He=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v&&s.locale!=="ko"?null:s.data;default:return null}}var Gt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ut(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Gt[n.type]:s==="textarea"}function ds(n,s,a,l){os?ls?ls.push(l):ls=[l]:os=l,s=Zu(s,"onChange"),0<s.length&&(a=new Ua("onChange","change",null,a,l),n.push({event:a,listeners:s}))}var en=null,Pr=null;function fl(n){s0(n,0)}function fu(n){var s=Ar(n);if(rl(s))return n}function Ap(n,s){if(n==="change")return s}var xp=!1;if(dr){var Nh;if(dr){var Dh="oninput"in document;if(!Dh){var Rp=document.createElement("div");Rp.setAttribute("oninput","return;"),Dh=typeof Rp.oninput=="function"}Nh=Dh}else Nh=!1;xp=Nh&&(!document.documentMode||9<document.documentMode)}function Ip(){en&&(en.detachEvent("onpropertychange",Cp),Pr=en=null)}function Cp(n){if(n.propertyName==="value"&&fu(Pr)){var s=[];ds(s,Pr,n,Yn(n)),Jc(fl,s)}}function Kb(n,s,a){n==="focusin"?(Ip(),en=s,Pr=a,en.attachEvent("onpropertychange",Cp)):n==="focusout"&&Ip()}function Yb(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return fu(Pr)}function Xb(n,s){if(n==="click")return fu(s)}function $b(n,s){if(n==="input"||n==="change")return fu(s)}function Wb(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Mn=typeof Object.is=="function"?Object.is:Wb;function ml(n,s){if(Mn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!vr.call(s,h)||!Mn(n[h],s[h]))return!1}return!0}function Np(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Dp(n,s){var a=Np(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=s&&l>=s)return{node:a,offset:s-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Np(a)}}function Op(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Op(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Pp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Hi(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Hi(n.document)}return s}function Oh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var Zb=dr&&"documentMode"in document&&11>=document.documentMode,Ka=null,Ph=null,gl=null,Mh=!1;function Mp(n,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Mh||Ka==null||Ka!==Hi(l)||(l=Ka,"selectionStart"in l&&Oh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),gl&&ml(gl,l)||(gl=l,l=Zu(Ph,"onSelect"),0<l.length&&(s=new Ua("onSelect","select",null,s,a),n.push({event:s,listeners:l}),s.target=Ka)))}function ea(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Ya={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionrun:ea("Transition","TransitionRun"),transitionstart:ea("Transition","TransitionStart"),transitioncancel:ea("Transition","TransitionCancel"),transitionend:ea("Transition","TransitionEnd")},kh={},kp={};dr&&(kp=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function ta(n){if(kh[n])return kh[n];if(!Ya[n])return n;var s=Ya[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in kp)return kh[n]=s[a];return n}var Vp=ta("animationend"),jp=ta("animationiteration"),Lp=ta("animationstart"),Jb=ta("transitionrun"),eS=ta("transitionstart"),tS=ta("transitioncancel"),Up=ta("transitionend"),zp=new Map,Vh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vh.push("scrollEnd");function hr(n,s){zp.set(n,s),ur(s,[n])}var qp=new WeakMap;function Wn(n,s){if(typeof n=="object"&&n!==null){var a=qp.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Va(s)},qp.set(n,s),s)}return{value:n,source:s,stack:Va(s)}}var Zn=[],Xa=0,jh=0;function mu(){for(var n=Xa,s=jh=Xa=0;s<n;){var a=Zn[s];Zn[s++]=null;var l=Zn[s];Zn[s++]=null;var h=Zn[s];Zn[s++]=null;var f=Zn[s];if(Zn[s++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}f!==0&&Bp(a,h,f)}}function gu(n,s,a,l){Zn[Xa++]=n,Zn[Xa++]=s,Zn[Xa++]=a,Zn[Xa++]=l,jh|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Lh(n,s,a,l){return gu(n,s,a,l),pu(n)}function $a(n,s){return gu(n,null,null,s),pu(n)}function Bp(n,s,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=n.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(n=f.stateNode,n===null||n._visibility&1||(h=!0)),n=f,f=f.return;return n.tag===3?(f=n.stateNode,h&&s!==null&&(h=31-Ht(a),n=f.hiddenUpdates,l=n[h],l===null?n[h]=[s]:l.push(s),s.lane=a|536870912),f):null}function pu(n){if(50<zl)throw zl=0,Gf=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Wa={};function nS(n,s,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(n,s,a,l){return new nS(n,s,a,l)}function Uh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function hs(n,s){var a=n.alternate;return a===null?(a=kn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Hp(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function yu(n,s,a,l,h,f){var E=0;if(l=n,typeof n=="function")Uh(n)&&(E=1);else if(typeof n=="string")E=sA(n,a,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=kn(31,a,s,h),n.elementType=C,n.lanes=f,n;case j:return na(a.children,h,f,s);case H:E=8,h|=24;break;case U:return n=kn(12,a,s,h|2),n.elementType=U,n.lanes=f,n;case de:return n=kn(13,a,s,h),n.elementType=de,n.lanes=f,n;case X:return n=kn(19,a,s,h),n.elementType=X,n.lanes=f,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case re:case ie:E=10;break e;case se:E=9;break e;case fe:E=11;break e;case D:E=14;break e;case x:E=16,l=null;break e}E=29,a=Error(i(130,n===null?"null":typeof n,"")),l=null}return s=kn(E,a,s,h),s.elementType=n,s.type=l,s.lanes=f,s}function na(n,s,a,l){return n=kn(7,n,l,s),n.lanes=a,n}function zh(n,s,a){return n=kn(6,n,null,s),n.lanes=a,n}function qh(n,s,a){return s=kn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Za=[],Ja=0,_u=null,vu=0,Jn=[],er=0,ra=null,fs=1,ms="";function sa(n,s){Za[Ja++]=vu,Za[Ja++]=_u,_u=n,vu=s}function Fp(n,s,a){Jn[er++]=fs,Jn[er++]=ms,Jn[er++]=ra,ra=n;var l=fs;n=ms;var h=32-Ht(l)-1;l&=~(1<<h),a+=1;var f=32-Ht(s)+h;if(30<f){var E=h-h%5;f=(l&(1<<E)-1).toString(32),l>>=E,h-=E,fs=1<<32-Ht(s)+h|a<<h|l,ms=f+n}else fs=1<<f|a<<h|l,ms=n}function Bh(n){n.return!==null&&(sa(n,1),Fp(n,1,0))}function Hh(n){for(;n===_u;)_u=Za[--Ja],Za[Ja]=null,vu=Za[--Ja],Za[Ja]=null;for(;n===ra;)ra=Jn[--er],Jn[er]=null,ms=Jn[--er],Jn[er]=null,fs=Jn[--er],Jn[er]=null}var wn=null,Tt=null,Je=!1,ia=null,Mr=!1,Fh=Error(i(519));function aa(n){var s=Error(i(418,""));throw _l(Wn(s,n)),Fh}function Gp(n){var s=n.stateNode,a=n.type,l=n.memoizedProps;switch(s[At]=n,s[Et]=l,a){case"dialog":Le("cancel",s),Le("close",s);break;case"iframe":case"object":case"embed":Le("load",s);break;case"video":case"audio":for(a=0;a<Bl.length;a++)Le(Bl[a],s);break;case"source":Le("error",s);break;case"img":case"image":case"link":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"input":Le("invalid",s),Fi(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ja(s);break;case"select":Le("invalid",s);break;case"textarea":Le("invalid",s),Gi(s,l.value,l.defaultValue,l.children),ja(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||l0(s.textContent,a)?(l.popover!=null&&(Le("beforetoggle",s),Le("toggle",s)),l.onScroll!=null&&Le("scroll",s),l.onScrollEnd!=null&&Le("scrollend",s),l.onClick!=null&&(s.onclick=Ju),s=!0):s=!1,s||aa(n)}function Qp(n){for(wn=n.return;wn;)switch(wn.tag){case 5:case 13:Mr=!1;return;case 27:case 3:Mr=!0;return;default:wn=wn.return}}function pl(n){if(n!==wn)return!1;if(!Je)return Qp(n),Je=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||om(n.type,n.memoizedProps)),a=!a),a&&Tt&&aa(n),Qp(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(s===0){Tt=mr(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;n=n.nextSibling}Tt=null}}else s===27?(s=Tt,li(n.type)?(n=dm,dm=null,Tt=n):Tt=s):Tt=wn?mr(n.stateNode.nextSibling):null;return!0}function yl(){Tt=wn=null,Je=!1}function Kp(){var n=ia;return n!==null&&(An===null?An=n:An.push.apply(An,n),ia=null),n}function _l(n){ia===null?ia=[n]:ia.push(n)}var Gh=ee(null),oa=null,gs=null;function Ks(n,s,a){oe(Gh,s._currentValue),s._currentValue=a}function ps(n){n._currentValue=Gh.current,ce(Gh)}function Qh(n,s,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===a)break;n=n.return}}function Kh(n,s,a,l){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var f=h.dependencies;if(f!==null){var E=h.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=h;for(var N=0;N<s.length;N++)if(T.context===s[N]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),Qh(f.return,a,n),l||(E=null);break e}f=T.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(i(341));E.lanes|=a,f=E.alternate,f!==null&&(f.lanes|=a),Qh(E,a,n),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===n){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function vl(n,s,a,l){n=null;for(var h=s,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var T=h.type;Mn(h.pendingProps.value,E.value)||(n!==null?n.push(T):n=[T])}}else if(h===Nt.current){if(E=h.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(Yl):n=[Yl])}h=h.return}n!==null&&Kh(s,n,a,l),s.flags|=262144}function Eu(n){for(n=n.firstContext;n!==null;){if(!Mn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function la(n){oa=n,gs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ln(n){return Yp(oa,n)}function wu(n,s){return oa===null&&la(n),Yp(n,s)}function Yp(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},gs===null){if(n===null)throw Error(i(308));gs=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else gs=gs.next=s;return a}var rS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},sS=r.unstable_scheduleCallback,iS=r.unstable_NormalPriority,zt={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yh(){return{controller:new rS,data:new Map,refCount:0}}function El(n){n.refCount--,n.refCount===0&&sS(iS,function(){n.controller.abort()})}var wl=null,Xh=0,eo=0,to=null;function aS(n,s){if(wl===null){var a=wl=[];Xh=0,eo=Zf(),to={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Xh++,s.then(Xp,Xp),s}function Xp(){if(--Xh===0&&wl!==null){to!==null&&(to.status="fulfilled");var n=wl;wl=null,eo=0,to=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function oS(n,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var $p=Q.S;Q.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&aS(n,s),$p!==null&&$p(n,s)};var ca=ee(null);function $h(){var n=ca.current;return n!==null?n:dt.pooledCache}function Tu(n,s){s===null?oe(ca,ca.current):oe(ca,s.pool)}function Wp(){var n=$h();return n===null?null:{parent:zt._currentValue,pool:n}}var Tl=Error(i(460)),Zp=Error(i(474)),bu=Error(i(542)),Wh={then:function(){}};function Jp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Su(){}function ey(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(Su,Su),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ny(n),n;default:if(typeof s.status=="string")s.then(Su,Su);else{if(n=dt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ny(n),n}throw bl=s,Tl}}var bl=null;function ty(){if(bl===null)throw Error(i(459));var n=bl;return bl=null,n}function ny(n){if(n===Tl||n===bu)throw Error(i(483))}var Ys=!1;function Zh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jh(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Xs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function $s(n,s,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(nt&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=pu(n),Bp(n,null,a),s}return gu(n,l,s,a),pu(n)}function Sl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,zi(n,a)}}function ef(n,s){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=E:f=f.next=E,a=a.next}while(a!==null);f===null?h=f=s:f=f.next=s}else h=f=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var tf=!1;function Al(){if(tf){var n=to;if(n!==null)throw n}}function xl(n,s,a,l){tf=!1;var h=n.updateQueue;Ys=!1;var f=h.firstBaseUpdate,E=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var N=T,B=N.next;N.next=null,E===null?f=B:E.next=B,E=N;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,T=Z.lastBaseUpdate,T!==E&&(T===null?Z.firstBaseUpdate=B:T.next=B,Z.lastBaseUpdate=N))}if(f!==null){var te=h.baseState;E=0,Z=B=N=null,T=f;do{var F=T.lane&-536870913,G=F!==T.lane;if(G?(Ge&F)===F:(l&F)===F){F!==0&&F===eo&&(tf=!0),Z!==null&&(Z=Z.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Re=n,Te=T;F=s;var ot=a;switch(Te.tag){case 1:if(Re=Te.payload,typeof Re=="function"){te=Re.call(ot,te,F);break e}te=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Te.payload,F=typeof Re=="function"?Re.call(ot,te,F):Re,F==null)break e;te=w({},te,F);break e;case 2:Ys=!0}}F=T.callback,F!==null&&(n.flags|=64,G&&(n.flags|=8192),G=h.callbacks,G===null?h.callbacks=[F]:G.push(F))}else G={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Z===null?(B=Z=G,N=te):Z=Z.next=G,E|=F;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;G=T,T=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);Z===null&&(N=te),h.baseState=N,h.firstBaseUpdate=B,h.lastBaseUpdate=Z,f===null&&(h.shared.lanes=0),si|=E,n.lanes=E,n.memoizedState=te}}function ry(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function sy(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)ry(a[n],s)}var no=ee(null),Au=ee(0);function iy(n,s){n=bs,oe(Au,n),oe(no,s),bs=n|s.baseLanes}function nf(){oe(Au,bs),oe(no,no.current)}function rf(){bs=Au.current,ce(no),ce(Au)}var Ws=0,ke=null,it=null,Ot=null,xu=!1,ro=!1,ua=!1,Ru=0,Rl=0,so=null,lS=0;function Rt(){throw Error(i(321))}function sf(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Mn(n[a],s[a]))return!1;return!0}function af(n,s,a,l,h,f){return Ws=f,ke=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=n===null||n.memoizedState===null?By:Hy,ua=!1,f=a(l,h),ua=!1,ro&&(f=oy(s,a,l,h)),ay(n),f}function ay(n){Q.H=Pu;var s=it!==null&&it.next!==null;if(Ws=0,Ot=it=ke=null,xu=!1,Rl=0,so=null,s)throw Error(i(300));n===null||Qt||(n=n.dependencies,n!==null&&Eu(n)&&(Qt=!0))}function oy(n,s,a,l){ke=n;var h=0;do{if(ro&&(so=null),Rl=0,ro=!1,25<=h)throw Error(i(301));if(h+=1,Ot=it=null,n.updateQueue!=null){var f=n.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=gS,f=s(a,l)}while(ro);return f}function cS(){var n=Q.H,s=n.useState()[0];return s=typeof s.then=="function"?Il(s):s,n=n.useState()[0],(it!==null?it.memoizedState:null)!==n&&(ke.flags|=1024),s}function of(){var n=Ru!==0;return Ru=0,n}function lf(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function cf(n){if(xu){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}xu=!1}Ws=0,Ot=it=ke=null,ro=!1,Rl=Ru=0,so=null}function bn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ke.memoizedState=Ot=n:Ot=Ot.next=n,Ot}function Pt(){if(it===null){var n=ke.alternate;n=n!==null?n.memoizedState:null}else n=it.next;var s=Ot===null?ke.memoizedState:Ot.next;if(s!==null)Ot=s,it=n;else{if(n===null)throw ke.alternate===null?Error(i(467)):Error(i(310));it=n,n={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Ot===null?ke.memoizedState=Ot=n:Ot=Ot.next=n}return Ot}function uf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(n){var s=Rl;return Rl+=1,so===null&&(so=[]),n=ey(so,n,s),s=ke,(Ot===null?s.memoizedState:Ot.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?By:Hy),n}function Iu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Il(n);if(n.$$typeof===ie)return ln(n)}throw Error(i(438,String(n)))}function df(n){var s=null,a=ke.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=uf(),ke.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),l=0;l<n;l++)a[l]=P;return s.index++,a}function ys(n,s){return typeof s=="function"?s(n):s}function Cu(n){var s=Pt();return hf(s,it,n)}function hf(n,s,a){var l=n.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var h=n.baseQueue,f=l.pending;if(f!==null){if(h!==null){var E=h.next;h.next=f.next,f.next=E}s.baseQueue=h=f,l.pending=null}if(f=n.baseState,h===null)n.memoizedState=f;else{s=h.next;var T=E=null,N=null,B=s,Z=!1;do{var te=B.lane&-536870913;if(te!==B.lane?(Ge&te)===te:(Ws&te)===te){var F=B.revertLane;if(F===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),te===eo&&(Z=!0);else if((Ws&F)===F){B=B.next,F===eo&&(Z=!0);continue}else te={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(T=N=te,E=f):N=N.next=te,ke.lanes|=F,si|=F;te=B.action,ua&&a(f,te),f=B.hasEagerState?B.eagerState:a(f,te)}else F={lane:te,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(T=N=F,E=f):N=N.next=F,ke.lanes|=te,si|=te;B=B.next}while(B!==null&&B!==s);if(N===null?E=f:N.next=T,!Mn(f,n.memoizedState)&&(Qt=!0,Z&&(a=to,a!==null)))throw a;n.memoizedState=f,n.baseState=E,n.baseQueue=N,l.lastRenderedState=f}return h===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function ff(n){var s=Pt(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=n;var l=a.dispatch,h=a.pending,f=s.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do f=n(f,E.action),E=E.next;while(E!==h);Mn(f,s.memoizedState)||(Qt=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),a.lastRenderedState=f}return[f,l]}function ly(n,s,a){var l=ke,h=Pt(),f=Je;if(f){if(a===void 0)throw Error(i(407));a=a()}else a=s();var E=!Mn((it||h).memoizedState,a);E&&(h.memoizedState=a,Qt=!0),h=h.queue;var T=dy.bind(null,l,h,n);if(Cl(2048,8,T,[n]),h.getSnapshot!==s||E||Ot!==null&&Ot.memoizedState.tag&1){if(l.flags|=2048,io(9,Nu(),uy.bind(null,l,h,a,s),null),dt===null)throw Error(i(349));f||(Ws&124)!==0||cy(l,s,a)}return a}function cy(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=ke.updateQueue,s===null?(s=uf(),ke.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function uy(n,s,a,l){s.value=a,s.getSnapshot=l,hy(s)&&fy(n)}function dy(n,s,a){return a(function(){hy(s)&&fy(n)})}function hy(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Mn(n,a)}catch{return!0}}function fy(n){var s=$a(n,2);s!==null&&zn(s,n,2)}function mf(n){var s=bn();if(typeof n=="function"){var a=n;if(n=a(),ua){yn(!0);try{a()}finally{yn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:n},s}function my(n,s,a,l){return n.baseState=a,hf(n,it,typeof l=="function"?l:ys)}function uS(n,s,a,l,h){if(Ou(n))throw Error(i(485));if(n=s.action,n!==null){var f={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};Q.T!==null?a(!0):f.isTransition=!1,l(f),a=s.pending,a===null?(f.next=s.pending=f,gy(s,f)):(f.next=a.next,s.pending=a.next=f)}}function gy(n,s){var a=s.action,l=s.payload,h=n.state;if(s.isTransition){var f=Q.T,E={};Q.T=E;try{var T=a(h,l),N=Q.S;N!==null&&N(E,T),py(n,s,T)}catch(B){gf(n,s,B)}finally{Q.T=f}}else try{f=a(h,l),py(n,s,f)}catch(B){gf(n,s,B)}}function py(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){yy(n,s,l)},function(l){return gf(n,s,l)}):yy(n,s,a)}function yy(n,s,a){s.status="fulfilled",s.value=a,_y(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,gy(n,a)))}function gf(n,s,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,_y(s),s=s.next;while(s!==l)}n.action=null}function _y(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function vy(n,s){return s}function Ey(n,s){if(Je){var a=dt.formState;if(a!==null){e:{var l=ke;if(Je){if(Tt){t:{for(var h=Tt,f=Mr;h.nodeType!==8;){if(!f){h=null;break t}if(h=mr(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){Tt=mr(h.nextSibling),l=h.data==="F!";break e}}aa(l)}l=!1}l&&(s=a[0])}}return a=bn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:s},a.queue=l,a=Uy.bind(null,ke,l),l.dispatch=a,l=mf(!1),f=Ef.bind(null,ke,!1,l.queue),l=bn(),h={state:s,dispatch:null,action:n,pending:null},l.queue=h,a=uS.bind(null,ke,h,f,a),h.dispatch=a,l.memoizedState=n,[s,a,!1]}function wy(n){var s=Pt();return Ty(s,it,n)}function Ty(n,s,a){if(s=hf(n,s,vy)[0],n=Cu(ys)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Il(s)}catch(E){throw E===Tl?bu:E}else l=s;s=Pt();var h=s.queue,f=h.dispatch;return a!==s.memoizedState&&(ke.flags|=2048,io(9,Nu(),dS.bind(null,h,a),null)),[l,f,n]}function dS(n,s){n.action=s}function by(n){var s=Pt(),a=it;if(a!==null)return Ty(s,a,n);Pt(),s=s.memoizedState,a=Pt();var l=a.queue.dispatch;return a.memoizedState=n,[s,l,!1]}function io(n,s,a,l){return n={tag:n,create:a,deps:l,inst:s,next:null},s=ke.updateQueue,s===null&&(s=uf(),ke.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,s.lastEffect=n),n}function Nu(){return{destroy:void 0,resource:void 0}}function Sy(){return Pt().memoizedState}function Du(n,s,a,l){var h=bn();l=l===void 0?null:l,ke.flags|=n,h.memoizedState=io(1|s,Nu(),a,l)}function Cl(n,s,a,l){var h=Pt();l=l===void 0?null:l;var f=h.memoizedState.inst;it!==null&&l!==null&&sf(l,it.memoizedState.deps)?h.memoizedState=io(s,f,a,l):(ke.flags|=n,h.memoizedState=io(1|s,f,a,l))}function Ay(n,s){Du(8390656,8,n,s)}function xy(n,s){Cl(2048,8,n,s)}function Ry(n,s){return Cl(4,2,n,s)}function Iy(n,s){return Cl(4,4,n,s)}function Cy(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Ny(n,s,a){a=a!=null?a.concat([n]):null,Cl(4,4,Cy.bind(null,s,n),a)}function pf(){}function Dy(n,s){var a=Pt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&sf(s,l[1])?l[0]:(a.memoizedState=[n,s],n)}function Oy(n,s){var a=Pt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&sf(s,l[1]))return l[0];if(l=n(),ua){yn(!0);try{n()}finally{yn(!1)}}return a.memoizedState=[l,s],l}function yf(n,s,a){return a===void 0||(Ws&1073741824)!==0?n.memoizedState=s:(n.memoizedState=a,n=k_(),ke.lanes|=n,si|=n,a)}function Py(n,s,a,l){return Mn(a,s)?a:no.current!==null?(n=yf(n,a,l),Mn(n,s)||(Qt=!0),n):(Ws&42)===0?(Qt=!0,n.memoizedState=a):(n=k_(),ke.lanes|=n,si|=n,s)}function My(n,s,a,l,h){var f=ae.p;ae.p=f!==0&&8>f?f:8;var E=Q.T,T={};Q.T=T,Ef(n,!1,s,a);try{var N=h(),B=Q.S;if(B!==null&&B(T,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Z=oS(N,l);Nl(n,s,Z,Un(n))}else Nl(n,s,l,Un(n))}catch(te){Nl(n,s,{then:function(){},status:"rejected",reason:te},Un())}finally{ae.p=f,Q.T=E}}function hS(){}function _f(n,s,a,l){if(n.tag!==5)throw Error(i(476));var h=ky(n).queue;My(n,h,s,Y,a===null?hS:function(){return Vy(n),a(l)})}function ky(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:Y},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Vy(n){var s=ky(n).next.queue;Nl(n,s,{},Un())}function vf(){return ln(Yl)}function jy(){return Pt().memoizedState}function Ly(){return Pt().memoizedState}function fS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=Un();n=Xs(a);var l=$s(s,n,a);l!==null&&(zn(l,s,a),Sl(l,s,a)),s={cache:Yh()},n.payload=s;return}s=s.return}}function mS(n,s,a){var l=Un();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ou(n)?zy(s,a):(a=Lh(n,s,a,l),a!==null&&(zn(a,n,l),qy(a,s,l)))}function Uy(n,s,a){var l=Un();Nl(n,s,a,l)}function Nl(n,s,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ou(n))zy(s,h);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var E=s.lastRenderedState,T=f(E,a);if(h.hasEagerState=!0,h.eagerState=T,Mn(T,E))return gu(n,s,h,0),dt===null&&mu(),!1}catch{}finally{}if(a=Lh(n,s,h,l),a!==null)return zn(a,n,l),qy(a,s,l),!0}return!1}function Ef(n,s,a,l){if(l={lane:2,revertLane:Zf(),action:l,hasEagerState:!1,eagerState:null,next:null},Ou(n)){if(s)throw Error(i(479))}else s=Lh(n,a,l,2),s!==null&&zn(s,n,2)}function Ou(n){var s=n.alternate;return n===ke||s!==null&&s===ke}function zy(n,s){ro=xu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function qy(n,s,a){if((a&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,zi(n,a)}}var Pu={readContext:ln,use:Iu,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},By={readContext:ln,use:Iu,useCallback:function(n,s){return bn().memoizedState=[n,s===void 0?null:s],n},useContext:ln,useEffect:Ay,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Du(4194308,4,Cy.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Du(4194308,4,n,s)},useInsertionEffect:function(n,s){Du(4,2,n,s)},useMemo:function(n,s){var a=bn();s=s===void 0?null:s;var l=n();if(ua){yn(!0);try{n()}finally{yn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(n,s,a){var l=bn();if(a!==void 0){var h=a(s);if(ua){yn(!0);try{a(s)}finally{yn(!1)}}}else h=s;return l.memoizedState=l.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},l.queue=n,n=n.dispatch=mS.bind(null,ke,n),[l.memoizedState,n]},useRef:function(n){var s=bn();return n={current:n},s.memoizedState=n},useState:function(n){n=mf(n);var s=n.queue,a=Uy.bind(null,ke,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:pf,useDeferredValue:function(n,s){var a=bn();return yf(a,n,s)},useTransition:function(){var n=mf(!1);return n=My.bind(null,ke,n.queue,!0,!1),bn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var l=ke,h=bn();if(Je){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),dt===null)throw Error(i(349));(Ge&124)!==0||cy(l,s,a)}h.memoizedState=a;var f={value:a,getSnapshot:s};return h.queue=f,Ay(dy.bind(null,l,f,n),[n]),l.flags|=2048,io(9,Nu(),uy.bind(null,l,f,a,s),null),a},useId:function(){var n=bn(),s=dt.identifierPrefix;if(Je){var a=ms,l=fs;a=(l&~(1<<32-Ht(l)-1)).toString(32)+a,s="«"+s+"R"+a,a=Ru++,0<a&&(s+="H"+a.toString(32)),s+="»"}else a=lS++,s="«"+s+"r"+a.toString(32)+"»";return n.memoizedState=s},useHostTransitionStatus:vf,useFormState:Ey,useActionState:Ey,useOptimistic:function(n){var s=bn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Ef.bind(null,ke,!0,a),a.dispatch=s,[n,s]},useMemoCache:df,useCacheRefresh:function(){return bn().memoizedState=fS.bind(null,ke)}},Hy={readContext:ln,use:Iu,useCallback:Dy,useContext:ln,useEffect:xy,useImperativeHandle:Ny,useInsertionEffect:Ry,useLayoutEffect:Iy,useMemo:Oy,useReducer:Cu,useRef:Sy,useState:function(){return Cu(ys)},useDebugValue:pf,useDeferredValue:function(n,s){var a=Pt();return Py(a,it.memoizedState,n,s)},useTransition:function(){var n=Cu(ys)[0],s=Pt().memoizedState;return[typeof n=="boolean"?n:Il(n),s]},useSyncExternalStore:ly,useId:jy,useHostTransitionStatus:vf,useFormState:wy,useActionState:wy,useOptimistic:function(n,s){var a=Pt();return my(a,it,n,s)},useMemoCache:df,useCacheRefresh:Ly},gS={readContext:ln,use:Iu,useCallback:Dy,useContext:ln,useEffect:xy,useImperativeHandle:Ny,useInsertionEffect:Ry,useLayoutEffect:Iy,useMemo:Oy,useReducer:ff,useRef:Sy,useState:function(){return ff(ys)},useDebugValue:pf,useDeferredValue:function(n,s){var a=Pt();return it===null?yf(a,n,s):Py(a,it.memoizedState,n,s)},useTransition:function(){var n=ff(ys)[0],s=Pt().memoizedState;return[typeof n=="boolean"?n:Il(n),s]},useSyncExternalStore:ly,useId:jy,useHostTransitionStatus:vf,useFormState:by,useActionState:by,useOptimistic:function(n,s){var a=Pt();return it!==null?my(a,it,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:df,useCacheRefresh:Ly},ao=null,Dl=0;function Mu(n){var s=Dl;return Dl+=1,ao===null&&(ao=[]),ey(ao,n,s)}function Ol(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function ku(n,s){throw s.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Fy(n){var s=n._init;return s(n._payload)}function Gy(n){function s(L,k){if(n){var q=L.deletions;q===null?(L.deletions=[k],L.flags|=16):q.push(k)}}function a(L,k){if(!n)return null;for(;k!==null;)s(L,k),k=k.sibling;return null}function l(L){for(var k=new Map;L!==null;)L.key!==null?k.set(L.key,L):k.set(L.index,L),L=L.sibling;return k}function h(L,k){return L=hs(L,k),L.index=0,L.sibling=null,L}function f(L,k,q){return L.index=q,n?(q=L.alternate,q!==null?(q=q.index,q<k?(L.flags|=67108866,k):q):(L.flags|=67108866,k)):(L.flags|=1048576,k)}function E(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function T(L,k,q,J){return k===null||k.tag!==6?(k=zh(q,L.mode,J),k.return=L,k):(k=h(k,q),k.return=L,k)}function N(L,k,q,J){var ye=q.type;return ye===j?Z(L,k,q.props.children,J,q.key):k!==null&&(k.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===x&&Fy(ye)===k.type)?(k=h(k,q.props),Ol(k,q),k.return=L,k):(k=yu(q.type,q.key,q.props,null,L.mode,J),Ol(k,q),k.return=L,k)}function B(L,k,q,J){return k===null||k.tag!==4||k.stateNode.containerInfo!==q.containerInfo||k.stateNode.implementation!==q.implementation?(k=qh(q,L.mode,J),k.return=L,k):(k=h(k,q.children||[]),k.return=L,k)}function Z(L,k,q,J,ye){return k===null||k.tag!==7?(k=na(q,L.mode,J,ye),k.return=L,k):(k=h(k,q),k.return=L,k)}function te(L,k,q){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=zh(""+k,L.mode,q),k.return=L,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case A:return q=yu(k.type,k.key,k.props,null,L.mode,q),Ol(q,k),q.return=L,q;case I:return k=qh(k,L.mode,q),k.return=L,k;case x:var J=k._init;return k=J(k._payload),te(L,k,q)}if(Me(k)||V(k))return k=na(k,L.mode,q,null),k.return=L,k;if(typeof k.then=="function")return te(L,Mu(k),q);if(k.$$typeof===ie)return te(L,wu(L,k),q);ku(L,k)}return null}function F(L,k,q,J){var ye=k!==null?k.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ye!==null?null:T(L,k,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case A:return q.key===ye?N(L,k,q,J):null;case I:return q.key===ye?B(L,k,q,J):null;case x:return ye=q._init,q=ye(q._payload),F(L,k,q,J)}if(Me(q)||V(q))return ye!==null?null:Z(L,k,q,J,null);if(typeof q.then=="function")return F(L,k,Mu(q),J);if(q.$$typeof===ie)return F(L,k,wu(L,q),J);ku(L,q)}return null}function G(L,k,q,J,ye){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return L=L.get(q)||null,T(k,L,""+J,ye);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case A:return L=L.get(J.key===null?q:J.key)||null,N(k,L,J,ye);case I:return L=L.get(J.key===null?q:J.key)||null,B(k,L,J,ye);case x:var Ve=J._init;return J=Ve(J._payload),G(L,k,q,J,ye)}if(Me(J)||V(J))return L=L.get(q)||null,Z(k,L,J,ye,null);if(typeof J.then=="function")return G(L,k,q,Mu(J),ye);if(J.$$typeof===ie)return G(L,k,q,wu(k,J),ye);ku(k,J)}return null}function Re(L,k,q,J){for(var ye=null,Ve=null,_e=k,be=k=0,Yt=null;_e!==null&&be<q.length;be++){_e.index>be?(Yt=_e,_e=null):Yt=_e.sibling;var Xe=F(L,_e,q[be],J);if(Xe===null){_e===null&&(_e=Yt);break}n&&_e&&Xe.alternate===null&&s(L,_e),k=f(Xe,k,be),Ve===null?ye=Xe:Ve.sibling=Xe,Ve=Xe,_e=Yt}if(be===q.length)return a(L,_e),Je&&sa(L,be),ye;if(_e===null){for(;be<q.length;be++)_e=te(L,q[be],J),_e!==null&&(k=f(_e,k,be),Ve===null?ye=_e:Ve.sibling=_e,Ve=_e);return Je&&sa(L,be),ye}for(_e=l(_e);be<q.length;be++)Yt=G(_e,L,be,q[be],J),Yt!==null&&(n&&Yt.alternate!==null&&_e.delete(Yt.key===null?be:Yt.key),k=f(Yt,k,be),Ve===null?ye=Yt:Ve.sibling=Yt,Ve=Yt);return n&&_e.forEach(function(fi){return s(L,fi)}),Je&&sa(L,be),ye}function Te(L,k,q,J){if(q==null)throw Error(i(151));for(var ye=null,Ve=null,_e=k,be=k=0,Yt=null,Xe=q.next();_e!==null&&!Xe.done;be++,Xe=q.next()){_e.index>be?(Yt=_e,_e=null):Yt=_e.sibling;var fi=F(L,_e,Xe.value,J);if(fi===null){_e===null&&(_e=Yt);break}n&&_e&&fi.alternate===null&&s(L,_e),k=f(fi,k,be),Ve===null?ye=fi:Ve.sibling=fi,Ve=fi,_e=Yt}if(Xe.done)return a(L,_e),Je&&sa(L,be),ye;if(_e===null){for(;!Xe.done;be++,Xe=q.next())Xe=te(L,Xe.value,J),Xe!==null&&(k=f(Xe,k,be),Ve===null?ye=Xe:Ve.sibling=Xe,Ve=Xe);return Je&&sa(L,be),ye}for(_e=l(_e);!Xe.done;be++,Xe=q.next())Xe=G(_e,L,be,Xe.value,J),Xe!==null&&(n&&Xe.alternate!==null&&_e.delete(Xe.key===null?be:Xe.key),k=f(Xe,k,be),Ve===null?ye=Xe:Ve.sibling=Xe,Ve=Xe);return n&&_e.forEach(function(pA){return s(L,pA)}),Je&&sa(L,be),ye}function ot(L,k,q,J){if(typeof q=="object"&&q!==null&&q.type===j&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case A:e:{for(var ye=q.key;k!==null;){if(k.key===ye){if(ye=q.type,ye===j){if(k.tag===7){a(L,k.sibling),J=h(k,q.props.children),J.return=L,L=J;break e}}else if(k.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===x&&Fy(ye)===k.type){a(L,k.sibling),J=h(k,q.props),Ol(J,q),J.return=L,L=J;break e}a(L,k);break}else s(L,k);k=k.sibling}q.type===j?(J=na(q.props.children,L.mode,J,q.key),J.return=L,L=J):(J=yu(q.type,q.key,q.props,null,L.mode,J),Ol(J,q),J.return=L,L=J)}return E(L);case I:e:{for(ye=q.key;k!==null;){if(k.key===ye)if(k.tag===4&&k.stateNode.containerInfo===q.containerInfo&&k.stateNode.implementation===q.implementation){a(L,k.sibling),J=h(k,q.children||[]),J.return=L,L=J;break e}else{a(L,k);break}else s(L,k);k=k.sibling}J=qh(q,L.mode,J),J.return=L,L=J}return E(L);case x:return ye=q._init,q=ye(q._payload),ot(L,k,q,J)}if(Me(q))return Re(L,k,q,J);if(V(q)){if(ye=V(q),typeof ye!="function")throw Error(i(150));return q=ye.call(q),Te(L,k,q,J)}if(typeof q.then=="function")return ot(L,k,Mu(q),J);if(q.$$typeof===ie)return ot(L,k,wu(L,q),J);ku(L,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,k!==null&&k.tag===6?(a(L,k.sibling),J=h(k,q),J.return=L,L=J):(a(L,k),J=zh(q,L.mode,J),J.return=L,L=J),E(L)):a(L,k)}return function(L,k,q,J){try{Dl=0;var ye=ot(L,k,q,J);return ao=null,ye}catch(_e){if(_e===Tl||_e===bu)throw _e;var Ve=kn(29,_e,null,L.mode);return Ve.lanes=J,Ve.return=L,Ve}finally{}}}var oo=Gy(!0),Qy=Gy(!1),tr=ee(null),kr=null;function Zs(n){var s=n.alternate;oe(qt,qt.current&1),oe(tr,n),kr===null&&(s===null||no.current!==null||s.memoizedState!==null)&&(kr=n)}function Ky(n){if(n.tag===22){if(oe(qt,qt.current),oe(tr,n),kr===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(kr=n)}}else Js()}function Js(){oe(qt,qt.current),oe(tr,tr.current)}function _s(n){ce(tr),kr===n&&(kr=null),ce(qt)}var qt=ee(0);function Vu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||um(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function wf(n,s,a,l){s=n.memoizedState,a=a(l,s),a=a==null?s:w({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Tf={enqueueSetState:function(n,s,a){n=n._reactInternals;var l=Un(),h=Xs(l);h.payload=s,a!=null&&(h.callback=a),s=$s(n,h,l),s!==null&&(zn(s,n,l),Sl(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var l=Un(),h=Xs(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=$s(n,h,l),s!==null&&(zn(s,n,l),Sl(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Un(),l=Xs(a);l.tag=2,s!=null&&(l.callback=s),s=$s(n,l,a),s!==null&&(zn(s,n,a),Sl(s,n,a))}};function Yy(n,s,a,l,h,f,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,f,E):s.prototype&&s.prototype.isPureReactComponent?!ml(a,l)||!ml(h,f):!0}function Xy(n,s,a,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==n&&Tf.enqueueReplaceState(s,s.state,null)}function da(n,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(n=n.defaultProps){a===s&&(a=w({},a));for(var h in n)a[h]===void 0&&(a[h]=n[h])}return a}var ju=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function $y(n){ju(n)}function Wy(n){console.error(n)}function Zy(n){ju(n)}function Lu(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Jy(n,s,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function bf(n,s,a){return a=Xs(a),a.tag=3,a.payload={element:null},a.callback=function(){Lu(n,s)},a}function e_(n){return n=Xs(n),n.tag=3,n}function t_(n,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;n.payload=function(){return h(f)},n.callback=function(){Jy(s,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Jy(s,a,l),typeof h!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function pS(n,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&vl(s,a,h,!0),a=tr.current,a!==null){switch(a.tag){case 13:return kr===null?Kf():a.alternate===null&&bt===0&&(bt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Wh?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Xf(n,l,h)),!1;case 22:return a.flags|=65536,l===Wh?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Xf(n,l,h)),!1}throw Error(i(435,a.tag))}return Xf(n,l,h),Kf(),!1}if(Je)return s=tr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==Fh&&(n=Error(i(422),{cause:l}),_l(Wn(n,a)))):(l!==Fh&&(s=Error(i(423),{cause:l}),_l(Wn(s,a))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,l=Wn(l,a),h=bf(n.stateNode,l,h),ef(n,h),bt!==4&&(bt=2)),!1;var f=Error(i(520),{cause:l});if(f=Wn(f,a),Ul===null?Ul=[f]:Ul.push(f),bt!==4&&(bt=2),s===null)return!0;l=Wn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=h&-h,a.lanes|=n,n=bf(a.stateNode,l,n),ef(a,n),!1;case 1:if(s=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ii===null||!ii.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=e_(h),t_(h,n,a,l),ef(a,h),!1}a=a.return}while(a!==null);return!1}var n_=Error(i(461)),Qt=!1;function tn(n,s,a,l){s.child=n===null?Qy(s,null,a,l):oo(s,n.child,a,l)}function r_(n,s,a,l,h){a=a.render;var f=s.ref;if("ref"in l){var E={};for(var T in l)T!=="ref"&&(E[T]=l[T])}else E=l;return la(s),l=af(n,s,a,E,f,h),T=of(),n!==null&&!Qt?(lf(n,s,h),vs(n,s,h)):(Je&&T&&Bh(s),s.flags|=1,tn(n,s,l,h),s.child)}function s_(n,s,a,l,h){if(n===null){var f=a.type;return typeof f=="function"&&!Uh(f)&&f.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=f,i_(n,s,f,l,h)):(n=yu(a.type,null,l,s,s.mode,h),n.ref=s.ref,n.return=s,s.child=n)}if(f=n.child,!Df(n,h)){var E=f.memoizedProps;if(a=a.compare,a=a!==null?a:ml,a(E,l)&&n.ref===s.ref)return vs(n,s,h)}return s.flags|=1,n=hs(f,l),n.ref=s.ref,n.return=s,s.child=n}function i_(n,s,a,l,h){if(n!==null){var f=n.memoizedProps;if(ml(f,l)&&n.ref===s.ref)if(Qt=!1,s.pendingProps=l=f,Df(n,h))(n.flags&131072)!==0&&(Qt=!0);else return s.lanes=n.lanes,vs(n,s,h)}return Sf(n,s,a,l,h)}function a_(n,s,a){var l=s.pendingProps,h=l.children,f=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,n!==null){for(h=s.child=n.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;s.childLanes=f&~l}else s.childLanes=0,s.child=null;return o_(n,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Tu(s,f!==null?f.cachePool:null),f!==null?iy(s,f):nf(),Ky(s);else return s.lanes=s.childLanes=536870912,o_(n,s,f!==null?f.baseLanes|a:a,a)}else f!==null?(Tu(s,f.cachePool),iy(s,f),Js(),s.memoizedState=null):(n!==null&&Tu(s,null),nf(),Js());return tn(n,s,h,a),s.child}function o_(n,s,a,l){var h=$h();return h=h===null?null:{parent:zt._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},n!==null&&Tu(s,null),nf(),Ky(s),n!==null&&vl(n,s,l,!0),null}function Uu(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function Sf(n,s,a,l,h){return la(s),a=af(n,s,a,l,void 0,h),l=of(),n!==null&&!Qt?(lf(n,s,h),vs(n,s,h)):(Je&&l&&Bh(s),s.flags|=1,tn(n,s,a,h),s.child)}function l_(n,s,a,l,h,f){return la(s),s.updateQueue=null,a=oy(s,l,a,h),ay(n),l=of(),n!==null&&!Qt?(lf(n,s,f),vs(n,s,f)):(Je&&l&&Bh(s),s.flags|=1,tn(n,s,a,f),s.child)}function c_(n,s,a,l,h){if(la(s),s.stateNode===null){var f=Wa,E=a.contextType;typeof E=="object"&&E!==null&&(f=ln(E)),f=new a(l,f),s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Tf,s.stateNode=f,f._reactInternals=s,f=s.stateNode,f.props=l,f.state=s.memoizedState,f.refs={},Zh(s),E=a.contextType,f.context=typeof E=="object"&&E!==null?ln(E):Wa,f.state=s.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(wf(s,a,E,l),f.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&Tf.enqueueReplaceState(f,f.state,null),xl(s,l,f,h),Al(),f.state=s.memoizedState),typeof f.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){f=s.stateNode;var T=s.memoizedProps,N=da(a,T);f.props=N;var B=f.context,Z=a.contextType;E=Wa,typeof Z=="object"&&Z!==null&&(E=ln(Z));var te=a.getDerivedStateFromProps;Z=typeof te=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,Z||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||B!==E)&&Xy(s,f,l,E),Ys=!1;var F=s.memoizedState;f.state=F,xl(s,l,f,h),Al(),B=s.memoizedState,T||F!==B||Ys?(typeof te=="function"&&(wf(s,a,te,l),B=s.memoizedState),(N=Ys||Yy(s,a,N,l,F,B,E))?(Z||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(s.flags|=4194308)):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=B),f.props=l,f.state=B,f.context=E,l=N):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{f=s.stateNode,Jh(n,s),E=s.memoizedProps,Z=da(a,E),f.props=Z,te=s.pendingProps,F=f.context,B=a.contextType,N=Wa,typeof B=="object"&&B!==null&&(N=ln(B)),T=a.getDerivedStateFromProps,(B=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==te||F!==N)&&Xy(s,f,l,N),Ys=!1,F=s.memoizedState,f.state=F,xl(s,l,f,h),Al();var G=s.memoizedState;E!==te||F!==G||Ys||n!==null&&n.dependencies!==null&&Eu(n.dependencies)?(typeof T=="function"&&(wf(s,a,T,l),G=s.memoizedState),(Z=Ys||Yy(s,a,Z,l,F,G,N)||n!==null&&n.dependencies!==null&&Eu(n.dependencies))?(B||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,G,N),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,G,N)),typeof f.componentDidUpdate=="function"&&(s.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=G),f.props=l,f.state=G,f.context=N,l=Z):(typeof f.componentDidUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&F===n.memoizedState||(s.flags|=1024),l=!1)}return f=l,Uu(n,s),l=(s.flags&128)!==0,f||l?(f=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),s.flags|=1,n!==null&&l?(s.child=oo(s,n.child,null,h),s.child=oo(s,null,a,h)):tn(n,s,a,h),s.memoizedState=f.state,n=s.child):n=vs(n,s,h),n}function u_(n,s,a,l){return yl(),s.flags|=256,tn(n,s,a,l),s.child}var Af={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xf(n){return{baseLanes:n,cachePool:Wp()}}function Rf(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=nr),n}function d_(n,s,a){var l=s.pendingProps,h=!1,f=(s.flags&128)!==0,E;if((E=f)||(E=n!==null&&n.memoizedState===null?!1:(qt.current&2)!==0),E&&(h=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if(Je){if(h?Zs(s):Js(),Je){var T=Tt,N;if(N=T){e:{for(N=T,T=Mr;N.nodeType!==8;){if(!T){T=null;break e}if(N=mr(N.nextSibling),N===null){T=null;break e}}T=N}T!==null?(s.memoizedState={dehydrated:T,treeContext:ra!==null?{id:fs,overflow:ms}:null,retryLane:536870912,hydrationErrors:null},N=kn(18,null,null,0),N.stateNode=T,N.return=s,s.child=N,wn=s,Tt=null,N=!0):N=!1}N||aa(s)}if(T=s.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return um(T)?s.lanes=32:s.lanes=536870912,null;_s(s)}return T=l.children,l=l.fallback,h?(Js(),h=s.mode,T=zu({mode:"hidden",children:T},h),l=na(l,h,a,null),T.return=s,l.return=s,T.sibling=l,s.child=T,h=s.child,h.memoizedState=xf(a),h.childLanes=Rf(n,E,a),s.memoizedState=Af,l):(Zs(s),If(s,T))}if(N=n.memoizedState,N!==null&&(T=N.dehydrated,T!==null)){if(f)s.flags&256?(Zs(s),s.flags&=-257,s=Cf(n,s,a)):s.memoizedState!==null?(Js(),s.child=n.child,s.flags|=128,s=null):(Js(),h=l.fallback,T=s.mode,l=zu({mode:"visible",children:l.children},T),h=na(h,T,a,null),h.flags|=2,l.return=s,h.return=s,l.sibling=h,s.child=l,oo(s,n.child,null,a),l=s.child,l.memoizedState=xf(a),l.childLanes=Rf(n,E,a),s.memoizedState=Af,s=h);else if(Zs(s),um(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var B=E.dgst;E=B,l=Error(i(419)),l.stack="",l.digest=E,_l({value:l,source:null,stack:null}),s=Cf(n,s,a)}else if(Qt||vl(n,s,a,!1),E=(a&n.childLanes)!==0,Qt||E){if(E=dt,E!==null&&(l=a&-a,l=(l&42)!==0?1:Tr(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==N.retryLane))throw N.retryLane=l,$a(n,l),zn(E,n,l),n_;T.data==="$?"||Kf(),s=Cf(n,s,a)}else T.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=N.treeContext,Tt=mr(T.nextSibling),wn=s,Je=!0,ia=null,Mr=!1,n!==null&&(Jn[er++]=fs,Jn[er++]=ms,Jn[er++]=ra,fs=n.id,ms=n.overflow,ra=s),s=If(s,l.children),s.flags|=4096);return s}return h?(Js(),h=l.fallback,T=s.mode,N=n.child,B=N.sibling,l=hs(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,B!==null?h=hs(B,h):(h=na(h,T,a,null),h.flags|=2),h.return=s,l.return=s,l.sibling=h,s.child=l,l=h,h=s.child,T=n.child.memoizedState,T===null?T=xf(a):(N=T.cachePool,N!==null?(B=zt._currentValue,N=N.parent!==B?{parent:B,pool:B}:N):N=Wp(),T={baseLanes:T.baseLanes|a,cachePool:N}),h.memoizedState=T,h.childLanes=Rf(n,E,a),s.memoizedState=Af,l):(Zs(s),a=n.child,n=a.sibling,a=hs(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=a,s.memoizedState=null,a)}function If(n,s){return s=zu({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function zu(n,s){return n=kn(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Cf(n,s,a){return oo(s,n.child,null,a),n=If(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function h_(n,s,a){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),Qh(n.return,s,a)}function Nf(n,s,a,l,h){var f=n.memoizedState;f===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function f_(n,s,a){var l=s.pendingProps,h=l.revealOrder,f=l.tail;if(tn(n,s,l.children,a),l=qt.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&h_(n,a,s);else if(n.tag===19)h_(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(oe(qt,l),h){case"forwards":for(a=s.child,h=null;a!==null;)n=a.alternate,n!==null&&Vu(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),Nf(s,!1,h,a,f);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(n=h.alternate,n!==null&&Vu(n)===null){s.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}Nf(s,!0,a,null,f);break;case"together":Nf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function vs(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),si|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(vl(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,a=hs(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=hs(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Df(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Eu(n)))}function yS(n,s,a){switch(s.tag){case 3:We(s,s.stateNode.containerInfo),Ks(s,zt,n.memoizedState.cache),yl();break;case 27:case 5:ar(s);break;case 4:We(s,s.stateNode.containerInfo);break;case 10:Ks(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Zs(s),s.flags|=128,null):(a&s.child.childLanes)!==0?d_(n,s,a):(Zs(s),n=vs(n,s,a),n!==null?n.sibling:null);Zs(s);break;case 19:var h=(n.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(vl(n,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return f_(n,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),oe(qt,qt.current),l)break;return null;case 22:case 23:return s.lanes=0,a_(n,s,a);case 24:Ks(s,zt,n.memoizedState.cache)}return vs(n,s,a)}function m_(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)Qt=!0;else{if(!Df(n,a)&&(s.flags&128)===0)return Qt=!1,yS(n,s,a);Qt=(n.flags&131072)!==0}else Qt=!1,Je&&(s.flags&1048576)!==0&&Fp(s,vu,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var l=s.elementType,h=l._init;if(l=h(l._payload),s.type=l,typeof l=="function")Uh(l)?(n=da(l,n),s.tag=1,s=c_(null,s,l,n,a)):(s.tag=0,s=Sf(null,s,l,n,a));else{if(l!=null){if(h=l.$$typeof,h===fe){s.tag=11,s=r_(null,s,l,n,a);break e}else if(h===D){s.tag=14,s=s_(null,s,l,n,a);break e}}throw s=De(l)||l,Error(i(306,s,""))}}return s;case 0:return Sf(n,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=da(l,s.pendingProps),c_(n,s,l,h,a);case 3:e:{if(We(s,s.stateNode.containerInfo),n===null)throw Error(i(387));l=s.pendingProps;var f=s.memoizedState;h=f.element,Jh(n,s),xl(s,l,null,a);var E=s.memoizedState;if(l=E.cache,Ks(s,zt,l),l!==f.cache&&Kh(s,[zt],a,!0),Al(),l=E.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=u_(n,s,l,a);break e}else if(l!==h){h=Wn(Error(i(424)),s),_l(h),s=u_(n,s,l,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Tt=mr(n.firstChild),wn=s,Je=!0,ia=null,Mr=!0,a=Qy(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(yl(),l===h){s=vs(n,s,a);break e}tn(n,s,l,a)}s=s.child}return s;case 26:return Uu(n,s),n===null?(a=_0(s.type,null,s.pendingProps,null))?s.memoizedState=a:Je||(a=s.type,n=s.pendingProps,l=ed(Se.current).createElement(a),l[At]=s,l[Et]=n,rn(l,a,n),xt(l),s.stateNode=l):s.memoizedState=_0(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return ar(s),n===null&&Je&&(l=s.stateNode=g0(s.type,s.pendingProps,Se.current),wn=s,Mr=!0,h=Tt,li(s.type)?(dm=h,Tt=mr(l.firstChild)):Tt=h),tn(n,s,s.pendingProps.children,a),Uu(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Je&&((h=l=Tt)&&(l=GS(l,s.type,s.pendingProps,Mr),l!==null?(s.stateNode=l,wn=s,Tt=mr(l.firstChild),Mr=!1,h=!0):h=!1),h||aa(s)),ar(s),h=s.type,f=s.pendingProps,E=n!==null?n.memoizedProps:null,l=f.children,om(h,f)?l=null:E!==null&&om(h,E)&&(s.flags|=32),s.memoizedState!==null&&(h=af(n,s,cS,null,null,a),Yl._currentValue=h),Uu(n,s),tn(n,s,l,a),s.child;case 6:return n===null&&Je&&((n=a=Tt)&&(a=QS(a,s.pendingProps,Mr),a!==null?(s.stateNode=a,wn=s,Tt=null,n=!0):n=!1),n||aa(s)),null;case 13:return d_(n,s,a);case 4:return We(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=oo(s,null,l,a):tn(n,s,l,a),s.child;case 11:return r_(n,s,s.type,s.pendingProps,a);case 7:return tn(n,s,s.pendingProps,a),s.child;case 8:return tn(n,s,s.pendingProps.children,a),s.child;case 12:return tn(n,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Ks(s,s.type,l.value),tn(n,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,la(s),h=ln(h),l=l(h),s.flags|=1,tn(n,s,l,a),s.child;case 14:return s_(n,s,s.type,s.pendingProps,a);case 15:return i_(n,s,s.type,s.pendingProps,a);case 19:return f_(n,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},n===null?(a=zu(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=hs(n.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return a_(n,s,a);case 24:return la(s),l=ln(zt),n===null?(h=$h(),h===null&&(h=dt,f=Yh(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),s.memoizedState={parent:l,cache:h},Zh(s),Ks(s,zt,h)):((n.lanes&a)!==0&&(Jh(n,s),xl(s,null,null,a),Al()),h=n.memoizedState,f=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Ks(s,zt,l)):(l=f.cache,Ks(s,zt,l),l!==h.cache&&Kh(s,[zt],a,!0))),tn(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Es(n){n.flags|=4}function g_(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!b0(s)){if(s=tr.current,s!==null&&((Ge&4194048)===Ge?kr!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||s!==kr))throw bl=Wh,Zp;n.flags|=8192}}function qu(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?qs():536870912,n.lanes|=s,ho|=s)}function Pl(n,s){if(!Je)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function pt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(s)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=l,n.childLanes=a,s}function _S(n,s,a){var l=s.pendingProps;switch(Hh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(s),null;case 1:return pt(s),null;case 3:return a=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ps(zt),Zt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(pl(s)?Es(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Kp())),pt(s),null;case 26:return a=s.memoizedState,n===null?(Es(s),a!==null?(pt(s),g_(s,a)):(pt(s),s.flags&=-16777217)):a?a!==n.memoizedState?(Es(s),pt(s),g_(s,a)):(pt(s),s.flags&=-16777217):(n.memoizedProps!==l&&Es(s),pt(s),s.flags&=-16777217),null;case 27:or(s),a=Se.current;var h=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==l&&Es(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return pt(s),null}n=ve.current,pl(s)?Gp(s):(n=g0(h,l,a),s.stateNode=n,Es(s))}return pt(s),null;case 5:if(or(s),a=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&Es(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return pt(s),null}if(n=ve.current,pl(s))Gp(s);else{switch(h=ed(Se.current),n){case 1:n=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=h.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}n[At]=s,n[Et]=l;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)n.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=n;e:switch(rn(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Es(s)}}return pt(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&Es(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(n=Se.current,pl(s)){if(n=s.stateNode,a=s.memoizedProps,l=null,h=wn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}n[At]=s,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||l0(n.nodeValue,a)),n||aa(s)}else n=ed(n).createTextNode(l),n[At]=s,s.stateNode=n}return pt(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=pl(s),l!==null&&l.dehydrated!==null){if(n===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[At]=s}else yl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pt(s),h=!1}else h=Kp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(_s(s),s):(_s(s),null)}if(_s(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==n&&a&&(s.child.flags|=8192),qu(s,s.updateQueue),pt(s),null;case 4:return Zt(),n===null&&nm(s.stateNode.containerInfo),pt(s),null;case 10:return ps(s.type),pt(s),null;case 19:if(ce(qt),h=s.memoizedState,h===null)return pt(s),null;if(l=(s.flags&128)!==0,f=h.rendering,f===null)if(l)Pl(h,!1);else{if(bt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(f=Vu(n),f!==null){for(s.flags|=128,Pl(h,!1),n=f.updateQueue,s.updateQueue=n,qu(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)Hp(a,n),a=a.sibling;return oe(qt,qt.current&1|2),s.child}n=n.sibling}h.tail!==null&&pn()>Fu&&(s.flags|=128,l=!0,Pl(h,!1),s.lanes=4194304)}else{if(!l)if(n=Vu(f),n!==null){if(s.flags|=128,l=!0,n=n.updateQueue,s.updateQueue=n,qu(s,n),Pl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Je)return pt(s),null}else 2*pn()-h.renderingStartTime>Fu&&a!==536870912&&(s.flags|=128,l=!0,Pl(h,!1),s.lanes=4194304);h.isBackwards?(f.sibling=s.child,s.child=f):(n=h.last,n!==null?n.sibling=f:s.child=f,h.last=f)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=pn(),s.sibling=null,n=qt.current,oe(qt,l?n&1|2:n&1),s):(pt(s),null);case 22:case 23:return _s(s),rf(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(pt(s),s.subtreeFlags&6&&(s.flags|=8192)):pt(s),a=s.updateQueue,a!==null&&qu(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),n!==null&&ce(ca),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),ps(zt),pt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function vS(n,s){switch(Hh(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ps(zt),Zt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return or(s),null;case 13:if(_s(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));yl()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ce(qt),null;case 4:return Zt(),null;case 10:return ps(s.type),null;case 22:case 23:return _s(s),rf(),n!==null&&ce(ca),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ps(zt),null;case 25:return null;default:return null}}function p_(n,s){switch(Hh(s),s.tag){case 3:ps(zt),Zt();break;case 26:case 27:case 5:or(s);break;case 4:Zt();break;case 13:_s(s);break;case 19:ce(qt);break;case 10:ps(s.type);break;case 22:case 23:_s(s),rf(),n!==null&&ce(ca);break;case 24:ps(zt)}}function Ml(n,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&n)===n){l=void 0;var f=a.create,E=a.inst;l=f(),E.destroy=l}a=a.next}while(a!==h)}}catch(T){ct(s,s.return,T)}}function ei(n,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&n)===n){var E=l.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,h=s;var N=a,B=T;try{B()}catch(Z){ct(h,N,Z)}}}l=l.next}while(l!==f)}}catch(Z){ct(s,s.return,Z)}}function y_(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{sy(s,a)}catch(l){ct(n,n.return,l)}}}function __(n,s,a){a.props=da(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){ct(n,s,l)}}function kl(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(h){ct(n,s,h)}}function Vr(n,s){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ct(n,s,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ct(n,s,h)}else a.current=null}function v_(n){var s=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ct(n,n.return,h)}}function Of(n,s,a){try{var l=n.stateNode;zS(l,n.type,a,s),l[Et]=s}catch(h){ct(n,n.return,h)}}function E_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&li(n.type)||n.tag===4}function Pf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||E_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&li(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Mf(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ju));else if(l!==4&&(l===27&&li(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(Mf(n,s,a),n=n.sibling;n!==null;)Mf(n,s,a),n=n.sibling}function Bu(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(l!==4&&(l===27&&li(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Bu(n,s,a),n=n.sibling;n!==null;)Bu(n,s,a),n=n.sibling}function w_(n){var s=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);rn(s,l,a),s[At]=n,s[Et]=a}catch(f){ct(n,n.return,f)}}var ws=!1,It=!1,kf=!1,T_=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function ES(n,s){if(n=n.containerInfo,im=ad,n=Pp(n),Oh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var E=0,T=-1,N=-1,B=0,Z=0,te=n,F=null;t:for(;;){for(var G;te!==a||h!==0&&te.nodeType!==3||(T=E+h),te!==f||l!==0&&te.nodeType!==3||(N=E+l),te.nodeType===3&&(E+=te.nodeValue.length),(G=te.firstChild)!==null;)F=te,te=G;for(;;){if(te===n)break t;if(F===a&&++B===h&&(T=E),F===f&&++Z===l&&(N=E),(G=te.nextSibling)!==null)break;te=F,F=te.parentNode}te=G}a=T===-1||N===-1?null:{start:T,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(am={focusedElem:n,selectionRange:a},ad=!1,Kt=s;Kt!==null;)if(s=Kt,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,Kt=n;else for(;Kt!==null;){switch(s=Kt,f=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&f!==null){n=void 0,a=s,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Re=da(a.type,h,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(Re,f),l.__reactInternalSnapshotBeforeUpdate=n}catch(Te){ct(a,a.return,Te)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)cm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":cm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Kt=n;break}Kt=s.return}}function b_(n,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ti(n,a),l&4&&Ml(5,a);break;case 1:if(ti(n,a),l&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(E){ct(a,a.return,E)}else{var h=da(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(h,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){ct(a,a.return,E)}}l&64&&y_(a),l&512&&kl(a,a.return);break;case 3:if(ti(n,a),l&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{sy(n,s)}catch(E){ct(a,a.return,E)}}break;case 27:s===null&&l&4&&w_(a);case 26:case 5:ti(n,a),s===null&&l&4&&v_(a),l&512&&kl(a,a.return);break;case 12:ti(n,a);break;case 13:ti(n,a),l&4&&x_(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=CS.bind(null,a),KS(n,a))));break;case 22:if(l=a.memoizedState!==null||ws,!l){s=s!==null&&s.memoizedState!==null||It,h=ws;var f=It;ws=l,(It=s)&&!f?ni(n,a,(a.subtreeFlags&8772)!==0):ti(n,a),ws=h,It=f}break;case 30:break;default:ti(n,a)}}function S_(n){var s=n.alternate;s!==null&&(n.alternate=null,S_(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Hs(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ft=null,Sn=!1;function Ts(n,s,a){for(a=a.child;a!==null;)A_(n,s,a),a=a.sibling}function A_(n,s,a){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(ht,a)}catch{}switch(a.tag){case 26:It||Vr(a,s),Ts(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:It||Vr(a,s);var l=ft,h=Sn;li(a.type)&&(ft=a.stateNode,Sn=!1),Ts(n,s,a),Fl(a.stateNode),ft=l,Sn=h;break;case 5:It||Vr(a,s);case 6:if(l=ft,h=Sn,ft=null,Ts(n,s,a),ft=l,Sn=h,ft!==null)if(Sn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(a.stateNode)}catch(f){ct(a,s,f)}else try{ft.removeChild(a.stateNode)}catch(f){ct(a,s,f)}break;case 18:ft!==null&&(Sn?(n=ft,f0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Zl(n)):f0(ft,a.stateNode));break;case 4:l=ft,h=Sn,ft=a.stateNode.containerInfo,Sn=!0,Ts(n,s,a),ft=l,Sn=h;break;case 0:case 11:case 14:case 15:It||ei(2,a,s),It||ei(4,a,s),Ts(n,s,a);break;case 1:It||(Vr(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&__(a,s,l)),Ts(n,s,a);break;case 21:Ts(n,s,a);break;case 22:It=(l=It)||a.memoizedState!==null,Ts(n,s,a),It=l;break;default:Ts(n,s,a)}}function x_(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Zl(n)}catch(a){ct(s,s.return,a)}}function wS(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new T_),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new T_),s;default:throw Error(i(435,n.tag))}}function Vf(n,s){var a=wS(n);s.forEach(function(l){var h=NS.bind(null,n,l);a.has(l)||(a.add(l),l.then(h,h))})}function Vn(n,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=n,E=s,T=E;e:for(;T!==null;){switch(T.tag){case 27:if(li(T.type)){ft=T.stateNode,Sn=!1;break e}break;case 5:ft=T.stateNode,Sn=!1;break e;case 3:case 4:ft=T.stateNode.containerInfo,Sn=!0;break e}T=T.return}if(ft===null)throw Error(i(160));A_(f,E,h),ft=null,Sn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)R_(s,n),s=s.sibling}var fr=null;function R_(n,s){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Vn(s,n),jn(n),l&4&&(ei(3,n,n.return),Ml(3,n),ei(5,n,n.return));break;case 1:Vn(s,n),jn(n),l&512&&(It||a===null||Vr(a,a.return)),l&64&&ws&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=fr;if(Vn(s,n),jn(n),l&512&&(It||a===null||Vr(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[On]||f[At]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),rn(f,l,a),f[At]=n,xt(f),l=f;break e;case"link":var E=w0("link","href",h).get(l+(a.href||""));if(E){for(var T=0;T<E.length;T++)if(f=E[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(T,1);break t}}f=h.createElement(l),rn(f,l,a),h.head.appendChild(f);break;case"meta":if(E=w0("meta","content",h).get(l+(a.content||""))){for(T=0;T<E.length;T++)if(f=E[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(T,1);break t}}f=h.createElement(l),rn(f,l,a),h.head.appendChild(f);break;default:throw Error(i(468,l))}f[At]=n,xt(f),l=f}n.stateNode=l}else T0(h,n.type,n.stateNode);else n.stateNode=E0(h,l,n.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?T0(h,n.type,n.stateNode):E0(h,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Of(n,n.memoizedProps,a.memoizedProps)}break;case 27:Vn(s,n),jn(n),l&512&&(It||a===null||Vr(a,a.return)),a!==null&&l&4&&Of(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Vn(s,n),jn(n),l&512&&(It||a===null||Vr(a,a.return)),n.flags&32){h=n.stateNode;try{Kn(h,"")}catch(G){ct(n,n.return,G)}}l&4&&n.stateNode!=null&&(h=n.memoizedProps,Of(n,h,a!==null?a.memoizedProps:h)),l&1024&&(kf=!0);break;case 6:if(Vn(s,n),jn(n),l&4){if(n.stateNode===null)throw Error(i(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(G){ct(n,n.return,G)}}break;case 3:if(rd=null,h=fr,fr=td(s.containerInfo),Vn(s,n),fr=h,jn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Zl(s.containerInfo)}catch(G){ct(n,n.return,G)}kf&&(kf=!1,I_(n));break;case 4:l=fr,fr=td(n.stateNode.containerInfo),Vn(s,n),jn(n),fr=l;break;case 12:Vn(s,n),jn(n);break;case 13:Vn(s,n),jn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Bf=pn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Vf(n,l)));break;case 22:h=n.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,B=ws,Z=It;if(ws=B||h,It=Z||N,Vn(s,n),It=Z,ws=B,jn(n),l&8192)e:for(s=n.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||N||ws||It||ha(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){N=a=s;try{if(f=N.stateNode,h)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=N.stateNode;var te=N.memoizedProps.style,F=te!=null&&te.hasOwnProperty("display")?te.display:null;T.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(G){ct(N,N.return,G)}}}else if(s.tag===6){if(a===null){N=s;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(G){ct(N,N.return,G)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Vf(n,a))));break;case 19:Vn(s,n),jn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Vf(n,l)));break;case 30:break;case 21:break;default:Vn(s,n),jn(n)}}function jn(n){var s=n.flags;if(s&2){try{for(var a,l=n.return;l!==null;){if(E_(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,f=Pf(n);Bu(n,f,h);break;case 5:var E=a.stateNode;a.flags&32&&(Kn(E,""),a.flags&=-33);var T=Pf(n);Bu(n,T,E);break;case 3:case 4:var N=a.stateNode.containerInfo,B=Pf(n);Mf(n,B,N);break;default:throw Error(i(161))}}catch(Z){ct(n,n.return,Z)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function I_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;I_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ti(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)b_(n,s.alternate,s),s=s.sibling}function ha(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:ei(4,s,s.return),ha(s);break;case 1:Vr(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&__(s,s.return,a),ha(s);break;case 27:Fl(s.stateNode);case 26:case 5:Vr(s,s.return),ha(s);break;case 22:s.memoizedState===null&&ha(s);break;case 30:ha(s);break;default:ha(s)}n=n.sibling}}function ni(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=n,f=s,E=f.flags;switch(f.tag){case 0:case 11:case 15:ni(h,f,a),Ml(4,f);break;case 1:if(ni(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){ct(l,l.return,B)}if(l=f,h=l.updateQueue,h!==null){var T=l.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)ry(N[h],T)}catch(B){ct(l,l.return,B)}}a&&E&64&&y_(f),kl(f,f.return);break;case 27:w_(f);case 26:case 5:ni(h,f,a),a&&l===null&&E&4&&v_(f),kl(f,f.return);break;case 12:ni(h,f,a);break;case 13:ni(h,f,a),a&&E&4&&x_(h,f);break;case 22:f.memoizedState===null&&ni(h,f,a),kl(f,f.return);break;case 30:break;default:ni(h,f,a)}s=s.sibling}}function jf(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&El(a))}function Lf(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&El(n))}function jr(n,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)C_(n,s,a,l),s=s.sibling}function C_(n,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:jr(n,s,a,l),h&2048&&Ml(9,s);break;case 1:jr(n,s,a,l);break;case 3:jr(n,s,a,l),h&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&El(n)));break;case 12:if(h&2048){jr(n,s,a,l),n=s.stateNode;try{var f=s.memoizedProps,E=f.id,T=f.onPostCommit;typeof T=="function"&&T(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){ct(s,s.return,N)}}else jr(n,s,a,l);break;case 13:jr(n,s,a,l);break;case 23:break;case 22:f=s.stateNode,E=s.alternate,s.memoizedState!==null?f._visibility&2?jr(n,s,a,l):Vl(n,s):f._visibility&2?jr(n,s,a,l):(f._visibility|=2,lo(n,s,a,l,(s.subtreeFlags&10256)!==0)),h&2048&&jf(E,s);break;case 24:jr(n,s,a,l),h&2048&&Lf(s.alternate,s);break;default:jr(n,s,a,l)}}function lo(n,s,a,l,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var f=n,E=s,T=a,N=l,B=E.flags;switch(E.tag){case 0:case 11:case 15:lo(f,E,T,N,h),Ml(8,E);break;case 23:break;case 22:var Z=E.stateNode;E.memoizedState!==null?Z._visibility&2?lo(f,E,T,N,h):Vl(f,E):(Z._visibility|=2,lo(f,E,T,N,h)),h&&B&2048&&jf(E.alternate,E);break;case 24:lo(f,E,T,N,h),h&&B&2048&&Lf(E.alternate,E);break;default:lo(f,E,T,N,h)}s=s.sibling}}function Vl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,l=s,h=l.flags;switch(l.tag){case 22:Vl(a,l),h&2048&&jf(l.alternate,l);break;case 24:Vl(a,l),h&2048&&Lf(l.alternate,l);break;default:Vl(a,l)}s=s.sibling}}var jl=8192;function co(n){if(n.subtreeFlags&jl)for(n=n.child;n!==null;)N_(n),n=n.sibling}function N_(n){switch(n.tag){case 26:co(n),n.flags&jl&&n.memoizedState!==null&&aA(fr,n.memoizedState,n.memoizedProps);break;case 5:co(n);break;case 3:case 4:var s=fr;fr=td(n.stateNode.containerInfo),co(n),fr=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=jl,jl=16777216,co(n),jl=s):co(n));break;default:co(n)}}function D_(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ll(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Kt=l,P_(l,n)}D_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)O_(n),n=n.sibling}function O_(n){switch(n.tag){case 0:case 11:case 15:Ll(n),n.flags&2048&&ei(9,n,n.return);break;case 3:Ll(n);break;case 12:Ll(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Hu(n)):Ll(n);break;default:Ll(n)}}function Hu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Kt=l,P_(l,n)}D_(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:ei(8,s,s.return),Hu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Hu(s));break;default:Hu(s)}n=n.sibling}}function P_(n,s){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:ei(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:El(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Kt=l;else e:for(a=n;Kt!==null;){l=Kt;var h=l.sibling,f=l.return;if(S_(l),l===a){Kt=null;break e}if(h!==null){h.return=f,Kt=h;break e}Kt=f}}}var TS={getCacheForType:function(n){var s=ln(zt),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a}},bS=typeof WeakMap=="function"?WeakMap:Map,nt=0,dt=null,je=null,Ge=0,rt=0,Ln=null,ri=!1,uo=!1,Uf=!1,bs=0,bt=0,si=0,fa=0,zf=0,nr=0,ho=0,Ul=null,An=null,qf=!1,Bf=0,Fu=1/0,Gu=null,ii=null,nn=0,ai=null,fo=null,mo=0,Hf=0,Ff=null,M_=null,zl=0,Gf=null;function Un(){if((nt&2)!==0&&Ge!==0)return Ge&-Ge;if(Q.T!==null){var n=eo;return n!==0?n:Zf()}return br()}function k_(){nr===0&&(nr=(Ge&536870912)===0||Je?Li():536870912);var n=tr.current;return n!==null&&(n.flags|=32),nr}function zn(n,s,a){(n===dt&&(rt===2||rt===9)||n.cancelPendingCommit!==null)&&(go(n,0),oi(n,Ge,nr,!1)),Dn(n,a),((nt&2)===0||n!==dt)&&(n===dt&&((nt&2)===0&&(fa|=a),bt===4&&oi(n,Ge,nr,!1)),Lr(n))}function V_(n,s,a){if((nt&6)!==0)throw Error(i(327));var l=!a&&(s&124)===0&&(s&n.expiredLanes)===0||wr(n,s),h=l?xS(n,s):Yf(n,s,!0),f=l;do{if(h===0){uo&&!l&&oi(n,s,0,!1);break}else{if(a=n.current.alternate,f&&!SS(a)){h=Yf(n,s,!1),f=!1;continue}if(h===2){if(f=s,n.errorRecoveryDisabledLanes&f)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var T=n;h=Ul;var N=T.current.memoizedState.isDehydrated;if(N&&(go(T,E).flags|=256),E=Yf(T,E,!1),E!==2){if(Uf&&!N){T.errorRecoveryDisabledLanes|=f,fa|=f,h=4;break e}f=An,An=h,f!==null&&(An===null?An=f:An.push.apply(An,f))}h=E}if(f=!1,h!==2)continue}}if(h===1){go(n,0),oi(n,s,0,!0);break}e:{switch(l=n,f=h,f){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:oi(l,s,nr,!ri);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=Bf+300-pn(),10<h)){if(oi(l,s,nr,!ri),zs(l,0,!0)!==0)break e;l.timeoutHandle=d0(j_.bind(null,l,a,An,Gu,qf,s,nr,fa,ho,ri,f,2,-0,0),h);break e}j_(l,a,An,Gu,qf,s,nr,fa,ho,ri,f,0,-0,0)}}break}while(!0);Lr(n)}function j_(n,s,a,l,h,f,E,T,N,B,Z,te,F,G){if(n.timeoutHandle=-1,te=s.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Kl={stylesheets:null,count:0,unsuspend:iA},N_(s),te=oA(),te!==null)){n.cancelPendingCommit=te(F_.bind(null,n,s,f,a,l,h,E,T,N,Z,1,F,G)),oi(n,f,E,!B);return}F_(n,s,f,a,l,h,E,T,N)}function SS(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!Mn(f(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function oi(n,s,a,l){s&=~zf,s&=~fa,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var h=s;0<h;){var f=31-Ht(h),E=1<<f;l[f]=-1,h&=~E}a!==0&&Gn(n,a,s)}function Qu(){return(nt&6)===0?(ql(0),!1):!0}function Qf(){if(je!==null){if(rt===0)var n=je.return;else n=je,gs=oa=null,cf(n),ao=null,Dl=0,n=je;for(;n!==null;)p_(n.alternate,n),n=n.return;je=null}}function go(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,BS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Qf(),dt=n,je=a=hs(n.current,null),Ge=s,rt=0,Ln=null,ri=!1,uo=wr(n,s),Uf=!1,ho=nr=zf=fa=si=bt=0,An=Ul=null,qf=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var h=31-Ht(l),f=1<<h;s|=n[h],l&=~f}return bs=s,mu(),a}function L_(n,s){ke=null,Q.H=Pu,s===Tl||s===bu?(s=ty(),rt=3):s===Zp?(s=ty(),rt=4):rt=s===n_?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ln=s,je===null&&(bt=1,Lu(n,Wn(s,n.current)))}function U_(){var n=Q.H;return Q.H=Pu,n===null?Pu:n}function z_(){var n=Q.A;return Q.A=TS,n}function Kf(){bt=4,ri||(Ge&4194048)!==Ge&&tr.current!==null||(uo=!0),(si&134217727)===0&&(fa&134217727)===0||dt===null||oi(dt,Ge,nr,!1)}function Yf(n,s,a){var l=nt;nt|=2;var h=U_(),f=z_();(dt!==n||Ge!==s)&&(Gu=null,go(n,s)),s=!1;var E=bt;e:do try{if(rt!==0&&je!==null){var T=je,N=Ln;switch(rt){case 8:Qf(),E=6;break e;case 3:case 2:case 9:case 6:tr.current===null&&(s=!0);var B=rt;if(rt=0,Ln=null,po(n,T,N,B),a&&uo){E=0;break e}break;default:B=rt,rt=0,Ln=null,po(n,T,N,B)}}AS(),E=bt;break}catch(Z){L_(n,Z)}while(!0);return s&&n.shellSuspendCounter++,gs=oa=null,nt=l,Q.H=h,Q.A=f,je===null&&(dt=null,Ge=0,mu()),E}function AS(){for(;je!==null;)q_(je)}function xS(n,s){var a=nt;nt|=2;var l=U_(),h=z_();dt!==n||Ge!==s?(Gu=null,Fu=pn()+500,go(n,s)):uo=wr(n,s);e:do try{if(rt!==0&&je!==null){s=je;var f=Ln;t:switch(rt){case 1:rt=0,Ln=null,po(n,s,f,1);break;case 2:case 9:if(Jp(f)){rt=0,Ln=null,B_(s);break}s=function(){rt!==2&&rt!==9||dt!==n||(rt=7),Lr(n)},f.then(s,s);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Jp(f)?(rt=0,Ln=null,B_(s)):(rt=0,Ln=null,po(n,s,f,7));break;case 5:var E=null;switch(je.tag){case 26:E=je.memoizedState;case 5:case 27:var T=je;if(!E||b0(E)){rt=0,Ln=null;var N=T.sibling;if(N!==null)je=N;else{var B=T.return;B!==null?(je=B,Ku(B)):je=null}break t}}rt=0,Ln=null,po(n,s,f,5);break;case 6:rt=0,Ln=null,po(n,s,f,6);break;case 8:Qf(),bt=6;break e;default:throw Error(i(462))}}RS();break}catch(Z){L_(n,Z)}while(!0);return gs=oa=null,Q.H=l,Q.A=h,nt=a,je!==null?0:(dt=null,Ge=0,mu(),bt)}function RS(){for(;je!==null&&!Ia();)q_(je)}function q_(n){var s=m_(n.alternate,n,bs);n.memoizedProps=n.pendingProps,s===null?Ku(n):je=s}function B_(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=l_(a,s,s.pendingProps,s.type,void 0,Ge);break;case 11:s=l_(a,s,s.pendingProps,s.type.render,s.ref,Ge);break;case 5:cf(s);default:p_(a,s),s=je=Hp(s,bs),s=m_(a,s,bs)}n.memoizedProps=n.pendingProps,s===null?Ku(n):je=s}function po(n,s,a,l){gs=oa=null,cf(s),ao=null,Dl=0;var h=s.return;try{if(pS(n,h,s,a,Ge)){bt=1,Lu(n,Wn(a,n.current)),je=null;return}}catch(f){if(h!==null)throw je=h,f;bt=1,Lu(n,Wn(a,n.current)),je=null;return}s.flags&32768?(Je||l===1?n=!0:uo||(Ge&536870912)!==0?n=!1:(ri=n=!0,(l===2||l===9||l===3||l===6)&&(l=tr.current,l!==null&&l.tag===13&&(l.flags|=16384))),H_(s,n)):Ku(s)}function Ku(n){var s=n;do{if((s.flags&32768)!==0){H_(s,ri);return}n=s.return;var a=_S(s.alternate,s,bs);if(a!==null){je=a;return}if(s=s.sibling,s!==null){je=s;return}je=s=n}while(s!==null);bt===0&&(bt=5)}function H_(n,s){do{var a=vS(n.alternate,n);if(a!==null){a.flags&=32767,je=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){je=n;return}je=n=a}while(n!==null);bt=6,je=null}function F_(n,s,a,l,h,f,E,T,N){n.cancelPendingCommit=null;do Yu();while(nn!==0);if((nt&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(f=s.lanes|s.childLanes,f|=jh,Ui(n,a,f,E,T,N),n===dt&&(je=dt=null,Ge=0),fo=s,ai=n,mo=a,Hf=f,Ff=h,M_=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,DS(Zr,function(){return X_(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=ae.p,ae.p=2,E=nt,nt|=4;try{ES(n,s,a)}finally{nt=E,ae.p=h,Q.T=l}}nn=1,G_(),Q_(),K_()}}function G_(){if(nn===1){nn=0;var n=ai,s=fo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=ae.p;ae.p=2;var h=nt;nt|=4;try{R_(s,n);var f=am,E=Pp(n.containerInfo),T=f.focusedElem,N=f.selectionRange;if(E!==T&&T&&T.ownerDocument&&Op(T.ownerDocument.documentElement,T)){if(N!==null&&Oh(T)){var B=N.start,Z=N.end;if(Z===void 0&&(Z=B),"selectionStart"in T)T.selectionStart=B,T.selectionEnd=Math.min(Z,T.value.length);else{var te=T.ownerDocument||document,F=te&&te.defaultView||window;if(F.getSelection){var G=F.getSelection(),Re=T.textContent.length,Te=Math.min(N.start,Re),ot=N.end===void 0?Te:Math.min(N.end,Re);!G.extend&&Te>ot&&(E=ot,ot=Te,Te=E);var L=Dp(T,Te),k=Dp(T,ot);if(L&&k&&(G.rangeCount!==1||G.anchorNode!==L.node||G.anchorOffset!==L.offset||G.focusNode!==k.node||G.focusOffset!==k.offset)){var q=te.createRange();q.setStart(L.node,L.offset),G.removeAllRanges(),Te>ot?(G.addRange(q),G.extend(k.node,k.offset)):(q.setEnd(k.node,k.offset),G.addRange(q))}}}}for(te=[],G=T;G=G.parentNode;)G.nodeType===1&&te.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<te.length;T++){var J=te[T];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}ad=!!im,am=im=null}finally{nt=h,ae.p=l,Q.T=a}}n.current=s,nn=2}}function Q_(){if(nn===2){nn=0;var n=ai,s=fo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=ae.p;ae.p=2;var h=nt;nt|=4;try{b_(n,s.alternate,s)}finally{nt=h,ae.p=l,Q.T=a}}nn=3}}function K_(){if(nn===4||nn===3){nn=0,Wo();var n=ai,s=fo,a=mo,l=M_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?nn=5:(nn=0,fo=ai=null,Y_(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(ii=null),Bs(a),s=s.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(ht,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=Q.T,h=ae.p,ae.p=2,Q.T=null;try{for(var f=n.onRecoverableError,E=0;E<l.length;E++){var T=l[E];f(T.value,{componentStack:T.stack})}}finally{Q.T=s,ae.p=h}}(mo&3)!==0&&Yu(),Lr(n),h=n.pendingLanes,(a&4194090)!==0&&(h&42)!==0?n===Gf?zl++:(zl=0,Gf=n):zl=0,ql(0)}}function Y_(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,El(s)))}function Yu(n){return G_(),Q_(),K_(),X_()}function X_(){if(nn!==5)return!1;var n=ai,s=Hf;Hf=0;var a=Bs(mo),l=Q.T,h=ae.p;try{ae.p=32>a?32:a,Q.T=null,a=Ff,Ff=null;var f=ai,E=mo;if(nn=0,fo=ai=null,mo=0,(nt&6)!==0)throw Error(i(331));var T=nt;if(nt|=4,O_(f.current),C_(f,f.current,E,a),nt=T,ql(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(ht,f)}catch{}return!0}finally{ae.p=h,Q.T=l,Y_(n,s)}}function $_(n,s,a){s=Wn(a,s),s=bf(n.stateNode,s,2),n=$s(n,s,2),n!==null&&(Dn(n,2),Lr(n))}function ct(n,s,a){if(n.tag===3)$_(n,n,a);else for(;s!==null;){if(s.tag===3){$_(s,n,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ii===null||!ii.has(l))){n=Wn(a,n),a=e_(2),l=$s(s,a,2),l!==null&&(t_(a,l,s,n),Dn(l,2),Lr(l));break}}s=s.return}}function Xf(n,s,a){var l=n.pingCache;if(l===null){l=n.pingCache=new bS;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(Uf=!0,h.add(a),n=IS.bind(null,n,s,a),s.then(n,n))}function IS(n,s,a){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,dt===n&&(Ge&a)===a&&(bt===4||bt===3&&(Ge&62914560)===Ge&&300>pn()-Bf?(nt&2)===0&&go(n,0):zf|=a,ho===Ge&&(ho=0)),Lr(n)}function W_(n,s){s===0&&(s=qs()),n=$a(n,s),n!==null&&(Dn(n,s),Lr(n))}function CS(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),W_(n,a)}function NS(n,s){var a=0;switch(n.tag){case 13:var l=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),W_(n,a)}function DS(n,s){return $r(n,s)}var Xu=null,yo=null,$f=!1,$u=!1,Wf=!1,ma=0;function Lr(n){n!==yo&&n.next===null&&(yo===null?Xu=yo=n:yo=yo.next=n),$u=!0,$f||($f=!0,PS())}function ql(n,s){if(!Wf&&$u){Wf=!0;do for(var a=!1,l=Xu;l!==null;){if(n!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var E=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-Ht(42|n)+1)-1,f&=h&~(E&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,t0(l,f))}else f=Ge,f=zs(l,l===dt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||wr(l,f)||(a=!0,t0(l,f));l=l.next}while(a);Wf=!1}}function OS(){Z_()}function Z_(){$u=$f=!1;var n=0;ma!==0&&(qS()&&(n=ma),ma=0);for(var s=pn(),a=null,l=Xu;l!==null;){var h=l.next,f=J_(l,s);f===0?(l.next=null,a===null?Xu=h:a.next=h,h===null&&(yo=a)):(a=l,(n!==0||(f&3)!==0)&&($u=!0)),l=h}ql(n)}function J_(n,s){for(var a=n.suspendedLanes,l=n.pingedLanes,h=n.expirationTimes,f=n.pendingLanes&-62914561;0<f;){var E=31-Ht(f),T=1<<E,N=h[E];N===-1?((T&a)===0||(T&l)!==0)&&(h[E]=ji(T,s)):N<=s&&(n.expiredLanes|=T),f&=~T}if(s=dt,a=Ge,a=zs(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===s&&(rt===2||rt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Er(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||wr(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(l!==null&&Er(l),Bs(a)){case 2:case 8:a=js;break;case 32:a=Zr;break;case 268435456:a=Ls;break;default:a=Zr}return l=e0.bind(null,n),a=$r(a,l),n.callbackPriority=s,n.callbackNode=a,s}return l!==null&&l!==null&&Er(l),n.callbackPriority=2,n.callbackNode=null,2}function e0(n,s){if(nn!==0&&nn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Yu()&&n.callbackNode!==a)return null;var l=Ge;return l=zs(n,n===dt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(V_(n,l,s),J_(n,pn()),n.callbackNode!=null&&n.callbackNode===a?e0.bind(null,n):null)}function t0(n,s){if(Yu())return null;V_(n,s,!0)}function PS(){HS(function(){(nt&6)!==0?$r(Wr,OS):Z_()})}function Zf(){return ma===0&&(ma=Li()),ma}function n0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:La(""+n)}function r0(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function MS(n,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var f=n0((h[Et]||null).action),E=l.submitter;E&&(s=(s=E[Et]||null)?n0(s.formAction):E.getAttribute("formAction"),s!==null&&(f=s,E=null));var T=new Ua("action","action",null,l,h);n.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ma!==0){var N=E?r0(h,E):new FormData(h);_f(a,{pending:!0,data:N,method:h.method,action:f},null,N)}}else typeof f=="function"&&(T.preventDefault(),N=E?r0(h,E):new FormData(h),_f(a,{pending:!0,data:N,method:h.method,action:f},f,N))},currentTarget:h}]})}}for(var Jf=0;Jf<Vh.length;Jf++){var em=Vh[Jf],kS=em.toLowerCase(),VS=em[0].toUpperCase()+em.slice(1);hr(kS,"on"+VS)}hr(Vp,"onAnimationEnd"),hr(jp,"onAnimationIteration"),hr(Lp,"onAnimationStart"),hr("dblclick","onDoubleClick"),hr("focusin","onFocus"),hr("focusout","onBlur"),hr(Jb,"onTransitionRun"),hr(eS,"onTransitionStart"),hr(tS,"onTransitionCancel"),hr(Up,"onTransitionEnd"),rs("onMouseEnter",["mouseout","mouseover"]),rs("onMouseLeave",["mouseout","mouseover"]),rs("onPointerEnter",["pointerout","pointerover"]),rs("onPointerLeave",["pointerout","pointerover"]),ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ur("onBeforeInput",["compositionend","keypress","textInput","paste"]),ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bl));function s0(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],h=l.event;l=l.listeners;e:{var f=void 0;if(s)for(var E=l.length-1;0<=E;E--){var T=l[E],N=T.instance,B=T.currentTarget;if(T=T.listener,N!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=B;try{f(h)}catch(Z){ju(Z)}h.currentTarget=null,f=N}else for(E=0;E<l.length;E++){if(T=l[E],N=T.instance,B=T.currentTarget,T=T.listener,N!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=B;try{f(h)}catch(Z){ju(Z)}h.currentTarget=null,f=N}}}}function Le(n,s){var a=s[me];a===void 0&&(a=s[me]=new Set);var l=n+"__bubble";a.has(l)||(i0(s,n,2,!1),a.add(l))}function tm(n,s,a){var l=0;s&&(l|=4),i0(a,n,l,s)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function nm(n){if(!n[Wu]){n[Wu]=!0,el.forEach(function(a){a!=="selectionchange"&&(jS.has(a)||tm(a,!1,n),tm(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Wu]||(s[Wu]=!0,tm("selectionchange",!1,s))}}function i0(n,s,a,l){switch(C0(s)){case 2:var h=uA;break;case 8:h=dA;break;default:h=pm}a=h.bind(null,s,a,n),h=void 0,!Xn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?n.addEventListener(s,a,{capture:!0,passive:h}):n.addEventListener(s,a,!0):h!==void 0?n.addEventListener(s,a,{passive:h}):n.addEventListener(s,a,!1)}function rm(n,s,a,l,h){var f=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var T=l.stateNode.containerInfo;if(T===h)break;if(E===4)for(E=l.return;E!==null;){var N=E.tag;if((N===3||N===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;T!==null;){if(E=ns(T),E===null)return;if(N=E.tag,N===5||N===6||N===26||N===27){l=f=E;continue e}T=T.parentNode}}l=l.return}Jc(function(){var B=f,Z=Yn(a),te=[];e:{var F=zp.get(n);if(F!==void 0){var G=Ua,Re=n;switch(n){case"keypress":if(Cr(a)===0)break e;case"keydown":case"keyup":G=Ga;break;case"focusin":Re="focus",G=Ba;break;case"focusout":Re="blur",G=Ba;break;case"beforeblur":case"afterblur":G=Ba;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=$n;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Ih;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=ou;break;case Vp:case jp:case Lp:G=Ha;break;case Up:G=cu;break;case"scroll":case"scrollend":G=eu;break;case"wheel":G=Qa;break;case"copy":case"cut":case"paste":G=Fa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=hl;break;case"toggle":case"beforetoggle":G=du}var Te=(s&4)!==0,ot=!Te&&(n==="scroll"||n==="scrollend"),L=Te?F!==null?F+"Capture":null:F;Te=[];for(var k=B,q;k!==null;){var J=k;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||L===null||(J=Ki(k,L),J!=null&&Te.push(Hl(k,J,q))),ot)break;k=k.return}0<Te.length&&(F=new G(F,Re,null,a,Z),te.push({event:F,listeners:Te}))}}if((s&7)===0){e:{if(F=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",F&&a!==as&&(Re=a.relatedTarget||a.fromElement)&&(ns(Re)||Re[le]))break e;if((G||F)&&(F=Z.window===Z?Z:(F=Z.ownerDocument)?F.defaultView||F.parentWindow:window,G?(Re=a.relatedTarget||a.toElement,G=B,Re=Re?ns(Re):null,Re!==null&&(ot=c(Re),Te=Re.tag,Re!==ot||Te!==5&&Te!==27&&Te!==6)&&(Re=null)):(G=null,Re=B),G!==Re)){if(Te=$n,J="onMouseLeave",L="onMouseEnter",k="mouse",(n==="pointerout"||n==="pointerover")&&(Te=hl,J="onPointerLeave",L="onPointerEnter",k="pointer"),ot=G==null?F:Ar(G),q=Re==null?F:Ar(Re),F=new Te(J,k+"leave",G,a,Z),F.target=ot,F.relatedTarget=q,J=null,ns(Z)===B&&(Te=new Te(L,k+"enter",Re,a,Z),Te.target=q,Te.relatedTarget=ot,J=Te),ot=J,G&&Re)t:{for(Te=G,L=Re,k=0,q=Te;q;q=_o(q))k++;for(q=0,J=L;J;J=_o(J))q++;for(;0<k-q;)Te=_o(Te),k--;for(;0<q-k;)L=_o(L),q--;for(;k--;){if(Te===L||L!==null&&Te===L.alternate)break t;Te=_o(Te),L=_o(L)}Te=null}else Te=null;G!==null&&a0(te,F,G,Te,!1),Re!==null&&ot!==null&&a0(te,ot,Re,Te,!0)}}e:{if(F=B?Ar(B):window,G=F.nodeName&&F.nodeName.toLowerCase(),G==="select"||G==="input"&&F.type==="file")var ye=Ap;else if(Ut(F))if(xp)ye=$b;else{ye=Yb;var Ve=Kb}else G=F.nodeName,!G||G.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?B&&il(B.elementType)&&(ye=Ap):ye=Xb;if(ye&&(ye=ye(n,B))){ds(te,ye,a,Z);break e}Ve&&Ve(n,F,B),n==="focusout"&&B&&F.type==="number"&&B.memoizedProps.value!=null&&Gs(F,"number",F.value)}switch(Ve=B?Ar(B):window,n){case"focusin":(Ut(Ve)||Ve.contentEditable==="true")&&(Ka=Ve,Ph=B,gl=null);break;case"focusout":gl=Ph=Ka=null;break;case"mousedown":Mh=!0;break;case"contextmenu":case"mouseup":case"dragend":Mh=!1,Mp(te,a,Z);break;case"selectionchange":if(Zb)break;case"keydown":case"keyup":Mp(te,a,Z)}var _e;if(Or)e:{switch(n){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else He?K(n,a)&&(be="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(v&&a.locale!=="ko"&&(He||be!=="onCompositionStart"?be==="onCompositionEnd"&&He&&(_e=ol()):(Ir=Z,Qs="value"in Ir?Ir.value:Ir.textContent,He=!0)),Ve=Zu(B,be),0<Ve.length&&(be=new ul(be,n,null,a,Z),te.push({event:be,listeners:Ve}),_e?be.data=_e:(_e=ue(a),_e!==null&&(be.data=_e)))),(_e=y?Lt(n,a):Fe(n,a))&&(be=Zu(B,"onBeforeInput"),0<be.length&&(Ve=new ul("onBeforeInput","beforeinput",null,a,Z),te.push({event:Ve,listeners:be}),Ve.data=_e)),MS(te,n,B,a,Z)}s0(te,s)})}function Hl(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Zu(n,s){for(var a=s+"Capture",l=[];n!==null;){var h=n,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Ki(n,a),h!=null&&l.unshift(Hl(n,h,f)),h=Ki(n,s),h!=null&&l.push(Hl(n,h,f))),n.tag===3)return l;n=n.return}return[]}function _o(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function a0(n,s,a,l,h){for(var f=s._reactName,E=[];a!==null&&a!==l;){var T=a,N=T.alternate,B=T.stateNode;if(T=T.tag,N!==null&&N===l)break;T!==5&&T!==26&&T!==27||B===null||(N=B,h?(B=Ki(a,f),B!=null&&E.unshift(Hl(a,B,N))):h||(B=Ki(a,f),B!=null&&E.push(Hl(a,B,N)))),a=a.return}E.length!==0&&n.push({event:s,listeners:E})}var LS=/\r\n?/g,US=/\u0000|\uFFFD/g;function o0(n){return(typeof n=="string"?n:""+n).replace(LS,`
`).replace(US,"")}function l0(n,s){return s=o0(s),o0(n)===s}function Ju(){}function at(n,s,a,l,h,f){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Kn(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Kn(n,""+l);break;case"className":xr(n,"class",l);break;case"tabIndex":xr(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":xr(n,a,l);break;case"style":sl(n,l,f);break;case"data":if(s!=="object"){xr(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=La(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(s!=="input"&&at(n,s,"name",h.name,h,null),at(n,s,"formEncType",h.formEncType,h,null),at(n,s,"formMethod",h.formMethod,h,null),at(n,s,"formTarget",h.formTarget,h,null)):(at(n,s,"encType",h.encType,h,null),at(n,s,"method",h.method,h,null),at(n,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=La(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Ju);break;case"onScroll":l!=null&&Le("scroll",n);break;case"onScrollEnd":l!=null&&Le("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=La(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Le("beforetoggle",n),Le("toggle",n),Fs(n,"popover",l);break;case"xlinkActuate":Jt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Jt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Jt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Jt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Jt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Jt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Fs(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=xh.get(a)||a,Fs(n,a,l))}}function sm(n,s,a,l,h,f){switch(a){case"style":sl(n,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Kn(n,l):(typeof l=="number"||typeof l=="bigint")&&Kn(n,""+l);break;case"onScroll":l!=null&&Le("scroll",n);break;case"onScrollEnd":l!=null&&Le("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),f=n[Et]||null,f=f!=null?f[a]:null,typeof f=="function"&&n.removeEventListener(s,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,l,h);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Fs(n,a,l)}}}function rn(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",n),Le("load",n);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var E=a[f];if(E!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:at(n,s,f,E,a,null)}}h&&at(n,s,"srcSet",a.srcSet,a,null),l&&at(n,s,"src",a.src,a,null);return;case"input":Le("invalid",n);var T=f=E=h=null,N=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":h=Z;break;case"type":E=Z;break;case"checked":N=Z;break;case"defaultChecked":B=Z;break;case"value":f=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:at(n,s,l,Z,a,null)}}Fi(n,f,T,N,B,E,h,!1),ja(n);return;case"select":Le("invalid",n),l=E=f=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":E=T;break;case"multiple":l=T;default:at(n,s,h,T,a,null)}s=f,a=E,n.multiple=!!l,s!=null?is(n,!!l,s,!1):a!=null&&is(n,!!l,a,!0);return;case"textarea":Le("invalid",n),f=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(T=a[E],T!=null))switch(E){case"value":l=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:at(n,s,E,T,a,null)}Gi(n,l,h,f),ja(n);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:at(n,s,N,l,a,null)}return;case"dialog":Le("beforetoggle",n),Le("toggle",n),Le("cancel",n),Le("close",n);break;case"iframe":case"object":Le("load",n);break;case"video":case"audio":for(l=0;l<Bl.length;l++)Le(Bl[l],n);break;case"image":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"embed":case"source":case"link":Le("error",n),Le("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:at(n,s,B,l,a,null)}return;default:if(il(s)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&sm(n,s,Z,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&at(n,s,T,l,a,null))}function zS(n,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,E=null,T=null,N=null,B=null,Z=null;for(G in a){var te=a[G];if(a.hasOwnProperty(G)&&te!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":N=te;default:l.hasOwnProperty(G)||at(n,s,G,null,l,te)}}for(var F in l){var G=l[F];if(te=a[F],l.hasOwnProperty(F)&&(G!=null||te!=null))switch(F){case"type":f=G;break;case"name":h=G;break;case"checked":B=G;break;case"defaultChecked":Z=G;break;case"value":E=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:G!==te&&at(n,s,F,G,l,te)}}Pn(n,E,T,N,B,Z,f,h);return;case"select":G=E=T=F=null;for(f in a)if(N=a[f],a.hasOwnProperty(f)&&N!=null)switch(f){case"value":break;case"multiple":G=N;default:l.hasOwnProperty(f)||at(n,s,f,null,l,N)}for(h in l)if(f=l[h],N=a[h],l.hasOwnProperty(h)&&(f!=null||N!=null))switch(h){case"value":F=f;break;case"defaultValue":T=f;break;case"multiple":E=f;default:f!==N&&at(n,s,h,f,l,N)}s=T,a=E,l=G,F!=null?is(n,!!a,F,!1):!!l!=!!a&&(s!=null?is(n,!!a,s,!0):is(n,!!a,a?[]:"",!1));return;case"textarea":G=F=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:at(n,s,T,null,l,h)}for(E in l)if(h=l[E],f=a[E],l.hasOwnProperty(E)&&(h!=null||f!=null))switch(E){case"value":F=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==f&&at(n,s,E,h,l,f)}st(n,F,G);return;case"option":for(var Re in a)if(F=a[Re],a.hasOwnProperty(Re)&&F!=null&&!l.hasOwnProperty(Re))switch(Re){case"selected":n.selected=!1;break;default:at(n,s,Re,null,l,F)}for(N in l)if(F=l[N],G=a[N],l.hasOwnProperty(N)&&F!==G&&(F!=null||G!=null))switch(N){case"selected":n.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:at(n,s,N,F,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)F=a[Te],a.hasOwnProperty(Te)&&F!=null&&!l.hasOwnProperty(Te)&&at(n,s,Te,null,l,F);for(B in l)if(F=l[B],G=a[B],l.hasOwnProperty(B)&&F!==G&&(F!=null||G!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,s));break;default:at(n,s,B,F,l,G)}return;default:if(il(s)){for(var ot in a)F=a[ot],a.hasOwnProperty(ot)&&F!==void 0&&!l.hasOwnProperty(ot)&&sm(n,s,ot,void 0,l,F);for(Z in l)F=l[Z],G=a[Z],!l.hasOwnProperty(Z)||F===G||F===void 0&&G===void 0||sm(n,s,Z,F,l,G);return}}for(var L in a)F=a[L],a.hasOwnProperty(L)&&F!=null&&!l.hasOwnProperty(L)&&at(n,s,L,null,l,F);for(te in l)F=l[te],G=a[te],!l.hasOwnProperty(te)||F===G||F==null&&G==null||at(n,s,te,F,l,G)}var im=null,am=null;function ed(n){return n.nodeType===9?n:n.ownerDocument}function c0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function u0(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function om(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var lm=null;function qS(){var n=window.event;return n&&n.type==="popstate"?n===lm?!1:(lm=n,!0):(lm=null,!1)}var d0=typeof setTimeout=="function"?setTimeout:void 0,BS=typeof clearTimeout=="function"?clearTimeout:void 0,h0=typeof Promise=="function"?Promise:void 0,HS=typeof queueMicrotask=="function"?queueMicrotask:typeof h0<"u"?function(n){return h0.resolve(null).then(n).catch(FS)}:d0;function FS(n){setTimeout(function(){throw n})}function li(n){return n==="head"}function f0(n,s){var a=s,l=0,h=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var E=n.ownerDocument;if(a&1&&Fl(E.documentElement),a&2&&Fl(E.body),a&4)for(a=E.head,Fl(a),E=a.firstChild;E;){var T=E.nextSibling,N=E.nodeName;E[On]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=T}}if(h===0){n.removeChild(f),Zl(s);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Zl(s)}function cm(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":cm(a),Hs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function GS(n,s,a,l){for(;n.nodeType===1;){var h=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[On])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(f=n.getAttribute("rel"),f==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(f!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(f=n.getAttribute("src"),(f!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===f)return n}else return n;if(n=mr(n.nextSibling),n===null)break}return null}function QS(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=mr(n.nextSibling),n===null))return null;return n}function um(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function KS(n,s){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function mr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var dm=null;function m0(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}function g0(n,s,a){switch(s=ed(a),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Fl(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Hs(n)}var rr=new Map,p0=new Set;function td(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ss=ae.d;ae.d={f:YS,r:XS,D:$S,C:WS,L:ZS,m:JS,X:tA,S:eA,M:nA};function YS(){var n=Ss.f(),s=Qu();return n||s}function XS(n){var s=Sr(n);s!==null&&s.tag===5&&s.type==="form"?Vy(s):Ss.r(n)}var vo=typeof document>"u"?null:document;function y0(n,s,a){var l=vo;if(l&&typeof s=="string"&&s){var h=Dt(s);h='link[rel="'+n+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),p0.has(h)||(p0.add(h),n={rel:n,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),rn(s,"link",n),xt(s),l.head.appendChild(s)))}}function $S(n){Ss.D(n),y0("dns-prefetch",n,null)}function WS(n,s){Ss.C(n,s),y0("preconnect",n,s)}function ZS(n,s,a){Ss.L(n,s,a);var l=vo;if(l&&n&&s){var h='link[rel="preload"][as="'+Dt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Dt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Dt(a.imageSizes)+'"]')):h+='[href="'+Dt(n)+'"]';var f=h;switch(s){case"style":f=Eo(n);break;case"script":f=wo(n)}rr.has(f)||(n=w({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),rr.set(f,n),l.querySelector(h)!==null||s==="style"&&l.querySelector(Gl(f))||s==="script"&&l.querySelector(Ql(f))||(s=l.createElement("link"),rn(s,"link",n),xt(s),l.head.appendChild(s)))}}function JS(n,s){Ss.m(n,s);var a=vo;if(a&&n){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Dt(l)+'"][href="'+Dt(n)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=wo(n)}if(!rr.has(f)&&(n=w({rel:"modulepreload",href:n},s),rr.set(f,n),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ql(f)))return}l=a.createElement("link"),rn(l,"link",n),xt(l),a.head.appendChild(l)}}}function eA(n,s,a){Ss.S(n,s,a);var l=vo;if(l&&n){var h=_n(l).hoistableStyles,f=Eo(n);s=s||"default";var E=h.get(f);if(!E){var T={loading:0,preload:null};if(E=l.querySelector(Gl(f)))T.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":s},a),(a=rr.get(f))&&hm(n,a);var N=E=l.createElement("link");xt(N),rn(N,"link",n),N._p=new Promise(function(B,Z){N.onload=B,N.onerror=Z}),N.addEventListener("load",function(){T.loading|=1}),N.addEventListener("error",function(){T.loading|=2}),T.loading|=4,nd(E,s,l)}E={type:"stylesheet",instance:E,count:1,state:T},h.set(f,E)}}}function tA(n,s){Ss.X(n,s);var a=vo;if(a&&n){var l=_n(a).hoistableScripts,h=wo(n),f=l.get(h);f||(f=a.querySelector(Ql(h)),f||(n=w({src:n,async:!0},s),(s=rr.get(h))&&fm(n,s),f=a.createElement("script"),xt(f),rn(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function nA(n,s){Ss.M(n,s);var a=vo;if(a&&n){var l=_n(a).hoistableScripts,h=wo(n),f=l.get(h);f||(f=a.querySelector(Ql(h)),f||(n=w({src:n,async:!0,type:"module"},s),(s=rr.get(h))&&fm(n,s),f=a.createElement("script"),xt(f),rn(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function _0(n,s,a,l){var h=(h=Se.current)?td(h):null;if(!h)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Eo(a.href),a=_n(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Eo(a.href);var f=_n(h).hoistableStyles,E=f.get(n);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(n,E),(f=h.querySelector(Gl(n)))&&!f._p&&(E.instance=f,E.state.loading=5),rr.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},rr.set(n,a),f||rA(h,n,a,E.state))),s&&l===null)throw Error(i(528,""));return E}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=wo(a),a=_n(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Eo(n){return'href="'+Dt(n)+'"'}function Gl(n){return'link[rel="stylesheet"]['+n+"]"}function v0(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function rA(n,s,a,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),rn(s,"link",a),xt(s),n.head.appendChild(s))}function wo(n){return'[src="'+Dt(n)+'"]'}function Ql(n){return"script[async]"+n}function E0(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+Dt(a.href)+'"]');if(l)return s.instance=l,xt(l),l;var h=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),xt(l),rn(l,"style",h),nd(l,a.precedence,n),s.instance=l;case"stylesheet":h=Eo(a.href);var f=n.querySelector(Gl(h));if(f)return s.state.loading|=4,s.instance=f,xt(f),f;l=v0(a),(h=rr.get(h))&&hm(l,h),f=(n.ownerDocument||n).createElement("link"),xt(f);var E=f;return E._p=new Promise(function(T,N){E.onload=T,E.onerror=N}),rn(f,"link",l),s.state.loading|=4,nd(f,a.precedence,n),s.instance=f;case"script":return f=wo(a.src),(h=n.querySelector(Ql(f)))?(s.instance=h,xt(h),h):(l=a,(h=rr.get(f))&&(l=w({},a),fm(l,h)),n=n.ownerDocument||n,h=n.createElement("script"),xt(h),rn(h,"link",l),n.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,nd(l,a.precedence,n));return s.instance}function nd(n,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,E=0;E<l.length;E++){var T=l[E];if(T.dataset.precedence===s)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(n,f.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function hm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function fm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var rd=null;function w0(n,s,a){if(rd===null){var l=new Map,h=rd=new Map;h.set(a,l)}else h=rd,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),h=0;h<a.length;h++){var f=a[h];if(!(f[On]||f[At]||n==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(s)||"";E=n+E;var T=l.get(E);T?T.push(f):l.set(E,[f])}}return l}function T0(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function sA(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function b0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Kl=null;function iA(){}function aA(n,s,a){if(Kl===null)throw Error(i(475));var l=Kl;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=Eo(a.href),f=n.querySelector(Gl(h));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=sd.bind(l),n.then(l,l)),s.state.loading|=4,s.instance=f,xt(f);return}f=n.ownerDocument||n,a=v0(a),(h=rr.get(h))&&hm(a,h),f=f.createElement("link"),xt(f);var E=f;E._p=new Promise(function(T,N){E.onload=T,E.onerror=N}),rn(f,"link",a),s.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=sd.bind(l),n.addEventListener("load",s),n.addEventListener("error",s))}}function oA(){if(Kl===null)throw Error(i(475));var n=Kl;return n.stylesheets&&n.count===0&&mm(n,n.stylesheets),0<n.count?function(s){var a=setTimeout(function(){if(n.stylesheets&&mm(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(a)}}:null}function sd(){if(this.count--,this.count===0){if(this.stylesheets)mm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var id=null;function mm(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,id=new Map,s.forEach(lA,n),id=null,sd.call(n))}function lA(n,s){if(!(s.state.loading&4)){var a=id.get(n);if(a)var l=a.get(null);else{a=new Map,id.set(n,a);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var E=h[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=s.instance,E=h.getAttribute("data-precedence"),f=a.get(E)||l,f===l&&a.set(null,h),a.set(E,h),this.count++,l=sd.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),s.state.loading|=4}}var Yl={$$typeof:ie,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function cA(n,s,a,l,h,f,E,T){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lr(0),this.hiddenUpdates=lr(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function S0(n,s,a,l,h,f,E,T,N,B,Z,te){return n=new cA(n,s,a,E,T,N,B,te),s=1,f===!0&&(s|=24),f=kn(3,null,null,s),n.current=f,f.stateNode=n,s=Yh(),s.refCount++,n.pooledCache=s,s.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:s},Zh(f),n}function A0(n){return n?(n=Wa,n):Wa}function x0(n,s,a,l,h,f){h=A0(h),l.context===null?l.context=h:l.pendingContext=h,l=Xs(s),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=$s(n,l,s),a!==null&&(zn(a,n,s),Sl(a,n,s))}function R0(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function gm(n,s){R0(n,s),(n=n.alternate)&&R0(n,s)}function I0(n){if(n.tag===13){var s=$a(n,67108864);s!==null&&zn(s,n,67108864),gm(n,67108864)}}var ad=!0;function uA(n,s,a,l){var h=Q.T;Q.T=null;var f=ae.p;try{ae.p=2,pm(n,s,a,l)}finally{ae.p=f,Q.T=h}}function dA(n,s,a,l){var h=Q.T;Q.T=null;var f=ae.p;try{ae.p=8,pm(n,s,a,l)}finally{ae.p=f,Q.T=h}}function pm(n,s,a,l){if(ad){var h=ym(l);if(h===null)rm(n,s,l,od,a),N0(n,l);else if(fA(h,n,s,a,l))l.stopPropagation();else if(N0(n,l),s&4&&-1<hA.indexOf(n)){for(;h!==null;){var f=Sr(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=Nn(f.pendingLanes);if(E!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var N=1<<31-Ht(E);T.entanglements[1]|=N,E&=~N}Lr(f),(nt&6)===0&&(Fu=pn()+500,ql(0))}}break;case 13:T=$a(f,2),T!==null&&zn(T,f,2),Qu(),gm(f,2)}if(f=ym(l),f===null&&rm(n,s,l,od,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else rm(n,s,l,null,a)}}function ym(n){return n=Yn(n),_m(n)}var od=null;function _m(n){if(od=null,n=ns(n),n!==null){var s=c(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=d(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return od=n,null}function C0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ca()){case Wr:return 2;case js:return 8;case Zr:case Zo:return 32;case Ls:return 268435456;default:return 32}default:return 32}}var vm=!1,ci=null,ui=null,di=null,Xl=new Map,$l=new Map,hi=[],hA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function N0(n,s){switch(n){case"focusin":case"focusout":ci=null;break;case"dragenter":case"dragleave":ui=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":Xl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(s.pointerId)}}function Wl(n,s,a,l,h,f){return n===null||n.nativeEvent!==f?(n={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},s!==null&&(s=Sr(s),s!==null&&I0(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),n)}function fA(n,s,a,l,h){switch(s){case"focusin":return ci=Wl(ci,n,s,a,l,h),!0;case"dragenter":return ui=Wl(ui,n,s,a,l,h),!0;case"mouseover":return di=Wl(di,n,s,a,l,h),!0;case"pointerover":var f=h.pointerId;return Xl.set(f,Wl(Xl.get(f)||null,n,s,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,$l.set(f,Wl($l.get(f)||null,n,s,a,l,h)),!0}return!1}function D0(n){var s=ns(n.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=d(a),s!==null){n.blockedOn=s,Oa(n.priority,function(){if(a.tag===13){var l=Un();l=Tr(l);var h=$a(a,l);h!==null&&zn(h,a,l),gm(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ld(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=ym(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);as=l,a.target.dispatchEvent(l),as=null}else return s=Sr(a),s!==null&&I0(s),n.blockedOn=a,!1;s.shift()}return!0}function O0(n,s,a){ld(n)&&a.delete(s)}function mA(){vm=!1,ci!==null&&ld(ci)&&(ci=null),ui!==null&&ld(ui)&&(ui=null),di!==null&&ld(di)&&(di=null),Xl.forEach(O0),$l.forEach(O0)}function cd(n,s){n.blockedOn===s&&(n.blockedOn=null,vm||(vm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,mA)))}var ud=null;function P0(n){ud!==n&&(ud=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ud===n&&(ud=null);for(var s=0;s<n.length;s+=3){var a=n[s],l=n[s+1],h=n[s+2];if(typeof l!="function"){if(_m(l||a)===null)continue;break}var f=Sr(a);f!==null&&(n.splice(s,3),s-=3,_f(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Zl(n){function s(N){return cd(N,n)}ci!==null&&cd(ci,n),ui!==null&&cd(ui,n),di!==null&&cd(di,n),Xl.forEach(s),$l.forEach(s);for(var a=0;a<hi.length;a++){var l=hi[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<hi.length&&(a=hi[0],a.blockedOn===null);)D0(a),a.blockedOn===null&&hi.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],E=h[Et]||null;if(typeof f=="function")E||P0(a);else if(E){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,E=f[Et]||null)T=E.formAction;else if(_m(h)!==null)continue}else T=E.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),P0(a)}}}function Em(n){this._internalRoot=n}dd.prototype.render=Em.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,l=Un();x0(a,l,n,s,null,null)},dd.prototype.unmount=Em.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;x0(n.current,2,null,n,null,null),Qu(),s[le]=null}};function dd(n){this._internalRoot=n}dd.prototype.unstable_scheduleHydration=function(n){if(n){var s=br();n={blockedOn:null,target:n,priority:s};for(var a=0;a<hi.length&&s!==0&&s<hi[a].priority;a++);hi.splice(a,0,n),a===0&&D0(n)}};var M0=e.version;if(M0!=="19.1.1")throw Error(i(527,M0,"19.1.1"));ae.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(s),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var gA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{ht=hd.inject(gA),Ze=hd}catch{}}return ec.createRoot=function(n,s){if(!o(n))throw Error(i(299));var a=!1,l="",h=$y,f=Wy,E=Zy,T=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(T=s.unstable_transitionCallbacks)),s=S0(n,1,!1,null,null,a,l,h,f,E,T,null),n[le]=s.current,nm(n),new Em(s)},ec.hydrateRoot=function(n,s,a){if(!o(n))throw Error(i(299));var l=!1,h="",f=$y,E=Wy,T=Zy,N=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),s=S0(n,1,!0,s,a??null,l,h,f,E,T,N,B),s.context=A0(null),a=s.current,l=Un(),l=Tr(l),h=Xs(l),h.callback=null,$s(a,h,l),a=l,s.current.lanes=a,Dn(s,a),Lr(s),n[le]=s.current,nm(n),new dd(s)},ec.version="19.1.1",ec}var F0;function xA(){if(F0)return bm.exports;F0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),bm.exports=AA(),bm.exports}var RA=xA();const IA=jE(RA);var Ue=(r=>(r[r.Welcome=0]="Welcome",r[r.Setup=1]="Setup",r[r.Login=2]="Login",r[r.Profile=3]="Profile",r[r.Shop=4]="Shop",r[r.PackSelection=5]="PackSelection",r[r.RoundConfiguration=6]="RoundConfiguration",r[r.Game=7]="Game",r[r.RoundEnd=8]="RoundEnd",r[r.GameEnd=9]="GameEnd",r))(Ue||{});const LE={CHANGES_BEFORE_AD:3,MAX_CHANGE_ATTEMPTS:10};var sr=(r=>(r.Pack="pack",r.Question="question",r.Dare="dare",r))(sr||{}),cc=(r=>(r.Pending="pending",r.Discarded="discarded",r.Possible="possible",r.Accepted="accepted",r.Rejected="rejected",r))(cc||{});const mt={MAX_SUGGESTIONS_PER_DAY:5,MAX_SUGGESTIONS_PER_WEEK:15,MIN_TITLE_LENGTH:5,MAX_TITLE_LENGTH:100,MIN_CONTENT_LENGTH:10,MAX_CONTENT_LENGTH:500};var qn=(r=>(r.PostGame="post_game",r.PostRound="post_round",r.QuestionChange="question_change",r.Banner="banner",r.Rewarded="rewarded",r.Interstitial="interstitial",r))(qn||{});const Cn=({children:r,className:e})=>p.jsx("div",{className:`bg-gray-800 border border-purple-500/30 rounded-2xl shadow-lg shadow-purple-900/20 p-6 sm:p-8 ${e}`,children:r}),CA=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Rm=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),NA=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),UE=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),Io=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),DA=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),zE=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),OA=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),PA=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),MA=({players:r,setPlayers:e})=>{const[t,i]=$.useState(""),o=d=>{d.preventDefault(),t.trim()&&!r.includes(t.trim())&&(e([...r,t.trim()]),i(""))},c=d=>{e(r.filter((m,g)=>g!==d))};return p.jsxs(Cn,{children:[p.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-pink-400",children:"Añadir Jugadores"}),p.jsxs("form",{onSubmit:o,className:"flex flex-col gap-2 mb-4",children:[p.jsx("input",{type:"text",value:t,onChange:d=>i(d.target.value),placeholder:"Nombre del jugador",className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-purple-500"}),p.jsx("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md transition text-base",children:"Añadir"})]}),p.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:r.map((d,m)=>p.jsxs("li",{className:"flex justify-between items-center bg-gray-700/50 p-2 rounded-md animate-fade-in",children:[p.jsx("span",{className:"font-medium",children:d}),p.jsx("button",{onClick:()=>c(m),className:"text-gray-400 hover:text-red-500 transition",children:p.jsx(CA,{className:"w-5 h-5"})})]},m))})]})},Ie=({children:r,variant:e="primary",className:t,...i})=>{const o="px-6 py-3 font-bold rounded-lg text-white transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 disabled:opacity-50 disabled:cursor-not-allowed",c={primary:"bg-purple-600 hover:bg-purple-700 focus:ring-purple-500/50 shadow-lg shadow-purple-600/30",secondary:"bg-pink-500 hover:bg-pink-600 focus:ring-pink-500/50 shadow-lg shadow-pink-500/30",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500/50"};return p.jsx("button",{className:`${o} ${c[e]} ${t}`,...i,children:r})},kA=()=>{};var G0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},VA=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[t++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[t++],d=r[t++],m=r[t++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const c=r[t++],d=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},BE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const c=r[o],d=o+1<r.length,m=d?r[o+1]:0,g=o+2<r.length,_=g?r[o+2]:0,w=c>>2,b=(c&3)<<4|m>>4;let A=(m&15)<<2|_>>6,I=_&63;g||(I=64,d||(A=64)),i.push(t[w],t[b],t[A],t[I])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(qE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):VA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const c=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const _=o<r.length?t[r.charAt(o)]:64;++o;const b=o<r.length?t[r.charAt(o)]:64;if(++o,c==null||m==null||_==null||b==null)throw new jA;const A=c<<2|m>>4;if(i.push(A),_!==64){const I=m<<4&240|_>>2;if(i.push(I),b!==64){const j=_<<6&192|b;i.push(j)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class jA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LA=function(r){const e=qE(r);return BE.encodeByteArray(e,!0)},Od=function(r){return LA(r).replace(/\./g,"")},HE=function(r){try{return BE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=()=>UA().__FIREBASE_DEFAULTS__,qA=()=>{if(typeof process>"u"||typeof G0>"u")return;const r=G0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},BA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&HE(r[1]);return e&&JSON.parse(e)},nh=()=>{try{return kA()||zA()||qA()||BA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},FE=r=>{var e,t;return(t=(e=nh())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},HA=r=>{const e=FE(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},GE=()=>{var r;return(r=nh())==null?void 0:r.config},QE=r=>{var e;return(e=nh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function KE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Od(JSON.stringify(t)),Od(JSON.stringify(d)),""].join(".")}const uc={};function QA(){const r={prod:[],emulator:[]};for(const e of Object.keys(uc))uc[e]?r.emulator.push(e):r.prod.push(e);return r}function KA(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Q0=!1;function YE(r,e){if(typeof window>"u"||typeof document>"u"||!Bo(window.location.host)||uc[r]===e||uc[r]||Q0)return;uc[r]=e;function t(A){return`__firebase__banner__${A}`}const i="__firebase__banner",c=QA().prod.length>0;function d(){const A=document.getElementById(i);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,I){A.setAttribute("width","24"),A.setAttribute("id",I),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function _(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Q0=!0,d()},A}function w(A,I){A.setAttribute("id",I),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function b(){const A=KA(i),I=t("text"),j=document.getElementById(I)||document.createElement("span"),H=t("learnmore"),U=document.getElementById(H)||document.createElement("a"),re=t("preprendIcon"),se=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ie=A.element;m(ie),w(U,H);const fe=_();g(se,re),ie.append(se,j,U,fe),document.body.appendChild(ie)}c?(j.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function XA(){var e;const r=(e=nh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $A(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function ZA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JA(){const r=gn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function ex(){return!XA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tx(){try{return typeof indexedDB=="object"}catch{return!1}}function nx(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="FirebaseError";class Ms extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=rx,Object.setPrototypeOf(this,Ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dc.prototype.create)}}class Dc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?sx(c,i):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Ms(o,m,i)}}function sx(r,e){return r.replace(ix,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const ix=/\{\$([^}]+)}/g;function ax(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ea(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const c=r[o],d=e[o];if(K0(c)&&K0(d)){if(!Ea(c,d))return!1}else if(c!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function K0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function rc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function sc(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function ox(r,e){const t=new lx(r,e);return t.subscribe.bind(t)}class lx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");cx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Im),o.error===void 0&&(o.error=Im),o.complete===void 0&&(o.complete=Im);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cx(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Im(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(r){return r&&r._delegate?r._delegate:r}class wa{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new FA;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hx(e))try{this.getOrInitializeService({instanceIdentifier:ga})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=ga){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ga){return this.instances.has(e)}getOptions(e=ga){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);i===m&&d.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:dx(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ga){return this.component?this.component.multipleInstances?e:ga:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dx(r){return r===ga?void 0:r}function hx(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ux(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ze||(ze={}));const mx={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},gx=ze.INFO,px={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},yx=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=px[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pg{constructor(e){this.name=e,this._logLevel=gx,this._logHandler=yx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const _x=(r,e)=>e.some(t=>r instanceof t);let Y0,X0;function vx(){return Y0||(Y0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ex(){return X0||(X0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XE=new WeakMap,qm=new WeakMap,$E=new WeakMap,Cm=new WeakMap,yg=new WeakMap;function wx(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{t(Ei(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&XE.set(t,r)}).catch(()=>{}),yg.set(e,r),e}function Tx(r){if(qm.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{t(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});qm.set(r,e)}let Bm={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return qm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||$E.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ei(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function bx(r){Bm=r(Bm)}function Sx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Nm(this),e,...t);return $E.set(i,e.sort?e.sort():[e]),Ei(i)}:Ex().includes(r)?function(...e){return r.apply(Nm(this),e),Ei(XE.get(this))}:function(...e){return Ei(r.apply(Nm(this),e))}}function Ax(r){return typeof r=="function"?Sx(r):(r instanceof IDBTransaction&&Tx(r),_x(r,vx())?new Proxy(r,Bm):r)}function Ei(r){if(r instanceof IDBRequest)return wx(r);if(Cm.has(r))return Cm.get(r);const e=Ax(r);return e!==r&&(Cm.set(r,e),yg.set(e,r)),e}const Nm=r=>yg.get(r);function xx(r,e,{blocked:t,upgrade:i,blocking:o,terminated:c}={}){const d=indexedDB.open(r,e),m=Ei(d);return i&&d.addEventListener("upgradeneeded",g=>{i(Ei(d.result),g.oldVersion,g.newVersion,Ei(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const Rx=["get","getKey","getAll","getAllKeys","count"],Ix=["put","add","delete","clear"],Dm=new Map;function $0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Dm.get(e))return Dm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Ix.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Rx.includes(t)))return;const c=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let _=g.store;return i&&(_=_.index(m.shift())),(await Promise.all([_[t](...m),o&&g.done]))[0]};return Dm.set(e,c),c}bx(r=>({...r,get:(e,t,i)=>$0(e,t)||r.get(e,t,i),has:(e,t)=>!!$0(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Nx(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Nx(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hm="@firebase/app",W0="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new pg("@firebase/app"),Dx="@firebase/app-compat",Ox="@firebase/analytics-compat",Px="@firebase/analytics",Mx="@firebase/app-check-compat",kx="@firebase/app-check",Vx="@firebase/auth",jx="@firebase/auth-compat",Lx="@firebase/database",Ux="@firebase/data-connect",zx="@firebase/database-compat",qx="@firebase/functions",Bx="@firebase/functions-compat",Hx="@firebase/installations",Fx="@firebase/installations-compat",Gx="@firebase/messaging",Qx="@firebase/messaging-compat",Kx="@firebase/performance",Yx="@firebase/performance-compat",Xx="@firebase/remote-config",$x="@firebase/remote-config-compat",Wx="@firebase/storage",Zx="@firebase/storage-compat",Jx="@firebase/firestore",e1="@firebase/ai",t1="@firebase/firestore-compat",n1="firebase",r1="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="[DEFAULT]",s1={[Hm]:"fire-core",[Dx]:"fire-core-compat",[Px]:"fire-analytics",[Ox]:"fire-analytics-compat",[kx]:"fire-app-check",[Mx]:"fire-app-check-compat",[Vx]:"fire-auth",[jx]:"fire-auth-compat",[Lx]:"fire-rtdb",[Ux]:"fire-data-connect",[zx]:"fire-rtdb-compat",[qx]:"fire-fn",[Bx]:"fire-fn-compat",[Hx]:"fire-iid",[Fx]:"fire-iid-compat",[Gx]:"fire-fcm",[Qx]:"fire-fcm-compat",[Kx]:"fire-perf",[Yx]:"fire-perf-compat",[Xx]:"fire-rc",[$x]:"fire-rc-compat",[Wx]:"fire-gcs",[Zx]:"fire-gcs-compat",[Jx]:"fire-fst",[t1]:"fire-fst-compat",[e1]:"fire-vertex","fire-js":"fire-js",[n1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new Map,i1=new Map,Gm=new Map;function Z0(r,e){try{r.container.addComponent(e)}catch(t){Is.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Po(r){const e=r.name;if(Gm.has(e))return Is.debug(`There were multiple attempts to register component ${e}.`),!1;Gm.set(e,r);for(const t of Pd.values())Z0(t,r);for(const t of i1.values())Z0(t,r);return!0}function _g(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Rn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wi=new Dc("app","Firebase",a1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=r1;function WE(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Fm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw wi.create("bad-app-name",{appName:String(o)});if(t||(t=GE()),!t)throw wi.create("no-options");const c=Pd.get(o);if(c){if(Ea(t,c.options)&&Ea(i,c.config))return c;throw wi.create("duplicate-app",{appName:o})}const d=new fx(o);for(const g of Gm.values())d.addComponent(g);const m=new o1(t,i,d);return Pd.set(o,m),m}function ZE(r=Fm){const e=Pd.get(r);if(!e&&r===Fm&&GE())return WE();if(!e)throw wi.create("no-app",{appName:r});return e}function Ti(r,e,t){let i=s1[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Is.warn(d.join(" "));return}Po(new wa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="firebase-heartbeat-database",c1=1,_c="firebase-heartbeat-store";let Om=null;function JE(){return Om||(Om=xx(l1,c1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(_c)}catch(t){console.warn(t)}}}}).catch(r=>{throw wi.create("idb-open",{originalErrorMessage:r.message})})),Om}async function u1(r){try{const t=(await JE()).transaction(_c),i=await t.objectStore(_c).get(ew(r));return await t.done,i}catch(e){if(e instanceof Ms)Is.warn(e.message);else{const t=wi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Is.warn(t.message)}}}async function J0(r,e){try{const i=(await JE()).transaction(_c,"readwrite");await i.objectStore(_c).put(e,ew(r)),await i.done}catch(t){if(t instanceof Ms)Is.warn(t.message);else{const i=wi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Is.warn(i.message)}}}function ew(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=1024,h1=30;class f1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new g1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=ev();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>h1){const d=p1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Is.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ev(),{heartbeatsToSend:i,unsentEntries:o}=m1(this._heartbeatsCache.heartbeats),c=Od(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Is.warn(t),""}}}function ev(){return new Date().toISOString().substring(0,10)}function m1(r,e=d1){const t=[];let i=r.slice();for(const o of r){const c=t.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),tv(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),tv(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class g1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tx()?nx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await u1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return J0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return J0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function tv(r){return Od(JSON.stringify({version:2,heartbeats:r})).length}function p1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(r){Po(new wa("platform-logger",e=>new Cx(e),"PRIVATE")),Po(new wa("heartbeat",e=>new f1(e),"PRIVATE")),Ti(Hm,W0,r),Ti(Hm,W0,"esm2020"),Ti("fire-js","")}y1("");var _1="firebase",v1="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti(_1,v1,"app");var nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bi,tw;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,x){function C(){}C.prototype=x.prototype,D.D=x.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(P,M,V){for(var R=Array(arguments.length-2),De=2;De<arguments.length;De++)R[De-2]=arguments[De];return x.prototype[M].apply(P,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,x,C){C||(C=0);var P=Array(16);if(typeof x=="string")for(var M=0;16>M;++M)P[M]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(M=0;16>M;++M)P[M]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;x=D.g[0],C=D.g[1],M=D.g[2];var V=D.g[3],R=x+(V^C&(M^V))+P[0]+3614090360&4294967295;x=C+(R<<7&4294967295|R>>>25),R=V+(M^x&(C^M))+P[1]+3905402710&4294967295,V=x+(R<<12&4294967295|R>>>20),R=M+(C^V&(x^C))+P[2]+606105819&4294967295,M=V+(R<<17&4294967295|R>>>15),R=C+(x^M&(V^x))+P[3]+3250441966&4294967295,C=M+(R<<22&4294967295|R>>>10),R=x+(V^C&(M^V))+P[4]+4118548399&4294967295,x=C+(R<<7&4294967295|R>>>25),R=V+(M^x&(C^M))+P[5]+1200080426&4294967295,V=x+(R<<12&4294967295|R>>>20),R=M+(C^V&(x^C))+P[6]+2821735955&4294967295,M=V+(R<<17&4294967295|R>>>15),R=C+(x^M&(V^x))+P[7]+4249261313&4294967295,C=M+(R<<22&4294967295|R>>>10),R=x+(V^C&(M^V))+P[8]+1770035416&4294967295,x=C+(R<<7&4294967295|R>>>25),R=V+(M^x&(C^M))+P[9]+2336552879&4294967295,V=x+(R<<12&4294967295|R>>>20),R=M+(C^V&(x^C))+P[10]+4294925233&4294967295,M=V+(R<<17&4294967295|R>>>15),R=C+(x^M&(V^x))+P[11]+2304563134&4294967295,C=M+(R<<22&4294967295|R>>>10),R=x+(V^C&(M^V))+P[12]+1804603682&4294967295,x=C+(R<<7&4294967295|R>>>25),R=V+(M^x&(C^M))+P[13]+4254626195&4294967295,V=x+(R<<12&4294967295|R>>>20),R=M+(C^V&(x^C))+P[14]+2792965006&4294967295,M=V+(R<<17&4294967295|R>>>15),R=C+(x^M&(V^x))+P[15]+1236535329&4294967295,C=M+(R<<22&4294967295|R>>>10),R=x+(M^V&(C^M))+P[1]+4129170786&4294967295,x=C+(R<<5&4294967295|R>>>27),R=V+(C^M&(x^C))+P[6]+3225465664&4294967295,V=x+(R<<9&4294967295|R>>>23),R=M+(x^C&(V^x))+P[11]+643717713&4294967295,M=V+(R<<14&4294967295|R>>>18),R=C+(V^x&(M^V))+P[0]+3921069994&4294967295,C=M+(R<<20&4294967295|R>>>12),R=x+(M^V&(C^M))+P[5]+3593408605&4294967295,x=C+(R<<5&4294967295|R>>>27),R=V+(C^M&(x^C))+P[10]+38016083&4294967295,V=x+(R<<9&4294967295|R>>>23),R=M+(x^C&(V^x))+P[15]+3634488961&4294967295,M=V+(R<<14&4294967295|R>>>18),R=C+(V^x&(M^V))+P[4]+3889429448&4294967295,C=M+(R<<20&4294967295|R>>>12),R=x+(M^V&(C^M))+P[9]+568446438&4294967295,x=C+(R<<5&4294967295|R>>>27),R=V+(C^M&(x^C))+P[14]+3275163606&4294967295,V=x+(R<<9&4294967295|R>>>23),R=M+(x^C&(V^x))+P[3]+4107603335&4294967295,M=V+(R<<14&4294967295|R>>>18),R=C+(V^x&(M^V))+P[8]+1163531501&4294967295,C=M+(R<<20&4294967295|R>>>12),R=x+(M^V&(C^M))+P[13]+2850285829&4294967295,x=C+(R<<5&4294967295|R>>>27),R=V+(C^M&(x^C))+P[2]+4243563512&4294967295,V=x+(R<<9&4294967295|R>>>23),R=M+(x^C&(V^x))+P[7]+1735328473&4294967295,M=V+(R<<14&4294967295|R>>>18),R=C+(V^x&(M^V))+P[12]+2368359562&4294967295,C=M+(R<<20&4294967295|R>>>12),R=x+(C^M^V)+P[5]+4294588738&4294967295,x=C+(R<<4&4294967295|R>>>28),R=V+(x^C^M)+P[8]+2272392833&4294967295,V=x+(R<<11&4294967295|R>>>21),R=M+(V^x^C)+P[11]+1839030562&4294967295,M=V+(R<<16&4294967295|R>>>16),R=C+(M^V^x)+P[14]+4259657740&4294967295,C=M+(R<<23&4294967295|R>>>9),R=x+(C^M^V)+P[1]+2763975236&4294967295,x=C+(R<<4&4294967295|R>>>28),R=V+(x^C^M)+P[4]+1272893353&4294967295,V=x+(R<<11&4294967295|R>>>21),R=M+(V^x^C)+P[7]+4139469664&4294967295,M=V+(R<<16&4294967295|R>>>16),R=C+(M^V^x)+P[10]+3200236656&4294967295,C=M+(R<<23&4294967295|R>>>9),R=x+(C^M^V)+P[13]+681279174&4294967295,x=C+(R<<4&4294967295|R>>>28),R=V+(x^C^M)+P[0]+3936430074&4294967295,V=x+(R<<11&4294967295|R>>>21),R=M+(V^x^C)+P[3]+3572445317&4294967295,M=V+(R<<16&4294967295|R>>>16),R=C+(M^V^x)+P[6]+76029189&4294967295,C=M+(R<<23&4294967295|R>>>9),R=x+(C^M^V)+P[9]+3654602809&4294967295,x=C+(R<<4&4294967295|R>>>28),R=V+(x^C^M)+P[12]+3873151461&4294967295,V=x+(R<<11&4294967295|R>>>21),R=M+(V^x^C)+P[15]+530742520&4294967295,M=V+(R<<16&4294967295|R>>>16),R=C+(M^V^x)+P[2]+3299628645&4294967295,C=M+(R<<23&4294967295|R>>>9),R=x+(M^(C|~V))+P[0]+4096336452&4294967295,x=C+(R<<6&4294967295|R>>>26),R=V+(C^(x|~M))+P[7]+1126891415&4294967295,V=x+(R<<10&4294967295|R>>>22),R=M+(x^(V|~C))+P[14]+2878612391&4294967295,M=V+(R<<15&4294967295|R>>>17),R=C+(V^(M|~x))+P[5]+4237533241&4294967295,C=M+(R<<21&4294967295|R>>>11),R=x+(M^(C|~V))+P[12]+1700485571&4294967295,x=C+(R<<6&4294967295|R>>>26),R=V+(C^(x|~M))+P[3]+2399980690&4294967295,V=x+(R<<10&4294967295|R>>>22),R=M+(x^(V|~C))+P[10]+4293915773&4294967295,M=V+(R<<15&4294967295|R>>>17),R=C+(V^(M|~x))+P[1]+2240044497&4294967295,C=M+(R<<21&4294967295|R>>>11),R=x+(M^(C|~V))+P[8]+1873313359&4294967295,x=C+(R<<6&4294967295|R>>>26),R=V+(C^(x|~M))+P[15]+4264355552&4294967295,V=x+(R<<10&4294967295|R>>>22),R=M+(x^(V|~C))+P[6]+2734768916&4294967295,M=V+(R<<15&4294967295|R>>>17),R=C+(V^(M|~x))+P[13]+1309151649&4294967295,C=M+(R<<21&4294967295|R>>>11),R=x+(M^(C|~V))+P[4]+4149444226&4294967295,x=C+(R<<6&4294967295|R>>>26),R=V+(C^(x|~M))+P[11]+3174756917&4294967295,V=x+(R<<10&4294967295|R>>>22),R=M+(x^(V|~C))+P[2]+718787259&4294967295,M=V+(R<<15&4294967295|R>>>17),R=C+(V^(M|~x))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+x&4294967295,D.g[1]=D.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,D.g[2]=D.g[2]+M&4294967295,D.g[3]=D.g[3]+V&4294967295}i.prototype.u=function(D,x){x===void 0&&(x=D.length);for(var C=x-this.blockSize,P=this.B,M=this.h,V=0;V<x;){if(M==0)for(;V<=C;)o(this,D,V),V+=this.blockSize;if(typeof D=="string"){for(;V<x;)if(P[M++]=D.charCodeAt(V++),M==this.blockSize){o(this,P),M=0;break}}else for(;V<x;)if(P[M++]=D[V++],M==this.blockSize){o(this,P),M=0;break}}this.h=M,this.o+=x},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var x=1;x<D.length-8;++x)D[x]=0;var C=8*this.o;for(x=D.length-8;x<D.length;++x)D[x]=C&255,C/=256;for(this.u(D),D=Array(16),x=C=0;4>x;++x)for(var P=0;32>P;P+=8)D[C++]=this.g[x]>>>P&255;return D};function c(D,x){var C=m;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=x(D)}function d(D,x){this.h=x;for(var C=[],P=!0,M=D.length-1;0<=M;M--){var V=D[M]|0;P&&V==x||(C[M]=V,P=!1)}this.g=C}var m={};function g(D){return-128<=D&&128>D?c(D,function(x){return new d([x|0],0>x?-1:0)}):new d([D|0],0>D?-1:0)}function _(D){if(isNaN(D)||!isFinite(D))return b;if(0>D)return U(_(-D));for(var x=[],C=1,P=0;D>=C;P++)x[P]=D/C|0,C*=4294967296;return new d(x,0)}function w(D,x){if(D.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(D.charAt(0)=="-")return U(w(D.substring(1),x));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=_(Math.pow(x,8)),P=b,M=0;M<D.length;M+=8){var V=Math.min(8,D.length-M),R=parseInt(D.substring(M,M+V),x);8>V?(V=_(Math.pow(x,V)),P=P.j(V).add(_(R))):(P=P.j(C),P=P.add(_(R)))}return P}var b=g(0),A=g(1),I=g(16777216);r=d.prototype,r.m=function(){if(H(this))return-U(this).m();for(var D=0,x=1,C=0;C<this.g.length;C++){var P=this.i(C);D+=(0<=P?P:4294967296+P)*x,x*=4294967296}return D},r.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(j(this))return"0";if(H(this))return"-"+U(this).toString(D);for(var x=_(Math.pow(D,6)),C=this,P="";;){var M=fe(C,x).g;C=re(C,M.j(x));var V=((0<C.g.length?C.g[0]:C.h)>>>0).toString(D);if(C=M,j(C))return V+P;for(;6>V.length;)V="0"+V;P=V+P}},r.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function j(D){if(D.h!=0)return!1;for(var x=0;x<D.g.length;x++)if(D.g[x]!=0)return!1;return!0}function H(D){return D.h==-1}r.l=function(D){return D=re(this,D),H(D)?-1:j(D)?0:1};function U(D){for(var x=D.g.length,C=[],P=0;P<x;P++)C[P]=~D.g[P];return new d(C,~D.h).add(A)}r.abs=function(){return H(this)?U(this):this},r.add=function(D){for(var x=Math.max(this.g.length,D.g.length),C=[],P=0,M=0;M<=x;M++){var V=P+(this.i(M)&65535)+(D.i(M)&65535),R=(V>>>16)+(this.i(M)>>>16)+(D.i(M)>>>16);P=R>>>16,V&=65535,R&=65535,C[M]=R<<16|V}return new d(C,C[C.length-1]&-2147483648?-1:0)};function re(D,x){return D.add(U(x))}r.j=function(D){if(j(this)||j(D))return b;if(H(this))return H(D)?U(this).j(U(D)):U(U(this).j(D));if(H(D))return U(this.j(U(D)));if(0>this.l(I)&&0>D.l(I))return _(this.m()*D.m());for(var x=this.g.length+D.g.length,C=[],P=0;P<2*x;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(var M=0;M<D.g.length;M++){var V=this.i(P)>>>16,R=this.i(P)&65535,De=D.i(M)>>>16,Me=D.i(M)&65535;C[2*P+2*M]+=R*Me,se(C,2*P+2*M),C[2*P+2*M+1]+=V*Me,se(C,2*P+2*M+1),C[2*P+2*M+1]+=R*De,se(C,2*P+2*M+1),C[2*P+2*M+2]+=V*De,se(C,2*P+2*M+2)}for(P=0;P<x;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=x;P<2*x;P++)C[P]=0;return new d(C,0)};function se(D,x){for(;(D[x]&65535)!=D[x];)D[x+1]+=D[x]>>>16,D[x]&=65535,x++}function ie(D,x){this.g=D,this.h=x}function fe(D,x){if(j(x))throw Error("division by zero");if(j(D))return new ie(b,b);if(H(D))return x=fe(U(D),x),new ie(U(x.g),U(x.h));if(H(x))return x=fe(D,U(x)),new ie(U(x.g),x.h);if(30<D.g.length){if(H(D)||H(x))throw Error("slowDivide_ only works with positive integers.");for(var C=A,P=x;0>=P.l(D);)C=de(C),P=de(P);var M=X(C,1),V=X(P,1);for(P=X(P,2),C=X(C,2);!j(P);){var R=V.add(P);0>=R.l(D)&&(M=M.add(C),V=R),P=X(P,1),C=X(C,1)}return x=re(D,M.j(x)),new ie(M,x)}for(M=b;0<=D.l(x);){for(C=Math.max(1,Math.floor(D.m()/x.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),V=_(C),R=V.j(x);H(R)||0<R.l(D);)C-=P,V=_(C),R=V.j(x);j(V)&&(V=A),M=M.add(V),D=re(D,R)}return new ie(M,D)}r.A=function(D){return fe(this,D).h},r.and=function(D){for(var x=Math.max(this.g.length,D.g.length),C=[],P=0;P<x;P++)C[P]=this.i(P)&D.i(P);return new d(C,this.h&D.h)},r.or=function(D){for(var x=Math.max(this.g.length,D.g.length),C=[],P=0;P<x;P++)C[P]=this.i(P)|D.i(P);return new d(C,this.h|D.h)},r.xor=function(D){for(var x=Math.max(this.g.length,D.g.length),C=[],P=0;P<x;P++)C[P]=this.i(P)^D.i(P);return new d(C,this.h^D.h)};function de(D){for(var x=D.g.length+1,C=[],P=0;P<x;P++)C[P]=D.i(P)<<1|D.i(P-1)>>>31;return new d(C,D.h)}function X(D,x){var C=x>>5;x%=32;for(var P=D.g.length-C,M=[],V=0;V<P;V++)M[V]=0<x?D.i(V+C)>>>x|D.i(V+C+1)<<32-x:D.i(V+C);return new d(M,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,tw=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=w,bi=d}).apply(typeof nv<"u"?nv:typeof self<"u"?self:typeof window<"u"?window:{});var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nw,ic,rw,Td,Qm,sw,iw,aw;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,y,v){return u==Array.prototype||u==Object.prototype||(u[y]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof fd=="object"&&fd];for(var y=0;y<u.length;++y){var v=u[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,y){if(y)e:{var v=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var z=u[S];if(!(z in v))break e;v=v[z]}u=u[u.length-1],S=v[u],y=y(S),y!=S&&y!=null&&e(v,u,{configurable:!0,writable:!0,value:y})}}function c(u,y){u instanceof String&&(u+="");var v=0,S=!1,z={next:function(){if(!S&&v<u.length){var K=v++;return{value:y(K,u[K]),done:!1}}return S=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(u){return u||function(){return c(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function g(u){var y=typeof u;return y=y!="object"?y:u?Array.isArray(u)?"array":y:"null",y=="array"||y=="object"&&typeof u.length=="number"}function _(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function w(u,y,v){return u.call.apply(u.bind,arguments)}function b(u,y,v){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,S),u.apply(y,z)}}return function(){return u.apply(y,arguments)}}function A(u,y,v){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:b,A.apply(null,arguments)}function I(u,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function j(u,y){function v(){}v.prototype=y.prototype,u.aa=y.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(S,z,K){for(var ue=Array(arguments.length-2),He=2;He<arguments.length;He++)ue[He-2]=arguments[He];return y.prototype[z].apply(S,ue)}}function H(u){const y=u.length;if(0<y){const v=Array(y);for(let S=0;S<y;S++)v[S]=u[S];return v}return[]}function U(u,y){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(g(S)){const z=u.length||0,K=S.length||0;u.length=z+K;for(let ue=0;ue<K;ue++)u[z+ue]=S[ue]}else u.push(S)}}class re{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function se(u){return/^[\s\xa0]*$/.test(u)}function ie(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function fe(u){return fe[" "](u),u}fe[" "]=function(){};var de=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function X(u,y,v){for(const S in u)y.call(v,u[S],S,u)}function D(u,y){for(const v in u)y.call(void 0,u[v],v,u)}function x(u){const y={};for(const v in u)y[v]=u[v];return y}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,y){let v,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(v in S)u[v]=S[v];for(let K=0;K<C.length;K++)v=C[K],Object.prototype.hasOwnProperty.call(S,v)&&(u[v]=S[v])}}function M(u){var y=1;u=u.split(":");const v=[];for(;0<y&&u.length;)v.push(u.shift()),y--;return u.length&&v.push(u.join(":")),v}function V(u){m.setTimeout(()=>{throw u},0)}function R(){var u=pe;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class De{constructor(){this.h=this.g=null}add(y,v){const S=Me.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var Me=new re(()=>new Q,u=>u.reset());class Q{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,Y=!1,pe=new De,O=()=>{const u=m.Promise.resolve(void 0);ae=()=>{u.then(ee)}};var ee=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(v){V(v)}var y=Me;y.j(u),100>y.h&&(y.h++,u.next=y.g,y.g=u)}Y=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return u})();function Oe(u,y){if(oe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget){if(de){e:{try{fe(y.nodeName);var z=!0;break e}catch{}z=!1}z||(y=null)}}else v=="mouseover"?y=u.fromElement:v=="mouseout"&&(y=u.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Se[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Oe.aa.h.call(this)}}j(Oe,oe);var Se={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Nt="closure_listenable_"+(1e6*Math.random()|0),We=0;function Zt(u,y,v,S,z){this.listener=u,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=z,this.key=++We,this.da=this.fa=!1}function ar(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function or(u){this.src=u,this.g={},this.h=0}or.prototype.add=function(u,y,v,S,z){var K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);var ue=$r(u,y,S,z);return-1<ue?(y=u[ue],v||(y.fa=!1)):(y=new Zt(y,this.src,K,!!S,z),y.fa=v,u.push(y)),y};function vr(u,y){var v=y.type;if(v in u.g){var S=u.g[v],z=Array.prototype.indexOf.call(S,y,void 0),K;(K=0<=z)&&Array.prototype.splice.call(S,z,1),K&&(ar(y),u.g[v].length==0&&(delete u.g[v],u.h--))}}function $r(u,y,v,S){for(var z=0;z<u.length;++z){var K=u[z];if(!K.da&&K.listener==y&&K.capture==!!v&&K.ha==S)return z}return-1}var Er="closure_lm_"+(1e6*Math.random()|0),Ia={};function Wo(u,y,v,S,z){if(Array.isArray(y)){for(var K=0;K<y.length;K++)Wo(u,y[K],v,S,z);return null}return v=Na(v),u&&u[Nt]?u.K(y,v,_(S)?!!S.capture:!1,z):pn(u,y,v,!1,S,z)}function pn(u,y,v,S,z,K){if(!y)throw Error("Invalid event type");var ue=_(z)?!!z.capture:!!z,He=Ls(u);if(He||(u[Er]=He=new or(u)),v=He.add(y,v,S,ue,K),v.proxy)return v;if(S=Ca(),v.proxy=S,S.src=u,S.listener=v,u.addEventListener)ve||(z=ue),z===void 0&&(z=!1),u.addEventListener(y.toString(),S,z);else if(u.attachEvent)u.attachEvent(Zr(y.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ca(){function u(v){return y.call(u.src,u.listener,v)}const y=Zo;return u}function Wr(u,y,v,S,z){if(Array.isArray(y))for(var K=0;K<y.length;K++)Wr(u,y[K],v,S,z);else S=_(S)?!!S.capture:!!S,v=Na(v),u&&u[Nt]?(u=u.i,y=String(y).toString(),y in u.g&&(K=u.g[y],v=$r(K,v,S,z),-1<v&&(ar(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete u.g[y],u.h--)))):u&&(u=Ls(u))&&(y=u.g[y.toString()],u=-1,y&&(u=$r(y,v,S,z)),(v=-1<u?y[u]:null)&&js(v))}function js(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[Nt])vr(y.i,u);else{var v=u.type,S=u.proxy;y.removeEventListener?y.removeEventListener(v,S,u.capture):y.detachEvent?y.detachEvent(Zr(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=Ls(y))?(vr(v,u),v.h==0&&(v.src=null,y[Er]=null)):ar(u)}}}function Zr(u){return u in Ia?Ia[u]:Ia[u]="on"+u}function Zo(u,y){if(u.da)u=!0;else{y=new Oe(y,this);var v=u.listener,S=u.ha||u.src;u.fa&&js(u),u=v.call(S,y)}return u}function Ls(u){return u=u[Er],u instanceof or?u:null}var Us="__closure_events_fn_"+(1e9*Math.random()>>>0);function Na(u){return typeof u=="function"?u:(u[Us]||(u[Us]=function(y){return u.handleEvent(y)}),u[Us])}function ht(){ce.call(this),this.i=new or(this),this.M=this,this.F=null}j(ht,ce),ht.prototype[Nt]=!0,ht.prototype.removeEventListener=function(u,y,v,S){Wr(this,u,y,v,S)};function Ze(u,y){var v,S=u.F;if(S)for(v=[];S;S=S.F)v.push(S);if(u=u.M,S=y.type||y,typeof y=="string")y=new oe(y,u);else if(y instanceof oe)y.target=y.target||u;else{var z=y;y=new oe(S,u),P(y,z)}if(z=!0,v)for(var K=v.length-1;0<=K;K--){var ue=y.g=v[K];z=yn(ue,S,!0,y)&&z}if(ue=y.g=u,z=yn(ue,S,!0,y)&&z,z=yn(ue,S,!1,y)&&z,v)for(K=0;K<v.length;K++)ue=y.g=v[K],z=yn(ue,S,!1,y)&&z}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,y;for(y in u.g){for(var v=u.g[y],S=0;S<v.length;S++)ar(v[S]);delete u.g[y],u.h--}}this.F=null},ht.prototype.K=function(u,y,v,S){return this.i.add(String(u),y,!1,v,S)},ht.prototype.L=function(u,y,v,S){return this.i.add(String(u),y,!0,v,S)};function yn(u,y,v,S){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();for(var z=!0,K=0;K<y.length;++K){var ue=y[K];if(ue&&!ue.da&&ue.capture==v){var He=ue.listener,Lt=ue.ha||ue.src;ue.fa&&vr(u.i,ue),z=He.call(Lt,S)!==!1&&z}}return z&&!S.defaultPrevented}function Ht(u,y,v){if(typeof u=="function")v&&(u=A(u,v));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(u,y||0)}function Da(u){u.g=Ht(()=>{u.g=null,u.i&&(u.i=!1,Da(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class Jo extends ce{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Da(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jr(u){ce.call(this),this.h=u,this.g={}}j(Jr,ce);var es=[];function ts(u){X(u.g,function(y,v){this.g.hasOwnProperty(v)&&js(y)},u),u.g={}}Jr.prototype.N=function(){Jr.aa.N.call(this),ts(this)},Jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nn=m.JSON.stringify,zs=m.JSON.parse,wr=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function ji(){}ji.prototype.h=null;function Li(u){return u.h||(u.h=u.i())}function qs(){}var lr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dn(){oe.call(this,"d")}j(Dn,oe);function Ui(){oe.call(this,"c")}j(Ui,oe);var Gn={},zi=null;function Tr(){return zi=zi||new ht}Gn.La="serverreachability";function Bs(u){oe.call(this,Gn.La,u)}j(Bs,oe);function br(u){const y=Tr();Ze(y,new Bs(y))}Gn.STAT_EVENT="statevent";function Oa(u,y){oe.call(this,Gn.STAT_EVENT,u),this.stat=y}j(Oa,oe);function ut(u){const y=Tr();Ze(y,new Oa(y,u))}Gn.Ma="timingevent";function At(u,y){oe.call(this,Gn.Ma,u),this.size=y}j(At,oe);function Et(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},y)}function le(){this.g=!0}le.prototype.xa=function(){this.g=!1};function me(u,y,v,S,z,K){u.info(function(){if(u.g)if(K)for(var ue="",He=K.split("&"),Lt=0;Lt<He.length;Lt++){var Fe=He[Lt].split("=");if(1<Fe.length){var Gt=Fe[0];Fe=Fe[1];var Ut=Gt.split("_");ue=2<=Ut.length&&Ut[1]=="type"?ue+(Gt+"="+Fe+"&"):ue+(Gt+"=redacted&")}}else ue=null;else ue=K;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+y+`
`+v+`
`+ue})}function wt(u,y,v,S,z,K,ue){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+y+`
`+v+`
`+K+" "+ue})}function Qn(u,y,v,S){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+On(u,v)+(S?" "+S:"")})}function cr(u,y){u.info(function(){return"TIMEOUT: "+y})}le.prototype.info=function(){};function On(u,y){if(!u.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var S=v[u];if(!(2>S.length)){var z=S[1];if(Array.isArray(z)&&!(1>z.length)){var K=z[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ue=1;ue<z.length;ue++)z[ue]=""}}}}return Nn(v)}catch{return y}}var Hs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ns={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sr;function Ar(){}j(Ar,ji),Ar.prototype.g=function(){return new XMLHttpRequest},Ar.prototype.i=function(){return{}},Sr=new Ar;function _n(u,y,v,S){this.j=u,this.i=y,this.l=v,this.R=S||1,this.U=new Jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xt}function xt(){this.i=null,this.g="",this.h=!1}var el={},Pa={};function ur(u,y,v){u.L=1,u.v=Gi(Pn(y)),u.m=v,u.P=!0,rs(u,null)}function rs(u,y){u.F=Date.now(),qi(u),u.A=Pn(u.v);var v=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),al(v.i,"t",S),u.C=0,v=u.j.J,u.h=new xt,u.g=cu(u.j,v?y:null,!u.m),0<u.O&&(u.M=new Jo(A(u.Y,u,u.g),u.O)),y=u.U,v=u.g,S=u.ca;var z="readystatechange";Array.isArray(z)||(z&&(es[0]=z.toString()),z=es);for(var K=0;K<z.length;K++){var ue=Wo(v,z[K],S||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,y)):(u.u="GET",u.g.ea(u.A,u.u,null,y)),br(),me(u.i,u.u,u.A,u.l,u.R,u.m)}_n.prototype.ca=function(u){u=u.target;const y=this.M;y&&$n(u)==3?y.j():this.Y(u)},_n.prototype.Y=function(u){try{if(u==this.g)e:{const Ut=$n(this.g);var y=this.g.Ba();const ds=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||tu(this.g)))){this.J||Ut!=4||y==7||(y==8||0>=ds?br(3):br(2)),Fs(this);var v=this.g.Z();this.X=v;t:if(Yc(this)){var S=tu(this.g);u="";var z=S.length,K=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jt(this),xr(this);var ue="";break t}this.h.i=new m.TextDecoder}for(y=0;y<z;y++)this.h.h=!0,u+=this.h.i.decode(S[y],{stream:!(K&&y==z-1)});S.length=0,this.h.g+=u,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=v==200,wt(this.i,this.u,this.A,this.l,this.R,Ut,v),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Lt=this.g;if((He=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(He)){var Fe=He;break t}}Fe=null}if(v=Fe)Qn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bi(this,v);else{this.o=!1,this.s=3,ut(12),Jt(this),xr(this);break e}}if(this.P){v=!0;let en;for(;!this.J&&this.C<ue.length;)if(en=Xc(this,ue),en==Pa){Ut==4&&(this.s=4,ut(14),v=!1),Qn(this.i,this.l,null,"[Incomplete Response]");break}else if(en==el){this.s=4,ut(15),Qn(this.i,this.l,ue,"[Invalid Chunk]"),v=!1;break}else Qn(this.i,this.l,en,null),Bi(this,en);if(Yc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||ue.length!=0||this.h.h||(this.s=1,ut(16),v=!1),this.o=this.o&&v,!v)Qn(this.i,this.l,ue,"[Invalid Chunked Response]"),Jt(this),xr(this);else if(0<ue.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Ji(Gt),Gt.M=!0,ut(11))}}else Qn(this.i,this.l,ue,null),Bi(this,ue);Ut==4&&Jt(this),this.o&&!this.J&&(Ut==4?au(this.j,this):(this.o=!1,qi(this)))}else Ih(this.g),v==400&&0<ue.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),Jt(this),xr(this)}}}catch{}finally{}};function Yc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Xc(u,y){var v=u.C,S=y.indexOf(`
`,v);return S==-1?Pa:(v=Number(y.substring(v,S)),isNaN(v)?el:(S+=1,S+v>y.length?Pa:(y=y.slice(S,S+v),u.C=S+v,y)))}_n.prototype.cancel=function(){this.J=!0,Jt(this)};function qi(u){u.S=Date.now()+u.I,$c(u,u.I)}function $c(u,y){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Et(A(u.ba,u),y)}function Fs(u){u.B&&(m.clearTimeout(u.B),u.B=null)}_n.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(cr(this.i,this.A),this.L!=2&&(br(),ut(17)),Jt(this),this.s=2,xr(this)):$c(this,this.S-u)};function xr(u){u.j.G==0||u.J||au(u.j,u)}function Jt(u){Fs(u);var y=u.M;y&&typeof y.ma=="function"&&y.ma(),u.M=null,ts(u.U),u.g&&(y=u.g,u.g=null,y.abort(),y.ma())}function Bi(u,y){try{var v=u.j;if(v.G!=0&&(v.g==u||tl(v.h,u))){if(!u.K&&tl(v.h,u)&&v.G==3){try{var S=v.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Ga(v),Ha(v);else break e;dl(v),ut(18)}}else v.za=z[1],0<v.za-v.T&&37500>z[2]&&v.F&&v.v==0&&!v.C&&(v.C=Et(A(v.Za,v),6e3));if(1>=ka(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else us(v,11)}else if((u.K||v.g==u)&&Ga(v),!se(y))for(z=v.Da.g.parse(y),y=0;y<z.length;y++){let Fe=z[y];if(v.T=Fe[0],Fe=Fe[1],v.G==2)if(Fe[0]=="c"){v.K=Fe[1],v.ia=Fe[2];const Gt=Fe[3];Gt!=null&&(v.la=Gt,v.j.info("VER="+v.la));const Ut=Fe[4];Ut!=null&&(v.Aa=Ut,v.j.info("SVER="+v.Aa));const ds=Fe[5];ds!=null&&typeof ds=="number"&&0<ds&&(S=1.5*ds,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const en=u.g;if(en){const Pr=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pr){var K=S.h;K.g||Pr.indexOf("spdy")==-1&&Pr.indexOf("quic")==-1&&Pr.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Va(K,K.h),K.h=null))}if(S.D){const fl=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;fl&&(S.ya=fl,st(S.I,S.D,fl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var ue=u;if(S.qa=lu(S,S.J?S.ia:null,S.W),ue.K){vn(S.h,ue);var He=ue,Lt=S.L;Lt&&(He.I=Lt),He.B&&(Fs(He),qi(He)),S.g=ue}else su(S);0<v.i.length&&Fa(v)}else Fe[0]!="stop"&&Fe[0]!="close"||us(v,7);else v.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?us(v,7):cl(v):Fe[0]!="noop"&&v.l&&v.l.ta(Fe),v.v=0)}}br(4)}catch{}}var Wc=class{constructor(u,y){this.g=u,this.map=y}};function ss(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ma(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ka(u){return u.h?1:u.g?u.g.size:0}function tl(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function Va(u,y){u.g?u.g.add(y):u.h=y}function vn(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}ss.prototype.cancel=function(){if(this.i=nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function nl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const v of u.g.values())y=y.concat(v.D);return y}return H(u.i)}function Sh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var y=[],v=u.length,S=0;S<v;S++)y.push(u[S]);return y}y=[],v=0;for(S in u)y[v++]=u[S];return y}function ja(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var y=[];u=u.length;for(var v=0;v<u;v++)y.push(v);return y}y=[],v=0;for(const S in u)y[v++]=S;return y}}}function rl(u,y){if(u.forEach&&typeof u.forEach=="function")u.forEach(y,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,y,void 0);else for(var v=ja(u),S=Sh(u),z=S.length,K=0;K<z;K++)y.call(void 0,S[K],v&&v[K],u)}var Hi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ah(u,y){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var S=u[v].indexOf("="),z=null;if(0<=S){var K=u[v].substring(0,S);z=u[v].substring(S+1)}else K=u[v];y(K,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Dt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Dt){this.h=u.h,Fi(this,u.j),this.o=u.o,this.g=u.g,Gs(this,u.s),this.l=u.l;var y=u.i,v=new as;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),is(this,v),this.m=u.m}else u&&(y=String(u).match(Hi))?(this.h=!1,Fi(this,y[1]||"",!0),this.o=Kn(y[2]||""),this.g=Kn(y[3]||"",!0),Gs(this,y[4]),this.l=Kn(y[5]||"",!0),is(this,y[6]||"",!0),this.m=Kn(y[7]||"")):(this.h=!1,this.i=new as(null,this.h))}Dt.prototype.toString=function(){var u=[],y=this.j;y&&u.push(Qi(y,sl,!0),":");var v=this.g;return(v||y=="file")&&(u.push("//"),(y=this.o)&&u.push(Qi(y,sl,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Qi(v,v.charAt(0)=="/"?xh:il,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Qi(v,La)),u.join("")};function Pn(u){return new Dt(u)}function Fi(u,y,v){u.j=v?Kn(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function Gs(u,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);u.s=y}else u.s=null}function is(u,y,v){y instanceof as?(u.i=y,Jc(u.i,u.h)):(v||(y=Qi(y,Rh)),u.i=new as(y,u.h))}function st(u,y,v){u.i.set(y,v)}function Gi(u){return st(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Kn(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qi(u,y,v){return typeof u=="string"?(u=encodeURI(u).replace(y,Zc),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Zc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var sl=/[#\/\?@]/g,il=/[#\?:]/g,xh=/[#\?]/g,Rh=/[#\?@]/g,La=/#/g;function as(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function Yn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ah(u.i,function(y,v){u.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=as.prototype,r.add=function(u,y){Yn(this),this.i=null,u=Rr(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(y),this.h+=1,this};function os(u,y){Yn(u),y=Rr(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function ls(u,y){return Yn(u),y=Rr(u,y),u.g.has(y)}r.forEach=function(u,y){Yn(this),this.g.forEach(function(v,S){v.forEach(function(z){u.call(y,z,S,this)},this)},this)},r.na=function(){Yn(this);const u=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let S=0;S<y.length;S++){const z=u[S];for(let K=0;K<z.length;K++)v.push(y[S])}return v},r.V=function(u){Yn(this);let y=[];if(typeof u=="string")ls(this,u)&&(y=y.concat(this.g.get(Rr(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)y=y.concat(u[v])}return y},r.set=function(u,y){return Yn(this),this.i=null,u=Rr(this,u),ls(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},r.get=function(u,y){return u?(u=this.V(u),0<u.length?String(u[0]):y):y};function al(u,y,v){os(u,y),0<v.length&&(u.i=null,u.g.set(Rr(u,y),H(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var S=y[v];const K=encodeURIComponent(String(S)),ue=this.V(S);for(S=0;S<ue.length;S++){var z=K;ue[S]!==""&&(z+="="+encodeURIComponent(String(ue[S]))),u.push(z)}}return this.i=u.join("&")};function Rr(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Jc(u,y){y&&!u.j&&(Yn(u),u.i=null,u.g.forEach(function(v,S){var z=S.toLowerCase();S!=z&&(os(this,S),al(this,z,v))},u)),u.j=y}function Ki(u,y){const v=new le;if(m.Image){const S=new Image;S.onload=I(Xn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=I(Xn,v,"TestLoadImage: error",!1,y,S),S.onabort=I(Xn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=I(Xn,v,"TestLoadImage: timeout",!1,y,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else y(!1)}function dr(u,y){const v=new le,S=new AbortController,z=setTimeout(()=>{S.abort(),Xn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:S.signal}).then(K=>{clearTimeout(z),K.ok?Xn(v,"TestPingServer: ok",!0,y):Xn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),Xn(v,"TestPingServer: error",!1,y)})}function Xn(u,y,v,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(v)}catch{}}function Yi(){this.g=new wr}function Ir(u,y,v){const S=v||"";try{rl(u,function(z,K){let ue=z;_(z)&&(ue=Nn(z)),y.push(S+K+"="+encodeURIComponent(ue))})}catch(z){throw y.push(S+"type="+encodeURIComponent("_badmap")),z}}function Qs(u){this.l=u.Ub||null,this.j=u.eb||!1}j(Qs,ji),Qs.prototype.g=function(){return new cs(this.l,this.j)},Qs.prototype.i=(function(u){return function(){return u}})({});function cs(u,y){ht.call(this),this.D=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(cs,ht),r=cs.prototype,r.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=y,this.readyState=1,Nr(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(y.body=u),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cr(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Nr(this)),this.g&&(this.readyState=3,Nr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ol(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ol(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?Cr(this):Nr(this),this.readyState==3&&ol(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Cr(this))},r.Qa=function(u){this.g&&(this.response=u,Cr(this))},r.ga=function(){this.g&&Cr(this)};function Cr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Nr(u)}r.setRequestHeader=function(u,y){this.u.append(u,y)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=y.next();return u.join(`\r
`)};function Nr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ll(u){let y="";return X(u,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Ft(u,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=ll(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):st(u,y,v))}function et(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(et,ht);var Ua=/^https?$/i,Xi=["POST","PUT"];r=et.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sr.g(),this.v=this.o?Li(this.o):Li(Sr),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(K){eu(this,K);return}if(u=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)v.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const K of S.keys())v.set(K,S.get(K));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),z=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Xi,y,void 0))||S||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ue]of v)this.g.setRequestHeader(K,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$i(this),this.u=!0,this.g.send(u),this.u=!1}catch(K){eu(this,K)}};function eu(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.m=5,za(u),Dr(u)}function za(u){u.A||(u.A=!0,Ze(u,"complete"),Ze(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ze(this,"complete"),Ze(this,"abort"),Dr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dr(this,!0)),et.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?qa(this):this.bb())},r.bb=function(){qa(this)};function qa(u){if(u.h&&typeof d<"u"&&(!u.v[1]||$n(u)!=4||u.Z()!=2)){if(u.u&&$n(u)==4)Ht(u.Ea,0,u);else if(Ze(u,"readystatechange"),$n(u)==4){u.h=!1;try{const ue=u.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=ue===0){var z=String(u.D).match(Hi)[1]||null;!z&&m.self&&m.self.location&&(z=m.self.location.protocol.slice(0,-1)),S=!Ua.test(z?z.toLowerCase():"")}v=S}if(v)Ze(u,"complete"),Ze(u,"success");else{u.m=6;try{var K=2<$n(u)?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.Z()+"]",za(u)}}finally{Dr(u)}}}}function Dr(u,y){if(u.g){$i(u);const v=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,y||Ze(u,"ready");try{v.onreadystatechange=S}catch{}}}function $i(u){u.I&&(m.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function $n(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),zs(y)}};function tu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ih(u){const y={};u=(u.g&&2<=$n(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(se(u[S]))continue;var v=M(u[S]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=y[z]||[];y[z]=K,K.push(v)}D(y,function(S){return S.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wi(u,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||y}function Ba(u){this.Aa=0,this.i=[],this.j=new le,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wi("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wi("baseRetryDelayMs",5e3,u),this.cb=Wi("retryDelaySeedMs",1e4,u),this.Wa=Wi("forwardChannelMaxRetries",2,u),this.wa=Wi("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ss(u&&u.concurrentRequestLimit),this.Da=new Yi,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ba.prototype,r.la=8,r.G=1,r.connect=function(u,y,v,S){ut(0),this.W=u,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=lu(this,null,this.W),Fa(this)};function cl(u){if(nu(u),u.G==3){var y=u.U++,v=Pn(u.I);if(st(v,"SID",u.K),st(v,"RID",y),st(v,"TYPE","terminate"),Zi(u,v),y=new _n(u,u.j,y),y.L=2,y.v=Gi(Pn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=cu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),qi(y)}ou(u)}function Ha(u){u.g&&(Ji(u),u.g.cancel(),u.g=null)}function nu(u){Ha(u),u.u&&(m.clearTimeout(u.u),u.u=null),Ga(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function Fa(u){if(!Ma(u.h)&&!u.s){u.s=!0;var y=u.Ga;ae||O(),Y||(ae(),Y=!0),pe.add(y,u),u.B=0}}function Ch(u,y){return ka(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=y.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Et(A(u.Ga,u,y),hl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const z=new _n(this,this.j,u);let K=this.o;if(this.S&&(K?(K=x(K),P(K,this.S)):K=this.S),this.m!==null||this.O||(z.H=K,K=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=ru(this,z,y),v=Pn(this.I),st(v,"RID",u),st(v,"CVER",22),this.D&&st(v,"X-HTTP-Session-Id",this.D),Zi(this,v),K&&(this.O?y="headers="+encodeURIComponent(String(ll(K)))+"&"+y:this.m&&Ft(v,this.m,K)),Va(this.h,z),this.Ua&&st(v,"TYPE","init"),this.P?(st(v,"$req",y),st(v,"SID","null"),z.T=!0,ur(z,v,null)):ur(z,v,y),this.G=2}}else this.G==3&&(u?ul(this,u):this.i.length==0||Ma(this.h)||ul(this))};function ul(u,y){var v;y?v=y.l:v=u.U++;const S=Pn(u.I);st(S,"SID",u.K),st(S,"RID",v),st(S,"AID",u.T),Zi(u,S),u.m&&u.o&&Ft(S,u.m,u.o),v=new _n(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),y&&(u.i=y.D.concat(u.i)),y=ru(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Va(u.h,v),ur(v,S,y)}function Zi(u,y){u.H&&X(u.H,function(v,S){st(y,S,v)}),u.l&&rl({},function(v,S){st(y,S,v)})}function ru(u,y,v){v=Math.min(u.i.length,v);var S=u.l?A(u.l.Na,u.l,u):null;e:{var z=u.i;let K=-1;for(;;){const ue=["count="+v];K==-1?0<v?(K=z[0].g,ue.push("ofs="+K)):K=0:ue.push("ofs="+K);let He=!0;for(let Lt=0;Lt<v;Lt++){let Fe=z[Lt].g;const Gt=z[Lt].map;if(Fe-=K,0>Fe)K=Math.max(0,z[Lt].g-100),He=!1;else try{Ir(Gt,ue,"req"+Fe+"_")}catch{S&&S(Gt)}}if(He){S=ue.join("&");break e}}}return u=u.i.splice(0,v),y.D=u,S}function su(u){if(!u.g&&!u.u){u.Y=1;var y=u.Fa;ae||O(),Y||(ae(),Y=!0),pe.add(y,u),u.v=0}}function dl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Et(A(u.Fa,u),hl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,iu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Et(A(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),Ha(this),iu(this))};function Ji(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function iu(u){u.g=new _n(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var y=Pn(u.qa);st(y,"RID","rpc"),st(y,"SID",u.K),st(y,"AID",u.T),st(y,"CI",u.F?"0":"1"),!u.F&&u.ja&&st(y,"TO",u.ja),st(y,"TYPE","xmlhttp"),Zi(u,y),u.m&&u.o&&Ft(y,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Gi(Pn(y)),v.m=null,v.P=!0,rs(v,u)}r.Za=function(){this.C!=null&&(this.C=null,Ha(this),dl(this),ut(19))};function Ga(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function au(u,y){var v=null;if(u.g==y){Ga(u),Ji(u),u.g=null;var S=2}else if(tl(u.h,y))v=y.D,vn(u.h,y),S=1;else return;if(u.G!=0){if(y.o)if(S==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var z=u.B;S=Tr(),Ze(S,new At(S,v)),Fa(u)}else su(u);else if(z=y.s,z==3||z==0&&0<y.X||!(S==1&&Ch(u,y)||S==2&&dl(u)))switch(v&&0<v.length&&(y=u.h,y.i=y.i.concat(v)),z){case 1:us(u,5);break;case 4:us(u,10);break;case 3:us(u,6);break;default:us(u,2)}}}function hl(u,y){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*y}function us(u,y){if(u.j.info("Error code "+y),y==2){var v=A(u.fb,u),S=u.Xa;const z=!S;S=new Dt(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Fi(S,"https"),Gi(S),z?Ki(S.toString(),v):dr(S.toString(),v)}else ut(2);u.G=0,u.l&&u.l.sa(y),ou(u),nu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function ou(u){if(u.G=0,u.ka=[],u.l){const y=nl(u.h);(y.length!=0||u.i.length!=0)&&(U(u.ka,y),U(u.ka,u.i),u.h.i.length=0,H(u.i),u.i.length=0),u.l.ra()}}function lu(u,y,v){var S=v instanceof Dt?Pn(v):new Dt(v);if(S.g!="")y&&(S.g=y+"."+S.g),Gs(S,S.s);else{var z=m.location;S=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;var K=new Dt(null);S&&Fi(K,S),y&&(K.g=y),z&&Gs(K,z),v&&(K.l=v),S=K}return v=u.D,y=u.ya,v&&y&&st(S,v,y),st(S,"VER",u.la),Zi(u,S),S}function cu(u,y,v){if(y&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Ca&&!u.pa?new et(new Qs({eb:v})):new et(u.pa),y.Ha(u.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function uu(){}r=uu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Qa(){}Qa.prototype.g=function(u,y){return new En(u,y)};function En(u,y){ht.call(this),this.g=new Ba(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(u?u["X-WebChannel-Client-Profile"]=y.va:u={"X-WebChannel-Client-Profile":y.va}),this.g.S=u,(u=y&&y.Sb)&&!se(u)&&(this.g.m=u),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!se(y)&&(this.g.D=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new Or(this)}j(En,ht),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){cl(this.g)},En.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Nn(u),u=v);y.i.push(new Wc(y.Ya++,u)),y.G==3&&Fa(y)},En.prototype.N=function(){this.g.l=null,delete this.j,cl(this.g),delete this.g,En.aa.N.call(this)};function du(u){Dn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const v in y){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}j(du,Dn);function hu(){Ui.call(this),this.status=1}j(hu,Ui);function Or(u){this.g=u}j(Or,uu),Or.prototype.ua=function(){Ze(this.g,"a")},Or.prototype.ta=function(u){Ze(this.g,new du(u))},Or.prototype.sa=function(u){Ze(this.g,new hu)},Or.prototype.ra=function(){Ze(this.g,"b")},Qa.prototype.createWebChannel=Qa.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,aw=function(){return new Qa},iw=function(){return Tr()},sw=Gn,Qm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hs.NO_ERROR=0,Hs.TIMEOUT=8,Hs.HTTP_ERROR=6,Td=Hs,ns.COMPLETE="complete",rw=ns,qs.EventType=lr,lr.OPEN="a",lr.CLOSE="b",lr.ERROR="c",lr.MESSAGE="d",ht.prototype.listen=ht.prototype.K,ic=qs,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,nw=et}).apply(typeof fd<"u"?fd:typeof self<"u"?self:typeof window<"u"?window:{});const rv="@firebase/firestore",sv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new pg("@firebase/firestore");function To(){return Ta.logLevel}function ge(r,...e){if(Ta.logLevel<=ze.DEBUG){const t=e.map(vg);Ta.debug(`Firestore (${Fo}): ${r}`,...t)}}function Cs(r,...e){if(Ta.logLevel<=ze.ERROR){const t=e.map(vg);Ta.error(`Firestore (${Fo}): ${r}`,...t)}}function Mo(r,...e){if(Ta.logLevel<=ze.WARN){const t=e.map(vg);Ta.warn(`Firestore (${Fo}): ${r}`,...t)}}function vg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,ow(r,i,t)}function ow(r,e,t){let i=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Cs(i),new Error(i)}function Ke(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||ow(e,o,i)}function Ne(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Ms{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fn.UNAUTHENTICATED)))}shutdown(){}}class w1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class T1{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let c=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new zr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new zr)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string",31837,{l:i}),new lw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class b1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class S1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new b1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const i=c=>{c.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ge("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new iv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=x1(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<t&&(i+=e.charAt(o[c]%62))}return i}}function qe(r,e){return r<e?-1:r>e?1:0}function Km(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),c=e.charAt(i);if(o!==c)return Pm(o)===Pm(c)?qe(o,c):Pm(o)?1:-1}return qe(r.length,e.length)}const R1=55296,I1=57343;function Pm(r){const e=r.charCodeAt(0);return e>=R1&&e<=I1}function ko(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="__name__";class Ur{constructor(e,t,i){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&we(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ur.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ur?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const c=Ur.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return qe(e.length,t.length)}static compareSegments(e,t){const i=Ur.isNumericId(e),o=Ur.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Ur.extractNumericId(e).compare(Ur.extractNumericId(t)):Km(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bi.fromString(e.substring(4,e.length-2))}}class lt extends Ur{construct(e,t,i){return new lt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const C1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Ur{construct(e,t,i){return new an(e,t,i)}static isValidIdentifier(e){return C1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===av}static keyField(){return new an([av])}static fromServerFormat(e){const t=[];let i="",o=0;const c=()=>{if(i.length===0)throw new he(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(i+=m,o++):(c(),o++)}if(c(),d)throw new he(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(t)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(lt.fromString(e))}static fromName(e){return new Ee(lt.fromString(e).popFirst(5))}static empty(){return new Ee(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(r,e,t){if(!t)throw new he(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function N1(r,e,t,i){if(e===!0&&i===!0)throw new he(W.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ov(r){if(!Ee.isDocumentKey(r))throw new he(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function lv(r){if(Ee.isDocumentKey(r))throw new he(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function uw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function rh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":we(12329,{type:typeof r})}function In(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rh(r);throw new he(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function D1(r,e){if(e<=0)throw new he(W.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Pc(r,e){if(!uw(r))throw new he(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const d=r[i];if(o&&typeof d!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${i}' field to equal '${c.value}'`;break}}if(t)throw new he(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=-62135596800,uv=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*uv);return new Ye(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<cv)throw new he(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uv}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pc(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:jt("string",Ye._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Ye(0,0))}static max(){return new Ae(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=-1;function O1(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new Ye(t+1,0):new Ye(t,i));return new Ri(o,Ee.empty(),e)}function P1(r){return new Ri(r.readTime,r.key,vc)}class Ri{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ri(Ae.min(),Ee.empty(),vc)}static max(){return new Ri(Ae.max(),Ee.empty(),vc)}}function M1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(r.documentKey,e.documentKey),t!==0?t:qe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==k1)throw r;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,i)=>{t(e)}))}static reject(e){return new ne(((t,i)=>{i(e)}))}static waitFor(e){return new ne(((t,i)=>{let o=0,c=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++c,d&&c===o&&t()}),(g=>i(g)))})),d=!0,c===o&&t()}))}static or(e){let t=ne.resolve(!1);for(const i of e)t=t.next((o=>o?ne.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,c)=>{i.push(t.call(this,o,c))})),this.waitFor(i)}static mapArray(e,t){return new ne(((i,o)=>{const c=e.length,d=new Array(c);let m=0;for(let g=0;g<c;g++){const _=g;t(e[_]).next((w=>{d[_]=w,++m,m===c&&i(d)}),(w=>o(w)))}}))}static doWhile(e,t){return new ne(((i,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):i()};c()}))}}function j1(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg=-1;function Mc(r){return r==null}function Md(r){return r===0&&1/r==-1/0}function L1(r){return typeof r=="number"&&Number.isInteger(r)&&!Md(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="";function U1(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=dv(e)),e=z1(r.get(t),e);return dv(e)}function z1(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const c=r.charAt(o);switch(c){case"\0":t+="";break;case dw:t+="";break;default:t+=c}}return t}function dv(r){return r+dw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Mi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function hw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,t,i,o,c){this.key=e,this.value=t,this.color=i??sn.RED,this.left=o??sn.EMPTY,this.right=c??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,c){return new sn(e??this.key,t??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,i),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return sn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,i,o,c){return this}insert(e,t,i){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fv(this.data.getIterator())}getIteratorFrom(e){return new fv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class fv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new Hn([])}unionWith(e){let t=new Bt(an.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ko(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new fw("Invalid base64 string: "+c):c}})(e);return new on(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const q1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ii(r){if(Ke(!!r,39018),typeof r=="string"){let e=0;const t=q1.exec(r);if(Ke(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ct(r.seconds),nanos:Ct(r.nanos)}}function Ct(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ci(r){return typeof r=="string"?on.fromBase64String(r):on.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="server_timestamp",gw="__type__",pw="__previous_value__",yw="__local_write_time__";function Tg(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[gw])==null?void 0:i.stringValue)===mw}function ih(r){const e=r.mapValue.fields[pw];return Tg(e)?ih(e):e}function Ec(r){const e=Ii(r.mapValue.fields[yw].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,t,i,o,c,d,m,g,_,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=w}}const kd="(default)";class wc{constructor(e,t){this.projectId=e,this.database=t||kd}static empty(){return new wc("","")}get isDefaultDatabase(){return this.database===kd}isEqual(e){return e instanceof wc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="__type__",H1="__max__",gd={mapValue:{}},vw="__vector__",Vd="value";function Ni(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Tg(r)?4:G1(r)?9007199254740991:F1(r)?10:11:we(28295,{value:r})}function Qr(r,e){if(r===e)return!0;const t=Ni(r);if(t!==Ni(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ec(r).isEqual(Ec(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=Ii(o.timestampValue),m=Ii(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return Ci(o.bytesValue).isEqual(Ci(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return Ct(o.geoPointValue.latitude)===Ct(c.geoPointValue.latitude)&&Ct(o.geoPointValue.longitude)===Ct(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Ct(o.integerValue)===Ct(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=Ct(o.doubleValue),m=Ct(c.doubleValue);return d===m?Md(d)===Md(m):isNaN(d)&&isNaN(m)}return!1})(r,e);case 9:return ko(r.arrayValue.values||[],e.arrayValue.values||[],Qr);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},m=c.mapValue.fields||{};if(hv(d)!==hv(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!Qr(d[g],m[g])))return!1;return!0})(r,e);default:return we(52216,{left:r})}}function Tc(r,e){return(r.values||[]).find((t=>Qr(t,e)))!==void 0}function Vo(r,e){if(r===e)return 0;const t=Ni(r),i=Ni(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const m=Ct(c.integerValue||c.doubleValue),g=Ct(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return mv(r.timestampValue,e.timestampValue);case 4:return mv(Ec(r),Ec(e));case 5:return Km(r.stringValue,e.stringValue);case 6:return(function(c,d){const m=Ci(c),g=Ci(d);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const m=c.split("/"),g=d.split("/");for(let _=0;_<m.length&&_<g.length;_++){const w=qe(m[_],g[_]);if(w!==0)return w}return qe(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const m=qe(Ct(c.latitude),Ct(d.latitude));return m!==0?m:qe(Ct(c.longitude),Ct(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return gv(r.arrayValue,e.arrayValue);case 10:return(function(c,d){var A,I,j,H;const m=c.fields||{},g=d.fields||{},_=(A=m[Vd])==null?void 0:A.arrayValue,w=(I=g[Vd])==null?void 0:I.arrayValue,b=qe(((j=_==null?void 0:_.values)==null?void 0:j.length)||0,((H=w==null?void 0:w.values)==null?void 0:H.length)||0);return b!==0?b:gv(_,w)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===gd.mapValue&&d===gd.mapValue)return 0;if(c===gd.mapValue)return 1;if(d===gd.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),_=d.fields||{},w=Object.keys(_);g.sort(),w.sort();for(let b=0;b<g.length&&b<w.length;++b){const A=Km(g[b],w[b]);if(A!==0)return A;const I=Vo(m[g[b]],_[w[b]]);if(I!==0)return I}return qe(g.length,w.length)})(r.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function mv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return qe(r,e);const t=Ii(r),i=Ii(e),o=qe(t.seconds,i.seconds);return o!==0?o:qe(t.nanos,i.nanos)}function gv(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const c=Vo(t[o],i[o]);if(c)return c}return qe(t.length,i.length)}function jo(r){return Ym(r)}function Ym(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Ii(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ci(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ee.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const c of t.values||[])o?o=!1:i+=",",i+=Ym(c);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const d of i)c?c=!1:o+=",",o+=`${d}:${Ym(t.fields[d])}`;return o+"}"})(r.mapValue):we(61005,{value:r})}function bd(r){switch(Ni(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ih(r);return e?16+bd(e):16;case 5:return 2*r.stringValue.length;case 6:return Ci(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,c)=>o+bd(c)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Mi(i.fields,((c,d)=>{o+=c.length+bd(d)})),o})(r.mapValue);default:throw we(13486,{value:r})}}function pv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Xm(r){return!!r&&"integerValue"in r}function bg(r){return!!r&&"arrayValue"in r}function yv(r){return!!r&&"nullValue"in r}function _v(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Sd(r){return!!r&&"mapValue"in r}function F1(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[_w])==null?void 0:i.stringValue)===vw}function dc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Mi(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=dc(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dc(r.arrayValue.values[t]);return e}return{...r}}function G1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===H1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Sd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dc(t)}setAll(e){let t=an.emptyPath(),i={},o=[];e.forEach(((d,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}d?i[m.lastSegment()]=dc(d):o.push(m.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,i,o)}delete(e){const t=this.field(e.popLast());Sd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Sd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Mi(t,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new Tn(dc(this.value))}}function Ew(r){const e=[];return Mi(r.fields,((t,i)=>{const o=new an([t]);if(Sd(i)){const c=Ew(i.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,i,o,c,d,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new $t(e,0,Ae.min(),Ae.min(),Ae.min(),Tn.empty(),0)}static newFoundDocument(e,t,i,o){return new $t(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new $t(e,2,t,Ae.min(),Ae.min(),Tn.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Ae.min(),Ae.min(),Tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t){this.position=e,this.inclusive=t}}function vv(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const c=e[o],d=r.position[o];if(c.field.isKeyField()?i=Ee.comparator(Ee.fromName(d.referenceValue),t.key):i=Vo(d,t.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ev(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Qr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Q1(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{}class Vt extends ww{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Y1(e,t,i):t==="array-contains"?new W1(e,i):t==="in"?new Z1(e,i):t==="not-in"?new J1(e,i):t==="array-contains-any"?new eR(e,i):new Vt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new X1(e,i):new $1(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vo(t,this.value)):t!==null&&Ni(this.value)===Ni(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends ww{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new yr(e,t)}matches(e){return Tw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Tw(r){return r.op==="and"}function bw(r){return K1(r)&&Tw(r)}function K1(r){for(const e of r.filters)if(e instanceof yr)return!1;return!0}function $m(r){if(r instanceof Vt)return r.field.canonicalString()+r.op.toString()+jo(r.value);if(bw(r))return r.filters.map((e=>$m(e))).join(",");{const e=r.filters.map((t=>$m(t))).join(",");return`${r.op}(${e})`}}function Sw(r,e){return r instanceof Vt?(function(i,o){return o instanceof Vt&&i.op===o.op&&i.field.isEqual(o.field)&&Qr(i.value,o.value)})(r,e):r instanceof yr?(function(i,o){return o instanceof yr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,d,m)=>c&&Sw(d,o.filters[m])),!0):!1})(r,e):void we(19439)}function Aw(r){return r instanceof Vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${jo(t.value)}`})(r):r instanceof yr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Aw).join(" ,")+"}"})(r):"Filter"}class Y1 extends Vt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class X1 extends Vt{constructor(e,t){super(e,"in",t),this.keys=xw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class $1 extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=xw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function xw(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class W1 extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bg(t)&&Tc(t.arrayValue,this.value)}}class Z1 extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Tc(this.value.arrayValue,t)}}class J1 extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tc(this.value.arrayValue,t)}}class eR extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Tc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,t=null,i=[],o=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=d,this.endAt=m,this.Te=null}}function wv(r,e=null,t=[],i=[],o=null,c=null,d=null){return new tR(r,e,t,i,o,c,d)}function Sg(r){const e=Ne(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>$m(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),Mc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>jo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>jo(i))).join(",")),e.Te=t}return e.Te}function Ag(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Q1(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Sw(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Ev(r.startAt,e.startAt)&&Ev(r.endAt,e.endAt)}function Wm(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t=null,i=[],o=[],c=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function nR(r,e,t,i,o,c,d,m){return new Ko(r,e,t,i,o,c,d,m)}function ah(r){return new Ko(r)}function Tv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Rw(r){return r.collectionGroup!==null}function hc(r){const e=Ne(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Bt(an.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new bc(c,i))})),t.has(an.keyField().canonicalString())||e.Ie.push(new bc(an.keyField(),i))}return e.Ie}function qr(r){const e=Ne(r);return e.Ee||(e.Ee=rR(e,hc(r))),e.Ee}function rR(r,e){if(r.limitType==="F")return wv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new bc(o.field,c)}));const t=r.endAt?new jd(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new jd(r.startAt.position,r.startAt.inclusive):null;return wv(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Zm(r,e){const t=r.filters.concat([e]);return new Ko(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ld(r,e,t){return new Ko(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function oh(r,e){return Ag(qr(r),qr(e))&&r.limitType===e.limitType}function Iw(r){return`${Sg(qr(r))}|lt:${r.limitType}`}function bo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Aw(o))).join(", ")}]`),Mc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>jo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>jo(o))).join(",")),`Target(${i})`})(qr(r))}; limitType=${r.limitType})`}function lh(r,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Ee.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(r,e)&&(function(i,o){for(const c of hc(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(d,m,g){const _=vv(d,m,g);return d.inclusive?_<=0:_<0})(i.startAt,hc(i),o)||i.endAt&&!(function(d,m,g){const _=vv(d,m,g);return d.inclusive?_>=0:_>0})(i.endAt,hc(i),o))})(r,e)}function sR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Cw(r){return(e,t)=>{let i=!1;for(const o of hc(r)){const c=iR(o,e,t);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function iR(r,e,t){const i=r.field.isKeyField()?Ee.comparator(e.key,t.key):(function(c,d,m){const g=d.data.field(c),_=m.data.field(c);return g!==null&&_!==null?Vo(g,_):we(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Mi(this.inner,((t,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return hw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=new vt(Ee.comparator);function Ns(){return aR}const Nw=new vt(Ee.comparator);function ac(...r){let e=Nw;for(const t of r)e=e.insert(t.key,t);return e}function Dw(r){let e=Nw;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ya(){return fc()}function Ow(){return fc()}function fc(){return new Aa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const oR=new vt(Ee.comparator),lR=new Bt(Ee.comparator);function Be(...r){let e=lR;for(const t of r)e=e.add(t);return e}const cR=new Bt(qe);function uR(){return cR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Md(e)?"-0":e}}function Pw(r){return{integerValue:""+r}}function Mw(r,e){return L1(e)?Pw(e):xg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(){this._=void 0}}function dR(r,e,t){return r instanceof Ud?(function(o,c){const d={fields:{[gw]:{stringValue:mw},[yw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Tg(c)&&(c=ih(c)),c&&(d.fields[pw]=c),{mapValue:d}})(t,e):r instanceof Sc?Vw(r,e):r instanceof Ac?jw(r,e):(function(o,c){const d=kw(o,c),m=bv(d)+bv(o.Ae);return Xm(d)&&Xm(o.Ae)?Pw(m):xg(o.serializer,m)})(r,e)}function hR(r,e,t){return r instanceof Sc?Vw(r,e):r instanceof Ac?jw(r,e):t}function kw(r,e){return r instanceof xc?(function(i){return Xm(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class Ud extends ch{}class Sc extends ch{constructor(e){super(),this.elements=e}}function Vw(r,e){const t=Lw(e);for(const i of r.elements)t.some((o=>Qr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Ac extends ch{constructor(e){super(),this.elements=e}}function jw(r,e){let t=Lw(e);for(const i of r.elements)t=t.filter((o=>!Qr(o,i)));return{arrayValue:{values:t}}}class xc extends ch{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bv(r){return Ct(r.integerValue||r.doubleValue)}function Lw(r){return bg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,t){this.field=e,this.transform=t}}function mR(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof Sc&&o instanceof Sc||i instanceof Ac&&o instanceof Ac?ko(i.elements,o.elements,Qr):i instanceof xc&&o instanceof xc?Qr(i.Ae,o.Ae):i instanceof Ud&&o instanceof Ud})(r.transform,e.transform)}class gR{constructor(e,t){this.version=e,this.transformResults=t}}class mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mn}static exists(e){return new mn(void 0,e)}static updateTime(e){return new mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ad(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class uh{}function Uw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Rg(r.key,mn.none()):new kc(r.key,r.data,mn.none());{const t=r.data,i=Tn.empty();let o=new Bt(an.comparator);for(let c of e.fields)if(!o.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?i.delete(c):i.set(c,d),o=o.add(c)}return new ki(r.key,i,new Hn(o.toArray()),mn.none())}}function pR(r,e,t){r instanceof kc?(function(o,c,d){const m=o.value.clone(),g=Av(o.fieldTransforms,c,d.transformResults);m.setAll(g),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(r,e,t):r instanceof ki?(function(o,c,d){if(!Ad(o.precondition,c))return void c.convertToUnknownDocument(d.version);const m=Av(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(zw(o)),g.setAll(m),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,t):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function mc(r,e,t,i){return r instanceof kc?(function(c,d,m,g){if(!Ad(c.precondition,d))return m;const _=c.value.clone(),w=xv(c.fieldTransforms,g,d);return _.setAll(w),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(r,e,t,i):r instanceof ki?(function(c,d,m,g){if(!Ad(c.precondition,d))return m;const _=xv(c.fieldTransforms,g,d),w=d.data;return w.setAll(zw(c)),w.setAll(_),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(r,e,t,i):(function(c,d,m){return Ad(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(r,e,t)}function yR(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),c=kw(i.transform,o||null);c!=null&&(t===null&&(t=Tn.empty()),t.set(i.field,c))}return t||null}function Sv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&ko(i,o,((c,d)=>mR(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class kc extends uh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ki extends uh{constructor(e,t,i,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function zw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Av(r,e,t){const i=new Map;Ke(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const c=r[o],d=c.transform,m=e.data.field(c.field);i.set(c.field,hR(d,m,t[o]))}return i}function xv(r,e,t){const i=new Map;for(const o of r){const c=o.transform,d=t.data.field(o.field);i.set(o.field,dR(c,d,e))}return i}class Rg extends uh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qw extends uh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&pR(c,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=mc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=mc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Ow();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=t.has(o.key)?null:m;const g=Uw(d,m);g!==null&&i.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Ae.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,((t,i)=>Sv(t,i)))&&ko(this.baseMutations,e.baseMutations,((t,i)=>Sv(t,i)))}}class Ig{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ke(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return oR})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,i[d].version);return new Ig(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Qe;function Bw(r){switch(r){case W.OK:return we(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return we(15467,{code:r})}}function Hw(r){if(r===void 0)return Cs("GRPC error has no .code"),W.UNKNOWN;switch(r){case Mt.OK:return W.OK;case Mt.CANCELLED:return W.CANCELLED;case Mt.UNKNOWN:return W.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return W.INTERNAL;case Mt.UNAVAILABLE:return W.UNAVAILABLE;case Mt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Mt.NOT_FOUND:return W.NOT_FOUND;case Mt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Mt.ABORTED:return W.ABORTED;case Mt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Mt.DATA_LOSS:return W.DATA_LOSS;default:return we(39323,{code:r})}}(Qe=Mt||(Mt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=new bi([4294967295,4294967295],0);function Rv(r){const e=wR().encode(r),t=new tw;return t.update(e),new Uint8Array(t.digest())}function Iv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new bi([t,i],0),new bi([o,c],0)]}class Cg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new oc(`Invalid padding: ${t}`);if(i<0)throw new oc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new oc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new oc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=bi.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(bi.fromNumber(i)));return o.compare(TR)===1&&(o=new bi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Rv(e),[i,o]=Iv(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(i,o,c);if(!this.we(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Cg(c,o,t);return i.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const t=Rv(e),[i,o]=Iv(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(i,o,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,t,i,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Vc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new dh(Ae.min(),o,new vt(qe),Ns(),Be())}}class Vc{constructor(e,t,i,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Vc(i,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class Fw{constructor(e,t){this.targetId=e,this.Ce=t}}class Gw{constructor(e,t,i=on.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Cv{constructor(){this.ve=0,this.Fe=Nv(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),i=Be();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:we(38017,{changeType:c})}})),new Vc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Nv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ns(),this.Je=pd(),this.He=pd(),this.Ye=new vt(qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(Wm(c))if(i===0){const d=new Ee(c.path);this.et(t,d,$t.newNoDocument(d,Ae.min()))}else Ke(i===1,20013,{expectedCount:i});else{const d=this._t(t);if(d!==i){const m=this.ut(e),g=m?this.ct(m,e,d):1;if(g!==0){this.it(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,_)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=t;let d,m;try{d=Ci(i).toUint8Array()}catch(g){if(g instanceof fw)return Mo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Cg(d,o,c)}catch(g){return Mo(g instanceof oc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((c=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const m=this.ot(d);if(m){if(c.current&&Wm(m.target)){const g=new Ee(m.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,$t.newNoDocument(g,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let i=Be();this.He.forEach(((c,d)=>{let m=!0;d.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new dh(e,t,this.Ye,this.je,i);return this.je=Ns(),this.Je=pd(),this.He=pd(),this.Ye=new vt(qe),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Cv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Bt(qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Bt(qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Cv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function pd(){return new vt(Ee.comparator)}function Nv(){return new vt(Ee.comparator)}const SR={asc:"ASCENDING",desc:"DESCENDING"},AR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xR={and:"AND",or:"OR"};class RR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jm(r,e){return r.useProto3Json||Mc(e)?e:{value:e}}function zd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function IR(r,e){return zd(r,e.toTimestamp())}function Fn(r){return Ke(!!r,49232),Ae.fromTimestamp((function(t){const i=Ii(t);return new Ye(i.seconds,i.nanos)})(r))}function Ng(r,e){return eg(r,e).canonicalString()}function eg(r,e){const t=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Kw(r){const e=lt.fromString(r);return Ke(Jw(e),10190,{key:e.toString()}),e}function qd(r,e){return Ng(r.databaseId,e.path)}function gc(r,e){const t=Kw(e);if(t.get(1)!==r.databaseId.projectId)throw new he(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new he(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ee(Xw(t))}function Yw(r,e){return Ng(r.databaseId,e)}function CR(r){const e=Kw(r);return e.length===4?lt.emptyPath():Xw(e)}function tg(r){return new lt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Xw(r){return Ke(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Dv(r,e,t){return{name:qd(r,e),fields:t.value.mapValue.fields}}function NR(r,e){return"found"in e?(function(i,o){Ke(!!o.found,43571),o.found.name,o.found.updateTime;const c=gc(i,o.found.name),d=Fn(o.found.updateTime),m=o.found.createTime?Fn(o.found.createTime):Ae.min(),g=new Tn({mapValue:{fields:o.found.fields}});return $t.newFoundDocument(c,d,m,g)})(r,e):"missing"in e?(function(i,o){Ke(!!o.missing,3894),Ke(!!o.readTime,22933);const c=gc(i,o.missing),d=Fn(o.readTime);return $t.newNoDocument(c,d)})(r,e):we(7234,{result:e})}function DR(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:we(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(_,w){return _.useProto3Json?(Ke(w===void 0||typeof w=="string",58123),on.fromBase64String(w||"")):(Ke(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),on.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(_){const w=_.code===void 0?W.UNKNOWN:Hw(_.code);return new he(w,_.message||"")})(d);t=new Gw(i,o,c,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=gc(r,i.document.name),c=Fn(i.document.updateTime),d=i.document.createTime?Fn(i.document.createTime):Ae.min(),m=new Tn({mapValue:{fields:i.document.fields}}),g=$t.newFoundDocument(o,c,d,m),_=i.targetIds||[],w=i.removedTargetIds||[];t=new xd(_,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=gc(r,i.document),c=i.readTime?Fn(i.readTime):Ae.min(),d=$t.newNoDocument(o,c),m=i.removedTargetIds||[];t=new xd([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=gc(r,i.document),c=i.removedTargetIds||[];t=new xd([],c,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,d=new ER(o,c),m=i.targetId;t=new Fw(m,d)}}return t}function $w(r,e){let t;if(e instanceof kc)t={update:Dv(r,e.key,e.value)};else if(e instanceof Rg)t={delete:qd(r,e.key)};else if(e instanceof ki)t={update:Dv(r,e.key,e.data),updateMask:zR(e.fieldMask)};else{if(!(e instanceof qw))return we(16599,{Vt:e.type});t={verify:qd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(c,d){const m=d.transform;if(m instanceof Ud)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Sc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ac)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof xc)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw we(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:IR(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:we(27497)})(r,e.precondition)),t}function OR(r,e){return r&&r.length>0?(Ke(e!==void 0,14353),r.map((t=>(function(o,c){let d=o.updateTime?Fn(o.updateTime):Fn(c);return d.isEqual(Ae.min())&&(d=Fn(c)),new gR(d,o.transformResults||[])})(t,e)))):[]}function PR(r,e){return{documents:[Yw(r,e.path)]}}function MR(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Yw(r,o);const c=(function(_){if(_.length!==0)return Zw(yr.create(_,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(_){if(_.length!==0)return _.map((w=>(function(A){return{field:So(A.field),direction:jR(A.dir)}})(w)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=Jm(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:t,parent:o}}function kR(r){let e=CR(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ke(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let c=[];t.where&&(c=(function(b){const A=Ww(b);return A instanceof yr&&bw(A)?A.getFilters():[A]})(t.where));let d=[];t.orderBy&&(d=(function(b){return b.map((A=>(function(j){return new bc(Ao(j.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(A)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let A;return A=typeof b=="object"?b.value:b,Mc(A)?null:A})(t.limit));let g=null;t.startAt&&(g=(function(b){const A=!!b.before,I=b.values||[];return new jd(I,A)})(t.startAt));let _=null;return t.endAt&&(_=(function(b){const A=!b.before,I=b.values||[];return new jd(I,A)})(t.endAt)),nR(e,o,d,c,m,"F",g,_)}function VR(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ww(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ao(t.unaryFilter.field);return Vt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Ao(t.unaryFilter.field);return Vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ao(t.unaryFilter.field);return Vt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ao(t.unaryFilter.field);return Vt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Vt.create(Ao(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return yr.create(t.compositeFilter.filters.map((i=>Ww(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(r):we(30097,{filter:r})}function jR(r){return SR[r]}function LR(r){return AR[r]}function UR(r){return xR[r]}function So(r){return{fieldPath:r.canonicalString()}}function Ao(r){return an.fromServerFormat(r.fieldPath)}function Zw(r){return r instanceof Vt?(function(t){if(t.op==="=="){if(_v(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NAN"}};if(yv(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_v(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NAN"}};if(yv(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(t.field),op:LR(t.op),value:t.value}}})(r):r instanceof yr?(function(t){const i=t.getFilters().map((o=>Zw(o)));return i.length===1?i[0]:{compositeFilter:{op:UR(t.op),filters:i}}})(r):we(54877,{filter:r})}function zR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Jw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t,i,o,c=Ae.min(),d=Ae.min(),m=on.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new _i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.yt=e}}function BR(r){const e=kR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ld(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.Cn=new FR}addToCollectionParentIndex(e,t){return this.Cn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Ri.min())}updateCollectionGroup(e,t,i){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class FR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Bt(lt.comparator),c=!o.has(i);return this.index[t]=o.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Bt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eT=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(eT,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lo(0)}static cr(){return new Lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="LruGarbageCollector",GR=1048576;function Mv([r,e],[t,i]){const o=qe(r,t);return o===0?qe(e,i):o}class QR{constructor(e){this.Ir=e,this.buffer=new Bt(Mv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Mv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(Pv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qo(t)?ge(Pv,"Ignoring IndexedDB error during garbage collection: ",t):await Go(t)}await this.Vr(3e5)}))}}class YR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(sh.ce);const i=new QR(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Ov)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ov):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,c,d,m,g,_;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,d=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(i=b,m=Date.now(),this.removeTargets(e,i,t)))).next((b=>(c=b,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(_=Date.now(),To()<=ze.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(_-g)+`ms
Total Duration: ${_-w}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:b}))))}}function XR(r,e){return new YR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.changes=new Aa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ne.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&mc(i.mutation,o,Hn.empty(),Ye.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Be()){const o=ya();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((c=>{let d=ac();return c.forEach(((m,g)=>{d=d.insert(m,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=ya();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Be())))}populateOverlays(e,t,i){const o=[];return i.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,m)=>{t.set(d,m)}))}))}computeViews(e,t,i,o){let c=Ns();const d=fc(),m=(function(){return fc()})();return t.forEach(((g,_)=>{const w=i.get(_.key);o.has(_.key)&&(w===void 0||w.mutation instanceof ki)?c=c.insert(_.key,_):w!==void 0?(d.set(_.key,w.mutation.getFieldMask()),mc(w.mutation,_,w.mutation.getFieldMask(),Ye.now())):d.set(_.key,Hn.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((_,w)=>d.set(_,w))),t.forEach(((_,w)=>m.set(_,new WR(w,d.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=fc();let o=new vt(((d,m)=>d-m)),c=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const m of d)m.keys().forEach((g=>{const _=t.get(g);if(_===null)return;let w=i.get(g)||Hn.empty();w=m.applyToLocalView(_,w),i.set(g,w);const b=(o.get(m.batchId)||Be()).add(g);o=o.insert(m.batchId,b)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,w=g.value,b=Ow();w.forEach((A=>{if(!c.has(A)){const I=Uw(t.get(A),i.get(A));I!==null&&b.set(A,I),c=c.add(A)}})),d.push(this.documentOverlayCache.saveOverlays(e,_,b))}return ne.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(d){return Ee.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Rw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-c.size):ne.resolve(ya());let m=vc,g=c;return d.next((_=>ne.forEach(_,((w,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),c.get(w)?ne.resolve():this.remoteDocumentCache.getEntry(e,w).next((A=>{g=g.insert(w,A)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,g,_,Be()))).next((w=>({batchId:m,changes:Dw(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=ac();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const c=t.collectionGroup;let d=ac();return this.indexManager.getCollectionParents(e,c).next((m=>ne.forEach(m,(g=>{const _=(function(b,A){return new Ko(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next((w=>{w.forEach(((b,A)=>{d=d.insert(b,A)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,c,o)))).next((d=>{c.forEach(((g,_)=>{const w=_.getKey();d.get(w)===null&&(d=d.insert(w,$t.newInvalidDocument(w)))}));let m=ac();return d.forEach(((g,_)=>{const w=c.get(g);w!==void 0&&mc(w.mutation,_,Hn.empty(),Ye.now()),lh(t,_)&&(m=m.insert(g,_))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Fn(o.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:BR(o.bundledQuery),readTime:Fn(o.readTime)}})(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.overlays=new vt(Ee.comparator),this.qr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ya();return ne.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,c)=>{this.St(e,t,c)})),ne.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(i)),ne.resolve()}getOverlaysForCollection(e,t,i){const o=ya(),c=t.length+1,d=new Ee(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===c&&g.largestBatchId>i&&o.set(g.getKey(),g)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let c=new vt(((_,w)=>_-w));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let w=c.get(_.largestBatchId);w===null&&(w=ya(),c=c.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const m=ya(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,w)=>m.set(_,w))),!(m.size()>=o)););return ne.resolve(m)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new vR(t,i));let c=this.qr.get(t);c===void 0&&(c=Be(),this.qr.set(t,c)),this.qr.set(t,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(){this.Qr=new Bt(Xt.$r),this.Ur=new Bt(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Xt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Xt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ee(new lt([])),i=new Xt(t,e),o=new Xt(t,e+1),c=[];return this.Ur.forEachInRange([i,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new lt([])),i=new Xt(t,e),o=new Xt(t,e+1);let c=Be();return this.Ur.forEachInRange([i,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new Xt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Xt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||qe(e.Yr,t.Yr)}static Kr(e,t){return qe(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Bt(Xt.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new _R(c,t,i,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new Xt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(d)}lookupMutationBatch(e,t){return ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),c=o<0?0:o;return ne.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?wg:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Xt(t,0),o=new Xt(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,o],(d=>{const m=this.Xr(d.Yr);c.push(m)})),ne.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Bt(qe);return t.forEach((o=>{const c=new Xt(o,0),d=new Xt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(m=>{i=i.add(m.Yr)}))})),ne.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let c=i;Ee.isDocumentKey(c)||(c=c.child(""));const d=new Xt(new Ee(c),0);let m=new Bt(qe);return this.Zr.forEachWhile((g=>{const _=g.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Yr)),!0)}),d),ne.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ne.forEach(t.mutations,(o=>{const c=new Xt(o.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Xt(t,0),o=this.Zr.firstAfterOrEqual(i);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.ri=e,this.docs=(function(){return new vt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),c=o?o.size:0,d=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ne.resolve(i?i.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let i=Ns();return t.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():$t.newInvalidDocument(o))})),ne.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let c=Ns();const d=t.path,m=new Ee(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:w}}=g.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||M1(P1(w),i)<=0||(o.has(w.key)||lh(t,w))&&(c=c.insert(w.key,w.mutableCopy()))}return ne.resolve(c)}getAllFromCollectionGroup(e,t,i,o){we(9500)}ii(e,t){return ne.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new sI(this)}getSize(e){return ne.resolve(this.size)}}class sI extends $R{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.persistence=e,this.si=new Aa((t=>Sg(t)),Ag),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new Dg,this.targetCount=0,this.ai=Lo.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Lo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Pr(t),ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,i){let o=0;const c=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ne.waitFor(c).next((()=>o))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ne.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ne.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),ne.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ne.resolve(i)}containsKey(e,t){return ne.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,t){this.ui={},this.overlays={},this.ci=new sh(0),this.li=!1,this.li=!0,this.hi=new tI,this.referenceDelegate=e(this),this.Pi=new iI(this),this.indexManager=new HR,this.remoteDocumentCache=(function(o){return new rI(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new qR(t),this.Ii=new JR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new nI(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ge("MemoryPersistence","Starting transaction:",e);const o=new aI(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return ne.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class aI extends V1{constructor(e){super(),this.currentSequenceNumber=e}}class Og{constructor(e){this.persistence=e,this.Ri=new Dg,this.Vi=null}static mi(e){return new Og(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ne.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(i=>{const o=Ee.fromPath(i);return this.gi(e,o).next((c=>{c||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Bd{constructor(e,t){this.persistence=e,this.pi=new Aa((i=>U1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=XR(this,t)}static mi(e,t){return new Bd(e,t)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ne.forEach(this.pi,((i,o)=>this.br(e,i,o).next((c=>c?ne.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,t).next((m=>{m||(i++,c.removeEntry(d,Ae.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bd(e.data.value)),t}br(e,t,i){return ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ne.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Be(),o=Be();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Pg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ex()?8:j1(gn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,o,i).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new oI;return this.Ss(e,t,d).next((m=>{if(c.result=m,this.Vs)return this.bs(e,t,d,m.size)}))})).next((()=>c.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(To()<=ze.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(To()<=ze.DEBUG&&ge("QueryEngine","Query:",bo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(To()<=ze.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qr(t))):ne.resolve())}ys(e,t){if(Tv(t))return ne.resolve(null);let i=qr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Ld(t,null,"F"),i=qr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const d=Be(...c);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const _=this.Ds(t,m);return this.Cs(t,_,d,g.readTime)?this.ys(e,Ld(t,null,"F")):this.vs(e,_,t,g)}))))})))))}ws(e,t,i,o){return Tv(t)||o.isEqual(Ae.min())?ne.resolve(null):this.ps.getDocuments(e,i).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,i,o)?ne.resolve(null):(To()<=ze.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(t)),this.vs(e,d,t,O1(o,vc)).next((m=>m)))}))}Ds(e,t){let i=new Bt(Cw(e));return t.forEach(((o,c)=>{lh(e,c)&&(i=i.add(c))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,i){return To()<=ze.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",bo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ri.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="LocalStore",cI=3e8;class uI{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new vt(qe),this.xs=new Aa((c=>Sg(c)),Ag),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function dI(r,e,t,i){return new uI(r,e,t,i)}async function nT(r,e){const t=Ne(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((c=>{const d=[],m=[];let g=Be();for(const _ of o){d.push(_.batchId);for(const w of _.mutations)g=g.add(w.key)}for(const _ of c){m.push(_.batchId);for(const w of _.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(i,g).next((_=>({Ls:_,removedBatchIds:d,addedBatchIds:m})))}))}))}function hI(r,e){const t=Ne(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,_,w){const b=_.batch,A=b.keys();let I=ne.resolve();return A.forEach((j=>{I=I.next((()=>w.getEntry(g,j))).next((H=>{const U=_.docVersions.get(j);Ke(U!==null,48541),H.version.compareTo(U)<0&&(b.applyToRemoteDocument(H,_),H.isValidDocument()&&(H.setReadTime(_.commitVersion),w.addEntry(H)))}))})),I.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(t,i,e,c).next((()=>c.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=Be();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function rT(r){const e=Ne(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function fI(r,e){const t=Ne(r),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((w,b)=>{const A=o.get(b);if(!A)return;m.push(t.Pi.removeMatchingKeys(c,w.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(c,w.addedDocuments,b))));let I=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?I=I.withResumeToken(on.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):w.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(w.resumeToken,i)),o=o.insert(b,I),(function(H,U,re){return H.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=cI?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(A,I,w)&&m.push(t.Pi.updateTargetData(c,I))}));let g=Ns(),_=Be();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,w))})),m.push(mI(c,d,e.documentUpdates).next((w=>{g=w.ks,_=w.qs}))),!i.isEqual(Ae.min())){const w=t.Pi.getLastRemoteSnapshotVersion(c).next((b=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i)));m.push(w)}return ne.waitFor(m).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,_))).next((()=>g))})).then((c=>(t.Ms=o,c)))}function mI(r,e,t){let i=Be(),o=Be();return t.forEach((c=>i=i.add(c))),e.getEntries(r,i).next((c=>{let d=Ns();return t.forEach(((m,g)=>{const _=c.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ae.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):ge(Mg,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)})),{ks:d,qs:o}}))}function gI(r,e){const t=Ne(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=wg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function pI(r,e){const t=Ne(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((c=>c?(o=c,ne.resolve(o)):t.Pi.allocateTargetId(i).next((d=>(o=new _i(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function ng(r,e,t){const i=Ne(r),o=i.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",c,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Qo(d))throw d;ge(Mg,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function kv(r,e,t){const i=Ne(r);let o=Ae.min(),c=Be();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,_,w){const b=Ne(g),A=b.xs.get(w);return A!==void 0?ne.resolve(b.Ms.get(A)):b.Pi.getTargetData(_,w)})(i,d,qr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,m.targetId).next((g=>{c=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,t?o:Ae.min(),t?c:Be()))).next((m=>(yI(i,sR(e),m),{documents:m,Qs:c})))))}function yI(r,e,t){let i=r.Os.get(e)||Ae.min();t.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),r.Os.set(e,i)}class Vv{constructor(){this.activeTargetIds=uR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _I{constructor(){this.Mo=new Vv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Vv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="ConnectivityMonitor";class Lv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(jv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(jv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd=null;function rg(){return yd===null?yd=(function(){return 268435456+Math.round(2147483648*Math.random())})():yd++,"0x"+yd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="RestConnection",EI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===kd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,c){const d=rg(),m=this.zo(e,t.toUriEncodedString());ge(Mm,`Sending RPC '${e}' ${d}:`,m,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:_}=new URL(m),w=Bo(_);return this.Jo(e,m,g,i,w).then((b=>(ge(Mm,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw Mo(Mm,`RPC '${e}' ${d} failed with error: `,b,"url: ",m,"request:",i),b}))}Ho(e,t,i,o,c,d){return this.Go(e,t,i,o,c)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),i&&i.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const i=EI[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class bI extends wI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,c){const d=rg();return new Promise(((m,g)=>{const _=new nw;_.setWithCredentials(!0),_.listenOnce(rw.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Td.NO_ERROR:const b=_.getResponseJson();ge(un,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),m(b);break;case Td.TIMEOUT:ge(un,`RPC '${e}' ${d} timed out`),g(new he(W.DEADLINE_EXCEEDED,"Request time out"));break;case Td.HTTP_ERROR:const A=_.getStatus();if(ge(un,`RPC '${e}' ${d} failed with status:`,A,"response text:",_.getResponseText()),A>0){let I=_.getResponseJson();Array.isArray(I)&&(I=I[0]);const j=I==null?void 0:I.error;if(j&&j.status&&j.message){const H=(function(re){const se=re.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(se)>=0?se:W.UNKNOWN})(j.status);g(new he(H,j.message))}else g(new he(W.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new he(W.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{ge(un,`RPC '${e}' ${d} completed.`)}}));const w=JSON.stringify(o);ge(un,`RPC '${e}' ${d} sending request:`,o),_.send(t,"POST",w,i,15)}))}T_(e,t,i){const o=rg(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=aw(),m=iw(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const w=c.join("");ge(un,`Creating RPC '${e}' stream ${o}: ${w}`,g);const b=d.createWebChannel(w,g);this.I_(b);let A=!1,I=!1;const j=new TI({Yo:U=>{I?ge(un,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(A||(ge(un,`Opening RPC '${e}' stream ${o} transport.`),b.open(),A=!0),ge(un,`RPC '${e}' stream ${o} sending:`,U),b.send(U))},Zo:()=>b.close()}),H=(U,re,se)=>{U.listen(re,(ie=>{try{se(ie)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return H(b,ic.EventType.OPEN,(()=>{I||(ge(un,`RPC '${e}' stream ${o} transport opened.`),j.o_())})),H(b,ic.EventType.CLOSE,(()=>{I||(I=!0,ge(un,`RPC '${e}' stream ${o} transport closed`),j.a_(),this.E_(b))})),H(b,ic.EventType.ERROR,(U=>{I||(I=!0,Mo(un,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),j.a_(new he(W.UNAVAILABLE,"The operation could not be completed")))})),H(b,ic.EventType.MESSAGE,(U=>{var re;if(!I){const se=U.data[0];Ke(!!se,16349);const ie=se,fe=(ie==null?void 0:ie.error)||((re=ie[0])==null?void 0:re.error);if(fe){ge(un,`RPC '${e}' stream ${o} received error:`,fe);const de=fe.status;let X=(function(C){const P=Mt[C];if(P!==void 0)return Hw(P)})(de),D=fe.message;X===void 0&&(X=W.INTERNAL,D="Unknown error status: "+de+" with message "+fe.message),I=!0,j.a_(new he(X,D)),b.close()}else ge(un,`RPC '${e}' stream ${o} received:`,se),j.u_(se)}})),H(m,sw.STAT_EVENT,(U=>{U.stat===Qm.PROXY?ge(un,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Qm.NOPROXY&&ge(un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(r){return new RR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,t,i=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="PersistentStream";class sT{constructor(e,t,i,o,c,d,m,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kg(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Cs(t.toString()),Cs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new he(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(Uv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ge(Uv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SI extends sT{constructor(e,t,i,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=DR(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Ae.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ae.min():d.readTime?Fn(d.readTime):Ae.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=tg(this.serializer),t.addTarget=(function(c,d){let m;const g=d.target;if(m=Wm(g)?{documents:PR(c,g)}:{query:MR(c,g).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=Qw(c,d.resumeToken);const _=Jm(c,d.expectedCount);_!==null&&(m.expectedCount=_)}else if(d.snapshotVersion.compareTo(Ae.min())>0){m.readTime=zd(c,d.snapshotVersion.toTimestamp());const _=Jm(c,d.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const i=VR(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=tg(this.serializer),t.removeTarget=e,this.q_(t)}}class AI extends sT{constructor(e,t,i,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=OR(e.writeResults,e.commitTime),i=Fn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=tg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>$w(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{}class RI extends xI{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,eg(t,i),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(W.UNKNOWN,c.toString())}))}Ho(e,t,i,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,eg(t,i),o,d,m,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new he(W.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class II{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Cs(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="RemoteStore";class CI{constructor(e,t,i,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{xa(this)&&(ge(ba,"Restarting streams for network reachability change."),await(async function(g){const _=Ne(g);_.Ea.add(4),await jc(_),_.Ra.set("Unknown"),_.Ea.delete(4),await fh(_)})(this))}))})),this.Ra=new II(i,o)}}async function fh(r){if(xa(r))for(const e of r.da)await e(!0)}async function jc(r){for(const e of r.da)await e(!1)}function iT(r,e){const t=Ne(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ug(t)?Lg(t):Yo(t).O_()&&jg(t,e))}function Vg(r,e){const t=Ne(r),i=Yo(t);t.Ia.delete(e),i.O_()&&aT(t,e),t.Ia.size===0&&(i.O_()?i.L_():xa(t)&&t.Ra.set("Unknown"))}function jg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yo(r).Y_(e)}function aT(r,e){r.Va.Ue(e),Yo(r).Z_(e)}function Lg(r){r.Va=new bR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Yo(r).start(),r.Ra.ua()}function Ug(r){return xa(r)&&!Yo(r).x_()&&r.Ia.size>0}function xa(r){return Ne(r).Ea.size===0}function oT(r){r.Va=void 0}async function NI(r){r.Ra.set("Online")}async function DI(r){r.Ia.forEach(((e,t)=>{jg(r,e)}))}async function OI(r,e){oT(r),Ug(r)?(r.Ra.ha(e),Lg(r)):r.Ra.set("Unknown")}async function PI(r,e,t){if(r.Ra.set("Online"),e instanceof Gw&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(i){ge(ba,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Hd(r,i)}else if(e instanceof xd?r.Va.Ze(e):e instanceof Fw?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ae.min()))try{const i=await rT(r.localStore);t.compareTo(i)>=0&&await(function(c,d){const m=c.Va.Tt(d);return m.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const w=c.Ia.get(_);w&&c.Ia.set(_,w.withResumeToken(g.resumeToken,d))}})),m.targetMismatches.forEach(((g,_)=>{const w=c.Ia.get(g);if(!w)return;c.Ia.set(g,w.withResumeToken(on.EMPTY_BYTE_STRING,w.snapshotVersion)),aT(c,g);const b=new _i(w.target,g,_,w.sequenceNumber);jg(c,b)})),c.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(i){ge(ba,"Failed to raise snapshot:",i),await Hd(r,i)}}async function Hd(r,e,t){if(!Qo(e))throw e;r.Ea.add(1),await jc(r),r.Ra.set("Offline"),t||(t=()=>rT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ge(ba,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await fh(r)}))}function lT(r,e){return e().catch((t=>Hd(r,t,e)))}async function mh(r){const e=Ne(r),t=Di(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wg;for(;MI(e);)try{const o=await gI(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,kI(e,o)}catch(o){await Hd(e,o)}cT(e)&&uT(e)}function MI(r){return xa(r)&&r.Ta.length<10}function kI(r,e){r.Ta.push(e);const t=Di(r);t.O_()&&t.X_&&t.ea(e.mutations)}function cT(r){return xa(r)&&!Di(r).x_()&&r.Ta.length>0}function uT(r){Di(r).start()}async function VI(r){Di(r).ra()}async function jI(r){const e=Di(r);for(const t of r.Ta)e.ea(t.mutations)}async function LI(r,e,t){const i=r.Ta.shift(),o=Ig.from(i,e,t);await lT(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await mh(r)}async function UI(r,e){e&&Di(r).X_&&await(async function(i,o){if((function(d){return Bw(d)&&d!==W.ABORTED})(o.code)){const c=i.Ta.shift();Di(i).B_(),await lT(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await mh(i)}})(r,e),cT(r)&&uT(r)}async function zv(r,e){const t=Ne(r);t.asyncQueue.verifyOperationInProgress(),ge(ba,"RemoteStore received new credentials");const i=xa(t);t.Ea.add(3),await jc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await fh(t)}async function zI(r,e){const t=Ne(r);e?(t.Ea.delete(2),await fh(t)):e||(t.Ea.add(2),await jc(t),t.Ra.set("Unknown"))}function Yo(r){return r.ma||(r.ma=(function(t,i,o){const c=Ne(t);return c.sa(),new SI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:NI.bind(null,r),t_:DI.bind(null,r),r_:OI.bind(null,r),H_:PI.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Ug(r)?Lg(r):r.Ra.set("Unknown")):(await r.ma.stop(),oT(r))}))),r.ma}function Di(r){return r.fa||(r.fa=(function(t,i,o){const c=Ne(t);return c.sa(),new AI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:VI.bind(null,r),r_:UI.bind(null,r),ta:jI.bind(null,r),na:LI.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await mh(r)):(await r.fa.stop(),r.Ta.length>0&&(ge(ba,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,t,i,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,c){const d=Date.now()+i,m=new zg(e,t,d,o,c);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qg(r,e){if(Cs("AsyncQueue",`${e}: ${r}`),Qo(r))return new he(W.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=ac(),this.sortedSet=new vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Co;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.ga=new vt(Ee.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Uo{constructor(e,t,i,o,c,d,m,g,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,c){const d=[];return t.forEach((m=>{d.push({type:0,doc:m})})),new Uo(e,t,Co.emptySet(t),d,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class BI{constructor(){this.queries=Bv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Ne(t),c=o.queries;o.queries=Bv(),c.forEach(((d,m)=>{for(const g of m.Sa)g.onError(i)}))})(this,new he(W.ABORTED,"Firestore shutting down"))}}function Bv(){return new Aa((r=>Iw(r)),oh)}async function Bg(r,e){const t=Ne(r);let i=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(i=2):(c=new qI,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=qg(d,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Fg(t)}async function Hg(r,e){const t=Ne(r),i=e.query;let o=3;const c=t.queries.get(i);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function HI(r,e){const t=Ne(r);let i=!1;for(const o of e){const c=o.query,d=t.queries.get(c);if(d){for(const m of d.Sa)m.Fa(o)&&(i=!0);d.wa=o}}i&&Fg(t)}function FI(r,e,t){const i=Ne(r),o=i.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);i.queries.delete(e)}function Fg(r){r.Ca.forEach((e=>{e.next()}))}var sg,Hv;(Hv=sg||(sg={})).Ma="default",Hv.Cache="cache";class Gg{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Uo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this.key=e}}class hT{constructor(e){this.key=e}}class GI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=Cw(e),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new qv,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,b)=>{const A=o.get(w),I=lh(this.query,b)?b:null,j=!!A&&this.mutatedKeys.has(A.key),H=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let U=!1;A&&I?A.data.isEqual(I.data)?j!==H&&(i.track({type:3,doc:I}),U=!0):this.su(A,I)||(i.track({type:2,doc:I}),U=!0,(g&&this.eu(I,g)>0||_&&this.eu(I,_)<0)&&(m=!0)):!A&&I?(i.track({type:0,doc:I}),U=!0):A&&!I&&(i.track({type:1,doc:A}),U=!0,(g||_)&&(m=!0)),U&&(I?(d=d.add(I),c=H?c.add(w):c.delete(w)):(d=d.delete(w),c=c.delete(w)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),c=c.delete(w.key),i.track({type:1,doc:w})}return{tu:d,iu:i,Cs:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((w,b)=>(function(I,j){const H=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:U})}};return H(I)-H(j)})(w.type,b.type)||this.eu(w.doc,b.doc))),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,_=g!==this.Za;return this.Za=g,d.length!==0||_?{snapshot:new Uo(this.query,e.tu,c,d,e.mutatedKeys,g===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new hT(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new dT(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Uo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qg="SyncEngine";class QI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class KI{constructor(e){this.key=e,this.hu=!1}}class YI{constructor(e,t,i,o,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Aa((m=>Iw(m)),oh),this.Iu=new Map,this.Eu=new Set,this.du=new vt(Ee.comparator),this.Au=new Map,this.Ru=new Dg,this.Vu={},this.mu=new Map,this.fu=Lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XI(r,e,t=!0){const i=_T(r);let o;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await fT(i,e,t,!0),o}async function $I(r,e){const t=_T(r);await fT(t,e,!0,!1)}async function fT(r,e,t,i){const o=await pI(r.localStore,qr(e)),c=o.targetId,d=r.sharedClientState.addLocalQueryTarget(c,t);let m;return i&&(m=await WI(r,e,c,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&iT(r.remoteStore,o),m}async function WI(r,e,t,i,o){r.pu=(b,A,I)=>(async function(H,U,re,se){let ie=U.view.ru(re);ie.Cs&&(ie=await kv(H.localStore,U.query,!1).then((({documents:D})=>U.view.ru(D,ie))));const fe=se&&se.targetChanges.get(U.targetId),de=se&&se.targetMismatches.get(U.targetId)!=null,X=U.view.applyChanges(ie,H.isPrimaryClient,fe,de);return Gv(H,U.targetId,X.au),X.snapshot})(r,b,A,I);const c=await kv(r.localStore,e,!0),d=new GI(e,c.Qs),m=d.ru(c.documents),g=Vc.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),_=d.applyChanges(m,r.isPrimaryClient,g);Gv(r,t,_.au);const w=new QI(e,t,d);return r.Tu.set(e,w),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),_.snapshot}async function ZI(r,e,t){const i=Ne(r),o=i.Tu.get(e),c=i.Iu.get(o.targetId);if(c.length>1)return i.Iu.set(o.targetId,c.filter((d=>!oh(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await ng(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Vg(i.remoteStore,o.targetId),ig(i,o.targetId)})).catch(Go)):(ig(i,o.targetId),await ng(i.localStore,o.targetId,!0))}async function JI(r,e){const t=Ne(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Vg(t.remoteStore,i.targetId))}async function eC(r,e,t){const i=oC(r);try{const o=await(function(d,m){const g=Ne(d),_=Ye.now(),w=m.reduce(((I,j)=>I.add(j.key)),Be());let b,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let j=Ns(),H=Be();return g.Ns.getEntries(I,w).next((U=>{j=U,j.forEach(((re,se)=>{se.isValidDocument()||(H=H.add(re))}))})).next((()=>g.localDocuments.getOverlayedDocuments(I,j))).next((U=>{b=U;const re=[];for(const se of m){const ie=yR(se,b.get(se.key).overlayedDocument);ie!=null&&re.push(new ki(se.key,ie,Ew(ie.value.mapValue),mn.exists(!0)))}return g.mutationQueue.addMutationBatch(I,_,re,m)})).next((U=>{A=U;const re=U.applyToLocalDocumentSet(b,H);return g.documentOverlayCache.saveOverlays(I,U.batchId,re)}))})).then((()=>({batchId:A.batchId,changes:Dw(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,m,g){let _=d.Vu[d.currentUser.toKey()];_||(_=new vt(qe)),_=_.insert(m,g),d.Vu[d.currentUser.toKey()]=_})(i,o.batchId,t),await Lc(i,o.changes),await mh(i.remoteStore)}catch(o){const c=qg(o,"Failed to persist write");t.reject(c)}}async function mT(r,e){const t=Ne(r);try{const i=await fI(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=t.Au.get(c);d&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Ke(d.hu,14607):o.removedDocuments.size>0&&(Ke(d.hu,42227),d.hu=!1))})),await Lc(t,i,e)}catch(i){await Go(i)}}function Fv(r,e,t){const i=Ne(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((c,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const g=Ne(d);g.onlineState=m;let _=!1;g.queries.forEach(((w,b)=>{for(const A of b.Sa)A.va(m)&&(_=!0)})),_&&Fg(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function tC(r,e,t){const i=Ne(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),c=o&&o.key;if(c){let d=new vt(Ee.comparator);d=d.insert(c,$t.newNoDocument(c,Ae.min()));const m=Be().add(c),g=new dh(Ae.min(),new Map,new vt(qe),d,m);await mT(i,g),i.du=i.du.remove(c),i.Au.delete(e),Kg(i)}else await ng(i.localStore,e,!1).then((()=>ig(i,e,t))).catch(Go)}async function nC(r,e){const t=Ne(r),i=e.batch.batchId;try{const o=await hI(t.localStore,e);pT(t,i,null),gT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Lc(t,o)}catch(o){await Go(o)}}async function rC(r,e,t){const i=Ne(r);try{const o=await(function(d,m){const g=Ne(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let w;return g.mutationQueue.lookupMutationBatch(_,m).next((b=>(Ke(b!==null,37113),w=b.keys(),g.mutationQueue.removeMutationBatch(_,b)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,w,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w))).next((()=>g.localDocuments.getDocuments(_,w)))}))})(i.localStore,e);pT(i,e,t),gT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Lc(i,o)}catch(o){await Go(o)}}function gT(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function pT(r,e,t){const i=Ne(r);let o=i.Vu[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function ig(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||yT(r,i)}))}function yT(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Vg(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Kg(r))}function Gv(r,e,t){for(const i of t)i instanceof dT?(r.Ru.addReference(i.key,e),sC(r,i)):i instanceof hT?(ge(Qg,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||yT(r,i.key)):we(19791,{wu:i})}function sC(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(ge(Qg,"New document in limbo: "+t),r.Eu.add(i),Kg(r))}function Kg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ee(lt.fromString(e)),i=r.fu.next();r.Au.set(i,new KI(t)),r.du=r.du.insert(t,i),iT(r.remoteStore,new _i(qr(ah(t.path)),i,"TargetPurposeLimboResolution",sh.ce))}}async function Lc(r,e,t){const i=Ne(r),o=[],c=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,g)=>{d.push(i.pu(g,e,t).then((_=>{var w;if((_||t)&&i.isPrimaryClient){const b=_?!_.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:w.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(_){o.push(_);const b=Pg.As(g.targetId,_);c.push(b)}})))})),await Promise.all(d),i.Pu.H_(o),await(async function(g,_){const w=Ne(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ne.forEach(_,(A=>ne.forEach(A.Es,(I=>w.persistence.referenceDelegate.addReference(b,A.targetId,I))).next((()=>ne.forEach(A.ds,(I=>w.persistence.referenceDelegate.removeReference(b,A.targetId,I)))))))))}catch(b){if(!Qo(b))throw b;ge(Mg,"Failed to update sequence numbers: "+b)}for(const b of _){const A=b.targetId;if(!b.fromCache){const I=w.Ms.get(A),j=I.snapshotVersion,H=I.withLastLimboFreeSnapshotVersion(j);w.Ms=w.Ms.insert(A,H)}}})(i.localStore,c))}async function iC(r,e){const t=Ne(r);if(!t.currentUser.isEqual(e)){ge(Qg,"User change. New user:",e.toKey());const i=await nT(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new he(W.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Lc(t,i.Ls)}}function aC(r,e){const t=Ne(r),i=t.Au.get(e);if(i&&i.hu)return Be().add(i.key);{let o=Be();const c=t.Iu.get(e);if(!c)return o;for(const d of c){const m=t.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function _T(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=mT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tC.bind(null,e),e.Pu.H_=HI.bind(null,e.eventManager),e.Pu.yu=FI.bind(null,e.eventManager),e}function oC(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rC.bind(null,e),e}class Fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return dI(this.persistence,new lI,e.initialUser,this.serializer)}Cu(e){return new tT(Og.mi,this.serializer)}Du(e){return new _I}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fd.provider={build:()=>new Fd};class lC extends Fd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ke(this.persistence.referenceDelegate instanceof Bd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new KR(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new tT((i=>Bd.mi(i,t)),this.serializer)}}class ag{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Fv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=iC.bind(null,this.syncEngine),await zI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new BI})()}createDatastore(e){const t=hh(e.databaseInfo.databaseId),i=(function(c){return new bI(c)})(e.databaseInfo);return(function(c,d,m,g){return new RI(c,d,m,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,c,d,m){return new CI(i,o,c,d,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Fv(this.syncEngine,t,0)),(function(){return Lv.v()?new Lv:new vI})())}createSyncEngine(e,t){return(function(o,c,d,m,g,_,w){const b=new YI(o,c,d,m,g,_);return w&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const c=Ne(o);ge(ba,"RemoteStore shutting down."),c.Ea.add(5),await jc(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ag.provider={build:()=>new ag};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Cs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new he(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,c){const d=Ne(o),m={documents:c.map((b=>qd(d.serializer,b)))},g=await d.Ho("BatchGetDocuments",d.serializer.databaseId,lt.emptyPath(),m,c.length),_=new Map;g.forEach((b=>{const A=NR(d.serializer,b);_.set(A.key.toString(),A)}));const w=[];return c.forEach((b=>{const A=_.get(b.toString());Ke(!!A,55234,{key:b}),w.push(A)})),w})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const o=Ee.fromPath(i);this.mutations.push(new qw(o,this.precondition(o)))})),await(async function(i,o){const c=Ne(i),d={writes:o.map((m=>$w(c.serializer,m)))};await c.Go("Commit",c.serializer.databaseId,lt.emptyPath(),d)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw we(50498,{Gu:e.constructor.name});t=Ae.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new he(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ae.min())?mn.exists(!1):mn.updateTime(t):mn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ae.min()))throw new he(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mn.updateTime(t)}return mn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t,i,o,c){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=o,this.deferred=c,this.zu=i.maxAttempts,this.M_=new kg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new cC(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((o=>{this.Yu(o)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Mc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Bw(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="FirestoreClient";class dC{constructor(e,t,i,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=fn.UNAUTHENTICATED,this.clientId=Eg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async d=>{ge(Oi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ge(Oi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=qg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Vm(r,e){r.asyncQueue.verifyOperationInProgress(),ge(Oi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await nT(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Qv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await hC(r);ge(Oi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>zv(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>zv(e.remoteStore,o))),r._onlineComponents=e}async function hC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ge(Oi,"Using user provided OfflineComponentProvider");try{await Vm(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Mo("Error using user provided cache. Falling back to memory cache: "+t),await Vm(r,new Fd)}}else ge(Oi,"Using default OfflineComponentProvider"),await Vm(r,new lC(void 0));return r._offlineComponents}async function Xg(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ge(Oi,"Using user provided OnlineComponentProvider"),await Qv(r,r._uninitializedComponentsProvider._online)):(ge(Oi,"Using default OnlineComponentProvider"),await Qv(r,new ag))),r._onlineComponents}function fC(r){return Xg(r).then((e=>e.syncEngine))}function mC(r){return Xg(r).then((e=>e.datastore))}async function Gd(r){const e=await Xg(r),t=e.eventManager;return t.onListen=XI.bind(null,e.syncEngine),t.onUnlisten=ZI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$I.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=JI.bind(null,e.syncEngine),t}function gC(r,e,t={}){const i=new zr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,g,_){const w=new Yg({next:A=>{w.Nu(),d.enqueueAndForget((()=>Hg(c,b)));const I=A.docs.has(m);!I&&A.fromCache?_.reject(new he(W.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&A.fromCache&&g&&g.source==="server"?_.reject(new he(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(A)},error:A=>_.reject(A)}),b=new Gg(ah(m.path),w,{includeMetadataChanges:!0,qa:!0});return Bg(c,b)})(await Gd(r),r.asyncQueue,e,t,i))),i.promise}function pC(r,e,t={}){const i=new zr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,g,_){const w=new Yg({next:A=>{w.Nu(),d.enqueueAndForget((()=>Hg(c,b))),A.fromCache&&g.source==="server"?_.reject(new he(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),b=new Gg(m,w,{includeMetadataChanges:!0,qa:!0});return Bg(c,b)})(await Gd(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="firestore.googleapis.com",Yv=!0;class Xv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ET,this.ssl=Yv}else this.host=e.host,this.ssl=e.ssl??Yv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GR)throw new he(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vT(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new E1;switch(i.type){case"firstParty":return new S1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Kv.get(t);i&&(ge("ComponentProvider","Removing Datastore"),Kv.delete(t),i.terminate())})(this),Promise.resolve()}}function yC(r,e,t,i={}){var _;r=In(r,gh);const o=Bo(e),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(KE(`https://${m}`),YE("Firestore",!0)),c.host!==ET&&c.host!==m&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:i};if(!Ea(g,d)&&(r._setSettings(g),i.mockUserToken)){let w,b;if(typeof i.mockUserToken=="string")w=i.mockUserToken,b=fn.MOCK_USER;else{w=GA(i.mockUserToken,(_=r._app)==null?void 0:_.options.projectId);const A=i.mockUserToken.sub||i.mockUserToken.user_id;if(!A)throw new he(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new fn(A)}r._authCredentials=new w1(new lw(w,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ks(this.firestore,e,this._query)}}class yt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Si(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yt(this.firestore,e,this._key)}toJSON(){return{type:yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Pc(t,yt._jsonSchema))return new yt(e,i||null,new Ee(lt.fromString(t.referencePath)))}}yt._jsonSchemaVersion="firestore/documentReference/1.0",yt._jsonSchema={type:jt("string",yt._jsonSchemaVersion),referencePath:jt("string")};class Si extends ks{constructor(e,t,i){super(e,t,ah(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new Ee(e))}withConverter(e){return new Si(this.firestore,e,this._path)}}function tt(r,e,...t){if(r=_t(r),cw("collection","path",e),r instanceof gh){const i=lt.fromString(e,...t);return lv(i),new Si(r,null,i)}{if(!(r instanceof yt||r instanceof Si))throw new he(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(lt.fromString(e,...t));return lv(i),new Si(r.firestore,null,i)}}function Wt(r,e,...t){if(r=_t(r),arguments.length===1&&(e=Eg.newId()),cw("doc","path",e),r instanceof gh){const i=lt.fromString(e,...t);return ov(i),new yt(r,null,new Ee(i))}{if(!(r instanceof yt||r instanceof Si))throw new he(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(lt.fromString(e,...t));return ov(i),new yt(r.firestore,r instanceof Si?r.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="AsyncQueue";class Wv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kg(this,"async_queue_retry"),this._c=()=>{const i=km();i&&ge($v,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=km();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=km();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new zr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qo(e))throw e;ge($v,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Cs("INTERNAL UNHANDLED ERROR: ",Zv(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=zg.createAndSchedule(this,e,t,i,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:Zv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Zv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of i)if(c in o&&typeof o[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Ds extends gh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Wv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wv(e),this._firestoreClient=void 0,await e}}}function _C(r,e){const t=typeof r=="object"?r:ZE(),i=typeof r=="string"?r:kd,o=_g(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=HA("firestore");c&&yC(o,...c)}return o}function Uc(r){if(r._terminated)throw new he(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||vC(r),r._firestoreClient}function vC(r){var i,o,c;const e=r._freezeSettings(),t=(function(m,g,_,w){return new B1(m,g,_,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,vT(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new dC(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bn(on.fromBase64String(e))}catch(t){throw new he(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bn(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pc(e,Bn._jsonSchema))return Bn.fromBase64String(e.bytes)}}Bn._jsonSchemaVersion="firestore/bytes/1.0",Bn._jsonSchema={type:jt("string",Bn._jsonSchemaVersion),bytes:jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Br._jsonSchemaVersion}}static fromJSON(e){if(Pc(e,Br._jsonSchema))return new Br(e.latitude,e.longitude)}}Br._jsonSchemaVersion="firestore/geoPoint/1.0",Br._jsonSchema={type:jt("string",Br._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pc(e,Hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Hr(e.vectorValues);throw new he(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hr._jsonSchemaVersion="firestore/vectorValue/1.0",Hr._jsonSchema={type:jt("string",Hr._jsonSchemaVersion),vectorValues:jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=/^__.*__$/;class wC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ki(e,this.data,this.fieldMask,t,this.fieldTransforms):new kc(e,this.data,t,this.fieldTransforms)}}class wT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ki(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function TT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:r})}}class $g{constructor(e,t,i,o,c,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $g({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Qd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(TT(this.Ac)&&EC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class TC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||hh(e)}Cc(e,t,i,o=!1){return new $g({Ac:e,methodName:t,Dc:i,path:an.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qc(r){const e=r._freezeSettings(),t=hh(r._databaseId);return new TC(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Wg(r,e,t,i,o,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,t,o);Jg("Data must be an object, but it was:",d,i);const m=AT(i,d);let g,_;if(c.merge)g=new Hn(d.fieldMask),_=d.fieldTransforms;else if(c.mergeFields){const w=[];for(const b of c.mergeFields){const A=og(e,b,t);if(!d.contains(A))throw new he(W.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);RT(w,A)||w.push(A)}g=new Hn(w),_=d.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,_=d.fieldTransforms;return new wC(new Tn(m),g,_)}class yh extends ph{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yh}}class Zg extends ph{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new xc(e.serializer,Mw(e.serializer,this.Fc));return new fR(e.path,t)}isEqual(e){return e instanceof Zg&&this.Fc===e.Fc}}function bT(r,e,t,i){const o=r.Cc(1,e,t);Jg("Data must be an object, but it was:",o,i);const c=[],d=Tn.empty();Mi(i,((g,_)=>{const w=ep(e,g,t);_=_t(_);const b=o.yc(w);if(_ instanceof yh)c.push(w);else{const A=Bc(_,b);A!=null&&(c.push(w),d.set(w,A))}}));const m=new Hn(c);return new wT(d,m,o.fieldTransforms)}function ST(r,e,t,i,o,c){const d=r.Cc(1,e,t),m=[og(e,i,t)],g=[o];if(c.length%2!=0)throw new he(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<c.length;A+=2)m.push(og(e,c[A])),g.push(c[A+1]);const _=[],w=Tn.empty();for(let A=m.length-1;A>=0;--A)if(!RT(_,m[A])){const I=m[A];let j=g[A];j=_t(j);const H=d.yc(I);if(j instanceof yh)_.push(I);else{const U=Bc(j,H);U!=null&&(_.push(I),w.set(I,U))}}const b=new Hn(_);return new wT(w,b,d.fieldTransforms)}function bC(r,e,t,i=!1){return Bc(t,r.Cc(i?4:3,e))}function Bc(r,e){if(xT(r=_t(r)))return Jg("Unsupported field value:",e,r),AT(r,e);if(r instanceof ph)return(function(i,o){if(!TT(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const c=[];let d=0;for(const m of i){let g=Bc(m,o.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(i,o){if((i=_t(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Mw(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Ye.fromDate(i);return{timestampValue:zd(o.serializer,c)}}if(i instanceof Ye){const c=new Ye(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:zd(o.serializer,c)}}if(i instanceof Br)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Bn)return{bytesValue:Qw(o.serializer,i._byteString)};if(i instanceof yt){const c=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ng(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Hr)return(function(d,m){return{mapValue:{fields:{[_w]:{stringValue:vw},[Vd]:{arrayValue:{values:d.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return xg(m.serializer,_)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${rh(i)}`)})(r,e)}function AT(r,e){const t={};return hw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mi(r,((i,o)=>{const c=Bc(o,e.mc(i));c!=null&&(t[i]=c)})),{mapValue:{fields:t}}}function xT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ye||r instanceof Br||r instanceof Bn||r instanceof yt||r instanceof ph||r instanceof Hr)}function Jg(r,e,t){if(!xT(t)||!uw(t)){const i=rh(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function og(r,e,t){if((e=_t(e))instanceof zc)return e._internalPath;if(typeof e=="string")return ep(r,e);throw Qd("Field path arguments must be of type string or ",r,!1,void 0,t)}const SC=new RegExp("[~\\*/\\[\\]]");function ep(r,e,t){if(e.search(SC)>=0)throw Qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new zc(...e.split("."))._internalPath}catch{throw Qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Qd(r,e,t,i,o){const c=i&&!i.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${i}`),d&&(g+=` in document ${o}`),g+=")"),new he(W.INVALID_ARGUMENT,m+r+g)}function RT(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,i,o,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_h("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class AC extends Kd{data(){return super.data()}}function _h(r,e){return typeof e=="string"?ep(r,e):e instanceof zc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tp{}class np extends tp{}function St(r,e,...t){let i=[];e instanceof tp&&i.push(e),i=i.concat(t),(function(c){const d=c.filter((g=>g instanceof rp)).length,m=c.filter((g=>g instanceof vh)).length;if(d>1||d>0&&m>0)throw new he(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class vh extends np{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new vh(e,t,i)}_apply(e){const t=this._parse(e);return NT(e._query,t),new ks(e.firestore,e.converter,Zm(e._query,t))}_parse(e){const t=qc(e.firestore);return(function(c,d,m,g,_,w,b){let A;if(_.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new he(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){tE(b,w);const j=[];for(const H of b)j.push(eE(g,c,H));A={arrayValue:{values:j}}}else A=eE(g,c,b)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||tE(b,w),A=bC(m,d,b,w==="in"||w==="not-in");return Vt.create(_,w,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function $e(r,e,t){const i=e,o=_h("where",r);return vh._create(o,i,t)}class rp extends tp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rp(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:yr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let d=o;const m=c.getFlattenedFilters();for(const g of m)NT(d,g),d=Zm(d,g)})(e._query,t),new ks(e.firestore,e.converter,Zm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sp extends np{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sp(e,t)}_apply(e){const t=(function(o,c,d){if(o.startAt!==null)throw new he(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bc(c,d)})(e._query,this._field,this._direction);return new ks(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new Ko(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function Yd(r,e="asc"){const t=e,i=_h("orderBy",r);return sp._create(i,t)}class ip extends np{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new ip(e,t,i)}_apply(e){return new ks(e.firestore,e.converter,Ld(e._query,this._limit,this._limitType))}}function CT(r){return D1("limit",r),ip._create("limit",r,"F")}function eE(r,e,t){if(typeof(t=_t(t))=="string"){if(t==="")throw new he(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rw(e)&&t.indexOf("/")!==-1)throw new he(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(lt.fromString(t));if(!Ee.isDocumentKey(i))throw new he(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return pv(r,new Ee(i))}if(t instanceof yt)return pv(r,t._key);throw new he(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rh(t)}.`)}function tE(r,e){if(!Array.isArray(r)||r.length===0)throw new he(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NT(r,e){const t=(function(o,c){for(const d of o)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class DT{convertValue(e,t="none"){switch(Ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Mi(e,((o,c)=>{i[o]=this.convertValue(c,t)})),i}convertVectorValue(e){var i,o,c;const t=(c=(o=(i=e.fields)==null?void 0:i[Vd].arrayValue)==null?void 0:o.values)==null?void 0:c.map((d=>Ct(d.doubleValue)));return new Hr(t)}convertGeoPoint(e){return new Br(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=ih(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ec(e));default:return null}}convertTimestamp(e){const t=Ii(e);return new Ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=lt.fromString(e);Ke(Jw(i),9688,{name:e});const o=new wc(i.get(1),i.get(3)),c=new Ee(i.popFirst(5));return o.isEqual(t)||Cs(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class xC extends DT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,t)}}class xo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ai extends Kd{constructor(e,t,i,o,c,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(_h("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ai._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ai._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ai._jsonSchema={type:jt("string",Ai._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class Rd extends Ai{data(e={}){return super.data(e)}}class va{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new xo(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Rd(this._firestore,this._userDataWriter,i.key,i,new xo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const g=new Rd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new xo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new Rd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new xo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,w=-1;return m.type!==0&&(_=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),w=d.indexOf(m.doc.key)),{type:RC(m.type),doc:g,oldIndex:_,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=va._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Eg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(r){r=In(r,yt);const e=In(r.firestore,Ds);return gC(Uc(e),r._key).then((t=>OT(e,r,t)))}va._jsonSchemaVersion="firestore/querySnapshot/1.0",va._jsonSchema={type:jt("string",va._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class Eh extends DT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,t)}}function gt(r){r=In(r,ks);const e=In(r.firestore,Ds),t=Uc(e),i=new Eh(e);return IT(r._query),pC(t,r._query).then((o=>new va(e,i,r,o)))}function Rc(r,e,t){r=In(r,yt);const i=In(r.firestore,Ds),o=ap(r.converter,e,t);return lp(i,[Wg(qc(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,mn.none())])}function op(r,e,t,...i){r=In(r,yt);const o=In(r.firestore,Ds),c=qc(o);let d;return d=typeof(e=_t(e))=="string"||e instanceof zc?ST(c,"updateDoc",r._key,e,t,i):bT(c,"updateDoc",r._key,e),lp(o,[d.toMutation(r._key,mn.exists(!0))])}function Hc(r,e){const t=In(r.firestore,Ds),i=Wt(r),o=ap(r.converter,e);return lp(t,[Wg(qc(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,mn.exists(!1))]).then((()=>i))}function IC(r,...e){var g,_,w;r=_t(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Jv(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Jv(e[i])){const b=e[i];e[i]=(g=b.next)==null?void 0:g.bind(b),e[i+1]=(_=b.error)==null?void 0:_.bind(b),e[i+2]=(w=b.complete)==null?void 0:w.bind(b)}let c,d,m;if(r instanceof yt)d=In(r.firestore,Ds),m=ah(r._key.path),c={next:b=>{e[i]&&e[i](OT(d,r,b))},error:e[i+1],complete:e[i+2]};else{const b=In(r,ks);d=In(b.firestore,Ds),m=b._query;const A=new Eh(d);c={next:I=>{e[i]&&e[i](new va(d,A,b,I))},error:e[i+1],complete:e[i+2]},IT(r._query)}return(function(A,I,j,H){const U=new Yg(H),re=new Gg(I,U,j);return A.asyncQueue.enqueueAndForget((async()=>Bg(await Gd(A),re))),()=>{U.Nu(),A.asyncQueue.enqueueAndForget((async()=>Hg(await Gd(A),re)))}})(Uc(d),m,o,c)}function lp(r,e){return(function(i,o){const c=new zr;return i.asyncQueue.enqueueAndForget((async()=>eC(await fC(i),o,c))),c.promise})(Uc(r),e)}function OT(r,e,t){const i=t.docs.get(e._key),o=new Eh(r);return new Ai(r,o,e._key,i,new xo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC={maxAttempts:5};function lc(r,e){if((r=_t(r)).firestore!==e)throw new he(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qc(e)}get(e){const t=lc(e,this._firestore),i=new xC(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return we(24041);const c=o[0];if(c.isFoundDocument())return new Kd(this._firestore,i,c.key,c,t.converter);if(c.isNoDocument())return new Kd(this._firestore,i,t._key,null,t.converter);throw we(18433,{doc:c})}))}set(e,t,i){const o=lc(e,this._firestore),c=ap(o.converter,t,i),d=Wg(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,i);return this._transaction.set(o._key,d),this}update(e,t,i,...o){const c=lc(e,this._firestore);let d;return d=typeof(t=_t(t))=="string"||t instanceof zc?ST(this._dataReader,"Transaction.update",c._key,t,i,o):bT(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,d),this}delete(e){const t=lc(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC extends NC{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=lc(e,this._firestore),i=new Eh(this._firestore);return super.get(e).then((o=>new Ai(this._firestore,i,t._key,o._document,new xo(!1,!1),t.converter)))}}function OC(r,e,t){r=In(r,Ds);const i={...CC,...t};return(function(c){if(c.maxAttempts<1)throw new he(W.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(c,d,m){const g=new zr;return c.asyncQueue.enqueueAndForget((async()=>{const _=await mC(c);new uC(c.asyncQueue,_,m,d,g).ju()})),g.promise})(Uc(r),(o=>e(new DC(r,o))),i)}function PT(r){return new Zg("increment",r)}(function(e,t=!0){(function(o){Fo=o})(Ho),Po(new wa("firestore",((i,{instanceIdentifier:o,options:c})=>{const d=i.getProvider("app").getImmediate(),m=new Ds(new T1(i.getProvider("auth-internal")),new A1(d,i.getProvider("app-check-internal")),(function(_,w){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new he(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wc(_.options.projectId,w)})(d,o),d);return c={useFetchStreams:t,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Ti(rv,sv,e),Ti(rv,sv,"esm2020")})();function MT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PC=MT,kT=new Dc("auth","Firebase",MT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd=new pg("@firebase/auth");function MC(r,...e){Xd.logLevel<=ze.WARN&&Xd.warn(`Auth (${Ho}): ${r}`,...e)}function Id(r,...e){Xd.logLevel<=ze.ERROR&&Xd.error(`Auth (${Ho}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(r,...e){throw up(r,...e)}function pr(r,...e){return up(r,...e)}function cp(r,e,t){const i={...PC(),[e]:t};return new Dc("auth","Firebase",i).create(e,{appName:r.name})}function Fr(r){return cp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kC(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ir(r,"argument-error"),cp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function up(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return kT.create(r,...e)}function xe(r,e,...t){if(!r)throw up(e,...t)}function xs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Id(e),new Error(e)}function Os(r,e){r||xs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function VC(){return nE()==="http:"||nE()==="https:"}function nE(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VC()||WA()||"connection"in navigator)?navigator.onLine:!0}function LC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Os(t>e,"Short delay should be less than long delay!"),this.isMobile=YA()||ZA()}get(){return jC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(r,e){Os(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qC=new Fc(3e4,6e4);function Vs(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Yr(r,e,t,i,o={}){return jT(r,o,async()=>{let c={},d={};i&&(e==="GET"?d=i:c={body:JSON.stringify(i)});const m=Oc({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const _={method:e,headers:g,...c};return $A()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&Bo(r.emulatorConfig.host)&&(_.credentials="include"),VT.fetch()(await LT(r,r.config.apiHost,t,m),_)})}async function jT(r,e,t){r._canInitEmulator=!1;const i={...UC,...e};try{const o=new HC(r),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw _d(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw _d(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw _d(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw _d(r,"user-disabled",d);const w=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw cp(r,w,_);ir(r,w)}}catch(o){if(o instanceof Ms)throw o;ir(r,"network-request-failed",{message:String(o)})}}async function Gc(r,e,t,i,o={}){const c=await Yr(r,e,t,i,o);return"mfaPendingCredential"in c&&ir(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function LT(r,e,t,i){const o=`${e}${t}?${i}`,c=r,d=c.config.emulator?dp(r.config,o):`${r.config.apiScheme}://${o}`;return zC.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function BC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(pr(this.auth,"network-request-failed")),qC.get())})}}function _d(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=pr(r,e,i);return o.customData._tokenResponse=t,o}function rE(r){return r!==void 0&&r.enterprise!==void 0}class FC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return BC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function GC(r,e){return Yr(r,"GET","/v2/recaptchaConfig",Vs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(r,e){return Yr(r,"POST","/v1/accounts:delete",e)}async function $d(r,e){return Yr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KC(r,e=!1){const t=_t(r),i=await t.getIdToken(e),o=hp(i);xe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:i,authTime:pc(jm(o.auth_time)),issuedAtTime:pc(jm(o.iat)),expirationTime:pc(jm(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function jm(r){return Number(r)*1e3}function hp(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Id("JWT malformed, contained fewer than 3 sections"),null;try{const o=HE(t);return o?JSON.parse(o):(Id("Failed to decode base64 JWT payload"),null)}catch(o){return Id("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function sE(r){const e=hp(r);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ms&&YC(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function YC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pc(this.lastLoginAt),this.creationTime=pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wd(r){var b;const e=r.auth,t=await r.getIdToken(),i=await zo(r,$d(e,{idToken:t}));xe(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const c=(b=o.providerUserInfo)!=null&&b.length?UT(o.providerUserInfo):[],d=WC(r.providerData,c),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!(d!=null&&d.length),_=m?g:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new cg(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(r,w)}async function $C(r){const e=_t(r);await Wd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WC(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function UT(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZC(r,e){const t=await jT(r,{},async()=>{const i=Oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,d=await LT(r,o,"/v1/token",`key=${c}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:i};return r.emulatorConfig&&Bo(r.emulatorConfig.host)&&(g.credentials="include"),VT.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function JC(r,e){return Yr(r,"POST","/v2/accounts:revokeToken",Vs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=sE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:c}=await ZC(e,t);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:c}=t,d=new No;return i&&(xe(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(xe(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(xe(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new No,this.toJSON())}_performRefresh(){return xs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(r,e){xe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class gr{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new XC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new cg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await zo(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return KC(this,e)}reload(){return $C(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Wd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(Fr(this.auth));const e=await this.getIdToken();return await zo(this,QC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,_=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:b,emailVerified:A,isAnonymous:I,providerData:j,stsTokenManager:H}=t;xe(b&&H,e,"internal-error");const U=No.fromJSON(this.name,H);xe(typeof b=="string",e,"internal-error"),mi(i,e.name),mi(o,e.name),xe(typeof A=="boolean",e,"internal-error"),xe(typeof I=="boolean",e,"internal-error"),mi(c,e.name),mi(d,e.name),mi(m,e.name),mi(g,e.name),mi(_,e.name),mi(w,e.name);const re=new gr({uid:b,auth:e,email:o,emailVerified:A,displayName:i,isAnonymous:I,photoURL:d,phoneNumber:c,tenantId:m,stsTokenManager:U,createdAt:_,lastLoginAt:w});return j&&Array.isArray(j)&&(re.providerData=j.map(se=>({...se}))),g&&(re._redirectEventId=g),re}static async _fromIdTokenResponse(e,t,i=!1){const o=new No;o.updateFromServerResponse(t);const c=new gr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Wd(c),c}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];xe(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?UT(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),m=new No;m.updateFromIdToken(i);const g=new gr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new cg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new Map;function Rs(r){Os(r instanceof Function,"Expected a class definition");let e=iE.get(r);return e?(Os(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,iE.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zT.type="NONE";const aE=zT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(r,e,t){return`firebase:${r}:${e}:${t}`}class Do{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=Cd(this.userKey,o.apiKey,c),this.fullPersistenceKey=Cd("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await $d(this.auth,{idToken:e}).catch(()=>{});return t?gr._fromGetAccountInfoResponse(this.auth,t,e):null}return gr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Do(Rs(aE),e,i);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=o[0]||Rs(aE);const d=Cd(i,e.config.apiKey,e.name);let m=null;for(const _ of t)try{const w=await _._get(d);if(w){let b;if(typeof w=="string"){const A=await $d(e,{idToken:w}).catch(()=>{});if(!A)break;b=await gr._fromGetAccountInfoResponse(e,A,w)}else b=gr._fromJSON(e,w);_!==c&&(m=b),c=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Do(c,e,i):(c=g[0],m&&await c._set(d,m.toJSON()),await Promise.all(t.map(async _=>{if(_!==c)try{await _._remove(d)}catch{}})),new Do(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QT(e))return"Blackberry";if(KT(e))return"Webos";if(BT(e))return"Safari";if((e.includes("chrome/")||HT(e))&&!e.includes("edge/"))return"Chrome";if(GT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function qT(r=gn()){return/firefox\//i.test(r)}function BT(r=gn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HT(r=gn()){return/crios\//i.test(r)}function FT(r=gn()){return/iemobile/i.test(r)}function GT(r=gn()){return/android/i.test(r)}function QT(r=gn()){return/blackberry/i.test(r)}function KT(r=gn()){return/webos/i.test(r)}function fp(r=gn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function eN(r=gn()){var e;return fp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function tN(){return JA()&&document.documentMode===10}function YT(r=gn()){return fp(r)||GT(r)||KT(r)||QT(r)||/windows phone/i.test(r)||FT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(r,e=[]){let t;switch(r){case"Browser":t=oE(gn());break;case"Worker":t=`${oE(gn())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ho}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=c=>new Promise((d,m)=>{try{const g=e(c);d(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(r,e={}){return Yr(r,"GET","/v2/passwordPolicy",Vs(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=6;class iN{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??sN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lE(this),this.idTokenSubscription=new lE(this),this.beforeStateQueue=new nN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Rs(t)),this._initializationPromise=this.queue(async()=>{var i,o,c;if(!this._deleted&&(this.persistenceManager=await Do.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await $d(this,{idToken:e}),i=await gr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Rn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,m=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===m)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(d){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(Fr(this));const t=e?_t(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(Fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(Fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rN(this),t=new iN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await JC(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Rs(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await Do.create(this,[Rs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&MC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Xr(r){return _t(r)}class lE{constructor(e){this.auth=e,this.observer=null,this.addObserver=ox(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oN(r){wh=r}function $T(r){return wh.loadJS(r)}function lN(){return wh.recaptchaEnterpriseScript}function cN(){return wh.gapiScript}function uN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class dN{constructor(){this.enterprise=new hN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class hN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const fN="recaptcha-enterprise",WT="NO_RECAPTCHA";class mN{constructor(e){this.type=fN,this.auth=Xr(e)}async verify(e="verify",t=!1){async function i(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{GC(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new FC(g);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,d(_.siteKey)}}).catch(g=>{m(g)})})}function o(c,d,m){const g=window.grecaptcha;rE(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(_=>{d(_)}).catch(()=>{d(WT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dN().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{i(this.auth).then(m=>{if(!t&&rE(window.grecaptcha))o(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=lN();g.length!==0&&(g+=m),$T(g).then(()=>{o(m,c,d)}).catch(_=>{d(_)})}}).catch(m=>{d(m)})})}}async function cE(r,e,t,i=!1,o=!1){const c=new mN(r);let d;if(o)d=WT;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Zd(r,e,t,i,o){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await cE(r,e,t,t==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await cE(r,e,t,t==="getOobCode");return i(r,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(r,e){const t=_g(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(Ea(c,e??{}))return o;ir(o,"already-initialized")}return t.initialize({options:e})}function pN(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Rs);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function yN(r,e,t){const i=Xr(r);xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=ZT(e),{host:d,port:m}=_N(e),g=m===null?"":`:${m}`,_={url:`${c}//${d}${g}/`},w=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){xe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xe(Ea(_,i.config.emulator)&&Ea(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=_,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,Bo(d)?(KE(`${c}//${d}${g}`),YE("Auth",!0)):vN()}function ZT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function _N(r){const e=ZT(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:uE(i.substr(c.length+1))}}else{const[c,d]=i.split(":");return{host:c,port:uE(d)}}}function uE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function vN(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xs("not implemented")}_getIdTokenResponse(e){return xs("not implemented")}_linkToIdToken(e,t){return xs("not implemented")}_getReauthenticationResolver(e){return xs("not implemented")}}async function EN(r,e){return Yr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(r,e){return Gc(r,"POST","/v1/accounts:signInWithPassword",Vs(r,e))}async function JT(r,e){return Yr(r,"POST","/v1/accounts:sendOobCode",Vs(r,e))}async function TN(r,e){return JT(r,e)}async function bN(r,e){return JT(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(r,e){return Gc(r,"POST","/v1/accounts:signInWithEmailLink",Vs(r,e))}async function AN(r,e){return Gc(r,"POST","/v1/accounts:signInWithEmailLink",Vs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends mp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ic(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ic(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zd(e,t,"signInWithPassword",wN);case"emailLink":return SN(e,{email:this._email,oobCode:this._password});default:ir(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zd(e,i,"signUpPassword",EN);case"emailLink":return AN(e,{idToken:t,email:this._email,oobCode:this._password});default:ir(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(r,e){return Gc(r,"POST","/v1/accounts:signInWithIdp",Vs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="http://localhost";class Sa extends mp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=t;if(!i||!o)return null;const d=new Sa(i,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Oo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Oo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}buildRequest(){const e={requestUri:xN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Oc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IN(r){const e=rc(sc(r)).link,t=e?rc(sc(e)).deep_link_id:null,i=rc(sc(r)).deep_link_id;return(i?rc(sc(i)).link:null)||i||t||e||r}class gp{constructor(e){const t=rc(sc(e)),i=t.apiKey??null,o=t.oobCode??null,c=RN(t.mode??null);xe(i&&o&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=IN(e);try{return new gp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.providerId=Xo.PROVIDER_ID}static credential(e,t){return Ic._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=gp.parseLink(t);return xe(i,"argument-error"),Ic._fromEmailAndCode(e,i.code,i.tenantId)}}Xo.PROVIDER_ID="password";Xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends pp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Qc{constructor(){super("facebook.com")}static credential(e){return Sa._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Sa._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return As.credential(t,i)}catch{return null}}}As.GOOGLE_SIGN_IN_METHOD="google.com";As.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Qc{constructor(){super("github.com")}static credential(e){return Sa._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.GITHUB_SIGN_IN_METHOD="github.com";pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Qc{constructor(){super("twitter.com")}static credential(e,t){return Sa._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return yi.credential(t,i)}catch{return null}}}yi.TWITTER_SIGN_IN_METHOD="twitter.com";yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eb(r,e){return Gc(r,"POST","/v1/accounts:signUp",Vs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const c=await gr._fromIdTokenResponse(e,i,o),d=dE(i);return new Ps({user:c,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=dE(i);return new Ps({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function dE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(r){var o;if(Rn(r.app))return Promise.reject(Fr(r));const e=Xr(r);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new Ps({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await eb(e,{returnSecureToken:!0}),i=await Ps._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends Ms{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Jd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Jd(e,t,i,o)}}function tb(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Jd._fromErrorAndOperation(r,c,e,i):c})}async function NN(r,e,t=!1){const i=await zo(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ps._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(r,e,t=!1){const{auth:i}=r;if(Rn(i.app))return Promise.reject(Fr(i));const o="reauthenticate";try{const c=await zo(r,tb(i,o,e,r),t);xe(c.idToken,i,"internal-error");const d=hp(c.idToken);xe(d,i,"internal-error");const{sub:m}=d;return xe(r.uid===m,i,"user-mismatch"),Ps._forOperation(r,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&ir(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nb(r,e,t=!1){if(Rn(r.app))return Promise.reject(Fr(r));const i="signIn",o=await tb(r,i,e),c=await Ps._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(c.user),c}async function ON(r,e){return nb(Xr(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rb(r){const e=Xr(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PN(r,e,t){const i=Xr(r);await Zd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",bN)}async function MN(r,e,t){if(Rn(r.app))return Promise.reject(Fr(r));const i=Xr(r),d=await Zd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eb).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&rb(r),g}),m=await Ps._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(m.user),m}function kN(r,e,t){return Rn(r.app)?Promise.reject(Fr(r)):ON(_t(r),Xo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&rb(r),i})}async function sb(r,e){const t=_t(r),o={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()},{email:c}=await TN(t.auth,o);c!==r.email&&await r.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(r,e){return Yr(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=_t(r),c={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await zo(i,VN(i.auth,c));i.displayName=d.displayName||null,i.photoURL=d.photoUrl||null;const m=i.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=i.displayName,m.photoURL=i.photoURL),await i._updateTokensIfNecessary(d)}function LN(r,e,t,i){return _t(r).onIdTokenChanged(e,t,i)}function UN(r,e,t){return _t(r).beforeAuthStateChanged(e,t)}function zN(r,e,t,i){return _t(r).onAuthStateChanged(e,t,i)}function qN(r){return _t(r).signOut()}const eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(eh,"1"),this.storage.removeItem(eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=1e3,HN=10;class ab extends ib{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},c=this.storage.getItem(i);tN()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,HN):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},BN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ab.type="LOCAL";const FN=ab;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob extends ib{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ob.type="SESSION";const lb=ob;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Th(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:c}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(d).map(async _=>_(t.origin,c)),g=await GN(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Th.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((m,g)=>{const _=yp("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(b){const A=b;if(A.data.eventId===_)switch(A.data.status){case"ack":clearTimeout(w),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(A.data.response);break;default:clearTimeout(w),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(){return window}function KN(r){Gr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(){return typeof Gr().WorkerGlobalScope<"u"&&typeof Gr().importScripts=="function"}async function YN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XN(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function $N(){return cb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="firebaseLocalStorageDb",WN=1,th="firebaseLocalStorage",db="fbase_key";class Kc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function bh(r,e){return r.transaction([th],e?"readwrite":"readonly").objectStore(th)}function ZN(){const r=indexedDB.deleteDatabase(ub);return new Kc(r).toPromise()}function ug(){const r=indexedDB.open(ub,WN);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(th,{keyPath:db})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(th)?e(i):(i.close(),await ZN(),e(await ug()))})})}async function hE(r,e,t){const i=bh(r,!0).put({[db]:e,value:t});return new Kc(i).toPromise()}async function JN(r,e){const t=bh(r,!1).get(e),i=await new Kc(t).toPromise();return i===void 0?null:i.value}function fE(r,e){const t=bh(r,!0).delete(e);return new Kc(t).toPromise()}const e2=800,t2=3;class hb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ug(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>t2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Th._getInstance($N()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await YN(),!this.activeServiceWorker)return;this.sender=new QN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ug();return await hE(e,eh,"1"),await fE(e,eh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>hE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>JN(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=bh(o,!1).getAll();return new Kc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),e2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hb.type="LOCAL";const n2=hb;new Fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(r,e){return e?Rs(e):(xe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p extends mp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function r2(r){return nb(r.auth,new _p(r),r.bypassAuthState)}function s2(r){const{auth:e,user:t}=r;return xe(t,e,"internal-error"),DN(t,new _p(r),r.bypassAuthState)}async function i2(r){const{auth:e,user:t}=r;return xe(t,e,"internal-error"),NN(t,new _p(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,t,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return r2;case"linkViaPopup":case"linkViaRedirect":return i2;case"reauthViaPopup":case"reauthViaRedirect":return s2;default:ir(this.auth,"internal-error")}}resolve(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=new Fc(2e3,1e4);async function o2(r,e,t){if(Rn(r.app))return Promise.reject(pr(r,"operation-not-supported-in-this-environment"));const i=Xr(r);kC(r,e,pp);const o=fb(i,t);return new _a(i,"signInViaPopup",e,o).executeNotNull()}class _a extends mb{constructor(e,t,i,o,c){super(e,t,o,c),this.provider=i,this.authWindow=null,this.pollId=null,_a.currentPopupAction&&_a.currentPopupAction.cancel(),_a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Os(this.filter.length===1,"Popup operations only handle one event");const e=yp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_a.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,a2.get())};e()}}_a.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="pendingRedirect",Nd=new Map;class c2 extends mb{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Nd.get(this.auth._key());if(!e){try{const i=await u2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Nd.set(this.auth._key(),e)}return this.bypassAuthState||Nd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function u2(r,e){const t=f2(e),i=h2(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function d2(r,e){Nd.set(r._key(),e)}function h2(r){return Rs(r._redirectPersistence)}function f2(r){return Cd(l2,r.config.apiKey,r.name)}async function m2(r,e,t=!1){if(Rn(r.app))return Promise.reject(Fr(r));const i=Xr(r),o=fb(i,e),d=await new c2(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=600*1e3;class p2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!y2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!gb(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(pr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=g2&&this.cachedEventUids.clear(),this.cachedEventUids.has(mE(e))}saveEventToCache(e){this.cachedEventUids.add(mE(e)),this.lastProcessedEventTime=Date.now()}}function mE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function gb({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function y2(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(r,e={}){return Yr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,E2=/^https?/;async function w2(r){if(r.config.emulator)return;const{authorizedDomains:e}=await _2(r);for(const t of e)try{if(T2(t))return}catch{}ir(r,"unauthorized-domain")}function T2(r){const e=lg(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!E2.test(t))return!1;if(v2.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=new Fc(3e4,6e4);function gE(){const r=Gr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function S2(r){return new Promise((e,t)=>{var o,c,d;function i(){gE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gE(),t(pr(r,"network-request-failed"))},timeout:b2.get()})}if((c=(o=Gr().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=Gr().gapi)!=null&&d.load)i();else{const m=uN("iframefcb");return Gr()[m]=()=>{gapi.load?i():t(pr(r,"network-request-failed"))},$T(`${cN()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Dd=null,e})}let Dd=null;function A2(r){return Dd=Dd||S2(r),Dd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=new Fc(5e3,15e3),R2="__/auth/iframe",I2="emulator/auth/iframe",C2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},N2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D2(r){const e=r.config;xe(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?dp(e,I2):`https://${r.config.authDomain}/${R2}`,i={apiKey:e.apiKey,appName:r.name,v:Ho},o=N2.get(r.config.apiHost);o&&(i.eid=o);const c=r._getFrameworks();return c.length&&(i.fw=c.join(",")),`${t}?${Oc(i).slice(1)}`}async function O2(r){const e=await A2(r),t=Gr().gapi;return xe(t,r,"internal-error"),e.open({where:document.body,url:D2(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:C2,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const d=pr(r,"network-request-failed"),m=Gr().setTimeout(()=>{c(d)},x2.get());function g(){Gr().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},M2=500,k2=600,V2="_blank",j2="http://localhost";class pE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function L2(r,e,t,i=M2,o=k2){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g={...P2,width:i.toString(),height:o.toString(),top:c,left:d},_=gn().toLowerCase();t&&(m=HT(_)?V2:t),qT(_)&&(e=e||j2,g.scrollbars="yes");const w=Object.entries(g).reduce((A,[I,j])=>`${A}${I}=${j},`,"");if(eN(_)&&m!=="_self")return U2(e||"",m),new pE(null);const b=window.open(e||"",m,w);xe(b,r,"popup-blocked");try{b.focus()}catch{}return new pE(b)}function U2(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="__/auth/handler",q2="emulator/auth/handler",B2=encodeURIComponent("fac");async function yE(r,e,t,i,o,c){xe(r.config.authDomain,r,"auth-domain-config-required"),xe(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Ho,eventId:o};if(e instanceof pp){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",ax(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,b]of Object.entries({}))d[w]=b}if(e instanceof Qc){const w=e.getScopes().filter(b=>b!=="");w.length>0&&(d.scopes=w.join(","))}r.tenantId&&(d.tid=r.tenantId);const m=d;for(const w of Object.keys(m))m[w]===void 0&&delete m[w];const g=await r._getAppCheckToken(),_=g?`#${B2}=${encodeURIComponent(g)}`:"";return`${H2(r)}?${Oc(m).slice(1)}${_}`}function H2({config:r}){return r.emulator?dp(r,q2):`https://${r.authDomain}/${z2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="webStorageSupport";class F2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lb,this._completeRedirectFn=m2,this._overrideRedirectResult=d2}async _openPopup(e,t,i,o){var d;Os((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await yE(e,t,i,lg(),o);return L2(e,c,yp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const c=await yE(e,t,i,lg(),o);return KN(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(Os(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await O2(e),i=new p2(e);return t.register("authEvent",o=>(xe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Lm,{type:Lm},o=>{var d;const c=(d=o==null?void 0:o[0])==null?void 0:d[Lm];c!==void 0&&t(!!c),ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=w2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return YT()||BT()||fp()}}const G2=F2;var _E="@firebase/auth",vE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Y2(r){Po(new wa("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=i.options;xe(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XT(r)},_=new aN(i,o,c,g);return pN(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Po(new wa("auth-internal",e=>{const t=Xr(e.getProvider("auth").getImmediate());return(i=>new Q2(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ti(_E,vE,K2(r)),Ti(_E,vE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=300,$2=QE("authIdTokenMaxAge")||X2;let EE=null;const W2=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>$2)return;const o=t==null?void 0:t.token;EE!==o&&(EE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Z2(r=ZE()){const e=_g(r,"auth");if(e.isInitialized())return e.getImmediate();const t=gN(r,{popupRedirectResolver:G2,persistence:[n2,FN,lb]}),i=QE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const d=W2(c.toString());UN(t,d,()=>d(t.currentUser)),LN(t,m=>d(m))}}const o=FE("auth");return o&&yN(t,`http://${o}`),t}function J2(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}oN({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const c=pr("internal-error");c.customData=o,t(c)},i.type="text/javascript",i.charset="UTF-8",J2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Y2("Browser");const eD={apiKey:"AIzaSyCDZJqOx5eXpu3cD_FBJ8oi-hYvLCpbDXE",authDomain:"verdadreto-bec6a.firebaseapp.com",projectId:"verdadreto-bec6a",storageBucket:"verdadreto-bec6a.firebasestorage.app",messagingSenderId:"938969209658",appId:"1:938969209658:web:534282f57a8ff381c00e03"},pb=WE(eD),Ce=_C(pb),_r=Z2(pb),yb=new As;yb.setCustomParameters({prompt:"select_account"});class tD{constructor(){this.currentUser=null,this.sessionId=this.generateSessionId()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setCurrentUser(e){this.currentUser=e}async trackEvent(e,t){var i,o,c;try{const d={eventType:e,userId:(i=this.currentUser)==null?void 0:i.uid,userEmail:((o=this.currentUser)==null?void 0:o.email)||void 0,isAnonymous:((c=this.currentUser)==null?void 0:c.isAnonymous)??!0,timestamp:Ye.now(),sessionId:this.sessionId,...t};await Hc(tt(Ce,"analytics"),d),console.log("Analytics event tracked:",e)}catch(d){console.error("Error tracking analytics event:",d)}}async trackGameStart(e,t,i){await this.trackEvent("game_start",{packId:e,packName:t,gameData:{playersCount:i}})}async trackGameEnd(e,t,i,o){await this.trackEvent("game_end",{packId:e,packName:t,gameData:{roundsPlayed:i,duration:o}})}async trackPackSelected(e,t){await this.trackEvent("pack_selected",{packId:e,packName:t})}async trackDemoUsed(e,t){await this.trackEvent("demo_used",{packId:e,packName:t})}async trackUserLogin(){await this.trackEvent("user_login")}async trackUserRegister(){await this.trackEvent("user_register")}async trackSessionStart(){await this.trackEvent("session_start")}async trackSessionEnd(){await this.trackEvent("session_end")}async getStatsForPeriod(e,t){const i=new Date;let o,c=i;switch(e){case"realtime":o=new Date(i.getTime()-300*1e3);break;case"day":o=t?new Date(t):new Date(i.getFullYear(),i.getMonth(),i.getDate()),c=new Date(o.getTime()+1440*60*1e3);break;case"month":o=t?new Date(t):new Date(i.getFullYear(),i.getMonth(),1),c=new Date(o.getFullYear(),o.getMonth()+1,0);break;case"year":o=t?new Date(t):new Date(i.getFullYear(),0,1),c=new Date(o.getFullYear()+1,0,0);break}const d=Ye.fromDate(o),m=Ye.fromDate(c),g=St(tt(Ce,"analytics"),$e("timestamp",">=",d),$e("timestamp","<=",m),Yd("timestamp","desc")),w=(await gt(g)).docs.map(b=>b.data());return this.calculateStats(w,e)}calculateStats(e,t){const i=new Set,o=new Set,c=new Set,d=new Map;let m=0,g=0,_=0;const w=Date.now()-300*1e3,b=new Set;e.forEach(I=>{switch(I.userId&&(i.add(I.userId),I.isAnonymous?c.add(I.userId):o.add(I.userId)),I.timestamp.toMillis()>w&&b.add(I.sessionId),I.eventType){case"game_start":if(m++,I.packId&&I.packName){const j=d.get(I.packId)||{name:I.packName,count:0};d.set(I.packId,{...j,count:j.count+1})}break;case"demo_used":g++;break}}),_=b.size;const A=Array.from(d.entries()).map(([I,j])=>({packId:I,packName:j.name,count:j.count})).sort((I,j)=>j.count-I.count).slice(0,10);return{totalUsers:i.size,registeredUsers:o.size,anonymousUsers:c.size,totalGames:m,totalDemos:g,activeUsers:_,mostPlayedPacks:A,gamesPerDay:t==="day"?m:Math.round(m/this.getDaysInPeriod(t)),demosPerDay:t==="day"?g:Math.round(g/this.getDaysInPeriod(t))}}getDaysInPeriod(e){switch(e){case"realtime":return 1;case"day":return 1;case"month":return 30;case"year":return 365;default:return 1}}async getRecentEvents(e=50){const t=St(tt(Ce,"analytics"),Yd("timestamp","desc"),CT(e));return(await gt(t)).docs.map(o=>({id:o.id,...o.data()}))}}const vi=new tD,nD=({availablePacks:r,purchasedPacks:e,adWatchedPacks:t,referralUnlockedPacks:i,suggestionUnlockedPacks:o,onContinue:c,onBack:d,onGoToShop:m,onPlayDemo:g})=>{const _=r.some(I=>I.id==="base"),w={id:"base",name:"Pack Base",description:"Preguntas y retos básicos incluidos",price:"INCLUIDO",icon:"🎮",questionsUrl:"",daresUrl:"",allowDemo:!1,demoPlaysCount:0},b=r.filter(I=>I.id!=="no-ads"),A=_?b:[w,...b];return e.length>0,p.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:p.jsxs(Cn,{className:"w-full max-w-2xl text-center",children:[p.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Packs Disponibles"}),p.jsx("p",{className:"text-gray-400 mb-8",children:"Estos son los packs que tienes disponibles para jugar"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:A.map(I=>{const j=I.id==="base"||e.includes(I.id),H=I.id==="base",U=t.includes(I.id),re=i.includes(I.id),se=o.includes(I.id),ie=j||re||se;return p.jsxs("div",{className:`relative p-4 rounded-lg border transition-all duration-200 ${j?"border-green-500 bg-green-500/10":re?"border-blue-500 bg-blue-500/10":se?"border-purple-500 bg-purple-500/10":U?"border-yellow-500 bg-yellow-500/10":"border-gray-600 bg-gray-800/50 opacity-60"}`,children:[p.jsx("div",{className:"absolute top-2 right-2",children:j?p.jsx(Rm,{className:"w-6 h-6 text-green-500"}):re?p.jsx(Rm,{className:"w-6 h-6 text-blue-500"}):se?p.jsx(Rm,{className:"w-6 h-6 text-purple-500"}):p.jsx(Io,{className:"w-6 h-6 text-yellow-500"})}),p.jsx("div",{className:"text-4xl mb-2",children:I.icon}),p.jsx("h3",{className:`text-xl font-bold mb-2 ${ie||U?"text-white":"text-gray-400"}`,children:I.name}),p.jsx("p",{className:`text-sm mb-3 ${ie||U?"text-gray-300":"text-gray-500"}`,children:I.description}),I.isReferralUnlockable&&!ie&&p.jsxs("p",{className:"text-xs text-blue-400 mb-2",children:["🎯 Requiere ",I.requiredReferrals," referidos"]}),I.isSuggestionUnlockable&&!ie&&p.jsxs("p",{className:"text-xs text-purple-400 mb-2",children:["💡 Requiere ",I.requiredApprovedSuggestions," sugerencias aprobadas"]}),p.jsx("div",{className:`text-lg font-semibold ${j?"text-green-400":re?"text-blue-400":se?"text-purple-400":"text-yellow-400"}`,children:H?"INCLUIDO":j?"COMPRADO":re?"POR REFERIDOS":se?"POR SUGERENCIAS":U?"DEMO VISTO":"PREMIUM"}),!ie&&!U&&p.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx(Io,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),p.jsx("p",{className:"text-yellow-400 font-semibold text-sm mb-3",children:I.isReferralUnlockable?`${I.requiredReferrals} REFERIDOS`:I.isSuggestionUnlockable?`${I.requiredApprovedSuggestions} SUGERENCIAS`:"PREMIUM"}),I.allowDemo&&p.jsx(Ie,{onClick:fe=>{fe.stopPropagation(),vi.trackDemoUsed(I.id,I.name),g(I.id)},variant:"secondary",className:"px-3 py-1 text-xs bg-yellow-500 hover:bg-yellow-600 text-white border border-yellow-400 shadow-md",children:"💎 Jugar Demo"})]})})]},I.id)})}),r.some(I=>!e.includes(I.id))&&p.jsx("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:p.jsxs("p",{className:"text-yellow-400 text-sm",children:[p.jsx(Io,{className:"w-4 h-4 inline mr-2"}),"Los packs premium están bloqueados. Visita la tienda para desbloquearlos."]})}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(Ie,{onClick:d,variant:"secondary",className:"px-6",children:"Volver"}),p.jsx(Ie,{onClick:m,variant:"secondary",className:"px-6 bg-yellow-600 hover:bg-yellow-700 text-white",children:"Ir a la Tienda"}),p.jsx(Ie,{onClick:()=>{A.forEach(I=>{const j=I.id==="base"||e.includes(I.id),H=i.includes(I.id),U=o.includes(I.id);(j||H||U)&&vi.trackPackSelected(I.id,I.name)}),c()},className:"px-6",disabled:!1,children:"Continuar al Juego"})]})]})})},rD="modulepreload",sD=function(r,e){return new URL(r,e).href},wE={},_b=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let d=function(w){return Promise.all(w.map(b=>Promise.resolve(b).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};const m=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),_=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=d(t.map(w=>{if(w=sD(w,i),w in wE)return;wE[w]=!0;const b=w.endsWith(".css"),A=b?'[rel="stylesheet"]':"";if(!!i)for(let H=m.length-1;H>=0;H--){const U=m[H];if(U.href===w&&(!b||U.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${A}`))return;const j=document.createElement("link");if(j.rel=b?"stylesheet":rD,b||(j.as="script"),j.crossOrigin="",j.href=w,_&&j.setAttribute("nonce",_),document.head.appendChild(j),b)return new Promise((H,U)=>{j.addEventListener("load",H),j.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${w}`)))})}))}function c(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return o.then(d=>{for(const m of d||[])m.status==="rejected"&&c(m.reason);return e().catch(c)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var qo;(function(r){r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE"})(qo||(qo={}));class Um extends Error{constructor(e,t,i){super(e),this.message=e,this.code=t,this.data=i}}const iD=r=>{var e,t;return r!=null&&r.androidBridge?"android":!((t=(e=r==null?void 0:r.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},aD=r=>{const e=r.CapacitorCustomPlatform||null,t=r.Capacitor||{},i=t.Plugins=t.Plugins||{},o=()=>e!==null?e.name:iD(r),c=()=>o()!=="web",d=b=>{const A=_.get(b);return!!(A!=null&&A.platforms.has(o())||m(b))},m=b=>{var A;return(A=t.PluginHeaders)===null||A===void 0?void 0:A.find(I=>I.name===b)},g=b=>r.console.error(b),_=new Map,w=(b,A={})=>{const I=_.get(b);if(I)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),I.proxy;const j=o(),H=m(b);let U;const re=async()=>(!U&&j in A?U=typeof A[j]=="function"?U=await A[j]():U=A[j]:e!==null&&!U&&"web"in A&&(U=typeof A.web=="function"?U=await A.web():U=A.web),U),se=(x,C)=>{var P,M;if(H){const V=H==null?void 0:H.methods.find(R=>C===R.name);if(V)return V.rtype==="promise"?R=>t.nativePromise(b,C.toString(),R):(R,De)=>t.nativeCallback(b,C.toString(),R,De);if(x)return(P=x[C])===null||P===void 0?void 0:P.bind(x)}else{if(x)return(M=x[C])===null||M===void 0?void 0:M.bind(x);throw new Um(`"${b}" plugin is not implemented on ${j}`,qo.Unimplemented)}},ie=x=>{let C;const P=(...M)=>{const V=re().then(R=>{const De=se(R,x);if(De){const Me=De(...M);return C=Me==null?void 0:Me.remove,Me}else throw new Um(`"${b}.${x}()" is not implemented on ${j}`,qo.Unimplemented)});return x==="addListener"&&(V.remove=async()=>C()),V};return P.toString=()=>`${x.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:x,writable:!1,configurable:!1}),P},fe=ie("addListener"),de=ie("removeListener"),X=(x,C)=>{const P=fe({eventName:x},C),M=async()=>{const R=await P;de({eventName:x,callbackId:R},C)},V=new Promise(R=>P.then(()=>R({remove:M})));return V.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await M()},V},D=new Proxy({},{get(x,C){switch(C){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return H?X:fe;case"removeListener":return de;default:return ie(C)}}});return i[b]=D,_.set(b,{name:b,proxy:D,platforms:new Set([...Object.keys(A),...H?[j]:[]])}),D};return t.convertFileSrc||(t.convertFileSrc=b=>b),t.getPlatform=o,t.handleError=g,t.isNativePlatform=c,t.isPluginAvailable=d,t.registerPlugin=w,t.Exception=Um,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},oD=r=>r.Capacitor=aD(r),hn=oD(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),vp=hn.registerPlugin;class vb{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(t);const c=this.windowListeners[e];c&&!c.registered&&this.addWindowListener(c),i&&this.sendRetainedArgumentsForEvent(e);const d=async()=>this.removeListener(e,t);return Promise.resolve({remove:d})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,i){const o=this.listeners[e];if(!o){if(i){let c=this.retainedEventArguments[e];c||(c=[]),c.push(t),this.retainedEventArguments[e]=c}return}o.forEach(c=>c(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:i=>{this.notifyListeners(t,i)}}}unimplemented(e="not implemented"){return new hn.Exception(e,qo.Unimplemented)}unavailable(e="not available"){return new hn.Exception(e,qo.Unavailable)}async removeListener(e,t){const i=this.listeners[e];if(!i)return;const o=i.indexOf(t);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(i=>{this.notifyListeners(e,i)}))}}const TE=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),bE=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class lD extends vb{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[o,c]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=bE(o).trim(),c=bE(c).trim(),t[o]=c}),t}async setCookie(e){try{const t=TE(e.key),i=TE(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,c=(e.path||"/").replace("path=",""),d=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${i||""}${o}; path=${c}; ${d};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}vp("CapacitorCookies",{web:()=>new lD});const cD=async r=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{const o=i.result;e(o.indexOf(",")>=0?o.split(",")[1]:o)},i.onerror=o=>t(o),i.readAsDataURL(r)}),uD=(r={})=>{const e=Object.keys(r);return Object.keys(r).map(o=>o.toLocaleLowerCase()).reduce((o,c,d)=>(o[c]=r[e[d]],o),{})},dD=(r,e=!0)=>r?Object.entries(r).reduce((i,o)=>{const[c,d]=o;let m,g;return Array.isArray(d)?(g="",d.forEach(_=>{m=e?encodeURIComponent(_):_,g+=`${c}=${m}&`}),g.slice(0,-1)):(m=e?encodeURIComponent(d):d,g=`${c}=${m}`),`${i}&${g}`},"").substr(1):null,hD=(r,e={})=>{const t=Object.assign({method:r.method||"GET",headers:r.headers},e),o=uD(r.headers)["content-type"]||"";if(typeof r.data=="string")t.body=r.data;else if(o.includes("application/x-www-form-urlencoded")){const c=new URLSearchParams;for(const[d,m]of Object.entries(r.data||{}))c.set(d,m);t.body=c.toString()}else if(o.includes("multipart/form-data")||r.data instanceof FormData){const c=new FormData;if(r.data instanceof FormData)r.data.forEach((m,g)=>{c.append(g,m)});else for(const m of Object.keys(r.data))c.append(m,r.data[m]);t.body=c;const d=new Headers(t.headers);d.delete("content-type"),t.headers=d}else(o.includes("application/json")||typeof r.data=="object")&&(t.body=JSON.stringify(r.data));return t};class fD extends vb{async request(e){const t=hD(e,e.webFetchExtra),i=dD(e.params,e.shouldEncodeUrlParams),o=i?`${e.url}?${i}`:e.url,c=await fetch(o,t),d=c.headers.get("content-type")||"";let{responseType:m="text"}=c.ok?e:{};d.includes("application/json")&&(m="json");let g,_;switch(m){case"arraybuffer":case"blob":_=await c.blob(),g=await cD(_);break;case"json":g=await c.json();break;case"document":case"text":default:g=await c.text()}const w={};return c.headers.forEach((b,A)=>{w[A]=b}),{data:g,headers:w,status:c.status,url:c.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}vp("CapacitorHttp",{web:()=>new fD});var SE;(function(r){r.General="General",r.ParentalGuidance="ParentalGuidance",r.Teen="Teen",r.MatureAudience="MatureAudience"})(SE||(SE={}));var AE;(function(r){r.SizeChanged="bannerAdSizeChanged",r.Loaded="bannerAdLoaded",r.FailedToLoad="bannerAdFailedToLoad",r.Opened="bannerAdOpened",r.Closed="bannerAdClosed",r.AdImpression="bannerAdImpression"})(AE||(AE={}));var dg;(function(r){r.TOP_CENTER="TOP_CENTER",r.CENTER="CENTER",r.BOTTOM_CENTER="BOTTOM_CENTER"})(dg||(dg={}));var hg;(function(r){r.BANNER="BANNER",r.FULL_BANNER="FULL_BANNER",r.LARGE_BANNER="LARGE_BANNER",r.MEDIUM_RECTANGLE="MEDIUM_RECTANGLE",r.LEADERBOARD="LEADERBOARD",r.ADAPTIVE_BANNER="ADAPTIVE_BANNER",r.SMART_BANNER="SMART_BANNER"})(hg||(hg={}));var yc;(function(r){r.Loaded="interstitialAdLoaded",r.FailedToLoad="interstitialAdFailedToLoad",r.Showed="interstitialAdShowed",r.FailedToShow="interstitialAdFailedToShow",r.Dismissed="interstitialAdDismissed"})(yc||(yc={}));var xE;(function(r){r.Loaded="onRewardedInterstitialAdLoaded",r.FailedToLoad="onRewardedInterstitialAdFailedToLoad",r.Showed="onRewardedInterstitialAdShowed",r.FailedToShow="onRewardedInterstitialAdFailedToShow",r.Dismissed="onRewardedInterstitialAdDismissed",r.Rewarded="onRewardedInterstitialAdReward"})(xE||(xE={}));var Ro;(function(r){r.Loaded="onRewardedVideoAdLoaded",r.FailedToLoad="onRewardedVideoAdFailedToLoad",r.Showed="onRewardedVideoAdShowed",r.FailedToShow="onRewardedVideoAdFailedToShow",r.Dismissed="onRewardedVideoAdDismissed",r.Rewarded="onRewardedVideoAdReward"})(Ro||(Ro={}));var RE;(function(r){r.NOT_REQUIRED="NOT_REQUIRED",r.OBTAINED="OBTAINED",r.REQUIRED="REQUIRED",r.UNKNOWN="UNKNOWN"})(RE||(RE={}));var IE;(function(r){r[r.DISABLED=0]="DISABLED",r[r.EEA=1]="EEA",r[r.NOT_EEA=2]="NOT_EEA"})(IE||(IE={}));const dn=vp("AdMob",{web:()=>_b(()=>import("./web-BvMjyDIx.js"),[],import.meta.url).then(r=>new r.AdMobWeb)}),vd={enabled:!0,questionChangeThreshold:LE.CHANGES_BEFORE_AD,adLoadingTime:1e3,adPlayingTime:3e3,showInRoundEnd:!0,showInGameEnd:!0,showInDemo:!1,autoPlay:!0,skipAfterSeconds:5,frequency:{questionChanges:3,roundEnd:1,gameEnd:1},types:{interstitial:!0,rewarded:!0,banner:!1}};class mD{constructor(){this.STORAGE_KEY="ads_config",this.config=this.loadConfig()}loadConfig(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){const t=JSON.parse(e);return{...vd,...t}}}catch(e){console.error("Error loading ads config:",e)}return{...vd}}saveConfig(){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.config))}catch(e){console.error("Error saving ads config:",e)}}getConfig(){return{...this.config}}updateConfig(e){this.config={...this.config,...e},this.saveConfig()}setEnabled(e){this.config.enabled=e,this.saveConfig()}isEnabled(){return this.config.enabled}shouldShowAdForQuestionChange(e){return this.config.enabled&&e>=this.config.questionChangeThreshold}shouldShowAdInRoundEnd(){return this.config.enabled&&this.config.showInRoundEnd}shouldShowAdInGameEnd(){return this.config.enabled&&this.config.showInGameEnd}shouldShowAdInDemo(){return this.config.enabled&&this.config.showInDemo}getAdLoadingTime(){return this.config.adLoadingTime}getAdPlayingTime(){return this.config.adPlayingTime}getQuestionChangeThreshold(){return this.config.questionChangeThreshold}resetToDefault(){this.config={...vd},this.saveConfig()}exportConfig(){return JSON.stringify(this.config,null,2)}importConfig(e){try{const t=JSON.parse(e);if(this.isValidConfig(t))return this.config={...vd,...t},this.saveConfig(),!0}catch(t){console.error("Error importing ads config:",t)}return!1}isValidConfig(e){return typeof e=="object"&&typeof e.enabled=="boolean"&&typeof e.questionChangeThreshold=="number"&&typeof e.adLoadingTime=="number"&&typeof e.adPlayingTime=="number"}getConfigStats(){return{enabled:this.config.enabled,questionChangeThreshold:this.config.questionChangeThreshold,totalTypes:Object.values(this.config.types).filter(Boolean).length,autoPlay:this.config.autoPlay,lastModified:localStorage.getItem(this.STORAGE_KEY+"_modified")||"Never"}}}const kt=new mD;class gD{constructor(){this.isInitialized=!1,this.config=null,this.configUnsubscribe=null}async initialize(e){if(this.isInitialized){this.config={...this.config,...e};return}try{this.config=e,hn.isNativePlatform()?(await dn.initialize({requestTrackingAuthorization:!0,testingDevices:e.testMode?["YOUR_DEVICE_ID"]:[],initializeForTesting:e.testMode||!1}),this.isInitialized=!0,console.log("AdMob initialized successfully"),this.configUnsubscribe=kt.onConfigChange(t=>{console.log("Configuración de anuncios actualizada:",t)})):console.log("AdMob not available on web platform")}catch(t){throw console.error("Failed to initialize AdMob:",t),t}}async showBannerAd(e,t){const i={success:!1,adType:qn.BANNER,error:null,timestamp:Date.now()};try{if(!kt.canShowAd(qn.BANNER,t))return i.error="Ad blocked by configuration or conditions",console.log("Banner ad blocked by configuration"),i;if(!this.isInitialized||!this.config)throw i.error="AdMob not initialized",new Error("AdMob not initialized");if(!hn.isNativePlatform())throw i.error="AdMob banners only available on native platforms",new Error("AdMob banners only available on native platforms");if(!this.config.bannerAdUnitId)throw i.error="bannerAdUnitId not configured",new Error("bannerAdUnitId not configured");const o={adId:this.config.bannerAdUnitId,adSize:hg.ADAPTIVE_BANNER,position:dg.BOTTOM_CENTER,margin:0,isTesting:this.config.testMode||!1,...e};return await dn.showBanner(o),kt.recordAdShown(qn.BANNER),i.success=!0,console.log("Banner ad shown successfully"),i}catch(o){return i.error=o instanceof Error?o.message:"Unknown error",console.error("Failed to show banner ad:",o),i}}async hideBannerAd(){if(this.isInitialized&&hn.isNativePlatform())try{await dn.hideBanner(),console.log("Banner ad hidden successfully")}catch(e){console.error("Failed to hide banner ad:",e)}}async resumeBannerAd(){if(this.isInitialized&&hn.isNativePlatform())try{await dn.resumeBanner(),console.log("Banner ad resumed successfully")}catch(e){console.error("Failed to resume banner ad:",e)}}async removeBannerAd(){if(this.isInitialized&&hn.isNativePlatform())try{await dn.removeBanner(),console.log("Banner ad removed successfully")}catch(e){console.error("Failed to remove banner ad:",e)}}async showInterstitial(e){const t={success:!1,adType:qn.POST_GAME,error:null,timestamp:Date.now()};try{if(!kt.canShowAd(qn.POST_GAME,e))return t.error="Ad blocked by configuration or conditions",console.log("Interstitial ad blocked by configuration"),t;if(!this.isInitialized||!this.config)return t.error="AdMob not initialized",console.warn("AdMob not initialized"),t;if(!hn.isNativePlatform())return t.error="Interstitials are only available on native platforms",console.warn("Interstitials are only available on native platforms"),t;if(!this.config.interstitialAdUnitId)return t.error="No interstitialAdUnitId configured",console.warn("No interstitialAdUnitId configured"),t;let i=null,o=null,c=null;const d=new Promise((_,w)=>{setTimeout(()=>w(new Error("Interstitial ad timeout")),3e4)}),m=new Promise(async(_,w)=>{try{i=await dn.addListener(yc.Loaded,j=>{console.log("Interstitial loaded")}),c=await dn.addListener(yc.FailedToLoad,j=>{console.error("Interstitial failed to load:",j),w(new Error("Failed to load interstitial"))});let b=null;const A=new Promise(j=>{b=j});o=await dn.addListener(yc.Dismissed,()=>{console.log("Interstitial dismissed"),b&&b()});const I={adId:this.config.interstitialAdUnitId,isTesting:this.config.testMode||!1};await dn.prepareInterstitial(I),await dn.showInterstitial(),await A,_(!0)}catch(b){w(b)}});return await Promise.race([m,d])&&(kt.recordAdShown(qn.POST_GAME),t.success=!0),t}catch(i){return t.error=i instanceof Error?i.message:"Unknown error",console.error("Failed to show interstitial ad:",i),t}finally{try{loadedSub&&await loadedSub.remove(),dismissedSub&&await dismissedSub.remove(),failedSub&&await failedSub.remove()}catch(i){console.warn("Error cleaning up interstitial listeners:",i)}}}async showRewarded(e){const t={success:!1,adType:qn.QUESTION_CHANGE,error:null,timestamp:Date.now()};try{if(!kt.canShowAd(qn.QUESTION_CHANGE,e))return t.error="Ad blocked by configuration or conditions",console.log("Rewarded ad blocked by configuration"),t;if(!this.isInitialized||!this.config)return t.error="AdMob not initialized",console.warn("AdMob not initialized"),t;if(!hn.isNativePlatform())return t.error="Rewarded ads are only available on native platforms",console.warn("Rewarded ads are only available on native platforms"),t;if(!this.config.rewardedAdUnitId)return t.error="No rewardedAdUnitId configured",console.warn("No rewardedAdUnitId configured"),t;let i=null,o=null,c=null,d=null;const m=new Promise((w,b)=>{setTimeout(()=>b(new Error("Rewarded ad timeout")),3e4)}),g=new Promise(async(w,b)=>{try{let A=!1;i=await dn.addListener(Ro.Loaded,U=>{console.log("Rewarded loaded")}),d=await dn.addListener(Ro.FailedToLoad,U=>{console.error("Rewarded failed to load:",U),b(new Error("Failed to load rewarded ad"))}),o=await dn.addListener(Ro.Rewarded,U=>{A=!0,console.log("User rewarded",U)});let I=null;const j=new Promise(U=>{I=U});c=await dn.addListener(Ro.Dismissed,()=>{console.log("Rewarded dismissed"),I&&I()});const H={adId:this.config.rewardedAdUnitId,isTesting:this.config.testMode||!1};await dn.prepareRewardVideoAd(H),await dn.showRewardVideoAd(),await j,w(A)}catch(A){b(A)}});return await Promise.race([g,m])&&(kt.recordAdShown(qn.QUESTION_CHANGE),t.success=!0,t.rewarded=!0),t}catch(i){return t.error=i instanceof Error?i.message:"Unknown error",console.error("Failed to show rewarded ad:",i),t}finally{try{loadedSub&&await loadedSub.remove(),rewardedSub&&await rewardedSub.remove(),dismissedSub&&await dismissedSub.remove(),failedSub&&await failedSub.remove()}catch(i){console.warn("Error cleaning up rewarded listeners:",i)}}}async showBestMonetizingAd(e){var t,i;if((t=this.config)!=null&&t.rewardedAdUnitId){const o=await this.showRewarded(e);if(o.success)return o}if((i=this.config)!=null&&i.interstitialAdUnitId){const o=await this.showInterstitial(e);if(o.success)return o}return{success:!1,adType:qn.POST_GAME,error:"No ads available or all blocked",timestamp:Date.now()}}isNativePlatform(){return hn.isNativePlatform()}isWebPlatform(){return hn.getPlatform()==="web"}getConfig(){return this.config}async showPostGameAd(e){const t=await this.showInterstitial(e);return t.adType=qn.POST_GAME,t}async showPostRoundAd(e){const t=await this.showInterstitial(e);return t.adType=qn.POST_ROUND,t}async showQuestionChangeAd(e){return await this.showRewarded(e)}canShowAdType(e,t){return kt.canShowAd(e,t)}getAdsConfig(){return kt.getConfig()}getSessionState(){return kt.getSessionState()}resetSession(){kt.resetSessionState()}destroy(){this.configUnsubscribe&&(this.configUnsubscribe(),this.configUnsubscribe=null)}}const xi=new gD,pD=({pack:r,isOpen:e,onClose:t,onStartDemo:i,onAdWatched:o,hasNoAds:c=!1})=>{const[d,m]=$.useState(!1),[g,_]=$.useState(null);if(!e)return null;const w=async()=>{m(!0),_(null);try{if(c||!kt.shouldShowAdInDemo()){o&&o(r.id),i();return}await xi.showInterstitial()?(o&&o(r.id),i(),t()):_("No se pudo cargar el anuncio. Necesitas ver un anuncio para jugar el demo.")}catch(b){console.error("Error al mostrar anuncio:",b),_("Error al cargar el anuncio. Necesitas ver un anuncio para jugar el demo.")}finally{m(!1)}};return p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 animate-fade-in",children:p.jsxs(Cn,{className:"w-full max-w-md relative",children:[p.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:p.jsx(OA,{className:"w-6 h-6"})}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-6xl mb-4",children:r.icon}),p.jsxs("h2",{className:"text-2xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-500",children:["Demo: ",r.name]}),p.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:p.jsxs("div",{className:"flex items-start gap-3 text-left",children:[p.jsx(PA,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),p.jsxs("div",{className:"text-sm text-blue-300",children:[p.jsx("p",{className:"mb-2",children:p.jsx("strong",{children:"¿Qué incluye el demo?"})}),p.jsxs("ul",{className:"space-y-1 text-xs",children:[p.jsx("li",{children:"• Podrás probar 5 preguntas y 5 retos que siempre serán los mismos (el pack incluye muchos más)"}),p.jsx("li",{children:"• Puedes jugar de forma ilimitada"}),p.jsx("li",{children:"• Solo necesitas ver un anuncio antes de cada partida"}),p.jsx("li",{children:"• Perfecto para probar si te gusta el pack"})]})]})]})}),g&&p.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mb-4",children:p.jsx("p",{className:"text-yellow-400 text-sm",children:g})}),p.jsxs("div",{className:"flex flex-col gap-3",children:[p.jsx(Ie,{onClick:w,disabled:d,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:d?p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Cargando anuncio..."]}):p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx("span",{role:"img","aria-label":"gem",children:"💎"}),"Ver anuncio y jugar demo"]})}),p.jsx(Ie,{onClick:t,variant:"secondary",className:"w-full",disabled:d,children:"Volver atrás"})]}),p.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"¿Te gusta el pack? Al final de la partida podrás comprarlo completo."})]})]})})},yD=({players:r,currentPlayerIndex:e,onNextPlayer:t,onNewGame:i,questions:o,dares:c,roundConfig:d,gameProgress:m,onRoundEnd:g,onQuestionAsked:_,onDareCompleted:w,onQuestionChange:b,onAdRequired:A,questionChangeState:I={changesCount:0,isAdLoading:!1,isAdPlaying:!1}})=>{const[j,H]=$.useState(null),[U,re]=$.useState(null),[se,ie]=$.useState(new Set),[fe,de]=$.useState(new Set),X=r[e];$.useEffect(()=>{vi.trackGameStart("mixed","Juego Mixto",r.length)},[]);const D=R=>{if(!R.includes("$jugador"))return R;const De=r.filter((Q,ae)=>ae!==e);if(De.length===0)return R.replace(/\$jugador/g,"otro jugador");const Me=De[Math.floor(Math.random()*De.length)];return R.replace(/\$jugador/g,Me)},x=$.useMemo(()=>o.map((R,De)=>({item:R,index:De})),[o]),C=$.useMemo(()=>c.map((R,De)=>({item:R,index:De})),[c]),P=R=>{const De=R==="pregunta"?x:C,Me=R==="pregunta"?se:fe,Q=R==="pregunta"?ie:de,ae=De.filter(Y=>!Me.has(Y.index));if(ae.length===0){Q(new Set);const Y=Math.floor(Math.random()*De.length),pe=De[Y];H(pe.item),Q(O=>new Set(O).add(pe.index))}else{const Y=Math.floor(Math.random()*ae.length),pe=ae[Y];H(pe.item),Q(O=>new Set(O).add(pe.index))}re(R),R==="pregunta"&&_?_():R==="reto"&&w&&w()},M=async()=>{if(!j||!U)return;if(kt.shouldShowAdForQuestionChange(I.changesCount+1)&&A)try{await A()}catch(pe){console.error("Error showing ad:",pe);return}const De=U==="pregunta"?x:C,Me=U==="pregunta"?se:fe,Q=U==="pregunta"?ie:de;let ae=0,Y=null;for(;ae<LE.MAX_CHANGE_ATTEMPTS&&!Y;){const pe=De.filter(O=>!Me.has(O.index)&&O.item.text!==j.text);if(pe.length===0){Q(new Set);const O=De.filter(ee=>ee.item.text!==j.text);if(O.length>0){const ee=Math.floor(Math.random()*O.length),ce=O[ee];Y=ce.item,Q(oe=>new Set([ce.index]))}else break}else{const O=Math.floor(Math.random()*pe.length),ee=pe[O];Y=ee.item,Q(ce=>new Set(ce).add(ee.index))}ae++}Y&&(H(Y),b&&b())},V=()=>{H(null),re(null),e===r.length-1?m.currentRound+1>d.totalRounds?t():g():t()};return p.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center animate-fade-in",children:[p.jsxs(Cn,{className:"w-full max-w-lg min-h-[24rem] flex flex-col justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"mb-2",children:p.jsxs("p",{className:"text-sm text-gray-500",children:["Ronda ",m.currentRound," de ",d.totalRounds]})}),p.jsx("p",{className:"text-lg text-gray-400",children:"Turno de:"}),p.jsx("h2",{className:"text-4xl font-bold my-4 text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400",children:X})]}),j?p.jsxs("div",{className:"animate-fade-in",children:[p.jsx("h3",{className:"text-2xl font-bold mb-6 text-cyan-400 capitalize",children:U}),p.jsx("p",{className:"text-xl md:text-2xl leading-relaxed",children:D(j.text)}),p.jsxs("div",{className:"mt-6 flex flex-col items-center gap-2",children:[p.jsxs(Ie,{onClick:M,variant:"secondary",className:"text-sm px-4 py-2",disabled:I.isAdLoading||I.isAdPlaying,children:["🔄 Cambiar ",U]}),p.jsxs("p",{className:"text-xs text-gray-500",children:["Cambios restantes antes del anuncio: ",kt.getQuestionChangeThreshold()-I.changesCount%kt.getQuestionChangeThreshold()]}),(I.isAdLoading||I.isAdPlaying)&&p.jsx("p",{className:"text-xs text-yellow-400",children:I.isAdLoading?"Cargando anuncio...":"Reproduciendo anuncio..."})]})]}):p.jsxs("div",{className:"animate-fade-in",children:[p.jsx("h3",{className:"text-2xl font-bold mb-6",children:"¿Verdad o Reto?"}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(Ie,{onClick:()=>P("pregunta"),className:"w-full sm:w-auto",children:"Pregunta"}),p.jsx(Ie,{onClick:()=>P("reto"),variant:"secondary",className:"w-full sm:w-auto",children:"Reto"})]})]}),p.jsx("div",{className:"mt-8",children:j&&p.jsx(Ie,{onClick:V,children:"Siguiente Jugador"})})]}),p.jsx("button",{onClick:i,className:"mt-6 text-sm text-gray-500 hover:text-gray-300 transition",children:"Empezar nuevo juego"})]})},_D=({onSelectRounds:r,onBack:e})=>{const t=[{value:5,label:"5 Rondas",description:"Partida rápida (15-20 min)"},{value:10,label:"10 Rondas",description:"Partida estándar (30-40 min)"},{value:15,label:"15 Rondas",description:"Partida larga (45-60 min)"}];return p.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:p.jsxs(Cn,{className:"w-full max-w-2xl text-center",children:[p.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Configurar Partida"}),p.jsx("p",{className:"text-gray-400 mb-8",children:"Elige cuántas rondas quieres jugar"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:t.map(i=>p.jsxs("div",{className:"relative p-6 rounded-lg border border-gray-600 bg-gray-800/50 hover:border-purple-500 transition-all duration-200 cursor-pointer group",onClick:()=>r(i.value),children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:i.value}),p.jsx("div",{className:"text-lg font-semibold text-white mb-2",children:i.label}),p.jsx("div",{className:"text-sm text-gray-400",children:i.description})]}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]},i.value))}),p.jsx("div",{className:"text-sm text-gray-500 mb-6",children:"💡 Al final de cada ronda se mostrará un anuncio breve"}),p.jsx("div",{className:"flex gap-4 justify-center",children:p.jsx(Ie,{onClick:e,variant:"secondary",className:"px-6",children:"Volver"})})]})})},Eb=({dataAdSlot:r,className:e,style:t,fallbackContent:i,timeout:o=5e3,admobConfig:c,hasNoAds:d=!1})=>{const[m,g]=$.useState("loading"),[_,w]=$.useState(!1),[b,A]=$.useState(!1);return $.useEffect(()=>{let I,j=null,H=!0;return(async()=>{if(d){H&&w(!0);return}try{I=setTimeout(()=>{H&&m==="loading"&&(console.warn("Ad loading timeout reached"),g("timeout"),w(!0))},o);const re=hn.isNativePlatform();if(A(re),re&&c)try{await xi.initialize({...c,bannerAdUnitId:r}),await xi.showBannerAd(),H&&(g("loaded"),clearTimeout(I));return}catch(se){console.warn("AdMob failed:",se),H&&(g("error"),w(!0),clearTimeout(I));return}if(typeof window<"u"&&!re){let se=0;const ie=10,fe=()=>{if(H)if(window.adsbygoogle||se>=ie)try{(window.adsbygoogle=window.adsbygoogle||[]).push({}),setTimeout(()=>{if(H){if(j=document.querySelector(`[data-ad-slot="${r}"]`),j){const de=j.innerHTML;de&&de.trim()!==""?g("loaded"):(g("error"),w(!0))}else g("error"),w(!0);clearTimeout(I)}},2e3)}catch(de){console.error("Error loading AdSense ad:",de),H&&(g("error"),w(!0),clearTimeout(I))}else se++,setTimeout(fe,200)};fe()}else re&&!c&&(console.warn("Native platform detected but no AdMob config provided"),H&&(g("error"),w(!0),clearTimeout(I)))}catch(re){console.error("Error in ad loading process:",re),H&&(g("error"),w(!0),clearTimeout(I))}})(),()=>{H=!1,I&&clearTimeout(I),b&&m==="loaded"&&xi.removeBannerAd().catch(console.error)}},[r,o,c,d]),_?p.jsx("div",{className:`ad-fallback ${e||""}`,style:t,children:i||p.jsx("div",{className:"ad-fallback-message"})}):p.jsxs("div",{className:`ad-container ${e||""}`,style:t,children:[m==="loading"&&p.jsx("div",{className:"ad-loading",children:p.jsx("div",{className:"loading-spinner"})}),p.jsx("ins",{className:"adsbygoogle",style:{display:m==="loaded"?"block":"none",textAlign:"center",width:"100%",height:"auto"},"data-ad-client":"ca-pub-XXXXXXXXXXXXXXXX","data-ad-slot":r,"data-ad-format":"auto","data-full-width-responsive":"true"})]})},vD=({roundStats:r,currentRound:e,totalRounds:t,onContinue:i,onEndGame:o,hasNoAds:c=!1})=>{var j;const[d,m]=$.useState(!1),[g,_]=$.useState(!1),[w,b]=$.useState(5);$.useEffect(()=>{let H=!0;const U=async()=>{try{await xi.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),m(!0);const fe=await xi.showInterstitial();H&&(_(!0),console.log("Anuncio intersticial mostrado:",fe))}catch(fe){console.warn("Fallo al mostrar anuncio nativo:",fe),H&&(m(!0),_(!0))}},re=!c&&kt.shouldShowAdInRoundEnd();if(re&&hn.isNativePlatform())return U(),()=>{H=!1};if(!re){m(!0),_(!0);return}const se=setTimeout(()=>{m(!0)},800);let ie;return d&&!g&&(ie=setInterval(()=>{b(fe=>fe<=1?(_(!0),ie&&clearInterval(ie),0):fe-1)},1e3)),()=>{clearTimeout(se),ie&&clearInterval(ie)}},[c,d,g]);const A=e>=t,I=hn.isNativePlatform();return p.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:p.jsxs(Cn,{className:"w-full max-w-2xl text-center",children:[p.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-green-500 to-blue-500",children:A?"¡Partida Completada!":`¡Ronda ${r.roundNumber} Completada!`}),!A&&p.jsxs("p",{className:"text-gray-400 mb-6",children:["Ronda ",e," de ",t]}),p.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-6",children:[p.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Estadísticas de la Ronda"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-2xl font-bold text-blue-400",children:r.questionsAsked}),p.jsx("div",{className:"text-sm text-gray-400",children:"Preguntas"})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-2xl font-bold text-purple-400",children:r.daresCompleted}),p.jsx("div",{className:"text-sm text-gray-400",children:"Retos"})]})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Jugadores participantes:"}),p.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:((j=r.playersParticipated)==null?void 0:j.map((H,U)=>p.jsx("span",{className:"px-3 py-1 bg-purple-600 text-white rounded-full text-sm",children:H},U)))||p.jsx("span",{className:"text-gray-400 text-sm",children:"No hay jugadores registrados"})})]})]}),!c&&p.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[p.jsxs("div",{className:"text-center mb-4",children:[p.jsx("div",{className:"text-lg font-semibold mb-2",children:"📺 Anuncio"}),g?p.jsx("div",{className:"text-green-400 mb-4",children:"✅ Anuncio completado"}):p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",I?"":`${w}s`]}),!I&&p.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:p.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-w)/5*100}%`}})})]})]}),!I&&p.jsx(Eb,{dataAdSlot:"1234567890",className:"round-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},hasNoAds:c,fallbackContent:p.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),p.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:A?p.jsx(Ie,{onClick:o,className:"px-8 py-3 text-lg",disabled:!c&&!g,children:"Ver Resultados Finales"}):p.jsxs(p.Fragment,{children:[p.jsx(Ie,{onClick:o,variant:"secondary",className:"px-6",disabled:!c&&!g,children:"Terminar Partida"}),p.jsx(Ie,{onClick:i,className:"px-8 py-3 text-lg",disabled:!c&&!g,children:"Siguiente Ronda"})]})}),!g&&p.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Los botones se habilitarán cuando termine el anuncio"})]})})},ED=({gameStats:r,players:e,onNewGame:t,onBackToMenu:i,hasNoAds:o=!1,isDemoMode:c=!1,demoPackId:d=null})=>{const m=r.gameEndTime&&r.gameStartTime?Math.round((r.gameEndTime.getTime()-r.gameStartTime.getTime())/1e3/60):0,g=r.totalRounds>0?Math.round(r.totalQuestions/r.totalRounds):0,_=r.totalRounds>0?Math.round(r.totalDares/r.totalRounds):0,[w,b]=$.useState(!1),[A,I]=$.useState(!1),[j,H]=$.useState(5),U=hn.isNativePlatform();return $.useEffect(()=>{vi.trackGameEnd("mixed","Juego Mixto",r.totalRounds,m)},[]),$.useEffect(()=>{let re=!0;const se=async()=>{try{await xi.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),I(!0);const X=await xi.showInterstitial();re&&(b(!0),console.log("Anuncio intersticial al final de partida mostrado:",X))}catch(X){console.warn("Error mostrando anuncio al final de partida:",X),re&&(I(!0),b(!0))}},ie=!o&&kt.shouldShowAdInGameEnd();if(ie&&U)return se(),()=>{re=!1};if(!ie){b(!0),I(!0);return}const fe=setTimeout(()=>I(!0),800);let de;return A&&!w&&(de=setInterval(()=>{H(X=>X<=1?(b(!0),de&&clearInterval(de),0):X-1)},1e3)),()=>{clearTimeout(fe),de&&clearInterval(de)}},[o,U,A,w]),p.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:p.jsxs(Cn,{className:"w-full max-w-4xl text-center",children:[p.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500",children:"🎉 ¡Partida Finalizada! 🎉"}),p.jsx("p",{className:"text-gray-400 mb-8 text-base sm:text-lg",children:"¡Esperamos que se hayan divertido mucho!"}),!o&&p.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[p.jsxs("div",{className:"text-center mb-4",children:[p.jsx("div",{className:"text-lg font-semibold mb-2",children:"📺 Anuncio"}),w?p.jsx("div",{className:"text-green-400 mb-4",children:"✅ Anuncio completado"}):p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",U?"":`${j}s`]}),!U&&p.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:p.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-j)/5*100}%`}})})]})]}),!U&&p.jsx(Eb,{dataAdSlot:"1234567890",className:"game-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},hasNoAds:o,fallbackContent:p.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[p.jsxs("div",{className:"bg-gradient-to-br from-blue-600/20 to-blue-800/20 rounded-lg p-6 border border-blue-500/30",children:[p.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-blue-400 mb-2",children:r.totalRounds}),p.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Rondas Jugadas"}),p.jsxs("div",{className:"text-sm text-gray-400",children:[m," minutos"]})]}),p.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-purple-800/20 rounded-lg p-6 border border-purple-500/30",children:[p.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-purple-400 mb-2",children:r.totalQuestions}),p.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Preguntas"}),p.jsxs("div",{className:"text-sm text-gray-400",children:[g," por ronda"]})]}),p.jsxs("div",{className:"bg-gradient-to-br from-pink-600/20 to-pink-800/20 rounded-lg p-6 border border-pink-500/30",children:[p.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-pink-400 mb-2",children:r.totalDares}),p.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Retos"}),p.jsxs("div",{className:"text-sm text-gray-400",children:[_," por ronda"]})]})]}),p.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[p.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Jugadores Participantes"}),p.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:e.map((re,se)=>p.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full",children:[p.jsx("span",{className:"text-lg",children:"🎮"}),p.jsx("span",{className:"font-medium",children:re})]},se))})]}),r.roundStats.length>0&&p.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[p.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Resumen por Rondas"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.roundStats.map((re,se)=>{var ie;return p.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 border border-gray-600",children:[p.jsxs("div",{className:"text-base sm:text-lg font-semibold text-purple-400 mb-2",children:["Ronda ",re.roundNumber]}),p.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[p.jsxs("div",{children:["📝 ",re.questionsAsked," preguntas"]}),p.jsxs("div",{children:["🎯 ",re.daresCompleted," retos"]}),p.jsxs("div",{children:["👥 ",((ie=re.playersParticipated)==null?void 0:ie.length)||0," jugadores"]})]})]},se)})})]}),c?p.jsxs("div",{className:"bg-gradient-to-r from-yellow-600/20 to-orange-600/20 rounded-lg p-6 mb-8 border border-yellow-500/30",children:[p.jsx("div",{className:"text-3xl mb-3",children:"🎮✨"}),p.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"¡Demo Completado!"}),p.jsx("p",{className:"text-gray-300 mb-4",children:"¿Te gustó este pack? ¡Hay muchas más preguntas y retos esperándote!"}),p.jsxs("div",{className:"bg-yellow-500/10 rounded-lg p-4 border border-yellow-500/30",children:[p.jsx("p",{className:"text-yellow-200 font-medium mb-2",children:"💡 ¿Sabías que?"}),p.jsx("p",{className:"text-gray-300 text-sm",children:"El pack completo incluye más de 50 preguntas y retos únicos, ¡perfectos para cualquier ocasión!"})]}),p.jsx("div",{className:"mt-4",children:p.jsx(Ie,{onClick:i,className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-semibold rounded-lg",children:"🛒 ¡Ir a la Tienda!"})})]}):p.jsxs("div",{className:"bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-lg p-6 mb-8 border border-purple-500/30",children:[p.jsx("div",{className:"text-2xl mb-2",children:"🌟"}),p.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"¡Gracias por jugar!"}),p.jsx("p",{className:"text-gray-300",children:"Esperamos que hayan creado recuerdos increíbles. ¡No olviden compartir sus mejores momentos!"})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(Ie,{onClick:t,className:"px-8 py-3 text-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",disabled:!o&&!w,children:"🎮 Nueva Partida"}),p.jsx(Ie,{onClick:i,variant:"secondary",className:"px-8 py-3 text-lg",disabled:!o&&!w,children:"🏠 Menú Principal"})]}),p.jsxs("div",{className:"mt-8 text-xs text-gray-500",children:[p.jsx("p",{children:"¿Te gustó el juego? ¡Compártelo con tus amigos!"}),p.jsx("p",{className:"mt-1",children:"Verdad o Reto - La diversión nunca termina"})]})]})})},CE=["PUTO","PUTA","MIERDA","JODER","COÑO","CABRON","CABRONA","PENDEJO","PENDEJA","IDIOTA","ESTUPIDO","ESTUPIDA","TONTO","TONTA","IMBECIL","GILIPOLLAS","HIJO","HIJA","MADRE","PADRE","MAMA","PAPA","SEXO","PORNO","XXX","NAZI","HITLER","MUERTE","MATAR","SUICIDIO","DROGA","DROGAS","MARICON","MARICA","GAY","LESBIANA","TRANS","HOMO","HETERO","NEGRO","BLANCO","CHINO","JUDIO","MUSULMAN","CRISTIANO","GORDO","GORDA","FEO","FEA","FLACOS","FLACA","FUCK","SHIT","BITCH","DAMN","HELL","ASS","ASSHOLE","BASTARD","STUPID","IDIOT","MORON","RETARD","DUMB","LOSER","FREAK","SEX","PORN","XXX","NUDE","NAKED","BOOBS","PENIS","VAGINA","NAZI","HITLER","KILL","DIE","DEATH","SUICIDE","DRUG","DRUGS","FAG","FAGGOT","HOMO","LESBIAN","TRANS","QUEER","BLACK","WHITE","ASIAN","JEWISH","MUSLIM","CHRISTIAN","FAT","UGLY","SKINNY","GROSS","DISGUSTING","WTF","OMFG","STFU","GTFO","LMAO","ROFL","ADMIN","MODERATOR","OWNER","STAFF","SUPPORT","VERDAD","RETO","GAME","JUEGO","APP","OFICIAL","666","420","69","88","1488","NULL","UNDEFINED","ERROR","ADMIN","ROOT","SYSTEM","DELETE","DROP","TRUNCATE","ALTER","CREATE"],wD=[/^\d+$/,/^[A-Z]\1{5}$/,/^(.)\1{2,}/,/^[0O1IL]{6}$/,/^(ABC|123|XYZ|QWE|ASD|ZXC)/],fg=r=>{if(!r||typeof r!="string")return!1;const e=r.toUpperCase().trim();if(e.length!==6||CE.includes(e))return!1;for(const d of CE)if(e.includes(d))return!1;for(const d of wD)if(d.test(e))return!1;const t="AEIOU",i="BCDFGHJKLMNPQRSTVWXYZ",o=e.split("").every(d=>t.includes(d)),c=e.split("").every(d=>i.includes(d));return!(o||c)},NE=(r=[])=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t=0;const i=1e3;for(;t<i;){let m="";for(let g=0;g<6;g++)m+=e.charAt(Math.floor(Math.random()*e.length));if(fg(m)&&!r.includes(m))return m;t++}const o=Date.now().toString(36).toUpperCase(),c=Math.random().toString(36).substring(2,4).toUpperCase(),d=(o+c).substring(0,6).padEnd(6,"0");return fg(d)?d:"REF001"},wb=r=>{if(!r||typeof r!="string")return{isValid:!1,error:"El código de referido es requerido"};const e=r.toUpperCase().trim().replace(/[^A-Z0-9]/g,"");return e.length!==6?{isValid:!1,error:"El código de referido debe tener exactamente 6 caracteres"}:fg(e)?{isValid:!0,sanitizedCode:e}:{isValid:!1,error:"El código de referido contiene contenido inapropiado o no válido"}},TD=async()=>{try{const r=tt(Ce,"users"),e=await gt(r),t=[];return e.forEach(i=>{const o=i.data();o.referralCode&&t.push(o.referralCode)}),t}catch(r){return console.error("Error getting existing referral codes:",r),[]}},bD=async r=>{try{const e=tt(Ce,"users"),t=St(e,$e("referralCode","==",r));return!(await gt(t)).empty}catch(e){return console.error("Error checking referral code existence:",e),!1}},SD=async()=>{try{const r=await TD();return NE(r)}catch(r){return console.error("Error generating unique referral code:",r),NE([])}},Ep=async(r,e)=>{try{const t=Wt(Ce,"users",r.uid);if(!(await Kr(t)).exists()){const o=await SD();let c={};if(e){const g=wb(e);g.isValid&&g.sanitizedCode?await bD(g.sanitizedCode)?c={usedReferralCode:g.sanitizedCode,referralProcessedAt:new Date}:console.warn("Referral code does not exist:",g.sanitizedCode):console.warn("Invalid referral code provided:",e,g.error)}const d={uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,isAnonymous:r.isAnonymous,emailVerified:r.emailVerified,referralCode:o,referralCount:0,createdAt:new Date,lastLoginAt:new Date,migrationVersion:"1.0",usedReferralCode:null,referredBy:null,referralProcessedAt:null,lastKnownIP:null,deviceId:null,acceptedSuggestions:0,...c};await Rc(t,d);const m=Wt(Ce,"userReferralCodes",r.uid);await Rc(m,{referralCode:o,displayName:r.displayName||r.email||"Usuario",createdAt:new Date})}}catch(t){console.error("Error creating user profile:",t)}},$o=r=>({uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,isAnonymous:r.isAnonymous,emailVerified:r.emailVerified}),Tb=async r=>{try{const e=await o2(_r,yb);return await Ep(e.user,r),$o(e.user)}catch(e){throw console.error("Error al iniciar sesión con Google:",e),new Error(e.message||"Error al iniciar sesión con Google")}},bb=async(r,e)=>{try{const t=await kN(_r,r,e);return $o(t.user)}catch(t){throw console.error("Error al iniciar sesión:",t),new Error(Tp(t.code))}},Sb=async(r,e,t,i)=>{try{const o=await MN(_r,r,e);return t&&await jN(o.user,{displayName:t}),await Ep(o.user,i),await sb(o.user),$o(o.user)}catch(o){throw console.error("Error al registrarse:",o),new Error(Tp(o.code))}},Ab=async()=>{try{const r=await CN(_r);return await Ep(r.user),$o(r.user)}catch(r){throw console.error("Error al iniciar sesión anónima:",r),new Error("Error al iniciar sesión anónima")}},xb=async()=>{try{await qN(_r)}catch(r){throw console.error("Error al cerrar sesión:",r),new Error("Error al cerrar sesión")}},Rb=async r=>{try{await PN(_r,r)}catch(e){throw console.error("Error al enviar email de restablecimiento:",e),new Error(Tp(e.code))}},Ib=async()=>{try{if(_r.currentUser)await sb(_r.currentUser);else throw new Error("No hay usuario autenticado")}catch(r){throw console.error("Error al reenviar verificación:",r),new Error("Error al reenviar verificación de email")}},Cb=r=>zN(_r,e=>{r(e?$o(e):null)}),wp=()=>_r.currentUser?$o(_r.currentUser):null,mg=()=>{const r=wp();return r!==null&&!r.isAnonymous&&r.emailVerified},Tp=r=>{switch(r){case"auth/user-not-found":return"No existe una cuenta con este email";case"auth/wrong-password":return"Contraseña incorrecta";case"auth/email-already-in-use":return"Ya existe una cuenta con este email";case"auth/weak-password":return"La contraseña debe tener al menos 6 caracteres";case"auth/invalid-email":return"Email inválido";case"auth/too-many-requests":return"Demasiados intentos fallidos. Intenta más tarde";case"auth/network-request-failed":return"Error de conexión. Verifica tu internet";default:return"Error de autenticación. Intenta nuevamente"}},AD=Object.freeze(Object.defineProperty({__proto__:null,canPurchase:mg,getCurrentUser:wp,logout:xb,onAuthStateChange:Cb,registerWithEmail:Sb,resendEmailVerification:Ib,resetPassword:Rb,signInAnonymous:Ab,signInWithEmail:bb,signInWithGoogle:Tb},Symbol.toStringTag,{value:"Module"})),xD=()=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let t=0;t<6;t++)e+=r.charAt(Math.floor(Math.random()*r.length));return e},RD=async r=>{try{const e=tt(Ce,"users"),t=St(e,$e("referralCode","==",r));return(await gt(t)).empty}catch(e){return console.error("Error verificando unicidad del código:",e),!1}},ID=async()=>{let r=0;const e=10;for(;r<e;){const t=xD();if(await RD(t))return t;r++}throw new Error("No se pudo generar un código único después de "+e+" intentos")},Nb=async r=>{try{if(!(r!=null&&r.uid)){console.warn("Usuario no válido para migración");return}const e=Wt(Ce,"users",r.uid),t=await Kr(e);if(!t.exists()){console.warn("Documento de usuario no encontrado:",r.uid);return}const i=t.data(),o={};let c=!1;if(!i.referralCode)try{const d=await ID();o.referralCode=d,c=!0,console.log("✅ Generando código de referido para usuario:",r.uid,"-",d)}catch(d){console.error("Error generando código de referido:",d),o.referralCode=`TEMP${Date.now().toString().slice(-6)}`,c=!0}if((i.referralCount===void 0||i.referralCount===null)&&(o.referralCount=0,c=!0),i.createdAt||(o.createdAt=new Date,c=!0),o.lastLoginAt=new Date,c=!0,i.usedReferralCode===void 0&&(o.usedReferralCode=null,c=!0),i.referredBy===void 0&&(o.referredBy=null,c=!0),i.referralProcessedAt===void 0&&(o.referralProcessedAt=null,c=!0),i.lastKnownIP===void 0&&(o.lastKnownIP=null,c=!0),i.deviceId===void 0&&(o.deviceId=null,c=!0),i.acceptedSuggestions===void 0&&(o.acceptedSuggestions=0,c=!0),i.deviceId===void 0&&(o.deviceId=null,c=!0),i.autoMigratedAt||(o.autoMigratedAt=new Date,o.migrationVersion=i.migrationVersion||"1.0",c=!0),c){if(await op(e,o),o.referralCode)try{const d=Wt(Ce,"userReferralCodes",r.uid);await Rc(d,{referralCode:o.referralCode,displayName:i.displayName||i.email||"Usuario",createdAt:i.createdAt||o.createdAt||new Date}),console.log("✅ Documento de código de referido creado para:",r.uid)}catch(d){console.error("Error creando documento de código de referido:",d)}console.log("✅ Usuario migrado automáticamente:",r.uid)}}catch(e){console.error("Error en migración automática de usuario:",e)}},Db=$.createContext(void 0),CD=({children:r})=>{const[e,t]=$.useState({user:null,isLoading:!0,isAuthenticated:!1});$.useEffect(()=>{const m=Cb(async g=>{if(g&&!g.isAnonymous&&g.uid)try{await Nb(g)}catch(_){console.error("Error durante la migración automática del usuario:",_)}t({user:g,isLoading:!1,isAuthenticated:g!==null&&!g.isAnonymous})});return()=>m()},[]);const d={...e,login:()=>{},logout:async()=>{try{const{logout:m}=await _b(async()=>{const{logout:g}=await Promise.resolve().then(()=>AD);return{logout:g}},void 0,import.meta.url);await m()}catch(m){console.error("Error al cerrar sesión:",m)}},refreshUser:()=>{const m=wp();t(g=>({...g,user:m,isAuthenticated:m!==null&&!m.isAnonymous}))}};return p.jsx(Db.Provider,{value:d,children:r})},Vi=()=>{const r=$.useContext(Db);if(r===void 0)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return r},Pi={PURCHASED_PACKS:"verdad_reto_purchased_packs",CACHED_GAME_ITEMS:"verdad_reto_cached_items",CACHED_CATEGORIES:"verdad_reto_cached_categories",CACHE_PERMISSION:"verdad_reto_cache_permission",LAST_SYNC:"verdad_reto_last_sync"},ND=()=>{const r=localStorage.getItem(Pi.CACHE_PERMISSION);if(r==="granted")return!0;if(r==="denied")return!1;const e=window.confirm(`¿Deseas permitir que la aplicación guarde los packs comprados localmente para poder jugar sin conexión?

Esto mejorará tu experiencia permitiéndote acceder a tus packs incluso sin internet.`);return localStorage.setItem(Pi.CACHE_PERMISSION,e?"granted":"denied"),e},Cc=()=>localStorage.getItem(Pi.CACHE_PERMISSION)==="granted",DD=async(r,e,t)=>{if(!Cc()){console.log("Cache permission not granted, skipping cache");return}try{const i={pack:r,gameData:{items:e,categories:t,timestamp:Date.now()},timestamp:Date.now()},o=bp();o[r.id]=i,localStorage.setItem(Pi.PURCHASED_PACKS,JSON.stringify(o)),localStorage.setItem(Pi.LAST_SYNC,Date.now().toString()),console.log(`Pack ${r.name} cached successfully`)}catch(i){console.error("Error caching pack:",i)}},bp=()=>{try{const r=localStorage.getItem(Pi.PURCHASED_PACKS);return r?JSON.parse(r):{}}catch(r){return console.error("Error reading cached packs:",r),{}}},OD=r=>{if(!Cc())return null;try{const e=bp(),t=[],i=[];for(const o of r){const c=e[o];c&&(t.push(...c.gameData.items),i.push(...c.gameData.categories))}return t.length===0?null:{items:t,categories:[...new Set(i)]}}catch(e){return console.error("Error reading cached game data:",e),null}},PD=()=>{Object.values(Pi).forEach(r=>{localStorage.removeItem(r)}),console.log("Cache cleared successfully")},Ob=()=>{const r=bp(),e=localStorage.getItem(Pi.LAST_SYNC);return{hasPermission:Cc(),packsCount:Object.keys(r).length,lastSync:e?new Date(parseInt(e)):null,packs:Object.keys(r)}};var Pb="basil",MD=function(e){return e===3?"v3":e},Mb="https://js.stripe.com",kD="".concat(Mb,"/").concat(Pb,"/stripe.js"),VD=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,jD=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var LD=function(e){return VD.test(e)||jD.test(e)},UD=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Mb,'"]')),t=0;t<e.length;t++){var i=e[t];if(LD(i.src))return i}return null},DE=function(e){var t="",i=document.createElement("script");i.src="".concat(kD).concat(t);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(i),i},zD=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})},tc=null,Ed=null,wd=null,qD=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},BD=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},HD=function(e){return tc!==null?tc:(tc=new Promise(function(t,i){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var o=UD();if(!(o&&e)){if(!o)o=DE(e);else if(o&&wd!==null&&Ed!==null){var c;o.removeEventListener("load",wd),o.removeEventListener("error",Ed),(c=o.parentNode)===null||c===void 0||c.removeChild(o),o=DE(e)}}wd=BD(t,i),Ed=qD(i),o.addEventListener("load",wd),o.addEventListener("error",Ed)}catch(d){i(d);return}}),tc.catch(function(t){return tc=null,Promise.reject(t)}))},FD=function(e,t,i){if(e===null)return null;var o=t[0],c=o.match(/^pk_test/),d=MD(e.version),m=Pb;c&&d!==m&&console.warn("Stripe.js@".concat(d," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(m,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var g=e.apply(void 0,t);return zD(g,i),g},nc,kb=!1,Vb=function(){return nc||(nc=HD(null).catch(function(e){return nc=null,Promise.reject(e)}),nc)};Promise.resolve().then(function(){return Vb()}).catch(function(r){kb||console.warn(r)});var GD=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];kb=!0;var o=Date.now();return Vb().then(function(c){return FD(c,t,o)})};const QD="pk_live_51S2dpMEamlsERKowyMSm4kgm11dMknJLyZGy9gZsIBBd3BQo3l9Vnn0TYKWcmuDtnq23YEsHo7FL69hGEM3UAboz00Onx53LCm";let zm=null;const KD=()=>(zm||(zm=GD(QD)),zm),jb=async()=>{try{const r=await Kr(Wt(Ce,"config","stripe"));return r.exists()?r.data():null}catch(r){return console.error("Error obteniendo configuración de Stripe:",r),null}},YD=async(r,e,t)=>{try{if(!r.isPremium)throw new Error("Este pack no requiere pago");const i=await jb();if(!i)throw new Error("Configuración de Stripe no disponible");const o=r.priceAmount||0,c=r.originalPriceAmount||r.priceAmount||0;console.log("Creando sesión de checkout:",{packId:r.id,originalAmount:c,finalAmount:o,hasDiscount:r.hasDiscount,discountReason:r.discountReason});const d=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packId:r.id,priceId:r.stripePriceId,userEmail:e,userId:t,successUrl:`${window.location.origin}${i.successUrl}&pack=${r.id}`,cancelUrl:`${window.location.origin}${i.cancelUrl}`,hasDiscount:r.hasDiscount,finalAmount:o,originalAmount:c,discountReason:r.discountReason})});if(!d.ok){const g=await d.json();throw new Error(g.error||"Error creando sesión de pago")}const m=await d.json();return{sessionId:m.id,url:m.url}}catch(i){throw console.error("Error creando sesión de checkout:",i),i}},XD=async(r,e,t)=>{try{const i=await KD();if(!i)throw new Error("Stripe no está disponible");const o=await YD(r,e,t);if(!o)throw new Error("No se pudo crear la sesión de pago");await $D({userId:t,packId:r.id,stripeSessionId:o.sessionId,purchaseDate:new Date,amount:r.priceAmount||0,currency:r.currency||"EUR",status:"pending",email:e});const{error:c}=await i.redirectToCheckout({sessionId:o.sessionId});if(c)throw new Error(c.message)}catch(i){throw console.error("Error redirigiendo a checkout:",i),i}},$D=async r=>{try{return(await Hc(tt(Ce,"userPurchases"),{...r,purchaseDate:r.purchaseDate.toISOString()})).id}catch(e){throw console.error("Error guardando compra pendiente:",e),e}},WD=async r=>{try{const e=St(tt(Ce,"userPurchases"),$e("userId","==",r),$e("status","==","completed"));return(await gt(e)).docs.map(i=>({id:i.id,...i.data(),purchaseDate:new Date(i.data().purchaseDate)}))}catch(e){return console.error("Error obteniendo compras del usuario:",e),[]}},OE=async r=>{try{return(await WD(r)).map(t=>t.packId)}catch(e){return console.error("Error obteniendo packs comprados:",e),[]}},ZD=({onClose:r})=>{const[e,t]=$.useState(null),[i,o]=$.useState(!1);$.useEffect(()=>{c()},[]);const c=()=>{const g=Ob();t(g)},d=async()=>{o(!0);try{ND()&&c()}finally{o(!1)}},m=()=>{window.confirm("¿Estás seguro de que quieres eliminar todos los datos guardados localmente?")&&(PD(),c())};return e?p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h2",{className:"text-xl font-bold",children:"Almacenamiento Local"}),p.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Estado del Caché"}),p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Permiso:"}),p.jsx("span",{className:`font-medium ${e.hasPermission?"text-green-600":"text-red-600"}`,children:e.hasPermission?"Activado":"Desactivado"})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Packs guardados:"}),p.jsx("span",{className:"font-medium",children:e.packsCount})]}),e.lastSync&&p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Última sincronización:"}),p.jsxs("span",{className:"font-medium text-xs",children:[e.lastSync.toLocaleDateString()," ",e.lastSync.toLocaleTimeString()]})]})]})]}),e.packsCount>0&&p.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Packs Disponibles Sin Conexión"}),p.jsx("div",{className:"space-y-1 text-sm",children:e.packs.map(g=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),p.jsx("span",{className:"capitalize",children:g.replace("-"," ")})]},g))})]}),p.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"¿Qué es el almacenamiento local?"}),p.jsx("p",{className:"text-sm text-gray-700",children:"Permite guardar los packs que compres en tu dispositivo para poder jugar sin conexión a internet. Los datos se mantienen seguros en tu navegador."})]}),p.jsxs("div",{className:"flex flex-col space-y-2",children:[e.hasPermission?p.jsx("div",{className:"text-center text-green-600 font-medium",children:"✓ Almacenamiento local activado"}):p.jsx(Ie,{onClick:d,disabled:i,className:"w-full bg-green-600 hover:bg-green-700",children:i?"Procesando...":"Activar Almacenamiento Local"}),e.packsCount>0&&p.jsx(Ie,{onClick:m,className:"w-full bg-red-600 hover:bg-red-700",children:"Limpiar Datos Guardados"}),p.jsx(Ie,{onClick:r,className:"w-full bg-gray-600 hover:bg-gray-700",children:"Cerrar"})]})]})]})}):p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:p.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:p.jsx("div",{className:"text-center",children:"Cargando información del caché..."})})})},JD=({pack:r,onBack:e,onSuccess:t})=>{const{user:i}=Vi(),[o,c]=$.useState(!1),[d,m]=$.useState(null),[g,_]=$.useState(null);$.useEffect(()=>{(async()=>{try{const I=await jb();_(I)}catch{m("Error cargando configuración de pago")}})()},[]);const w=async()=>{if(!i||!i.email){m("Debes estar autenticado para realizar una compra");return}if(!r.isPremium){m("Este pack no requiere pago");return}c(!0),m(null);try{await XD(r,i.email,i.uid),t&&t()}catch(A){m(A.message||"Error procesando el pago"),c(!1)}},b=(A,I)=>new Intl.NumberFormat("es-ES",{style:"currency",currency:I.toUpperCase()}).format(A/100);return g?p.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"w-full max-w-md",children:[p.jsxs("div",{className:"relative text-center mb-8",children:[p.jsx("button",{onClick:e,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:p.jsx(UE,{className:"w-8 h-8"})}),p.jsx("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Checkout"})]}),p.jsxs(Cn,{className:"p-6",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("div",{className:"text-6xl mb-4",children:r.icon}),p.jsx("h2",{className:"text-2xl font-bold text-cyan-400 mb-2",children:r.name}),p.jsx("p",{className:"text-gray-400 mb-4",children:r.description}),r.priceAmount&&r.currency&&p.jsxs("div",{className:"bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-lg p-4 mb-4",children:[p.jsx("div",{className:"text-3xl font-bold text-white",children:b(r.priceAmount,r.currency)}),p.jsx("div",{className:"text-sm text-gray-300",children:"Pago único"})]})]}),p.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 mb-6",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(Io,{className:"w-5 h-5 text-green-400"}),p.jsx("span",{className:"text-green-400 font-semibold",children:"Pago seguro"})]}),p.jsx("p",{className:"text-sm text-gray-300",children:"Tu pago está protegido por Stripe. No almacenamos información de tarjetas de crédito."})]}),i&&p.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:[p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsx("strong",{children:"Cuenta:"})," ",i.displayName||i.email]}),p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsx("strong",{children:"Email:"})," ",i.email]})]}),d&&p.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6",children:p.jsx("p",{className:"text-red-200 text-sm",children:d})}),p.jsx(Ie,{onClick:w,disabled:o||!i,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:o?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Procesando..."]}):p.jsxs(p.Fragment,{children:[p.jsx(zE,{className:"w-5 h-5"}),"Pagar con Stripe"]})}),p.jsx("div",{className:"mt-4 text-center",children:p.jsx("p",{className:"text-xs text-gray-400",children:"Al continuar, aceptas nuestros términos de servicio y política de privacidad."})})]}),p.jsxs("div",{className:"mt-6 text-center",children:[p.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Métodos de pago aceptados:"}),p.jsxs("div",{className:"flex justify-center gap-2",children:[p.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Visa"}),p.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Mastercard"}),p.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"American Express"})]})]})]})}):p.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-400",children:"Cargando configuración de pago..."})]})})},e4=({availablePacks:r,purchasedPacks:e,onPurchase:t,onBack:i,onGoToLogin:o})=>{const{user:c,isAuthenticated:d}=Vi(),[m,g]=$.useState(!1),[_,w]=$.useState(!1),[b,A]=$.useState(!1),[I,j]=$.useState(null),[H,U]=$.useState([]),[re,se]=$.useState(!1);$.useEffect(()=>{(async()=>{if(c&&d){se(!0);try{const D=await OE(c.uid);U(D)}catch(D){console.error("Error cargando compras del usuario:",D)}finally{se(!1)}}else U([])})()},[c,d]);const ie=X=>{const D=r.find(x=>x.id===X);if(D){if(!D.isPremium||D.id==="base"){if(!mg()){g(!0),setTimeout(()=>g(!1),3e3);return}t(X);return}if(!mg()){g(!0),setTimeout(()=>g(!1),3e3);return}j(D),A(!0)}},fe=async()=>{if(A(!1),j(null),c&&d)try{const X=await OE(c.uid);U(X),I&&X.includes(I.id)&&t(I.id)}catch(X){console.error("Error actualizando compras:",X)}},de=()=>{A(!1),j(null)};return Ob(),p.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in pt-16",children:p.jsxs("div",{className:"w-full max-w-2xl",children:[p.jsxs("div",{className:"relative text-center mb-8",children:[p.jsx("button",{onClick:i,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:p.jsx(UE,{className:"w-8 h-8"})}),p.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Tienda de Paquetes"}),p.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(DA,{className:"w-4 h-4"}),c?p.jsx("span",{className:`${d?"text-green-400":"text-yellow-400"}`,children:d?`Conectado como ${c.displayName||c.email}`:"Usuario anónimo - Inicia sesión para comprar"}):p.jsx("span",{className:"text-gray-400",children:"No conectado"})]}),c&&d&&p.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:p.jsx("a",{href:"https://verdad-reto.es.eu.org/delete-account.html",target:"_blank",rel:"noopener noreferrer",className:"hover:text-red-400 transition-colors",children:"Eliminar cuenta"})})]})]}),m&&p.jsxs("div",{className:"mb-6 p-4 bg-yellow-500/20 border border-yellow-500 rounded-lg text-center",children:[p.jsx("p",{className:"text-yellow-100 mb-2",children:"Necesitas iniciar sesión y verificar tu email para comprar packs premium"}),o&&p.jsx(Ie,{onClick:o,className:"bg-yellow-600 hover:bg-yellow-700",children:"Ir a Iniciar Sesión"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(X=>{const D=e.includes(X.id),x=H.includes(X.id),C=D||x,P=X.id==="base",M=X.isPremium&&!P,V=M&&!C;return p.jsxs(Cn,{className:`flex flex-col text-center border-2 transition-all ${C?"border-green-500/50":V?"border-yellow-500/50 opacity-75":"border-transparent hover:border-pink-500/50"}`,children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"text-5xl mb-4",children:X.icon}),V&&p.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-500 rounded-full p-1",children:p.jsx(Io,{className:"w-4 h-4 text-black"})})]}),p.jsx("h2",{className:`text-2xl font-bold ${C?"text-green-400":V?"text-yellow-400":"text-cyan-400"}`,children:X.name}),p.jsx("p",{className:"text-gray-400 mt-2 mb-2 flex-grow",children:X.description}),M&&X.priceAmount&&X.currency&&p.jsxs("div",{className:"mb-4",children:[X.hasDiscount&&X.originalPriceAmount?p.jsxs("div",{className:"space-y-1",children:[p.jsx("div",{className:"text-sm text-gray-500 line-through",children:new Intl.NumberFormat("es-ES",{style:"currency",currency:X.currency.toUpperCase()}).format(X.originalPriceAmount/100)}),p.jsx("div",{className:`text-lg font-bold ${C?"text-green-400":"text-red-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:X.currency.toUpperCase()}).format(X.priceAmount/100)}),p.jsx("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:X.discountPercentage?`-${X.discountPercentage}%`:`-${new Intl.NumberFormat("es-ES",{style:"currency",currency:X.currency.toUpperCase()}).format((X.originalPriceAmount-X.priceAmount)/100)}`}),X.discountReason&&p.jsx("div",{className:"text-xs text-yellow-400 italic",children:X.discountReason})]}):p.jsx("div",{className:`text-lg font-bold ${C?"text-green-400":"text-yellow-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:X.currency.toUpperCase()}).format(X.priceAmount/100)}),p.jsx("div",{className:"text-xs text-gray-500",children:"Pago único"})]}),C?p.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-green-700 text-green-200",children:"✓ Comprado"}):P?p.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-blue-700 text-blue-200",children:"Incluido"}):M?p.jsx(Ie,{onClick:()=>ie(X.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",disabled:re,children:re?p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):p.jsxs(p.Fragment,{children:[p.jsx(zE,{className:"w-4 h-4"}),"Comprar ",X.price]})}):p.jsxs(Ie,{onClick:()=>ie(X.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2",children:[p.jsx(Io,{className:"w-4 h-4"}),"Desbloquear (",X.price,")"]})]},X.id)})}),_&&p.jsx(ZD,{onClose:()=>w(!1)}),b&&I&&p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:p.jsx("div",{className:"w-full h-full",children:p.jsx(JD,{pack:I,onBack:de,onSuccess:fe})})})]})})},t4=r=>{var t;if(!r.hasDiscount||!r.priceAmount)return r;if(r.discountValidUntil&&new Date>r.discountValidUntil)return{...r,hasDiscount:!1};let e=r.priceAmount;return r.discountPercentage?e=r.priceAmount*(1-r.discountPercentage/100):r.discountAmount&&(e=r.priceAmount-r.discountAmount),e=Math.max(0,Math.round(e)),{...r,originalPriceAmount:r.priceAmount,priceAmount:e,price:new Intl.NumberFormat("es-ES",{style:"currency",currency:((t=r.currency)==null?void 0:t.toUpperCase())||"EUR"}).format(e/100)}},Sp=async()=>{try{const r=tt(Ce,"packs"),e=await gt(r);return e.empty?(console.warn("No packs found in Firebase database"),[]):e.docs.map(o=>{const c=o.data();return{id:o.id,name:c.name,description:c.description,price:c.price,icon:c.icon,isActive:c.isActive??!0,priceAmount:c.priceAmount,currency:c.currency,isPremium:c.isPremium??!1,stripeProductId:c.stripeProductId,stripePriceId:c.stripePriceId,hasDiscount:c.hasDiscount??!1,discountPercentage:c.discountPercentage,discountAmount:c.discountAmount,discountReason:c.discountReason,discountValidUntil:c.discountValidUntil?c.discountValidUntil.toDate():void 0,originalPriceAmount:c.originalPriceAmount,allowDemo:c.allowDemo??!1,demoPlaysCount:c.demoPlaysCount??0}}).filter(o=>o.isActive).map(o=>t4(o))}catch(r){throw console.error("Error connecting to Firebase:",r),new Error("No se pudo conectar a la base de datos. Verifica tu conexión a internet.")}},n4=async r=>{try{if(!r||r.length===0)return console.warn("No categories provided for questions query"),[];const e=tt(Ce,"gameItems"),t=St(e,$e("type","==","question"),$e("category","in",r)),i=await gt(t);return i.empty?(console.warn("No questions found in Firebase database for categories:",r),[]):i.docs.map(c=>{const d=c.data();return{text:d.text,category:d.category}})}catch(e){throw console.error("Error fetching questions from Firebase:",e),new Error("No se pudieron cargar las preguntas. Verifica tu conexión a internet.")}},r4=async r=>{try{if(!r||r.length===0)return console.warn("No categories provided for dares query"),[];const e=tt(Ce,"gameItems"),t=St(e,$e("type","==","dare"),$e("category","in",r)),i=await gt(t);return i.empty?(console.warn("No dares found in Firebase database for categories:",r),[]):i.docs.map(c=>{const d=c.data();return{text:d.text,category:d.category}})}catch(e){throw console.error("Error fetching dares from Firebase:",e),new Error("No se pudieron cargar los retos. Verifica tu conexión a internet.")}},s4=async r=>{try{if(!r||r.length===0)return console.warn("No pack IDs provided for categories query"),[];const e=tt(Ce,"gameItems"),t=St(e,$e("packId","in",r)),i=await gt(t);return i.empty?(console.warn("No categories found in Firebase database for packs:",r),[]):[...new Set(i.docs.map(c=>c.data().category))]}catch(e){throw console.error("Error fetching categories from Firebase:",e),new Error("No se pudieron cargar las categorías. Verifica tu conexión a internet.")}},i4=async r=>{try{if(!r||r.length===0)return console.warn("No pack IDs provided for game data query"),{questions:[],dares:[],categories:[]};const e=await s4(r),[t,i]=await Promise.all([n4(e),r4(e)]);if(Cc()&&(t.length>0||i.length>0)){const o=[...t,...i],c=r.reduce((d,m)=>{const g=o.filter(w=>w.packId===m),_=e.filter(w=>g.some(b=>b.category===w));return g.length>0&&(d[m]={items:g,categories:_}),d},{});for(const[d,m]of Object.entries(c)){const _=(await Sp()).find(w=>w.id===d);_&&await DD(_,m.items,m.categories)}}return{questions:t,dares:i,categories:e}}catch(e){console.error("Error fetching game data from Firebase:",e);const t=OD(r);if(t){console.log("Using cached game data for offline play");const i=t.items.filter(c=>!("type"in c)||c.type==="question"),o=t.items.filter(c=>"type"in c&&c.type==="dare");return{questions:i,dares:o,categories:t.categories}}throw Cc()?new Error("No hay conexión a internet y no tienes datos guardados para estos packs."):new Error("No hay conexión a internet y no tienes packs guardados localmente. ¿Deseas activar el almacenamiento local para jugar sin conexión?")}},a4=async r=>{try{const e=tt(Ce,"gameItems"),t=St(e,$e("packId","==",r),$e("isDemo","==",!0)),o=(await gt(t)).docs.map(g=>({id:g.id,...g.data()})),c=o.filter(g=>g.type==="question").map(g=>({text:g.text,category:g.category,isDemo:!0,packId:g.packId})),d=o.filter(g=>g.type==="dare").map(g=>({text:g.text,category:g.category,isDemo:!0,packId:g.packId})),m=[...new Set(o.map(g=>g.category))];return{questions:c,dares:d,categories:m}}catch(e){return console.error("Error fetching demo data:",e),{questions:[],dares:[],categories:[]}}},o4=async(r,e)=>{try{const t={packId:r,userId:e||"anonymous",timestamp:new Date,type:"demo_play"};await Hc(tt(Ce,"demoLogs"),t);const i=tt(Ce,"packs"),o=Wt(i,r),c=await Kr(o);if(c.exists()){const d=c.data().demoPlaysCount||0;await op(o,{demoPlaysCount:d+1})}console.log("Demo play logged successfully")}catch(t){console.error("Error logging demo play:",t)}},Lb=async(r,e)=>{try{if(!r||r.trim().length===0)return{isValid:!1,error:"El código de referido no puede estar vacío"};const t=wb(r);if(!t.isValid)return{isValid:!1,error:t.error||"El código de referido no es válido"};const i=t.sanitizedCode,o=tt(Ce,"userReferralCodes"),c=St(o,$e("referralCode","==",i)),d=await gt(c);if(d.empty)return{isValid:!1,error:"Código de referido no válido"};const m=d.docs[0],g=m.data(),_=m.id;if(_===e)return{isValid:!1,error:"No puedes usar tu propio código de referido"};const w=await Kr(Wt(Ce,"users",e));if(w.exists()&&w.data().usedReferralCode)return{isValid:!1,error:"Ya has usado un código de referido anteriormente"};const b=new Date,A=new Date(b.getTime()-3600*1e3),I=tt(Ce,"referrals"),j=St(I,$e("referrerUid","==",_),$e("createdAt",">=",A));if((await gt(j)).size>=5)return{isValid:!1,message:"Límite de referidos por hora excedido. Intenta más tarde."};const U=new Date(b.getTime()-1440*60*1e3),re=St(I,$e("referrerUid","==",_),$e("createdAt",">=",U));return(await gt(re)).size>=20?{isValid:!1,message:"Límite diario de referidos excedido. Intenta mañana."}:{isValid:!0,referrerName:g.displayName||g.email||"Usuario"}}catch(t){return console.error("Error validating referral code:",t),{isValid:!1,error:"Error al validar el código de referido"}}},l4=async(r,e)=>{try{return await OC(Ce,async t=>{var fe;const i=tt(Ce,"userReferralCodes"),o=St(i,$e("referralCode","==",r.toUpperCase())),c=await gt(o);if(c.empty)throw new Error("Código de referido no válido");const d=c.docs[0],m=Wt(Ce,"users",d.id),g=Wt(Ce,"users",e),_=await t.get(g);if(_.exists()&&_.data().usedReferralCode)throw new Error("Ya has usado un código de referido");if(d.id===e)throw new Error("No puedes usar tu propio código");const w=new Date,b=_.data(),A=((fe=b==null?void 0:b.createdAt)==null?void 0:fe.toDate())||new Date,I=new Date(w.getTime()-300*1e3);if(A>I)throw new Error("Usuario muy reciente, posible abuso");const j=b==null?void 0:b.lastKnownIP,H=d.data(),U=H==null?void 0:H.lastKnownIP;j&&U&&j===U&&console.warn("Posible abuso: misma IP para referrer y referido");const re=b==null?void 0:b.deviceId,se=H==null?void 0:H.deviceId;if(re&&se&&re===se)throw new Error("No se puede usar el mismo dispositivo para referir");t.update(m,{referralCount:PT(1)}),t.update(g,{usedReferralCode:r.toUpperCase(),referredBy:d.id,referralProcessedAt:w});const ie=Wt(tt(Ce,"referrals"));return t.set(ie,{referrerId:d.id,referredUserId:e,referralCode:r.toUpperCase(),createdAt:w,status:"completed",referrerIP:U||null,referredUserIP:j||null,sameIP:j&&U?j===U:!1,userAccountAge:w.getTime()-A.getTime()}),!0})}catch(t){return console.error("Error processing referral:",t),!1}},c4=async r=>{try{const e=await Kr(Wt(Ce,"users",r));if(!e.exists())return null;const t=e.data(),i=tt(Ce,"referrals"),o=St(i,$e("referrerId","==",r)),c=await gt(o),d=[];return c.forEach(m=>{var _;const g=m.data();d.push({id:g.referredUserId,name:`Usuario ${g.referredUserId.substring(0,8)}...`,joinedAt:((_=g.createdAt)==null?void 0:_.toDate())||new Date})}),{referralCode:t.referralCode||"",referralCount:t.referralCount||0,usedReferralCode:t.usedReferralCode||null,referredBy:t.referredBy||null,referredUsers:d}}catch(e){return console.error("Error getting user referral data:",e),null}},u4=async r=>{try{const e=await Kr(Wt(Ce,"users",r));if(!e.exists())return[];const i=e.data().referralCount||0,o=tt(Ce,"packs"),c=St(o,$e("isReferralUnlockable","==",!0)),d=await gt(c),m=[];return d.forEach(g=>{const w=g.data().requiredReferrals||0;i>=w&&m.push(g.id)}),m}catch(e){return console.error("Error checking referral pack unlocks:",e),[]}},d4=async r=>{try{const e=tt(Ce,"suggestions"),t=St(e,$e("authorId","==",r),$e("status","==","accepted")),o=(await gt(t)).size,c=tt(Ce,"packs"),d=St(c,$e("isSuggestionUnlockable","==",!0)),m=await gt(d),g=[];return m.forEach(_=>{const b=_.data().requiredApprovedSuggestions||0;o>=b&&g.push(_.id)}),g}catch(e){return console.error("Error checking suggestion pack unlocks:",e),[]}},PE=async(r,e)=>{try{const t=Wt(Ce,"userQuestionChangeStats",r);(await Kr(t)).exists()?await op(t,{totalChanges:PT(1),adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,updatedAt:new Date}):await Rc(t,{userId:r,totalChanges:e.totalChanges,adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,createdAt:new Date,updatedAt:new Date}),console.log("Question change stats saved successfully")}catch(t){console.error("Error saving question change stats:",t)}},Ub=async r=>{try{const e=tt(Ce,"suggestions"),t=St(e,$e("userId","==",r),$e("status","==","accepted"));return(await gt(t)).size}catch(e){return console.error("Error getting user accepted suggestions count:",e),0}},h4=({onBack:r,onSuccess:e})=>{const[t,i]=$.useState("login"),[o,c]=$.useState(""),[d,m]=$.useState(""),[g,_]=$.useState(""),[w,b]=$.useState(""),[A,I]=$.useState(""),[j,H]=$.useState(null),[U,re]=$.useState(!1),[se,ie]=$.useState(!1),[fe,de]=$.useState(""),[X,D]=$.useState(""),{refreshUser:x,user:C}=Vi(),P=async()=>{ie(!0),de("");try{const Y=t==="register"&&A&&(j!=null&&j.isValid)?A:void 0;await Tb(Y),x(),e()}catch(Y){de(Y.message)}finally{ie(!1)}},M=async()=>{ie(!0),de("");try{await Ab(),x(),e()}catch(Y){de(Y.message)}finally{ie(!1)}},V=async Y=>{Y.preventDefault(),ie(!0),de(""),D("");try{if(t==="login"){const pe=await bb(o,d);if(x(),!pe.emailVerified){D("Tu email no está verificado. Revisa tu bandeja de entrada o reenvía la verificación.");return}e()}else if(t==="register"){if(d!==g)throw new Error("Las contraseñas no coinciden");const pe=A&&(j!=null&&j.isValid)?A:void 0;await Sb(o,d,w,pe),D("Cuenta creada exitosamente. Revisa tu email para verificar tu cuenta antes de poder comprar packs premium."),i("login")}else t==="forgot-password"&&(await Rb(o),D("Email de restablecimiento enviado. Revisa tu bandeja de entrada."),i("login"))}catch(pe){de(pe.message)}finally{ie(!1)}},R=async()=>{ie(!0),de("");try{await Ib(),D("Email de verificación reenviado.")}catch(Y){de(Y.message)}finally{ie(!1)}},De=()=>{c(""),m(""),_(""),b(""),I(""),H(null),de(""),D("")},Me=async Y=>{if(!Y.trim()){H(null);return}re(!0);try{const pe="temp-"+Date.now(),O=await Lb(Y,pe);H({isValid:O.isValid,message:O.isValid?`Código válido de ${O.referrerName}`:O.error||"Código no válido"})}catch{H({isValid:!1,message:"Error al validar código"})}finally{re(!1)}},Q=Y=>{I(Y.toUpperCase()),Y.trim().length>=6?Me(Y):H(null)},ae=Y=>{i(Y),De()};return p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:p.jsxs(Cn,{className:"w-full max-w-md p-8 space-y-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:t==="login"?"Iniciar Sesión":t==="register"?"Crear Cuenta":"Recuperar Contraseña"}),p.jsx("p",{className:"text-white/80",children:t==="login"?"Accede a tu cuenta para comprar packs premium":t==="register"?"Crea una cuenta para acceder a contenido premium":"Ingresa tu email para recuperar tu contraseña"})]}),fe&&p.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:fe}),X&&p.jsxs("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:[p.jsx("p",{children:X}),X.includes("no está verificado")&&p.jsx(Ie,{onClick:R,disabled:se,className:"mt-2 bg-green-600 hover:bg-green-700 text-sm",children:"Reenviar verificación"})]}),p.jsxs("form",{onSubmit:V,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Email"}),p.jsx("input",{type:"email",value:o,onChange:Y=>c(Y.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"tu@email.com",required:!0})]}),t!=="forgot-password"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Contraseña"}),p.jsx("input",{type:"password",value:d,onChange:Y=>m(Y.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"••••••••",required:!0,minLength:6})]}),t==="register"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Confirmar Contraseña"}),p.jsx("input",{type:"password",value:g,onChange:Y=>_(Y.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"••••••••",required:!0,minLength:6})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Nombre (opcional)"}),p.jsx("input",{type:"text",value:w,onChange:Y=>b(Y.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"Tu nombre"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Código de Referido (opcional)"}),p.jsx("input",{type:"text",value:A,onChange:Y=>Q(Y.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${j===null?"border-white/20 focus:ring-white/50":j.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ej: ABC123",maxLength:8}),U&&p.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando código..."}),j&&p.jsx("p",{className:`text-sm mt-1 ${j.isValid?"text-green-400":"text-red-400"}`,children:j.message})]})]}),p.jsx(Ie,{type:"submit",disabled:se,className:"w-full",children:se?"Cargando...":t==="login"?"Iniciar Sesión":t==="register"?"Crear Cuenta":"Enviar Email"})]}),t!=="forgot-password"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-white/20"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-2 bg-transparent text-white/60",children:"o"})})]}),p.jsxs(Ie,{onClick:P,disabled:se,className:"w-full bg-white text-gray-900 hover:bg-gray-100 flex items-center justify-center",children:[p.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar con Google"]})]}),p.jsxs("div",{className:"text-center space-y-2",children:[t==="login"&&p.jsxs(p.Fragment,{children:[p.jsx("button",{type:"button",onClick:()=>ae("forgot-password"),className:"text-white/80 hover:text-white text-sm underline",children:"¿Olvidaste tu contraseña?"}),p.jsxs("div",{children:[p.jsx("span",{className:"text-white/60 text-sm",children:"¿No tienes cuenta? "}),p.jsx("button",{type:"button",onClick:()=>ae("register"),className:"text-white hover:text-white/80 text-sm underline",children:"Regístrate"})]})]}),t==="register"&&p.jsxs("div",{children:[p.jsx("span",{className:"text-white/60 text-sm",children:"¿Ya tienes cuenta? "}),p.jsx("button",{type:"button",onClick:()=>ae("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Inicia sesión"})]}),t==="forgot-password"&&p.jsx("button",{type:"button",onClick:()=>ae("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Volver al inicio de sesión"})]}),p.jsxs("div",{className:"border-t border-white/20 pt-4",children:[p.jsx(Ie,{onClick:M,disabled:se,className:"w-full bg-white/10 hover:bg-white/20 text-white border border-white/20",children:"Continuar sin cuenta"}),p.jsx("p",{className:"text-white/60 text-xs text-center mt-2",children:"Podrás jugar pero no comprar packs premium"})]}),p.jsx("div",{className:"text-center",children:p.jsx(Ie,{onClick:r,className:"text-white/80 hover:text-white bg-transparent",children:"← Volver"})})]})})},Nc="suggestions",f4=async(r,e,t)=>{try{const i=new Date;if(!await qb(e))throw new Error("Has alcanzado el límite de sugerencias permitidas");const c=await zb(e,r.title,r.content);if(!c.isValid)throw new Error(c.error||"Contenido no válido");const d={type:r.type,authorUid:e,authorName:t,title:r.title,content:r.content,targetPackId:r.targetPackId,status:cc.Pending,createdAt:i,updatedAt:i};if(r.targetPackId){const _=await Kr(Wt(Ce,"packs",r.targetPackId));_.exists()&&(d.targetPackName=_.data().name)}const m={type:d.type,authorUid:d.authorUid,authorName:d.authorName,title:d.title,content:d.content,status:d.status,createdAt:Ye.fromDate(d.createdAt),updatedAt:Ye.fromDate(d.updatedAt)};return d.targetPackId!==void 0&&(m.targetPackId=d.targetPackId),d.targetPackName!==void 0&&(m.targetPackName=d.targetPackName),(await Hc(tt(Ce,Nc),m)).id}catch(i){throw console.error("Error creating suggestion:",i),i}},m4=["spam","test","prueba","asdf","qwerty","123","abc"],ME=r=>{const e=r.toLowerCase();return m4.some(t=>e.includes(t.toLowerCase()))},g4=async(r,e,t)=>{try{const i=St(tt(Ce,Nc),$e("authorUid","==",r),Yd("createdAt","desc"),CT(10)),o=await gt(i);for(const c of o.docs){const d=c.data();if(d.title===e||d.content===t)return!0;const m=kE(e,d.title),g=kE(t,d.content);if(m>.8||g>.8)return!0}return!1}catch(i){return console.error("Error checking duplicate content:",i),!1}},kE=(r,e)=>{const t=r.toLowerCase().split(/\s+/),i=e.toLowerCase().split(/\s+/),o=new Set(t),c=new Set(i),d=new Set([...o].filter(g=>c.has(g))),m=new Set([...o,...c]);return d.size/m.size},zb=async(r,e,t)=>e.length<mt.MIN_TITLE_LENGTH?{isValid:!1,error:`El título debe tener al menos ${mt.MIN_TITLE_LENGTH} caracteres`}:e.length>mt.MAX_TITLE_LENGTH?{isValid:!1,error:`El título no puede exceder ${mt.MAX_TITLE_LENGTH} caracteres`}:t.length<mt.MIN_CONTENT_LENGTH?{isValid:!1,error:`El contenido debe tener al menos ${mt.MIN_CONTENT_LENGTH} caracteres`}:t.length>mt.MAX_CONTENT_LENGTH?{isValid:!1,error:`El contenido no puede exceder ${mt.MAX_CONTENT_LENGTH} caracteres`}:ME(e)||ME(t)?{isValid:!1,error:"El contenido contiene palabras no permitidas"}:await g4(r,e,t)?{isValid:!1,error:"Ya has enviado una sugerencia similar recientemente"}:{isValid:!0},qb=async r=>{try{if(!r)return!0;const e=new Date,t=new Date(e.getTime()-1440*60*1e3),i=new Date(e.getTime()-10080*60*1e3),o=St(tt(Ce,Nc),$e("authorUid","==",r),$e("createdAt",">=",Ye.fromDate(t)));if((await gt(o)).size>=mt.MAX_SUGGESTIONS_PER_DAY)return!1;const d=St(tt(Ce,Nc),$e("authorUid","==",r),$e("createdAt",">=",Ye.fromDate(i)));return!((await gt(d)).size>=mt.MAX_SUGGESTIONS_PER_WEEK)}catch(e){return console.error("Error checking suggestion limits:",e),!0}},p4=async r=>{try{const e=await Bb(r),t={total:e.length,pending:0,approved:0,rejected:0};return e.forEach(i=>{switch(i.status){case cc.Pending:t.pending++;break;case cc.Accepted:t.approved++;break;case cc.Rejected:t.rejected++;break}}),t}catch(e){throw console.error("Error getting user suggestion stats:",e),e}},Bb=async r=>{try{const e=St(tt(Ce,Nc),$e("authorUid","==",r),Yd("createdAt","desc"));return(await gt(e)).docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt.toDate(),updatedAt:i.data().updatedAt.toDate()}))}catch(e){throw console.error("Error getting user suggestions:",e),e}},Hb=({onClose:r,onSuccess:e})=>{const{user:t}=Vi(),[i,o]=$.useState({type:sr.Pack,title:"",content:"",targetPackId:void 0}),[c,d]=$.useState([]),[m,g]=$.useState(!1),[_,w]=$.useState(null),[b,A]=$.useState(!0),[I,j]=$.useState(0);$.useEffect(()=>{H(),U(),re()},[t]);const H=async()=>{try{const X=await Sp();d(X)}catch(X){console.error("Error loading packs:",X)}},U=async()=>{if(!t){A(!0),w(null);return}try{const X=await qb(t.uid);A(X),w(X?null:"Has alcanzado el límite de sugerencias permitidas. Intenta más tarde.")}catch(X){console.error("Error checking user limits:",X),A(!0),w(null)}},re=async()=>{if(t)try{const X=await Ub(t.uid);j(X)}catch(X){console.error("Error loading accepted suggestions count:",X)}},se=X=>{o(D=>({...D,type:X,targetPackId:X===sr.Pack?void 0:D.targetPackId}))},ie=async X=>{if(X.preventDefault(),!(!t||!b)){if(i.title.length<mt.MIN_TITLE_LENGTH){w(`El título debe tener al menos ${mt.MIN_TITLE_LENGTH} caracteres`);return}if(i.title.length>mt.MAX_TITLE_LENGTH){w(`El título no puede exceder ${mt.MAX_TITLE_LENGTH} caracteres`);return}if(i.content.length<mt.MIN_CONTENT_LENGTH){w(`El contenido debe tener al menos ${mt.MIN_CONTENT_LENGTH} caracteres`);return}if(i.content.length>mt.MAX_CONTENT_LENGTH){w(`El contenido no puede exceder ${mt.MAX_CONTENT_LENGTH} caracteres`);return}if(i.type!==sr.Pack&&!i.targetPackId){w("Debes seleccionar un pack para preguntas y retos");return}g(!0),w(null);try{const D=await zb(t.uid,i.title,i.content);if(!D.isValid){w(D.error||"Contenido no válido"),g(!1);return}await f4(i,t.uid,t.displayName||"Usuario anónimo"),typeof e=="function"?e():r()}catch(D){w(D.message||"Error al enviar la sugerencia")}finally{g(!1)}}},fe=X=>{switch(X){case sr.Pack:return"Pack nuevo";case sr.Question:return"Pregunta";case sr.Dare:return"Reto";default:return X}},de=()=>{switch(i.type){case sr.Pack:return"Describe tu idea para un nuevo pack: temática, tipo de preguntas/retos, etc.";case sr.Question:return"Escribe tu pregunta aquí...";case sr.Dare:return"Describe el reto que propones...";default:return"Describe tu sugerencia..."}};return t?p.jsx("div",{className:"suggestion-form-overlay",children:p.jsxs("div",{className:"suggestion-form",children:[p.jsxs("div",{className:"suggestion-form-header",children:[p.jsxs("div",{children:[p.jsx("h2",{children:"Enviar Sugerencia"}),p.jsxs("p",{className:"accepted-count",children:["Sugerencias aprobadas: ",p.jsx("strong",{children:I})]})]}),p.jsx("button",{className:"close-button",onClick:r,children:"×"})]}),p.jsxs("form",{onSubmit:ie,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Tipo de sugerencia:"}),p.jsx("div",{className:"type-selector",children:Object.values(sr).map(X=>p.jsx("button",{type:"button",className:`type-button ${i.type===X?"active":""}`,onClick:()=>se(X),children:fe(X)},X))})]}),i.type!==sr.Pack&&p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"targetPack",children:"Pack de destino:"}),p.jsxs("select",{id:"targetPack",value:i.targetPackId||"",onChange:X=>o(D=>({...D,targetPackId:X.target.value||void 0})),required:!0,children:[p.jsx("option",{value:"",children:"Selecciona un pack"}),c.map(X=>p.jsx("option",{value:X.id,children:X.name},X.id))]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"title",children:"Título:"}),p.jsx("input",{type:"text",id:"title",value:i.title,onChange:X=>o(D=>({...D,title:X.target.value})),placeholder:`Título de tu ${fe(i.type).toLowerCase()}`,maxLength:mt.MAX_TITLE_LENGTH,required:!0}),p.jsxs("small",{children:[i.title.length,"/",mt.MAX_TITLE_LENGTH," caracteres"]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"content",children:"Descripción:"}),p.jsx("textarea",{id:"content",value:i.content,onChange:X=>o(D=>({...D,content:X.target.value})),placeholder:de(),maxLength:mt.MAX_CONTENT_LENGTH,rows:6,required:!0}),p.jsxs("small",{children:[i.content.length,"/",mt.MAX_CONTENT_LENGTH," caracteres"]})]}),_&&p.jsx("div",{className:"error-message",children:_}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",className:"cancel-button",onClick:r,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"submit-button",disabled:m||!b,children:m?"Enviando...":"Enviar Sugerencia"})]})]}),p.jsxs("div",{className:"suggestion-info",children:[p.jsx("h4",{children:"Información importante:"}),p.jsxs("ul",{children:[p.jsxs("li",{children:["Máximo ",mt.MAX_SUGGESTIONS_PER_DAY," sugerencias por día"]}),p.jsxs("li",{children:["Máximo ",mt.MAX_SUGGESTIONS_PER_WEEK," sugerencias por semana"]}),p.jsx("li",{children:"No podrás editar ni eliminar tu sugerencia una vez enviada"}),p.jsx("li",{children:"Recibirás notificaciones sobre el estado de tu sugerencia"})]})]})]})}):p.jsx("div",{className:"suggestion-form-overlay",children:p.jsxs("div",{className:"suggestion-form",children:[p.jsxs("div",{className:"suggestion-form-header",children:[p.jsx("h2",{children:"Iniciar sesión requerido"}),p.jsx("button",{className:"close-button",onClick:r,children:"×"})]}),p.jsx("p",{children:"Debes iniciar sesión para enviar sugerencias."}),p.jsx("button",{className:"cancel-button",onClick:r,children:"Cerrar"})]})})},y4="incidents",_4=async r=>{try{return(await Hc(tt(Ce,y4),{...r,timestamp:Ye.fromDate(r.timestamp)})).id}catch(e){throw console.error("Error al reportar incidencia:",e),new Error("No se pudo reportar la incidencia")}},Fb=({onClose:r})=>{const[e,t]=$.useState(""),[i,o]=$.useState(!1),[c,d]=$.useState(!1),{user:m}=Vi(),g=async _=>{if(_.preventDefault(),!!e.trim()){o(!0);try{await _4({userId:(m==null?void 0:m.uid)||"anonymous",userEmail:(m==null?void 0:m.email)||"Usuario anónimo",description:e.trim(),timestamp:new Date,status:"pending"}),d(!0)}catch(w){console.error("Error al reportar incidencia:",w),alert("Error al enviar el reporte. Por favor, inténtalo de nuevo.")}finally{o(!1)}}};return c?p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-green-600",children:"¡Gracias!"}),p.jsx("p",{className:"text-gray-700 mb-6",children:"Muchas gracias por reportar la incidencia. El equipo de desarrollo la revisará y se pondrá con ello."}),p.jsx(Ie,{onClick:r,className:"w-full bg-blue-500 hover:bg-blue-600 text-white",children:"Cerrar"})]})}):p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900",children:"Reportar Incidencia"}),p.jsxs("form",{onSubmit:g,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-black mb-2",children:"Describe la incidencia:"}),p.jsx("textarea",{id:"description",value:e,onChange:_=>t(_.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 placeholder-gray-500",rows:4,placeholder:"Describe el problema que has encontrado...",required:!0,disabled:i})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx(Ie,{type:"button",onClick:r,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white",disabled:i,children:"Cancelar"}),p.jsx(Ie,{type:"submit",className:"flex-1 bg-red-500 hover:bg-red-600 text-white",disabled:i||!e.trim(),children:i?"Enviando...":"Reportar"})]})]})]})})},v4=({onBack:r})=>{const{user:e}=Vi(),[t,i]=$.useState(null),[o,c]=$.useState(""),[d,m]=$.useState(null),[g,_]=$.useState(!1),[w,b]=$.useState(!1),[A,I]=$.useState(!0),[j,H]=$.useState(""),[U,re]=$.useState(""),[se,ie]=$.useState(0),[fe,de]=$.useState(!1),[X,D]=$.useState(!1),[x,C]=$.useState(null),[P,M]=$.useState([]);$.useEffect(()=>{V()},[e]);const V=async()=>{if(e!=null&&e.uid){I(!0);try{const[Y,pe,O,ee]=await Promise.all([c4(e.uid),Ub(e.uid),p4(e.uid),Bb(e.uid)]);i(Y),ie(pe),C(O),M(ee)}catch(Y){console.error("Error loading user data:",Y),H("Error al cargar datos del usuario")}finally{I(!1)}}},R=async Y=>{if(!Y.trim()){m(null);return}if(!(e!=null&&e.uid)){m({isValid:!1,message:"Error de autenticación"});return}_(!0);try{const pe=await Lb(Y,e.uid);m({isValid:pe.isValid,message:pe.isValid?`Código válido de ${pe.referrerName}`:pe.error||"Código no válido"})}catch{m({isValid:!1,message:"Error al validar código"})}finally{_(!1)}},De=Y=>{c(Y.toUpperCase()),Y.trim().length>=6?R(Y):m(null)},Me=async()=>{if(!(!(e!=null&&e.uid)||!o||!(d!=null&&d.isValid))){b(!0),H(""),re("");try{await l4(o,e.uid)?(re("¡Código de referido aplicado exitosamente!"),c(""),m(null),await V()):H("Error al procesar el código de referido")}catch{H("Error al procesar el código de referido")}finally{b(!1)}}},Q=async()=>{if(t!=null&&t.referralCode)try{await navigator.clipboard.writeText(t.referralCode),re("¡Código copiado al portapapeles!"),setTimeout(()=>re(""),3e3)}catch{H("Error al copiar el código")}},ae=async()=>{try{await xb()}catch{H("Error al cerrar sesión")}};return A?p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:p.jsx(Cn,{className:"w-full max-w-2xl p-8",children:p.jsxs("div",{className:"text-center text-white",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),p.jsx("p",{children:"Cargando perfil..."})]})})}):p.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:[p.jsxs(Cn,{className:"w-full max-w-2xl p-8 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h1",{className:"text-3xl font-bold text-white",children:"Mi Perfil"}),p.jsx(Ie,{onClick:r,className:"bg-white/20 hover:bg-white/30 text-white",children:"Volver"})]}),j&&p.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:j}),U&&p.jsx("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:U}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h2",{className:"text-xl font-semibold text-white",children:"Información Personal"}),p.jsx(Ie,{onClick:ae,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2",children:"Cerrar Sesión"})]}),p.jsxs("div",{className:"space-y-2 text-white/80",children:[p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Email:"})," ",e==null?void 0:e.email]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Nombre:"})," ",(e==null?void 0:e.displayName)||"No especificado"]})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mi Código de Referido"}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("div",{className:"flex-1",children:p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Tu código:"}),p.jsx("p",{className:"text-2xl font-bold text-white tracking-wider",children:(t==null?void 0:t.referralCode)||"Cargando..."})]})}),p.jsx(Ie,{onClick:Q,className:"bg-blue-600 hover:bg-blue-700",disabled:!(t!=null&&t.referralCode),children:"Copiar"})]}),p.jsx("p",{className:"text-white/60 text-sm mt-2",children:"Comparte este código con tus amigos para ganar referidos"})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mis Estadísticas"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-3xl font-bold text-white",children:(t==null?void 0:t.referralCount)||0}),p.jsx("p",{className:"text-white/60 text-sm",children:"Total de referidos"})]}),p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-3xl font-bold text-green-400",children:se}),p.jsx("p",{className:"text-white/60 text-sm",children:"Sugerencias aceptadas"})]})]}),(t==null?void 0:t.referredUsers)&&t.referredUsers.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Usuarios Referidos"}),p.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.referredUsers.map((Y,pe)=>p.jsxs("div",{className:"bg-white/10 rounded p-3 flex justify-between items-center",children:[p.jsx("span",{className:"text-white",children:Y.name}),p.jsx("span",{className:"text-white/60 text-sm",children:Y.joinedAt.toLocaleDateString()})]},Y.id))})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Contribuir con Sugerencias"}),p.jsx("p",{className:"text-white/60 text-sm mb-4",children:"¿Tienes ideas para nuevos packs, preguntas o retos? ¡Compártelas con nosotros!"}),p.jsx(Ie,{onClick:()=>de(!0),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:"💡 Recomendar Pack/Pregunta/Reto"})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Reportar Problema"}),p.jsx("p",{className:"text-white/60 text-sm mb-4",children:"¿Encontraste un error o problema en la aplicación? Repórtalo para que podamos solucionarlo."}),p.jsx(Ie,{onClick:()=>D(!0),className:"w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:"🐛 Reportar Incidencia"})]}),!(t!=null&&t.usedReferralCode)&&p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Usar Código de Referido"}),p.jsx("p",{className:"text-white/60 text-sm mb-4",children:"¿Tienes un código de referido? Úsalo aquí para ayudar a un amigo."}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("input",{type:"text",value:o,onChange:Y=>De(Y.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${d===null?"border-white/20 focus:ring-white/50":d.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ingresa el código de referido",maxLength:8}),g&&p.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando código..."}),d&&p.jsx("p",{className:`text-sm mt-1 ${d.isValid?"text-green-400":"text-red-400"}`,children:d.message})]}),p.jsx(Ie,{onClick:Me,disabled:!(d!=null&&d.isValid)||w,className:"w-full bg-green-600 hover:bg-green-700",children:w?"Procesando...":"Usar Código"})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mis Sugerencias"}),x&&p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-white",children:x.total}),p.jsx("p",{className:"text-white/60 text-sm",children:"Total"})]}),p.jsxs("div",{className:"bg-yellow-500/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-yellow-300",children:x.pending}),p.jsx("p",{className:"text-white/60 text-sm",children:"Pendientes"})]}),p.jsxs("div",{className:"bg-green-500/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-green-300",children:x.approved}),p.jsx("p",{className:"text-white/60 text-sm",children:"Aprobadas"})]}),p.jsxs("div",{className:"bg-red-500/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-red-300",children:x.rejected}),p.jsx("p",{className:"text-white/60 text-sm",children:"Rechazadas"})]})]}),P.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Sugerencias Recientes"}),p.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:P.slice(0,5).map(Y=>p.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsx("h4",{className:"font-medium text-white truncate flex-1 mr-2",children:Y.title}),p.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Y.status==="pending"?"bg-yellow-500/20 text-yellow-300":Y.status==="approved"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:Y.status==="pending"?"Pendiente":Y.status==="approved"?"Aprobada":"Rechazada"})]}),p.jsx("p",{className:"text-white/60 text-sm line-clamp-2",children:Y.content}),p.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-white/40",children:[p.jsx("span",{children:Y.type==="question"?"Pregunta":"Reto"}),p.jsx("span",{children:Y.createdAt.toLocaleDateString()})]})]},Y.id))}),P.length>5&&p.jsxs("p",{className:"text-white/60 text-sm mt-3 text-center",children:["Y ",P.length-5," sugerencias más..."]})]}),P.length===0&&x&&p.jsxs("div",{className:"text-center py-8",children:[p.jsx("p",{className:"text-white/60",children:"Aún no has realizado ninguna sugerencia"}),p.jsx("p",{className:"text-white/40 text-sm mt-1",children:"¡Comparte tus ideas para mejorar el juego!"})]})]}),(t==null?void 0:t.usedReferralCode)&&p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Código de Referido Usado"}),p.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[p.jsx("p",{className:"text-white/60 text-sm",children:"Ya has usado el código:"}),p.jsx("p",{className:"text-xl font-bold text-white tracking-wider",children:t.usedReferralCode})]})]})]}),fe&&p.jsx(Hb,{isOpen:fe,onClose:()=>de(!1)}),X&&p.jsx(Fb,{onClose:()=>D(!1)})]})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),w4=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),VE=r=>{const e=w4(r);return e.charAt(0).toUpperCase()+e.slice(1)},Gb=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),T4=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var b4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=$.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:d,...m},g)=>$.createElement("svg",{ref:g,...b4,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:Gb("lucide",o),...!c&&!T4(m)&&{"aria-hidden":"true"},...m},[...d.map(([_,w])=>$.createElement(_,w)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=(r,e)=>{const t=$.forwardRef(({className:i,...o},c)=>$.createElement(S4,{ref:c,iconNode:e,className:Gb(`lucide-${E4(VE(r))}`,`lucide-${r}`,i),...o}));return t.displayName=VE(r),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],x4=Ra("circle-check-big",A4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],I4=Ra("circle-x",R4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],N4=Ra("info",C4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],O4=Ra("share-2",D4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],M4=Ra("shopping-bag",P4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],V4=Ra("triangle-alert",k4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],L4=Ra("x",j4);class U4{constructor(){this.config=null,this.listeners=[],this.hasShownThisSession=!1,this.defaultConfig={enabled:!1,title:"¡Bienvenido a Verdad o Reto!",subtitle:"Disfruta de los mejores desafíos",modules:[],showOnce:!1,showOnAppStart:!0,backgroundColor:"#1F2937",textColor:"#FFFFFF"},this.loadConfig()}async loadConfig(){try{const e=Wt(Ce,"appConfig","welcomeScreen");IC(e,t=>{t.exists()?this.config={...this.defaultConfig,...t.data()}:this.config=this.defaultConfig,this.notifyListeners()})}catch(e){console.error("Error loading welcome screen config:",e),this.config=this.defaultConfig,this.notifyListeners()}}getConfig(){return this.config}async saveConfig(e){try{const t=Wt(Ce,"appConfig","welcomeScreen");await Rc(t,e)}catch(t){throw console.error("Error saving welcome screen config:",t),t}}shouldShowWelcomeScreen(){return!this.config||!this.config.enabled||this.config.showOnce&&this.hasShownThisSession?!1:this.config.showOnAppStart}markAsShown(){this.hasShownThisSession=!0}resetSessionFlag(){this.hasShownThisSession=!1}addListener(e){this.listeners.push(e)}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}notifyListeners(){this.listeners.forEach(e=>e(this.config))}addModule(e){if(!this.config)return;const t=this.config.modules.findIndex(i=>i.id===e.id);t>=0?this.config.modules[t]=e:this.config.modules.push(e),this.config.modules.sort((i,o)=>i.order-o.order)}removeModule(e){this.config&&(this.config.modules=this.config.modules.filter(t=>t.id!==e))}getEnabledModules(){return this.config?this.config.modules.filter(e=>e.enabled).sort((e,t)=>e.order-t.order):[]}createReferralProgressModule(e,t=1){return{id:"referral_progress",type:"referral_progress",enabled:!0,order:t,config:e}}createCustomMessageModule(e,t=2){return{id:`custom_message_${Date.now()}`,type:"custom_message",enabled:!0,order:t,config:e}}createShopButtonModule(e,t=3){return{id:"shop_button",type:"shop_button",enabled:!0,order:t,config:e}}async getUserReferralInfo(e){try{const t=Wt(Ce,"users",e),i=await Kr(t);if(i.exists()){const o=i.data();return{current:o.referralCount||0,target:o.referralTarget||5}}}catch(t){console.error("Error getting user referral info:",t)}return{current:0,target:5}}generateReferralLink(e,t){return`${window.location.origin}?ref=${t}&user=${e}`}async shareApp(e,t,i){const o=this.generateReferralLink(e,t),c=`¡Únete a Verdad o Reto! Usa mi código de referido: ${t}`,d=i||c;if(navigator.share)try{await navigator.share({title:"Verdad o Reto",text:d,url:o})}catch(m){console.log("Error sharing:",m),this.fallbackShare(d,o)}else this.fallbackShare(d,o)}fallbackShare(e,t){const i=`${e}

${t}`;if(navigator.clipboard)navigator.clipboard.writeText(i).then(()=>{alert("¡Enlace copiado al portapapeles!")});else{const o=document.createElement("textarea");o.value=i,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),alert("¡Enlace copiado al portapapeles!")}}}const pa=new U4,z4=({config:r,onContinue:e,onSkip:t,onShare:i,onGoToShop:o})=>{const{user:c}=Vi(),[d,m]=$.useState(r||null),[g,_]=$.useState({current:0,target:5}),[w,b]=$.useState(!1);$.useEffect(()=>{if(r)m(r);else{const H=U=>{m(U)};return pa.addListener(H),m(pa.getConfig()),()=>{pa.removeListener(H)}}},[r]),$.useEffect(()=>{c!=null&&c.uid&&pa.getUserReferralInfo(c.uid).then(_)},[c]);const A=async()=>{var H,U;if(!(!(c!=null&&c.uid)||!(c!=null&&c.referralCode))){b(!0);try{const re=((U=(H=d==null?void 0:d.modules.find(se=>se.type==="referral_progress"))==null?void 0:H.config)==null?void 0:U.shareMessage)||"¡Únete a Verdad o Reto!";await pa.shareApp(c.uid,c.referralCode,re),i()}catch(re){console.error("Error sharing:",re)}finally{b(!1)}}},I=()=>{o()};if(!d||!d.enabled)return null;const j=pa.getEnabledModules();return p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[p.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:t}),p.jsxs("div",{className:"relative w-full max-w-md mx-auto rounded-2xl shadow-2xl overflow-hidden",style:{backgroundColor:d.backgroundColor,color:d.textColor},children:[p.jsxs("div",{className:"relative p-6 text-center",children:[p.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-white hover:bg-opacity-10 transition-colors",children:p.jsx(L4,{size:20})}),p.jsx("h1",{className:"text-2xl font-bold mb-2",children:d.title}),d.subtitle&&p.jsx("p",{className:"text-opacity-80",style:{color:d.textColor},children:d.subtitle})]}),p.jsxs("div",{className:"px-6 pb-6 space-y-4",children:[j.map(H=>p.jsx(q4,{module:H,referralInfo:g,onShare:A,onNavigateToShop:I,isSharing:w,textColor:d.textColor},H.id)),p.jsxs("div",{className:"flex gap-3 mt-6",children:[p.jsx(Ie,{onClick:t,variant:"secondary",className:"flex-1",children:"Omitir"}),p.jsx(Ie,{onClick:e,className:"flex-1",children:"Continuar"})]})]})]})]})},q4=({module:r,referralInfo:e,onShare:t,onNavigateToShop:i,isSharing:o,textColor:c})=>{switch(r.type){case"referral_progress":return p.jsx(B4,{config:r.config,referralInfo:e,onShare:t,isSharing:o,textColor:c});case"custom_message":return p.jsx(H4,{config:r.config,textColor:c});case"shop_button":return p.jsx(F4,{config:r.config,onNavigateToShop:i});default:return null}},B4=({config:r,referralInfo:e,onShare:t,isSharing:i,textColor:o})=>{const c=Math.min(e.current/e.target*100,100),d=Math.max(e.target-e.current,0);return p.jsxs("div",{className:"bg-white bg-opacity-10 rounded-xl p-4",children:[r.showProgress&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-sm font-medium",children:"Referidos"}),p.jsxs("span",{className:"text-sm",children:[e.current,"/",e.target]})]}),p.jsx("div",{className:"w-full bg-white bg-opacity-20 rounded-full h-3 mb-3",children:p.jsx("div",{className:"bg-gradient-to-r from-purple-400 to-pink-400 h-3 rounded-full transition-all duration-500",style:{width:`${c}%`}})})]}),r.progressMessage&&p.jsx("p",{className:"text-sm mb-3 text-center",style:{color:o},children:d>0?r.progressMessage.replace("{remaining}",d.toString()):"¡Objetivo completado! 🎉"}),p.jsxs(Ie,{onClick:t,disabled:i,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:[p.jsx(O4,{size:16}),i?"Compartiendo...":r.shareButtonText]})]})},H4=({config:r,textColor:e})=>{const t=()=>{switch(r.type){case"info":return p.jsx(N4,{size:20,className:"text-blue-400"});case"warning":return p.jsx(V4,{size:20,className:"text-yellow-400"});case"success":return p.jsx(x4,{size:20,className:"text-green-400"});case"error":return p.jsx(I4,{size:20,className:"text-red-400"});default:return null}},i=()=>{switch(r.type){case"info":return"border-blue-400";case"warning":return"border-yellow-400";case"success":return"border-green-400";case"error":return"border-red-400";default:return"border-gray-400"}};return p.jsx("div",{className:`border-l-4 ${i()} bg-white bg-opacity-10 rounded-r-xl p-4`,children:p.jsxs("div",{className:"flex items-start gap-3",children:[t(),p.jsx("p",{className:"text-sm flex-1",style:{color:e},children:r.message})]})})},F4=({config:r,onNavigateToShop:e})=>{const t=()=>{switch(r.style){case"primary":return"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white";case"secondary":return"bg-white bg-opacity-20 hover:bg-opacity-30 text-white border border-white border-opacity-30";case"accent":return"bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-white";default:return"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white"}};return p.jsxs(Ie,{onClick:e,className:`w-full ${t()} font-medium py-3 px-4 rounded-lg transition-all duration-200 flex items-center justify-center gap-2`,children:[p.jsx(M4,{size:16}),r.text]})},G4=()=>{const{user:r}=Vi(),[e,t]=$.useState(Ue.Welcome),[i,o]=$.useState(!0),[c,d]=$.useState(null);$.useEffect(()=>{r||t(Ue.Setup),vi.setCurrentUser(r),r&&(vi.trackSessionStart(),r.isAnonymous||vi.trackUserLogin())},[r]),$.useEffect(()=>{(async()=>{try{const me=pa.getConfig();d(me);const wt=(me==null?void 0:me.enabled)&&!localStorage.getItem("welcomeScreenSeen");o(wt),wt||t(Ue.Setup)}catch(me){console.error("Error loading welcome screen config:",me),o(!1),t(Ue.Setup)}})()},[]);const[m,g]=$.useState([]),[_,w]=$.useState([]),[b,A]=$.useState([]),[I,j]=$.useState(0),[H,U]=$.useState({totalRounds:5}),[re,se]=$.useState({currentRound:1,playersCompletedInRound:0}),[ie,fe]=$.useState({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),[de,X]=$.useState({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),[D,x]=$.useState({isLoading:!0,error:null}),[C,P]=$.useState([]),[M,V]=$.useState(()=>{try{const le=window.localStorage.getItem("purchasedPacks");return le?JSON.parse(le):[]}catch(le){return console.error("Error reading from localStorage",le),[]}}),[R,De]=$.useState(!1),[Me,Q]=$.useState(null),[ae,Y]=$.useState(!1),[pe,O]=$.useState(null),[ee,ce]=$.useState([]),[oe,ve]=$.useState([]),[Oe,Se]=$.useState([]),[Nt,We]=$.useState({changesCount:0,isAdLoading:!1,isAdPlaying:!1,lastChangedItem:void 0}),[Zt,ar]=$.useState({totalChanges:0,adsWatched:0,lastChangeDate:void 0}),[or,vr]=$.useState(!1),[$r,Er]=$.useState(!1),[Ia,Wo]=$.useState(!1),pn=$.useCallback(async le=>{try{const me=await u4(le);ve(me)}catch(me){console.error("Error loading referral unlocked packs:",me),ve([])}},[]),Ca=$.useCallback(async le=>{try{const me=await d4(le);Se(me)}catch(me){console.error("Error loading suggestion unlocked packs:",me),Se([])}},[]);$.useEffect(()=>{(async()=>{try{const me=await Sp();P(me)}catch(me){console.error("Error loading available packs:",me)}})()},[]),$.useEffect(()=>{try{window.localStorage.setItem("purchasedPacks",JSON.stringify(M))}catch(le){console.error("Error writing to localStorage",le)}},[M,oe,Oe]);const Wr=$.useCallback(async()=>{x({isLoading:!0,error:null});try{const le=["base",...M.filter(wt=>wt!=="base"),...oe.filter(wt=>wt!=="base"&&!M.includes(wt)),...Oe.filter(wt=>wt!=="base"&&!M.includes(wt)&&!oe.includes(wt))],me=await i4(le);w(me.questions),A(me.dares),x({isLoading:!1,error:null})}catch(le){console.error("Error loading game data:",le),x({isLoading:!1,error:le instanceof Error?le.message:"Error desconocido"})}},[M,Oe]);$.useEffect(()=>{Wr()},[Wr]);const js=()=>{if(m.length<2){alert("Se necesitan al menos 2 jugadores para empezar.");return}t(Ue.PackSelection)},Zr=()=>{t(Ue.RoundConfiguration)},Zo=()=>{t(Ue.Setup)},Ls=()=>{t(Ue.Shop)},Us=()=>{t(Ue.Login)},Na=async le=>{var me,wt;if(t(Ue.Setup),((me=le==null?void 0:le.metadata)==null?void 0:me.creationTime)===((wt=le==null?void 0:le.metadata)==null?void 0:wt.lastSignInTime)&&vi.trackUserRegister(),le!=null&&le.uid)try{await Nb(le.uid),pn(le.uid),Ca(le.uid)}catch(Qn){console.error("Error durante la migración del usuario:",Qn),pn(le.uid),Ca(le.uid)}},ht=$.useCallback(async()=>{const le={...Zt,totalChanges:Zt.totalChanges+1,lastChangeDate:new Date};if(We(me=>({...me,changesCount:me.changesCount+1})),ar(le),r&&!r.isAnonymous)try{await PE(r.uid,le)}catch(me){console.error("Error saving question change stats:",me)}},[Zt,r]),Ze=$.useCallback(async()=>new Promise((le,me)=>{if(!kt.isEnabled()){le();return}We(cr=>({...cr,isAdLoading:!0}));const wt=kt.getAdLoadingTime(),Qn=kt.getAdPlayingTime();setTimeout(()=>{We(cr=>({...cr,isAdLoading:!1,isAdPlaying:!0})),setTimeout(()=>{We(On=>({...On,isAdPlaying:!1,changesCount:0}));const cr={...Zt,adsWatched:Zt.adsWatched+1};if(ar(cr),r&&!r.isAnonymous)try{PE(r.uid,cr).catch(On=>{console.error("Error saving ad watched stats:",On)})}catch(On){console.error("Error saving ad watched stats:",On)}le()},Qn)},wt)}),[Zt,r]),yn=()=>{t(Ue.Setup)},Ht=le=>{const me=C.find(wt=>wt.id===le);me&&(O(me),Y(!0))},Da=()=>{Y(!1),O(null)},Jo=le=>{ce(me=>me.includes(le)?me:[...me,le])},Jr=async()=>{if(pe)try{const le=await a4(pe.id);if(le.questions.length===0&&le.dares.length===0){alert("Este pack no tiene contenido demo disponible.");return}De(!0),Q(pe.id),w(le.questions),A(le.dares),await o4(pe.id),t(Ue.RoundConfiguration)}catch(le){console.error("Error starting demo:",le),alert("Error al cargar el demo. Inténtalo de nuevo.")}},es=le=>{U(le),fe({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:new Date,gameEndTime:null,roundStats:[]}),X({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),se({currentRound:1,playersCompletedInRound:0}),t(Ue.Game)},ts=()=>{const le=(I+1)%m.length;if(j(le),le===0){const me=re.currentRound+1;me>H.totalRounds?wr():(se({currentRound:me,playersCompletedInRound:0}),X({roundNumber:me,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}))}else se(me=>({...me,playersCompletedInRound:me.playersCompletedInRound+1}))},Nn=()=>{const le={...de,roundEndTime:new Date};fe(me=>({...me,totalRounds:me.totalRounds+1,roundStats:[...me.roundStats,le]})),t(Ue.RoundEnd)},zs=()=>{const le=re.currentRound+1;se({currentRound:le,playersCompletedInRound:0}),X({roundNumber:le,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),j(0),t(Ue.Game)},wr=()=>{fe(le=>({...le,gameEndTime:new Date})),t(Ue.GameEnd)},ji=()=>{const le=m[I];X(me=>({...me,questionsAsked:me.questionsAsked+1,playersParticipated:me.playersParticipated.includes(le)?me.playersParticipated:[...me.playersParticipated,le]})),fe(me=>({...me,totalQuestions:me.totalQuestions+1}))},Li=()=>{const le=m[I];X(me=>({...me,daresCompleted:me.daresCompleted+1,playersParticipated:me.playersParticipated.includes(le)?me.playersParticipated:[...me.playersParticipated,le]})),fe(me=>({...me,totalDares:me.totalDares+1}))},qs=$.useCallback(()=>{t(Ue.Setup),g([]),j(0),U({totalRounds:5}),se({currentRound:1,playersCompletedInRound:0}),fe({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),X({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),De(!1),Q(null),Y(!1),O(null),ce([])},[]),lr=le=>{M.includes(le)||V([...M,le])},Dn=()=>M.includes("no-ads"),Ui=()=>{vr(!1)},Gn=()=>{localStorage.setItem("welcomeScreenSeen","true"),o(!1),t(Ue.Setup)},zi=()=>{localStorage.setItem("welcomeScreenSeen","true"),o(!1),t(Ue.Setup)},Tr=()=>{navigator.share?navigator.share({title:"Verdad o Reto",text:"¡Únete a la diversión con Verdad o Reto!",url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("Enlace copiado al portapapeles"))},Bs=()=>{localStorage.setItem("welcomeScreenSeen","true"),o(!1),t(Ue.Shop)},br=()=>{console.log("Sugerencia enviada exitosamente"),vr(!1)},Oa=()=>{Er(!0)},ut=()=>{Er(!1)},At=()=>{t(Ue.Setup)},Et=()=>{switch(e){case Ue.Welcome:return p.jsx(z4,{config:c,onContinue:Gn,onSkip:zi,onShare:Tr,onGoToShop:Bs});case Ue.Setup:return p.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-900 bg-opacity-50 backdrop-blur-sm",children:p.jsxs("div",{className:"w-full max-w-md mx-auto animate-fade-in",children:[p.jsx("h1",{className:"text-5xl font-extrabold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Verdad o Reto"}),p.jsx("p",{className:"text-center text-gray-400 mb-8",children:"El juego para animar la fiesta"}),p.jsxs("div",{className:"space-y-6",children:[p.jsx(MA,{players:m,setPlayers:g}),D.isLoading&&p.jsx(Cn,{className:"text-center text-gray-400",children:p.jsx("p",{children:"Cargando datos desde Firebase..."})}),D.error&&p.jsxs(Cn,{className:"text-center text-red-400",children:[p.jsxs("p",{children:["Error de conexión: ",D.error]}),p.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Verifica tu configuración de Firebase"}),p.jsx(Ie,{onClick:Wr,className:"mt-4",variant:"secondary",children:"Reintentar"})]}),!D.isLoading&&!D.error&&p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx(Ie,{onClick:js,className:"w-full text-lg",disabled:m.length<2||_.length===0||b.length===0,children:"Empezar a Jugar"}),r&&!r.isAnonymous?p.jsx(Ie,{onClick:()=>t(Ue.Profile),variant:"secondary",className:"w-full text-lg",children:"Mi Perfil"}):p.jsx(Ie,{onClick:Us,variant:"secondary",className:"w-full text-lg",children:"Iniciar Sesión"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(Ie,{onClick:()=>t(Ue.Shop),variant:"secondary",className:`flex-[2] text-lg bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 
                                      hover:from-yellow-500 hover:via-yellow-600 hover:to-yellow-700 
                                      text-white font-semibold shadow-lg hover:shadow-xl 
                                      transform hover:scale-105 transition-all duration-200 
                                      flex items-center justify-center gap-2 rounded-2xl`,children:[p.jsx(NA,{className:"w-5 h-5"}),"Tienda de Paquetes"]}),p.jsx(Ie,{onClick:Oa,variant:"secondary",className:"flex-1 text-sm bg-red-600 hover:bg-red-700 text-white",children:"Reportar"})]})]})]})]})});case Ue.Login:return p.jsx(h4,{onBack:yn,onSuccess:Na});case Ue.Profile:return p.jsx(v4,{onBack:At});case Ue.Shop:return p.jsx(e4,{availablePacks:C,purchasedPacks:M,onPurchase:lr,onBack:()=>t(Ue.Setup),onGoToLogin:Us});case Ue.PackSelection:return p.jsxs(p.Fragment,{children:[p.jsx(nD,{availablePacks:C,purchasedPacks:M,adWatchedPacks:ee,referralUnlockedPacks:oe,suggestionUnlockedPacks:Oe,onContinue:Zr,onBack:Zo,onGoToShop:Ls,onPlayDemo:Ht}),p.jsx(pD,{pack:pe,isOpen:ae,onClose:Da,onStartDemo:Jr,onAdWatched:Jo,hasNoAds:Dn()})]});case Ue.RoundConfiguration:return p.jsx(_D,{onSelectRounds:le=>{es({totalRounds:le})},onBack:()=>t(Ue.PackSelection)});case Ue.Game:return p.jsx(yD,{players:m,currentPlayerIndex:I,onNextPlayer:ts,onNewGame:qs,questions:_,dares:b,roundConfig:H,gameProgress:re,onRoundEnd:Nn,onQuestionAsked:ji,onDareCompleted:Li,onQuestionChange:ht,onAdRequired:Ze,questionChangeState:Nt});case Ue.RoundEnd:return p.jsx(vD,{roundStats:de,currentRound:re.currentRound,totalRounds:H.totalRounds,onContinue:zs,onEndGame:wr,hasNoAds:Dn()});case Ue.GameEnd:return p.jsx(ED,{gameStats:ie,players:m,onNewGame:qs,onBackToMenu:()=>t(Ue.Setup),hasNoAds:Dn(),isDemoMode:R,demoPackId:Me});default:return p.jsx("div",{children:"Error: Estado de juego desconocido."})}};return p.jsxs("main",{className:"relative min-h-screen bg-gray-900 overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-purple-900/30 via-transparent to-pink-900/30"}),p.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-96 h-96 bg-purple-600 rounded-full filter blur-3xl opacity-20 animate-blob"}),p.jsx("div",{className:"absolute bottom-[-10%] right-[5%] w-96 h-96 bg-pink-600 rounded-full filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),p.jsx("div",{className:"absolute top-[10%] right-[-15%] w-80 h-80 bg-cyan-600 rounded-full filter blur-3xl opacity-10 animate-blob animation-delay-4000"}),p.jsx("div",{className:"relative z-10",children:Et()}),p.jsx("style",{children:`
          .animate-blob {
            animation: blob 7s infinite;
          }
          .animation-delay-2000 {
            animation-delay: 2s;
          }
          .animation-delay-4000 {
            animation-delay: 4s;
          }
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
          }
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `}),or&&p.jsx(Hb,{onClose:Ui,onSuccess:br}),$r&&p.jsx(Fb,{onClose:ut})]})},Qb=document.getElementById("root");if(!Qb)throw new Error("Could not find root element to mount to");const Q4=IA.createRoot(Qb);Q4.render(p.jsx(EA.StrictMode,{children:p.jsx(CD,{children:p.jsx(G4,{})})}));export{RE as A,vb as W};
