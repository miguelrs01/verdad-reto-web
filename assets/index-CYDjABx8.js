(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function AE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var dm={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function iS(){if(Av)return Gl;Av=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Gl.Fragment=e,Gl.jsx=n,Gl.jsxs=n,Gl}var Sv;function sS(){return Sv||(Sv=1,dm.exports=iS()),dm.exports}var y=sS(),fm={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function aS(){if(xv)return Pe;xv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.iterator;function S(D){return D===null||typeof D!="object"?null:(D=A&&D[A]||D["@@iterator"],typeof D=="function"?D:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,Q={};function H(D,Z,le){this.props=D,this.context=Z,this.refs=Q,this.updater=le||O}H.prototype.isReactComponent={},H.prototype.setState=function(D,Z){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Z,"setState")},H.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function ae(){}ae.prototype=H.prototype;function re(D,Z,le){this.props=D,this.context=Z,this.refs=Q,this.updater=le||O}var ie=re.prototype=new ae;ie.constructor=re,j(ie,H.prototype),ie.isPureReactComponent=!0;var ge=Array.isArray,ue={H:null,A:null,T:null,S:null,V:null},Y=Object.prototype.hasOwnProperty;function C(D,Z,le,oe,_e,Ne){return le=Ne.ref,{$$typeof:i,type:D,key:Z,ref:le!==void 0?le:null,props:Ne}}function x(D,Z){return C(D.type,Z,void 0,void 0,void 0,D.props)}function I(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function P(D){var Z={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(le){return Z[le]})}var M=/\/+/g;function k(D,Z){return typeof D=="object"&&D!==null&&D.key!=null?P(""+D.key):Z.toString(36)}function R(){}function Ie(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(R,R):(D.status="pending",D.then(function(Z){D.status==="pending"&&(D.status="fulfilled",D.value=Z)},function(Z){D.status==="pending"&&(D.status="rejected",D.reason=Z)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function De(D,Z,le,oe,_e){var Ne=typeof D;(Ne==="undefined"||Ne==="boolean")&&(D=null);var Ae=!1;if(D===null)Ae=!0;else switch(Ne){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(D.$$typeof){case i:case e:Ae=!0;break;case T:return Ae=D._init,De(Ae(D._payload),Z,le,oe,_e)}}if(Ae)return _e=_e(D),Ae=oe===""?"."+k(D,0):oe,ge(_e)?(le="",Ae!=null&&(le=Ae.replace(M,"$&/")+"/"),De(_e,Z,le,"",function(zn){return zn})):_e!=null&&(I(_e)&&(_e=x(_e,le+(_e.key==null||D&&D.key===_e.key?"":(""+_e.key).replace(M,"$&/")+"/")+Ae)),Z.push(_e)),1;Ae=0;var Rt=oe===""?".":oe+":";if(ge(D))for(var nt=0;nt<D.length;nt++)oe=D[nt],Ne=Rt+k(oe,nt),Ae+=De(oe,Z,le,Ne,_e);else if(nt=S(D),typeof nt=="function")for(D=nt.call(D),nt=0;!(oe=D.next()).done;)oe=oe.value,Ne=Rt+k(oe,nt++),Ae+=De(oe,Z,le,Ne,_e);else if(Ne==="object"){if(typeof D.then=="function")return De(Ie(D),Z,le,oe,_e);throw Z=String(D),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function U(D,Z,le){if(D==null)return D;var oe=[],_e=0;return De(D,oe,"","",function(Ne){return Z.call(le,Ne,_e++)}),oe}function ne(D){if(D._status===-1){var Z=D._result;Z=Z(),Z.then(function(le){(D._status===0||D._status===-1)&&(D._status=1,D._result=le)},function(le){(D._status===0||D._status===-1)&&(D._status=2,D._result=le)}),D._status===-1&&(D._status=0,D._result=Z)}if(D._status===1)return D._result.default;throw D._result}var se=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function ye(){}return Pe.Children={map:U,forEach:function(D,Z,le){U(D,function(){Z.apply(this,arguments)},le)},count:function(D){var Z=0;return U(D,function(){Z++}),Z},toArray:function(D){return U(D,function(Z){return Z})||[]},only:function(D){if(!I(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Pe.Component=H,Pe.Fragment=n,Pe.Profiler=o,Pe.PureComponent=re,Pe.StrictMode=s,Pe.Suspense=g,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(D){return ue.H.useMemoCache(D)}},Pe.cache=function(D){return function(){return D.apply(null,arguments)}},Pe.cloneElement=function(D,Z,le){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var oe=j({},D.props),_e=D.key,Ne=void 0;if(Z!=null)for(Ae in Z.ref!==void 0&&(Ne=void 0),Z.key!==void 0&&(_e=""+Z.key),Z)!Y.call(Z,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&Z.ref===void 0||(oe[Ae]=Z[Ae]);var Ae=arguments.length-2;if(Ae===1)oe.children=le;else if(1<Ae){for(var Rt=Array(Ae),nt=0;nt<Ae;nt++)Rt[nt]=arguments[nt+2];oe.children=Rt}return C(D.type,_e,void 0,void 0,Ne,oe)},Pe.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Pe.createElement=function(D,Z,le){var oe,_e={},Ne=null;if(Z!=null)for(oe in Z.key!==void 0&&(Ne=""+Z.key),Z)Y.call(Z,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(_e[oe]=Z[oe]);var Ae=arguments.length-2;if(Ae===1)_e.children=le;else if(1<Ae){for(var Rt=Array(Ae),nt=0;nt<Ae;nt++)Rt[nt]=arguments[nt+2];_e.children=Rt}if(D&&D.defaultProps)for(oe in Ae=D.defaultProps,Ae)_e[oe]===void 0&&(_e[oe]=Ae[oe]);return C(D,Ne,void 0,void 0,null,_e)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(D){return{$$typeof:m,render:D}},Pe.isValidElement=I,Pe.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:ne}},Pe.memo=function(D,Z){return{$$typeof:_,type:D,compare:Z===void 0?null:Z}},Pe.startTransition=function(D){var Z=ue.T,le={};ue.T=le;try{var oe=D(),_e=ue.S;_e!==null&&_e(le,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(ye,se)}catch(Ne){se(Ne)}finally{ue.T=Z}},Pe.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},Pe.use=function(D){return ue.H.use(D)},Pe.useActionState=function(D,Z,le){return ue.H.useActionState(D,Z,le)},Pe.useCallback=function(D,Z){return ue.H.useCallback(D,Z)},Pe.useContext=function(D){return ue.H.useContext(D)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(D,Z){return ue.H.useDeferredValue(D,Z)},Pe.useEffect=function(D,Z,le){var oe=ue.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(D,Z)},Pe.useId=function(){return ue.H.useId()},Pe.useImperativeHandle=function(D,Z,le){return ue.H.useImperativeHandle(D,Z,le)},Pe.useInsertionEffect=function(D,Z){return ue.H.useInsertionEffect(D,Z)},Pe.useLayoutEffect=function(D,Z){return ue.H.useLayoutEffect(D,Z)},Pe.useMemo=function(D,Z){return ue.H.useMemo(D,Z)},Pe.useOptimistic=function(D,Z){return ue.H.useOptimistic(D,Z)},Pe.useReducer=function(D,Z,le){return ue.H.useReducer(D,Z,le)},Pe.useRef=function(D){return ue.H.useRef(D)},Pe.useState=function(D){return ue.H.useState(D)},Pe.useSyncExternalStore=function(D,Z,le){return ue.H.useSyncExternalStore(D,Z,le)},Pe.useTransition=function(){return ue.H.useTransition()},Pe.version="19.1.1",Pe}var Rv;function ag(){return Rv||(Rv=1,fm.exports=aS()),fm.exports}var te=ag();const oS=AE(te);var mm={exports:{}},Ql={},gm={exports:{}},pm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function lS(){return Iv||(Iv=1,(function(i){function e(U,ne){var se=U.length;U.push(ne);e:for(;0<se;){var ye=se-1>>>1,D=U[ye];if(0<o(D,ne))U[ye]=ne,U[se]=D,se=ye;else break e}}function n(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var ne=U[0],se=U.pop();if(se!==ne){U[0]=se;e:for(var ye=0,D=U.length,Z=D>>>1;ye<Z;){var le=2*(ye+1)-1,oe=U[le],_e=le+1,Ne=U[_e];if(0>o(oe,se))_e<D&&0>o(Ne,oe)?(U[ye]=Ne,U[_e]=se,ye=_e):(U[ye]=oe,U[le]=se,ye=le);else if(_e<D&&0>o(Ne,se))U[ye]=Ne,U[_e]=se,ye=_e;else break e}}return ne}function o(U,ne){var se=U.sortIndex-ne.sortIndex;return se!==0?se:U.id-ne.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var g=[],_=[],T=1,A=null,S=3,O=!1,j=!1,Q=!1,H=!1,ae=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function ge(U){for(var ne=n(_);ne!==null;){if(ne.callback===null)s(_);else if(ne.startTime<=U)s(_),ne.sortIndex=ne.expirationTime,e(g,ne);else break;ne=n(_)}}function ue(U){if(Q=!1,ge(U),!j)if(n(g)!==null)j=!0,Y||(Y=!0,k());else{var ne=n(_);ne!==null&&De(ue,ne.startTime-U)}}var Y=!1,C=-1,x=5,I=-1;function P(){return H?!0:!(i.unstable_now()-I<x)}function M(){if(H=!1,Y){var U=i.unstable_now();I=U;var ne=!0;try{e:{j=!1,Q&&(Q=!1,re(C),C=-1),O=!0;var se=S;try{t:{for(ge(U),A=n(g);A!==null&&!(A.expirationTime>U&&P());){var ye=A.callback;if(typeof ye=="function"){A.callback=null,S=A.priorityLevel;var D=ye(A.expirationTime<=U);if(U=i.unstable_now(),typeof D=="function"){A.callback=D,ge(U),ne=!0;break t}A===n(g)&&s(g),ge(U)}else s(g);A=n(g)}if(A!==null)ne=!0;else{var Z=n(_);Z!==null&&De(ue,Z.startTime-U),ne=!1}}break e}finally{A=null,S=se,O=!1}ne=void 0}}finally{ne?k():Y=!1}}}var k;if(typeof ie=="function")k=function(){ie(M)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Ie=R.port2;R.port1.onmessage=M,k=function(){Ie.postMessage(null)}}else k=function(){ae(M,0)};function De(U,ne){C=ae(function(){U(i.unstable_now())},ne)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(U){U.callback=null},i.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<U?Math.floor(1e3/U):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(U){switch(S){case 1:case 2:case 3:var ne=3;break;default:ne=S}var se=S;S=ne;try{return U()}finally{S=se}},i.unstable_requestPaint=function(){H=!0},i.unstable_runWithPriority=function(U,ne){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var se=S;S=U;try{return ne()}finally{S=se}},i.unstable_scheduleCallback=function(U,ne,se){var ye=i.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ye+se:ye):se=ye,U){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=se+D,U={id:T++,callback:ne,priorityLevel:U,startTime:se,expirationTime:D,sortIndex:-1},se>ye?(U.sortIndex=se,e(_,U),n(g)===null&&U===n(_)&&(Q?(re(C),C=-1):Q=!0,De(ue,se-ye))):(U.sortIndex=D,e(g,U),j||O||(j=!0,Y||(Y=!0,k()))),U},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(U){var ne=S;return function(){var se=S;S=ne;try{return U.apply(this,arguments)}finally{S=se}}}})(pm)),pm}var Cv;function cS(){return Cv||(Cv=1,gm.exports=lS()),gm.exports}var ym={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function uS(){if(Nv)return an;Nv=1;var i=ag();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,_,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:g,containerInfo:_,implementation:T}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,an.createPortal=function(g,_){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(g,_,null,T)},an.flushSync=function(g){var _=d.T,T=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=_,s.p=T,s.d.f()}},an.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(g,_))},an.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},an.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var T=_.as,A=m(T,_.crossOrigin),S=typeof _.integrity=="string"?_.integrity:void 0,O=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;T==="style"?s.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:A,integrity:S,fetchPriority:O}):T==="script"&&s.d.X(g,{crossOrigin:A,integrity:S,fetchPriority:O,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},an.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var T=m(_.as,_.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(g)},an.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var T=_.as,A=m(T,_.crossOrigin);s.d.L(g,T,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},an.preloadModule=function(g,_){if(typeof g=="string")if(_){var T=m(_.as,_.crossOrigin);s.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(g)},an.requestFormReset=function(g){s.d.r(g)},an.unstable_batchedUpdates=function(g,_){return g(_)},an.useFormState=function(g,_,T){return d.H.useFormState(g,_,T)},an.useFormStatus=function(){return d.H.useHostTransitionStatus()},an.version="19.1.1",an}var Dv;function hS(){if(Dv)return ym.exports;Dv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ym.exports=uS(),ym.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function dS(){if(Ov)return Ql;Ov=1;var i=cS(),e=ag(),n=hS();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(s(188))}function g(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),t;if(f===l)return m(h),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var E=!1,w=h.child;w;){if(w===a){E=!0,a=h,l=f;break}if(w===l){E=!0,l=h,a=f;break}w=w.sibling}if(!E){for(w=f.child;w;){if(w===a){E=!0,a=f,l=h;break}if(w===l){E=!0,l=f,a=h;break}w=w.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function _(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=_(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),ae=Symbol.for("react.provider"),re=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function Ie(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case j:return"Fragment";case H:return"Profiler";case Q:return"StrictMode";case ue:return"Suspense";case Y:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case ie:return(t.displayName||"Context")+".Provider";case re:return(t._context.displayName||"Context")+".Consumer";case ge:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return r=t.displayName||null,r!==null?r:Ie(t.type)||"Memo";case x:r=t._payload,t=t._init;try{return Ie(t(r))}catch{}}return null}var De=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},ye=[],D=-1;function Z(t){return{current:t}}function le(t){0>D||(t.current=ye[D],ye[D]=null,D--)}function oe(t,r){D++,ye[D]=t.current,t.current=r}var _e=Z(null),Ne=Z(null),Ae=Z(null),Rt=Z(null);function nt(t,r){switch(oe(Ae,r),oe(Ne,t),oe(_e,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Z_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Z_(r),t=J_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}le(_e),oe(_e,t)}function zn(){le(_e),le(Ne),le(Ae)}function nr(t){t.memoizedState!==null&&oe(Rt,t);var r=_e.current,a=J_(r,t.type);r!==a&&(oe(Ne,t),oe(_e,a))}function gr(t){Ne.current===t&&(le(_e),le(Ne)),Rt.current===t&&(le(Rt),zl._currentValue=se)}var Oi=Object.prototype.hasOwnProperty,pr=i.unstable_scheduleCallback,yr=i.unstable_cancelCallback,Fr=i.unstable_shouldYield,Ea=i.unstable_requestPaint,En=i.unstable_now,Bo=i.unstable_getCurrentPriorityLevel,Is=i.unstable_ImmediatePriority,Gr=i.unstable_UserBlockingPriority,Qr=i.unstable_NormalPriority,Ho=i.unstable_LowPriority,Pi=i.unstable_IdlePriority,Cs=i.log,Ta=i.unstable_setDisableYieldValue,ht=null,Ye=null;function fn(t){if(typeof Cs=="function"&&Ta(t),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(ht,t)}catch{}}var Bt=Math.clz32?Math.clz32:Kr,wa=Math.log,Fo=Math.LN2;function Kr(t){return t>>>=0,t===0?32:31-(wa(t)/Fo|0)|0}var _r=256,Yr=4194304;function In(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Xr(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~f,l!==0?h=In(l):(E&=w,E!==0?h=In(E):a||(a=w&~t,a!==0&&(h=In(a))))):(w=l&~f,w!==0?h=In(w):E!==0?h=In(E):a||(a=l&~t,a!==0&&(h=In(a)))),h===0?0:r!==0&&r!==h&&(r&f)===0&&(f=h&-h,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:h}function $r(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Wr(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ns(){var t=_r;return _r<<=1,(_r&4194048)===0&&(_r=256),t}function Ds(){var t=Yr;return Yr<<=1,(Yr&62914560)===0&&(Yr=4194304),t}function rr(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function ir(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Os(t,r,a,l,h,f){var E=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,N=t.expirationTimes,B=t.hiddenUpdates;for(a=E&~a;0<a;){var X=31-Bt(a),J=1<<X;w[X]=0,N[X]=-1;var F=B[X];if(F!==null)for(B[X]=null,X=0;X<F.length;X++){var G=F[X];G!==null&&(G.lane&=-536870913)}a&=~J}l!==0&&qn(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(E&~r))}function qn(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Bt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function de(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Bt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function fe(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function dt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Tn(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:_v(t.type))}function jc(t,r){var a=ne.p;try{return ne.p=t,r()}finally{ne.p=a}}var ft=Math.random().toString(36).slice(2),kt="__reactFiber$"+ft,It="__reactProps$"+ft,Bn="__reactContainer$"+ft,Go="__reactEvents$"+ft,md="__reactListeners$"+ft,Mi="__reactHandles$"+ft,Lc="__reactResources$"+ft,Ps="__reactMarker$"+ft;function Vi(t){delete t[kt],delete t[It],delete t[Go],delete t[md],delete t[Mi]}function Zr(t){var r=t[kt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Bn]||a[kt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=rv(t);t!==null;){if(a=t[kt])return a;t=rv(t)}return r}t=a,a=t.parentNode}return null}function vr(t){if(t=t[kt]||t[Bn]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Er(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function mn(t){var r=t[Lc];return r||(r=t[Lc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function bt(t){t[Ps]=!0}var Qo=new Set,ba={};function sr(t,r){Jr(t,r),Jr(t+"Capture",r)}function Jr(t,r){for(ba[t]=r,t=0;t<r.length;t++)Qo.add(r[t])}var Uc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zc={},Ms={};function qc(t){return Oi.call(Ms,t)?!0:Oi.call(zc,t)?!1:Uc.test(t)?Ms[t]=!0:(zc[t]=!0,!1)}function ki(t,r,a){if(qc(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Tr(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function $t(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Vs,Bc;function ei(t){if(Vs===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Vs=r&&r[1]||"",Bc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vs+t+Bc}var Aa=!1;function Sa(t,r){if(!t||Aa)return"";Aa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(G){var F=G}Reflect.construct(t,[],J)}else{try{J.call()}catch(G){F=G}t.call(J.prototype)}}else{try{throw Error()}catch(G){F=G}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(G){if(G&&F&&typeof G.stack=="string")return[G.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),E=f[0],w=f[1];if(E&&w){var N=E.split(`
`),B=w.split(`
`);for(h=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===N.length||h===B.length)for(l=N.length-1,h=B.length-1;1<=l&&0<=h&&N[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(N[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||N[l]!==B[h]){var X=`
`+N[l].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=l&&0<=h);break}}}finally{Aa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ei(a):""}function Ko(t){switch(t.tag){case 26:case 27:case 5:return ei(t.type);case 16:return ei("Lazy");case 13:return ei("Suspense");case 19:return ei("SuspenseList");case 0:case 15:return Sa(t.type,!1);case 11:return Sa(t.type.render,!1);case 1:return Sa(t.type,!0);case 31:return ei("Activity");default:return""}}function xa(t){try{var r="";do r+=Ko(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function gn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function gd(t){var r=Yo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,f.call(this,E)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ra(t){t._valueTracker||(t._valueTracker=gd(t))}function Xo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Yo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function ks(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var pd=/[\n"\\]/g;function Ct(t){return t.replace(pd,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Cn(t,r,a,l,h,f,E,w){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),r!=null?E==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+gn(r)):t.value!==""+gn(r)&&(t.value=""+gn(r)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),r!=null?ji(t,E,gn(r)):a!=null?ji(t,E,gn(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+gn(w):t.removeAttribute("name")}function js(t,r,a,l,h,f,E,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null))return;a=a!=null?""+gn(a):"",r=r!=null?""+gn(r):a,w||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function ji(t,r,a){r==="number"&&ks(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ti(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+gn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function rt(t,r,a){if(r!=null&&(r=""+gn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+gn(a):""}function Ls(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(De(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=gn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Hn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Us=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hc(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Us.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function $o(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&Hc(t,h,l)}else for(var f in r)r.hasOwnProperty(f)&&Hc(t,f,r[f])}function Wo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_d=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ia(t){return _d.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var ni=null;function Fn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ri=null,ii=null;function Zo(t){var r=vr(t);if(r&&(t=r.stateNode)){var a=t[It]||null;e:switch(t=r.stateNode,r.type){case"input":if(Cn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ct(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[It]||null;if(!h)throw Error(s(90));Cn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Xo(l)}break e;case"textarea":rt(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ti(t,!!a.multiple,r,!1)}}}var wr=!1;function Fc(t,r,a){if(wr)return t(r,a);wr=!0;try{var l=t(r);return l}finally{if(wr=!1,(ri!==null||ii!==null)&&(ju(),ri&&(r=ri,t=ii,ii=ri=null,Zo(r),t)))for(r=0;r<t.length;r++)Zo(t[r])}}function zs(t,r){var a=t.stateNode;if(a===null)return null;var l=a[It]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gn=!1;if(ar)try{var qs={};Object.defineProperty(qs,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",qs,qs),window.removeEventListener("test",qs,qs)}catch{Gn=!1}var br=null,Li=null,si=null;function Jo(){if(si)return si;var t,r=Li,a=r.length,l,h="value"in br?br.value:br.textContent,f=h.length;for(t=0;t<a&&r[t]===h[t];t++);var E=a-t;for(l=1;l<=E&&r[a-l]===h[f-l];l++);return si=h.slice(t,1<l?1-l:void 0)}function Ar(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Sr(){return!0}function el(){return!1}function Ht(t){function r(a,l,h,f,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Sr:el,this.isPropagationStopped=el,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Sr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Sr)},persist:function(){},isPersistent:Sr}),r}var We={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=Ht(We),Bs=T({},We,{view:0,detail:0}),Gc=Ht(Bs),Na,Da,xr,Hs=T({},Bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xr&&(xr&&t.type==="mousemove"?(Na=t.screenX-xr.screenX,Da=t.screenY-xr.screenY):Da=Na=0,xr=t),Na)},movementY:function(t){return"movementY"in t?t.movementY:Da}}),Qn=Ht(Hs),Qc=T({},Hs,{dataTransfer:0}),vd=Ht(Qc),Fs=T({},Bs,{relatedTarget:0}),Oa=Ht(Fs),tl=T({},We,{animationName:0,elapsedTime:0,pseudoElement:0}),Pa=Ht(tl),Kc=T({},We,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ma=Ht(Kc),Ed=T({},We,{data:0}),nl=Ht(Ed),Gs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rl(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Xc[t])?!!r[t]:!1}function Qs(){return rl}var $c=T({},Bs,{key:function(t){if(t.key){var r=Gs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ar(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qs,charCode:function(t){return t.type==="keypress"?Ar(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ar(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Va=Ht($c),Wc=T({},Hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),il=Ht(Wc),ai=T({},Bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qs}),Zc=Ht(ai),Jc=T({},We,{propertyName:0,elapsedTime:0,pseudoElement:0}),eu=Ht(Jc),tu=T({},Hs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ka=Ht(tu),pn=T({},We,{newState:0,oldState:0}),nu=Ht(pn),ru=[9,13,27,32],Rr=ar&&"CompositionEvent"in window,u=null;ar&&"documentMode"in document&&(u=document.documentMode);var p=ar&&"TextEvent"in window&&!u,v=ar&&(!Rr||u&&8<u&&11>=u),b=" ",z=!1;function K(t,r){switch(t){case"keyup":return ru.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Be=!1;function jt(t,r){switch(t){case"compositionend":return ce(r);case"keypress":return r.which!==32?null:(z=!0,b);case"textInput":return t=r.data,t===b&&z?null:t;default:return null}}function He(t,r){if(Be)return t==="compositionend"||!Rr&&K(t,r)?(t=Jo(),si=Li=br=null,Be=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var Ft={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Ft[t.type]:r==="textarea"}function oi(t,r,a,l){ri?ii?ii.push(l):ii=[l]:ri=l,r=Hu(r,"onChange"),0<r.length&&(a=new Ca("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Wt=null,Ir=null;function sl(t){K_(t,0)}function iu(t){var r=Er(t);if(Xo(r))return t}function mp(t,r){if(t==="change")return r}var gp=!1;if(ar){var Td;if(ar){var wd="oninput"in document;if(!wd){var pp=document.createElement("div");pp.setAttribute("oninput","return;"),wd=typeof pp.oninput=="function"}Td=wd}else Td=!1;gp=Td&&(!document.documentMode||9<document.documentMode)}function yp(){Wt&&(Wt.detachEvent("onpropertychange",_p),Ir=Wt=null)}function _p(t){if(t.propertyName==="value"&&iu(Ir)){var r=[];oi(r,Ir,t,Fn(t)),Fc(sl,r)}}function Mb(t,r,a){t==="focusin"?(yp(),Wt=r,Ir=a,Wt.attachEvent("onpropertychange",_p)):t==="focusout"&&yp()}function Vb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iu(Ir)}function kb(t,r){if(t==="click")return iu(r)}function jb(t,r){if(t==="input"||t==="change")return iu(r)}function Lb(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Nn=typeof Object.is=="function"?Object.is:Lb;function al(t,r){if(Nn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Oi.call(r,h)||!Nn(t[h],r[h]))return!1}return!0}function vp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ep(t,r){var a=vp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=vp(a)}}function Tp(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Tp(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function wp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=ks(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=ks(t.document)}return r}function bd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Ub=ar&&"documentMode"in document&&11>=document.documentMode,ja=null,Ad=null,ol=null,Sd=!1;function bp(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sd||ja==null||ja!==ks(l)||(l=ja,"selectionStart"in l&&bd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ol&&al(ol,l)||(ol=l,l=Hu(Ad,"onSelect"),0<l.length&&(r=new Ca("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=ja)))}function Ks(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var La={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionrun:Ks("Transition","TransitionRun"),transitionstart:Ks("Transition","TransitionStart"),transitioncancel:Ks("Transition","TransitionCancel"),transitionend:Ks("Transition","TransitionEnd")},xd={},Ap={};ar&&(Ap=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function Ys(t){if(xd[t])return xd[t];if(!La[t])return t;var r=La[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Ap)return xd[t]=r[a];return t}var Sp=Ys("animationend"),xp=Ys("animationiteration"),Rp=Ys("animationstart"),zb=Ys("transitionrun"),qb=Ys("transitionstart"),Bb=Ys("transitioncancel"),Ip=Ys("transitionend"),Cp=new Map,Rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rd.push("scrollEnd");function or(t,r){Cp.set(t,r),sr(r,[t])}var Np=new WeakMap;function Kn(t,r){if(typeof t=="object"&&t!==null){var a=Np.get(t);return a!==void 0?a:(r={value:t,source:r,stack:xa(r)},Np.set(t,r),r)}return{value:t,source:r,stack:xa(r)}}var Yn=[],Ua=0,Id=0;function su(){for(var t=Ua,r=Id=Ua=0;r<t;){var a=Yn[r];Yn[r++]=null;var l=Yn[r];Yn[r++]=null;var h=Yn[r];Yn[r++]=null;var f=Yn[r];if(Yn[r++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}f!==0&&Dp(a,h,f)}}function au(t,r,a,l){Yn[Ua++]=t,Yn[Ua++]=r,Yn[Ua++]=a,Yn[Ua++]=l,Id|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Cd(t,r,a,l){return au(t,r,a,l),ou(t)}function za(t,r){return au(t,null,null,r),ou(t)}function Dp(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&r!==null&&(h=31-Bt(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),f):null}function ou(t){if(50<Ol)throw Ol=0,kf=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var qa={};function Hb(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,r,a,l){return new Hb(t,r,a,l)}function Nd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function li(t,r){var a=t.alternate;return a===null?(a=Dn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Op(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function lu(t,r,a,l,h,f){var E=0;if(l=t,typeof t=="function")Nd(t)&&(E=1);else if(typeof t=="string")E=GA(t,a,_e.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=Dn(31,a,r,h),t.elementType=I,t.lanes=f,t;case j:return Xs(a.children,h,f,r);case Q:E=8,h|=24;break;case H:return t=Dn(12,a,r,h|2),t.elementType=H,t.lanes=f,t;case ue:return t=Dn(13,a,r,h),t.elementType=ue,t.lanes=f,t;case Y:return t=Dn(19,a,r,h),t.elementType=Y,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ae:case ie:E=10;break e;case re:E=9;break e;case ge:E=11;break e;case C:E=14;break e;case x:E=16,l=null;break e}E=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Dn(E,a,r,h),r.elementType=t,r.type=l,r.lanes=f,r}function Xs(t,r,a,l){return t=Dn(7,t,l,r),t.lanes=a,t}function Dd(t,r,a){return t=Dn(6,t,null,r),t.lanes=a,t}function Od(t,r,a){return r=Dn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ba=[],Ha=0,cu=null,uu=0,Xn=[],$n=0,$s=null,ci=1,ui="";function Ws(t,r){Ba[Ha++]=uu,Ba[Ha++]=cu,cu=t,uu=r}function Pp(t,r,a){Xn[$n++]=ci,Xn[$n++]=ui,Xn[$n++]=$s,$s=t;var l=ci;t=ui;var h=32-Bt(l)-1;l&=~(1<<h),a+=1;var f=32-Bt(r)+h;if(30<f){var E=h-h%5;f=(l&(1<<E)-1).toString(32),l>>=E,h-=E,ci=1<<32-Bt(r)+h|a<<h|l,ui=f+t}else ci=1<<f|a<<h|l,ui=t}function Pd(t){t.return!==null&&(Ws(t,1),Pp(t,1,0))}function Md(t){for(;t===cu;)cu=Ba[--Ha],Ba[Ha]=null,uu=Ba[--Ha],Ba[Ha]=null;for(;t===$s;)$s=Xn[--$n],Xn[$n]=null,ui=Xn[--$n],Xn[$n]=null,ci=Xn[--$n],Xn[$n]=null}var yn=null,_t=null,Xe=!1,Zs=null,Cr=!1,Vd=Error(s(519));function Js(t){var r=Error(s(418,""));throw ul(Kn(r,t)),Vd}function Mp(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[kt]=t,r[It]=l,a){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(a=0;a<Ml.length;a++)Le(Ml[a],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),js(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ra(r);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Ls(r,l.value,l.defaultValue,l.children),Ra(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||W_(r.textContent,a)?(l.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),l.onScroll!=null&&Le("scroll",r),l.onScrollEnd!=null&&Le("scrollend",r),l.onClick!=null&&(r.onclick=Fu),r=!0):r=!1,r||Js(t)}function Vp(t){for(yn=t.return;yn;)switch(yn.tag){case 5:case 13:Cr=!1;return;case 27:case 3:Cr=!0;return;default:yn=yn.return}}function ll(t){if(t!==yn)return!1;if(!Xe)return Vp(t),Xe=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Zf(t.type,t.memoizedProps)),a=!a),a&&_t&&Js(t),Vp(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){_t=cr(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}_t=null}}else r===27?(r=_t,es(t.type)?(t=nm,nm=null,_t=t):_t=r):_t=yn?cr(t.stateNode.nextSibling):null;return!0}function cl(){_t=yn=null,Xe=!1}function kp(){var t=Zs;return t!==null&&(An===null?An=t:An.push.apply(An,t),Zs=null),t}function ul(t){Zs===null?Zs=[t]:Zs.push(t)}var kd=Z(null),ea=null,hi=null;function Ui(t,r,a){oe(kd,r._currentValue),r._currentValue=a}function di(t){t._currentValue=kd.current,le(kd)}function jd(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Ld(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var E=h.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=h;for(var N=0;N<r.length;N++)if(w.context===r[N]){f.lanes|=a,w=f.alternate,w!==null&&(w.lanes|=a),jd(f.return,a,t),l||(E=null);break e}f=w.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(s(341));E.lanes|=a,f=E.alternate,f!==null&&(f.lanes|=a),jd(E,a,t),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===t){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function hl(t,r,a,l){t=null;for(var h=r,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var w=h.type;Nn(h.pendingProps.value,E.value)||(t!==null?t.push(w):t=[w])}}else if(h===Rt.current){if(E=h.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(zl):t=[zl])}h=h.return}t!==null&&Ld(r,t,a,l),r.flags|=262144}function hu(t){for(t=t.firstContext;t!==null;){if(!Nn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ta(t){ea=t,hi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function sn(t){return jp(ea,t)}function du(t,r){return ea===null&&ta(t),jp(t,r)}function jp(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},hi===null){if(t===null)throw Error(s(308));hi=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else hi=hi.next=r;return a}var Fb=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},Gb=i.unstable_scheduleCallback,Qb=i.unstable_NormalPriority,Ut={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ud(){return{controller:new Fb,data:new Map,refCount:0}}function dl(t){t.refCount--,t.refCount===0&&Gb(Qb,function(){t.controller.abort()})}var fl=null,zd=0,Fa=0,Ga=null;function Kb(t,r){if(fl===null){var a=fl=[];zd=0,Fa=Hf(),Ga={status:"pending",value:void 0,then:function(l){a.push(l)}}}return zd++,r.then(Lp,Lp),r}function Lp(){if(--zd===0&&fl!==null){Ga!==null&&(Ga.status="fulfilled");var t=fl;fl=null,Fa=0,Ga=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Yb(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Up=U.S;U.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Kb(t,r),Up!==null&&Up(t,r)};var na=Z(null);function qd(){var t=na.current;return t!==null?t:ut.pooledCache}function fu(t,r){r===null?oe(na,na.current):oe(na,r.pool)}function zp(){var t=qd();return t===null?null:{parent:Ut._currentValue,pool:t}}var ml=Error(s(460)),qp=Error(s(474)),mu=Error(s(542)),Bd={then:function(){}};function Bp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function gu(){}function Hp(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(gu,gu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Gp(t),t;default:if(typeof r.status=="string")r.then(gu,gu);else{if(t=ut,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Gp(t),t}throw gl=r,ml}}var gl=null;function Fp(){if(gl===null)throw Error(s(459));var t=gl;return gl=null,t}function Gp(t){if(t===ml||t===mu)throw Error(s(483))}var zi=!1;function Hd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function qi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Bi(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(et&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=ou(t),Dp(t,null,a),r}return au(t,l,r,a),ou(t)}function pl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,de(t,a)}}function Gd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=E:f=f.next=E,a=a.next}while(a!==null);f===null?h=f=r:f=f.next=r}else h=f=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Qd=!1;function yl(){if(Qd){var t=Ga;if(t!==null)throw t}}function _l(t,r,a,l){Qd=!1;var h=t.updateQueue;zi=!1;var f=h.firstBaseUpdate,E=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var N=w,B=N.next;N.next=null,E===null?f=B:E.next=B,E=N;var X=t.alternate;X!==null&&(X=X.updateQueue,w=X.lastBaseUpdate,w!==E&&(w===null?X.firstBaseUpdate=B:w.next=B,X.lastBaseUpdate=N))}if(f!==null){var J=h.baseState;E=0,X=B=N=null,w=f;do{var F=w.lane&-536870913,G=F!==w.lane;if(G?(Fe&F)===F:(l&F)===F){F!==0&&F===Fa&&(Qd=!0),X!==null&&(X=X.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Re=t,we=w;F=r;var at=a;switch(we.tag){case 1:if(Re=we.payload,typeof Re=="function"){J=Re.call(at,J,F);break e}J=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=we.payload,F=typeof Re=="function"?Re.call(at,J,F):Re,F==null)break e;J=T({},J,F);break e;case 2:zi=!0}}F=w.callback,F!==null&&(t.flags|=64,G&&(t.flags|=8192),G=h.callbacks,G===null?h.callbacks=[F]:G.push(F))}else G={lane:F,tag:w.tag,payload:w.payload,callback:w.callback,next:null},X===null?(B=X=G,N=J):X=X.next=G,E|=F;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;G=w,w=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);X===null&&(N=J),h.baseState=N,h.firstBaseUpdate=B,h.lastBaseUpdate=X,f===null&&(h.shared.lanes=0),$i|=E,t.lanes=E,t.memoizedState=J}}function Qp(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Kp(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Qp(a[t],r)}var Qa=Z(null),pu=Z(0);function Yp(t,r){t=vi,oe(pu,t),oe(Qa,r),vi=t|r.baseLanes}function Kd(){oe(pu,vi),oe(Qa,Qa.current)}function Yd(){vi=pu.current,le(Qa),le(pu)}var Hi=0,Ve=null,it=null,Nt=null,yu=!1,Ka=!1,ra=!1,_u=0,vl=0,Ya=null,Xb=0;function At(){throw Error(s(321))}function Xd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Nn(t[a],r[a]))return!1;return!0}function $d(t,r,a,l,h,f){return Hi=f,Ve=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,U.H=t===null||t.memoizedState===null?Dy:Oy,ra=!1,f=a(l,h),ra=!1,Ka&&(f=$p(r,a,l,h)),Xp(t),f}function Xp(t){U.H=Au;var r=it!==null&&it.next!==null;if(Hi=0,Nt=it=Ve=null,yu=!1,vl=0,Ya=null,r)throw Error(s(300));t===null||Gt||(t=t.dependencies,t!==null&&hu(t)&&(Gt=!0))}function $p(t,r,a,l){Ve=t;var h=0;do{if(Ka&&(Ya=null),vl=0,Ka=!1,25<=h)throw Error(s(301));if(h+=1,Nt=it=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}U.H=nA,f=r(a,l)}while(Ka);return f}function $b(){var t=U.H,r=t.useState()[0];return r=typeof r.then=="function"?El(r):r,t=t.useState()[0],(it!==null?it.memoizedState:null)!==t&&(Ve.flags|=1024),r}function Wd(){var t=_u!==0;return _u=0,t}function Zd(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Jd(t){if(yu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}yu=!1}Hi=0,Nt=it=Ve=null,Ka=!1,vl=_u=0,Ya=null}function wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Ve.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function Dt(){if(it===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var r=Nt===null?Ve.memoizedState:Nt.next;if(r!==null)Nt=r,it=t;else{if(t===null)throw Ve.alternate===null?Error(s(467)):Error(s(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Nt===null?Ve.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function ef(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function El(t){var r=vl;return vl+=1,Ya===null&&(Ya=[]),t=Hp(Ya,t,r),r=Ve,(Nt===null?r.memoizedState:Nt.next)===null&&(r=r.alternate,U.H=r===null||r.memoizedState===null?Dy:Oy),t}function vu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return El(t);if(t.$$typeof===ie)return sn(t)}throw Error(s(438,String(t)))}function tf(t){var r=null,a=Ve.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=ef(),Ve.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=P;return r.index++,a}function fi(t,r){return typeof r=="function"?r(t):r}function Eu(t){var r=Dt();return nf(r,it,t)}function nf(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var E=h.next;h.next=f.next,f.next=E}r.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{r=h.next;var w=E=null,N=null,B=r,X=!1;do{var J=B.lane&-536870913;if(J!==B.lane?(Fe&J)===J:(Hi&J)===J){var F=B.revertLane;if(F===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),J===Fa&&(X=!0);else if((Hi&F)===F){B=B.next,F===Fa&&(X=!0);continue}else J={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(w=N=J,E=f):N=N.next=J,Ve.lanes|=F,$i|=F;J=B.action,ra&&a(f,J),f=B.hasEagerState?B.eagerState:a(f,J)}else F={lane:J,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(w=N=F,E=f):N=N.next=F,Ve.lanes|=J,$i|=J;B=B.next}while(B!==null&&B!==r);if(N===null?E=f:N.next=w,!Nn(f,t.memoizedState)&&(Gt=!0,X&&(a=Ga,a!==null)))throw a;t.memoizedState=f,t.baseState=E,t.baseQueue=N,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function rf(t){var r=Dt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=r.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do f=t(f,E.action),E=E.next;while(E!==h);Nn(f,r.memoizedState)||(Gt=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function Wp(t,r,a){var l=Ve,h=Dt(),f=Xe;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var E=!Nn((it||h).memoizedState,a);E&&(h.memoizedState=a,Gt=!0),h=h.queue;var w=ey.bind(null,l,h,t);if(Tl(2048,8,w,[t]),h.getSnapshot!==r||E||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,Xa(9,Tu(),Jp.bind(null,l,h,a,r),null),ut===null)throw Error(s(349));f||(Hi&124)!==0||Zp(l,r,a)}return a}function Zp(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Ve.updateQueue,r===null?(r=ef(),Ve.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Jp(t,r,a,l){r.value=a,r.getSnapshot=l,ty(r)&&ny(t)}function ey(t,r,a){return a(function(){ty(r)&&ny(t)})}function ty(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Nn(t,a)}catch{return!0}}function ny(t){var r=za(t,2);r!==null&&kn(r,t,2)}function sf(t){var r=wn();if(typeof t=="function"){var a=t;if(t=a(),ra){fn(!0);try{a()}finally{fn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:t},r}function ry(t,r,a,l){return t.baseState=a,nf(t,it,typeof l=="function"?l:fi)}function Wb(t,r,a,l,h){if(bu(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};U.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,iy(r,f)):(f.next=a.next,r.pending=a.next=f)}}function iy(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var f=U.T,E={};U.T=E;try{var w=a(h,l),N=U.S;N!==null&&N(E,w),sy(t,r,w)}catch(B){af(t,r,B)}finally{U.T=f}}else try{f=a(h,l),sy(t,r,f)}catch(B){af(t,r,B)}}function sy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ay(t,r,l)},function(l){return af(t,r,l)}):ay(t,r,a)}function ay(t,r,a){r.status="fulfilled",r.value=a,oy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,iy(t,a)))}function af(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,oy(r),r=r.next;while(r!==l)}t.action=null}function oy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function ly(t,r){return r}function cy(t,r){if(Xe){var a=ut.formState;if(a!==null){e:{var l=Ve;if(Xe){if(_t){t:{for(var h=_t,f=Cr;h.nodeType!==8;){if(!f){h=null;break t}if(h=cr(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){_t=cr(h.nextSibling),l=h.data==="F!";break e}}Js(l)}l=!1}l&&(r=a[0])}}return a=wn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ly,lastRenderedState:r},a.queue=l,a=Iy.bind(null,Ve,l),l.dispatch=a,l=sf(!1),f=hf.bind(null,Ve,!1,l.queue),l=wn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=Wb.bind(null,Ve,h,f,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function uy(t){var r=Dt();return hy(r,it,t)}function hy(t,r,a){if(r=nf(t,r,ly)[0],t=Eu(fi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=El(r)}catch(E){throw E===ml?mu:E}else l=r;r=Dt();var h=r.queue,f=h.dispatch;return a!==r.memoizedState&&(Ve.flags|=2048,Xa(9,Tu(),Zb.bind(null,h,a),null)),[l,f,t]}function Zb(t,r){t.action=r}function dy(t){var r=Dt(),a=it;if(a!==null)return hy(r,a,t);Dt(),r=r.memoizedState,a=Dt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Xa(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Ve.updateQueue,r===null&&(r=ef(),Ve.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function Tu(){return{destroy:void 0,resource:void 0}}function fy(){return Dt().memoizedState}function wu(t,r,a,l){var h=wn();l=l===void 0?null:l,Ve.flags|=t,h.memoizedState=Xa(1|r,Tu(),a,l)}function Tl(t,r,a,l){var h=Dt();l=l===void 0?null:l;var f=h.memoizedState.inst;it!==null&&l!==null&&Xd(l,it.memoizedState.deps)?h.memoizedState=Xa(r,f,a,l):(Ve.flags|=t,h.memoizedState=Xa(1|r,f,a,l))}function my(t,r){wu(8390656,8,t,r)}function gy(t,r){Tl(2048,8,t,r)}function py(t,r){return Tl(4,2,t,r)}function yy(t,r){return Tl(4,4,t,r)}function _y(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function vy(t,r,a){a=a!=null?a.concat([t]):null,Tl(4,4,_y.bind(null,r,t),a)}function of(){}function Ey(t,r){var a=Dt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Xd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Ty(t,r){var a=Dt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Xd(r,l[1]))return l[0];if(l=t(),ra){fn(!0);try{t()}finally{fn(!1)}}return a.memoizedState=[l,r],l}function lf(t,r,a){return a===void 0||(Hi&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=A_(),Ve.lanes|=t,$i|=t,a)}function wy(t,r,a,l){return Nn(a,r)?a:Qa.current!==null?(t=lf(t,a,l),Nn(t,r)||(Gt=!0),t):(Hi&42)===0?(Gt=!0,t.memoizedState=a):(t=A_(),Ve.lanes|=t,$i|=t,r)}function by(t,r,a,l,h){var f=ne.p;ne.p=f!==0&&8>f?f:8;var E=U.T,w={};U.T=w,hf(t,!1,r,a);try{var N=h(),B=U.S;if(B!==null&&B(w,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var X=Yb(N,l);wl(t,r,X,Vn(t))}else wl(t,r,l,Vn(t))}catch(J){wl(t,r,{then:function(){},status:"rejected",reason:J},Vn())}finally{ne.p=f,U.T=E}}function Jb(){}function cf(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=Ay(t).queue;by(t,h,r,se,a===null?Jb:function(){return Sy(t),a(l)})}function Ay(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:se},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Sy(t){var r=Ay(t).next.queue;wl(t,r,{},Vn())}function uf(){return sn(zl)}function xy(){return Dt().memoizedState}function Ry(){return Dt().memoizedState}function eA(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Vn();t=qi(a);var l=Bi(r,t,a);l!==null&&(kn(l,r,a),pl(l,r,a)),r={cache:Ud()},t.payload=r;return}r=r.return}}function tA(t,r,a){var l=Vn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},bu(t)?Cy(r,a):(a=Cd(t,r,a,l),a!==null&&(kn(a,t,l),Ny(a,r,l)))}function Iy(t,r,a){var l=Vn();wl(t,r,a,l)}function wl(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(bu(t))Cy(r,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var E=r.lastRenderedState,w=f(E,a);if(h.hasEagerState=!0,h.eagerState=w,Nn(w,E))return au(t,r,h,0),ut===null&&su(),!1}catch{}finally{}if(a=Cd(t,r,h,l),a!==null)return kn(a,t,l),Ny(a,r,l),!0}return!1}function hf(t,r,a,l){if(l={lane:2,revertLane:Hf(),action:l,hasEagerState:!1,eagerState:null,next:null},bu(t)){if(r)throw Error(s(479))}else r=Cd(t,a,l,2),r!==null&&kn(r,t,2)}function bu(t){var r=t.alternate;return t===Ve||r!==null&&r===Ve}function Cy(t,r){Ka=yu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Ny(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,de(t,a)}}var Au={readContext:sn,use:vu,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At},Dy={readContext:sn,use:vu,useCallback:function(t,r){return wn().memoizedState=[t,r===void 0?null:r],t},useContext:sn,useEffect:my,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,wu(4194308,4,_y.bind(null,r,t),a)},useLayoutEffect:function(t,r){return wu(4194308,4,t,r)},useInsertionEffect:function(t,r){wu(4,2,t,r)},useMemo:function(t,r){var a=wn();r=r===void 0?null:r;var l=t();if(ra){fn(!0);try{t()}finally{fn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=wn();if(a!==void 0){var h=a(r);if(ra){fn(!0);try{a(r)}finally{fn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=tA.bind(null,Ve,t),[l.memoizedState,t]},useRef:function(t){var r=wn();return t={current:t},r.memoizedState=t},useState:function(t){t=sf(t);var r=t.queue,a=Iy.bind(null,Ve,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:of,useDeferredValue:function(t,r){var a=wn();return lf(a,t,r)},useTransition:function(){var t=sf(!1);return t=by.bind(null,Ve,t.queue,!0,!1),wn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Ve,h=wn();if(Xe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),ut===null)throw Error(s(349));(Fe&124)!==0||Zp(l,r,a)}h.memoizedState=a;var f={value:a,getSnapshot:r};return h.queue=f,my(ey.bind(null,l,f,t),[t]),l.flags|=2048,Xa(9,Tu(),Jp.bind(null,l,f,a,r),null),a},useId:function(){var t=wn(),r=ut.identifierPrefix;if(Xe){var a=ui,l=ci;a=(l&~(1<<32-Bt(l)-1)).toString(32)+a,r=""+r+"R"+a,a=_u++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=Xb++,r=""+r+"r"+a.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:uf,useFormState:cy,useActionState:cy,useOptimistic:function(t){var r=wn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=hf.bind(null,Ve,!0,a),a.dispatch=r,[t,r]},useMemoCache:tf,useCacheRefresh:function(){return wn().memoizedState=eA.bind(null,Ve)}},Oy={readContext:sn,use:vu,useCallback:Ey,useContext:sn,useEffect:gy,useImperativeHandle:vy,useInsertionEffect:py,useLayoutEffect:yy,useMemo:Ty,useReducer:Eu,useRef:fy,useState:function(){return Eu(fi)},useDebugValue:of,useDeferredValue:function(t,r){var a=Dt();return wy(a,it.memoizedState,t,r)},useTransition:function(){var t=Eu(fi)[0],r=Dt().memoizedState;return[typeof t=="boolean"?t:El(t),r]},useSyncExternalStore:Wp,useId:xy,useHostTransitionStatus:uf,useFormState:uy,useActionState:uy,useOptimistic:function(t,r){var a=Dt();return ry(a,it,t,r)},useMemoCache:tf,useCacheRefresh:Ry},nA={readContext:sn,use:vu,useCallback:Ey,useContext:sn,useEffect:gy,useImperativeHandle:vy,useInsertionEffect:py,useLayoutEffect:yy,useMemo:Ty,useReducer:rf,useRef:fy,useState:function(){return rf(fi)},useDebugValue:of,useDeferredValue:function(t,r){var a=Dt();return it===null?lf(a,t,r):wy(a,it.memoizedState,t,r)},useTransition:function(){var t=rf(fi)[0],r=Dt().memoizedState;return[typeof t=="boolean"?t:El(t),r]},useSyncExternalStore:Wp,useId:xy,useHostTransitionStatus:uf,useFormState:dy,useActionState:dy,useOptimistic:function(t,r){var a=Dt();return it!==null?ry(a,it,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:tf,useCacheRefresh:Ry},$a=null,bl=0;function Su(t){var r=bl;return bl+=1,$a===null&&($a=[]),Hp($a,t,r)}function Al(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function xu(t,r){throw r.$$typeof===A?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Py(t){var r=t._init;return r(t._payload)}function My(t){function r(L,V){if(t){var q=L.deletions;q===null?(L.deletions=[V],L.flags|=16):q.push(V)}}function a(L,V){if(!t)return null;for(;V!==null;)r(L,V),V=V.sibling;return null}function l(L){for(var V=new Map;L!==null;)L.key!==null?V.set(L.key,L):V.set(L.index,L),L=L.sibling;return V}function h(L,V){return L=li(L,V),L.index=0,L.sibling=null,L}function f(L,V,q){return L.index=q,t?(q=L.alternate,q!==null?(q=q.index,q<V?(L.flags|=67108866,V):q):(L.flags|=67108866,V)):(L.flags|=1048576,V)}function E(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function w(L,V,q,W){return V===null||V.tag!==6?(V=Dd(q,L.mode,W),V.return=L,V):(V=h(V,q),V.return=L,V)}function N(L,V,q,W){var pe=q.type;return pe===j?X(L,V,q.props.children,W,q.key):V!==null&&(V.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===x&&Py(pe)===V.type)?(V=h(V,q.props),Al(V,q),V.return=L,V):(V=lu(q.type,q.key,q.props,null,L.mode,W),Al(V,q),V.return=L,V)}function B(L,V,q,W){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=Od(q,L.mode,W),V.return=L,V):(V=h(V,q.children||[]),V.return=L,V)}function X(L,V,q,W,pe){return V===null||V.tag!==7?(V=Xs(q,L.mode,W,pe),V.return=L,V):(V=h(V,q),V.return=L,V)}function J(L,V,q){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Dd(""+V,L.mode,q),V.return=L,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return q=lu(V.type,V.key,V.props,null,L.mode,q),Al(q,V),q.return=L,q;case O:return V=Od(V,L.mode,q),V.return=L,V;case x:var W=V._init;return V=W(V._payload),J(L,V,q)}if(De(V)||k(V))return V=Xs(V,L.mode,q,null),V.return=L,V;if(typeof V.then=="function")return J(L,Su(V),q);if(V.$$typeof===ie)return J(L,du(L,V),q);xu(L,V)}return null}function F(L,V,q,W){var pe=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return pe!==null?null:w(L,V,""+q,W);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return q.key===pe?N(L,V,q,W):null;case O:return q.key===pe?B(L,V,q,W):null;case x:return pe=q._init,q=pe(q._payload),F(L,V,q,W)}if(De(q)||k(q))return pe!==null?null:X(L,V,q,W,null);if(typeof q.then=="function")return F(L,V,Su(q),W);if(q.$$typeof===ie)return F(L,V,du(L,q),W);xu(L,q)}return null}function G(L,V,q,W,pe){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return L=L.get(q)||null,w(V,L,""+W,pe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case S:return L=L.get(W.key===null?q:W.key)||null,N(V,L,W,pe);case O:return L=L.get(W.key===null?q:W.key)||null,B(V,L,W,pe);case x:var ke=W._init;return W=ke(W._payload),G(L,V,q,W,pe)}if(De(W)||k(W))return L=L.get(q)||null,X(V,L,W,pe,null);if(typeof W.then=="function")return G(L,V,q,Su(W),pe);if(W.$$typeof===ie)return G(L,V,q,du(V,W),pe);xu(V,W)}return null}function Re(L,V,q,W){for(var pe=null,ke=null,ve=V,be=V=0,Kt=null;ve!==null&&be<q.length;be++){ve.index>be?(Kt=ve,ve=null):Kt=ve.sibling;var Ke=F(L,ve,q[be],W);if(Ke===null){ve===null&&(ve=Kt);break}t&&ve&&Ke.alternate===null&&r(L,ve),V=f(Ke,V,be),ke===null?pe=Ke:ke.sibling=Ke,ke=Ke,ve=Kt}if(be===q.length)return a(L,ve),Xe&&Ws(L,be),pe;if(ve===null){for(;be<q.length;be++)ve=J(L,q[be],W),ve!==null&&(V=f(ve,V,be),ke===null?pe=ve:ke.sibling=ve,ke=ve);return Xe&&Ws(L,be),pe}for(ve=l(ve);be<q.length;be++)Kt=G(ve,L,be,q[be],W),Kt!==null&&(t&&Kt.alternate!==null&&ve.delete(Kt.key===null?be:Kt.key),V=f(Kt,V,be),ke===null?pe=Kt:ke.sibling=Kt,ke=Kt);return t&&ve.forEach(function(ss){return r(L,ss)}),Xe&&Ws(L,be),pe}function we(L,V,q,W){if(q==null)throw Error(s(151));for(var pe=null,ke=null,ve=V,be=V=0,Kt=null,Ke=q.next();ve!==null&&!Ke.done;be++,Ke=q.next()){ve.index>be?(Kt=ve,ve=null):Kt=ve.sibling;var ss=F(L,ve,Ke.value,W);if(ss===null){ve===null&&(ve=Kt);break}t&&ve&&ss.alternate===null&&r(L,ve),V=f(ss,V,be),ke===null?pe=ss:ke.sibling=ss,ke=ss,ve=Kt}if(Ke.done)return a(L,ve),Xe&&Ws(L,be),pe;if(ve===null){for(;!Ke.done;be++,Ke=q.next())Ke=J(L,Ke.value,W),Ke!==null&&(V=f(Ke,V,be),ke===null?pe=Ke:ke.sibling=Ke,ke=Ke);return Xe&&Ws(L,be),pe}for(ve=l(ve);!Ke.done;be++,Ke=q.next())Ke=G(ve,L,be,Ke.value,W),Ke!==null&&(t&&Ke.alternate!==null&&ve.delete(Ke.key===null?be:Ke.key),V=f(Ke,V,be),ke===null?pe=Ke:ke.sibling=Ke,ke=Ke);return t&&ve.forEach(function(rS){return r(L,rS)}),Xe&&Ws(L,be),pe}function at(L,V,q,W){if(typeof q=="object"&&q!==null&&q.type===j&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case S:e:{for(var pe=q.key;V!==null;){if(V.key===pe){if(pe=q.type,pe===j){if(V.tag===7){a(L,V.sibling),W=h(V,q.props.children),W.return=L,L=W;break e}}else if(V.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===x&&Py(pe)===V.type){a(L,V.sibling),W=h(V,q.props),Al(W,q),W.return=L,L=W;break e}a(L,V);break}else r(L,V);V=V.sibling}q.type===j?(W=Xs(q.props.children,L.mode,W,q.key),W.return=L,L=W):(W=lu(q.type,q.key,q.props,null,L.mode,W),Al(W,q),W.return=L,L=W)}return E(L);case O:e:{for(pe=q.key;V!==null;){if(V.key===pe)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){a(L,V.sibling),W=h(V,q.children||[]),W.return=L,L=W;break e}else{a(L,V);break}else r(L,V);V=V.sibling}W=Od(q,L.mode,W),W.return=L,L=W}return E(L);case x:return pe=q._init,q=pe(q._payload),at(L,V,q,W)}if(De(q))return Re(L,V,q,W);if(k(q)){if(pe=k(q),typeof pe!="function")throw Error(s(150));return q=pe.call(q),we(L,V,q,W)}if(typeof q.then=="function")return at(L,V,Su(q),W);if(q.$$typeof===ie)return at(L,V,du(L,q),W);xu(L,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,V!==null&&V.tag===6?(a(L,V.sibling),W=h(V,q),W.return=L,L=W):(a(L,V),W=Dd(q,L.mode,W),W.return=L,L=W),E(L)):a(L,V)}return function(L,V,q,W){try{bl=0;var pe=at(L,V,q,W);return $a=null,pe}catch(ve){if(ve===ml||ve===mu)throw ve;var ke=Dn(29,ve,null,L.mode);return ke.lanes=W,ke.return=L,ke}finally{}}}var Wa=My(!0),Vy=My(!1),Wn=Z(null),Nr=null;function Fi(t){var r=t.alternate;oe(zt,zt.current&1),oe(Wn,t),Nr===null&&(r===null||Qa.current!==null||r.memoizedState!==null)&&(Nr=t)}function ky(t){if(t.tag===22){if(oe(zt,zt.current),oe(Wn,t),Nr===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Nr=t)}}else Gi()}function Gi(){oe(zt,zt.current),oe(Wn,Wn.current)}function mi(t){le(Wn),Nr===t&&(Nr=null),le(zt)}var zt=Z(0);function Ru(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||tm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function df(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var ff={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Vn(),h=qi(l);h.payload=r,a!=null&&(h.callback=a),r=Bi(t,h,l),r!==null&&(kn(r,t,l),pl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Vn(),h=qi(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Bi(t,h,l),r!==null&&(kn(r,t,l),pl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Vn(),l=qi(a);l.tag=2,r!=null&&(l.callback=r),r=Bi(t,l,a),r!==null&&(kn(r,t,a),pl(r,t,a))}};function jy(t,r,a,l,h,f,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,E):r.prototype&&r.prototype.isPureReactComponent?!al(a,l)||!al(h,f):!0}function Ly(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&ff.enqueueReplaceState(r,r.state,null)}function ia(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Iu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Uy(t){Iu(t)}function zy(t){console.error(t)}function qy(t){Iu(t)}function Cu(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function By(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function mf(t,r,a){return a=qi(a),a.tag=3,a.payload={element:null},a.callback=function(){Cu(t,r)},a}function Hy(t){return t=qi(t),t.tag=3,t}function Fy(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){By(r,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){By(r,a,l),typeof h!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function rA(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&hl(r,a,h,!0),a=Wn.current,a!==null){switch(a.tag){case 13:return Nr===null?Lf():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Bd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),zf(t,l,h)),!1;case 22:return a.flags|=65536,l===Bd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),zf(t,l,h)),!1}throw Error(s(435,a.tag))}return zf(t,l,h),Lf(),!1}if(Xe)return r=Wn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Vd&&(t=Error(s(422),{cause:l}),ul(Kn(t,a)))):(l!==Vd&&(r=Error(s(423),{cause:l}),ul(Kn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Kn(l,a),h=mf(t.stateNode,l,h),Gd(t,h),vt!==4&&(vt=2)),!1;var f=Error(s(520),{cause:l});if(f=Kn(f,a),Dl===null?Dl=[f]:Dl.push(f),vt!==4&&(vt=2),r===null)return!0;l=Kn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=mf(a.stateNode,l,t),Gd(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Wi===null||!Wi.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Hy(h),Fy(h,t,a,l),Gd(a,h),!1}a=a.return}while(a!==null);return!1}var Gy=Error(s(461)),Gt=!1;function Zt(t,r,a,l){r.child=t===null?Vy(r,null,a,l):Wa(r,t.child,a,l)}function Qy(t,r,a,l,h){a=a.render;var f=r.ref;if("ref"in l){var E={};for(var w in l)w!=="ref"&&(E[w]=l[w])}else E=l;return ta(r),l=$d(t,r,a,E,f,h),w=Wd(),t!==null&&!Gt?(Zd(t,r,h),gi(t,r,h)):(Xe&&w&&Pd(r),r.flags|=1,Zt(t,r,l,h),r.child)}function Ky(t,r,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!Nd(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,Yy(t,r,f,l,h)):(t=lu(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!wf(t,h)){var E=f.memoizedProps;if(a=a.compare,a=a!==null?a:al,a(E,l)&&t.ref===r.ref)return gi(t,r,h)}return r.flags|=1,t=li(f,l),t.ref=r.ref,t.return=r,r.child=t}function Yy(t,r,a,l,h){if(t!==null){var f=t.memoizedProps;if(al(f,l)&&t.ref===r.ref)if(Gt=!1,r.pendingProps=l=f,wf(t,h))(t.flags&131072)!==0&&(Gt=!0);else return r.lanes=t.lanes,gi(t,r,h)}return gf(t,r,a,l,h)}function Xy(t,r,a){var l=r.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=r.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;r.childLanes=f&~l}else r.childLanes=0,r.child=null;return $y(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&fu(r,f!==null?f.cachePool:null),f!==null?Yp(r,f):Kd(),ky(r);else return r.lanes=r.childLanes=536870912,$y(t,r,f!==null?f.baseLanes|a:a,a)}else f!==null?(fu(r,f.cachePool),Yp(r,f),Gi(),r.memoizedState=null):(t!==null&&fu(r,null),Kd(),Gi());return Zt(t,r,h,a),r.child}function $y(t,r,a,l){var h=qd();return h=h===null?null:{parent:Ut._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&fu(r,null),Kd(),ky(r),t!==null&&hl(t,r,l,!0),null}function Nu(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function gf(t,r,a,l,h){return ta(r),a=$d(t,r,a,l,void 0,h),l=Wd(),t!==null&&!Gt?(Zd(t,r,h),gi(t,r,h)):(Xe&&l&&Pd(r),r.flags|=1,Zt(t,r,a,h),r.child)}function Wy(t,r,a,l,h,f){return ta(r),r.updateQueue=null,a=$p(r,l,a,h),Xp(t),l=Wd(),t!==null&&!Gt?(Zd(t,r,f),gi(t,r,f)):(Xe&&l&&Pd(r),r.flags|=1,Zt(t,r,a,f),r.child)}function Zy(t,r,a,l,h){if(ta(r),r.stateNode===null){var f=qa,E=a.contextType;typeof E=="object"&&E!==null&&(f=sn(E)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=ff,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Hd(r),E=a.contextType,f.context=typeof E=="object"&&E!==null?sn(E):qa,f.state=r.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(df(r,a,E,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&ff.enqueueReplaceState(f,f.state,null),_l(r,l,f,h),yl(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var w=r.memoizedProps,N=ia(a,w);f.props=N;var B=f.context,X=a.contextType;E=qa,typeof X=="object"&&X!==null&&(E=sn(X));var J=a.getDerivedStateFromProps;X=typeof J=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,X||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||B!==E)&&Ly(r,f,l,E),zi=!1;var F=r.memoizedState;f.state=F,_l(r,l,f,h),yl(),B=r.memoizedState,w||F!==B||zi?(typeof J=="function"&&(df(r,a,J,l),B=r.memoizedState),(N=zi||jy(r,a,N,l,F,B,E))?(X||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=B),f.props=l,f.state=B,f.context=E,l=N):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,Fd(t,r),E=r.memoizedProps,X=ia(a,E),f.props=X,J=r.pendingProps,F=f.context,B=a.contextType,N=qa,typeof B=="object"&&B!==null&&(N=sn(B)),w=a.getDerivedStateFromProps,(B=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==J||F!==N)&&Ly(r,f,l,N),zi=!1,F=r.memoizedState,f.state=F,_l(r,l,f,h),yl();var G=r.memoizedState;E!==J||F!==G||zi||t!==null&&t.dependencies!==null&&hu(t.dependencies)?(typeof w=="function"&&(df(r,a,w,l),G=r.memoizedState),(X=zi||jy(r,a,X,l,F,G,N)||t!==null&&t.dependencies!==null&&hu(t.dependencies))?(B||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,G,N),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,G,N)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&F===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&F===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=G),f.props=l,f.state=G,f.context=N,l=X):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&F===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&F===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,Nu(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=Wa(r,t.child,null,h),r.child=Wa(r,null,a,h)):Zt(t,r,a,h),r.memoizedState=f.state,t=r.child):t=gi(t,r,h),t}function Jy(t,r,a,l){return cl(),r.flags|=256,Zt(t,r,a,l),r.child}var pf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yf(t){return{baseLanes:t,cachePool:zp()}}function _f(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Zn),t}function e_(t,r,a){var l=r.pendingProps,h=!1,f=(r.flags&128)!==0,E;if((E=f)||(E=t!==null&&t.memoizedState===null?!1:(zt.current&2)!==0),E&&(h=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,t===null){if(Xe){if(h?Fi(r):Gi(),Xe){var w=_t,N;if(N=w){e:{for(N=w,w=Cr;N.nodeType!==8;){if(!w){w=null;break e}if(N=cr(N.nextSibling),N===null){w=null;break e}}w=N}w!==null?(r.memoizedState={dehydrated:w,treeContext:$s!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},N=Dn(18,null,null,0),N.stateNode=w,N.return=r,r.child=N,yn=r,_t=null,N=!0):N=!1}N||Js(r)}if(w=r.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return tm(w)?r.lanes=32:r.lanes=536870912,null;mi(r)}return w=l.children,l=l.fallback,h?(Gi(),h=r.mode,w=Du({mode:"hidden",children:w},h),l=Xs(l,h,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,h=r.child,h.memoizedState=yf(a),h.childLanes=_f(t,E,a),r.memoizedState=pf,l):(Fi(r),vf(r,w))}if(N=t.memoizedState,N!==null&&(w=N.dehydrated,w!==null)){if(f)r.flags&256?(Fi(r),r.flags&=-257,r=Ef(t,r,a)):r.memoizedState!==null?(Gi(),r.child=t.child,r.flags|=128,r=null):(Gi(),h=l.fallback,w=r.mode,l=Du({mode:"visible",children:l.children},w),h=Xs(h,w,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,Wa(r,t.child,null,a),l=r.child,l.memoizedState=yf(a),l.childLanes=_f(t,E,a),r.memoizedState=pf,r=h);else if(Fi(r),tm(w)){if(E=w.nextSibling&&w.nextSibling.dataset,E)var B=E.dgst;E=B,l=Error(s(419)),l.stack="",l.digest=E,ul({value:l,source:null,stack:null}),r=Ef(t,r,a)}else if(Gt||hl(t,r,a,!1),E=(a&t.childLanes)!==0,Gt||E){if(E=ut,E!==null&&(l=a&-a,l=(l&42)!==0?1:fe(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==N.retryLane))throw N.retryLane=l,za(t,l),kn(E,t,l),Gy;w.data==="$?"||Lf(),r=Ef(t,r,a)}else w.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=N.treeContext,_t=cr(w.nextSibling),yn=r,Xe=!0,Zs=null,Cr=!1,t!==null&&(Xn[$n++]=ci,Xn[$n++]=ui,Xn[$n++]=$s,ci=t.id,ui=t.overflow,$s=r),r=vf(r,l.children),r.flags|=4096);return r}return h?(Gi(),h=l.fallback,w=r.mode,N=t.child,B=N.sibling,l=li(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,B!==null?h=li(B,h):(h=Xs(h,w,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,w=t.child.memoizedState,w===null?w=yf(a):(N=w.cachePool,N!==null?(B=Ut._currentValue,N=N.parent!==B?{parent:B,pool:B}:N):N=zp(),w={baseLanes:w.baseLanes|a,cachePool:N}),h.memoizedState=w,h.childLanes=_f(t,E,a),r.memoizedState=pf,l):(Fi(r),a=t.child,t=a.sibling,a=li(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(E=r.deletions,E===null?(r.deletions=[t],r.flags|=16):E.push(t)),r.child=a,r.memoizedState=null,a)}function vf(t,r){return r=Du({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Du(t,r){return t=Dn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Ef(t,r,a){return Wa(r,t.child,null,a),t=vf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function t_(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),jd(t.return,r,a)}function Tf(t,r,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function n_(t,r,a){var l=r.pendingProps,h=l.revealOrder,f=l.tail;if(Zt(t,r,l.children,a),l=zt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&t_(t,a,r);else if(t.tag===19)t_(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(oe(zt,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&Ru(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Tf(r,!1,h,a,f);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Ru(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Tf(r,!0,a,null,f);break;case"together":Tf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function gi(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),$i|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(hl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=li(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=li(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function wf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&hu(t)))}function iA(t,r,a){switch(r.tag){case 3:nt(r,r.stateNode.containerInfo),Ui(r,Ut,t.memoizedState.cache),cl();break;case 27:case 5:nr(r);break;case 4:nt(r,r.stateNode.containerInfo);break;case 10:Ui(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Fi(r),r.flags|=128,null):(a&r.child.childLanes)!==0?e_(t,r,a):(Fi(r),t=gi(t,r,a),t!==null?t.sibling:null);Fi(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(hl(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return n_(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),oe(zt,zt.current),l)break;return null;case 22:case 23:return r.lanes=0,Xy(t,r,a);case 24:Ui(r,Ut,t.memoizedState.cache)}return gi(t,r,a)}function r_(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Gt=!0;else{if(!wf(t,a)&&(r.flags&128)===0)return Gt=!1,iA(t,r,a);Gt=(t.flags&131072)!==0}else Gt=!1,Xe&&(r.flags&1048576)!==0&&Pp(r,uu,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")Nd(l)?(t=ia(l,t),r.tag=1,r=Zy(null,r,l,t,a)):(r.tag=0,r=gf(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===ge){r.tag=11,r=Qy(null,r,l,t,a);break e}else if(h===C){r.tag=14,r=Ky(null,r,l,t,a);break e}}throw r=Ie(l)||l,Error(s(306,r,""))}}return r;case 0:return gf(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=ia(l,r.pendingProps),Zy(t,r,l,h,a);case 3:e:{if(nt(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;h=f.element,Fd(t,r),_l(r,l,null,a);var E=r.memoizedState;if(l=E.cache,Ui(r,Ut,l),l!==f.cache&&Ld(r,[Ut],a,!0),yl(),l=E.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=Jy(t,r,l,a);break e}else if(l!==h){h=Kn(Error(s(424)),r),ul(h),r=Jy(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(_t=cr(t.firstChild),yn=r,Xe=!0,Zs=null,Cr=!0,a=Vy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(cl(),l===h){r=gi(t,r,a);break e}Zt(t,r,l,a)}r=r.child}return r;case 26:return Nu(t,r),t===null?(a=ov(r.type,null,r.pendingProps,null))?r.memoizedState=a:Xe||(a=r.type,t=r.pendingProps,l=Gu(Ae.current).createElement(a),l[kt]=r,l[It]=t,en(l,a,t),bt(l),r.stateNode=l):r.memoizedState=ov(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return nr(r),t===null&&Xe&&(l=r.stateNode=iv(r.type,r.pendingProps,Ae.current),yn=r,Cr=!0,h=_t,es(r.type)?(nm=h,_t=cr(l.firstChild)):_t=h),Zt(t,r,r.pendingProps.children,a),Nu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Xe&&((h=l=_t)&&(l=OA(l,r.type,r.pendingProps,Cr),l!==null?(r.stateNode=l,yn=r,_t=cr(l.firstChild),Cr=!1,h=!0):h=!1),h||Js(r)),nr(r),h=r.type,f=r.pendingProps,E=t!==null?t.memoizedProps:null,l=f.children,Zf(h,f)?l=null:E!==null&&Zf(h,E)&&(r.flags|=32),r.memoizedState!==null&&(h=$d(t,r,$b,null,null,a),zl._currentValue=h),Nu(t,r),Zt(t,r,l,a),r.child;case 6:return t===null&&Xe&&((t=a=_t)&&(a=PA(a,r.pendingProps,Cr),a!==null?(r.stateNode=a,yn=r,_t=null,t=!0):t=!1),t||Js(r)),null;case 13:return e_(t,r,a);case 4:return nt(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Wa(r,null,l,a):Zt(t,r,l,a),r.child;case 11:return Qy(t,r,r.type,r.pendingProps,a);case 7:return Zt(t,r,r.pendingProps,a),r.child;case 8:return Zt(t,r,r.pendingProps.children,a),r.child;case 12:return Zt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Ui(r,r.type,l.value),Zt(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,ta(r),h=sn(h),l=l(h),r.flags|=1,Zt(t,r,l,a),r.child;case 14:return Ky(t,r,r.type,r.pendingProps,a);case 15:return Yy(t,r,r.type,r.pendingProps,a);case 19:return n_(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Du(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=li(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return Xy(t,r,a);case 24:return ta(r),l=sn(Ut),t===null?(h=qd(),h===null&&(h=ut,f=Ud(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),r.memoizedState={parent:l,cache:h},Hd(r),Ui(r,Ut,h)):((t.lanes&a)!==0&&(Fd(t,r),_l(r,null,null,a),yl()),h=t.memoizedState,f=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Ui(r,Ut,l)):(l=f.cache,Ui(r,Ut,l),l!==h.cache&&Ld(r,[Ut],a,!0))),Zt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function pi(t){t.flags|=4}function i_(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!dv(r)){if(r=Wn.current,r!==null&&((Fe&4194048)===Fe?Nr!==null:(Fe&62914560)!==Fe&&(Fe&536870912)===0||r!==Nr))throw gl=Bd,qp;t.flags|=8192}}function Ou(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Ds():536870912,t.lanes|=r,to|=r)}function Sl(t,r){if(!Xe)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function pt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function sA(t,r,a){var l=r.pendingProps;switch(Md(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(r),null;case 1:return pt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),di(Ut),zn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ll(r)?pi(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,kp())),pt(r),null;case 26:return a=r.memoizedState,t===null?(pi(r),a!==null?(pt(r),i_(r,a)):(pt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(pi(r),pt(r),i_(r,a)):(pt(r),r.flags&=-16777217):(t.memoizedProps!==l&&pi(r),pt(r),r.flags&=-16777217),null;case 27:gr(r),a=Ae.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&pi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return pt(r),null}t=_e.current,ll(r)?Mp(r):(t=iv(h,l,a),r.stateNode=t,pi(r))}return pt(r),null;case 5:if(gr(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&pi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return pt(r),null}if(t=_e.current,ll(r))Mp(r);else{switch(h=Gu(Ae.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[kt]=r,t[It]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(en(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&pi(r)}}return pt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&pi(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Ae.current,ll(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=yn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[kt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||W_(t.nodeValue,a)),t||Js(r)}else t=Gu(t).createTextNode(l),t[kt]=r,r.stateNode=t}return pt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=ll(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[kt]=r}else cl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pt(r),h=!1}else h=kp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(mi(r),r):(mi(r),null)}if(mi(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Ou(r,r.updateQueue),pt(r),null;case 4:return zn(),t===null&&Kf(r.stateNode.containerInfo),pt(r),null;case 10:return di(r.type),pt(r),null;case 19:if(le(zt),h=r.memoizedState,h===null)return pt(r),null;if(l=(r.flags&128)!==0,f=h.rendering,f===null)if(l)Sl(h,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=Ru(t),f!==null){for(r.flags|=128,Sl(h,!1),t=f.updateQueue,r.updateQueue=t,Ou(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Op(a,t),a=a.sibling;return oe(zt,zt.current&1|2),r.child}t=t.sibling}h.tail!==null&&En()>Vu&&(r.flags|=128,l=!0,Sl(h,!1),r.lanes=4194304)}else{if(!l)if(t=Ru(f),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Ou(r,t),Sl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Xe)return pt(r),null}else 2*En()-h.renderingStartTime>Vu&&a!==536870912&&(r.flags|=128,l=!0,Sl(h,!1),r.lanes=4194304);h.isBackwards?(f.sibling=r.child,r.child=f):(t=h.last,t!==null?t.sibling=f:r.child=f,h.last=f)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=En(),r.sibling=null,t=zt.current,oe(zt,l?t&1|2:t&1),r):(pt(r),null);case 22:case 23:return mi(r),Yd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(pt(r),r.subtreeFlags&6&&(r.flags|=8192)):pt(r),a=r.updateQueue,a!==null&&Ou(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&le(na),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),di(Ut),pt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function aA(t,r){switch(Md(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return di(Ut),zn(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return gr(r),null;case 13:if(mi(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));cl()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return le(zt),null;case 4:return zn(),null;case 10:return di(r.type),null;case 22:case 23:return mi(r),Yd(),t!==null&&le(na),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return di(Ut),null;case 25:return null;default:return null}}function s_(t,r){switch(Md(r),r.tag){case 3:di(Ut),zn();break;case 26:case 27:case 5:gr(r);break;case 4:zn();break;case 13:mi(r);break;case 19:le(zt);break;case 10:di(r.type);break;case 22:case 23:mi(r),Yd(),t!==null&&le(na);break;case 24:di(Ut)}}function xl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,E=a.inst;l=f(),E.destroy=l}a=a.next}while(a!==h)}}catch(w){lt(r,r.return,w)}}function Qi(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var E=l.inst,w=E.destroy;if(w!==void 0){E.destroy=void 0,h=r;var N=a,B=w;try{B()}catch(X){lt(h,N,X)}}}l=l.next}while(l!==f)}}catch(X){lt(r,r.return,X)}}function a_(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Kp(r,a)}catch(l){lt(t,t.return,l)}}}function o_(t,r,a){a.props=ia(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){lt(t,r,l)}}function Rl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){lt(t,r,h)}}function Dr(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){lt(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){lt(t,r,h)}else a.current=null}function l_(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){lt(t,t.return,h)}}function bf(t,r,a){try{var l=t.stateNode;RA(l,t.type,a,r),l[It]=r}catch(h){lt(t,t.return,h)}}function c_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&es(t.type)||t.tag===4}function Af(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||c_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&es(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Fu));else if(l!==4&&(l===27&&es(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Sf(t,r,a),t=t.sibling;t!==null;)Sf(t,r,a),t=t.sibling}function Pu(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&es(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Pu(t,r,a),t=t.sibling;t!==null;)Pu(t,r,a),t=t.sibling}function u_(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);en(r,l,a),r[kt]=t,r[It]=a}catch(f){lt(t,t.return,f)}}var yi=!1,St=!1,xf=!1,h_=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function oA(t,r){if(t=t.containerInfo,$f=Wu,t=wp(t),bd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var E=0,w=-1,N=-1,B=0,X=0,J=t,F=null;t:for(;;){for(var G;J!==a||h!==0&&J.nodeType!==3||(w=E+h),J!==f||l!==0&&J.nodeType!==3||(N=E+l),J.nodeType===3&&(E+=J.nodeValue.length),(G=J.firstChild)!==null;)F=J,J=G;for(;;){if(J===t)break t;if(F===a&&++B===h&&(w=E),F===f&&++X===l&&(N=E),(G=J.nextSibling)!==null)break;J=F,F=J.parentNode}J=G}a=w===-1||N===-1?null:{start:w,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Wf={focusedElem:t,selectionRange:a},Wu=!1,Qt=r;Qt!==null;)if(r=Qt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Qt=t;else for(;Qt!==null;){switch(r=Qt,f=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Re=ia(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Re,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(we){lt(a,a.return,we)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)em(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":em(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Qt=t;break}Qt=r.return}}function d_(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ki(t,a),l&4&&xl(5,a);break;case 1:if(Ki(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(E){lt(a,a.return,E)}else{var h=ia(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(E){lt(a,a.return,E)}}l&64&&a_(a),l&512&&Rl(a,a.return);break;case 3:if(Ki(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Kp(t,r)}catch(E){lt(a,a.return,E)}}break;case 27:r===null&&l&4&&u_(a);case 26:case 5:Ki(t,a),r===null&&l&4&&l_(a),l&512&&Rl(a,a.return);break;case 12:Ki(t,a);break;case 13:Ki(t,a),l&4&&g_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=pA.bind(null,a),MA(t,a))));break;case 22:if(l=a.memoizedState!==null||yi,!l){r=r!==null&&r.memoizedState!==null||St,h=yi;var f=St;yi=l,(St=r)&&!f?Yi(t,a,(a.subtreeFlags&8772)!==0):Ki(t,a),yi=h,St=f}break;case 30:break;default:Ki(t,a)}}function f_(t){var r=t.alternate;r!==null&&(t.alternate=null,f_(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Vi(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var mt=null,bn=!1;function _i(t,r,a){for(a=a.child;a!==null;)m_(t,r,a),a=a.sibling}function m_(t,r,a){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(ht,a)}catch{}switch(a.tag){case 26:St||Dr(a,r),_i(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:St||Dr(a,r);var l=mt,h=bn;es(a.type)&&(mt=a.stateNode,bn=!1),_i(t,r,a),kl(a.stateNode),mt=l,bn=h;break;case 5:St||Dr(a,r);case 6:if(l=mt,h=bn,mt=null,_i(t,r,a),mt=l,bn=h,mt!==null)if(bn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(a.stateNode)}catch(f){lt(a,r,f)}else try{mt.removeChild(a.stateNode)}catch(f){lt(a,r,f)}break;case 18:mt!==null&&(bn?(t=mt,nv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Fl(t)):nv(mt,a.stateNode));break;case 4:l=mt,h=bn,mt=a.stateNode.containerInfo,bn=!0,_i(t,r,a),mt=l,bn=h;break;case 0:case 11:case 14:case 15:St||Qi(2,a,r),St||Qi(4,a,r),_i(t,r,a);break;case 1:St||(Dr(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&o_(a,r,l)),_i(t,r,a);break;case 21:_i(t,r,a);break;case 22:St=(l=St)||a.memoizedState!==null,_i(t,r,a),St=l;break;default:_i(t,r,a)}}function g_(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Fl(t)}catch(a){lt(r,r.return,a)}}function lA(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new h_),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new h_),r;default:throw Error(s(435,t.tag))}}function Rf(t,r){var a=lA(t);r.forEach(function(l){var h=yA.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function On(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,E=r,w=E;e:for(;w!==null;){switch(w.tag){case 27:if(es(w.type)){mt=w.stateNode,bn=!1;break e}break;case 5:mt=w.stateNode,bn=!1;break e;case 3:case 4:mt=w.stateNode.containerInfo,bn=!0;break e}w=w.return}if(mt===null)throw Error(s(160));m_(f,E,h),mt=null,bn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)p_(r,t),r=r.sibling}var lr=null;function p_(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:On(r,t),Pn(t),l&4&&(Qi(3,t,t.return),xl(3,t),Qi(5,t,t.return));break;case 1:On(r,t),Pn(t),l&512&&(St||a===null||Dr(a,a.return)),l&64&&yi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=lr;if(On(r,t),Pn(t),l&512&&(St||a===null||Dr(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Ps]||f[kt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),en(f,l,a),f[kt]=t,bt(f),l=f;break e;case"link":var E=uv("link","href",h).get(l+(a.href||""));if(E){for(var w=0;w<E.length;w++)if(f=E[w],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(w,1);break t}}f=h.createElement(l),en(f,l,a),h.head.appendChild(f);break;case"meta":if(E=uv("meta","content",h).get(l+(a.content||""))){for(w=0;w<E.length;w++)if(f=E[w],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(w,1);break t}}f=h.createElement(l),en(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[kt]=t,bt(f),l=f}t.stateNode=l}else hv(h,t.type,t.stateNode);else t.stateNode=cv(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?hv(h,t.type,t.stateNode):cv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&bf(t,t.memoizedProps,a.memoizedProps)}break;case 27:On(r,t),Pn(t),l&512&&(St||a===null||Dr(a,a.return)),a!==null&&l&4&&bf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(On(r,t),Pn(t),l&512&&(St||a===null||Dr(a,a.return)),t.flags&32){h=t.stateNode;try{Hn(h,"")}catch(G){lt(t,t.return,G)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,bf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(xf=!0);break;case 6:if(On(r,t),Pn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(G){lt(t,t.return,G)}}break;case 3:if(Yu=null,h=lr,lr=Qu(r.containerInfo),On(r,t),lr=h,Pn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Fl(r.containerInfo)}catch(G){lt(t,t.return,G)}xf&&(xf=!1,y_(t));break;case 4:l=lr,lr=Qu(t.stateNode.containerInfo),On(r,t),Pn(t),lr=l;break;case 12:On(r,t),Pn(t);break;case 13:On(r,t),Pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Pf=En()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Rf(t,l)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,B=yi,X=St;if(yi=B||h,St=X||N,On(r,t),St=X,yi=B,Pn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||N||yi||St||sa(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){N=a=r;try{if(f=N.stateNode,h)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{w=N.stateNode;var J=N.memoizedProps.style,F=J!=null&&J.hasOwnProperty("display")?J.display:null;w.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(G){lt(N,N.return,G)}}}else if(r.tag===6){if(a===null){N=r;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(G){lt(N,N.return,G)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Rf(t,a))));break;case 19:On(r,t),Pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Rf(t,l)));break;case 30:break;case 21:break;default:On(r,t),Pn(t)}}function Pn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(c_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Af(t);Pu(t,f,h);break;case 5:var E=a.stateNode;a.flags&32&&(Hn(E,""),a.flags&=-33);var w=Af(t);Pu(t,w,E);break;case 3:case 4:var N=a.stateNode.containerInfo,B=Af(t);Sf(t,B,N);break;default:throw Error(s(161))}}catch(X){lt(t,t.return,X)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function y_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;y_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ki(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)d_(t,r.alternate,r),r=r.sibling}function sa(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Qi(4,r,r.return),sa(r);break;case 1:Dr(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&o_(r,r.return,a),sa(r);break;case 27:kl(r.stateNode);case 26:case 5:Dr(r,r.return),sa(r);break;case 22:r.memoizedState===null&&sa(r);break;case 30:sa(r);break;default:sa(r)}t=t.sibling}}function Yi(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,f=r,E=f.flags;switch(f.tag){case 0:case 11:case 15:Yi(h,f,a),xl(4,f);break;case 1:if(Yi(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){lt(l,l.return,B)}if(l=f,h=l.updateQueue,h!==null){var w=l.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)Qp(N[h],w)}catch(B){lt(l,l.return,B)}}a&&E&64&&a_(f),Rl(f,f.return);break;case 27:u_(f);case 26:case 5:Yi(h,f,a),a&&l===null&&E&4&&l_(f),Rl(f,f.return);break;case 12:Yi(h,f,a);break;case 13:Yi(h,f,a),a&&E&4&&g_(h,f);break;case 22:f.memoizedState===null&&Yi(h,f,a),Rl(f,f.return);break;case 30:break;default:Yi(h,f,a)}r=r.sibling}}function If(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&dl(a))}function Cf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&dl(t))}function Or(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)__(t,r,a,l),r=r.sibling}function __(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Or(t,r,a,l),h&2048&&xl(9,r);break;case 1:Or(t,r,a,l);break;case 3:Or(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&dl(t)));break;case 12:if(h&2048){Or(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,E=f.id,w=f.onPostCommit;typeof w=="function"&&w(E,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){lt(r,r.return,N)}}else Or(t,r,a,l);break;case 13:Or(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,E=r.alternate,r.memoizedState!==null?f._visibility&2?Or(t,r,a,l):Il(t,r):f._visibility&2?Or(t,r,a,l):(f._visibility|=2,Za(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&If(E,r);break;case 24:Or(t,r,a,l),h&2048&&Cf(r.alternate,r);break;default:Or(t,r,a,l)}}function Za(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var f=t,E=r,w=a,N=l,B=E.flags;switch(E.tag){case 0:case 11:case 15:Za(f,E,w,N,h),xl(8,E);break;case 23:break;case 22:var X=E.stateNode;E.memoizedState!==null?X._visibility&2?Za(f,E,w,N,h):Il(f,E):(X._visibility|=2,Za(f,E,w,N,h)),h&&B&2048&&If(E.alternate,E);break;case 24:Za(f,E,w,N,h),h&&B&2048&&Cf(E.alternate,E);break;default:Za(f,E,w,N,h)}r=r.sibling}}function Il(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:Il(a,l),h&2048&&If(l.alternate,l);break;case 24:Il(a,l),h&2048&&Cf(l.alternate,l);break;default:Il(a,l)}r=r.sibling}}var Cl=8192;function Ja(t){if(t.subtreeFlags&Cl)for(t=t.child;t!==null;)v_(t),t=t.sibling}function v_(t){switch(t.tag){case 26:Ja(t),t.flags&Cl&&t.memoizedState!==null&&KA(lr,t.memoizedState,t.memoizedProps);break;case 5:Ja(t);break;case 3:case 4:var r=lr;lr=Qu(t.stateNode.containerInfo),Ja(t),lr=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Cl,Cl=16777216,Ja(t),Cl=r):Ja(t));break;default:Ja(t)}}function E_(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Nl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Qt=l,w_(l,t)}E_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)T_(t),t=t.sibling}function T_(t){switch(t.tag){case 0:case 11:case 15:Nl(t),t.flags&2048&&Qi(9,t,t.return);break;case 3:Nl(t);break;case 12:Nl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Mu(t)):Nl(t);break;default:Nl(t)}}function Mu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Qt=l,w_(l,t)}E_(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Qi(8,r,r.return),Mu(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Mu(r));break;default:Mu(r)}t=t.sibling}}function w_(t,r){for(;Qt!==null;){var a=Qt;switch(a.tag){case 0:case 11:case 15:Qi(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:dl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Qt=l;else e:for(a=t;Qt!==null;){l=Qt;var h=l.sibling,f=l.return;if(f_(l),l===a){Qt=null;break e}if(h!==null){h.return=f,Qt=h;break e}Qt=f}}}var cA={getCacheForType:function(t){var r=sn(Ut),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},uA=typeof WeakMap=="function"?WeakMap:Map,et=0,ut=null,je=null,Fe=0,tt=0,Mn=null,Xi=!1,eo=!1,Nf=!1,vi=0,vt=0,$i=0,aa=0,Df=0,Zn=0,to=0,Dl=null,An=null,Of=!1,Pf=0,Vu=1/0,ku=null,Wi=null,Jt=0,Zi=null,no=null,ro=0,Mf=0,Vf=null,b_=null,Ol=0,kf=null;function Vn(){if((et&2)!==0&&Fe!==0)return Fe&-Fe;if(U.T!==null){var t=Fa;return t!==0?t:Hf()}return Tn()}function A_(){Zn===0&&(Zn=(Fe&536870912)===0||Xe?Ns():536870912);var t=Wn.current;return t!==null&&(t.flags|=32),Zn}function kn(t,r,a){(t===ut&&(tt===2||tt===9)||t.cancelPendingCommit!==null)&&(io(t,0),Ji(t,Fe,Zn,!1)),ir(t,a),((et&2)===0||t!==ut)&&(t===ut&&((et&2)===0&&(aa|=a),vt===4&&Ji(t,Fe,Zn,!1)),Pr(t))}function S_(t,r,a){if((et&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||$r(t,r),h=l?fA(t,r):Uf(t,r,!0),f=l;do{if(h===0){eo&&!l&&Ji(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!hA(a)){h=Uf(t,r,!1),f=!1;continue}if(h===2){if(f=r,t.errorRecoveryDisabledLanes&f)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var w=t;h=Dl;var N=w.current.memoizedState.isDehydrated;if(N&&(io(w,E).flags|=256),E=Uf(w,E,!1),E!==2){if(Nf&&!N){w.errorRecoveryDisabledLanes|=f,aa|=f,h=4;break e}f=An,An=h,f!==null&&(An===null?An=f:An.push.apply(An,f))}h=E}if(f=!1,h!==2)continue}}if(h===1){io(t,0),Ji(t,r,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Ji(l,r,Zn,!Xi);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=Pf+300-En(),10<h)){if(Ji(l,r,Zn,!Xi),Xr(l,0,!0)!==0)break e;l.timeoutHandle=ev(x_.bind(null,l,a,An,ku,Of,r,Zn,aa,to,Xi,f,2,-0,0),h);break e}x_(l,a,An,ku,Of,r,Zn,aa,to,Xi,f,0,-0,0)}}break}while(!0);Pr(t)}function x_(t,r,a,l,h,f,E,w,N,B,X,J,F,G){if(t.timeoutHandle=-1,J=r.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(Ul={stylesheets:null,count:0,unsuspend:QA},v_(r),J=YA(),J!==null)){t.cancelPendingCommit=J(P_.bind(null,t,r,f,a,l,h,E,w,N,X,1,F,G)),Ji(t,f,E,!B);return}P_(t,r,f,a,l,h,E,w,N)}function hA(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!Nn(f(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ji(t,r,a,l){r&=~Df,r&=~aa,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var f=31-Bt(h),E=1<<f;l[f]=-1,h&=~E}a!==0&&qn(t,a,r)}function ju(){return(et&6)===0?(Pl(0),!1):!0}function jf(){if(je!==null){if(tt===0)var t=je.return;else t=je,hi=ea=null,Jd(t),$a=null,bl=0,t=je;for(;t!==null;)s_(t.alternate,t),t=t.return;je=null}}function io(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,CA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),jf(),ut=t,je=a=li(t.current,null),Fe=r,tt=0,Mn=null,Xi=!1,eo=$r(t,r),Nf=!1,to=Zn=Df=aa=$i=vt=0,An=Dl=null,Of=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Bt(l),f=1<<h;r|=t[h],l&=~f}return vi=r,su(),a}function R_(t,r){Ve=null,U.H=Au,r===ml||r===mu?(r=Fp(),tt=3):r===qp?(r=Fp(),tt=4):tt=r===Gy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Mn=r,je===null&&(vt=1,Cu(t,Kn(r,t.current)))}function I_(){var t=U.H;return U.H=Au,t===null?Au:t}function C_(){var t=U.A;return U.A=cA,t}function Lf(){vt=4,Xi||(Fe&4194048)!==Fe&&Wn.current!==null||(eo=!0),($i&134217727)===0&&(aa&134217727)===0||ut===null||Ji(ut,Fe,Zn,!1)}function Uf(t,r,a){var l=et;et|=2;var h=I_(),f=C_();(ut!==t||Fe!==r)&&(ku=null,io(t,r)),r=!1;var E=vt;e:do try{if(tt!==0&&je!==null){var w=je,N=Mn;switch(tt){case 8:jf(),E=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(r=!0);var B=tt;if(tt=0,Mn=null,so(t,w,N,B),a&&eo){E=0;break e}break;default:B=tt,tt=0,Mn=null,so(t,w,N,B)}}dA(),E=vt;break}catch(X){R_(t,X)}while(!0);return r&&t.shellSuspendCounter++,hi=ea=null,et=l,U.H=h,U.A=f,je===null&&(ut=null,Fe=0,su()),E}function dA(){for(;je!==null;)N_(je)}function fA(t,r){var a=et;et|=2;var l=I_(),h=C_();ut!==t||Fe!==r?(ku=null,Vu=En()+500,io(t,r)):eo=$r(t,r);e:do try{if(tt!==0&&je!==null){r=je;var f=Mn;t:switch(tt){case 1:tt=0,Mn=null,so(t,r,f,1);break;case 2:case 9:if(Bp(f)){tt=0,Mn=null,D_(r);break}r=function(){tt!==2&&tt!==9||ut!==t||(tt=7),Pr(t)},f.then(r,r);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:Bp(f)?(tt=0,Mn=null,D_(r)):(tt=0,Mn=null,so(t,r,f,7));break;case 5:var E=null;switch(je.tag){case 26:E=je.memoizedState;case 5:case 27:var w=je;if(!E||dv(E)){tt=0,Mn=null;var N=w.sibling;if(N!==null)je=N;else{var B=w.return;B!==null?(je=B,Lu(B)):je=null}break t}}tt=0,Mn=null,so(t,r,f,5);break;case 6:tt=0,Mn=null,so(t,r,f,6);break;case 8:jf(),vt=6;break e;default:throw Error(s(462))}}mA();break}catch(X){R_(t,X)}while(!0);return hi=ea=null,U.H=l,U.A=h,et=a,je!==null?0:(ut=null,Fe=0,su(),vt)}function mA(){for(;je!==null&&!Fr();)N_(je)}function N_(t){var r=r_(t.alternate,t,vi);t.memoizedProps=t.pendingProps,r===null?Lu(t):je=r}function D_(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Wy(a,r,r.pendingProps,r.type,void 0,Fe);break;case 11:r=Wy(a,r,r.pendingProps,r.type.render,r.ref,Fe);break;case 5:Jd(r);default:s_(a,r),r=je=Op(r,vi),r=r_(a,r,vi)}t.memoizedProps=t.pendingProps,r===null?Lu(t):je=r}function so(t,r,a,l){hi=ea=null,Jd(r),$a=null,bl=0;var h=r.return;try{if(rA(t,h,r,a,Fe)){vt=1,Cu(t,Kn(a,t.current)),je=null;return}}catch(f){if(h!==null)throw je=h,f;vt=1,Cu(t,Kn(a,t.current)),je=null;return}r.flags&32768?(Xe||l===1?t=!0:eo||(Fe&536870912)!==0?t=!1:(Xi=t=!0,(l===2||l===9||l===3||l===6)&&(l=Wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),O_(r,t)):Lu(r)}function Lu(t){var r=t;do{if((r.flags&32768)!==0){O_(r,Xi);return}t=r.return;var a=sA(r.alternate,r,vi);if(a!==null){je=a;return}if(r=r.sibling,r!==null){je=r;return}je=r=t}while(r!==null);vt===0&&(vt=5)}function O_(t,r){do{var a=aA(t.alternate,t);if(a!==null){a.flags&=32767,je=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){je=t;return}je=t=a}while(t!==null);vt=6,je=null}function P_(t,r,a,l,h,f,E,w,N){t.cancelPendingCommit=null;do Uu();while(Jt!==0);if((et&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=Id,Os(t,a,f,E,w,N),t===ut&&(je=ut=null,Fe=0),no=r,Zi=t,ro=a,Mf=f,Vf=h,b_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,_A(Qr,function(){return L_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=U.T,U.T=null,h=ne.p,ne.p=2,E=et,et|=4;try{oA(t,r,a)}finally{et=E,ne.p=h,U.T=l}}Jt=1,M_(),V_(),k_()}}function M_(){if(Jt===1){Jt=0;var t=Zi,r=no,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=U.T,U.T=null;var l=ne.p;ne.p=2;var h=et;et|=4;try{p_(r,t);var f=Wf,E=wp(t.containerInfo),w=f.focusedElem,N=f.selectionRange;if(E!==w&&w&&w.ownerDocument&&Tp(w.ownerDocument.documentElement,w)){if(N!==null&&bd(w)){var B=N.start,X=N.end;if(X===void 0&&(X=B),"selectionStart"in w)w.selectionStart=B,w.selectionEnd=Math.min(X,w.value.length);else{var J=w.ownerDocument||document,F=J&&J.defaultView||window;if(F.getSelection){var G=F.getSelection(),Re=w.textContent.length,we=Math.min(N.start,Re),at=N.end===void 0?we:Math.min(N.end,Re);!G.extend&&we>at&&(E=at,at=we,we=E);var L=Ep(w,we),V=Ep(w,at);if(L&&V&&(G.rangeCount!==1||G.anchorNode!==L.node||G.anchorOffset!==L.offset||G.focusNode!==V.node||G.focusOffset!==V.offset)){var q=J.createRange();q.setStart(L.node,L.offset),G.removeAllRanges(),we>at?(G.addRange(q),G.extend(V.node,V.offset)):(q.setEnd(V.node,V.offset),G.addRange(q))}}}}for(J=[],G=w;G=G.parentNode;)G.nodeType===1&&J.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<J.length;w++){var W=J[w];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Wu=!!$f,Wf=$f=null}finally{et=h,ne.p=l,U.T=a}}t.current=r,Jt=2}}function V_(){if(Jt===2){Jt=0;var t=Zi,r=no,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=U.T,U.T=null;var l=ne.p;ne.p=2;var h=et;et|=4;try{d_(t,r.alternate,r)}finally{et=h,ne.p=l,U.T=a}}Jt=3}}function k_(){if(Jt===4||Jt===3){Jt=0,Ea();var t=Zi,r=no,a=ro,l=b_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Jt=5:(Jt=0,no=Zi=null,j_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Wi=null),dt(a),r=r.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(ht,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=U.T,h=ne.p,ne.p=2,U.T=null;try{for(var f=t.onRecoverableError,E=0;E<l.length;E++){var w=l[E];f(w.value,{componentStack:w.stack})}}finally{U.T=r,ne.p=h}}(ro&3)!==0&&Uu(),Pr(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===kf?Ol++:(Ol=0,kf=t):Ol=0,Pl(0)}}function j_(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,dl(r)))}function Uu(t){return M_(),V_(),k_(),L_()}function L_(){if(Jt!==5)return!1;var t=Zi,r=Mf;Mf=0;var a=dt(ro),l=U.T,h=ne.p;try{ne.p=32>a?32:a,U.T=null,a=Vf,Vf=null;var f=Zi,E=ro;if(Jt=0,no=Zi=null,ro=0,(et&6)!==0)throw Error(s(331));var w=et;if(et|=4,T_(f.current),__(f,f.current,E,a),et=w,Pl(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(ht,f)}catch{}return!0}finally{ne.p=h,U.T=l,j_(t,r)}}function U_(t,r,a){r=Kn(a,r),r=mf(t.stateNode,r,2),t=Bi(t,r,2),t!==null&&(ir(t,2),Pr(t))}function lt(t,r,a){if(t.tag===3)U_(t,t,a);else for(;r!==null;){if(r.tag===3){U_(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Wi===null||!Wi.has(l))){t=Kn(a,t),a=Hy(2),l=Bi(r,a,2),l!==null&&(Fy(a,l,r,t),ir(l,2),Pr(l));break}}r=r.return}}function zf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new uA;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(Nf=!0,h.add(a),t=gA.bind(null,t,r,a),r.then(t,t))}function gA(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ut===t&&(Fe&a)===a&&(vt===4||vt===3&&(Fe&62914560)===Fe&&300>En()-Pf?(et&2)===0&&io(t,0):Df|=a,to===Fe&&(to=0)),Pr(t)}function z_(t,r){r===0&&(r=Ds()),t=za(t,r),t!==null&&(ir(t,r),Pr(t))}function pA(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),z_(t,a)}function yA(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),z_(t,a)}function _A(t,r){return pr(t,r)}var zu=null,ao=null,qf=!1,qu=!1,Bf=!1,oa=0;function Pr(t){t!==ao&&t.next===null&&(ao===null?zu=ao=t:ao=ao.next=t),qu=!0,qf||(qf=!0,EA())}function Pl(t,r){if(!Bf&&qu){Bf=!0;do for(var a=!1,l=zu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var E=l.suspendedLanes,w=l.pingedLanes;f=(1<<31-Bt(42|t)+1)-1,f&=h&~(E&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,F_(l,f))}else f=Fe,f=Xr(l,l===ut?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||$r(l,f)||(a=!0,F_(l,f));l=l.next}while(a);Bf=!1}}function vA(){q_()}function q_(){qu=qf=!1;var t=0;oa!==0&&(IA()&&(t=oa),oa=0);for(var r=En(),a=null,l=zu;l!==null;){var h=l.next,f=B_(l,r);f===0?(l.next=null,a===null?zu=h:a.next=h,h===null&&(ao=a)):(a=l,(t!==0||(f&3)!==0)&&(qu=!0)),l=h}Pl(t)}function B_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var E=31-Bt(f),w=1<<E,N=h[E];N===-1?((w&a)===0||(w&l)!==0)&&(h[E]=Wr(w,r)):N<=r&&(t.expiredLanes|=w),f&=~w}if(r=ut,a=Fe,a=Xr(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(tt===2||tt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&yr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||$r(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&yr(l),dt(a)){case 2:case 8:a=Gr;break;case 32:a=Qr;break;case 268435456:a=Pi;break;default:a=Qr}return l=H_.bind(null,t),a=pr(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&yr(l),t.callbackPriority=2,t.callbackNode=null,2}function H_(t,r){if(Jt!==0&&Jt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Uu()&&t.callbackNode!==a)return null;var l=Fe;return l=Xr(t,t===ut?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(S_(t,l,r),B_(t,En()),t.callbackNode!=null&&t.callbackNode===a?H_.bind(null,t):null)}function F_(t,r){if(Uu())return null;S_(t,r,!0)}function EA(){NA(function(){(et&6)!==0?pr(Is,vA):q_()})}function Hf(){return oa===0&&(oa=Ns()),oa}function G_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ia(""+t)}function Q_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function TA(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var f=G_((h[It]||null).action),E=l.submitter;E&&(r=(r=E[It]||null)?G_(r.formAction):E.getAttribute("formAction"),r!==null&&(f=r,E=null));var w=new Ca("action","action",null,l,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(oa!==0){var N=E?Q_(h,E):new FormData(h);cf(a,{pending:!0,data:N,method:h.method,action:f},null,N)}}else typeof f=="function"&&(w.preventDefault(),N=E?Q_(h,E):new FormData(h),cf(a,{pending:!0,data:N,method:h.method,action:f},f,N))},currentTarget:h}]})}}for(var Ff=0;Ff<Rd.length;Ff++){var Gf=Rd[Ff],wA=Gf.toLowerCase(),bA=Gf[0].toUpperCase()+Gf.slice(1);or(wA,"on"+bA)}or(Sp,"onAnimationEnd"),or(xp,"onAnimationIteration"),or(Rp,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(zb,"onTransitionRun"),or(qb,"onTransitionStart"),or(Bb,"onTransitionCancel"),or(Ip,"onTransitionEnd"),Jr("onMouseEnter",["mouseout","mouseover"]),Jr("onMouseLeave",["mouseout","mouseover"]),Jr("onPointerEnter",["pointerout","pointerover"]),Jr("onPointerLeave",["pointerout","pointerover"]),sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ml));function K_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var E=l.length-1;0<=E;E--){var w=l[E],N=w.instance,B=w.currentTarget;if(w=w.listener,N!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=B;try{f(h)}catch(X){Iu(X)}h.currentTarget=null,f=N}else for(E=0;E<l.length;E++){if(w=l[E],N=w.instance,B=w.currentTarget,w=w.listener,N!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=B;try{f(h)}catch(X){Iu(X)}h.currentTarget=null,f=N}}}}function Le(t,r){var a=r[Go];a===void 0&&(a=r[Go]=new Set);var l=t+"__bubble";a.has(l)||(Y_(r,t,2,!1),a.add(l))}function Qf(t,r,a){var l=0;r&&(l|=4),Y_(a,t,l,r)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function Kf(t){if(!t[Bu]){t[Bu]=!0,Qo.forEach(function(a){a!=="selectionchange"&&(AA.has(a)||Qf(a,!1,t),Qf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Bu]||(r[Bu]=!0,Qf("selectionchange",!1,r))}}function Y_(t,r,a,l){switch(_v(r)){case 2:var h=WA;break;case 8:h=ZA;break;default:h=om}a=h.bind(null,r,a,t),h=void 0,!Gn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function Yf(t,r,a,l,h){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var w=l.stateNode.containerInfo;if(w===h)break;if(E===4)for(E=l.return;E!==null;){var N=E.tag;if((N===3||N===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;w!==null;){if(E=Zr(w),E===null)return;if(N=E.tag,N===5||N===6||N===26||N===27){l=f=E;continue e}w=w.parentNode}}l=l.return}Fc(function(){var B=f,X=Fn(a),J=[];e:{var F=Cp.get(t);if(F!==void 0){var G=Ca,Re=t;switch(t){case"keypress":if(Ar(a)===0)break e;case"keydown":case"keyup":G=Va;break;case"focusin":Re="focus",G=Oa;break;case"focusout":Re="blur",G=Oa;break;case"beforeblur":case"afterblur":G=Oa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Qn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=vd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=Zc;break;case Sp:case xp:case Rp:G=Pa;break;case Ip:G=eu;break;case"scroll":case"scrollend":G=Gc;break;case"wheel":G=ka;break;case"copy":case"cut":case"paste":G=Ma;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=il;break;case"toggle":case"beforetoggle":G=nu}var we=(r&4)!==0,at=!we&&(t==="scroll"||t==="scrollend"),L=we?F!==null?F+"Capture":null:F;we=[];for(var V=B,q;V!==null;){var W=V;if(q=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||q===null||L===null||(W=zs(V,L),W!=null&&we.push(Vl(V,W,q))),at)break;V=V.return}0<we.length&&(F=new G(F,Re,null,a,X),J.push({event:F,listeners:we}))}}if((r&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",F&&a!==ni&&(Re=a.relatedTarget||a.fromElement)&&(Zr(Re)||Re[Bn]))break e;if((G||F)&&(F=X.window===X?X:(F=X.ownerDocument)?F.defaultView||F.parentWindow:window,G?(Re=a.relatedTarget||a.toElement,G=B,Re=Re?Zr(Re):null,Re!==null&&(at=c(Re),we=Re.tag,Re!==at||we!==5&&we!==27&&we!==6)&&(Re=null)):(G=null,Re=B),G!==Re)){if(we=Qn,W="onMouseLeave",L="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(we=il,W="onPointerLeave",L="onPointerEnter",V="pointer"),at=G==null?F:Er(G),q=Re==null?F:Er(Re),F=new we(W,V+"leave",G,a,X),F.target=at,F.relatedTarget=q,W=null,Zr(X)===B&&(we=new we(L,V+"enter",Re,a,X),we.target=q,we.relatedTarget=at,W=we),at=W,G&&Re)t:{for(we=G,L=Re,V=0,q=we;q;q=oo(q))V++;for(q=0,W=L;W;W=oo(W))q++;for(;0<V-q;)we=oo(we),V--;for(;0<q-V;)L=oo(L),q--;for(;V--;){if(we===L||L!==null&&we===L.alternate)break t;we=oo(we),L=oo(L)}we=null}else we=null;G!==null&&X_(J,F,G,we,!1),Re!==null&&at!==null&&X_(J,at,Re,we,!0)}}e:{if(F=B?Er(B):window,G=F.nodeName&&F.nodeName.toLowerCase(),G==="select"||G==="input"&&F.type==="file")var pe=mp;else if(Lt(F))if(gp)pe=jb;else{pe=Vb;var ke=Mb}else G=F.nodeName,!G||G.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?B&&Wo(B.elementType)&&(pe=mp):pe=kb;if(pe&&(pe=pe(t,B))){oi(J,pe,a,X);break e}ke&&ke(t,F,B),t==="focusout"&&B&&F.type==="number"&&B.memoizedProps.value!=null&&ji(F,"number",F.value)}switch(ke=B?Er(B):window,t){case"focusin":(Lt(ke)||ke.contentEditable==="true")&&(ja=ke,Ad=B,ol=null);break;case"focusout":ol=Ad=ja=null;break;case"mousedown":Sd=!0;break;case"contextmenu":case"mouseup":case"dragend":Sd=!1,bp(J,a,X);break;case"selectionchange":if(Ub)break;case"keydown":case"keyup":bp(J,a,X)}var ve;if(Rr)e:{switch(t){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Be?K(t,a)&&(be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(v&&a.locale!=="ko"&&(Be||be!=="onCompositionStart"?be==="onCompositionEnd"&&Be&&(ve=Jo()):(br=X,Li="value"in br?br.value:br.textContent,Be=!0)),ke=Hu(B,be),0<ke.length&&(be=new nl(be,t,null,a,X),J.push({event:be,listeners:ke}),ve?be.data=ve:(ve=ce(a),ve!==null&&(be.data=ve)))),(ve=p?jt(t,a):He(t,a))&&(be=Hu(B,"onBeforeInput"),0<be.length&&(ke=new nl("onBeforeInput","beforeinput",null,a,X),J.push({event:ke,listeners:be}),ke.data=ve)),TA(J,t,B,a,X)}K_(J,r)})}function Vl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Hu(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=zs(t,a),h!=null&&l.unshift(Vl(t,h,f)),h=zs(t,r),h!=null&&l.push(Vl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function oo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function X_(t,r,a,l,h){for(var f=r._reactName,E=[];a!==null&&a!==l;){var w=a,N=w.alternate,B=w.stateNode;if(w=w.tag,N!==null&&N===l)break;w!==5&&w!==26&&w!==27||B===null||(N=B,h?(B=zs(a,f),B!=null&&E.unshift(Vl(a,B,N))):h||(B=zs(a,f),B!=null&&E.push(Vl(a,B,N)))),a=a.return}E.length!==0&&t.push({event:r,listeners:E})}var SA=/\r\n?/g,xA=/\u0000|\uFFFD/g;function $_(t){return(typeof t=="string"?t:""+t).replace(SA,`
`).replace(xA,"")}function W_(t,r){return r=$_(r),$_(t)===r}function Fu(){}function st(t,r,a,l,h,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Hn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Hn(t,""+l);break;case"className":Tr(t,"class",l);break;case"tabIndex":Tr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Tr(t,a,l);break;case"style":$o(t,l,f);break;case"data":if(r!=="object"){Tr(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ia(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&st(t,r,"name",h.name,h,null),st(t,r,"formEncType",h.formEncType,h,null),st(t,r,"formMethod",h.formMethod,h,null),st(t,r,"formTarget",h.formTarget,h,null)):(st(t,r,"encType",h.encType,h,null),st(t,r,"method",h.method,h,null),st(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ia(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Fu);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ia(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Le("beforetoggle",t),Le("toggle",t),ki(t,"popover",l);break;case"xlinkActuate":$t(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":$t(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":$t(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":$t(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":$t(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":$t(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":$t(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":$t(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":$t(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ki(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=yd.get(a)||a,ki(t,a,l))}}function Xf(t,r,a,l,h,f){switch(a){case"style":$o(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Hn(t,l):(typeof l=="number"||typeof l=="bigint")&&Hn(t,""+l);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Fu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ba.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),f=t[It]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ki(t,a,l)}}}function en(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",t),Le("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var E=a[f];if(E!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:st(t,r,f,E,a,null)}}h&&st(t,r,"srcSet",a.srcSet,a,null),l&&st(t,r,"src",a.src,a,null);return;case"input":Le("invalid",t);var w=f=E=h=null,N=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":h=X;break;case"type":E=X;break;case"checked":N=X;break;case"defaultChecked":B=X;break;case"value":f=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:st(t,r,l,X,a,null)}}js(t,f,w,N,B,E,h,!1),Ra(t);return;case"select":Le("invalid",t),l=E=f=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":f=w;break;case"defaultValue":E=w;break;case"multiple":l=w;default:st(t,r,h,w,a,null)}r=f,a=E,t.multiple=!!l,r!=null?ti(t,!!l,r,!1):a!=null&&ti(t,!!l,a,!0);return;case"textarea":Le("invalid",t),f=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(w=a[E],w!=null))switch(E){case"value":l=w;break;case"defaultValue":h=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:st(t,r,E,w,a,null)}Ls(t,l,h,f),Ra(t);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:st(t,r,N,l,a,null)}return;case"dialog":Le("beforetoggle",t),Le("toggle",t),Le("cancel",t),Le("close",t);break;case"iframe":case"object":Le("load",t);break;case"video":case"audio":for(l=0;l<Ml.length;l++)Le(Ml[l],t);break;case"image":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"embed":case"source":case"link":Le("error",t),Le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:st(t,r,B,l,a,null)}return;default:if(Wo(r)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&Xf(t,r,X,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&st(t,r,w,l,a,null))}function RA(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,E=null,w=null,N=null,B=null,X=null;for(G in a){var J=a[G];if(a.hasOwnProperty(G)&&J!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":N=J;default:l.hasOwnProperty(G)||st(t,r,G,null,l,J)}}for(var F in l){var G=l[F];if(J=a[F],l.hasOwnProperty(F)&&(G!=null||J!=null))switch(F){case"type":f=G;break;case"name":h=G;break;case"checked":B=G;break;case"defaultChecked":X=G;break;case"value":E=G;break;case"defaultValue":w=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:G!==J&&st(t,r,F,G,l,J)}}Cn(t,E,w,N,B,X,f,h);return;case"select":G=E=w=F=null;for(f in a)if(N=a[f],a.hasOwnProperty(f)&&N!=null)switch(f){case"value":break;case"multiple":G=N;default:l.hasOwnProperty(f)||st(t,r,f,null,l,N)}for(h in l)if(f=l[h],N=a[h],l.hasOwnProperty(h)&&(f!=null||N!=null))switch(h){case"value":F=f;break;case"defaultValue":w=f;break;case"multiple":E=f;default:f!==N&&st(t,r,h,f,l,N)}r=w,a=E,l=G,F!=null?ti(t,!!a,F,!1):!!l!=!!a&&(r!=null?ti(t,!!a,r,!0):ti(t,!!a,a?[]:"",!1));return;case"textarea":G=F=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:st(t,r,w,null,l,h)}for(E in l)if(h=l[E],f=a[E],l.hasOwnProperty(E)&&(h!=null||f!=null))switch(E){case"value":F=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&st(t,r,E,h,l,f)}rt(t,F,G);return;case"option":for(var Re in a)if(F=a[Re],a.hasOwnProperty(Re)&&F!=null&&!l.hasOwnProperty(Re))switch(Re){case"selected":t.selected=!1;break;default:st(t,r,Re,null,l,F)}for(N in l)if(F=l[N],G=a[N],l.hasOwnProperty(N)&&F!==G&&(F!=null||G!=null))switch(N){case"selected":t.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:st(t,r,N,F,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)F=a[we],a.hasOwnProperty(we)&&F!=null&&!l.hasOwnProperty(we)&&st(t,r,we,null,l,F);for(B in l)if(F=l[B],G=a[B],l.hasOwnProperty(B)&&F!==G&&(F!=null||G!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,r));break;default:st(t,r,B,F,l,G)}return;default:if(Wo(r)){for(var at in a)F=a[at],a.hasOwnProperty(at)&&F!==void 0&&!l.hasOwnProperty(at)&&Xf(t,r,at,void 0,l,F);for(X in l)F=l[X],G=a[X],!l.hasOwnProperty(X)||F===G||F===void 0&&G===void 0||Xf(t,r,X,F,l,G);return}}for(var L in a)F=a[L],a.hasOwnProperty(L)&&F!=null&&!l.hasOwnProperty(L)&&st(t,r,L,null,l,F);for(J in l)F=l[J],G=a[J],!l.hasOwnProperty(J)||F===G||F==null&&G==null||st(t,r,J,F,l,G)}var $f=null,Wf=null;function Gu(t){return t.nodeType===9?t:t.ownerDocument}function Z_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function J_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Zf(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Jf=null;function IA(){var t=window.event;return t&&t.type==="popstate"?t===Jf?!1:(Jf=t,!0):(Jf=null,!1)}var ev=typeof setTimeout=="function"?setTimeout:void 0,CA=typeof clearTimeout=="function"?clearTimeout:void 0,tv=typeof Promise=="function"?Promise:void 0,NA=typeof queueMicrotask=="function"?queueMicrotask:typeof tv<"u"?function(t){return tv.resolve(null).then(t).catch(DA)}:ev;function DA(t){setTimeout(function(){throw t})}function es(t){return t==="head"}function nv(t,r){var a=r,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var E=t.ownerDocument;if(a&1&&kl(E.documentElement),a&2&&kl(E.body),a&4)for(a=E.head,kl(a),E=a.firstChild;E;){var w=E.nextSibling,N=E.nodeName;E[Ps]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=w}}if(h===0){t.removeChild(f),Fl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Fl(r)}function em(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":em(a),Vi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function OA(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ps])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=cr(t.nextSibling),t===null)break}return null}function PA(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=cr(t.nextSibling),t===null))return null;return t}function tm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function MA(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function cr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var nm=null;function rv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function iv(t,r,a){switch(r=Gu(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function kl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Vi(t)}var Jn=new Map,sv=new Set;function Qu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ei=ne.d;ne.d={f:VA,r:kA,D:jA,C:LA,L:UA,m:zA,X:BA,S:qA,M:HA};function VA(){var t=Ei.f(),r=ju();return t||r}function kA(t){var r=vr(t);r!==null&&r.tag===5&&r.type==="form"?Sy(r):Ei.r(t)}var lo=typeof document>"u"?null:document;function av(t,r,a){var l=lo;if(l&&typeof r=="string"&&r){var h=Ct(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),sv.has(h)||(sv.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),en(r,"link",t),bt(r),l.head.appendChild(r)))}}function jA(t){Ei.D(t),av("dns-prefetch",t,null)}function LA(t,r){Ei.C(t,r),av("preconnect",t,r)}function UA(t,r,a){Ei.L(t,r,a);var l=lo;if(l&&t&&r){var h='link[rel="preload"][as="'+Ct(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Ct(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Ct(a.imageSizes)+'"]')):h+='[href="'+Ct(t)+'"]';var f=h;switch(r){case"style":f=co(t);break;case"script":f=uo(t)}Jn.has(f)||(t=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Jn.set(f,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(jl(f))||r==="script"&&l.querySelector(Ll(f))||(r=l.createElement("link"),en(r,"link",t),bt(r),l.head.appendChild(r)))}}function zA(t,r){Ei.m(t,r);var a=lo;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Ct(l)+'"][href="'+Ct(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=uo(t)}if(!Jn.has(f)&&(t=T({rel:"modulepreload",href:t},r),Jn.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ll(f)))return}l=a.createElement("link"),en(l,"link",t),bt(l),a.head.appendChild(l)}}}function qA(t,r,a){Ei.S(t,r,a);var l=lo;if(l&&t){var h=mn(l).hoistableStyles,f=co(t);r=r||"default";var E=h.get(f);if(!E){var w={loading:0,preload:null};if(E=l.querySelector(jl(f)))w.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Jn.get(f))&&rm(t,a);var N=E=l.createElement("link");bt(N),en(N,"link",t),N._p=new Promise(function(B,X){N.onload=B,N.onerror=X}),N.addEventListener("load",function(){w.loading|=1}),N.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Ku(E,r,l)}E={type:"stylesheet",instance:E,count:1,state:w},h.set(f,E)}}}function BA(t,r){Ei.X(t,r);var a=lo;if(a&&t){var l=mn(a).hoistableScripts,h=uo(t),f=l.get(h);f||(f=a.querySelector(Ll(h)),f||(t=T({src:t,async:!0},r),(r=Jn.get(h))&&im(t,r),f=a.createElement("script"),bt(f),en(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function HA(t,r){Ei.M(t,r);var a=lo;if(a&&t){var l=mn(a).hoistableScripts,h=uo(t),f=l.get(h);f||(f=a.querySelector(Ll(h)),f||(t=T({src:t,async:!0,type:"module"},r),(r=Jn.get(h))&&im(t,r),f=a.createElement("script"),bt(f),en(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function ov(t,r,a,l){var h=(h=Ae.current)?Qu(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=co(a.href),a=mn(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=co(a.href);var f=mn(h).hoistableStyles,E=f.get(t);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,E),(f=h.querySelector(jl(t)))&&!f._p&&(E.instance=f,E.state.loading=5),Jn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Jn.set(t,a),f||FA(h,t,a,E.state))),r&&l===null)throw Error(s(528,""));return E}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=uo(a),a=mn(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function co(t){return'href="'+Ct(t)+'"'}function jl(t){return'link[rel="stylesheet"]['+t+"]"}function lv(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function FA(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),en(r,"link",a),bt(r),t.head.appendChild(r))}function uo(t){return'[src="'+Ct(t)+'"]'}function Ll(t){return"script[async]"+t}function cv(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Ct(a.href)+'"]');if(l)return r.instance=l,bt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),bt(l),en(l,"style",h),Ku(l,a.precedence,t),r.instance=l;case"stylesheet":h=co(a.href);var f=t.querySelector(jl(h));if(f)return r.state.loading|=4,r.instance=f,bt(f),f;l=lv(a),(h=Jn.get(h))&&rm(l,h),f=(t.ownerDocument||t).createElement("link"),bt(f);var E=f;return E._p=new Promise(function(w,N){E.onload=w,E.onerror=N}),en(f,"link",l),r.state.loading|=4,Ku(f,a.precedence,t),r.instance=f;case"script":return f=uo(a.src),(h=t.querySelector(Ll(f)))?(r.instance=h,bt(h),h):(l=a,(h=Jn.get(f))&&(l=T({},a),im(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),bt(h),en(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Ku(l,a.precedence,t));return r.instance}function Ku(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,E=0;E<l.length;E++){var w=l[E];if(w.dataset.precedence===r)f=w;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function rm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function im(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Yu=null;function uv(t,r,a){if(Yu===null){var l=new Map,h=Yu=new Map;h.set(a,l)}else h=Yu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Ps]||f[kt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(r)||"";E=t+E;var w=l.get(E);w?w.push(f):l.set(E,[f])}}return l}function hv(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function GA(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function dv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Ul=null;function QA(){}function KA(t,r,a){if(Ul===null)throw Error(s(475));var l=Ul;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=co(a.href),f=t.querySelector(jl(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Xu.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=f,bt(f);return}f=t.ownerDocument||t,a=lv(a),(h=Jn.get(h))&&rm(a,h),f=f.createElement("link"),bt(f);var E=f;E._p=new Promise(function(w,N){E.onload=w,E.onerror=N}),en(f,"link",a),r.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Xu.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function YA(){if(Ul===null)throw Error(s(475));var t=Ul;return t.stylesheets&&t.count===0&&sm(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&sm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Xu(){if(this.count--,this.count===0){if(this.stylesheets)sm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $u=null;function sm(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$u=new Map,r.forEach(XA,t),$u=null,Xu.call(t))}function XA(t,r){if(!(r.state.loading&4)){var a=$u.get(t);if(a)var l=a.get(null);else{a=new Map,$u.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var E=h[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=r.instance,E=h.getAttribute("data-precedence"),f=a.get(E)||l,f===l&&a.set(null,h),a.set(E,h),this.count++,l=Xu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var zl={$$typeof:ie,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function $A(t,r,a,l,h,f,E,w){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rr(0),this.hiddenUpdates=rr(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function fv(t,r,a,l,h,f,E,w,N,B,X,J){return t=new $A(t,r,a,E,w,N,B,J),r=1,f===!0&&(r|=24),f=Dn(3,null,null,r),t.current=f,f.stateNode=t,r=Ud(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Hd(f),t}function mv(t){return t?(t=qa,t):qa}function gv(t,r,a,l,h,f){h=mv(h),l.context===null?l.context=h:l.pendingContext=h,l=qi(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Bi(t,l,r),a!==null&&(kn(a,t,r),pl(a,t,r))}function pv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function am(t,r){pv(t,r),(t=t.alternate)&&pv(t,r)}function yv(t){if(t.tag===13){var r=za(t,67108864);r!==null&&kn(r,t,67108864),am(t,67108864)}}var Wu=!0;function WA(t,r,a,l){var h=U.T;U.T=null;var f=ne.p;try{ne.p=2,om(t,r,a,l)}finally{ne.p=f,U.T=h}}function ZA(t,r,a,l){var h=U.T;U.T=null;var f=ne.p;try{ne.p=8,om(t,r,a,l)}finally{ne.p=f,U.T=h}}function om(t,r,a,l){if(Wu){var h=lm(l);if(h===null)Yf(t,r,l,Zu,a),vv(t,l);else if(eS(h,t,r,a,l))l.stopPropagation();else if(vv(t,l),r&4&&-1<JA.indexOf(t)){for(;h!==null;){var f=vr(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=In(f.pendingLanes);if(E!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;E;){var N=1<<31-Bt(E);w.entanglements[1]|=N,E&=~N}Pr(f),(et&6)===0&&(Vu=En()+500,Pl(0))}}break;case 13:w=za(f,2),w!==null&&kn(w,f,2),ju(),am(f,2)}if(f=lm(l),f===null&&Yf(t,r,l,Zu,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else Yf(t,r,l,null,a)}}function lm(t){return t=Fn(t),cm(t)}var Zu=null;function cm(t){if(Zu=null,t=Zr(t),t!==null){var r=c(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Zu=t,null}function _v(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bo()){case Is:return 2;case Gr:return 8;case Qr:case Ho:return 32;case Pi:return 268435456;default:return 32}default:return 32}}var um=!1,ts=null,ns=null,rs=null,ql=new Map,Bl=new Map,is=[],JA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vv(t,r){switch(t){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":ql.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bl.delete(r.pointerId)}}function Hl(t,r,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},r!==null&&(r=vr(r),r!==null&&yv(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function eS(t,r,a,l,h){switch(r){case"focusin":return ts=Hl(ts,t,r,a,l,h),!0;case"dragenter":return ns=Hl(ns,t,r,a,l,h),!0;case"mouseover":return rs=Hl(rs,t,r,a,l,h),!0;case"pointerover":var f=h.pointerId;return ql.set(f,Hl(ql.get(f)||null,t,r,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Bl.set(f,Hl(Bl.get(f)||null,t,r,a,l,h)),!0}return!1}function Ev(t){var r=Zr(t.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,jc(t.priority,function(){if(a.tag===13){var l=Vn();l=fe(l);var h=za(a,l);h!==null&&kn(h,a,l),am(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ju(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=lm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);ni=l,a.target.dispatchEvent(l),ni=null}else return r=vr(a),r!==null&&yv(r),t.blockedOn=a,!1;r.shift()}return!0}function Tv(t,r,a){Ju(t)&&a.delete(r)}function tS(){um=!1,ts!==null&&Ju(ts)&&(ts=null),ns!==null&&Ju(ns)&&(ns=null),rs!==null&&Ju(rs)&&(rs=null),ql.forEach(Tv),Bl.forEach(Tv)}function eh(t,r){t.blockedOn===r&&(t.blockedOn=null,um||(um=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,tS)))}var th=null;function wv(t){th!==t&&(th=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){th===t&&(th=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(cm(l||a)===null)continue;break}var f=vr(a);f!==null&&(t.splice(r,3),r-=3,cf(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Fl(t){function r(N){return eh(N,t)}ts!==null&&eh(ts,t),ns!==null&&eh(ns,t),rs!==null&&eh(rs,t),ql.forEach(r),Bl.forEach(r);for(var a=0;a<is.length;a++){var l=is[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<is.length&&(a=is[0],a.blockedOn===null);)Ev(a),a.blockedOn===null&&is.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],E=h[It]||null;if(typeof f=="function")E||wv(a);else if(E){var w=null;if(f&&f.hasAttribute("formAction")){if(h=f,E=f[It]||null)w=E.formAction;else if(cm(h)!==null)continue}else w=E.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),wv(a)}}}function hm(t){this._internalRoot=t}nh.prototype.render=hm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Vn();gv(a,l,t,r,null,null)},nh.prototype.unmount=hm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;gv(t.current,2,null,t,null,null),ju(),r[Bn]=null}};function nh(t){this._internalRoot=t}nh.prototype.unstable_scheduleHydration=function(t){if(t){var r=Tn();t={blockedOn:null,target:t,priority:r};for(var a=0;a<is.length&&r!==0&&r<is[a].priority;a++);is.splice(a,0,t),a===0&&Ev(t)}};var bv=e.version;if(bv!=="19.1.1")throw Error(s(527,bv,"19.1.1"));ne.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(r),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var nS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{ht=rh.inject(nS),Ye=rh}catch{}}return Ql.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=Uy,f=zy,E=qy,w=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(w=r.unstable_transitionCallbacks)),r=fv(t,1,!1,null,null,a,l,h,f,E,w,null),t[Bn]=r.current,Kf(t),new hm(r)},Ql.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=Uy,E=zy,w=qy,N=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),r=fv(t,1,!0,r,a??null,l,h,f,E,w,N,B),r.context=mv(null),a=r.current,l=Vn(),l=fe(l),h=qi(l),h.callback=null,Bi(a,h,l),a=l,r.current.lanes=a,ir(r,a),Pr(r),t[Bn]=r.current,Kf(t),new nh(r)},Ql.version="19.1.1",Ql}var Pv;function fS(){if(Pv)return mm.exports;Pv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),mm.exports=dS(),mm.exports}var mS=fS();const gS=AE(mS);var $e=(i=>(i[i.Setup=0]="Setup",i[i.Login=1]="Login",i[i.Profile=2]="Profile",i[i.Shop=3]="Shop",i[i.PackSelection=4]="PackSelection",i[i.RoundConfiguration=5]="RoundConfiguration",i[i.Game=6]="Game",i[i.RoundEnd=7]="RoundEnd",i[i.GameEnd=8]="GameEnd",i))($e||{});const ih={CHANGES_BEFORE_AD:3,MAX_CHANGE_ATTEMPTS:10};var er=(i=>(i.Pack="pack",i.Question="question",i.Dare="dare",i))(er||{}),tc=(i=>(i.Pending="pending",i.Discarded="discarded",i.Possible="possible",i.Accepted="accepted",i))(tc||{});const gt={MAX_SUGGESTIONS_PER_DAY:5,MAX_SUGGESTIONS_PER_WEEK:15,MIN_TITLE_LENGTH:5,MAX_TITLE_LENGTH:100,MIN_CONTENT_LENGTH:10,MAX_CONTENT_LENGTH:500},Rn=({children:i,className:e})=>y.jsx("div",{className:`bg-gray-800 border border-purple-500/30 rounded-2xl shadow-lg shadow-purple-900/20 p-6 sm:p-8 ${e}`,children:i}),pS=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),_m=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),yS=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),SE=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),_o=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),_S=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),xE=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),vS=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),ES=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),TS=({players:i,setPlayers:e})=>{const[n,s]=te.useState(""),o=d=>{d.preventDefault(),n.trim()&&!i.includes(n.trim())&&(e([...i,n.trim()]),s(""))},c=d=>{e(i.filter((m,g)=>g!==d))};return y.jsxs(Rn,{children:[y.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-pink-400",children:"Aadir Jugadores"}),y.jsxs("form",{onSubmit:o,className:"flex flex-col gap-2 mb-4",children:[y.jsx("input",{type:"text",value:n,onChange:d=>s(d.target.value),placeholder:"Nombre del jugador",className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-purple-500"}),y.jsx("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md transition text-base",children:"Aadir"})]}),y.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:i.map((d,m)=>y.jsxs("li",{className:"flex justify-between items-center bg-gray-700/50 p-2 rounded-md animate-fade-in",children:[y.jsx("span",{className:"font-medium",children:d}),y.jsx("button",{onClick:()=>c(m),className:"text-gray-400 hover:text-red-500 transition",children:y.jsx(pS,{className:"w-5 h-5"})})]},m))})]})},Oe=({children:i,variant:e="primary",className:n,...s})=>{const o="px-6 py-3 font-bold rounded-lg text-white transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 disabled:opacity-50 disabled:cursor-not-allowed",c={primary:"bg-purple-600 hover:bg-purple-700 focus:ring-purple-500/50 shadow-lg shadow-purple-600/30",secondary:"bg-pink-500 hover:bg-pink-600 focus:ring-pink-500/50 shadow-lg shadow-pink-500/30",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500/50"};return y.jsx("button",{className:`${o} ${c[e]} ${n}`,...s,children:i})},wS=({availablePacks:i,purchasedPacks:e,adWatchedPacks:n,referralUnlockedPacks:s,suggestionUnlockedPacks:o,onContinue:c,onBack:d,onGoToShop:m,onPlayDemo:g})=>{const _=i.some(O=>O.id==="base"),T={id:"base",name:"Pack Base",description:"Preguntas y retos bsicos incluidos",price:"INCLUIDO",icon:"",questionsUrl:"",daresUrl:"",allowDemo:!1,demoPlaysCount:0},A=i.filter(O=>O.id!=="no-ads"),S=_?A:[T,...A];return e.length>0,y.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:y.jsxs(Rn,{className:"w-full max-w-2xl text-center",children:[y.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Packs Disponibles"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Estos son los packs que tienes disponibles para jugar"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:S.map(O=>{const j=O.id==="base"||e.includes(O.id),Q=O.id==="base",H=n.includes(O.id),ae=s.includes(O.id),re=o.includes(O.id),ie=j||ae||re;return y.jsxs("div",{className:`relative p-4 rounded-lg border transition-all duration-200 ${j?"border-green-500 bg-green-500/10":ae?"border-blue-500 bg-blue-500/10":re?"border-purple-500 bg-purple-500/10":H?"border-yellow-500 bg-yellow-500/10":"border-gray-600 bg-gray-800/50 opacity-60"}`,children:[y.jsx("div",{className:"absolute top-2 right-2",children:j?y.jsx(_m,{className:"w-6 h-6 text-green-500"}):ae?y.jsx(_m,{className:"w-6 h-6 text-blue-500"}):re?y.jsx(_m,{className:"w-6 h-6 text-purple-500"}):y.jsx(_o,{className:"w-6 h-6 text-yellow-500"})}),y.jsx("div",{className:"text-4xl mb-2",children:O.icon}),y.jsx("h3",{className:`text-xl font-bold mb-2 ${ie||H?"text-white":"text-gray-400"}`,children:O.name}),y.jsx("p",{className:`text-sm mb-3 ${ie||H?"text-gray-300":"text-gray-500"}`,children:O.description}),O.isReferralUnlockable&&!ie&&y.jsxs("p",{className:"text-xs text-blue-400 mb-2",children:[" Requiere ",O.requiredReferrals," referidos"]}),O.isSuggestionUnlockable&&!ie&&y.jsxs("p",{className:"text-xs text-purple-400 mb-2",children:[" Requiere ",O.requiredApprovedSuggestions," sugerencias aprobadas"]}),y.jsx("div",{className:`text-lg font-semibold ${j?"text-green-400":ae?"text-blue-400":re?"text-purple-400":"text-yellow-400"}`,children:Q?"INCLUIDO":j?"COMPRADO":ae?"POR REFERIDOS":re?"POR SUGERENCIAS":H?"DEMO VISTO":"PREMIUM"}),!ie&&!H&&y.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg flex items-center justify-center",children:y.jsxs("div",{className:"text-center",children:[y.jsx(_o,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),y.jsx("p",{className:"text-yellow-400 font-semibold text-sm mb-3",children:O.isReferralUnlockable?`${O.requiredReferrals} REFERIDOS`:O.isSuggestionUnlockable?`${O.requiredApprovedSuggestions} SUGERENCIAS`:"PREMIUM"}),O.allowDemo&&y.jsx(Oe,{onClick:ge=>{ge.stopPropagation(),g(O.id)},variant:"secondary",className:"px-3 py-1 text-xs bg-yellow-500 hover:bg-yellow-600 text-white border border-yellow-400 shadow-md",children:" Jugar Demo"})]})})]},O.id)})}),i.some(O=>!e.includes(O.id))&&y.jsx("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:y.jsxs("p",{className:"text-yellow-400 text-sm",children:[y.jsx(_o,{className:"w-4 h-4 inline mr-2"}),"Los packs premium estn bloqueados. Visita la tienda para desbloquearlos."]})}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[y.jsx(Oe,{onClick:d,variant:"secondary",className:"px-6",children:"Volver"}),y.jsx(Oe,{onClick:m,variant:"secondary",className:"px-6 bg-yellow-600 hover:bg-yellow-700 text-white",children:"Ir a la Tienda"}),y.jsx(Oe,{onClick:c,className:"px-6",disabled:!1,children:"Continuar al Juego"})]})]})})},bS="modulepreload",AS=function(i,e){return new URL(i,e).href},Mv={},RE=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let d=function(T){return Promise.all(T.map(A=>Promise.resolve(A).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};const m=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),_=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=d(n.map(T=>{if(T=AS(T,s),T in Mv)return;Mv[T]=!0;const A=T.endsWith(".css"),S=A?'[rel="stylesheet"]':"";if(!!s)for(let Q=m.length-1;Q>=0;Q--){const H=m[Q];if(H.href===T&&(!A||H.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${T}"]${S}`))return;const j=document.createElement("link");if(j.rel=A?"stylesheet":bS,A||(j.as="script"),j.crossOrigin="",j.href=T,_&&j.setAttribute("nonce",_),document.head.appendChild(j),A)return new Promise((Q,H)=>{j.addEventListener("load",Q),j.addEventListener("error",()=>H(new Error(`Unable to preload CSS for ${T}`)))})}))}function c(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return o.then(d=>{for(const m of d||[])m.status==="rejected"&&c(m.reason);return e().catch(c)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Ao;(function(i){i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE"})(Ao||(Ao={}));class vm extends Error{constructor(e,n,s){super(e),this.message=e,this.code=n,this.data=s}}const SS=i=>{var e,n;return i!=null&&i.androidBridge?"android":!((n=(e=i==null?void 0:i.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},xS=i=>{const e=i.CapacitorCustomPlatform||null,n=i.Capacitor||{},s=n.Plugins=n.Plugins||{},o=()=>e!==null?e.name:SS(i),c=()=>o()!=="web",d=A=>{const S=_.get(A);return!!(S!=null&&S.platforms.has(o())||m(A))},m=A=>{var S;return(S=n.PluginHeaders)===null||S===void 0?void 0:S.find(O=>O.name===A)},g=A=>i.console.error(A),_=new Map,T=(A,S={})=>{const O=_.get(A);if(O)return console.warn(`Capacitor plugin "${A}" already registered. Cannot register plugins twice.`),O.proxy;const j=o(),Q=m(A);let H;const ae=async()=>(!H&&j in S?H=typeof S[j]=="function"?H=await S[j]():H=S[j]:e!==null&&!H&&"web"in S&&(H=typeof S.web=="function"?H=await S.web():H=S.web),H),re=(x,I)=>{var P,M;if(Q){const k=Q==null?void 0:Q.methods.find(R=>I===R.name);if(k)return k.rtype==="promise"?R=>n.nativePromise(A,I.toString(),R):(R,Ie)=>n.nativeCallback(A,I.toString(),R,Ie);if(x)return(P=x[I])===null||P===void 0?void 0:P.bind(x)}else{if(x)return(M=x[I])===null||M===void 0?void 0:M.bind(x);throw new vm(`"${A}" plugin is not implemented on ${j}`,Ao.Unimplemented)}},ie=x=>{let I;const P=(...M)=>{const k=ae().then(R=>{const Ie=re(R,x);if(Ie){const De=Ie(...M);return I=De==null?void 0:De.remove,De}else throw new vm(`"${A}.${x}()" is not implemented on ${j}`,Ao.Unimplemented)});return x==="addListener"&&(k.remove=async()=>I()),k};return P.toString=()=>`${x.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:x,writable:!1,configurable:!1}),P},ge=ie("addListener"),ue=ie("removeListener"),Y=(x,I)=>{const P=ge({eventName:x},I),M=async()=>{const R=await P;ue({eventName:x,callbackId:R},I)},k=new Promise(R=>P.then(()=>R({remove:M})));return k.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await M()},k},C=new Proxy({},{get(x,I){switch(I){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Q?Y:ge;case"removeListener":return ue;default:return ie(I)}}});return s[A]=C,_.set(A,{name:A,proxy:C,platforms:new Set([...Object.keys(S),...Q?[j]:[]])}),C};return n.convertFileSrc||(n.convertFileSrc=A=>A),n.getPlatform=o,n.handleError=g,n.isNativePlatform=c,n.isPluginAvailable=d,n.registerPlugin=T,n.Exception=vm,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},RS=i=>i.Capacitor=xS(i),cn=RS(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),og=cn.registerPlugin;class IE{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(n);const c=this.windowListeners[e];c&&!c.registered&&this.addWindowListener(c),s&&this.sendRetainedArgumentsForEvent(e);const d=async()=>this.removeListener(e,n);return Promise.resolve({remove:d})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,s){const o=this.listeners[e];if(!o){if(s){let c=this.retainedEventArguments[e];c||(c=[]),c.push(n),this.retainedEventArguments[e]=c}return}o.forEach(c=>c(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:s=>{this.notifyListeners(n,s)}}}unimplemented(e="not implemented"){return new cn.Exception(e,Ao.Unimplemented)}unavailable(e="not available"){return new cn.Exception(e,Ao.Unavailable)}async removeListener(e,n){const s=this.listeners[e];if(!s)return;const o=s.indexOf(n);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(s=>{this.notifyListeners(e,s)}))}}const Vv=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),kv=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class IS extends IE{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(s=>{if(s.length<=0)return;let[o,c]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=kv(o).trim(),c=kv(c).trim(),n[o]=c}),n}async setCookie(e){try{const n=Vv(e.key),s=Vv(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,c=(e.path||"/").replace("path=",""),d=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${s||""}${o}; path=${c}; ${d};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}og("CapacitorCookies",{web:()=>new IS});const CS=async i=>new Promise((e,n)=>{const s=new FileReader;s.onload=()=>{const o=s.result;e(o.indexOf(",")>=0?o.split(",")[1]:o)},s.onerror=o=>n(o),s.readAsDataURL(i)}),NS=(i={})=>{const e=Object.keys(i);return Object.keys(i).map(o=>o.toLocaleLowerCase()).reduce((o,c,d)=>(o[c]=i[e[d]],o),{})},DS=(i,e=!0)=>i?Object.entries(i).reduce((s,o)=>{const[c,d]=o;let m,g;return Array.isArray(d)?(g="",d.forEach(_=>{m=e?encodeURIComponent(_):_,g+=`${c}=${m}&`}),g.slice(0,-1)):(m=e?encodeURIComponent(d):d,g=`${c}=${m}`),`${s}&${g}`},"").substr(1):null,OS=(i,e={})=>{const n=Object.assign({method:i.method||"GET",headers:i.headers},e),o=NS(i.headers)["content-type"]||"";if(typeof i.data=="string")n.body=i.data;else if(o.includes("application/x-www-form-urlencoded")){const c=new URLSearchParams;for(const[d,m]of Object.entries(i.data||{}))c.set(d,m);n.body=c.toString()}else if(o.includes("multipart/form-data")||i.data instanceof FormData){const c=new FormData;if(i.data instanceof FormData)i.data.forEach((m,g)=>{c.append(g,m)});else for(const m of Object.keys(i.data))c.append(m,i.data[m]);n.body=c;const d=new Headers(n.headers);d.delete("content-type"),n.headers=d}else(o.includes("application/json")||typeof i.data=="object")&&(n.body=JSON.stringify(i.data));return n};class PS extends IE{async request(e){const n=OS(e,e.webFetchExtra),s=DS(e.params,e.shouldEncodeUrlParams),o=s?`${e.url}?${s}`:e.url,c=await fetch(o,n),d=c.headers.get("content-type")||"";let{responseType:m="text"}=c.ok?e:{};d.includes("application/json")&&(m="json");let g,_;switch(m){case"arraybuffer":case"blob":_=await c.blob(),g=await CS(_);break;case"json":g=await c.json();break;case"document":case"text":default:g=await c.text()}const T={};return c.headers.forEach((A,S)=>{T[S]=A}),{data:g,headers:T,status:c.status,url:c.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}og("CapacitorHttp",{web:()=>new PS});var jv;(function(i){i.General="General",i.ParentalGuidance="ParentalGuidance",i.Teen="Teen",i.MatureAudience="MatureAudience"})(jv||(jv={}));var Lv;(function(i){i.SizeChanged="bannerAdSizeChanged",i.Loaded="bannerAdLoaded",i.FailedToLoad="bannerAdFailedToLoad",i.Opened="bannerAdOpened",i.Closed="bannerAdClosed",i.AdImpression="bannerAdImpression"})(Lv||(Lv={}));var Om;(function(i){i.TOP_CENTER="TOP_CENTER",i.CENTER="CENTER",i.BOTTOM_CENTER="BOTTOM_CENTER"})(Om||(Om={}));var Pm;(function(i){i.BANNER="BANNER",i.FULL_BANNER="FULL_BANNER",i.LARGE_BANNER="LARGE_BANNER",i.MEDIUM_RECTANGLE="MEDIUM_RECTANGLE",i.LEADERBOARD="LEADERBOARD",i.ADAPTIVE_BANNER="ADAPTIVE_BANNER",i.SMART_BANNER="SMART_BANNER"})(Pm||(Pm={}));var nc;(function(i){i.Loaded="interstitialAdLoaded",i.FailedToLoad="interstitialAdFailedToLoad",i.Showed="interstitialAdShowed",i.FailedToShow="interstitialAdFailedToShow",i.Dismissed="interstitialAdDismissed"})(nc||(nc={}));var Uv;(function(i){i.Loaded="onRewardedInterstitialAdLoaded",i.FailedToLoad="onRewardedInterstitialAdFailedToLoad",i.Showed="onRewardedInterstitialAdShowed",i.FailedToShow="onRewardedInterstitialAdFailedToShow",i.Dismissed="onRewardedInterstitialAdDismissed",i.Rewarded="onRewardedInterstitialAdReward"})(Uv||(Uv={}));var po;(function(i){i.Loaded="onRewardedVideoAdLoaded",i.FailedToLoad="onRewardedVideoAdFailedToLoad",i.Showed="onRewardedVideoAdShowed",i.FailedToShow="onRewardedVideoAdFailedToShow",i.Dismissed="onRewardedVideoAdDismissed",i.Rewarded="onRewardedVideoAdReward"})(po||(po={}));var zv;(function(i){i.NOT_REQUIRED="NOT_REQUIRED",i.OBTAINED="OBTAINED",i.REQUIRED="REQUIRED",i.UNKNOWN="UNKNOWN"})(zv||(zv={}));var qv;(function(i){i[i.DISABLED=0]="DISABLED",i[i.EEA=1]="EEA",i[i.NOT_EEA=2]="NOT_EEA"})(qv||(qv={}));const on=og("AdMob",{web:()=>RE(()=>import("./web-1x98UpIJ.js"),[],import.meta.url).then(i=>new i.AdMobWeb)});class MS{constructor(){this.isInitialized=!1,this.config=null}async initialize(e){if(this.isInitialized){this.config={...this.config,...e};return}try{this.config=e,cn.isNativePlatform()?(await on.initialize({requestTrackingAuthorization:!0,testingDevices:e.testMode?["YOUR_DEVICE_ID"]:[],initializeForTesting:e.testMode||!1}),this.isInitialized=!0,console.log("AdMob initialized successfully")):console.log("AdMob not available on web platform")}catch(n){throw console.error("Failed to initialize AdMob:",n),n}}async showBannerAd(e){if(!this.isInitialized||!this.config)throw new Error("AdMob not initialized");if(!cn.isNativePlatform())throw new Error("AdMob banners only available on native platforms");if(!this.config.bannerAdUnitId)throw new Error("bannerAdUnitId not configured");try{const n={adId:this.config.bannerAdUnitId,adSize:Pm.ADAPTIVE_BANNER,position:Om.BOTTOM_CENTER,margin:0,isTesting:this.config.testMode||!1,...e};await on.showBanner(n),console.log("Banner ad shown successfully")}catch(n){throw console.error("Failed to show banner ad:",n),n}}async hideBannerAd(){if(this.isInitialized&&cn.isNativePlatform())try{await on.hideBanner(),console.log("Banner ad hidden successfully")}catch(e){console.error("Failed to hide banner ad:",e)}}async resumeBannerAd(){if(this.isInitialized&&cn.isNativePlatform())try{await on.resumeBanner(),console.log("Banner ad resumed successfully")}catch(e){console.error("Failed to resume banner ad:",e)}}async removeBannerAd(){if(this.isInitialized&&cn.isNativePlatform())try{await on.removeBanner(),console.log("Banner ad removed successfully")}catch(e){console.error("Failed to remove banner ad:",e)}}async showInterstitial(){if(!this.isInitialized||!this.config)return console.warn("AdMob not initialized"),!1;if(!cn.isNativePlatform())return console.warn("Interstitials are only available on native platforms"),!1;if(!this.config.interstitialAdUnitId)return console.warn("No interstitialAdUnitId configured"),!1;let e=null,n=null,s=null;try{const o=new Promise((m,g)=>{setTimeout(()=>g(new Error("Interstitial ad timeout")),3e4)}),c=new Promise(async(m,g)=>{try{e=await on.addListener(nc.Loaded,S=>{console.log("Interstitial loaded")}),s=await on.addListener(nc.FailedToLoad,S=>{console.error("Interstitial failed to load:",S),g(new Error("Failed to load interstitial"))});let _=null;const T=new Promise(S=>{_=S});n=await on.addListener(nc.Dismissed,()=>{console.log("Interstitial dismissed"),_&&_()});const A={adId:this.config.interstitialAdUnitId,isTesting:this.config.testMode||!1};await on.prepareInterstitial(A),await on.showInterstitial(),await T,m(!0)}catch(_){g(_)}});return await Promise.race([c,o])}catch(o){return console.error("Failed to show interstitial ad:",o),!1}finally{try{e&&await e.remove(),n&&await n.remove(),s&&await s.remove()}catch(o){console.warn("Error cleaning up interstitial listeners:",o)}}}async showRewarded(){if(!this.isInitialized||!this.config)return console.warn("AdMob not initialized"),!1;if(!cn.isNativePlatform())return console.warn("Rewarded ads are only available on native platforms"),!1;if(!this.config.rewardedAdUnitId)return console.warn("No rewardedAdUnitId configured"),!1;let e=null,n=null,s=null,o=null;try{const c=new Promise((g,_)=>{setTimeout(()=>_(new Error("Rewarded ad timeout")),3e4)}),d=new Promise(async(g,_)=>{try{let T=!1;e=await on.addListener(po.Loaded,j=>{console.log("Rewarded loaded")}),o=await on.addListener(po.FailedToLoad,j=>{console.error("Rewarded failed to load:",j),_(new Error("Failed to load rewarded ad"))}),n=await on.addListener(po.Rewarded,j=>{T=!0,console.log("User rewarded",j)});let A=null;const S=new Promise(j=>{A=j});s=await on.addListener(po.Dismissed,()=>{console.log("Rewarded dismissed"),A&&A()});const O={adId:this.config.rewardedAdUnitId,isTesting:this.config.testMode||!1};await on.prepareRewardVideoAd(O),await on.showRewardVideoAd(),await S,g(T)}catch(T){_(T)}});return await Promise.race([d,c])}catch(c){return console.error("Failed to show rewarded ad:",c),!1}finally{try{e&&await e.remove(),n&&await n.remove(),s&&await s.remove(),o&&await o.remove()}catch(c){console.warn("Error cleaning up rewarded listeners:",c)}}}async showBestMonetizingAd(){var e,n;return(e=this.config)!=null&&e.rewardedAdUnitId&&await this.showRewarded()?"rewarded":(n=this.config)!=null&&n.interstitialAdUnitId&&await this.showInterstitial()?"interstitial":"none"}isNativePlatform(){return cn.isNativePlatform()}isWebPlatform(){return cn.getPlatform()==="web"}getConfig(){return this.config}}const hs=new MS,VS=({pack:i,isOpen:e,onClose:n,onStartDemo:s,onAdWatched:o,hasNoAds:c=!1})=>{const[d,m]=te.useState(!1),[g,_]=te.useState(null);if(!e)return null;const T=async()=>{m(!0),_(null);try{if(c){o&&o(i.id),s();return}await hs.showInterstitial()?(o&&o(i.id),s(),n()):_("No se pudo cargar el anuncio. Necesitas ver un anuncio para jugar el demo.")}catch(A){console.error("Error al mostrar anuncio:",A),_("Error al cargar el anuncio. Necesitas ver un anuncio para jugar el demo.")}finally{m(!1)}};return y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 animate-fade-in",children:y.jsxs(Rn,{className:"w-full max-w-md relative",children:[y.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:y.jsx(vS,{className:"w-6 h-6"})}),y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"text-6xl mb-4",children:i.icon}),y.jsxs("h2",{className:"text-2xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-500",children:["Demo: ",i.name]}),y.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:y.jsxs("div",{className:"flex items-start gap-3 text-left",children:[y.jsx(ES,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),y.jsxs("div",{className:"text-sm text-blue-300",children:[y.jsx("p",{className:"mb-2",children:y.jsx("strong",{children:"Qu incluye el demo?"})}),y.jsxs("ul",{className:"space-y-1 text-xs",children:[y.jsx("li",{children:" Podrs probar 5 preguntas y 5 retos que siempre sern los mismos (el pack incluye muchos ms)"}),y.jsx("li",{children:" Puedes jugar de forma ilimitada"}),y.jsx("li",{children:" Solo necesitas ver un anuncio antes de cada partida"}),y.jsx("li",{children:" Perfecto para probar si te gusta el pack"})]})]})]})}),g&&y.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mb-4",children:y.jsx("p",{className:"text-yellow-400 text-sm",children:g})}),y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsx(Oe,{onClick:T,disabled:d,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:d?y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Cargando anuncio..."]}):y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y.jsx("span",{role:"img","aria-label":"gem",children:""}),"Ver anuncio y jugar demo"]})}),y.jsx(Oe,{onClick:n,variant:"secondary",className:"w-full",disabled:d,children:"Volver atrs"})]}),y.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"Te gusta el pack? Al final de la partida podrs comprarlo completo."})]})]})})},kS=({players:i,currentPlayerIndex:e,onNextPlayer:n,onNewGame:s,questions:o,dares:c,roundConfig:d,gameProgress:m,onRoundEnd:g,onQuestionAsked:_,onDareCompleted:T,onQuestionChange:A,onAdRequired:S,questionChangeState:O={changesCount:0,isAdLoading:!1,isAdPlaying:!1}})=>{const[j,Q]=te.useState(null),[H,ae]=te.useState(null),[re,ie]=te.useState(new Set),[ge,ue]=te.useState(new Set),Y=i[e],C=R=>{if(!R.includes("$jugador"))return R;const Ie=i.filter((U,ne)=>ne!==e);if(Ie.length===0)return R.replace(/\$jugador/g,"otro jugador");const De=Ie[Math.floor(Math.random()*Ie.length)];return R.replace(/\$jugador/g,De)},x=te.useMemo(()=>o.map((R,Ie)=>({item:R,index:Ie})),[o]),I=te.useMemo(()=>c.map((R,Ie)=>({item:R,index:Ie})),[c]),P=R=>{const Ie=R==="pregunta"?x:I,De=R==="pregunta"?re:ge,U=R==="pregunta"?ie:ue,ne=Ie.filter(se=>!De.has(se.index));if(ne.length===0){U(new Set);const se=Math.floor(Math.random()*Ie.length),ye=Ie[se];Q(ye.item),U(D=>new Set(D).add(ye.index))}else{const se=Math.floor(Math.random()*ne.length),ye=ne[se];Q(ye.item),U(D=>new Set(D).add(ye.index))}ae(R),R==="pregunta"&&_?_():R==="reto"&&T&&T()},M=async()=>{if(!j||!H)return;if(O.changesCount>=ih.CHANGES_BEFORE_AD-1&&S)try{await S()}catch(ye){console.error("Error showing ad:",ye);return}const Ie=H==="pregunta"?x:I,De=H==="pregunta"?re:ge,U=H==="pregunta"?ie:ue;let ne=0,se=null;for(;ne<ih.MAX_CHANGE_ATTEMPTS&&!se;){const ye=Ie.filter(D=>!De.has(D.index)&&D.item.text!==j.text);if(ye.length===0){U(new Set);const D=Ie.filter(Z=>Z.item.text!==j.text);if(D.length>0){const Z=Math.floor(Math.random()*D.length),le=D[Z];se=le.item,U(oe=>new Set([le.index]))}else break}else{const D=Math.floor(Math.random()*ye.length),Z=ye[D];se=Z.item,U(le=>new Set(le).add(Z.index))}ne++}se&&(Q(se),A&&A())},k=()=>{Q(null),ae(null),e===i.length-1?m.currentRound+1>d.totalRounds?n():g():n()};return y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center animate-fade-in",children:[y.jsxs(Rn,{className:"w-full max-w-lg min-h-[24rem] flex flex-col justify-between",children:[y.jsxs("div",{children:[y.jsx("div",{className:"mb-2",children:y.jsxs("p",{className:"text-sm text-gray-500",children:["Ronda ",m.currentRound," de ",d.totalRounds]})}),y.jsx("p",{className:"text-lg text-gray-400",children:"Turno de:"}),y.jsx("h2",{className:"text-4xl font-bold my-4 text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400",children:Y})]}),j?y.jsxs("div",{className:"animate-fade-in",children:[y.jsx("h3",{className:"text-2xl font-bold mb-6 text-cyan-400 capitalize",children:H}),y.jsx("p",{className:"text-xl md:text-2xl leading-relaxed",children:C(j.text)}),y.jsxs("div",{className:"mt-6 flex flex-col items-center gap-2",children:[y.jsxs(Oe,{onClick:M,variant:"secondary",className:"text-sm px-4 py-2",disabled:O.isAdLoading||O.isAdPlaying,children:[" Cambiar ",H]}),y.jsxs("p",{className:"text-xs text-gray-500",children:["Cambios restantes antes del anuncio: ",ih.CHANGES_BEFORE_AD-O.changesCount%ih.CHANGES_BEFORE_AD]}),(O.isAdLoading||O.isAdPlaying)&&y.jsx("p",{className:"text-xs text-yellow-400",children:O.isAdLoading?"Cargando anuncio...":"Reproduciendo anuncio..."})]})]}):y.jsxs("div",{className:"animate-fade-in",children:[y.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Verdad o Reto?"}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[y.jsx(Oe,{onClick:()=>P("pregunta"),className:"w-full sm:w-auto",children:"Pregunta"}),y.jsx(Oe,{onClick:()=>P("reto"),variant:"secondary",className:"w-full sm:w-auto",children:"Reto"})]})]}),y.jsx("div",{className:"mt-8",children:j&&y.jsx(Oe,{onClick:k,children:"Siguiente Jugador"})})]}),y.jsx("button",{onClick:s,className:"mt-6 text-sm text-gray-500 hover:text-gray-300 transition",children:"Empezar nuevo juego"})]})},jS=({onSelectRounds:i,onBack:e})=>{const n=[{value:5,label:"5 Rondas",description:"Partida rpida (15-20 min)"},{value:10,label:"10 Rondas",description:"Partida estndar (30-40 min)"},{value:15,label:"15 Rondas",description:"Partida larga (45-60 min)"}];return y.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:y.jsxs(Rn,{className:"w-full max-w-2xl text-center",children:[y.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Configurar Partida"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Elige cuntas rondas quieres jugar"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:n.map(s=>y.jsxs("div",{className:"relative p-6 rounded-lg border border-gray-600 bg-gray-800/50 hover:border-purple-500 transition-all duration-200 cursor-pointer group",onClick:()=>i(s.value),children:[y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:s.value}),y.jsx("div",{className:"text-lg font-semibold text-white mb-2",children:s.label}),y.jsx("div",{className:"text-sm text-gray-400",children:s.description})]}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]},s.value))}),y.jsx("div",{className:"text-sm text-gray-500 mb-6",children:" Al final de cada ronda se mostrar un anuncio breve"}),y.jsx("div",{className:"flex gap-4 justify-center",children:y.jsx(Oe,{onClick:e,variant:"secondary",className:"px-6",children:"Volver"})})]})})},CE=({dataAdSlot:i,className:e,style:n,fallbackContent:s,timeout:o=5e3,admobConfig:c,hasNoAds:d=!1})=>{const[m,g]=te.useState("loading"),[_,T]=te.useState(!1),[A,S]=te.useState(!1);return te.useEffect(()=>{let O,j=null,Q=!0;return(async()=>{if(d){Q&&T(!0);return}try{O=setTimeout(()=>{Q&&m==="loading"&&(console.warn("Ad loading timeout reached"),g("timeout"),T(!0))},o);const ae=cn.isNativePlatform();if(S(ae),ae&&c)try{await hs.initialize({...c,bannerAdUnitId:i}),await hs.showBannerAd(),Q&&(g("loaded"),clearTimeout(O));return}catch(re){console.warn("AdMob failed:",re),Q&&(g("error"),T(!0),clearTimeout(O));return}if(typeof window<"u"&&!ae){let re=0;const ie=10,ge=()=>{if(Q)if(window.adsbygoogle||re>=ie)try{(window.adsbygoogle=window.adsbygoogle||[]).push({}),setTimeout(()=>{if(Q){if(j=document.querySelector(`[data-ad-slot="${i}"]`),j){const ue=j.innerHTML;ue&&ue.trim()!==""?g("loaded"):(g("error"),T(!0))}else g("error"),T(!0);clearTimeout(O)}},2e3)}catch(ue){console.error("Error loading AdSense ad:",ue),Q&&(g("error"),T(!0),clearTimeout(O))}else re++,setTimeout(ge,200)};ge()}else ae&&!c&&(console.warn("Native platform detected but no AdMob config provided"),Q&&(g("error"),T(!0),clearTimeout(O)))}catch(ae){console.error("Error in ad loading process:",ae),Q&&(g("error"),T(!0),clearTimeout(O))}})(),()=>{Q=!1,O&&clearTimeout(O),A&&m==="loaded"&&hs.removeBannerAd().catch(console.error)}},[i,o,c,d]),_?y.jsx("div",{className:`ad-fallback ${e||""}`,style:n,children:s||y.jsx("div",{className:"ad-fallback-message"})}):y.jsxs("div",{className:`ad-container ${e||""}`,style:n,children:[m==="loading"&&y.jsx("div",{className:"ad-loading",children:y.jsx("div",{className:"loading-spinner"})}),y.jsx("ins",{className:"adsbygoogle",style:{display:m==="loaded"?"block":"none",textAlign:"center",width:"100%",height:"auto"},"data-ad-client":"ca-pub-XXXXXXXXXXXXXXXX","data-ad-slot":i,"data-ad-format":"auto","data-full-width-responsive":"true"})]})},LS=({roundStats:i,currentRound:e,totalRounds:n,onContinue:s,onEndGame:o,hasNoAds:c=!1})=>{var j;const[d,m]=te.useState(!1),[g,_]=te.useState(!1),[T,A]=te.useState(5);te.useEffect(()=>{let Q=!0;const H=async()=>{try{await hs.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),m(!0);const ie=await hs.showInterstitial();Q&&(_(!0),console.log("Anuncio intersticial mostrado:",ie))}catch(ie){console.warn("Fallo al mostrar anuncio nativo:",ie),Q&&(m(!0),_(!0))}};if(!c&&cn.isNativePlatform())return H(),()=>{Q=!1};if(c){m(!0),_(!0);return}const ae=setTimeout(()=>{m(!0)},800);let re;return d&&!g&&(re=setInterval(()=>{A(ie=>ie<=1?(_(!0),re&&clearInterval(re),0):ie-1)},1e3)),()=>{clearTimeout(ae),re&&clearInterval(re)}},[c,d,g]);const S=e>=n,O=cn.isNativePlatform();return y.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:y.jsxs(Rn,{className:"w-full max-w-2xl text-center",children:[y.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-green-500 to-blue-500",children:S?"Partida Completada!":`Ronda ${i.roundNumber} Completada!`}),!S&&y.jsxs("p",{className:"text-gray-400 mb-6",children:["Ronda ",e," de ",n]}),y.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-6",children:[y.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Estadsticas de la Ronda"}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-2xl font-bold text-blue-400",children:i.questionsAsked}),y.jsx("div",{className:"text-sm text-gray-400",children:"Preguntas"})]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-2xl font-bold text-purple-400",children:i.daresCompleted}),y.jsx("div",{className:"text-sm text-gray-400",children:"Retos"})]})]}),y.jsxs("div",{className:"mt-4",children:[y.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Jugadores participantes:"}),y.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:((j=i.playersParticipated)==null?void 0:j.map((Q,H)=>y.jsx("span",{className:"px-3 py-1 bg-purple-600 text-white rounded-full text-sm",children:Q},H)))||y.jsx("span",{className:"text-gray-400 text-sm",children:"No hay jugadores registrados"})})]})]}),!c&&y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[y.jsxs("div",{className:"text-center mb-4",children:[y.jsx("div",{className:"text-lg font-semibold mb-2",children:" Anuncio"}),g?y.jsx("div",{className:"text-green-400 mb-4",children:" Anuncio completado"}):y.jsxs("div",{className:"mb-4",children:[y.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",O?"":`${T}s`]}),!O&&y.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:y.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-T)/5*100}%`}})})]})]}),!O&&y.jsx(CE,{dataAdSlot:"1234567890",className:"round-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},hasNoAds:c,fallbackContent:y.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),y.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:S?y.jsx(Oe,{onClick:o,className:"px-8 py-3 text-lg",disabled:!c&&!g,children:"Ver Resultados Finales"}):y.jsxs(y.Fragment,{children:[y.jsx(Oe,{onClick:o,variant:"secondary",className:"px-6",disabled:!c&&!g,children:"Terminar Partida"}),y.jsx(Oe,{onClick:s,className:"px-8 py-3 text-lg",disabled:!c&&!g,children:"Siguiente Ronda"})]})}),!g&&y.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Los botones se habilitarn cuando termine el anuncio"})]})})},US=({gameStats:i,players:e,onNewGame:n,onBackToMenu:s,hasNoAds:o=!1,isDemoMode:c=!1,demoPackId:d=null})=>{const m=i.gameEndTime&&i.gameStartTime?Math.round((i.gameEndTime.getTime()-i.gameStartTime.getTime())/1e3/60):0,g=i.totalRounds>0?Math.round(i.totalQuestions/i.totalRounds):0,_=i.totalRounds>0?Math.round(i.totalDares/i.totalRounds):0,[T,A]=te.useState(!1),[S,O]=te.useState(!1),[j,Q]=te.useState(5),H=cn.isNativePlatform();return te.useEffect(()=>{let ae=!0;const re=async()=>{try{await hs.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),O(!0);const ue=await hs.showInterstitial();ae&&(A(!0),console.log("Anuncio intersticial al final de partida mostrado:",ue))}catch(ue){console.warn("Error mostrando anuncio al final de partida:",ue),ae&&(O(!0),A(!0))}};if(!o&&H)return re(),()=>{ae=!1};if(o){A(!0),O(!0);return}const ie=setTimeout(()=>O(!0),800);let ge;return S&&!T&&(ge=setInterval(()=>{Q(ue=>ue<=1?(A(!0),ge&&clearInterval(ge),0):ue-1)},1e3)),()=>{clearTimeout(ie),ge&&clearInterval(ge)}},[o,H,S,T]),y.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:y.jsxs(Rn,{className:"w-full max-w-4xl text-center",children:[y.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500",children:" Partida Finalizada! "}),y.jsx("p",{className:"text-gray-400 mb-8 text-base sm:text-lg",children:"Esperamos que se hayan divertido mucho!"}),!o&&y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[y.jsxs("div",{className:"text-center mb-4",children:[y.jsx("div",{className:"text-lg font-semibold mb-2",children:" Anuncio"}),T?y.jsx("div",{className:"text-green-400 mb-4",children:" Anuncio completado"}):y.jsxs("div",{className:"mb-4",children:[y.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",H?"":`${j}s`]}),!H&&y.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:y.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-j)/5*100}%`}})})]})]}),!H&&y.jsx(CE,{dataAdSlot:"1234567890",className:"game-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},hasNoAds:o,fallbackContent:y.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[y.jsxs("div",{className:"bg-gradient-to-br from-blue-600/20 to-blue-800/20 rounded-lg p-6 border border-blue-500/30",children:[y.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-blue-400 mb-2",children:i.totalRounds}),y.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Rondas Jugadas"}),y.jsxs("div",{className:"text-sm text-gray-400",children:[m," minutos"]})]}),y.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-purple-800/20 rounded-lg p-6 border border-purple-500/30",children:[y.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-purple-400 mb-2",children:i.totalQuestions}),y.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Preguntas"}),y.jsxs("div",{className:"text-sm text-gray-400",children:[g," por ronda"]})]}),y.jsxs("div",{className:"bg-gradient-to-br from-pink-600/20 to-pink-800/20 rounded-lg p-6 border border-pink-500/30",children:[y.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-pink-400 mb-2",children:i.totalDares}),y.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Retos"}),y.jsxs("div",{className:"text-sm text-gray-400",children:[_," por ronda"]})]})]}),y.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[y.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Jugadores Participantes"}),y.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:e.map((ae,re)=>y.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full",children:[y.jsx("span",{className:"text-lg",children:""}),y.jsx("span",{className:"font-medium",children:ae})]},re))})]}),i.roundStats.length>0&&y.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[y.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Resumen por Rondas"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.roundStats.map((ae,re)=>{var ie;return y.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 border border-gray-600",children:[y.jsxs("div",{className:"text-base sm:text-lg font-semibold text-purple-400 mb-2",children:["Ronda ",ae.roundNumber]}),y.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[y.jsxs("div",{children:[" ",ae.questionsAsked," preguntas"]}),y.jsxs("div",{children:[" ",ae.daresCompleted," retos"]}),y.jsxs("div",{children:[" ",((ie=ae.playersParticipated)==null?void 0:ie.length)||0," jugadores"]})]})]},re)})})]}),c?y.jsxs("div",{className:"bg-gradient-to-r from-yellow-600/20 to-orange-600/20 rounded-lg p-6 mb-8 border border-yellow-500/30",children:[y.jsx("div",{className:"text-3xl mb-3",children:""}),y.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"Demo Completado!"}),y.jsx("p",{className:"text-gray-300 mb-4",children:"Te gust este pack? Hay muchas ms preguntas y retos esperndote!"}),y.jsxs("div",{className:"bg-yellow-500/10 rounded-lg p-4 border border-yellow-500/30",children:[y.jsx("p",{className:"text-yellow-200 font-medium mb-2",children:" Sabas que?"}),y.jsx("p",{className:"text-gray-300 text-sm",children:"El pack completo incluye ms de 50 preguntas y retos nicos, perfectos para cualquier ocasin!"})]}),y.jsx("div",{className:"mt-4",children:y.jsx(Oe,{onClick:s,className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-semibold rounded-lg",children:" Ir a la Tienda!"})})]}):y.jsxs("div",{className:"bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-lg p-6 mb-8 border border-purple-500/30",children:[y.jsx("div",{className:"text-2xl mb-2",children:""}),y.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Gracias por jugar!"}),y.jsx("p",{className:"text-gray-300",children:"Esperamos que hayan creado recuerdos increbles. No olviden compartir sus mejores momentos!"})]}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[y.jsx(Oe,{onClick:n,className:"px-8 py-3 text-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",disabled:!o&&!T,children:" Nueva Partida"}),y.jsx(Oe,{onClick:s,variant:"secondary",className:"px-8 py-3 text-lg",disabled:!o&&!T,children:" Men Principal"})]}),y.jsxs("div",{className:"mt-8 text-xs text-gray-500",children:[y.jsx("p",{children:"Te gust el juego? Comprtelo con tus amigos!"}),y.jsx("p",{className:"mt-1",children:"Verdad o Reto - La diversin nunca termina"})]})]})})},zS=()=>{};var Bv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},qS=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],d=i[n++],m=i[n++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},DE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const c=i[o],d=o+1<i.length,m=d?i[o+1]:0,g=o+2<i.length,_=g?i[o+2]:0,T=c>>2,A=(c&3)<<4|m>>4;let S=(m&15)<<2|_>>6,O=_&63;g||(O=64,d||(S=64)),s.push(n[T],n[A],n[S],n[O])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(NE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):qS(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const _=o<i.length?n[i.charAt(o)]:64;++o;const A=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||m==null||_==null||A==null)throw new BS;const S=c<<2|m>>4;if(s.push(S),_!==64){const O=m<<4&240|_>>2;if(s.push(O),A!==64){const j=_<<6&192|A;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class BS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HS=function(i){const e=NE(i);return DE.encodeByteArray(e,!0)},bh=function(i){return HS(i).replace(/\./g,"")},OE=function(i){try{return DE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=()=>FS().__FIREBASE_DEFAULTS__,QS=()=>{if(typeof process>"u"||typeof Bv>"u")return;const i=Bv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},KS=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&OE(i[1]);return e&&JSON.parse(e)},Qh=()=>{try{return zS()||GS()||QS()||KS()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},PE=i=>{var e,n;return(n=(e=Qh())==null?void 0:e.emulatorHosts)==null?void 0:n[i]},YS=i=>{const e=PE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},ME=()=>{var i;return(i=Qh())==null?void 0:i.config},VE=i=>{var e;return(e=Qh())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kE(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[bh(JSON.stringify(n)),bh(JSON.stringify(d)),""].join(".")}const rc={};function WS(){const i={prod:[],emulator:[]};for(const e of Object.keys(rc))rc[e]?i.emulator.push(e):i.prod.push(e);return i}function ZS(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Hv=!1;function jE(i,e){if(typeof window>"u"||typeof document>"u"||!Po(window.location.host)||rc[i]===e||rc[i]||Hv)return;rc[i]=e;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",c=WS().prod.length>0;function d(){const S=document.getElementById(s);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function _(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Hv=!0,d()},S}function T(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function A(){const S=ZS(s),O=n("text"),j=document.getElementById(O)||document.createElement("span"),Q=n("learnmore"),H=document.getElementById(Q)||document.createElement("a"),ae=n("preprendIcon"),re=document.getElementById(ae)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ie=S.element;m(ie),T(H,Q);const ge=_();g(re,ae),ie.append(re,j,H,ge),document.body.appendChild(ie)}c?(j.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function ex(){var e;const i=(e=Qh())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nx(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function rx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ix(){const i=dn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function sx(){return!ex()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ax(){try{return typeof indexedDB=="object"}catch{return!1}}function ox(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="FirebaseError";class Ci extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=lx,Object.setPrototypeOf(this,Ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wc.prototype.create)}}class wc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?cx(c,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Ci(o,m,s)}}function cx(i,e){return i.replace(ux,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const ux=/\{\$([^}]+)}/g;function hx(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ha(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=i[o],d=e[o];if(Fv(c)&&Fv(d)){if(!ha(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Fv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Xl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,c]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function $l(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function dx(i,e){const n=new fx(i,e);return n.subscribe.bind(n)}class fx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");mx(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Em),o.error===void 0&&(o.error=Em),o.complete===void 0&&(o.complete=Em);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mx(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Em(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(i){return i&&i._delegate?i._delegate:i}class da{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new XS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yx(e))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=la){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=la){return this.instances.has(e)}getOptions(e=la){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:px(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=la){return this.component?this.component.multipleInstances?e:la:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function px(i){return i===la?void 0:i}function yx(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ue||(Ue={}));const vx={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Ex=Ue.INFO,Tx={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},wx=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=Tx[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lg{constructor(e){this.name=e,this._logLevel=Ex,this._logHandler=wx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const bx=(i,e)=>e.some(n=>i instanceof n);let Gv,Qv;function Ax(){return Gv||(Gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Sx(){return Qv||(Qv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LE=new WeakMap,Mm=new WeakMap,UE=new WeakMap,Tm=new WeakMap,cg=new WeakMap;function xx(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{n(ds(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&LE.set(n,i)}).catch(()=>{}),cg.set(e,i),e}function Rx(i){if(Mm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});Mm.set(i,e)}let Vm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Mm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||UE.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ds(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Ix(i){Vm=i(Vm)}function Cx(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(wm(this),e,...n);return UE.set(s,e.sort?e.sort():[e]),ds(s)}:Sx().includes(i)?function(...e){return i.apply(wm(this),e),ds(LE.get(this))}:function(...e){return ds(i.apply(wm(this),e))}}function Nx(i){return typeof i=="function"?Cx(i):(i instanceof IDBTransaction&&Rx(i),bx(i,Ax())?new Proxy(i,Vm):i)}function ds(i){if(i instanceof IDBRequest)return xx(i);if(Tm.has(i))return Tm.get(i);const e=Nx(i);return e!==i&&(Tm.set(i,e),cg.set(e,i)),e}const wm=i=>cg.get(i);function Dx(i,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(i,e),m=ds(d);return s&&d.addEventListener("upgradeneeded",g=>{s(ds(d.result),g.oldVersion,g.newVersion,ds(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const Ox=["get","getKey","getAll","getAllKeys","count"],Px=["put","add","delete","clear"],bm=new Map;function Kv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(bm.get(e))return bm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=Px.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Ox.includes(n)))return;const c=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let _=g.store;return s&&(_=_.index(m.shift())),(await Promise.all([_[n](...m),o&&g.done]))[0]};return bm.set(e,c),c}Ix(i=>({...i,get:(e,n,s)=>Kv(e,n)||i.get(e,n,s),has:(e,n)=>!!Kv(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Vx(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Vx(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const km="@firebase/app",Yv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new lg("@firebase/app"),kx="@firebase/app-compat",jx="@firebase/analytics-compat",Lx="@firebase/analytics",Ux="@firebase/app-check-compat",zx="@firebase/app-check",qx="@firebase/auth",Bx="@firebase/auth-compat",Hx="@firebase/database",Fx="@firebase/data-connect",Gx="@firebase/database-compat",Qx="@firebase/functions",Kx="@firebase/functions-compat",Yx="@firebase/installations",Xx="@firebase/installations-compat",$x="@firebase/messaging",Wx="@firebase/messaging-compat",Zx="@firebase/performance",Jx="@firebase/performance-compat",eR="@firebase/remote-config",tR="@firebase/remote-config-compat",nR="@firebase/storage",rR="@firebase/storage-compat",iR="@firebase/firestore",sR="@firebase/ai",aR="@firebase/firestore-compat",oR="firebase",lR="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="[DEFAULT]",cR={[km]:"fire-core",[kx]:"fire-core-compat",[Lx]:"fire-analytics",[jx]:"fire-analytics-compat",[zx]:"fire-app-check",[Ux]:"fire-app-check-compat",[qx]:"fire-auth",[Bx]:"fire-auth-compat",[Hx]:"fire-rtdb",[Fx]:"fire-data-connect",[Gx]:"fire-rtdb-compat",[Qx]:"fire-fn",[Kx]:"fire-fn-compat",[Yx]:"fire-iid",[Xx]:"fire-iid-compat",[$x]:"fire-fcm",[Wx]:"fire-fcm-compat",[Zx]:"fire-perf",[Jx]:"fire-perf-compat",[eR]:"fire-rc",[tR]:"fire-rc-compat",[nR]:"fire-gcs",[rR]:"fire-gcs-compat",[iR]:"fire-fst",[aR]:"fire-fst-compat",[sR]:"fire-vertex","fire-js":"fire-js",[oR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new Map,uR=new Map,Lm=new Map;function Xv(i,e){try{i.container.addComponent(e)}catch(n){Ai.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function So(i){const e=i.name;if(Lm.has(e))return Ai.debug(`There were multiple attempts to register component ${e}.`),!1;Lm.set(e,i);for(const n of Ah.values())Xv(n,i);for(const n of uR.values())Xv(n,i);return!0}function ug(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function xn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fs=new wc("app","Firebase",hR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new da("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=lR;function zE(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:jm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw fs.create("bad-app-name",{appName:String(o)});if(n||(n=ME()),!n)throw fs.create("no-options");const c=Ah.get(o);if(c){if(ha(n,c.options)&&ha(s,c.config))return c;throw fs.create("duplicate-app",{appName:o})}const d=new _x(o);for(const g of Lm.values())d.addComponent(g);const m=new dR(n,s,d);return Ah.set(o,m),m}function qE(i=jm){const e=Ah.get(i);if(!e&&i===jm&&ME())return zE();if(!e)throw fs.create("no-app",{appName:i});return e}function ms(i,e,n){let s=cR[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ai.warn(d.join(" "));return}So(new da(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="firebase-heartbeat-database",mR=1,uc="firebase-heartbeat-store";let Am=null;function BE(){return Am||(Am=Dx(fR,mR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(uc)}catch(n){console.warn(n)}}}}).catch(i=>{throw fs.create("idb-open",{originalErrorMessage:i.message})})),Am}async function gR(i){try{const n=(await BE()).transaction(uc),s=await n.objectStore(uc).get(HE(i));return await n.done,s}catch(e){if(e instanceof Ci)Ai.warn(e.message);else{const n=fs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ai.warn(n.message)}}}async function $v(i,e){try{const s=(await BE()).transaction(uc,"readwrite");await s.objectStore(uc).put(e,HE(i)),await s.done}catch(n){if(n instanceof Ci)Ai.warn(n.message);else{const s=fs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ai.warn(s.message)}}}function HE(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=1024,yR=30;class _R{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ER(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Wv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>yR){const d=TR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ai.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Wv(),{heartbeatsToSend:s,unsentEntries:o}=vR(this._heartbeatsCache.heartbeats),c=bh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Ai.warn(n),""}}}function Wv(){return new Date().toISOString().substring(0,10)}function vR(i,e=pR){const n=[];let s=i.slice();for(const o of i){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),Zv(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Zv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class ER{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ax()?ox().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return $v(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return $v(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Zv(i){return bh(JSON.stringify({version:2,heartbeats:i})).length}function TR(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(i){So(new da("platform-logger",e=>new Mx(e),"PRIVATE")),So(new da("heartbeat",e=>new _R(e),"PRIVATE")),ms(km,Yv,i),ms(km,Yv,"esm2020"),ms("fire-js","")}wR("");function FE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bR=FE,GE=new wc("auth","Firebase",FE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new lg("@firebase/auth");function AR(i,...e){Sh.logLevel<=Ue.WARN&&Sh.warn(`Auth (${Mo}): ${i}`,...e)}function fh(i,...e){Sh.logLevel<=Ue.ERROR&&Sh.error(`Auth (${Mo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(i,...e){throw dg(i,...e)}function hr(i,...e){return dg(i,...e)}function hg(i,e,n){const s={...bR(),[e]:n};return new wc("auth","Firebase",s).create(e,{appName:i.name})}function Vr(i){return hg(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function SR(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&tr(i,"argument-error"),hg(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dg(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return GE.create(i,...e)}function xe(i,e,...n){if(!i)throw dg(e,...n)}function wi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw fh(e),new Error(e)}function Si(i,e){i||wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function xR(){return Jv()==="http:"||Jv()==="https:"}function Jv(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xR()||nx()||"connection"in navigator)?navigator.onLine:!0}function IR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,Si(n>e,"Short delay should be less than long delay!"),this.isMobile=JS()||rx()}get(){return RR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(i,e){Si(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DR=new Ac(3e4,6e4);function Ni(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Br(i,e,n,s,o={}){return KE(i,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const m=bc({key:i.config.apiKey,...d}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const _={method:e,headers:g,...c};return tx()||(_.referrerPolicy="no-referrer"),i.emulatorConfig&&Po(i.emulatorConfig.host)&&(_.credentials="include"),QE.fetch()(await YE(i,i.config.apiHost,n,m),_)})}async function KE(i,e,n){i._canInitEmulator=!1;const s={...CR,...e};try{const o=new PR(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw sh(i,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw sh(i,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw sh(i,"email-already-in-use",d);if(g==="USER_DISABLED")throw sh(i,"user-disabled",d);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw hg(i,T,_);tr(i,T)}}catch(o){if(o instanceof Ci)throw o;tr(i,"network-request-failed",{message:String(o)})}}async function Sc(i,e,n,s,o={}){const c=await Br(i,e,n,s,o);return"mfaPendingCredential"in c&&tr(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function YE(i,e,n,s){const o=`${e}${n}?${s}`,c=i,d=c.config.emulator?fg(i.config,o):`${i.config.apiScheme}://${o}`;return NR.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function OR(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(hr(this.auth,"network-request-failed")),DR.get())})}}function sh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=hr(i,e,s);return o.customData._tokenResponse=n,o}function e0(i){return i!==void 0&&i.enterprise!==void 0}class MR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return OR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VR(i,e){return Br(i,"GET","/v2/recaptchaConfig",Ni(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(i,e){return Br(i,"POST","/v1/accounts:delete",e)}async function xh(i,e){return Br(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jR(i,e=!1){const n=wt(i),s=await n.getIdToken(e),o=mg(s);xe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:s,authTime:ic(Sm(o.auth_time)),issuedAtTime:ic(Sm(o.iat)),expirationTime:ic(Sm(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Sm(i){return Number(i)*1e3}function mg(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return fh("JWT malformed, contained fewer than 3 sections"),null;try{const o=OE(n);return o?JSON.parse(o):(fh("Failed to decode base64 JWT payload"),null)}catch(o){return fh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function t0(i){const e=mg(i);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ci&&LR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function LR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ic(this.lastLoginAt),this.creationTime=ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rh(i){var A;const e=i.auth,n=await i.getIdToken(),s=await xo(i,xh(e,{idToken:n}));xe(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const c=(A=o.providerUserInfo)!=null&&A.length?XE(o.providerUserInfo):[],d=qR(i.providerData,c),m=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!(d!=null&&d.length),_=m?g:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new zm(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(i,T)}async function zR(i){const e=wt(i);await Rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function XE(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(i,e){const n=await KE(i,{},async()=>{const s=bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,d=await YE(i,o,"/v1/token",`key=${c}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return i.emulatorConfig&&Po(i.emulatorConfig.host)&&(g.credentials="include"),QE.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HR(i,e){return Br(i,"POST","/v2/accounts:revokeToken",Ni(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):t0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=t0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await BR(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,d=new vo;return s&&(xe(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(xe(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(xe(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vo,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(i,e){xe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ur{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new UR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new zm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await xo(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jR(this,e)}reload(){return zR(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ur({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Rh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Vr(this.auth));const e=await this.getIdToken();return await xo(this,kR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,_=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:A,emailVerified:S,isAnonymous:O,providerData:j,stsTokenManager:Q}=n;xe(A&&Q,e,"internal-error");const H=vo.fromJSON(this.name,Q);xe(typeof A=="string",e,"internal-error"),as(s,e.name),as(o,e.name),xe(typeof S=="boolean",e,"internal-error"),xe(typeof O=="boolean",e,"internal-error"),as(c,e.name),as(d,e.name),as(m,e.name),as(g,e.name),as(_,e.name),as(T,e.name);const ae=new ur({uid:A,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:O,photoURL:d,phoneNumber:c,tenantId:m,stsTokenManager:H,createdAt:_,lastLoginAt:T});return j&&Array.isArray(j)&&(ae.providerData=j.map(re=>({...re}))),g&&(ae._redirectEventId=g),ae}static async _fromIdTokenResponse(e,n,s=!1){const o=new vo;o.updateFromServerResponse(n);const c=new ur({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Rh(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];xe(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?XE(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),m=new vo;m.updateFromIdToken(s);const g=new ur({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new zm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=new Map;function bi(i){Si(i instanceof Function,"Expected a class definition");let e=n0.get(i);return e?(Si(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,n0.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$E.type="NONE";const r0=$E;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(i,e,n){return`firebase:${i}:${e}:${n}`}class Eo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=mh(this.userKey,o.apiKey,c),this.fullPersistenceKey=mh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await xh(this.auth,{idToken:e}).catch(()=>{});return n?ur._fromGetAccountInfoResponse(this.auth,n,e):null}return ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Eo(bi(r0),e,s);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=o[0]||bi(r0);const d=mh(s,e.config.apiKey,e.name);let m=null;for(const _ of n)try{const T=await _._get(d);if(T){let A;if(typeof T=="string"){const S=await xh(e,{idToken:T}).catch(()=>{});if(!S)break;A=await ur._fromGetAccountInfoResponse(e,S,T)}else A=ur._fromJSON(e,T);_!==c&&(m=A),c=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Eo(c,e,s):(c=g[0],m&&await c._set(d,m.toJSON()),await Promise.all(n.map(async _=>{if(_!==c)try{await _._remove(d)}catch{}})),new Eo(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nT(e))return"Blackberry";if(rT(e))return"Webos";if(ZE(e))return"Safari";if((e.includes("chrome/")||JE(e))&&!e.includes("edge/"))return"Chrome";if(tT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function WE(i=dn()){return/firefox\//i.test(i)}function ZE(i=dn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JE(i=dn()){return/crios\//i.test(i)}function eT(i=dn()){return/iemobile/i.test(i)}function tT(i=dn()){return/android/i.test(i)}function nT(i=dn()){return/blackberry/i.test(i)}function rT(i=dn()){return/webos/i.test(i)}function gg(i=dn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function FR(i=dn()){var e;return gg(i)&&!!((e=window.navigator)!=null&&e.standalone)}function GR(){return ix()&&document.documentMode===10}function iT(i=dn()){return gg(i)||tT(i)||rT(i)||nT(i)||/windows phone/i.test(i)||eT(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(i,e=[]){let n;switch(i){case"Browser":n=i0(dn());break;case"Worker":n=`${i0(dn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,m)=>{try{const g=e(c);d(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(i,e={}){return Br(i,"GET","/v2/passwordPolicy",Ni(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=6;class XR{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??YR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new s0(this),this.idTokenSubscription=new s0(this),this.beforeStateQueue=new QR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=bi(n)),this._initializationPromise=this.queue(async()=>{var s,o,c;if(!this._deleted&&(this.persistenceManager=await Eo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xh(this,{idToken:e}),s=await ur._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(xn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,m=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===m)&&(g!=null&&g.user)&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(d){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(Vr(this));const n=e?wt(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KR(this),n=new XR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await HR(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&bi(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await Eo.create(this,[bi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&AR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Hr(i){return wt(i)}class s0{constructor(e){this.auth=e,this.observer=null,this.addObserver=dx(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WR(i){Kh=i}function aT(i){return Kh.loadJS(i)}function ZR(){return Kh.recaptchaEnterpriseScript}function JR(){return Kh.gapiScript}function e1(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class t1{constructor(){this.enterprise=new n1}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class n1{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const r1="recaptcha-enterprise",oT="NO_RECAPTCHA";class i1{constructor(e){this.type=r1,this.auth=Hr(e)}async verify(e="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{VR(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new MR(g);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,d(_.siteKey)}}).catch(g=>{m(g)})})}function o(c,d,m){const g=window.grecaptcha;e0(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(_=>{d(_)}).catch(()=>{d(oT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new t1().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(m=>{if(!n&&e0(window.grecaptcha))o(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=ZR();g.length!==0&&(g+=m),aT(g).then(()=>{o(m,c,d)}).catch(_=>{d(_)})}}).catch(m=>{d(m)})})}}async function a0(i,e,n,s=!1,o=!1){const c=new i1(i);let d;if(o)d=oT;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Ih(i,e,n,s,o){var c;if((c=i._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await a0(i,e,n,n==="getOobCode");return s(i,d)}else return s(i,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await a0(i,e,n,n==="getOobCode");return s(i,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(i,e){const n=ug(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(ha(c,e??{}))return o;tr(o,"already-initialized")}return n.initialize({options:e})}function a1(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(bi);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function o1(i,e,n){const s=Hr(i);xe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=lT(e),{host:d,port:m}=l1(e),g=m===null?"":`:${m}`,_={url:`${c}//${d}${g}/`},T=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){xe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),xe(ha(_,s.config.emulator)&&ha(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,Po(d)?(kE(`${c}//${d}${g}`),jE("Auth",!0)):c1()}function lT(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function l1(i){const e=lT(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:o0(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:o0(d)}}}function o0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function c1(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,n){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}async function u1(i,e){return Br(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h1(i,e){return Sc(i,"POST","/v1/accounts:signInWithPassword",Ni(i,e))}async function cT(i,e){return Br(i,"POST","/v1/accounts:sendOobCode",Ni(i,e))}async function d1(i,e){return cT(i,e)}async function f1(i,e){return cT(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(i,e){return Sc(i,"POST","/v1/accounts:signInWithEmailLink",Ni(i,e))}async function g1(i,e){return Sc(i,"POST","/v1/accounts:signInWithEmailLink",Ni(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends pg{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new hc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new hc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ih(e,n,"signInWithPassword",h1);case"emailLink":return m1(e,{email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ih(e,s,"signUpPassword",u1);case"emailLink":return g1(e,{idToken:n,email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(i,e){return Sc(i,"POST","/v1/accounts:signInWithIdp",Ni(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="http://localhost";class fa extends pg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):tr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=n;if(!s||!o)return null;const d=new fa(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return To(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,To(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,To(e,n)}buildRequest(){const e={requestUri:p1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _1(i){const e=Xl($l(i)).link,n=e?Xl($l(e)).deep_link_id:null,s=Xl($l(i)).deep_link_id;return(s?Xl($l(s)).link:null)||s||n||e||i}class yg{constructor(e){const n=Xl($l(e)),s=n.apiKey??null,o=n.oobCode??null,c=y1(n.mode??null);xe(s&&o&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=_1(e);try{return new yg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.providerId=Vo.PROVIDER_ID}static credential(e,n){return hc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=yg.parseLink(n);return xe(s,"argument-error"),hc._fromEmailAndCode(e,s.code,s.tenantId)}}Vo.PROVIDER_ID="password";Vo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends _g{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends xc{constructor(){super("facebook.com")}static credential(e){return fa._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.FACEBOOK_SIGN_IN_METHOD="facebook.com";os.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fa._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ti.credential(n,s)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends xc{constructor(){super("github.com")}static credential(e){return fa._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.GITHUB_SIGN_IN_METHOD="github.com";ls.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends xc{constructor(){super("twitter.com")}static credential(e,n){return fa._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return cs.credential(n,s)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uT(i,e){return Sc(i,"POST","/v1/accounts:signUp",Ni(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await ur._fromIdTokenResponse(e,s,o),d=l0(s);return new xi({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=l0(s);return new xi({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function l0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v1(i){var o;if(xn(i.app))return Promise.reject(Vr(i));const e=Hr(i);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new xi({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await uT(e,{returnSecureToken:!0}),s=await xi._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends Ci{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Ch.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Ch(e,n,s,o)}}function hT(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Ch._fromErrorAndOperation(i,c,e,s):c})}async function E1(i,e,n=!1){const s=await xo(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return xi._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(i,e,n=!1){const{auth:s}=i;if(xn(s.app))return Promise.reject(Vr(s));const o="reauthenticate";try{const c=await xo(i,hT(s,o,e,i),n);xe(c.idToken,s,"internal-error");const d=mg(c.idToken);xe(d,s,"internal-error");const{sub:m}=d;return xe(i.uid===m,s,"user-mismatch"),xi._forOperation(i,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&tr(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dT(i,e,n=!1){if(xn(i.app))return Promise.reject(Vr(i));const s="signIn",o=await hT(i,s,e),c=await xi._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(c.user),c}async function w1(i,e){return dT(Hr(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fT(i){const e=Hr(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function b1(i,e,n){const s=Hr(i);await Ih(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",f1)}async function A1(i,e,n){if(xn(i.app))return Promise.reject(Vr(i));const s=Hr(i),d=await Ih(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uT).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&fT(i),g}),m=await xi._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function S1(i,e,n){return xn(i.app)?Promise.reject(Vr(i)):w1(wt(i),Vo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&fT(i),s})}async function mT(i,e){const n=wt(i),o={requestType:"VERIFY_EMAIL",idToken:await i.getIdToken()},{email:c}=await d1(n.auth,o);c!==i.email&&await i.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(i,e){return Br(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R1(i,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=wt(i),c={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},d=await xo(s,x1(s.auth,c));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const m=s.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function I1(i,e,n,s){return wt(i).onIdTokenChanged(e,n,s)}function C1(i,e,n){return wt(i).beforeAuthStateChanged(e,n)}function N1(i,e,n,s){return wt(i).onAuthStateChanged(e,n,s)}function D1(i){return wt(i).signOut()}const Nh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=1e3,P1=10;class pT extends gT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);GR()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,P1):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},O1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pT.type="LOCAL";const M1=pT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT extends gT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yT.type="SESSION";const _T=yT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Yh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async _=>_(n.origin,c)),g=await V1(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((m,g)=>{const _=vg("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(A){const S=A;if(S.data.eventId===_)switch(S.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(S.data.response);break;default:clearTimeout(T),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return window}function j1(i){kr().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(){return typeof kr().WorkerGlobalScope<"u"&&typeof kr().importScripts=="function"}async function L1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function U1(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function z1(){return vT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="firebaseLocalStorageDb",q1=1,Dh="firebaseLocalStorage",TT="fbase_key";class Rc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xh(i,e){return i.transaction([Dh],e?"readwrite":"readonly").objectStore(Dh)}function B1(){const i=indexedDB.deleteDatabase(ET);return new Rc(i).toPromise()}function qm(){const i=indexedDB.open(ET,q1);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Dh,{keyPath:TT})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Dh)?e(s):(s.close(),await B1(),e(await qm()))})})}async function c0(i,e,n){const s=Xh(i,!0).put({[TT]:e,value:n});return new Rc(s).toPromise()}async function H1(i,e){const n=Xh(i,!1).get(e),s=await new Rc(n).toPromise();return s===void 0?null:s.value}function u0(i,e){const n=Xh(i,!0).delete(e);return new Rc(n).toPromise()}const F1=800,G1=3;class wT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>G1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yh._getInstance(z1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await L1(),!this.activeServiceWorker)return;this.sender=new k1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||U1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qm();return await c0(e,Nh,"1"),await u0(e,Nh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>c0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>H1(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>u0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Xh(o,!1).getAll();return new Rc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),F1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wT.type="LOCAL";const Q1=wT;new Ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(i,e){return e?bi(e):(xe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg extends pg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return To(e,this._buildIdpRequest())}_linkToIdToken(e,n){return To(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return To(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function K1(i){return dT(i.auth,new Eg(i),i.bypassAuthState)}function Y1(i){const{auth:e,user:n}=i;return xe(n,e,"internal-error"),T1(n,new Eg(i),i.bypassAuthState)}async function X1(i){const{auth:e,user:n}=i;return xe(n,e,"internal-error"),E1(n,new Eg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return K1;case"linkViaPopup":case"linkViaRedirect":return X1;case"reauthViaPopup":case"reauthViaRedirect":return Y1;default:tr(this.auth,"internal-error")}}resolve(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=new Ac(2e3,1e4);async function W1(i,e,n){if(xn(i.app))return Promise.reject(hr(i,"operation-not-supported-in-this-environment"));const s=Hr(i);SR(i,e,_g);const o=bT(s,n);return new ca(s,"signInViaPopup",e,o).executeNotNull()}class ca extends AT{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,ca.currentPopupAction&&ca.currentPopupAction.cancel(),ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Si(this.filter.length===1,"Popup operations only handle one event");const e=vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$1.get())};e()}}ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="pendingRedirect",gh=new Map;class J1 extends AT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=gh.get(this.auth._key());if(!e){try{const s=await eI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}gh.set(this.auth._key(),e)}return this.bypassAuthState||gh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eI(i,e){const n=rI(e),s=nI(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function tI(i,e){gh.set(i._key(),e)}function nI(i){return bi(i._redirectPersistence)}function rI(i){return mh(Z1,i.config.apiKey,i.name)}async function iI(i,e,n=!1){if(xn(i.app))return Promise.reject(Vr(i));const s=Hr(i),o=bT(s,e),d=await new J1(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=600*1e3;class aI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!ST(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(hr(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sI&&this.cachedEventUids.clear(),this.cachedEventUids.has(h0(e))}saveEventToCache(e){this.cachedEventUids.add(h0(e)),this.lastProcessedEventTime=Date.now()}}function h0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function ST({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function oI(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ST(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lI(i,e={}){return Br(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uI=/^https?/;async function hI(i){if(i.config.emulator)return;const{authorizedDomains:e}=await lI(i);for(const n of e)try{if(dI(n))return}catch{}tr(i,"unauthorized-domain")}function dI(i){const e=Um(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!uI.test(n))return!1;if(cI.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=new Ac(3e4,6e4);function d0(){const i=kr().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function mI(i){return new Promise((e,n)=>{var o,c,d;function s(){d0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{d0(),n(hr(i,"network-request-failed"))},timeout:fI.get()})}if((c=(o=kr().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=kr().gapi)!=null&&d.load)s();else{const m=e1("iframefcb");return kr()[m]=()=>{gapi.load?s():n(hr(i,"network-request-failed"))},aT(`${JR()}?onload=${m}`).catch(g=>n(g))}}).catch(e=>{throw ph=null,e})}let ph=null;function gI(i){return ph=ph||mI(i),ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=new Ac(5e3,15e3),yI="__/auth/iframe",_I="emulator/auth/iframe",vI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function TI(i){const e=i.config;xe(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?fg(e,_I):`https://${i.config.authDomain}/${yI}`,s={apiKey:e.apiKey,appName:i.name,v:Mo},o=EI.get(i.config.apiHost);o&&(s.eid=o);const c=i._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${bc(s).slice(1)}`}async function wI(i){const e=await gI(i),n=kr().gapi;return xe(n,i,"internal-error"),e.open({where:document.body,url:TI(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vI,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=hr(i,"network-request-failed"),m=kr().setTimeout(()=>{c(d)},pI.get());function g(){kr().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AI=500,SI=600,xI="_blank",RI="http://localhost";class f0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function II(i,e,n,s=AI,o=SI){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...bI,width:s.toString(),height:o.toString(),top:c,left:d},_=dn().toLowerCase();n&&(m=JE(_)?xI:n),WE(_)&&(e=e||RI,g.scrollbars="yes");const T=Object.entries(g).reduce((S,[O,j])=>`${S}${O}=${j},`,"");if(FR(_)&&m!=="_self")return CI(e||"",m),new f0(null);const A=window.open(e||"",m,T);xe(A,i,"popup-blocked");try{A.focus()}catch{}return new f0(A)}function CI(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="__/auth/handler",DI="emulator/auth/handler",OI=encodeURIComponent("fac");async function m0(i,e,n,s,o,c){xe(i.config.authDomain,i,"auth-domain-config-required"),xe(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Mo,eventId:o};if(e instanceof _g){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",hx(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,A]of Object.entries({}))d[T]=A}if(e instanceof xc){const T=e.getScopes().filter(A=>A!=="");T.length>0&&(d.scopes=T.join(","))}i.tenantId&&(d.tid=i.tenantId);const m=d;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await i._getAppCheckToken(),_=g?`#${OI}=${encodeURIComponent(g)}`:"";return`${PI(i)}?${bc(m).slice(1)}${_}`}function PI({config:i}){return i.emulator?fg(i,DI):`https://${i.authDomain}/${NI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="webStorageSupport";class MI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_T,this._completeRedirectFn=iI,this._overrideRedirectResult=tI}async _openPopup(e,n,s,o){var d;Si((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await m0(e,n,s,Um(),o);return II(e,c,vg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await m0(e,n,s,Um(),o);return j1(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Si(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await wI(e),s=new aI(e);return n.register("authEvent",o=>(xe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xm,{type:xm},o=>{var d;const c=(d=o==null?void 0:o[0])==null?void 0:d[xm];c!==void 0&&n(!!c),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=hI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iT()||ZE()||gg()}}const VI=MI;var g0="@firebase/auth",p0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LI(i){So(new da("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;xe(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sT(i)},_=new $R(s,o,c,g);return a1(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),So(new da("auth-internal",e=>{const n=Hr(e.getProvider("auth").getImmediate());return(s=>new kI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(g0,p0,jI(i)),ms(g0,p0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=300,zI=VE("authIdTokenMaxAge")||UI;let y0=null;const qI=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>zI)return;const o=n==null?void 0:n.token;y0!==o&&(y0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function BI(i=qE()){const e=ug(i,"auth");if(e.isInitialized())return e.getImmediate();const n=s1(i,{popupRedirectResolver:VI,persistence:[Q1,M1,_T]}),s=VE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=qI(c.toString());C1(n,d,()=>d(n.currentUser)),I1(n,m=>d(m))}}const o=PE("auth");return o&&o1(n,`http://${o}`),n}function HI(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}WR({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const c=hr("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",HI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LI("Browser");var _0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gs,xT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,x){function I(){}I.prototype=x.prototype,C.D=x.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(P,M,k){for(var R=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)R[Ie-2]=arguments[Ie];return x.prototype[M].apply(P,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,x,I){I||(I=0);var P=Array(16);if(typeof x=="string")for(var M=0;16>M;++M)P[M]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(M=0;16>M;++M)P[M]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=C.g[0],I=C.g[1],M=C.g[2];var k=C.g[3],R=x+(k^I&(M^k))+P[0]+3614090360&4294967295;x=I+(R<<7&4294967295|R>>>25),R=k+(M^x&(I^M))+P[1]+3905402710&4294967295,k=x+(R<<12&4294967295|R>>>20),R=M+(I^k&(x^I))+P[2]+606105819&4294967295,M=k+(R<<17&4294967295|R>>>15),R=I+(x^M&(k^x))+P[3]+3250441966&4294967295,I=M+(R<<22&4294967295|R>>>10),R=x+(k^I&(M^k))+P[4]+4118548399&4294967295,x=I+(R<<7&4294967295|R>>>25),R=k+(M^x&(I^M))+P[5]+1200080426&4294967295,k=x+(R<<12&4294967295|R>>>20),R=M+(I^k&(x^I))+P[6]+2821735955&4294967295,M=k+(R<<17&4294967295|R>>>15),R=I+(x^M&(k^x))+P[7]+4249261313&4294967295,I=M+(R<<22&4294967295|R>>>10),R=x+(k^I&(M^k))+P[8]+1770035416&4294967295,x=I+(R<<7&4294967295|R>>>25),R=k+(M^x&(I^M))+P[9]+2336552879&4294967295,k=x+(R<<12&4294967295|R>>>20),R=M+(I^k&(x^I))+P[10]+4294925233&4294967295,M=k+(R<<17&4294967295|R>>>15),R=I+(x^M&(k^x))+P[11]+2304563134&4294967295,I=M+(R<<22&4294967295|R>>>10),R=x+(k^I&(M^k))+P[12]+1804603682&4294967295,x=I+(R<<7&4294967295|R>>>25),R=k+(M^x&(I^M))+P[13]+4254626195&4294967295,k=x+(R<<12&4294967295|R>>>20),R=M+(I^k&(x^I))+P[14]+2792965006&4294967295,M=k+(R<<17&4294967295|R>>>15),R=I+(x^M&(k^x))+P[15]+1236535329&4294967295,I=M+(R<<22&4294967295|R>>>10),R=x+(M^k&(I^M))+P[1]+4129170786&4294967295,x=I+(R<<5&4294967295|R>>>27),R=k+(I^M&(x^I))+P[6]+3225465664&4294967295,k=x+(R<<9&4294967295|R>>>23),R=M+(x^I&(k^x))+P[11]+643717713&4294967295,M=k+(R<<14&4294967295|R>>>18),R=I+(k^x&(M^k))+P[0]+3921069994&4294967295,I=M+(R<<20&4294967295|R>>>12),R=x+(M^k&(I^M))+P[5]+3593408605&4294967295,x=I+(R<<5&4294967295|R>>>27),R=k+(I^M&(x^I))+P[10]+38016083&4294967295,k=x+(R<<9&4294967295|R>>>23),R=M+(x^I&(k^x))+P[15]+3634488961&4294967295,M=k+(R<<14&4294967295|R>>>18),R=I+(k^x&(M^k))+P[4]+3889429448&4294967295,I=M+(R<<20&4294967295|R>>>12),R=x+(M^k&(I^M))+P[9]+568446438&4294967295,x=I+(R<<5&4294967295|R>>>27),R=k+(I^M&(x^I))+P[14]+3275163606&4294967295,k=x+(R<<9&4294967295|R>>>23),R=M+(x^I&(k^x))+P[3]+4107603335&4294967295,M=k+(R<<14&4294967295|R>>>18),R=I+(k^x&(M^k))+P[8]+1163531501&4294967295,I=M+(R<<20&4294967295|R>>>12),R=x+(M^k&(I^M))+P[13]+2850285829&4294967295,x=I+(R<<5&4294967295|R>>>27),R=k+(I^M&(x^I))+P[2]+4243563512&4294967295,k=x+(R<<9&4294967295|R>>>23),R=M+(x^I&(k^x))+P[7]+1735328473&4294967295,M=k+(R<<14&4294967295|R>>>18),R=I+(k^x&(M^k))+P[12]+2368359562&4294967295,I=M+(R<<20&4294967295|R>>>12),R=x+(I^M^k)+P[5]+4294588738&4294967295,x=I+(R<<4&4294967295|R>>>28),R=k+(x^I^M)+P[8]+2272392833&4294967295,k=x+(R<<11&4294967295|R>>>21),R=M+(k^x^I)+P[11]+1839030562&4294967295,M=k+(R<<16&4294967295|R>>>16),R=I+(M^k^x)+P[14]+4259657740&4294967295,I=M+(R<<23&4294967295|R>>>9),R=x+(I^M^k)+P[1]+2763975236&4294967295,x=I+(R<<4&4294967295|R>>>28),R=k+(x^I^M)+P[4]+1272893353&4294967295,k=x+(R<<11&4294967295|R>>>21),R=M+(k^x^I)+P[7]+4139469664&4294967295,M=k+(R<<16&4294967295|R>>>16),R=I+(M^k^x)+P[10]+3200236656&4294967295,I=M+(R<<23&4294967295|R>>>9),R=x+(I^M^k)+P[13]+681279174&4294967295,x=I+(R<<4&4294967295|R>>>28),R=k+(x^I^M)+P[0]+3936430074&4294967295,k=x+(R<<11&4294967295|R>>>21),R=M+(k^x^I)+P[3]+3572445317&4294967295,M=k+(R<<16&4294967295|R>>>16),R=I+(M^k^x)+P[6]+76029189&4294967295,I=M+(R<<23&4294967295|R>>>9),R=x+(I^M^k)+P[9]+3654602809&4294967295,x=I+(R<<4&4294967295|R>>>28),R=k+(x^I^M)+P[12]+3873151461&4294967295,k=x+(R<<11&4294967295|R>>>21),R=M+(k^x^I)+P[15]+530742520&4294967295,M=k+(R<<16&4294967295|R>>>16),R=I+(M^k^x)+P[2]+3299628645&4294967295,I=M+(R<<23&4294967295|R>>>9),R=x+(M^(I|~k))+P[0]+4096336452&4294967295,x=I+(R<<6&4294967295|R>>>26),R=k+(I^(x|~M))+P[7]+1126891415&4294967295,k=x+(R<<10&4294967295|R>>>22),R=M+(x^(k|~I))+P[14]+2878612391&4294967295,M=k+(R<<15&4294967295|R>>>17),R=I+(k^(M|~x))+P[5]+4237533241&4294967295,I=M+(R<<21&4294967295|R>>>11),R=x+(M^(I|~k))+P[12]+1700485571&4294967295,x=I+(R<<6&4294967295|R>>>26),R=k+(I^(x|~M))+P[3]+2399980690&4294967295,k=x+(R<<10&4294967295|R>>>22),R=M+(x^(k|~I))+P[10]+4293915773&4294967295,M=k+(R<<15&4294967295|R>>>17),R=I+(k^(M|~x))+P[1]+2240044497&4294967295,I=M+(R<<21&4294967295|R>>>11),R=x+(M^(I|~k))+P[8]+1873313359&4294967295,x=I+(R<<6&4294967295|R>>>26),R=k+(I^(x|~M))+P[15]+4264355552&4294967295,k=x+(R<<10&4294967295|R>>>22),R=M+(x^(k|~I))+P[6]+2734768916&4294967295,M=k+(R<<15&4294967295|R>>>17),R=I+(k^(M|~x))+P[13]+1309151649&4294967295,I=M+(R<<21&4294967295|R>>>11),R=x+(M^(I|~k))+P[4]+4149444226&4294967295,x=I+(R<<6&4294967295|R>>>26),R=k+(I^(x|~M))+P[11]+3174756917&4294967295,k=x+(R<<10&4294967295|R>>>22),R=M+(x^(k|~I))+P[2]+718787259&4294967295,M=k+(R<<15&4294967295|R>>>17),R=I+(k^(M|~x))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+x&4294967295,C.g[1]=C.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+k&4294967295}s.prototype.u=function(C,x){x===void 0&&(x=C.length);for(var I=x-this.blockSize,P=this.B,M=this.h,k=0;k<x;){if(M==0)for(;k<=I;)o(this,C,k),k+=this.blockSize;if(typeof C=="string"){for(;k<x;)if(P[M++]=C.charCodeAt(k++),M==this.blockSize){o(this,P),M=0;break}}else for(;k<x;)if(P[M++]=C[k++],M==this.blockSize){o(this,P),M=0;break}}this.h=M,this.o+=x},s.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var x=1;x<C.length-8;++x)C[x]=0;var I=8*this.o;for(x=C.length-8;x<C.length;++x)C[x]=I&255,I/=256;for(this.u(C),C=Array(16),x=I=0;4>x;++x)for(var P=0;32>P;P+=8)C[I++]=this.g[x]>>>P&255;return C};function c(C,x){var I=m;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=x(C)}function d(C,x){this.h=x;for(var I=[],P=!0,M=C.length-1;0<=M;M--){var k=C[M]|0;P&&k==x||(I[M]=k,P=!1)}this.g=I}var m={};function g(C){return-128<=C&&128>C?c(C,function(x){return new d([x|0],0>x?-1:0)}):new d([C|0],0>C?-1:0)}function _(C){if(isNaN(C)||!isFinite(C))return A;if(0>C)return H(_(-C));for(var x=[],I=1,P=0;C>=I;P++)x[P]=C/I|0,I*=4294967296;return new d(x,0)}function T(C,x){if(C.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C.charAt(0)=="-")return H(T(C.substring(1),x));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=_(Math.pow(x,8)),P=A,M=0;M<C.length;M+=8){var k=Math.min(8,C.length-M),R=parseInt(C.substring(M,M+k),x);8>k?(k=_(Math.pow(x,k)),P=P.j(k).add(_(R))):(P=P.j(I),P=P.add(_(R)))}return P}var A=g(0),S=g(1),O=g(16777216);i=d.prototype,i.m=function(){if(Q(this))return-H(this).m();for(var C=0,x=1,I=0;I<this.g.length;I++){var P=this.i(I);C+=(0<=P?P:4294967296+P)*x,x*=4294967296}return C},i.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(j(this))return"0";if(Q(this))return"-"+H(this).toString(C);for(var x=_(Math.pow(C,6)),I=this,P="";;){var M=ge(I,x).g;I=ae(I,M.j(x));var k=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=M,j(I))return k+P;for(;6>k.length;)k="0"+k;P=k+P}},i.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function j(C){if(C.h!=0)return!1;for(var x=0;x<C.g.length;x++)if(C.g[x]!=0)return!1;return!0}function Q(C){return C.h==-1}i.l=function(C){return C=ae(this,C),Q(C)?-1:j(C)?0:1};function H(C){for(var x=C.g.length,I=[],P=0;P<x;P++)I[P]=~C.g[P];return new d(I,~C.h).add(S)}i.abs=function(){return Q(this)?H(this):this},i.add=function(C){for(var x=Math.max(this.g.length,C.g.length),I=[],P=0,M=0;M<=x;M++){var k=P+(this.i(M)&65535)+(C.i(M)&65535),R=(k>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);P=R>>>16,k&=65535,R&=65535,I[M]=R<<16|k}return new d(I,I[I.length-1]&-2147483648?-1:0)};function ae(C,x){return C.add(H(x))}i.j=function(C){if(j(this)||j(C))return A;if(Q(this))return Q(C)?H(this).j(H(C)):H(H(this).j(C));if(Q(C))return H(this.j(H(C)));if(0>this.l(O)&&0>C.l(O))return _(this.m()*C.m());for(var x=this.g.length+C.g.length,I=[],P=0;P<2*x;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var M=0;M<C.g.length;M++){var k=this.i(P)>>>16,R=this.i(P)&65535,Ie=C.i(M)>>>16,De=C.i(M)&65535;I[2*P+2*M]+=R*De,re(I,2*P+2*M),I[2*P+2*M+1]+=k*De,re(I,2*P+2*M+1),I[2*P+2*M+1]+=R*Ie,re(I,2*P+2*M+1),I[2*P+2*M+2]+=k*Ie,re(I,2*P+2*M+2)}for(P=0;P<x;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=x;P<2*x;P++)I[P]=0;return new d(I,0)};function re(C,x){for(;(C[x]&65535)!=C[x];)C[x+1]+=C[x]>>>16,C[x]&=65535,x++}function ie(C,x){this.g=C,this.h=x}function ge(C,x){if(j(x))throw Error("division by zero");if(j(C))return new ie(A,A);if(Q(C))return x=ge(H(C),x),new ie(H(x.g),H(x.h));if(Q(x))return x=ge(C,H(x)),new ie(H(x.g),x.h);if(30<C.g.length){if(Q(C)||Q(x))throw Error("slowDivide_ only works with positive integers.");for(var I=S,P=x;0>=P.l(C);)I=ue(I),P=ue(P);var M=Y(I,1),k=Y(P,1);for(P=Y(P,2),I=Y(I,2);!j(P);){var R=k.add(P);0>=R.l(C)&&(M=M.add(I),k=R),P=Y(P,1),I=Y(I,1)}return x=ae(C,M.j(x)),new ie(M,x)}for(M=A;0<=C.l(x);){for(I=Math.max(1,Math.floor(C.m()/x.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),k=_(I),R=k.j(x);Q(R)||0<R.l(C);)I-=P,k=_(I),R=k.j(x);j(k)&&(k=S),M=M.add(k),C=ae(C,R)}return new ie(M,C)}i.A=function(C){return ge(this,C).h},i.and=function(C){for(var x=Math.max(this.g.length,C.g.length),I=[],P=0;P<x;P++)I[P]=this.i(P)&C.i(P);return new d(I,this.h&C.h)},i.or=function(C){for(var x=Math.max(this.g.length,C.g.length),I=[],P=0;P<x;P++)I[P]=this.i(P)|C.i(P);return new d(I,this.h|C.h)},i.xor=function(C){for(var x=Math.max(this.g.length,C.g.length),I=[],P=0;P<x;P++)I[P]=this.i(P)^C.i(P);return new d(I,this.h^C.h)};function ue(C){for(var x=C.g.length+1,I=[],P=0;P<x;P++)I[P]=C.i(P)<<1|C.i(P-1)>>>31;return new d(I,C.h)}function Y(C,x){var I=x>>5;x%=32;for(var P=C.g.length-I,M=[],k=0;k<P;k++)M[k]=0<x?C.i(k+I)>>>x|C.i(k+I+1)<<32-x:C.i(k+I);return new d(M,C.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,xT=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=T,gs=d}).apply(typeof _0<"u"?_0:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RT,Wl,IT,yh,Bm,CT,NT,DT;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,v){return u==Array.prototype||u==Object.prototype||(u[p]=v.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var p=0;p<u.length;++p){var v=u[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(u,p){if(p)e:{var v=s;u=u.split(".");for(var b=0;b<u.length-1;b++){var z=u[b];if(!(z in v))break e;v=v[z]}u=u[u.length-1],b=v[u],p=p(b),p!=b&&p!=null&&e(v,u,{configurable:!0,writable:!0,value:p})}}function c(u,p){u instanceof String&&(u+="");var v=0,b=!1,z={next:function(){if(!b&&v<u.length){var K=v++;return{value:p(K,u[K]),done:!1}}return b=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(u){return u||function(){return c(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function g(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function _(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function T(u,p,v){return u.call.apply(u.bind,arguments)}function A(u,p,v){if(!u)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,b),u.apply(p,z)}}return function(){return u.apply(p,arguments)}}function S(u,p,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:A,S.apply(null,arguments)}function O(u,p){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function j(u,p){function v(){}v.prototype=p.prototype,u.aa=p.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(b,z,K){for(var ce=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ce[Be-2]=arguments[Be];return p.prototype[z].apply(b,ce)}}function Q(u){const p=u.length;if(0<p){const v=Array(p);for(let b=0;b<p;b++)v[b]=u[b];return v}return[]}function H(u,p){for(let v=1;v<arguments.length;v++){const b=arguments[v];if(g(b)){const z=u.length||0,K=b.length||0;u.length=z+K;for(let ce=0;ce<K;ce++)u[z+ce]=b[ce]}else u.push(b)}}class ae{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function re(u){return/^[\s\xa0]*$/.test(u)}function ie(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function ge(u){return ge[" "](u),u}ge[" "]=function(){};var ue=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function Y(u,p,v){for(const b in u)p.call(v,u[b],b,u)}function C(u,p){for(const v in u)p.call(void 0,u[v],v,u)}function x(u){const p={};for(const v in u)p[v]=u[v];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,p){let v,b;for(let z=1;z<arguments.length;z++){b=arguments[z];for(v in b)u[v]=b[v];for(let K=0;K<I.length;K++)v=I[K],Object.prototype.hasOwnProperty.call(b,v)&&(u[v]=b[v])}}function M(u){var p=1;u=u.split(":");const v=[];for(;0<p&&u.length;)v.push(u.shift()),p--;return u.length&&v.push(u.join(":")),v}function k(u){m.setTimeout(()=>{throw u},0)}function R(){var u=ye;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Ie{constructor(){this.h=this.g=null}add(p,v){const b=De.get();b.set(p,v),this.h?this.h.next=b:this.g=b,this.h=b}}var De=new ae(()=>new U,u=>u.reset());class U{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,se=!1,ye=new Ie,D=()=>{const u=m.Promise.resolve(void 0);ne=()=>{u.then(Z)}};var Z=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(v){k(v)}var p=De;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}se=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};m.addEventListener("test",v,p),m.removeEventListener("test",v,p)}catch{}return u})();function Ne(u,p){if(oe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(ue){e:{try{ge(p.nodeName);var z=!0;break e}catch{}z=!1}z||(p=null)}}else v=="mouseover"?p=u.fromElement:v=="mouseout"&&(p=u.toElement);this.relatedTarget=p,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ae[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ne.aa.h.call(this)}}j(Ne,oe);var Ae={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Rt="closure_listenable_"+(1e6*Math.random()|0),nt=0;function zn(u,p,v,b,z){this.listener=u,this.proxy=null,this.src=p,this.type=v,this.capture=!!b,this.ha=z,this.key=++nt,this.da=this.fa=!1}function nr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function gr(u){this.src=u,this.g={},this.h=0}gr.prototype.add=function(u,p,v,b,z){var K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);var ce=pr(u,p,b,z);return-1<ce?(p=u[ce],v||(p.fa=!1)):(p=new zn(p,this.src,K,!!b,z),p.fa=v,u.push(p)),p};function Oi(u,p){var v=p.type;if(v in u.g){var b=u.g[v],z=Array.prototype.indexOf.call(b,p,void 0),K;(K=0<=z)&&Array.prototype.splice.call(b,z,1),K&&(nr(p),u.g[v].length==0&&(delete u.g[v],u.h--))}}function pr(u,p,v,b){for(var z=0;z<u.length;++z){var K=u[z];if(!K.da&&K.listener==p&&K.capture==!!v&&K.ha==b)return z}return-1}var yr="closure_lm_"+(1e6*Math.random()|0),Fr={};function Ea(u,p,v,b,z){if(Array.isArray(p)){for(var K=0;K<p.length;K++)Ea(u,p[K],v,b,z);return null}return v=Ta(v),u&&u[Rt]?u.K(p,v,_(b)?!!b.capture:!1,z):En(u,p,v,!1,b,z)}function En(u,p,v,b,z,K){if(!p)throw Error("Invalid event type");var ce=_(z)?!!z.capture:!!z,Be=Pi(u);if(Be||(u[yr]=Be=new gr(u)),v=Be.add(p,v,b,ce,K),v.proxy)return v;if(b=Bo(),v.proxy=b,b.src=u,b.listener=v,u.addEventListener)_e||(z=ce),z===void 0&&(z=!1),u.addEventListener(p.toString(),b,z);else if(u.attachEvent)u.attachEvent(Qr(p.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Bo(){function u(v){return p.call(u.src,u.listener,v)}const p=Ho;return u}function Is(u,p,v,b,z){if(Array.isArray(p))for(var K=0;K<p.length;K++)Is(u,p[K],v,b,z);else b=_(b)?!!b.capture:!!b,v=Ta(v),u&&u[Rt]?(u=u.i,p=String(p).toString(),p in u.g&&(K=u.g[p],v=pr(K,v,b,z),-1<v&&(nr(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete u.g[p],u.h--)))):u&&(u=Pi(u))&&(p=u.g[p.toString()],u=-1,p&&(u=pr(p,v,b,z)),(v=-1<u?p[u]:null)&&Gr(v))}function Gr(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Rt])Oi(p.i,u);else{var v=u.type,b=u.proxy;p.removeEventListener?p.removeEventListener(v,b,u.capture):p.detachEvent?p.detachEvent(Qr(v),b):p.addListener&&p.removeListener&&p.removeListener(b),(v=Pi(p))?(Oi(v,u),v.h==0&&(v.src=null,p[yr]=null)):nr(u)}}}function Qr(u){return u in Fr?Fr[u]:Fr[u]="on"+u}function Ho(u,p){if(u.da)u=!0;else{p=new Ne(p,this);var v=u.listener,b=u.ha||u.src;u.fa&&Gr(u),u=v.call(b,p)}return u}function Pi(u){return u=u[yr],u instanceof gr?u:null}var Cs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ta(u){return typeof u=="function"?u:(u[Cs]||(u[Cs]=function(p){return u.handleEvent(p)}),u[Cs])}function ht(){le.call(this),this.i=new gr(this),this.M=this,this.F=null}j(ht,le),ht.prototype[Rt]=!0,ht.prototype.removeEventListener=function(u,p,v,b){Is(this,u,p,v,b)};function Ye(u,p){var v,b=u.F;if(b)for(v=[];b;b=b.F)v.push(b);if(u=u.M,b=p.type||p,typeof p=="string")p=new oe(p,u);else if(p instanceof oe)p.target=p.target||u;else{var z=p;p=new oe(b,u),P(p,z)}if(z=!0,v)for(var K=v.length-1;0<=K;K--){var ce=p.g=v[K];z=fn(ce,b,!0,p)&&z}if(ce=p.g=u,z=fn(ce,b,!0,p)&&z,z=fn(ce,b,!1,p)&&z,v)for(K=0;K<v.length;K++)ce=p.g=v[K],z=fn(ce,b,!1,p)&&z}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var v=u.g[p],b=0;b<v.length;b++)nr(v[b]);delete u.g[p],u.h--}}this.F=null},ht.prototype.K=function(u,p,v,b){return this.i.add(String(u),p,!1,v,b)},ht.prototype.L=function(u,p,v,b){return this.i.add(String(u),p,!0,v,b)};function fn(u,p,v,b){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var z=!0,K=0;K<p.length;++K){var ce=p[K];if(ce&&!ce.da&&ce.capture==v){var Be=ce.listener,jt=ce.ha||ce.src;ce.fa&&Oi(u.i,ce),z=Be.call(jt,b)!==!1&&z}}return z&&!b.defaultPrevented}function Bt(u,p,v){if(typeof u=="function")v&&(u=S(u,v));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(u,p||0)}function wa(u){u.g=Bt(()=>{u.g=null,u.i&&(u.i=!1,wa(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Fo extends le{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:wa(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kr(u){le.call(this),this.h=u,this.g={}}j(Kr,le);var _r=[];function Yr(u){Y(u.g,function(p,v){this.g.hasOwnProperty(v)&&Gr(p)},u),u.g={}}Kr.prototype.N=function(){Kr.aa.N.call(this),Yr(this)},Kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var In=m.JSON.stringify,Xr=m.JSON.parse,$r=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function Wr(){}Wr.prototype.h=null;function Ns(u){return u.h||(u.h=u.i())}function Ds(){}var rr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ir(){oe.call(this,"d")}j(ir,oe);function Os(){oe.call(this,"c")}j(Os,oe);var qn={},de=null;function fe(){return de=de||new ht}qn.La="serverreachability";function dt(u){oe.call(this,qn.La,u)}j(dt,oe);function Tn(u){const p=fe();Ye(p,new dt(p))}qn.STAT_EVENT="statevent";function jc(u,p){oe.call(this,qn.STAT_EVENT,u),this.stat=p}j(jc,oe);function ft(u){const p=fe();Ye(p,new jc(p,u))}qn.Ma="timingevent";function kt(u,p){oe.call(this,qn.Ma,u),this.size=p}j(kt,oe);function It(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},p)}function Bn(){this.g=!0}Bn.prototype.xa=function(){this.g=!1};function Go(u,p,v,b,z,K){u.info(function(){if(u.g)if(K)for(var ce="",Be=K.split("&"),jt=0;jt<Be.length;jt++){var He=Be[jt].split("=");if(1<He.length){var Ft=He[0];He=He[1];var Lt=Ft.split("_");ce=2<=Lt.length&&Lt[1]=="type"?ce+(Ft+"="+He+"&"):ce+(Ft+"=redacted&")}}else ce=null;else ce=K;return"XMLHTTP REQ ("+b+") [attempt "+z+"]: "+p+`
`+v+`
`+ce})}function md(u,p,v,b,z,K,ce){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+z+"]: "+p+`
`+v+`
`+K+" "+ce})}function Mi(u,p,v,b){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ps(u,v)+(b?" "+b:"")})}function Lc(u,p){u.info(function(){return"TIMEOUT: "+p})}Bn.prototype.info=function(){};function Ps(u,p){if(!u.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var b=v[u];if(!(2>b.length)){var z=b[1];if(Array.isArray(z)&&!(1>z.length)){var K=z[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ce=1;ce<z.length;ce++)z[ce]=""}}}}return In(v)}catch{return p}}var Vi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vr;function Er(){}j(Er,Wr),Er.prototype.g=function(){return new XMLHttpRequest},Er.prototype.i=function(){return{}},vr=new Er;function mn(u,p,v,b){this.j=u,this.i=p,this.l=v,this.R=b||1,this.U=new Kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bt}function bt(){this.i=null,this.g="",this.h=!1}var Qo={},ba={};function sr(u,p,v){u.L=1,u.v=Ls(Cn(p)),u.m=v,u.P=!0,Jr(u,null)}function Jr(u,p){u.F=Date.now(),Ms(u),u.A=Cn(u.v);var v=u.A,b=u.R;Array.isArray(b)||(b=[String(b)]),Zo(v.i,"t",b),u.C=0,v=u.j.J,u.h=new bt,u.g=eu(u.j,v?p:null,!u.m),0<u.O&&(u.M=new Fo(S(u.Y,u,u.g),u.O)),p=u.U,v=u.g,b=u.ca;var z="readystatechange";Array.isArray(z)||(z&&(_r[0]=z.toString()),z=_r);for(var K=0;K<z.length;K++){var ce=Ea(v,z[K],b||p.handleEvent,!1,p.h||p);if(!ce)break;p.g[ce.key]=ce}p=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Tn(),Go(u.i,u.u,u.A,u.l,u.R,u.m)}mn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Qn(u)==3?p.j():this.Y(u)},mn.prototype.Y=function(u){try{if(u==this.g)e:{const Lt=Qn(this.g);var p=this.g.Ba();const oi=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||Qc(this.g)))){this.J||Lt!=4||p==7||(p==8||0>=oi?Tn(3):Tn(2)),ki(this);var v=this.g.Z();this.X=v;t:if(Uc(this)){var b=Qc(this.g);u="";var z=b.length,K=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$t(this),Tr(this);var ce="";break t}this.h.i=new m.TextDecoder}for(p=0;p<z;p++)this.h.h=!0,u+=this.h.i.decode(b[p],{stream:!(K&&p==z-1)});b.length=0,this.h.g+=u,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=v==200,md(this.i,this.u,this.A,this.l,this.R,Lt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,jt=this.g;if((Be=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(Be)){var He=Be;break t}}He=null}if(v=He)Mi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vs(this,v);else{this.o=!1,this.s=3,ft(12),$t(this),Tr(this);break e}}if(this.P){v=!0;let Wt;for(;!this.J&&this.C<ce.length;)if(Wt=zc(this,ce),Wt==ba){Lt==4&&(this.s=4,ft(14),v=!1),Mi(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==Qo){this.s=4,ft(15),Mi(this.i,this.l,ce,"[Invalid Chunk]"),v=!1;break}else Mi(this.i,this.l,Wt,null),Vs(this,Wt);if(Uc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||ce.length!=0||this.h.h||(this.s=1,ft(16),v=!1),this.o=this.o&&v,!v)Mi(this.i,this.l,ce,"[Invalid Chunked Response]"),$t(this),Tr(this);else if(0<ce.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Qs(Ft),Ft.M=!0,ft(11))}}else Mi(this.i,this.l,ce,null),Vs(this,ce);Lt==4&&$t(this),this.o&&!this.J&&(Lt==4?Wc(this.j,this):(this.o=!1,Ms(this)))}else vd(this.g),v==400&&0<ce.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),$t(this),Tr(this)}}}catch{}finally{}};function Uc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function zc(u,p){var v=u.C,b=p.indexOf(`
`,v);return b==-1?ba:(v=Number(p.substring(v,b)),isNaN(v)?Qo:(b+=1,b+v>p.length?ba:(p=p.slice(b,b+v),u.C=b+v,p)))}mn.prototype.cancel=function(){this.J=!0,$t(this)};function Ms(u){u.S=Date.now()+u.I,qc(u,u.I)}function qc(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=It(S(u.ba,u),p)}function ki(u){u.B&&(m.clearTimeout(u.B),u.B=null)}mn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Lc(this.i,this.A),this.L!=2&&(Tn(),ft(17)),$t(this),this.s=2,Tr(this)):qc(this,this.S-u)};function Tr(u){u.j.G==0||u.J||Wc(u.j,u)}function $t(u){ki(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Yr(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Vs(u,p){try{var v=u.j;if(v.G!=0&&(v.g==u||Ko(v.h,u))){if(!u.K&&Ko(v.h,u)&&v.G==3){try{var b=v.Da.g.parse(p)}catch{b=null}if(Array.isArray(b)&&b.length==3){var z=b;if(z[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Va(v),Pa(v);else break e;rl(v),ft(18)}}else v.za=z[1],0<v.za-v.T&&37500>z[2]&&v.F&&v.v==0&&!v.C&&(v.C=It(S(v.Za,v),6e3));if(1>=Sa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else ai(v,11)}else if((u.K||v.g==u)&&Va(v),!re(p))for(z=v.Da.g.parse(p),p=0;p<z.length;p++){let He=z[p];if(v.T=He[0],He=He[1],v.G==2)if(He[0]=="c"){v.K=He[1],v.ia=He[2];const Ft=He[3];Ft!=null&&(v.la=Ft,v.j.info("VER="+v.la));const Lt=He[4];Lt!=null&&(v.Aa=Lt,v.j.info("SVER="+v.Aa));const oi=He[5];oi!=null&&typeof oi=="number"&&0<oi&&(b=1.5*oi,v.L=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const Wt=u.g;if(Wt){const Ir=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ir){var K=b.h;K.g||Ir.indexOf("spdy")==-1&&Ir.indexOf("quic")==-1&&Ir.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(xa(K,K.h),K.h=null))}if(b.D){const sl=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;sl&&(b.ya=sl,rt(b.I,b.D,sl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),b=v;var ce=u;if(b.qa=Jc(b,b.J?b.ia:null,b.W),ce.K){gn(b.h,ce);var Be=ce,jt=b.L;jt&&(Be.I=jt),Be.B&&(ki(Be),Ms(Be)),b.g=ce}else Xc(b);0<v.i.length&&Ma(v)}else He[0]!="stop"&&He[0]!="close"||ai(v,7);else v.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?ai(v,7):tl(v):He[0]!="noop"&&v.l&&v.l.ta(He),v.v=0)}}Tn(4)}catch{}}var Bc=class{constructor(u,p){this.g=u,this.map=p}};function ei(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Aa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Sa(u){return u.h?1:u.g?u.g.size:0}function Ko(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function xa(u,p){u.g?u.g.add(p):u.h=p}function gn(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}ei.prototype.cancel=function(){if(this.i=Yo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Yo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const v of u.g.values())p=p.concat(v.D);return p}return Q(u.i)}function gd(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var p=[],v=u.length,b=0;b<v;b++)p.push(u[b]);return p}p=[],v=0;for(b in u)p[v++]=u[b];return p}function Ra(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var p=[];u=u.length;for(var v=0;v<u;v++)p.push(v);return p}p=[],v=0;for(const b in u)p[v++]=b;return p}}}function Xo(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var v=Ra(u),b=gd(u),z=b.length,K=0;K<z;K++)p.call(void 0,b[K],v&&v[K],u)}var ks=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pd(u,p){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var b=u[v].indexOf("="),z=null;if(0<=b){var K=u[v].substring(0,b);z=u[v].substring(b+1)}else K=u[v];p(K,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Ct(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ct){this.h=u.h,js(this,u.j),this.o=u.o,this.g=u.g,ji(this,u.s),this.l=u.l;var p=u.i,v=new ni;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),ti(this,v),this.m=u.m}else u&&(p=String(u).match(ks))?(this.h=!1,js(this,p[1]||"",!0),this.o=Hn(p[2]||""),this.g=Hn(p[3]||"",!0),ji(this,p[4]),this.l=Hn(p[5]||"",!0),ti(this,p[6]||"",!0),this.m=Hn(p[7]||"")):(this.h=!1,this.i=new ni(null,this.h))}Ct.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Us(p,$o,!0),":");var v=this.g;return(v||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Us(p,$o,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Us(v,v.charAt(0)=="/"?yd:Wo,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Us(v,Ia)),u.join("")};function Cn(u){return new Ct(u)}function js(u,p,v){u.j=v?Hn(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function ji(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function ti(u,p,v){p instanceof ni?(u.i=p,Fc(u.i,u.h)):(v||(p=Us(p,_d)),u.i=new ni(p,u.h))}function rt(u,p,v){u.i.set(p,v)}function Ls(u){return rt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Hn(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Us(u,p,v){return typeof u=="string"?(u=encodeURI(u).replace(p,Hc),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Hc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var $o=/[#\/\?@]/g,Wo=/[#\?:]/g,yd=/[#\?]/g,_d=/[#\?@]/g,Ia=/#/g;function ni(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Fn(u){u.g||(u.g=new Map,u.h=0,u.i&&pd(u.i,function(p,v){u.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}i=ni.prototype,i.add=function(u,p){Fn(this),this.i=null,u=wr(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(p),this.h+=1,this};function ri(u,p){Fn(u),p=wr(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function ii(u,p){return Fn(u),p=wr(u,p),u.g.has(p)}i.forEach=function(u,p){Fn(this),this.g.forEach(function(v,b){v.forEach(function(z){u.call(p,z,b,this)},this)},this)},i.na=function(){Fn(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let b=0;b<p.length;b++){const z=u[b];for(let K=0;K<z.length;K++)v.push(p[b])}return v},i.V=function(u){Fn(this);let p=[];if(typeof u=="string")ii(this,u)&&(p=p.concat(this.g.get(wr(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)p=p.concat(u[v])}return p},i.set=function(u,p){return Fn(this),this.i=null,u=wr(this,u),ii(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},i.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Zo(u,p,v){ri(u,p),0<v.length&&(u.i=null,u.g.set(wr(u,p),Q(v)),u.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var b=p[v];const K=encodeURIComponent(String(b)),ce=this.V(b);for(b=0;b<ce.length;b++){var z=K;ce[b]!==""&&(z+="="+encodeURIComponent(String(ce[b]))),u.push(z)}}return this.i=u.join("&")};function wr(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Fc(u,p){p&&!u.j&&(Fn(u),u.i=null,u.g.forEach(function(v,b){var z=b.toLowerCase();b!=z&&(ri(this,b),Zo(this,z,v))},u)),u.j=p}function zs(u,p){const v=new Bn;if(m.Image){const b=new Image;b.onload=O(Gn,v,"TestLoadImage: loaded",!0,p,b),b.onerror=O(Gn,v,"TestLoadImage: error",!1,p,b),b.onabort=O(Gn,v,"TestLoadImage: abort",!1,p,b),b.ontimeout=O(Gn,v,"TestLoadImage: timeout",!1,p,b),m.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else p(!1)}function ar(u,p){const v=new Bn,b=new AbortController,z=setTimeout(()=>{b.abort(),Gn(v,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:b.signal}).then(K=>{clearTimeout(z),K.ok?Gn(v,"TestPingServer: ok",!0,p):Gn(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(z),Gn(v,"TestPingServer: error",!1,p)})}function Gn(u,p,v,b,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),b(v)}catch{}}function qs(){this.g=new $r}function br(u,p,v){const b=v||"";try{Xo(u,function(z,K){let ce=z;_(z)&&(ce=In(z)),p.push(b+K+"="+encodeURIComponent(ce))})}catch(z){throw p.push(b+"type="+encodeURIComponent("_badmap")),z}}function Li(u){this.l=u.Ub||null,this.j=u.eb||!1}j(Li,Wr),Li.prototype.g=function(){return new si(this.l,this.j)},Li.prototype.i=(function(u){return function(){return u}})({});function si(u,p){ht.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(si,ht),i=si.prototype,i.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Sr(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Sr(this)),this.g&&(this.readyState=3,Sr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Ar(this):Sr(this),this.readyState==3&&Jo(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,Ar(this))},i.Qa=function(u){this.g&&(this.response=u,Ar(this))},i.ga=function(){this.g&&Ar(this)};function Ar(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Sr(u)}i.setRequestHeader=function(u,p){this.u.append(u,p)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=p.next();return u.join(`\r
`)};function Sr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(si.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function el(u){let p="";return Y(u,function(v,b){p+=b,p+=":",p+=v,p+=`\r
`}),p}function Ht(u,p,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=el(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):rt(u,p,v))}function We(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(We,ht);var Ca=/^https?$/i,Bs=["POST","PUT"];i=We.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,p,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vr.g(),this.v=this.o?Ns(this.o):Ns(vr),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(K){Gc(this,K);return}if(u=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var z in b)v.set(z,b[z]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const K of b.keys())v.set(K,b.get(K));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),z=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Bs,p,void 0))||b||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ce]of v)this.g.setRequestHeader(K,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hs(this),this.u=!0,this.g.send(u),this.u=!1}catch(K){Gc(this,K)}};function Gc(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Na(u),xr(u)}function Na(u){u.A||(u.A=!0,Ye(u,"complete"),Ye(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ye(this,"complete"),Ye(this,"abort"),xr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xr(this,!0)),We.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Da(this):this.bb())},i.bb=function(){Da(this)};function Da(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Qn(u)!=4||u.Z()!=2)){if(u.u&&Qn(u)==4)Bt(u.Ea,0,u);else if(Ye(u,"readystatechange"),Qn(u)==4){u.h=!1;try{const ce=u.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var b;if(b=ce===0){var z=String(u.D).match(ks)[1]||null;!z&&m.self&&m.self.location&&(z=m.self.location.protocol.slice(0,-1)),b=!Ca.test(z?z.toLowerCase():"")}v=b}if(v)Ye(u,"complete"),Ye(u,"success");else{u.m=6;try{var K=2<Qn(u)?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.Z()+"]",Na(u)}}finally{xr(u)}}}}function xr(u,p){if(u.g){Hs(u);const v=u.g,b=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Ye(u,"ready");try{v.onreadystatechange=b}catch{}}}function Hs(u){u.I&&(m.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function Qn(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Xr(p)}};function Qc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function vd(u){const p={};u=(u.g&&2<=Qn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(re(u[b]))continue;var v=M(u[b]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=p[z]||[];p[z]=K,K.push(v)}C(p,function(b){return b.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fs(u,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||p}function Oa(u){this.Aa=0,this.i=[],this.j=new Bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fs("baseRetryDelayMs",5e3,u),this.cb=Fs("retryDelaySeedMs",1e4,u),this.Wa=Fs("forwardChannelMaxRetries",2,u),this.wa=Fs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ei(u&&u.concurrentRequestLimit),this.Da=new qs,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Oa.prototype,i.la=8,i.G=1,i.connect=function(u,p,v,b){ft(0),this.W=u,this.H=p||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.I=Jc(this,null,this.W),Ma(this)};function tl(u){if(Kc(u),u.G==3){var p=u.U++,v=Cn(u.I);if(rt(v,"SID",u.K),rt(v,"RID",p),rt(v,"TYPE","terminate"),Gs(u,v),p=new mn(u,u.j,p),p.L=2,p.v=Ls(Cn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=p.v,v=!0),v||(p.g=eu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ms(p)}Zc(u)}function Pa(u){u.g&&(Qs(u),u.g.cancel(),u.g=null)}function Kc(u){Pa(u),u.u&&(m.clearTimeout(u.u),u.u=null),Va(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function Ma(u){if(!Aa(u.h)&&!u.s){u.s=!0;var p=u.Ga;ne||D(),se||(ne(),se=!0),ye.add(p,u),u.B=0}}function Ed(u,p){return Sa(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=It(S(u.Ga,u,p),il(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const z=new mn(this,this.j,u);let K=this.o;if(this.S&&(K?(K=x(K),P(K,this.S)):K=this.S),this.m!==null||this.O||(z.H=K,K=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(p+=b,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=Yc(this,z,p),v=Cn(this.I),rt(v,"RID",u),rt(v,"CVER",22),this.D&&rt(v,"X-HTTP-Session-Id",this.D),Gs(this,v),K&&(this.O?p="headers="+encodeURIComponent(String(el(K)))+"&"+p:this.m&&Ht(v,this.m,K)),xa(this.h,z),this.Ua&&rt(v,"TYPE","init"),this.P?(rt(v,"$req",p),rt(v,"SID","null"),z.T=!0,sr(z,v,null)):sr(z,v,p),this.G=2}}else this.G==3&&(u?nl(this,u):this.i.length==0||Aa(this.h)||nl(this))};function nl(u,p){var v;p?v=p.l:v=u.U++;const b=Cn(u.I);rt(b,"SID",u.K),rt(b,"RID",v),rt(b,"AID",u.T),Gs(u,b),u.m&&u.o&&Ht(b,u.m,u.o),v=new mn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Yc(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),xa(u.h,v),sr(v,b,p)}function Gs(u,p){u.H&&Y(u.H,function(v,b){rt(p,b,v)}),u.l&&Xo({},function(v,b){rt(p,b,v)})}function Yc(u,p,v){v=Math.min(u.i.length,v);var b=u.l?S(u.l.Na,u.l,u):null;e:{var z=u.i;let K=-1;for(;;){const ce=["count="+v];K==-1?0<v?(K=z[0].g,ce.push("ofs="+K)):K=0:ce.push("ofs="+K);let Be=!0;for(let jt=0;jt<v;jt++){let He=z[jt].g;const Ft=z[jt].map;if(He-=K,0>He)K=Math.max(0,z[jt].g-100),Be=!1;else try{br(Ft,ce,"req"+He+"_")}catch{b&&b(Ft)}}if(Be){b=ce.join("&");break e}}}return u=u.i.splice(0,v),p.D=u,b}function Xc(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ne||D(),se||(ne(),se=!0),ye.add(p,u),u.v=0}}function rl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=It(S(u.Fa,u),il(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,$c(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=It(S(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),Pa(this),$c(this))};function Qs(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function $c(u){u.g=new mn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Cn(u.qa);rt(p,"RID","rpc"),rt(p,"SID",u.K),rt(p,"AID",u.T),rt(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&rt(p,"TO",u.ja),rt(p,"TYPE","xmlhttp"),Gs(u,p),u.m&&u.o&&Ht(p,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Ls(Cn(p)),v.m=null,v.P=!0,Jr(v,u)}i.Za=function(){this.C!=null&&(this.C=null,Pa(this),rl(this),ft(19))};function Va(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function Wc(u,p){var v=null;if(u.g==p){Va(u),Qs(u),u.g=null;var b=2}else if(Ko(u.h,p))v=p.D,gn(u.h,p),b=1;else return;if(u.G!=0){if(p.o)if(b==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var z=u.B;b=fe(),Ye(b,new kt(b,v)),Ma(u)}else Xc(u);else if(z=p.s,z==3||z==0&&0<p.X||!(b==1&&Ed(u,p)||b==2&&rl(u)))switch(v&&0<v.length&&(p=u.h,p.i=p.i.concat(v)),z){case 1:ai(u,5);break;case 4:ai(u,10);break;case 3:ai(u,6);break;default:ai(u,2)}}}function il(u,p){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*p}function ai(u,p){if(u.j.info("Error code "+p),p==2){var v=S(u.fb,u),b=u.Xa;const z=!b;b=new Ct(b||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||js(b,"https"),Ls(b),z?zs(b.toString(),v):ar(b.toString(),v)}else ft(2);u.G=0,u.l&&u.l.sa(p),Zc(u),Kc(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Zc(u){if(u.G=0,u.ka=[],u.l){const p=Yo(u.h);(p.length!=0||u.i.length!=0)&&(H(u.ka,p),H(u.ka,u.i),u.h.i.length=0,Q(u.i),u.i.length=0),u.l.ra()}}function Jc(u,p,v){var b=v instanceof Ct?Cn(v):new Ct(v);if(b.g!="")p&&(b.g=p+"."+b.g),ji(b,b.s);else{var z=m.location;b=z.protocol,p=p?p+"."+z.hostname:z.hostname,z=+z.port;var K=new Ct(null);b&&js(K,b),p&&(K.g=p),z&&ji(K,z),v&&(K.l=v),b=K}return v=u.D,p=u.ya,v&&p&&rt(b,v,p),rt(b,"VER",u.la),Gs(u,b),b}function eu(u,p,v){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new We(new Li({eb:v})):new We(u.pa),p.Ha(u.J),p}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function tu(){}i=tu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ka(){}ka.prototype.g=function(u,p){return new pn(u,p)};function pn(u,p){ht.call(this),this.g=new Oa(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!re(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!re(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Rr(this)}j(pn,ht),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){tl(this.g)},pn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=In(u),u=v);p.i.push(new Bc(p.Ya++,u)),p.G==3&&Ma(p)},pn.prototype.N=function(){this.g.l=null,delete this.j,tl(this.g),delete this.g,pn.aa.N.call(this)};function nu(u){ir.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const v in p){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}j(nu,ir);function ru(){Os.call(this),this.status=1}j(ru,Os);function Rr(u){this.g=u}j(Rr,tu),Rr.prototype.ua=function(){Ye(this.g,"a")},Rr.prototype.ta=function(u){Ye(this.g,new nu(u))},Rr.prototype.sa=function(u){Ye(this.g,new ru)},Rr.prototype.ra=function(){Ye(this.g,"b")},ka.prototype.createWebChannel=ka.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,DT=function(){return new ka},NT=function(){return fe()},CT=qn,Bm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vi.NO_ERROR=0,Vi.TIMEOUT=8,Vi.HTTP_ERROR=6,yh=Vi,Zr.COMPLETE="complete",IT=Zr,Ds.EventType=rr,rr.OPEN="a",rr.CLOSE="b",rr.ERROR="c",rr.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Wl=Ds,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,RT=We}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});const v0="@firebase/firestore",E0="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ko="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new lg("@firebase/firestore");function ho(){return ma.logLevel}function me(i,...e){if(ma.logLevel<=Ue.DEBUG){const n=e.map(Tg);ma.debug(`Firestore (${ko}): ${i}`,...n)}}function Ri(i,...e){if(ma.logLevel<=Ue.ERROR){const n=e.map(Tg);ma.error(`Firestore (${ko}): ${i}`,...n)}}function Ro(i,...e){if(ma.logLevel<=Ue.WARN){const n=e.map(Tg);ma.warn(`Firestore (${ko}): ${i}`,...n)}}function Tg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,OT(i,s,n)}function OT(i,e,n){let s=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ri(s),new Error(s)}function Qe(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||OT(e,o,s)}function Ce(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Ci{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(un.UNAUTHENTICATED)))}shutdown(){}}class GI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class QI{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new jr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new jr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Qe(typeof s.accessToken=="string",31837,{l:s}),new PT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class KI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new KI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class T0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const s=c=>{c.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new T0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new T0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=$I(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<n&&(s+=e.charAt(o[c]%62))}return s}}function ze(i,e){return i<e?-1:i>e?1:0}function Hm(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),c=e.charAt(s);if(o!==c)return Rm(o)===Rm(c)?ze(o,c):Rm(o)?1:-1}return ze(i.length,e.length)}const WI=55296,ZI=57343;function Rm(i){const e=i.charCodeAt(0);return e>=WI&&e<=ZI}function Io(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="__name__";class Mr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Te(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const c=Mr.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return ze(e.length,n.length)}static compareSegments(e,n){const s=Mr.isNumericId(e),o=Mr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Mr.extractNumericId(e).compare(Mr.extractNumericId(n)):Hm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gs.fromString(e.substring(4,e.length-2))}}class ot extends Mr{construct(e,n,s){return new ot(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new he($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new ot(n)}static emptyPath(){return new ot([])}}const JI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Mr{construct(e,n,s){return new nn(e,n,s)}static isValidIdentifier(e){return JI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===w0}static keyField(){return new nn([w0])}static fromServerFormat(e){const n=[];let s="",o=0;const c=()=>{if(s.length===0)throw new he($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(c(),o++)}if(c(),d)throw new he($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(n)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ot.fromString(e))}static fromName(e){return new Ee(ot.fromString(e).popFirst(5))}static empty(){return new Ee(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(i,e,n){if(!n)throw new he($.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function eC(i,e,n,s){if(e===!0&&s===!0)throw new he($.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function b0(i){if(!Ee.isDocumentKey(i))throw new he($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function A0(i){if(Ee.isDocumentKey(i))throw new he($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function VT(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function $h(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Te(12329,{type:typeof i})}function dr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new he($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$h(i);throw new he($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(i,e){const n={typeString:i};return e&&(n.value=e),n}function Ic(i,e){if(!VT(i))throw new he($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new he($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=-62135596800,x0=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*x0);return new Ze(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<S0)throw new he($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/x0}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ic(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-S0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:Mt("string",Ze._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Ze(0,0))}static max(){return new Se(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=-1;function tC(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new Ze(n+1,0):new Ze(n,s));return new _s(o,Ee.empty(),e)}function nC(i){return new _s(i.readTime,i.key,dc)}class _s{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new _s(Se.min(),Ee.empty(),dc)}static max(){return new _s(Se.max(),Ee.empty(),dc)}}function rC(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(i.documentKey,e.documentKey),n!==0?n:ze(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(i){if(i.code!==$.FAILED_PRECONDITION||i.message!==iC)throw i;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ee.reject(n)}static resolve(e){return new ee(((n,s)=>{n(e)}))}static reject(e){return new ee(((n,s)=>{s(e)}))}static waitFor(e){return new ee(((n,s)=>{let o=0,c=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++c,d&&c===o&&n()}),(g=>s(g)))})),d=!0,c===o&&n()}))}static or(e){let n=ee.resolve(!1);for(const s of e)n=n.next((o=>o?ee.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,c)=>{s.push(n.call(this,o,c))})),this.waitFor(s)}static mapArray(e,n){return new ee(((s,o)=>{const c=e.length,d=new Array(c);let m=0;for(let g=0;g<c;g++){const _=g;n(e[_]).next((T=>{d[_]=T,++m,m===c&&s(d)}),(T=>o(T)))}}))}static doWhile(e,n){return new ee(((s,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):s()};c()}))}}function aC(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=-1;function Cc(i){return i==null}function Oh(i){return i===0&&1/i==-1/0}function oC(i){return typeof i=="number"&&Number.isInteger(i)&&!Oh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="";function lC(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=R0(e)),e=cC(i.get(n),e);return R0(e)}function cC(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case kT:n+="";break;default:n+=c}}return n}function R0(i){return i+kT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ss(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function jT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??tn.RED,this.left=o??tn.EMPTY,this.right=c??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,c){return new tn(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return tn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,s,o,c){return this}insert(e,n,s){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new C0(this.data.getIterator())}getIteratorFrom(e){return new C0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class C0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new qt(nn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Io(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new LT("Invalid base64 string: "+c):c}})(e);return new rn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new rn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const uC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(i){if(Qe(!!i,39018),typeof i=="string"){let e=0;const n=uC.exec(i);if(Qe(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:xt(i.seconds),nanos:xt(i.nanos)}}function xt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Es(i){return typeof i=="string"?rn.fromBase64String(i):rn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="server_timestamp",zT="__type__",qT="__previous_value__",BT="__local_write_time__";function Ag(i){var n,s;return((s=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[zT])==null?void 0:s.stringValue)===UT}function Zh(i){const e=i.mapValue.fields[qT];return Ag(e)?Zh(e):e}function fc(i){const e=vs(i.mapValue.fields[BT].timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n,s,o,c,d,m,g,_,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=T}}const Ph="(default)";class mc{constructor(e,n){this.projectId=e,this.database=n||Ph}static empty(){return new mc("","")}get isDefaultDatabase(){return this.database===Ph}isEqual(e){return e instanceof mc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="__type__",dC="__max__",lh={mapValue:{}},FT="__vector__",Mh="value";function Ts(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ag(i)?4:mC(i)?9007199254740991:fC(i)?10:11:Te(28295,{value:i})}function qr(i,e){if(i===e)return!0;const n=Ts(i);if(n!==Ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return fc(i).isEqual(fc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=vs(o.timestampValue),m=vs(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return Es(o.bytesValue).isEqual(Es(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return xt(o.geoPointValue.latitude)===xt(c.geoPointValue.latitude)&&xt(o.geoPointValue.longitude)===xt(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return xt(o.integerValue)===xt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=xt(o.doubleValue),m=xt(c.doubleValue);return d===m?Oh(d)===Oh(m):isNaN(d)&&isNaN(m)}return!1})(i,e);case 9:return Io(i.arrayValue.values||[],e.arrayValue.values||[],qr);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},m=c.mapValue.fields||{};if(I0(d)!==I0(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!qr(d[g],m[g])))return!1;return!0})(i,e);default:return Te(52216,{left:i})}}function gc(i,e){return(i.values||[]).find((n=>qr(n,e)))!==void 0}function Co(i,e){if(i===e)return 0;const n=Ts(i),s=Ts(e);if(n!==s)return ze(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(i.booleanValue,e.booleanValue);case 2:return(function(c,d){const m=xt(c.integerValue||c.doubleValue),g=xt(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return N0(i.timestampValue,e.timestampValue);case 4:return N0(fc(i),fc(e));case 5:return Hm(i.stringValue,e.stringValue);case 6:return(function(c,d){const m=Es(c),g=Es(d);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(c,d){const m=c.split("/"),g=d.split("/");for(let _=0;_<m.length&&_<g.length;_++){const T=ze(m[_],g[_]);if(T!==0)return T}return ze(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,d){const m=ze(xt(c.latitude),xt(d.latitude));return m!==0?m:ze(xt(c.longitude),xt(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return D0(i.arrayValue,e.arrayValue);case 10:return(function(c,d){var S,O,j,Q;const m=c.fields||{},g=d.fields||{},_=(S=m[Mh])==null?void 0:S.arrayValue,T=(O=g[Mh])==null?void 0:O.arrayValue,A=ze(((j=_==null?void 0:_.values)==null?void 0:j.length)||0,((Q=T==null?void 0:T.values)==null?void 0:Q.length)||0);return A!==0?A:D0(_,T)})(i.mapValue,e.mapValue);case 11:return(function(c,d){if(c===lh.mapValue&&d===lh.mapValue)return 0;if(c===lh.mapValue)return 1;if(d===lh.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),_=d.fields||{},T=Object.keys(_);g.sort(),T.sort();for(let A=0;A<g.length&&A<T.length;++A){const S=Hm(g[A],T[A]);if(S!==0)return S;const O=Co(m[g[A]],_[T[A]]);if(O!==0)return O}return ze(g.length,T.length)})(i.mapValue,e.mapValue);default:throw Te(23264,{he:n})}}function N0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ze(i,e);const n=vs(i),s=vs(e),o=ze(n.seconds,s.seconds);return o!==0?o:ze(n.nanos,s.nanos)}function D0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const c=Co(n[o],s[o]);if(c)return c}return ze(n.length,s.length)}function No(i){return Fm(i)}function Fm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=vs(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Es(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Ee.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const c of n.values||[])o?o=!1:s+=",",s+=Fm(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of s)c?c=!1:o+=",",o+=`${d}:${Fm(n.fields[d])}`;return o+"}"})(i.mapValue):Te(61005,{value:i})}function _h(i){switch(Ts(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zh(i);return e?16+_h(e):16;case 5:return 2*i.stringValue.length;case 6:return Es(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+_h(c)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Ss(s.fields,((c,d)=>{o+=c.length+_h(d)})),o})(i.mapValue);default:throw Te(13486,{value:i})}}function O0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Gm(i){return!!i&&"integerValue"in i}function Sg(i){return!!i&&"arrayValue"in i}function P0(i){return!!i&&"nullValue"in i}function M0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function vh(i){return!!i&&"mapValue"in i}function fC(i){var n,s;return((s=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[HT])==null?void 0:s.stringValue)===FT}function sc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Ss(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=sc(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sc(i.arrayValue.values[n]);return e}return{...i}}function mC(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===dC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!vh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(n)}setAll(e){let n=nn.emptyPath(),s={},o=[];e.forEach(((d,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}d?s[m.lastSegment()]=sc(d):o.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,o)}delete(e){const n=this.field(e.popLast());vh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];vh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Ss(n,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new _n(sc(this.value))}}function GT(i){const e=[];return Ss(i.fields,((n,s)=>{const o=new nn([n]);if(vh(s)){const c=GT(s.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,s,o,c,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Xt(e,0,Se.min(),Se.min(),Se.min(),_n.empty(),0)}static newFoundDocument(e,n,s,o){return new Xt(e,1,n,Se.min(),s,o,0)}static newNoDocument(e,n){return new Xt(e,2,n,Se.min(),Se.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,Se.min(),Se.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n){this.position=e,this.inclusive=n}}function V0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const c=e[o],d=i.position[o];if(c.field.isKeyField()?s=Ee.comparator(Ee.fromName(d.referenceValue),n.key):s=Co(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function k0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!qr(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n="asc"){this.field=e,this.dir=n}}function gC(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{}class Pt extends QT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new yC(e,n,s):n==="array-contains"?new EC(e,s):n==="in"?new TC(e,s):n==="not-in"?new wC(e,s):n==="array-contains-any"?new bC(e,s):new Pt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new _C(e,s):new vC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Co(n,this.value)):n!==null&&Ts(this.value)===Ts(n)&&this.matchesComparison(Co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends QT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new fr(e,n)}matches(e){return KT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function KT(i){return i.op==="and"}function YT(i){return pC(i)&&KT(i)}function pC(i){for(const e of i.filters)if(e instanceof fr)return!1;return!0}function Qm(i){if(i instanceof Pt)return i.field.canonicalString()+i.op.toString()+No(i.value);if(YT(i))return i.filters.map((e=>Qm(e))).join(",");{const e=i.filters.map((n=>Qm(n))).join(",");return`${i.op}(${e})`}}function XT(i,e){return i instanceof Pt?(function(s,o){return o instanceof Pt&&s.op===o.op&&s.field.isEqual(o.field)&&qr(s.value,o.value)})(i,e):i instanceof fr?(function(s,o){return o instanceof fr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,d,m)=>c&&XT(d,o.filters[m])),!0):!1})(i,e):void Te(19439)}function $T(i){return i instanceof Pt?(function(n){return`${n.field.canonicalString()} ${n.op} ${No(n.value)}`})(i):i instanceof fr?(function(n){return n.op.toString()+" {"+n.getFilters().map($T).join(" ,")+"}"})(i):"Filter"}class yC extends Pt{constructor(e,n,s){super(e,n,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class _C extends Pt{constructor(e,n){super(e,"in",n),this.keys=WT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class vC extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=WT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function WT(i,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((s=>Ee.fromName(s.referenceValue)))}class EC extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sg(n)&&gc(n.arrayValue,this.value)}}class TC extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gc(this.value.arrayValue,n)}}class wC extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!gc(this.value.arrayValue,n)}}class bC extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>gc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n=null,s=[],o=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=d,this.endAt=m,this.Te=null}}function j0(i,e=null,n=[],s=[],o=null,c=null,d=null){return new AC(i,e,n,s,o,c,d)}function xg(i){const e=Ce(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Qm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Cc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>No(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>No(s))).join(",")),e.Te=n}return e.Te}function Rg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!gC(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!XT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!k0(i.startAt,e.startAt)&&k0(i.endAt,e.endAt)}function Km(i){return Ee.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n=null,s=[],o=[],c=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function SC(i,e,n,s,o,c,d,m){return new Uo(i,e,n,s,o,c,d,m)}function Ig(i){return new Uo(i)}function L0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function ZT(i){return i.collectionGroup!==null}function ac(i){const e=Ce(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new qt(nn.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new pc(c,s))})),n.has(nn.keyField().canonicalString())||e.Ie.push(new pc(nn.keyField(),s))}return e.Ie}function Lr(i){const e=Ce(i);return e.Ee||(e.Ee=xC(e,ac(i))),e.Ee}function xC(i,e){if(i.limitType==="F")return j0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new pc(o.field,c)}));const n=i.endAt?new Vh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Vh(i.startAt.position,i.startAt.inclusive):null;return j0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Ym(i,e){const n=i.filters.concat([e]);return new Uo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function kh(i,e,n){return new Uo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Jh(i,e){return Rg(Lr(i),Lr(e))&&i.limitType===e.limitType}function JT(i){return`${xg(Lr(i))}|lt:${i.limitType}`}function fo(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>$T(o))).join(", ")}]`),Cc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>No(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>No(o))).join(",")),`Target(${s})`})(Lr(i))}; limitType=${i.limitType})`}function ed(i,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ee.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,o){for(const c of ac(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(d,m,g){const _=V0(d,m,g);return d.inclusive?_<=0:_<0})(s.startAt,ac(s),o)||s.endAt&&!(function(d,m,g){const _=V0(d,m,g);return d.inclusive?_>=0:_>0})(s.endAt,ac(s),o))})(i,e)}function RC(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ew(i){return(e,n)=>{let s=!1;for(const o of ac(i)){const c=IC(o,e,n);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function IC(i,e,n){const s=i.field.isKeyField()?Ee.comparator(e.key,n.key):(function(c,d,m){const g=d.data.field(c),_=m.data.field(c);return g!==null&&_!==null?Co(g,_):Te(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ss(this.inner,((n,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return jT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=new yt(Ee.comparator);function Ii(){return CC}const tw=new yt(Ee.comparator);function Zl(...i){let e=tw;for(const n of i)e=e.insert(n.key,n);return e}function nw(i){let e=tw;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function ua(){return oc()}function rw(){return oc()}function oc(){return new pa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const NC=new yt(Ee.comparator),DC=new qt(Ee.comparator);function qe(...i){let e=DC;for(const n of i)e=e.add(n);return e}const OC=new qt(ze);function PC(){return OC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oh(e)?"-0":e}}function iw(i){return{integerValue:""+i}}function sw(i,e){return oC(e)?iw(e):Cg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this._=void 0}}function MC(i,e,n){return i instanceof jh?(function(o,c){const d={fields:{[zT]:{stringValue:UT},[BT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Ag(c)&&(c=Zh(c)),c&&(d.fields[qT]=c),{mapValue:d}})(n,e):i instanceof yc?ow(i,e):i instanceof _c?lw(i,e):(function(o,c){const d=aw(o,c),m=U0(d)+U0(o.Ae);return Gm(d)&&Gm(o.Ae)?iw(m):Cg(o.serializer,m)})(i,e)}function VC(i,e,n){return i instanceof yc?ow(i,e):i instanceof _c?lw(i,e):n}function aw(i,e){return i instanceof vc?(function(s){return Gm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class jh extends td{}class yc extends td{constructor(e){super(),this.elements=e}}function ow(i,e){const n=cw(e);for(const s of i.elements)n.some((o=>qr(o,s)))||n.push(s);return{arrayValue:{values:n}}}class _c extends td{constructor(e){super(),this.elements=e}}function lw(i,e){let n=cw(e);for(const s of i.elements)n=n.filter((o=>!qr(o,s)));return{arrayValue:{values:n}}}class vc extends td{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function U0(i){return xt(i.integerValue||i.doubleValue)}function cw(i){return Sg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,n){this.field=e,this.transform=n}}function jC(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof yc&&o instanceof yc||s instanceof _c&&o instanceof _c?Io(s.elements,o.elements,qr):s instanceof vc&&o instanceof vc?qr(s.Ae,o.Ae):s instanceof jh&&o instanceof jh})(i.transform,e.transform)}class LC{constructor(e,n){this.version=e,this.transformResults=n}}class hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class nd{}function uw(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Ng(i.key,hn.none()):new Nc(i.key,i.data,hn.none());{const n=i.data,s=_n.empty();let o=new qt(nn.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),o=o.add(c)}return new xs(i.key,s,new Ln(o.toArray()),hn.none())}}function UC(i,e,n){i instanceof Nc?(function(o,c,d){const m=o.value.clone(),g=q0(o.fieldTransforms,c,d.transformResults);m.setAll(g),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(i,e,n):i instanceof xs?(function(o,c,d){if(!Eh(o.precondition,c))return void c.convertToUnknownDocument(d.version);const m=q0(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(hw(o)),g.setAll(m),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(i,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function lc(i,e,n,s){return i instanceof Nc?(function(c,d,m,g){if(!Eh(c.precondition,d))return m;const _=c.value.clone(),T=B0(c.fieldTransforms,g,d);return _.setAll(T),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(i,e,n,s):i instanceof xs?(function(c,d,m,g){if(!Eh(c.precondition,d))return m;const _=B0(c.fieldTransforms,g,d),T=d.data;return T.setAll(hw(c)),T.setAll(_),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((A=>A.field)))})(i,e,n,s):(function(c,d,m){return Eh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(i,e,n)}function zC(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),c=aw(s.transform,o||null);c!=null&&(n===null&&(n=_n.empty()),n.set(s.field,c))}return n||null}function z0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Io(s,o,((c,d)=>jC(c,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Nc extends nd{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class xs extends nd{constructor(e,n,s,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function hw(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function q0(i,e,n){const s=new Map;Qe(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const c=i[o],d=c.transform,m=e.data.field(c.field);s.set(c.field,VC(d,m,n[o]))}return s}function B0(i,e,n){const s=new Map;for(const o of i){const c=o.transform,d=n.data.field(o.field);s.set(o.field,MC(c,d,e))}return s}class Ng extends nd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dw extends nd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&UC(c,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=lc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=lc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=rw();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(o.key)?null:m;const g=uw(d,m);g!==null&&s.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),qe())}isEqual(e){return this.batchId===e.batchId&&Io(this.mutations,e.mutations,((n,s)=>z0(n,s)))&&Io(this.baseMutations,e.baseMutations,((n,s)=>z0(n,s)))}}class Dg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Qe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return NC})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,s[d].version);return new Dg(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,Ge;function fw(i){switch(i){case $.OK:return Te(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return Te(15467,{code:i})}}function mw(i){if(i===void 0)return Ri("GRPC error has no .code"),$.UNKNOWN;switch(i){case Ot.OK:return $.OK;case Ot.CANCELLED:return $.CANCELLED;case Ot.UNKNOWN:return $.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return $.INTERNAL;case Ot.UNAVAILABLE:return $.UNAVAILABLE;case Ot.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ot.NOT_FOUND:return $.NOT_FOUND;case Ot.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ot.ABORTED:return $.ABORTED;case Ot.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ot.DATA_LOSS:return $.DATA_LOSS;default:return Te(39323,{code:i})}}(Ge=Ot||(Ot={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=new gs([4294967295,4294967295],0);function H0(i){const e=FC().encode(i),n=new xT;return n.update(e),new Uint8Array(n.digest())}function F0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new gs([n,s],0),new gs([o,c],0)]}class Og{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Jl(`Invalid padding: ${n}`);if(s<0)throw new Jl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Jl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Jl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=gs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(gs.fromNumber(s)));return o.compare(GC)===1&&(o=new gs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=H0(e),[s,o]=F0(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Og(c,o,n);return s.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const n=H0(e),[s,o]=F0(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n,s,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Dc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new rd(Se.min(),o,new yt(ze),Ii(),qe())}}class Dc{constructor(e,n,s,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Dc(s,n,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class gw{constructor(e,n){this.targetId=e,this.Ce=n}}class pw{constructor(e,n,s=rn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class G0{constructor(){this.ve=0,this.Fe=Q0(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),n=qe(),s=qe();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Te(38017,{changeType:c})}})),new Dc(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Q0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ii(),this.Je=ch(),this.He=ch(),this.Ye=new yt(ze)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(Km(c))if(s===0){const d=new Ee(c.path);this.et(n,d,Xt.newNoDocument(d,Se.min()))}else Qe(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const m=this.ut(e),g=m?this.ct(m,e,d):1;if(g!==0){this.it(n);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=n;let d,m;try{d=Es(s).toUint8Array()}catch(g){if(g instanceof LT)return Ro("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Og(d,o,c)}catch(g){return Ro(g instanceof Jl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((c=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const m=this.ot(d);if(m){if(c.current&&Km(m.target)){const g=new Ee(m.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Xt.newNoDocument(g,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=qe();this.He.forEach(((c,d)=>{let m=!0;d.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new rd(e,n,this.Ye,this.je,s);return this.je=Ii(),this.Je=ch(),this.He=ch(),this.Ye=new yt(ze),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new G0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qt(ze),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qt(ze),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new G0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ch(){return new yt(Ee.comparator)}function Q0(){return new yt(Ee.comparator)}const KC={asc:"ASCENDING",desc:"DESCENDING"},YC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XC={and:"AND",or:"OR"};class $C{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xm(i,e){return i.useProto3Json||Cc(e)?e:{value:e}}function Lh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yw(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function WC(i,e){return Lh(i,e.toTimestamp())}function Un(i){return Qe(!!i,49232),Se.fromTimestamp((function(n){const s=vs(n);return new Ze(s.seconds,s.nanos)})(i))}function Pg(i,e){return $m(i,e).canonicalString()}function $m(i,e){const n=(function(o){return new ot(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function _w(i){const e=ot.fromString(i);return Qe(Aw(e),10190,{key:e.toString()}),e}function Uh(i,e){return Pg(i.databaseId,e.path)}function cc(i,e){const n=_w(e);if(n.get(1)!==i.databaseId.projectId)throw new he($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new he($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ee(Ew(n))}function vw(i,e){return Pg(i.databaseId,e)}function ZC(i){const e=_w(i);return e.length===4?ot.emptyPath():Ew(e)}function Wm(i){return new ot(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ew(i){return Qe(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function K0(i,e,n){return{name:Uh(i,e),fields:n.value.mapValue.fields}}function JC(i,e){return"found"in e?(function(s,o){Qe(!!o.found,43571),o.found.name,o.found.updateTime;const c=cc(s,o.found.name),d=Un(o.found.updateTime),m=o.found.createTime?Un(o.found.createTime):Se.min(),g=new _n({mapValue:{fields:o.found.fields}});return Xt.newFoundDocument(c,d,m,g)})(i,e):"missing"in e?(function(s,o){Qe(!!o.missing,3894),Qe(!!o.readTime,22933);const c=cc(s,o.missing),d=Un(o.readTime);return Xt.newNoDocument(c,d)})(i,e):Te(7234,{result:e})}function eN(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Te(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(_,T){return _.useProto3Json?(Qe(T===void 0||typeof T=="string",58123),rn.fromBase64String(T||"")):(Qe(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),rn.fromUint8Array(T||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(_){const T=_.code===void 0?$.UNKNOWN:mw(_.code);return new he(T,_.message||"")})(d);n=new pw(s,o,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=cc(i,s.document.name),c=Un(s.document.updateTime),d=s.document.createTime?Un(s.document.createTime):Se.min(),m=new _n({mapValue:{fields:s.document.fields}}),g=Xt.newFoundDocument(o,c,d,m),_=s.targetIds||[],T=s.removedTargetIds||[];n=new Th(_,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=cc(i,s.document),c=s.readTime?Un(s.readTime):Se.min(),d=Xt.newNoDocument(o,c),m=s.removedTargetIds||[];n=new Th([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=cc(i,s.document),c=s.removedTargetIds||[];n=new Th([],c,o,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,d=new HC(o,c),m=s.targetId;n=new gw(m,d)}}return n}function Tw(i,e){let n;if(e instanceof Nc)n={update:K0(i,e.key,e.value)};else if(e instanceof Ng)n={delete:Uh(i,e.key)};else if(e instanceof xs)n={update:K0(i,e.key,e.data),updateMask:cN(e.fieldMask)};else{if(!(e instanceof dw))return Te(16599,{Vt:e.type});n={verify:Uh(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const m=d.transform;if(m instanceof jh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof yc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof _c)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof vc)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw Te(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:WC(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Te(27497)})(i,e.precondition)),n}function tN(i,e){return i&&i.length>0?(Qe(e!==void 0,14353),i.map((n=>(function(o,c){let d=o.updateTime?Un(o.updateTime):Un(c);return d.isEqual(Se.min())&&(d=Un(c)),new LC(d,o.transformResults||[])})(n,e)))):[]}function nN(i,e){return{documents:[vw(i,e.path)]}}function rN(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=vw(i,o);const c=(function(_){if(_.length!==0)return bw(fr.create(_,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(_){if(_.length!==0)return _.map((T=>(function(S){return{field:mo(S.field),direction:aN(S.dir)}})(T)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=Xm(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:o}}function iN(i){let e=ZC(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Qe(s===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(A){const S=ww(A);return S instanceof fr&&YT(S)?S.getFilters():[S]})(n.where));let d=[];n.orderBy&&(d=(function(A){return A.map((S=>(function(j){return new pc(go(j.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(S)))})(n.orderBy));let m=null;n.limit&&(m=(function(A){let S;return S=typeof A=="object"?A.value:A,Cc(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(A){const S=!!A.before,O=A.values||[];return new Vh(O,S)})(n.startAt));let _=null;return n.endAt&&(_=(function(A){const S=!A.before,O=A.values||[];return new Vh(O,S)})(n.endAt)),SC(e,o,d,c,m,"F",g,_)}function sN(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ww(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=go(n.unaryFilter.field);return Pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=go(n.unaryFilter.field);return Pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=go(n.unaryFilter.field);return Pt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=go(n.unaryFilter.field);return Pt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Pt.create(go(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return fr.create(n.compositeFilter.filters.map((s=>ww(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(n.compositeFilter.op))})(i):Te(30097,{filter:i})}function aN(i){return KC[i]}function oN(i){return YC[i]}function lN(i){return XC[i]}function mo(i){return{fieldPath:i.canonicalString()}}function go(i){return nn.fromServerFormat(i.fieldPath)}function bw(i){return i instanceof Pt?(function(n){if(n.op==="=="){if(M0(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NAN"}};if(P0(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(M0(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NOT_NAN"}};if(P0(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(n.field),op:oN(n.op),value:n.value}}})(i):i instanceof fr?(function(n){const s=n.getFilters().map((o=>bw(o)));return s.length===1?s[0]:{compositeFilter:{op:lN(n.op),filters:s}}})(i):Te(54877,{filter:i})}function cN(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Aw(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,s,o,c=Se.min(),d=Se.min(),m=rn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.yt=e}}function hN(i){const e=iN({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?kh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this.Cn=new fN}addToCollectionParentIndex(e,n){return this.Cn.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(_s.min())}updateCollectionGroup(e,n,s){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class fN{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new qt(ot.comparator),c=!o.has(s);return this.index[n]=o.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new qt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sw=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(Sw,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Do(0)}static cr(){return new Do(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="LruGarbageCollector",mN=1048576;function $0([i,e],[n,s]){const o=ze(i,n);return o===0?ze(e,s):o}class gN{constructor(e){this.Ir=e,this.buffer=new qt($0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();$0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class pN{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(X0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Lo(n)?me(X0,"Ignoring IndexedDB error during garbage collection: ",n):await jo(n)}await this.Vr(3e5)}))}}class yN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ee.resolve(Wh.ce);const s=new gN(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(Y0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,c,d,m,g,_;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,d=Date.now(),this.nthSequenceNumber(e,o)))).next((A=>(s=A,m=Date.now(),this.removeTargets(e,s,n)))).next((A=>(c=A,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((A=>(_=Date.now(),ho()<=Ue.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${A} documents in `+(_-g)+`ms
Total Duration: ${_-T}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:A}))))}}function _N(i,e){return new yN(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.changes=new pa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ee.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&lc(s.mutation,o,Ln.empty(),Ze.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,qe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=qe()){const o=ua();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((c=>{let d=Zl();return c.forEach(((m,g)=>{d=d.insert(m,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=ua();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,qe())))}populateOverlays(e,n,s){const o=[];return s.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,m)=>{n.set(d,m)}))}))}computeViews(e,n,s,o){let c=Ii();const d=oc(),m=(function(){return oc()})();return n.forEach(((g,_)=>{const T=s.get(_.key);o.has(_.key)&&(T===void 0||T.mutation instanceof xs)?c=c.insert(_.key,_):T!==void 0?(d.set(_.key,T.mutation.getFieldMask()),lc(T.mutation,_,T.mutation.getFieldMask(),Ze.now())):d.set(_.key,Ln.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((_,T)=>d.set(_,T))),n.forEach(((_,T)=>m.set(_,new EN(T,d.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=oc();let o=new yt(((d,m)=>d-m)),c=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const m of d)m.keys().forEach((g=>{const _=n.get(g);if(_===null)return;let T=s.get(g)||Ln.empty();T=m.applyToLocalView(_,T),s.set(g,T);const A=(o.get(m.batchId)||qe()).add(g);o=o.insert(m.batchId,A)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,T=g.value,A=rw();T.forEach((S=>{if(!c.has(S)){const O=uw(n.get(S),s.get(S));O!==null&&A.set(S,O),c=c.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,_,A))}return ee.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return Ee.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-c.size):ee.resolve(ua());let m=dc,g=c;return d.next((_=>ee.forEach(_,((T,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),c.get(T)?ee.resolve():this.remoteDocumentCache.getEntry(e,T).next((S=>{g=g.insert(T,S)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,g,_,qe()))).next((T=>({batchId:m,changes:nw(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((s=>{let o=Zl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const c=n.collectionGroup;let d=Zl();return this.indexManager.getCollectionParents(e,c).next((m=>ee.forEach(m,(g=>{const _=(function(A,S){return new Uo(S,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,s,o).next((T=>{T.forEach(((A,S)=>{d=d.insert(A,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,o)))).next((d=>{c.forEach(((g,_)=>{const T=_.getKey();d.get(T)===null&&(d=d.insert(T,Xt.newInvalidDocument(T)))}));let m=Zl();return d.forEach(((g,_)=>{const T=c.get(g);T!==void 0&&lc(T.mutation,_,Ln.empty(),Ze.now()),ed(n,_)&&(m=m.insert(g,_))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ee.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Un(o.createTime)}})(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:hN(o.bundledQuery),readTime:Un(o.readTime)}})(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.overlays=new yt(Ee.comparator),this.qr=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ua();return ee.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,c)=>{this.St(e,n,c)})),ee.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),ee.resolve()}getOverlaysForCollection(e,n,s){const o=ua(),c=n.length+1,d=new Ee(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===c&&g.largestBatchId>s&&o.set(g.getKey(),g)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let c=new yt(((_,T)=>_-T));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>s){let T=c.get(_.largestBatchId);T===null&&(T=ua(),c=c.insert(_.largestBatchId,T)),T.set(_.getKey(),_)}}const m=ua(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,T)=>m.set(_,T))),!(m.size()>=o)););return ee.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new BC(n,s));let c=this.qr.get(n);c===void 0&&(c=qe(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(){this.Qr=new qt(Yt.$r),this.Ur=new qt(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Yt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Yt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Ee(new ot([])),s=new Yt(n,e),o=new Yt(n,e+1),c=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ee(new ot([])),s=new Yt(n,e),o=new Yt(n,e+1);let c=qe();return this.Ur.forEachInRange([s,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Yt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Yt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ee.comparator(e.key,n.key)||ze(e.Yr,n.Yr)}static Kr(e,n){return ze(e.Yr,n.Yr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qt(Yt.$r)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new qC(c,n,s,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new Yt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(d)}lookupMutationBatch(e,n){return ee.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),c=o<0?0:o;return ee.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?bg:this.tr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Yt(n,0),o=new Yt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(d=>{const m=this.Xr(d.Yr);c.push(m)})),ee.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new qt(ze);return n.forEach((o=>{const c=new Yt(o,0),d=new Yt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(m=>{s=s.add(m.Yr)}))})),ee.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let c=s;Ee.isDocumentKey(c)||(c=c.child(""));const d=new Yt(new Ee(c),0);let m=new qt(ze);return this.Zr.forEachWhile((g=>{const _=g.key.path;return!!s.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Yr)),!0)}),d),ee.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ee.forEach(n.mutations,(o=>{const c=new Yt(o.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Yt(n,0),o=this.Zr.firstAfterOrEqual(s);return ee.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.ri=e,this.docs=(function(){return new yt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),c=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ee.resolve(s?s.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let s=Ii();return n.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():Xt.newInvalidDocument(o))})),ee.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let c=Ii();const d=n.path,m=new Ee(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:T}}=g.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||rC(nC(T),s)<=0||(o.has(T.key)||ed(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return ee.resolve(c)}getAllFromCollectionGroup(e,n,s,o){Te(9500)}ii(e,n){return ee.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new RN(this)}getSize(e){return ee.resolve(this.size)}}class RN extends vN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ee.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.persistence=e,this.si=new pa((n=>xg(n)),Rg),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new Mg,this.targetCount=0,this.ai=Do.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ee.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Do(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Pr(n),ee.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,s){let o=0;const c=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ee.waitFor(c).next((()=>o))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ee.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ee.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),ee.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ee.resolve(s)}containsKey(e,n){return ee.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Wh(0),this.li=!1,this.li=!0,this.hi=new AN,this.referenceDelegate=e(this),this.Pi=new IN(this),this.indexManager=new dN,this.remoteDocumentCache=(function(o){return new xN(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new uN(n),this.Ii=new wN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new SN(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){me("MemoryPersistence","Starting transaction:",e);const o=new CN(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return ee.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class CN extends sC{constructor(e){super(),this.currentSequenceNumber=e}}class Vg{constructor(e){this.persistence=e,this.Ri=new Mg,this.Vi=null}static mi(e){return new Vg(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ee.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.fi,(s=>{const o=Ee.fromPath(s);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ee.or([()=>ee.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class zh{constructor(e,n){this.persistence=e,this.pi=new pa((s=>lC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=_N(this,n)}static mi(e,n){return new zh(e,n)}Ei(){}di(e){return ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ee.forEach(this.pi,((s,o)=>this.br(e,s,o).next((c=>c?ee.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((m=>{m||(s++,c.removeEntry(d,Se.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ee.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_h(e.data.value)),n}br(e,n,s){return ee.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ee.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=qe(),o=qe();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new kg(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return sx()?8:aC(dn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,o,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new NN;return this.Ss(e,n,d).next((m=>{if(c.result=m,this.Vs)return this.bs(e,n,d,m.size)}))})).next((()=>c.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(ho()<=Ue.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",fo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ee.resolve()):(ho()<=Ue.DEBUG&&me("QueryEngine","Query:",fo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ho()<=Ue.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",fo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lr(n))):ee.resolve())}ys(e,n){if(L0(n))return ee.resolve(null);let s=Lr(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=kh(n,null,"F"),s=Lr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=qe(...c);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const _=this.Ds(n,m);return this.Cs(n,_,d,g.readTime)?this.ys(e,kh(n,null,"F")):this.vs(e,_,n,g)}))))})))))}ws(e,n,s,o){return L0(n)||o.isEqual(Se.min())?ee.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,o)?ee.resolve(null):(ho()<=Ue.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),fo(n)),this.vs(e,d,n,tC(o,dc)).next((m=>m)))}))}Ds(e,n){let s=new qt(ew(e));return n.forEach(((o,c)=>{ed(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,s){return ho()<=Ue.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",fo(n)),this.ps.getDocumentsMatchingQuery(e,n,_s.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="LocalStore",ON=3e8;class PN{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new yt(ze),this.xs=new pa((c=>xg(c)),Rg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function MN(i,e,n,s){return new PN(i,e,n,s)}async function Rw(i,e){const n=Ce(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],m=[];let g=qe();for(const _ of o){d.push(_.batchId);for(const T of _.mutations)g=g.add(T.key)}for(const _ of c){m.push(_.batchId);for(const T of _.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(s,g).next((_=>({Ls:_,removedBatchIds:d,addedBatchIds:m})))}))}))}function VN(i,e){const n=Ce(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,_,T){const A=_.batch,S=A.keys();let O=ee.resolve();return S.forEach((j=>{O=O.next((()=>T.getEntry(g,j))).next((Q=>{const H=_.docVersions.get(j);Qe(H!==null,48541),Q.version.compareTo(H)<0&&(A.applyToRemoteDocument(Q,_),Q.isValidDocument()&&(Q.setReadTime(_.commitVersion),T.addEntry(Q)))}))})),O.next((()=>m.mutationQueue.removeMutationBatch(g,A)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=qe();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function Iw(i){const e=Ce(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function kN(i,e){const n=Ce(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((T,A)=>{const S=o.get(A);if(!S)return;m.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,A).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,A))));let O=S.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(A)!==null?O=O.withResumeToken(rn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):T.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(T.resumeToken,s)),o=o.insert(A,O),(function(Q,H,ae){return Q.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=ON?!0:ae.addedDocuments.size+ae.modifiedDocuments.size+ae.removedDocuments.size>0})(S,O,T)&&m.push(n.Pi.updateTargetData(c,O))}));let g=Ii(),_=qe();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),m.push(jN(c,d,e.documentUpdates).next((T=>{g=T.ks,_=T.qs}))),!s.isEqual(Se.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((A=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(T)}return ee.waitFor(m).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,_))).next((()=>g))})).then((c=>(n.Ms=o,c)))}function jN(i,e,n){let s=qe(),o=qe();return n.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let d=Ii();return n.forEach(((m,g)=>{const _=c.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Se.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):me(jg,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)})),{ks:d,qs:o}}))}function LN(i,e){const n=Ce(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=bg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function UN(i,e){const n=Ce(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((c=>c?(o=c,ee.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new us(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Zm(i,e,n){const s=Ce(i),o=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Lo(d))throw d;me(jg,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function W0(i,e,n){const s=Ce(i);let o=Se.min(),c=qe();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,_,T){const A=Ce(g),S=A.xs.get(T);return S!==void 0?ee.resolve(A.Ms.get(S)):A.Pi.getTargetData(_,T)})(s,d,Lr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,m.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:Se.min(),n?c:qe()))).next((m=>(zN(s,RC(e),m),{documents:m,Qs:c})))))}function zN(i,e,n){let s=i.Os.get(e)||Se.min();n.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.Os.set(e,s)}class Z0{constructor(){this.activeTargetIds=PC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qN{constructor(){this.Mo=new Z0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Z0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="ConnectivityMonitor";class eE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(J0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(J0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh=null;function Jm(){return uh===null?uh=(function(){return 268435456+Math.round(2147483648*Math.random())})():uh++,"0x"+uh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="RestConnection",HN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Ph?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,c){const d=Jm(),m=this.zo(e,n.toUriEncodedString());me(Im,`Sending RPC '${e}' ${d}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:_}=new URL(m),T=Po(_);return this.Jo(e,m,g,s,T).then((A=>(me(Im,`Received RPC '${e}' ${d}: `,A),A)),(A=>{throw Ro(Im,`RPC '${e}' ${d} failed with error: `,A,"url: ",m,"request:",s),A}))}Ho(e,n,s,o,c,d){return this.Go(e,n,s,o,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ko})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const s=HN[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class QN extends FN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,c){const d=Jm();return new Promise(((m,g)=>{const _=new RT;_.setWithCredentials(!0),_.listenOnce(IT.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case yh.NO_ERROR:const A=_.getResponseJson();me(ln,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(A)),m(A);break;case yh.TIMEOUT:me(ln,`RPC '${e}' ${d} timed out`),g(new he($.DEADLINE_EXCEEDED,"Request time out"));break;case yh.HTTP_ERROR:const S=_.getStatus();if(me(ln,`RPC '${e}' ${d} failed with status:`,S,"response text:",_.getResponseText()),S>0){let O=_.getResponseJson();Array.isArray(O)&&(O=O[0]);const j=O==null?void 0:O.error;if(j&&j.status&&j.message){const Q=(function(ae){const re=ae.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(re)>=0?re:$.UNKNOWN})(j.status);g(new he(Q,j.message))}else g(new he($.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new he($.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{me(ln,`RPC '${e}' ${d} completed.`)}}));const T=JSON.stringify(o);me(ln,`RPC '${e}' ${d} sending request:`,o),_.send(n,"POST",T,s,15)}))}T_(e,n,s){const o=Jm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=DT(),m=NT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const T=c.join("");me(ln,`Creating RPC '${e}' stream ${o}: ${T}`,g);const A=d.createWebChannel(T,g);this.I_(A);let S=!1,O=!1;const j=new GN({Yo:H=>{O?me(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(S||(me(ln,`Opening RPC '${e}' stream ${o} transport.`),A.open(),S=!0),me(ln,`RPC '${e}' stream ${o} sending:`,H),A.send(H))},Zo:()=>A.close()}),Q=(H,ae,re)=>{H.listen(ae,(ie=>{try{re(ie)}catch(ge){setTimeout((()=>{throw ge}),0)}}))};return Q(A,Wl.EventType.OPEN,(()=>{O||(me(ln,`RPC '${e}' stream ${o} transport opened.`),j.o_())})),Q(A,Wl.EventType.CLOSE,(()=>{O||(O=!0,me(ln,`RPC '${e}' stream ${o} transport closed`),j.a_(),this.E_(A))})),Q(A,Wl.EventType.ERROR,(H=>{O||(O=!0,Ro(ln,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),j.a_(new he($.UNAVAILABLE,"The operation could not be completed")))})),Q(A,Wl.EventType.MESSAGE,(H=>{var ae;if(!O){const re=H.data[0];Qe(!!re,16349);const ie=re,ge=(ie==null?void 0:ie.error)||((ae=ie[0])==null?void 0:ae.error);if(ge){me(ln,`RPC '${e}' stream ${o} received error:`,ge);const ue=ge.status;let Y=(function(I){const P=Ot[I];if(P!==void 0)return mw(P)})(ue),C=ge.message;Y===void 0&&(Y=$.INTERNAL,C="Unknown error status: "+ue+" with message "+ge.message),O=!0,j.a_(new he(Y,C)),A.close()}else me(ln,`RPC '${e}' stream ${o} received:`,re),j.u_(re)}})),Q(m,CT.STAT_EVENT,(H=>{H.stat===Bm.PROXY?me(ln,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===Bm.NOPROXY&&me(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Cm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(i){return new $C(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,n,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="PersistentStream";class Cw{constructor(e,n,s,o,c,d,m,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Lg(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Ri(n.toString()),Ri("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new he($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(tE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(me(tE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KN extends Cw{constructor(e,n,s,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=eN(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Se.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Se.min():d.readTime?Un(d.readTime):Se.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Wm(this.serializer),n.addTarget=(function(c,d){let m;const g=d.target;if(m=Km(g)?{documents:nN(c,g)}:{query:rN(c,g).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=yw(c,d.resumeToken);const _=Xm(c,d.expectedCount);_!==null&&(m.expectedCount=_)}else if(d.snapshotVersion.compareTo(Se.min())>0){m.readTime=Lh(c,d.snapshotVersion.toTimestamp());const _=Xm(c,d.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const s=sN(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Wm(this.serializer),n.removeTarget=e,this.q_(n)}}class YN extends Cw{constructor(e,n,s,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=tN(e.writeResults,e.commitTime),s=Un(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Wm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>Tw(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{}class $N extends XN{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,$m(n,s),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he($.UNKNOWN,c.toString())}))}Ho(e,n,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,$m(n,s),o,d,m,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new he($.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class WN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ri(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="RemoteStore";class ZN{constructor(e,n,s,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{ya(this)&&(me(ga,"Restarting streams for network reachability change."),await(async function(g){const _=Ce(g);_.Ea.add(4),await Oc(_),_.Ra.set("Unknown"),_.Ea.delete(4),await sd(_)})(this))}))})),this.Ra=new WN(s,o)}}async function sd(i){if(ya(i))for(const e of i.da)await e(!0)}async function Oc(i){for(const e of i.da)await e(!1)}function Nw(i,e){const n=Ce(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Bg(n)?qg(n):zo(n).O_()&&zg(n,e))}function Ug(i,e){const n=Ce(i),s=zo(n);n.Ia.delete(e),s.O_()&&Dw(n,e),n.Ia.size===0&&(s.O_()?s.L_():ya(n)&&n.Ra.set("Unknown"))}function zg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zo(i).Y_(e)}function Dw(i,e){i.Va.Ue(e),zo(i).Z_(e)}function qg(i){i.Va=new QC({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),zo(i).start(),i.Ra.ua()}function Bg(i){return ya(i)&&!zo(i).x_()&&i.Ia.size>0}function ya(i){return Ce(i).Ea.size===0}function Ow(i){i.Va=void 0}async function JN(i){i.Ra.set("Online")}async function e2(i){i.Ia.forEach(((e,n)=>{zg(i,e)}))}async function t2(i,e){Ow(i),Bg(i)?(i.Ra.ha(e),qg(i)):i.Ra.set("Unknown")}async function n2(i,e,n){if(i.Ra.set("Online"),e instanceof pw&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(s){me(ga,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await qh(i,s)}else if(e instanceof Th?i.Va.Ze(e):e instanceof gw?i.Va.st(e):i.Va.tt(e),!n.isEqual(Se.min()))try{const s=await Iw(i.localStore);n.compareTo(s)>=0&&await(function(c,d){const m=c.Va.Tt(d);return m.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const T=c.Ia.get(_);T&&c.Ia.set(_,T.withResumeToken(g.resumeToken,d))}})),m.targetMismatches.forEach(((g,_)=>{const T=c.Ia.get(g);if(!T)return;c.Ia.set(g,T.withResumeToken(rn.EMPTY_BYTE_STRING,T.snapshotVersion)),Dw(c,g);const A=new us(T.target,g,_,T.sequenceNumber);zg(c,A)})),c.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){me(ga,"Failed to raise snapshot:",s),await qh(i,s)}}async function qh(i,e,n){if(!Lo(e))throw e;i.Ea.add(1),await Oc(i),i.Ra.set("Offline"),n||(n=()=>Iw(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{me(ga,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await sd(i)}))}function Pw(i,e){return e().catch((n=>qh(i,n,e)))}async function ad(i){const e=Ce(i),n=ws(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bg;for(;r2(e);)try{const o=await LN(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,i2(e,o)}catch(o){await qh(e,o)}Mw(e)&&Vw(e)}function r2(i){return ya(i)&&i.Ta.length<10}function i2(i,e){i.Ta.push(e);const n=ws(i);n.O_()&&n.X_&&n.ea(e.mutations)}function Mw(i){return ya(i)&&!ws(i).x_()&&i.Ta.length>0}function Vw(i){ws(i).start()}async function s2(i){ws(i).ra()}async function a2(i){const e=ws(i);for(const n of i.Ta)e.ea(n.mutations)}async function o2(i,e,n){const s=i.Ta.shift(),o=Dg.from(s,e,n);await Pw(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await ad(i)}async function l2(i,e){e&&ws(i).X_&&await(async function(s,o){if((function(d){return fw(d)&&d!==$.ABORTED})(o.code)){const c=s.Ta.shift();ws(s).B_(),await Pw(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await ad(s)}})(i,e),Mw(i)&&Vw(i)}async function nE(i,e){const n=Ce(i);n.asyncQueue.verifyOperationInProgress(),me(ga,"RemoteStore received new credentials");const s=ya(n);n.Ea.add(3),await Oc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await sd(n)}async function c2(i,e){const n=Ce(i);e?(n.Ea.delete(2),await sd(n)):e||(n.Ea.add(2),await Oc(n),n.Ra.set("Unknown"))}function zo(i){return i.ma||(i.ma=(function(n,s,o){const c=Ce(n);return c.sa(),new KN(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:JN.bind(null,i),t_:e2.bind(null,i),r_:t2.bind(null,i),H_:n2.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Bg(i)?qg(i):i.Ra.set("Unknown")):(await i.ma.stop(),Ow(i))}))),i.ma}function ws(i){return i.fa||(i.fa=(function(n,s,o){const c=Ce(n);return c.sa(),new YN(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:s2.bind(null,i),r_:l2.bind(null,i),ta:a2.bind(null,i),na:o2.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await ad(i)):(await i.fa.stop(),i.Ta.length>0&&(me(ga,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,n,s,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,c){const d=Date.now()+s,m=new Hg(e,n,d,o,c);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fg(i,e){if(Ri("AsyncQueue",`${e}: ${i}`),Lo(i))return new he($.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{static emptySet(e){return new wo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ee.comparator(n.key,s.key):(n,s)=>Ee.comparator(n.key,s.key),this.keyedMap=Zl(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new wo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(){this.ga=new yt(Ee.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Oo{constructor(e,n,s,o,c,d,m,g,_){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,n,s,o,c){const d=[];return n.forEach((m=>{d.push({type:0,doc:m})})),new Oo(e,n,wo.emptySet(n),d,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class h2{constructor(){this.queries=iE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Ce(n),c=o.queries;o.queries=iE(),c.forEach(((d,m)=>{for(const g of m.Sa)g.onError(s)}))})(this,new he($.ABORTED,"Firestore shutting down"))}}function iE(){return new pa((i=>JT(i)),Jh)}async function kw(i,e){const n=Ce(i);let s=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new u2,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=Fg(d,`Initialization of query '${fo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Gg(n)}async function jw(i,e){const n=Ce(i),s=e.query;let o=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function d2(i,e){const n=Ce(i);let s=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const m of d.Sa)m.Fa(o)&&(s=!0);d.wa=o}}s&&Gg(n)}function f2(i,e,n){const s=Ce(i),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);s.queries.delete(e)}function Gg(i){i.Ca.forEach((e=>{e.next()}))}var eg,sE;(sE=eg||(eg={})).Ma="default",sE.Cache="cache";class Lw{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Oo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==eg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this.key=e}}class zw{constructor(e){this.key=e}}class m2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=ew(e),this.tu=new wo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new rE,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,A)=>{const S=o.get(T),O=ed(this.query,A)?A:null,j=!!S&&this.mutatedKeys.has(S.key),Q=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let H=!1;S&&O?S.data.isEqual(O.data)?j!==Q&&(s.track({type:3,doc:O}),H=!0):this.su(S,O)||(s.track({type:2,doc:O}),H=!0,(g&&this.eu(O,g)>0||_&&this.eu(O,_)<0)&&(m=!0)):!S&&O?(s.track({type:0,doc:O}),H=!0):S&&!O&&(s.track({type:1,doc:S}),H=!0,(g||_)&&(m=!0)),H&&(O?(d=d.add(O),c=Q?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{tu:d,iu:s,Cs:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((T,A)=>(function(O,j){const Q=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:H})}};return Q(O)-Q(j)})(T.type,A.type)||this.eu(T.doc,A.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,_=g!==this.Za;return this.Za=g,d.length!==0||_?{snapshot:new Oo(this.query,e.tu,c,d,e.mutatedKeys,g===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new zw(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new Uw(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=qe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Oo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qg="SyncEngine";class g2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class p2{constructor(e){this.key=e,this.hu=!1}}class y2{constructor(e,n,s,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new pa((m=>JT(m)),Jh),this.Iu=new Map,this.Eu=new Set,this.du=new yt(Ee.comparator),this.Au=new Map,this.Ru=new Mg,this.Vu={},this.mu=new Map,this.fu=Do.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _2(i,e,n=!0){const s=Qw(i);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await qw(s,e,n,!0),o}async function v2(i,e){const n=Qw(i);await qw(n,e,!0,!1)}async function qw(i,e,n,s){const o=await UN(i.localStore,Lr(e)),c=o.targetId,d=i.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await E2(i,e,c,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&Nw(i.remoteStore,o),m}async function E2(i,e,n,s,o){i.pu=(A,S,O)=>(async function(Q,H,ae,re){let ie=H.view.ru(ae);ie.Cs&&(ie=await W0(Q.localStore,H.query,!1).then((({documents:C})=>H.view.ru(C,ie))));const ge=re&&re.targetChanges.get(H.targetId),ue=re&&re.targetMismatches.get(H.targetId)!=null,Y=H.view.applyChanges(ie,Q.isPrimaryClient,ge,ue);return oE(Q,H.targetId,Y.au),Y.snapshot})(i,A,S,O);const c=await W0(i.localStore,e,!0),d=new m2(e,c.Qs),m=d.ru(c.documents),g=Dc.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),_=d.applyChanges(m,i.isPrimaryClient,g);oE(i,n,_.au);const T=new g2(e,n,d);return i.Tu.set(e,T),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),_.snapshot}async function T2(i,e,n){const s=Ce(i),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((d=>!Jh(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Zm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Ug(s.remoteStore,o.targetId),tg(s,o.targetId)})).catch(jo)):(tg(s,o.targetId),await Zm(s.localStore,o.targetId,!0))}async function w2(i,e){const n=Ce(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Ug(n.remoteStore,s.targetId))}async function b2(i,e,n){const s=N2(i);try{const o=await(function(d,m){const g=Ce(d),_=Ze.now(),T=m.reduce(((O,j)=>O.add(j.key)),qe());let A,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let j=Ii(),Q=qe();return g.Ns.getEntries(O,T).next((H=>{j=H,j.forEach(((ae,re)=>{re.isValidDocument()||(Q=Q.add(ae))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,j))).next((H=>{A=H;const ae=[];for(const re of m){const ie=zC(re,A.get(re.key).overlayedDocument);ie!=null&&ae.push(new xs(re.key,ie,GT(ie.value.mapValue),hn.exists(!0)))}return g.mutationQueue.addMutationBatch(O,_,ae,m)})).next((H=>{S=H;const ae=H.applyToLocalDocumentSet(A,Q);return g.documentOverlayCache.saveOverlays(O,H.batchId,ae)}))})).then((()=>({batchId:S.batchId,changes:nw(A)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,m,g){let _=d.Vu[d.currentUser.toKey()];_||(_=new yt(ze)),_=_.insert(m,g),d.Vu[d.currentUser.toKey()]=_})(s,o.batchId,n),await Pc(s,o.changes),await ad(s.remoteStore)}catch(o){const c=Fg(o,"Failed to persist write");n.reject(c)}}async function Bw(i,e){const n=Ce(i);try{const s=await kN(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Au.get(c);d&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Qe(d.hu,14607):o.removedDocuments.size>0&&(Qe(d.hu,42227),d.hu=!1))})),await Pc(n,s,e)}catch(s){await jo(s)}}function aE(i,e,n){const s=Ce(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((c,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const g=Ce(d);g.onlineState=m;let _=!1;g.queries.forEach(((T,A)=>{for(const S of A.Sa)S.va(m)&&(_=!0)})),_&&Gg(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function A2(i,e,n){const s=Ce(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),c=o&&o.key;if(c){let d=new yt(Ee.comparator);d=d.insert(c,Xt.newNoDocument(c,Se.min()));const m=qe().add(c),g=new rd(Se.min(),new Map,new yt(ze),d,m);await Bw(s,g),s.du=s.du.remove(c),s.Au.delete(e),Kg(s)}else await Zm(s.localStore,e,!1).then((()=>tg(s,e,n))).catch(jo)}async function S2(i,e){const n=Ce(i),s=e.batch.batchId;try{const o=await VN(n.localStore,e);Fw(n,s,null),Hw(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Pc(n,o)}catch(o){await jo(o)}}async function x2(i,e,n){const s=Ce(i);try{const o=await(function(d,m){const g=Ce(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let T;return g.mutationQueue.lookupMutationBatch(_,m).next((A=>(Qe(A!==null,37113),T=A.keys(),g.mutationQueue.removeMutationBatch(_,A)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,T,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,T))).next((()=>g.localDocuments.getDocuments(_,T)))}))})(s.localStore,e);Fw(s,e,n),Hw(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Pc(s,o)}catch(o){await jo(o)}}function Hw(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function Fw(i,e,n){const s=Ce(i);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function tg(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||Gw(i,s)}))}function Gw(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Ug(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Kg(i))}function oE(i,e,n){for(const s of n)s instanceof Uw?(i.Ru.addReference(s.key,e),R2(i,s)):s instanceof zw?(me(Qg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||Gw(i,s.key)):Te(19791,{wu:s})}function R2(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(me(Qg,"New document in limbo: "+n),i.Eu.add(s),Kg(i))}function Kg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Ee(ot.fromString(e)),s=i.fu.next();i.Au.set(s,new p2(n)),i.du=i.du.insert(n,s),Nw(i.remoteStore,new us(Lr(Ig(n.path)),s,"TargetPurposeLimboResolution",Wh.ce))}}async function Pc(i,e,n){const s=Ce(i),o=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{d.push(s.pu(g,e,n).then((_=>{var T;if((_||n)&&s.isPrimaryClient){const A=_?!_.fromCache:(T=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(_){o.push(_);const A=kg.As(g.targetId,_);c.push(A)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(g,_){const T=Ce(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>ee.forEach(_,(S=>ee.forEach(S.Es,(O=>T.persistence.referenceDelegate.addReference(A,S.targetId,O))).next((()=>ee.forEach(S.ds,(O=>T.persistence.referenceDelegate.removeReference(A,S.targetId,O)))))))))}catch(A){if(!Lo(A))throw A;me(jg,"Failed to update sequence numbers: "+A)}for(const A of _){const S=A.targetId;if(!A.fromCache){const O=T.Ms.get(S),j=O.snapshotVersion,Q=O.withLastLimboFreeSnapshotVersion(j);T.Ms=T.Ms.insert(S,Q)}}})(s.localStore,c))}async function I2(i,e){const n=Ce(i);if(!n.currentUser.isEqual(e)){me(Qg,"User change. New user:",e.toKey());const s=await Rw(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new he($.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Pc(n,s.Ls)}}function C2(i,e){const n=Ce(i),s=n.Au.get(e);if(s&&s.hu)return qe().add(s.key);{let o=qe();const c=n.Iu.get(e);if(!c)return o;for(const d of c){const m=n.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function Qw(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=C2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A2.bind(null,e),e.Pu.H_=d2.bind(null,e.eventManager),e.Pu.yu=f2.bind(null,e.eventManager),e}function N2(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x2.bind(null,e),e}class Bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=id(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return MN(this.persistence,new DN,e.initialUser,this.serializer)}Cu(e){return new xw(Vg.mi,this.serializer)}Du(e){return new qN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bh.provider={build:()=>new Bh};class D2 extends Bh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Qe(this.persistence.referenceDelegate instanceof zh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new pN(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new xw((s=>zh.mi(s,n)),this.serializer)}}class ng{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>aE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=I2.bind(null,this.syncEngine),await c2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new h2})()}createDatastore(e){const n=id(e.databaseInfo.databaseId),s=(function(c){return new QN(c)})(e.databaseInfo);return(function(c,d,m,g){return new $N(c,d,m,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,c,d,m){return new ZN(s,o,c,d,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>aE(this.syncEngine,n,0)),(function(){return eE.v()?new eE:new BN})())}createSyncEngine(e,n){return(function(o,c,d,m,g,_,T){const A=new y2(o,c,d,m,g,_);return T&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const c=Ce(o);me(ga,"RemoteStore shutting down."),c.Ea.add(5),await Oc(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ng.provider={build:()=>new ng};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ri("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new he($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,c){const d=Ce(o),m={documents:c.map((A=>Uh(d.serializer,A)))},g=await d.Ho("BatchGetDocuments",d.serializer.databaseId,ot.emptyPath(),m,c.length),_=new Map;g.forEach((A=>{const S=JC(d.serializer,A);_.set(S.key.toString(),S)}));const T=[];return c.forEach((A=>{const S=_.get(A.toString());Qe(!!S,55234,{key:A}),T.push(S)})),T})(this.datastore,e);return n.forEach((s=>this.recordVersion(s))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ng(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,s)=>{const o=Ee.fromPath(s);this.mutations.push(new dw(o,this.precondition(o)))})),await(async function(s,o){const c=Ce(s),d={writes:o.map((m=>Tw(c.serializer,m)))};await c.Go("Commit",c.serializer.databaseId,ot.emptyPath(),d)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Te(50498,{Gu:e.constructor.name});n=Se.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new he($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Se.min())?hn.exists(!1):hn.updateTime(n):hn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Se.min()))throw new he($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hn.updateTime(n)}return hn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n,s,o,c){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=o,this.deferred=c,this.zu=s.maxAttempts,this.M_=new Lg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new O2(this.datastore),n=this.Hu(e);n&&n.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Cc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!fw(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="FirestoreClient";class M2{constructor(e,n,s,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=wg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{me(bs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(me(bs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Fg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Nm(i,e){i.asyncQueue.verifyOperationInProgress(),me(bs,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Rw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function lE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await V2(i);me(bs,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>nE(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>nE(e.remoteStore,o))),i._onlineComponents=e}async function V2(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){me(bs,"Using user provided OfflineComponentProvider");try{await Nm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===$.FAILED_PRECONDITION||o.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Ro("Error using user provided cache. Falling back to memory cache: "+n),await Nm(i,new Bh)}}else me(bs,"Using default OfflineComponentProvider"),await Nm(i,new D2(void 0));return i._offlineComponents}async function Yg(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(me(bs,"Using user provided OnlineComponentProvider"),await lE(i,i._uninitializedComponentsProvider._online)):(me(bs,"Using default OnlineComponentProvider"),await lE(i,new ng))),i._onlineComponents}function k2(i){return Yg(i).then((e=>e.syncEngine))}function j2(i){return Yg(i).then((e=>e.datastore))}async function Yw(i){const e=await Yg(i),n=e.eventManager;return n.onListen=_2.bind(null,e.syncEngine),n.onUnlisten=T2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=v2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=w2.bind(null,e.syncEngine),n}function L2(i,e,n={}){const s=new jr;return i.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,g,_){const T=new Kw({next:S=>{T.Nu(),d.enqueueAndForget((()=>jw(c,A)));const O=S.docs.has(m);!O&&S.fromCache?_.reject(new he($.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&g&&g.source==="server"?_.reject(new he($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),A=new Lw(Ig(m.path),T,{includeMetadataChanges:!0,qa:!0});return kw(c,A)})(await Yw(i),i.asyncQueue,e,n,s))),s.promise}function U2(i,e,n={}){const s=new jr;return i.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,g,_){const T=new Kw({next:S=>{T.Nu(),d.enqueueAndForget((()=>jw(c,A))),S.fromCache&&g.source==="server"?_.reject(new he($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),A=new Lw(m,T,{includeMetadataChanges:!0,qa:!0});return kw(c,A)})(await Yw(i),i.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="firestore.googleapis.com",uE=!0;class hE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$w,this.ssl=uE}else this.host=e.host,this.ssl=e.ssl??uE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Sw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mN)throw new he($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class od{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new FI;switch(s.type){case"firstParty":return new YI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=cE.get(n);s&&(me("ComponentProvider","Removing Datastore"),cE.delete(n),s.terminate())})(this),Promise.resolve()}}function z2(i,e,n,s={}){var _;i=dr(i,od);const o=Po(e),c=i._getSettings(),d={...c,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(kE(`https://${m}`),jE("Firestore",!0)),c.host!==$w&&c.host!==m&&Ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:s};if(!ha(g,d)&&(i._setSettings(g),s.mockUserToken)){let T,A;if(typeof s.mockUserToken=="string")T=s.mockUserToken,A=un.MOCK_USER;else{T=$S(s.mockUserToken,(_=i._app)==null?void 0:_.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new he($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new un(S)}i._authCredentials=new GI(new PT(T,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class Et{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}toJSON(){return{type:Et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Ic(n,Et._jsonSchema))return new Et(e,s||null,new Ee(ot.fromString(n.referencePath)))}}Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:Mt("string",Et._jsonSchemaVersion),referencePath:Mt("string")};class ps extends Rs{constructor(e,n,s){super(e,n,Ig(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new Ee(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function ct(i,e,...n){if(i=wt(i),MT("collection","path",e),i instanceof od){const s=ot.fromString(e,...n);return A0(s),new ps(i,null,s)}{if(!(i instanceof Et||i instanceof ps))throw new he($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ot.fromString(e,...n));return A0(s),new ps(i.firestore,null,s)}}function vn(i,e,...n){if(i=wt(i),arguments.length===1&&(e=wg.newId()),MT("doc","path",e),i instanceof od){const s=ot.fromString(e,...n);return b0(s),new Et(i,null,new Ee(s))}{if(!(i instanceof Et||i instanceof ps))throw new he($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ot.fromString(e,...n));return b0(s),new Et(i.firestore,i instanceof ps?i.converter:null,new Ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="AsyncQueue";class fE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Lg(this,"async_queue_retry"),this._c=()=>{const s=Cm();s&&me(dE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Cm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Cm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new jr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Lo(e))throw e;me(dE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ri("INTERNAL UNHANDLED ERROR: ",mE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Hg.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:mE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function mE(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class _a extends od{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new fE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fE(e),this._firestoreClient=void 0,await e}}}function q2(i,e){const n=typeof i=="object"?i:qE(),s=typeof i=="string"?i:Ph,o=ug(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=YS("firestore");c&&z2(o,...c)}return o}function ld(i){if(i._terminated)throw new he($.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||B2(i),i._firestoreClient}function B2(i){var s,o,c;const e=i._freezeSettings(),n=(function(m,g,_,T){return new hC(m,g,_,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,Xw(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(i._databaseId,((s=i._app)==null?void 0:s.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new M2(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(rn.fromBase64String(e))}catch(n){throw new he($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jn(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ic(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:Mt("string",jn._jsonSchemaVersion),bytes:Mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ur._jsonSchemaVersion}}static fromJSON(e){if(Ic(e,Ur._jsonSchema))return new Ur(e.latitude,e.longitude)}}Ur._jsonSchemaVersion="firestore/geoPoint/1.0",Ur._jsonSchema={type:Mt("string",Ur._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ic(e,zr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new zr(e.vectorValues);throw new he($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zr._jsonSchemaVersion="firestore/vectorValue/1.0",zr._jsonSchema={type:Mt("string",zr._jsonSchemaVersion),vectorValues:Mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=/^__.*__$/;class F2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nc(e,this.data,n,this.fieldTransforms)}}class Ww{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new xs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Zw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:i})}}class Xg{constructor(e,n,s,o,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Xg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Zw(this.Ac)&&H2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class G2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||id(e)}Cc(e,n,s,o=!1){return new Xg({Ac:e,methodName:n,Dc:s,path:nn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vc(i){const e=i._freezeSettings(),n=id(i._databaseId);return new G2(i._databaseId,!!e.ignoreUndefinedProperties,n)}function $g(i,e,n,s,o,c={}){const d=i.Cc(c.merge||c.mergeFields?2:0,e,n,o);Zg("Data must be an object, but it was:",d,s);const m=tb(s,d);let g,_;if(c.merge)g=new Ln(d.fieldMask),_=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const A of c.mergeFields){const S=rg(e,A,n);if(!d.contains(S))throw new he($.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);rb(T,S)||T.push(S)}g=new Ln(T),_=d.fieldTransforms.filter((A=>g.covers(A.field)))}else g=null,_=d.fieldTransforms;return new F2(new _n(m),g,_)}class ud extends cd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ud}}class Wg extends cd{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new vc(e.serializer,sw(e.serializer,this.Fc));return new kC(e.path,n)}isEqual(e){return e instanceof Wg&&this.Fc===e.Fc}}function Jw(i,e,n,s){const o=i.Cc(1,e,n);Zg("Data must be an object, but it was:",o,s);const c=[],d=_n.empty();Ss(s,((g,_)=>{const T=Jg(e,g,n);_=wt(_);const A=o.yc(T);if(_ instanceof ud)c.push(T);else{const S=kc(_,A);S!=null&&(c.push(T),d.set(T,S))}}));const m=new Ln(c);return new Ww(d,m,o.fieldTransforms)}function eb(i,e,n,s,o,c){const d=i.Cc(1,e,n),m=[rg(e,s,n)],g=[o];if(c.length%2!=0)throw new he($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<c.length;S+=2)m.push(rg(e,c[S])),g.push(c[S+1]);const _=[],T=_n.empty();for(let S=m.length-1;S>=0;--S)if(!rb(_,m[S])){const O=m[S];let j=g[S];j=wt(j);const Q=d.yc(O);if(j instanceof ud)_.push(O);else{const H=kc(j,Q);H!=null&&(_.push(O),T.set(O,H))}}const A=new Ln(_);return new Ww(T,A,d.fieldTransforms)}function Q2(i,e,n,s=!1){return kc(n,i.Cc(s?4:3,e))}function kc(i,e){if(nb(i=wt(i)))return Zg("Unsupported field value:",e,i),tb(i,e);if(i instanceof cd)return(function(s,o){if(!Zw(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let d=0;for(const m of s){let g=kc(m,o.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(i,e)}return(function(s,o){if((s=wt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return sw(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Ze.fromDate(s);return{timestampValue:Lh(o.serializer,c)}}if(s instanceof Ze){const c=new Ze(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Lh(o.serializer,c)}}if(s instanceof Ur)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof jn)return{bytesValue:yw(o.serializer,s._byteString)};if(s instanceof Et){const c=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Pg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof zr)return(function(d,m){return{mapValue:{fields:{[HT]:{stringValue:FT},[Mh]:{arrayValue:{values:d.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return Cg(m.serializer,_)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${$h(s)}`)})(i,e)}function tb(i,e){const n={};return jT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ss(i,((s,o)=>{const c=kc(o,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function nb(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ze||i instanceof Ur||i instanceof jn||i instanceof Et||i instanceof cd||i instanceof zr)}function Zg(i,e,n){if(!nb(n)||!VT(n)){const s=$h(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function rg(i,e,n){if((e=wt(e))instanceof Mc)return e._internalPath;if(typeof e=="string")return Jg(i,e);throw Hh("Field path arguments must be of type string or ",i,!1,void 0,n)}const K2=new RegExp("[~\\*/\\[\\]]");function Jg(i,e,n){if(e.search(K2)>=0)throw Hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Mc(...e.split("."))._internalPath}catch{throw Hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Hh(i,e,n,s,o){const c=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${o}`),g+=")"),new he($.INVALID_ARGUMENT,m+i+g)}function rb(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n,s,o,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Y2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Y2 extends Fh{data(){return super.data()}}function hd(i,e){return typeof e=="string"?Jg(i,e):e instanceof Mc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new he($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ep{}class tp extends ep{}function Vt(i,e,...n){let s=[];e instanceof ep&&s.push(e),s=s.concat(n),(function(c){const d=c.filter((g=>g instanceof np)).length,m=c.filter((g=>g instanceof dd)).length;if(d>1||d>0&&m>0)throw new he($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class dd extends tp{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new dd(e,n,s)}_apply(e){const n=this._parse(e);return sb(e._query,n),new Rs(e.firestore,e.converter,Ym(e._query,n))}_parse(e){const n=Vc(e.firestore);return(function(c,d,m,g,_,T,A){let S;if(_.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new he($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){pE(A,T);const j=[];for(const Q of A)j.push(gE(g,c,Q));S={arrayValue:{values:j}}}else S=gE(g,c,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||pE(A,T),S=Q2(m,d,A,T==="in"||T==="not-in");return Pt.create(_,T,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Je(i,e,n){const s=e,o=hd("where",i);return dd._create(o,s,n)}class np extends ep{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new np(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:fr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const m=c.getFlattenedFilters();for(const g of m)sb(d,g),d=Ym(d,g)})(e._query,n),new Rs(e.firestore,e.converter,Ym(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rp extends tp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new rp(e,n)}_apply(e){const n=(function(o,c,d){if(o.startAt!==null)throw new he($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pc(c,d)})(e._query,this._field,this._direction);return new Rs(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new Uo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function ib(i,e="asc"){const n=e,s=hd("orderBy",i);return rp._create(s,n)}class ip extends tp{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new ip(e,n,s)}_apply(e){return new Rs(e.firestore,e.converter,kh(e._query,this._limit,this._limitType))}}function $2(i){return ip._create("limit",i,"F")}function gE(i,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new he($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZT(e)&&n.indexOf("/")!==-1)throw new he($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ot.fromString(n));if(!Ee.isDocumentKey(s))throw new he($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return O0(i,new Ee(s))}if(n instanceof Et)return O0(i,n._key);throw new he($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$h(n)}.`)}function pE(i,e){if(!Array.isArray(i)||i.length===0)throw new he($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sb(i,e){const n=(function(o,c){for(const d of o)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new he($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ab{convertValue(e,n="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ss(e,((o,c)=>{s[o]=this.convertValue(c,n)})),s}convertVectorValue(e){var s,o,c;const n=(c=(o=(s=e.fields)==null?void 0:s[Mh].arrayValue)==null?void 0:o.values)==null?void 0:c.map((d=>xt(d.doubleValue)));return new zr(n)}convertGeoPoint(e){return new Ur(xt(e.latitude),xt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Zh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(fc(e));default:return null}}convertTimestamp(e){const n=vs(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ot.fromString(e);Qe(Aw(s),9688,{name:e});const o=new mc(s.get(1),s.get(3)),c=new Ee(s.popFirst(5));return o.isEqual(n)||Ri(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class W2 extends ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}class yo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ys extends Fh{constructor(e,n,s,o,c,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(hd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ys._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",ys._jsonSchema={type:Mt("string",ys._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class wh extends ys{data(e={}){return super.data(e)}}class bo{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new yo(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new wh(this._firestore,this._userDataWriter,s.key,s,new yo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const g=new wh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new yo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new wh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new yo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,T=-1;return m.type!==0&&(_=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),T=d.indexOf(m.doc.key)),{type:Z2(m.type),doc:g,oldIndex:_,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Z2(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(i){i=dr(i,Et);const e=dr(i.firestore,_a);return L2(ld(e),i._key).then((n=>J2(e,i,n)))}bo._jsonSchemaVersion="firestore/querySnapshot/1.0",bo._jsonSchema={type:Mt("string",bo._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class ap extends ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}function Tt(i){i=dr(i,Rs);const e=dr(i.firestore,_a),n=ld(e),s=new ap(e);return X2(i._query),U2(n,i._query).then((o=>new bo(e,s,i,o)))}function Gh(i,e,n){i=dr(i,Et);const s=dr(i.firestore,_a),o=sp(i.converter,e,n);return lp(s,[$g(Vc(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,hn.none())])}function op(i,e,n,...s){i=dr(i,Et);const o=dr(i.firestore,_a),c=Vc(o);let d;return d=typeof(e=wt(e))=="string"||e instanceof Mc?eb(c,"updateDoc",i._key,e,n,s):Jw(c,"updateDoc",i._key,e),lp(o,[d.toMutation(i._key,hn.exists(!0))])}function fd(i,e){const n=dr(i.firestore,_a),s=vn(i),o=sp(i.converter,e);return lp(n,[$g(Vc(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,hn.exists(!1))]).then((()=>s))}function lp(i,e){return(function(s,o){const c=new jr;return s.asyncQueue.enqueueAndForget((async()=>b2(await k2(s),o,c))),c.promise})(ld(i),e)}function J2(i,e,n){const s=n.docs.get(e._key),o=new ap(i);return new ys(i,o,e._key,s,new yo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD={maxAttempts:5};function ec(i,e){if((i=wt(i)).firestore!==e)throw new he($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Vc(e)}get(e){const n=ec(e,this._firestore),s=new W2(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return Te(24041);const c=o[0];if(c.isFoundDocument())return new Fh(this._firestore,s,c.key,c,n.converter);if(c.isNoDocument())return new Fh(this._firestore,s,n._key,null,n.converter);throw Te(18433,{doc:c})}))}set(e,n,s){const o=ec(e,this._firestore),c=sp(o.converter,n,s),d=$g(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,s);return this._transaction.set(o._key,d),this}update(e,n,s,...o){const c=ec(e,this._firestore);let d;return d=typeof(n=wt(n))=="string"||n instanceof Mc?eb(this._dataReader,"Transaction.update",c._key,n,s,o):Jw(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,d),this}delete(e){const n=ec(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD extends tD{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ec(e,this._firestore),s=new ap(this._firestore);return super.get(e).then((o=>new ys(this._firestore,s,n._key,o._document,new yo(!1,!1),n.converter)))}}function rD(i,e,n){i=dr(i,_a);const s={...eD,...n};return(function(c){if(c.maxAttempts<1)throw new he($.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(c,d,m){const g=new jr;return c.asyncQueue.enqueueAndForget((async()=>{const _=await j2(c);new P2(c.asyncQueue,_,m,d,g).ju()})),g.promise})(ld(i),(o=>e(new nD(i,o))),s)}function ob(i){return new Wg("increment",i)}(function(e,n=!0){(function(o){ko=o})(Mo),So(new da("firestore",((s,{instanceIdentifier:o,options:c})=>{const d=s.getProvider("app").getImmediate(),m=new _a(new QI(s.getProvider("auth-internal")),new XI(d,s.getProvider("app-check-internal")),(function(_,T){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new he($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(_.options.projectId,T)})(d,o),d);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),ms(v0,E0,e),ms(v0,E0,"esm2020")})();var iD="firebase",sD="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(iD,sD,"app");const aD={apiKey:"AIzaSyCDZJqOx5eXpu3cD_FBJ8oi-hYvLCpbDXE",authDomain:"verdadreto-bec6a.firebaseapp.com",projectId:"verdadreto-bec6a",storageBucket:"verdadreto-bec6a.firebasestorage.app",messagingSenderId:"938969209658",appId:"1:938969209658:web:534282f57a8ff381c00e03"},lb=zE(aD),Me=q2(lb),mr=BI(lb),cb=new Ti;cb.setCustomParameters({prompt:"select_account"});const yE=["PUTO","PUTA","MIERDA","JODER","COO","CABRON","CABRONA","PENDEJO","PENDEJA","IDIOTA","ESTUPIDO","ESTUPIDA","TONTO","TONTA","IMBECIL","GILIPOLLAS","HIJO","HIJA","MADRE","PADRE","MAMA","PAPA","SEXO","PORNO","XXX","NAZI","HITLER","MUERTE","MATAR","SUICIDIO","DROGA","DROGAS","MARICON","MARICA","GAY","LESBIANA","TRANS","HOMO","HETERO","NEGRO","BLANCO","CHINO","JUDIO","MUSULMAN","CRISTIANO","GORDO","GORDA","FEO","FEA","FLACOS","FLACA","FUCK","SHIT","BITCH","DAMN","HELL","ASS","ASSHOLE","BASTARD","STUPID","IDIOT","MORON","RETARD","DUMB","LOSER","FREAK","SEX","PORN","XXX","NUDE","NAKED","BOOBS","PENIS","VAGINA","NAZI","HITLER","KILL","DIE","DEATH","SUICIDE","DRUG","DRUGS","FAG","FAGGOT","HOMO","LESBIAN","TRANS","QUEER","BLACK","WHITE","ASIAN","JEWISH","MUSLIM","CHRISTIAN","FAT","UGLY","SKINNY","GROSS","DISGUSTING","WTF","OMFG","STFU","GTFO","LMAO","ROFL","ADMIN","MODERATOR","OWNER","STAFF","SUPPORT","VERDAD","RETO","GAME","JUEGO","APP","OFICIAL","666","420","69","88","1488","NULL","UNDEFINED","ERROR","ADMIN","ROOT","SYSTEM","DELETE","DROP","TRUNCATE","ALTER","CREATE"],oD=[/^\d+$/,/^[A-Z]\1{5}$/,/^(.)\1{2,}/,/^[0O1IL]{6}$/,/^(ABC|123|XYZ|QWE|ASD|ZXC)/],ig=i=>{if(!i||typeof i!="string")return!1;const e=i.toUpperCase().trim();if(e.length!==6||yE.includes(e))return!1;for(const d of yE)if(e.includes(d))return!1;for(const d of oD)if(d.test(e))return!1;const n="AEIOU",s="BCDFGHJKLMNPQRSTVWXYZ",o=e.split("").every(d=>n.includes(d)),c=e.split("").every(d=>s.includes(d));return!(o||c)},_E=(i=[])=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n=0;const s=1e3;for(;n<s;){let m="";for(let g=0;g<6;g++)m+=e.charAt(Math.floor(Math.random()*e.length));if(ig(m)&&!i.includes(m))return m;n++}const o=Date.now().toString(36).toUpperCase(),c=Math.random().toString(36).substring(2,4).toUpperCase(),d=(o+c).substring(0,6).padEnd(6,"0");return ig(d)?d:"REF001"},ub=i=>{if(!i||typeof i!="string")return{isValid:!1,error:"El cdigo de referido es requerido"};const e=i.toUpperCase().trim().replace(/[^A-Z0-9]/g,"");return e.length!==6?{isValid:!1,error:"El cdigo de referido debe tener exactamente 6 caracteres"}:ig(e)?{isValid:!0,sanitizedCode:e}:{isValid:!1,error:"El cdigo de referido contiene contenido inapropiado o no vlido"}},lD=async()=>{try{const i=ct(Me,"users"),e=await Tt(i),n=[];return e.forEach(s=>{const o=s.data();o.referralCode&&n.push(o.referralCode)}),n}catch(i){return console.error("Error getting existing referral codes:",i),[]}},cD=async i=>{try{const e=ct(Me,"users"),n=Vt(e,Je("referralCode","==",i));return!(await Tt(n)).empty}catch(e){return console.error("Error checking referral code existence:",e),!1}},uD=async()=>{try{const i=await lD();return _E(i)}catch(i){return console.error("Error generating unique referral code:",i),_E([])}},cp=async(i,e)=>{try{const n=vn(Me,"users",i.uid);if(!(await Di(n)).exists()){const o=await uD();let c={};if(e){const g=ub(e);g.isValid&&g.sanitizedCode?await cD(g.sanitizedCode)?c={usedReferralCode:g.sanitizedCode,referralProcessedAt:new Date}:console.warn("Referral code does not exist:",g.sanitizedCode):console.warn("Invalid referral code provided:",e,g.error)}const d={uid:i.uid,email:i.email,displayName:i.displayName,photoURL:i.photoURL,isAnonymous:i.isAnonymous,emailVerified:i.emailVerified,referralCode:o,referralCount:0,createdAt:new Date,lastLoginAt:new Date,migrationVersion:"1.0",usedReferralCode:null,referredBy:null,referralProcessedAt:null,lastKnownIP:null,deviceId:null,acceptedSuggestions:0,...c};await Gh(n,d);const m=vn(Me,"userReferralCodes",i.uid);await Gh(m,{referralCode:o,displayName:i.displayName||i.email||"Usuario",createdAt:new Date})}}catch(n){console.error("Error creating user profile:",n)}},qo=i=>({uid:i.uid,email:i.email,displayName:i.displayName,photoURL:i.photoURL,isAnonymous:i.isAnonymous,emailVerified:i.emailVerified}),hb=async i=>{try{const e=await W1(mr,cb);return await cp(e.user,i),qo(e.user)}catch(e){throw console.error("Error al iniciar sesin con Google:",e),new Error(e.message||"Error al iniciar sesin con Google")}},db=async(i,e)=>{try{const n=await S1(mr,i,e);return qo(n.user)}catch(n){throw console.error("Error al iniciar sesin:",n),new Error(hp(n.code))}},fb=async(i,e,n,s)=>{try{const o=await A1(mr,i,e);return n&&await R1(o.user,{displayName:n}),await cp(o.user,s),await mT(o.user),qo(o.user)}catch(o){throw console.error("Error al registrarse:",o),new Error(hp(o.code))}},mb=async()=>{try{const i=await v1(mr);return await cp(i.user),qo(i.user)}catch(i){throw console.error("Error al iniciar sesin annima:",i),new Error("Error al iniciar sesin annima")}},gb=async()=>{try{await D1(mr)}catch(i){throw console.error("Error al cerrar sesin:",i),new Error("Error al cerrar sesin")}},pb=async i=>{try{await b1(mr,i)}catch(e){throw console.error("Error al enviar email de restablecimiento:",e),new Error(hp(e.code))}},yb=async()=>{try{if(mr.currentUser)await mT(mr.currentUser);else throw new Error("No hay usuario autenticado")}catch(i){throw console.error("Error al reenviar verificacin:",i),new Error("Error al reenviar verificacin de email")}},_b=i=>N1(mr,e=>{i(e?qo(e):null)}),up=()=>mr.currentUser?qo(mr.currentUser):null,sg=()=>{const i=up();return i!==null&&!i.isAnonymous&&i.emailVerified},hp=i=>{switch(i){case"auth/user-not-found":return"No existe una cuenta con este email";case"auth/wrong-password":return"Contrasea incorrecta";case"auth/email-already-in-use":return"Ya existe una cuenta con este email";case"auth/weak-password":return"La contrasea debe tener al menos 6 caracteres";case"auth/invalid-email":return"Email invlido";case"auth/too-many-requests":return"Demasiados intentos fallidos. Intenta ms tarde";case"auth/network-request-failed":return"Error de conexin. Verifica tu internet";default:return"Error de autenticacin. Intenta nuevamente"}},hD=Object.freeze(Object.defineProperty({__proto__:null,canPurchase:sg,getCurrentUser:up,logout:gb,onAuthStateChange:_b,registerWithEmail:fb,resendEmailVerification:yb,resetPassword:pb,signInAnonymous:mb,signInWithEmail:db,signInWithGoogle:hb},Symbol.toStringTag,{value:"Module"})),dD=()=>{const i="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<6;n++)e+=i.charAt(Math.floor(Math.random()*i.length));return e},fD=async i=>{try{const e=ct(Me,"users"),n=Vt(e,Je("referralCode","==",i));return(await Tt(n)).empty}catch(e){return console.error("Error verificando unicidad del cdigo:",e),!1}},mD=async()=>{let i=0;const e=10;for(;i<e;){const n=dD();if(await fD(n))return n;i++}throw new Error("No se pudo generar un cdigo nico despus de "+e+" intentos")},vb=async i=>{try{if(!(i!=null&&i.uid)){console.warn("Usuario no vlido para migracin");return}const e=vn(Me,"users",i.uid),n=await Di(e);if(!n.exists()){console.warn("Documento de usuario no encontrado:",i.uid);return}const s=n.data(),o={};let c=!1;if(!s.referralCode)try{const d=await mD();o.referralCode=d,c=!0,console.log(" Generando cdigo de referido para usuario:",i.uid,"-",d)}catch(d){console.error("Error generando cdigo de referido:",d),o.referralCode=`TEMP${Date.now().toString().slice(-6)}`,c=!0}if((s.referralCount===void 0||s.referralCount===null)&&(o.referralCount=0,c=!0),s.createdAt||(o.createdAt=new Date,c=!0),o.lastLoginAt=new Date,c=!0,s.usedReferralCode===void 0&&(o.usedReferralCode=null,c=!0),s.referredBy===void 0&&(o.referredBy=null,c=!0),s.referralProcessedAt===void 0&&(o.referralProcessedAt=null,c=!0),s.lastKnownIP===void 0&&(o.lastKnownIP=null,c=!0),s.deviceId===void 0&&(o.deviceId=null,c=!0),s.acceptedSuggestions===void 0&&(o.acceptedSuggestions=0,c=!0),s.deviceId===void 0&&(o.deviceId=null,c=!0),s.autoMigratedAt||(o.autoMigratedAt=new Date,o.migrationVersion=s.migrationVersion||"1.0",c=!0),c){if(await op(e,o),o.referralCode)try{const d=vn(Me,"userReferralCodes",i.uid);await Gh(d,{referralCode:o.referralCode,displayName:s.displayName||s.email||"Usuario",createdAt:s.createdAt||o.createdAt||new Date}),console.log(" Documento de cdigo de referido creado para:",i.uid)}catch(d){console.error("Error creando documento de cdigo de referido:",d)}console.log(" Usuario migrado automticamente:",i.uid)}}catch(e){console.error("Error en migracin automtica de usuario:",e)}},Eb=te.createContext(void 0),gD=({children:i})=>{const[e,n]=te.useState({user:null,isLoading:!0,isAuthenticated:!1});te.useEffect(()=>{const m=_b(async g=>{if(g&&!g.isAnonymous&&g.uid)try{await vb(g)}catch(_){console.error("Error durante la migracin automtica del usuario:",_)}n({user:g,isLoading:!1,isAuthenticated:g!==null&&!g.isAnonymous})});return()=>m()},[]);const d={...e,login:()=>{},logout:async()=>{try{const{logout:m}=await RE(async()=>{const{logout:g}=await Promise.resolve().then(()=>hD);return{logout:g}},void 0,import.meta.url);await m()}catch(m){console.error("Error al cerrar sesin:",m)}},refreshUser:()=>{const m=up();n(g=>({...g,user:m,isAuthenticated:m!==null&&!m.isAnonymous}))}};return y.jsx(Eb.Provider,{value:d,children:i})},va=()=>{const i=te.useContext(Eb);if(i===void 0)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return i},As={PURCHASED_PACKS:"verdad_reto_purchased_packs",CACHED_GAME_ITEMS:"verdad_reto_cached_items",CACHED_CATEGORIES:"verdad_reto_cached_categories",CACHE_PERMISSION:"verdad_reto_cache_permission",LAST_SYNC:"verdad_reto_last_sync"},pD=()=>{const i=localStorage.getItem(As.CACHE_PERMISSION);if(i==="granted")return!0;if(i==="denied")return!1;const e=window.confirm(`Deseas permitir que la aplicacin guarde los packs comprados localmente para poder jugar sin conexin?

Esto mejorar tu experiencia permitindote acceder a tus packs incluso sin internet.`);return localStorage.setItem(As.CACHE_PERMISSION,e?"granted":"denied"),e},Ec=()=>localStorage.getItem(As.CACHE_PERMISSION)==="granted",yD=async(i,e,n)=>{if(!Ec()){console.log("Cache permission not granted, skipping cache");return}try{const s={pack:i,gameData:{items:e,categories:n,timestamp:Date.now()},timestamp:Date.now()},o=dp();o[i.id]=s,localStorage.setItem(As.PURCHASED_PACKS,JSON.stringify(o)),localStorage.setItem(As.LAST_SYNC,Date.now().toString()),console.log(`Pack ${i.name} cached successfully`)}catch(s){console.error("Error caching pack:",s)}},dp=()=>{try{const i=localStorage.getItem(As.PURCHASED_PACKS);return i?JSON.parse(i):{}}catch(i){return console.error("Error reading cached packs:",i),{}}},_D=i=>{if(!Ec())return null;try{const e=dp(),n=[],s=[];for(const o of i){const c=e[o];c&&(n.push(...c.gameData.items),s.push(...c.gameData.categories))}return n.length===0?null:{items:n,categories:[...new Set(s)]}}catch(e){return console.error("Error reading cached game data:",e),null}},vD=()=>{Object.values(As).forEach(i=>{localStorage.removeItem(i)}),console.log("Cache cleared successfully")},Tb=()=>{const i=dp(),e=localStorage.getItem(As.LAST_SYNC);return{hasPermission:Ec(),packsCount:Object.keys(i).length,lastSync:e?new Date(parseInt(e)):null,packs:Object.keys(i)}};var wb="basil",ED=function(e){return e===3?"v3":e},bb="https://js.stripe.com",TD="".concat(bb,"/").concat(wb,"/stripe.js"),wD=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,bD=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var AD=function(e){return wD.test(e)||bD.test(e)},SD=function(){for(var e=document.querySelectorAll('script[src^="'.concat(bb,'"]')),n=0;n<e.length;n++){var s=e[n];if(AD(s.src))return s}return null},vE=function(e){var n="",s=document.createElement("script");s.src="".concat(TD).concat(n);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(s),s},xD=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:n})},Kl=null,hh=null,dh=null,RD=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},ID=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},CD=function(e){return Kl!==null?Kl:(Kl=new Promise(function(n,s){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var o=SD();if(!(o&&e)){if(!o)o=vE(e);else if(o&&dh!==null&&hh!==null){var c;o.removeEventListener("load",dh),o.removeEventListener("error",hh),(c=o.parentNode)===null||c===void 0||c.removeChild(o),o=vE(e)}}dh=ID(n,s),hh=RD(s),o.addEventListener("load",dh),o.addEventListener("error",hh)}catch(d){s(d);return}}),Kl.catch(function(n){return Kl=null,Promise.reject(n)}))},ND=function(e,n,s){if(e===null)return null;var o=n[0],c=o.match(/^pk_test/),d=ED(e.version),m=wb;c&&d!==m&&console.warn("Stripe.js@".concat(d," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(m,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var g=e.apply(void 0,n);return xD(g,s),g},Yl,Ab=!1,Sb=function(){return Yl||(Yl=CD(null).catch(function(e){return Yl=null,Promise.reject(e)}),Yl)};Promise.resolve().then(function(){return Sb()}).catch(function(i){Ab||console.warn(i)});var DD=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];Ab=!0;var o=Date.now();return Sb().then(function(c){return ND(c,n,o)})};const OD="pk_live_51S2dpMEamlsERKowyMSm4kgm11dMknJLyZGy9gZsIBBd3BQo3l9Vnn0TYKWcmuDtnq23YEsHo7FL69hGEM3UAboz00Onx53LCm";let Dm=null;const PD=()=>(Dm||(Dm=DD(OD)),Dm),xb=async()=>{try{const i=await Di(vn(Me,"config","stripe"));return i.exists()?i.data():null}catch(i){return console.error("Error obteniendo configuracin de Stripe:",i),null}},MD=async(i,e,n)=>{try{if(!i.isPremium)throw new Error("Este pack no requiere pago");const s=await xb();if(!s)throw new Error("Configuracin de Stripe no disponible");const o=i.priceAmount||0,c=i.originalPriceAmount||i.priceAmount||0;console.log("Creando sesin de checkout:",{packId:i.id,originalAmount:c,finalAmount:o,hasDiscount:i.hasDiscount,discountReason:i.discountReason});const d=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packId:i.id,priceId:i.stripePriceId,userEmail:e,userId:n,successUrl:`${window.location.origin}${s.successUrl}&pack=${i.id}`,cancelUrl:`${window.location.origin}${s.cancelUrl}`,hasDiscount:i.hasDiscount,finalAmount:o,originalAmount:c,discountReason:i.discountReason})});if(!d.ok){const g=await d.json();throw new Error(g.error||"Error creando sesin de pago")}const m=await d.json();return{sessionId:m.id,url:m.url}}catch(s){throw console.error("Error creando sesin de checkout:",s),s}},VD=async(i,e,n)=>{try{const s=await PD();if(!s)throw new Error("Stripe no est disponible");const o=await MD(i,e,n);if(!o)throw new Error("No se pudo crear la sesin de pago");await kD({userId:n,packId:i.id,stripeSessionId:o.sessionId,purchaseDate:new Date,amount:i.priceAmount||0,currency:i.currency||"EUR",status:"pending",email:e});const{error:c}=await s.redirectToCheckout({sessionId:o.sessionId});if(c)throw new Error(c.message)}catch(s){throw console.error("Error redirigiendo a checkout:",s),s}},kD=async i=>{try{return(await fd(ct(Me,"userPurchases"),{...i,purchaseDate:i.purchaseDate.toISOString()})).id}catch(e){throw console.error("Error guardando compra pendiente:",e),e}},jD=async i=>{try{const e=Vt(ct(Me,"userPurchases"),Je("userId","==",i),Je("status","==","completed"));return(await Tt(e)).docs.map(s=>({id:s.id,...s.data(),purchaseDate:new Date(s.data().purchaseDate)}))}catch(e){return console.error("Error obteniendo compras del usuario:",e),[]}},EE=async i=>{try{return(await jD(i)).map(n=>n.packId)}catch(e){return console.error("Error obteniendo packs comprados:",e),[]}},LD=({onClose:i})=>{const[e,n]=te.useState(null),[s,o]=te.useState(!1);te.useEffect(()=>{c()},[]);const c=()=>{const g=Tb();n(g)},d=async()=>{o(!0);try{pD()&&c()}finally{o(!1)}},m=()=>{window.confirm("Ests seguro de que quieres eliminar todos los datos guardados localmente?")&&(vD(),c())};return e?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-xl font-bold",children:"Almacenamiento Local"}),y.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"font-semibold mb-2",children:"Estado del Cach"}),y.jsxs("div",{className:"space-y-2 text-sm",children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"Permiso:"}),y.jsx("span",{className:`font-medium ${e.hasPermission?"text-green-600":"text-red-600"}`,children:e.hasPermission?"Activado":"Desactivado"})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"Packs guardados:"}),y.jsx("span",{className:"font-medium",children:e.packsCount})]}),e.lastSync&&y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"ltima sincronizacin:"}),y.jsxs("span",{className:"font-medium text-xs",children:[e.lastSync.toLocaleDateString()," ",e.lastSync.toLocaleTimeString()]})]})]})]}),e.packsCount>0&&y.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"font-semibold mb-2",children:"Packs Disponibles Sin Conexin"}),y.jsx("div",{className:"space-y-1 text-sm",children:e.packs.map(g=>y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),y.jsx("span",{className:"capitalize",children:g.replace("-"," ")})]},g))})]}),y.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"font-semibold mb-2",children:"Qu es el almacenamiento local?"}),y.jsx("p",{className:"text-sm text-gray-700",children:"Permite guardar los packs que compres en tu dispositivo para poder jugar sin conexin a internet. Los datos se mantienen seguros en tu navegador."})]}),y.jsxs("div",{className:"flex flex-col space-y-2",children:[e.hasPermission?y.jsx("div",{className:"text-center text-green-600 font-medium",children:" Almacenamiento local activado"}):y.jsx(Oe,{onClick:d,disabled:s,className:"w-full bg-green-600 hover:bg-green-700",children:s?"Procesando...":"Activar Almacenamiento Local"}),e.packsCount>0&&y.jsx(Oe,{onClick:m,className:"w-full bg-red-600 hover:bg-red-700",children:"Limpiar Datos Guardados"}),y.jsx(Oe,{onClick:i,className:"w-full bg-gray-600 hover:bg-gray-700",children:"Cerrar"})]})]})]})}):y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:y.jsx("div",{className:"text-center",children:"Cargando informacin del cach..."})})})},UD=({pack:i,onBack:e,onSuccess:n})=>{const{user:s}=va(),[o,c]=te.useState(!1),[d,m]=te.useState(null),[g,_]=te.useState(null);te.useEffect(()=>{(async()=>{try{const O=await xb();_(O)}catch{m("Error cargando configuracin de pago")}})()},[]);const T=async()=>{if(!s||!s.email){m("Debes estar autenticado para realizar una compra");return}if(!i.isPremium){m("Este pack no requiere pago");return}c(!0),m(null);try{await VD(i,s.email,s.uid),n&&n()}catch(S){m(S.message||"Error procesando el pago"),c(!1)}},A=(S,O)=>new Intl.NumberFormat("es-ES",{style:"currency",currency:O.toUpperCase()}).format(S/100);return g?y.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:y.jsxs("div",{className:"w-full max-w-md",children:[y.jsxs("div",{className:"relative text-center mb-8",children:[y.jsx("button",{onClick:e,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:y.jsx(SE,{className:"w-8 h-8"})}),y.jsx("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Checkout"})]}),y.jsxs(Rn,{className:"p-6",children:[y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("div",{className:"text-6xl mb-4",children:i.icon}),y.jsx("h2",{className:"text-2xl font-bold text-cyan-400 mb-2",children:i.name}),y.jsx("p",{className:"text-gray-400 mb-4",children:i.description}),i.priceAmount&&i.currency&&y.jsxs("div",{className:"bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-lg p-4 mb-4",children:[y.jsx("div",{className:"text-3xl font-bold text-white",children:A(i.priceAmount,i.currency)}),y.jsx("div",{className:"text-sm text-gray-300",children:"Pago nico"})]})]}),y.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 mb-6",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx(_o,{className:"w-5 h-5 text-green-400"}),y.jsx("span",{className:"text-green-400 font-semibold",children:"Pago seguro"})]}),y.jsx("p",{className:"text-sm text-gray-300",children:"Tu pago est protegido por Stripe. No almacenamos informacin de tarjetas de crdito."})]}),s&&y.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:[y.jsxs("div",{className:"text-sm text-gray-300",children:[y.jsx("strong",{children:"Cuenta:"})," ",s.displayName||s.email]}),y.jsxs("div",{className:"text-sm text-gray-300",children:[y.jsx("strong",{children:"Email:"})," ",s.email]})]}),d&&y.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6",children:y.jsx("p",{className:"text-red-200 text-sm",children:d})}),y.jsx(Oe,{onClick:T,disabled:o||!s,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:o?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Procesando..."]}):y.jsxs(y.Fragment,{children:[y.jsx(xE,{className:"w-5 h-5"}),"Pagar con Stripe"]})}),y.jsx("div",{className:"mt-4 text-center",children:y.jsx("p",{className:"text-xs text-gray-400",children:"Al continuar, aceptas nuestros trminos de servicio y poltica de privacidad."})})]}),y.jsxs("div",{className:"mt-6 text-center",children:[y.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Mtodos de pago aceptados:"}),y.jsxs("div",{className:"flex justify-center gap-2",children:[y.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Visa"}),y.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Mastercard"}),y.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"American Express"})]})]})]})}):y.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),y.jsx("p",{className:"text-gray-400",children:"Cargando configuracin de pago..."})]})})},zD=({availablePacks:i,purchasedPacks:e,onPurchase:n,onBack:s,onGoToLogin:o})=>{const{user:c,isAuthenticated:d}=va(),[m,g]=te.useState(!1),[_,T]=te.useState(!1),[A,S]=te.useState(!1),[O,j]=te.useState(null),[Q,H]=te.useState([]),[ae,re]=te.useState(!1);te.useEffect(()=>{(async()=>{if(c&&d){re(!0);try{const C=await EE(c.uid);H(C)}catch(C){console.error("Error cargando compras del usuario:",C)}finally{re(!1)}}else H([])})()},[c,d]);const ie=Y=>{const C=i.find(x=>x.id===Y);if(C){if(!C.isPremium||C.id==="base"){if(!sg()){g(!0),setTimeout(()=>g(!1),3e3);return}n(Y);return}if(!sg()){g(!0),setTimeout(()=>g(!1),3e3);return}j(C),S(!0)}},ge=async()=>{if(S(!1),j(null),c&&d)try{const Y=await EE(c.uid);H(Y),O&&Y.includes(O.id)&&n(O.id)}catch(Y){console.error("Error actualizando compras:",Y)}},ue=()=>{S(!1),j(null)};return Tb(),y.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in pt-16",children:y.jsxs("div",{className:"w-full max-w-2xl",children:[y.jsxs("div",{className:"relative text-center mb-8",children:[y.jsx("button",{onClick:s,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:y.jsx(SE,{className:"w-8 h-8"})}),y.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Tienda de Paquetes"}),y.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 text-sm",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(_S,{className:"w-4 h-4"}),c?y.jsx("span",{className:`${d?"text-green-400":"text-yellow-400"}`,children:d?`Conectado como ${c.displayName||c.email}`:"Usuario annimo - Inicia sesin para comprar"}):y.jsx("span",{className:"text-gray-400",children:"No conectado"})]}),c&&d&&y.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:y.jsx("a",{href:"https://verdad-reto.es.eu.org/delete-account.html",target:"_blank",rel:"noopener noreferrer",className:"hover:text-red-400 transition-colors",children:"Eliminar cuenta"})})]})]}),m&&y.jsxs("div",{className:"mb-6 p-4 bg-yellow-500/20 border border-yellow-500 rounded-lg text-center",children:[y.jsx("p",{className:"text-yellow-100 mb-2",children:"Necesitas iniciar sesin y verificar tu email para comprar packs premium"}),o&&y.jsx(Oe,{onClick:o,className:"bg-yellow-600 hover:bg-yellow-700",children:"Ir a Iniciar Sesin"})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(Y=>{const C=e.includes(Y.id),x=Q.includes(Y.id),I=C||x,P=Y.id==="base",M=Y.isPremium&&!P,k=M&&!I;return y.jsxs(Rn,{className:`flex flex-col text-center border-2 transition-all ${I?"border-green-500/50":k?"border-yellow-500/50 opacity-75":"border-transparent hover:border-pink-500/50"}`,children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"text-5xl mb-4",children:Y.icon}),k&&y.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-500 rounded-full p-1",children:y.jsx(_o,{className:"w-4 h-4 text-black"})})]}),y.jsx("h2",{className:`text-2xl font-bold ${I?"text-green-400":k?"text-yellow-400":"text-cyan-400"}`,children:Y.name}),y.jsx("p",{className:"text-gray-400 mt-2 mb-2 flex-grow",children:Y.description}),M&&Y.priceAmount&&Y.currency&&y.jsxs("div",{className:"mb-4",children:[Y.hasDiscount&&Y.originalPriceAmount?y.jsxs("div",{className:"space-y-1",children:[y.jsx("div",{className:"text-sm text-gray-500 line-through",children:new Intl.NumberFormat("es-ES",{style:"currency",currency:Y.currency.toUpperCase()}).format(Y.originalPriceAmount/100)}),y.jsx("div",{className:`text-lg font-bold ${I?"text-green-400":"text-red-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:Y.currency.toUpperCase()}).format(Y.priceAmount/100)}),y.jsx("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:Y.discountPercentage?`-${Y.discountPercentage}%`:`-${new Intl.NumberFormat("es-ES",{style:"currency",currency:Y.currency.toUpperCase()}).format((Y.originalPriceAmount-Y.priceAmount)/100)}`}),Y.discountReason&&y.jsx("div",{className:"text-xs text-yellow-400 italic",children:Y.discountReason})]}):y.jsx("div",{className:`text-lg font-bold ${I?"text-green-400":"text-yellow-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:Y.currency.toUpperCase()}).format(Y.priceAmount/100)}),y.jsx("div",{className:"text-xs text-gray-500",children:"Pago nico"})]}),I?y.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-green-700 text-green-200",children:" Comprado"}):P?y.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-blue-700 text-blue-200",children:"Incluido"}):M?y.jsx(Oe,{onClick:()=>ie(Y.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",disabled:ae,children:ae?y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):y.jsxs(y.Fragment,{children:[y.jsx(xE,{className:"w-4 h-4"}),"Comprar ",Y.price]})}):y.jsxs(Oe,{onClick:()=>ie(Y.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2",children:[y.jsx(_o,{className:"w-4 h-4"}),"Desbloquear (",Y.price,")"]})]},Y.id)})}),_&&y.jsx(LD,{onClose:()=>T(!1)}),A&&O&&y.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:y.jsx("div",{className:"w-full h-full",children:y.jsx(UD,{pack:O,onBack:ue,onSuccess:ge})})})]})})},qD=i=>{var n;if(!i.hasDiscount||!i.priceAmount)return i;if(i.discountValidUntil&&new Date>i.discountValidUntil)return{...i,hasDiscount:!1};let e=i.priceAmount;return i.discountPercentage?e=i.priceAmount*(1-i.discountPercentage/100):i.discountAmount&&(e=i.priceAmount-i.discountAmount),e=Math.max(0,Math.round(e)),{...i,originalPriceAmount:i.priceAmount,priceAmount:e,price:new Intl.NumberFormat("es-ES",{style:"currency",currency:((n=i.currency)==null?void 0:n.toUpperCase())||"EUR"}).format(e/100)}},fp=async()=>{try{const i=ct(Me,"packs"),e=await Tt(i);return e.empty?(console.warn("No packs found in Firebase database"),[]):e.docs.map(o=>{const c=o.data();return{id:o.id,name:c.name,description:c.description,price:c.price,icon:c.icon,isActive:c.isActive??!0,priceAmount:c.priceAmount,currency:c.currency,isPremium:c.isPremium??!1,stripeProductId:c.stripeProductId,stripePriceId:c.stripePriceId,hasDiscount:c.hasDiscount??!1,discountPercentage:c.discountPercentage,discountAmount:c.discountAmount,discountReason:c.discountReason,discountValidUntil:c.discountValidUntil?c.discountValidUntil.toDate():void 0,originalPriceAmount:c.originalPriceAmount,allowDemo:c.allowDemo??!1,demoPlaysCount:c.demoPlaysCount??0}}).filter(o=>o.isActive).map(o=>qD(o))}catch(i){throw console.error("Error connecting to Firebase:",i),new Error("No se pudo conectar a la base de datos. Verifica tu conexin a internet.")}},BD=async i=>{try{if(!i||i.length===0)return console.warn("No categories provided for questions query"),[];const e=ct(Me,"gameItems"),n=Vt(e,Je("type","==","question"),Je("category","in",i)),s=await Tt(n);return s.empty?(console.warn("No questions found in Firebase database for categories:",i),[]):s.docs.map(c=>{const d=c.data();return{text:d.text,category:d.category}})}catch(e){throw console.error("Error fetching questions from Firebase:",e),new Error("No se pudieron cargar las preguntas. Verifica tu conexin a internet.")}},HD=async i=>{try{if(!i||i.length===0)return console.warn("No categories provided for dares query"),[];const e=ct(Me,"gameItems"),n=Vt(e,Je("type","==","dare"),Je("category","in",i)),s=await Tt(n);return s.empty?(console.warn("No dares found in Firebase database for categories:",i),[]):s.docs.map(c=>{const d=c.data();return{text:d.text,category:d.category}})}catch(e){throw console.error("Error fetching dares from Firebase:",e),new Error("No se pudieron cargar los retos. Verifica tu conexin a internet.")}},FD=async i=>{try{if(!i||i.length===0)return console.warn("No pack IDs provided for categories query"),[];const e=ct(Me,"gameItems"),n=Vt(e,Je("packId","in",i)),s=await Tt(n);return s.empty?(console.warn("No categories found in Firebase database for packs:",i),[]):[...new Set(s.docs.map(c=>c.data().category))]}catch(e){throw console.error("Error fetching categories from Firebase:",e),new Error("No se pudieron cargar las categoras. Verifica tu conexin a internet.")}},GD=async i=>{try{if(!i||i.length===0)return console.warn("No pack IDs provided for game data query"),{questions:[],dares:[],categories:[]};const e=await FD(i),[n,s]=await Promise.all([BD(e),HD(e)]);if(Ec()&&(n.length>0||s.length>0)){const o=[...n,...s],c=i.reduce((d,m)=>{const g=o.filter(T=>T.packId===m),_=e.filter(T=>g.some(A=>A.category===T));return g.length>0&&(d[m]={items:g,categories:_}),d},{});for(const[d,m]of Object.entries(c)){const _=(await fp()).find(T=>T.id===d);_&&await yD(_,m.items,m.categories)}}return{questions:n,dares:s,categories:e}}catch(e){console.error("Error fetching game data from Firebase:",e);const n=_D(i);if(n){console.log("Using cached game data for offline play");const s=n.items.filter(c=>!("type"in c)||c.type==="question"),o=n.items.filter(c=>"type"in c&&c.type==="dare");return{questions:s,dares:o,categories:n.categories}}throw Ec()?new Error("No hay conexin a internet y no tienes datos guardados para estos packs."):new Error("No hay conexin a internet y no tienes packs guardados localmente. Deseas activar el almacenamiento local para jugar sin conexin?")}},QD=async i=>{try{const e=ct(Me,"gameItems"),n=Vt(e,Je("packId","==",i),Je("isDemo","==",!0)),o=(await Tt(n)).docs.map(g=>({id:g.id,...g.data()})),c=o.filter(g=>g.type==="question").map(g=>({text:g.text,category:g.category,isDemo:!0,packId:g.packId})),d=o.filter(g=>g.type==="dare").map(g=>({text:g.text,category:g.category,isDemo:!0,packId:g.packId})),m=[...new Set(o.map(g=>g.category))];return{questions:c,dares:d,categories:m}}catch(e){return console.error("Error fetching demo data:",e),{questions:[],dares:[],categories:[]}}},KD=async(i,e)=>{try{const n={packId:i,userId:e||"anonymous",timestamp:new Date,type:"demo_play"};await fd(ct(Me,"demoLogs"),n);const s=ct(Me,"packs"),o=vn(s,i),c=await Di(o);if(c.exists()){const d=c.data().demoPlaysCount||0;await op(o,{demoPlaysCount:d+1})}console.log("Demo play logged successfully")}catch(n){console.error("Error logging demo play:",n)}},Rb=async(i,e)=>{try{if(!i||i.trim().length===0)return{isValid:!1,error:"El cdigo de referido no puede estar vaco"};const n=ub(i);if(!n.isValid)return{isValid:!1,error:n.error||"El cdigo de referido no es vlido"};const s=n.sanitizedCode,o=ct(Me,"userReferralCodes"),c=Vt(o,Je("referralCode","==",s)),d=await Tt(c);if(d.empty)return{isValid:!1,error:"Cdigo de referido no vlido"};const m=d.docs[0],g=m.data(),_=m.id;if(_===e)return{isValid:!1,error:"No puedes usar tu propio cdigo de referido"};const T=await Di(vn(Me,"users",e));if(T.exists()&&T.data().usedReferralCode)return{isValid:!1,error:"Ya has usado un cdigo de referido anteriormente"};const A=new Date,S=new Date(A.getTime()-3600*1e3),O=ct(Me,"referrals"),j=Vt(O,Je("referrerUid","==",_),Je("createdAt",">=",S));if((await Tt(j)).size>=5)return{isValid:!1,message:"Lmite de referidos por hora excedido. Intenta ms tarde."};const H=new Date(A.getTime()-1440*60*1e3),ae=Vt(O,Je("referrerUid","==",_),Je("createdAt",">=",H));return(await Tt(ae)).size>=20?{isValid:!1,message:"Lmite diario de referidos excedido. Intenta maana."}:{isValid:!0,referrerName:g.displayName||g.email||"Usuario"}}catch(n){return console.error("Error validating referral code:",n),{isValid:!1,error:"Error al validar el cdigo de referido"}}},YD=async(i,e)=>{try{return await rD(Me,async n=>{var ge;const s=ct(Me,"userReferralCodes"),o=Vt(s,Je("referralCode","==",i.toUpperCase())),c=await Tt(o);if(c.empty)throw new Error("Cdigo de referido no vlido");const d=c.docs[0],m=vn(Me,"users",d.id),g=vn(Me,"users",e),_=await n.get(g);if(_.exists()&&_.data().usedReferralCode)throw new Error("Ya has usado un cdigo de referido");if(d.id===e)throw new Error("No puedes usar tu propio cdigo");const T=new Date,A=_.data(),S=((ge=A==null?void 0:A.createdAt)==null?void 0:ge.toDate())||new Date,O=new Date(T.getTime()-300*1e3);if(S>O)throw new Error("Usuario muy reciente, posible abuso");const j=A==null?void 0:A.lastKnownIP,Q=d.data(),H=Q==null?void 0:Q.lastKnownIP;j&&H&&j===H&&console.warn("Posible abuso: misma IP para referrer y referido");const ae=A==null?void 0:A.deviceId,re=Q==null?void 0:Q.deviceId;if(ae&&re&&ae===re)throw new Error("No se puede usar el mismo dispositivo para referir");n.update(m,{referralCount:ob(1)}),n.update(g,{usedReferralCode:i.toUpperCase(),referredBy:d.id,referralProcessedAt:T});const ie=vn(ct(Me,"referrals"));return n.set(ie,{referrerId:d.id,referredUserId:e,referralCode:i.toUpperCase(),createdAt:T,status:"completed",referrerIP:H||null,referredUserIP:j||null,sameIP:j&&H?j===H:!1,userAccountAge:T.getTime()-S.getTime()}),!0})}catch(n){return console.error("Error processing referral:",n),!1}},XD=async i=>{try{const e=await Di(vn(Me,"users",i));if(!e.exists())return null;const n=e.data(),s=ct(Me,"referrals"),o=Vt(s,Je("referrerId","==",i)),c=await Tt(o),d=[];return c.forEach(m=>{var _;const g=m.data();d.push({id:g.referredUserId,name:`Usuario ${g.referredUserId.substring(0,8)}...`,joinedAt:((_=g.createdAt)==null?void 0:_.toDate())||new Date})}),{referralCode:n.referralCode||"",referralCount:n.referralCount||0,usedReferralCode:n.usedReferralCode||null,referredBy:n.referredBy||null,referredUsers:d}}catch(e){return console.error("Error getting user referral data:",e),null}},$D=async i=>{try{const e=await Di(vn(Me,"users",i));if(!e.exists())return[];const s=e.data().referralCount||0,o=ct(Me,"packs"),c=Vt(o,Je("isReferralUnlockable","==",!0)),d=await Tt(c),m=[];return d.forEach(g=>{const T=g.data().requiredReferrals||0;s>=T&&m.push(g.id)}),m}catch(e){return console.error("Error checking referral pack unlocks:",e),[]}},WD=async i=>{try{const e=ct(Me,"suggestions"),n=Vt(e,Je("authorId","==",i),Je("status","==","accepted")),o=(await Tt(n)).size,c=ct(Me,"packs"),d=Vt(c,Je("isSuggestionUnlockable","==",!0)),m=await Tt(d),g=[];return m.forEach(_=>{const A=_.data().requiredApprovedSuggestions||0;o>=A&&g.push(_.id)}),g}catch(e){return console.error("Error checking suggestion pack unlocks:",e),[]}},TE=async(i,e)=>{try{const n=vn(Me,"userQuestionChangeStats",i);(await Di(n)).exists()?await op(n,{totalChanges:ob(1),adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,updatedAt:new Date}):await Gh(n,{userId:i,totalChanges:e.totalChanges,adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,createdAt:new Date,updatedAt:new Date}),console.log("Question change stats saved successfully")}catch(n){console.error("Error saving question change stats:",n)}},Ib=async i=>{try{const e=ct(Me,"suggestions"),n=Vt(e,Je("userId","==",i),Je("status","==","accepted"));return(await Tt(n)).size}catch(e){return console.error("Error getting user accepted suggestions count:",e),0}},ZD=({onBack:i,onSuccess:e})=>{const[n,s]=te.useState("login"),[o,c]=te.useState(""),[d,m]=te.useState(""),[g,_]=te.useState(""),[T,A]=te.useState(""),[S,O]=te.useState(""),[j,Q]=te.useState(null),[H,ae]=te.useState(!1),[re,ie]=te.useState(!1),[ge,ue]=te.useState(""),[Y,C]=te.useState(""),{refreshUser:x,user:I}=va(),P=async()=>{ie(!0),ue("");try{const se=n==="register"&&S&&(j!=null&&j.isValid)?S:void 0;await hb(se),x(),e()}catch(se){ue(se.message)}finally{ie(!1)}},M=async()=>{ie(!0),ue("");try{await mb(),x(),e()}catch(se){ue(se.message)}finally{ie(!1)}},k=async se=>{se.preventDefault(),ie(!0),ue(""),C("");try{if(n==="login"){const ye=await db(o,d);if(x(),!ye.emailVerified){C("Tu email no est verificado. Revisa tu bandeja de entrada o reenva la verificacin.");return}e()}else if(n==="register"){if(d!==g)throw new Error("Las contraseas no coinciden");const ye=S&&(j!=null&&j.isValid)?S:void 0;await fb(o,d,T,ye),C("Cuenta creada exitosamente. Revisa tu email para verificar tu cuenta antes de poder comprar packs premium."),s("login")}else n==="forgot-password"&&(await pb(o),C("Email de restablecimiento enviado. Revisa tu bandeja de entrada."),s("login"))}catch(ye){ue(ye.message)}finally{ie(!1)}},R=async()=>{ie(!0),ue("");try{await yb(),C("Email de verificacin reenviado.")}catch(se){ue(se.message)}finally{ie(!1)}},Ie=()=>{c(""),m(""),_(""),A(""),O(""),Q(null),ue(""),C("")},De=async se=>{if(!se.trim()){Q(null);return}ae(!0);try{const ye="temp-"+Date.now(),D=await Rb(se,ye);Q({isValid:D.isValid,message:D.isValid?`Cdigo vlido de ${D.referrerName}`:D.error||"Cdigo no vlido"})}catch{Q({isValid:!1,message:"Error al validar cdigo"})}finally{ae(!1)}},U=se=>{O(se.toUpperCase()),se.trim().length>=6?De(se):Q(null)},ne=se=>{s(se),Ie()};return y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:y.jsxs(Rn,{className:"w-full max-w-md p-8 space-y-6",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:n==="login"?"Iniciar Sesin":n==="register"?"Crear Cuenta":"Recuperar Contrasea"}),y.jsx("p",{className:"text-white/80",children:n==="login"?"Accede a tu cuenta para comprar packs premium":n==="register"?"Crea una cuenta para acceder a contenido premium":"Ingresa tu email para recuperar tu contrasea"})]}),ge&&y.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:ge}),Y&&y.jsxs("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:[y.jsx("p",{children:Y}),Y.includes("no est verificado")&&y.jsx(Oe,{onClick:R,disabled:re,className:"mt-2 bg-green-600 hover:bg-green-700 text-sm",children:"Reenviar verificacin"})]}),y.jsxs("form",{onSubmit:k,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Email"}),y.jsx("input",{type:"email",value:o,onChange:se=>c(se.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"tu@email.com",required:!0})]}),n!=="forgot-password"&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Contrasea"}),y.jsx("input",{type:"password",value:d,onChange:se=>m(se.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"",required:!0,minLength:6})]}),n==="register"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Confirmar Contrasea"}),y.jsx("input",{type:"password",value:g,onChange:se=>_(se.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"",required:!0,minLength:6})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Nombre (opcional)"}),y.jsx("input",{type:"text",value:T,onChange:se=>A(se.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"Tu nombre"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Cdigo de Referido (opcional)"}),y.jsx("input",{type:"text",value:S,onChange:se=>U(se.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${j===null?"border-white/20 focus:ring-white/50":j.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ej: ABC123",maxLength:8}),H&&y.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando cdigo..."}),j&&y.jsx("p",{className:`text-sm mt-1 ${j.isValid?"text-green-400":"text-red-400"}`,children:j.message})]})]}),y.jsx(Oe,{type:"submit",disabled:re,className:"w-full",children:re?"Cargando...":n==="login"?"Iniciar Sesin":n==="register"?"Crear Cuenta":"Enviar Email"})]}),n!=="forgot-password"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-white/20"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-2 bg-transparent text-white/60",children:"o"})})]}),y.jsxs(Oe,{onClick:P,disabled:re,className:"w-full bg-white text-gray-900 hover:bg-gray-100 flex items-center justify-center",children:[y.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[y.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),y.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),y.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),y.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar con Google"]})]}),y.jsxs("div",{className:"text-center space-y-2",children:[n==="login"&&y.jsxs(y.Fragment,{children:[y.jsx("button",{type:"button",onClick:()=>ne("forgot-password"),className:"text-white/80 hover:text-white text-sm underline",children:"Olvidaste tu contrasea?"}),y.jsxs("div",{children:[y.jsx("span",{className:"text-white/60 text-sm",children:"No tienes cuenta? "}),y.jsx("button",{type:"button",onClick:()=>ne("register"),className:"text-white hover:text-white/80 text-sm underline",children:"Regstrate"})]})]}),n==="register"&&y.jsxs("div",{children:[y.jsx("span",{className:"text-white/60 text-sm",children:"Ya tienes cuenta? "}),y.jsx("button",{type:"button",onClick:()=>ne("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Inicia sesin"})]}),n==="forgot-password"&&y.jsx("button",{type:"button",onClick:()=>ne("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Volver al inicio de sesin"})]}),y.jsxs("div",{className:"border-t border-white/20 pt-4",children:[y.jsx(Oe,{onClick:M,disabled:re,className:"w-full bg-white/10 hover:bg-white/20 text-white border border-white/20",children:"Continuar sin cuenta"}),y.jsx("p",{className:"text-white/60 text-xs text-center mt-2",children:"Podrs jugar pero no comprar packs premium"})]}),y.jsx("div",{className:"text-center",children:y.jsx(Oe,{onClick:i,className:"text-white/80 hover:text-white bg-transparent",children:" Volver"})})]})})},Tc="suggestions",JD=async(i,e,n)=>{try{const s=new Date;if(!await Nb(e))throw new Error("Has alcanzado el lmite de sugerencias permitidas");const c=await Cb(e,i.title,i.content);if(!c.isValid)throw new Error(c.error||"Contenido no vlido");const d={type:i.type,authorUid:e,authorName:n,title:i.title,content:i.content,targetPackId:i.targetPackId,status:tc.Pending,createdAt:s,updatedAt:s};if(i.targetPackId){const g=await Di(vn(Me,"packs",i.targetPackId));g.exists()&&(d.targetPackName=g.data().name)}return(await fd(ct(Me,Tc),{...d,createdAt:Ze.fromDate(d.createdAt),updatedAt:Ze.fromDate(d.updatedAt)})).id}catch(s){throw console.error("Error creating suggestion:",s),s}},eO=["spam","test","prueba","asdf","qwerty","123","abc"],wE=i=>{const e=i.toLowerCase();return eO.some(n=>e.includes(n.toLowerCase()))},tO=async(i,e,n)=>{try{const s=Vt(ct(Me,Tc),Je("authorUid","==",i),ib("createdAt","desc"),$2(10)),o=await Tt(s);for(const c of o.docs){const d=c.data();if(d.title===e||d.content===n)return!0;const m=bE(e,d.title),g=bE(n,d.content);if(m>.8||g>.8)return!0}return!1}catch(s){return console.error("Error checking duplicate content:",s),!1}},bE=(i,e)=>{const n=i.toLowerCase().split(/\s+/),s=e.toLowerCase().split(/\s+/),o=new Set(n),c=new Set(s),d=new Set([...o].filter(g=>c.has(g))),m=new Set([...o,...c]);return d.size/m.size},Cb=async(i,e,n)=>e.length<gt.MIN_TITLE_LENGTH?{isValid:!1,error:`El ttulo debe tener al menos ${gt.MIN_TITLE_LENGTH} caracteres`}:e.length>gt.MAX_TITLE_LENGTH?{isValid:!1,error:`El ttulo no puede exceder ${gt.MAX_TITLE_LENGTH} caracteres`}:n.length<gt.MIN_CONTENT_LENGTH?{isValid:!1,error:`El contenido debe tener al menos ${gt.MIN_CONTENT_LENGTH} caracteres`}:n.length>gt.MAX_CONTENT_LENGTH?{isValid:!1,error:`El contenido no puede exceder ${gt.MAX_CONTENT_LENGTH} caracteres`}:wE(e)||wE(n)?{isValid:!1,error:"El contenido contiene palabras no permitidas"}:await tO(i,e,n)?{isValid:!1,error:"Ya has enviado una sugerencia similar recientemente"}:{isValid:!0},Nb=async i=>{try{const e=new Date,n=new Date(e.getTime()-1440*60*1e3),s=new Date(e.getTime()-10080*60*1e3),o=Vt(ct(Me,Tc),Je("authorUid","==",i),Je("createdAt",">=",Ze.fromDate(n)));if((await Tt(o)).size>=gt.MAX_SUGGESTIONS_PER_DAY)return!1;const d=Vt(ct(Me,Tc),Je("authorUid","==",i),Je("createdAt",">=",Ze.fromDate(s)));return!((await Tt(d)).size>=gt.MAX_SUGGESTIONS_PER_WEEK)}catch(e){return console.error("Error checking suggestion limits:",e),!1}},nO=async i=>{try{const e=await Db(i),n={total:e.length,pending:0,approved:0,rejected:0};return e.forEach(s=>{switch(s.status){case tc.Pending:n.pending++;break;case tc.Approved:n.approved++;break;case tc.Rejected:n.rejected++;break}}),n}catch(e){throw console.error("Error getting user suggestion stats:",e),e}},Db=async i=>{try{const e=Vt(ct(Me,Tc),Je("authorUid","==",i),ib("createdAt","desc"));return(await Tt(e)).docs.map(s=>({id:s.id,...s.data(),createdAt:s.data().createdAt.toDate(),updatedAt:s.data().updatedAt.toDate()}))}catch(e){throw console.error("Error getting user suggestions:",e),e}},Ob=({onClose:i,onSuccess:e})=>{const{user:n}=va(),[s,o]=te.useState({type:er.Pack,title:"",content:"",targetPackId:void 0}),[c,d]=te.useState([]),[m,g]=te.useState(!1),[_,T]=te.useState(null),[A,S]=te.useState(!0),[O,j]=te.useState(0);te.useEffect(()=>{Q(),H(),ae()},[n]);const Q=async()=>{try{const Y=await fp();d(Y)}catch(Y){console.error("Error loading packs:",Y)}},H=async()=>{if(n)try{const Y=await Nb(n.uid);S(Y),Y||T("Has alcanzado el lmite de sugerencias permitidas. Intenta ms tarde.")}catch(Y){console.error("Error checking user limits:",Y)}},ae=async()=>{if(n)try{const Y=await Ib(n.uid);j(Y)}catch(Y){console.error("Error loading accepted suggestions count:",Y)}},re=Y=>{o(C=>({...C,type:Y,targetPackId:Y===er.Pack?void 0:C.targetPackId}))},ie=async Y=>{if(Y.preventDefault(),!(!n||!A)){if(s.title.length<gt.MIN_TITLE_LENGTH){T(`El ttulo debe tener al menos ${gt.MIN_TITLE_LENGTH} caracteres`);return}if(s.title.length>gt.MAX_TITLE_LENGTH){T(`El ttulo no puede exceder ${gt.MAX_TITLE_LENGTH} caracteres`);return}if(s.content.length<gt.MIN_CONTENT_LENGTH){T(`El contenido debe tener al menos ${gt.MIN_CONTENT_LENGTH} caracteres`);return}if(s.content.length>gt.MAX_CONTENT_LENGTH){T(`El contenido no puede exceder ${gt.MAX_CONTENT_LENGTH} caracteres`);return}if(s.type!==er.Pack&&!s.targetPackId){T("Debes seleccionar un pack para preguntas y retos");return}g(!0),T(null);try{const C=await Cb(n.uid,s.title,s.content);if(!C.isValid){T(C.error||"Contenido no vlido"),g(!1);return}await JD(s,n.uid,n.displayName||"Usuario annimo"),e(),i()}catch(C){T(C.message||"Error al enviar la sugerencia")}finally{g(!1)}}},ge=Y=>{switch(Y){case er.Pack:return"Pack nuevo";case er.Question:return"Pregunta";case er.Dare:return"Reto";default:return Y}},ue=()=>{switch(s.type){case er.Pack:return"Describe tu idea para un nuevo pack: temtica, tipo de preguntas/retos, etc.";case er.Question:return"Escribe tu pregunta aqu...";case er.Dare:return"Describe el reto que propones...";default:return"Describe tu sugerencia..."}};return n?y.jsx("div",{className:"suggestion-form-overlay",children:y.jsxs("div",{className:"suggestion-form",children:[y.jsxs("div",{className:"suggestion-form-header",children:[y.jsxs("div",{children:[y.jsx("h2",{children:"Enviar Sugerencia"}),y.jsxs("p",{className:"accepted-count",children:["Sugerencias aprobadas: ",y.jsx("strong",{children:O})]})]}),y.jsx("button",{className:"close-button",onClick:i,children:""})]}),y.jsxs("form",{onSubmit:ie,children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Tipo de sugerencia:"}),y.jsx("div",{className:"type-selector",children:Object.values(er).map(Y=>y.jsx("button",{type:"button",className:`type-button ${s.type===Y?"active":""}`,onClick:()=>re(Y),children:ge(Y)},Y))})]}),s.type!==er.Pack&&y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"targetPack",children:"Pack de destino:"}),y.jsxs("select",{id:"targetPack",value:s.targetPackId||"",onChange:Y=>o(C=>({...C,targetPackId:Y.target.value||void 0})),required:!0,children:[y.jsx("option",{value:"",children:"Selecciona un pack"}),c.map(Y=>y.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"title",children:"Ttulo:"}),y.jsx("input",{type:"text",id:"title",value:s.title,onChange:Y=>o(C=>({...C,title:Y.target.value})),placeholder:`Ttulo de tu ${ge(s.type).toLowerCase()}`,maxLength:gt.MAX_TITLE_LENGTH,required:!0}),y.jsxs("small",{children:[s.title.length,"/",gt.MAX_TITLE_LENGTH," caracteres"]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"content",children:"Descripcin:"}),y.jsx("textarea",{id:"content",value:s.content,onChange:Y=>o(C=>({...C,content:Y.target.value})),placeholder:ue(),maxLength:gt.MAX_CONTENT_LENGTH,rows:6,required:!0}),y.jsxs("small",{children:[s.content.length,"/",gt.MAX_CONTENT_LENGTH," caracteres"]})]}),_&&y.jsx("div",{className:"error-message",children:_}),y.jsxs("div",{className:"form-actions",children:[y.jsx("button",{type:"button",className:"cancel-button",onClick:i,children:"Cancelar"}),y.jsx("button",{type:"submit",className:"submit-button",disabled:m||!A,children:m?"Enviando...":"Enviar Sugerencia"})]})]}),y.jsxs("div",{className:"suggestion-info",children:[y.jsx("h4",{children:"Informacin importante:"}),y.jsxs("ul",{children:[y.jsxs("li",{children:["Mximo ",gt.MAX_SUGGESTIONS_PER_DAY," sugerencias por da"]}),y.jsxs("li",{children:["Mximo ",gt.MAX_SUGGESTIONS_PER_WEEK," sugerencias por semana"]}),y.jsx("li",{children:"No podrs editar ni eliminar tu sugerencia una vez enviada"}),y.jsx("li",{children:"Recibirs notificaciones sobre el estado de tu sugerencia"})]})]})]})}):y.jsx("div",{className:"suggestion-form-overlay",children:y.jsxs("div",{className:"suggestion-form",children:[y.jsxs("div",{className:"suggestion-form-header",children:[y.jsx("h2",{children:"Iniciar sesin requerido"}),y.jsx("button",{className:"close-button",onClick:i,children:""})]}),y.jsx("p",{children:"Debes iniciar sesin para enviar sugerencias."}),y.jsx("button",{className:"cancel-button",onClick:i,children:"Cerrar"})]})})},rO=({onBack:i})=>{const{user:e}=va(),[n,s]=te.useState(null),[o,c]=te.useState(""),[d,m]=te.useState(null),[g,_]=te.useState(!1),[T,A]=te.useState(!1),[S,O]=te.useState(!0),[j,Q]=te.useState(""),[H,ae]=te.useState(""),[re,ie]=te.useState(0),[ge,ue]=te.useState(!1),[Y,C]=te.useState(null),[x,I]=te.useState([]);te.useEffect(()=>{P()},[e]);const P=async()=>{if(e!=null&&e.uid){O(!0);try{const[U,ne,se,ye]=await Promise.all([XD(e.uid),Ib(e.uid),nO(e.uid),Db(e.uid)]);s(U),ie(ne),C(se),I(ye)}catch(U){console.error("Error loading user data:",U),Q("Error al cargar datos del usuario")}finally{O(!1)}}},M=async U=>{if(!U.trim()){m(null);return}if(!(e!=null&&e.uid)){m({isValid:!1,message:"Error de autenticacin"});return}_(!0);try{const ne=await Rb(U,e.uid);m({isValid:ne.isValid,message:ne.isValid?`Cdigo vlido de ${ne.referrerName}`:ne.error||"Cdigo no vlido"})}catch{m({isValid:!1,message:"Error al validar cdigo"})}finally{_(!1)}},k=U=>{c(U.toUpperCase()),U.trim().length>=6?M(U):m(null)},R=async()=>{if(!(!(e!=null&&e.uid)||!o||!(d!=null&&d.isValid))){A(!0),Q(""),ae("");try{await YD(o,e.uid)?(ae("Cdigo de referido aplicado exitosamente!"),c(""),m(null),await P()):Q("Error al procesar el cdigo de referido")}catch{Q("Error al procesar el cdigo de referido")}finally{A(!1)}}},Ie=async()=>{if(n!=null&&n.referralCode)try{await navigator.clipboard.writeText(n.referralCode),ae("Cdigo copiado al portapapeles!"),setTimeout(()=>ae(""),3e3)}catch{Q("Error al copiar el cdigo")}},De=async()=>{try{await gb()}catch{Q("Error al cerrar sesin")}};return S?y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:y.jsx(Rn,{className:"w-full max-w-2xl p-8",children:y.jsxs("div",{className:"text-center text-white",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),y.jsx("p",{children:"Cargando perfil..."})]})})}):y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:[y.jsxs(Rn,{className:"w-full max-w-2xl p-8 space-y-6",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h1",{className:"text-3xl font-bold text-white",children:"Mi Perfil"}),y.jsx(Oe,{onClick:i,className:"bg-white/20 hover:bg-white/30 text-white",children:"Volver"})]}),j&&y.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:j}),H&&y.jsx("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:H}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h2",{className:"text-xl font-semibold text-white",children:"Informacin Personal"}),y.jsx(Oe,{onClick:De,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2",children:"Cerrar Sesin"})]}),y.jsxs("div",{className:"space-y-2 text-white/80",children:[y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Email:"})," ",e==null?void 0:e.email]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Nombre:"})," ",(e==null?void 0:e.displayName)||"No especificado"]})]})]}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mi Cdigo de Referido"}),y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx("div",{className:"flex-1",children:y.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Tu cdigo:"}),y.jsx("p",{className:"text-2xl font-bold text-white tracking-wider",children:(n==null?void 0:n.referralCode)||"Cargando..."})]})}),y.jsx(Oe,{onClick:Ie,className:"bg-blue-600 hover:bg-blue-700",disabled:!(n!=null&&n.referralCode),children:"Copiar"})]}),y.jsx("p",{className:"text-white/60 text-sm mt-2",children:"Comparte este cdigo con tus amigos para ganar referidos"})]}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mis Estadsticas"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[y.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-3xl font-bold text-white",children:(n==null?void 0:n.referralCount)||0}),y.jsx("p",{className:"text-white/60 text-sm",children:"Total de referidos"})]}),y.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-3xl font-bold text-green-400",children:re}),y.jsx("p",{className:"text-white/60 text-sm",children:"Sugerencias aceptadas"})]})]}),(n==null?void 0:n.referredUsers)&&n.referredUsers.length>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Usuarios Referidos"}),y.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:n.referredUsers.map((U,ne)=>y.jsxs("div",{className:"bg-white/10 rounded p-3 flex justify-between items-center",children:[y.jsx("span",{className:"text-white",children:U.name}),y.jsx("span",{className:"text-white/60 text-sm",children:U.joinedAt.toLocaleDateString()})]},U.id))})]})]}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Contribuir con Sugerencias"}),y.jsx("p",{className:"text-white/60 text-sm mb-4",children:"Tienes ideas para nuevos packs, preguntas o retos? Comprtelas con nosotros!"}),y.jsx(Oe,{onClick:()=>ue(!0),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:" Recomendar Pack/Pregunta/Reto"})]}),!(n!=null&&n.usedReferralCode)&&y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Usar Cdigo de Referido"}),y.jsx("p",{className:"text-white/60 text-sm mb-4",children:"Tienes un cdigo de referido? salo aqu para ayudar a un amigo."}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("input",{type:"text",value:o,onChange:U=>k(U.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${d===null?"border-white/20 focus:ring-white/50":d.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ingresa el cdigo de referido",maxLength:8}),g&&y.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando cdigo..."}),d&&y.jsx("p",{className:`text-sm mt-1 ${d.isValid?"text-green-400":"text-red-400"}`,children:d.message})]}),y.jsx(Oe,{onClick:R,disabled:!(d!=null&&d.isValid)||T,className:"w-full bg-green-600 hover:bg-green-700",children:T?"Procesando...":"Usar Cdigo"})]})]}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mis Sugerencias"}),Y&&y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[y.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-2xl font-bold text-white",children:Y.total}),y.jsx("p",{className:"text-white/60 text-sm",children:"Total"})]}),y.jsxs("div",{className:"bg-yellow-500/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-2xl font-bold text-yellow-300",children:Y.pending}),y.jsx("p",{className:"text-white/60 text-sm",children:"Pendientes"})]}),y.jsxs("div",{className:"bg-green-500/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-2xl font-bold text-green-300",children:Y.approved}),y.jsx("p",{className:"text-white/60 text-sm",children:"Aprobadas"})]}),y.jsxs("div",{className:"bg-red-500/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-2xl font-bold text-red-300",children:Y.rejected}),y.jsx("p",{className:"text-white/60 text-sm",children:"Rechazadas"})]})]}),x.length>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Sugerencias Recientes"}),y.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:x.slice(0,5).map(U=>y.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[y.jsxs("div",{className:"flex justify-between items-start mb-2",children:[y.jsx("h4",{className:"font-medium text-white truncate flex-1 mr-2",children:U.title}),y.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${U.status==="pending"?"bg-yellow-500/20 text-yellow-300":U.status==="approved"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:U.status==="pending"?"Pendiente":U.status==="approved"?"Aprobada":"Rechazada"})]}),y.jsx("p",{className:"text-white/60 text-sm line-clamp-2",children:U.content}),y.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-white/40",children:[y.jsx("span",{children:U.type==="question"?"Pregunta":"Reto"}),y.jsx("span",{children:U.createdAt.toLocaleDateString()})]})]},U.id))}),x.length>5&&y.jsxs("p",{className:"text-white/60 text-sm mt-3 text-center",children:["Y ",x.length-5," sugerencias ms..."]})]}),x.length===0&&Y&&y.jsxs("div",{className:"text-center py-8",children:[y.jsx("p",{className:"text-white/60",children:"An no has realizado ninguna sugerencia"}),y.jsx("p",{className:"text-white/40 text-sm mt-1",children:"Comparte tus ideas para mejorar el juego!"})]})]}),(n==null?void 0:n.usedReferralCode)&&y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Cdigo de Referido Usado"}),y.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[y.jsx("p",{className:"text-white/60 text-sm",children:"Ya has usado el cdigo:"}),y.jsx("p",{className:"text-xl font-bold text-white tracking-wider",children:n.usedReferralCode})]})]})]}),ge&&y.jsx(Ob,{isOpen:ge,onClose:()=>ue(!1)})]})},iO="incidents",sO=async i=>{try{return(await fd(ct(Me,iO),{...i,timestamp:Ze.fromDate(i.timestamp)})).id}catch(e){throw console.error("Error al reportar incidencia:",e),new Error("No se pudo reportar la incidencia")}},aO=({onClose:i})=>{const[e,n]=te.useState(""),[s,o]=te.useState(!1),[c,d]=te.useState(!1),{user:m}=va(),g=async _=>{if(_.preventDefault(),!(!e.trim()||!m)){o(!0);try{await sO({userId:m.uid,userEmail:m.email||"Sin email",description:e.trim(),timestamp:new Date,status:"pending"}),d(!0)}catch(T){console.error("Error al reportar incidencia:",T),alert("Error al enviar el reporte. Por favor, intntalo de nuevo.")}finally{o(!1)}}};return c?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[y.jsx("h2",{className:"text-xl font-bold mb-4 text-green-600",children:"Gracias!"}),y.jsx("p",{className:"text-gray-700 mb-6",children:"Muchas gracias por reportar la incidencia. El equipo de desarrollo la revisar y se pondr con ello."}),y.jsx(Oe,{onClick:i,className:"w-full bg-blue-500 hover:bg-blue-600 text-white",children:"Cerrar"})]})}):y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[y.jsx("h2",{className:"text-xl font-bold mb-4",children:"Reportar Incidencia"}),y.jsxs("form",{onSubmit:g,children:[y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Describe la incidencia:"}),y.jsx("textarea",{id:"description",value:e,onChange:_=>n(_.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"Describe el problema que has encontrado...",required:!0,disabled:s})]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx(Oe,{type:"button",onClick:i,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white",disabled:s,children:"Cancelar"}),y.jsx(Oe,{type:"submit",className:"flex-1 bg-red-500 hover:bg-red-600 text-white",disabled:s||!e.trim(),children:s?"Enviando...":"Reportar"})]})]})]})})},oO=()=>{const{user:i}=va(),[e,n]=te.useState($e.Setup);te.useEffect(()=>{i||n($e.Setup)},[i]);const[s,o]=te.useState([]),[c,d]=te.useState([]),[m,g]=te.useState([]),[_,T]=te.useState(0),[A,S]=te.useState({totalRounds:5}),[O,j]=te.useState({currentRound:1,playersCompletedInRound:0}),[Q,H]=te.useState({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),[ae,re]=te.useState({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),[ie,ge]=te.useState({isLoading:!0,error:null}),[ue,Y]=te.useState([]),[C,x]=te.useState(()=>{try{const de=window.localStorage.getItem("purchasedPacks");return de?JSON.parse(de):[]}catch(de){return console.error("Error reading from localStorage",de),[]}}),[I,P]=te.useState(!1),[M,k]=te.useState(null),[R,Ie]=te.useState(!1),[De,U]=te.useState(null),[ne,se]=te.useState([]),[ye,D]=te.useState([]),[Z,le]=te.useState([]),[oe,_e]=te.useState({changesCount:0,isAdLoading:!1,isAdPlaying:!1,lastChangedItem:void 0}),[Ne,Ae]=te.useState({totalChanges:0,adsWatched:0,lastChangeDate:void 0}),[Rt,nt]=te.useState(!1),[zn,nr]=te.useState(!1),[gr,Oi]=te.useState(!1),pr=te.useCallback(async de=>{try{const fe=await $D(de);D(fe)}catch(fe){console.error("Error loading referral unlocked packs:",fe),D([])}},[]),yr=te.useCallback(async de=>{try{const fe=await WD(de);le(fe)}catch(fe){console.error("Error loading suggestion unlocked packs:",fe),le([])}},[]);te.useEffect(()=>{(async()=>{try{const fe=await fp();Y(fe)}catch(fe){console.error("Error loading available packs:",fe)}})()},[]),te.useEffect(()=>{try{window.localStorage.setItem("purchasedPacks",JSON.stringify(C))}catch(de){console.error("Error writing to localStorage",de)}},[C,ye,Z]);const Fr=te.useCallback(async()=>{ge({isLoading:!0,error:null});try{const de=["base",...C.filter(dt=>dt!=="base"),...ye.filter(dt=>dt!=="base"&&!C.includes(dt)),...Z.filter(dt=>dt!=="base"&&!C.includes(dt)&&!ye.includes(dt))],fe=await GD(de);d(fe.questions),g(fe.dares),ge({isLoading:!1,error:null})}catch(de){console.error("Error loading game data:",de),ge({isLoading:!1,error:de instanceof Error?de.message:"Error desconocido"})}},[C,Z]);te.useEffect(()=>{Fr()},[Fr]);const Ea=()=>{if(s.length<2){alert("Se necesitan al menos 2 jugadores para empezar.");return}n($e.PackSelection)},En=()=>{n($e.RoundConfiguration)},Bo=()=>{n($e.Setup)},Is=()=>{n($e.Shop)},Gr=()=>{n($e.Login)},Qr=async de=>{if(n($e.Setup),de!=null&&de.uid)try{await vb(de.uid),pr(de.uid),yr(de.uid)}catch(fe){console.error("Error durante la migracin del usuario:",fe),pr(de.uid),yr(de.uid)}},Ho=te.useCallback(async()=>{const de={...Ne,totalChanges:Ne.totalChanges+1,lastChangeDate:new Date};if(_e(fe=>({...fe,changesCount:fe.changesCount+1})),Ae(de),i&&!i.isAnonymous)try{await TE(i.uid,de)}catch(fe){console.error("Error saving question change stats:",fe)}},[Ne,i]),Pi=te.useCallback(async()=>new Promise((de,fe)=>{_e(dt=>({...dt,isAdLoading:!0})),setTimeout(()=>{_e(dt=>({...dt,isAdLoading:!1,isAdPlaying:!0})),setTimeout(()=>{_e(Tn=>({...Tn,isAdPlaying:!1,changesCount:0}));const dt={...Ne,adsWatched:Ne.adsWatched+1};if(Ae(dt),i&&!i.isAnonymous)try{TE(i.uid,dt).catch(Tn=>{console.error("Error saving ad watched stats:",Tn)})}catch(Tn){console.error("Error saving ad watched stats:",Tn)}de()},3e3)},1e3)}),[Ne,i]),Cs=()=>{n($e.Setup)},Ta=de=>{const fe=ue.find(dt=>dt.id===de);fe&&(U(fe),Ie(!0))},ht=()=>{Ie(!1),U(null)},Ye=de=>{se(fe=>fe.includes(de)?fe:[...fe,de])},fn=async()=>{if(De)try{const de=await QD(De.id);if(de.questions.length===0&&de.dares.length===0){alert("Este pack no tiene contenido demo disponible.");return}P(!0),k(De.id),d(de.questions),g(de.dares),await KD(De.id),n($e.RoundConfiguration)}catch(de){console.error("Error starting demo:",de),alert("Error al cargar el demo. Intntalo de nuevo.")}},Bt=de=>{S(de),H({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:new Date,gameEndTime:null,roundStats:[]}),re({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),j({currentRound:1,playersCompletedInRound:0}),n($e.Game)},wa=()=>{const de=(_+1)%s.length;if(T(de),de===0){const fe=O.currentRound+1;fe>A.totalRounds?_r():(j({currentRound:fe,playersCompletedInRound:0}),re({roundNumber:fe,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}))}else j(fe=>({...fe,playersCompletedInRound:fe.playersCompletedInRound+1}))},Fo=()=>{const de={...ae,roundEndTime:new Date};H(fe=>({...fe,totalRounds:fe.totalRounds+1,roundStats:[...fe.roundStats,de]})),n($e.RoundEnd)},Kr=()=>{const de=O.currentRound+1;j({currentRound:de,playersCompletedInRound:0}),re({roundNumber:de,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),T(0),n($e.Game)},_r=()=>{H(de=>({...de,gameEndTime:new Date})),n($e.GameEnd)},Yr=()=>{const de=s[_];re(fe=>({...fe,questionsAsked:fe.questionsAsked+1,playersParticipated:fe.playersParticipated.includes(de)?fe.playersParticipated:[...fe.playersParticipated,de]})),H(fe=>({...fe,totalQuestions:fe.totalQuestions+1}))},In=()=>{const de=s[_];re(fe=>({...fe,daresCompleted:fe.daresCompleted+1,playersParticipated:fe.playersParticipated.includes(de)?fe.playersParticipated:[...fe.playersParticipated,de]})),H(fe=>({...fe,totalDares:fe.totalDares+1}))},Xr=te.useCallback(()=>{n($e.Setup),o([]),T(0),S({totalRounds:5}),j({currentRound:1,playersCompletedInRound:0}),H({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),re({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),P(!1),k(null),Ie(!1),U(null),se([])},[]),$r=de=>{C.includes(de)||x([...C,de])},Wr=()=>C.includes("no-ads"),Ns=()=>{nt(!1)},Ds=()=>{console.log("Sugerencia enviada exitosamente")},rr=()=>{nr(!0)},ir=()=>{nr(!1)},Os=()=>{n($e.Setup)},qn=()=>{switch(e){case $e.Setup:return y.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-900 bg-opacity-50 backdrop-blur-sm",children:y.jsxs("div",{className:"w-full max-w-md mx-auto animate-fade-in",children:[y.jsx("h1",{className:"text-5xl font-extrabold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Verdad o Reto"}),y.jsx("p",{className:"text-center text-gray-400 mb-8",children:"El juego para animar la fiesta"}),y.jsxs("div",{className:"space-y-6",children:[y.jsx(TS,{players:s,setPlayers:o}),ie.isLoading&&y.jsx(Rn,{className:"text-center text-gray-400",children:y.jsx("p",{children:"Cargando datos desde Firebase..."})}),ie.error&&y.jsxs(Rn,{className:"text-center text-red-400",children:[y.jsxs("p",{children:["Error de conexin: ",ie.error]}),y.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Verifica tu configuracin de Firebase"}),y.jsx(Oe,{onClick:Fr,className:"mt-4",variant:"secondary",children:"Reintentar"})]}),!ie.isLoading&&!ie.error&&y.jsxs("div",{className:"flex flex-col gap-4",children:[y.jsx(Oe,{onClick:Ea,className:"w-full text-lg",disabled:s.length<2||c.length===0||m.length===0,children:"Empezar a Jugar"}),y.jsxs(Oe,{onClick:()=>n($e.Shop),variant:"secondary",className:"w-full text-lg flex items-center justify-center gap-2",children:[y.jsx(yS,{className:"w-6 h-6"}),"Tienda de Paquetes"]}),i&&!i.isAnonymous?y.jsx(Oe,{onClick:()=>n($e.Profile),variant:"secondary",className:"w-full text-lg",children:"Mi Perfil"}):y.jsx(Oe,{onClick:Gr,variant:"secondary",className:"w-full text-lg",children:"Iniciar Sesin"}),i&&y.jsx(Oe,{onClick:rr,variant:"secondary",className:"w-full text-lg bg-red-600 hover:bg-red-700 text-white",children:"Reportar Incidencia"})]})]})]})});case $e.Login:return y.jsx(ZD,{onBack:Cs,onSuccess:Qr});case $e.Profile:return y.jsx(rO,{onBack:Os});case $e.Shop:return y.jsx(zD,{availablePacks:ue,purchasedPacks:C,onPurchase:$r,onBack:()=>n($e.Setup),onGoToLogin:Gr});case $e.PackSelection:return y.jsxs(y.Fragment,{children:[y.jsx(wS,{availablePacks:ue,purchasedPacks:C,adWatchedPacks:ne,referralUnlockedPacks:ye,suggestionUnlockedPacks:Z,onContinue:En,onBack:Bo,onGoToShop:Is,onPlayDemo:Ta}),y.jsx(VS,{pack:De,isOpen:R,onClose:ht,onStartDemo:fn,onAdWatched:Ye,hasNoAds:Wr()})]});case $e.RoundConfiguration:return y.jsx(jS,{onSelectRounds:de=>{Bt({totalRounds:de})},onBack:()=>n($e.PackSelection)});case $e.Game:return y.jsx(kS,{players:s,currentPlayerIndex:_,onNextPlayer:wa,onNewGame:Xr,questions:c,dares:m,roundConfig:A,gameProgress:O,onRoundEnd:Fo,onQuestionAsked:Yr,onDareCompleted:In,onQuestionChange:Ho,onAdRequired:Pi,questionChangeState:oe});case $e.RoundEnd:return y.jsx(LS,{roundStats:ae,currentRound:O.currentRound,totalRounds:A.totalRounds,onContinue:Kr,onEndGame:_r,hasNoAds:Wr()});case $e.GameEnd:return y.jsx(US,{gameStats:Q,players:s,onNewGame:Xr,onBackToMenu:()=>n($e.Setup),hasNoAds:Wr(),isDemoMode:I,demoPackId:M});default:return y.jsx("div",{children:"Error: Estado de juego desconocido."})}};return y.jsxs("main",{className:"relative min-h-screen bg-gray-900 overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-purple-900/30 via-transparent to-pink-900/30"}),y.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-96 h-96 bg-purple-600 rounded-full filter blur-3xl opacity-20 animate-blob"}),y.jsx("div",{className:"absolute bottom-[-10%] right-[5%] w-96 h-96 bg-pink-600 rounded-full filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),y.jsx("div",{className:"absolute top-[10%] right-[-15%] w-80 h-80 bg-cyan-600 rounded-full filter blur-3xl opacity-10 animate-blob animation-delay-4000"}),y.jsx("div",{className:"relative z-10",children:qn()}),y.jsx("style",{children:`
          .animate-blob {
            animation: blob 7s infinite;
          }
          .animation-delay-2000 {
            animation-delay: 2s;
          }
          .animation-delay-4000 {
            animation-delay: 4s;
          }
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
          }
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `}),Rt&&y.jsx(Ob,{onClose:Ns,onSuccess:Ds}),zn&&y.jsx(aO,{onClose:ir})]})},Pb=document.getElementById("root");if(!Pb)throw new Error("Could not find root element to mount to");const lO=gS.createRoot(Pb);lO.render(y.jsx(oS.StrictMode,{children:y.jsx(gD,{children:y.jsx(oO,{})})}));export{zv as A,IE as W};
