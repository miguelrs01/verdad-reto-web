(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function z0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Bd={exports:{}},Rl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function hA(){if(H_)return Rl;H_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Rl.Fragment=e,Rl.jsx=n,Rl.jsxs=n,Rl}var F_;function fA(){return F_||(F_=1,Bd.exports=hA()),Bd.exports}var E=fA(),qd={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function dA(){if(G_)return xe;G_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),I=Symbol.iterator;function R(O){return O===null||typeof O!="object"?null:(O=I&&O[I]||O["@@iterator"],typeof O=="function"?O:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,$={};function Q(O,J,re){this.props=O,this.context=J,this.refs=$,this.updater=re||j}Q.prototype.isReactComponent={},Q.prototype.setState=function(O,J){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,J,"setState")},Q.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function le(){}le.prototype=Q.prototype;function se(O,J,re){this.props=O,this.context=J,this.refs=$,this.updater=re||j}var ae=se.prototype=new le;ae.constructor=se,H(ae,Q.prototype),ae.isPureReactComponent=!0;var Te=Array.isArray,ye={H:null,A:null,T:null,S:null,V:null},_e=Object.prototype.hasOwnProperty;function N(O,J,re,ee,me,Ce){return re=Ce.ref,{$$typeof:i,type:O,key:J,ref:re!==void 0?re:null,props:Ce}}function A(O,J){return N(O.type,J,void 0,void 0,void 0,O.props)}function S(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function D(O){var J={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(re){return J[re]})}var P=/\/+/g;function M(O,J){return typeof O=="object"&&O!==null&&O.key!=null?D(""+O.key):J.toString(36)}function x(){}function Ge(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(x,x):(O.status="pending",O.then(function(J){O.status==="pending"&&(O.status="fulfilled",O.value=J)},function(J){O.status==="pending"&&(O.status="rejected",O.reason=J)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Be(O,J,re,ee,me){var Ce=typeof O;(Ce==="undefined"||Ce==="boolean")&&(O=null);var Ae=!1;if(O===null)Ae=!0;else switch(Ce){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(O.$$typeof){case i:case e:Ae=!0;break;case T:return Ae=O._init,Be(Ae(O._payload),J,re,ee,me)}}if(Ae)return me=me(O),Ae=ee===""?"."+M(O,0):ee,Te(me)?(re="",Ae!=null&&(re=Ae.replace(P,"$&/")+"/"),Be(me,J,re,"",function(vn){return vn})):me!=null&&(S(me)&&(me=A(me,re+(me.key==null||O&&O.key===me.key?"":(""+me.key).replace(P,"$&/")+"/")+Ae)),J.push(me)),1;Ae=0;var ge=ee===""?".":ee+":";if(Te(O))for(var ce=0;ce<O.length;ce++)ee=O[ce],Ce=ge+M(ee,ce),Ae+=Be(ee,J,re,Ce,me);else if(ce=R(O),typeof ce=="function")for(O=ce.call(O),ce=0;!(ee=O.next()).done;)ee=ee.value,Ce=ge+M(ee,ce++),Ae+=Be(ee,J,re,Ce,me);else if(Ce==="object"){if(typeof O.then=="function")return Be(Ge(O),J,re,ee,me);throw J=String(O),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function G(O,J,re){if(O==null)return O;var ee=[],me=0;return Be(O,ee,"","",function(Ce){return J.call(re,Ce,me++)}),ee}function ne(O){if(O._status===-1){var J=O._result;J=J(),J.then(function(re){(O._status===0||O._status===-1)&&(O._status=1,O._result=re)},function(re){(O._status===0||O._status===-1)&&(O._status=2,O._result=re)}),O._status===-1&&(O._status=0,O._result=J)}if(O._status===1)return O._result.default;throw O._result}var fe=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function qe(){}return xe.Children={map:G,forEach:function(O,J,re){G(O,function(){J.apply(this,arguments)},re)},count:function(O){var J=0;return G(O,function(){J++}),J},toArray:function(O){return G(O,function(J){return J})||[]},only:function(O){if(!S(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},xe.Component=Q,xe.Fragment=n,xe.Profiler=o,xe.PureComponent=se,xe.StrictMode=s,xe.Suspense=p,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ye,xe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return ye.H.useMemoCache(O)}},xe.cache=function(O){return function(){return O.apply(null,arguments)}},xe.cloneElement=function(O,J,re){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ee=H({},O.props),me=O.key,Ce=void 0;if(J!=null)for(Ae in J.ref!==void 0&&(Ce=void 0),J.key!==void 0&&(me=""+J.key),J)!_e.call(J,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&J.ref===void 0||(ee[Ae]=J[Ae]);var Ae=arguments.length-2;if(Ae===1)ee.children=re;else if(1<Ae){for(var ge=Array(Ae),ce=0;ce<Ae;ce++)ge[ce]=arguments[ce+2];ee.children=ge}return N(O.type,me,void 0,void 0,Ce,ee)},xe.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},xe.createElement=function(O,J,re){var ee,me={},Ce=null;if(J!=null)for(ee in J.key!==void 0&&(Ce=""+J.key),J)_e.call(J,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(me[ee]=J[ee]);var Ae=arguments.length-2;if(Ae===1)me.children=re;else if(1<Ae){for(var ge=Array(Ae),ce=0;ce<Ae;ce++)ge[ce]=arguments[ce+2];me.children=ge}if(O&&O.defaultProps)for(ee in Ae=O.defaultProps,Ae)me[ee]===void 0&&(me[ee]=Ae[ee]);return N(O,Ce,void 0,void 0,null,me)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(O){return{$$typeof:m,render:O}},xe.isValidElement=S,xe.lazy=function(O){return{$$typeof:T,_payload:{_status:-1,_result:O},_init:ne}},xe.memo=function(O,J){return{$$typeof:y,type:O,compare:J===void 0?null:J}},xe.startTransition=function(O){var J=ye.T,re={};ye.T=re;try{var ee=O(),me=ye.S;me!==null&&me(re,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(qe,fe)}catch(Ce){fe(Ce)}finally{ye.T=J}},xe.unstable_useCacheRefresh=function(){return ye.H.useCacheRefresh()},xe.use=function(O){return ye.H.use(O)},xe.useActionState=function(O,J,re){return ye.H.useActionState(O,J,re)},xe.useCallback=function(O,J){return ye.H.useCallback(O,J)},xe.useContext=function(O){return ye.H.useContext(O)},xe.useDebugValue=function(){},xe.useDeferredValue=function(O,J){return ye.H.useDeferredValue(O,J)},xe.useEffect=function(O,J,re){var ee=ye.H;if(typeof re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(O,J)},xe.useId=function(){return ye.H.useId()},xe.useImperativeHandle=function(O,J,re){return ye.H.useImperativeHandle(O,J,re)},xe.useInsertionEffect=function(O,J){return ye.H.useInsertionEffect(O,J)},xe.useLayoutEffect=function(O,J){return ye.H.useLayoutEffect(O,J)},xe.useMemo=function(O,J){return ye.H.useMemo(O,J)},xe.useOptimistic=function(O,J){return ye.H.useOptimistic(O,J)},xe.useReducer=function(O,J,re){return ye.H.useReducer(O,J,re)},xe.useRef=function(O){return ye.H.useRef(O)},xe.useState=function(O){return ye.H.useState(O)},xe.useSyncExternalStore=function(O,J,re){return ye.H.useSyncExternalStore(O,J,re)},xe.useTransition=function(){return ye.H.useTransition()},xe.version="19.1.1",xe}var Q_;function km(){return Q_||(Q_=1,qd.exports=dA()),qd.exports}var he=km();const mA=z0(he);var Hd={exports:{}},Il={},Fd={exports:{}},Gd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function gA(){return X_||(X_=1,(function(i){function e(G,ne){var fe=G.length;G.push(ne);e:for(;0<fe;){var qe=fe-1>>>1,O=G[qe];if(0<o(O,ne))G[qe]=ne,G[fe]=O,fe=qe;else break e}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var ne=G[0],fe=G.pop();if(fe!==ne){G[0]=fe;e:for(var qe=0,O=G.length,J=O>>>1;qe<J;){var re=2*(qe+1)-1,ee=G[re],me=re+1,Ce=G[me];if(0>o(ee,fe))me<O&&0>o(Ce,ee)?(G[qe]=Ce,G[me]=fe,qe=me):(G[qe]=ee,G[re]=fe,qe=re);else if(me<O&&0>o(Ce,fe))G[qe]=Ce,G[me]=fe,qe=me;else break e}}return ne}function o(G,ne){var fe=G.sortIndex-ne.sortIndex;return fe!==0?fe:G.id-ne.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var p=[],y=[],T=1,I=null,R=3,j=!1,H=!1,$=!1,Q=!1,le=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function Te(G){for(var ne=n(y);ne!==null;){if(ne.callback===null)s(y);else if(ne.startTime<=G)s(y),ne.sortIndex=ne.expirationTime,e(p,ne);else break;ne=n(y)}}function ye(G){if($=!1,Te(G),!H)if(n(p)!==null)H=!0,_e||(_e=!0,M());else{var ne=n(y);ne!==null&&Be(ye,ne.startTime-G)}}var _e=!1,N=-1,A=5,S=-1;function D(){return Q?!0:!(i.unstable_now()-S<A)}function P(){if(Q=!1,_e){var G=i.unstable_now();S=G;var ne=!0;try{e:{H=!1,$&&($=!1,se(N),N=-1),j=!0;var fe=R;try{t:{for(Te(G),I=n(p);I!==null&&!(I.expirationTime>G&&D());){var qe=I.callback;if(typeof qe=="function"){I.callback=null,R=I.priorityLevel;var O=qe(I.expirationTime<=G);if(G=i.unstable_now(),typeof O=="function"){I.callback=O,Te(G),ne=!0;break t}I===n(p)&&s(p),Te(G)}else s(p);I=n(p)}if(I!==null)ne=!0;else{var J=n(y);J!==null&&Be(ye,J.startTime-G),ne=!1}}break e}finally{I=null,R=fe,j=!1}ne=void 0}}finally{ne?M():_e=!1}}}var M;if(typeof ae=="function")M=function(){ae(P)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Ge=x.port2;x.port1.onmessage=P,M=function(){Ge.postMessage(null)}}else M=function(){le(P,0)};function Be(G,ne){N=le(function(){G(i.unstable_now())},ne)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return R},i.unstable_next=function(G){switch(R){case 1:case 2:case 3:var ne=3;break;default:ne=R}var fe=R;R=ne;try{return G()}finally{R=fe}},i.unstable_requestPaint=function(){Q=!0},i.unstable_runWithPriority=function(G,ne){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var fe=R;R=G;try{return ne()}finally{R=fe}},i.unstable_scheduleCallback=function(G,ne,fe){var qe=i.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?qe+fe:qe):fe=qe,G){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=fe+O,G={id:T++,callback:ne,priorityLevel:G,startTime:fe,expirationTime:O,sortIndex:-1},fe>qe?(G.sortIndex=fe,e(y,G),n(p)===null&&G===n(y)&&($?(se(N),N=-1):$=!0,Be(ye,fe-qe))):(G.sortIndex=O,e(p,G),H||j||(H=!0,_e||(_e=!0,M()))),G},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(G){var ne=R;return function(){var fe=R;R=ne;try{return G.apply(this,arguments)}finally{R=fe}}}})(Gd)),Gd}var K_;function pA(){return K_||(K_=1,Fd.exports=gA()),Fd.exports}var Qd={exports:{}},Yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function yA(){if(Y_)return Yt;Y_=1;var i=km();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,T){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:I==null?null:""+I,children:p,containerInfo:y,implementation:T}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Yt.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,T)},Yt.flushSync=function(p){var y=f.T,T=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=y,s.p=T,s.d.f()}},Yt.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Yt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Yt.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var T=y.as,I=m(T,y.crossOrigin),R=typeof y.integrity=="string"?y.integrity:void 0,j=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:I,integrity:R,fetchPriority:j}):T==="script"&&s.d.X(p,{crossOrigin:I,integrity:R,fetchPriority:j,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Yt.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=m(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Yt.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,I=m(T,y.crossOrigin);s.d.L(p,T,{crossOrigin:I,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Yt.preloadModule=function(p,y){if(typeof p=="string")if(y){var T=m(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Yt.requestFormReset=function(p){s.d.r(p)},Yt.unstable_batchedUpdates=function(p,y){return p(y)},Yt.useFormState=function(p,y,T){return f.H.useFormState(p,y,T)},Yt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Yt.version="19.1.1",Yt}var $_;function _A(){if($_)return Qd.exports;$_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Qd.exports=yA(),Qd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function vA(){if(W_)return Il;W_=1;var i=pA(),e=km(),n=_A();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function f(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,w=h.child;w;){if(w===a){v=!0,a=h,l=d;break}if(w===l){v=!0,l=h,a=d;break}w=w.sibling}if(!v){for(w=d.child;w;){if(w===a){v=!0,a=d,l=h;break}if(w===l){v=!0,l=d,a=h;break}w=w.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function y(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=y(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),le=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),Te=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=P&&t[P]||t["@@iterator"],typeof t=="function"?t:null)}var x=Symbol.for("react.client.reference");function Ge(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===x?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case H:return"Fragment";case Q:return"Profiler";case $:return"StrictMode";case ye:return"Suspense";case _e:return"SuspenseList";case S:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case j:return"Portal";case ae:return(t.displayName||"Context")+".Provider";case se:return(t._context.displayName||"Context")+".Consumer";case Te:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return r=t.displayName||null,r!==null?r:Ge(t.type)||"Memo";case A:r=t._payload,t=t._init;try{return Ge(t(r))}catch{}}return null}var Be=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},qe=[],O=-1;function J(t){return{current:t}}function re(t){0>O||(t.current=qe[O],qe[O]=null,O--)}function ee(t,r){O++,qe[O]=t.current,t.current=r}var me=J(null),Ce=J(null),Ae=J(null),ge=J(null);function ce(t,r){switch(ee(Ae,r),ee(Ce,t),ee(me,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?y_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=y_(r),t=__(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}re(me),ee(me,t)}function vn(){re(me),re(Ce),re(Ae)}function si(t){t.memoizedState!==null&&ee(ge,t);var r=me.current,a=__(r,t.type);r!==a&&(ee(Ce,t),ee(me,a))}function Tr(t){Ce.current===t&&(re(me),re(Ce)),ge.current===t&&(re(ge),Tl._currentValue=fe)}var Wi=Object.prototype.hasOwnProperty,Zi=i.unstable_scheduleCallback,Ji=i.unstable_cancelCallback,_o=i.unstable_shouldYield,hu=i.unstable_requestPaint,En=i.unstable_now,zh=i.unstable_getCurrentPriorityLevel,vo=i.unstable_ImmediatePriority,Ys=i.unstable_UserBlockingPriority,es=i.unstable_NormalPriority,Bh=i.unstable_LowPriority,$s=i.unstable_IdlePriority,Eo=i.log,fu=i.unstable_setDisableYieldValue,ht=null,Ke=null;function cn(t){if(typeof Eo=="function"&&fu(t),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(ht,t)}catch{}}var Xt=Math.clz32?Math.clz32:ts,du=Math.log,qh=Math.LN2;function ts(t){return t>>>=0,t===0?32:31-(du(t)/qh|0)|0}var ns=256,rs=4194304;function kn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ws(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~d,l!==0?h=kn(l):(v&=w,v!==0?h=kn(v):a||(a=w&~t,a!==0&&(h=kn(a))))):(w=l&~d,w!==0?h=kn(w):v!==0?h=kn(v):a||(a=l&~t,a!==0&&(h=kn(a)))),h===0?0:r!==0&&r!==h&&(r&d)===0&&(d=h&-h,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:h}function is(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function To(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wo(){var t=ns;return ns<<=1,(ns&4194048)===0&&(ns=256),t}function bo(){var t=rs;return rs<<=1,(rs&62914560)===0&&(rs=4194304),t}function wr(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function br(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ao(t,r,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,C=t.expirationTimes,z=t.hiddenUpdates;for(a=v&~a;0<a;){var X=31-Xt(a),W=1<<X;w[X]=0,C[X]=-1;var B=z[X];if(B!==null)for(z[X]=null,X=0;X<B.length;X++){var q=B[X];q!==null&&(q.lane&=-536870913)}a&=~W}l!==0&&Yn(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~r))}function Yn(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Xt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function So(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Xt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function ai(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Zs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function oi(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:L_(t.type))}function mu(t,r){var a=ne.p;try{return ne.p=t,r()}finally{ne.p=a}}var ot=Math.random().toString(36).slice(2),St="__reactFiber$"+ot,_t="__reactProps$"+ot,Tn="__reactContainer$"+ot,Ro="__reactEvents$"+ot,Hh="__reactListeners$"+ot,li="__reactHandles$"+ot,gu="__reactResources$"+ot,ss="__reactMarker$"+ot;function ui(t){delete t[St],delete t[_t],delete t[Ro],delete t[Hh],delete t[li]}function Ar(t){var r=t[St];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Tn]||a[St]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=w_(t);t!==null;){if(a=t[St])return a;t=w_(t)}return r}t=a,a=t.parentNode}return null}function $n(t){if(t=t[St]||t[Tn]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Wn(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function en(t){var r=t[gu];return r||(r=t[gu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function mt(t){t[ss]=!0}var Io=new Set,Js={};function Ln(t,r){Sr(t,r),Sr(t+"Capture",r)}function Sr(t,r){for(Js[t]=r,t=0;t<r.length;t++)Io.add(r[t])}var pu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yu={},as={};function _u(t){return Wi.call(as,t)?!0:Wi.call(yu,t)?!1:pu.test(t)?as[t]=!0:(yu[t]=!0,!1)}function ci(t,r,a){if(_u(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Zn(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Ut(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var os,vu;function Rr(t){if(os===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);os=r&&r[1]||"",vu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+os+t+vu}var ea=!1;function ta(t,r){if(!t||ea)return"";ea=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(q){var B=q}Reflect.construct(t,[],W)}else{try{W.call()}catch(q){B=q}t.call(W.prototype)}}else{try{throw Error()}catch(q){B=q}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(q){if(q&&B&&typeof q.stack=="string")return[q.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],w=d[1];if(v&&w){var C=v.split(`
`),z=w.split(`
`);for(h=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(l===C.length||h===z.length)for(l=C.length-1,h=z.length-1;1<=l&&0<=h&&C[l]!==z[h];)h--;for(;1<=l&&0<=h;l--,h--)if(C[l]!==z[h]){if(l!==1||h!==1)do if(l--,h--,0>h||C[l]!==z[h]){var X=`
`+C[l].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=l&&0<=h);break}}}finally{ea=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Rr(a):""}function xo(t){switch(t.tag){case 26:case 27:case 5:return Rr(t.type);case 16:return Rr("Lazy");case 13:return Rr("Suspense");case 19:return Rr("SuspenseList");case 0:case 15:return ta(t.type,!1);case 11:return ta(t.type.render,!1);case 1:return ta(t.type,!0);case 31:return Rr("Activity");default:return""}}function na(t){try{var r="";do r+=xo(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function tn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Co(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Fh(t){var r=Co(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function ra(t){t._valueTracker||(t._valueTracker=Fh(t))}function No(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Co(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function ls(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Gh=/[\n"\\]/g;function vt(t){return t.replace(Gh,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function hn(t,r,a,l,h,d,v,w){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),r!=null?v==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+tn(r)):t.value!==""+tn(r)&&(t.value=""+tn(r)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),r!=null?hi(t,v,tn(r)):a!=null?hi(t,v,tn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+tn(w):t.removeAttribute("name")}function us(t,r,a,l,h,d,v,w){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null))return;a=a!=null?""+tn(a):"",r=r!=null?""+tn(r):a,w||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function hi(t,r,a){r==="number"&&ls(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ir(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+tn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function We(t,r,a){if(r!=null&&(r=""+tn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+tn(a):""}function cs(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Be(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=tn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function wn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var hs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Eu(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||hs.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Do(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&Eu(t,h,l)}else for(var d in r)r.hasOwnProperty(d)&&Eu(t,d,r[d])}function Oo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ia(t){return Xh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var xr=null;function bn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cr=null,Nr=null;function Po(t){var r=$n(t);if(r&&(t=r.stateNode)){var a=t[_t]||null;e:switch(t=r.stateNode,r.type){case"input":if(hn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+vt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[_t]||null;if(!h)throw Error(s(90));hn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&No(l)}break e;case"textarea":We(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ir(t,!!a.multiple,r,!1)}}}var Jn=!1;function Tu(t,r,a){if(Jn)return t(r,a);Jn=!0;try{var l=t(r);return l}finally{if(Jn=!1,(Cr!==null||Nr!==null)&&(mc(),Cr&&(r=Cr,t=Nr,Nr=Cr=null,Po(r),t)))for(r=0;r<t.length;r++)Po(t[r])}}function fs(t,r){var a=t.stateNode;if(a===null)return null;var l=a[_t]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),An=!1;if(Un)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){An=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{An=!1}var er=null,fi=null,Dr=null;function Vo(){if(Dr)return Dr;var t,r=fi,a=r.length,l,h="value"in er?er.value:er.textContent,d=h.length;for(t=0;t<a&&r[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&r[a-l]===h[d-l];l++);return Dr=h.slice(t,1<l?1-l:void 0)}function tr(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function nr(){return!0}function Mo(){return!1}function Ot(t){function r(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(d):d[w]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?nr:Mo,this.isPropagationStopped=Mo,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=nr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=nr)},persist:function(){},isPersistent:nr}),r}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sa=Ot(Qe),ms=T({},Qe,{view:0,detail:0}),wu=Ot(ms),aa,oa,rr,gs=T({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_s,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rr&&(rr&&t.type==="mousemove"?(aa=t.screenX-rr.screenX,oa=t.screenY-rr.screenY):oa=aa=0,rr=t),aa)},movementY:function(t){return"movementY"in t?t.movementY:oa}}),Sn=Ot(gs),bu=T({},gs,{dataTransfer:0}),Kh=Ot(bu),ps=T({},ms,{relatedTarget:0}),la=Ot(ps),ko=T({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),ua=Ot(ko),Au=T({},Qe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ca=Ot(Au),Yh=T({},Qe,{data:0}),Lo=Ot(Yh),ys={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Su={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ru={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uo(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ru[t])?!!r[t]:!1}function _s(){return Uo}var Iu=T({},ms,{key:function(t){if(t.key){var r=ys[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=tr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Su[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_s,charCode:function(t){return t.type==="keypress"?tr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ha=Ot(Iu),xu=T({},gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jo=Ot(xu),Or=T({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_s}),Cu=Ot(Or),Nu=T({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Du=Ot(Nu),Ou=T({},gs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fa=Ot(Ou),nn=T({},Qe,{newState:0,oldState:0}),Pu=Ot(nn),Vu=[9,13,27,32],ir=Un&&"CompositionEvent"in window,c=null;Un&&"documentMode"in document&&(c=document.documentMode);var g=Un&&"TextEvent"in window&&!c,_=Un&&(!ir||c&&8<c&&11>=c),b=" ",L=!1;function F(t,r){switch(t){case"keyup":return Vu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function te(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Le=!1;function Rt(t,r){switch(t){case"compositionend":return te(r);case"keypress":return r.which!==32?null:(L=!0,b);case"textInput":return t=r.data,t===b&&L?null:t;default:return null}}function Ue(t,r){if(Le)return t==="compositionend"||!ir&&F(t,r)?(t=Vo(),Dr=fi=er=null,Le=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _&&r.locale!=="ko"?null:r.data;default:return null}}var Pt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function It(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Pt[t.type]:r==="textarea"}function Pr(t,r,a,l){Cr?Nr?Nr.push(l):Nr=[l]:Cr=l,r=Ec(r,"onChange"),0<r.length&&(a=new sa("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var jt=null,sr=null;function zo(t){f_(t,0)}function Mu(t){var r=Wn(t);if(No(r))return t}function Pg(t,r){if(t==="change")return r}var Vg=!1;if(Un){var $h;if(Un){var Wh="oninput"in document;if(!Wh){var Mg=document.createElement("div");Mg.setAttribute("oninput","return;"),Wh=typeof Mg.oninput=="function"}$h=Wh}else $h=!1;Vg=$h&&(!document.documentMode||9<document.documentMode)}function kg(){jt&&(jt.detachEvent("onpropertychange",Lg),sr=jt=null)}function Lg(t){if(t.propertyName==="value"&&Mu(sr)){var r=[];Pr(r,sr,t,bn(t)),Tu(zo,r)}}function Bw(t,r,a){t==="focusin"?(kg(),jt=r,sr=a,jt.attachEvent("onpropertychange",Lg)):t==="focusout"&&kg()}function qw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mu(sr)}function Hw(t,r){if(t==="click")return Mu(r)}function Fw(t,r){if(t==="input"||t==="change")return Mu(r)}function Gw(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var fn=typeof Object.is=="function"?Object.is:Gw;function Bo(t,r){if(fn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Wi.call(r,h)||!fn(t[h],r[h]))return!1}return!0}function Ug(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jg(t,r){var a=Ug(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ug(a)}}function zg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?zg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Bg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=ls(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=ls(t.document)}return r}function Zh(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Qw=Un&&"documentMode"in document&&11>=document.documentMode,da=null,Jh=null,qo=null,ef=!1;function qg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ef||da==null||da!==ls(l)||(l=da,"selectionStart"in l&&Zh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),qo&&Bo(qo,l)||(qo=l,l=Ec(Jh,"onSelect"),0<l.length&&(r=new sa("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=da)))}function vs(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var ma={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionrun:vs("Transition","TransitionRun"),transitionstart:vs("Transition","TransitionStart"),transitioncancel:vs("Transition","TransitionCancel"),transitionend:vs("Transition","TransitionEnd")},tf={},Hg={};Un&&(Hg=document.createElement("div").style,"AnimationEvent"in window||(delete ma.animationend.animation,delete ma.animationiteration.animation,delete ma.animationstart.animation),"TransitionEvent"in window||delete ma.transitionend.transition);function Es(t){if(tf[t])return tf[t];if(!ma[t])return t;var r=ma[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Hg)return tf[t]=r[a];return t}var Fg=Es("animationend"),Gg=Es("animationiteration"),Qg=Es("animationstart"),Xw=Es("transitionrun"),Kw=Es("transitionstart"),Yw=Es("transitioncancel"),Xg=Es("transitionend"),Kg=new Map,nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nf.push("scrollEnd");function jn(t,r){Kg.set(t,r),Ln(r,[t])}var Yg=new WeakMap;function Rn(t,r){if(typeof t=="object"&&t!==null){var a=Yg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:na(r)},Yg.set(t,r),r)}return{value:t,source:r,stack:na(r)}}var In=[],ga=0,rf=0;function ku(){for(var t=ga,r=rf=ga=0;r<t;){var a=In[r];In[r++]=null;var l=In[r];In[r++]=null;var h=In[r];In[r++]=null;var d=In[r];if(In[r++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&$g(a,h,d)}}function Lu(t,r,a,l){In[ga++]=t,In[ga++]=r,In[ga++]=a,In[ga++]=l,rf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function sf(t,r,a,l){return Lu(t,r,a,l),Uu(t)}function pa(t,r){return Lu(t,null,null,r),Uu(t)}function $g(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&r!==null&&(h=31-Xt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),d):null}function Uu(t){if(50<dl)throw dl=0,hd=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var ya={};function $w(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(t,r,a,l){return new $w(t,r,a,l)}function af(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vr(t,r){var a=t.alternate;return a===null?(a=dn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Wg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function ju(t,r,a,l,h,d){var v=0;if(l=t,typeof t=="function")af(t)&&(v=1);else if(typeof t=="string")v=Zb(t,a,me.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case S:return t=dn(31,a,r,h),t.elementType=S,t.lanes=d,t;case H:return Ts(a.children,h,d,r);case $:v=8,h|=24;break;case Q:return t=dn(12,a,r,h|2),t.elementType=Q,t.lanes=d,t;case ye:return t=dn(13,a,r,h),t.elementType=ye,t.lanes=d,t;case _e:return t=dn(19,a,r,h),t.elementType=_e,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case le:case ae:v=10;break e;case se:v=9;break e;case Te:v=11;break e;case N:v=14;break e;case A:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=dn(v,a,r,h),r.elementType=t,r.type=l,r.lanes=d,r}function Ts(t,r,a,l){return t=dn(7,t,l,r),t.lanes=a,t}function of(t,r,a){return t=dn(6,t,null,r),t.lanes=a,t}function lf(t,r,a){return r=dn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var _a=[],va=0,zu=null,Bu=0,xn=[],Cn=0,ws=null,Mr=1,kr="";function bs(t,r){_a[va++]=Bu,_a[va++]=zu,zu=t,Bu=r}function Zg(t,r,a){xn[Cn++]=Mr,xn[Cn++]=kr,xn[Cn++]=ws,ws=t;var l=Mr;t=kr;var h=32-Xt(l)-1;l&=~(1<<h),a+=1;var d=32-Xt(r)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Mr=1<<32-Xt(r)+h|a<<h|l,kr=d+t}else Mr=1<<d|a<<h|l,kr=t}function uf(t){t.return!==null&&(bs(t,1),Zg(t,1,0))}function cf(t){for(;t===zu;)zu=_a[--va],_a[va]=null,Bu=_a[--va],_a[va]=null;for(;t===ws;)ws=xn[--Cn],xn[Cn]=null,kr=xn[--Cn],xn[Cn]=null,Mr=xn[--Cn],xn[Cn]=null}var rn=null,ft=null,Fe=!1,As=null,ar=!1,hf=Error(s(519));function Ss(t){var r=Error(s(418,""));throw Go(Rn(r,t)),hf}function Jg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[St]=t,r[_t]=l,a){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(a=0;a<gl.length;a++)Pe(gl[a],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":Pe("invalid",r),us(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ra(r);break;case"select":Pe("invalid",r);break;case"textarea":Pe("invalid",r),cs(r,l.value,l.defaultValue,l.children),ra(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||p_(r.textContent,a)?(l.popover!=null&&(Pe("beforetoggle",r),Pe("toggle",r)),l.onScroll!=null&&Pe("scroll",r),l.onScrollEnd!=null&&Pe("scrollend",r),l.onClick!=null&&(r.onclick=Tc),r=!0):r=!1,r||Ss(t)}function ep(t){for(rn=t.return;rn;)switch(rn.tag){case 5:case 13:ar=!1;return;case 27:case 3:ar=!0;return;default:rn=rn.return}}function Ho(t){if(t!==rn)return!1;if(!Fe)return ep(t),Fe=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Id(t.type,t.memoizedProps)),a=!a),a&&ft&&Ss(t),ep(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){ft=Bn(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}ft=null}}else r===27?(r=ft,xi(t.type)?(t=Dd,Dd=null,ft=t):ft=r):ft=rn?Bn(t.stateNode.nextSibling):null;return!0}function Fo(){ft=rn=null,Fe=!1}function tp(){var t=As;return t!==null&&(on===null?on=t:on.push.apply(on,t),As=null),t}function Go(t){As===null?As=[t]:As.push(t)}var ff=J(null),Rs=null,Lr=null;function di(t,r,a){ee(ff,r._currentValue),r._currentValue=a}function Ur(t){t._currentValue=ff.current,re(ff)}function df(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function mf(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var w=d;d=h;for(var C=0;C<r.length;C++)if(w.context===r[C]){d.lanes|=a,w=d.alternate,w!==null&&(w.lanes|=a),df(d.return,a,t),l||(v=null);break e}d=w.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),df(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Qo(t,r,a,l){t=null;for(var h=r,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var w=h.type;fn(h.pendingProps.value,v.value)||(t!==null?t.push(w):t=[w])}}else if(h===ge.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Tl):t=[Tl])}h=h.return}t!==null&&mf(r,t,a,l),r.flags|=262144}function qu(t){for(t=t.firstContext;t!==null;){if(!fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Is(t){Rs=t,Lr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Kt(t){return np(Rs,t)}function Hu(t,r){return Rs===null&&Is(t),np(t,r)}function np(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Lr===null){if(t===null)throw Error(s(308));Lr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Lr=Lr.next=r;return a}var Ww=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},Zw=i.unstable_scheduleCallback,Jw=i.unstable_NormalPriority,xt={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gf(){return{controller:new Ww,data:new Map,refCount:0}}function Xo(t){t.refCount--,t.refCount===0&&Zw(Jw,function(){t.controller.abort()})}var Ko=null,pf=0,Ea=0,Ta=null;function eb(t,r){if(Ko===null){var a=Ko=[];pf=0,Ea=_d(),Ta={status:"pending",value:void 0,then:function(l){a.push(l)}}}return pf++,r.then(rp,rp),r}function rp(){if(--pf===0&&Ko!==null){Ta!==null&&(Ta.status="fulfilled");var t=Ko;Ko=null,Ea=0,Ta=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function tb(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var ip=G.S;G.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&eb(t,r),ip!==null&&ip(t,r)};var xs=J(null);function yf(){var t=xs.current;return t!==null?t:rt.pooledCache}function Fu(t,r){r===null?ee(xs,xs.current):ee(xs,r.pool)}function sp(){var t=yf();return t===null?null:{parent:xt._currentValue,pool:t}}var Yo=Error(s(460)),ap=Error(s(474)),Gu=Error(s(542)),_f={then:function(){}};function op(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Qu(){}function lp(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(Qu,Qu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,cp(t),t;default:if(typeof r.status=="string")r.then(Qu,Qu);else{if(t=rt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,cp(t),t}throw $o=r,Yo}}var $o=null;function up(){if($o===null)throw Error(s(459));var t=$o;return $o=null,t}function cp(t){if(t===Yo||t===Gu)throw Error(s(483))}var mi=!1;function vf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ef(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function gi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pi(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ye&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=Uu(t),$g(t,null,a),r}return Lu(t,l,r,a),Uu(t)}function Wo(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,So(t,a)}}function Tf(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=r:d=d.next=r}else h=d=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var wf=!1;function Zo(){if(wf){var t=Ta;if(t!==null)throw t}}function Jo(t,r,a,l){wf=!1;var h=t.updateQueue;mi=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var C=w,z=C.next;C.next=null,v===null?d=z:v.next=z,v=C;var X=t.alternate;X!==null&&(X=X.updateQueue,w=X.lastBaseUpdate,w!==v&&(w===null?X.firstBaseUpdate=z:w.next=z,X.lastBaseUpdate=C))}if(d!==null){var W=h.baseState;v=0,X=z=C=null,w=d;do{var B=w.lane&-536870913,q=B!==w.lane;if(q?(je&B)===B:(l&B)===B){B!==0&&B===Ea&&(wf=!0),X!==null&&(X=X.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Se=t,ve=w;B=r;var et=a;switch(ve.tag){case 1:if(Se=ve.payload,typeof Se=="function"){W=Se.call(et,W,B);break e}W=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=ve.payload,B=typeof Se=="function"?Se.call(et,W,B):Se,B==null)break e;W=T({},W,B);break e;case 2:mi=!0}}B=w.callback,B!==null&&(t.flags|=64,q&&(t.flags|=8192),q=h.callbacks,q===null?h.callbacks=[B]:q.push(B))}else q={lane:B,tag:w.tag,payload:w.payload,callback:w.callback,next:null},X===null?(z=X=q,C=W):X=X.next=q,v|=B;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;q=w,w=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);X===null&&(C=W),h.baseState=C,h.firstBaseUpdate=z,h.lastBaseUpdate=X,d===null&&(h.shared.lanes=0),Ai|=v,t.lanes=v,t.memoizedState=W}}function hp(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function fp(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)hp(a[t],r)}var wa=J(null),Xu=J(0);function dp(t,r){t=Gr,ee(Xu,t),ee(wa,r),Gr=t|r.baseLanes}function bf(){ee(Xu,Gr),ee(wa,wa.current)}function Af(){Gr=Xu.current,re(wa),re(Xu)}var yi=0,Ne=null,Ze=null,Et=null,Ku=!1,ba=!1,Cs=!1,Yu=0,el=0,Aa=null,nb=0;function gt(){throw Error(s(321))}function Sf(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!fn(t[a],r[a]))return!1;return!0}function Rf(t,r,a,l,h,d){return yi=d,Ne=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,G.H=t===null||t.memoizedState===null?$p:Wp,Cs=!1,d=a(l,h),Cs=!1,ba&&(d=gp(r,a,l,h)),mp(t),d}function mp(t){G.H=tc;var r=Ze!==null&&Ze.next!==null;if(yi=0,Et=Ze=Ne=null,Ku=!1,el=0,Aa=null,r)throw Error(s(300));t===null||Vt||(t=t.dependencies,t!==null&&qu(t)&&(Vt=!0))}function gp(t,r,a,l){Ne=t;var h=0;do{if(ba&&(Aa=null),el=0,ba=!1,25<=h)throw Error(s(301));if(h+=1,Et=Ze=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}G.H=ub,d=r(a,l)}while(ba);return d}function rb(){var t=G.H,r=t.useState()[0];return r=typeof r.then=="function"?tl(r):r,t=t.useState()[0],(Ze!==null?Ze.memoizedState:null)!==t&&(Ne.flags|=1024),r}function If(){var t=Yu!==0;return Yu=0,t}function xf(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Cf(t){if(Ku){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Ku=!1}yi=0,Et=Ze=Ne=null,ba=!1,el=Yu=0,Aa=null}function sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ne.memoizedState=Et=t:Et=Et.next=t,Et}function Tt(){if(Ze===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var r=Et===null?Ne.memoizedState:Et.next;if(r!==null)Et=r,Ze=t;else{if(t===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Et===null?Ne.memoizedState=Et=t:Et=Et.next=t}return Et}function Nf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tl(t){var r=el;return el+=1,Aa===null&&(Aa=[]),t=lp(Aa,t,r),r=Ne,(Et===null?r.memoizedState:Et.next)===null&&(r=r.alternate,G.H=r===null||r.memoizedState===null?$p:Wp),t}function $u(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return tl(t);if(t.$$typeof===ae)return Kt(t)}throw Error(s(438,String(t)))}function Df(t){var r=null,a=Ne.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ne.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Nf(),Ne.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=D;return r.index++,a}function jr(t,r){return typeof r=="function"?r(t):r}function Wu(t){var r=Tt();return Of(r,Ze,t)}function Of(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}r.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{r=h.next;var w=v=null,C=null,z=r,X=!1;do{var W=z.lane&-536870913;if(W!==z.lane?(je&W)===W:(yi&W)===W){var B=z.revertLane;if(B===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),W===Ea&&(X=!0);else if((yi&B)===B){z=z.next,B===Ea&&(X=!0);continue}else W={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},C===null?(w=C=W,v=d):C=C.next=W,Ne.lanes|=B,Ai|=B;W=z.action,Cs&&a(d,W),d=z.hasEagerState?z.eagerState:a(d,W)}else B={lane:W,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},C===null?(w=C=B,v=d):C=C.next=B,Ne.lanes|=W,Ai|=W;z=z.next}while(z!==null&&z!==r);if(C===null?v=d:C.next=w,!fn(d,t.memoizedState)&&(Vt=!0,X&&(a=Ta,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=C,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Pf(t){var r=Tt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=r.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);fn(d,r.memoizedState)||(Vt=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function pp(t,r,a){var l=Ne,h=Tt(),d=Fe;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var v=!fn((Ze||h).memoizedState,a);v&&(h.memoizedState=a,Vt=!0),h=h.queue;var w=vp.bind(null,l,h,t);if(nl(2048,8,w,[t]),h.getSnapshot!==r||v||Et!==null&&Et.memoizedState.tag&1){if(l.flags|=2048,Sa(9,Zu(),_p.bind(null,l,h,a,r),null),rt===null)throw Error(s(349));d||(yi&124)!==0||yp(l,r,a)}return a}function yp(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Ne.updateQueue,r===null?(r=Nf(),Ne.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function _p(t,r,a,l){r.value=a,r.getSnapshot=l,Ep(r)&&Tp(t)}function vp(t,r,a){return a(function(){Ep(r)&&Tp(t)})}function Ep(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!fn(t,a)}catch{return!0}}function Tp(t){var r=pa(t,2);r!==null&&_n(r,t,2)}function Vf(t){var r=sn();if(typeof t=="function"){var a=t;if(t=a(),Cs){cn(!0);try{a()}finally{cn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:t},r}function wp(t,r,a,l){return t.baseState=a,Of(t,Ze,typeof l=="function"?l:jr)}function ib(t,r,a,l,h){if(ec(t))throw Error(s(485));if(t=r.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};G.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,bp(r,d)):(d.next=a.next,r.pending=a.next=d)}}function bp(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var d=G.T,v={};G.T=v;try{var w=a(h,l),C=G.S;C!==null&&C(v,w),Ap(t,r,w)}catch(z){Mf(t,r,z)}finally{G.T=d}}else try{d=a(h,l),Ap(t,r,d)}catch(z){Mf(t,r,z)}}function Ap(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Sp(t,r,l)},function(l){return Mf(t,r,l)}):Sp(t,r,a)}function Sp(t,r,a){r.status="fulfilled",r.value=a,Rp(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,bp(t,a)))}function Mf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Rp(r),r=r.next;while(r!==l)}t.action=null}function Rp(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Ip(t,r){return r}function xp(t,r){if(Fe){var a=rt.formState;if(a!==null){e:{var l=Ne;if(Fe){if(ft){t:{for(var h=ft,d=ar;h.nodeType!==8;){if(!d){h=null;break t}if(h=Bn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ft=Bn(h.nextSibling),l=h.data==="F!";break e}}Ss(l)}l=!1}l&&(r=a[0])}}return a=sn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ip,lastRenderedState:r},a.queue=l,a=Xp.bind(null,Ne,l),l.dispatch=a,l=Vf(!1),d=zf.bind(null,Ne,!1,l.queue),l=sn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=ib.bind(null,Ne,h,d,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function Cp(t){var r=Tt();return Np(r,Ze,t)}function Np(t,r,a){if(r=Of(t,r,Ip)[0],t=Wu(jr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=tl(r)}catch(v){throw v===Yo?Gu:v}else l=r;r=Tt();var h=r.queue,d=h.dispatch;return a!==r.memoizedState&&(Ne.flags|=2048,Sa(9,Zu(),sb.bind(null,h,a),null)),[l,d,t]}function sb(t,r){t.action=r}function Dp(t){var r=Tt(),a=Ze;if(a!==null)return Np(r,a,t);Tt(),r=r.memoizedState,a=Tt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Sa(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Ne.updateQueue,r===null&&(r=Nf(),Ne.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function Zu(){return{destroy:void 0,resource:void 0}}function Op(){return Tt().memoizedState}function Ju(t,r,a,l){var h=sn();l=l===void 0?null:l,Ne.flags|=t,h.memoizedState=Sa(1|r,Zu(),a,l)}function nl(t,r,a,l){var h=Tt();l=l===void 0?null:l;var d=h.memoizedState.inst;Ze!==null&&l!==null&&Sf(l,Ze.memoizedState.deps)?h.memoizedState=Sa(r,d,a,l):(Ne.flags|=t,h.memoizedState=Sa(1|r,d,a,l))}function Pp(t,r){Ju(8390656,8,t,r)}function Vp(t,r){nl(2048,8,t,r)}function Mp(t,r){return nl(4,2,t,r)}function kp(t,r){return nl(4,4,t,r)}function Lp(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Up(t,r,a){a=a!=null?a.concat([t]):null,nl(4,4,Lp.bind(null,r,t),a)}function kf(){}function jp(t,r){var a=Tt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Sf(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function zp(t,r){var a=Tt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Sf(r,l[1]))return l[0];if(l=t(),Cs){cn(!0);try{t()}finally{cn(!1)}}return a.memoizedState=[l,r],l}function Lf(t,r,a){return a===void 0||(yi&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=Hy(),Ne.lanes|=t,Ai|=t,a)}function Bp(t,r,a,l){return fn(a,r)?a:wa.current!==null?(t=Lf(t,a,l),fn(t,r)||(Vt=!0),t):(yi&42)===0?(Vt=!0,t.memoizedState=a):(t=Hy(),Ne.lanes|=t,Ai|=t,r)}function qp(t,r,a,l,h){var d=ne.p;ne.p=d!==0&&8>d?d:8;var v=G.T,w={};G.T=w,zf(t,!1,r,a);try{var C=h(),z=G.S;if(z!==null&&z(w,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var X=tb(C,l);rl(t,r,X,yn(t))}else rl(t,r,l,yn(t))}catch(W){rl(t,r,{then:function(){},status:"rejected",reason:W},yn())}finally{ne.p=d,G.T=v}}function ab(){}function Uf(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=Hp(t).queue;qp(t,h,r,fe,a===null?ab:function(){return Fp(t),a(l)})}function Hp(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:fe},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Fp(t){var r=Hp(t).next.queue;rl(t,r,{},yn())}function jf(){return Kt(Tl)}function Gp(){return Tt().memoizedState}function Qp(){return Tt().memoizedState}function ob(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=yn();t=gi(a);var l=pi(r,t,a);l!==null&&(_n(l,r,a),Wo(l,r,a)),r={cache:gf()},t.payload=r;return}r=r.return}}function lb(t,r,a){var l=yn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ec(t)?Kp(r,a):(a=sf(t,r,a,l),a!==null&&(_n(a,t,l),Yp(a,r,l)))}function Xp(t,r,a){var l=yn();rl(t,r,a,l)}function rl(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ec(t))Kp(r,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var v=r.lastRenderedState,w=d(v,a);if(h.hasEagerState=!0,h.eagerState=w,fn(w,v))return Lu(t,r,h,0),rt===null&&ku(),!1}catch{}finally{}if(a=sf(t,r,h,l),a!==null)return _n(a,t,l),Yp(a,r,l),!0}return!1}function zf(t,r,a,l){if(l={lane:2,revertLane:_d(),action:l,hasEagerState:!1,eagerState:null,next:null},ec(t)){if(r)throw Error(s(479))}else r=sf(t,a,l,2),r!==null&&_n(r,t,2)}function ec(t){var r=t.alternate;return t===Ne||r!==null&&r===Ne}function Kp(t,r){ba=Ku=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Yp(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,So(t,a)}}var tc={readContext:Kt,use:$u,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt},$p={readContext:Kt,use:$u,useCallback:function(t,r){return sn().memoizedState=[t,r===void 0?null:r],t},useContext:Kt,useEffect:Pp,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Ju(4194308,4,Lp.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Ju(4194308,4,t,r)},useInsertionEffect:function(t,r){Ju(4,2,t,r)},useMemo:function(t,r){var a=sn();r=r===void 0?null:r;var l=t();if(Cs){cn(!0);try{t()}finally{cn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=sn();if(a!==void 0){var h=a(r);if(Cs){cn(!0);try{a(r)}finally{cn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=lb.bind(null,Ne,t),[l.memoizedState,t]},useRef:function(t){var r=sn();return t={current:t},r.memoizedState=t},useState:function(t){t=Vf(t);var r=t.queue,a=Xp.bind(null,Ne,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:kf,useDeferredValue:function(t,r){var a=sn();return Lf(a,t,r)},useTransition:function(){var t=Vf(!1);return t=qp.bind(null,Ne,t.queue,!0,!1),sn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Ne,h=sn();if(Fe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),rt===null)throw Error(s(349));(je&124)!==0||yp(l,r,a)}h.memoizedState=a;var d={value:a,getSnapshot:r};return h.queue=d,Pp(vp.bind(null,l,d,t),[t]),l.flags|=2048,Sa(9,Zu(),_p.bind(null,l,d,a,r),null),a},useId:function(){var t=sn(),r=rt.identifierPrefix;if(Fe){var a=kr,l=Mr;a=(l&~(1<<32-Xt(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=Yu++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=nb++,r="«"+r+"r"+a.toString(32)+"»";return t.memoizedState=r},useHostTransitionStatus:jf,useFormState:xp,useActionState:xp,useOptimistic:function(t){var r=sn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=zf.bind(null,Ne,!0,a),a.dispatch=r,[t,r]},useMemoCache:Df,useCacheRefresh:function(){return sn().memoizedState=ob.bind(null,Ne)}},Wp={readContext:Kt,use:$u,useCallback:jp,useContext:Kt,useEffect:Vp,useImperativeHandle:Up,useInsertionEffect:Mp,useLayoutEffect:kp,useMemo:zp,useReducer:Wu,useRef:Op,useState:function(){return Wu(jr)},useDebugValue:kf,useDeferredValue:function(t,r){var a=Tt();return Bp(a,Ze.memoizedState,t,r)},useTransition:function(){var t=Wu(jr)[0],r=Tt().memoizedState;return[typeof t=="boolean"?t:tl(t),r]},useSyncExternalStore:pp,useId:Gp,useHostTransitionStatus:jf,useFormState:Cp,useActionState:Cp,useOptimistic:function(t,r){var a=Tt();return wp(a,Ze,t,r)},useMemoCache:Df,useCacheRefresh:Qp},ub={readContext:Kt,use:$u,useCallback:jp,useContext:Kt,useEffect:Vp,useImperativeHandle:Up,useInsertionEffect:Mp,useLayoutEffect:kp,useMemo:zp,useReducer:Pf,useRef:Op,useState:function(){return Pf(jr)},useDebugValue:kf,useDeferredValue:function(t,r){var a=Tt();return Ze===null?Lf(a,t,r):Bp(a,Ze.memoizedState,t,r)},useTransition:function(){var t=Pf(jr)[0],r=Tt().memoizedState;return[typeof t=="boolean"?t:tl(t),r]},useSyncExternalStore:pp,useId:Gp,useHostTransitionStatus:jf,useFormState:Dp,useActionState:Dp,useOptimistic:function(t,r){var a=Tt();return Ze!==null?wp(a,Ze,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Df,useCacheRefresh:Qp},Ra=null,il=0;function nc(t){var r=il;return il+=1,Ra===null&&(Ra=[]),lp(Ra,t,r)}function sl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function rc(t,r){throw r.$$typeof===I?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Zp(t){var r=t._init;return r(t._payload)}function Jp(t){function r(k,V){if(t){var U=k.deletions;U===null?(k.deletions=[V],k.flags|=16):U.push(V)}}function a(k,V){if(!t)return null;for(;V!==null;)r(k,V),V=V.sibling;return null}function l(k){for(var V=new Map;k!==null;)k.key!==null?V.set(k.key,k):V.set(k.index,k),k=k.sibling;return V}function h(k,V){return k=Vr(k,V),k.index=0,k.sibling=null,k}function d(k,V,U){return k.index=U,t?(U=k.alternate,U!==null?(U=U.index,U<V?(k.flags|=67108866,V):U):(k.flags|=67108866,V)):(k.flags|=1048576,V)}function v(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function w(k,V,U,K){return V===null||V.tag!==6?(V=of(U,k.mode,K),V.return=k,V):(V=h(V,U),V.return=k,V)}function C(k,V,U,K){var ue=U.type;return ue===H?X(k,V,U.props.children,K,U.key):V!==null&&(V.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===A&&Zp(ue)===V.type)?(V=h(V,U.props),sl(V,U),V.return=k,V):(V=ju(U.type,U.key,U.props,null,k.mode,K),sl(V,U),V.return=k,V)}function z(k,V,U,K){return V===null||V.tag!==4||V.stateNode.containerInfo!==U.containerInfo||V.stateNode.implementation!==U.implementation?(V=lf(U,k.mode,K),V.return=k,V):(V=h(V,U.children||[]),V.return=k,V)}function X(k,V,U,K,ue){return V===null||V.tag!==7?(V=Ts(U,k.mode,K,ue),V.return=k,V):(V=h(V,U),V.return=k,V)}function W(k,V,U){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=of(""+V,k.mode,U),V.return=k,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case R:return U=ju(V.type,V.key,V.props,null,k.mode,U),sl(U,V),U.return=k,U;case j:return V=lf(V,k.mode,U),V.return=k,V;case A:var K=V._init;return V=K(V._payload),W(k,V,U)}if(Be(V)||M(V))return V=Ts(V,k.mode,U,null),V.return=k,V;if(typeof V.then=="function")return W(k,nc(V),U);if(V.$$typeof===ae)return W(k,Hu(k,V),U);rc(k,V)}return null}function B(k,V,U,K){var ue=V!==null?V.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ue!==null?null:w(k,V,""+U,K);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case R:return U.key===ue?C(k,V,U,K):null;case j:return U.key===ue?z(k,V,U,K):null;case A:return ue=U._init,U=ue(U._payload),B(k,V,U,K)}if(Be(U)||M(U))return ue!==null?null:X(k,V,U,K,null);if(typeof U.then=="function")return B(k,V,nc(U),K);if(U.$$typeof===ae)return B(k,V,Hu(k,U),K);rc(k,U)}return null}function q(k,V,U,K,ue){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return k=k.get(U)||null,w(V,k,""+K,ue);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case R:return k=k.get(K.key===null?U:K.key)||null,C(V,k,K,ue);case j:return k=k.get(K.key===null?U:K.key)||null,z(V,k,K,ue);case A:var De=K._init;return K=De(K._payload),q(k,V,U,K,ue)}if(Be(K)||M(K))return k=k.get(U)||null,X(V,k,K,ue,null);if(typeof K.then=="function")return q(k,V,U,nc(K),ue);if(K.$$typeof===ae)return q(k,V,U,Hu(V,K),ue);rc(V,K)}return null}function Se(k,V,U,K){for(var ue=null,De=null,de=V,Ee=V=0,kt=null;de!==null&&Ee<U.length;Ee++){de.index>Ee?(kt=de,de=null):kt=de.sibling;var He=B(k,de,U[Ee],K);if(He===null){de===null&&(de=kt);break}t&&de&&He.alternate===null&&r(k,de),V=d(He,V,Ee),De===null?ue=He:De.sibling=He,De=He,de=kt}if(Ee===U.length)return a(k,de),Fe&&bs(k,Ee),ue;if(de===null){for(;Ee<U.length;Ee++)de=W(k,U[Ee],K),de!==null&&(V=d(de,V,Ee),De===null?ue=de:De.sibling=de,De=de);return Fe&&bs(k,Ee),ue}for(de=l(de);Ee<U.length;Ee++)kt=q(de,k,Ee,U[Ee],K),kt!==null&&(t&&kt.alternate!==null&&de.delete(kt.key===null?Ee:kt.key),V=d(kt,V,Ee),De===null?ue=kt:De.sibling=kt,De=kt);return t&&de.forEach(function(Pi){return r(k,Pi)}),Fe&&bs(k,Ee),ue}function ve(k,V,U,K){if(U==null)throw Error(s(151));for(var ue=null,De=null,de=V,Ee=V=0,kt=null,He=U.next();de!==null&&!He.done;Ee++,He=U.next()){de.index>Ee?(kt=de,de=null):kt=de.sibling;var Pi=B(k,de,He.value,K);if(Pi===null){de===null&&(de=kt);break}t&&de&&Pi.alternate===null&&r(k,de),V=d(Pi,V,Ee),De===null?ue=Pi:De.sibling=Pi,De=Pi,de=kt}if(He.done)return a(k,de),Fe&&bs(k,Ee),ue;if(de===null){for(;!He.done;Ee++,He=U.next())He=W(k,He.value,K),He!==null&&(V=d(He,V,Ee),De===null?ue=He:De.sibling=He,De=He);return Fe&&bs(k,Ee),ue}for(de=l(de);!He.done;Ee++,He=U.next())He=q(de,k,Ee,He.value,K),He!==null&&(t&&He.alternate!==null&&de.delete(He.key===null?Ee:He.key),V=d(He,V,Ee),De===null?ue=He:De.sibling=He,De=He);return t&&de.forEach(function(cA){return r(k,cA)}),Fe&&bs(k,Ee),ue}function et(k,V,U,K){if(typeof U=="object"&&U!==null&&U.type===H&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case R:e:{for(var ue=U.key;V!==null;){if(V.key===ue){if(ue=U.type,ue===H){if(V.tag===7){a(k,V.sibling),K=h(V,U.props.children),K.return=k,k=K;break e}}else if(V.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===A&&Zp(ue)===V.type){a(k,V.sibling),K=h(V,U.props),sl(K,U),K.return=k,k=K;break e}a(k,V);break}else r(k,V);V=V.sibling}U.type===H?(K=Ts(U.props.children,k.mode,K,U.key),K.return=k,k=K):(K=ju(U.type,U.key,U.props,null,k.mode,K),sl(K,U),K.return=k,k=K)}return v(k);case j:e:{for(ue=U.key;V!==null;){if(V.key===ue)if(V.tag===4&&V.stateNode.containerInfo===U.containerInfo&&V.stateNode.implementation===U.implementation){a(k,V.sibling),K=h(V,U.children||[]),K.return=k,k=K;break e}else{a(k,V);break}else r(k,V);V=V.sibling}K=lf(U,k.mode,K),K.return=k,k=K}return v(k);case A:return ue=U._init,U=ue(U._payload),et(k,V,U,K)}if(Be(U))return Se(k,V,U,K);if(M(U)){if(ue=M(U),typeof ue!="function")throw Error(s(150));return U=ue.call(U),ve(k,V,U,K)}if(typeof U.then=="function")return et(k,V,nc(U),K);if(U.$$typeof===ae)return et(k,V,Hu(k,U),K);rc(k,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,V!==null&&V.tag===6?(a(k,V.sibling),K=h(V,U),K.return=k,k=K):(a(k,V),K=of(U,k.mode,K),K.return=k,k=K),v(k)):a(k,V)}return function(k,V,U,K){try{il=0;var ue=et(k,V,U,K);return Ra=null,ue}catch(de){if(de===Yo||de===Gu)throw de;var De=dn(29,de,null,k.mode);return De.lanes=K,De.return=k,De}finally{}}}var Ia=Jp(!0),ey=Jp(!1),Nn=J(null),or=null;function _i(t){var r=t.alternate;ee(Ct,Ct.current&1),ee(Nn,t),or===null&&(r===null||wa.current!==null||r.memoizedState!==null)&&(or=t)}function ty(t){if(t.tag===22){if(ee(Ct,Ct.current),ee(Nn,t),or===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(or=t)}}else vi()}function vi(){ee(Ct,Ct.current),ee(Nn,Nn.current)}function zr(t){re(Nn),or===t&&(or=null),re(Ct)}var Ct=J(0);function ic(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Nd(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Bf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var qf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=yn(),h=gi(l);h.payload=r,a!=null&&(h.callback=a),r=pi(t,h,l),r!==null&&(_n(r,t,l),Wo(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=yn(),h=gi(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=pi(t,h,l),r!==null&&(_n(r,t,l),Wo(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=yn(),l=gi(a);l.tag=2,r!=null&&(l.callback=r),r=pi(t,l,a),r!==null&&(_n(r,t,a),Wo(r,t,a))}};function ny(t,r,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):r.prototype&&r.prototype.isPureReactComponent?!Bo(a,l)||!Bo(h,d):!0}function ry(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&qf.enqueueReplaceState(r,r.state,null)}function Ns(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var sc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function iy(t){sc(t)}function sy(t){console.error(t)}function ay(t){sc(t)}function ac(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function oy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Hf(t,r,a){return a=gi(a),a.tag=3,a.payload={element:null},a.callback=function(){ac(t,r)},a}function ly(t){return t=gi(t),t.tag=3,t}function uy(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){oy(r,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){oy(r,a,l),typeof h!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function cb(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&Qo(r,a,h,!0),a=Nn.current,a!==null){switch(a.tag){case 13:return or===null?dd():a.alternate===null&&dt===0&&(dt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===_f?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),gd(t,l,h)),!1;case 22:return a.flags|=65536,l===_f?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),gd(t,l,h)),!1}throw Error(s(435,a.tag))}return gd(t,l,h),dd(),!1}if(Fe)return r=Nn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==hf&&(t=Error(s(422),{cause:l}),Go(Rn(t,a)))):(l!==hf&&(r=Error(s(423),{cause:l}),Go(Rn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Rn(l,a),h=Hf(t.stateNode,l,h),Tf(t,h),dt!==4&&(dt=2)),!1;var d=Error(s(520),{cause:l});if(d=Rn(d,a),fl===null?fl=[d]:fl.push(d),dt!==4&&(dt=2),r===null)return!0;l=Rn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Hf(a.stateNode,l,t),Tf(a,t),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Si===null||!Si.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=ly(h),uy(h,t,a,l),Tf(a,h),!1}a=a.return}while(a!==null);return!1}var cy=Error(s(461)),Vt=!1;function zt(t,r,a,l){r.child=t===null?ey(r,null,a,l):Ia(r,t.child,a,l)}function hy(t,r,a,l,h){a=a.render;var d=r.ref;if("ref"in l){var v={};for(var w in l)w!=="ref"&&(v[w]=l[w])}else v=l;return Is(r),l=Rf(t,r,a,v,d,h),w=If(),t!==null&&!Vt?(xf(t,r,h),Br(t,r,h)):(Fe&&w&&uf(r),r.flags|=1,zt(t,r,l,h),r.child)}function fy(t,r,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!af(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,dy(t,r,d,l,h)):(t=ju(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!Wf(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Bo,a(v,l)&&t.ref===r.ref)return Br(t,r,h)}return r.flags|=1,t=Vr(d,l),t.ref=r.ref,t.return=r,r.child=t}function dy(t,r,a,l,h){if(t!==null){var d=t.memoizedProps;if(Bo(d,l)&&t.ref===r.ref)if(Vt=!1,r.pendingProps=l=d,Wf(t,h))(t.flags&131072)!==0&&(Vt=!0);else return r.lanes=t.lanes,Br(t,r,h)}return Ff(t,r,a,l,h)}function my(t,r,a){var l=r.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=r.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;r.childLanes=d&~l}else r.childLanes=0,r.child=null;return gy(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Fu(r,d!==null?d.cachePool:null),d!==null?dp(r,d):bf(),ty(r);else return r.lanes=r.childLanes=536870912,gy(t,r,d!==null?d.baseLanes|a:a,a)}else d!==null?(Fu(r,d.cachePool),dp(r,d),vi(),r.memoizedState=null):(t!==null&&Fu(r,null),bf(),vi());return zt(t,r,h,a),r.child}function gy(t,r,a,l){var h=yf();return h=h===null?null:{parent:xt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&Fu(r,null),bf(),ty(r),t!==null&&Qo(t,r,l,!0),null}function oc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Ff(t,r,a,l,h){return Is(r),a=Rf(t,r,a,l,void 0,h),l=If(),t!==null&&!Vt?(xf(t,r,h),Br(t,r,h)):(Fe&&l&&uf(r),r.flags|=1,zt(t,r,a,h),r.child)}function py(t,r,a,l,h,d){return Is(r),r.updateQueue=null,a=gp(r,l,a,h),mp(t),l=If(),t!==null&&!Vt?(xf(t,r,d),Br(t,r,d)):(Fe&&l&&uf(r),r.flags|=1,zt(t,r,a,d),r.child)}function yy(t,r,a,l,h){if(Is(r),r.stateNode===null){var d=ya,v=a.contextType;typeof v=="object"&&v!==null&&(d=Kt(v)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=qf,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},vf(r),v=a.contextType,d.context=typeof v=="object"&&v!==null?Kt(v):ya,d.state=r.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Bf(r,a,v,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&qf.enqueueReplaceState(d,d.state,null),Jo(r,l,d,h),Zo(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){d=r.stateNode;var w=r.memoizedProps,C=Ns(a,w);d.props=C;var z=d.context,X=a.contextType;v=ya,typeof X=="object"&&X!==null&&(v=Kt(X));var W=a.getDerivedStateFromProps;X=typeof W=="function"||typeof d.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,X||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(w||z!==v)&&ry(r,d,l,v),mi=!1;var B=r.memoizedState;d.state=B,Jo(r,l,d,h),Zo(),z=r.memoizedState,w||B!==z||mi?(typeof W=="function"&&(Bf(r,a,W,l),z=r.memoizedState),(C=mi||ny(r,a,C,l,B,z,v))?(X||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=z),d.props=l,d.state=z,d.context=v,l=C):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,Ef(t,r),v=r.memoizedProps,X=Ns(a,v),d.props=X,W=r.pendingProps,B=d.context,z=a.contextType,C=ya,typeof z=="object"&&z!==null&&(C=Kt(z)),w=a.getDerivedStateFromProps,(z=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==W||B!==C)&&ry(r,d,l,C),mi=!1,B=r.memoizedState,d.state=B,Jo(r,l,d,h),Zo();var q=r.memoizedState;v!==W||B!==q||mi||t!==null&&t.dependencies!==null&&qu(t.dependencies)?(typeof w=="function"&&(Bf(r,a,w,l),q=r.memoizedState),(X=mi||ny(r,a,X,l,B,q,C)||t!==null&&t.dependencies!==null&&qu(t.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,q,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,q,C)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=q),d.props=l,d.state=q,d.context=C,l=X):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(r.flags|=1024),l=!1)}return d=l,oc(t,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,t!==null&&l?(r.child=Ia(r,t.child,null,h),r.child=Ia(r,null,a,h)):zt(t,r,a,h),r.memoizedState=d.state,t=r.child):t=Br(t,r,h),t}function _y(t,r,a,l){return Fo(),r.flags|=256,zt(t,r,a,l),r.child}var Gf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qf(t){return{baseLanes:t,cachePool:sp()}}function Xf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Dn),t}function vy(t,r,a){var l=r.pendingProps,h=!1,d=(r.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Ct.current&2)!==0),v&&(h=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,t===null){if(Fe){if(h?_i(r):vi(),Fe){var w=ft,C;if(C=w){e:{for(C=w,w=ar;C.nodeType!==8;){if(!w){w=null;break e}if(C=Bn(C.nextSibling),C===null){w=null;break e}}w=C}w!==null?(r.memoizedState={dehydrated:w,treeContext:ws!==null?{id:Mr,overflow:kr}:null,retryLane:536870912,hydrationErrors:null},C=dn(18,null,null,0),C.stateNode=w,C.return=r,r.child=C,rn=r,ft=null,C=!0):C=!1}C||Ss(r)}if(w=r.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return Nd(w)?r.lanes=32:r.lanes=536870912,null;zr(r)}return w=l.children,l=l.fallback,h?(vi(),h=r.mode,w=lc({mode:"hidden",children:w},h),l=Ts(l,h,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,h=r.child,h.memoizedState=Qf(a),h.childLanes=Xf(t,v,a),r.memoizedState=Gf,l):(_i(r),Kf(r,w))}if(C=t.memoizedState,C!==null&&(w=C.dehydrated,w!==null)){if(d)r.flags&256?(_i(r),r.flags&=-257,r=Yf(t,r,a)):r.memoizedState!==null?(vi(),r.child=t.child,r.flags|=128,r=null):(vi(),h=l.fallback,w=r.mode,l=lc({mode:"visible",children:l.children},w),h=Ts(h,w,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,Ia(r,t.child,null,a),l=r.child,l.memoizedState=Qf(a),l.childLanes=Xf(t,v,a),r.memoizedState=Gf,r=h);else if(_i(r),Nd(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var z=v.dgst;v=z,l=Error(s(419)),l.stack="",l.digest=v,Go({value:l,source:null,stack:null}),r=Yf(t,r,a)}else if(Vt||Qo(t,r,a,!1),v=(a&t.childLanes)!==0,Vt||v){if(v=rt,v!==null&&(l=a&-a,l=(l&42)!==0?1:ai(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==C.retryLane))throw C.retryLane=l,pa(t,l),_n(v,t,l),cy;w.data==="$?"||dd(),r=Yf(t,r,a)}else w.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=C.treeContext,ft=Bn(w.nextSibling),rn=r,Fe=!0,As=null,ar=!1,t!==null&&(xn[Cn++]=Mr,xn[Cn++]=kr,xn[Cn++]=ws,Mr=t.id,kr=t.overflow,ws=r),r=Kf(r,l.children),r.flags|=4096);return r}return h?(vi(),h=l.fallback,w=r.mode,C=t.child,z=C.sibling,l=Vr(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,z!==null?h=Vr(z,h):(h=Ts(h,w,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,w=t.child.memoizedState,w===null?w=Qf(a):(C=w.cachePool,C!==null?(z=xt._currentValue,C=C.parent!==z?{parent:z,pool:z}:C):C=sp(),w={baseLanes:w.baseLanes|a,cachePool:C}),h.memoizedState=w,h.childLanes=Xf(t,v,a),r.memoizedState=Gf,l):(_i(r),a=t.child,t=a.sibling,a=Vr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(v=r.deletions,v===null?(r.deletions=[t],r.flags|=16):v.push(t)),r.child=a,r.memoizedState=null,a)}function Kf(t,r){return r=lc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function lc(t,r){return t=dn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Yf(t,r,a){return Ia(r,t.child,null,a),t=Kf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Ey(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),df(t.return,r,a)}function $f(t,r,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function Ty(t,r,a){var l=r.pendingProps,h=l.revealOrder,d=l.tail;if(zt(t,r,l.children,a),l=Ct.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ey(t,a,r);else if(t.tag===19)Ey(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ee(Ct,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&ic(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),$f(r,!1,h,a,d);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&ic(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}$f(r,!0,a,null,d);break;case"together":$f(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Br(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Ai|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(Qo(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Vr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Vr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Wf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&qu(t)))}function hb(t,r,a){switch(r.tag){case 3:ce(r,r.stateNode.containerInfo),di(r,xt,t.memoizedState.cache),Fo();break;case 27:case 5:si(r);break;case 4:ce(r,r.stateNode.containerInfo);break;case 10:di(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(_i(r),r.flags|=128,null):(a&r.child.childLanes)!==0?vy(t,r,a):(_i(r),t=Br(t,r,a),t!==null?t.sibling:null);_i(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(Qo(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return Ty(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ee(Ct,Ct.current),l)break;return null;case 22:case 23:return r.lanes=0,my(t,r,a);case 24:di(r,xt,t.memoizedState.cache)}return Br(t,r,a)}function wy(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Vt=!0;else{if(!Wf(t,a)&&(r.flags&128)===0)return Vt=!1,hb(t,r,a);Vt=(t.flags&131072)!==0}else Vt=!1,Fe&&(r.flags&1048576)!==0&&Zg(r,Bu,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")af(l)?(t=Ns(l,t),r.tag=1,r=yy(null,r,l,t,a)):(r.tag=0,r=Ff(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===Te){r.tag=11,r=hy(null,r,l,t,a);break e}else if(h===N){r.tag=14,r=fy(null,r,l,t,a);break e}}throw r=Ge(l)||l,Error(s(306,r,""))}}return r;case 0:return Ff(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=Ns(l,r.pendingProps),yy(t,r,l,h,a);case 3:e:{if(ce(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;h=d.element,Ef(t,r),Jo(r,l,null,a);var v=r.memoizedState;if(l=v.cache,di(r,xt,l),l!==d.cache&&mf(r,[xt],a,!0),Zo(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=_y(t,r,l,a);break e}else if(l!==h){h=Rn(Error(s(424)),r),Go(h),r=_y(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ft=Bn(t.firstChild),rn=r,Fe=!0,As=null,ar=!0,a=ey(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Fo(),l===h){r=Br(t,r,a);break e}zt(t,r,l,a)}r=r.child}return r;case 26:return oc(t,r),t===null?(a=R_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Fe||(a=r.type,t=r.pendingProps,l=wc(Ae.current).createElement(a),l[St]=r,l[_t]=t,qt(l,a,t),mt(l),r.stateNode=l):r.memoizedState=R_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return si(r),t===null&&Fe&&(l=r.stateNode=b_(r.type,r.pendingProps,Ae.current),rn=r,ar=!0,h=ft,xi(r.type)?(Dd=h,ft=Bn(l.firstChild)):ft=h),zt(t,r,r.pendingProps.children,a),oc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Fe&&((h=l=ft)&&(l=jb(l,r.type,r.pendingProps,ar),l!==null?(r.stateNode=l,rn=r,ft=Bn(l.firstChild),ar=!1,h=!0):h=!1),h||Ss(r)),si(r),h=r.type,d=r.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,Id(h,d)?l=null:v!==null&&Id(h,v)&&(r.flags|=32),r.memoizedState!==null&&(h=Rf(t,r,rb,null,null,a),Tl._currentValue=h),oc(t,r),zt(t,r,l,a),r.child;case 6:return t===null&&Fe&&((t=a=ft)&&(a=zb(a,r.pendingProps,ar),a!==null?(r.stateNode=a,rn=r,ft=null,t=!0):t=!1),t||Ss(r)),null;case 13:return vy(t,r,a);case 4:return ce(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Ia(r,null,l,a):zt(t,r,l,a),r.child;case 11:return hy(t,r,r.type,r.pendingProps,a);case 7:return zt(t,r,r.pendingProps,a),r.child;case 8:return zt(t,r,r.pendingProps.children,a),r.child;case 12:return zt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,di(r,r.type,l.value),zt(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Is(r),h=Kt(h),l=l(h),r.flags|=1,zt(t,r,l,a),r.child;case 14:return fy(t,r,r.type,r.pendingProps,a);case 15:return dy(t,r,r.type,r.pendingProps,a);case 19:return Ty(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=lc(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Vr(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return my(t,r,a);case 24:return Is(r),l=Kt(xt),t===null?(h=yf(),h===null&&(h=rt,d=gf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),r.memoizedState={parent:l,cache:h},vf(r),di(r,xt,h)):((t.lanes&a)!==0&&(Ef(t,r),Jo(r,null,null,a),Zo()),h=t.memoizedState,d=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),di(r,xt,l)):(l=d.cache,di(r,xt,l),l!==h.cache&&mf(r,[xt],a,!0))),zt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function qr(t){t.flags|=4}function by(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!D_(r)){if(r=Nn.current,r!==null&&((je&4194048)===je?or!==null:(je&62914560)!==je&&(je&536870912)===0||r!==or))throw $o=_f,ap;t.flags|=8192}}function uc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?bo():536870912,t.lanes|=r,Da|=r)}function al(t,r){if(!Fe)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ut(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function fb(t,r,a){var l=r.pendingProps;switch(cf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(r),null;case 1:return ut(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Ur(xt),vn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ho(r)?qr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,tp())),ut(r),null;case 26:return a=r.memoizedState,t===null?(qr(r),a!==null?(ut(r),by(r,a)):(ut(r),r.flags&=-16777217)):a?a!==t.memoizedState?(qr(r),ut(r),by(r,a)):(ut(r),r.flags&=-16777217):(t.memoizedProps!==l&&qr(r),ut(r),r.flags&=-16777217),null;case 27:Tr(r),a=Ae.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&qr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ut(r),null}t=me.current,Ho(r)?Jg(r):(t=b_(h,l,a),r.stateNode=t,qr(r))}return ut(r),null;case 5:if(Tr(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&qr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ut(r),null}if(t=me.current,Ho(r))Jg(r);else{switch(h=wc(Ae.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[St]=r,t[_t]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(qt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&qr(r)}}return ut(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&qr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Ae.current,Ho(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=rn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[St]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||p_(t.nodeValue,a)),t||Ss(r)}else t=wc(t).createTextNode(l),t[St]=r,r.stateNode=t}return ut(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ho(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[St]=r}else Fo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),h=!1}else h=tp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(zr(r),r):(zr(r),null)}if(zr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),uc(r,r.updateQueue),ut(r),null;case 4:return vn(),t===null&&wd(r.stateNode.containerInfo),ut(r),null;case 10:return Ur(r.type),ut(r),null;case 19:if(re(Ct),h=r.memoizedState,h===null)return ut(r),null;if(l=(r.flags&128)!==0,d=h.rendering,d===null)if(l)al(h,!1);else{if(dt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(d=ic(t),d!==null){for(r.flags|=128,al(h,!1),t=d.updateQueue,r.updateQueue=t,uc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Wg(a,t),a=a.sibling;return ee(Ct,Ct.current&1|2),r.child}t=t.sibling}h.tail!==null&&En()>fc&&(r.flags|=128,l=!0,al(h,!1),r.lanes=4194304)}else{if(!l)if(t=ic(d),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,uc(r,t),al(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Fe)return ut(r),null}else 2*En()-h.renderingStartTime>fc&&a!==536870912&&(r.flags|=128,l=!0,al(h,!1),r.lanes=4194304);h.isBackwards?(d.sibling=r.child,r.child=d):(t=h.last,t!==null?t.sibling=d:r.child=d,h.last=d)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=En(),r.sibling=null,t=Ct.current,ee(Ct,l?t&1|2:t&1),r):(ut(r),null);case 22:case 23:return zr(r),Af(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(ut(r),r.subtreeFlags&6&&(r.flags|=8192)):ut(r),a=r.updateQueue,a!==null&&uc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&re(xs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Ur(xt),ut(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function db(t,r){switch(cf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ur(xt),vn(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Tr(r),null;case 13:if(zr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Fo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return re(Ct),null;case 4:return vn(),null;case 10:return Ur(r.type),null;case 22:case 23:return zr(r),Af(),t!==null&&re(xs),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Ur(xt),null;case 25:return null;default:return null}}function Ay(t,r){switch(cf(r),r.tag){case 3:Ur(xt),vn();break;case 26:case 27:case 5:Tr(r);break;case 4:vn();break;case 13:zr(r);break;case 19:re(Ct);break;case 10:Ur(r.type);break;case 22:case 23:zr(r),Af(),t!==null&&re(xs);break;case 24:Ur(xt)}}function ol(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(w){nt(r,r.return,w)}}function Ei(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,h=r;var C=a,z=w;try{z()}catch(X){nt(h,C,X)}}}l=l.next}while(l!==d)}}catch(X){nt(r,r.return,X)}}function Sy(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{fp(r,a)}catch(l){nt(t,t.return,l)}}}function Ry(t,r,a){a.props=Ns(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){nt(t,r,l)}}function ll(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){nt(t,r,h)}}function lr(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){nt(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){nt(t,r,h)}else a.current=null}function Iy(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){nt(t,t.return,h)}}function Zf(t,r,a){try{var l=t.stateNode;Vb(l,t.type,a,r),l[_t]=r}catch(h){nt(t,t.return,h)}}function xy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&xi(t.type)||t.tag===4}function Jf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&xi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ed(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Tc));else if(l!==4&&(l===27&&xi(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(ed(t,r,a),t=t.sibling;t!==null;)ed(t,r,a),t=t.sibling}function cc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&xi(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(cc(t,r,a),t=t.sibling;t!==null;)cc(t,r,a),t=t.sibling}function Cy(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);qt(r,l,a),r[St]=t,r[_t]=a}catch(d){nt(t,t.return,d)}}var Hr=!1,pt=!1,td=!1,Ny=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function mb(t,r){if(t=t.containerInfo,Sd=xc,t=Bg(t),Zh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,w=-1,C=-1,z=0,X=0,W=t,B=null;t:for(;;){for(var q;W!==a||h!==0&&W.nodeType!==3||(w=v+h),W!==d||l!==0&&W.nodeType!==3||(C=v+l),W.nodeType===3&&(v+=W.nodeValue.length),(q=W.firstChild)!==null;)B=W,W=q;for(;;){if(W===t)break t;if(B===a&&++z===h&&(w=v),B===d&&++X===l&&(C=v),(q=W.nextSibling)!==null)break;W=B,B=W.parentNode}W=q}a=w===-1||C===-1?null:{start:w,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Rd={focusedElem:t,selectionRange:a},xc=!1,Mt=r;Mt!==null;)if(r=Mt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Mt=t;else for(;Mt!==null;){switch(r=Mt,d=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=r,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Se=Ns(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Se,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(ve){nt(a,a.return,ve)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Cd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Cd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Mt=t;break}Mt=r.return}}function Dy(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ti(t,a),l&4&&ol(5,a);break;case 1:if(Ti(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(v){nt(a,a.return,v)}else{var h=Ns(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(v){nt(a,a.return,v)}}l&64&&Sy(a),l&512&&ll(a,a.return);break;case 3:if(Ti(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{fp(t,r)}catch(v){nt(a,a.return,v)}}break;case 27:r===null&&l&4&&Cy(a);case 26:case 5:Ti(t,a),r===null&&l&4&&Iy(a),l&512&&ll(a,a.return);break;case 12:Ti(t,a);break;case 13:Ti(t,a),l&4&&Vy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=bb.bind(null,a),Bb(t,a))));break;case 22:if(l=a.memoizedState!==null||Hr,!l){r=r!==null&&r.memoizedState!==null||pt,h=Hr;var d=pt;Hr=l,(pt=r)&&!d?wi(t,a,(a.subtreeFlags&8772)!==0):Ti(t,a),Hr=h,pt=d}break;case 30:break;default:Ti(t,a)}}function Oy(t){var r=t.alternate;r!==null&&(t.alternate=null,Oy(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&ui(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var lt=null,an=!1;function Fr(t,r,a){for(a=a.child;a!==null;)Py(t,r,a),a=a.sibling}function Py(t,r,a){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(ht,a)}catch{}switch(a.tag){case 26:pt||lr(a,r),Fr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:pt||lr(a,r);var l=lt,h=an;xi(a.type)&&(lt=a.stateNode,an=!1),Fr(t,r,a),yl(a.stateNode),lt=l,an=h;break;case 5:pt||lr(a,r);case 6:if(l=lt,h=an,lt=null,Fr(t,r,a),lt=l,an=h,lt!==null)if(an)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(d){nt(a,r,d)}else try{lt.removeChild(a.stateNode)}catch(d){nt(a,r,d)}break;case 18:lt!==null&&(an?(t=lt,T_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Sl(t)):T_(lt,a.stateNode));break;case 4:l=lt,h=an,lt=a.stateNode.containerInfo,an=!0,Fr(t,r,a),lt=l,an=h;break;case 0:case 11:case 14:case 15:pt||Ei(2,a,r),pt||Ei(4,a,r),Fr(t,r,a);break;case 1:pt||(lr(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Ry(a,r,l)),Fr(t,r,a);break;case 21:Fr(t,r,a);break;case 22:pt=(l=pt)||a.memoizedState!==null,Fr(t,r,a),pt=l;break;default:Fr(t,r,a)}}function Vy(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Sl(t)}catch(a){nt(r,r.return,a)}}function gb(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Ny),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Ny),r;default:throw Error(s(435,t.tag))}}function nd(t,r){var a=gb(t);r.forEach(function(l){var h=Ab.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function mn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=r,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(xi(w.type)){lt=w.stateNode,an=!1;break e}break;case 5:lt=w.stateNode,an=!1;break e;case 3:case 4:lt=w.stateNode.containerInfo,an=!0;break e}w=w.return}if(lt===null)throw Error(s(160));Py(d,v,h),lt=null,an=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)My(r,t),r=r.sibling}var zn=null;function My(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:mn(r,t),gn(t),l&4&&(Ei(3,t,t.return),ol(3,t),Ei(5,t,t.return));break;case 1:mn(r,t),gn(t),l&512&&(pt||a===null||lr(a,a.return)),l&64&&Hr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=zn;if(mn(r,t),gn(t),l&512&&(pt||a===null||lr(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ss]||d[St]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),qt(d,l,a),d[St]=t,mt(d),l=d;break e;case"link":var v=C_("link","href",h).get(l+(a.href||""));if(v){for(var w=0;w<v.length;w++)if(d=v[w],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(w,1);break t}}d=h.createElement(l),qt(d,l,a),h.head.appendChild(d);break;case"meta":if(v=C_("meta","content",h).get(l+(a.content||""))){for(w=0;w<v.length;w++)if(d=v[w],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(w,1);break t}}d=h.createElement(l),qt(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[St]=t,mt(d),l=d}t.stateNode=l}else N_(h,t.type,t.stateNode);else t.stateNode=x_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?N_(h,t.type,t.stateNode):x_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Zf(t,t.memoizedProps,a.memoizedProps)}break;case 27:mn(r,t),gn(t),l&512&&(pt||a===null||lr(a,a.return)),a!==null&&l&4&&Zf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(mn(r,t),gn(t),l&512&&(pt||a===null||lr(a,a.return)),t.flags&32){h=t.stateNode;try{wn(h,"")}catch(q){nt(t,t.return,q)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Zf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(td=!0);break;case 6:if(mn(r,t),gn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(q){nt(t,t.return,q)}}break;case 3:if(Sc=null,h=zn,zn=bc(r.containerInfo),mn(r,t),zn=h,gn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Sl(r.containerInfo)}catch(q){nt(t,t.return,q)}td&&(td=!1,ky(t));break;case 4:l=zn,zn=bc(t.stateNode.containerInfo),mn(r,t),gn(t),zn=l;break;case 12:mn(r,t),gn(t);break;case 13:mn(r,t),gn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ld=En()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,nd(t,l)));break;case 22:h=t.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,z=Hr,X=pt;if(Hr=z||h,pt=X||C,mn(r,t),pt=X,Hr=z,gn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||C||Hr||pt||Ds(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){C=a=r;try{if(d=C.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=C.stateNode;var W=C.memoizedProps.style,B=W!=null&&W.hasOwnProperty("display")?W.display:null;w.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(q){nt(C,C.return,q)}}}else if(r.tag===6){if(a===null){C=r;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(q){nt(C,C.return,q)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,nd(t,a))));break;case 19:mn(r,t),gn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,nd(t,l)));break;case 30:break;case 21:break;default:mn(r,t),gn(t)}}function gn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(xy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Jf(t);cc(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(wn(v,""),a.flags&=-33);var w=Jf(t);cc(t,w,v);break;case 3:case 4:var C=a.stateNode.containerInfo,z=Jf(t);ed(t,z,C);break;default:throw Error(s(161))}}catch(X){nt(t,t.return,X)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function ky(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;ky(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ti(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Dy(t,r.alternate,r),r=r.sibling}function Ds(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Ei(4,r,r.return),Ds(r);break;case 1:lr(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Ry(r,r.return,a),Ds(r);break;case 27:yl(r.stateNode);case 26:case 5:lr(r,r.return),Ds(r);break;case 22:r.memoizedState===null&&Ds(r);break;case 30:Ds(r);break;default:Ds(r)}t=t.sibling}}function wi(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,d=r,v=d.flags;switch(d.tag){case 0:case 11:case 15:wi(h,d,a),ol(4,d);break;case 1:if(wi(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){nt(l,l.return,z)}if(l=d,h=l.updateQueue,h!==null){var w=l.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)hp(C[h],w)}catch(z){nt(l,l.return,z)}}a&&v&64&&Sy(d),ll(d,d.return);break;case 27:Cy(d);case 26:case 5:wi(h,d,a),a&&l===null&&v&4&&Iy(d),ll(d,d.return);break;case 12:wi(h,d,a);break;case 13:wi(h,d,a),a&&v&4&&Vy(h,d);break;case 22:d.memoizedState===null&&wi(h,d,a),ll(d,d.return);break;case 30:break;default:wi(h,d,a)}r=r.sibling}}function rd(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Xo(a))}function id(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Xo(t))}function ur(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ly(t,r,a,l),r=r.sibling}function Ly(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:ur(t,r,a,l),h&2048&&ol(9,r);break;case 1:ur(t,r,a,l);break;case 3:ur(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Xo(t)));break;case 12:if(h&2048){ur(t,r,a,l),t=r.stateNode;try{var d=r.memoizedProps,v=d.id,w=d.onPostCommit;typeof w=="function"&&w(v,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){nt(r,r.return,C)}}else ur(t,r,a,l);break;case 13:ur(t,r,a,l);break;case 23:break;case 22:d=r.stateNode,v=r.alternate,r.memoizedState!==null?d._visibility&2?ur(t,r,a,l):ul(t,r):d._visibility&2?ur(t,r,a,l):(d._visibility|=2,xa(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&rd(v,r);break;case 24:ur(t,r,a,l),h&2048&&id(r.alternate,r);break;default:ur(t,r,a,l)}}function xa(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var d=t,v=r,w=a,C=l,z=v.flags;switch(v.tag){case 0:case 11:case 15:xa(d,v,w,C,h),ol(8,v);break;case 23:break;case 22:var X=v.stateNode;v.memoizedState!==null?X._visibility&2?xa(d,v,w,C,h):ul(d,v):(X._visibility|=2,xa(d,v,w,C,h)),h&&z&2048&&rd(v.alternate,v);break;case 24:xa(d,v,w,C,h),h&&z&2048&&id(v.alternate,v);break;default:xa(d,v,w,C,h)}r=r.sibling}}function ul(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:ul(a,l),h&2048&&rd(l.alternate,l);break;case 24:ul(a,l),h&2048&&id(l.alternate,l);break;default:ul(a,l)}r=r.sibling}}var cl=8192;function Ca(t){if(t.subtreeFlags&cl)for(t=t.child;t!==null;)Uy(t),t=t.sibling}function Uy(t){switch(t.tag){case 26:Ca(t),t.flags&cl&&t.memoizedState!==null&&eA(zn,t.memoizedState,t.memoizedProps);break;case 5:Ca(t);break;case 3:case 4:var r=zn;zn=bc(t.stateNode.containerInfo),Ca(t),zn=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=cl,cl=16777216,Ca(t),cl=r):Ca(t));break;default:Ca(t)}}function jy(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function hl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Mt=l,By(l,t)}jy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zy(t),t=t.sibling}function zy(t){switch(t.tag){case 0:case 11:case 15:hl(t),t.flags&2048&&Ei(9,t,t.return);break;case 3:hl(t);break;case 12:hl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,hc(t)):hl(t);break;default:hl(t)}}function hc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Mt=l,By(l,t)}jy(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Ei(8,r,r.return),hc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,hc(r));break;default:hc(r)}t=t.sibling}}function By(t,r){for(;Mt!==null;){var a=Mt;switch(a.tag){case 0:case 11:case 15:Ei(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Xo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Mt=l;else e:for(a=t;Mt!==null;){l=Mt;var h=l.sibling,d=l.return;if(Oy(l),l===a){Mt=null;break e}if(h!==null){h.return=d,Mt=h;break e}Mt=d}}}var pb={getCacheForType:function(t){var r=Kt(xt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},yb=typeof WeakMap=="function"?WeakMap:Map,Ye=0,rt=null,Oe=null,je=0,$e=0,pn=null,bi=!1,Na=!1,sd=!1,Gr=0,dt=0,Ai=0,Os=0,ad=0,Dn=0,Da=0,fl=null,on=null,od=!1,ld=0,fc=1/0,dc=null,Si=null,Bt=0,Ri=null,Oa=null,Pa=0,ud=0,cd=null,qy=null,dl=0,hd=null;function yn(){if((Ye&2)!==0&&je!==0)return je&-je;if(G.T!==null){var t=Ea;return t!==0?t:_d()}return oi()}function Hy(){Dn===0&&(Dn=(je&536870912)===0||Fe?wo():536870912);var t=Nn.current;return t!==null&&(t.flags|=32),Dn}function _n(t,r,a){(t===rt&&($e===2||$e===9)||t.cancelPendingCommit!==null)&&(Va(t,0),Ii(t,je,Dn,!1)),br(t,a),((Ye&2)===0||t!==rt)&&(t===rt&&((Ye&2)===0&&(Os|=a),dt===4&&Ii(t,je,Dn,!1)),cr(t))}function Fy(t,r,a){if((Ye&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||is(t,r),h=l?Eb(t,r):md(t,r,!0),d=l;do{if(h===0){Na&&!l&&Ii(t,r,0,!1);break}else{if(a=t.current.alternate,d&&!_b(a)){h=md(t,r,!1),d=!1;continue}if(h===2){if(d=r,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var w=t;h=fl;var C=w.current.memoizedState.isDehydrated;if(C&&(Va(w,v).flags|=256),v=md(w,v,!1),v!==2){if(sd&&!C){w.errorRecoveryDisabledLanes|=d,Os|=d,h=4;break e}d=on,on=h,d!==null&&(on===null?on=d:on.push.apply(on,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Va(t,0),Ii(t,r,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Ii(l,r,Dn,!bi);break e;case 2:on=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=ld+300-En(),10<h)){if(Ii(l,r,Dn,!bi),Ws(l,0,!0)!==0)break e;l.timeoutHandle=v_(Gy.bind(null,l,a,on,dc,od,r,Dn,Os,Da,bi,d,2,-0,0),h);break e}Gy(l,a,on,dc,od,r,Dn,Os,Da,bi,d,0,-0,0)}}break}while(!0);cr(t)}function Gy(t,r,a,l,h,d,v,w,C,z,X,W,B,q){if(t.timeoutHandle=-1,W=r.subtreeFlags,(W&8192||(W&16785408)===16785408)&&(El={stylesheets:null,count:0,unsuspend:Jb},Uy(r),W=tA(),W!==null)){t.cancelPendingCommit=W(Zy.bind(null,t,r,d,a,l,h,v,w,C,X,1,B,q)),Ii(t,d,v,!z);return}Zy(t,r,d,a,l,h,v,w,C)}function _b(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!fn(d(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ii(t,r,a,l){r&=~ad,r&=~Os,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var d=31-Xt(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&Yn(t,a,r)}function mc(){return(Ye&6)===0?(ml(0),!1):!0}function fd(){if(Oe!==null){if($e===0)var t=Oe.return;else t=Oe,Lr=Rs=null,Cf(t),Ra=null,il=0,t=Oe;for(;t!==null;)Ay(t.alternate,t),t=t.return;Oe=null}}function Va(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,kb(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),fd(),rt=t,Oe=a=Vr(t.current,null),je=r,$e=0,pn=null,bi=!1,Na=is(t,r),sd=!1,Da=Dn=ad=Os=Ai=dt=0,on=fl=null,od=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Xt(l),d=1<<h;r|=t[h],l&=~d}return Gr=r,ku(),a}function Qy(t,r){Ne=null,G.H=tc,r===Yo||r===Gu?(r=up(),$e=3):r===ap?(r=up(),$e=4):$e=r===cy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,pn=r,Oe===null&&(dt=1,ac(t,Rn(r,t.current)))}function Xy(){var t=G.H;return G.H=tc,t===null?tc:t}function Ky(){var t=G.A;return G.A=pb,t}function dd(){dt=4,bi||(je&4194048)!==je&&Nn.current!==null||(Na=!0),(Ai&134217727)===0&&(Os&134217727)===0||rt===null||Ii(rt,je,Dn,!1)}function md(t,r,a){var l=Ye;Ye|=2;var h=Xy(),d=Ky();(rt!==t||je!==r)&&(dc=null,Va(t,r)),r=!1;var v=dt;e:do try{if($e!==0&&Oe!==null){var w=Oe,C=pn;switch($e){case 8:fd(),v=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(r=!0);var z=$e;if($e=0,pn=null,Ma(t,w,C,z),a&&Na){v=0;break e}break;default:z=$e,$e=0,pn=null,Ma(t,w,C,z)}}vb(),v=dt;break}catch(X){Qy(t,X)}while(!0);return r&&t.shellSuspendCounter++,Lr=Rs=null,Ye=l,G.H=h,G.A=d,Oe===null&&(rt=null,je=0,ku()),v}function vb(){for(;Oe!==null;)Yy(Oe)}function Eb(t,r){var a=Ye;Ye|=2;var l=Xy(),h=Ky();rt!==t||je!==r?(dc=null,fc=En()+500,Va(t,r)):Na=is(t,r);e:do try{if($e!==0&&Oe!==null){r=Oe;var d=pn;t:switch($e){case 1:$e=0,pn=null,Ma(t,r,d,1);break;case 2:case 9:if(op(d)){$e=0,pn=null,$y(r);break}r=function(){$e!==2&&$e!==9||rt!==t||($e=7),cr(t)},d.then(r,r);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:op(d)?($e=0,pn=null,$y(r)):($e=0,pn=null,Ma(t,r,d,7));break;case 5:var v=null;switch(Oe.tag){case 26:v=Oe.memoizedState;case 5:case 27:var w=Oe;if(!v||D_(v)){$e=0,pn=null;var C=w.sibling;if(C!==null)Oe=C;else{var z=w.return;z!==null?(Oe=z,gc(z)):Oe=null}break t}}$e=0,pn=null,Ma(t,r,d,5);break;case 6:$e=0,pn=null,Ma(t,r,d,6);break;case 8:fd(),dt=6;break e;default:throw Error(s(462))}}Tb();break}catch(X){Qy(t,X)}while(!0);return Lr=Rs=null,G.H=l,G.A=h,Ye=a,Oe!==null?0:(rt=null,je=0,ku(),dt)}function Tb(){for(;Oe!==null&&!_o();)Yy(Oe)}function Yy(t){var r=wy(t.alternate,t,Gr);t.memoizedProps=t.pendingProps,r===null?gc(t):Oe=r}function $y(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=py(a,r,r.pendingProps,r.type,void 0,je);break;case 11:r=py(a,r,r.pendingProps,r.type.render,r.ref,je);break;case 5:Cf(r);default:Ay(a,r),r=Oe=Wg(r,Gr),r=wy(a,r,Gr)}t.memoizedProps=t.pendingProps,r===null?gc(t):Oe=r}function Ma(t,r,a,l){Lr=Rs=null,Cf(r),Ra=null,il=0;var h=r.return;try{if(cb(t,h,r,a,je)){dt=1,ac(t,Rn(a,t.current)),Oe=null;return}}catch(d){if(h!==null)throw Oe=h,d;dt=1,ac(t,Rn(a,t.current)),Oe=null;return}r.flags&32768?(Fe||l===1?t=!0:Na||(je&536870912)!==0?t=!1:(bi=t=!0,(l===2||l===9||l===3||l===6)&&(l=Nn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Wy(r,t)):gc(r)}function gc(t){var r=t;do{if((r.flags&32768)!==0){Wy(r,bi);return}t=r.return;var a=fb(r.alternate,r,Gr);if(a!==null){Oe=a;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=t}while(r!==null);dt===0&&(dt=5)}function Wy(t,r){do{var a=db(t.alternate,t);if(a!==null){a.flags&=32767,Oe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=a}while(t!==null);dt=6,Oe=null}function Zy(t,r,a,l,h,d,v,w,C){t.cancelPendingCommit=null;do pc();while(Bt!==0);if((Ye&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=rf,Ao(t,a,d,v,w,C),t===rt&&(Oe=rt=null,je=0),Oa=r,Ri=t,Pa=a,ud=d,cd=h,qy=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Sb(es,function(){return r_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=G.T,G.T=null,h=ne.p,ne.p=2,v=Ye,Ye|=4;try{mb(t,r,a)}finally{Ye=v,ne.p=h,G.T=l}}Bt=1,Jy(),e_(),t_()}}function Jy(){if(Bt===1){Bt=0;var t=Ri,r=Oa,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var l=ne.p;ne.p=2;var h=Ye;Ye|=4;try{My(r,t);var d=Rd,v=Bg(t.containerInfo),w=d.focusedElem,C=d.selectionRange;if(v!==w&&w&&w.ownerDocument&&zg(w.ownerDocument.documentElement,w)){if(C!==null&&Zh(w)){var z=C.start,X=C.end;if(X===void 0&&(X=z),"selectionStart"in w)w.selectionStart=z,w.selectionEnd=Math.min(X,w.value.length);else{var W=w.ownerDocument||document,B=W&&W.defaultView||window;if(B.getSelection){var q=B.getSelection(),Se=w.textContent.length,ve=Math.min(C.start,Se),et=C.end===void 0?ve:Math.min(C.end,Se);!q.extend&&ve>et&&(v=et,et=ve,ve=v);var k=jg(w,ve),V=jg(w,et);if(k&&V&&(q.rangeCount!==1||q.anchorNode!==k.node||q.anchorOffset!==k.offset||q.focusNode!==V.node||q.focusOffset!==V.offset)){var U=W.createRange();U.setStart(k.node,k.offset),q.removeAllRanges(),ve>et?(q.addRange(U),q.extend(V.node,V.offset)):(U.setEnd(V.node,V.offset),q.addRange(U))}}}}for(W=[],q=w;q=q.parentNode;)q.nodeType===1&&W.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<W.length;w++){var K=W[w];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}xc=!!Sd,Rd=Sd=null}finally{Ye=h,ne.p=l,G.T=a}}t.current=r,Bt=2}}function e_(){if(Bt===2){Bt=0;var t=Ri,r=Oa,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var l=ne.p;ne.p=2;var h=Ye;Ye|=4;try{Dy(t,r.alternate,r)}finally{Ye=h,ne.p=l,G.T=a}}Bt=3}}function t_(){if(Bt===4||Bt===3){Bt=0,hu();var t=Ri,r=Oa,a=Pa,l=qy;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Bt=5:(Bt=0,Oa=Ri=null,n_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Si=null),Zs(a),r=r.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(ht,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=G.T,h=ne.p,ne.p=2,G.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var w=l[v];d(w.value,{componentStack:w.stack})}}finally{G.T=r,ne.p=h}}(Pa&3)!==0&&pc(),cr(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===hd?dl++:(dl=0,hd=t):dl=0,ml(0)}}function n_(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,Xo(r)))}function pc(t){return Jy(),e_(),t_(),r_()}function r_(){if(Bt!==5)return!1;var t=Ri,r=ud;ud=0;var a=Zs(Pa),l=G.T,h=ne.p;try{ne.p=32>a?32:a,G.T=null,a=cd,cd=null;var d=Ri,v=Pa;if(Bt=0,Oa=Ri=null,Pa=0,(Ye&6)!==0)throw Error(s(331));var w=Ye;if(Ye|=4,zy(d.current),Ly(d,d.current,v,a),Ye=w,ml(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(ht,d)}catch{}return!0}finally{ne.p=h,G.T=l,n_(t,r)}}function i_(t,r,a){r=Rn(a,r),r=Hf(t.stateNode,r,2),t=pi(t,r,2),t!==null&&(br(t,2),cr(t))}function nt(t,r,a){if(t.tag===3)i_(t,t,a);else for(;r!==null;){if(r.tag===3){i_(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Si===null||!Si.has(l))){t=Rn(a,t),a=ly(2),l=pi(r,a,2),l!==null&&(uy(a,l,r,t),br(l,2),cr(l));break}}r=r.return}}function gd(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new yb;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(sd=!0,h.add(a),t=wb.bind(null,t,r,a),r.then(t,t))}function wb(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,rt===t&&(je&a)===a&&(dt===4||dt===3&&(je&62914560)===je&&300>En()-ld?(Ye&2)===0&&Va(t,0):ad|=a,Da===je&&(Da=0)),cr(t)}function s_(t,r){r===0&&(r=bo()),t=pa(t,r),t!==null&&(br(t,r),cr(t))}function bb(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),s_(t,a)}function Ab(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),s_(t,a)}function Sb(t,r){return Zi(t,r)}var yc=null,ka=null,pd=!1,_c=!1,yd=!1,Ps=0;function cr(t){t!==ka&&t.next===null&&(ka===null?yc=ka=t:ka=ka.next=t),_c=!0,pd||(pd=!0,Ib())}function ml(t,r){if(!yd&&_c){yd=!0;do for(var a=!1,l=yc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,w=l.pingedLanes;d=(1<<31-Xt(42|t)+1)-1,d&=h&~(v&~w),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,u_(l,d))}else d=je,d=Ws(l,l===rt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||is(l,d)||(a=!0,u_(l,d));l=l.next}while(a);yd=!1}}function Rb(){a_()}function a_(){_c=pd=!1;var t=0;Ps!==0&&(Mb()&&(t=Ps),Ps=0);for(var r=En(),a=null,l=yc;l!==null;){var h=l.next,d=o_(l,r);d===0?(l.next=null,a===null?yc=h:a.next=h,h===null&&(ka=a)):(a=l,(t!==0||(d&3)!==0)&&(_c=!0)),l=h}ml(t)}function o_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-Xt(d),w=1<<v,C=h[v];C===-1?((w&a)===0||(w&l)!==0)&&(h[v]=To(w,r)):C<=r&&(t.expiredLanes|=w),d&=~w}if(r=rt,a=je,a=Ws(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&($e===2||$e===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ji(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||is(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Ji(l),Zs(a)){case 2:case 8:a=Ys;break;case 32:a=es;break;case 268435456:a=$s;break;default:a=es}return l=l_.bind(null,t),a=Zi(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Ji(l),t.callbackPriority=2,t.callbackNode=null,2}function l_(t,r){if(Bt!==0&&Bt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(pc()&&t.callbackNode!==a)return null;var l=je;return l=Ws(t,t===rt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Fy(t,l,r),o_(t,En()),t.callbackNode!=null&&t.callbackNode===a?l_.bind(null,t):null)}function u_(t,r){if(pc())return null;Fy(t,r,!0)}function Ib(){Lb(function(){(Ye&6)!==0?Zi(vo,Rb):a_()})}function _d(){return Ps===0&&(Ps=wo()),Ps}function c_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ia(""+t)}function h_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function xb(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var d=c_((h[_t]||null).action),v=l.submitter;v&&(r=(r=v[_t]||null)?c_(r.formAction):v.getAttribute("formAction"),r!==null&&(d=r,v=null));var w=new sa("action","action",null,l,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ps!==0){var C=v?h_(h,v):new FormData(h);Uf(a,{pending:!0,data:C,method:h.method,action:d},null,C)}}else typeof d=="function"&&(w.preventDefault(),C=v?h_(h,v):new FormData(h),Uf(a,{pending:!0,data:C,method:h.method,action:d},d,C))},currentTarget:h}]})}}for(var vd=0;vd<nf.length;vd++){var Ed=nf[vd],Cb=Ed.toLowerCase(),Nb=Ed[0].toUpperCase()+Ed.slice(1);jn(Cb,"on"+Nb)}jn(Fg,"onAnimationEnd"),jn(Gg,"onAnimationIteration"),jn(Qg,"onAnimationStart"),jn("dblclick","onDoubleClick"),jn("focusin","onFocus"),jn("focusout","onBlur"),jn(Xw,"onTransitionRun"),jn(Kw,"onTransitionStart"),jn(Yw,"onTransitionCancel"),jn(Xg,"onTransitionEnd"),Sr("onMouseEnter",["mouseout","mouseover"]),Sr("onMouseLeave",["mouseout","mouseover"]),Sr("onPointerEnter",["pointerout","pointerover"]),Sr("onPointerLeave",["pointerout","pointerover"]),Ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ln("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Db=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gl));function f_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var v=l.length-1;0<=v;v--){var w=l[v],C=w.instance,z=w.currentTarget;if(w=w.listener,C!==d&&h.isPropagationStopped())break e;d=w,h.currentTarget=z;try{d(h)}catch(X){sc(X)}h.currentTarget=null,d=C}else for(v=0;v<l.length;v++){if(w=l[v],C=w.instance,z=w.currentTarget,w=w.listener,C!==d&&h.isPropagationStopped())break e;d=w,h.currentTarget=z;try{d(h)}catch(X){sc(X)}h.currentTarget=null,d=C}}}}function Pe(t,r){var a=r[Ro];a===void 0&&(a=r[Ro]=new Set);var l=t+"__bubble";a.has(l)||(d_(r,t,2,!1),a.add(l))}function Td(t,r,a){var l=0;r&&(l|=4),d_(a,t,l,r)}var vc="_reactListening"+Math.random().toString(36).slice(2);function wd(t){if(!t[vc]){t[vc]=!0,Io.forEach(function(a){a!=="selectionchange"&&(Db.has(a)||Td(a,!1,t),Td(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[vc]||(r[vc]=!0,Td("selectionchange",!1,r))}}function d_(t,r,a,l){switch(L_(r)){case 2:var h=iA;break;case 8:h=sA;break;default:h=kd}a=h.bind(null,r,a,t),h=void 0,!An||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function bd(t,r,a,l,h){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var w=l.stateNode.containerInfo;if(w===h)break;if(v===4)for(v=l.return;v!==null;){var C=v.tag;if((C===3||C===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;w!==null;){if(v=Ar(w),v===null)return;if(C=v.tag,C===5||C===6||C===26||C===27){l=d=v;continue e}w=w.parentNode}}l=l.return}Tu(function(){var z=d,X=bn(a),W=[];e:{var B=Kg.get(t);if(B!==void 0){var q=sa,Se=t;switch(t){case"keypress":if(tr(a)===0)break e;case"keydown":case"keyup":q=ha;break;case"focusin":Se="focus",q=la;break;case"focusout":Se="blur",q=la;break;case"beforeblur":case"afterblur":q=la;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Kh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Cu;break;case Fg:case Gg:case Qg:q=ua;break;case Xg:q=Du;break;case"scroll":case"scrollend":q=wu;break;case"wheel":q=fa;break;case"copy":case"cut":case"paste":q=ca;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=jo;break;case"toggle":case"beforetoggle":q=Pu}var ve=(r&4)!==0,et=!ve&&(t==="scroll"||t==="scrollend"),k=ve?B!==null?B+"Capture":null:B;ve=[];for(var V=z,U;V!==null;){var K=V;if(U=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||U===null||k===null||(K=fs(V,k),K!=null&&ve.push(pl(V,K,U))),et)break;V=V.return}0<ve.length&&(B=new q(B,Se,null,a,X),W.push({event:B,listeners:ve}))}}if((r&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",B&&a!==xr&&(Se=a.relatedTarget||a.fromElement)&&(Ar(Se)||Se[Tn]))break e;if((q||B)&&(B=X.window===X?X:(B=X.ownerDocument)?B.defaultView||B.parentWindow:window,q?(Se=a.relatedTarget||a.toElement,q=z,Se=Se?Ar(Se):null,Se!==null&&(et=u(Se),ve=Se.tag,Se!==et||ve!==5&&ve!==27&&ve!==6)&&(Se=null)):(q=null,Se=z),q!==Se)){if(ve=Sn,K="onMouseLeave",k="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(ve=jo,K="onPointerLeave",k="onPointerEnter",V="pointer"),et=q==null?B:Wn(q),U=Se==null?B:Wn(Se),B=new ve(K,V+"leave",q,a,X),B.target=et,B.relatedTarget=U,K=null,Ar(X)===z&&(ve=new ve(k,V+"enter",Se,a,X),ve.target=U,ve.relatedTarget=et,K=ve),et=K,q&&Se)t:{for(ve=q,k=Se,V=0,U=ve;U;U=La(U))V++;for(U=0,K=k;K;K=La(K))U++;for(;0<V-U;)ve=La(ve),V--;for(;0<U-V;)k=La(k),U--;for(;V--;){if(ve===k||k!==null&&ve===k.alternate)break t;ve=La(ve),k=La(k)}ve=null}else ve=null;q!==null&&m_(W,B,q,ve,!1),Se!==null&&et!==null&&m_(W,et,Se,ve,!0)}}e:{if(B=z?Wn(z):window,q=B.nodeName&&B.nodeName.toLowerCase(),q==="select"||q==="input"&&B.type==="file")var ue=Pg;else if(It(B))if(Vg)ue=Fw;else{ue=qw;var De=Bw}else q=B.nodeName,!q||q.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&Oo(z.elementType)&&(ue=Pg):ue=Hw;if(ue&&(ue=ue(t,z))){Pr(W,ue,a,X);break e}De&&De(t,B,z),t==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&hi(B,"number",B.value)}switch(De=z?Wn(z):window,t){case"focusin":(It(De)||De.contentEditable==="true")&&(da=De,Jh=z,qo=null);break;case"focusout":qo=Jh=da=null;break;case"mousedown":ef=!0;break;case"contextmenu":case"mouseup":case"dragend":ef=!1,qg(W,a,X);break;case"selectionchange":if(Qw)break;case"keydown":case"keyup":qg(W,a,X)}var de;if(ir)e:{switch(t){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Le?F(t,a)&&(Ee="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(_&&a.locale!=="ko"&&(Le||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Le&&(de=Vo()):(er=X,fi="value"in er?er.value:er.textContent,Le=!0)),De=Ec(z,Ee),0<De.length&&(Ee=new Lo(Ee,t,null,a,X),W.push({event:Ee,listeners:De}),de?Ee.data=de:(de=te(a),de!==null&&(Ee.data=de)))),(de=g?Rt(t,a):Ue(t,a))&&(Ee=Ec(z,"onBeforeInput"),0<Ee.length&&(De=new Lo("onBeforeInput","beforeinput",null,a,X),W.push({event:De,listeners:Ee}),De.data=de)),xb(W,t,z,a,X)}f_(W,r)})}function pl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Ec(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=fs(t,a),h!=null&&l.unshift(pl(t,h,d)),h=fs(t,r),h!=null&&l.push(pl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function La(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function m_(t,r,a,l,h){for(var d=r._reactName,v=[];a!==null&&a!==l;){var w=a,C=w.alternate,z=w.stateNode;if(w=w.tag,C!==null&&C===l)break;w!==5&&w!==26&&w!==27||z===null||(C=z,h?(z=fs(a,d),z!=null&&v.unshift(pl(a,z,C))):h||(z=fs(a,d),z!=null&&v.push(pl(a,z,C)))),a=a.return}v.length!==0&&t.push({event:r,listeners:v})}var Ob=/\r\n?/g,Pb=/\u0000|\uFFFD/g;function g_(t){return(typeof t=="string"?t:""+t).replace(Ob,`
`).replace(Pb,"")}function p_(t,r){return r=g_(r),g_(t)===r}function Tc(){}function Je(t,r,a,l,h,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||wn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&wn(t,""+l);break;case"className":Zn(t,"class",l);break;case"tabIndex":Zn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Zn(t,a,l);break;case"style":Do(t,l,d);break;case"data":if(r!=="object"){Zn(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ia(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&Je(t,r,"name",h.name,h,null),Je(t,r,"formEncType",h.formEncType,h,null),Je(t,r,"formMethod",h.formMethod,h,null),Je(t,r,"formTarget",h.formTarget,h,null)):(Je(t,r,"encType",h.encType,h,null),Je(t,r,"method",h.method,h,null),Je(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ia(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Tc);break;case"onScroll":l!=null&&Pe("scroll",t);break;case"onScrollEnd":l!=null&&Pe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ia(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Pe("beforetoggle",t),Pe("toggle",t),ci(t,"popover",l);break;case"xlinkActuate":Ut(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ut(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ut(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ut(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ut(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ut(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ci(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Qh.get(a)||a,ci(t,a,l))}}function Ad(t,r,a,l,h,d){switch(a){case"style":Do(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?wn(t,l):(typeof l=="number"||typeof l=="bigint")&&wn(t,""+l);break;case"onScroll":l!=null&&Pe("scroll",t);break;case"onScrollEnd":l!=null&&Pe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Tc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Js.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),d=t[_t]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(r,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ci(t,a,l)}}}function qt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",t),Pe("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Je(t,r,d,v,a,null)}}h&&Je(t,r,"srcSet",a.srcSet,a,null),l&&Je(t,r,"src",a.src,a,null);return;case"input":Pe("invalid",t);var w=d=v=h=null,C=null,z=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":h=X;break;case"type":v=X;break;case"checked":C=X;break;case"defaultChecked":z=X;break;case"value":d=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:Je(t,r,l,X,a,null)}}us(t,d,w,C,z,v,h,!1),ra(t);return;case"select":Pe("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":d=w;break;case"defaultValue":v=w;break;case"multiple":l=w;default:Je(t,r,h,w,a,null)}r=d,a=v,t.multiple=!!l,r!=null?Ir(t,!!l,r,!1):a!=null&&Ir(t,!!l,a,!0);return;case"textarea":Pe("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(w=a[v],w!=null))switch(v){case"value":l=w;break;case"defaultValue":h=w;break;case"children":d=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:Je(t,r,v,w,a,null)}cs(t,l,h,d),ra(t);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Je(t,r,C,l,a,null)}return;case"dialog":Pe("beforetoggle",t),Pe("toggle",t),Pe("cancel",t),Pe("close",t);break;case"iframe":case"object":Pe("load",t);break;case"video":case"audio":for(l=0;l<gl.length;l++)Pe(gl[l],t);break;case"image":Pe("error",t),Pe("load",t);break;case"details":Pe("toggle",t);break;case"embed":case"source":case"link":Pe("error",t),Pe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Je(t,r,z,l,a,null)}return;default:if(Oo(r)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&Ad(t,r,X,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&Je(t,r,w,l,a,null))}function Vb(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,w=null,C=null,z=null,X=null;for(q in a){var W=a[q];if(a.hasOwnProperty(q)&&W!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":C=W;default:l.hasOwnProperty(q)||Je(t,r,q,null,l,W)}}for(var B in l){var q=l[B];if(W=a[B],l.hasOwnProperty(B)&&(q!=null||W!=null))switch(B){case"type":d=q;break;case"name":h=q;break;case"checked":z=q;break;case"defaultChecked":X=q;break;case"value":v=q;break;case"defaultValue":w=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,r));break;default:q!==W&&Je(t,r,B,q,l,W)}}hn(t,v,w,C,z,X,d,h);return;case"select":q=v=w=B=null;for(d in a)if(C=a[d],a.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":q=C;default:l.hasOwnProperty(d)||Je(t,r,d,null,l,C)}for(h in l)if(d=l[h],C=a[h],l.hasOwnProperty(h)&&(d!=null||C!=null))switch(h){case"value":B=d;break;case"defaultValue":w=d;break;case"multiple":v=d;default:d!==C&&Je(t,r,h,d,l,C)}r=w,a=v,l=q,B!=null?Ir(t,!!a,B,!1):!!l!=!!a&&(r!=null?Ir(t,!!a,r,!0):Ir(t,!!a,a?[]:"",!1));return;case"textarea":q=B=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Je(t,r,w,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":B=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Je(t,r,v,h,l,d)}We(t,B,q);return;case"option":for(var Se in a)if(B=a[Se],a.hasOwnProperty(Se)&&B!=null&&!l.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:Je(t,r,Se,null,l,B)}for(C in l)if(B=l[C],q=a[C],l.hasOwnProperty(C)&&B!==q&&(B!=null||q!=null))switch(C){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Je(t,r,C,B,l,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)B=a[ve],a.hasOwnProperty(ve)&&B!=null&&!l.hasOwnProperty(ve)&&Je(t,r,ve,null,l,B);for(z in l)if(B=l[z],q=a[z],l.hasOwnProperty(z)&&B!==q&&(B!=null||q!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,r));break;default:Je(t,r,z,B,l,q)}return;default:if(Oo(r)){for(var et in a)B=a[et],a.hasOwnProperty(et)&&B!==void 0&&!l.hasOwnProperty(et)&&Ad(t,r,et,void 0,l,B);for(X in l)B=l[X],q=a[X],!l.hasOwnProperty(X)||B===q||B===void 0&&q===void 0||Ad(t,r,X,B,l,q);return}}for(var k in a)B=a[k],a.hasOwnProperty(k)&&B!=null&&!l.hasOwnProperty(k)&&Je(t,r,k,null,l,B);for(W in l)B=l[W],q=a[W],!l.hasOwnProperty(W)||B===q||B==null&&q==null||Je(t,r,W,B,l,q)}var Sd=null,Rd=null;function wc(t){return t.nodeType===9?t:t.ownerDocument}function y_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function __(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Id(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var xd=null;function Mb(){var t=window.event;return t&&t.type==="popstate"?t===xd?!1:(xd=t,!0):(xd=null,!1)}var v_=typeof setTimeout=="function"?setTimeout:void 0,kb=typeof clearTimeout=="function"?clearTimeout:void 0,E_=typeof Promise=="function"?Promise:void 0,Lb=typeof queueMicrotask=="function"?queueMicrotask:typeof E_<"u"?function(t){return E_.resolve(null).then(t).catch(Ub)}:v_;function Ub(t){setTimeout(function(){throw t})}function xi(t){return t==="head"}function T_(t,r){var a=r,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var v=t.ownerDocument;if(a&1&&yl(v.documentElement),a&2&&yl(v.body),a&4)for(a=v.head,yl(a),v=a.firstChild;v;){var w=v.nextSibling,C=v.nodeName;v[ss]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=w}}if(h===0){t.removeChild(d),Sl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Sl(r)}function Cd(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Cd(a),ui(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function jb(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ss])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Bn(t.nextSibling),t===null)break}return null}function zb(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Bn(t.nextSibling),t===null))return null;return t}function Nd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Bb(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Bn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var Dd=null;function w_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function b_(t,r,a){switch(r=wc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function yl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ui(t)}var On=new Map,A_=new Set;function bc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Qr=ne.d;ne.d={f:qb,r:Hb,D:Fb,C:Gb,L:Qb,m:Xb,X:Yb,S:Kb,M:$b};function qb(){var t=Qr.f(),r=mc();return t||r}function Hb(t){var r=$n(t);r!==null&&r.tag===5&&r.type==="form"?Fp(r):Qr.r(t)}var Ua=typeof document>"u"?null:document;function S_(t,r,a){var l=Ua;if(l&&typeof r=="string"&&r){var h=vt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),A_.has(h)||(A_.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),qt(r,"link",t),mt(r),l.head.appendChild(r)))}}function Fb(t){Qr.D(t),S_("dns-prefetch",t,null)}function Gb(t,r){Qr.C(t,r),S_("preconnect",t,r)}function Qb(t,r,a){Qr.L(t,r,a);var l=Ua;if(l&&t&&r){var h='link[rel="preload"][as="'+vt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+vt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+vt(a.imageSizes)+'"]')):h+='[href="'+vt(t)+'"]';var d=h;switch(r){case"style":d=ja(t);break;case"script":d=za(t)}On.has(d)||(t=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),On.set(d,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(_l(d))||r==="script"&&l.querySelector(vl(d))||(r=l.createElement("link"),qt(r,"link",t),mt(r),l.head.appendChild(r)))}}function Xb(t,r){Qr.m(t,r);var a=Ua;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+vt(l)+'"][href="'+vt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=za(t)}if(!On.has(d)&&(t=T({rel:"modulepreload",href:t},r),On.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(vl(d)))return}l=a.createElement("link"),qt(l,"link",t),mt(l),a.head.appendChild(l)}}}function Kb(t,r,a){Qr.S(t,r,a);var l=Ua;if(l&&t){var h=en(l).hoistableStyles,d=ja(t);r=r||"default";var v=h.get(d);if(!v){var w={loading:0,preload:null};if(v=l.querySelector(_l(d)))w.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},a),(a=On.get(d))&&Od(t,a);var C=v=l.createElement("link");mt(C),qt(C,"link",t),C._p=new Promise(function(z,X){C.onload=z,C.onerror=X}),C.addEventListener("load",function(){w.loading|=1}),C.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Ac(v,r,l)}v={type:"stylesheet",instance:v,count:1,state:w},h.set(d,v)}}}function Yb(t,r){Qr.X(t,r);var a=Ua;if(a&&t){var l=en(a).hoistableScripts,h=za(t),d=l.get(h);d||(d=a.querySelector(vl(h)),d||(t=T({src:t,async:!0},r),(r=On.get(h))&&Pd(t,r),d=a.createElement("script"),mt(d),qt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function $b(t,r){Qr.M(t,r);var a=Ua;if(a&&t){var l=en(a).hoistableScripts,h=za(t),d=l.get(h);d||(d=a.querySelector(vl(h)),d||(t=T({src:t,async:!0,type:"module"},r),(r=On.get(h))&&Pd(t,r),d=a.createElement("script"),mt(d),qt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function R_(t,r,a,l){var h=(h=Ae.current)?bc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=ja(a.href),a=en(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ja(a.href);var d=en(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(_l(t)))&&!d._p&&(v.instance=d,v.state.loading=5),On.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},On.set(t,a),d||Wb(h,t,a,v.state))),r&&l===null)throw Error(s(528,""));return v}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=za(a),a=en(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function ja(t){return'href="'+vt(t)+'"'}function _l(t){return'link[rel="stylesheet"]['+t+"]"}function I_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function Wb(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),qt(r,"link",a),mt(r),t.head.appendChild(r))}function za(t){return'[src="'+vt(t)+'"]'}function vl(t){return"script[async]"+t}function x_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+vt(a.href)+'"]');if(l)return r.instance=l,mt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),mt(l),qt(l,"style",h),Ac(l,a.precedence,t),r.instance=l;case"stylesheet":h=ja(a.href);var d=t.querySelector(_l(h));if(d)return r.state.loading|=4,r.instance=d,mt(d),d;l=I_(a),(h=On.get(h))&&Od(l,h),d=(t.ownerDocument||t).createElement("link"),mt(d);var v=d;return v._p=new Promise(function(w,C){v.onload=w,v.onerror=C}),qt(d,"link",l),r.state.loading|=4,Ac(d,a.precedence,t),r.instance=d;case"script":return d=za(a.src),(h=t.querySelector(vl(d)))?(r.instance=h,mt(h),h):(l=a,(h=On.get(d))&&(l=T({},a),Pd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),mt(h),qt(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Ac(l,a.precedence,t));return r.instance}function Ac(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var w=l[v];if(w.dataset.precedence===r)d=w;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Od(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Pd(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Sc=null;function C_(t,r,a){if(Sc===null){var l=new Map,h=Sc=new Map;h.set(a,l)}else h=Sc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[ss]||d[St]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(r)||"";v=t+v;var w=l.get(v);w?w.push(d):l.set(v,[d])}}return l}function N_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function Zb(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function D_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var El=null;function Jb(){}function eA(t,r,a){if(El===null)throw Error(s(475));var l=El;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=ja(a.href),d=t.querySelector(_l(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Rc.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=d,mt(d);return}d=t.ownerDocument||t,a=I_(a),(h=On.get(h))&&Od(a,h),d=d.createElement("link"),mt(d);var v=d;v._p=new Promise(function(w,C){v.onload=w,v.onerror=C}),qt(d,"link",a),r.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Rc.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function tA(){if(El===null)throw Error(s(475));var t=El;return t.stylesheets&&t.count===0&&Vd(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&Vd(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Rc(){if(this.count--,this.count===0){if(this.stylesheets)Vd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ic=null;function Vd(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ic=new Map,r.forEach(nA,t),Ic=null,Rc.call(t))}function nA(t,r){if(!(r.state.loading&4)){var a=Ic.get(t);if(a)var l=a.get(null);else{a=new Map,Ic.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=r.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=Rc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Tl={$$typeof:ae,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function rA(t,r,a,l,h,d,v,w){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wr(0),this.hiddenUpdates=wr(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function O_(t,r,a,l,h,d,v,w,C,z,X,W){return t=new rA(t,r,a,v,w,C,z,W),r=1,d===!0&&(r|=24),d=dn(3,null,null,r),t.current=d,d.stateNode=t,r=gf(),r.refCount++,t.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},vf(d),t}function P_(t){return t?(t=ya,t):ya}function V_(t,r,a,l,h,d){h=P_(h),l.context===null?l.context=h:l.pendingContext=h,l=gi(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=pi(t,l,r),a!==null&&(_n(a,t,r),Wo(a,t,r))}function M_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Md(t,r){M_(t,r),(t=t.alternate)&&M_(t,r)}function k_(t){if(t.tag===13){var r=pa(t,67108864);r!==null&&_n(r,t,67108864),Md(t,67108864)}}var xc=!0;function iA(t,r,a,l){var h=G.T;G.T=null;var d=ne.p;try{ne.p=2,kd(t,r,a,l)}finally{ne.p=d,G.T=h}}function sA(t,r,a,l){var h=G.T;G.T=null;var d=ne.p;try{ne.p=8,kd(t,r,a,l)}finally{ne.p=d,G.T=h}}function kd(t,r,a,l){if(xc){var h=Ld(l);if(h===null)bd(t,r,l,Cc,a),U_(t,l);else if(oA(h,t,r,a,l))l.stopPropagation();else if(U_(t,l),r&4&&-1<aA.indexOf(t)){for(;h!==null;){var d=$n(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=kn(d.pendingLanes);if(v!==0){var w=d;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var C=1<<31-Xt(v);w.entanglements[1]|=C,v&=~C}cr(d),(Ye&6)===0&&(fc=En()+500,ml(0))}}break;case 13:w=pa(d,2),w!==null&&_n(w,d,2),mc(),Md(d,2)}if(d=Ld(l),d===null&&bd(t,r,l,Cc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else bd(t,r,l,null,a)}}function Ld(t){return t=bn(t),Ud(t)}var Cc=null;function Ud(t){if(Cc=null,t=Ar(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=f(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Cc=t,null}function L_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zh()){case vo:return 2;case Ys:return 8;case es:case Bh:return 32;case $s:return 268435456;default:return 32}default:return 32}}var jd=!1,Ci=null,Ni=null,Di=null,wl=new Map,bl=new Map,Oi=[],aA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U_(t,r){switch(t){case"focusin":case"focusout":Ci=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":wl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":bl.delete(r.pointerId)}}function Al(t,r,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},r!==null&&(r=$n(r),r!==null&&k_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function oA(t,r,a,l,h){switch(r){case"focusin":return Ci=Al(Ci,t,r,a,l,h),!0;case"dragenter":return Ni=Al(Ni,t,r,a,l,h),!0;case"mouseover":return Di=Al(Di,t,r,a,l,h),!0;case"pointerover":var d=h.pointerId;return wl.set(d,Al(wl.get(d)||null,t,r,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,bl.set(d,Al(bl.get(d)||null,t,r,a,l,h)),!0}return!1}function j_(t){var r=Ar(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=f(a),r!==null){t.blockedOn=r,mu(t.priority,function(){if(a.tag===13){var l=yn();l=ai(l);var h=pa(a,l);h!==null&&_n(h,a,l),Md(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nc(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Ld(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);xr=l,a.target.dispatchEvent(l),xr=null}else return r=$n(a),r!==null&&k_(r),t.blockedOn=a,!1;r.shift()}return!0}function z_(t,r,a){Nc(t)&&a.delete(r)}function lA(){jd=!1,Ci!==null&&Nc(Ci)&&(Ci=null),Ni!==null&&Nc(Ni)&&(Ni=null),Di!==null&&Nc(Di)&&(Di=null),wl.forEach(z_),bl.forEach(z_)}function Dc(t,r){t.blockedOn===r&&(t.blockedOn=null,jd||(jd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,lA)))}var Oc=null;function B_(t){Oc!==t&&(Oc=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Oc===t&&(Oc=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(Ud(l||a)===null)continue;break}var d=$n(a);d!==null&&(t.splice(r,3),r-=3,Uf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Sl(t){function r(C){return Dc(C,t)}Ci!==null&&Dc(Ci,t),Ni!==null&&Dc(Ni,t),Di!==null&&Dc(Di,t),wl.forEach(r),bl.forEach(r);for(var a=0;a<Oi.length;a++){var l=Oi[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Oi.length&&(a=Oi[0],a.blockedOn===null);)j_(a),a.blockedOn===null&&Oi.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[_t]||null;if(typeof d=="function")v||B_(a);else if(v){var w=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[_t]||null)w=v.formAction;else if(Ud(h)!==null)continue}else w=v.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),B_(a)}}}function zd(t){this._internalRoot=t}Pc.prototype.render=zd.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=yn();V_(a,l,t,r,null,null)},Pc.prototype.unmount=zd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;V_(t.current,2,null,t,null,null),mc(),r[Tn]=null}};function Pc(t){this._internalRoot=t}Pc.prototype.unstable_scheduleHydration=function(t){if(t){var r=oi();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Oi.length&&r!==0&&r<Oi[a].priority;a++);Oi.splice(a,0,t),a===0&&j_(t)}};var q_=e.version;if(q_!=="19.1.1")throw Error(s(527,q_,"19.1.1"));ne.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var uA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vc.isDisabled&&Vc.supportsFiber)try{ht=Vc.inject(uA),Ke=Vc}catch{}}return Il.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=iy,d=sy,v=ay,w=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(w=r.unstable_transitionCallbacks)),r=O_(t,1,!1,null,null,a,l,h,d,v,w,null),t[Tn]=r.current,wd(t),new zd(r)},Il.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=iy,v=sy,w=ay,C=null,z=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(C=a.unstable_transitionCallbacks),a.formState!==void 0&&(z=a.formState)),r=O_(t,1,!0,r,a??null,l,h,d,v,w,C,z),r.context=P_(null),a=r.current,l=yn(),l=ai(l),h=gi(l),h.callback=null,pi(a,h,l),a=l,r.current.lanes=a,br(r,a),cr(r),t[Tn]=r.current,wd(t),new Pc(r)},Il.version="19.1.1",Il}var Z_;function EA(){if(Z_)return Hd.exports;Z_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Hd.exports=vA(),Hd.exports}var TA=EA();const wA=z0(TA);var it=(i=>(i[i.Setup=0]="Setup",i[i.Login=1]="Login",i[i.Shop=2]="Shop",i[i.PackSelection=3]="PackSelection",i[i.RoundConfiguration=4]="RoundConfiguration",i[i.Game=5]="Game",i[i.RoundEnd=6]="RoundEnd",i[i.GameEnd=7]="GameEnd",i))(it||{});const Qn=({children:i,className:e})=>E.jsx("div",{className:`bg-gray-800 border border-purple-500/30 rounded-2xl shadow-lg shadow-purple-900/20 p-6 sm:p-8 ${e}`,children:i}),bA=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),AA=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),B0=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),q0=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),Ga=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),SA=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),H0=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),RA=({players:i,setPlayers:e})=>{const[n,s]=he.useState(""),o=f=>{f.preventDefault(),n.trim()&&!i.includes(n.trim())&&(e([...i,n.trim()]),s(""))},u=f=>{e(i.filter((m,p)=>p!==f))};return E.jsxs(Qn,{children:[E.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-pink-400",children:"Añadir Jugadores"}),E.jsxs("form",{onSubmit:o,className:"flex gap-2 mb-4",children:[E.jsx("input",{type:"text",value:n,onChange:f=>s(f.target.value),placeholder:"Nombre del jugador",className:"flex-grow bg-gray-700 border border-gray-600 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"}),E.jsx("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md transition",children:"Añadir"})]}),E.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:i.map((f,m)=>E.jsxs("li",{className:"flex justify-between items-center bg-gray-700/50 p-2 rounded-md animate-fade-in",children:[E.jsx("span",{className:"font-medium",children:f}),E.jsx("button",{onClick:()=>u(m),className:"text-gray-400 hover:text-red-500 transition",children:E.jsx(bA,{className:"w-5 h-5"})})]},m))})]})},tt=({children:i,variant:e="primary",className:n,...s})=>{const o="px-6 py-3 font-bold rounded-lg text-white transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 disabled:opacity-50 disabled:cursor-not-allowed",u={primary:"bg-purple-600 hover:bg-purple-700 focus:ring-purple-500/50 shadow-lg shadow-purple-600/30",secondary:"bg-pink-500 hover:bg-pink-600 focus:ring-pink-500/50 shadow-lg shadow-pink-500/30",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500/50"};return E.jsx("button",{className:`${o} ${u[e]} ${n}`,...s,children:i})},IA=({availablePacks:i,purchasedPacks:e,onContinue:n,onBack:s,onGoToShop:o})=>{const m=i.some(p=>p.id==="base")?i:[{id:"base",name:"Pack Base",description:"Preguntas y retos básicos incluidos",price:"INCLUIDO",icon:"🎮",questionsUrl:"",daresUrl:""},...i];return e.length>0,E.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:E.jsxs(Qn,{className:"w-full max-w-2xl text-center",children:[E.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Packs Disponibles"}),E.jsx("p",{className:"text-gray-400 mb-8",children:"Estos son los packs que tienes disponibles para jugar"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:m.map(p=>{const y=p.id==="base"||e.includes(p.id),T=p.id==="base";return E.jsxs("div",{className:`relative p-4 rounded-lg border transition-all duration-200 ${y?"border-green-500 bg-green-500/10":"border-gray-600 bg-gray-800/50 opacity-60"}`,children:[E.jsx("div",{className:"absolute top-2 right-2",children:y?E.jsx(AA,{className:"w-6 h-6 text-green-500"}):E.jsx(Ga,{className:"w-6 h-6 text-yellow-500"})}),E.jsx("div",{className:"text-4xl mb-2",children:p.icon}),E.jsx("h3",{className:`text-xl font-bold mb-2 ${y?"text-white":"text-gray-400"}`,children:p.name}),E.jsx("p",{className:`text-sm mb-3 ${y?"text-gray-300":"text-gray-500"}`,children:p.description}),E.jsx("div",{className:`text-lg font-semibold ${y?"text-green-400":"text-yellow-400"}`,children:T?"INCLUIDO":y?"DESBLOQUEADO":"PREMIUM"}),!y&&E.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg flex items-center justify-center",children:E.jsxs("div",{className:"text-center",children:[E.jsx(Ga,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),E.jsx("p",{className:"text-yellow-400 font-semibold text-sm",children:"PREMIUM"})]})})]},p.id)})}),i.some(p=>!e.includes(p.id))&&E.jsx("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:E.jsxs("p",{className:"text-yellow-400 text-sm",children:[E.jsx(Ga,{className:"w-4 h-4 inline mr-2"}),"Los packs premium están bloqueados. Visita la tienda para desbloquearlos."]})}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[E.jsx(tt,{onClick:s,variant:"secondary",className:"px-6",children:"Volver"}),E.jsx(tt,{onClick:o,variant:"secondary",className:"px-6 bg-yellow-600 hover:bg-yellow-700 text-white",children:"Ir a la Tienda"}),E.jsx(tt,{onClick:n,className:"px-6",disabled:!1,children:"Continuar al Juego"})]})]})})},xA=({players:i,currentPlayerIndex:e,onNextPlayer:n,onNewGame:s,questions:o,dares:u,roundConfig:f,gameProgress:m,onRoundEnd:p,onQuestionAsked:y,onDareCompleted:T})=>{const[I,R]=he.useState(null),[j,H]=he.useState(null),[$,Q]=he.useState(new Set),[le,se]=he.useState(new Set),ae=i[e],Te=he.useMemo(()=>o.map((A,S)=>({item:A,index:S})),[o]),ye=he.useMemo(()=>u.map((A,S)=>({item:A,index:S})),[u]),_e=A=>{const S=A==="pregunta"?Te:ye,D=A==="pregunta"?$:le,P=A==="pregunta"?Q:se,M=S.filter(x=>!D.has(x.index));if(M.length===0){P(new Set);const x=Math.floor(Math.random()*S.length),Ge=S[x];R(Ge.item),P(Be=>new Set(Be).add(Ge.index))}else{const x=Math.floor(Math.random()*M.length),Ge=M[x];R(Ge.item),P(Be=>new Set(Be).add(Ge.index))}H(A),A==="pregunta"&&y?y():A==="reto"&&T&&T()},N=()=>{R(null),H(null),e===i.length-1?m.currentRound+1>f.totalRounds?n():p():n()};return E.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center animate-fade-in",children:[E.jsxs(Qn,{className:"w-full max-w-lg min-h-[24rem] flex flex-col justify-between",children:[E.jsxs("div",{children:[E.jsx("div",{className:"mb-2",children:E.jsxs("p",{className:"text-sm text-gray-500",children:["Ronda ",m.currentRound," de ",f.totalRounds]})}),E.jsx("p",{className:"text-lg text-gray-400",children:"Turno de:"}),E.jsx("h2",{className:"text-4xl font-bold my-4 text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400",children:ae})]}),I?E.jsxs("div",{className:"animate-fade-in",children:[E.jsx("h3",{className:"text-2xl font-bold mb-6 text-cyan-400 capitalize",children:j}),E.jsx("p",{className:"text-xl md:text-2xl leading-relaxed",children:I.text})]}):E.jsxs("div",{className:"animate-fade-in",children:[E.jsx("h3",{className:"text-2xl font-bold mb-6",children:"¿Verdad o Reto?"}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[E.jsx(tt,{onClick:()=>_e("pregunta"),className:"w-full sm:w-auto",children:"Pregunta"}),E.jsx(tt,{onClick:()=>_e("reto"),variant:"secondary",className:"w-full sm:w-auto",children:"Reto"})]})]}),E.jsx("div",{className:"mt-8",children:I&&E.jsx(tt,{onClick:N,children:"Siguiente Jugador"})})]}),E.jsx("button",{onClick:s,className:"mt-6 text-sm text-gray-500 hover:text-gray-300 transition",children:"Empezar nuevo juego"})]})},CA=({onSelectRounds:i,onBack:e})=>{const n=[{value:5,label:"5 Rondas",description:"Partida rápida (15-20 min)"},{value:10,label:"10 Rondas",description:"Partida estándar (30-40 min)"},{value:15,label:"15 Rondas",description:"Partida larga (45-60 min)"}];return E.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:E.jsxs(Qn,{className:"w-full max-w-2xl text-center",children:[E.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Configurar Partida"}),E.jsx("p",{className:"text-gray-400 mb-8",children:"Elige cuántas rondas quieres jugar"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:n.map(s=>E.jsxs("div",{className:"relative p-6 rounded-lg border border-gray-600 bg-gray-800/50 hover:border-purple-500 transition-all duration-200 cursor-pointer group",onClick:()=>i(s.value),children:[E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:s.value}),E.jsx("div",{className:"text-lg font-semibold text-white mb-2",children:s.label}),E.jsx("div",{className:"text-sm text-gray-400",children:s.description})]}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]},s.value))}),E.jsx("div",{className:"text-sm text-gray-500 mb-6",children:"💡 Al final de cada ronda se mostrará un anuncio breve"}),E.jsx("div",{className:"flex gap-4 justify-center",children:E.jsx(tt,{onClick:e,variant:"secondary",className:"px-6",children:"Volver"})})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Wa;(function(i){i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE"})(Wa||(Wa={}));class Xd extends Error{constructor(e,n,s){super(e),this.message=e,this.code=n,this.data=s}}const NA=i=>{var e,n;return i!=null&&i.androidBridge?"android":!((n=(e=i==null?void 0:i.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},DA=i=>{const e=i.CapacitorCustomPlatform||null,n=i.Capacitor||{},s=n.Plugins=n.Plugins||{},o=()=>e!==null?e.name:NA(i),u=()=>o()!=="web",f=I=>{const R=y.get(I);return!!(R!=null&&R.platforms.has(o())||m(I))},m=I=>{var R;return(R=n.PluginHeaders)===null||R===void 0?void 0:R.find(j=>j.name===I)},p=I=>i.console.error(I),y=new Map,T=(I,R={})=>{const j=y.get(I);if(j)return console.warn(`Capacitor plugin "${I}" already registered. Cannot register plugins twice.`),j.proxy;const H=o(),$=m(I);let Q;const le=async()=>(!Q&&H in R?Q=typeof R[H]=="function"?Q=await R[H]():Q=R[H]:e!==null&&!Q&&"web"in R&&(Q=typeof R.web=="function"?Q=await R.web():Q=R.web),Q),se=(A,S)=>{var D,P;if($){const M=$==null?void 0:$.methods.find(x=>S===x.name);if(M)return M.rtype==="promise"?x=>n.nativePromise(I,S.toString(),x):(x,Ge)=>n.nativeCallback(I,S.toString(),x,Ge);if(A)return(D=A[S])===null||D===void 0?void 0:D.bind(A)}else{if(A)return(P=A[S])===null||P===void 0?void 0:P.bind(A);throw new Xd(`"${I}" plugin is not implemented on ${H}`,Wa.Unimplemented)}},ae=A=>{let S;const D=(...P)=>{const M=le().then(x=>{const Ge=se(x,A);if(Ge){const Be=Ge(...P);return S=Be==null?void 0:Be.remove,Be}else throw new Xd(`"${I}.${A}()" is not implemented on ${H}`,Wa.Unimplemented)});return A==="addListener"&&(M.remove=async()=>S()),M};return D.toString=()=>`${A.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:A,writable:!1,configurable:!1}),D},Te=ae("addListener"),ye=ae("removeListener"),_e=(A,S)=>{const D=Te({eventName:A},S),P=async()=>{const x=await D;ye({eventName:A,callbackId:x},S)},M=new Promise(x=>D.then(()=>x({remove:P})));return M.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},M},N=new Proxy({},{get(A,S){switch(S){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return $?_e:Te;case"removeListener":return ye;default:return ae(S)}}});return s[I]=N,y.set(I,{name:I,proxy:N,platforms:new Set([...Object.keys(R),...$?[H]:[]])}),N};return n.convertFileSrc||(n.convertFileSrc=I=>I),n.getPlatform=o,n.handleError=p,n.isNativePlatform=u,n.isPluginAvailable=f,n.registerPlugin=T,n.Exception=Xd,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},OA=i=>i.Capacitor=DA(i),qn=OA(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Lm=qn.registerPlugin;class F0{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(n);const u=this.windowListeners[e];u&&!u.registered&&this.addWindowListener(u),s&&this.sendRetainedArgumentsForEvent(e);const f=async()=>this.removeListener(e,n);return Promise.resolve({remove:f})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,s){const o=this.listeners[e];if(!o){if(s){let u=this.retainedEventArguments[e];u||(u=[]),u.push(n),this.retainedEventArguments[e]=u}return}o.forEach(u=>u(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:s=>{this.notifyListeners(n,s)}}}unimplemented(e="not implemented"){return new qn.Exception(e,Wa.Unimplemented)}unavailable(e="not available"){return new qn.Exception(e,Wa.Unavailable)}async removeListener(e,n){const s=this.listeners[e];if(!s)return;const o=s.indexOf(n);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(s=>{this.notifyListeners(e,s)}))}}const J_=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ev=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class PA extends F0{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(s=>{if(s.length<=0)return;let[o,u]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=ev(o).trim(),u=ev(u).trim(),n[o]=u}),n}async setCookie(e){try{const n=J_(e.key),s=J_(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,u=(e.path||"/").replace("path=",""),f=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${s||""}${o}; path=${u}; ${f};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Lm("CapacitorCookies",{web:()=>new PA});const VA=async i=>new Promise((e,n)=>{const s=new FileReader;s.onload=()=>{const o=s.result;e(o.indexOf(",")>=0?o.split(",")[1]:o)},s.onerror=o=>n(o),s.readAsDataURL(i)}),MA=(i={})=>{const e=Object.keys(i);return Object.keys(i).map(o=>o.toLocaleLowerCase()).reduce((o,u,f)=>(o[u]=i[e[f]],o),{})},kA=(i,e=!0)=>i?Object.entries(i).reduce((s,o)=>{const[u,f]=o;let m,p;return Array.isArray(f)?(p="",f.forEach(y=>{m=e?encodeURIComponent(y):y,p+=`${u}=${m}&`}),p.slice(0,-1)):(m=e?encodeURIComponent(f):f,p=`${u}=${m}`),`${s}&${p}`},"").substr(1):null,LA=(i,e={})=>{const n=Object.assign({method:i.method||"GET",headers:i.headers},e),o=MA(i.headers)["content-type"]||"";if(typeof i.data=="string")n.body=i.data;else if(o.includes("application/x-www-form-urlencoded")){const u=new URLSearchParams;for(const[f,m]of Object.entries(i.data||{}))u.set(f,m);n.body=u.toString()}else if(o.includes("multipart/form-data")||i.data instanceof FormData){const u=new FormData;if(i.data instanceof FormData)i.data.forEach((m,p)=>{u.append(p,m)});else for(const m of Object.keys(i.data))u.append(m,i.data[m]);n.body=u;const f=new Headers(n.headers);f.delete("content-type"),n.headers=f}else(o.includes("application/json")||typeof i.data=="object")&&(n.body=JSON.stringify(i.data));return n};class UA extends F0{async request(e){const n=LA(e,e.webFetchExtra),s=kA(e.params,e.shouldEncodeUrlParams),o=s?`${e.url}?${s}`:e.url,u=await fetch(o,n),f=u.headers.get("content-type")||"";let{responseType:m="text"}=u.ok?e:{};f.includes("application/json")&&(m="json");let p,y;switch(m){case"arraybuffer":case"blob":y=await u.blob(),p=await VA(y);break;case"json":p=await u.json();break;case"document":case"text":default:p=await u.text()}const T={};return u.headers.forEach((I,R)=>{T[R]=I}),{data:p,headers:T,status:u.status,url:u.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Lm("CapacitorHttp",{web:()=>new UA});const jA="modulepreload",zA=function(i,e){return new URL(i,e).href},tv={},G0=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let f=function(T){return Promise.all(T.map(I=>Promise.resolve(I).then(R=>({status:"fulfilled",value:R}),R=>({status:"rejected",reason:R}))))};const m=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),y=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=f(n.map(T=>{if(T=zA(T,s),T in tv)return;tv[T]=!0;const I=T.endsWith(".css"),R=I?'[rel="stylesheet"]':"";if(!!s)for(let $=m.length-1;$>=0;$--){const Q=m[$];if(Q.href===T&&(!I||Q.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${T}"]${R}`))return;const H=document.createElement("link");if(H.rel=I?"stylesheet":jA,I||(H.as="script"),H.crossOrigin="",H.href=T,y&&H.setAttribute("nonce",y),document.head.appendChild(H),I)return new Promise(($,Q)=>{H.addEventListener("load",$),H.addEventListener("error",()=>Q(new Error(`Unable to preload CSS for ${T}`)))})}))}function u(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return o.then(f=>{for(const m of f||[])m.status==="rejected"&&u(m.reason);return e().catch(u)})};var nv;(function(i){i.General="General",i.ParentalGuidance="ParentalGuidance",i.Teen="Teen",i.MatureAudience="MatureAudience"})(nv||(nv={}));var rv;(function(i){i.SizeChanged="bannerAdSizeChanged",i.Loaded="bannerAdLoaded",i.FailedToLoad="bannerAdFailedToLoad",i.Opened="bannerAdOpened",i.Closed="bannerAdClosed",i.AdImpression="bannerAdImpression"})(rv||(rv={}));var lm;(function(i){i.TOP_CENTER="TOP_CENTER",i.CENTER="CENTER",i.BOTTOM_CENTER="BOTTOM_CENTER"})(lm||(lm={}));var um;(function(i){i.BANNER="BANNER",i.FULL_BANNER="FULL_BANNER",i.LARGE_BANNER="LARGE_BANNER",i.MEDIUM_RECTANGLE="MEDIUM_RECTANGLE",i.LEADERBOARD="LEADERBOARD",i.ADAPTIVE_BANNER="ADAPTIVE_BANNER",i.SMART_BANNER="SMART_BANNER"})(um||(um={}));var iv;(function(i){i.Loaded="interstitialAdLoaded",i.FailedToLoad="interstitialAdFailedToLoad",i.Showed="interstitialAdShowed",i.FailedToShow="interstitialAdFailedToShow",i.Dismissed="interstitialAdDismissed"})(iv||(iv={}));var sv;(function(i){i.Loaded="onRewardedInterstitialAdLoaded",i.FailedToLoad="onRewardedInterstitialAdFailedToLoad",i.Showed="onRewardedInterstitialAdShowed",i.FailedToShow="onRewardedInterstitialAdFailedToShow",i.Dismissed="onRewardedInterstitialAdDismissed",i.Rewarded="onRewardedInterstitialAdReward"})(sv||(sv={}));var av;(function(i){i.Loaded="onRewardedVideoAdLoaded",i.FailedToLoad="onRewardedVideoAdFailedToLoad",i.Showed="onRewardedVideoAdShowed",i.FailedToShow="onRewardedVideoAdFailedToShow",i.Dismissed="onRewardedVideoAdDismissed",i.Rewarded="onRewardedVideoAdReward"})(av||(av={}));var ov;(function(i){i.NOT_REQUIRED="NOT_REQUIRED",i.OBTAINED="OBTAINED",i.REQUIRED="REQUIRED",i.UNKNOWN="UNKNOWN"})(ov||(ov={}));var lv;(function(i){i[i.DISABLED=0]="DISABLED",i[i.EEA=1]="EEA",i[i.NOT_EEA=2]="NOT_EEA"})(lv||(lv={}));const xl=Lm("AdMob",{web:()=>G0(()=>import("./web-N__HM_zZ.js"),[],import.meta.url).then(i=>new i.AdMobWeb)});class BA{constructor(){this.isInitialized=!1,this.config=null}async initialize(e){if(!this.isInitialized)try{this.config=e,qn.isNativePlatform()?(await xl.initialize({requestTrackingAuthorization:!0,testingDevices:e.testMode?["YOUR_DEVICE_ID"]:[],initializeForTesting:e.testMode||!1}),this.isInitialized=!0,console.log("AdMob initialized successfully")):console.log("AdMob not available on web platform")}catch(n){throw console.error("Failed to initialize AdMob:",n),n}}async showBannerAd(e){if(!this.isInitialized||!this.config)throw new Error("AdMob not initialized");if(!qn.isNativePlatform())throw new Error("AdMob banners only available on native platforms");try{const n={adId:this.config.bannerAdUnitId,adSize:um.ADAPTIVE_BANNER,position:lm.BOTTOM_CENTER,margin:0,isTesting:this.config.testMode||!1,...e};await xl.showBanner(n),console.log("Banner ad shown successfully")}catch(n){throw console.error("Failed to show banner ad:",n),n}}async hideBannerAd(){if(this.isInitialized&&qn.isNativePlatform())try{await xl.hideBanner(),console.log("Banner ad hidden successfully")}catch(e){console.error("Failed to hide banner ad:",e)}}async resumeBannerAd(){if(this.isInitialized&&qn.isNativePlatform())try{await xl.resumeBanner(),console.log("Banner ad resumed successfully")}catch(e){console.error("Failed to resume banner ad:",e)}}async removeBannerAd(){if(this.isInitialized&&qn.isNativePlatform())try{await xl.removeBanner(),console.log("Banner ad removed successfully")}catch(e){console.error("Failed to remove banner ad:",e)}}isNativePlatform(){return qn.isNativePlatform()}isWebPlatform(){return qn.getPlatform()==="web"}getConfig(){return this.config}}const Kd=new BA,qA=({dataAdSlot:i,className:e,style:n,fallbackContent:s,timeout:o=5e3,admobConfig:u})=>{const[f,m]=he.useState("loading"),[p,y]=he.useState(!1),[T,I]=he.useState(!1);return he.useEffect(()=>{let R,j=null,H=!0;return(async()=>{try{R=setTimeout(()=>{H&&f==="loading"&&(console.warn("Ad loading timeout reached"),m("timeout"),y(!0))},o);const Q=qn.isNativePlatform();if(I(Q),Q&&u)try{await Kd.initialize({...u,bannerAdUnitId:i}),await Kd.showBannerAd(),H&&(m("loaded"),clearTimeout(R));return}catch(le){console.warn("AdMob failed:",le),H&&(m("error"),y(!0),clearTimeout(R));return}if(typeof window<"u"&&!Q){let le=0;const se=10,ae=()=>{if(H)if(window.adsbygoogle||le>=se)try{(window.adsbygoogle=window.adsbygoogle||[]).push({}),setTimeout(()=>{if(H){if(j=document.querySelector(`[data-ad-slot="${i}"]`),j){const Te=j.innerHTML;Te&&Te.trim()!==""?m("loaded"):(m("error"),y(!0))}else m("error"),y(!0);clearTimeout(R)}},2e3)}catch(Te){console.error("Error loading AdSense ad:",Te),H&&(m("error"),y(!0),clearTimeout(R))}else le++,setTimeout(ae,200)};ae()}else Q&&!u&&(console.warn("Native platform detected but no AdMob config provided"),H&&(m("error"),y(!0),clearTimeout(R)))}catch(Q){console.error("Error in ad loading process:",Q),H&&(m("error"),y(!0),clearTimeout(R))}})(),()=>{H=!1,R&&clearTimeout(R),T&&f==="loaded"&&Kd.removeBannerAd().catch(console.error)}},[i,o,u]),p?E.jsx("div",{className:`ad-fallback ${e||""}`,style:n,children:s||E.jsx("div",{className:"ad-fallback-message"})}):E.jsxs("div",{className:`ad-container ${e||""}`,style:n,children:[f==="loading"&&E.jsx("div",{className:"ad-loading",children:E.jsx("div",{className:"loading-spinner"})}),E.jsx("ins",{className:"adsbygoogle",style:{display:f==="loaded"?"block":"none",textAlign:"center",width:"100%",height:"auto"},"data-ad-client":"ca-pub-XXXXXXXXXXXXXXXX","data-ad-slot":i,"data-ad-format":"auto","data-full-width-responsive":"true"})]})},HA=({roundStats:i,currentRound:e,totalRounds:n,onContinue:s,onEndGame:o,hasNoAds:u=!1})=>{var j;const[f,m]=he.useState(!1),[p,y]=he.useState(!1),[T,I]=he.useState(5);he.useEffect(()=>{if(u){m(!0),y(!0);return}const H=setTimeout(()=>{m(!0)},1e3);return()=>clearTimeout(H)},[u]),he.useEffect(()=>{if(!u&&f&&!p){const H=setInterval(()=>{I($=>$<=1?(y(!0),clearInterval(H),0):$-1)},1e3);return()=>clearInterval(H)}},[f,p,u]);const R=e>=n;return E.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:E.jsxs(Qn,{className:"w-full max-w-2xl text-center",children:[E.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-green-500 to-blue-500",children:R?"¡Partida Completada!":`¡Ronda ${i.roundNumber} Completada!`}),!R&&E.jsxs("p",{className:"text-gray-400 mb-6",children:["Ronda ",e," de ",n]}),E.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-6",children:[E.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Estadísticas de la Ronda"}),E.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[E.jsxs("div",{children:[E.jsx("div",{className:"text-2xl font-bold text-blue-400",children:i.questionsAsked}),E.jsx("div",{className:"text-sm text-gray-400",children:"Preguntas"})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-2xl font-bold text-purple-400",children:i.daresCompleted}),E.jsx("div",{className:"text-sm text-gray-400",children:"Retos"})]})]}),E.jsxs("div",{className:"mt-4",children:[E.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Jugadores participantes:"}),E.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:((j=i.playersParticipated)==null?void 0:j.map((H,$)=>E.jsx("span",{className:"px-3 py-1 bg-purple-600 text-white rounded-full text-sm",children:H},$)))||E.jsx("span",{className:"text-gray-400 text-sm",children:"No hay jugadores registrados"})})]})]}),!u&&E.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[E.jsxs("div",{className:"text-center mb-4",children:[E.jsx("div",{className:"text-lg font-semibold mb-2",children:"📺 Anuncio"}),p?E.jsx("div",{className:"text-green-400 mb-4",children:"✅ Anuncio completado"}):E.jsxs("div",{className:"mb-4",children:[E.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",T,"s"]}),E.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:E.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-T)/5*100}%`}})})]})]}),E.jsx(qA,{dataAdSlot:"1234567890",className:"round-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},admobConfig:{appId:"ca-app-pub-XXXXXXXXXXXXXXXX~XXXXXXXXXX",bannerAdUnitId:"ca-app-pub-XXXXXXXXXXXXXXXX/XXXXXXXXXX",testMode:!0},fallbackContent:E.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),u&&E.jsx("div",{className:"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-lg p-6 mb-6 border border-yellow-500/30",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"text-2xl mb-2",children:"🚫"}),E.jsx("div",{className:"text-lg font-semibold text-yellow-400 mb-2",children:"Sin Anuncios"}),E.jsx("div",{className:"text-sm text-gray-300",children:"Gracias por apoyar la aplicación con tu compra premium"})]})}),E.jsx("div",{className:"flex gap-4 justify-center",children:R?E.jsx(tt,{onClick:o,className:"px-8 py-3 text-lg",disabled:!u&&!p,children:"Ver Resultados Finales"}):E.jsxs(E.Fragment,{children:[E.jsx(tt,{onClick:o,variant:"secondary",className:"px-6",disabled:!u&&!p,children:"Terminar Partida"}),E.jsx(tt,{onClick:s,className:"px-8 py-3 text-lg",disabled:!u&&!p,children:"Siguiente Ronda"})]})}),!p&&E.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Los botones se habilitarán cuando termine el anuncio"})]})})},FA=({gameStats:i,players:e,onNewGame:n,onBackToMenu:s})=>{const o=i.gameEndTime&&i.gameStartTime?Math.round((i.gameEndTime.getTime()-i.gameStartTime.getTime())/1e3/60):0,u=i.totalRounds>0?Math.round(i.totalQuestions/i.totalRounds):0,f=i.totalRounds>0?Math.round(i.totalDares/i.totalRounds):0;return E.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:E.jsxs(Qn,{className:"w-full max-w-4xl text-center",children:[E.jsx("h1",{className:"text-5xl font-extrabold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500",children:"🎉 ¡Partida Finalizada! 🎉"}),E.jsx("p",{className:"text-gray-400 mb-8 text-lg",children:"¡Esperamos que se hayan divertido mucho!"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[E.jsxs("div",{className:"bg-gradient-to-br from-blue-600/20 to-blue-800/20 rounded-lg p-6 border border-blue-500/30",children:[E.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:i.totalRounds}),E.jsx("div",{className:"text-lg text-white mb-1",children:"Rondas Jugadas"}),E.jsxs("div",{className:"text-sm text-gray-400",children:[o," minutos"]})]}),E.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-purple-800/20 rounded-lg p-6 border border-purple-500/30",children:[E.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:i.totalQuestions}),E.jsx("div",{className:"text-lg text-white mb-1",children:"Preguntas"}),E.jsxs("div",{className:"text-sm text-gray-400",children:[u," por ronda"]})]}),E.jsxs("div",{className:"bg-gradient-to-br from-pink-600/20 to-pink-800/20 rounded-lg p-6 border border-pink-500/30",children:[E.jsx("div",{className:"text-4xl font-bold text-pink-400 mb-2",children:i.totalDares}),E.jsx("div",{className:"text-lg text-white mb-1",children:"Retos"}),E.jsxs("div",{className:"text-sm text-gray-400",children:[f," por ronda"]})]})]}),E.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[E.jsx("h3",{className:"text-2xl font-semibold mb-4 text-white",children:"Jugadores Participantes"}),E.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:e.map((m,p)=>E.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full",children:[E.jsx("span",{className:"text-lg",children:"🎮"}),E.jsx("span",{className:"font-medium",children:m})]},p))})]}),i.roundStats.length>0&&E.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[E.jsx("h3",{className:"text-2xl font-semibold mb-4 text-white",children:"Resumen por Rondas"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.roundStats.map((m,p)=>{var y;return E.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 border border-gray-600",children:[E.jsxs("div",{className:"text-lg font-semibold text-purple-400 mb-2",children:["Ronda ",m.roundNumber]}),E.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[E.jsxs("div",{children:["📝 ",m.questionsAsked," preguntas"]}),E.jsxs("div",{children:["🎯 ",m.daresCompleted," retos"]}),E.jsxs("div",{children:["👥 ",((y=m.playersParticipated)==null?void 0:y.length)||0," jugadores"]})]})]},p)})})]}),E.jsxs("div",{className:"bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-lg p-6 mb-8 border border-purple-500/30",children:[E.jsx("div",{className:"text-2xl mb-2",children:"🌟"}),E.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"¡Gracias por jugar!"}),E.jsx("p",{className:"text-gray-300",children:"Esperamos que hayan creado recuerdos increíbles. ¡No olviden compartir sus mejores momentos!"})]}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[E.jsx(tt,{onClick:n,className:"px-8 py-3 text-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:"🎮 Nueva Partida"}),E.jsx(tt,{onClick:s,variant:"secondary",className:"px-8 py-3 text-lg",children:"🏠 Menú Principal"})]}),E.jsxs("div",{className:"mt-8 text-xs text-gray-500",children:[E.jsx("p",{children:"¿Te gustó el juego? ¡Compártelo con tus amigos!"}),E.jsx("p",{className:"mt-1",children:"Verdad o Reto - La diversión nunca termina"})]})]})})},GA=()=>{};var uv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},QA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],f=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},X0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,p=o+2<i.length,y=p?i[o+2]:0,T=u>>2,I=(u&3)<<4|m>>4;let R=(m&15)<<2|y>>6,j=y&63;p||(j=64,f||(R=64)),s.push(n[T],n[I],n[R],n[j])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Q0(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):QA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const I=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||y==null||I==null)throw new XA;const R=u<<2|m>>4;if(s.push(R),y!==64){const j=m<<4&240|y>>2;if(s.push(j),I!==64){const H=y<<6&192|I;s.push(H)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class XA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KA=function(i){const e=Q0(i);return X0.encodeByteArray(e,!0)},Jc=function(i){return KA(i).replace(/\./g,"")},K0=function(i){try{return X0.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=()=>YA().__FIREBASE_DEFAULTS__,WA=()=>{if(typeof process>"u"||typeof uv>"u")return;const i=uv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},ZA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&K0(i[1]);return e&&JSON.parse(e)},Eh=()=>{try{return GA()||$A()||WA()||ZA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Y0=i=>{var e,n;return(n=(e=Eh())==null?void 0:e.emulatorHosts)==null?void 0:n[i]},JA=i=>{const e=Y0(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},$0=()=>{var i;return(i=Eh())==null?void 0:i.config},W0=i=>{var e;return(e=Eh())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Z0(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Jc(JSON.stringify(n)),Jc(JSON.stringify(f)),""].join(".")}const Ll={};function nS(){const i={prod:[],emulator:[]};for(const e of Object.keys(Ll))Ll[e]?i.emulator.push(e):i.prod.push(e);return i}function rS(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let cv=!1;function J0(i,e){if(typeof window>"u"||typeof document>"u"||!oo(window.location.host)||Ll[i]===e||Ll[i]||cv)return;Ll[i]=e;function n(R){return`__firebase__banner__${R}`}const s="__firebase__banner",u=nS().prod.length>0;function f(){const R=document.getElementById(s);R&&R.remove()}function m(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function p(R,j){R.setAttribute("width","24"),R.setAttribute("id",j),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function y(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{cv=!0,f()},R}function T(R,j){R.setAttribute("id",j),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function I(){const R=rS(s),j=n("text"),H=document.getElementById(j)||document.createElement("span"),$=n("learnmore"),Q=document.getElementById($)||document.createElement("a"),le=n("preprendIcon"),se=document.getElementById(le)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const ae=R.element;m(ae),T(Q,$);const Te=y();p(se,le),ae.append(se,H,Q,Te),document.body.appendChild(ae)}u?(H.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function sS(){var e;const i=(e=Eh())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oS(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function lS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uS(){const i=Jt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function cS(){return!sS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hS(){try{return typeof indexedDB=="object"}catch{return!1}}function fS(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="FirebaseError";class ri extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=dS,Object.setPrototypeOf(this,ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zl.prototype.create)}}class Zl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?mS(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new ri(o,m,s)}}function mS(i,e){return i.replace(gS,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const gS=/\{\$([^}]+)}/g;function pS(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Us(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],f=e[o];if(hv(u)&&hv(f)){if(!Us(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function hv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Dl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Ol(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function yS(i,e){const n=new _S(i,e);return n.subscribe.bind(n)}class _S{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");vS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Yd),o.error===void 0&&(o.error=Yd),o.complete===void 0&&(o.complete=Yd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vS(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Yd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(i){return i&&i._delegate?i._delegate:i}class js{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new eS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wS(e))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vs){return this.instances.has(e)}getOptions(e=Vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:TS(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Vs){return this.component?this.component.multipleInstances?e:Vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TS(i){return i===Vs?void 0:i}function wS(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ES(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ve||(Ve={}));const AS={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},SS=Ve.INFO,RS={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},IS=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=RS[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Um{constructor(e){this.name=e,this._logLevel=SS,this._logHandler=IS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const xS=(i,e)=>e.some(n=>i instanceof n);let fv,dv;function CS(){return fv||(fv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NS(){return dv||(dv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eE=new WeakMap,cm=new WeakMap,tE=new WeakMap,$d=new WeakMap,jm=new WeakMap;function DS(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(ji(i.result)),o()},f=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&eE.set(n,i)}).catch(()=>{}),jm.set(e,i),e}function OS(i){if(cm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});cm.set(i,e)}let hm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return cm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||tE.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ji(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function PS(i){hm=i(hm)}function VS(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Wd(this),e,...n);return tE.set(s,e.sort?e.sort():[e]),ji(s)}:NS().includes(i)?function(...e){return i.apply(Wd(this),e),ji(eE.get(this))}:function(...e){return ji(i.apply(Wd(this),e))}}function MS(i){return typeof i=="function"?VS(i):(i instanceof IDBTransaction&&OS(i),xS(i,CS())?new Proxy(i,hm):i)}function ji(i){if(i instanceof IDBRequest)return DS(i);if($d.has(i))return $d.get(i);const e=MS(i);return e!==i&&($d.set(i,e),jm.set(e,i)),e}const Wd=i=>jm.get(i);function kS(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),m=ji(f);return s&&f.addEventListener("upgradeneeded",p=>{s(ji(f.result),p.oldVersion,p.newVersion,ji(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const LS=["get","getKey","getAll","getAllKeys","count"],US=["put","add","delete","clear"],Zd=new Map;function mv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Zd.get(e))return Zd.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=US.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||LS.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&p.done]))[0]};return Zd.set(e,u),u}PS(i=>({...i,get:(e,n,s)=>mv(e,n)||i.get(e,n,s),has:(e,n)=>!!mv(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function zS(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fm="@firebase/app",gv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new Um("@firebase/app"),BS="@firebase/app-compat",qS="@firebase/analytics-compat",HS="@firebase/analytics",FS="@firebase/app-check-compat",GS="@firebase/app-check",QS="@firebase/auth",XS="@firebase/auth-compat",KS="@firebase/database",YS="@firebase/data-connect",$S="@firebase/database-compat",WS="@firebase/functions",ZS="@firebase/functions-compat",JS="@firebase/installations",e1="@firebase/installations-compat",t1="@firebase/messaging",n1="@firebase/messaging-compat",r1="@firebase/performance",i1="@firebase/performance-compat",s1="@firebase/remote-config",a1="@firebase/remote-config-compat",o1="@firebase/storage",l1="@firebase/storage-compat",u1="@firebase/firestore",c1="@firebase/ai",h1="@firebase/firestore-compat",f1="firebase",d1="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="[DEFAULT]",m1={[fm]:"fire-core",[BS]:"fire-core-compat",[HS]:"fire-analytics",[qS]:"fire-analytics-compat",[GS]:"fire-app-check",[FS]:"fire-app-check-compat",[QS]:"fire-auth",[XS]:"fire-auth-compat",[KS]:"fire-rtdb",[YS]:"fire-data-connect",[$S]:"fire-rtdb-compat",[WS]:"fire-fn",[ZS]:"fire-fn-compat",[JS]:"fire-iid",[e1]:"fire-iid-compat",[t1]:"fire-fcm",[n1]:"fire-fcm-compat",[r1]:"fire-perf",[i1]:"fire-perf-compat",[s1]:"fire-rc",[a1]:"fire-rc-compat",[o1]:"fire-gcs",[l1]:"fire-gcs-compat",[u1]:"fire-fst",[h1]:"fire-fst-compat",[c1]:"fire-vertex","fire-js":"fire-js",[f1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=new Map,g1=new Map,mm=new Map;function pv(i,e){try{i.container.addComponent(e)}catch(n){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Za(i){const e=i.name;if(mm.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;mm.set(e,i);for(const n of eh.values())pv(n,i);for(const n of g1.values())pv(n,i);return!0}function zm(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function un(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zi=new Zl("app","Firebase",p1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=d1;function nE(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:dm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw zi.create("bad-app-name",{appName:String(o)});if(n||(n=$0()),!n)throw zi.create("no-options");const u=eh.get(o);if(u){if(Us(n,u.options)&&Us(s,u.config))return u;throw zi.create("duplicate-app",{appName:o})}const f=new bS(o);for(const p of mm.values())f.addComponent(p);const m=new y1(n,s,f);return eh.set(o,m),m}function rE(i=dm){const e=eh.get(i);if(!e&&i===dm&&$0())return nE();if(!e)throw zi.create("no-app",{appName:i});return e}function Bi(i,e,n){let s=m1[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(f.join(" "));return}Za(new js(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="firebase-heartbeat-database",v1=1,Hl="firebase-heartbeat-store";let Jd=null;function iE(){return Jd||(Jd=kS(_1,v1,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(i=>{throw zi.create("idb-open",{originalErrorMessage:i.message})})),Jd}async function E1(i){try{const n=(await iE()).transaction(Hl),s=await n.objectStore(Hl).get(sE(i));return await n.done,s}catch(e){if(e instanceof ri)Zr.warn(e.message);else{const n=zi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zr.warn(n.message)}}}async function yv(i,e){try{const s=(await iE()).transaction(Hl,"readwrite");await s.objectStore(Hl).put(e,sE(i)),await s.done}catch(n){if(n instanceof ri)Zr.warn(n.message);else{const s=zi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zr.warn(s.message)}}}function sE(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=1024,w1=30;class b1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new S1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=_v();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>w1){const f=R1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Zr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_v(),{heartbeatsToSend:s,unsentEntries:o}=A1(this._heartbeatsCache.heartbeats),u=Jc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Zr.warn(n),""}}}function _v(){return new Date().toISOString().substring(0,10)}function A1(i,e=T1){const n=[];let s=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),vv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),vv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class S1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hS()?fS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await E1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return yv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return yv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function vv(i){return Jc(JSON.stringify({version:2,heartbeats:i})).length}function R1(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(i){Za(new js("platform-logger",e=>new jS(e),"PRIVATE")),Za(new js("heartbeat",e=>new b1(e),"PRIVATE")),Bi(fm,gv,i),Bi(fm,gv,"esm2020"),Bi("fire-js","")}I1("");function aE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const x1=aE,oE=new Zl("auth","Firebase",aE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Um("@firebase/auth");function C1(i,...e){th.logLevel<=Ve.WARN&&th.warn(`Auth (${lo}): ${i}`,...e)}function Hc(i,...e){th.logLevel<=Ve.ERROR&&th.error(`Auth (${lo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(i,...e){throw qm(i,...e)}function Gn(i,...e){return qm(i,...e)}function Bm(i,e,n){const s={...x1(),[e]:n};return new Zl("auth","Firebase",s).create(e,{appName:i.name})}function fr(i){return Bm(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function N1(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Mn(i,"argument-error"),Bm(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qm(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return oE.create(i,...e)}function we(i,e,...n){if(!i)throw qm(e,...n)}function Kr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Hc(e),new Error(e)}function Jr(i,e){i||Kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function D1(){return Ev()==="http:"||Ev()==="https:"}function Ev(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(D1()||oS()||"connection"in navigator)?navigator.onLine:!0}function P1(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jr(n>e,"Short delay should be less than long delay!"),this.isMobile=iS()||lS()}get(){return O1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(i,e){Jr(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],k1=new eu(3e4,6e4);function ii(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function vr(i,e,n,s,o={}){return uE(i,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=Jl({key:i.config.apiKey,...f}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:p,...u};return aS()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&oo(i.emulatorConfig.host)&&(y.credentials="include"),lE.fetch()(await cE(i,i.config.apiHost,n,m),y)})}async function uE(i,e,n){i._canInitEmulator=!1;const s={...V1,...e};try{const o=new U1(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Mc(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mc(i,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw Mc(i,"email-already-in-use",f);if(p==="USER_DISABLED")throw Mc(i,"user-disabled",f);const T=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Bm(i,T,y);Mn(i,T)}}catch(o){if(o instanceof ri)throw o;Mn(i,"network-request-failed",{message:String(o)})}}async function tu(i,e,n,s,o={}){const u=await vr(i,e,n,s,o);return"mfaPendingCredential"in u&&Mn(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function cE(i,e,n,s){const o=`${e}${n}?${s}`,u=i,f=u.config.emulator?Hm(i.config,o):`${i.config.apiScheme}://${o}`;return M1.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function L1(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class U1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Gn(this.auth,"network-request-failed")),k1.get())})}}function Mc(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Gn(i,e,s);return o.customData._tokenResponse=n,o}function Tv(i){return i!==void 0&&i.enterprise!==void 0}class j1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return L1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function z1(i,e){return vr(i,"GET","/v2/recaptchaConfig",ii(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(i,e){return vr(i,"POST","/v1/accounts:delete",e)}async function nh(i,e){return vr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q1(i,e=!1){const n=Gt(i),s=await n.getIdToken(e),o=Fm(s);we(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Ul(em(o.auth_time)),issuedAtTime:Ul(em(o.iat)),expirationTime:Ul(em(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function em(i){return Number(i)*1e3}function Fm(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Hc("JWT malformed, contained fewer than 3 sections"),null;try{const o=K0(n);return o?JSON.parse(o):(Hc("Failed to decode base64 JWT payload"),null)}catch(o){return Hc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function wv(i){const e=Fm(i);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ri&&H1(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function H1({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ul(this.lastLoginAt),this.creationTime=Ul(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rh(i){var I;const e=i.auth,n=await i.getIdToken(),s=await Ja(i,nh(e,{idToken:n}));we(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=(I=o.providerUserInfo)!=null&&I.length?hE(o.providerUserInfo):[],f=Q1(i.providerData,u),m=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!(f!=null&&f.length),y=m?p:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new pm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,T)}async function G1(i){const e=Gt(i);await rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Q1(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function hE(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(i,e){const n=await uE(i,{},async()=>{const s=Jl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await cE(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return i.emulatorConfig&&oo(i.emulatorConfig.host)&&(p.credentials="include"),lE.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function K1(i,e){return vr(i,"POST","/v2/accounts:revokeToken",ii(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=wv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await X1(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new Qa;return s&&(we(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(we(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(we(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qa,this.toJSON())}_performRefresh(){return Kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(i,e){we(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Hn{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new F1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new pm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ja(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return q1(this,e)}reload(){return G1(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await rh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(fr(this.auth));const e=await this.getIdToken();return await Ja(this,B1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:I,emailVerified:R,isAnonymous:j,providerData:H,stsTokenManager:$}=n;we(I&&$,e,"internal-error");const Q=Qa.fromJSON(this.name,$);we(typeof I=="string",e,"internal-error"),Vi(s,e.name),Vi(o,e.name),we(typeof R=="boolean",e,"internal-error"),we(typeof j=="boolean",e,"internal-error"),Vi(u,e.name),Vi(f,e.name),Vi(m,e.name),Vi(p,e.name),Vi(y,e.name),Vi(T,e.name);const le=new Hn({uid:I,auth:e,email:o,emailVerified:R,displayName:s,isAnonymous:j,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:Q,createdAt:y,lastLoginAt:T});return H&&Array.isArray(H)&&(le.providerData=H.map(se=>({...se}))),p&&(le._redirectEventId=p),le}static async _fromIdTokenResponse(e,n,s=!1){const o=new Qa;o.updateFromServerResponse(n);const u=new Hn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await rh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];we(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?hE(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Qa;m.updateFromIdToken(s);const p=new Hn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new pm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=new Map;function Yr(i){Jr(i instanceof Function,"Expected a class definition");let e=bv.get(i);return e?(Jr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,bv.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fE.type="NONE";const Av=fE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(i,e,n){return`firebase:${i}:${e}:${n}`}class Xa{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Fc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Fc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nh(this.auth,{idToken:e}).catch(()=>{});return n?Hn._fromGetAccountInfoResponse(this.auth,n,e):null}return Hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Xa(Yr(Av),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||Yr(Av);const f=Fc(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const T=await y._get(f);if(T){let I;if(typeof T=="string"){const R=await nh(e,{idToken:T}).catch(()=>{});if(!R)break;I=await Hn._fromGetAccountInfoResponse(e,R,T)}else I=Hn._fromJSON(e,T);y!==u&&(m=I),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Xa(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new Xa(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_E(e))return"Blackberry";if(vE(e))return"Webos";if(mE(e))return"Safari";if((e.includes("chrome/")||gE(e))&&!e.includes("edge/"))return"Chrome";if(yE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function dE(i=Jt()){return/firefox\//i.test(i)}function mE(i=Jt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gE(i=Jt()){return/crios\//i.test(i)}function pE(i=Jt()){return/iemobile/i.test(i)}function yE(i=Jt()){return/android/i.test(i)}function _E(i=Jt()){return/blackberry/i.test(i)}function vE(i=Jt()){return/webos/i.test(i)}function Gm(i=Jt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function Y1(i=Jt()){var e;return Gm(i)&&!!((e=window.navigator)!=null&&e.standalone)}function $1(){return uS()&&document.documentMode===10}function EE(i=Jt()){return Gm(i)||yE(i)||vE(i)||_E(i)||/windows phone/i.test(i)||pE(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(i,e=[]){let n;switch(i){case"Browser":n=Sv(Jt());break;case"Worker":n=`${Sv(Jt())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${lo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1(i,e={}){return vr(i,"GET","/v2/passwordPolicy",ii(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=6;class eR{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??J1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rv(this),this.idTokenSubscription=new Rv(this),this.beforeStateQueue=new W1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yr(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await Xa.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nh(this,{idToken:e}),s=await Hn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(un(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(u=this.redirectUser)==null?void 0:u._redirectEventId,m=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===m)&&(p!=null&&p.user)&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(f){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=P1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(un(this.app))return Promise.reject(fr(this));const n=e?Gt(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return un(this.app)?Promise.reject(fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return un(this.app)?Promise.reject(fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Z1(this),n=new eR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await K1(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yr(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await Xa.create(this,[Yr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&C1(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Er(i){return Gt(i)}class Rv{constructor(e){this.auth=e,this.observer=null,this.addObserver=yS(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Th={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nR(i){Th=i}function wE(i){return Th.loadJS(i)}function rR(){return Th.recaptchaEnterpriseScript}function iR(){return Th.gapiScript}function sR(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class aR{constructor(){this.enterprise=new oR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class oR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const lR="recaptcha-enterprise",bE="NO_RECAPTCHA";class uR{constructor(e){this.type=lR,this.auth=Er(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{z1(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new j1(p);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,f(y.siteKey)}}).catch(p=>{m(p)})})}function o(u,f,m){const p=window.grecaptcha;Tv(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(y=>{f(y)}).catch(()=>{f(bE)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new aR().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&Tv(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=rR();p.length!==0&&(p+=m),wE(p).then(()=>{o(m,u,f)}).catch(y=>{f(y)})}}).catch(m=>{f(m)})})}}async function Iv(i,e,n,s=!1,o=!1){const u=new uR(i);let f;if(o)f=bE;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function ih(i,e,n,s,o){var u;if((u=i._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await Iv(i,e,n,n==="getOobCode");return s(i,f)}else return s(i,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Iv(i,e,n,n==="getOobCode");return s(i,m)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(i,e){const n=zm(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Us(u,e??{}))return o;Mn(o,"already-initialized")}return n.initialize({options:e})}function hR(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Yr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function fR(i,e,n){const s=Er(i);we(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=AE(e),{host:f,port:m}=dR(e),p=m===null?"":`:${m}`,y={url:`${u}//${f}${p}/`},T=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){we(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),we(Us(y,s.config.emulator)&&Us(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,oo(f)?(Z0(`${u}//${f}${p}`),J0("Auth",!0)):mR()}function AE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function dR(i){const e=AE(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:xv(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:xv(f)}}}function xv(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function mR(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kr("not implemented")}_getIdTokenResponse(e){return Kr("not implemented")}_linkToIdToken(e,n){return Kr("not implemented")}_getReauthenticationResolver(e){return Kr("not implemented")}}async function gR(i,e){return vr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(i,e){return tu(i,"POST","/v1/accounts:signInWithPassword",ii(i,e))}async function SE(i,e){return vr(i,"POST","/v1/accounts:sendOobCode",ii(i,e))}async function yR(i,e){return SE(i,e)}async function _R(i,e){return SE(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(i,e){return tu(i,"POST","/v1/accounts:signInWithEmailLink",ii(i,e))}async function ER(i,e){return tu(i,"POST","/v1/accounts:signInWithEmailLink",ii(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends Qm{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Fl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Fl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ih(e,n,"signInWithPassword",pR);case"emailLink":return vR(e,{email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ih(e,s,"signUpPassword",gR);case"emailLink":return ER(e,{idToken:n,email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(i,e){return tu(i,"POST","/v1/accounts:signInWithIdp",ii(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="http://localhost";class zs extends Qm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new zs(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Ka(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ka(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ka(e,n)}buildRequest(){const e={requestUri:TR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Jl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bR(i){const e=Dl(Ol(i)).link,n=e?Dl(Ol(e)).deep_link_id:null,s=Dl(Ol(i)).deep_link_id;return(s?Dl(Ol(s)).link:null)||s||n||e||i}class Xm{constructor(e){const n=Dl(Ol(e)),s=n.apiKey??null,o=n.oobCode??null,u=wR(n.mode??null);we(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=bR(e);try{return new Xm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(){this.providerId=uo.PROVIDER_ID}static credential(e,n){return Fl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Xm.parseLink(n);return we(s,"argument-error"),Fl._fromEmailAndCode(e,s.code,s.tenantId)}}uo.PROVIDER_ID="password";uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends Km{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends nu{constructor(){super("facebook.com")}static credential(e){return zs._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mi.credential(e.oauthAccessToken)}catch{return null}}}Mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zs._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Xr.credential(n,s)}catch{return null}}}Xr.GOOGLE_SIGN_IN_METHOD="google.com";Xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends nu{constructor(){super("github.com")}static credential(e){return zs._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends nu{constructor(){super("twitter.com")}static credential(e,n){return zs._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Li.credential(n,s)}catch{return null}}}Li.TWITTER_SIGN_IN_METHOD="twitter.com";Li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RE(i,e){return tu(i,"POST","/v1/accounts:signUp",ii(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Hn._fromIdTokenResponse(e,s,o),f=Cv(s);return new ei({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Cv(s);return new ei({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Cv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(i){var o;if(un(i.app))return Promise.reject(fr(i));const e=Er(i);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new ei({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await RE(e,{returnSecureToken:!0}),s=await ei._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends ri{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,sh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new sh(e,n,s,o)}}function IE(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?sh._fromErrorAndOperation(i,u,e,s):u})}async function SR(i,e,n=!1){const s=await Ja(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return ei._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR(i,e,n=!1){const{auth:s}=i;if(un(s.app))return Promise.reject(fr(s));const o="reauthenticate";try{const u=await Ja(i,IE(s,o,e,i),n);we(u.idToken,s,"internal-error");const f=Fm(u.idToken);we(f,s,"internal-error");const{sub:m}=f;return we(i.uid===m,s,"user-mismatch"),ei._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Mn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xE(i,e,n=!1){if(un(i.app))return Promise.reject(fr(i));const s="signIn",o=await IE(i,s,e),u=await ei._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function IR(i,e){return xE(Er(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CE(i){const e=Er(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function xR(i,e,n){const s=Er(i);await ih(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",_R)}async function CR(i,e,n){if(un(i.app))return Promise.reject(fr(i));const s=Er(i),f=await ih(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RE).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&CE(i),p}),m=await ei._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(m.user),m}function NR(i,e,n){return un(i.app)?Promise.reject(fr(i)):IR(Gt(i),uo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&CE(i),s})}async function NE(i,e){const n=Gt(i),o={requestType:"VERIFY_EMAIL",idToken:await i.getIdToken()},{email:u}=await yR(n.auth,o);u!==i.email&&await i.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(i,e){return vr(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(i,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=Gt(i),u={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},f=await Ja(s,DR(s.auth,u));s.displayName=f.displayName||null,s.photoURL=f.photoUrl||null;const m=s.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(f)}function PR(i,e,n,s){return Gt(i).onIdTokenChanged(e,n,s)}function VR(i,e,n){return Gt(i).beforeAuthStateChanged(e,n)}function MR(i,e,n,s){return Gt(i).onAuthStateChanged(e,n,s)}function kR(i){return Gt(i).signOut()}const ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ah,"1"),this.storage.removeItem(ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=1e3,UR=10;class OE extends DE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);$1()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,UR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},LR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}OE.type="LOCAL";const jR=OE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE extends DE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}PE.type="SESSION";const VE=PE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new wh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async y=>y(n.origin,u)),p=await zR(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const y=Ym("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(I){const R=I;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(R.data.response);break;default:clearTimeout(T),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(){return window}function qR(i){dr().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(){return typeof dr().WorkerGlobalScope<"u"&&typeof dr().importScripts=="function"}async function HR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FR(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function GR(){return ME()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="firebaseLocalStorageDb",QR=1,oh="firebaseLocalStorage",LE="fbase_key";class ru{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bh(i,e){return i.transaction([oh],e?"readwrite":"readonly").objectStore(oh)}function XR(){const i=indexedDB.deleteDatabase(kE);return new ru(i).toPromise()}function ym(){const i=indexedDB.open(kE,QR);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(oh,{keyPath:LE})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(oh)?e(s):(s.close(),await XR(),e(await ym()))})})}async function Nv(i,e,n){const s=bh(i,!0).put({[LE]:e,value:n});return new ru(s).toPromise()}async function KR(i,e){const n=bh(i,!1).get(e),s=await new ru(n).toPromise();return s===void 0?null:s.value}function Dv(i,e){const n=bh(i,!0).delete(e);return new ru(n).toPromise()}const YR=800,$R=3;class UE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ym(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>$R)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ME()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(GR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await HR(),!this.activeServiceWorker)return;this.sender=new BR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ym();return await Nv(e,ah,"1"),await Dv(e,ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Nv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>KR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=bh(o,!1).getAll();return new ru(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UE.type="LOCAL";const WR=UE;new eu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(i,e){return e?Yr(e):(we(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m extends Qm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ka(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ka(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ka(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ZR(i){return xE(i.auth,new $m(i),i.bypassAuthState)}function JR(i){const{auth:e,user:n}=i;return we(n,e,"internal-error"),RR(n,new $m(i),i.bypassAuthState)}async function eI(i){const{auth:e,user:n}=i;return we(n,e,"internal-error"),SR(n,new $m(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZR;case"linkViaPopup":case"linkViaRedirect":return eI;case"reauthViaPopup":case"reauthViaRedirect":return JR;default:Mn(this.auth,"internal-error")}}resolve(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=new eu(2e3,1e4);async function nI(i,e,n){if(un(i.app))return Promise.reject(Gn(i,"operation-not-supported-in-this-environment"));const s=Er(i);N1(i,e,Km);const o=jE(s,n);return new Ms(s,"signInViaPopup",e,o).executeNotNull()}class Ms extends zE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Ms.currentPopupAction&&Ms.currentPopupAction.cancel(),Ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Jr(this.filter.length===1,"Popup operations only handle one event");const e=Ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tI.get())};e()}}Ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="pendingRedirect",Gc=new Map;class iI extends zE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Gc.get(this.auth._key());if(!e){try{const s=await sI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Gc.set(this.auth._key(),e)}return this.bypassAuthState||Gc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sI(i,e){const n=lI(e),s=oI(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function aI(i,e){Gc.set(i._key(),e)}function oI(i){return Yr(i._redirectPersistence)}function lI(i){return Fc(rI,i.config.apiKey,i.name)}async function uI(i,e,n=!1){if(un(i.app))return Promise.reject(fr(i));const s=Er(i),o=jE(s,e),f=await new iI(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=600*1e3;class hI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!BE(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Gn(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ov(e))}saveEventToCache(e){this.cachedEventUids.add(Ov(e)),this.lastProcessedEventTime=Date.now()}}function Ov(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function BE({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fI(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BE(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(i,e={}){return vr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gI=/^https?/;async function pI(i){if(i.config.emulator)return;const{authorizedDomains:e}=await dI(i);for(const n of e)try{if(yI(n))return}catch{}Mn(i,"unauthorized-domain")}function yI(i){const e=gm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!gI.test(n))return!1;if(mI.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new eu(3e4,6e4);function Pv(){const i=dr().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function vI(i){return new Promise((e,n)=>{var o,u,f;function s(){Pv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pv(),n(Gn(i,"network-request-failed"))},timeout:_I.get()})}if((u=(o=dr().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((f=dr().gapi)!=null&&f.load)s();else{const m=sR("iframefcb");return dr()[m]=()=>{gapi.load?s():n(Gn(i,"network-request-failed"))},wE(`${iR()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw Qc=null,e})}let Qc=null;function EI(i){return Qc=Qc||vI(i),Qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=new eu(5e3,15e3),wI="__/auth/iframe",bI="emulator/auth/iframe",AI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RI(i){const e=i.config;we(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Hm(e,bI):`https://${i.config.authDomain}/${wI}`,s={apiKey:e.apiKey,appName:i.name,v:lo},o=SI.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Jl(s).slice(1)}`}async function II(i){const e=await EI(i),n=dr().gapi;return we(n,i,"internal-error"),e.open({where:document.body,url:RI(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AI,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Gn(i,"network-request-failed"),m=dr().setTimeout(()=>{u(f)},TI.get());function p(){dr().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CI=500,NI=600,DI="_blank",OI="http://localhost";class Vv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PI(i,e,n,s=CI,o=NI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...xI,width:s.toString(),height:o.toString(),top:u,left:f},y=Jt().toLowerCase();n&&(m=gE(y)?DI:n),dE(y)&&(e=e||OI,p.scrollbars="yes");const T=Object.entries(p).reduce((R,[j,H])=>`${R}${j}=${H},`,"");if(Y1(y)&&m!=="_self")return VI(e||"",m),new Vv(null);const I=window.open(e||"",m,T);we(I,i,"popup-blocked");try{I.focus()}catch{}return new Vv(I)}function VI(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="__/auth/handler",kI="emulator/auth/handler",LI=encodeURIComponent("fac");async function Mv(i,e,n,s,o,u){we(i.config.authDomain,i,"auth-domain-config-required"),we(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:lo,eventId:o};if(e instanceof Km){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",pS(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,I]of Object.entries({}))f[T]=I}if(e instanceof nu){const T=e.getScopes().filter(I=>I!=="");T.length>0&&(f.scopes=T.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const p=await i._getAppCheckToken(),y=p?`#${LI}=${encodeURIComponent(p)}`:"";return`${UI(i)}?${Jl(m).slice(1)}${y}`}function UI({config:i}){return i.emulator?Hm(i,kI):`https://${i.authDomain}/${MI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="webStorageSupport";class jI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VE,this._completeRedirectFn=uI,this._overrideRedirectResult=aI}async _openPopup(e,n,s,o){var f;Jr((f=this.eventManagers[e._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const u=await Mv(e,n,s,gm(),o);return PI(e,u,Ym())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await Mv(e,n,s,gm(),o);return qR(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Jr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await II(e),s=new hI(e);return n.register("authEvent",o=>(we(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tm,{type:tm},o=>{var f;const u=(f=o==null?void 0:o[0])==null?void 0:f[tm];u!==void 0&&n(!!u),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return EE()||mE()||Gm()}}const zI=jI;var kv="@firebase/auth",Lv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HI(i){Za(new js("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;we(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TE(i)},y=new tR(s,o,u,p);return hR(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Za(new js("auth-internal",e=>{const n=Er(e.getProvider("auth").getImmediate());return(s=>new BI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bi(kv,Lv,qI(i)),Bi(kv,Lv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=300,GI=W0("authIdTokenMaxAge")||FI;let Uv=null;const QI=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>GI)return;const o=n==null?void 0:n.token;Uv!==o&&(Uv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function XI(i=rE()){const e=zm(i,"auth");if(e.isInitialized())return e.getImmediate();const n=cR(i,{popupRedirectResolver:zI,persistence:[WR,jR,VE]}),s=W0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=QI(u.toString());VR(n,f,()=>f(n.currentUser)),PR(n,m=>f(m))}}const o=Y0("auth");return o&&fR(n,`http://${o}`),n}function KI(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}nR({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Gn("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",KI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HI("Browser");var YI="firebase",$I="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bi(YI,$I,"app");var jv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qi,qE;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function S(){}S.prototype=A.prototype,N.D=A.prototype,N.prototype=new S,N.prototype.constructor=N,N.C=function(D,P,M){for(var x=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)x[Ge-2]=arguments[Ge];return A.prototype[P].apply(D,x)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,A,S){S||(S=0);var D=Array(16);if(typeof A=="string")for(var P=0;16>P;++P)D[P]=A.charCodeAt(S++)|A.charCodeAt(S++)<<8|A.charCodeAt(S++)<<16|A.charCodeAt(S++)<<24;else for(P=0;16>P;++P)D[P]=A[S++]|A[S++]<<8|A[S++]<<16|A[S++]<<24;A=N.g[0],S=N.g[1],P=N.g[2];var M=N.g[3],x=A+(M^S&(P^M))+D[0]+3614090360&4294967295;A=S+(x<<7&4294967295|x>>>25),x=M+(P^A&(S^P))+D[1]+3905402710&4294967295,M=A+(x<<12&4294967295|x>>>20),x=P+(S^M&(A^S))+D[2]+606105819&4294967295,P=M+(x<<17&4294967295|x>>>15),x=S+(A^P&(M^A))+D[3]+3250441966&4294967295,S=P+(x<<22&4294967295|x>>>10),x=A+(M^S&(P^M))+D[4]+4118548399&4294967295,A=S+(x<<7&4294967295|x>>>25),x=M+(P^A&(S^P))+D[5]+1200080426&4294967295,M=A+(x<<12&4294967295|x>>>20),x=P+(S^M&(A^S))+D[6]+2821735955&4294967295,P=M+(x<<17&4294967295|x>>>15),x=S+(A^P&(M^A))+D[7]+4249261313&4294967295,S=P+(x<<22&4294967295|x>>>10),x=A+(M^S&(P^M))+D[8]+1770035416&4294967295,A=S+(x<<7&4294967295|x>>>25),x=M+(P^A&(S^P))+D[9]+2336552879&4294967295,M=A+(x<<12&4294967295|x>>>20),x=P+(S^M&(A^S))+D[10]+4294925233&4294967295,P=M+(x<<17&4294967295|x>>>15),x=S+(A^P&(M^A))+D[11]+2304563134&4294967295,S=P+(x<<22&4294967295|x>>>10),x=A+(M^S&(P^M))+D[12]+1804603682&4294967295,A=S+(x<<7&4294967295|x>>>25),x=M+(P^A&(S^P))+D[13]+4254626195&4294967295,M=A+(x<<12&4294967295|x>>>20),x=P+(S^M&(A^S))+D[14]+2792965006&4294967295,P=M+(x<<17&4294967295|x>>>15),x=S+(A^P&(M^A))+D[15]+1236535329&4294967295,S=P+(x<<22&4294967295|x>>>10),x=A+(P^M&(S^P))+D[1]+4129170786&4294967295,A=S+(x<<5&4294967295|x>>>27),x=M+(S^P&(A^S))+D[6]+3225465664&4294967295,M=A+(x<<9&4294967295|x>>>23),x=P+(A^S&(M^A))+D[11]+643717713&4294967295,P=M+(x<<14&4294967295|x>>>18),x=S+(M^A&(P^M))+D[0]+3921069994&4294967295,S=P+(x<<20&4294967295|x>>>12),x=A+(P^M&(S^P))+D[5]+3593408605&4294967295,A=S+(x<<5&4294967295|x>>>27),x=M+(S^P&(A^S))+D[10]+38016083&4294967295,M=A+(x<<9&4294967295|x>>>23),x=P+(A^S&(M^A))+D[15]+3634488961&4294967295,P=M+(x<<14&4294967295|x>>>18),x=S+(M^A&(P^M))+D[4]+3889429448&4294967295,S=P+(x<<20&4294967295|x>>>12),x=A+(P^M&(S^P))+D[9]+568446438&4294967295,A=S+(x<<5&4294967295|x>>>27),x=M+(S^P&(A^S))+D[14]+3275163606&4294967295,M=A+(x<<9&4294967295|x>>>23),x=P+(A^S&(M^A))+D[3]+4107603335&4294967295,P=M+(x<<14&4294967295|x>>>18),x=S+(M^A&(P^M))+D[8]+1163531501&4294967295,S=P+(x<<20&4294967295|x>>>12),x=A+(P^M&(S^P))+D[13]+2850285829&4294967295,A=S+(x<<5&4294967295|x>>>27),x=M+(S^P&(A^S))+D[2]+4243563512&4294967295,M=A+(x<<9&4294967295|x>>>23),x=P+(A^S&(M^A))+D[7]+1735328473&4294967295,P=M+(x<<14&4294967295|x>>>18),x=S+(M^A&(P^M))+D[12]+2368359562&4294967295,S=P+(x<<20&4294967295|x>>>12),x=A+(S^P^M)+D[5]+4294588738&4294967295,A=S+(x<<4&4294967295|x>>>28),x=M+(A^S^P)+D[8]+2272392833&4294967295,M=A+(x<<11&4294967295|x>>>21),x=P+(M^A^S)+D[11]+1839030562&4294967295,P=M+(x<<16&4294967295|x>>>16),x=S+(P^M^A)+D[14]+4259657740&4294967295,S=P+(x<<23&4294967295|x>>>9),x=A+(S^P^M)+D[1]+2763975236&4294967295,A=S+(x<<4&4294967295|x>>>28),x=M+(A^S^P)+D[4]+1272893353&4294967295,M=A+(x<<11&4294967295|x>>>21),x=P+(M^A^S)+D[7]+4139469664&4294967295,P=M+(x<<16&4294967295|x>>>16),x=S+(P^M^A)+D[10]+3200236656&4294967295,S=P+(x<<23&4294967295|x>>>9),x=A+(S^P^M)+D[13]+681279174&4294967295,A=S+(x<<4&4294967295|x>>>28),x=M+(A^S^P)+D[0]+3936430074&4294967295,M=A+(x<<11&4294967295|x>>>21),x=P+(M^A^S)+D[3]+3572445317&4294967295,P=M+(x<<16&4294967295|x>>>16),x=S+(P^M^A)+D[6]+76029189&4294967295,S=P+(x<<23&4294967295|x>>>9),x=A+(S^P^M)+D[9]+3654602809&4294967295,A=S+(x<<4&4294967295|x>>>28),x=M+(A^S^P)+D[12]+3873151461&4294967295,M=A+(x<<11&4294967295|x>>>21),x=P+(M^A^S)+D[15]+530742520&4294967295,P=M+(x<<16&4294967295|x>>>16),x=S+(P^M^A)+D[2]+3299628645&4294967295,S=P+(x<<23&4294967295|x>>>9),x=A+(P^(S|~M))+D[0]+4096336452&4294967295,A=S+(x<<6&4294967295|x>>>26),x=M+(S^(A|~P))+D[7]+1126891415&4294967295,M=A+(x<<10&4294967295|x>>>22),x=P+(A^(M|~S))+D[14]+2878612391&4294967295,P=M+(x<<15&4294967295|x>>>17),x=S+(M^(P|~A))+D[5]+4237533241&4294967295,S=P+(x<<21&4294967295|x>>>11),x=A+(P^(S|~M))+D[12]+1700485571&4294967295,A=S+(x<<6&4294967295|x>>>26),x=M+(S^(A|~P))+D[3]+2399980690&4294967295,M=A+(x<<10&4294967295|x>>>22),x=P+(A^(M|~S))+D[10]+4293915773&4294967295,P=M+(x<<15&4294967295|x>>>17),x=S+(M^(P|~A))+D[1]+2240044497&4294967295,S=P+(x<<21&4294967295|x>>>11),x=A+(P^(S|~M))+D[8]+1873313359&4294967295,A=S+(x<<6&4294967295|x>>>26),x=M+(S^(A|~P))+D[15]+4264355552&4294967295,M=A+(x<<10&4294967295|x>>>22),x=P+(A^(M|~S))+D[6]+2734768916&4294967295,P=M+(x<<15&4294967295|x>>>17),x=S+(M^(P|~A))+D[13]+1309151649&4294967295,S=P+(x<<21&4294967295|x>>>11),x=A+(P^(S|~M))+D[4]+4149444226&4294967295,A=S+(x<<6&4294967295|x>>>26),x=M+(S^(A|~P))+D[11]+3174756917&4294967295,M=A+(x<<10&4294967295|x>>>22),x=P+(A^(M|~S))+D[2]+718787259&4294967295,P=M+(x<<15&4294967295|x>>>17),x=S+(M^(P|~A))+D[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(P+(x<<21&4294967295|x>>>11))&4294967295,N.g[2]=N.g[2]+P&4294967295,N.g[3]=N.g[3]+M&4294967295}s.prototype.u=function(N,A){A===void 0&&(A=N.length);for(var S=A-this.blockSize,D=this.B,P=this.h,M=0;M<A;){if(P==0)for(;M<=S;)o(this,N,M),M+=this.blockSize;if(typeof N=="string"){for(;M<A;)if(D[P++]=N.charCodeAt(M++),P==this.blockSize){o(this,D),P=0;break}}else for(;M<A;)if(D[P++]=N[M++],P==this.blockSize){o(this,D),P=0;break}}this.h=P,this.o+=A},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;var S=8*this.o;for(A=N.length-8;A<N.length;++A)N[A]=S&255,S/=256;for(this.u(N),N=Array(16),A=S=0;4>A;++A)for(var D=0;32>D;D+=8)N[S++]=this.g[A]>>>D&255;return N};function u(N,A){var S=m;return Object.prototype.hasOwnProperty.call(S,N)?S[N]:S[N]=A(N)}function f(N,A){this.h=A;for(var S=[],D=!0,P=N.length-1;0<=P;P--){var M=N[P]|0;D&&M==A||(S[P]=M,D=!1)}this.g=S}var m={};function p(N){return-128<=N&&128>N?u(N,function(A){return new f([A|0],0>A?-1:0)}):new f([N|0],0>N?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return I;if(0>N)return Q(y(-N));for(var A=[],S=1,D=0;N>=S;D++)A[D]=N/S|0,S*=4294967296;return new f(A,0)}function T(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return Q(T(N.substring(1),A));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=y(Math.pow(A,8)),D=I,P=0;P<N.length;P+=8){var M=Math.min(8,N.length-P),x=parseInt(N.substring(P,P+M),A);8>M?(M=y(Math.pow(A,M)),D=D.j(M).add(y(x))):(D=D.j(S),D=D.add(y(x)))}return D}var I=p(0),R=p(1),j=p(16777216);i=f.prototype,i.m=function(){if($(this))return-Q(this).m();for(var N=0,A=1,S=0;S<this.g.length;S++){var D=this.i(S);N+=(0<=D?D:4294967296+D)*A,A*=4294967296}return N},i.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(H(this))return"0";if($(this))return"-"+Q(this).toString(N);for(var A=y(Math.pow(N,6)),S=this,D="";;){var P=Te(S,A).g;S=le(S,P.j(A));var M=((0<S.g.length?S.g[0]:S.h)>>>0).toString(N);if(S=P,H(S))return M+D;for(;6>M.length;)M="0"+M;D=M+D}},i.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function H(N){if(N.h!=0)return!1;for(var A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function $(N){return N.h==-1}i.l=function(N){return N=le(this,N),$(N)?-1:H(N)?0:1};function Q(N){for(var A=N.g.length,S=[],D=0;D<A;D++)S[D]=~N.g[D];return new f(S,~N.h).add(R)}i.abs=function(){return $(this)?Q(this):this},i.add=function(N){for(var A=Math.max(this.g.length,N.g.length),S=[],D=0,P=0;P<=A;P++){var M=D+(this.i(P)&65535)+(N.i(P)&65535),x=(M>>>16)+(this.i(P)>>>16)+(N.i(P)>>>16);D=x>>>16,M&=65535,x&=65535,S[P]=x<<16|M}return new f(S,S[S.length-1]&-2147483648?-1:0)};function le(N,A){return N.add(Q(A))}i.j=function(N){if(H(this)||H(N))return I;if($(this))return $(N)?Q(this).j(Q(N)):Q(Q(this).j(N));if($(N))return Q(this.j(Q(N)));if(0>this.l(j)&&0>N.l(j))return y(this.m()*N.m());for(var A=this.g.length+N.g.length,S=[],D=0;D<2*A;D++)S[D]=0;for(D=0;D<this.g.length;D++)for(var P=0;P<N.g.length;P++){var M=this.i(D)>>>16,x=this.i(D)&65535,Ge=N.i(P)>>>16,Be=N.i(P)&65535;S[2*D+2*P]+=x*Be,se(S,2*D+2*P),S[2*D+2*P+1]+=M*Be,se(S,2*D+2*P+1),S[2*D+2*P+1]+=x*Ge,se(S,2*D+2*P+1),S[2*D+2*P+2]+=M*Ge,se(S,2*D+2*P+2)}for(D=0;D<A;D++)S[D]=S[2*D+1]<<16|S[2*D];for(D=A;D<2*A;D++)S[D]=0;return new f(S,0)};function se(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function ae(N,A){this.g=N,this.h=A}function Te(N,A){if(H(A))throw Error("division by zero");if(H(N))return new ae(I,I);if($(N))return A=Te(Q(N),A),new ae(Q(A.g),Q(A.h));if($(A))return A=Te(N,Q(A)),new ae(Q(A.g),A.h);if(30<N.g.length){if($(N)||$(A))throw Error("slowDivide_ only works with positive integers.");for(var S=R,D=A;0>=D.l(N);)S=ye(S),D=ye(D);var P=_e(S,1),M=_e(D,1);for(D=_e(D,2),S=_e(S,2);!H(D);){var x=M.add(D);0>=x.l(N)&&(P=P.add(S),M=x),D=_e(D,1),S=_e(S,1)}return A=le(N,P.j(A)),new ae(P,A)}for(P=I;0<=N.l(A);){for(S=Math.max(1,Math.floor(N.m()/A.m())),D=Math.ceil(Math.log(S)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),M=y(S),x=M.j(A);$(x)||0<x.l(N);)S-=D,M=y(S),x=M.j(A);H(M)&&(M=R),P=P.add(M),N=le(N,x)}return new ae(P,N)}i.A=function(N){return Te(this,N).h},i.and=function(N){for(var A=Math.max(this.g.length,N.g.length),S=[],D=0;D<A;D++)S[D]=this.i(D)&N.i(D);return new f(S,this.h&N.h)},i.or=function(N){for(var A=Math.max(this.g.length,N.g.length),S=[],D=0;D<A;D++)S[D]=this.i(D)|N.i(D);return new f(S,this.h|N.h)},i.xor=function(N){for(var A=Math.max(this.g.length,N.g.length),S=[],D=0;D<A;D++)S[D]=this.i(D)^N.i(D);return new f(S,this.h^N.h)};function ye(N){for(var A=N.g.length+1,S=[],D=0;D<A;D++)S[D]=N.i(D)<<1|N.i(D-1)>>>31;return new f(S,N.h)}function _e(N,A){var S=A>>5;A%=32;for(var D=N.g.length-S,P=[],M=0;M<D;M++)P[M]=0<A?N.i(M+S)>>>A|N.i(M+S+1)<<32-A:N.i(M+S);return new f(P,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,qE=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=T,qi=f}).apply(typeof jv<"u"?jv:typeof self<"u"?self:typeof window<"u"?window:{});var kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HE,Pl,FE,Xc,_m,GE,QE,XE;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof kc=="object"&&kc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,g){if(g)e:{var _=s;c=c.split(".");for(var b=0;b<c.length-1;b++){var L=c[b];if(!(L in _))break e;_=_[L]}c=c[c.length-1],b=_[c],g=g(b),g!=b&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function u(c,g){c instanceof String&&(c+="");var _=0,b=!1,L={next:function(){if(!b&&_<c.length){var F=_++;return{value:g(F,c[F]),done:!1}}return b=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function p(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function y(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function T(c,g,_){return c.call.apply(c.bind,arguments)}function I(c,g,_){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,b),c.apply(g,L)}}return function(){return c.apply(g,arguments)}}function R(c,g,_){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:I,R.apply(null,arguments)}function j(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var b=_.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function H(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(b,L,F){for(var te=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)te[Le-2]=arguments[Le];return g.prototype[L].apply(b,te)}}function $(c){const g=c.length;if(0<g){const _=Array(g);for(let b=0;b<g;b++)_[b]=c[b];return _}return[]}function Q(c,g){for(let _=1;_<arguments.length;_++){const b=arguments[_];if(p(b)){const L=c.length||0,F=b.length||0;c.length=L+F;for(let te=0;te<F;te++)c[L+te]=b[te]}else c.push(b)}}class le{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function se(c){return/^[\s\xa0]*$/.test(c)}function ae(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function Te(c){return Te[" "](c),c}Te[" "]=function(){};var ye=ae().indexOf("Gecko")!=-1&&!(ae().toLowerCase().indexOf("webkit")!=-1&&ae().indexOf("Edge")==-1)&&!(ae().indexOf("Trident")!=-1||ae().indexOf("MSIE")!=-1)&&ae().indexOf("Edge")==-1;function _e(c,g,_){for(const b in c)g.call(_,c[b],b,c)}function N(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function A(c){const g={};for(const _ in c)g[_]=c[_];return g}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,g){let _,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(_ in b)c[_]=b[_];for(let F=0;F<S.length;F++)_=S[F],Object.prototype.hasOwnProperty.call(b,_)&&(c[_]=b[_])}}function P(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function M(c){m.setTimeout(()=>{throw c},0)}function x(){var c=qe;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Ge{constructor(){this.h=this.g=null}add(g,_){const b=Be.get();b.set(g,_),this.h?this.h.next=b:this.g=b,this.h=b}}var Be=new le(()=>new G,c=>c.reset());class G{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,fe=!1,qe=new Ge,O=()=>{const c=m.Promise.resolve(void 0);ne=()=>{c.then(J)}};var J=()=>{for(var c;c=x();){try{c.h.call(c.g)}catch(_){M(_)}var g=Be;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}fe=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var me=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,g),m.removeEventListener("test",_,g)}catch{}return c})();function Ce(c,g){if(ee.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(ye){e:{try{Te(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ae[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ce.aa.h.call(this)}}H(Ce,ee);var Ae={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),ce=0;function vn(c,g,_,b,L){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!b,this.ha=L,this.key=++ce,this.da=this.fa=!1}function si(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Tr(c){this.src=c,this.g={},this.h=0}Tr.prototype.add=function(c,g,_,b,L){var F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);var te=Zi(c,g,b,L);return-1<te?(g=c[te],_||(g.fa=!1)):(g=new vn(g,this.src,F,!!b,L),g.fa=_,c.push(g)),g};function Wi(c,g){var _=g.type;if(_ in c.g){var b=c.g[_],L=Array.prototype.indexOf.call(b,g,void 0),F;(F=0<=L)&&Array.prototype.splice.call(b,L,1),F&&(si(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Zi(c,g,_,b){for(var L=0;L<c.length;++L){var F=c[L];if(!F.da&&F.listener==g&&F.capture==!!_&&F.ha==b)return L}return-1}var Ji="closure_lm_"+(1e6*Math.random()|0),_o={};function hu(c,g,_,b,L){if(Array.isArray(g)){for(var F=0;F<g.length;F++)hu(c,g[F],_,b,L);return null}return _=fu(_),c&&c[ge]?c.K(g,_,y(b)?!!b.capture:!1,L):En(c,g,_,!1,b,L)}function En(c,g,_,b,L,F){if(!g)throw Error("Invalid event type");var te=y(L)?!!L.capture:!!L,Le=$s(c);if(Le||(c[Ji]=Le=new Tr(c)),_=Le.add(g,_,b,te,F),_.proxy)return _;if(b=zh(),_.proxy=b,b.src=c,b.listener=_,c.addEventListener)me||(L=te),L===void 0&&(L=!1),c.addEventListener(g.toString(),b,L);else if(c.attachEvent)c.attachEvent(es(g.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return _}function zh(){function c(_){return g.call(c.src,c.listener,_)}const g=Bh;return c}function vo(c,g,_,b,L){if(Array.isArray(g))for(var F=0;F<g.length;F++)vo(c,g[F],_,b,L);else b=y(b)?!!b.capture:!!b,_=fu(_),c&&c[ge]?(c=c.i,g=String(g).toString(),g in c.g&&(F=c.g[g],_=Zi(F,_,b,L),-1<_&&(si(F[_]),Array.prototype.splice.call(F,_,1),F.length==0&&(delete c.g[g],c.h--)))):c&&(c=$s(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Zi(g,_,b,L)),(_=-1<c?g[c]:null)&&Ys(_))}function Ys(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[ge])Wi(g.i,c);else{var _=c.type,b=c.proxy;g.removeEventListener?g.removeEventListener(_,b,c.capture):g.detachEvent?g.detachEvent(es(_),b):g.addListener&&g.removeListener&&g.removeListener(b),(_=$s(g))?(Wi(_,c),_.h==0&&(_.src=null,g[Ji]=null)):si(c)}}}function es(c){return c in _o?_o[c]:_o[c]="on"+c}function Bh(c,g){if(c.da)c=!0;else{g=new Ce(g,this);var _=c.listener,b=c.ha||c.src;c.fa&&Ys(c),c=_.call(b,g)}return c}function $s(c){return c=c[Ji],c instanceof Tr?c:null}var Eo="__closure_events_fn_"+(1e9*Math.random()>>>0);function fu(c){return typeof c=="function"?c:(c[Eo]||(c[Eo]=function(g){return c.handleEvent(g)}),c[Eo])}function ht(){re.call(this),this.i=new Tr(this),this.M=this,this.F=null}H(ht,re),ht.prototype[ge]=!0,ht.prototype.removeEventListener=function(c,g,_,b){vo(this,c,g,_,b)};function Ke(c,g){var _,b=c.F;if(b)for(_=[];b;b=b.F)_.push(b);if(c=c.M,b=g.type||g,typeof g=="string")g=new ee(g,c);else if(g instanceof ee)g.target=g.target||c;else{var L=g;g=new ee(b,c),D(g,L)}if(L=!0,_)for(var F=_.length-1;0<=F;F--){var te=g.g=_[F];L=cn(te,b,!0,g)&&L}if(te=g.g=c,L=cn(te,b,!0,g)&&L,L=cn(te,b,!1,g)&&L,_)for(F=0;F<_.length;F++)te=g.g=_[F],L=cn(te,b,!1,g)&&L}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],b=0;b<_.length;b++)si(_[b]);delete c.g[g],c.h--}}this.F=null},ht.prototype.K=function(c,g,_,b){return this.i.add(String(c),g,!1,_,b)},ht.prototype.L=function(c,g,_,b){return this.i.add(String(c),g,!0,_,b)};function cn(c,g,_,b){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,F=0;F<g.length;++F){var te=g[F];if(te&&!te.da&&te.capture==_){var Le=te.listener,Rt=te.ha||te.src;te.fa&&Wi(c.i,te),L=Le.call(Rt,b)!==!1&&L}}return L&&!b.defaultPrevented}function Xt(c,g,_){if(typeof c=="function")_&&(c=R(c,_));else if(c&&typeof c.handleEvent=="function")c=R(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:m.setTimeout(c,g||0)}function du(c){c.g=Xt(()=>{c.g=null,c.i&&(c.i=!1,du(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class qh extends re{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:du(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ts(c){re.call(this),this.h=c,this.g={}}H(ts,re);var ns=[];function rs(c){_e(c.g,function(g,_){this.g.hasOwnProperty(_)&&Ys(g)},c),c.g={}}ts.prototype.N=function(){ts.aa.N.call(this),rs(this)},ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kn=m.JSON.stringify,Ws=m.JSON.parse,is=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function To(){}To.prototype.h=null;function wo(c){return c.h||(c.h=c.i())}function bo(){}var wr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function br(){ee.call(this,"d")}H(br,ee);function Ao(){ee.call(this,"c")}H(Ao,ee);var Yn={},So=null;function ai(){return So=So||new ht}Yn.La="serverreachability";function Zs(c){ee.call(this,Yn.La,c)}H(Zs,ee);function oi(c){const g=ai();Ke(g,new Zs(g))}Yn.STAT_EVENT="statevent";function mu(c,g){ee.call(this,Yn.STAT_EVENT,c),this.stat=g}H(mu,ee);function ot(c){const g=ai();Ke(g,new mu(g,c))}Yn.Ma="timingevent";function St(c,g){ee.call(this,Yn.Ma,c),this.size=g}H(St,ee);function _t(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},g)}function Tn(){this.g=!0}Tn.prototype.xa=function(){this.g=!1};function Ro(c,g,_,b,L,F){c.info(function(){if(c.g)if(F)for(var te="",Le=F.split("&"),Rt=0;Rt<Le.length;Rt++){var Ue=Le[Rt].split("=");if(1<Ue.length){var Pt=Ue[0];Ue=Ue[1];var It=Pt.split("_");te=2<=It.length&&It[1]=="type"?te+(Pt+"="+Ue+"&"):te+(Pt+"=redacted&")}}else te=null;else te=F;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+g+`
`+_+`
`+te})}function Hh(c,g,_,b,L,F,te){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+g+`
`+_+`
`+F+" "+te})}function li(c,g,_,b){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+ss(c,_)+(b?" "+b:"")})}function gu(c,g){c.info(function(){return"TIMEOUT: "+g})}Tn.prototype.info=function(){};function ss(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var b=_[c];if(!(2>b.length)){var L=b[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var te=1;te<L.length;te++)L[te]=""}}}}return kn(_)}catch{return g}}var ui={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ar={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$n;function Wn(){}H(Wn,To),Wn.prototype.g=function(){return new XMLHttpRequest},Wn.prototype.i=function(){return{}},$n=new Wn;function en(c,g,_,b){this.j=c,this.i=g,this.l=_,this.R=b||1,this.U=new ts(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mt}function mt(){this.i=null,this.g="",this.h=!1}var Io={},Js={};function Ln(c,g,_){c.L=1,c.v=cs(hn(g)),c.m=_,c.P=!0,Sr(c,null)}function Sr(c,g){c.F=Date.now(),as(c),c.A=hn(c.v);var _=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),Po(_.i,"t",b),c.C=0,_=c.j.J,c.h=new mt,c.g=Du(c.j,_?g:null,!c.m),0<c.O&&(c.M=new qh(R(c.Y,c,c.g),c.O)),g=c.U,_=c.g,b=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(ns[0]=L.toString()),L=ns);for(var F=0;F<L.length;F++){var te=hu(_,L[F],b||g.handleEvent,!1,g.h||g);if(!te)break;g.g[te.key]=te}g=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),oi(),Ro(c.i,c.u,c.A,c.l,c.R,c.m)}en.prototype.ca=function(c){c=c.target;const g=this.M;g&&Sn(c)==3?g.j():this.Y(c)},en.prototype.Y=function(c){try{if(c==this.g)e:{const It=Sn(this.g);var g=this.g.Ba();const Pr=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||bu(this.g)))){this.J||It!=4||g==7||(g==8||0>=Pr?oi(3):oi(2)),ci(this);var _=this.g.Z();this.X=_;t:if(pu(this)){var b=bu(this.g);c="";var L=b.length,F=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ut(this),Zn(this);var te="";break t}this.h.i=new m.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,c+=this.h.i.decode(b[g],{stream:!(F&&g==L-1)});b.length=0,this.h.g+=c,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=_==200,Hh(this.i,this.u,this.A,this.l,this.R,It,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,Rt=this.g;if((Le=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(Le)){var Ue=Le;break t}}Ue=null}if(_=Ue)li(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,os(this,_);else{this.o=!1,this.s=3,ot(12),Ut(this),Zn(this);break e}}if(this.P){_=!0;let jt;for(;!this.J&&this.C<te.length;)if(jt=yu(this,te),jt==Js){It==4&&(this.s=4,ot(14),_=!1),li(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Io){this.s=4,ot(15),li(this.i,this.l,te,"[Invalid Chunk]"),_=!1;break}else li(this.i,this.l,jt,null),os(this,jt);if(pu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||te.length!=0||this.h.h||(this.s=1,ot(16),_=!1),this.o=this.o&&_,!_)li(this.i,this.l,te,"[Invalid Chunked Response]"),Ut(this),Zn(this);else if(0<te.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),_s(Pt),Pt.M=!0,ot(11))}}else li(this.i,this.l,te,null),os(this,te);It==4&&Ut(this),this.o&&!this.J&&(It==4?xu(this.j,this):(this.o=!1,as(this)))}else Kh(this.g),_==400&&0<te.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),Ut(this),Zn(this)}}}catch{}finally{}};function pu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function yu(c,g){var _=c.C,b=g.indexOf(`
`,_);return b==-1?Js:(_=Number(g.substring(_,b)),isNaN(_)?Io:(b+=1,b+_>g.length?Js:(g=g.slice(b,b+_),c.C=b+_,g)))}en.prototype.cancel=function(){this.J=!0,Ut(this)};function as(c){c.S=Date.now()+c.I,_u(c,c.I)}function _u(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=_t(R(c.ba,c),g)}function ci(c){c.B&&(m.clearTimeout(c.B),c.B=null)}en.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(gu(this.i,this.A),this.L!=2&&(oi(),ot(17)),Ut(this),this.s=2,Zn(this)):_u(this,this.S-c)};function Zn(c){c.j.G==0||c.J||xu(c.j,c)}function Ut(c){ci(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,rs(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function os(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||xo(_.h,c))){if(!c.K&&xo(_.h,c)&&_.G==3){try{var b=_.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)ha(_),ua(_);else break e;Uo(_),ot(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=_t(R(_.Za,_),6e3));if(1>=ta(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Or(_,11)}else if((c.K||_.g==c)&&ha(_),!se(g))for(L=_.Da.g.parse(g),g=0;g<L.length;g++){let Ue=L[g];if(_.T=Ue[0],Ue=Ue[1],_.G==2)if(Ue[0]=="c"){_.K=Ue[1],_.ia=Ue[2];const Pt=Ue[3];Pt!=null&&(_.la=Pt,_.j.info("VER="+_.la));const It=Ue[4];It!=null&&(_.Aa=It,_.j.info("SVER="+_.Aa));const Pr=Ue[5];Pr!=null&&typeof Pr=="number"&&0<Pr&&(b=1.5*Pr,_.L=b,_.j.info("backChannelRequestTimeoutMs_="+b)),b=_;const jt=c.g;if(jt){const sr=jt.g?jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sr){var F=b.h;F.g||sr.indexOf("spdy")==-1&&sr.indexOf("quic")==-1&&sr.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(na(F,F.h),F.h=null))}if(b.D){const zo=jt.g?jt.g.getResponseHeader("X-HTTP-Session-Id"):null;zo&&(b.ya=zo,We(b.I,b.D,zo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),b=_;var te=c;if(b.qa=Nu(b,b.J?b.ia:null,b.W),te.K){tn(b.h,te);var Le=te,Rt=b.L;Rt&&(Le.I=Rt),Le.B&&(ci(Le),as(Le)),b.g=te}else Ru(b);0<_.i.length&&ca(_)}else Ue[0]!="stop"&&Ue[0]!="close"||Or(_,7);else _.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Or(_,7):ko(_):Ue[0]!="noop"&&_.l&&_.l.ta(Ue),_.v=0)}}oi(4)}catch{}}var vu=class{constructor(c,g){this.g=c,this.map=g}};function Rr(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ea(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ta(c){return c.h?1:c.g?c.g.size:0}function xo(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function na(c,g){c.g?c.g.add(g):c.h=g}function tn(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Rr.prototype.cancel=function(){if(this.i=Co(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Co(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return $(c.i)}function Fh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var g=[],_=c.length,b=0;b<_;b++)g.push(c[b]);return g}g=[],_=0;for(b in c)g[_++]=c[b];return g}function ra(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const b in c)g[_++]=b;return g}}}function No(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=ra(c),b=Fh(c),L=b.length,F=0;F<L;F++)g.call(void 0,b[F],_&&_[F],c)}var ls=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gh(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var b=c[_].indexOf("="),L=null;if(0<=b){var F=c[_].substring(0,b);L=c[_].substring(b+1)}else F=c[_];g(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function vt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof vt){this.h=c.h,us(this,c.j),this.o=c.o,this.g=c.g,hi(this,c.s),this.l=c.l;var g=c.i,_=new xr;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Ir(this,_),this.m=c.m}else c&&(g=String(c).match(ls))?(this.h=!1,us(this,g[1]||"",!0),this.o=wn(g[2]||""),this.g=wn(g[3]||"",!0),hi(this,g[4]),this.l=wn(g[5]||"",!0),Ir(this,g[6]||"",!0),this.m=wn(g[7]||"")):(this.h=!1,this.i=new xr(null,this.h))}vt.prototype.toString=function(){var c=[],g=this.j;g&&c.push(hs(g,Do,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(hs(g,Do,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(hs(_,_.charAt(0)=="/"?Qh:Oo,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",hs(_,ia)),c.join("")};function hn(c){return new vt(c)}function us(c,g,_){c.j=_?wn(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function hi(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Ir(c,g,_){g instanceof xr?(c.i=g,Tu(c.i,c.h)):(_||(g=hs(g,Xh)),c.i=new xr(g,c.h))}function We(c,g,_){c.i.set(g,_)}function cs(c){return We(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function wn(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function hs(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,Eu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Eu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Do=/[#\/\?@]/g,Oo=/[#\?:]/g,Qh=/[#\?]/g,Xh=/[#\?@]/g,ia=/#/g;function xr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function bn(c){c.g||(c.g=new Map,c.h=0,c.i&&Gh(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}i=xr.prototype,i.add=function(c,g){bn(this),this.i=null,c=Jn(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Cr(c,g){bn(c),g=Jn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Nr(c,g){return bn(c),g=Jn(c,g),c.g.has(g)}i.forEach=function(c,g){bn(this),this.g.forEach(function(_,b){_.forEach(function(L){c.call(g,L,b,this)},this)},this)},i.na=function(){bn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let b=0;b<g.length;b++){const L=c[b];for(let F=0;F<L.length;F++)_.push(g[b])}return _},i.V=function(c){bn(this);let g=[];if(typeof c=="string")Nr(this,c)&&(g=g.concat(this.g.get(Jn(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},i.set=function(c,g){return bn(this),this.i=null,c=Jn(this,c),Nr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},i.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Po(c,g,_){Cr(c,g),0<_.length&&(c.i=null,c.g.set(Jn(c,g),$(_)),c.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var b=g[_];const F=encodeURIComponent(String(b)),te=this.V(b);for(b=0;b<te.length;b++){var L=F;te[b]!==""&&(L+="="+encodeURIComponent(String(te[b]))),c.push(L)}}return this.i=c.join("&")};function Jn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Tu(c,g){g&&!c.j&&(bn(c),c.i=null,c.g.forEach(function(_,b){var L=b.toLowerCase();b!=L&&(Cr(this,b),Po(this,L,_))},c)),c.j=g}function fs(c,g){const _=new Tn;if(m.Image){const b=new Image;b.onload=j(An,_,"TestLoadImage: loaded",!0,g,b),b.onerror=j(An,_,"TestLoadImage: error",!1,g,b),b.onabort=j(An,_,"TestLoadImage: abort",!1,g,b),b.ontimeout=j(An,_,"TestLoadImage: timeout",!1,g,b),m.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else g(!1)}function Un(c,g){const _=new Tn,b=new AbortController,L=setTimeout(()=>{b.abort(),An(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:b.signal}).then(F=>{clearTimeout(L),F.ok?An(_,"TestPingServer: ok",!0,g):An(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),An(_,"TestPingServer: error",!1,g)})}function An(c,g,_,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(_)}catch{}}function ds(){this.g=new is}function er(c,g,_){const b=_||"";try{No(c,function(L,F){let te=L;y(L)&&(te=kn(L)),g.push(b+F+"="+encodeURIComponent(te))})}catch(L){throw g.push(b+"type="+encodeURIComponent("_badmap")),L}}function fi(c){this.l=c.Ub||null,this.j=c.eb||!1}H(fi,To),fi.prototype.g=function(){return new Dr(this.l,this.j)},fi.prototype.i=(function(c){return function(){return c}})({});function Dr(c,g){ht.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}H(Dr,ht),i=Dr.prototype,i.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,nr(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||m).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tr(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,nr(this)),this.g&&(this.readyState=3,nr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?tr(this):nr(this),this.readyState==3&&Vo(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,tr(this))},i.Qa=function(c){this.g&&(this.response=c,tr(this))},i.ga=function(){this.g&&tr(this)};function tr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,nr(c)}i.setRequestHeader=function(c,g){this.u.append(c,g)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function nr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Dr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Mo(c){let g="";return _e(c,function(_,b){g+=b,g+=":",g+=_,g+=`\r
`}),g}function Ot(c,g,_){e:{for(b in _){var b=!1;break e}b=!0}b||(_=Mo(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):We(c,g,_))}function Qe(c){ht.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}H(Qe,ht);var sa=/^https?$/i,ms=["POST","PUT"];i=Qe.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,g,_,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$n.g(),this.v=this.o?wo(this.o):wo($n),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(F){wu(this,F);return}if(c=_||"",_=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)_.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const F of b.keys())_.set(F,b.get(F));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(_.keys()).find(F=>F.toLowerCase()=="content-type"),L=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(ms,g,void 0))||b||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,te]of _)this.g.setRequestHeader(F,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gs(this),this.u=!0,this.g.send(c),this.u=!1}catch(F){wu(this,F)}};function wu(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,aa(c),rr(c)}function aa(c){c.A||(c.A=!0,Ke(c,"complete"),Ke(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ke(this,"complete"),Ke(this,"abort"),rr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rr(this,!0)),Qe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?oa(this):this.bb())},i.bb=function(){oa(this)};function oa(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Sn(c)!=4||c.Z()!=2)){if(c.u&&Sn(c)==4)Xt(c.Ea,0,c);else if(Ke(c,"readystatechange"),Sn(c)==4){c.h=!1;try{const te=c.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var b;if(b=te===0){var L=String(c.D).match(ls)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),b=!sa.test(L?L.toLowerCase():"")}_=b}if(_)Ke(c,"complete"),Ke(c,"success");else{c.m=6;try{var F=2<Sn(c)?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.Z()+"]",aa(c)}}finally{rr(c)}}}}function rr(c,g){if(c.g){gs(c);const _=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Ke(c,"ready");try{_.onreadystatechange=b}catch{}}}function gs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function Sn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Ws(g)}};function bu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Kh(c){const g={};c=(c.g&&2<=Sn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(se(c[b]))continue;var _=P(c[b]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const F=g[L]||[];g[L]=F,F.push(_)}N(g,function(b){return b.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ps(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function la(c){this.Aa=0,this.i=[],this.j=new Tn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ps("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ps("baseRetryDelayMs",5e3,c),this.cb=ps("retryDelaySeedMs",1e4,c),this.Wa=ps("forwardChannelMaxRetries",2,c),this.wa=ps("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Rr(c&&c.concurrentRequestLimit),this.Da=new ds,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=la.prototype,i.la=8,i.G=1,i.connect=function(c,g,_,b){ot(0),this.W=c,this.H=g||{},_&&b!==void 0&&(this.H.OSID=_,this.H.OAID=b),this.F=this.X,this.I=Nu(this,null,this.W),ca(this)};function ko(c){if(Au(c),c.G==3){var g=c.U++,_=hn(c.I);if(We(_,"SID",c.K),We(_,"RID",g),We(_,"TYPE","terminate"),ys(c,_),g=new en(c,c.j,g),g.L=2,g.v=cs(hn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=g.v,_=!0),_||(g.g=Du(g.j,null),g.g.ea(g.v)),g.F=Date.now(),as(g)}Cu(c)}function ua(c){c.g&&(_s(c),c.g.cancel(),c.g=null)}function Au(c){ua(c),c.u&&(m.clearTimeout(c.u),c.u=null),ha(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function ca(c){if(!ea(c.h)&&!c.s){c.s=!0;var g=c.Ga;ne||O(),fe||(ne(),fe=!0),qe.add(g,c),c.B=0}}function Yh(c,g){return ta(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=_t(R(c.Ga,c,g),jo(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new en(this,this.j,c);let F=this.o;if(this.S&&(F?(F=A(F),D(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var b=this.i[_];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Su(this,L,g),_=hn(this.I),We(_,"RID",c),We(_,"CVER",22),this.D&&We(_,"X-HTTP-Session-Id",this.D),ys(this,_),F&&(this.O?g="headers="+encodeURIComponent(String(Mo(F)))+"&"+g:this.m&&Ot(_,this.m,F)),na(this.h,L),this.Ua&&We(_,"TYPE","init"),this.P?(We(_,"$req",g),We(_,"SID","null"),L.T=!0,Ln(L,_,null)):Ln(L,_,g),this.G=2}}else this.G==3&&(c?Lo(this,c):this.i.length==0||ea(this.h)||Lo(this))};function Lo(c,g){var _;g?_=g.l:_=c.U++;const b=hn(c.I);We(b,"SID",c.K),We(b,"RID",_),We(b,"AID",c.T),ys(c,b),c.m&&c.o&&Ot(b,c.m,c.o),_=new en(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Su(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),na(c.h,_),Ln(_,b,g)}function ys(c,g){c.H&&_e(c.H,function(_,b){We(g,b,_)}),c.l&&No({},function(_,b){We(g,b,_)})}function Su(c,g,_){_=Math.min(c.i.length,_);var b=c.l?R(c.l.Na,c.l,c):null;e:{var L=c.i;let F=-1;for(;;){const te=["count="+_];F==-1?0<_?(F=L[0].g,te.push("ofs="+F)):F=0:te.push("ofs="+F);let Le=!0;for(let Rt=0;Rt<_;Rt++){let Ue=L[Rt].g;const Pt=L[Rt].map;if(Ue-=F,0>Ue)F=Math.max(0,L[Rt].g-100),Le=!1;else try{er(Pt,te,"req"+Ue+"_")}catch{b&&b(Pt)}}if(Le){b=te.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,b}function Ru(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;ne||O(),fe||(ne(),fe=!0),qe.add(g,c),c.v=0}}function Uo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=_t(R(c.Fa,c),jo(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,Iu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=_t(R(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),ua(this),Iu(this))};function _s(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Iu(c){c.g=new en(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=hn(c.qa);We(g,"RID","rpc"),We(g,"SID",c.K),We(g,"AID",c.T),We(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&We(g,"TO",c.ja),We(g,"TYPE","xmlhttp"),ys(c,g),c.m&&c.o&&Ot(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=cs(hn(g)),_.m=null,_.P=!0,Sr(_,c)}i.Za=function(){this.C!=null&&(this.C=null,ua(this),Uo(this),ot(19))};function ha(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function xu(c,g){var _=null;if(c.g==g){ha(c),_s(c),c.g=null;var b=2}else if(xo(c.h,g))_=g.D,tn(c.h,g),b=1;else return;if(c.G!=0){if(g.o)if(b==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var L=c.B;b=ai(),Ke(b,new St(b,_)),ca(c)}else Ru(c);else if(L=g.s,L==3||L==0&&0<g.X||!(b==1&&Yh(c,g)||b==2&&Uo(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),L){case 1:Or(c,5);break;case 4:Or(c,10);break;case 3:Or(c,6);break;default:Or(c,2)}}}function jo(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Or(c,g){if(c.j.info("Error code "+g),g==2){var _=R(c.fb,c),b=c.Xa;const L=!b;b=new vt(b||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||us(b,"https"),cs(b),L?fs(b.toString(),_):Un(b.toString(),_)}else ot(2);c.G=0,c.l&&c.l.sa(g),Cu(c),Au(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Cu(c){if(c.G=0,c.ka=[],c.l){const g=Co(c.h);(g.length!=0||c.i.length!=0)&&(Q(c.ka,g),Q(c.ka,c.i),c.h.i.length=0,$(c.i),c.i.length=0),c.l.ra()}}function Nu(c,g,_){var b=_ instanceof vt?hn(_):new vt(_);if(b.g!="")g&&(b.g=g+"."+b.g),hi(b,b.s);else{var L=m.location;b=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var F=new vt(null);b&&us(F,b),g&&(F.g=g),L&&hi(F,L),_&&(F.l=_),b=F}return _=c.D,g=c.ya,_&&g&&We(b,_,g),We(b,"VER",c.la),ys(c,b),b}function Du(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Qe(new fi({eb:_})):new Qe(c.pa),g.Ha(c.J),g}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ou(){}i=Ou.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function fa(){}fa.prototype.g=function(c,g){return new nn(c,g)};function nn(c,g){ht.call(this),this.g=new la(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!se(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!se(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new ir(this)}H(nn,ht),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){ko(this.g)},nn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=kn(c),c=_);g.i.push(new vu(g.Ya++,c)),g.G==3&&ca(g)},nn.prototype.N=function(){this.g.l=null,delete this.j,ko(this.g),delete this.g,nn.aa.N.call(this)};function Pu(c){br.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}H(Pu,br);function Vu(){Ao.call(this),this.status=1}H(Vu,Ao);function ir(c){this.g=c}H(ir,Ou),ir.prototype.ua=function(){Ke(this.g,"a")},ir.prototype.ta=function(c){Ke(this.g,new Pu(c))},ir.prototype.sa=function(c){Ke(this.g,new Vu)},ir.prototype.ra=function(){Ke(this.g,"b")},fa.prototype.createWebChannel=fa.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,XE=function(){return new fa},QE=function(){return ai()},GE=Yn,_m={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ui.NO_ERROR=0,ui.TIMEOUT=8,ui.HTTP_ERROR=6,Xc=ui,Ar.COMPLETE="complete",FE=Ar,bo.EventType=wr,wr.OPEN="a",wr.CLOSE="b",wr.ERROR="c",wr.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Pl=bo,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,HE=Qe}).apply(typeof kc<"u"?kc:typeof self<"u"?self:typeof window<"u"?window:{});const zv="@firebase/firestore",Bv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new Um("@firebase/firestore");function Ba(){return Bs.logLevel}function oe(i,...e){if(Bs.logLevel<=Ve.DEBUG){const n=e.map(Wm);Bs.debug(`Firestore (${co}): ${i}`,...n)}}function ti(i,...e){if(Bs.logLevel<=Ve.ERROR){const n=e.map(Wm);Bs.error(`Firestore (${co}): ${i}`,...n)}}function eo(i,...e){if(Bs.logLevel<=Ve.WARN){const n=e.map(Wm);Bs.warn(`Firestore (${co}): ${i}`,...n)}}function Wm(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,KE(i,s,n)}function KE(i,e,n){let s=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw ti(s),new Error(s)}function Xe(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||KE(e,o,s)}function Ie(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends ri{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Wt.UNAUTHENTICATED)))}shutdown(){}}class ZI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class JI{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new $r,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new $r)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Xe(typeof s.accessToken=="string",31837,{l:s}),new YE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class ex{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tx{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new ex(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nx{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Xe(this.o===void 0,3512);const s=u=>{u.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,oe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new qv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=rx(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Me(i,e){return i<e?-1:i>e?1:0}function vm(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return nm(o)===nm(u)?Me(o,u):nm(o)?1:-1}return Me(i.length,e.length)}const ix=55296,sx=57343;function nm(i){const e=i.charCodeAt(0);return e>=ix&&e<=sx}function to(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="__name__";class hr{constructor(e,n,s){n===void 0?n=0:n>e.length&&be(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&be(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return hr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hr?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=hr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Me(e.length,n.length)}static compareSegments(e,n){const s=hr.isNumericId(e),o=hr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?hr.extractNumericId(e).compare(hr.extractNumericId(n)):vm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qi.fromString(e.substring(4,e.length-2))}}class st extends hr{construct(e,n,s){return new st(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ie(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new st(n)}static emptyPath(){return new st([])}}const ax=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends hr{construct(e,n,s){return new Ft(e,n,s)}static isValidIdentifier(e){return ax.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hv}static keyField(){return new Ft([Hv])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ie(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ie(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ie(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new ie(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(st.fromString(e))}static fromName(e){return new pe(st.fromString(e).popFirst(5))}static empty(){return new pe(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(i,e,n){if(!n)throw new ie(Y.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function ox(i,e,n,s){if(e===!0&&s===!0)throw new ie(Y.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Fv(i){if(!pe.isDocumentKey(i))throw new ie(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Gv(i){if(pe.isDocumentKey(i))throw new ie(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function WE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Ah(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":be(12329,{type:typeof i})}function no(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ie(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ah(i);throw new ie(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(i,e){const n={typeString:i};return e&&(n.value=e),n}function iu(i,e){if(!WE(i))throw new ie(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const f=i[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new ie(Y.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=-62135596800,Xv=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Xv);return new at(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Qv)throw new ie(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xv}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(iu(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Qv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:At("string",at._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new at(0,0))}static max(){return new Re(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=-1;function lx(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(s===1e9?new at(n+1,0):new at(n,s));return new Fi(o,pe.empty(),e)}function ux(i){return new Fi(i.readTime,i.key,Gl)}class Fi{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Fi(Re.min(),pe.empty(),Gl)}static max(){return new Fi(Re.max(),pe.empty(),Gl)}}function cx(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(i.documentKey,e.documentKey),n!==0?n:Me(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ho(i){if(i.code!==Y.FAILED_PRECONDITION||i.message!==hx)throw i;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.reject(n)}static resolve(e){return new Z(((n,s)=>{n(e)}))}static reject(e){return new Z(((n,s)=>{s(e)}))}static waitFor(e){return new Z(((n,s)=>{let o=0,u=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++u,f&&u===o&&n()}),(p=>s(p)))})),f=!0,u===o&&n()}))}static or(e){let n=Z.resolve(!1);for(const s of e)n=n.next((o=>o?Z.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new Z(((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next((T=>{f[y]=T,++m,m===u&&s(f)}),(T=>o(T)))}}))}static doWhile(e,n){return new Z(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function dx(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=-1;function Rh(i){return i==null}function lh(i){return i===0&&1/i==-1/0}function mx(i){return typeof i=="number"&&Number.isInteger(i)&&!lh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="";function gx(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Kv(e)),e=px(i.get(n),e);return Kv(e)}function px(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case ZE:n+="";break;default:n+=u}}return n}function Kv(i){return i+ZE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Fs(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function JE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lc(this.root,e,this.comparator,!0)}}class Lc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Ht.RED,this.left=o??Ht.EMPTY,this.right=u??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Ht(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Ht.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $v(this.data.getIterator())}getIteratorFrom(e){return new $v(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Dt(this.comparator);return n.data=e,n}}class $v{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new Fn([])}unionWith(e){let n=new Dt(Ft.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return to(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new eT("Invalid base64 string: "+u):u}})(e);return new Qt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new Qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const yx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gi(i){if(Xe(!!i,39018),typeof i=="string"){let e=0;const n=yx.exec(i);if(Xe(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:yt(i.seconds),nanos:yt(i.nanos)}}function yt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Qi(i){return typeof i=="string"?Qt.fromBase64String(i):Qt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="server_timestamp",nT="__type__",rT="__previous_value__",iT="__local_write_time__";function eg(i){var n,s;return((s=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[nT])==null?void 0:s.stringValue)===tT}function Ih(i){const e=i.mapValue.fields[rT];return eg(e)?Ih(e):e}function Ql(i){const e=Gi(i.mapValue.fields[iT].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,n,s,o,u,f,m,p,y,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=T}}const uh="(default)";class Xl{constructor(e,n){this.projectId=e,this.database=n||uh}static empty(){return new Xl("","")}get isDefaultDatabase(){return this.database===uh}isEqual(e){return e instanceof Xl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="__type__",vx="__max__",Uc={mapValue:{}},aT="__vector__",ch="value";function Xi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?eg(i)?4:Tx(i)?9007199254740991:Ex(i)?10:11:be(28295,{value:i})}function _r(i,e){if(i===e)return!0;const n=Xi(i);if(n!==Xi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ql(i).isEqual(Ql(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Gi(o.timestampValue),m=Gi(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return Qi(o.bytesValue).isEqual(Qi(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return yt(o.geoPointValue.latitude)===yt(u.geoPointValue.latitude)&&yt(o.geoPointValue.longitude)===yt(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return yt(o.integerValue)===yt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=yt(o.doubleValue),m=yt(u.doubleValue);return f===m?lh(f)===lh(m):isNaN(f)&&isNaN(m)}return!1})(i,e);case 9:return to(i.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Yv(f)!==Yv(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!_r(f[p],m[p])))return!1;return!0})(i,e);default:return be(52216,{left:i})}}function Kl(i,e){return(i.values||[]).find((n=>_r(n,e)))!==void 0}function ro(i,e){if(i===e)return 0;const n=Xi(i),s=Xi(e);if(n!==s)return Me(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(i.booleanValue,e.booleanValue);case 2:return(function(u,f){const m=yt(u.integerValue||u.doubleValue),p=yt(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(i,e);case 3:return Wv(i.timestampValue,e.timestampValue);case 4:return Wv(Ql(i),Ql(e));case 5:return vm(i.stringValue,e.stringValue);case 6:return(function(u,f){const m=Qi(u),p=Qi(f);return m.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(u,f){const m=u.split("/"),p=f.split("/");for(let y=0;y<m.length&&y<p.length;y++){const T=Me(m[y],p[y]);if(T!==0)return T}return Me(m.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,f){const m=Me(yt(u.latitude),yt(f.latitude));return m!==0?m:Me(yt(u.longitude),yt(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Zv(i.arrayValue,e.arrayValue);case 10:return(function(u,f){var R,j,H,$;const m=u.fields||{},p=f.fields||{},y=(R=m[ch])==null?void 0:R.arrayValue,T=(j=p[ch])==null?void 0:j.arrayValue,I=Me(((H=y==null?void 0:y.values)==null?void 0:H.length)||0,(($=T==null?void 0:T.values)==null?void 0:$.length)||0);return I!==0?I:Zv(y,T)})(i.mapValue,e.mapValue);case 11:return(function(u,f){if(u===Uc.mapValue&&f===Uc.mapValue)return 0;if(u===Uc.mapValue)return 1;if(f===Uc.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),y=f.fields||{},T=Object.keys(y);p.sort(),T.sort();for(let I=0;I<p.length&&I<T.length;++I){const R=vm(p[I],T[I]);if(R!==0)return R;const j=ro(m[p[I]],y[T[I]]);if(j!==0)return j}return Me(p.length,T.length)})(i.mapValue,e.mapValue);default:throw be(23264,{he:n})}}function Wv(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Me(i,e);const n=Gi(i),s=Gi(e),o=Me(n.seconds,s.seconds);return o!==0?o:Me(n.nanos,s.nanos)}function Zv(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=ro(n[o],s[o]);if(u)return u}return Me(n.length,s.length)}function io(i){return Em(i)}function Em(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=Gi(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Qi(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return pe.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Em(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Em(n.fields[f])}`;return o+"}"})(i.mapValue):be(61005,{value:i})}function Kc(i){switch(Xi(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ih(i);return e?16+Kc(e):16;case 5:return 2*i.stringValue.length;case 6:return Qi(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Kc(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Fs(s.fields,((u,f)=>{o+=u.length+Kc(f)})),o})(i.mapValue);default:throw be(13486,{value:i})}}function Jv(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Tm(i){return!!i&&"integerValue"in i}function tg(i){return!!i&&"arrayValue"in i}function e0(i){return!!i&&"nullValue"in i}function t0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Yc(i){return!!i&&"mapValue"in i}function Ex(i){var n,s;return((s=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[sT])==null?void 0:s.stringValue)===aT}function jl(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Fs(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=jl(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jl(i.arrayValue.values[n]);return e}return{...i}}function Tx(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===vx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Yc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jl(n)}setAll(e){let n=Ft.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=jl(f):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Yc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Yc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Fs(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Pn(jl(this.value))}}function oT(i){const e=[];return Fs(i.fields,((n,s)=>{const o=new Ft([n]);if(Yc(s)){const u=oT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Zt(e,0,Re.min(),Re.min(),Re.min(),Pn.empty(),0)}static newFoundDocument(e,n,s,o){return new Zt(e,1,n,Re.min(),s,o,0)}static newNoDocument(e,n){return new Zt(e,2,n,Re.min(),Re.min(),Pn.empty(),0)}static newUnknownDocument(e,n){return new Zt(e,3,n,Re.min(),Re.min(),Pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n){this.position=e,this.inclusive=n}}function n0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?s=pe.comparator(pe.fromName(f.referenceValue),n.key):s=ro(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function r0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!_r(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n="asc"){this.field=e,this.dir=n}}function wx(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{}class bt extends lT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Ax(e,n,s):n==="array-contains"?new Ix(e,s):n==="in"?new xx(e,s):n==="not-in"?new Cx(e,s):n==="array-contains-any"?new Nx(e,s):new bt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new Sx(e,s):new Rx(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ro(n,this.value)):n!==null&&Xi(this.value)===Xi(n)&&this.matchesComparison(ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends lT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xn(e,n)}matches(e){return uT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uT(i){return i.op==="and"}function cT(i){return bx(i)&&uT(i)}function bx(i){for(const e of i.filters)if(e instanceof Xn)return!1;return!0}function wm(i){if(i instanceof bt)return i.field.canonicalString()+i.op.toString()+io(i.value);if(cT(i))return i.filters.map((e=>wm(e))).join(",");{const e=i.filters.map((n=>wm(n))).join(",");return`${i.op}(${e})`}}function hT(i,e){return i instanceof bt?(function(s,o){return o instanceof bt&&s.op===o.op&&s.field.isEqual(o.field)&&_r(s.value,o.value)})(i,e):i instanceof Xn?(function(s,o){return o instanceof Xn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,m)=>u&&hT(f,o.filters[m])),!0):!1})(i,e):void be(19439)}function fT(i){return i instanceof bt?(function(n){return`${n.field.canonicalString()} ${n.op} ${io(n.value)}`})(i):i instanceof Xn?(function(n){return n.op.toString()+" {"+n.getFilters().map(fT).join(" ,")+"}"})(i):"Filter"}class Ax extends bt{constructor(e,n,s){super(e,n,s),this.key=pe.fromName(s.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Sx extends bt{constructor(e,n){super(e,"in",n),this.keys=dT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Rx extends bt{constructor(e,n){super(e,"not-in",n),this.keys=dT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function dT(i,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((s=>pe.fromName(s.referenceValue)))}class Ix extends bt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tg(n)&&Kl(n.arrayValue,this.value)}}class xx extends bt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Kl(this.value.arrayValue,n)}}class Cx extends bt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Kl(this.value.arrayValue,n)}}class Nx extends bt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Kl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function i0(i,e=null,n=[],s=[],o=null,u=null,f=null){return new Dx(i,e,n,s,o,u,f)}function ng(i){const e=Ie(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>wm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Rh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>io(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>io(s))).join(",")),e.Te=n}return e.Te}function rg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!wx(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!hT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!r0(i.startAt,e.startAt)&&r0(i.endAt,e.endAt)}function bm(i){return pe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ox(i,e,n,s,o,u,f,m){return new su(i,e,n,s,o,u,f,m)}function ig(i){return new su(i)}function s0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function mT(i){return i.collectionGroup!==null}function zl(i){const e=Ie(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Dt(Ft.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new fh(u,s))})),n.has(Ft.keyField().canonicalString())||e.Ie.push(new fh(Ft.keyField(),s))}return e.Ie}function mr(i){const e=Ie(i);return e.Ee||(e.Ee=Px(e,zl(i))),e.Ee}function Px(i,e){if(i.limitType==="F")return i0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new fh(o.field,u)}));const n=i.endAt?new hh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new hh(i.startAt.position,i.startAt.inclusive):null;return i0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Am(i,e){const n=i.filters.concat([e]);return new su(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Sm(i,e,n){return new su(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function xh(i,e){return rg(mr(i),mr(e))&&i.limitType===e.limitType}function gT(i){return`${ng(mr(i))}|lt:${i.limitType}`}function qa(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>fT(o))).join(", ")}]`),Rh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>io(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>io(o))).join(",")),`Target(${s})`})(mr(i))}; limitType=${i.limitType})`}function Ch(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):pe.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of zl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,p){const y=n0(f,m,p);return f.inclusive?y<=0:y<0})(s.startAt,zl(s),o)||s.endAt&&!(function(f,m,p){const y=n0(f,m,p);return f.inclusive?y>=0:y>0})(s.endAt,zl(s),o))})(i,e)}function Vx(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function pT(i){return(e,n)=>{let s=!1;for(const o of zl(i)){const u=Mx(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function Mx(i,e,n){const s=i.field.isKeyField()?pe.comparator(e.key,n.key):(function(u,f,m){const p=f.data.field(u),y=m.data.field(u);return p!==null&&y!==null?ro(p,y):be(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return be(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return JE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=new ct(pe.comparator);function ni(){return kx}const yT=new ct(pe.comparator);function Vl(...i){let e=yT;for(const n of i)e=e.insert(n.key,n);return e}function _T(i){let e=yT;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function ks(){return Bl()}function vT(){return Bl()}function Bl(){return new Gs((i=>i.toString()),((i,e)=>i.isEqual(e)))}const Lx=new ct(pe.comparator),Ux=new Dt(pe.comparator);function ke(...i){let e=Ux;for(const n of i)e=e.add(n);return e}const jx=new Dt(Me);function zx(){return jx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lh(e)?"-0":e}}function ET(i){return{integerValue:""+i}}function Bx(i,e){return mx(e)?ET(e):sg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(){this._=void 0}}function qx(i,e,n){return i instanceof dh?(function(o,u){const f={fields:{[nT]:{stringValue:tT},[iT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&eg(u)&&(u=Ih(u)),u&&(f.fields[rT]=u),{mapValue:f}})(n,e):i instanceof Yl?wT(i,e):i instanceof $l?bT(i,e):(function(o,u){const f=TT(o,u),m=a0(f)+a0(o.Ae);return Tm(f)&&Tm(o.Ae)?ET(m):sg(o.serializer,m)})(i,e)}function Hx(i,e,n){return i instanceof Yl?wT(i,e):i instanceof $l?bT(i,e):n}function TT(i,e){return i instanceof mh?(function(s){return Tm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class dh extends Nh{}class Yl extends Nh{constructor(e){super(),this.elements=e}}function wT(i,e){const n=AT(e);for(const s of i.elements)n.some((o=>_r(o,s)))||n.push(s);return{arrayValue:{values:n}}}class $l extends Nh{constructor(e){super(),this.elements=e}}function bT(i,e){let n=AT(e);for(const s of i.elements)n=n.filter((o=>!_r(o,s)));return{arrayValue:{values:n}}}class mh extends Nh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function a0(i){return yt(i.integerValue||i.doubleValue)}function AT(i){return tg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function Fx(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Yl&&o instanceof Yl||s instanceof $l&&o instanceof $l?to(s.elements,o.elements,_r):s instanceof mh&&o instanceof mh?_r(s.Ae,o.Ae):s instanceof dh&&o instanceof dh})(i.transform,e.transform)}class Gx{constructor(e,n){this.version=e,this.transformResults=n}}class Wr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wr}static exists(e){return new Wr(void 0,e)}static updateTime(e){return new Wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $c(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Dh{}function ST(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new IT(i.key,Wr.none()):new au(i.key,i.data,Wr.none());{const n=i.data,s=Pn.empty();let o=new Dt(Ft.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Qs(i.key,s,new Fn(o.toArray()),Wr.none())}}function Qx(i,e,n){i instanceof au?(function(o,u,f){const m=o.value.clone(),p=l0(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(i,e,n):i instanceof Qs?(function(o,u,f){if(!$c(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=l0(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(RT(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(i,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function ql(i,e,n,s){return i instanceof au?(function(u,f,m,p){if(!$c(u.precondition,f))return m;const y=u.value.clone(),T=u0(u.fieldTransforms,p,f);return y.setAll(T),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(i,e,n,s):i instanceof Qs?(function(u,f,m,p){if(!$c(u.precondition,f))return m;const y=u0(u.fieldTransforms,p,f),T=f.data;return T.setAll(RT(u)),T.setAll(y),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((I=>I.field)))})(i,e,n,s):(function(u,f,m){return $c(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(i,e,n)}function Xx(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=TT(s.transform,o||null);u!=null&&(n===null&&(n=Pn.empty()),n.set(s.field,u))}return n||null}function o0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&to(s,o,((u,f)=>Fx(u,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class au extends Dh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Qs extends Dh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function RT(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function l0(i,e,n){const s=new Map;Xe(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,Hx(f,m,n[o]))}return s}function u0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);s.set(o.field,qx(u,f,e))}return s}class IT extends Dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kx extends Dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Qx(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ql(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ql(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=vT();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=ST(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(Re.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ke())}isEqual(e){return this.batchId===e.batchId&&to(this.mutations,e.mutations,((n,s)=>o0(n,s)))&&to(this.baseMutations,e.baseMutations,((n,s)=>o0(n,s)))}}class ag{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Xe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return Lx})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new ag(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,ze;function Zx(i){switch(i){case Y.OK:return be(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return be(15467,{code:i})}}function xT(i){if(i===void 0)return ti("GRPC error has no .code"),Y.UNKNOWN;switch(i){case wt.OK:return Y.OK;case wt.CANCELLED:return Y.CANCELLED;case wt.UNKNOWN:return Y.UNKNOWN;case wt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case wt.INTERNAL:return Y.INTERNAL;case wt.UNAVAILABLE:return Y.UNAVAILABLE;case wt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case wt.NOT_FOUND:return Y.NOT_FOUND;case wt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case wt.ABORTED:return Y.ABORTED;case wt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case wt.DATA_LOSS:return Y.DATA_LOSS;default:return be(39323,{code:i})}}(ze=wt||(wt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=new qi([4294967295,4294967295],0);function c0(i){const e=Jx().encode(i),n=new qE;return n.update(e),new Uint8Array(n.digest())}function h0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new qi([n,s],0),new qi([o,u],0)]}class og{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ml(`Invalid padding: ${n}`);if(s<0)throw new Ml(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ml(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Ml(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=qi.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(qi.fromNumber(s)));return o.compare(eC)===1&&(o=new qi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=c0(e),[s,o]=h0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new og(u,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=c0(e),[s,o]=h0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,ou.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Oh(Re.min(),o,new ct(Me),ni(),ke())}}class ou{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ou(s,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class CT{constructor(e,n){this.targetId=e,this.Ce=n}}class NT{constructor(e,n,s=Qt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class f0{constructor(){this.ve=0,this.Fe=d0(),this.Me=Qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),n=ke(),s=ke();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:be(38017,{changeType:u})}})),new ou(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=d0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tC{constructor(e){this.Ge=e,this.ze=new Map,this.je=ni(),this.Je=jc(),this.He=jc(),this.Ye=new ct(Me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(bm(u))if(s===0){const f=new pe(u.path);this.et(n,f,Zt.newNoDocument(f,Re.min()))}else Xe(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),p=m?this.ct(m,e,f):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Qi(s).toUint8Array()}catch(p){if(p instanceof eT)return eo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new og(f,o,u)}catch(p){return eo(p instanceof Ml?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&bm(m.target)){const p=new pe(m.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,Zt.newNoDocument(p,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=ke();this.He.forEach(((u,f)=>{let m=!0;f.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new Oh(e,n,this.Ye,this.je,s);return this.je=ni(),this.Je=jc(),this.He=jc(),this.Ye=new ct(Me),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new f0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Dt(Me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Dt(Me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new f0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function jc(){return new ct(pe.comparator)}function d0(){return new ct(pe.comparator)}const nC={asc:"ASCENDING",desc:"DESCENDING"},rC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iC={and:"AND",or:"OR"};class sC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Rm(i,e){return i.useProto3Json||Rh(e)?e:{value:e}}function gh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function aC(i,e){return gh(i,e.toTimestamp())}function gr(i){return Xe(!!i,49232),Re.fromTimestamp((function(n){const s=Gi(n);return new at(s.seconds,s.nanos)})(i))}function lg(i,e){return Im(i,e).canonicalString()}function Im(i,e){const n=(function(o){return new st(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function OT(i){const e=st.fromString(i);return Xe(LT(e),10190,{key:e.toString()}),e}function xm(i,e){return lg(i.databaseId,e.path)}function rm(i,e){const n=OT(e);if(n.get(1)!==i.databaseId.projectId)throw new ie(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ie(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new pe(VT(n))}function PT(i,e){return lg(i.databaseId,e)}function oC(i){const e=OT(i);return e.length===4?st.emptyPath():VT(e)}function Cm(i){return new st(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function VT(i){return Xe(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function m0(i,e,n){return{name:xm(i,e),fields:n.value.mapValue.fields}}function lC(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:be(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,T){return y.useProto3Json?(Xe(T===void 0||typeof T=="string",58123),Qt.fromBase64String(T||"")):(Xe(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Qt.fromUint8Array(T||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(y){const T=y.code===void 0?Y.UNKNOWN:xT(y.code);return new ie(T,y.message||"")})(f);n=new NT(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=rm(i,s.document.name),u=gr(s.document.updateTime),f=s.document.createTime?gr(s.document.createTime):Re.min(),m=new Pn({mapValue:{fields:s.document.fields}}),p=Zt.newFoundDocument(o,u,f,m),y=s.targetIds||[],T=s.removedTargetIds||[];n=new Wc(y,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=rm(i,s.document),u=s.readTime?gr(s.readTime):Re.min(),f=Zt.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Wc([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=rm(i,s.document),u=s.removedTargetIds||[];n=new Wc([],u,o,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new Wx(o,u),m=s.targetId;n=new CT(m,f)}}return n}function uC(i,e){let n;if(e instanceof au)n={update:m0(i,e.key,e.value)};else if(e instanceof IT)n={delete:xm(i,e.key)};else if(e instanceof Qs)n={update:m0(i,e.key,e.data),updateMask:_C(e.fieldMask)};else{if(!(e instanceof Kx))return be(16599,{Vt:e.type});n={verify:xm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const m=f.transform;if(m instanceof dh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Yl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof $l)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof mh)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw be(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:aC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:be(27497)})(i,e.precondition)),n}function cC(i,e){return i&&i.length>0?(Xe(e!==void 0,14353),i.map((n=>(function(o,u){let f=o.updateTime?gr(o.updateTime):gr(u);return f.isEqual(Re.min())&&(f=gr(u)),new Gx(f,o.transformResults||[])})(n,e)))):[]}function hC(i,e){return{documents:[PT(i,e.path)]}}function fC(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=PT(i,o);const u=(function(y){if(y.length!==0)return kT(Xn.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(y){if(y.length!==0)return y.map((T=>(function(R){return{field:Ha(R.field),direction:gC(R.dir)}})(T)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Rm(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function dC(i){let e=oC(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Xe(s===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=(function(I){const R=MT(I);return R instanceof Xn&&cT(R)?R.getFilters():[R]})(n.where));let f=[];n.orderBy&&(f=(function(I){return I.map((R=>(function(H){return new fh(Fa(H.field),(function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(R)))})(n.orderBy));let m=null;n.limit&&(m=(function(I){let R;return R=typeof I=="object"?I.value:I,Rh(R)?null:R})(n.limit));let p=null;n.startAt&&(p=(function(I){const R=!!I.before,j=I.values||[];return new hh(j,R)})(n.startAt));let y=null;return n.endAt&&(y=(function(I){const R=!I.before,j=I.values||[];return new hh(j,R)})(n.endAt)),Ox(e,o,f,u,m,"F",p,y)}function mC(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function MT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Fa(n.unaryFilter.field);return bt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Fa(n.unaryFilter.field);return bt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Fa(n.unaryFilter.field);return bt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Fa(n.unaryFilter.field);return bt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(i):i.fieldFilter!==void 0?(function(n){return bt.create(Fa(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Xn.create(n.compositeFilter.filters.map((s=>MT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(n.compositeFilter.op))})(i):be(30097,{filter:i})}function gC(i){return nC[i]}function pC(i){return rC[i]}function yC(i){return iC[i]}function Ha(i){return{fieldPath:i.canonicalString()}}function Fa(i){return Ft.fromServerFormat(i.fieldPath)}function kT(i){return i instanceof bt?(function(n){if(n.op==="=="){if(t0(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NAN"}};if(e0(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(t0(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NAN"}};if(e0(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(n.field),op:pC(n.op),value:n.value}}})(i):i instanceof Xn?(function(n){const s=n.getFilters().map((o=>kT(o)));return s.length===1?s[0]:{compositeFilter:{op:yC(n.op),filters:s}}})(i):be(54877,{filter:i})}function _C(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function LT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n,s,o,u=Re.min(),f=Re.min(),m=Qt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.yt=e}}function EC(i){const e=dC({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Sm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.Cn=new wC}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(Fi.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(Fi.min())}updateCollectionGroup(e,n,s){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class wC{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Dt(st.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Dt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UT=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(UT,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new so(0)}static cr(){return new so(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="LruGarbageCollector",bC=1048576;function y0([i,e],[n,s]){const o=Me(i,n);return o===0?Me(e,s):o}class AC{constructor(e){this.Ir=e,this.buffer=new Dt(y0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();y0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class SC{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(p0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){fo(n)?oe(p0,"Ignoring IndexedDB error during garbage collection: ",n):await ho(n)}await this.Vr(3e5)}))}}class RC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(Sh.ce);const s=new AC(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(g0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),g0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,f,m,p,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,f=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(s=I,m=Date.now(),this.removeTargets(e,s,n)))).next((I=>(u=I,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((I=>(y=Date.now(),Ba()<=Ve.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${I} documents in `+(y-p)+`ms
Total Duration: ${y-T}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:I}))))}}function IC(i,e){return new RC(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this.changes=new Gs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Z.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&ql(s.mutation,o,Fn.empty(),at.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,ke()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=ke()){const o=ks();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=Vl();return u.forEach(((m,p)=>{f=f.insert(m,p.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=ks();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,ke())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let u=ni();const f=Bl(),m=(function(){return Bl()})();return n.forEach(((p,y)=>{const T=s.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof Qs)?u=u.insert(y.key,y):T!==void 0?(f.set(y.key,T.mutation.getFieldMask()),ql(T.mutation,y,T.mutation.getFieldMask(),at.now())):f.set(y.key,Fn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((y,T)=>f.set(y,T))),n.forEach(((y,T)=>m.set(y,new CC(T,f.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=Bl();let o=new ct(((f,m)=>f-m)),u=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let T=s.get(p)||Fn.empty();T=m.applyToLocalView(y,T),s.set(p,T);const I=(o.get(m.batchId)||ke()).add(p);o=o.insert(m.batchId,I)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,T=p.value,I=vT();T.forEach((R=>{if(!u.has(R)){const j=ST(n.get(R),s.get(R));j!==null&&I.set(R,j),u=u.add(R)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,I))}return Z.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(f){return pe.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):Z.resolve(ks());let m=Gl,p=u;return f.next((y=>Z.forEach(y,((T,I)=>(m<I.largestBatchId&&(m=I.largestBatchId),u.get(T)?Z.resolve():this.remoteDocumentCache.getEntry(e,T).next((R=>{p=p.insert(T,R)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,p,y,ke()))).next((T=>({batchId:m,changes:_T(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next((s=>{let o=Vl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Vl();return this.indexManager.getCollectionParents(e,u).next((m=>Z.forEach(m,(p=>{const y=(function(I,R){return new su(R,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((T=>{T.forEach(((I,R)=>{f=f.insert(I,R)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((p,y)=>{const T=y.getKey();f.get(T)===null&&(f=f.insert(T,Zt.newInvalidDocument(T)))}));let m=Vl();return f.forEach(((p,y)=>{const T=u.get(p);T!==void 0&&ql(T.mutation,y,Fn.empty(),at.now()),Ch(n,y)&&(m=m.insert(p,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:gr(o.createTime)}})(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:EC(o.bundledQuery),readTime:gr(o.readTime)}})(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.overlays=new ct(pe.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ks();return Z.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),Z.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),Z.resolve()}getOverlaysForCollection(e,n,s){const o=ks(),u=n.length+1,f=new pe(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new ct(((y,T)=>y-T));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=u.get(y.largestBatchId);T===null&&(T=ks(),u=u.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const m=ks(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,T)=>m.set(y,T))),!(m.size()>=o)););return Z.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new $x(n,s));let u=this.qr.get(n);u===void 0&&(u=ke(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(){this.Qr=new Dt(Lt.$r),this.Ur=new Dt(Lt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Lt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Lt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new pe(new st([])),s=new Lt(n,e),o=new Lt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new pe(new st([])),s=new Lt(n,e),o=new Lt(n,e+1);let u=ke();return this.Ur.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new Lt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Lt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return pe.comparator(e.key,n.key)||Me(e.Yr,n.Yr)}static Kr(e,n){return Me(e.Yr,n.Yr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Dt(Lt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new Yx(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new Lt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return Z.resolve(f)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return Z.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Jm:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Lt(n,0),o=new Lt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(f=>{const m=this.Xr(f.Yr);u.push(m)})),Z.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Dt(Me);return n.forEach((o=>{const u=new Lt(o,0),f=new Lt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(m=>{s=s.add(m.Yr)}))})),Z.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;pe.isDocumentKey(u)||(u=u.child(""));const f=new Lt(new pe(u),0);let m=new Dt(Me);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Yr)),!0)}),f),Z.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Xe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Z.forEach(n.mutations,(o=>{const u=new Lt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Lt(n,0),o=this.Zr.firstAfterOrEqual(s);return Z.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this.ri=e,this.docs=(function(){return new ct(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return Z.resolve(s?s.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let s=ni();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Zt.newInvalidDocument(o))})),Z.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=ni();const f=n.path,m=new pe(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:T}}=p.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||cx(ux(T),s)<=0||(o.has(T.key)||Ch(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return Z.resolve(u)}getAllFromCollectionGroup(e,n,s,o){be(9500)}ii(e,n){return Z.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new kC(this)}getSize(e){return Z.resolve(this.size)}}class kC extends xC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.persistence=e,this.si=new Gs((n=>ng(n)),rg),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new ug,this.targetCount=0,this.ai=so.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new so(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),Z.waitFor(u).next((()=>o))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return Z.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),Z.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),Z.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return Z.resolve(s)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Sh(0),this.li=!1,this.li=!0,this.hi=new PC,this.referenceDelegate=e(this),this.Pi=new LC(this),this.indexManager=new TC,this.remoteDocumentCache=(function(o){return new MC(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new vC(n),this.Ii=new DC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new VC(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){oe("MemoryPersistence","Starting transaction:",e);const o=new UC(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return Z.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class UC extends fx{constructor(e){super(),this.currentSequenceNumber=e}}class cg{constructor(e){this.persistence=e,this.Ri=new ug,this.Vi=null}static mi(e){return new cg(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),Z.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(s=>{const o=pe.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ph{constructor(e,n){this.persistence=e,this.pi=new Gs((s=>gx(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=IC(this,n)}static mi(e,n){return new ph(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return Z.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?Z.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((m=>{m||(s++,u.removeEntry(f,Re.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Kc(e.data.value)),n}br(e,n,s){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return Z.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=ke(),o=ke();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new hg(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return cS()?8:dx(Jt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new jC;return this.Ss(e,n,f).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(Ba()<=Ve.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(Ba()<=Ve.DEBUG&&oe("QueryEngine","Query:",qa(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Ba()<=Ve.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mr(n))):Z.resolve())}ys(e,n){if(s0(n))return Z.resolve(null);let s=mr(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Sm(n,null,"F"),s=mr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=ke(...u);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const y=this.Ds(n,m);return this.Cs(n,y,f,p.readTime)?this.ys(e,Sm(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,s,o){return s0(n)||o.isEqual(Re.min())?Z.resolve(null):this.ps.getDocuments(e,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?Z.resolve(null):(Ba()<=Ve.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),qa(n)),this.vs(e,f,n,lx(o,Gl)).next((m=>m)))}))}Ds(e,n){let s=new Dt(pT(e));return n.forEach(((o,u)=>{Ch(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Ba()<=Ve.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",qa(n)),this.ps.getDocumentsMatchingQuery(e,n,Fi.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="LocalStore",BC=3e8;class qC{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new ct(Me),this.xs=new Gs((u=>ng(u)),rg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function HC(i,e,n,s){return new qC(i,e,n,s)}async function zT(i,e){const n=Ie(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],m=[];let p=ke();for(const y of o){f.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}for(const y of u){m.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(s,p).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:m})))}))}))}function FC(i,e){const n=Ie(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,y,T){const I=y.batch,R=I.keys();let j=Z.resolve();return R.forEach((H=>{j=j.next((()=>T.getEntry(p,H))).next(($=>{const Q=y.docVersions.get(H);Xe(Q!==null,48541),$.version.compareTo(Q)<0&&(I.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),T.addEntry($)))}))})),j.next((()=>m.mutationQueue.removeMutationBatch(p,I)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=ke();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function BT(i){const e=Ie(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function GC(i,e){const n=Ie(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((T,I)=>{const R=o.get(I);if(!R)return;m.push(n.Pi.removeMatchingKeys(u,T.removedDocuments,I).next((()=>n.Pi.addMatchingKeys(u,T.addedDocuments,I))));let j=R.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(I)!==null?j=j.withResumeToken(Qt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):T.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(T.resumeToken,s)),o=o.insert(I,j),(function($,Q,le){return $.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=BC?!0:le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0})(R,j,T)&&m.push(n.Pi.updateTargetData(u,j))}));let p=ni(),y=ke();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))})),m.push(QC(u,f,e.documentUpdates).next((T=>{p=T.ks,y=T.qs}))),!s.isEqual(Re.min())){const T=n.Pi.getLastRemoteSnapshotVersion(u).next((I=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(T)}return Z.waitFor(m).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,y))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function QC(i,e,n){let s=ke(),o=ke();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let f=ni();return n.forEach(((m,p)=>{const y=u.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):oe(fg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)})),{ks:f,qs:o}}))}function XC(i,e){const n=Ie(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Jm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function KC(i,e){const n=Ie(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,Z.resolve(o)):n.Pi.allocateTargetId(s).next((f=>(o=new Ui(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Nm(i,e,n){const s=Ie(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!fo(f))throw f;oe(fg,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function _0(i,e,n){const s=Ie(i);let o=Re.min(),u=ke();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,y,T){const I=Ie(p),R=I.xs.get(T);return R!==void 0?Z.resolve(I.Ms.get(R)):I.Pi.getTargetData(y,T)})(s,f,mr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?o:Re.min(),n?u:ke()))).next((m=>(YC(s,Vx(e),m),{documents:m,Qs:u})))))}function YC(i,e,n){let s=i.Os.get(e)||Re.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class v0{constructor(){this.activeTargetIds=zx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $C{constructor(){this.Mo=new v0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new v0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="ConnectivityMonitor";class T0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(E0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(E0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc=null;function Dm(){return zc===null?zc=(function(){return 268435456+Math.round(2147483648*Math.random())})():zc++,"0x"+zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="RestConnection",ZC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===uh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const f=Dm(),m=this.zo(e,n.toUriEncodedString());oe(im,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:y}=new URL(m),T=oo(y);return this.Jo(e,m,p,s,T).then((I=>(oe(im,`Received RPC '${e}' ${f}: `,I),I)),(I=>{throw eo(im,`RPC '${e}' ${f} failed with error: `,I,"url: ",m,"request:",s),I}))}Ho(e,n,s,o,u,f){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+co})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=ZC[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class t2 extends JC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=Dm();return new Promise(((m,p)=>{const y=new HE;y.setWithCredentials(!0),y.listenOnce(FE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Xc.NO_ERROR:const I=y.getResponseJson();oe($t,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(I)),m(I);break;case Xc.TIMEOUT:oe($t,`RPC '${e}' ${f} timed out`),p(new ie(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Xc.HTTP_ERROR:const R=y.getStatus();if(oe($t,`RPC '${e}' ${f} failed with status:`,R,"response text:",y.getResponseText()),R>0){let j=y.getResponseJson();Array.isArray(j)&&(j=j[0]);const H=j==null?void 0:j.error;if(H&&H.status&&H.message){const $=(function(le){const se=le.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(se)>=0?se:Y.UNKNOWN})(H.status);p(new ie($,H.message))}else p(new ie(Y.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ie(Y.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{oe($t,`RPC '${e}' ${f} completed.`)}}));const T=JSON.stringify(o);oe($t,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",T,s,15)}))}T_(e,n,s){const o=Dm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=XE(),m=QE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const T=u.join("");oe($t,`Creating RPC '${e}' stream ${o}: ${T}`,p);const I=f.createWebChannel(T,p);this.I_(I);let R=!1,j=!1;const H=new e2({Yo:Q=>{j?oe($t,`Not sending because RPC '${e}' stream ${o} is closed:`,Q):(R||(oe($t,`Opening RPC '${e}' stream ${o} transport.`),I.open(),R=!0),oe($t,`RPC '${e}' stream ${o} sending:`,Q),I.send(Q))},Zo:()=>I.close()}),$=(Q,le,se)=>{Q.listen(le,(ae=>{try{se(ae)}catch(Te){setTimeout((()=>{throw Te}),0)}}))};return $(I,Pl.EventType.OPEN,(()=>{j||(oe($t,`RPC '${e}' stream ${o} transport opened.`),H.o_())})),$(I,Pl.EventType.CLOSE,(()=>{j||(j=!0,oe($t,`RPC '${e}' stream ${o} transport closed`),H.a_(),this.E_(I))})),$(I,Pl.EventType.ERROR,(Q=>{j||(j=!0,eo($t,`RPC '${e}' stream ${o} transport errored. Name:`,Q.name,"Message:",Q.message),H.a_(new ie(Y.UNAVAILABLE,"The operation could not be completed")))})),$(I,Pl.EventType.MESSAGE,(Q=>{var le;if(!j){const se=Q.data[0];Xe(!!se,16349);const ae=se,Te=(ae==null?void 0:ae.error)||((le=ae[0])==null?void 0:le.error);if(Te){oe($t,`RPC '${e}' stream ${o} received error:`,Te);const ye=Te.status;let _e=(function(S){const D=wt[S];if(D!==void 0)return xT(D)})(ye),N=Te.message;_e===void 0&&(_e=Y.INTERNAL,N="Unknown error status: "+ye+" with message "+Te.message),j=!0,H.a_(new ie(_e,N)),I.close()}else oe($t,`RPC '${e}' stream ${o} received:`,se),H.u_(se)}})),$(m,GE.STAT_EVENT,(Q=>{Q.stat===_m.PROXY?oe($t,`RPC '${e}' stream ${o} detected buffering proxy`):Q.stat===_m.NOPROXY&&oe($t,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function sm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(i){return new sC(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="PersistentStream";class HT{constructor(e,n,s,o,u,f,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(ti(n.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new ie(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(w0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(oe(w0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class n2 extends HT{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=lC(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Re.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Re.min():f.readTime?gr(f.readTime):Re.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Cm(this.serializer),n.addTarget=(function(u,f){let m;const p=f.target;if(m=bm(p)?{documents:hC(u,p)}:{query:fC(u,p).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=DT(u,f.resumeToken);const y=Rm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}else if(f.snapshotVersion.compareTo(Re.min())>0){m.readTime=gh(u,f.snapshotVersion.toTimestamp());const y=Rm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const s=mC(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Cm(this.serializer),n.removeTarget=e,this.q_(n)}}class r2 extends HT{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=cC(e.writeResults,e.commitTime),s=gr(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Cm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>uC(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{}class s2 extends i2{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ie(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,Im(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ie(Y.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,Im(n,s),o,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ie(Y.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class a2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ti(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="RemoteStore";class o2{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{Xs(this)&&(oe(qs,"Restarting streams for network reachability change."),await(async function(p){const y=Ie(p);y.Ea.add(4),await lu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Vh(y)})(this))}))})),this.Ra=new a2(s,o)}}async function Vh(i){if(Xs(i))for(const e of i.da)await e(!0)}async function lu(i){for(const e of i.da)await e(!1)}function FT(i,e){const n=Ie(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),pg(n)?gg(n):mo(n).O_()&&mg(n,e))}function dg(i,e){const n=Ie(i),s=mo(n);n.Ia.delete(e),s.O_()&&GT(n,e),n.Ia.size===0&&(s.O_()?s.L_():Xs(n)&&n.Ra.set("Unknown"))}function mg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}mo(i).Y_(e)}function GT(i,e){i.Va.Ue(e),mo(i).Z_(e)}function gg(i){i.Va=new tC({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),mo(i).start(),i.Ra.ua()}function pg(i){return Xs(i)&&!mo(i).x_()&&i.Ia.size>0}function Xs(i){return Ie(i).Ea.size===0}function QT(i){i.Va=void 0}async function l2(i){i.Ra.set("Online")}async function u2(i){i.Ia.forEach(((e,n)=>{mg(i,e)}))}async function c2(i,e){QT(i),pg(i)?(i.Ra.ha(e),gg(i)):i.Ra.set("Unknown")}async function h2(i,e,n){if(i.Ra.set("Online"),e instanceof NT&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(s){oe(qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await yh(i,s)}else if(e instanceof Wc?i.Va.Ze(e):e instanceof CT?i.Va.st(e):i.Va.tt(e),!n.isEqual(Re.min()))try{const s=await BT(i.localStore);n.compareTo(s)>=0&&await(function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const T=u.Ia.get(y);T&&u.Ia.set(y,T.withResumeToken(p.resumeToken,f))}})),m.targetMismatches.forEach(((p,y)=>{const T=u.Ia.get(p);if(!T)return;u.Ia.set(p,T.withResumeToken(Qt.EMPTY_BYTE_STRING,T.snapshotVersion)),GT(u,p);const I=new Ui(T.target,p,y,T.sequenceNumber);mg(u,I)})),u.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){oe(qs,"Failed to raise snapshot:",s),await yh(i,s)}}async function yh(i,e,n){if(!fo(e))throw e;i.Ea.add(1),await lu(i),i.Ra.set("Offline"),n||(n=()=>BT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{oe(qs,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Vh(i)}))}function XT(i,e){return e().catch((n=>yh(i,n,e)))}async function Mh(i){const e=Ie(i),n=Ki(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Jm;for(;f2(e);)try{const o=await XC(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,d2(e,o)}catch(o){await yh(e,o)}KT(e)&&YT(e)}function f2(i){return Xs(i)&&i.Ta.length<10}function d2(i,e){i.Ta.push(e);const n=Ki(i);n.O_()&&n.X_&&n.ea(e.mutations)}function KT(i){return Xs(i)&&!Ki(i).x_()&&i.Ta.length>0}function YT(i){Ki(i).start()}async function m2(i){Ki(i).ra()}async function g2(i){const e=Ki(i);for(const n of i.Ta)e.ea(n.mutations)}async function p2(i,e,n){const s=i.Ta.shift(),o=ag.from(s,e,n);await XT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Mh(i)}async function y2(i,e){e&&Ki(i).X_&&await(async function(s,o){if((function(f){return Zx(f)&&f!==Y.ABORTED})(o.code)){const u=s.Ta.shift();Ki(s).B_(),await XT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Mh(s)}})(i,e),KT(i)&&YT(i)}async function b0(i,e){const n=Ie(i);n.asyncQueue.verifyOperationInProgress(),oe(qs,"RemoteStore received new credentials");const s=Xs(n);n.Ea.add(3),await lu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Vh(n)}async function _2(i,e){const n=Ie(i);e?(n.Ea.delete(2),await Vh(n)):e||(n.Ea.add(2),await lu(n),n.Ra.set("Unknown"))}function mo(i){return i.ma||(i.ma=(function(n,s,o){const u=Ie(n);return u.sa(),new n2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:l2.bind(null,i),t_:u2.bind(null,i),r_:c2.bind(null,i),H_:h2.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),pg(i)?gg(i):i.Ra.set("Unknown")):(await i.ma.stop(),QT(i))}))),i.ma}function Ki(i){return i.fa||(i.fa=(function(n,s,o){const u=Ie(n);return u.sa(),new r2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:m2.bind(null,i),r_:y2.bind(null,i),ta:g2.bind(null,i),na:p2.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Mh(i)):(await i.fa.stop(),i.Ta.length>0&&(oe(qs,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new yg(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _g(i,e){if(ti("AsyncQueue",`${e}: ${i}`),fo(i))return new ie(Y.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{static emptySet(e){return new Ya(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||pe.comparator(n.key,s.key):(n,s)=>pe.comparator(n.key,s.key),this.keyedMap=Vl(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ya)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ya;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.ga=new ct(pe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class ao{constructor(e,n,s,o,u,f,m,p,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new ao(e,n,Ya.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class E2{constructor(){this.queries=S0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Ie(n),u=o.queries;o.queries=S0(),u.forEach(((f,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new ie(Y.ABORTED,"Firestore shutting down"))}}function S0(){return new Gs((i=>gT(i)),xh)}async function $T(i,e){const n=Ie(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new v2,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=_g(f,`Initialization of query '${qa(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&vg(n)}async function WT(i,e){const n=Ie(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function T2(i,e){const n=Ie(i);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&vg(n)}function w2(i,e,n){const s=Ie(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function vg(i){i.Ca.forEach((e=>{e.next()}))}var Om,R0;(R0=Om||(Om={})).Ma="default",R0.Cache="cache";class ZT{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new ao(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Om.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.key=e}}class ew{constructor(e){this.key=e}}class b2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=pT(e),this.tu=new Ya(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new A0,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,I)=>{const R=o.get(T),j=Ch(this.query,I)?I:null,H=!!R&&this.mutatedKeys.has(R.key),$=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let Q=!1;R&&j?R.data.isEqual(j.data)?H!==$&&(s.track({type:3,doc:j}),Q=!0):this.su(R,j)||(s.track({type:2,doc:j}),Q=!0,(p&&this.eu(j,p)>0||y&&this.eu(j,y)<0)&&(m=!0)):!R&&j?(s.track({type:0,doc:j}),Q=!0):R&&!j&&(s.track({type:1,doc:R}),Q=!0,(p||y)&&(m=!0)),Q&&(j?(f=f.add(j),u=$?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),s.track({type:1,doc:T})}return{tu:f,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((T,I)=>(function(j,H){const $=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:Q})}};return $(j)-$(H)})(T.type,I.type)||this.eu(T.doc,I.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,f.length!==0||y?{snapshot:new ao(this.query,e.tu,u,f,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new A0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new ew(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new JT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ao.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Eg="SyncEngine";class A2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class S2{constructor(e){this.key=e,this.hu=!1}}class R2{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Gs((m=>gT(m)),xh),this.Iu=new Map,this.Eu=new Set,this.du=new ct(pe.comparator),this.Au=new Map,this.Ru=new ug,this.Vu={},this.mu=new Map,this.fu=so.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function I2(i,e,n=!0){const s=aw(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await tw(s,e,n,!0),o}async function x2(i,e){const n=aw(i);await tw(n,e,!0,!1)}async function tw(i,e,n,s){const o=await KC(i.localStore,mr(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await C2(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&FT(i.remoteStore,o),m}async function C2(i,e,n,s,o){i.pu=(I,R,j)=>(async function($,Q,le,se){let ae=Q.view.ru(le);ae.Cs&&(ae=await _0($.localStore,Q.query,!1).then((({documents:N})=>Q.view.ru(N,ae))));const Te=se&&se.targetChanges.get(Q.targetId),ye=se&&se.targetMismatches.get(Q.targetId)!=null,_e=Q.view.applyChanges(ae,$.isPrimaryClient,Te,ye);return x0($,Q.targetId,_e.au),_e.snapshot})(i,I,R,j);const u=await _0(i.localStore,e,!0),f=new b2(e,u.Qs),m=f.ru(u.documents),p=ou.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),y=f.applyChanges(m,i.isPrimaryClient,p);x0(i,n,y.au);const T=new A2(e,n,f);return i.Tu.set(e,T),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),y.snapshot}async function N2(i,e,n){const s=Ie(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!xh(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Nm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&dg(s.remoteStore,o.targetId),Pm(s,o.targetId)})).catch(ho)):(Pm(s,o.targetId),await Nm(s.localStore,o.targetId,!0))}async function D2(i,e){const n=Ie(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),dg(n.remoteStore,s.targetId))}async function O2(i,e,n){const s=j2(i);try{const o=await(function(f,m){const p=Ie(f),y=at.now(),T=m.reduce(((j,H)=>j.add(H.key)),ke());let I,R;return p.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let H=ni(),$=ke();return p.Ns.getEntries(j,T).next((Q=>{H=Q,H.forEach(((le,se)=>{se.isValidDocument()||($=$.add(le))}))})).next((()=>p.localDocuments.getOverlayedDocuments(j,H))).next((Q=>{I=Q;const le=[];for(const se of m){const ae=Xx(se,I.get(se.key).overlayedDocument);ae!=null&&le.push(new Qs(se.key,ae,oT(ae.value.mapValue),Wr.exists(!0)))}return p.mutationQueue.addMutationBatch(j,y,le,m)})).next((Q=>{R=Q;const le=Q.applyToLocalDocumentSet(I,$);return p.documentOverlayCache.saveOverlays(j,Q.batchId,le)}))})).then((()=>({batchId:R.batchId,changes:_T(I)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,p){let y=f.Vu[f.currentUser.toKey()];y||(y=new ct(Me)),y=y.insert(m,p),f.Vu[f.currentUser.toKey()]=y})(s,o.batchId,n),await uu(s,o.changes),await Mh(s.remoteStore)}catch(o){const u=_g(o,"Failed to persist write");n.reject(u)}}async function nw(i,e){const n=Ie(i);try{const s=await GC(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Xe(f.hu,14607):o.removedDocuments.size>0&&(Xe(f.hu,42227),f.hu=!1))})),await uu(n,s,e)}catch(s){await ho(s)}}function I0(i,e,n){const s=Ie(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const p=Ie(f);p.onlineState=m;let y=!1;p.queries.forEach(((T,I)=>{for(const R of I.Sa)R.va(m)&&(y=!0)})),y&&vg(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function P2(i,e,n){const s=Ie(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new ct(pe.comparator);f=f.insert(u,Zt.newNoDocument(u,Re.min()));const m=ke().add(u),p=new Oh(Re.min(),new Map,new ct(Me),f,m);await nw(s,p),s.du=s.du.remove(u),s.Au.delete(e),Tg(s)}else await Nm(s.localStore,e,!1).then((()=>Pm(s,e,n))).catch(ho)}async function V2(i,e){const n=Ie(i),s=e.batch.batchId;try{const o=await FC(n.localStore,e);iw(n,s,null),rw(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await uu(n,o)}catch(o){await ho(o)}}async function M2(i,e,n){const s=Ie(i);try{const o=await(function(f,m){const p=Ie(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return p.mutationQueue.lookupMutationBatch(y,m).next((I=>(Xe(I!==null,37113),T=I.keys(),p.mutationQueue.removeMutationBatch(y,I)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,T,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>p.localDocuments.getDocuments(y,T)))}))})(s.localStore,e);iw(s,e,n),rw(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await uu(s,o)}catch(o){await ho(o)}}function rw(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function iw(i,e,n){const s=Ie(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Pm(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||sw(i,s)}))}function sw(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(dg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Tg(i))}function x0(i,e,n){for(const s of n)s instanceof JT?(i.Ru.addReference(s.key,e),k2(i,s)):s instanceof ew?(oe(Eg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||sw(i,s.key)):be(19791,{wu:s})}function k2(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(oe(Eg,"New document in limbo: "+n),i.Eu.add(s),Tg(i))}function Tg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new pe(st.fromString(e)),s=i.fu.next();i.Au.set(s,new S2(n)),i.du=i.du.insert(n,s),FT(i.remoteStore,new Ui(mr(ig(n.path)),s,"TargetPurposeLimboResolution",Sh.ce))}}async function uu(i,e,n){const s=Ie(i),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{f.push(s.pu(p,e,n).then((y=>{var T;if((y||n)&&s.isPrimaryClient){const I=y?!y.fromCache:(T=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(p.targetId,I?"current":"not-current")}if(y){o.push(y);const I=hg.As(p.targetId,y);u.push(I)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(p,y){const T=Ie(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>Z.forEach(y,(R=>Z.forEach(R.Es,(j=>T.persistence.referenceDelegate.addReference(I,R.targetId,j))).next((()=>Z.forEach(R.ds,(j=>T.persistence.referenceDelegate.removeReference(I,R.targetId,j)))))))))}catch(I){if(!fo(I))throw I;oe(fg,"Failed to update sequence numbers: "+I)}for(const I of y){const R=I.targetId;if(!I.fromCache){const j=T.Ms.get(R),H=j.snapshotVersion,$=j.withLastLimboFreeSnapshotVersion(H);T.Ms=T.Ms.insert(R,$)}}})(s.localStore,u))}async function L2(i,e){const n=Ie(i);if(!n.currentUser.isEqual(e)){oe(Eg,"User change. New user:",e.toKey());const s=await zT(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new ie(Y.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await uu(n,s.Ls)}}function U2(i,e){const n=Ie(i),s=n.Au.get(e);if(s&&s.hu)return ke().add(s.key);{let o=ke();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function aw(i){const e=Ie(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=nw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P2.bind(null,e),e.Pu.H_=T2.bind(null,e.eventManager),e.Pu.yu=w2.bind(null,e.eventManager),e}function j2(i){const e=Ie(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=V2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M2.bind(null,e),e}class _h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ph(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return HC(this.persistence,new zC,e.initialUser,this.serializer)}Cu(e){return new jT(cg.mi,this.serializer)}Du(e){return new $C}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_h.provider={build:()=>new _h};class z2 extends _h{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Xe(this.persistence.referenceDelegate instanceof ph,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new SC(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new jT((s=>ph.mi(s,n)),this.serializer)}}class Vm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>I0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=L2.bind(null,this.syncEngine),await _2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new E2})()}createDatastore(e){const n=Ph(e.databaseInfo.databaseId),s=(function(u){return new t2(u)})(e.databaseInfo);return(function(u,f,m,p){return new s2(u,f,m,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,m){return new o2(s,o,u,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>I0(this.syncEngine,n,0)),(function(){return T0.v()?new T0:new WC})())}createSyncEngine(e,n){return(function(o,u,f,m,p,y,T){const I=new R2(o,u,f,m,p,y);return T&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=Ie(o);oe(qs,"RemoteStore shutting down."),u.Ea.add(5),await lu(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Vm.provider={build:()=>new Vm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ti("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="FirestoreClient";class B2{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Wt.UNAUTHENTICATED,this.clientId=Zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{oe(Yi,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(oe(Yi,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=_g(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function am(i,e){i.asyncQueue.verifyOperationInProgress(),oe(Yi,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await zT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function C0(i,e){i.asyncQueue.verifyOperationInProgress();const n=await q2(i);oe(Yi,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>b0(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>b0(e.remoteStore,o))),i._onlineComponents=e}async function q2(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){oe(Yi,"Using user provided OfflineComponentProvider");try{await am(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Y.FAILED_PRECONDITION||o.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;eo("Error using user provided cache. Falling back to memory cache: "+n),await am(i,new _h)}}else oe(Yi,"Using default OfflineComponentProvider"),await am(i,new z2(void 0));return i._offlineComponents}async function lw(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(oe(Yi,"Using user provided OnlineComponentProvider"),await C0(i,i._uninitializedComponentsProvider._online)):(oe(Yi,"Using default OnlineComponentProvider"),await C0(i,new Vm))),i._onlineComponents}function H2(i){return lw(i).then((e=>e.syncEngine))}async function uw(i){const e=await lw(i),n=e.eventManager;return n.onListen=I2.bind(null,e.syncEngine),n.onUnlisten=N2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=x2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=D2.bind(null,e.syncEngine),n}function F2(i,e,n={}){const s=new $r;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,p,y){const T=new ow({next:R=>{T.Nu(),f.enqueueAndForget((()=>WT(u,I)));const j=R.docs.has(m);!j&&R.fromCache?y.reject(new ie(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&R.fromCache&&p&&p.source==="server"?y.reject(new ie(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(R)},error:R=>y.reject(R)}),I=new ZT(ig(m.path),T,{includeMetadataChanges:!0,qa:!0});return $T(u,I)})(await uw(i),i.asyncQueue,e,n,s))),s.promise}function G2(i,e,n={}){const s=new $r;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,p,y){const T=new ow({next:R=>{T.Nu(),f.enqueueAndForget((()=>WT(u,I))),R.fromCache&&p.source==="server"?y.reject(new ie(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(R)},error:R=>y.reject(R)}),I=new ZT(m,T,{includeMetadataChanges:!0,qa:!0});return $T(u,I)})(await uw(i),i.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="firestore.googleapis.com",D0=!0;class O0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hw,this.ssl=D0}else this.host=e.host,this.ssl=e.ssl??D0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bC)throw new ie(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ox("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new O0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new O0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new WI;switch(s.type){case"firstParty":return new tx(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ie(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=N0.get(n);s&&(oe("ComponentProvider","Removing Datastore"),N0.delete(n),s.terminate())})(this),Promise.resolve()}}function Q2(i,e,n,s={}){var y;i=no(i,kh);const o=oo(e),u=i._getSettings(),f={...u,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(Z0(`https://${m}`),J0("Firestore",!0)),u.host!==hw&&u.host!==m&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!Us(p,f)&&(i._setSettings(p),s.mockUserToken)){let T,I;if(typeof s.mockUserToken=="string")T=s.mockUserToken,I=Wt.MOCK_USER;else{T=tS(s.mockUserToken,(y=i._app)==null?void 0:y.options.projectId);const R=s.mockUserToken.sub||s.mockUserToken.user_id;if(!R)throw new ie(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new Wt(R)}i._authCredentials=new ZI(new YE(T,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new go(this.firestore,e,this._query)}}class Nt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(iu(n,Nt._jsonSchema))return new Nt(e,s||null,new pe(st.fromString(n.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:At("string",Nt._jsonSchemaVersion),referencePath:At("string")};class Hi extends go{constructor(e,n,s){super(e,n,ig(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new pe(e))}withConverter(e){return new Hi(this.firestore,e,this._path)}}function po(i,e,...n){if(i=Gt(i),$E("collection","path",e),i instanceof kh){const s=st.fromString(e,...n);return Gv(s),new Hi(i,null,s)}{if(!(i instanceof Nt||i instanceof Hi))throw new ie(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(st.fromString(e,...n));return Gv(s),new Hi(i.firestore,null,s)}}function fw(i,e,...n){if(i=Gt(i),arguments.length===1&&(e=Zm.newId()),$E("doc","path",e),i instanceof kh){const s=st.fromString(e,...n);return Fv(s),new Nt(i,null,new pe(s))}{if(!(i instanceof Nt||i instanceof Hi))throw new ie(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(st.fromString(e,...n));return Fv(s),new Nt(i.firestore,i instanceof Hi?i.converter:null,new pe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="AsyncQueue";class V0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qT(this,"async_queue_retry"),this._c=()=>{const s=sm();s&&oe(P0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=sm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=sm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new $r;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!fo(e))throw e;oe(P0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ti("INTERNAL UNHANDLED ERROR: ",M0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=yg.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&be(47125,{Pc:M0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function M0(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Lh extends kh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new V0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new V0(e),this._firestoreClient=void 0,await e}}}function X2(i,e){const n=typeof i=="object"?i:rE(),s=typeof i=="string"?i:uh,o=zm(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=JA("firestore");u&&Q2(o,...u)}return o}function wg(i){if(i._terminated)throw new ie(Y.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||K2(i),i._firestoreClient}function K2(i){var s,o,u;const e=i._freezeSettings(),n=(function(m,p,y,T){return new _x(m,p,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,cw(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(i._databaseId,((s=i._app)==null?void 0:s.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new B2(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vn(Qt.fromBase64String(e))}catch(n){throw new ie(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vn(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(iu(e,Vn._jsonSchema))return Vn.fromBase64String(e.bytes)}}Vn._jsonSchemaVersion="firestore/bytes/1.0",Vn._jsonSchema={type:At("string",Vn._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pr._jsonSchemaVersion}}static fromJSON(e){if(iu(e,pr._jsonSchema))return new pr(e.latitude,e.longitude)}}pr._jsonSchemaVersion="firestore/geoPoint/1.0",pr._jsonSchema={type:At("string",pr._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(iu(e,yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new yr(e.vectorValues);throw new ie(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yr._jsonSchemaVersion="firestore/vectorValue/1.0",yr._jsonSchema={type:At("string",yr._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=/^__.*__$/;class $2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new au(e,this.data,n,this.fieldTransforms)}}function mw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:i})}}class Ag{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ag({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mw(this.Ac)&&Y2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class W2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Ph(e)}Cc(e,n,s,o=!1){return new Ag({Ac:e,methodName:n,Dc:s,path:Ft.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gw(i){const e=i._freezeSettings(),n=Ph(i._databaseId);return new W2(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Z2(i,e,n,s,o,u={}){const f=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);_w("Data must be an object, but it was:",f,s);const m=pw(s,f);let p,y;if(u.merge)p=new Fn(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const I of u.mergeFields){const R=eN(e,I,n);if(!f.contains(R))throw new ie(Y.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);nN(T,R)||T.push(R)}p=new Fn(T),y=f.fieldTransforms.filter((I=>p.covers(I.field)))}else p=null,y=f.fieldTransforms;return new $2(new Pn(m),p,y)}function J2(i,e,n,s=!1){return Sg(n,i.Cc(s?4:3,e))}function Sg(i,e){if(yw(i=Gt(i)))return _w("Unsupported field value:",e,i),pw(i,e);if(i instanceof dw)return(function(s,o){if(!mw(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const m of s){let p=Sg(m,o.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=Gt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Bx(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=at.fromDate(s);return{timestampValue:gh(o.serializer,u)}}if(s instanceof at){const u=new at(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:gh(o.serializer,u)}}if(s instanceof pr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Vn)return{bytesValue:DT(o.serializer,s._byteString)};if(s instanceof Nt){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:lg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof yr)return(function(f,m){return{mapValue:{fields:{[sT]:{stringValue:aT},[ch]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return sg(m.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Ah(s)}`)})(i,e)}function pw(i,e){const n={};return JE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(i,((s,o)=>{const u=Sg(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function yw(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof at||i instanceof pr||i instanceof Vn||i instanceof Nt||i instanceof dw||i instanceof yr)}function _w(i,e,n){if(!yw(n)||!WE(n)){const s=Ah(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function eN(i,e,n){if((e=Gt(e))instanceof bg)return e._internalPath;if(typeof e=="string")return vw(i,e);throw vh("Field path arguments must be of type string or ",i,!1,void 0,n)}const tN=new RegExp("[~\\*/\\[\\]]");function vw(i,e,n){if(e.search(tN)>=0)throw vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new bg(...e.split("."))._internalPath}catch{throw vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function vh(i,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new ie(Y.INVALID_ARGUMENT,m+i+p)}function nN(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rN extends Ew{data(){return super.data()}}function Rg(i,e){return typeof e=="string"?vw(i,e):e instanceof bg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ie(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ig{}class sN extends Ig{}function Uh(i,e,...n){let s=[];e instanceof Ig&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((p=>p instanceof xg)).length,m=u.filter((p=>p instanceof jh)).length;if(f>1||f>0&&m>0)throw new ie(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class jh extends sN{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new jh(e,n,s)}_apply(e){const n=this._parse(e);return Tw(e._query,n),new go(e.firestore,e.converter,Am(e._query,n))}_parse(e){const n=gw(e.firestore);return(function(u,f,m,p,y,T,I){let R;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ie(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){L0(I,T);const H=[];for(const $ of I)H.push(k0(p,u,$));R={arrayValue:{values:H}}}else R=k0(p,u,I)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||L0(I,T),R=J2(m,f,I,T==="in"||T==="not-in");return bt.create(y,T,R)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Hs(i,e,n){const s=e,o=Rg("where",i);return jh._create(o,s,n)}class xg extends Ig{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)Tw(f,p),f=Am(f,p)})(e._query,n),new go(e.firestore,e.converter,Am(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function k0(i,e,n){if(typeof(n=Gt(n))=="string"){if(n==="")throw new ie(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mT(e)&&n.indexOf("/")!==-1)throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(st.fromString(n));if(!pe.isDocumentKey(s))throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Jv(i,new pe(s))}if(n instanceof Nt)return Jv(i,n._key);throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ah(n)}.`)}function L0(i,e){if(!Array.isArray(i)||i.length===0)throw new ie(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Tw(i,e){const n=(function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ie(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class aN{convertValue(e,n="none"){switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Fs(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){var s,o,u;const n=(u=(o=(s=e.fields)==null?void 0:s[ch].arrayValue)==null?void 0:o.values)==null?void 0:u.map((f=>yt(f.doubleValue)));return new yr(n)}convertGeoPoint(e){return new pr(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Ih(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ql(e));default:return null}}convertTimestamp(e){const n=Gi(e);return new at(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=st.fromString(e);Xe(LT(s),9688,{name:e});const o=new Xl(s.get(1),s.get(3)),u=new pe(s.popFirst(5));return o.isEqual(n)||ti(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class kl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ls extends Ew{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Rg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ls._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ls._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ls._jsonSchema={type:At("string",Ls._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class Zc extends Ls{data(e={}){return super.data(e)}}class $a{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new kl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Zc(this._firestore,this._userDataWriter,s.key,s,new kl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const p=new Zc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new kl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new Zc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new kl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return m.type!==0&&(y=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),T=f.indexOf(m.doc.key)),{type:lN(m.type),doc:p,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$a._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lN(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(i){i=no(i,Nt);const e=no(i.firestore,Lh);return F2(wg(e),i._key).then((n=>fN(e,i,n)))}$a._jsonSchemaVersion="firestore/querySnapshot/1.0",$a._jsonSchema={type:At("string",$a._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class ww extends aN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function cu(i){i=no(i,go);const e=no(i.firestore,Lh),n=wg(e),s=new ww(e);return iN(i._query),G2(n,i._query).then((o=>new $a(e,s,i,o)))}function cN(i,e){const n=no(i.firestore,Lh),s=fw(i),o=oN(i.converter,e);return hN(n,[Z2(gw(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,Wr.exists(!1))]).then((()=>s))}function hN(i,e){return(function(s,o){const u=new $r;return s.asyncQueue.enqueueAndForget((async()=>O2(await H2(s),o,u))),u.promise})(wg(i),e)}function fN(i,e,n){const s=n.docs.get(e._key),o=new ww(i);return new Ls(i,o,e._key,s,new kl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){co=o})(lo),Za(new js("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new Lh(new JI(s.getProvider("auth-internal")),new nx(f,s.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ie(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(y.options.projectId,T)})(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Bi(zv,Bv,e),Bi(zv,Bv,"esm2020")})();const dN={apiKey:"AIzaSyCDZJqOx5eXpu3cD_FBJ8oi-hYvLCpbDXE",authDomain:"verdadreto-bec6a.firebaseapp.com",projectId:"verdadreto-bec6a",storageBucket:"verdadreto-bec6a.firebasestorage.app",messagingSenderId:"938969209658",appId:"1:938969209658:web:534282f57a8ff381c00e03"},bw=nE(dN),Ks=X2(bw),Kn=XI(bw),Aw=new Xr;Aw.setCustomParameters({prompt:"select_account"});const yo=i=>({uid:i.uid,email:i.email,displayName:i.displayName,photoURL:i.photoURL,isAnonymous:i.isAnonymous,emailVerified:i.emailVerified}),Sw=async()=>{try{const i=await nI(Kn,Aw);return yo(i.user)}catch(i){throw console.error("Error al iniciar sesión con Google:",i),new Error(i.message||"Error al iniciar sesión con Google")}},Rw=async(i,e)=>{try{const n=await NR(Kn,i,e);return yo(n.user)}catch(n){throw console.error("Error al iniciar sesión:",n),new Error(Ng(n.code))}},Iw=async(i,e,n)=>{try{const s=await CR(Kn,i,e);return n&&await OR(s.user,{displayName:n}),await NE(s.user),yo(s.user)}catch(s){throw console.error("Error al registrarse:",s),new Error(Ng(s.code))}},xw=async()=>{try{const i=await AR(Kn);return yo(i.user)}catch(i){throw console.error("Error al iniciar sesión anónima:",i),new Error("Error al iniciar sesión anónima")}},mN=async()=>{try{await kR(Kn)}catch(i){throw console.error("Error al cerrar sesión:",i),new Error("Error al cerrar sesión")}},Cw=async i=>{try{await xR(Kn,i)}catch(e){throw console.error("Error al enviar email de restablecimiento:",e),new Error(Ng(e.code))}},Nw=async()=>{try{if(Kn.currentUser)await NE(Kn.currentUser);else throw new Error("No hay usuario autenticado")}catch(i){throw console.error("Error al reenviar verificación:",i),new Error("Error al reenviar verificación de email")}},Dw=i=>MR(Kn,e=>{i(e?yo(e):null)}),Cg=()=>Kn.currentUser?yo(Kn.currentUser):null,Mm=()=>{const i=Cg();return i!==null&&!i.isAnonymous&&i.emailVerified},Ng=i=>{switch(i){case"auth/user-not-found":return"No existe una cuenta con este email";case"auth/wrong-password":return"Contraseña incorrecta";case"auth/email-already-in-use":return"Ya existe una cuenta con este email";case"auth/weak-password":return"La contraseña debe tener al menos 6 caracteres";case"auth/invalid-email":return"Email inválido";case"auth/too-many-requests":return"Demasiados intentos fallidos. Intenta más tarde";case"auth/network-request-failed":return"Error de conexión. Verifica tu internet";default:return"Error de autenticación. Intenta nuevamente"}},gN=Object.freeze(Object.defineProperty({__proto__:null,canPurchase:Mm,getCurrentUser:Cg,logout:mN,onAuthStateChange:Dw,registerWithEmail:Iw,resendEmailVerification:Nw,resetPassword:Cw,signInAnonymous:xw,signInWithEmail:Rw,signInWithGoogle:Sw},Symbol.toStringTag,{value:"Module"})),Ow=he.createContext(void 0),pN=({children:i})=>{const[e,n]=he.useState({user:null,isLoading:!0,isAuthenticated:!1});he.useEffect(()=>{const m=Dw(p=>{n({user:p,isLoading:!1,isAuthenticated:p!==null&&!p.isAnonymous})});return()=>m()},[]);const f={...e,login:()=>{},logout:async()=>{try{const{logout:m}=await G0(async()=>{const{logout:p}=await Promise.resolve().then(()=>gN);return{logout:p}},void 0,import.meta.url);await m()}catch(m){console.error("Error al cerrar sesión:",m)}},refreshUser:()=>{const m=Cg();n(p=>({...p,user:m,isAuthenticated:m!==null&&!m.isAnonymous}))}};return E.jsx(Ow.Provider,{value:f,children:i})},Dg=()=>{const i=he.useContext(Ow);if(i===void 0)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return i},$i={PURCHASED_PACKS:"verdad_reto_purchased_packs",CACHED_GAME_ITEMS:"verdad_reto_cached_items",CACHED_CATEGORIES:"verdad_reto_cached_categories",CACHE_PERMISSION:"verdad_reto_cache_permission",LAST_SYNC:"verdad_reto_last_sync"},yN=()=>{const i=localStorage.getItem($i.CACHE_PERMISSION);if(i==="granted")return!0;if(i==="denied")return!1;const e=window.confirm(`¿Deseas permitir que la aplicación guarde los packs comprados localmente para poder jugar sin conexión?

Esto mejorará tu experiencia permitiéndote acceder a tus packs incluso sin internet.`);return localStorage.setItem($i.CACHE_PERMISSION,e?"granted":"denied"),e},Wl=()=>localStorage.getItem($i.CACHE_PERMISSION)==="granted",_N=async(i,e,n)=>{if(!Wl()){console.log("Cache permission not granted, skipping cache");return}try{const s={pack:i,gameData:{items:e,categories:n,timestamp:Date.now()},timestamp:Date.now()},o=Og();o[i.id]=s,localStorage.setItem($i.PURCHASED_PACKS,JSON.stringify(o)),localStorage.setItem($i.LAST_SYNC,Date.now().toString()),console.log(`Pack ${i.name} cached successfully`)}catch(s){console.error("Error caching pack:",s)}},Og=()=>{try{const i=localStorage.getItem($i.PURCHASED_PACKS);return i?JSON.parse(i):{}}catch(i){return console.error("Error reading cached packs:",i),{}}},vN=i=>{if(!Wl())return null;try{const e=Og(),n=[],s=[];for(const o of i){const u=e[o];u&&(n.push(...u.gameData.items),s.push(...u.gameData.categories))}return n.length===0?null:{items:n,categories:[...new Set(s)]}}catch(e){return console.error("Error reading cached game data:",e),null}},EN=()=>{Object.values($i).forEach(i=>{localStorage.removeItem(i)}),console.log("Cache cleared successfully")},Pw=()=>{const i=Og(),e=localStorage.getItem($i.LAST_SYNC);return{hasPermission:Wl(),packsCount:Object.keys(i).length,lastSync:e?new Date(parseInt(e)):null,packs:Object.keys(i)}};var Vw="basil",TN=function(e){return e===3?"v3":e},Mw="https://js.stripe.com",wN="".concat(Mw,"/").concat(Vw,"/stripe.js"),bN=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,AN=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var SN=function(e){return bN.test(e)||AN.test(e)},RN=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Mw,'"]')),n=0;n<e.length;n++){var s=e[n];if(SN(s.src))return s}return null},U0=function(e){var n="",s=document.createElement("script");s.src="".concat(wN).concat(n);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(s),s},IN=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:n})},Cl=null,Bc=null,qc=null,xN=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},CN=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},NN=function(e){return Cl!==null?Cl:(Cl=new Promise(function(n,s){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var o=RN();if(!(o&&e)){if(!o)o=U0(e);else if(o&&qc!==null&&Bc!==null){var u;o.removeEventListener("load",qc),o.removeEventListener("error",Bc),(u=o.parentNode)===null||u===void 0||u.removeChild(o),o=U0(e)}}qc=CN(n,s),Bc=xN(s),o.addEventListener("load",qc),o.addEventListener("error",Bc)}catch(f){s(f);return}}),Cl.catch(function(n){return Cl=null,Promise.reject(n)}))},DN=function(e,n,s){if(e===null)return null;var o=n[0],u=o.match(/^pk_test/),f=TN(e.version),m=Vw;u&&f!==m&&console.warn("Stripe.js@".concat(f," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(m,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var p=e.apply(void 0,n);return IN(p,s),p},Nl,kw=!1,Lw=function(){return Nl||(Nl=NN(null).catch(function(e){return Nl=null,Promise.reject(e)}),Nl)};Promise.resolve().then(function(){return Lw()}).catch(function(i){kw||console.warn(i)});var ON=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];kw=!0;var o=Date.now();return Lw().then(function(u){return DN(u,n,o)})};const PN="pk_live_51S2dpMEamlsERKowyMSm4kgm11dMknJLyZGy9gZsIBBd3BQo3l9Vnn0TYKWcmuDtnq23YEsHo7FL69hGEM3UAboz00Onx53LCm";let om=null;const VN=()=>(om||(om=ON(PN)),om),Uw=async()=>{try{const i=await uN(fw(Ks,"config","stripe"));return i.exists()?i.data():null}catch(i){return console.error("Error obteniendo configuración de Stripe:",i),null}},MN=async(i,e,n)=>{try{if(!i.isPremium)throw new Error("Este pack no requiere pago");const s=await Uw();if(!s)throw new Error("Configuración de Stripe no disponible");const o=i.priceAmount||0,u=i.originalPriceAmount||i.priceAmount||0;console.log("Creando sesión de checkout:",{packId:i.id,originalAmount:u,finalAmount:o,hasDiscount:i.hasDiscount,discountReason:i.discountReason});const f=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packId:i.id,priceId:i.stripePriceId,userEmail:e,userId:n,successUrl:`${window.location.origin}${s.successUrl}&pack=${i.id}`,cancelUrl:`${window.location.origin}${s.cancelUrl}`,hasDiscount:i.hasDiscount,finalAmount:o,originalAmount:u,discountReason:i.discountReason})});if(!f.ok){const p=await f.json();throw new Error(p.error||"Error creando sesión de pago")}const m=await f.json();return{sessionId:m.id,url:m.url}}catch(s){throw console.error("Error creando sesión de checkout:",s),s}},kN=async(i,e,n)=>{try{const s=await VN();if(!s)throw new Error("Stripe no está disponible");const o=await MN(i,e,n);if(!o)throw new Error("No se pudo crear la sesión de pago");await LN({userId:n,packId:i.id,stripeSessionId:o.sessionId,purchaseDate:new Date,amount:i.priceAmount||0,currency:i.currency||"EUR",status:"pending",email:e});const{error:u}=await s.redirectToCheckout({sessionId:o.sessionId});if(u)throw new Error(u.message)}catch(s){throw console.error("Error redirigiendo a checkout:",s),s}},LN=async i=>{try{return(await cN(po(Ks,"userPurchases"),{...i,purchaseDate:i.purchaseDate.toISOString()})).id}catch(e){throw console.error("Error guardando compra pendiente:",e),e}},UN=async i=>{try{const e=Uh(po(Ks,"userPurchases"),Hs("userId","==",i),Hs("status","==","completed"));return(await cu(e)).docs.map(s=>({id:s.id,...s.data(),purchaseDate:new Date(s.data().purchaseDate)}))}catch(e){return console.error("Error obteniendo compras del usuario:",e),[]}},j0=async i=>{try{return(await UN(i)).map(n=>n.packId)}catch(e){return console.error("Error obteniendo packs comprados:",e),[]}},jN=({onClose:i})=>{const[e,n]=he.useState(null),[s,o]=he.useState(!1);he.useEffect(()=>{u()},[]);const u=()=>{const p=Pw();n(p)},f=async()=>{o(!0);try{yN()&&u()}finally{o(!1)}},m=()=>{window.confirm("¿Estás seguro de que quieres eliminar todos los datos guardados localmente?")&&(EN(),u())};return e?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("h2",{className:"text-xl font-bold",children:"Almacenamiento Local"}),E.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"Estado del Caché"}),E.jsxs("div",{className:"space-y-2 text-sm",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Permiso:"}),E.jsx("span",{className:`font-medium ${e.hasPermission?"text-green-600":"text-red-600"}`,children:e.hasPermission?"Activado":"Desactivado"})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Packs guardados:"}),E.jsx("span",{className:"font-medium",children:e.packsCount})]}),e.lastSync&&E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Última sincronización:"}),E.jsxs("span",{className:"font-medium text-xs",children:[e.lastSync.toLocaleDateString()," ",e.lastSync.toLocaleTimeString()]})]})]})]}),e.packsCount>0&&E.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"Packs Disponibles Sin Conexión"}),E.jsx("div",{className:"space-y-1 text-sm",children:e.packs.map(p=>E.jsxs("div",{className:"flex items-center",children:[E.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),E.jsx("span",{className:"capitalize",children:p.replace("-"," ")})]},p))})]}),E.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"¿Qué es el almacenamiento local?"}),E.jsx("p",{className:"text-sm text-gray-700",children:"Permite guardar los packs que compres en tu dispositivo para poder jugar sin conexión a internet. Los datos se mantienen seguros en tu navegador."})]}),E.jsxs("div",{className:"flex flex-col space-y-2",children:[e.hasPermission?E.jsx("div",{className:"text-center text-green-600 font-medium",children:"✓ Almacenamiento local activado"}):E.jsx(tt,{onClick:f,disabled:s,className:"w-full bg-green-600 hover:bg-green-700",children:s?"Procesando...":"Activar Almacenamiento Local"}),e.packsCount>0&&E.jsx(tt,{onClick:m,className:"w-full bg-red-600 hover:bg-red-700",children:"Limpiar Datos Guardados"}),E.jsx(tt,{onClick:i,className:"w-full bg-gray-600 hover:bg-gray-700",children:"Cerrar"})]})]})]})}):E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:E.jsx("div",{className:"text-center",children:"Cargando información del caché..."})})})},zN=({pack:i,onBack:e,onSuccess:n})=>{const{user:s}=Dg(),[o,u]=he.useState(!1),[f,m]=he.useState(null),[p,y]=he.useState(null);he.useEffect(()=>{(async()=>{try{const j=await Uw();y(j)}catch{m("Error cargando configuración de pago")}})()},[]);const T=async()=>{if(!s||!s.email){m("Debes estar autenticado para realizar una compra");return}if(!i.isPremium){m("Este pack no requiere pago");return}u(!0),m(null);try{await kN(i,s.email,s.uid),n&&n()}catch(R){m(R.message||"Error procesando el pago"),u(!1)}},I=(R,j)=>new Intl.NumberFormat("es-ES",{style:"currency",currency:j.toUpperCase()}).format(R/100);return p?E.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:E.jsxs("div",{className:"w-full max-w-md",children:[E.jsxs("div",{className:"relative text-center mb-8",children:[E.jsx("button",{onClick:e,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:E.jsx(q0,{className:"w-8 h-8"})}),E.jsx("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Checkout"})]}),E.jsxs(Qn,{className:"p-6",children:[E.jsxs("div",{className:"text-center mb-6",children:[E.jsx("div",{className:"text-6xl mb-4",children:i.icon}),E.jsx("h2",{className:"text-2xl font-bold text-cyan-400 mb-2",children:i.name}),E.jsx("p",{className:"text-gray-400 mb-4",children:i.description}),i.priceAmount&&i.currency&&E.jsxs("div",{className:"bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-lg p-4 mb-4",children:[E.jsx("div",{className:"text-3xl font-bold text-white",children:I(i.priceAmount,i.currency)}),E.jsx("div",{className:"text-sm text-gray-300",children:"Pago único"})]})]}),E.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 mb-6",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[E.jsx(Ga,{className:"w-5 h-5 text-green-400"}),E.jsx("span",{className:"text-green-400 font-semibold",children:"Pago seguro"})]}),E.jsx("p",{className:"text-sm text-gray-300",children:"Tu pago está protegido por Stripe. No almacenamos información de tarjetas de crédito."})]}),s&&E.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:[E.jsxs("div",{className:"text-sm text-gray-300",children:[E.jsx("strong",{children:"Cuenta:"})," ",s.displayName||s.email]}),E.jsxs("div",{className:"text-sm text-gray-300",children:[E.jsx("strong",{children:"Email:"})," ",s.email]})]}),f&&E.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6",children:E.jsx("p",{className:"text-red-200 text-sm",children:f})}),E.jsx(tt,{onClick:T,disabled:o||!s,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:o?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Procesando..."]}):E.jsxs(E.Fragment,{children:[E.jsx(H0,{className:"w-5 h-5"}),"Pagar con Stripe"]})}),E.jsx("div",{className:"mt-4 text-center",children:E.jsx("p",{className:"text-xs text-gray-400",children:"Al continuar, aceptas nuestros términos de servicio y política de privacidad."})})]}),E.jsxs("div",{className:"mt-6 text-center",children:[E.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Métodos de pago aceptados:"}),E.jsxs("div",{className:"flex justify-center gap-2",children:[E.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Visa"}),E.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Mastercard"}),E.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"American Express"})]})]})]})}):E.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),E.jsx("p",{className:"text-gray-400",children:"Cargando configuración de pago..."})]})})},BN=({availablePacks:i,purchasedPacks:e,onPurchase:n,onBack:s,onGoToLogin:o})=>{const{user:u,isAuthenticated:f}=Dg(),[m,p]=he.useState(!1),[y,T]=he.useState(!1),[I,R]=he.useState(!1),[j,H]=he.useState(null),[$,Q]=he.useState([]),[le,se]=he.useState(!1);he.useEffect(()=>{(async()=>{if(u&&f){se(!0);try{const A=await j0(u.uid);Q(A)}catch(A){console.error("Error cargando compras del usuario:",A)}finally{se(!1)}}else Q([])})()},[u,f]);const ae=N=>{const A=i.find(S=>S.id===N);if(A){if(!A.isPremium||A.id==="base"){if(!Mm()){p(!0),setTimeout(()=>p(!1),3e3);return}n(N);return}if(!Mm()){p(!0),setTimeout(()=>p(!1),3e3);return}H(A),R(!0)}},Te=async()=>{if(R(!1),H(null),u&&f)try{const N=await j0(u.uid);Q(N),j&&N.includes(j.id)&&n(j.id)}catch(N){console.error("Error actualizando compras:",N)}},ye=()=>{R(!1),H(null)},_e=Pw();return E.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:E.jsxs("div",{className:"w-full max-w-2xl",children:[E.jsxs("div",{className:"relative text-center mb-8",children:[E.jsx("button",{onClick:s,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:E.jsx(q0,{className:"w-8 h-8"})}),E.jsx("button",{onClick:()=>T(!0),className:"absolute right-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",title:"Gestionar almacenamiento local",children:E.jsxs("div",{className:"relative",children:[E.jsx(B0,{className:"w-8 h-8"}),_e.packsCount>0&&E.jsx("span",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:_e.packsCount})]})}),E.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Tienda de Paquetes"}),E.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 text-sm",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(SA,{className:"w-4 h-4"}),u?E.jsx("span",{className:`${f?"text-green-400":"text-yellow-400"}`,children:f?`Conectado como ${u.displayName||u.email}`:"Usuario anónimo - Inicia sesión para comprar"}):E.jsx("span",{className:"text-gray-400",children:"No conectado"})]}),u&&f&&E.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:E.jsx("a",{href:"https://verdad-reto.es.eu.org/delete-account.html",target:"_blank",rel:"noopener noreferrer",className:"hover:text-red-400 transition-colors",children:"Eliminar cuenta"})})]})]}),m&&E.jsxs("div",{className:"mb-6 p-4 bg-yellow-500/20 border border-yellow-500 rounded-lg text-center",children:[E.jsx("p",{className:"text-yellow-100 mb-2",children:"Necesitas iniciar sesión y verificar tu email para comprar packs premium"}),o&&E.jsx(tt,{onClick:o,className:"bg-yellow-600 hover:bg-yellow-700",children:"Ir a Iniciar Sesión"})]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(N=>{const A=e.includes(N.id),S=$.includes(N.id),D=A||S,P=N.id==="base",M=N.isPremium&&!P,x=M&&!D;return E.jsxs(Qn,{className:`flex flex-col text-center border-2 transition-all ${D?"border-green-500/50":x?"border-yellow-500/50 opacity-75":"border-transparent hover:border-pink-500/50"}`,children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"text-5xl mb-4",children:N.icon}),x&&E.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-500 rounded-full p-1",children:E.jsx(Ga,{className:"w-4 h-4 text-black"})})]}),E.jsx("h2",{className:`text-2xl font-bold ${D?"text-green-400":x?"text-yellow-400":"text-cyan-400"}`,children:N.name}),E.jsx("p",{className:"text-gray-400 mt-2 mb-2 flex-grow",children:N.description}),M&&N.priceAmount&&N.currency&&E.jsxs("div",{className:"mb-4",children:[N.hasDiscount&&N.originalPriceAmount?E.jsxs("div",{className:"space-y-1",children:[E.jsx("div",{className:"text-sm text-gray-500 line-through",children:new Intl.NumberFormat("es-ES",{style:"currency",currency:N.currency.toUpperCase()}).format(N.originalPriceAmount/100)}),E.jsx("div",{className:`text-lg font-bold ${D?"text-green-400":"text-red-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:N.currency.toUpperCase()}).format(N.priceAmount/100)}),E.jsx("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:N.discountPercentage?`-${N.discountPercentage}%`:`-${new Intl.NumberFormat("es-ES",{style:"currency",currency:N.currency.toUpperCase()}).format((N.originalPriceAmount-N.priceAmount)/100)}`}),N.discountReason&&E.jsx("div",{className:"text-xs text-yellow-400 italic",children:N.discountReason})]}):E.jsx("div",{className:`text-lg font-bold ${D?"text-green-400":"text-yellow-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:N.currency.toUpperCase()}).format(N.priceAmount/100)}),E.jsx("div",{className:"text-xs text-gray-500",children:"Pago único"})]}),D?E.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-green-700 text-green-200",children:"✓ Comprado"}):P?E.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-blue-700 text-blue-200",children:"Incluido"}):M?E.jsx(tt,{onClick:()=>ae(N.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",disabled:le,children:le?E.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):E.jsxs(E.Fragment,{children:[E.jsx(H0,{className:"w-4 h-4"}),"Comprar ",N.price]})}):E.jsxs(tt,{onClick:()=>ae(N.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2",children:[E.jsx(Ga,{className:"w-4 h-4"}),"Desbloquear (",N.price,")"]})]},N.id)})}),y&&E.jsx(jN,{onClose:()=>T(!1)}),I&&j&&E.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:E.jsx("div",{className:"w-full h-full",children:E.jsx(zN,{pack:j,onBack:ye,onSuccess:Te})})})]})})},qN=({onBack:i,onSuccess:e})=>{const[n,s]=he.useState("login"),[o,u]=he.useState(""),[f,m]=he.useState(""),[p,y]=he.useState(""),[T,I]=he.useState(""),[R,j]=he.useState(!1),[H,$]=he.useState(""),[Q,le]=he.useState(""),{refreshUser:se}=Dg(),ae=async()=>{j(!0),$("");try{await Sw(),se(),e()}catch(S){$(S.message)}finally{j(!1)}},Te=async()=>{j(!0),$("");try{await xw(),se(),e()}catch(S){$(S.message)}finally{j(!1)}},ye=async S=>{S.preventDefault(),j(!0),$(""),le("");try{if(n==="login"){const D=await Rw(o,f);if(se(),!D.emailVerified){le("Tu email no está verificado. Revisa tu bandeja de entrada o reenvía la verificación.");return}e()}else if(n==="register"){if(f!==p)throw new Error("Las contraseñas no coinciden");await Iw(o,f,T),le("Cuenta creada exitosamente. Revisa tu email para verificar tu cuenta antes de poder comprar packs premium."),s("login")}else n==="forgot-password"&&(await Cw(o),le("Email de restablecimiento enviado. Revisa tu bandeja de entrada."),s("login"))}catch(D){$(D.message)}finally{j(!1)}},_e=async()=>{j(!0),$("");try{await Nw(),le("Email de verificación reenviado.")}catch(S){$(S.message)}finally{j(!1)}},N=()=>{u(""),m(""),y(""),I(""),$(""),le("")},A=S=>{s(S),N()};return E.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:E.jsxs(Qn,{className:"w-full max-w-md p-8 space-y-6",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:n==="login"?"Iniciar Sesión":n==="register"?"Crear Cuenta":"Recuperar Contraseña"}),E.jsx("p",{className:"text-white/80",children:n==="login"?"Accede a tu cuenta para comprar packs premium":n==="register"?"Crea una cuenta para acceder a contenido premium":"Ingresa tu email para recuperar tu contraseña"})]}),H&&E.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:H}),Q&&E.jsxs("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:[E.jsx("p",{children:Q}),Q.includes("no está verificado")&&E.jsx(tt,{onClick:_e,disabled:R,className:"mt-2 bg-green-600 hover:bg-green-700 text-sm",children:"Reenviar verificación"})]}),E.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Email"}),E.jsx("input",{type:"email",value:o,onChange:S=>u(S.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"tu@email.com",required:!0})]}),n!=="forgot-password"&&E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Contraseña"}),E.jsx("input",{type:"password",value:f,onChange:S=>m(S.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"••••••••",required:!0,minLength:6})]}),n==="register"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Confirmar Contraseña"}),E.jsx("input",{type:"password",value:p,onChange:S=>y(S.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"••••••••",required:!0,minLength:6})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Nombre (opcional)"}),E.jsx("input",{type:"text",value:T,onChange:S=>I(S.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"Tu nombre"})]})]}),E.jsx(tt,{type:"submit",disabled:R,className:"w-full",children:R?"Cargando...":n==="login"?"Iniciar Sesión":n==="register"?"Crear Cuenta":"Enviar Email"})]}),n!=="forgot-password"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-white/20"})}),E.jsx("div",{className:"relative flex justify-center text-sm",children:E.jsx("span",{className:"px-2 bg-transparent text-white/60",children:"o"})})]}),E.jsxs(tt,{onClick:ae,disabled:R,className:"w-full bg-white text-gray-900 hover:bg-gray-100",children:[E.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[E.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),E.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),E.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),E.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar con Google"]})]}),E.jsxs("div",{className:"text-center space-y-2",children:[n==="login"&&E.jsxs(E.Fragment,{children:[E.jsx("button",{type:"button",onClick:()=>A("forgot-password"),className:"text-white/80 hover:text-white text-sm underline",children:"¿Olvidaste tu contraseña?"}),E.jsxs("div",{children:[E.jsx("span",{className:"text-white/60 text-sm",children:"¿No tienes cuenta? "}),E.jsx("button",{type:"button",onClick:()=>A("register"),className:"text-white hover:text-white/80 text-sm underline",children:"Regístrate"})]})]}),n==="register"&&E.jsxs("div",{children:[E.jsx("span",{className:"text-white/60 text-sm",children:"¿Ya tienes cuenta? "}),E.jsx("button",{type:"button",onClick:()=>A("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Inicia sesión"})]}),n==="forgot-password"&&E.jsx("button",{type:"button",onClick:()=>A("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Volver al inicio de sesión"})]}),E.jsxs("div",{className:"border-t border-white/20 pt-4",children:[E.jsx(tt,{onClick:Te,disabled:R,className:"w-full bg-white/10 hover:bg-white/20 text-white border border-white/20",children:"Continuar sin cuenta"}),E.jsx("p",{className:"text-white/60 text-xs text-center mt-2",children:"Podrás jugar pero no comprar packs premium"})]}),E.jsx("div",{className:"text-center",children:E.jsx(tt,{onClick:i,className:"text-white/80 hover:text-white bg-transparent",children:"← Volver"})})]})})},HN=i=>{var n;if(!i.hasDiscount||!i.priceAmount)return i;if(i.discountValidUntil&&new Date>i.discountValidUntil)return{...i,hasDiscount:!1};let e=i.priceAmount;return i.discountPercentage?e=i.priceAmount*(1-i.discountPercentage/100):i.discountAmount&&(e=i.priceAmount-i.discountAmount),e=Math.max(0,Math.round(e)),{...i,originalPriceAmount:i.priceAmount,priceAmount:e,price:new Intl.NumberFormat("es-ES",{style:"currency",currency:((n=i.currency)==null?void 0:n.toUpperCase())||"EUR"}).format(e/100)}},jw=async()=>{try{const i=po(Ks,"packs"),e=await cu(i);return e.empty?(console.warn("No packs found in Firebase database"),[]):e.docs.map(o=>{const u=o.data();return{id:o.id,name:u.name,description:u.description,price:u.price,icon:u.icon,isActive:u.isActive??!0,priceAmount:u.priceAmount,currency:u.currency,isPremium:u.isPremium??!1,stripeProductId:u.stripeProductId,stripePriceId:u.stripePriceId,hasDiscount:u.hasDiscount??!1,discountPercentage:u.discountPercentage,discountAmount:u.discountAmount,discountReason:u.discountReason,discountValidUntil:u.discountValidUntil?u.discountValidUntil.toDate():void 0,originalPriceAmount:u.originalPriceAmount}}).filter(o=>o.isActive).map(o=>HN(o))}catch(i){throw console.error("Error connecting to Firebase:",i),new Error("No se pudo conectar a la base de datos. Verifica tu conexión a internet.")}},FN=async i=>{try{if(!i||i.length===0)return console.warn("No categories provided for questions query"),[];const e=po(Ks,"gameItems"),n=Uh(e,Hs("type","==","question"),Hs("category","in",i)),s=await cu(n);return s.empty?(console.warn("No questions found in Firebase database for categories:",i),[]):s.docs.map(u=>{const f=u.data();return{text:f.text,category:f.category}})}catch(e){throw console.error("Error fetching questions from Firebase:",e),new Error("No se pudieron cargar las preguntas. Verifica tu conexión a internet.")}},GN=async i=>{try{if(!i||i.length===0)return console.warn("No categories provided for dares query"),[];const e=po(Ks,"gameItems"),n=Uh(e,Hs("type","==","dare"),Hs("category","in",i)),s=await cu(n);return s.empty?(console.warn("No dares found in Firebase database for categories:",i),[]):s.docs.map(u=>{const f=u.data();return{text:f.text,category:f.category}})}catch(e){throw console.error("Error fetching dares from Firebase:",e),new Error("No se pudieron cargar los retos. Verifica tu conexión a internet.")}},QN=async i=>{try{if(!i||i.length===0)return console.warn("No pack IDs provided for categories query"),[];const e=po(Ks,"gameItems"),n=Uh(e,Hs("packId","in",i)),s=await cu(n);return s.empty?(console.warn("No categories found in Firebase database for packs:",i),[]):[...new Set(s.docs.map(u=>u.data().category))]}catch(e){throw console.error("Error fetching categories from Firebase:",e),new Error("No se pudieron cargar las categorías. Verifica tu conexión a internet.")}},XN=async i=>{try{if(!i||i.length===0)return console.warn("No pack IDs provided for game data query"),{questions:[],dares:[],categories:[]};const e=await QN(i),[n,s]=await Promise.all([FN(e),GN(e)]);if(Wl()&&(n.length>0||s.length>0)){const o=[...n,...s],u=i.reduce((f,m)=>{const p=o.filter(T=>T.packId===m),y=e.filter(T=>p.some(I=>I.category===T));return p.length>0&&(f[m]={items:p,categories:y}),f},{});for(const[f,m]of Object.entries(u)){const y=(await jw()).find(T=>T.id===f);y&&await _N(y,m.items,m.categories)}}return{questions:n,dares:s,categories:e}}catch(e){console.error("Error fetching game data from Firebase:",e);const n=vN(i);if(n){console.log("Using cached game data for offline play");const s=n.items.filter(u=>!("type"in u)||u.type==="question"),o=n.items.filter(u=>"type"in u&&u.type==="dare");return{questions:s,dares:o,categories:n.categories}}throw Wl()?new Error("No hay conexión a internet y no tienes datos guardados para estos packs."):new Error("No hay conexión a internet y no tienes packs guardados localmente. ¿Deseas activar el almacenamiento local para jugar sin conexión?")}},KN=()=>{const[i,e]=he.useState(it.Setup),[n,s]=he.useState([]),[o,u]=he.useState([]),[f,m]=he.useState([]),[p,y]=he.useState(0),[T,I]=he.useState({totalRounds:5}),[R,j]=he.useState({currentRound:1,playersCompletedInRound:0}),[H,$]=he.useState({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),[Q,le]=he.useState({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),[se,ae]=he.useState({isLoading:!0,error:null}),[Te,ye]=he.useState([]),[_e,N]=he.useState(()=>{try{const ge=window.localStorage.getItem("purchasedPacks");return ge?JSON.parse(ge):[]}catch(ge){return console.error("Error reading from localStorage",ge),[]}});he.useEffect(()=>{(async()=>{try{const ce=await jw();ye(ce)}catch(ce){console.error("Error loading available packs:",ce)}})()},[]),he.useEffect(()=>{try{window.localStorage.setItem("purchasedPacks",JSON.stringify(_e))}catch(ge){console.error("Error writing to localStorage",ge)}},[_e]);const A=he.useCallback(async()=>{ae({isLoading:!0,error:null});try{const ge=["base",..._e.filter(vn=>vn!=="base")],ce=await XN(ge);u(ce.questions),m(ce.dares),ae({isLoading:!1,error:null})}catch(ge){console.error("Error loading game data:",ge),ae({isLoading:!1,error:ge instanceof Error?ge.message:"Error desconocido"})}},[_e]);he.useEffect(()=>{A()},[A]);const S=()=>{if(n.length<2){alert("Se necesitan al menos 2 jugadores para empezar.");return}e(it.PackSelection)},D=()=>{e(it.RoundConfiguration)},P=()=>{e(it.Setup)},M=()=>{e(it.Shop)},x=()=>{e(it.Login)},Ge=()=>{e(it.Setup)},Be=()=>{e(it.Setup)},G=ge=>{I(ge),$({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:new Date,gameEndTime:null,roundStats:[]}),le({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),j({currentRound:1,playersCompletedInRound:0}),e(it.Game)},ne=()=>{const ge=(p+1)%n.length;if(y(ge),ge===0){const ce=R.currentRound+1;ce>T.totalRounds?O():(j({currentRound:ce,playersCompletedInRound:0}),le({roundNumber:ce,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}))}else j(ce=>({...ce,playersCompletedInRound:ce.playersCompletedInRound+1}))},fe=()=>{const ge={...Q,roundEndTime:new Date};$(ce=>({...ce,totalRounds:ce.totalRounds+1,roundStats:[...ce.roundStats,ge]})),e(it.RoundEnd)},qe=()=>{const ge=R.currentRound+1;j({currentRound:ge,playersCompletedInRound:0}),le({roundNumber:ge,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),y(0),e(it.Game)},O=()=>{$(ge=>({...ge,gameEndTime:new Date})),e(it.GameEnd)},J=()=>{const ge=n[p];le(ce=>({...ce,questionsAsked:ce.questionsAsked+1,playersParticipated:ce.playersParticipated.includes(ge)?ce.playersParticipated:[...ce.playersParticipated,ge]})),$(ce=>({...ce,totalQuestions:ce.totalQuestions+1}))},re=()=>{const ge=n[p];le(ce=>({...ce,daresCompleted:ce.daresCompleted+1,playersParticipated:ce.playersParticipated.includes(ge)?ce.playersParticipated:[...ce.playersParticipated,ge]})),$(ce=>({...ce,totalDares:ce.totalDares+1}))},ee=he.useCallback(()=>{e(it.Setup),s([]),y(0),I({totalRounds:5}),j({currentRound:1,playersCompletedInRound:0}),$({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),le({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null})},[]),me=ge=>{_e.includes(ge)||N([..._e,ge])},Ce=()=>_e.includes("no-ads"),Ae=()=>{switch(i){case it.Setup:return E.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-900 bg-opacity-50 backdrop-blur-sm",children:E.jsxs("div",{className:"w-full max-w-md mx-auto animate-fade-in",children:[E.jsx("h1",{className:"text-5xl font-extrabold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Verdad o Reto"}),E.jsx("p",{className:"text-center text-gray-400 mb-8",children:"El juego para animar la fiesta"}),E.jsxs("div",{className:"space-y-6",children:[E.jsx(RA,{players:n,setPlayers:s}),se.isLoading&&E.jsx(Qn,{className:"text-center text-gray-400",children:E.jsx("p",{children:"Cargando datos desde Firebase..."})}),se.error&&E.jsxs(Qn,{className:"text-center text-red-400",children:[E.jsxs("p",{children:["Error de conexión: ",se.error]}),E.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Verifica tu configuración de Firebase"}),E.jsx(tt,{onClick:A,className:"mt-4",variant:"secondary",children:"Reintentar"})]}),!se.isLoading&&!se.error&&E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsx(tt,{onClick:S,className:"w-full text-lg",disabled:n.length<2||o.length===0||f.length===0,children:"Empezar a Jugar"}),E.jsxs(tt,{onClick:()=>e(it.Shop),variant:"secondary",className:"w-full text-lg flex items-center justify-center gap-2",children:[E.jsx(B0,{className:"w-6 h-6"}),"Tienda de Paquetes"]}),E.jsx(tt,{onClick:x,variant:"secondary",className:"w-full text-lg",children:"Iniciar Sesión"})]})]})]})});case it.Login:return E.jsx(qN,{onBack:Be,onSuccess:Ge});case it.Shop:return E.jsx(BN,{availablePacks:Te,purchasedPacks:_e,onPurchase:me,onBack:()=>e(it.Setup),onGoToLogin:x});case it.PackSelection:return E.jsx(IA,{availablePacks:Te,purchasedPacks:_e,onContinue:D,onBack:P,onGoToShop:M});case it.RoundConfiguration:return E.jsx(CA,{onSelectRounds:ge=>{G({totalRounds:ge})},onBack:()=>e(it.PackSelection)});case it.Game:return E.jsx(xA,{players:n,currentPlayerIndex:p,onNextPlayer:ne,onNewGame:ee,questions:o,dares:f,roundConfig:T,gameProgress:R,onRoundEnd:fe,onQuestionAsked:J,onDareCompleted:re});case it.RoundEnd:return E.jsx(HA,{roundStats:Q,currentRound:R.currentRound,totalRounds:T.totalRounds,onContinue:qe,onEndGame:O,hasNoAds:Ce()});case it.GameEnd:return E.jsx(FA,{gameStats:H,players:n,onNewGame:ee,onBackToMenu:()=>e(it.Setup)});default:return E.jsx("div",{children:"Error: Estado de juego desconocido."})}};return E.jsx(pN,{children:E.jsxs("main",{className:"relative min-h-screen bg-gray-900 overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-purple-900/30 via-transparent to-pink-900/30"}),E.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-96 h-96 bg-purple-600 rounded-full filter blur-3xl opacity-20 animate-blob"}),E.jsx("div",{className:"absolute bottom-[-10%] right-[5%] w-96 h-96 bg-pink-600 rounded-full filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),E.jsx("div",{className:"absolute top-[10%] right-[-15%] w-80 h-80 bg-cyan-600 rounded-full filter blur-3xl opacity-10 animate-blob animation-delay-4000"}),E.jsx("div",{className:"relative z-10",children:Ae()}),E.jsx("style",{children:`
          .animate-blob {
            animation: blob 7s infinite;
          }
          .animation-delay-2000 {
            animation-delay: 2s;
          }
          .animation-delay-4000 {
            animation-delay: 4s;
          }
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
          }
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `})]})})},zw=document.getElementById("root");if(!zw)throw new Error("Could not find root element to mount to");const YN=wA.createRoot(zw);YN.render(E.jsx(mA.StrictMode,{children:E.jsx(KN,{})}));export{ov as A,F0 as W};
