(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function Z0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var $f={exports:{}},Ll={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function AA(){if(tv)return Ll;tv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:u}}return Ll.Fragment=e,Ll.jsx=n,Ll.jsxs=n,Ll}var nv;function SA(){return nv||(nv=1,$f.exports=AA()),$f.exports}var E=SA(),Wf={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function RA(){if(rv)return Ce;rv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=A&&O[A]||O["@@iterator"],typeof O=="function"?O:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,K={};function F(O,J,oe){this.props=O,this.context=J,this.refs=K,this.updater=oe||L}F.prototype.isReactComponent={},F.prototype.setState=function(O,J){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,J,"setState")},F.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ae(){}ae.prototype=F.prototype;function se(O,J,oe){this.props=O,this.context=J,this.refs=K,this.updater=oe||L}var ne=se.prototype=new ae;ne.constructor=se,U(ne,F.prototype),ne.isPureReactComponent=!0;var me=Array.isArray,ce={H:null,A:null,T:null,S:null,V:null},_e=Object.prototype.hasOwnProperty;function C(O,J,oe,ee,pe,Ne){return oe=Ne.ref,{$$typeof:i,type:O,key:J,ref:oe!==void 0?oe:null,props:Ne}}function R(O,J){return C(O.type,J,void 0,void 0,void 0,O.props)}function x(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function D(O){var J={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(oe){return J[oe]})}var P=/\/+/g;function M(O,J){return typeof O=="object"&&O!==null&&O.key!=null?D(""+O.key):J.toString(36)}function I(){}function ke(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(I,I):(O.status="pending",O.then(function(J){O.status==="pending"&&(O.status="fulfilled",O.value=J)},function(J){O.status==="pending"&&(O.status="rejected",O.reason=J)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Pe(O,J,oe,ee,pe){var Ne=typeof O;(Ne==="undefined"||Ne==="boolean")&&(O=null);var we=!1;if(O===null)we=!0;else switch(Ne){case"bigint":case"string":case"number":we=!0;break;case"object":switch(O.$$typeof){case i:case e:we=!0;break;case T:return we=O._init,Pe(we(O._payload),J,oe,ee,pe)}}if(we)return pe=pe(O),we=ee===""?"."+M(O,0):ee,me(pe)?(oe="",we!=null&&(oe=we.replace(P,"$&/")+"/"),Pe(pe,J,oe,"",function(Cn){return Cn})):pe!=null&&(x(pe)&&(pe=R(pe,oe+(pe.key==null||O&&O.key===pe.key?"":(""+pe.key).replace(P,"$&/")+"/")+we)),J.push(pe)),1;we=0;var Et=ee===""?".":ee+":";if(me(O))for(var Je=0;Je<O.length;Je++)ee=O[Je],Ne=Et+M(ee,Je),we+=Pe(ee,J,oe,Ne,pe);else if(Je=S(O),typeof Je=="function")for(O=Je.call(O),Je=0;!(ee=O.next()).done;)ee=ee.value,Ne=Et+M(ee,Je++),we+=Pe(ee,J,oe,Ne,pe);else if(Ne==="object"){if(typeof O.then=="function")return Pe(ke(O),J,oe,ee,pe);throw J=String(O),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return we}function Q(O,J,oe){if(O==null)return O;var ee=[],pe=0;return Pe(O,ee,"","",function(Ne){return J.call(oe,Ne,pe++)}),ee}function re(O){if(O._status===-1){var J=O._result;J=J(),J.then(function(oe){(O._status===0||O._status===-1)&&(O._status=1,O._result=oe)},function(oe){(O._status===0||O._status===-1)&&(O._status=2,O._result=oe)}),O._status===-1&&(O._status=0,O._result=J)}if(O._status===1)return O._result.default;throw O._result}var te=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function Ie(){}return Ce.Children={map:Q,forEach:function(O,J,oe){Q(O,function(){J.apply(this,arguments)},oe)},count:function(O){var J=0;return Q(O,function(){J++}),J},toArray:function(O){return Q(O,function(J){return J})||[]},only:function(O){if(!x(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ce.Component=F,Ce.Fragment=n,Ce.Profiler=o,Ce.PureComponent=se,Ce.StrictMode=s,Ce.Suspense=p,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(O){return ce.H.useMemoCache(O)}},Ce.cache=function(O){return function(){return O.apply(null,arguments)}},Ce.cloneElement=function(O,J,oe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ee=U({},O.props),pe=O.key,Ne=void 0;if(J!=null)for(we in J.ref!==void 0&&(Ne=void 0),J.key!==void 0&&(pe=""+J.key),J)!_e.call(J,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&J.ref===void 0||(ee[we]=J[we]);var we=arguments.length-2;if(we===1)ee.children=oe;else if(1<we){for(var Et=Array(we),Je=0;Je<we;Je++)Et[Je]=arguments[Je+2];ee.children=Et}return C(O.type,pe,void 0,void 0,Ne,ee)},Ce.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Ce.createElement=function(O,J,oe){var ee,pe={},Ne=null;if(J!=null)for(ee in J.key!==void 0&&(Ne=""+J.key),J)_e.call(J,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(pe[ee]=J[ee]);var we=arguments.length-2;if(we===1)pe.children=oe;else if(1<we){for(var Et=Array(we),Je=0;Je<we;Je++)Et[Je]=arguments[Je+2];pe.children=Et}if(O&&O.defaultProps)for(ee in we=O.defaultProps,we)pe[ee]===void 0&&(pe[ee]=we[ee]);return C(O,Ne,void 0,void 0,null,pe)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(O){return{$$typeof:m,render:O}},Ce.isValidElement=x,Ce.lazy=function(O){return{$$typeof:T,_payload:{_status:-1,_result:O},_init:re}},Ce.memo=function(O,J){return{$$typeof:y,type:O,compare:J===void 0?null:J}},Ce.startTransition=function(O){var J=ce.T,oe={};ce.T=oe;try{var ee=O(),pe=ce.S;pe!==null&&pe(oe,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Ie,te)}catch(Ne){te(Ne)}finally{ce.T=J}},Ce.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},Ce.use=function(O){return ce.H.use(O)},Ce.useActionState=function(O,J,oe){return ce.H.useActionState(O,J,oe)},Ce.useCallback=function(O,J){return ce.H.useCallback(O,J)},Ce.useContext=function(O){return ce.H.useContext(O)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(O,J){return ce.H.useDeferredValue(O,J)},Ce.useEffect=function(O,J,oe){var ee=ce.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(O,J)},Ce.useId=function(){return ce.H.useId()},Ce.useImperativeHandle=function(O,J,oe){return ce.H.useImperativeHandle(O,J,oe)},Ce.useInsertionEffect=function(O,J){return ce.H.useInsertionEffect(O,J)},Ce.useLayoutEffect=function(O,J){return ce.H.useLayoutEffect(O,J)},Ce.useMemo=function(O,J){return ce.H.useMemo(O,J)},Ce.useOptimistic=function(O,J){return ce.H.useOptimistic(O,J)},Ce.useReducer=function(O,J,oe){return ce.H.useReducer(O,J,oe)},Ce.useRef=function(O){return ce.H.useRef(O)},Ce.useState=function(O){return ce.H.useState(O)},Ce.useSyncExternalStore=function(O,J,oe){return ce.H.useSyncExternalStore(O,J,oe)},Ce.useTransition=function(){return ce.H.useTransition()},Ce.version="19.1.1",Ce}var iv;function Gm(){return iv||(iv=1,Wf.exports=RA()),Wf.exports}var le=Gm();const xA=Z0(le);var Zf={exports:{}},Ul={},Jf={exports:{}},em={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv;function IA(){return sv||(sv=1,(function(i){function e(Q,re){var te=Q.length;Q.push(re);e:for(;0<te;){var Ie=te-1>>>1,O=Q[Ie];if(0<o(O,re))Q[Ie]=re,Q[te]=O,te=Ie;else break e}}function n(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var re=Q[0],te=Q.pop();if(te!==re){Q[0]=te;e:for(var Ie=0,O=Q.length,J=O>>>1;Ie<J;){var oe=2*(Ie+1)-1,ee=Q[oe],pe=oe+1,Ne=Q[pe];if(0>o(ee,te))pe<O&&0>o(Ne,ee)?(Q[Ie]=Ne,Q[pe]=te,Ie=pe):(Q[Ie]=ee,Q[oe]=te,Ie=oe);else if(pe<O&&0>o(Ne,te))Q[Ie]=Ne,Q[pe]=te,Ie=pe;else break e}}return re}function o(Q,re){var te=Q.sortIndex-re.sortIndex;return te!==0?te:Q.id-re.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var p=[],y=[],T=1,A=null,S=3,L=!1,U=!1,K=!1,F=!1,ae=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function me(Q){for(var re=n(y);re!==null;){if(re.callback===null)s(y);else if(re.startTime<=Q)s(y),re.sortIndex=re.expirationTime,e(p,re);else break;re=n(y)}}function ce(Q){if(K=!1,me(Q),!U)if(n(p)!==null)U=!0,_e||(_e=!0,M());else{var re=n(y);re!==null&&Pe(ce,re.startTime-Q)}}var _e=!1,C=-1,R=5,x=-1;function D(){return F?!0:!(i.unstable_now()-x<R)}function P(){if(F=!1,_e){var Q=i.unstable_now();x=Q;var re=!0;try{e:{U=!1,K&&(K=!1,se(C),C=-1),L=!0;var te=S;try{t:{for(me(Q),A=n(p);A!==null&&!(A.expirationTime>Q&&D());){var Ie=A.callback;if(typeof Ie=="function"){A.callback=null,S=A.priorityLevel;var O=Ie(A.expirationTime<=Q);if(Q=i.unstable_now(),typeof O=="function"){A.callback=O,me(Q),re=!0;break t}A===n(p)&&s(p),me(Q)}else s(p);A=n(p)}if(A!==null)re=!0;else{var J=n(y);J!==null&&Pe(ce,J.startTime-Q),re=!1}}break e}finally{A=null,S=te,L=!1}re=void 0}}finally{re?M():_e=!1}}}var M;if(typeof ne=="function")M=function(){ne(P)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ke=I.port2;I.port1.onmessage=P,M=function(){ke.postMessage(null)}}else M=function(){ae(P,0)};function Pe(Q,re){C=ae(function(){Q(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Q){Q.callback=null},i.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var re=3;break;default:re=S}var te=S;S=re;try{return Q()}finally{S=te}},i.unstable_requestPaint=function(){F=!0},i.unstable_runWithPriority=function(Q,re){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var te=S;S=Q;try{return re()}finally{S=te}},i.unstable_scheduleCallback=function(Q,re,te){var Ie=i.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Ie+te:Ie):te=Ie,Q){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=te+O,Q={id:T++,callback:re,priorityLevel:Q,startTime:te,expirationTime:O,sortIndex:-1},te>Ie?(Q.sortIndex=te,e(y,Q),n(p)===null&&Q===n(y)&&(K?(se(C),C=-1):K=!0,Pe(ce,te-Ie))):(Q.sortIndex=O,e(p,Q),U||L||(U=!0,_e||(_e=!0,M()))),Q},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(Q){var re=S;return function(){var te=S;S=re;try{return Q.apply(this,arguments)}finally{S=te}}}})(em)),em}var av;function CA(){return av||(av=1,Jf.exports=IA()),Jf.exports}var tm={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ov;function NA(){if(ov)return Zt;ov=1;var i=Gm();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:p,containerInfo:y,implementation:T}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Zt.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,T)},Zt.flushSync=function(p){var y=d.T,T=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=y,s.p=T,s.d.f()}},Zt.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Zt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Zt.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var T=y.as,A=m(T,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:A,integrity:S,fetchPriority:L}):T==="script"&&s.d.X(p,{crossOrigin:A,integrity:S,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Zt.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=m(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Zt.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,A=m(T,y.crossOrigin);s.d.L(p,T,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Zt.preloadModule=function(p,y){if(typeof p=="string")if(y){var T=m(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Zt.requestFormReset=function(p){s.d.r(p)},Zt.unstable_batchedUpdates=function(p,y){return p(y)},Zt.useFormState=function(p,y,T){return d.H.useFormState(p,y,T)},Zt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Zt.version="19.1.1",Zt}var lv;function DA(){if(lv)return tm.exports;lv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),tm.exports=NA(),tm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function OA(){if(uv)return Ul;uv=1;var i=CA(),e=Gm(),n=DA();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),t;if(f===l)return m(h),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var v=!1,w=h.child;w;){if(w===a){v=!0,a=h,l=f;break}if(w===l){v=!0,l=h,a=f;break}w=w.sibling}if(!v){for(w=f.child;w;){if(w===a){v=!0,a=f,l=h;break}if(w===l){v=!0,l=f,a=h;break}w=w.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function y(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=y(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),ae=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=P&&t[P]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function ke(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case U:return"Fragment";case F:return"Profiler";case K:return"StrictMode";case ce:return"Suspense";case _e:return"SuspenseList";case x:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case ne:return(t.displayName||"Context")+".Provider";case se:return(t._context.displayName||"Context")+".Consumer";case me:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return r=t.displayName||null,r!==null?r:ke(t.type)||"Memo";case R:r=t._payload,t=t._init;try{return ke(t(r))}catch{}}return null}var Pe=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},Ie=[],O=-1;function J(t){return{current:t}}function oe(t){0>O||(t.current=Ie[O],Ie[O]=null,O--)}function ee(t,r){O++,Ie[O]=t.current,t.current=r}var pe=J(null),Ne=J(null),we=J(null),Et=J(null);function Je(t,r){switch(ee(we,r),ee(Ne,t),ee(pe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?C_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=C_(r),t=N_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(pe),ee(pe,t)}function Cn(){oe(pe),oe(Ne),oe(we)}function ir(t){t.memoizedState!==null&&ee(Et,t);var r=pe.current,a=N_(r,t.type);r!==a&&(ee(Ne,t),ee(pe,a))}function Gn(t){Ne.current===t&&(oe(pe),oe(Ne)),Et.current===t&&(oe(Et),Ol._currentValue=te)}var Pr=Object.prototype.hasOwnProperty,Vr=i.unstable_scheduleCallback,Mr=i.unstable_cancelCallback,gs=i.unstable_shouldYield,oa=i.unstable_requestPaint,on=i.unstable_now,No=i.unstable_getCurrentPriorityLevel,ps=i.unstable_ImmediatePriority,kr=i.unstable_UserBlockingPriority,Lr=i.unstable_NormalPriority,Do=i.unstable_LowPriority,Ei=i.unstable_IdlePriority,fe=i.log,ve=i.unstable_setDisableYieldValue,Xe=null,$e=null;function _n(t){if(typeof fe=="function"&&ve(t),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(Xe,t)}catch{}}var $t=Math.clz32?Math.clz32:ys,bu=Math.log,Wh=Math.LN2;function ys(t){return t>>>=0,t===0?32:31-(bu(t)/Wh|0)|0}var _s=256,vs=4194304;function Qn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function la(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~f,l!==0?h=Qn(l):(v&=w,v!==0?h=Qn(v):a||(a=w&~t,a!==0&&(h=Qn(a))))):(w=l&~f,w!==0?h=Qn(w):v!==0?h=Qn(v):a||(a=l&~t,a!==0&&(h=Qn(a)))),h===0?0:r!==0&&r!==h&&(r&f)===0&&(f=h&-h,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:h}function Es(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Oo(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Po(){var t=_s;return _s<<=1,(_s&4194048)===0&&(_s=256),t}function Vo(){var t=vs;return vs<<=1,(vs&62914560)===0&&(vs=4194304),t}function Ur(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function jr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Mo(t,r,a,l,h,f){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,N=t.expirationTimes,q=t.hiddenUpdates;for(a=v&~a;0<a;){var Y=31-$t(a),W=1<<Y;w[Y]=0,N[Y]=-1;var B=q[Y];if(B!==null)for(q[Y]=null,Y=0;Y<B.length;Y++){var H=B[Y];H!==null&&(H.lane&=-536870913)}a&=~W}l!==0&&sr(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(v&~r))}function sr(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-$t(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function ko(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-$t(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function Ti(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ua(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function wi(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:X_(t.type))}function Au(t,r){var a=re.p;try{return re.p=t,r()}finally{re.p=a}}var ut=Math.random().toString(36).slice(2),Ct="__reactFiber$"+ut,Tt="__reactProps$"+ut,Nn="__reactContainer$"+ut,Lo="__reactEvents$"+ut,Zh="__reactListeners$"+ut,bi="__reactHandles$"+ut,Su="__reactResources$"+ut,Ts="__reactMarker$"+ut;function Ai(t){delete t[Ct],delete t[Tt],delete t[Lo],delete t[Zh],delete t[bi]}function zr(t){var r=t[Ct];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Nn]||a[Ct]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=V_(t);t!==null;){if(a=t[Ct])return a;t=V_(t)}return r}t=a,a=t.parentNode}return null}function ar(t){if(t=t[Ct]||t[Nn]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function or(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function ln(t){var r=t[Su];return r||(r=t[Su]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function gt(t){t[Ts]=!0}var Uo=new Set,ca={};function Kn(t,r){qr(t,r),qr(t+"Capture",r)}function qr(t,r){for(ca[t]=r,t=0;t<r.length;t++)Uo.add(r[t])}var Ru=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xu={},ws={};function Iu(t){return Pr.call(ws,t)?!0:Pr.call(xu,t)?!1:Ru.test(t)?ws[t]=!0:(xu[t]=!0,!1)}function Si(t,r,a){if(Iu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function lr(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function qt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var bs,Cu;function Br(t){if(bs===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);bs=r&&r[1]||"",Cu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bs+t+Cu}var ha=!1;function da(t,r){if(!t||ha)return"";ha=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(H){var B=H}Reflect.construct(t,[],W)}else{try{W.call()}catch(H){B=H}t.call(W.prototype)}}else{try{throw Error()}catch(H){B=H}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(H){if(H&&B&&typeof H.stack=="string")return[H.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),v=f[0],w=f[1];if(v&&w){var N=v.split(`
`),q=w.split(`
`);for(h=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(l===N.length||h===q.length)for(l=N.length-1,h=q.length-1;1<=l&&0<=h&&N[l]!==q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(N[l]!==q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||N[l]!==q[h]){var Y=`
`+N[l].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=l&&0<=h);break}}}finally{ha=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Br(a):""}function jo(t){switch(t.tag){case 26:case 27:case 5:return Br(t.type);case 16:return Br("Lazy");case 13:return Br("Suspense");case 19:return Br("SuspenseList");case 0:case 15:return da(t.type,!1);case 11:return da(t.type.render,!1);case 1:return da(t.type,!0);case 31:return Br("Activity");default:return""}}function fa(t){try{var r="";do r+=jo(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function un(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Jh(t){var r=zo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,f.call(this,v)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function ma(t){t._valueTracker||(t._valueTracker=Jh(t))}function qo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=zo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function As(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ed=/[\n"\\]/g;function wt(t){return t.replace(ed,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function vn(t,r,a,l,h,f,v,w){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),r!=null?v==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+un(r)):t.value!==""+un(r)&&(t.value=""+un(r)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),r!=null?Ri(t,v,un(r)):a!=null?Ri(t,v,un(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+un(w):t.removeAttribute("name")}function Ss(t,r,a,l,h,f,v,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null))return;a=a!=null?""+un(a):"",r=r!=null?""+un(r):a,w||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function Ri(t,r,a){r==="number"&&As(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Hr(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+un(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function et(t,r,a){if(r!=null&&(r=""+un(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+un(a):""}function Rs(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Pe(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=un(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Dn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var xs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nu(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||xs.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Bo(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&Nu(t,h,l)}else for(var f in r)r.hasOwnProperty(f)&&Nu(t,f,r[f])}function Ho(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var td=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ga(t){return nd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Fr=null;function On(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gr=null,Qr=null;function Fo(t){var r=ar(t);if(r&&(t=r.stateNode)){var a=t[Tt]||null;e:switch(t=r.stateNode,r.type){case"input":if(vn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+wt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[Tt]||null;if(!h)throw Error(s(90));vn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&qo(l)}break e;case"textarea":et(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Hr(t,!!a.multiple,r,!1)}}}var ur=!1;function Du(t,r,a){if(ur)return t(r,a);ur=!0;try{var l=t(r);return l}finally{if(ur=!1,(Gr!==null||Qr!==null)&&(Ac(),Gr&&(r=Gr,t=Qr,Qr=Gr=null,Fo(r),t)))for(r=0;r<t.length;r++)Fo(t[r])}}function Is(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Tt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pn=!1;if(Yn)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){Pn=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{Pn=!1}var cr=null,xi=null,Kr=null;function Go(){if(Kr)return Kr;var t,r=xi,a=r.length,l,h="value"in cr?cr.value:cr.textContent,f=h.length;for(t=0;t<a&&r[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&r[a-l]===h[f-l];l++);return Kr=h.slice(t,1<l?1-l:void 0)}function hr(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function dr(){return!0}function Qo(){return!1}function Mt(t){function r(a,l,h,f,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?dr:Qo,this.isPropagationStopped=Qo,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=dr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=dr)},persist:function(){},isPersistent:dr}),r}var Ke={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pa=Mt(Ke),Ns=T({},Ke,{view:0,detail:0}),Ou=Mt(Ns),ya,_a,fr,Ds=T({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fr&&(fr&&t.type==="mousemove"?(ya=t.screenX-fr.screenX,_a=t.screenY-fr.screenY):_a=ya=0,fr=t),ya)},movementY:function(t){return"movementY"in t?t.movementY:_a}}),Vn=Mt(Ds),Pu=T({},Ds,{dataTransfer:0}),rd=Mt(Pu),Os=T({},Ns,{relatedTarget:0}),va=Mt(Os),Ko=T({},Ke,{animationName:0,elapsedTime:0,pseudoElement:0}),Ea=Mt(Ko),Vu=T({},Ke,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ta=Mt(Vu),id=T({},Ke,{data:0}),Yo=Mt(id),Ps={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ku={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xo(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=ku[t])?!!r[t]:!1}function Vs(){return Xo}var Lu=T({},Ns,{key:function(t){if(t.key){var r=Ps[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=hr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Mu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vs,charCode:function(t){return t.type==="keypress"?hr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wa=Mt(Lu),Uu=T({},Ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$o=Mt(Uu),Yr=T({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vs}),ju=Mt(Yr),zu=T({},Ke,{propertyName:0,elapsedTime:0,pseudoElement:0}),qu=Mt(zu),Bu=T({},Ds,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ba=Mt(Bu),cn=T({},Ke,{newState:0,oldState:0}),Hu=Mt(cn),Fu=[9,13,27,32],mr=Yn&&"CompositionEvent"in window,c=null;Yn&&"documentMode"in document&&(c=document.documentMode);var g=Yn&&"TextEvent"in window&&!c,_=Yn&&(!mr||c&&8<c&&11>=c),b=" ",j=!1;function G(t,r){switch(t){case"keyup":return Fu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ie(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ze=!1;function Nt(t,r){switch(t){case"compositionend":return ie(r);case"keypress":return r.which!==32?null:(j=!0,b);case"textInput":return t=r.data,t===b&&j?null:t;default:return null}}function qe(t,r){if(ze)return t==="compositionend"||!mr&&G(t,r)?(t=Go(),Kr=xi=cr=null,ze=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _&&r.locale!=="ko"?null:r.data;default:return null}}var kt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!kt[t.type]:r==="textarea"}function Xr(t,r,a,l){Gr?Qr?Qr.push(l):Qr=[l]:Gr=l,r=Nc(r,"onChange"),0<r.length&&(a=new pa("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Bt=null,gr=null;function Wo(t){A_(t,0)}function Gu(t){var r=or(t);if(qo(r))return t}function Gg(t,r){if(t==="change")return r}var Qg=!1;if(Yn){var sd;if(Yn){var ad="oninput"in document;if(!ad){var Kg=document.createElement("div");Kg.setAttribute("oninput","return;"),ad=typeof Kg.oninput=="function"}sd=ad}else sd=!1;Qg=sd&&(!document.documentMode||9<document.documentMode)}function Yg(){Bt&&(Bt.detachEvent("onpropertychange",Xg),gr=Bt=null)}function Xg(t){if(t.propertyName==="value"&&Gu(gr)){var r=[];Xr(r,gr,t,On(t)),Du(Wo,r)}}function eb(t,r,a){t==="focusin"?(Yg(),Bt=r,gr=a,Bt.attachEvent("onpropertychange",Xg)):t==="focusout"&&Yg()}function tb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gu(gr)}function nb(t,r){if(t==="click")return Gu(r)}function rb(t,r){if(t==="input"||t==="change")return Gu(r)}function ib(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var En=typeof Object.is=="function"?Object.is:ib;function Zo(t,r){if(En(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Pr.call(r,h)||!En(t[h],r[h]))return!1}return!0}function $g(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wg(t,r){var a=$g(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=$g(a)}}function Zg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Zg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Jg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=As(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=As(t.document)}return r}function od(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var sb=Yn&&"documentMode"in document&&11>=document.documentMode,Aa=null,ld=null,Jo=null,ud=!1;function ep(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ud||Aa==null||Aa!==As(l)||(l=Aa,"selectionStart"in l&&od(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Jo&&Zo(Jo,l)||(Jo=l,l=Nc(ld,"onSelect"),0<l.length&&(r=new pa("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Aa)))}function Ms(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Sa={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},cd={},tp={};Yn&&(tp=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function ks(t){if(cd[t])return cd[t];if(!Sa[t])return t;var r=Sa[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in tp)return cd[t]=r[a];return t}var np=ks("animationend"),rp=ks("animationiteration"),ip=ks("animationstart"),ab=ks("transitionrun"),ob=ks("transitionstart"),lb=ks("transitioncancel"),sp=ks("transitionend"),ap=new Map,hd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hd.push("scrollEnd");function Xn(t,r){ap.set(t,r),Kn(r,[t])}var op=new WeakMap;function Mn(t,r){if(typeof t=="object"&&t!==null){var a=op.get(t);return a!==void 0?a:(r={value:t,source:r,stack:fa(r)},op.set(t,r),r)}return{value:t,source:r,stack:fa(r)}}var kn=[],Ra=0,dd=0;function Qu(){for(var t=Ra,r=dd=Ra=0;r<t;){var a=kn[r];kn[r++]=null;var l=kn[r];kn[r++]=null;var h=kn[r];kn[r++]=null;var f=kn[r];if(kn[r++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}f!==0&&lp(a,h,f)}}function Ku(t,r,a,l){kn[Ra++]=t,kn[Ra++]=r,kn[Ra++]=a,kn[Ra++]=l,dd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function fd(t,r,a,l){return Ku(t,r,a,l),Yu(t)}function xa(t,r){return Ku(t,null,null,r),Yu(t)}function lp(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&r!==null&&(h=31-$t(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),f):null}function Yu(t){if(50<Al)throw Al=0,Ef=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ia={};function ub(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(t,r,a,l){return new ub(t,r,a,l)}function md(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $r(t,r){var a=t.alternate;return a===null?(a=Tn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function up(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Xu(t,r,a,l,h,f){var v=0;if(l=t,typeof t=="function")md(t)&&(v=1);else if(typeof t=="string")v=hA(t,a,pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case x:return t=Tn(31,a,r,h),t.elementType=x,t.lanes=f,t;case U:return Ls(a.children,h,f,r);case K:v=8,h|=24;break;case F:return t=Tn(12,a,r,h|2),t.elementType=F,t.lanes=f,t;case ce:return t=Tn(13,a,r,h),t.elementType=ce,t.lanes=f,t;case _e:return t=Tn(19,a,r,h),t.elementType=_e,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ae:case ne:v=10;break e;case se:v=9;break e;case me:v=11;break e;case C:v=14;break e;case R:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Tn(v,a,r,h),r.elementType=t,r.type=l,r.lanes=f,r}function Ls(t,r,a,l){return t=Tn(7,t,l,r),t.lanes=a,t}function gd(t,r,a){return t=Tn(6,t,null,r),t.lanes=a,t}function pd(t,r,a){return r=Tn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ca=[],Na=0,$u=null,Wu=0,Ln=[],Un=0,Us=null,Wr=1,Zr="";function js(t,r){Ca[Na++]=Wu,Ca[Na++]=$u,$u=t,Wu=r}function cp(t,r,a){Ln[Un++]=Wr,Ln[Un++]=Zr,Ln[Un++]=Us,Us=t;var l=Wr;t=Zr;var h=32-$t(l)-1;l&=~(1<<h),a+=1;var f=32-$t(r)+h;if(30<f){var v=h-h%5;f=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Wr=1<<32-$t(r)+h|a<<h|l,Zr=f+t}else Wr=1<<f|a<<h|l,Zr=t}function yd(t){t.return!==null&&(js(t,1),cp(t,1,0))}function _d(t){for(;t===$u;)$u=Ca[--Na],Ca[Na]=null,Wu=Ca[--Na],Ca[Na]=null;for(;t===Us;)Us=Ln[--Un],Ln[Un]=null,Zr=Ln[--Un],Ln[Un]=null,Wr=Ln[--Un],Ln[Un]=null}var hn=null,ft=null,Qe=!1,zs=null,pr=!1,vd=Error(s(519));function qs(t){var r=Error(s(418,""));throw nl(Mn(r,t)),vd}function hp(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Ct]=t,r[Tt]=l,a){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(a=0;a<Rl.length;a++)Me(Rl[a],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":Me("invalid",r),Ss(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ma(r);break;case"select":Me("invalid",r);break;case"textarea":Me("invalid",r),Rs(r,l.value,l.defaultValue,l.children),ma(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||I_(r.textContent,a)?(l.popover!=null&&(Me("beforetoggle",r),Me("toggle",r)),l.onScroll!=null&&Me("scroll",r),l.onScrollEnd!=null&&Me("scrollend",r),l.onClick!=null&&(r.onclick=Dc),r=!0):r=!1,r||qs(t)}function dp(t){for(hn=t.return;hn;)switch(hn.tag){case 5:case 13:pr=!1;return;case 27:case 3:pr=!0;return;default:hn=hn.return}}function el(t){if(t!==hn)return!1;if(!Qe)return dp(t),Qe=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||kf(t.type,t.memoizedProps)),a=!a),a&&ft&&qs(t),dp(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){ft=Wn(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}ft=null}}else r===27?(r=ft,Hi(t.type)?(t=zf,zf=null,ft=t):ft=r):ft=hn?Wn(t.stateNode.nextSibling):null;return!0}function tl(){ft=hn=null,Qe=!1}function fp(){var t=zs;return t!==null&&(mn===null?mn=t:mn.push.apply(mn,t),zs=null),t}function nl(t){zs===null?zs=[t]:zs.push(t)}var Ed=J(null),Bs=null,Jr=null;function Ii(t,r,a){ee(Ed,r._currentValue),r._currentValue=a}function ei(t){t._currentValue=Ed.current,oe(Ed)}function Td(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function wd(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=h;for(var N=0;N<r.length;N++)if(w.context===r[N]){f.lanes|=a,w=f.alternate,w!==null&&(w.lanes|=a),Td(f.return,a,t),l||(v=null);break e}f=w.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),Td(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function rl(t,r,a,l){t=null;for(var h=r,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var w=h.type;En(h.pendingProps.value,v.value)||(t!==null?t.push(w):t=[w])}}else if(h===Et.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Ol):t=[Ol])}h=h.return}t!==null&&wd(r,t,a,l),r.flags|=262144}function Zu(t){for(t=t.firstContext;t!==null;){if(!En(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Hs(t){Bs=t,Jr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Wt(t){return mp(Bs,t)}function Ju(t,r){return Bs===null&&Hs(t),mp(t,r)}function mp(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Jr===null){if(t===null)throw Error(s(308));Jr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Jr=Jr.next=r;return a}var cb=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},hb=i.unstable_scheduleCallback,db=i.unstable_NormalPriority,Ot={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bd(){return{controller:new cb,data:new Map,refCount:0}}function il(t){t.refCount--,t.refCount===0&&hb(db,function(){t.controller.abort()})}var sl=null,Ad=0,Da=0,Oa=null;function fb(t,r){if(sl===null){var a=sl=[];Ad=0,Da=xf(),Oa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ad++,r.then(gp,gp),r}function gp(){if(--Ad===0&&sl!==null){Oa!==null&&(Oa.status="fulfilled");var t=sl;sl=null,Da=0,Oa=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function mb(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var pp=Q.S;Q.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&fb(t,r),pp!==null&&pp(t,r)};var Fs=J(null);function Sd(){var t=Fs.current;return t!==null?t:at.pooledCache}function ec(t,r){r===null?ee(Fs,Fs.current):ee(Fs,r.pool)}function yp(){var t=Sd();return t===null?null:{parent:Ot._currentValue,pool:t}}var al=Error(s(460)),_p=Error(s(474)),tc=Error(s(542)),Rd={then:function(){}};function vp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function nc(){}function Ep(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(nc,nc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,wp(t),t;default:if(typeof r.status=="string")r.then(nc,nc);else{if(t=at,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,wp(t),t}throw ol=r,al}}var ol=null;function Tp(){if(ol===null)throw Error(s(459));var t=ol;return ol=null,t}function wp(t){if(t===al||t===tc)throw Error(s(483))}var Ci=!1;function xd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Id(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ni(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Di(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(We&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=Yu(t),lp(t,null,a),r}return Ku(t,l,r,a),Yu(t)}function ll(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,ko(t,a)}}function Cd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=r:f=f.next=r}else h=f=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Nd=!1;function ul(){if(Nd){var t=Oa;if(t!==null)throw t}}function cl(t,r,a,l){Nd=!1;var h=t.updateQueue;Ci=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var N=w,q=N.next;N.next=null,v===null?f=q:v.next=q,v=N;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,w=Y.lastBaseUpdate,w!==v&&(w===null?Y.firstBaseUpdate=q:w.next=q,Y.lastBaseUpdate=N))}if(f!==null){var W=h.baseState;v=0,Y=q=N=null,w=f;do{var B=w.lane&-536870913,H=B!==w.lane;if(H?(Be&B)===B:(l&B)===B){B!==0&&B===Da&&(Nd=!0),Y!==null&&(Y=Y.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Se=t,Ee=w;B=r;var rt=a;switch(Ee.tag){case 1:if(Se=Ee.payload,typeof Se=="function"){W=Se.call(rt,W,B);break e}W=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ee.payload,B=typeof Se=="function"?Se.call(rt,W,B):Se,B==null)break e;W=T({},W,B);break e;case 2:Ci=!0}}B=w.callback,B!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[B]:H.push(B))}else H={lane:B,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Y===null?(q=Y=H,N=W):Y=Y.next=H,v|=B;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;H=w,w=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);Y===null&&(N=W),h.baseState=N,h.firstBaseUpdate=q,h.lastBaseUpdate=Y,f===null&&(h.shared.lanes=0),ji|=v,t.lanes=v,t.memoizedState=W}}function bp(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Ap(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)bp(a[t],r)}var Pa=J(null),rc=J(0);function Sp(t,r){t=oi,ee(rc,t),ee(Pa,r),oi=t|r.baseLanes}function Dd(){ee(rc,oi),ee(Pa,Pa.current)}function Od(){oi=rc.current,oe(Pa),oe(rc)}var Oi=0,De=null,tt=null,bt=null,ic=!1,Va=!1,Gs=!1,sc=0,hl=0,Ma=null,gb=0;function pt(){throw Error(s(321))}function Pd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!En(t[a],r[a]))return!1;return!0}function Vd(t,r,a,l,h,f){return Oi=f,De=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Q.H=t===null||t.memoizedState===null?ly:uy,Gs=!1,f=a(l,h),Gs=!1,Va&&(f=xp(r,a,l,h)),Rp(t),f}function Rp(t){Q.H=hc;var r=tt!==null&&tt.next!==null;if(Oi=0,bt=tt=De=null,ic=!1,hl=0,Ma=null,r)throw Error(s(300));t===null||Lt||(t=t.dependencies,t!==null&&Zu(t)&&(Lt=!0))}function xp(t,r,a,l){De=t;var h=0;do{if(Va&&(Ma=null),hl=0,Va=!1,25<=h)throw Error(s(301));if(h+=1,bt=tt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=wb,f=r(a,l)}while(Va);return f}function pb(){var t=Q.H,r=t.useState()[0];return r=typeof r.then=="function"?dl(r):r,t=t.useState()[0],(tt!==null?tt.memoizedState:null)!==t&&(De.flags|=1024),r}function Md(){var t=sc!==0;return sc=0,t}function kd(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Ld(t){if(ic){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}ic=!1}Oi=0,bt=tt=De=null,Va=!1,hl=sc=0,Ma=null}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?De.memoizedState=bt=t:bt=bt.next=t,bt}function At(){if(tt===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var r=bt===null?De.memoizedState:bt.next;if(r!==null)bt=r,tt=t;else{if(t===null)throw De.alternate===null?Error(s(467)):Error(s(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},bt===null?De.memoizedState=bt=t:bt=bt.next=t}return bt}function Ud(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dl(t){var r=hl;return hl+=1,Ma===null&&(Ma=[]),t=Ep(Ma,t,r),r=De,(bt===null?r.memoizedState:bt.next)===null&&(r=r.alternate,Q.H=r===null||r.memoizedState===null?ly:uy),t}function ac(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return dl(t);if(t.$$typeof===ne)return Wt(t)}throw Error(s(438,String(t)))}function jd(t){var r=null,a=De.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=De.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Ud(),De.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=D;return r.index++,a}function ti(t,r){return typeof r=="function"?r(t):r}function oc(t){var r=At();return zd(r,tt,t)}function zd(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}r.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{r=h.next;var w=v=null,N=null,q=r,Y=!1;do{var W=q.lane&-536870913;if(W!==q.lane?(Be&W)===W:(Oi&W)===W){var B=q.revertLane;if(B===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),W===Da&&(Y=!0);else if((Oi&B)===B){q=q.next,B===Da&&(Y=!0);continue}else W={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(w=N=W,v=f):N=N.next=W,De.lanes|=B,ji|=B;W=q.action,Gs&&a(f,W),f=q.hasEagerState?q.eagerState:a(f,W)}else B={lane:W,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(w=N=B,v=f):N=N.next=B,De.lanes|=W,ji|=W;q=q.next}while(q!==null&&q!==r);if(N===null?v=f:N.next=w,!En(f,t.memoizedState)&&(Lt=!0,Y&&(a=Oa,a!==null)))throw a;t.memoizedState=f,t.baseState=v,t.baseQueue=N,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function qd(t){var r=At(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=r.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=t(f,v.action),v=v.next;while(v!==h);En(f,r.memoizedState)||(Lt=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function Ip(t,r,a){var l=De,h=At(),f=Qe;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var v=!En((tt||h).memoizedState,a);v&&(h.memoizedState=a,Lt=!0),h=h.queue;var w=Dp.bind(null,l,h,t);if(fl(2048,8,w,[t]),h.getSnapshot!==r||v||bt!==null&&bt.memoizedState.tag&1){if(l.flags|=2048,ka(9,lc(),Np.bind(null,l,h,a,r),null),at===null)throw Error(s(349));f||(Oi&124)!==0||Cp(l,r,a)}return a}function Cp(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=De.updateQueue,r===null?(r=Ud(),De.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Np(t,r,a,l){r.value=a,r.getSnapshot=l,Op(r)&&Pp(t)}function Dp(t,r,a){return a(function(){Op(r)&&Pp(t)})}function Op(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!En(t,a)}catch{return!0}}function Pp(t){var r=xa(t,2);r!==null&&Rn(r,t,2)}function Bd(t){var r=dn();if(typeof t=="function"){var a=t;if(t=a(),Gs){_n(!0);try{a()}finally{_n(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:t},r}function Vp(t,r,a,l){return t.baseState=a,zd(t,tt,typeof l=="function"?l:ti)}function yb(t,r,a,l,h){if(cc(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};Q.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,Mp(r,f)):(f.next=a.next,r.pending=a.next=f)}}function Mp(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var f=Q.T,v={};Q.T=v;try{var w=a(h,l),N=Q.S;N!==null&&N(v,w),kp(t,r,w)}catch(q){Hd(t,r,q)}finally{Q.T=f}}else try{f=a(h,l),kp(t,r,f)}catch(q){Hd(t,r,q)}}function kp(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Lp(t,r,l)},function(l){return Hd(t,r,l)}):Lp(t,r,a)}function Lp(t,r,a){r.status="fulfilled",r.value=a,Up(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Mp(t,a)))}function Hd(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Up(r),r=r.next;while(r!==l)}t.action=null}function Up(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function jp(t,r){return r}function zp(t,r){if(Qe){var a=at.formState;if(a!==null){e:{var l=De;if(Qe){if(ft){t:{for(var h=ft,f=pr;h.nodeType!==8;){if(!f){h=null;break t}if(h=Wn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){ft=Wn(h.nextSibling),l=h.data==="F!";break e}}qs(l)}l=!1}l&&(r=a[0])}}return a=dn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jp,lastRenderedState:r},a.queue=l,a=sy.bind(null,De,l),l.dispatch=a,l=Bd(!1),f=Yd.bind(null,De,!1,l.queue),l=dn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=yb.bind(null,De,h,f,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function qp(t){var r=At();return Bp(r,tt,t)}function Bp(t,r,a){if(r=zd(t,r,jp)[0],t=oc(ti)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=dl(r)}catch(v){throw v===al?tc:v}else l=r;r=At();var h=r.queue,f=h.dispatch;return a!==r.memoizedState&&(De.flags|=2048,ka(9,lc(),_b.bind(null,h,a),null)),[l,f,t]}function _b(t,r){t.action=r}function Hp(t){var r=At(),a=tt;if(a!==null)return Bp(r,a,t);At(),r=r.memoizedState,a=At();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function ka(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=De.updateQueue,r===null&&(r=Ud(),De.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function lc(){return{destroy:void 0,resource:void 0}}function Fp(){return At().memoizedState}function uc(t,r,a,l){var h=dn();l=l===void 0?null:l,De.flags|=t,h.memoizedState=ka(1|r,lc(),a,l)}function fl(t,r,a,l){var h=At();l=l===void 0?null:l;var f=h.memoizedState.inst;tt!==null&&l!==null&&Pd(l,tt.memoizedState.deps)?h.memoizedState=ka(r,f,a,l):(De.flags|=t,h.memoizedState=ka(1|r,f,a,l))}function Gp(t,r){uc(8390656,8,t,r)}function Qp(t,r){fl(2048,8,t,r)}function Kp(t,r){return fl(4,2,t,r)}function Yp(t,r){return fl(4,4,t,r)}function Xp(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function $p(t,r,a){a=a!=null?a.concat([t]):null,fl(4,4,Xp.bind(null,r,t),a)}function Fd(){}function Wp(t,r){var a=At();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Pd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Zp(t,r){var a=At();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Pd(r,l[1]))return l[0];if(l=t(),Gs){_n(!0);try{t()}finally{_n(!1)}}return a.memoizedState=[l,r],l}function Gd(t,r,a){return a===void 0||(Oi&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=t_(),De.lanes|=t,ji|=t,a)}function Jp(t,r,a,l){return En(a,r)?a:Pa.current!==null?(t=Gd(t,a,l),En(t,r)||(Lt=!0),t):(Oi&42)===0?(Lt=!0,t.memoizedState=a):(t=t_(),De.lanes|=t,ji|=t,r)}function ey(t,r,a,l,h){var f=re.p;re.p=f!==0&&8>f?f:8;var v=Q.T,w={};Q.T=w,Yd(t,!1,r,a);try{var N=h(),q=Q.S;if(q!==null&&q(w,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Y=mb(N,l);ml(t,r,Y,Sn(t))}else ml(t,r,l,Sn(t))}catch(W){ml(t,r,{then:function(){},status:"rejected",reason:W},Sn())}finally{re.p=f,Q.T=v}}function vb(){}function Qd(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=ty(t).queue;ey(t,h,r,te,a===null?vb:function(){return ny(t),a(l)})}function ty(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:te},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function ny(t){var r=ty(t).next.queue;ml(t,r,{},Sn())}function Kd(){return Wt(Ol)}function ry(){return At().memoizedState}function iy(){return At().memoizedState}function Eb(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Sn();t=Ni(a);var l=Di(r,t,a);l!==null&&(Rn(l,r,a),ll(l,r,a)),r={cache:bd()},t.payload=r;return}r=r.return}}function Tb(t,r,a){var l=Sn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},cc(t)?ay(r,a):(a=fd(t,r,a,l),a!==null&&(Rn(a,t,l),oy(a,r,l)))}function sy(t,r,a){var l=Sn();ml(t,r,a,l)}function ml(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(cc(t))ay(r,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var v=r.lastRenderedState,w=f(v,a);if(h.hasEagerState=!0,h.eagerState=w,En(w,v))return Ku(t,r,h,0),at===null&&Qu(),!1}catch{}finally{}if(a=fd(t,r,h,l),a!==null)return Rn(a,t,l),oy(a,r,l),!0}return!1}function Yd(t,r,a,l){if(l={lane:2,revertLane:xf(),action:l,hasEagerState:!1,eagerState:null,next:null},cc(t)){if(r)throw Error(s(479))}else r=fd(t,a,l,2),r!==null&&Rn(r,t,2)}function cc(t){var r=t.alternate;return t===De||r!==null&&r===De}function ay(t,r){Va=ic=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function oy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,ko(t,a)}}var hc={readContext:Wt,use:ac,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt},ly={readContext:Wt,use:ac,useCallback:function(t,r){return dn().memoizedState=[t,r===void 0?null:r],t},useContext:Wt,useEffect:Gp,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,uc(4194308,4,Xp.bind(null,r,t),a)},useLayoutEffect:function(t,r){return uc(4194308,4,t,r)},useInsertionEffect:function(t,r){uc(4,2,t,r)},useMemo:function(t,r){var a=dn();r=r===void 0?null:r;var l=t();if(Gs){_n(!0);try{t()}finally{_n(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=dn();if(a!==void 0){var h=a(r);if(Gs){_n(!0);try{a(r)}finally{_n(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=Tb.bind(null,De,t),[l.memoizedState,t]},useRef:function(t){var r=dn();return t={current:t},r.memoizedState=t},useState:function(t){t=Bd(t);var r=t.queue,a=sy.bind(null,De,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Fd,useDeferredValue:function(t,r){var a=dn();return Gd(a,t,r)},useTransition:function(){var t=Bd(!1);return t=ey.bind(null,De,t.queue,!0,!1),dn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=De,h=dn();if(Qe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),at===null)throw Error(s(349));(Be&124)!==0||Cp(l,r,a)}h.memoizedState=a;var f={value:a,getSnapshot:r};return h.queue=f,Gp(Dp.bind(null,l,f,t),[t]),l.flags|=2048,ka(9,lc(),Np.bind(null,l,f,a,r),null),a},useId:function(){var t=dn(),r=at.identifierPrefix;if(Qe){var a=Zr,l=Wr;a=(l&~(1<<32-$t(l)-1)).toString(32)+a,r=""+r+"R"+a,a=sc++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=gb++,r=""+r+"r"+a.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:Kd,useFormState:zp,useActionState:zp,useOptimistic:function(t){var r=dn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Yd.bind(null,De,!0,a),a.dispatch=r,[t,r]},useMemoCache:jd,useCacheRefresh:function(){return dn().memoizedState=Eb.bind(null,De)}},uy={readContext:Wt,use:ac,useCallback:Wp,useContext:Wt,useEffect:Qp,useImperativeHandle:$p,useInsertionEffect:Kp,useLayoutEffect:Yp,useMemo:Zp,useReducer:oc,useRef:Fp,useState:function(){return oc(ti)},useDebugValue:Fd,useDeferredValue:function(t,r){var a=At();return Jp(a,tt.memoizedState,t,r)},useTransition:function(){var t=oc(ti)[0],r=At().memoizedState;return[typeof t=="boolean"?t:dl(t),r]},useSyncExternalStore:Ip,useId:ry,useHostTransitionStatus:Kd,useFormState:qp,useActionState:qp,useOptimistic:function(t,r){var a=At();return Vp(a,tt,t,r)},useMemoCache:jd,useCacheRefresh:iy},wb={readContext:Wt,use:ac,useCallback:Wp,useContext:Wt,useEffect:Qp,useImperativeHandle:$p,useInsertionEffect:Kp,useLayoutEffect:Yp,useMemo:Zp,useReducer:qd,useRef:Fp,useState:function(){return qd(ti)},useDebugValue:Fd,useDeferredValue:function(t,r){var a=At();return tt===null?Gd(a,t,r):Jp(a,tt.memoizedState,t,r)},useTransition:function(){var t=qd(ti)[0],r=At().memoizedState;return[typeof t=="boolean"?t:dl(t),r]},useSyncExternalStore:Ip,useId:ry,useHostTransitionStatus:Kd,useFormState:Hp,useActionState:Hp,useOptimistic:function(t,r){var a=At();return tt!==null?Vp(a,tt,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:jd,useCacheRefresh:iy},La=null,gl=0;function dc(t){var r=gl;return gl+=1,La===null&&(La=[]),Ep(La,t,r)}function pl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function fc(t,r){throw r.$$typeof===A?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function cy(t){var r=t._init;return r(t._payload)}function hy(t){function r(k,V){if(t){var z=k.deletions;z===null?(k.deletions=[V],k.flags|=16):z.push(V)}}function a(k,V){if(!t)return null;for(;V!==null;)r(k,V),V=V.sibling;return null}function l(k){for(var V=new Map;k!==null;)k.key!==null?V.set(k.key,k):V.set(k.index,k),k=k.sibling;return V}function h(k,V){return k=$r(k,V),k.index=0,k.sibling=null,k}function f(k,V,z){return k.index=z,t?(z=k.alternate,z!==null?(z=z.index,z<V?(k.flags|=67108866,V):z):(k.flags|=67108866,V)):(k.flags|=1048576,V)}function v(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function w(k,V,z,X){return V===null||V.tag!==6?(V=gd(z,k.mode,X),V.return=k,V):(V=h(V,z),V.return=k,V)}function N(k,V,z,X){var de=z.type;return de===U?Y(k,V,z.props.children,X,z.key):V!==null&&(V.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===R&&cy(de)===V.type)?(V=h(V,z.props),pl(V,z),V.return=k,V):(V=Xu(z.type,z.key,z.props,null,k.mode,X),pl(V,z),V.return=k,V)}function q(k,V,z,X){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=pd(z,k.mode,X),V.return=k,V):(V=h(V,z.children||[]),V.return=k,V)}function Y(k,V,z,X,de){return V===null||V.tag!==7?(V=Ls(z,k.mode,X,de),V.return=k,V):(V=h(V,z),V.return=k,V)}function W(k,V,z){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=gd(""+V,k.mode,z),V.return=k,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return z=Xu(V.type,V.key,V.props,null,k.mode,z),pl(z,V),z.return=k,z;case L:return V=pd(V,k.mode,z),V.return=k,V;case R:var X=V._init;return V=X(V._payload),W(k,V,z)}if(Pe(V)||M(V))return V=Ls(V,k.mode,z,null),V.return=k,V;if(typeof V.then=="function")return W(k,dc(V),z);if(V.$$typeof===ne)return W(k,Ju(k,V),z);fc(k,V)}return null}function B(k,V,z,X){var de=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return de!==null?null:w(k,V,""+z,X);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return z.key===de?N(k,V,z,X):null;case L:return z.key===de?q(k,V,z,X):null;case R:return de=z._init,z=de(z._payload),B(k,V,z,X)}if(Pe(z)||M(z))return de!==null?null:Y(k,V,z,X,null);if(typeof z.then=="function")return B(k,V,dc(z),X);if(z.$$typeof===ne)return B(k,V,Ju(k,z),X);fc(k,z)}return null}function H(k,V,z,X,de){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return k=k.get(z)||null,w(V,k,""+X,de);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case S:return k=k.get(X.key===null?z:X.key)||null,N(V,k,X,de);case L:return k=k.get(X.key===null?z:X.key)||null,q(V,k,X,de);case R:var Oe=X._init;return X=Oe(X._payload),H(k,V,z,X,de)}if(Pe(X)||M(X))return k=k.get(z)||null,Y(V,k,X,de,null);if(typeof X.then=="function")return H(k,V,z,dc(X),de);if(X.$$typeof===ne)return H(k,V,z,Ju(V,X),de);fc(V,X)}return null}function Se(k,V,z,X){for(var de=null,Oe=null,ge=V,Te=V=0,jt=null;ge!==null&&Te<z.length;Te++){ge.index>Te?(jt=ge,ge=null):jt=ge.sibling;var Fe=B(k,ge,z[Te],X);if(Fe===null){ge===null&&(ge=jt);break}t&&ge&&Fe.alternate===null&&r(k,ge),V=f(Fe,V,Te),Oe===null?de=Fe:Oe.sibling=Fe,Oe=Fe,ge=jt}if(Te===z.length)return a(k,ge),Qe&&js(k,Te),de;if(ge===null){for(;Te<z.length;Te++)ge=W(k,z[Te],X),ge!==null&&(V=f(ge,V,Te),Oe===null?de=ge:Oe.sibling=ge,Oe=ge);return Qe&&js(k,Te),de}for(ge=l(ge);Te<z.length;Te++)jt=H(ge,k,Te,z[Te],X),jt!==null&&(t&&jt.alternate!==null&&ge.delete(jt.key===null?Te:jt.key),V=f(jt,V,Te),Oe===null?de=jt:Oe.sibling=jt,Oe=jt);return t&&ge.forEach(function(Yi){return r(k,Yi)}),Qe&&js(k,Te),de}function Ee(k,V,z,X){if(z==null)throw Error(s(151));for(var de=null,Oe=null,ge=V,Te=V=0,jt=null,Fe=z.next();ge!==null&&!Fe.done;Te++,Fe=z.next()){ge.index>Te?(jt=ge,ge=null):jt=ge.sibling;var Yi=B(k,ge,Fe.value,X);if(Yi===null){ge===null&&(ge=jt);break}t&&ge&&Yi.alternate===null&&r(k,ge),V=f(Yi,V,Te),Oe===null?de=Yi:Oe.sibling=Yi,Oe=Yi,ge=jt}if(Fe.done)return a(k,ge),Qe&&js(k,Te),de;if(ge===null){for(;!Fe.done;Te++,Fe=z.next())Fe=W(k,Fe.value,X),Fe!==null&&(V=f(Fe,V,Te),Oe===null?de=Fe:Oe.sibling=Fe,Oe=Fe);return Qe&&js(k,Te),de}for(ge=l(ge);!Fe.done;Te++,Fe=z.next())Fe=H(ge,k,Te,Fe.value,X),Fe!==null&&(t&&Fe.alternate!==null&&ge.delete(Fe.key===null?Te:Fe.key),V=f(Fe,V,Te),Oe===null?de=Fe:Oe.sibling=Fe,Oe=Fe);return t&&ge.forEach(function(bA){return r(k,bA)}),Qe&&js(k,Te),de}function rt(k,V,z,X){if(typeof z=="object"&&z!==null&&z.type===U&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case S:e:{for(var de=z.key;V!==null;){if(V.key===de){if(de=z.type,de===U){if(V.tag===7){a(k,V.sibling),X=h(V,z.props.children),X.return=k,k=X;break e}}else if(V.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===R&&cy(de)===V.type){a(k,V.sibling),X=h(V,z.props),pl(X,z),X.return=k,k=X;break e}a(k,V);break}else r(k,V);V=V.sibling}z.type===U?(X=Ls(z.props.children,k.mode,X,z.key),X.return=k,k=X):(X=Xu(z.type,z.key,z.props,null,k.mode,X),pl(X,z),X.return=k,k=X)}return v(k);case L:e:{for(de=z.key;V!==null;){if(V.key===de)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(k,V.sibling),X=h(V,z.children||[]),X.return=k,k=X;break e}else{a(k,V);break}else r(k,V);V=V.sibling}X=pd(z,k.mode,X),X.return=k,k=X}return v(k);case R:return de=z._init,z=de(z._payload),rt(k,V,z,X)}if(Pe(z))return Se(k,V,z,X);if(M(z)){if(de=M(z),typeof de!="function")throw Error(s(150));return z=de.call(z),Ee(k,V,z,X)}if(typeof z.then=="function")return rt(k,V,dc(z),X);if(z.$$typeof===ne)return rt(k,V,Ju(k,z),X);fc(k,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,V!==null&&V.tag===6?(a(k,V.sibling),X=h(V,z),X.return=k,k=X):(a(k,V),X=gd(z,k.mode,X),X.return=k,k=X),v(k)):a(k,V)}return function(k,V,z,X){try{gl=0;var de=rt(k,V,z,X);return La=null,de}catch(ge){if(ge===al||ge===tc)throw ge;var Oe=Tn(29,ge,null,k.mode);return Oe.lanes=X,Oe.return=k,Oe}finally{}}}var Ua=hy(!0),dy=hy(!1),jn=J(null),yr=null;function Pi(t){var r=t.alternate;ee(Pt,Pt.current&1),ee(jn,t),yr===null&&(r===null||Pa.current!==null||r.memoizedState!==null)&&(yr=t)}function fy(t){if(t.tag===22){if(ee(Pt,Pt.current),ee(jn,t),yr===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(yr=t)}}else Vi()}function Vi(){ee(Pt,Pt.current),ee(jn,jn.current)}function ni(t){oe(jn),yr===t&&(yr=null),oe(Pt)}var Pt=J(0);function mc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||jf(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Xd(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var $d={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Sn(),h=Ni(l);h.payload=r,a!=null&&(h.callback=a),r=Di(t,h,l),r!==null&&(Rn(r,t,l),ll(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Sn(),h=Ni(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Di(t,h,l),r!==null&&(Rn(r,t,l),ll(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Sn(),l=Ni(a);l.tag=2,r!=null&&(l.callback=r),r=Di(t,l,a),r!==null&&(Rn(r,t,a),ll(r,t,a))}};function my(t,r,a,l,h,f,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,v):r.prototype&&r.prototype.isPureReactComponent?!Zo(a,l)||!Zo(h,f):!0}function gy(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&$d.enqueueReplaceState(r,r.state,null)}function Qs(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var gc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function py(t){gc(t)}function yy(t){console.error(t)}function _y(t){gc(t)}function pc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function vy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Wd(t,r,a){return a=Ni(a),a.tag=3,a.payload={element:null},a.callback=function(){pc(t,r)},a}function Ey(t){return t=Ni(t),t.tag=3,t}function Ty(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){vy(r,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){vy(r,a,l),typeof h!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function bb(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&rl(r,a,h,!0),a=jn.current,a!==null){switch(a.tag){case 13:return yr===null?wf():a.alternate===null&&mt===0&&(mt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Rd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Af(t,l,h)),!1;case 22:return a.flags|=65536,l===Rd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Af(t,l,h)),!1}throw Error(s(435,a.tag))}return Af(t,l,h),wf(),!1}if(Qe)return r=jn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==vd&&(t=Error(s(422),{cause:l}),nl(Mn(t,a)))):(l!==vd&&(r=Error(s(423),{cause:l}),nl(Mn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Mn(l,a),h=Wd(t.stateNode,l,h),Cd(t,h),mt!==4&&(mt=2)),!1;var f=Error(s(520),{cause:l});if(f=Mn(f,a),bl===null?bl=[f]:bl.push(f),mt!==4&&(mt=2),r===null)return!0;l=Mn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Wd(a.stateNode,l,t),Cd(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(zi===null||!zi.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Ey(h),Ty(h,t,a,l),Cd(a,h),!1}a=a.return}while(a!==null);return!1}var wy=Error(s(461)),Lt=!1;function Ht(t,r,a,l){r.child=t===null?dy(r,null,a,l):Ua(r,t.child,a,l)}function by(t,r,a,l,h){a=a.render;var f=r.ref;if("ref"in l){var v={};for(var w in l)w!=="ref"&&(v[w]=l[w])}else v=l;return Hs(r),l=Vd(t,r,a,v,f,h),w=Md(),t!==null&&!Lt?(kd(t,r,h),ri(t,r,h)):(Qe&&w&&yd(r),r.flags|=1,Ht(t,r,l,h),r.child)}function Ay(t,r,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!md(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,Sy(t,r,f,l,h)):(t=Xu(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!af(t,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:Zo,a(v,l)&&t.ref===r.ref)return ri(t,r,h)}return r.flags|=1,t=$r(f,l),t.ref=r.ref,t.return=r,r.child=t}function Sy(t,r,a,l,h){if(t!==null){var f=t.memoizedProps;if(Zo(f,l)&&t.ref===r.ref)if(Lt=!1,r.pendingProps=l=f,af(t,h))(t.flags&131072)!==0&&(Lt=!0);else return r.lanes=t.lanes,ri(t,r,h)}return Zd(t,r,a,l,h)}function Ry(t,r,a){var l=r.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=r.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;r.childLanes=f&~l}else r.childLanes=0,r.child=null;return xy(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&ec(r,f!==null?f.cachePool:null),f!==null?Sp(r,f):Dd(),fy(r);else return r.lanes=r.childLanes=536870912,xy(t,r,f!==null?f.baseLanes|a:a,a)}else f!==null?(ec(r,f.cachePool),Sp(r,f),Vi(),r.memoizedState=null):(t!==null&&ec(r,null),Dd(),Vi());return Ht(t,r,h,a),r.child}function xy(t,r,a,l){var h=Sd();return h=h===null?null:{parent:Ot._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&ec(r,null),Dd(),fy(r),t!==null&&rl(t,r,l,!0),null}function yc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Zd(t,r,a,l,h){return Hs(r),a=Vd(t,r,a,l,void 0,h),l=Md(),t!==null&&!Lt?(kd(t,r,h),ri(t,r,h)):(Qe&&l&&yd(r),r.flags|=1,Ht(t,r,a,h),r.child)}function Iy(t,r,a,l,h,f){return Hs(r),r.updateQueue=null,a=xp(r,l,a,h),Rp(t),l=Md(),t!==null&&!Lt?(kd(t,r,f),ri(t,r,f)):(Qe&&l&&yd(r),r.flags|=1,Ht(t,r,a,f),r.child)}function Cy(t,r,a,l,h){if(Hs(r),r.stateNode===null){var f=Ia,v=a.contextType;typeof v=="object"&&v!==null&&(f=Wt(v)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=$d,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},xd(r),v=a.contextType,f.context=typeof v=="object"&&v!==null?Wt(v):Ia,f.state=r.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Xd(r,a,v,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&$d.enqueueReplaceState(f,f.state,null),cl(r,l,f,h),ul(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var w=r.memoizedProps,N=Qs(a,w);f.props=N;var q=f.context,Y=a.contextType;v=Ia,typeof Y=="object"&&Y!==null&&(v=Wt(Y));var W=a.getDerivedStateFromProps;Y=typeof W=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,Y||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||q!==v)&&gy(r,f,l,v),Ci=!1;var B=r.memoizedState;f.state=B,cl(r,l,f,h),ul(),q=r.memoizedState,w||B!==q||Ci?(typeof W=="function"&&(Xd(r,a,W,l),q=r.memoizedState),(N=Ci||my(r,a,N,l,B,q,v))?(Y||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=q),f.props=l,f.state=q,f.context=v,l=N):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,Id(t,r),v=r.memoizedProps,Y=Qs(a,v),f.props=Y,W=r.pendingProps,B=f.context,q=a.contextType,N=Ia,typeof q=="object"&&q!==null&&(N=Wt(q)),w=a.getDerivedStateFromProps,(q=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==W||B!==N)&&gy(r,f,l,N),Ci=!1,B=r.memoizedState,f.state=B,cl(r,l,f,h),ul();var H=r.memoizedState;v!==W||B!==H||Ci||t!==null&&t.dependencies!==null&&Zu(t.dependencies)?(typeof w=="function"&&(Xd(r,a,w,l),H=r.memoizedState),(Y=Ci||my(r,a,Y,l,B,H,N)||t!==null&&t.dependencies!==null&&Zu(t.dependencies))?(q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,H,N),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,H,N)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=H),f.props=l,f.state=H,f.context=N,l=Y):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,yc(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=Ua(r,t.child,null,h),r.child=Ua(r,null,a,h)):Ht(t,r,a,h),r.memoizedState=f.state,t=r.child):t=ri(t,r,h),t}function Ny(t,r,a,l){return tl(),r.flags|=256,Ht(t,r,a,l),r.child}var Jd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ef(t){return{baseLanes:t,cachePool:yp()}}function tf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=zn),t}function Dy(t,r,a){var l=r.pendingProps,h=!1,f=(r.flags&128)!==0,v;if((v=f)||(v=t!==null&&t.memoizedState===null?!1:(Pt.current&2)!==0),v&&(h=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,t===null){if(Qe){if(h?Pi(r):Vi(),Qe){var w=ft,N;if(N=w){e:{for(N=w,w=pr;N.nodeType!==8;){if(!w){w=null;break e}if(N=Wn(N.nextSibling),N===null){w=null;break e}}w=N}w!==null?(r.memoizedState={dehydrated:w,treeContext:Us!==null?{id:Wr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},N=Tn(18,null,null,0),N.stateNode=w,N.return=r,r.child=N,hn=r,ft=null,N=!0):N=!1}N||qs(r)}if(w=r.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return jf(w)?r.lanes=32:r.lanes=536870912,null;ni(r)}return w=l.children,l=l.fallback,h?(Vi(),h=r.mode,w=_c({mode:"hidden",children:w},h),l=Ls(l,h,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,h=r.child,h.memoizedState=ef(a),h.childLanes=tf(t,v,a),r.memoizedState=Jd,l):(Pi(r),nf(r,w))}if(N=t.memoizedState,N!==null&&(w=N.dehydrated,w!==null)){if(f)r.flags&256?(Pi(r),r.flags&=-257,r=rf(t,r,a)):r.memoizedState!==null?(Vi(),r.child=t.child,r.flags|=128,r=null):(Vi(),h=l.fallback,w=r.mode,l=_c({mode:"visible",children:l.children},w),h=Ls(h,w,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,Ua(r,t.child,null,a),l=r.child,l.memoizedState=ef(a),l.childLanes=tf(t,v,a),r.memoizedState=Jd,r=h);else if(Pi(r),jf(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var q=v.dgst;v=q,l=Error(s(419)),l.stack="",l.digest=v,nl({value:l,source:null,stack:null}),r=rf(t,r,a)}else if(Lt||rl(t,r,a,!1),v=(a&t.childLanes)!==0,Lt||v){if(v=at,v!==null&&(l=a&-a,l=(l&42)!==0?1:Ti(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==N.retryLane))throw N.retryLane=l,xa(t,l),Rn(v,t,l),wy;w.data==="$?"||wf(),r=rf(t,r,a)}else w.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=N.treeContext,ft=Wn(w.nextSibling),hn=r,Qe=!0,zs=null,pr=!1,t!==null&&(Ln[Un++]=Wr,Ln[Un++]=Zr,Ln[Un++]=Us,Wr=t.id,Zr=t.overflow,Us=r),r=nf(r,l.children),r.flags|=4096);return r}return h?(Vi(),h=l.fallback,w=r.mode,N=t.child,q=N.sibling,l=$r(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,q!==null?h=$r(q,h):(h=Ls(h,w,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,w=t.child.memoizedState,w===null?w=ef(a):(N=w.cachePool,N!==null?(q=Ot._currentValue,N=N.parent!==q?{parent:q,pool:q}:N):N=yp(),w={baseLanes:w.baseLanes|a,cachePool:N}),h.memoizedState=w,h.childLanes=tf(t,v,a),r.memoizedState=Jd,l):(Pi(r),a=t.child,t=a.sibling,a=$r(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(v=r.deletions,v===null?(r.deletions=[t],r.flags|=16):v.push(t)),r.child=a,r.memoizedState=null,a)}function nf(t,r){return r=_c({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function _c(t,r){return t=Tn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function rf(t,r,a){return Ua(r,t.child,null,a),t=nf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Oy(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Td(t.return,r,a)}function sf(t,r,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function Py(t,r,a){var l=r.pendingProps,h=l.revealOrder,f=l.tail;if(Ht(t,r,l.children,a),l=Pt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Oy(t,a,r);else if(t.tag===19)Oy(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ee(Pt,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&mc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),sf(r,!1,h,a,f);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&mc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}sf(r,!0,a,null,f);break;case"together":sf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ri(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),ji|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(rl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=$r(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=$r(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function af(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Zu(t)))}function Ab(t,r,a){switch(r.tag){case 3:Je(r,r.stateNode.containerInfo),Ii(r,Ot,t.memoizedState.cache),tl();break;case 27:case 5:ir(r);break;case 4:Je(r,r.stateNode.containerInfo);break;case 10:Ii(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Pi(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Dy(t,r,a):(Pi(r),t=ri(t,r,a),t!==null?t.sibling:null);Pi(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(rl(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return Py(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ee(Pt,Pt.current),l)break;return null;case 22:case 23:return r.lanes=0,Ry(t,r,a);case 24:Ii(r,Ot,t.memoizedState.cache)}return ri(t,r,a)}function Vy(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Lt=!0;else{if(!af(t,a)&&(r.flags&128)===0)return Lt=!1,Ab(t,r,a);Lt=(t.flags&131072)!==0}else Lt=!1,Qe&&(r.flags&1048576)!==0&&cp(r,Wu,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")md(l)?(t=Qs(l,t),r.tag=1,r=Cy(null,r,l,t,a)):(r.tag=0,r=Zd(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===me){r.tag=11,r=by(null,r,l,t,a);break e}else if(h===C){r.tag=14,r=Ay(null,r,l,t,a);break e}}throw r=ke(l)||l,Error(s(306,r,""))}}return r;case 0:return Zd(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=Qs(l,r.pendingProps),Cy(t,r,l,h,a);case 3:e:{if(Je(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;h=f.element,Id(t,r),cl(r,l,null,a);var v=r.memoizedState;if(l=v.cache,Ii(r,Ot,l),l!==f.cache&&wd(r,[Ot],a,!0),ul(),l=v.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=Ny(t,r,l,a);break e}else if(l!==h){h=Mn(Error(s(424)),r),nl(h),r=Ny(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ft=Wn(t.firstChild),hn=r,Qe=!0,zs=null,pr=!0,a=dy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(tl(),l===h){r=ri(t,r,a);break e}Ht(t,r,l,a)}r=r.child}return r;case 26:return yc(t,r),t===null?(a=U_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Qe||(a=r.type,t=r.pendingProps,l=Oc(we.current).createElement(a),l[Ct]=r,l[Tt]=t,Gt(l,a,t),gt(l),r.stateNode=l):r.memoizedState=U_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ir(r),t===null&&Qe&&(l=r.stateNode=M_(r.type,r.pendingProps,we.current),hn=r,pr=!0,h=ft,Hi(r.type)?(zf=h,ft=Wn(l.firstChild)):ft=h),Ht(t,r,r.pendingProps.children,a),yc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Qe&&((h=l=ft)&&(l=Zb(l,r.type,r.pendingProps,pr),l!==null?(r.stateNode=l,hn=r,ft=Wn(l.firstChild),pr=!1,h=!0):h=!1),h||qs(r)),ir(r),h=r.type,f=r.pendingProps,v=t!==null?t.memoizedProps:null,l=f.children,kf(h,f)?l=null:v!==null&&kf(h,v)&&(r.flags|=32),r.memoizedState!==null&&(h=Vd(t,r,pb,null,null,a),Ol._currentValue=h),yc(t,r),Ht(t,r,l,a),r.child;case 6:return t===null&&Qe&&((t=a=ft)&&(a=Jb(a,r.pendingProps,pr),a!==null?(r.stateNode=a,hn=r,ft=null,t=!0):t=!1),t||qs(r)),null;case 13:return Dy(t,r,a);case 4:return Je(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Ua(r,null,l,a):Ht(t,r,l,a),r.child;case 11:return by(t,r,r.type,r.pendingProps,a);case 7:return Ht(t,r,r.pendingProps,a),r.child;case 8:return Ht(t,r,r.pendingProps.children,a),r.child;case 12:return Ht(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Ii(r,r.type,l.value),Ht(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Hs(r),h=Wt(h),l=l(h),r.flags|=1,Ht(t,r,l,a),r.child;case 14:return Ay(t,r,r.type,r.pendingProps,a);case 15:return Sy(t,r,r.type,r.pendingProps,a);case 19:return Py(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=_c(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=$r(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return Ry(t,r,a);case 24:return Hs(r),l=Wt(Ot),t===null?(h=Sd(),h===null&&(h=at,f=bd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),r.memoizedState={parent:l,cache:h},xd(r),Ii(r,Ot,h)):((t.lanes&a)!==0&&(Id(t,r),cl(r,null,null,a),ul()),h=t.memoizedState,f=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Ii(r,Ot,l)):(l=f.cache,Ii(r,Ot,l),l!==h.cache&&wd(r,[Ot],a,!0))),Ht(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ii(t){t.flags|=4}function My(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!H_(r)){if(r=jn.current,r!==null&&((Be&4194048)===Be?yr!==null:(Be&62914560)!==Be&&(Be&536870912)===0||r!==yr))throw ol=Rd,_p;t.flags|=8192}}function vc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Vo():536870912,t.lanes|=r,Ba|=r)}function yl(t,r){if(!Qe)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ht(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function Sb(t,r,a){var l=r.pendingProps;switch(_d(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(r),null;case 1:return ht(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ei(Ot),Cn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(el(r)?ii(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,fp())),ht(r),null;case 26:return a=r.memoizedState,t===null?(ii(r),a!==null?(ht(r),My(r,a)):(ht(r),r.flags&=-16777217)):a?a!==t.memoizedState?(ii(r),ht(r),My(r,a)):(ht(r),r.flags&=-16777217):(t.memoizedProps!==l&&ii(r),ht(r),r.flags&=-16777217),null;case 27:Gn(r),a=we.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&ii(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ht(r),null}t=pe.current,el(r)?hp(r):(t=M_(h,l,a),r.stateNode=t,ii(r))}return ht(r),null;case 5:if(Gn(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&ii(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ht(r),null}if(t=pe.current,el(r))hp(r);else{switch(h=Oc(we.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Ct]=r,t[Tt]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(Gt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ii(r)}}return ht(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&ii(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=we.current,el(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=hn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Ct]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||I_(t.nodeValue,a)),t||qs(r)}else t=Oc(t).createTextNode(l),t[Ct]=r,r.stateNode=t}return ht(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=el(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ct]=r}else tl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ht(r),h=!1}else h=fp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(ni(r),r):(ni(r),null)}if(ni(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),vc(r,r.updateQueue),ht(r),null;case 4:return Cn(),t===null&&Df(r.stateNode.containerInfo),ht(r),null;case 10:return ei(r.type),ht(r),null;case 19:if(oe(Pt),h=r.memoizedState,h===null)return ht(r),null;if(l=(r.flags&128)!==0,f=h.rendering,f===null)if(l)yl(h,!1);else{if(mt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=mc(t),f!==null){for(r.flags|=128,yl(h,!1),t=f.updateQueue,r.updateQueue=t,vc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)up(a,t),a=a.sibling;return ee(Pt,Pt.current&1|2),r.child}t=t.sibling}h.tail!==null&&on()>wc&&(r.flags|=128,l=!0,yl(h,!1),r.lanes=4194304)}else{if(!l)if(t=mc(f),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,vc(r,t),yl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Qe)return ht(r),null}else 2*on()-h.renderingStartTime>wc&&a!==536870912&&(r.flags|=128,l=!0,yl(h,!1),r.lanes=4194304);h.isBackwards?(f.sibling=r.child,r.child=f):(t=h.last,t!==null?t.sibling=f:r.child=f,h.last=f)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=on(),r.sibling=null,t=Pt.current,ee(Pt,l?t&1|2:t&1),r):(ht(r),null);case 22:case 23:return ni(r),Od(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(ht(r),r.subtreeFlags&6&&(r.flags|=8192)):ht(r),a=r.updateQueue,a!==null&&vc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&oe(Fs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ei(Ot),ht(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function Rb(t,r){switch(_d(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ei(Ot),Cn(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Gn(r),null;case 13:if(ni(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));tl()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return oe(Pt),null;case 4:return Cn(),null;case 10:return ei(r.type),null;case 22:case 23:return ni(r),Od(),t!==null&&oe(Fs),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ei(Ot),null;case 25:return null;default:return null}}function ky(t,r){switch(_d(r),r.tag){case 3:ei(Ot),Cn();break;case 26:case 27:case 5:Gn(r);break;case 4:Cn();break;case 13:ni(r);break;case 19:oe(Pt);break;case 10:ei(r.type);break;case 22:case 23:ni(r),Od(),t!==null&&oe(Fs);break;case 24:ei(Ot)}}function _l(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,v=a.inst;l=f(),v.destroy=l}a=a.next}while(a!==h)}}catch(w){it(r,r.return,w)}}function Mi(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var v=l.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,h=r;var N=a,q=w;try{q()}catch(Y){it(h,N,Y)}}}l=l.next}while(l!==f)}}catch(Y){it(r,r.return,Y)}}function Ly(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Ap(r,a)}catch(l){it(t,t.return,l)}}}function Uy(t,r,a){a.props=Qs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){it(t,r,l)}}function vl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){it(t,r,h)}}function _r(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){it(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){it(t,r,h)}else a.current=null}function jy(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){it(t,t.return,h)}}function of(t,r,a){try{var l=t.stateNode;Kb(l,t.type,a,r),l[Tt]=r}catch(h){it(t,t.return,h)}}function zy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Hi(t.type)||t.tag===4}function lf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Hi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Dc));else if(l!==4&&(l===27&&Hi(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(uf(t,r,a),t=t.sibling;t!==null;)uf(t,r,a),t=t.sibling}function Ec(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Hi(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Ec(t,r,a),t=t.sibling;t!==null;)Ec(t,r,a),t=t.sibling}function qy(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Gt(r,l,a),r[Ct]=t,r[Tt]=a}catch(f){it(t,t.return,f)}}var si=!1,yt=!1,cf=!1,By=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function xb(t,r){if(t=t.containerInfo,Vf=Uc,t=Jg(t),od(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,w=-1,N=-1,q=0,Y=0,W=t,B=null;t:for(;;){for(var H;W!==a||h!==0&&W.nodeType!==3||(w=v+h),W!==f||l!==0&&W.nodeType!==3||(N=v+l),W.nodeType===3&&(v+=W.nodeValue.length),(H=W.firstChild)!==null;)B=W,W=H;for(;;){if(W===t)break t;if(B===a&&++q===h&&(w=v),B===f&&++Y===l&&(N=v),(H=W.nextSibling)!==null)break;W=B,B=W.parentNode}W=H}a=w===-1||N===-1?null:{start:w,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Mf={focusedElem:t,selectionRange:a},Uc=!1,Ut=r;Ut!==null;)if(r=Ut,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Ut=t;else for(;Ut!==null;){switch(r=Ut,f=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Se=Qs(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Se,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ee){it(a,a.return,Ee)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Uf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Uf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Ut=t;break}Ut=r.return}}function Hy(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ki(t,a),l&4&&_l(5,a);break;case 1:if(ki(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(v){it(a,a.return,v)}else{var h=Qs(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(v){it(a,a.return,v)}}l&64&&Ly(a),l&512&&vl(a,a.return);break;case 3:if(ki(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Ap(t,r)}catch(v){it(a,a.return,v)}}break;case 27:r===null&&l&4&&qy(a);case 26:case 5:ki(t,a),r===null&&l&4&&jy(a),l&512&&vl(a,a.return);break;case 12:ki(t,a);break;case 13:ki(t,a),l&4&&Qy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=kb.bind(null,a),eA(t,a))));break;case 22:if(l=a.memoizedState!==null||si,!l){r=r!==null&&r.memoizedState!==null||yt,h=si;var f=yt;si=l,(yt=r)&&!f?Li(t,a,(a.subtreeFlags&8772)!==0):ki(t,a),si=h,yt=f}break;case 30:break;default:ki(t,a)}}function Fy(t){var r=t.alternate;r!==null&&(t.alternate=null,Fy(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ai(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ct=null,fn=!1;function ai(t,r,a){for(a=a.child;a!==null;)Gy(t,r,a),a=a.sibling}function Gy(t,r,a){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(Xe,a)}catch{}switch(a.tag){case 26:yt||_r(a,r),ai(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:yt||_r(a,r);var l=ct,h=fn;Hi(a.type)&&(ct=a.stateNode,fn=!1),ai(t,r,a),Il(a.stateNode),ct=l,fn=h;break;case 5:yt||_r(a,r);case 6:if(l=ct,h=fn,ct=null,ai(t,r,a),ct=l,fn=h,ct!==null)if(fn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(a.stateNode)}catch(f){it(a,r,f)}else try{ct.removeChild(a.stateNode)}catch(f){it(a,r,f)}break;case 18:ct!==null&&(fn?(t=ct,P_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),kl(t)):P_(ct,a.stateNode));break;case 4:l=ct,h=fn,ct=a.stateNode.containerInfo,fn=!0,ai(t,r,a),ct=l,fn=h;break;case 0:case 11:case 14:case 15:yt||Mi(2,a,r),yt||Mi(4,a,r),ai(t,r,a);break;case 1:yt||(_r(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Uy(a,r,l)),ai(t,r,a);break;case 21:ai(t,r,a);break;case 22:yt=(l=yt)||a.memoizedState!==null,ai(t,r,a),yt=l;break;default:ai(t,r,a)}}function Qy(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{kl(t)}catch(a){it(r,r.return,a)}}function Ib(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new By),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new By),r;default:throw Error(s(435,t.tag))}}function hf(t,r){var a=Ib(t);r.forEach(function(l){var h=Lb.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function wn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,v=r,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(Hi(w.type)){ct=w.stateNode,fn=!1;break e}break;case 5:ct=w.stateNode,fn=!1;break e;case 3:case 4:ct=w.stateNode.containerInfo,fn=!0;break e}w=w.return}if(ct===null)throw Error(s(160));Gy(f,v,h),ct=null,fn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Ky(r,t),r=r.sibling}var $n=null;function Ky(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:wn(r,t),bn(t),l&4&&(Mi(3,t,t.return),_l(3,t),Mi(5,t,t.return));break;case 1:wn(r,t),bn(t),l&512&&(yt||a===null||_r(a,a.return)),l&64&&si&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=$n;if(wn(r,t),bn(t),l&512&&(yt||a===null||_r(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Ts]||f[Ct]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Gt(f,l,a),f[Ct]=t,gt(f),l=f;break e;case"link":var v=q_("link","href",h).get(l+(a.href||""));if(v){for(var w=0;w<v.length;w++)if(f=v[w],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(w,1);break t}}f=h.createElement(l),Gt(f,l,a),h.head.appendChild(f);break;case"meta":if(v=q_("meta","content",h).get(l+(a.content||""))){for(w=0;w<v.length;w++)if(f=v[w],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(w,1);break t}}f=h.createElement(l),Gt(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[Ct]=t,gt(f),l=f}t.stateNode=l}else B_(h,t.type,t.stateNode);else t.stateNode=z_(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?B_(h,t.type,t.stateNode):z_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&of(t,t.memoizedProps,a.memoizedProps)}break;case 27:wn(r,t),bn(t),l&512&&(yt||a===null||_r(a,a.return)),a!==null&&l&4&&of(t,t.memoizedProps,a.memoizedProps);break;case 5:if(wn(r,t),bn(t),l&512&&(yt||a===null||_r(a,a.return)),t.flags&32){h=t.stateNode;try{Dn(h,"")}catch(H){it(t,t.return,H)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,of(t,h,a!==null?a.memoizedProps:h)),l&1024&&(cf=!0);break;case 6:if(wn(r,t),bn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(H){it(t,t.return,H)}}break;case 3:if(Mc=null,h=$n,$n=Pc(r.containerInfo),wn(r,t),$n=h,bn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{kl(r.containerInfo)}catch(H){it(t,t.return,H)}cf&&(cf=!1,Yy(t));break;case 4:l=$n,$n=Pc(t.stateNode.containerInfo),wn(r,t),bn(t),$n=l;break;case 12:wn(r,t),bn(t);break;case 13:wn(r,t),bn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(yf=on()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,hf(t,l)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,q=si,Y=yt;if(si=q||h,yt=Y||N,wn(r,t),yt=Y,si=q,bn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||N||si||yt||Ks(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){N=a=r;try{if(f=N.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=N.stateNode;var W=N.memoizedProps.style,B=W!=null&&W.hasOwnProperty("display")?W.display:null;w.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(H){it(N,N.return,H)}}}else if(r.tag===6){if(a===null){N=r;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(H){it(N,N.return,H)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,hf(t,a))));break;case 19:wn(r,t),bn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,hf(t,l)));break;case 30:break;case 21:break;default:wn(r,t),bn(t)}}function bn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(zy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=lf(t);Ec(t,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(Dn(v,""),a.flags&=-33);var w=lf(t);Ec(t,w,v);break;case 3:case 4:var N=a.stateNode.containerInfo,q=lf(t);uf(t,q,N);break;default:throw Error(s(161))}}catch(Y){it(t,t.return,Y)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Yy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Yy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function ki(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Hy(t,r.alternate,r),r=r.sibling}function Ks(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Mi(4,r,r.return),Ks(r);break;case 1:_r(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Uy(r,r.return,a),Ks(r);break;case 27:Il(r.stateNode);case 26:case 5:_r(r,r.return),Ks(r);break;case 22:r.memoizedState===null&&Ks(r);break;case 30:Ks(r);break;default:Ks(r)}t=t.sibling}}function Li(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,f=r,v=f.flags;switch(f.tag){case 0:case 11:case 15:Li(h,f,a),_l(4,f);break;case 1:if(Li(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){it(l,l.return,q)}if(l=f,h=l.updateQueue,h!==null){var w=l.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)bp(N[h],w)}catch(q){it(l,l.return,q)}}a&&v&64&&Ly(f),vl(f,f.return);break;case 27:qy(f);case 26:case 5:Li(h,f,a),a&&l===null&&v&4&&jy(f),vl(f,f.return);break;case 12:Li(h,f,a);break;case 13:Li(h,f,a),a&&v&4&&Qy(h,f);break;case 22:f.memoizedState===null&&Li(h,f,a),vl(f,f.return);break;case 30:break;default:Li(h,f,a)}r=r.sibling}}function df(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&il(a))}function ff(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&il(t))}function vr(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Xy(t,r,a,l),r=r.sibling}function Xy(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:vr(t,r,a,l),h&2048&&_l(9,r);break;case 1:vr(t,r,a,l);break;case 3:vr(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&il(t)));break;case 12:if(h&2048){vr(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,v=f.id,w=f.onPostCommit;typeof w=="function"&&w(v,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){it(r,r.return,N)}}else vr(t,r,a,l);break;case 13:vr(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,v=r.alternate,r.memoizedState!==null?f._visibility&2?vr(t,r,a,l):El(t,r):f._visibility&2?vr(t,r,a,l):(f._visibility|=2,ja(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&df(v,r);break;case 24:vr(t,r,a,l),h&2048&&ff(r.alternate,r);break;default:vr(t,r,a,l)}}function ja(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var f=t,v=r,w=a,N=l,q=v.flags;switch(v.tag){case 0:case 11:case 15:ja(f,v,w,N,h),_l(8,v);break;case 23:break;case 22:var Y=v.stateNode;v.memoizedState!==null?Y._visibility&2?ja(f,v,w,N,h):El(f,v):(Y._visibility|=2,ja(f,v,w,N,h)),h&&q&2048&&df(v.alternate,v);break;case 24:ja(f,v,w,N,h),h&&q&2048&&ff(v.alternate,v);break;default:ja(f,v,w,N,h)}r=r.sibling}}function El(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:El(a,l),h&2048&&df(l.alternate,l);break;case 24:El(a,l),h&2048&&ff(l.alternate,l);break;default:El(a,l)}r=r.sibling}}var Tl=8192;function za(t){if(t.subtreeFlags&Tl)for(t=t.child;t!==null;)$y(t),t=t.sibling}function $y(t){switch(t.tag){case 26:za(t),t.flags&Tl&&t.memoizedState!==null&&fA($n,t.memoizedState,t.memoizedProps);break;case 5:za(t);break;case 3:case 4:var r=$n;$n=Pc(t.stateNode.containerInfo),za(t),$n=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Tl,Tl=16777216,za(t),Tl=r):za(t));break;default:za(t)}}function Wy(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function wl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Ut=l,Jy(l,t)}Wy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zy(t),t=t.sibling}function Zy(t){switch(t.tag){case 0:case 11:case 15:wl(t),t.flags&2048&&Mi(9,t,t.return);break;case 3:wl(t);break;case 12:wl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Tc(t)):wl(t);break;default:wl(t)}}function Tc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Ut=l,Jy(l,t)}Wy(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Mi(8,r,r.return),Tc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Tc(r));break;default:Tc(r)}t=t.sibling}}function Jy(t,r){for(;Ut!==null;){var a=Ut;switch(a.tag){case 0:case 11:case 15:Mi(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:il(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ut=l;else e:for(a=t;Ut!==null;){l=Ut;var h=l.sibling,f=l.return;if(Fy(l),l===a){Ut=null;break e}if(h!==null){h.return=f,Ut=h;break e}Ut=f}}}var Cb={getCacheForType:function(t){var r=Wt(Ot),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},Nb=typeof WeakMap=="function"?WeakMap:Map,We=0,at=null,Ve=null,Be=0,Ze=0,An=null,Ui=!1,qa=!1,mf=!1,oi=0,mt=0,ji=0,Ys=0,gf=0,zn=0,Ba=0,bl=null,mn=null,pf=!1,yf=0,wc=1/0,bc=null,zi=null,Ft=0,qi=null,Ha=null,Fa=0,_f=0,vf=null,e_=null,Al=0,Ef=null;function Sn(){if((We&2)!==0&&Be!==0)return Be&-Be;if(Q.T!==null){var t=Da;return t!==0?t:xf()}return wi()}function t_(){zn===0&&(zn=(Be&536870912)===0||Qe?Po():536870912);var t=jn.current;return t!==null&&(t.flags|=32),zn}function Rn(t,r,a){(t===at&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)&&(Ga(t,0),Bi(t,Be,zn,!1)),jr(t,a),((We&2)===0||t!==at)&&(t===at&&((We&2)===0&&(Ys|=a),mt===4&&Bi(t,Be,zn,!1)),Er(t))}function n_(t,r,a){if((We&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||Es(t,r),h=l?Pb(t,r):bf(t,r,!0),f=l;do{if(h===0){qa&&!l&&Bi(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!Db(a)){h=bf(t,r,!1),f=!1;continue}if(h===2){if(f=r,t.errorRecoveryDisabledLanes&f)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var w=t;h=bl;var N=w.current.memoizedState.isDehydrated;if(N&&(Ga(w,v).flags|=256),v=bf(w,v,!1),v!==2){if(mf&&!N){w.errorRecoveryDisabledLanes|=f,Ys|=f,h=4;break e}f=mn,mn=h,f!==null&&(mn===null?mn=f:mn.push.apply(mn,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){Ga(t,0),Bi(t,r,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Bi(l,r,zn,!Ui);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=yf+300-on(),10<h)){if(Bi(l,r,zn,!Ui),la(l,0,!0)!==0)break e;l.timeoutHandle=D_(r_.bind(null,l,a,mn,bc,pf,r,zn,Ys,Ba,Ui,f,2,-0,0),h);break e}r_(l,a,mn,bc,pf,r,zn,Ys,Ba,Ui,f,0,-0,0)}}break}while(!0);Er(t)}function r_(t,r,a,l,h,f,v,w,N,q,Y,W,B,H){if(t.timeoutHandle=-1,W=r.subtreeFlags,(W&8192||(W&16785408)===16785408)&&(Dl={stylesheets:null,count:0,unsuspend:dA},$y(r),W=mA(),W!==null)){t.cancelPendingCommit=W(c_.bind(null,t,r,f,a,l,h,v,w,N,Y,1,B,H)),Bi(t,f,v,!q);return}c_(t,r,f,a,l,h,v,w,N)}function Db(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!En(f(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Bi(t,r,a,l){r&=~gf,r&=~Ys,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var f=31-$t(h),v=1<<f;l[f]=-1,h&=~v}a!==0&&sr(t,a,r)}function Ac(){return(We&6)===0?(Sl(0),!1):!0}function Tf(){if(Ve!==null){if(Ze===0)var t=Ve.return;else t=Ve,Jr=Bs=null,Ld(t),La=null,gl=0,t=Ve;for(;t!==null;)ky(t.alternate,t),t=t.return;Ve=null}}function Ga(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Xb(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Tf(),at=t,Ve=a=$r(t.current,null),Be=r,Ze=0,An=null,Ui=!1,qa=Es(t,r),mf=!1,Ba=zn=gf=Ys=ji=mt=0,mn=bl=null,pf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-$t(l),f=1<<h;r|=t[h],l&=~f}return oi=r,Qu(),a}function i_(t,r){De=null,Q.H=hc,r===al||r===tc?(r=Tp(),Ze=3):r===_p?(r=Tp(),Ze=4):Ze=r===wy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,An=r,Ve===null&&(mt=1,pc(t,Mn(r,t.current)))}function s_(){var t=Q.H;return Q.H=hc,t===null?hc:t}function a_(){var t=Q.A;return Q.A=Cb,t}function wf(){mt=4,Ui||(Be&4194048)!==Be&&jn.current!==null||(qa=!0),(ji&134217727)===0&&(Ys&134217727)===0||at===null||Bi(at,Be,zn,!1)}function bf(t,r,a){var l=We;We|=2;var h=s_(),f=a_();(at!==t||Be!==r)&&(bc=null,Ga(t,r)),r=!1;var v=mt;e:do try{if(Ze!==0&&Ve!==null){var w=Ve,N=An;switch(Ze){case 8:Tf(),v=6;break e;case 3:case 2:case 9:case 6:jn.current===null&&(r=!0);var q=Ze;if(Ze=0,An=null,Qa(t,w,N,q),a&&qa){v=0;break e}break;default:q=Ze,Ze=0,An=null,Qa(t,w,N,q)}}Ob(),v=mt;break}catch(Y){i_(t,Y)}while(!0);return r&&t.shellSuspendCounter++,Jr=Bs=null,We=l,Q.H=h,Q.A=f,Ve===null&&(at=null,Be=0,Qu()),v}function Ob(){for(;Ve!==null;)o_(Ve)}function Pb(t,r){var a=We;We|=2;var l=s_(),h=a_();at!==t||Be!==r?(bc=null,wc=on()+500,Ga(t,r)):qa=Es(t,r);e:do try{if(Ze!==0&&Ve!==null){r=Ve;var f=An;t:switch(Ze){case 1:Ze=0,An=null,Qa(t,r,f,1);break;case 2:case 9:if(vp(f)){Ze=0,An=null,l_(r);break}r=function(){Ze!==2&&Ze!==9||at!==t||(Ze=7),Er(t)},f.then(r,r);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:vp(f)?(Ze=0,An=null,l_(r)):(Ze=0,An=null,Qa(t,r,f,7));break;case 5:var v=null;switch(Ve.tag){case 26:v=Ve.memoizedState;case 5:case 27:var w=Ve;if(!v||H_(v)){Ze=0,An=null;var N=w.sibling;if(N!==null)Ve=N;else{var q=w.return;q!==null?(Ve=q,Sc(q)):Ve=null}break t}}Ze=0,An=null,Qa(t,r,f,5);break;case 6:Ze=0,An=null,Qa(t,r,f,6);break;case 8:Tf(),mt=6;break e;default:throw Error(s(462))}}Vb();break}catch(Y){i_(t,Y)}while(!0);return Jr=Bs=null,Q.H=l,Q.A=h,We=a,Ve!==null?0:(at=null,Be=0,Qu(),mt)}function Vb(){for(;Ve!==null&&!gs();)o_(Ve)}function o_(t){var r=Vy(t.alternate,t,oi);t.memoizedProps=t.pendingProps,r===null?Sc(t):Ve=r}function l_(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Iy(a,r,r.pendingProps,r.type,void 0,Be);break;case 11:r=Iy(a,r,r.pendingProps,r.type.render,r.ref,Be);break;case 5:Ld(r);default:ky(a,r),r=Ve=up(r,oi),r=Vy(a,r,oi)}t.memoizedProps=t.pendingProps,r===null?Sc(t):Ve=r}function Qa(t,r,a,l){Jr=Bs=null,Ld(r),La=null,gl=0;var h=r.return;try{if(bb(t,h,r,a,Be)){mt=1,pc(t,Mn(a,t.current)),Ve=null;return}}catch(f){if(h!==null)throw Ve=h,f;mt=1,pc(t,Mn(a,t.current)),Ve=null;return}r.flags&32768?(Qe||l===1?t=!0:qa||(Be&536870912)!==0?t=!1:(Ui=t=!0,(l===2||l===9||l===3||l===6)&&(l=jn.current,l!==null&&l.tag===13&&(l.flags|=16384))),u_(r,t)):Sc(r)}function Sc(t){var r=t;do{if((r.flags&32768)!==0){u_(r,Ui);return}t=r.return;var a=Sb(r.alternate,r,oi);if(a!==null){Ve=a;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=t}while(r!==null);mt===0&&(mt=5)}function u_(t,r){do{var a=Rb(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);mt=6,Ve=null}function c_(t,r,a,l,h,f,v,w,N){t.cancelPendingCommit=null;do Rc();while(Ft!==0);if((We&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=dd,Mo(t,a,f,v,w,N),t===at&&(Ve=at=null,Be=0),Ha=r,qi=t,Fa=a,_f=f,vf=h,e_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Ub(Lr,function(){return g_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=re.p,re.p=2,v=We,We|=4;try{xb(t,r,a)}finally{We=v,re.p=h,Q.T=l}}Ft=1,h_(),d_(),f_()}}function h_(){if(Ft===1){Ft=0;var t=qi,r=Ha,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=re.p;re.p=2;var h=We;We|=4;try{Ky(r,t);var f=Mf,v=Jg(t.containerInfo),w=f.focusedElem,N=f.selectionRange;if(v!==w&&w&&w.ownerDocument&&Zg(w.ownerDocument.documentElement,w)){if(N!==null&&od(w)){var q=N.start,Y=N.end;if(Y===void 0&&(Y=q),"selectionStart"in w)w.selectionStart=q,w.selectionEnd=Math.min(Y,w.value.length);else{var W=w.ownerDocument||document,B=W&&W.defaultView||window;if(B.getSelection){var H=B.getSelection(),Se=w.textContent.length,Ee=Math.min(N.start,Se),rt=N.end===void 0?Ee:Math.min(N.end,Se);!H.extend&&Ee>rt&&(v=rt,rt=Ee,Ee=v);var k=Wg(w,Ee),V=Wg(w,rt);if(k&&V&&(H.rangeCount!==1||H.anchorNode!==k.node||H.anchorOffset!==k.offset||H.focusNode!==V.node||H.focusOffset!==V.offset)){var z=W.createRange();z.setStart(k.node,k.offset),H.removeAllRanges(),Ee>rt?(H.addRange(z),H.extend(V.node,V.offset)):(z.setEnd(V.node,V.offset),H.addRange(z))}}}}for(W=[],H=w;H=H.parentNode;)H.nodeType===1&&W.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<W.length;w++){var X=W[w];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Uc=!!Vf,Mf=Vf=null}finally{We=h,re.p=l,Q.T=a}}t.current=r,Ft=2}}function d_(){if(Ft===2){Ft=0;var t=qi,r=Ha,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=re.p;re.p=2;var h=We;We|=4;try{Hy(t,r.alternate,r)}finally{We=h,re.p=l,Q.T=a}}Ft=3}}function f_(){if(Ft===4||Ft===3){Ft=0,oa();var t=qi,r=Ha,a=Fa,l=e_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ft=5:(Ft=0,Ha=qi=null,m_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(zi=null),ua(a),r=r.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(Xe,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=Q.T,h=re.p,re.p=2,Q.T=null;try{for(var f=t.onRecoverableError,v=0;v<l.length;v++){var w=l[v];f(w.value,{componentStack:w.stack})}}finally{Q.T=r,re.p=h}}(Fa&3)!==0&&Rc(),Er(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Ef?Al++:(Al=0,Ef=t):Al=0,Sl(0)}}function m_(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,il(r)))}function Rc(t){return h_(),d_(),f_(),g_()}function g_(){if(Ft!==5)return!1;var t=qi,r=_f;_f=0;var a=ua(Fa),l=Q.T,h=re.p;try{re.p=32>a?32:a,Q.T=null,a=vf,vf=null;var f=qi,v=Fa;if(Ft=0,Ha=qi=null,Fa=0,(We&6)!==0)throw Error(s(331));var w=We;if(We|=4,Zy(f.current),Xy(f,f.current,v,a),We=w,Sl(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(Xe,f)}catch{}return!0}finally{re.p=h,Q.T=l,m_(t,r)}}function p_(t,r,a){r=Mn(a,r),r=Wd(t.stateNode,r,2),t=Di(t,r,2),t!==null&&(jr(t,2),Er(t))}function it(t,r,a){if(t.tag===3)p_(t,t,a);else for(;r!==null;){if(r.tag===3){p_(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(zi===null||!zi.has(l))){t=Mn(a,t),a=Ey(2),l=Di(r,a,2),l!==null&&(Ty(a,l,r,t),jr(l,2),Er(l));break}}r=r.return}}function Af(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Nb;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(mf=!0,h.add(a),t=Mb.bind(null,t,r,a),r.then(t,t))}function Mb(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,at===t&&(Be&a)===a&&(mt===4||mt===3&&(Be&62914560)===Be&&300>on()-yf?(We&2)===0&&Ga(t,0):gf|=a,Ba===Be&&(Ba=0)),Er(t)}function y_(t,r){r===0&&(r=Vo()),t=xa(t,r),t!==null&&(jr(t,r),Er(t))}function kb(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),y_(t,a)}function Lb(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),y_(t,a)}function Ub(t,r){return Vr(t,r)}var xc=null,Ka=null,Sf=!1,Ic=!1,Rf=!1,Xs=0;function Er(t){t!==Ka&&t.next===null&&(Ka===null?xc=Ka=t:Ka=Ka.next=t),Ic=!0,Sf||(Sf=!0,zb())}function Sl(t,r){if(!Rf&&Ic){Rf=!0;do for(var a=!1,l=xc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var v=l.suspendedLanes,w=l.pingedLanes;f=(1<<31-$t(42|t)+1)-1,f&=h&~(v&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,T_(l,f))}else f=Be,f=la(l,l===at?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Es(l,f)||(a=!0,T_(l,f));l=l.next}while(a);Rf=!1}}function jb(){__()}function __(){Ic=Sf=!1;var t=0;Xs!==0&&(Yb()&&(t=Xs),Xs=0);for(var r=on(),a=null,l=xc;l!==null;){var h=l.next,f=v_(l,r);f===0?(l.next=null,a===null?xc=h:a.next=h,h===null&&(Ka=a)):(a=l,(t!==0||(f&3)!==0)&&(Ic=!0)),l=h}Sl(t)}function v_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var v=31-$t(f),w=1<<v,N=h[v];N===-1?((w&a)===0||(w&l)!==0)&&(h[v]=Oo(w,r)):N<=r&&(t.expiredLanes|=w),f&=~w}if(r=at,a=Be,a=la(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Mr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Es(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Mr(l),ua(a)){case 2:case 8:a=kr;break;case 32:a=Lr;break;case 268435456:a=Ei;break;default:a=Lr}return l=E_.bind(null,t),a=Vr(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Mr(l),t.callbackPriority=2,t.callbackNode=null,2}function E_(t,r){if(Ft!==0&&Ft!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Rc()&&t.callbackNode!==a)return null;var l=Be;return l=la(t,t===at?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(n_(t,l,r),v_(t,on()),t.callbackNode!=null&&t.callbackNode===a?E_.bind(null,t):null)}function T_(t,r){if(Rc())return null;n_(t,r,!0)}function zb(){$b(function(){(We&6)!==0?Vr(ps,jb):__()})}function xf(){return Xs===0&&(Xs=Po()),Xs}function w_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ga(""+t)}function b_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function qb(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var f=w_((h[Tt]||null).action),v=l.submitter;v&&(r=(r=v[Tt]||null)?w_(r.formAction):v.getAttribute("formAction"),r!==null&&(f=r,v=null));var w=new pa("action","action",null,l,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Xs!==0){var N=v?b_(h,v):new FormData(h);Qd(a,{pending:!0,data:N,method:h.method,action:f},null,N)}}else typeof f=="function"&&(w.preventDefault(),N=v?b_(h,v):new FormData(h),Qd(a,{pending:!0,data:N,method:h.method,action:f},f,N))},currentTarget:h}]})}}for(var If=0;If<hd.length;If++){var Cf=hd[If],Bb=Cf.toLowerCase(),Hb=Cf[0].toUpperCase()+Cf.slice(1);Xn(Bb,"on"+Hb)}Xn(np,"onAnimationEnd"),Xn(rp,"onAnimationIteration"),Xn(ip,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(ab,"onTransitionRun"),Xn(ob,"onTransitionStart"),Xn(lb,"onTransitionCancel"),Xn(sp,"onTransitionEnd"),qr("onMouseEnter",["mouseout","mouseover"]),qr("onMouseLeave",["mouseout","mouseover"]),qr("onPointerEnter",["pointerout","pointerover"]),qr("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rl));function A_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var v=l.length-1;0<=v;v--){var w=l[v],N=w.instance,q=w.currentTarget;if(w=w.listener,N!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=q;try{f(h)}catch(Y){gc(Y)}h.currentTarget=null,f=N}else for(v=0;v<l.length;v++){if(w=l[v],N=w.instance,q=w.currentTarget,w=w.listener,N!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=q;try{f(h)}catch(Y){gc(Y)}h.currentTarget=null,f=N}}}}function Me(t,r){var a=r[Lo];a===void 0&&(a=r[Lo]=new Set);var l=t+"__bubble";a.has(l)||(S_(r,t,2,!1),a.add(l))}function Nf(t,r,a){var l=0;r&&(l|=4),S_(a,t,l,r)}var Cc="_reactListening"+Math.random().toString(36).slice(2);function Df(t){if(!t[Cc]){t[Cc]=!0,Uo.forEach(function(a){a!=="selectionchange"&&(Fb.has(a)||Nf(a,!1,t),Nf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Cc]||(r[Cc]=!0,Nf("selectionchange",!1,r))}}function S_(t,r,a,l){switch(X_(r)){case 2:var h=yA;break;case 8:h=_A;break;default:h=Gf}a=h.bind(null,r,a,t),h=void 0,!Pn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function Of(t,r,a,l,h){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var w=l.stateNode.containerInfo;if(w===h)break;if(v===4)for(v=l.return;v!==null;){var N=v.tag;if((N===3||N===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;w!==null;){if(v=zr(w),v===null)return;if(N=v.tag,N===5||N===6||N===26||N===27){l=f=v;continue e}w=w.parentNode}}l=l.return}Du(function(){var q=f,Y=On(a),W=[];e:{var B=ap.get(t);if(B!==void 0){var H=pa,Se=t;switch(t){case"keypress":if(hr(a)===0)break e;case"keydown":case"keyup":H=wa;break;case"focusin":Se="focus",H=va;break;case"focusout":Se="blur",H=va;break;case"beforeblur":case"afterblur":H=va;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=ju;break;case np:case rp:case ip:H=Ea;break;case sp:H=qu;break;case"scroll":case"scrollend":H=Ou;break;case"wheel":H=ba;break;case"copy":case"cut":case"paste":H=Ta;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=$o;break;case"toggle":case"beforetoggle":H=Hu}var Ee=(r&4)!==0,rt=!Ee&&(t==="scroll"||t==="scrollend"),k=Ee?B!==null?B+"Capture":null:B;Ee=[];for(var V=q,z;V!==null;){var X=V;if(z=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||z===null||k===null||(X=Is(V,k),X!=null&&Ee.push(xl(V,X,z))),rt)break;V=V.return}0<Ee.length&&(B=new H(B,Se,null,a,Y),W.push({event:B,listeners:Ee}))}}if((r&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",B&&a!==Fr&&(Se=a.relatedTarget||a.fromElement)&&(zr(Se)||Se[Nn]))break e;if((H||B)&&(B=Y.window===Y?Y:(B=Y.ownerDocument)?B.defaultView||B.parentWindow:window,H?(Se=a.relatedTarget||a.toElement,H=q,Se=Se?zr(Se):null,Se!==null&&(rt=u(Se),Ee=Se.tag,Se!==rt||Ee!==5&&Ee!==27&&Ee!==6)&&(Se=null)):(H=null,Se=q),H!==Se)){if(Ee=Vn,X="onMouseLeave",k="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Ee=$o,X="onPointerLeave",k="onPointerEnter",V="pointer"),rt=H==null?B:or(H),z=Se==null?B:or(Se),B=new Ee(X,V+"leave",H,a,Y),B.target=rt,B.relatedTarget=z,X=null,zr(Y)===q&&(Ee=new Ee(k,V+"enter",Se,a,Y),Ee.target=z,Ee.relatedTarget=rt,X=Ee),rt=X,H&&Se)t:{for(Ee=H,k=Se,V=0,z=Ee;z;z=Ya(z))V++;for(z=0,X=k;X;X=Ya(X))z++;for(;0<V-z;)Ee=Ya(Ee),V--;for(;0<z-V;)k=Ya(k),z--;for(;V--;){if(Ee===k||k!==null&&Ee===k.alternate)break t;Ee=Ya(Ee),k=Ya(k)}Ee=null}else Ee=null;H!==null&&R_(W,B,H,Ee,!1),Se!==null&&rt!==null&&R_(W,rt,Se,Ee,!0)}}e:{if(B=q?or(q):window,H=B.nodeName&&B.nodeName.toLowerCase(),H==="select"||H==="input"&&B.type==="file")var de=Gg;else if(Dt(B))if(Qg)de=rb;else{de=tb;var Oe=eb}else H=B.nodeName,!H||H.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?q&&Ho(q.elementType)&&(de=Gg):de=nb;if(de&&(de=de(t,q))){Xr(W,de,a,Y);break e}Oe&&Oe(t,B,q),t==="focusout"&&q&&B.type==="number"&&q.memoizedProps.value!=null&&Ri(B,"number",B.value)}switch(Oe=q?or(q):window,t){case"focusin":(Dt(Oe)||Oe.contentEditable==="true")&&(Aa=Oe,ld=q,Jo=null);break;case"focusout":Jo=ld=Aa=null;break;case"mousedown":ud=!0;break;case"contextmenu":case"mouseup":case"dragend":ud=!1,ep(W,a,Y);break;case"selectionchange":if(sb)break;case"keydown":case"keyup":ep(W,a,Y)}var ge;if(mr)e:{switch(t){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else ze?G(t,a)&&(Te="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(_&&a.locale!=="ko"&&(ze||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&ze&&(ge=Go()):(cr=Y,xi="value"in cr?cr.value:cr.textContent,ze=!0)),Oe=Nc(q,Te),0<Oe.length&&(Te=new Yo(Te,t,null,a,Y),W.push({event:Te,listeners:Oe}),ge?Te.data=ge:(ge=ie(a),ge!==null&&(Te.data=ge)))),(ge=g?Nt(t,a):qe(t,a))&&(Te=Nc(q,"onBeforeInput"),0<Te.length&&(Oe=new Yo("onBeforeInput","beforeinput",null,a,Y),W.push({event:Oe,listeners:Te}),Oe.data=ge)),qb(W,t,q,a,Y)}A_(W,r)})}function xl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Nc(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Is(t,a),h!=null&&l.unshift(xl(t,h,f)),h=Is(t,r),h!=null&&l.push(xl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function Ya(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function R_(t,r,a,l,h){for(var f=r._reactName,v=[];a!==null&&a!==l;){var w=a,N=w.alternate,q=w.stateNode;if(w=w.tag,N!==null&&N===l)break;w!==5&&w!==26&&w!==27||q===null||(N=q,h?(q=Is(a,f),q!=null&&v.unshift(xl(a,q,N))):h||(q=Is(a,f),q!=null&&v.push(xl(a,q,N)))),a=a.return}v.length!==0&&t.push({event:r,listeners:v})}var Gb=/\r\n?/g,Qb=/\u0000|\uFFFD/g;function x_(t){return(typeof t=="string"?t:""+t).replace(Gb,`
`).replace(Qb,"")}function I_(t,r){return r=x_(r),x_(t)===r}function Dc(){}function nt(t,r,a,l,h,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Dn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Dn(t,""+l);break;case"className":lr(t,"class",l);break;case"tabIndex":lr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":lr(t,a,l);break;case"style":Bo(t,l,f);break;case"data":if(r!=="object"){lr(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ga(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&nt(t,r,"name",h.name,h,null),nt(t,r,"formEncType",h.formEncType,h,null),nt(t,r,"formMethod",h.formMethod,h,null),nt(t,r,"formTarget",h.formTarget,h,null)):(nt(t,r,"encType",h.encType,h,null),nt(t,r,"method",h.method,h,null),nt(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ga(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Dc);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ga(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Me("beforetoggle",t),Me("toggle",t),Si(t,"popover",l);break;case"xlinkActuate":qt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":qt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":qt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":qt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":qt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":qt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":qt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":qt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":qt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Si(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=td.get(a)||a,Si(t,a,l))}}function Pf(t,r,a,l,h,f){switch(a){case"style":Bo(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Dn(t,l):(typeof l=="number"||typeof l=="bigint")&&Dn(t,""+l);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Dc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ca.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),f=t[Tt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Si(t,a,l)}}}function Gt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",t),Me("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:nt(t,r,f,v,a,null)}}h&&nt(t,r,"srcSet",a.srcSet,a,null),l&&nt(t,r,"src",a.src,a,null);return;case"input":Me("invalid",t);var w=f=v=h=null,N=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var Y=a[l];if(Y!=null)switch(l){case"name":h=Y;break;case"type":v=Y;break;case"checked":N=Y;break;case"defaultChecked":q=Y;break;case"value":f=Y;break;case"defaultValue":w=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:nt(t,r,l,Y,a,null)}}Ss(t,f,w,N,q,v,h,!1),ma(t);return;case"select":Me("invalid",t),l=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":f=w;break;case"defaultValue":v=w;break;case"multiple":l=w;default:nt(t,r,h,w,a,null)}r=f,a=v,t.multiple=!!l,r!=null?Hr(t,!!l,r,!1):a!=null&&Hr(t,!!l,a,!0);return;case"textarea":Me("invalid",t),f=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(w=a[v],w!=null))switch(v){case"value":l=w;break;case"defaultValue":h=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:nt(t,r,v,w,a,null)}Rs(t,l,h,f),ma(t);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:nt(t,r,N,l,a,null)}return;case"dialog":Me("beforetoggle",t),Me("toggle",t),Me("cancel",t),Me("close",t);break;case"iframe":case"object":Me("load",t);break;case"video":case"audio":for(l=0;l<Rl.length;l++)Me(Rl[l],t);break;case"image":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"embed":case"source":case"link":Me("error",t),Me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:nt(t,r,q,l,a,null)}return;default:if(Ho(r)){for(Y in a)a.hasOwnProperty(Y)&&(l=a[Y],l!==void 0&&Pf(t,r,Y,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&nt(t,r,w,l,a,null))}function Kb(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,w=null,N=null,q=null,Y=null;for(H in a){var W=a[H];if(a.hasOwnProperty(H)&&W!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":N=W;default:l.hasOwnProperty(H)||nt(t,r,H,null,l,W)}}for(var B in l){var H=l[B];if(W=a[B],l.hasOwnProperty(B)&&(H!=null||W!=null))switch(B){case"type":f=H;break;case"name":h=H;break;case"checked":q=H;break;case"defaultChecked":Y=H;break;case"value":v=H;break;case"defaultValue":w=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,r));break;default:H!==W&&nt(t,r,B,H,l,W)}}vn(t,v,w,N,q,Y,f,h);return;case"select":H=v=w=B=null;for(f in a)if(N=a[f],a.hasOwnProperty(f)&&N!=null)switch(f){case"value":break;case"multiple":H=N;default:l.hasOwnProperty(f)||nt(t,r,f,null,l,N)}for(h in l)if(f=l[h],N=a[h],l.hasOwnProperty(h)&&(f!=null||N!=null))switch(h){case"value":B=f;break;case"defaultValue":w=f;break;case"multiple":v=f;default:f!==N&&nt(t,r,h,f,l,N)}r=w,a=v,l=H,B!=null?Hr(t,!!a,B,!1):!!l!=!!a&&(r!=null?Hr(t,!!a,r,!0):Hr(t,!!a,a?[]:"",!1));return;case"textarea":H=B=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:nt(t,r,w,null,l,h)}for(v in l)if(h=l[v],f=a[v],l.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":B=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&nt(t,r,v,h,l,f)}et(t,B,H);return;case"option":for(var Se in a)if(B=a[Se],a.hasOwnProperty(Se)&&B!=null&&!l.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:nt(t,r,Se,null,l,B)}for(N in l)if(B=l[N],H=a[N],l.hasOwnProperty(N)&&B!==H&&(B!=null||H!=null))switch(N){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:nt(t,r,N,B,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)B=a[Ee],a.hasOwnProperty(Ee)&&B!=null&&!l.hasOwnProperty(Ee)&&nt(t,r,Ee,null,l,B);for(q in l)if(B=l[q],H=a[q],l.hasOwnProperty(q)&&B!==H&&(B!=null||H!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,r));break;default:nt(t,r,q,B,l,H)}return;default:if(Ho(r)){for(var rt in a)B=a[rt],a.hasOwnProperty(rt)&&B!==void 0&&!l.hasOwnProperty(rt)&&Pf(t,r,rt,void 0,l,B);for(Y in l)B=l[Y],H=a[Y],!l.hasOwnProperty(Y)||B===H||B===void 0&&H===void 0||Pf(t,r,Y,B,l,H);return}}for(var k in a)B=a[k],a.hasOwnProperty(k)&&B!=null&&!l.hasOwnProperty(k)&&nt(t,r,k,null,l,B);for(W in l)B=l[W],H=a[W],!l.hasOwnProperty(W)||B===H||B==null&&H==null||nt(t,r,W,B,l,H)}var Vf=null,Mf=null;function Oc(t){return t.nodeType===9?t:t.ownerDocument}function C_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function N_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function kf(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Lf=null;function Yb(){var t=window.event;return t&&t.type==="popstate"?t===Lf?!1:(Lf=t,!0):(Lf=null,!1)}var D_=typeof setTimeout=="function"?setTimeout:void 0,Xb=typeof clearTimeout=="function"?clearTimeout:void 0,O_=typeof Promise=="function"?Promise:void 0,$b=typeof queueMicrotask=="function"?queueMicrotask:typeof O_<"u"?function(t){return O_.resolve(null).then(t).catch(Wb)}:D_;function Wb(t){setTimeout(function(){throw t})}function Hi(t){return t==="head"}function P_(t,r){var a=r,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var v=t.ownerDocument;if(a&1&&Il(v.documentElement),a&2&&Il(v.body),a&4)for(a=v.head,Il(a),v=a.firstChild;v;){var w=v.nextSibling,N=v.nodeName;v[Ts]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=w}}if(h===0){t.removeChild(f),kl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);kl(r)}function Uf(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Uf(a),Ai(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Zb(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ts])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Wn(t.nextSibling),t===null)break}return null}function Jb(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Wn(t.nextSibling),t===null))return null;return t}function jf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function eA(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Wn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var zf=null;function V_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function M_(t,r,a){switch(r=Oc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Il(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ai(t)}var qn=new Map,k_=new Set;function Pc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var li=re.d;re.d={f:tA,r:nA,D:rA,C:iA,L:sA,m:aA,X:lA,S:oA,M:uA};function tA(){var t=li.f(),r=Ac();return t||r}function nA(t){var r=ar(t);r!==null&&r.tag===5&&r.type==="form"?ny(r):li.r(t)}var Xa=typeof document>"u"?null:document;function L_(t,r,a){var l=Xa;if(l&&typeof r=="string"&&r){var h=wt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),k_.has(h)||(k_.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Gt(r,"link",t),gt(r),l.head.appendChild(r)))}}function rA(t){li.D(t),L_("dns-prefetch",t,null)}function iA(t,r){li.C(t,r),L_("preconnect",t,r)}function sA(t,r,a){li.L(t,r,a);var l=Xa;if(l&&t&&r){var h='link[rel="preload"][as="'+wt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+wt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+wt(a.imageSizes)+'"]')):h+='[href="'+wt(t)+'"]';var f=h;switch(r){case"style":f=$a(t);break;case"script":f=Wa(t)}qn.has(f)||(t=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),qn.set(f,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(Cl(f))||r==="script"&&l.querySelector(Nl(f))||(r=l.createElement("link"),Gt(r,"link",t),gt(r),l.head.appendChild(r)))}}function aA(t,r){li.m(t,r);var a=Xa;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+wt(l)+'"][href="'+wt(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Wa(t)}if(!qn.has(f)&&(t=T({rel:"modulepreload",href:t},r),qn.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Nl(f)))return}l=a.createElement("link"),Gt(l,"link",t),gt(l),a.head.appendChild(l)}}}function oA(t,r,a){li.S(t,r,a);var l=Xa;if(l&&t){var h=ln(l).hoistableStyles,f=$a(t);r=r||"default";var v=h.get(f);if(!v){var w={loading:0,preload:null};if(v=l.querySelector(Cl(f)))w.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},a),(a=qn.get(f))&&qf(t,a);var N=v=l.createElement("link");gt(N),Gt(N,"link",t),N._p=new Promise(function(q,Y){N.onload=q,N.onerror=Y}),N.addEventListener("load",function(){w.loading|=1}),N.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Vc(v,r,l)}v={type:"stylesheet",instance:v,count:1,state:w},h.set(f,v)}}}function lA(t,r){li.X(t,r);var a=Xa;if(a&&t){var l=ln(a).hoistableScripts,h=Wa(t),f=l.get(h);f||(f=a.querySelector(Nl(h)),f||(t=T({src:t,async:!0},r),(r=qn.get(h))&&Bf(t,r),f=a.createElement("script"),gt(f),Gt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function uA(t,r){li.M(t,r);var a=Xa;if(a&&t){var l=ln(a).hoistableScripts,h=Wa(t),f=l.get(h);f||(f=a.querySelector(Nl(h)),f||(t=T({src:t,async:!0,type:"module"},r),(r=qn.get(h))&&Bf(t,r),f=a.createElement("script"),gt(f),Gt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function U_(t,r,a,l){var h=(h=we.current)?Pc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=$a(a.href),a=ln(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=$a(a.href);var f=ln(h).hoistableStyles,v=f.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,v),(f=h.querySelector(Cl(t)))&&!f._p&&(v.instance=f,v.state.loading=5),qn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},qn.set(t,a),f||cA(h,t,a,v.state))),r&&l===null)throw Error(s(528,""));return v}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Wa(a),a=ln(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function $a(t){return'href="'+wt(t)+'"'}function Cl(t){return'link[rel="stylesheet"]['+t+"]"}function j_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function cA(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Gt(r,"link",a),gt(r),t.head.appendChild(r))}function Wa(t){return'[src="'+wt(t)+'"]'}function Nl(t){return"script[async]"+t}function z_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+wt(a.href)+'"]');if(l)return r.instance=l,gt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),gt(l),Gt(l,"style",h),Vc(l,a.precedence,t),r.instance=l;case"stylesheet":h=$a(a.href);var f=t.querySelector(Cl(h));if(f)return r.state.loading|=4,r.instance=f,gt(f),f;l=j_(a),(h=qn.get(h))&&qf(l,h),f=(t.ownerDocument||t).createElement("link"),gt(f);var v=f;return v._p=new Promise(function(w,N){v.onload=w,v.onerror=N}),Gt(f,"link",l),r.state.loading|=4,Vc(f,a.precedence,t),r.instance=f;case"script":return f=Wa(a.src),(h=t.querySelector(Nl(f)))?(r.instance=h,gt(h),h):(l=a,(h=qn.get(f))&&(l=T({},a),Bf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),gt(h),Gt(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Vc(l,a.precedence,t));return r.instance}function Vc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,v=0;v<l.length;v++){var w=l[v];if(w.dataset.precedence===r)f=w;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function qf(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Bf(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Mc=null;function q_(t,r,a){if(Mc===null){var l=new Map,h=Mc=new Map;h.set(a,l)}else h=Mc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Ts]||f[Ct]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(r)||"";v=t+v;var w=l.get(v);w?w.push(f):l.set(v,[f])}}return l}function B_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function hA(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function H_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Dl=null;function dA(){}function fA(t,r,a){if(Dl===null)throw Error(s(475));var l=Dl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=$a(a.href),f=t.querySelector(Cl(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=kc.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=f,gt(f);return}f=t.ownerDocument||t,a=j_(a),(h=qn.get(h))&&qf(a,h),f=f.createElement("link"),gt(f);var v=f;v._p=new Promise(function(w,N){v.onload=w,v.onerror=N}),Gt(f,"link",a),r.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=kc.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function mA(){if(Dl===null)throw Error(s(475));var t=Dl;return t.stylesheets&&t.count===0&&Hf(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&Hf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function kc(){if(this.count--,this.count===0){if(this.stylesheets)Hf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Lc=null;function Hf(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Lc=new Map,r.forEach(gA,t),Lc=null,kc.call(t))}function gA(t,r){if(!(r.state.loading&4)){var a=Lc.get(t);if(a)var l=a.get(null);else{a=new Map,Lc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=r.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||l,f===l&&a.set(null,h),a.set(v,h),this.count++,l=kc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Ol={$$typeof:ne,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function pA(t,r,a,l,h,f,v,w){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.hiddenUpdates=Ur(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function F_(t,r,a,l,h,f,v,w,N,q,Y,W){return t=new pA(t,r,a,v,w,N,q,W),r=1,f===!0&&(r|=24),f=Tn(3,null,null,r),t.current=f,f.stateNode=t,r=bd(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},xd(f),t}function G_(t){return t?(t=Ia,t):Ia}function Q_(t,r,a,l,h,f){h=G_(h),l.context===null?l.context=h:l.pendingContext=h,l=Ni(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Di(t,l,r),a!==null&&(Rn(a,t,r),ll(a,t,r))}function K_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Ff(t,r){K_(t,r),(t=t.alternate)&&K_(t,r)}function Y_(t){if(t.tag===13){var r=xa(t,67108864);r!==null&&Rn(r,t,67108864),Ff(t,67108864)}}var Uc=!0;function yA(t,r,a,l){var h=Q.T;Q.T=null;var f=re.p;try{re.p=2,Gf(t,r,a,l)}finally{re.p=f,Q.T=h}}function _A(t,r,a,l){var h=Q.T;Q.T=null;var f=re.p;try{re.p=8,Gf(t,r,a,l)}finally{re.p=f,Q.T=h}}function Gf(t,r,a,l){if(Uc){var h=Qf(l);if(h===null)Of(t,r,l,jc,a),$_(t,l);else if(EA(h,t,r,a,l))l.stopPropagation();else if($_(t,l),r&4&&-1<vA.indexOf(t)){for(;h!==null;){var f=ar(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Qn(f.pendingLanes);if(v!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var N=1<<31-$t(v);w.entanglements[1]|=N,v&=~N}Er(f),(We&6)===0&&(wc=on()+500,Sl(0))}}break;case 13:w=xa(f,2),w!==null&&Rn(w,f,2),Ac(),Ff(f,2)}if(f=Qf(l),f===null&&Of(t,r,l,jc,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else Of(t,r,l,null,a)}}function Qf(t){return t=On(t),Kf(t)}var jc=null;function Kf(t){if(jc=null,t=zr(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return jc=t,null}function X_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(No()){case ps:return 2;case kr:return 8;case Lr:case Do:return 32;case Ei:return 268435456;default:return 32}default:return 32}}var Yf=!1,Fi=null,Gi=null,Qi=null,Pl=new Map,Vl=new Map,Ki=[],vA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $_(t,r){switch(t){case"focusin":case"focusout":Fi=null;break;case"dragenter":case"dragleave":Gi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":Pl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vl.delete(r.pointerId)}}function Ml(t,r,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},r!==null&&(r=ar(r),r!==null&&Y_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function EA(t,r,a,l,h){switch(r){case"focusin":return Fi=Ml(Fi,t,r,a,l,h),!0;case"dragenter":return Gi=Ml(Gi,t,r,a,l,h),!0;case"mouseover":return Qi=Ml(Qi,t,r,a,l,h),!0;case"pointerover":var f=h.pointerId;return Pl.set(f,Ml(Pl.get(f)||null,t,r,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Vl.set(f,Ml(Vl.get(f)||null,t,r,a,l,h)),!0}return!1}function W_(t){var r=zr(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,Au(t.priority,function(){if(a.tag===13){var l=Sn();l=Ti(l);var h=xa(a,l);h!==null&&Rn(h,a,l),Ff(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zc(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Qf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Fr=l,a.target.dispatchEvent(l),Fr=null}else return r=ar(a),r!==null&&Y_(r),t.blockedOn=a,!1;r.shift()}return!0}function Z_(t,r,a){zc(t)&&a.delete(r)}function TA(){Yf=!1,Fi!==null&&zc(Fi)&&(Fi=null),Gi!==null&&zc(Gi)&&(Gi=null),Qi!==null&&zc(Qi)&&(Qi=null),Pl.forEach(Z_),Vl.forEach(Z_)}function qc(t,r){t.blockedOn===r&&(t.blockedOn=null,Yf||(Yf=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,TA)))}var Bc=null;function J_(t){Bc!==t&&(Bc=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Bc===t&&(Bc=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(Kf(l||a)===null)continue;break}var f=ar(a);f!==null&&(t.splice(r,3),r-=3,Qd(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function kl(t){function r(N){return qc(N,t)}Fi!==null&&qc(Fi,t),Gi!==null&&qc(Gi,t),Qi!==null&&qc(Qi,t),Pl.forEach(r),Vl.forEach(r);for(var a=0;a<Ki.length;a++){var l=Ki[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ki.length&&(a=Ki[0],a.blockedOn===null);)W_(a),a.blockedOn===null&&Ki.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],v=h[Tt]||null;if(typeof f=="function")v||J_(a);else if(v){var w=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[Tt]||null)w=v.formAction;else if(Kf(h)!==null)continue}else w=v.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),J_(a)}}}function Xf(t){this._internalRoot=t}Hc.prototype.render=Xf.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Sn();Q_(a,l,t,r,null,null)},Hc.prototype.unmount=Xf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Q_(t.current,2,null,t,null,null),Ac(),r[Nn]=null}};function Hc(t){this._internalRoot=t}Hc.prototype.unstable_scheduleHydration=function(t){if(t){var r=wi();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Ki.length&&r!==0&&r<Ki[a].priority;a++);Ki.splice(a,0,t),a===0&&W_(t)}};var ev=e.version;if(ev!=="19.1.1")throw Error(s(527,ev,"19.1.1"));re.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var wA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{Xe=Fc.inject(wA),$e=Fc}catch{}}return Ul.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=py,f=yy,v=_y,w=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(w=r.unstable_transitionCallbacks)),r=F_(t,1,!1,null,null,a,l,h,f,v,w,null),t[Nn]=r.current,Df(t),new Xf(r)},Ul.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=py,v=yy,w=_y,N=null,q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(q=a.formState)),r=F_(t,1,!0,r,a??null,l,h,f,v,w,N,q),r.context=G_(null),a=r.current,l=Sn(),l=Ti(l),h=Ni(l),h.callback=null,Di(a,h,l),a=l,r.current.lanes=a,jr(r,a),Er(r),t[Nn]=r.current,Df(t),new Hc(r)},Ul.version="19.1.1",Ul}var cv;function PA(){if(cv)return Zf.exports;cv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Zf.exports=OA(),Zf.exports}var VA=PA();const MA=Z0(VA);var st=(i=>(i[i.Setup=0]="Setup",i[i.Login=1]="Login",i[i.Shop=2]="Shop",i[i.PackSelection=3]="PackSelection",i[i.RoundConfiguration=4]="RoundConfiguration",i[i.Game=5]="Game",i[i.RoundEnd=6]="RoundEnd",i[i.GameEnd=7]="GameEnd",i))(st||{});const Hn=({children:i,className:e})=>E.jsx("div",{className:`bg-gray-800 border border-purple-500/30 rounded-2xl shadow-lg shadow-purple-900/20 p-6 sm:p-8 ${e}`,children:i}),kA=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),hv=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),J0=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),eE=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),ro=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),LA=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),tE=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),UA=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),jA=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),zA=({players:i,setPlayers:e})=>{const[n,s]=le.useState(""),o=d=>{d.preventDefault(),n.trim()&&!i.includes(n.trim())&&(e([...i,n.trim()]),s(""))},u=d=>{e(i.filter((m,p)=>p!==d))};return E.jsxs(Hn,{children:[E.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-pink-400",children:"Aadir Jugadores"}),E.jsxs("form",{onSubmit:o,className:"flex flex-col gap-2 mb-4",children:[E.jsx("input",{type:"text",value:n,onChange:d=>s(d.target.value),placeholder:"Nombre del jugador",className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-purple-500"}),E.jsx("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md transition text-base",children:"Aadir"})]}),E.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:i.map((d,m)=>E.jsxs("li",{className:"flex justify-between items-center bg-gray-700/50 p-2 rounded-md animate-fade-in",children:[E.jsx("span",{className:"font-medium",children:d}),E.jsx("button",{onClick:()=>u(m),className:"text-gray-400 hover:text-red-500 transition",children:E.jsx(kA,{className:"w-5 h-5"})})]},m))})]})},Ge=({children:i,variant:e="primary",className:n,...s})=>{const o="px-6 py-3 font-bold rounded-lg text-white transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 disabled:opacity-50 disabled:cursor-not-allowed",u={primary:"bg-purple-600 hover:bg-purple-700 focus:ring-purple-500/50 shadow-lg shadow-purple-600/30",secondary:"bg-pink-500 hover:bg-pink-600 focus:ring-pink-500/50 shadow-lg shadow-pink-500/30",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500/50"};return E.jsx("button",{className:`${o} ${u[e]} ${n}`,...s,children:i})},qA=({availablePacks:i,purchasedPacks:e,adWatchedPacks:n,referralUnlockedPacks:s,onContinue:o,onBack:u,onGoToShop:d,onPlayDemo:m})=>{const T=i.some(A=>A.id==="base")?i:[{id:"base",name:"Pack Base",description:"Preguntas y retos bsicos incluidos",price:"INCLUIDO",icon:"",questionsUrl:"",daresUrl:"",allowDemo:!1,demoPlaysCount:0},...i];return e.length>0,E.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:E.jsxs(Hn,{className:"w-full max-w-2xl text-center",children:[E.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Packs Disponibles"}),E.jsx("p",{className:"text-gray-400 mb-8",children:"Estos son los packs que tienes disponibles para jugar"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:T.map(A=>{const S=A.id==="base"||e.includes(A.id),L=A.id==="base",U=n.includes(A.id),K=s.includes(A.id),F=S||K;return E.jsxs("div",{className:`relative p-4 rounded-lg border transition-all duration-200 ${S?"border-green-500 bg-green-500/10":K?"border-blue-500 bg-blue-500/10":U?"border-yellow-500 bg-yellow-500/10":"border-gray-600 bg-gray-800/50 opacity-60"}`,children:[E.jsx("div",{className:"absolute top-2 right-2",children:S?E.jsx(hv,{className:"w-6 h-6 text-green-500"}):K?E.jsx(hv,{className:"w-6 h-6 text-blue-500"}):E.jsx(ro,{className:"w-6 h-6 text-yellow-500"})}),E.jsx("div",{className:"text-4xl mb-2",children:A.icon}),E.jsx("h3",{className:`text-xl font-bold mb-2 ${F||U?"text-white":"text-gray-400"}`,children:A.name}),E.jsx("p",{className:`text-sm mb-3 ${F||U?"text-gray-300":"text-gray-500"}`,children:A.description}),A.isReferralUnlockable&&!F&&E.jsxs("p",{className:"text-xs text-blue-400 mb-2",children:[" Requiere ",A.requiredReferrals," referidos"]}),E.jsx("div",{className:`text-lg font-semibold ${S?"text-green-400":K?"text-blue-400":"text-yellow-400"}`,children:L?"INCLUIDO":S?"COMPRADO":K?"POR REFERIDOS":U?"DEMO VISTO":"PREMIUM"}),!F&&!U&&E.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg flex items-center justify-center",children:E.jsxs("div",{className:"text-center",children:[E.jsx(ro,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),E.jsx("p",{className:"text-yellow-400 font-semibold text-sm mb-3",children:A.isReferralUnlockable?`${A.requiredReferrals} REFERIDOS`:"PREMIUM"}),A.allowDemo&&E.jsx(Ge,{onClick:ae=>{ae.stopPropagation(),m(A.id)},variant:"secondary",className:"px-3 py-1 text-xs bg-yellow-500 hover:bg-yellow-600 text-white border border-yellow-400 shadow-md",children:" Jugar Demo"})]})})]},A.id)})}),i.some(A=>!e.includes(A.id))&&E.jsx("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:E.jsxs("p",{className:"text-yellow-400 text-sm",children:[E.jsx(ro,{className:"w-4 h-4 inline mr-2"}),"Los packs premium estn bloqueados. Visita la tienda para desbloquearlos."]})}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[E.jsx(Ge,{onClick:u,variant:"secondary",className:"px-6",children:"Volver"}),E.jsx(Ge,{onClick:d,variant:"secondary",className:"px-6 bg-yellow-600 hover:bg-yellow-700 text-white",children:"Ir a la Tienda"}),E.jsx(Ge,{onClick:o,className:"px-6",disabled:!1,children:"Continuar al Juego"})]})]})})},BA="modulepreload",HA=function(i,e){return new URL(i,e).href},dv={},nE=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let d=function(T){return Promise.all(T.map(A=>Promise.resolve(A).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};const m=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),y=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=d(n.map(T=>{if(T=HA(T,s),T in dv)return;dv[T]=!0;const A=T.endsWith(".css"),S=A?'[rel="stylesheet"]':"";if(!!s)for(let K=m.length-1;K>=0;K--){const F=m[K];if(F.href===T&&(!A||F.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${T}"]${S}`))return;const U=document.createElement("link");if(U.rel=A?"stylesheet":BA,A||(U.as="script"),U.crossOrigin="",U.href=T,y&&U.setAttribute("nonce",y),document.head.appendChild(U),A)return new Promise((K,F)=>{U.addEventListener("load",K),U.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${T}`)))})}))}function u(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return o.then(d=>{for(const m of d||[])m.status==="rejected"&&u(m.reason);return e().catch(u)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var uo;(function(i){i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE"})(uo||(uo={}));class nm extends Error{constructor(e,n,s){super(e),this.message=e,this.code=n,this.data=s}}const FA=i=>{var e,n;return i!=null&&i.androidBridge?"android":!((n=(e=i==null?void 0:i.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},GA=i=>{const e=i.CapacitorCustomPlatform||null,n=i.Capacitor||{},s=n.Plugins=n.Plugins||{},o=()=>e!==null?e.name:FA(i),u=()=>o()!=="web",d=A=>{const S=y.get(A);return!!(S!=null&&S.platforms.has(o())||m(A))},m=A=>{var S;return(S=n.PluginHeaders)===null||S===void 0?void 0:S.find(L=>L.name===A)},p=A=>i.console.error(A),y=new Map,T=(A,S={})=>{const L=y.get(A);if(L)return console.warn(`Capacitor plugin "${A}" already registered. Cannot register plugins twice.`),L.proxy;const U=o(),K=m(A);let F;const ae=async()=>(!F&&U in S?F=typeof S[U]=="function"?F=await S[U]():F=S[U]:e!==null&&!F&&"web"in S&&(F=typeof S.web=="function"?F=await S.web():F=S.web),F),se=(R,x)=>{var D,P;if(K){const M=K==null?void 0:K.methods.find(I=>x===I.name);if(M)return M.rtype==="promise"?I=>n.nativePromise(A,x.toString(),I):(I,ke)=>n.nativeCallback(A,x.toString(),I,ke);if(R)return(D=R[x])===null||D===void 0?void 0:D.bind(R)}else{if(R)return(P=R[x])===null||P===void 0?void 0:P.bind(R);throw new nm(`"${A}" plugin is not implemented on ${U}`,uo.Unimplemented)}},ne=R=>{let x;const D=(...P)=>{const M=ae().then(I=>{const ke=se(I,R);if(ke){const Pe=ke(...P);return x=Pe==null?void 0:Pe.remove,Pe}else throw new nm(`"${A}.${R}()" is not implemented on ${U}`,uo.Unimplemented)});return R==="addListener"&&(M.remove=async()=>x()),M};return D.toString=()=>`${R.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:R,writable:!1,configurable:!1}),D},me=ne("addListener"),ce=ne("removeListener"),_e=(R,x)=>{const D=me({eventName:R},x),P=async()=>{const I=await D;ce({eventName:R,callbackId:I},x)},M=new Promise(I=>D.then(()=>I({remove:P})));return M.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},M},C=new Proxy({},{get(R,x){switch(x){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return K?_e:me;case"removeListener":return ce;default:return ne(x)}}});return s[A]=C,y.set(A,{name:A,proxy:C,platforms:new Set([...Object.keys(S),...K?[U]:[]])}),C};return n.convertFileSrc||(n.convertFileSrc=A=>A),n.getPlatform=o,n.handleError=p,n.isNativePlatform=u,n.isPluginAvailable=d,n.registerPlugin=T,n.Exception=nm,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},QA=i=>i.Capacitor=GA(i),tn=QA(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Qm=tn.registerPlugin;class rE{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(n);const u=this.windowListeners[e];u&&!u.registered&&this.addWindowListener(u),s&&this.sendRetainedArgumentsForEvent(e);const d=async()=>this.removeListener(e,n);return Promise.resolve({remove:d})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,s){const o=this.listeners[e];if(!o){if(s){let u=this.retainedEventArguments[e];u||(u=[]),u.push(n),this.retainedEventArguments[e]=u}return}o.forEach(u=>u(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:s=>{this.notifyListeners(n,s)}}}unimplemented(e="not implemented"){return new tn.Exception(e,uo.Unimplemented)}unavailable(e="not available"){return new tn.Exception(e,uo.Unavailable)}async removeListener(e,n){const s=this.listeners[e];if(!s)return;const o=s.indexOf(n);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(s=>{this.notifyListeners(e,s)}))}}const fv=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),mv=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class KA extends rE{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(s=>{if(s.length<=0)return;let[o,u]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=mv(o).trim(),u=mv(u).trim(),n[o]=u}),n}async setCookie(e){try{const n=fv(e.key),s=fv(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,u=(e.path||"/").replace("path=",""),d=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${s||""}${o}; path=${u}; ${d};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Qm("CapacitorCookies",{web:()=>new KA});const YA=async i=>new Promise((e,n)=>{const s=new FileReader;s.onload=()=>{const o=s.result;e(o.indexOf(",")>=0?o.split(",")[1]:o)},s.onerror=o=>n(o),s.readAsDataURL(i)}),XA=(i={})=>{const e=Object.keys(i);return Object.keys(i).map(o=>o.toLocaleLowerCase()).reduce((o,u,d)=>(o[u]=i[e[d]],o),{})},$A=(i,e=!0)=>i?Object.entries(i).reduce((s,o)=>{const[u,d]=o;let m,p;return Array.isArray(d)?(p="",d.forEach(y=>{m=e?encodeURIComponent(y):y,p+=`${u}=${m}&`}),p.slice(0,-1)):(m=e?encodeURIComponent(d):d,p=`${u}=${m}`),`${s}&${p}`},"").substr(1):null,WA=(i,e={})=>{const n=Object.assign({method:i.method||"GET",headers:i.headers},e),o=XA(i.headers)["content-type"]||"";if(typeof i.data=="string")n.body=i.data;else if(o.includes("application/x-www-form-urlencoded")){const u=new URLSearchParams;for(const[d,m]of Object.entries(i.data||{}))u.set(d,m);n.body=u.toString()}else if(o.includes("multipart/form-data")||i.data instanceof FormData){const u=new FormData;if(i.data instanceof FormData)i.data.forEach((m,p)=>{u.append(p,m)});else for(const m of Object.keys(i.data))u.append(m,i.data[m]);n.body=u;const d=new Headers(n.headers);d.delete("content-type"),n.headers=d}else(o.includes("application/json")||typeof i.data=="object")&&(n.body=JSON.stringify(i.data));return n};class ZA extends rE{async request(e){const n=WA(e,e.webFetchExtra),s=$A(e.params,e.shouldEncodeUrlParams),o=s?`${e.url}?${s}`:e.url,u=await fetch(o,n),d=u.headers.get("content-type")||"";let{responseType:m="text"}=u.ok?e:{};d.includes("application/json")&&(m="json");let p,y;switch(m){case"arraybuffer":case"blob":y=await u.blob(),p=await YA(y);break;case"json":p=await u.json();break;case"document":case"text":default:p=await u.text()}const T={};return u.headers.forEach((A,S)=>{T[S]=A}),{data:p,headers:T,status:u.status,url:u.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Qm("CapacitorHttp",{web:()=>new ZA});var gv;(function(i){i.General="General",i.ParentalGuidance="ParentalGuidance",i.Teen="Teen",i.MatureAudience="MatureAudience"})(gv||(gv={}));var pv;(function(i){i.SizeChanged="bannerAdSizeChanged",i.Loaded="bannerAdLoaded",i.FailedToLoad="bannerAdFailedToLoad",i.Opened="bannerAdOpened",i.Closed="bannerAdClosed",i.AdImpression="bannerAdImpression"})(pv||(pv={}));var pm;(function(i){i.TOP_CENTER="TOP_CENTER",i.CENTER="CENTER",i.BOTTOM_CENTER="BOTTOM_CENTER"})(pm||(pm={}));var ym;(function(i){i.BANNER="BANNER",i.FULL_BANNER="FULL_BANNER",i.LARGE_BANNER="LARGE_BANNER",i.MEDIUM_RECTANGLE="MEDIUM_RECTANGLE",i.LEADERBOARD="LEADERBOARD",i.ADAPTIVE_BANNER="ADAPTIVE_BANNER",i.SMART_BANNER="SMART_BANNER"})(ym||(ym={}));var Kl;(function(i){i.Loaded="interstitialAdLoaded",i.FailedToLoad="interstitialAdFailedToLoad",i.Showed="interstitialAdShowed",i.FailedToShow="interstitialAdFailedToShow",i.Dismissed="interstitialAdDismissed"})(Kl||(Kl={}));var yv;(function(i){i.Loaded="onRewardedInterstitialAdLoaded",i.FailedToLoad="onRewardedInterstitialAdFailedToLoad",i.Showed="onRewardedInterstitialAdShowed",i.FailedToShow="onRewardedInterstitialAdFailedToShow",i.Dismissed="onRewardedInterstitialAdDismissed",i.Rewarded="onRewardedInterstitialAdReward"})(yv||(yv={}));var no;(function(i){i.Loaded="onRewardedVideoAdLoaded",i.FailedToLoad="onRewardedVideoAdFailedToLoad",i.Showed="onRewardedVideoAdShowed",i.FailedToShow="onRewardedVideoAdFailedToShow",i.Dismissed="onRewardedVideoAdDismissed",i.Rewarded="onRewardedVideoAdReward"})(no||(no={}));var _v;(function(i){i.NOT_REQUIRED="NOT_REQUIRED",i.OBTAINED="OBTAINED",i.REQUIRED="REQUIRED",i.UNKNOWN="UNKNOWN"})(_v||(_v={}));var vv;(function(i){i[i.DISABLED=0]="DISABLED",i[i.EEA=1]="EEA",i[i.NOT_EEA=2]="NOT_EEA"})(vv||(vv={}));const Jt=Qm("AdMob",{web:()=>nE(()=>import("./web-_4gbsNW5.js"),[],import.meta.url).then(i=>new i.AdMobWeb)});class JA{constructor(){this.isInitialized=!1,this.config=null}async initialize(e){if(this.isInitialized){this.config={...this.config,...e};return}try{this.config=e,tn.isNativePlatform()?(await Jt.initialize({requestTrackingAuthorization:!0,testingDevices:e.testMode?["YOUR_DEVICE_ID"]:[],initializeForTesting:e.testMode||!1}),this.isInitialized=!0,console.log("AdMob initialized successfully")):console.log("AdMob not available on web platform")}catch(n){throw console.error("Failed to initialize AdMob:",n),n}}async showBannerAd(e){if(!this.isInitialized||!this.config)throw new Error("AdMob not initialized");if(!tn.isNativePlatform())throw new Error("AdMob banners only available on native platforms");if(!this.config.bannerAdUnitId)throw new Error("bannerAdUnitId not configured");try{const n={adId:this.config.bannerAdUnitId,adSize:ym.ADAPTIVE_BANNER,position:pm.BOTTOM_CENTER,margin:0,isTesting:this.config.testMode||!1,...e};await Jt.showBanner(n),console.log("Banner ad shown successfully")}catch(n){throw console.error("Failed to show banner ad:",n),n}}async hideBannerAd(){if(this.isInitialized&&tn.isNativePlatform())try{await Jt.hideBanner(),console.log("Banner ad hidden successfully")}catch(e){console.error("Failed to hide banner ad:",e)}}async resumeBannerAd(){if(this.isInitialized&&tn.isNativePlatform())try{await Jt.resumeBanner(),console.log("Banner ad resumed successfully")}catch(e){console.error("Failed to resume banner ad:",e)}}async removeBannerAd(){if(this.isInitialized&&tn.isNativePlatform())try{await Jt.removeBanner(),console.log("Banner ad removed successfully")}catch(e){console.error("Failed to remove banner ad:",e)}}async showInterstitial(){if(!this.isInitialized||!this.config)return console.warn("AdMob not initialized"),!1;if(!tn.isNativePlatform())return console.warn("Interstitials are only available on native platforms"),!1;if(!this.config.interstitialAdUnitId)return console.warn("No interstitialAdUnitId configured"),!1;let e=null,n=null,s=null;try{const o=new Promise((m,p)=>{setTimeout(()=>p(new Error("Interstitial ad timeout")),3e4)}),u=new Promise(async(m,p)=>{try{e=await Jt.addListener(Kl.Loaded,S=>{console.log("Interstitial loaded")}),s=await Jt.addListener(Kl.FailedToLoad,S=>{console.error("Interstitial failed to load:",S),p(new Error("Failed to load interstitial"))});let y=null;const T=new Promise(S=>{y=S});n=await Jt.addListener(Kl.Dismissed,()=>{console.log("Interstitial dismissed"),y&&y()});const A={adId:this.config.interstitialAdUnitId,isTesting:this.config.testMode||!1};await Jt.prepareInterstitial(A),await Jt.showInterstitial(),await T,m(!0)}catch(y){p(y)}});return await Promise.race([u,o])}catch(o){return console.error("Failed to show interstitial ad:",o),!1}finally{try{e&&await e.remove(),n&&await n.remove(),s&&await s.remove()}catch(o){console.warn("Error cleaning up interstitial listeners:",o)}}}async showRewarded(){if(!this.isInitialized||!this.config)return console.warn("AdMob not initialized"),!1;if(!tn.isNativePlatform())return console.warn("Rewarded ads are only available on native platforms"),!1;if(!this.config.rewardedAdUnitId)return console.warn("No rewardedAdUnitId configured"),!1;let e=null,n=null,s=null,o=null;try{const u=new Promise((p,y)=>{setTimeout(()=>y(new Error("Rewarded ad timeout")),3e4)}),d=new Promise(async(p,y)=>{try{let T=!1;e=await Jt.addListener(no.Loaded,U=>{console.log("Rewarded loaded")}),o=await Jt.addListener(no.FailedToLoad,U=>{console.error("Rewarded failed to load:",U),y(new Error("Failed to load rewarded ad"))}),n=await Jt.addListener(no.Rewarded,U=>{T=!0,console.log("User rewarded",U)});let A=null;const S=new Promise(U=>{A=U});s=await Jt.addListener(no.Dismissed,()=>{console.log("Rewarded dismissed"),A&&A()});const L={adId:this.config.rewardedAdUnitId,isTesting:this.config.testMode||!1};await Jt.prepareRewardVideoAd(L),await Jt.showRewardVideoAd(),await S,p(T)}catch(T){y(T)}});return await Promise.race([d,u])}catch(u){return console.error("Failed to show rewarded ad:",u),!1}finally{try{e&&await e.remove(),n&&await n.remove(),s&&await s.remove(),o&&await o.remove()}catch(u){console.warn("Error cleaning up rewarded listeners:",u)}}}async showBestMonetizingAd(){var e,n;return(e=this.config)!=null&&e.rewardedAdUnitId&&await this.showRewarded()?"rewarded":(n=this.config)!=null&&n.interstitialAdUnitId&&await this.showInterstitial()?"interstitial":"none"}isNativePlatform(){return tn.isNativePlatform()}isWebPlatform(){return tn.getPlatform()==="web"}getConfig(){return this.config}}const es=new JA,eS=({pack:i,isOpen:e,onClose:n,onStartDemo:s,onAdWatched:o})=>{const[u,d]=le.useState(!1),[m,p]=le.useState(null);if(!e)return null;const y=async()=>{d(!0),p(null);try{await es.showInterstitial()?(o&&o(i.id),s(),n()):p("No se pudo cargar el anuncio. Necesitas ver un anuncio para jugar el demo.")}catch(T){console.error("Error al mostrar anuncio:",T),p("Error al cargar el anuncio. Necesitas ver un anuncio para jugar el demo.")}finally{d(!1)}};return E.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 animate-fade-in",children:E.jsxs(Hn,{className:"w-full max-w-md relative",children:[E.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:E.jsx(UA,{className:"w-6 h-6"})}),E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"text-6xl mb-4",children:i.icon}),E.jsxs("h2",{className:"text-2xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-500",children:["Demo: ",i.name]}),E.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:E.jsxs("div",{className:"flex items-start gap-3 text-left",children:[E.jsx(jA,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),E.jsxs("div",{className:"text-sm text-blue-300",children:[E.jsx("p",{className:"mb-2",children:E.jsx("strong",{children:"Qu incluye el demo?"})}),E.jsxs("ul",{className:"space-y-1 text-xs",children:[E.jsx("li",{children:" Podrs probar 5 preguntas y 5 retos que siempre sern los mismos (el pack incluye muchos ms)"}),E.jsx("li",{children:" Puedes jugar de forma ilimitada"}),E.jsx("li",{children:" Solo necesitas ver un anuncio antes de cada partida"}),E.jsx("li",{children:" Perfecto para probar si te gusta el pack"})]})]})]})}),m&&E.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mb-4",children:E.jsx("p",{className:"text-yellow-400 text-sm",children:m})}),E.jsxs("div",{className:"flex flex-col gap-3",children:[E.jsx(Ge,{onClick:y,disabled:u,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:u?E.jsxs("div",{className:"flex items-center justify-center gap-2",children:[E.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Cargando anuncio..."]}):E.jsxs("div",{className:"flex items-center justify-center gap-2",children:[E.jsx("span",{role:"img","aria-label":"gem",children:""}),"Ver anuncio y jugar demo"]})}),E.jsx(Ge,{onClick:n,variant:"secondary",className:"w-full",disabled:u,children:"Volver atrs"})]}),E.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"Te gusta el pack? Al final de la partida podrs comprarlo completo."})]})]})})},tS=({players:i,currentPlayerIndex:e,onNextPlayer:n,onNewGame:s,questions:o,dares:u,roundConfig:d,gameProgress:m,onRoundEnd:p,onQuestionAsked:y,onDareCompleted:T})=>{const[A,S]=le.useState(null),[L,U]=le.useState(null),[K,F]=le.useState(new Set),[ae,se]=le.useState(new Set),ne=i[e],me=le.useMemo(()=>o.map((R,x)=>({item:R,index:x})),[o]),ce=le.useMemo(()=>u.map((R,x)=>({item:R,index:x})),[u]),_e=R=>{const x=R==="pregunta"?me:ce,D=R==="pregunta"?K:ae,P=R==="pregunta"?F:se,M=x.filter(I=>!D.has(I.index));if(M.length===0){P(new Set);const I=Math.floor(Math.random()*x.length),ke=x[I];S(ke.item),P(Pe=>new Set(Pe).add(ke.index))}else{const I=Math.floor(Math.random()*M.length),ke=M[I];S(ke.item),P(Pe=>new Set(Pe).add(ke.index))}U(R),R==="pregunta"&&y?y():R==="reto"&&T&&T()},C=()=>{S(null),U(null),e===i.length-1?m.currentRound+1>d.totalRounds?n():p():n()};return E.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center animate-fade-in",children:[E.jsxs(Hn,{className:"w-full max-w-lg min-h-[24rem] flex flex-col justify-between",children:[E.jsxs("div",{children:[E.jsx("div",{className:"mb-2",children:E.jsxs("p",{className:"text-sm text-gray-500",children:["Ronda ",m.currentRound," de ",d.totalRounds]})}),E.jsx("p",{className:"text-lg text-gray-400",children:"Turno de:"}),E.jsx("h2",{className:"text-4xl font-bold my-4 text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400",children:ne})]}),A?E.jsxs("div",{className:"animate-fade-in",children:[E.jsx("h3",{className:"text-2xl font-bold mb-6 text-cyan-400 capitalize",children:L}),E.jsx("p",{className:"text-xl md:text-2xl leading-relaxed",children:A.text})]}):E.jsxs("div",{className:"animate-fade-in",children:[E.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Verdad o Reto?"}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[E.jsx(Ge,{onClick:()=>_e("pregunta"),className:"w-full sm:w-auto",children:"Pregunta"}),E.jsx(Ge,{onClick:()=>_e("reto"),variant:"secondary",className:"w-full sm:w-auto",children:"Reto"})]})]}),E.jsx("div",{className:"mt-8",children:A&&E.jsx(Ge,{onClick:C,children:"Siguiente Jugador"})})]}),E.jsx("button",{onClick:s,className:"mt-6 text-sm text-gray-500 hover:text-gray-300 transition",children:"Empezar nuevo juego"})]})},nS=({onSelectRounds:i,onBack:e})=>{const n=[{value:5,label:"5 Rondas",description:"Partida rpida (15-20 min)"},{value:10,label:"10 Rondas",description:"Partida estndar (30-40 min)"},{value:15,label:"15 Rondas",description:"Partida larga (45-60 min)"}];return E.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:E.jsxs(Hn,{className:"w-full max-w-2xl text-center",children:[E.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Configurar Partida"}),E.jsx("p",{className:"text-gray-400 mb-8",children:"Elige cuntas rondas quieres jugar"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:n.map(s=>E.jsxs("div",{className:"relative p-6 rounded-lg border border-gray-600 bg-gray-800/50 hover:border-purple-500 transition-all duration-200 cursor-pointer group",onClick:()=>i(s.value),children:[E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:s.value}),E.jsx("div",{className:"text-lg font-semibold text-white mb-2",children:s.label}),E.jsx("div",{className:"text-sm text-gray-400",children:s.description})]}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]},s.value))}),E.jsx("div",{className:"text-sm text-gray-500 mb-6",children:" Al final de cada ronda se mostrar un anuncio breve"}),E.jsx("div",{className:"flex gap-4 justify-center",children:E.jsx(Ge,{onClick:e,variant:"secondary",className:"px-6",children:"Volver"})})]})})},iE=({dataAdSlot:i,className:e,style:n,fallbackContent:s,timeout:o=5e3,admobConfig:u})=>{const[d,m]=le.useState("loading"),[p,y]=le.useState(!1),[T,A]=le.useState(!1);return le.useEffect(()=>{let S,L=null,U=!0;return(async()=>{try{S=setTimeout(()=>{U&&d==="loading"&&(console.warn("Ad loading timeout reached"),m("timeout"),y(!0))},o);const F=tn.isNativePlatform();if(A(F),F&&u)try{await es.initialize({...u,bannerAdUnitId:i}),await es.showBannerAd(),U&&(m("loaded"),clearTimeout(S));return}catch(ae){console.warn("AdMob failed:",ae),U&&(m("error"),y(!0),clearTimeout(S));return}if(typeof window<"u"&&!F){let ae=0;const se=10,ne=()=>{if(U)if(window.adsbygoogle||ae>=se)try{(window.adsbygoogle=window.adsbygoogle||[]).push({}),setTimeout(()=>{if(U){if(L=document.querySelector(`[data-ad-slot="${i}"]`),L){const me=L.innerHTML;me&&me.trim()!==""?m("loaded"):(m("error"),y(!0))}else m("error"),y(!0);clearTimeout(S)}},2e3)}catch(me){console.error("Error loading AdSense ad:",me),U&&(m("error"),y(!0),clearTimeout(S))}else ae++,setTimeout(ne,200)};ne()}else F&&!u&&(console.warn("Native platform detected but no AdMob config provided"),U&&(m("error"),y(!0),clearTimeout(S)))}catch(F){console.error("Error in ad loading process:",F),U&&(m("error"),y(!0),clearTimeout(S))}})(),()=>{U=!1,S&&clearTimeout(S),T&&d==="loaded"&&es.removeBannerAd().catch(console.error)}},[i,o,u]),p?E.jsx("div",{className:`ad-fallback ${e||""}`,style:n,children:s||E.jsx("div",{className:"ad-fallback-message"})}):E.jsxs("div",{className:`ad-container ${e||""}`,style:n,children:[d==="loading"&&E.jsx("div",{className:"ad-loading",children:E.jsx("div",{className:"loading-spinner"})}),E.jsx("ins",{className:"adsbygoogle",style:{display:d==="loaded"?"block":"none",textAlign:"center",width:"100%",height:"auto"},"data-ad-client":"ca-pub-XXXXXXXXXXXXXXXX","data-ad-slot":i,"data-ad-format":"auto","data-full-width-responsive":"true"})]})},rS=({roundStats:i,currentRound:e,totalRounds:n,onContinue:s,onEndGame:o,hasNoAds:u=!1})=>{var U;const[d,m]=le.useState(!1),[p,y]=le.useState(!1),[T,A]=le.useState(5);le.useEffect(()=>{let K=!0;const F=async()=>{try{await es.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),m(!0);const ne=await es.showInterstitial();K&&(y(!0),console.log("Anuncio intersticial mostrado:",ne))}catch(ne){console.warn("Fallo al mostrar anuncio nativo:",ne),K&&(m(!0),y(!0))}};if(!u&&tn.isNativePlatform())return F(),()=>{K=!1};if(u){m(!0),y(!0);return}const ae=setTimeout(()=>{m(!0)},800);let se;return d&&!p&&(se=setInterval(()=>{A(ne=>ne<=1?(y(!0),se&&clearInterval(se),0):ne-1)},1e3)),()=>{clearTimeout(ae),se&&clearInterval(se)}},[u,d,p]);const S=e>=n,L=tn.isNativePlatform();return E.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:E.jsxs(Hn,{className:"w-full max-w-2xl text-center",children:[E.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-green-500 to-blue-500",children:S?"Partida Completada!":`Ronda ${i.roundNumber} Completada!`}),!S&&E.jsxs("p",{className:"text-gray-400 mb-6",children:["Ronda ",e," de ",n]}),E.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-6",children:[E.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Estadsticas de la Ronda"}),E.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[E.jsxs("div",{children:[E.jsx("div",{className:"text-2xl font-bold text-blue-400",children:i.questionsAsked}),E.jsx("div",{className:"text-sm text-gray-400",children:"Preguntas"})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-2xl font-bold text-purple-400",children:i.daresCompleted}),E.jsx("div",{className:"text-sm text-gray-400",children:"Retos"})]})]}),E.jsxs("div",{className:"mt-4",children:[E.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Jugadores participantes:"}),E.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:((U=i.playersParticipated)==null?void 0:U.map((K,F)=>E.jsx("span",{className:"px-3 py-1 bg-purple-600 text-white rounded-full text-sm",children:K},F)))||E.jsx("span",{className:"text-gray-400 text-sm",children:"No hay jugadores registrados"})})]})]}),!u&&E.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[E.jsxs("div",{className:"text-center mb-4",children:[E.jsx("div",{className:"text-lg font-semibold mb-2",children:" Anuncio"}),p?E.jsx("div",{className:"text-green-400 mb-4",children:" Anuncio completado"}):E.jsxs("div",{className:"mb-4",children:[E.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",L?"":`${T}s`]}),!L&&E.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:E.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-T)/5*100}%`}})})]})]}),!L&&E.jsx(iE,{dataAdSlot:"1234567890",className:"round-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},fallbackContent:E.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),E.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:S?E.jsx(Ge,{onClick:o,className:"px-8 py-3 text-lg",disabled:!u&&!p,children:"Ver Resultados Finales"}):E.jsxs(E.Fragment,{children:[E.jsx(Ge,{onClick:o,variant:"secondary",className:"px-6",disabled:!u&&!p,children:"Terminar Partida"}),E.jsx(Ge,{onClick:s,className:"px-8 py-3 text-lg",disabled:!u&&!p,children:"Siguiente Ronda"})]})}),!p&&E.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Los botones se habilitarn cuando termine el anuncio"})]})})},iS=({gameStats:i,players:e,onNewGame:n,onBackToMenu:s,hasNoAds:o=!1,isDemoMode:u=!1,demoPackId:d=null})=>{const m=i.gameEndTime&&i.gameStartTime?Math.round((i.gameEndTime.getTime()-i.gameStartTime.getTime())/1e3/60):0,p=i.totalRounds>0?Math.round(i.totalQuestions/i.totalRounds):0,y=i.totalRounds>0?Math.round(i.totalDares/i.totalRounds):0,[T,A]=le.useState(!1),[S,L]=le.useState(!1),[U,K]=le.useState(5),F=tn.isNativePlatform();return le.useEffect(()=>{let ae=!0;const se=async()=>{try{await es.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),L(!0);const ce=await es.showInterstitial();ae&&(A(!0),console.log("Anuncio intersticial al final de partida mostrado:",ce))}catch(ce){console.warn("Error mostrando anuncio al final de partida:",ce),ae&&(L(!0),A(!0))}};if(!o&&F)return se(),()=>{ae=!1};if(o){A(!0),L(!0);return}const ne=setTimeout(()=>L(!0),800);let me;return S&&!T&&(me=setInterval(()=>{K(ce=>ce<=1?(A(!0),me&&clearInterval(me),0):ce-1)},1e3)),()=>{clearTimeout(ne),me&&clearInterval(me)}},[o,F,S,T]),E.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:E.jsxs(Hn,{className:"w-full max-w-4xl text-center",children:[E.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500",children:" Partida Finalizada! "}),E.jsx("p",{className:"text-gray-400 mb-8 text-base sm:text-lg",children:"Esperamos que se hayan divertido mucho!"}),!o&&E.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[E.jsxs("div",{className:"text-center mb-4",children:[E.jsx("div",{className:"text-lg font-semibold mb-2",children:" Anuncio"}),T?E.jsx("div",{className:"text-green-400 mb-4",children:" Anuncio completado"}):E.jsxs("div",{className:"mb-4",children:[E.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",F?"":`${U}s`]}),!F&&E.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:E.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-U)/5*100}%`}})})]})]}),!F&&E.jsx(iE,{dataAdSlot:"1234567890",className:"game-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},fallbackContent:E.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[E.jsxs("div",{className:"bg-gradient-to-br from-blue-600/20 to-blue-800/20 rounded-lg p-6 border border-blue-500/30",children:[E.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-blue-400 mb-2",children:i.totalRounds}),E.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Rondas Jugadas"}),E.jsxs("div",{className:"text-sm text-gray-400",children:[m," minutos"]})]}),E.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-purple-800/20 rounded-lg p-6 border border-purple-500/30",children:[E.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-purple-400 mb-2",children:i.totalQuestions}),E.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Preguntas"}),E.jsxs("div",{className:"text-sm text-gray-400",children:[p," por ronda"]})]}),E.jsxs("div",{className:"bg-gradient-to-br from-pink-600/20 to-pink-800/20 rounded-lg p-6 border border-pink-500/30",children:[E.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-pink-400 mb-2",children:i.totalDares}),E.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Retos"}),E.jsxs("div",{className:"text-sm text-gray-400",children:[y," por ronda"]})]})]}),E.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[E.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Jugadores Participantes"}),E.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:e.map((ae,se)=>E.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full",children:[E.jsx("span",{className:"text-lg",children:""}),E.jsx("span",{className:"font-medium",children:ae})]},se))})]}),i.roundStats.length>0&&E.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[E.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Resumen por Rondas"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.roundStats.map((ae,se)=>{var ne;return E.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 border border-gray-600",children:[E.jsxs("div",{className:"text-base sm:text-lg font-semibold text-purple-400 mb-2",children:["Ronda ",ae.roundNumber]}),E.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[E.jsxs("div",{children:[" ",ae.questionsAsked," preguntas"]}),E.jsxs("div",{children:[" ",ae.daresCompleted," retos"]}),E.jsxs("div",{children:[" ",((ne=ae.playersParticipated)==null?void 0:ne.length)||0," jugadores"]})]})]},se)})})]}),u?E.jsxs("div",{className:"bg-gradient-to-r from-yellow-600/20 to-orange-600/20 rounded-lg p-6 mb-8 border border-yellow-500/30",children:[E.jsx("div",{className:"text-3xl mb-3",children:""}),E.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"Demo Completado!"}),E.jsx("p",{className:"text-gray-300 mb-4",children:"Te gust este pack? Hay muchas ms preguntas y retos esperndote!"}),E.jsxs("div",{className:"bg-yellow-500/10 rounded-lg p-4 border border-yellow-500/30",children:[E.jsx("p",{className:"text-yellow-200 font-medium mb-2",children:" Sabas que?"}),E.jsx("p",{className:"text-gray-300 text-sm",children:"El pack completo incluye ms de 50 preguntas y retos nicos, perfectos para cualquier ocasin!"})]}),E.jsx("div",{className:"mt-4",children:E.jsx(Ge,{onClick:s,className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-semibold rounded-lg",children:" Ir a la Tienda!"})})]}):E.jsxs("div",{className:"bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-lg p-6 mb-8 border border-purple-500/30",children:[E.jsx("div",{className:"text-2xl mb-2",children:""}),E.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Gracias por jugar!"}),E.jsx("p",{className:"text-gray-300",children:"Esperamos que hayan creado recuerdos increbles. No olviden compartir sus mejores momentos!"})]}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[E.jsx(Ge,{onClick:n,className:"px-8 py-3 text-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",disabled:!o&&!T,children:" Nueva Partida"}),E.jsx(Ge,{onClick:s,variant:"secondary",className:"px-8 py-3 text-lg",disabled:!o&&!T,children:" Men Principal"})]}),E.jsxs("div",{className:"mt-8 text-xs text-gray-500",children:[E.jsx("p",{children:"Te gust el juego? Comprtelo con tus amigos!"}),E.jsx("p",{className:"mt-1",children:"Verdad o Reto - La diversin nunca termina"})]})]})})},sS=()=>{};var Ev={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},aS=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],d=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},aE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],d=o+1<i.length,m=d?i[o+1]:0,p=o+2<i.length,y=p?i[o+2]:0,T=u>>2,A=(u&3)<<4|m>>4;let S=(m&15)<<2|y>>6,L=y&63;p||(L=64,d||(S=64)),s.push(n[T],n[A],n[S],n[L])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(sE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):aS(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const A=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||y==null||A==null)throw new oS;const S=u<<2|m>>4;if(s.push(S),y!==64){const L=m<<4&240|y>>2;if(s.push(L),A!==64){const U=y<<6&192|A;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class oS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lS=function(i){const e=sE(i);return aE.encodeByteArray(e,!0)},uh=function(i){return lS(i).replace(/\./g,"")},oE=function(i){try{return aE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=()=>uS().__FIREBASE_DEFAULTS__,hS=()=>{if(typeof process>"u"||typeof Ev>"u")return;const i=Ev.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},dS=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&oE(i[1]);return e&&JSON.parse(e)},Nh=()=>{try{return sS()||cS()||hS()||dS()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},lE=i=>{var e,n;return(n=(e=Nh())==null?void 0:e.emulatorHosts)==null?void 0:n[i]},fS=i=>{const e=lE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},uE=()=>{var i;return(i=Nh())==null?void 0:i.config},cE=i=>{var e;return(e=Nh())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hE(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[uh(JSON.stringify(n)),uh(JSON.stringify(d)),""].join(".")}const Yl={};function pS(){const i={prod:[],emulator:[]};for(const e of Object.keys(Yl))Yl[e]?i.emulator.push(e):i.prod.push(e);return i}function yS(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Tv=!1;function dE(i,e){if(typeof window>"u"||typeof document>"u"||!vo(window.location.host)||Yl[i]===e||Yl[i]||Tv)return;Yl[i]=e;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=pS().prod.length>0;function d(){const S=document.getElementById(s);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,L){S.setAttribute("width","24"),S.setAttribute("id",L),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Tv=!0,d()},S}function T(S,L){S.setAttribute("id",L),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function A(){const S=yS(s),L=n("text"),U=document.getElementById(L)||document.createElement("span"),K=n("learnmore"),F=document.getElementById(K)||document.createElement("a"),ae=n("preprendIcon"),se=document.getElementById(ae)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ne=S.element;m(ne),T(F,K);const me=y();p(se,ae),ne.append(se,U,F,me),document.body.appendChild(ne)}u?(U.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _S(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function vS(){var e;const i=(e=Nh())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ES(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TS(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function wS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bS(){const i=an();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function AS(){return!vS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SS(){try{return typeof indexedDB=="object"}catch{return!1}}function RS(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="FirebaseError";class _i extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=xS,Object.setPrototypeOf(this,_i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uu.prototype.create)}}class uu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?IS(u,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new _i(o,m,s)}}function IS(i,e){return i.replace(CS,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const CS=/\{\$([^}]+)}/g;function NS(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ea(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],d=e[o];if(wv(u)&&wv(d)){if(!ea(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function wv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ql(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Bl(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function DS(i,e){const n=new OS(i,e);return n.subscribe.bind(n)}class OS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");PS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=rm),o.error===void 0&&(o.error=rm),o.complete===void 0&&(o.complete=rm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PS(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function rm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(i){return i&&i._delegate?i._delegate:i}class ta{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new mS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kS(e))try{this.getOrInitializeService({instanceIdentifier:$s})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=$s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$s){return this.instances.has(e)}getOptions(e=$s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:MS(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=$s){return this.component?this.component.multipleInstances?e:$s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MS(i){return i===$s?void 0:i}function kS(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new VS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Le||(Le={}));const US={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},jS=Le.INFO,zS={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},qS=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=zS[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Km{constructor(e){this.name=e,this._logLevel=jS,this._logHandler=qS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?US[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const BS=(i,e)=>e.some(n=>i instanceof n);let bv,Av;function HS(){return bv||(bv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FS(){return Av||(Av=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fE=new WeakMap,_m=new WeakMap,mE=new WeakMap,im=new WeakMap,Ym=new WeakMap;function GS(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(ts(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&fE.set(n,i)}).catch(()=>{}),Ym.set(e,i),e}function QS(i){if(_m.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});_m.set(i,e)}let vm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return _m.get(i);if(e==="objectStoreNames")return i.objectStoreNames||mE.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ts(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function KS(i){vm=i(vm)}function YS(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(sm(this),e,...n);return mE.set(s,e.sort?e.sort():[e]),ts(s)}:FS().includes(i)?function(...e){return i.apply(sm(this),e),ts(fE.get(this))}:function(...e){return ts(i.apply(sm(this),e))}}function XS(i){return typeof i=="function"?YS(i):(i instanceof IDBTransaction&&QS(i),BS(i,HS())?new Proxy(i,vm):i)}function ts(i){if(i instanceof IDBRequest)return GS(i);if(im.has(i))return im.get(i);const e=XS(i);return e!==i&&(im.set(i,e),Ym.set(e,i)),e}const sm=i=>Ym.get(i);function $S(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(i,e),m=ts(d);return s&&d.addEventListener("upgradeneeded",p=>{s(ts(d.result),p.oldVersion,p.newVersion,ts(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const WS=["get","getKey","getAll","getAllKeys","count"],ZS=["put","add","delete","clear"],am=new Map;function Sv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(am.get(e))return am.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=ZS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||WS.includes(n)))return;const u=async function(d,...m){const p=this.transaction(d,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&p.done]))[0]};return am.set(e,u),u}KS(i=>({...i,get:(e,n,s)=>Sv(e,n)||i.get(e,n,s),has:(e,n)=>!!Sv(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(e1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function e1(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Em="@firebase/app",Rv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new Km("@firebase/app"),t1="@firebase/app-compat",n1="@firebase/analytics-compat",r1="@firebase/analytics",i1="@firebase/app-check-compat",s1="@firebase/app-check",a1="@firebase/auth",o1="@firebase/auth-compat",l1="@firebase/database",u1="@firebase/data-connect",c1="@firebase/database-compat",h1="@firebase/functions",d1="@firebase/functions-compat",f1="@firebase/installations",m1="@firebase/installations-compat",g1="@firebase/messaging",p1="@firebase/messaging-compat",y1="@firebase/performance",_1="@firebase/performance-compat",v1="@firebase/remote-config",E1="@firebase/remote-config-compat",T1="@firebase/storage",w1="@firebase/storage-compat",b1="@firebase/firestore",A1="@firebase/ai",S1="@firebase/firestore-compat",R1="firebase",x1="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="[DEFAULT]",I1={[Em]:"fire-core",[t1]:"fire-core-compat",[r1]:"fire-analytics",[n1]:"fire-analytics-compat",[s1]:"fire-app-check",[i1]:"fire-app-check-compat",[a1]:"fire-auth",[o1]:"fire-auth-compat",[l1]:"fire-rtdb",[u1]:"fire-data-connect",[c1]:"fire-rtdb-compat",[h1]:"fire-fn",[d1]:"fire-fn-compat",[f1]:"fire-iid",[m1]:"fire-iid-compat",[g1]:"fire-fcm",[p1]:"fire-fcm-compat",[y1]:"fire-perf",[_1]:"fire-perf-compat",[v1]:"fire-rc",[E1]:"fire-rc-compat",[T1]:"fire-gcs",[w1]:"fire-gcs-compat",[b1]:"fire-fst",[S1]:"fire-fst-compat",[A1]:"fire-vertex","fire-js":"fire-js",[R1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Map,C1=new Map,wm=new Map;function xv(i,e){try{i.container.addComponent(e)}catch(n){fi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function co(i){const e=i.name;if(wm.has(e))return fi.debug(`There were multiple attempts to register component ${e}.`),!1;wm.set(e,i);for(const n of ch.values())xv(n,i);for(const n of C1.values())xv(n,i);return!0}function Xm(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function pn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new uu("app","Firebase",N1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ta("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=x1;function gE(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:Tm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ns.create("bad-app-name",{appName:String(o)});if(n||(n=uE()),!n)throw ns.create("no-options");const u=ch.get(o);if(u){if(ea(n,u.options)&&ea(s,u.config))return u;throw ns.create("duplicate-app",{appName:o})}const d=new LS(o);for(const p of wm.values())d.addComponent(p);const m=new D1(n,s,d);return ch.set(o,m),m}function pE(i=Tm){const e=ch.get(i);if(!e&&i===Tm&&uE())return gE();if(!e)throw ns.create("no-app",{appName:i});return e}function rs(i,e,n){let s=I1[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fi.warn(d.join(" "));return}co(new ta(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="firebase-heartbeat-database",P1=1,eu="firebase-heartbeat-store";let om=null;function yE(){return om||(om=$S(O1,P1,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(eu)}catch(n){console.warn(n)}}}}).catch(i=>{throw ns.create("idb-open",{originalErrorMessage:i.message})})),om}async function V1(i){try{const n=(await yE()).transaction(eu),s=await n.objectStore(eu).get(_E(i));return await n.done,s}catch(e){if(e instanceof _i)fi.warn(e.message);else{const n=ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fi.warn(n.message)}}}async function Iv(i,e){try{const s=(await yE()).transaction(eu,"readwrite");await s.objectStore(eu).put(e,_E(i)),await s.done}catch(n){if(n instanceof _i)fi.warn(n.message);else{const s=ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fi.warn(s.message)}}}function _E(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=1024,k1=30;class L1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new j1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Cv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>k1){const d=z1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){fi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Cv(),{heartbeatsToSend:s,unsentEntries:o}=U1(this._heartbeatsCache.heartbeats),u=uh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return fi.warn(n),""}}}function Cv(){return new Date().toISOString().substring(0,10)}function U1(i,e=M1){const n=[];let s=i.slice();for(const o of i){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),Nv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Nv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class j1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SS()?RS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await V1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Nv(i){return uh(JSON.stringify({version:2,heartbeats:i})).length}function z1(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(i){co(new ta("platform-logger",e=>new JS(e),"PRIVATE")),co(new ta("heartbeat",e=>new L1(e),"PRIVATE")),rs(Em,Rv,i),rs(Em,Rv,"esm2020"),rs("fire-js","")}q1("");function vE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const B1=vE,EE=new uu("auth","Firebase",vE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Km("@firebase/auth");function H1(i,...e){hh.logLevel<=Le.WARN&&hh.warn(`Auth (${Eo}): ${i}`,...e)}function Jc(i,...e){hh.logLevel<=Le.ERROR&&hh.error(`Auth (${Eo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(i,...e){throw Wm(i,...e)}function Jn(i,...e){return Wm(i,...e)}function $m(i,e,n){const s={...B1(),[e]:n};return new uu("auth","Firebase",s).create(e,{appName:i.name})}function wr(i){return $m(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function F1(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Fn(i,"argument-error"),$m(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wm(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return EE.create(i,...e)}function be(i,e,...n){if(!i)throw Wm(e,...n)}function ci(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Jc(e),new Error(e)}function mi(i,e){i||ci(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function G1(){return Dv()==="http:"||Dv()==="https:"}function Dv(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(G1()||TS()||"connection"in navigator)?navigator.onLine:!0}function K1(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n){this.shortDelay=e,this.longDelay=n,mi(n>e,"Short delay should be less than long delay!"),this.isMobile=_S()||wS()}get(){return Q1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(i,e){mi(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$1=new hu(3e4,6e4);function vi(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Dr(i,e,n,s,o={}){return wE(i,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const m=cu({key:i.config.apiKey,...d}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:p,...u};return ES()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&vo(i.emulatorConfig.host)&&(y.credentials="include"),TE.fetch()(await bE(i,i.config.apiHost,n,m),y)})}async function wE(i,e,n){i._canInitEmulator=!1;const s={...Y1,...e};try{const o=new Z1(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Gc(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gc(i,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw Gc(i,"email-already-in-use",d);if(p==="USER_DISABLED")throw Gc(i,"user-disabled",d);const T=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw $m(i,T,y);Fn(i,T)}}catch(o){if(o instanceof _i)throw o;Fn(i,"network-request-failed",{message:String(o)})}}async function du(i,e,n,s,o={}){const u=await Dr(i,e,n,s,o);return"mfaPendingCredential"in u&&Fn(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function bE(i,e,n,s){const o=`${e}${n}?${s}`,u=i,d=u.config.emulator?Zm(i.config,o):`${i.config.apiScheme}://${o}`;return X1.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function W1(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Z1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Jn(this.auth,"network-request-failed")),$1.get())})}}function Gc(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Jn(i,e,s);return o.customData._tokenResponse=n,o}function Ov(i){return i!==void 0&&i.enterprise!==void 0}class J1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return W1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function eR(i,e){return Dr(i,"GET","/v2/recaptchaConfig",vi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(i,e){return Dr(i,"POST","/v1/accounts:delete",e)}async function dh(i,e){return Dr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nR(i,e=!1){const n=It(i),s=await n.getIdToken(e),o=Jm(s);be(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Xl(lm(o.auth_time)),issuedAtTime:Xl(lm(o.iat)),expirationTime:Xl(lm(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function lm(i){return Number(i)*1e3}function Jm(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Jc("JWT malformed, contained fewer than 3 sections"),null;try{const o=oE(n);return o?JSON.parse(o):(Jc("Failed to decode base64 JWT payload"),null)}catch(o){return Jc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Pv(i){const e=Jm(i);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ho(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof _i&&rR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function rR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xl(this.lastLoginAt),this.creationTime=Xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fh(i){var A;const e=i.auth,n=await i.getIdToken(),s=await ho(i,dh(e,{idToken:n}));be(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=(A=o.providerUserInfo)!=null&&A.length?AE(o.providerUserInfo):[],d=aR(i.providerData,u),m=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!(d!=null&&d.length),y=m?p:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Am(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,T)}async function sR(i){const e=It(i);await fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function AE(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(i,e){const n=await wE(i,{},async()=>{const s=cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,d=await bE(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return i.emulatorConfig&&vo(i.emulatorConfig.host)&&(p.credentials="include"),TE.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lR(i,e){return Dr(i,"POST","/v2/accounts:revokeToken",vi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=Pv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await oR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new io;return s&&(be(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(be(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(be(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new io,this.toJSON())}_performRefresh(){return ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(i,e){be(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Zn{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new iR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Am(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await ho(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nR(this,e)}reload(){return sR(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await fh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pn(this.auth.app))return Promise.reject(wr(this.auth));const e=await this.getIdToken();return await ho(this,tR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:A,emailVerified:S,isAnonymous:L,providerData:U,stsTokenManager:K}=n;be(A&&K,e,"internal-error");const F=io.fromJSON(this.name,K);be(typeof A=="string",e,"internal-error"),Xi(s,e.name),Xi(o,e.name),be(typeof S=="boolean",e,"internal-error"),be(typeof L=="boolean",e,"internal-error"),Xi(u,e.name),Xi(d,e.name),Xi(m,e.name),Xi(p,e.name),Xi(y,e.name),Xi(T,e.name);const ae=new Zn({uid:A,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:L,photoURL:d,phoneNumber:u,tenantId:m,stsTokenManager:F,createdAt:y,lastLoginAt:T});return U&&Array.isArray(U)&&(ae.providerData=U.map(se=>({...se}))),p&&(ae._redirectEventId=p),ae}static async _fromIdTokenResponse(e,n,s=!1){const o=new io;o.updateFromServerResponse(n);const u=new Zn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await fh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];be(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?AE(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new io;m.updateFromIdToken(s);const p=new Zn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Am(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=new Map;function hi(i){mi(i instanceof Function,"Expected a class definition");let e=Vv.get(i);return e?(mi(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Vv.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}SE.type="NONE";const Mv=SE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(i,e,n){return`firebase:${i}:${e}:${n}`}class so{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=eh(this.userKey,o.apiKey,u),this.fullPersistenceKey=eh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await dh(this.auth,{idToken:e}).catch(()=>{});return n?Zn._fromGetAccountInfoResponse(this.auth,n,e):null}return Zn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new so(hi(Mv),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||hi(Mv);const d=eh(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const T=await y._get(d);if(T){let A;if(typeof T=="string"){const S=await dh(e,{idToken:T}).catch(()=>{});if(!S)break;A=await Zn._fromGetAccountInfoResponse(e,S,T)}else A=Zn._fromJSON(e,T);y!==u&&(m=A),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new so(u,e,s):(u=p[0],m&&await u._set(d,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new so(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DE(e))return"Blackberry";if(OE(e))return"Webos";if(xE(e))return"Safari";if((e.includes("chrome/")||IE(e))&&!e.includes("edge/"))return"Chrome";if(NE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function RE(i=an()){return/firefox\//i.test(i)}function xE(i=an()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IE(i=an()){return/crios\//i.test(i)}function CE(i=an()){return/iemobile/i.test(i)}function NE(i=an()){return/android/i.test(i)}function DE(i=an()){return/blackberry/i.test(i)}function OE(i=an()){return/webos/i.test(i)}function eg(i=an()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function uR(i=an()){var e;return eg(i)&&!!((e=window.navigator)!=null&&e.standalone)}function cR(){return bS()&&document.documentMode===10}function PE(i=an()){return eg(i)||NE(i)||OE(i)||DE(i)||/windows phone/i.test(i)||CE(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(i,e=[]){let n;switch(i){case"Browser":n=kv(an());break;case"Worker":n=`${kv(an())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Eo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,m)=>{try{const p=e(u);d(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(i,e={}){return Dr(i,"GET","/v2/passwordPolicy",vi(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=6;class mR{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??fR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lv(this),this.idTokenSubscription=new Lv(this),this.beforeStateQueue=new hR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hi(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await so.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dh(this,{idToken:e}),s=await Zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(pn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(u=this.redirectUser)==null?void 0:u._redirectEventId,m=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===m)&&(p!=null&&p.user)&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(d){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await fh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=K1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pn(this.app))return Promise.reject(wr(this));const n=e?It(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pn(this.app)?Promise.reject(wr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pn(this.app)?Promise.reject(wr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dR(this),n=new mR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await lR(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hi(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&H1(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Or(i){return It(i)}class Lv{constructor(e){this.auth=e,this.observer=null,this.addObserver=DS(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pR(i){Dh=i}function ME(i){return Dh.loadJS(i)}function yR(){return Dh.recaptchaEnterpriseScript}function _R(){return Dh.gapiScript}function vR(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class ER{constructor(){this.enterprise=new TR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class TR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const wR="recaptcha-enterprise",kE="NO_RECAPTCHA";class bR{constructor(e){this.type=wR,this.auth=Or(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,m)=>{eR(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new J1(p);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(p=>{m(p)})})}function o(u,d,m){const p=window.grecaptcha;Ov(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(kE)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ER().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{s(this.auth).then(m=>{if(!n&&Ov(window.grecaptcha))o(m,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=yR();p.length!==0&&(p+=m),ME(p).then(()=>{o(m,u,d)}).catch(y=>{d(y)})}}).catch(m=>{d(m)})})}}async function Uv(i,e,n,s=!1,o=!1){const u=new bR(i);let d;if(o)d=kE;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function mh(i,e,n,s,o){var u;if((u=i._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Uv(i,e,n,n==="getOobCode");return s(i,d)}else return s(i,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Uv(i,e,n,n==="getOobCode");return s(i,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(i,e){const n=Xm(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ea(u,e??{}))return o;Fn(o,"already-initialized")}return n.initialize({options:e})}function SR(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(hi);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function RR(i,e,n){const s=Or(i);be(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=LE(e),{host:d,port:m}=xR(e),p=m===null?"":`:${m}`,y={url:`${u}//${d}${p}/`},T=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){be(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),be(ea(y,s.config.emulator)&&ea(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,vo(d)?(hE(`${u}//${d}${p}`),dE("Auth",!0)):IR()}function LE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function xR(i){const e=LE(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:jv(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:jv(d)}}}function jv(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function IR(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ci("not implemented")}_getIdTokenResponse(e){return ci("not implemented")}_linkToIdToken(e,n){return ci("not implemented")}_getReauthenticationResolver(e){return ci("not implemented")}}async function CR(i,e){return Dr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(i,e){return du(i,"POST","/v1/accounts:signInWithPassword",vi(i,e))}async function UE(i,e){return Dr(i,"POST","/v1/accounts:sendOobCode",vi(i,e))}async function DR(i,e){return UE(i,e)}async function OR(i,e){return UE(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(i,e){return du(i,"POST","/v1/accounts:signInWithEmailLink",vi(i,e))}async function VR(i,e){return du(i,"POST","/v1/accounts:signInWithEmailLink",vi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends tg{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new tu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new tu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mh(e,n,"signInWithPassword",NR);case"emailLink":return PR(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mh(e,s,"signUpPassword",CR);case"emailLink":return VR(e,{idToken:n,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(i,e){return du(i,"POST","/v1/accounts:signInWithIdp",vi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="http://localhost";class na extends tg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new na(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const d=new na(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return ao(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ao(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ao(e,n)}buildRequest(){const e={requestUri:MR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=cu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LR(i){const e=ql(Bl(i)).link,n=e?ql(Bl(e)).deep_link_id:null,s=ql(Bl(i)).deep_link_id;return(s?ql(Bl(s)).link:null)||s||n||e||i}class ng{constructor(e){const n=ql(Bl(e)),s=n.apiKey??null,o=n.oobCode??null,u=kR(n.mode??null);be(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=LR(e);try{return new ng(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.providerId=To.PROVIDER_ID}static credential(e,n){return tu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=ng.parseLink(n);return be(s,"argument-error"),tu._fromEmailAndCode(e,s.code,s.tenantId)}}To.PROVIDER_ID="password";To.EMAIL_PASSWORD_SIGN_IN_METHOD="password";To.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends rg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends fu{constructor(){super("facebook.com")}static credential(e){return na._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $i.credential(e.oauthAccessToken)}catch{return null}}}$i.FACEBOOK_SIGN_IN_METHOD="facebook.com";$i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends fu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return na._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ui.credential(n,s)}catch{return null}}}ui.GOOGLE_SIGN_IN_METHOD="google.com";ui.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends fu{constructor(){super("github.com")}static credential(e){return na._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.GITHUB_SIGN_IN_METHOD="github.com";Wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends fu{constructor(){super("twitter.com")}static credential(e,n){return na._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Zi.credential(n,s)}catch{return null}}}Zi.TWITTER_SIGN_IN_METHOD="twitter.com";Zi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jE(i,e){return du(i,"POST","/v1/accounts:signUp",vi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Zn._fromIdTokenResponse(e,s,o),d=zv(s);return new gi({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=zv(s);return new gi({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function zv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(i){var o;if(pn(i.app))return Promise.reject(wr(i));const e=Or(i);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new gi({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await jE(e,{returnSecureToken:!0}),s=await gi._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends _i{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,gh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new gh(e,n,s,o)}}function zE(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?gh._fromErrorAndOperation(i,u,e,s):u})}async function jR(i,e,n=!1){const s=await ho(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return gi._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(i,e,n=!1){const{auth:s}=i;if(pn(s.app))return Promise.reject(wr(s));const o="reauthenticate";try{const u=await ho(i,zE(s,o,e,i),n);be(u.idToken,s,"internal-error");const d=Jm(u.idToken);be(d,s,"internal-error");const{sub:m}=d;return be(i.uid===m,s,"user-mismatch"),gi._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Fn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qE(i,e,n=!1){if(pn(i.app))return Promise.reject(wr(i));const s="signIn",o=await zE(i,s,e),u=await gi._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function qR(i,e){return qE(Or(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BE(i){const e=Or(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BR(i,e,n){const s=Or(i);await mh(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",OR)}async function HR(i,e,n){if(pn(i.app))return Promise.reject(wr(i));const s=Or(i),d=await mh(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jE).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&BE(i),p}),m=await gi._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function FR(i,e,n){return pn(i.app)?Promise.reject(wr(i)):qR(It(i),To.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&BE(i),s})}async function HE(i,e){const n=It(i),o={requestType:"VERIFY_EMAIL",idToken:await i.getIdToken()},{email:u}=await DR(n.auth,o);u!==i.email&&await i.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(i,e){return Dr(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(i,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=It(i),u={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},d=await ho(s,GR(s.auth,u));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const m=s.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function KR(i,e,n,s){return It(i).onIdTokenChanged(e,n,s)}function YR(i,e,n){return It(i).beforeAuthStateChanged(e,n)}function XR(i,e,n,s){return It(i).onAuthStateChanged(e,n,s)}function $R(i){return It(i).signOut()}const ph="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ph,"1"),this.storage.removeItem(ph),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=1e3,ZR=10;class GE extends FE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);cR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ZR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},WR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}GE.type="LOCAL";const JR=GE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE extends FE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}QE.type="SESSION";const KE=QE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Oh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async y=>y(n.origin,u)),p=await ex(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,p)=>{const y=ig("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(A){const S=A;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(S.data.response);break;default:clearTimeout(T),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(){return window}function nx(i){br().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(){return typeof br().WorkerGlobalScope<"u"&&typeof br().importScripts=="function"}async function rx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ix(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function sx(){return YE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="firebaseLocalStorageDb",ax=1,yh="firebaseLocalStorage",$E="fbase_key";class mu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ph(i,e){return i.transaction([yh],e?"readwrite":"readonly").objectStore(yh)}function ox(){const i=indexedDB.deleteDatabase(XE);return new mu(i).toPromise()}function Sm(){const i=indexedDB.open(XE,ax);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(yh,{keyPath:$E})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(yh)?e(s):(s.close(),await ox(),e(await Sm()))})})}async function qv(i,e,n){const s=Ph(i,!0).put({[$E]:e,value:n});return new mu(s).toPromise()}async function lx(i,e){const n=Ph(i,!1).get(e),s=await new mu(n).toPromise();return s===void 0?null:s.value}function Bv(i,e){const n=Ph(i,!0).delete(e);return new mu(n).toPromise()}const ux=800,cx=3;class WE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>cx)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(sx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await rx(),!this.activeServiceWorker)return;this.sender=new tx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ix()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sm();return await qv(e,ph,"1"),await Bv(e,ph),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>qv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>lx(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Bv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Ph(o,!1).getAll();return new mu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ux)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WE.type="LOCAL";const hx=WE;new hu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(i,e){return e?hi(e):(be(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg extends tg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ao(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ao(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dx(i){return qE(i.auth,new sg(i),i.bypassAuthState)}function fx(i){const{auth:e,user:n}=i;return be(n,e,"internal-error"),zR(n,new sg(i),i.bypassAuthState)}async function mx(i){const{auth:e,user:n}=i;return be(n,e,"internal-error"),jR(n,new sg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dx;case"linkViaPopup":case"linkViaRedirect":return mx;case"reauthViaPopup":case"reauthViaRedirect":return fx;default:Fn(this.auth,"internal-error")}}resolve(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=new hu(2e3,1e4);async function px(i,e,n){if(pn(i.app))return Promise.reject(Jn(i,"operation-not-supported-in-this-environment"));const s=Or(i);F1(i,e,rg);const o=ZE(s,n);return new Ws(s,"signInViaPopup",e,o).executeNotNull()}class Ws extends JE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Ws.currentPopupAction&&Ws.currentPopupAction.cancel(),Ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){mi(this.filter.length===1,"Popup operations only handle one event");const e=ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gx.get())};e()}}Ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx="pendingRedirect",th=new Map;class _x extends JE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=th.get(this.auth._key());if(!e){try{const s=await vx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}th.set(this.auth._key(),e)}return this.bypassAuthState||th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vx(i,e){const n=wx(e),s=Tx(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function Ex(i,e){th.set(i._key(),e)}function Tx(i){return hi(i._redirectPersistence)}function wx(i){return eh(yx,i.config.apiKey,i.name)}async function bx(i,e,n=!1){if(pn(i.app))return Promise.reject(wr(i));const s=Or(i),o=ZE(s,e),d=await new _x(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=600*1e3;class Sx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Rx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!eT(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Jn(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ax&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hv(e))}saveEventToCache(e){this.cachedEventUids.add(Hv(e)),this.lastProcessedEventTime=Date.now()}}function Hv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function eT({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Rx(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eT(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xx(i,e={}){return Dr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cx=/^https?/;async function Nx(i){if(i.config.emulator)return;const{authorizedDomains:e}=await xx(i);for(const n of e)try{if(Dx(n))return}catch{}Fn(i,"unauthorized-domain")}function Dx(i){const e=bm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!Cx.test(n))return!1;if(Ix.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=new hu(3e4,6e4);function Fv(){const i=br().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function Px(i){return new Promise((e,n)=>{var o,u,d;function s(){Fv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fv(),n(Jn(i,"network-request-failed"))},timeout:Ox.get()})}if((u=(o=br().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((d=br().gapi)!=null&&d.load)s();else{const m=vR("iframefcb");return br()[m]=()=>{gapi.load?s():n(Jn(i,"network-request-failed"))},ME(`${_R()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw nh=null,e})}let nh=null;function Vx(i){return nh=nh||Px(i),nh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=new hu(5e3,15e3),kx="__/auth/iframe",Lx="emulator/auth/iframe",Ux={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zx(i){const e=i.config;be(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Zm(e,Lx):`https://${i.config.authDomain}/${kx}`,s={apiKey:e.apiKey,appName:i.name,v:Eo},o=jx.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${cu(s).slice(1)}`}async function qx(i){const e=await Vx(i),n=br().gapi;return be(n,i,"internal-error"),e.open({where:document.body,url:zx(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ux,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=Jn(i,"network-request-failed"),m=br().setTimeout(()=>{u(d)},Mx.get());function p(){br().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Hx=500,Fx=600,Gx="_blank",Qx="http://localhost";class Gv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Kx(i,e,n,s=Hx,o=Fx){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...Bx,width:s.toString(),height:o.toString(),top:u,left:d},y=an().toLowerCase();n&&(m=IE(y)?Gx:n),RE(y)&&(e=e||Qx,p.scrollbars="yes");const T=Object.entries(p).reduce((S,[L,U])=>`${S}${L}=${U},`,"");if(uR(y)&&m!=="_self")return Yx(e||"",m),new Gv(null);const A=window.open(e||"",m,T);be(A,i,"popup-blocked");try{A.focus()}catch{}return new Gv(A)}function Yx(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="__/auth/handler",$x="emulator/auth/handler",Wx=encodeURIComponent("fac");async function Qv(i,e,n,s,o,u){be(i.config.authDomain,i,"auth-domain-config-required"),be(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Eo,eventId:o};if(e instanceof rg){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",NS(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,A]of Object.entries({}))d[T]=A}if(e instanceof fu){const T=e.getScopes().filter(A=>A!=="");T.length>0&&(d.scopes=T.join(","))}i.tenantId&&(d.tid=i.tenantId);const m=d;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const p=await i._getAppCheckToken(),y=p?`#${Wx}=${encodeURIComponent(p)}`:"";return`${Zx(i)}?${cu(m).slice(1)}${y}`}function Zx({config:i}){return i.emulator?Zm(i,$x):`https://${i.authDomain}/${Xx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="webStorageSupport";class Jx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KE,this._completeRedirectFn=bx,this._overrideRedirectResult=Ex}async _openPopup(e,n,s,o){var d;mi((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const u=await Qv(e,n,s,bm(),o);return Kx(e,u,ig())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await Qv(e,n,s,bm(),o);return nx(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(mi(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await qx(e),s=new Sx(e);return n.register("authEvent",o=>(be(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(um,{type:um},o=>{var d;const u=(d=o==null?void 0:o[0])==null?void 0:d[um];u!==void 0&&n(!!u),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Nx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return PE()||xE()||eg()}}const eI=Jx;var Kv="@firebase/auth",Yv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rI(i){co(new ta("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;be(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VE(i)},y=new gR(s,o,u,p);return SR(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),co(new ta("auth-internal",e=>{const n=Or(e.getProvider("auth").getImmediate());return(s=>new tI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rs(Kv,Yv,nI(i)),rs(Kv,Yv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=300,sI=cE("authIdTokenMaxAge")||iI;let Xv=null;const aI=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>sI)return;const o=n==null?void 0:n.token;Xv!==o&&(Xv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function oI(i=pE()){const e=Xm(i,"auth");if(e.isInitialized())return e.getImmediate();const n=AR(i,{popupRedirectResolver:eI,persistence:[hx,JR,KE]}),s=cE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=aI(u.toString());YR(n,d,()=>d(n.currentUser)),KR(n,m=>d(m))}}const o=lE("auth");return o&&RR(n,`http://${o}`),n}function lI(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}pR({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Jn("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",lI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rI("Browser");var $v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var is,tT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,R){function x(){}x.prototype=R.prototype,C.D=R.prototype,C.prototype=new x,C.prototype.constructor=C,C.C=function(D,P,M){for(var I=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)I[ke-2]=arguments[ke];return R.prototype[P].apply(D,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,R,x){x||(x=0);var D=Array(16);if(typeof R=="string")for(var P=0;16>P;++P)D[P]=R.charCodeAt(x++)|R.charCodeAt(x++)<<8|R.charCodeAt(x++)<<16|R.charCodeAt(x++)<<24;else for(P=0;16>P;++P)D[P]=R[x++]|R[x++]<<8|R[x++]<<16|R[x++]<<24;R=C.g[0],x=C.g[1],P=C.g[2];var M=C.g[3],I=R+(M^x&(P^M))+D[0]+3614090360&4294967295;R=x+(I<<7&4294967295|I>>>25),I=M+(P^R&(x^P))+D[1]+3905402710&4294967295,M=R+(I<<12&4294967295|I>>>20),I=P+(x^M&(R^x))+D[2]+606105819&4294967295,P=M+(I<<17&4294967295|I>>>15),I=x+(R^P&(M^R))+D[3]+3250441966&4294967295,x=P+(I<<22&4294967295|I>>>10),I=R+(M^x&(P^M))+D[4]+4118548399&4294967295,R=x+(I<<7&4294967295|I>>>25),I=M+(P^R&(x^P))+D[5]+1200080426&4294967295,M=R+(I<<12&4294967295|I>>>20),I=P+(x^M&(R^x))+D[6]+2821735955&4294967295,P=M+(I<<17&4294967295|I>>>15),I=x+(R^P&(M^R))+D[7]+4249261313&4294967295,x=P+(I<<22&4294967295|I>>>10),I=R+(M^x&(P^M))+D[8]+1770035416&4294967295,R=x+(I<<7&4294967295|I>>>25),I=M+(P^R&(x^P))+D[9]+2336552879&4294967295,M=R+(I<<12&4294967295|I>>>20),I=P+(x^M&(R^x))+D[10]+4294925233&4294967295,P=M+(I<<17&4294967295|I>>>15),I=x+(R^P&(M^R))+D[11]+2304563134&4294967295,x=P+(I<<22&4294967295|I>>>10),I=R+(M^x&(P^M))+D[12]+1804603682&4294967295,R=x+(I<<7&4294967295|I>>>25),I=M+(P^R&(x^P))+D[13]+4254626195&4294967295,M=R+(I<<12&4294967295|I>>>20),I=P+(x^M&(R^x))+D[14]+2792965006&4294967295,P=M+(I<<17&4294967295|I>>>15),I=x+(R^P&(M^R))+D[15]+1236535329&4294967295,x=P+(I<<22&4294967295|I>>>10),I=R+(P^M&(x^P))+D[1]+4129170786&4294967295,R=x+(I<<5&4294967295|I>>>27),I=M+(x^P&(R^x))+D[6]+3225465664&4294967295,M=R+(I<<9&4294967295|I>>>23),I=P+(R^x&(M^R))+D[11]+643717713&4294967295,P=M+(I<<14&4294967295|I>>>18),I=x+(M^R&(P^M))+D[0]+3921069994&4294967295,x=P+(I<<20&4294967295|I>>>12),I=R+(P^M&(x^P))+D[5]+3593408605&4294967295,R=x+(I<<5&4294967295|I>>>27),I=M+(x^P&(R^x))+D[10]+38016083&4294967295,M=R+(I<<9&4294967295|I>>>23),I=P+(R^x&(M^R))+D[15]+3634488961&4294967295,P=M+(I<<14&4294967295|I>>>18),I=x+(M^R&(P^M))+D[4]+3889429448&4294967295,x=P+(I<<20&4294967295|I>>>12),I=R+(P^M&(x^P))+D[9]+568446438&4294967295,R=x+(I<<5&4294967295|I>>>27),I=M+(x^P&(R^x))+D[14]+3275163606&4294967295,M=R+(I<<9&4294967295|I>>>23),I=P+(R^x&(M^R))+D[3]+4107603335&4294967295,P=M+(I<<14&4294967295|I>>>18),I=x+(M^R&(P^M))+D[8]+1163531501&4294967295,x=P+(I<<20&4294967295|I>>>12),I=R+(P^M&(x^P))+D[13]+2850285829&4294967295,R=x+(I<<5&4294967295|I>>>27),I=M+(x^P&(R^x))+D[2]+4243563512&4294967295,M=R+(I<<9&4294967295|I>>>23),I=P+(R^x&(M^R))+D[7]+1735328473&4294967295,P=M+(I<<14&4294967295|I>>>18),I=x+(M^R&(P^M))+D[12]+2368359562&4294967295,x=P+(I<<20&4294967295|I>>>12),I=R+(x^P^M)+D[5]+4294588738&4294967295,R=x+(I<<4&4294967295|I>>>28),I=M+(R^x^P)+D[8]+2272392833&4294967295,M=R+(I<<11&4294967295|I>>>21),I=P+(M^R^x)+D[11]+1839030562&4294967295,P=M+(I<<16&4294967295|I>>>16),I=x+(P^M^R)+D[14]+4259657740&4294967295,x=P+(I<<23&4294967295|I>>>9),I=R+(x^P^M)+D[1]+2763975236&4294967295,R=x+(I<<4&4294967295|I>>>28),I=M+(R^x^P)+D[4]+1272893353&4294967295,M=R+(I<<11&4294967295|I>>>21),I=P+(M^R^x)+D[7]+4139469664&4294967295,P=M+(I<<16&4294967295|I>>>16),I=x+(P^M^R)+D[10]+3200236656&4294967295,x=P+(I<<23&4294967295|I>>>9),I=R+(x^P^M)+D[13]+681279174&4294967295,R=x+(I<<4&4294967295|I>>>28),I=M+(R^x^P)+D[0]+3936430074&4294967295,M=R+(I<<11&4294967295|I>>>21),I=P+(M^R^x)+D[3]+3572445317&4294967295,P=M+(I<<16&4294967295|I>>>16),I=x+(P^M^R)+D[6]+76029189&4294967295,x=P+(I<<23&4294967295|I>>>9),I=R+(x^P^M)+D[9]+3654602809&4294967295,R=x+(I<<4&4294967295|I>>>28),I=M+(R^x^P)+D[12]+3873151461&4294967295,M=R+(I<<11&4294967295|I>>>21),I=P+(M^R^x)+D[15]+530742520&4294967295,P=M+(I<<16&4294967295|I>>>16),I=x+(P^M^R)+D[2]+3299628645&4294967295,x=P+(I<<23&4294967295|I>>>9),I=R+(P^(x|~M))+D[0]+4096336452&4294967295,R=x+(I<<6&4294967295|I>>>26),I=M+(x^(R|~P))+D[7]+1126891415&4294967295,M=R+(I<<10&4294967295|I>>>22),I=P+(R^(M|~x))+D[14]+2878612391&4294967295,P=M+(I<<15&4294967295|I>>>17),I=x+(M^(P|~R))+D[5]+4237533241&4294967295,x=P+(I<<21&4294967295|I>>>11),I=R+(P^(x|~M))+D[12]+1700485571&4294967295,R=x+(I<<6&4294967295|I>>>26),I=M+(x^(R|~P))+D[3]+2399980690&4294967295,M=R+(I<<10&4294967295|I>>>22),I=P+(R^(M|~x))+D[10]+4293915773&4294967295,P=M+(I<<15&4294967295|I>>>17),I=x+(M^(P|~R))+D[1]+2240044497&4294967295,x=P+(I<<21&4294967295|I>>>11),I=R+(P^(x|~M))+D[8]+1873313359&4294967295,R=x+(I<<6&4294967295|I>>>26),I=M+(x^(R|~P))+D[15]+4264355552&4294967295,M=R+(I<<10&4294967295|I>>>22),I=P+(R^(M|~x))+D[6]+2734768916&4294967295,P=M+(I<<15&4294967295|I>>>17),I=x+(M^(P|~R))+D[13]+1309151649&4294967295,x=P+(I<<21&4294967295|I>>>11),I=R+(P^(x|~M))+D[4]+4149444226&4294967295,R=x+(I<<6&4294967295|I>>>26),I=M+(x^(R|~P))+D[11]+3174756917&4294967295,M=R+(I<<10&4294967295|I>>>22),I=P+(R^(M|~x))+D[2]+718787259&4294967295,P=M+(I<<15&4294967295|I>>>17),I=x+(M^(P|~R))+D[9]+3951481745&4294967295,C.g[0]=C.g[0]+R&4294967295,C.g[1]=C.g[1]+(P+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+M&4294967295}s.prototype.u=function(C,R){R===void 0&&(R=C.length);for(var x=R-this.blockSize,D=this.B,P=this.h,M=0;M<R;){if(P==0)for(;M<=x;)o(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<R;)if(D[P++]=C.charCodeAt(M++),P==this.blockSize){o(this,D),P=0;break}}else for(;M<R;)if(D[P++]=C[M++],P==this.blockSize){o(this,D),P=0;break}}this.h=P,this.o+=R},s.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var R=1;R<C.length-8;++R)C[R]=0;var x=8*this.o;for(R=C.length-8;R<C.length;++R)C[R]=x&255,x/=256;for(this.u(C),C=Array(16),R=x=0;4>R;++R)for(var D=0;32>D;D+=8)C[x++]=this.g[R]>>>D&255;return C};function u(C,R){var x=m;return Object.prototype.hasOwnProperty.call(x,C)?x[C]:x[C]=R(C)}function d(C,R){this.h=R;for(var x=[],D=!0,P=C.length-1;0<=P;P--){var M=C[P]|0;D&&M==R||(x[P]=M,D=!1)}this.g=x}var m={};function p(C){return-128<=C&&128>C?u(C,function(R){return new d([R|0],0>R?-1:0)}):new d([C|0],0>C?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return A;if(0>C)return F(y(-C));for(var R=[],x=1,D=0;C>=x;D++)R[D]=C/x|0,x*=4294967296;return new d(R,0)}function T(C,R){if(C.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(C.charAt(0)=="-")return F(T(C.substring(1),R));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=y(Math.pow(R,8)),D=A,P=0;P<C.length;P+=8){var M=Math.min(8,C.length-P),I=parseInt(C.substring(P,P+M),R);8>M?(M=y(Math.pow(R,M)),D=D.j(M).add(y(I))):(D=D.j(x),D=D.add(y(I)))}return D}var A=p(0),S=p(1),L=p(16777216);i=d.prototype,i.m=function(){if(K(this))return-F(this).m();for(var C=0,R=1,x=0;x<this.g.length;x++){var D=this.i(x);C+=(0<=D?D:4294967296+D)*R,R*=4294967296}return C},i.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(U(this))return"0";if(K(this))return"-"+F(this).toString(C);for(var R=y(Math.pow(C,6)),x=this,D="";;){var P=me(x,R).g;x=ae(x,P.j(R));var M=((0<x.g.length?x.g[0]:x.h)>>>0).toString(C);if(x=P,U(x))return M+D;for(;6>M.length;)M="0"+M;D=M+D}},i.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function U(C){if(C.h!=0)return!1;for(var R=0;R<C.g.length;R++)if(C.g[R]!=0)return!1;return!0}function K(C){return C.h==-1}i.l=function(C){return C=ae(this,C),K(C)?-1:U(C)?0:1};function F(C){for(var R=C.g.length,x=[],D=0;D<R;D++)x[D]=~C.g[D];return new d(x,~C.h).add(S)}i.abs=function(){return K(this)?F(this):this},i.add=function(C){for(var R=Math.max(this.g.length,C.g.length),x=[],D=0,P=0;P<=R;P++){var M=D+(this.i(P)&65535)+(C.i(P)&65535),I=(M>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);D=I>>>16,M&=65535,I&=65535,x[P]=I<<16|M}return new d(x,x[x.length-1]&-2147483648?-1:0)};function ae(C,R){return C.add(F(R))}i.j=function(C){if(U(this)||U(C))return A;if(K(this))return K(C)?F(this).j(F(C)):F(F(this).j(C));if(K(C))return F(this.j(F(C)));if(0>this.l(L)&&0>C.l(L))return y(this.m()*C.m());for(var R=this.g.length+C.g.length,x=[],D=0;D<2*R;D++)x[D]=0;for(D=0;D<this.g.length;D++)for(var P=0;P<C.g.length;P++){var M=this.i(D)>>>16,I=this.i(D)&65535,ke=C.i(P)>>>16,Pe=C.i(P)&65535;x[2*D+2*P]+=I*Pe,se(x,2*D+2*P),x[2*D+2*P+1]+=M*Pe,se(x,2*D+2*P+1),x[2*D+2*P+1]+=I*ke,se(x,2*D+2*P+1),x[2*D+2*P+2]+=M*ke,se(x,2*D+2*P+2)}for(D=0;D<R;D++)x[D]=x[2*D+1]<<16|x[2*D];for(D=R;D<2*R;D++)x[D]=0;return new d(x,0)};function se(C,R){for(;(C[R]&65535)!=C[R];)C[R+1]+=C[R]>>>16,C[R]&=65535,R++}function ne(C,R){this.g=C,this.h=R}function me(C,R){if(U(R))throw Error("division by zero");if(U(C))return new ne(A,A);if(K(C))return R=me(F(C),R),new ne(F(R.g),F(R.h));if(K(R))return R=me(C,F(R)),new ne(F(R.g),R.h);if(30<C.g.length){if(K(C)||K(R))throw Error("slowDivide_ only works with positive integers.");for(var x=S,D=R;0>=D.l(C);)x=ce(x),D=ce(D);var P=_e(x,1),M=_e(D,1);for(D=_e(D,2),x=_e(x,2);!U(D);){var I=M.add(D);0>=I.l(C)&&(P=P.add(x),M=I),D=_e(D,1),x=_e(x,1)}return R=ae(C,P.j(R)),new ne(P,R)}for(P=A;0<=C.l(R);){for(x=Math.max(1,Math.floor(C.m()/R.m())),D=Math.ceil(Math.log(x)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),M=y(x),I=M.j(R);K(I)||0<I.l(C);)x-=D,M=y(x),I=M.j(R);U(M)&&(M=S),P=P.add(M),C=ae(C,I)}return new ne(P,C)}i.A=function(C){return me(this,C).h},i.and=function(C){for(var R=Math.max(this.g.length,C.g.length),x=[],D=0;D<R;D++)x[D]=this.i(D)&C.i(D);return new d(x,this.h&C.h)},i.or=function(C){for(var R=Math.max(this.g.length,C.g.length),x=[],D=0;D<R;D++)x[D]=this.i(D)|C.i(D);return new d(x,this.h|C.h)},i.xor=function(C){for(var R=Math.max(this.g.length,C.g.length),x=[],D=0;D<R;D++)x[D]=this.i(D)^C.i(D);return new d(x,this.h^C.h)};function ce(C){for(var R=C.g.length+1,x=[],D=0;D<R;D++)x[D]=C.i(D)<<1|C.i(D-1)>>>31;return new d(x,C.h)}function _e(C,R){var x=R>>5;R%=32;for(var D=C.g.length-x,P=[],M=0;M<D;M++)P[M]=0<R?C.i(M+x)>>>R|C.i(M+x+1)<<32-R:C.i(M+x);return new d(P,C.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,tT=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=T,is=d}).apply(typeof $v<"u"?$v:typeof self<"u"?self:typeof window<"u"?window:{});var Qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nT,Hl,rT,rh,Rm,iT,sT,aT;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qc=="object"&&Qc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,g){if(g)e:{var _=s;c=c.split(".");for(var b=0;b<c.length-1;b++){var j=c[b];if(!(j in _))break e;_=_[j]}c=c[c.length-1],b=_[c],g=g(b),g!=b&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function u(c,g){c instanceof String&&(c+="");var _=0,b=!1,j={next:function(){if(!b&&_<c.length){var G=_++;return{value:g(G,c[G]),done:!1}}return b=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(c){return c||function(){return u(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function p(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function y(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function T(c,g,_){return c.call.apply(c.bind,arguments)}function A(c,g,_){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,b),c.apply(g,j)}}return function(){return c.apply(g,arguments)}}function S(c,g,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:A,S.apply(null,arguments)}function L(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var b=_.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function U(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(b,j,G){for(var ie=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ie[ze-2]=arguments[ze];return g.prototype[j].apply(b,ie)}}function K(c){const g=c.length;if(0<g){const _=Array(g);for(let b=0;b<g;b++)_[b]=c[b];return _}return[]}function F(c,g){for(let _=1;_<arguments.length;_++){const b=arguments[_];if(p(b)){const j=c.length||0,G=b.length||0;c.length=j+G;for(let ie=0;ie<G;ie++)c[j+ie]=b[ie]}else c.push(b)}}class ae{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function se(c){return/^[\s\xa0]*$/.test(c)}function ne(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function me(c){return me[" "](c),c}me[" "]=function(){};var ce=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function _e(c,g,_){for(const b in c)g.call(_,c[b],b,c)}function C(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function R(c){const g={};for(const _ in c)g[_]=c[_];return g}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,g){let _,b;for(let j=1;j<arguments.length;j++){b=arguments[j];for(_ in b)c[_]=b[_];for(let G=0;G<x.length;G++)_=x[G],Object.prototype.hasOwnProperty.call(b,_)&&(c[_]=b[_])}}function P(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function M(c){m.setTimeout(()=>{throw c},0)}function I(){var c=Ie;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ke{constructor(){this.h=this.g=null}add(g,_){const b=Pe.get();b.set(g,_),this.h?this.h.next=b:this.g=b,this.h=b}}var Pe=new ae(()=>new Q,c=>c.reset());class Q{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let re,te=!1,Ie=new ke,O=()=>{const c=m.Promise.resolve(void 0);re=()=>{c.then(J)}};var J=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(_){M(_)}var g=Pe;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}te=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var pe=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,g),m.removeEventListener("test",_,g)}catch{}return c})();function Ne(c,g){if(ee.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(ce){e:{try{me(g.nodeName);var j=!0;break e}catch{}j=!1}j||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:we[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ne.aa.h.call(this)}}U(Ne,ee);var we={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Et="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Cn(c,g,_,b,j){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!b,this.ha=j,this.key=++Je,this.da=this.fa=!1}function ir(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Gn(c){this.src=c,this.g={},this.h=0}Gn.prototype.add=function(c,g,_,b,j){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var ie=Vr(c,g,b,j);return-1<ie?(g=c[ie],_||(g.fa=!1)):(g=new Cn(g,this.src,G,!!b,j),g.fa=_,c.push(g)),g};function Pr(c,g){var _=g.type;if(_ in c.g){var b=c.g[_],j=Array.prototype.indexOf.call(b,g,void 0),G;(G=0<=j)&&Array.prototype.splice.call(b,j,1),G&&(ir(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Vr(c,g,_,b){for(var j=0;j<c.length;++j){var G=c[j];if(!G.da&&G.listener==g&&G.capture==!!_&&G.ha==b)return j}return-1}var Mr="closure_lm_"+(1e6*Math.random()|0),gs={};function oa(c,g,_,b,j){if(Array.isArray(g)){for(var G=0;G<g.length;G++)oa(c,g[G],_,b,j);return null}return _=ve(_),c&&c[Et]?c.K(g,_,y(b)?!!b.capture:!1,j):on(c,g,_,!1,b,j)}function on(c,g,_,b,j,G){if(!g)throw Error("Invalid event type");var ie=y(j)?!!j.capture:!!j,ze=Ei(c);if(ze||(c[Mr]=ze=new Gn(c)),_=ze.add(g,_,b,ie,G),_.proxy)return _;if(b=No(),_.proxy=b,b.src=c,b.listener=_,c.addEventListener)pe||(j=ie),j===void 0&&(j=!1),c.addEventListener(g.toString(),b,j);else if(c.attachEvent)c.attachEvent(Lr(g.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return _}function No(){function c(_){return g.call(c.src,c.listener,_)}const g=Do;return c}function ps(c,g,_,b,j){if(Array.isArray(g))for(var G=0;G<g.length;G++)ps(c,g[G],_,b,j);else b=y(b)?!!b.capture:!!b,_=ve(_),c&&c[Et]?(c=c.i,g=String(g).toString(),g in c.g&&(G=c.g[g],_=Vr(G,_,b,j),-1<_&&(ir(G[_]),Array.prototype.splice.call(G,_,1),G.length==0&&(delete c.g[g],c.h--)))):c&&(c=Ei(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Vr(g,_,b,j)),(_=-1<c?g[c]:null)&&kr(_))}function kr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Et])Pr(g.i,c);else{var _=c.type,b=c.proxy;g.removeEventListener?g.removeEventListener(_,b,c.capture):g.detachEvent?g.detachEvent(Lr(_),b):g.addListener&&g.removeListener&&g.removeListener(b),(_=Ei(g))?(Pr(_,c),_.h==0&&(_.src=null,g[Mr]=null)):ir(c)}}}function Lr(c){return c in gs?gs[c]:gs[c]="on"+c}function Do(c,g){if(c.da)c=!0;else{g=new Ne(g,this);var _=c.listener,b=c.ha||c.src;c.fa&&kr(c),c=_.call(b,g)}return c}function Ei(c){return c=c[Mr],c instanceof Gn?c:null}var fe="__closure_events_fn_"+(1e9*Math.random()>>>0);function ve(c){return typeof c=="function"?c:(c[fe]||(c[fe]=function(g){return c.handleEvent(g)}),c[fe])}function Xe(){oe.call(this),this.i=new Gn(this),this.M=this,this.F=null}U(Xe,oe),Xe.prototype[Et]=!0,Xe.prototype.removeEventListener=function(c,g,_,b){ps(this,c,g,_,b)};function $e(c,g){var _,b=c.F;if(b)for(_=[];b;b=b.F)_.push(b);if(c=c.M,b=g.type||g,typeof g=="string")g=new ee(g,c);else if(g instanceof ee)g.target=g.target||c;else{var j=g;g=new ee(b,c),D(g,j)}if(j=!0,_)for(var G=_.length-1;0<=G;G--){var ie=g.g=_[G];j=_n(ie,b,!0,g)&&j}if(ie=g.g=c,j=_n(ie,b,!0,g)&&j,j=_n(ie,b,!1,g)&&j,_)for(G=0;G<_.length;G++)ie=g.g=_[G],j=_n(ie,b,!1,g)&&j}Xe.prototype.N=function(){if(Xe.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],b=0;b<_.length;b++)ir(_[b]);delete c.g[g],c.h--}}this.F=null},Xe.prototype.K=function(c,g,_,b){return this.i.add(String(c),g,!1,_,b)},Xe.prototype.L=function(c,g,_,b){return this.i.add(String(c),g,!0,_,b)};function _n(c,g,_,b){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var j=!0,G=0;G<g.length;++G){var ie=g[G];if(ie&&!ie.da&&ie.capture==_){var ze=ie.listener,Nt=ie.ha||ie.src;ie.fa&&Pr(c.i,ie),j=ze.call(Nt,b)!==!1&&j}}return j&&!b.defaultPrevented}function $t(c,g,_){if(typeof c=="function")_&&(c=S(c,_));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:m.setTimeout(c,g||0)}function bu(c){c.g=$t(()=>{c.g=null,c.i&&(c.i=!1,bu(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Wh extends oe{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:bu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ys(c){oe.call(this),this.h=c,this.g={}}U(ys,oe);var _s=[];function vs(c){_e(c.g,function(g,_){this.g.hasOwnProperty(_)&&kr(g)},c),c.g={}}ys.prototype.N=function(){ys.aa.N.call(this),vs(this)},ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qn=m.JSON.stringify,la=m.JSON.parse,Es=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Oo(){}Oo.prototype.h=null;function Po(c){return c.h||(c.h=c.i())}function Vo(){}var Ur={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jr(){ee.call(this,"d")}U(jr,ee);function Mo(){ee.call(this,"c")}U(Mo,ee);var sr={},ko=null;function Ti(){return ko=ko||new Xe}sr.La="serverreachability";function ua(c){ee.call(this,sr.La,c)}U(ua,ee);function wi(c){const g=Ti();$e(g,new ua(g))}sr.STAT_EVENT="statevent";function Au(c,g){ee.call(this,sr.STAT_EVENT,c),this.stat=g}U(Au,ee);function ut(c){const g=Ti();$e(g,new Au(g,c))}sr.Ma="timingevent";function Ct(c,g){ee.call(this,sr.Ma,c),this.size=g}U(Ct,ee);function Tt(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},g)}function Nn(){this.g=!0}Nn.prototype.xa=function(){this.g=!1};function Lo(c,g,_,b,j,G){c.info(function(){if(c.g)if(G)for(var ie="",ze=G.split("&"),Nt=0;Nt<ze.length;Nt++){var qe=ze[Nt].split("=");if(1<qe.length){var kt=qe[0];qe=qe[1];var Dt=kt.split("_");ie=2<=Dt.length&&Dt[1]=="type"?ie+(kt+"="+qe+"&"):ie+(kt+"=redacted&")}}else ie=null;else ie=G;return"XMLHTTP REQ ("+b+") [attempt "+j+"]: "+g+`
`+_+`
`+ie})}function Zh(c,g,_,b,j,G,ie){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+j+"]: "+g+`
`+_+`
`+G+" "+ie})}function bi(c,g,_,b){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ts(c,_)+(b?" "+b:"")})}function Su(c,g){c.info(function(){return"TIMEOUT: "+g})}Nn.prototype.info=function(){};function Ts(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var b=_[c];if(!(2>b.length)){var j=b[1];if(Array.isArray(j)&&!(1>j.length)){var G=j[0];if(G!="noop"&&G!="stop"&&G!="close")for(var ie=1;ie<j.length;ie++)j[ie]=""}}}}return Qn(_)}catch{return g}}var Ai={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ar;function or(){}U(or,Oo),or.prototype.g=function(){return new XMLHttpRequest},or.prototype.i=function(){return{}},ar=new or;function ln(c,g,_,b){this.j=c,this.i=g,this.l=_,this.R=b||1,this.U=new ys(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gt}function gt(){this.i=null,this.g="",this.h=!1}var Uo={},ca={};function Kn(c,g,_){c.L=1,c.v=Rs(vn(g)),c.m=_,c.P=!0,qr(c,null)}function qr(c,g){c.F=Date.now(),ws(c),c.A=vn(c.v);var _=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),Fo(_.i,"t",b),c.C=0,_=c.j.J,c.h=new gt,c.g=qu(c.j,_?g:null,!c.m),0<c.O&&(c.M=new Wh(S(c.Y,c,c.g),c.O)),g=c.U,_=c.g,b=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(_s[0]=j.toString()),j=_s);for(var G=0;G<j.length;G++){var ie=oa(_,j[G],b||g.handleEvent,!1,g.h||g);if(!ie)break;g.g[ie.key]=ie}g=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),wi(),Lo(c.i,c.u,c.A,c.l,c.R,c.m)}ln.prototype.ca=function(c){c=c.target;const g=this.M;g&&Vn(c)==3?g.j():this.Y(c)},ln.prototype.Y=function(c){try{if(c==this.g)e:{const Dt=Vn(this.g);var g=this.g.Ba();const Xr=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||Pu(this.g)))){this.J||Dt!=4||g==7||(g==8||0>=Xr?wi(3):wi(2)),Si(this);var _=this.g.Z();this.X=_;t:if(Ru(this)){var b=Pu(this.g);c="";var j=b.length,G=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qt(this),lr(this);var ie="";break t}this.h.i=new m.TextDecoder}for(g=0;g<j;g++)this.h.h=!0,c+=this.h.i.decode(b[g],{stream:!(G&&g==j-1)});b.length=0,this.h.g+=c,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=_==200,Zh(this.i,this.u,this.A,this.l,this.R,Dt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Nt=this.g;if((ze=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(ze)){var qe=ze;break t}}qe=null}if(_=qe)bi(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bs(this,_);else{this.o=!1,this.s=3,ut(12),qt(this),lr(this);break e}}if(this.P){_=!0;let Bt;for(;!this.J&&this.C<ie.length;)if(Bt=xu(this,ie),Bt==ca){Dt==4&&(this.s=4,ut(14),_=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==Uo){this.s=4,ut(15),bi(this.i,this.l,ie,"[Invalid Chunk]"),_=!1;break}else bi(this.i,this.l,Bt,null),bs(this,Bt);if(Ru(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||ie.length!=0||this.h.h||(this.s=1,ut(16),_=!1),this.o=this.o&&_,!_)bi(this.i,this.l,ie,"[Invalid Chunked Response]"),qt(this),lr(this);else if(0<ie.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),Vs(kt),kt.M=!0,ut(11))}}else bi(this.i,this.l,ie,null),bs(this,ie);Dt==4&&qt(this),this.o&&!this.J&&(Dt==4?Uu(this.j,this):(this.o=!1,ws(this)))}else rd(this.g),_==400&&0<ie.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),qt(this),lr(this)}}}catch{}finally{}};function Ru(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function xu(c,g){var _=c.C,b=g.indexOf(`
`,_);return b==-1?ca:(_=Number(g.substring(_,b)),isNaN(_)?Uo:(b+=1,b+_>g.length?ca:(g=g.slice(b,b+_),c.C=b+_,g)))}ln.prototype.cancel=function(){this.J=!0,qt(this)};function ws(c){c.S=Date.now()+c.I,Iu(c,c.I)}function Iu(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Tt(S(c.ba,c),g)}function Si(c){c.B&&(m.clearTimeout(c.B),c.B=null)}ln.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Su(this.i,this.A),this.L!=2&&(wi(),ut(17)),qt(this),this.s=2,lr(this)):Iu(this,this.S-c)};function lr(c){c.j.G==0||c.J||Uu(c.j,c)}function qt(c){Si(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,vs(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function bs(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||jo(_.h,c))){if(!c.K&&jo(_.h,c)&&_.G==3){try{var b=_.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var j=b;if(j[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)wa(_),Ea(_);else break e;Xo(_),ut(18)}}else _.za=j[1],0<_.za-_.T&&37500>j[2]&&_.F&&_.v==0&&!_.C&&(_.C=Tt(S(_.Za,_),6e3));if(1>=da(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Yr(_,11)}else if((c.K||_.g==c)&&wa(_),!se(g))for(j=_.Da.g.parse(g),g=0;g<j.length;g++){let qe=j[g];if(_.T=qe[0],qe=qe[1],_.G==2)if(qe[0]=="c"){_.K=qe[1],_.ia=qe[2];const kt=qe[3];kt!=null&&(_.la=kt,_.j.info("VER="+_.la));const Dt=qe[4];Dt!=null&&(_.Aa=Dt,_.j.info("SVER="+_.Aa));const Xr=qe[5];Xr!=null&&typeof Xr=="number"&&0<Xr&&(b=1.5*Xr,_.L=b,_.j.info("backChannelRequestTimeoutMs_="+b)),b=_;const Bt=c.g;if(Bt){const gr=Bt.g?Bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gr){var G=b.h;G.g||gr.indexOf("spdy")==-1&&gr.indexOf("quic")==-1&&gr.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(fa(G,G.h),G.h=null))}if(b.D){const Wo=Bt.g?Bt.g.getResponseHeader("X-HTTP-Session-Id"):null;Wo&&(b.ya=Wo,et(b.I,b.D,Wo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),b=_;var ie=c;if(b.qa=zu(b,b.J?b.ia:null,b.W),ie.K){un(b.h,ie);var ze=ie,Nt=b.L;Nt&&(ze.I=Nt),ze.B&&(Si(ze),ws(ze)),b.g=ie}else ku(b);0<_.i.length&&Ta(_)}else qe[0]!="stop"&&qe[0]!="close"||Yr(_,7);else _.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?Yr(_,7):Ko(_):qe[0]!="noop"&&_.l&&_.l.ta(qe),_.v=0)}}wi(4)}catch{}}var Cu=class{constructor(c,g){this.g=c,this.map=g}};function Br(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ha(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function da(c){return c.h?1:c.g?c.g.size:0}function jo(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function fa(c,g){c.g?c.g.add(g):c.h=g}function un(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Br.prototype.cancel=function(){if(this.i=zo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function zo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return K(c.i)}function Jh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var g=[],_=c.length,b=0;b<_;b++)g.push(c[b]);return g}g=[],_=0;for(b in c)g[_++]=c[b];return g}function ma(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const b in c)g[_++]=b;return g}}}function qo(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=ma(c),b=Jh(c),j=b.length,G=0;G<j;G++)g.call(void 0,b[G],_&&_[G],c)}var As=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ed(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var b=c[_].indexOf("="),j=null;if(0<=b){var G=c[_].substring(0,b);j=c[_].substring(b+1)}else G=c[_];g(G,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function wt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof wt){this.h=c.h,Ss(this,c.j),this.o=c.o,this.g=c.g,Ri(this,c.s),this.l=c.l;var g=c.i,_=new Fr;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Hr(this,_),this.m=c.m}else c&&(g=String(c).match(As))?(this.h=!1,Ss(this,g[1]||"",!0),this.o=Dn(g[2]||""),this.g=Dn(g[3]||"",!0),Ri(this,g[4]),this.l=Dn(g[5]||"",!0),Hr(this,g[6]||"",!0),this.m=Dn(g[7]||"")):(this.h=!1,this.i=new Fr(null,this.h))}wt.prototype.toString=function(){var c=[],g=this.j;g&&c.push(xs(g,Bo,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(xs(g,Bo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(xs(_,_.charAt(0)=="/"?td:Ho,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",xs(_,ga)),c.join("")};function vn(c){return new wt(c)}function Ss(c,g,_){c.j=_?Dn(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Ri(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Hr(c,g,_){g instanceof Fr?(c.i=g,Du(c.i,c.h)):(_||(g=xs(g,nd)),c.i=new Fr(g,c.h))}function et(c,g,_){c.i.set(g,_)}function Rs(c){return et(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Dn(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function xs(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,Nu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Nu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Bo=/[#\/\?@]/g,Ho=/[#\?:]/g,td=/[#\?]/g,nd=/[#\?@]/g,ga=/#/g;function Fr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function On(c){c.g||(c.g=new Map,c.h=0,c.i&&ed(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}i=Fr.prototype,i.add=function(c,g){On(this),this.i=null,c=ur(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Gr(c,g){On(c),g=ur(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Qr(c,g){return On(c),g=ur(c,g),c.g.has(g)}i.forEach=function(c,g){On(this),this.g.forEach(function(_,b){_.forEach(function(j){c.call(g,j,b,this)},this)},this)},i.na=function(){On(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let b=0;b<g.length;b++){const j=c[b];for(let G=0;G<j.length;G++)_.push(g[b])}return _},i.V=function(c){On(this);let g=[];if(typeof c=="string")Qr(this,c)&&(g=g.concat(this.g.get(ur(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},i.set=function(c,g){return On(this),this.i=null,c=ur(this,c),Qr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},i.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Fo(c,g,_){Gr(c,g),0<_.length&&(c.i=null,c.g.set(ur(c,g),K(_)),c.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var b=g[_];const G=encodeURIComponent(String(b)),ie=this.V(b);for(b=0;b<ie.length;b++){var j=G;ie[b]!==""&&(j+="="+encodeURIComponent(String(ie[b]))),c.push(j)}}return this.i=c.join("&")};function ur(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Du(c,g){g&&!c.j&&(On(c),c.i=null,c.g.forEach(function(_,b){var j=b.toLowerCase();b!=j&&(Gr(this,b),Fo(this,j,_))},c)),c.j=g}function Is(c,g){const _=new Nn;if(m.Image){const b=new Image;b.onload=L(Pn,_,"TestLoadImage: loaded",!0,g,b),b.onerror=L(Pn,_,"TestLoadImage: error",!1,g,b),b.onabort=L(Pn,_,"TestLoadImage: abort",!1,g,b),b.ontimeout=L(Pn,_,"TestLoadImage: timeout",!1,g,b),m.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else g(!1)}function Yn(c,g){const _=new Nn,b=new AbortController,j=setTimeout(()=>{b.abort(),Pn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:b.signal}).then(G=>{clearTimeout(j),G.ok?Pn(_,"TestPingServer: ok",!0,g):Pn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(j),Pn(_,"TestPingServer: error",!1,g)})}function Pn(c,g,_,b,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),b(_)}catch{}}function Cs(){this.g=new Es}function cr(c,g,_){const b=_||"";try{qo(c,function(j,G){let ie=j;y(j)&&(ie=Qn(j)),g.push(b+G+"="+encodeURIComponent(ie))})}catch(j){throw g.push(b+"type="+encodeURIComponent("_badmap")),j}}function xi(c){this.l=c.Ub||null,this.j=c.eb||!1}U(xi,Oo),xi.prototype.g=function(){return new Kr(this.l,this.j)},xi.prototype.i=(function(c){return function(){return c}})({});function Kr(c,g){Xe.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(Kr,Xe),i=Kr.prototype,i.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,dr(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||m).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hr(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,dr(this)),this.g&&(this.readyState=3,dr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Go(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Go(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?hr(this):dr(this),this.readyState==3&&Go(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,hr(this))},i.Qa=function(c){this.g&&(this.response=c,hr(this))},i.ga=function(){this.g&&hr(this)};function hr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,dr(c)}i.setRequestHeader=function(c,g){this.u.append(c,g)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function dr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Kr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Qo(c){let g="";return _e(c,function(_,b){g+=b,g+=":",g+=_,g+=`\r
`}),g}function Mt(c,g,_){e:{for(b in _){var b=!1;break e}b=!0}b||(_=Qo(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):et(c,g,_))}function Ke(c){Xe.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(Ke,Xe);var pa=/^https?$/i,Ns=["POST","PUT"];i=Ke.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,g,_,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ar.g(),this.v=this.o?Po(this.o):Po(ar),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(G){Ou(this,G);return}if(c=_||"",_=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var j in b)_.set(j,b[j]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const G of b.keys())_.set(G,b.get(G));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(_.keys()).find(G=>G.toLowerCase()=="content-type"),j=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Ns,g,void 0))||b||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ie]of _)this.g.setRequestHeader(G,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ds(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){Ou(this,G)}};function Ou(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,ya(c),fr(c)}function ya(c){c.A||(c.A=!0,$e(c,"complete"),$e(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,$e(this,"complete"),$e(this,"abort"),fr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fr(this,!0)),Ke.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?_a(this):this.bb())},i.bb=function(){_a(this)};function _a(c){if(c.h&&typeof d<"u"&&(!c.v[1]||Vn(c)!=4||c.Z()!=2)){if(c.u&&Vn(c)==4)$t(c.Ea,0,c);else if($e(c,"readystatechange"),Vn(c)==4){c.h=!1;try{const ie=c.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var b;if(b=ie===0){var j=String(c.D).match(As)[1]||null;!j&&m.self&&m.self.location&&(j=m.self.location.protocol.slice(0,-1)),b=!pa.test(j?j.toLowerCase():"")}_=b}if(_)$e(c,"complete"),$e(c,"success");else{c.m=6;try{var G=2<Vn(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",ya(c)}}finally{fr(c)}}}}function fr(c,g){if(c.g){Ds(c);const _=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||$e(c,"ready");try{_.onreadystatechange=b}catch{}}}function Ds(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function Vn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),la(g)}};function Pu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function rd(c){const g={};c=(c.g&&2<=Vn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(se(c[b]))continue;var _=P(c[b]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const G=g[j]||[];g[j]=G,G.push(_)}C(g,function(b){return b.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function va(c){this.Aa=0,this.i=[],this.j=new Nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Os("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Os("baseRetryDelayMs",5e3,c),this.cb=Os("retryDelaySeedMs",1e4,c),this.Wa=Os("forwardChannelMaxRetries",2,c),this.wa=Os("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Br(c&&c.concurrentRequestLimit),this.Da=new Cs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=va.prototype,i.la=8,i.G=1,i.connect=function(c,g,_,b){ut(0),this.W=c,this.H=g||{},_&&b!==void 0&&(this.H.OSID=_,this.H.OAID=b),this.F=this.X,this.I=zu(this,null,this.W),Ta(this)};function Ko(c){if(Vu(c),c.G==3){var g=c.U++,_=vn(c.I);if(et(_,"SID",c.K),et(_,"RID",g),et(_,"TYPE","terminate"),Ps(c,_),g=new ln(c,c.j,g),g.L=2,g.v=Rs(vn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=g.v,_=!0),_||(g.g=qu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ws(g)}ju(c)}function Ea(c){c.g&&(Vs(c),c.g.cancel(),c.g=null)}function Vu(c){Ea(c),c.u&&(m.clearTimeout(c.u),c.u=null),wa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Ta(c){if(!ha(c.h)&&!c.s){c.s=!0;var g=c.Ga;re||O(),te||(re(),te=!0),Ie.add(g,c),c.B=0}}function id(c,g){return da(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Tt(S(c.Ga,c,g),$o(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new ln(this,this.j,c);let G=this.o;if(this.S&&(G?(G=R(G),D(G,this.S)):G=this.S),this.m!==null||this.O||(j.H=G,G=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var b=this.i[_];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Mu(this,j,g),_=vn(this.I),et(_,"RID",c),et(_,"CVER",22),this.D&&et(_,"X-HTTP-Session-Id",this.D),Ps(this,_),G&&(this.O?g="headers="+encodeURIComponent(String(Qo(G)))+"&"+g:this.m&&Mt(_,this.m,G)),fa(this.h,j),this.Ua&&et(_,"TYPE","init"),this.P?(et(_,"$req",g),et(_,"SID","null"),j.T=!0,Kn(j,_,null)):Kn(j,_,g),this.G=2}}else this.G==3&&(c?Yo(this,c):this.i.length==0||ha(this.h)||Yo(this))};function Yo(c,g){var _;g?_=g.l:_=c.U++;const b=vn(c.I);et(b,"SID",c.K),et(b,"RID",_),et(b,"AID",c.T),Ps(c,b),c.m&&c.o&&Mt(b,c.m,c.o),_=new ln(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Mu(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),fa(c.h,_),Kn(_,b,g)}function Ps(c,g){c.H&&_e(c.H,function(_,b){et(g,b,_)}),c.l&&qo({},function(_,b){et(g,b,_)})}function Mu(c,g,_){_=Math.min(c.i.length,_);var b=c.l?S(c.l.Na,c.l,c):null;e:{var j=c.i;let G=-1;for(;;){const ie=["count="+_];G==-1?0<_?(G=j[0].g,ie.push("ofs="+G)):G=0:ie.push("ofs="+G);let ze=!0;for(let Nt=0;Nt<_;Nt++){let qe=j[Nt].g;const kt=j[Nt].map;if(qe-=G,0>qe)G=Math.max(0,j[Nt].g-100),ze=!1;else try{cr(kt,ie,"req"+qe+"_")}catch{b&&b(kt)}}if(ze){b=ie.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,b}function ku(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;re||O(),te||(re(),te=!0),Ie.add(g,c),c.v=0}}function Xo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Tt(S(c.Fa,c),$o(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,Lu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Tt(S(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),Ea(this),Lu(this))};function Vs(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Lu(c){c.g=new ln(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=vn(c.qa);et(g,"RID","rpc"),et(g,"SID",c.K),et(g,"AID",c.T),et(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&et(g,"TO",c.ja),et(g,"TYPE","xmlhttp"),Ps(c,g),c.m&&c.o&&Mt(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Rs(vn(g)),_.m=null,_.P=!0,qr(_,c)}i.Za=function(){this.C!=null&&(this.C=null,Ea(this),Xo(this),ut(19))};function wa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Uu(c,g){var _=null;if(c.g==g){wa(c),Vs(c),c.g=null;var b=2}else if(jo(c.h,g))_=g.D,un(c.h,g),b=1;else return;if(c.G!=0){if(g.o)if(b==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var j=c.B;b=Ti(),$e(b,new Ct(b,_)),Ta(c)}else ku(c);else if(j=g.s,j==3||j==0&&0<g.X||!(b==1&&id(c,g)||b==2&&Xo(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),j){case 1:Yr(c,5);break;case 4:Yr(c,10);break;case 3:Yr(c,6);break;default:Yr(c,2)}}}function $o(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Yr(c,g){if(c.j.info("Error code "+g),g==2){var _=S(c.fb,c),b=c.Xa;const j=!b;b=new wt(b||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ss(b,"https"),Rs(b),j?Is(b.toString(),_):Yn(b.toString(),_)}else ut(2);c.G=0,c.l&&c.l.sa(g),ju(c),Vu(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function ju(c){if(c.G=0,c.ka=[],c.l){const g=zo(c.h);(g.length!=0||c.i.length!=0)&&(F(c.ka,g),F(c.ka,c.i),c.h.i.length=0,K(c.i),c.i.length=0),c.l.ra()}}function zu(c,g,_){var b=_ instanceof wt?vn(_):new wt(_);if(b.g!="")g&&(b.g=g+"."+b.g),Ri(b,b.s);else{var j=m.location;b=j.protocol,g=g?g+"."+j.hostname:j.hostname,j=+j.port;var G=new wt(null);b&&Ss(G,b),g&&(G.g=g),j&&Ri(G,j),_&&(G.l=_),b=G}return _=c.D,g=c.ya,_&&g&&et(b,_,g),et(b,"VER",c.la),Ps(c,b),b}function qu(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Ke(new xi({eb:_})):new Ke(c.pa),g.Ha(c.J),g}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bu(){}i=Bu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ba(){}ba.prototype.g=function(c,g){return new cn(c,g)};function cn(c,g){Xe.call(this),this.g=new va(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!se(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!se(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new mr(this)}U(cn,Xe),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Ko(this.g)},cn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Qn(c),c=_);g.i.push(new Cu(g.Ya++,c)),g.G==3&&Ta(g)},cn.prototype.N=function(){this.g.l=null,delete this.j,Ko(this.g),delete this.g,cn.aa.N.call(this)};function Hu(c){jr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}U(Hu,jr);function Fu(){Mo.call(this),this.status=1}U(Fu,Mo);function mr(c){this.g=c}U(mr,Bu),mr.prototype.ua=function(){$e(this.g,"a")},mr.prototype.ta=function(c){$e(this.g,new Hu(c))},mr.prototype.sa=function(c){$e(this.g,new Fu)},mr.prototype.ra=function(){$e(this.g,"b")},ba.prototype.createWebChannel=ba.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,aT=function(){return new ba},sT=function(){return Ti()},iT=sr,Rm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ai.NO_ERROR=0,Ai.TIMEOUT=8,Ai.HTTP_ERROR=6,rh=Ai,zr.COMPLETE="complete",rT=zr,Vo.EventType=Ur,Ur.OPEN="a",Ur.CLOSE="b",Ur.ERROR="c",Ur.MESSAGE="d",Xe.prototype.listen=Xe.prototype.K,Hl=Vo,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,nT=Ke}).apply(typeof Qc<"u"?Qc:typeof self<"u"?self:typeof window<"u"?window:{});const Wv="@firebase/firestore",Zv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=new Km("@firebase/firestore");function Za(){return ra.logLevel}function he(i,...e){if(ra.logLevel<=Le.DEBUG){const n=e.map(ag);ra.debug(`Firestore (${wo}): ${i}`,...n)}}function pi(i,...e){if(ra.logLevel<=Le.ERROR){const n=e.map(ag);ra.error(`Firestore (${wo}): ${i}`,...n)}}function fo(i,...e){if(ra.logLevel<=Le.WARN){const n=e.map(ag);ra.warn(`Firestore (${wo}): ${i}`,...n)}}function ag(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,oT(i,s,n)}function oT(i,e,n){let s=`FIRESTORE (${wo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw pi(s),new Error(s)}function Ye(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||oT(e,o,s)}function xe(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends _i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(nn.UNAUTHENTICATED)))}shutdown(){}}class cI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class hI{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new di;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new di,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new di)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ye(typeof s.accessToken=="string",31837,{l:s}),new lT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class dI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new dI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Jv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0,3512);const s=u=>{u.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,he("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Jv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Jv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=gI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Ue(i,e){return i<e?-1:i>e?1:0}function xm(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return cm(o)===cm(u)?Ue(o,u):cm(o)?1:-1}return Ue(i.length,e.length)}const pI=55296,yI=57343;function cm(i){const e=i.charCodeAt(0);return e>=pI&&e<=yI}function mo(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="__name__";class Tr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Tr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Tr?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Tr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ue(e.length,n.length)}static compareSegments(e,n){const s=Tr.isNumericId(e),o=Tr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Tr.extractNumericId(e).compare(Tr.extractNumericId(n)):xm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return is.fromString(e.substring(4,e.length-2))}}class ot extends Tr{construct(e,n,s){return new ot(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ue($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new ot(n)}static emptyPath(){return new ot([])}}const _I=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends Tr{construct(e,n,s){return new Kt(e,n,s)}static isValidIdentifier(e){return _I.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===e0}static keyField(){return new Kt([e0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ue($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ue($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ue($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(u(),o++)}if(u(),d)throw new ue($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(n)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(ot.fromString(e))}static fromName(e){return new ye(ot.fromString(e).popFirst(5))}static empty(){return new ye(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(i,e,n){if(!n)throw new ue($.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function vI(i,e,n,s){if(e===!0&&s===!0)throw new ue($.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function t0(i){if(!ye.isDocumentKey(i))throw new ue($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function n0(i){if(ye.isDocumentKey(i))throw new ue($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function cT(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Vh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ae(12329,{type:typeof i})}function Cr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ue($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vh(i);throw new ue($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(i,e){const n={typeString:i};return e&&(n.value=e),n}function gu(i,e){if(!cT(i))throw new ue($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new ue($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=-62135596800,i0=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*i0);return new lt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<r0)throw new ue($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i0}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gu(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-r0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:xt("string",lt._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new lt(0,0))}static max(){return new Re(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=-1;function EI(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(s===1e9?new lt(n+1,0):new lt(n,s));return new as(o,ye.empty(),e)}function TI(i){return new as(i.readTime,i.key,nu)}class as{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new as(Re.min(),ye.empty(),nu)}static max(){return new as(Re.max(),ye.empty(),nu)}}function wI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(i.documentKey,e.documentKey),n!==0?n:Ue(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(i){if(i.code!==$.FAILED_PRECONDITION||i.message!==bI)throw i;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.reject(n)}static resolve(e){return new Z(((n,s)=>{n(e)}))}static reject(e){return new Z(((n,s)=>{s(e)}))}static waitFor(e){return new Z(((n,s)=>{let o=0,u=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++u,d&&u===o&&n()}),(p=>s(p)))})),d=!0,u===o&&n()}))}static or(e){let n=Z.resolve(!1);for(const s of e)n=n.next((o=>o?Z.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new Z(((s,o)=>{const u=e.length,d=new Array(u);let m=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next((T=>{d[y]=T,++m,m===u&&s(d)}),(T=>o(T)))}}))}static doWhile(e,n){return new Z(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function SI(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ao(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=-1;function kh(i){return i==null}function _h(i){return i===0&&1/i==-1/0}function RI(i){return typeof i=="number"&&Number.isInteger(i)&&!_h(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="";function xI(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=s0(e)),e=II(i.get(n),e);return s0(e)}function II(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case hT:n+="";break;default:n+=u}}return n}function s0(i){return i+hT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function fs(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function dT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){this.comparator=e,this.root=n||Qt.EMPTY}insert(e,n){return new dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kc(this.root,e,this.comparator,!0)}}class Kc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Qt.RED,this.left=o??Qt.EMPTY,this.right=u??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Qt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Qt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new o0(this.data.getIterator())}getIteratorFrom(e){return new o0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Vt(this.comparator);return n.data=e,n}}class o0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new xn([])}unionWith(e){let n=new Vt(Kt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return mo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new fT("Invalid base64 string: "+u):u}})(e);return new Xt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new Xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const CI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(i){if(Ye(!!i,39018),typeof i=="string"){let e=0;const n=CI.exec(i);if(Ye(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_t(i.seconds),nanos:_t(i.nanos)}}function _t(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ls(i){return typeof i=="string"?Xt.fromBase64String(i):Xt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="server_timestamp",gT="__type__",pT="__previous_value__",yT="__local_write_time__";function ug(i){var n,s;return((s=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[gT])==null?void 0:s.stringValue)===mT}function Lh(i){const e=i.mapValue.fields[pT];return ug(e)?Lh(e):e}function ru(i){const e=os(i.mapValue.fields[yT].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n,s,o,u,d,m,p,y,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=T}}const vh="(default)";class iu{constructor(e,n){this.projectId=e,this.database=n||vh}static empty(){return new iu("","")}get isDefaultDatabase(){return this.database===vh}isEqual(e){return e instanceof iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="__type__",DI="__max__",Yc={mapValue:{}},vT="__vector__",Eh="value";function us(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ug(i)?4:PI(i)?9007199254740991:OI(i)?10:11:Ae(28295,{value:i})}function Nr(i,e){if(i===e)return!0;const n=us(i);if(n!==us(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ru(i).isEqual(ru(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=os(o.timestampValue),m=os(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return ls(o.bytesValue).isEqual(ls(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return _t(o.geoPointValue.latitude)===_t(u.geoPointValue.latitude)&&_t(o.geoPointValue.longitude)===_t(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return _t(o.integerValue)===_t(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=_t(o.doubleValue),m=_t(u.doubleValue);return d===m?_h(d)===_h(m):isNaN(d)&&isNaN(m)}return!1})(i,e);case 9:return mo(i.arrayValue.values||[],e.arrayValue.values||[],Nr);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(a0(d)!==a0(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!Nr(d[p],m[p])))return!1;return!0})(i,e);default:return Ae(52216,{left:i})}}function su(i,e){return(i.values||[]).find((n=>Nr(n,e)))!==void 0}function go(i,e){if(i===e)return 0;const n=us(i),s=us(e);if(n!==s)return Ue(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(i.booleanValue,e.booleanValue);case 2:return(function(u,d){const m=_t(u.integerValue||u.doubleValue),p=_t(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(i,e);case 3:return l0(i.timestampValue,e.timestampValue);case 4:return l0(ru(i),ru(e));case 5:return xm(i.stringValue,e.stringValue);case 6:return(function(u,d){const m=ls(u),p=ls(d);return m.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(u,d){const m=u.split("/"),p=d.split("/");for(let y=0;y<m.length&&y<p.length;y++){const T=Ue(m[y],p[y]);if(T!==0)return T}return Ue(m.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,d){const m=Ue(_t(u.latitude),_t(d.latitude));return m!==0?m:Ue(_t(u.longitude),_t(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return u0(i.arrayValue,e.arrayValue);case 10:return(function(u,d){var S,L,U,K;const m=u.fields||{},p=d.fields||{},y=(S=m[Eh])==null?void 0:S.arrayValue,T=(L=p[Eh])==null?void 0:L.arrayValue,A=Ue(((U=y==null?void 0:y.values)==null?void 0:U.length)||0,((K=T==null?void 0:T.values)==null?void 0:K.length)||0);return A!==0?A:u0(y,T)})(i.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Yc.mapValue&&d===Yc.mapValue)return 0;if(u===Yc.mapValue)return 1;if(d===Yc.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),y=d.fields||{},T=Object.keys(y);p.sort(),T.sort();for(let A=0;A<p.length&&A<T.length;++A){const S=xm(p[A],T[A]);if(S!==0)return S;const L=go(m[p[A]],y[T[A]]);if(L!==0)return L}return Ue(p.length,T.length)})(i.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function l0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ue(i,e);const n=os(i),s=os(e),o=Ue(n.seconds,s.seconds);return o!==0?o:Ue(n.nanos,s.nanos)}function u0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=go(n[o],s[o]);if(u)return u}return Ue(n.length,s.length)}function po(i){return Im(i)}function Im(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=os(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return ls(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return ye.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Im(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${Im(n.fields[d])}`;return o+"}"})(i.mapValue):Ae(61005,{value:i})}function ih(i){switch(us(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lh(i);return e?16+ih(e):16;case 5:return 2*i.stringValue.length;case 6:return ls(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+ih(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return fs(s.fields,((u,d)=>{o+=u.length+ih(d)})),o})(i.mapValue);default:throw Ae(13486,{value:i})}}function c0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Cm(i){return!!i&&"integerValue"in i}function cg(i){return!!i&&"arrayValue"in i}function h0(i){return!!i&&"nullValue"in i}function d0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function sh(i){return!!i&&"mapValue"in i}function OI(i){var n,s;return((s=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[_T])==null?void 0:s.stringValue)===vT}function $l(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return fs(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=$l(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$l(i.arrayValue.values[n]);return e}return{...i}}function PI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===DI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!sh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$l(n)}setAll(e){let n=Kt.emptyPath(),s={},o=[];e.forEach(((d,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}d?s[m.lastSegment()]=$l(d):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());sh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];sh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){fs(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new yn($l(this.value))}}function ET(i){const e=[];return fs(i.fields,((n,s)=>{const o=new Kt([n]);if(sh(s)){const u=ET(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n,s,o,u,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new rn(e,0,Re.min(),Re.min(),Re.min(),yn.empty(),0)}static newFoundDocument(e,n,s,o){return new rn(e,1,n,Re.min(),s,o,0)}static newNoDocument(e,n){return new rn(e,2,n,Re.min(),Re.min(),yn.empty(),0)}static newUnknownDocument(e,n){return new rn(e,3,n,Re.min(),Re.min(),yn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n){this.position=e,this.inclusive=n}}function f0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],d=i.position[o];if(u.field.isKeyField()?s=ye.comparator(ye.fromName(d.referenceValue),n.key):s=go(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function m0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Nr(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n="asc"){this.field=e,this.dir=n}}function VI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{}class Rt extends TT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new kI(e,n,s):n==="array-contains"?new jI(e,s):n==="in"?new zI(e,s):n==="not-in"?new qI(e,s):n==="array-contains-any"?new BI(e,s):new Rt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new LI(e,s):new UI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(go(n,this.value)):n!==null&&us(this.value)===us(n)&&this.matchesComparison(go(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nr extends TT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new nr(e,n)}matches(e){return wT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wT(i){return i.op==="and"}function bT(i){return MI(i)&&wT(i)}function MI(i){for(const e of i.filters)if(e instanceof nr)return!1;return!0}function Nm(i){if(i instanceof Rt)return i.field.canonicalString()+i.op.toString()+po(i.value);if(bT(i))return i.filters.map((e=>Nm(e))).join(",");{const e=i.filters.map((n=>Nm(n))).join(",");return`${i.op}(${e})`}}function AT(i,e){return i instanceof Rt?(function(s,o){return o instanceof Rt&&s.op===o.op&&s.field.isEqual(o.field)&&Nr(s.value,o.value)})(i,e):i instanceof nr?(function(s,o){return o instanceof nr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,d,m)=>u&&AT(d,o.filters[m])),!0):!1})(i,e):void Ae(19439)}function ST(i){return i instanceof Rt?(function(n){return`${n.field.canonicalString()} ${n.op} ${po(n.value)}`})(i):i instanceof nr?(function(n){return n.op.toString()+" {"+n.getFilters().map(ST).join(" ,")+"}"})(i):"Filter"}class kI extends Rt{constructor(e,n,s){super(e,n,s),this.key=ye.fromName(s.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class LI extends Rt{constructor(e,n){super(e,"in",n),this.keys=RT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class UI extends Rt{constructor(e,n){super(e,"not-in",n),this.keys=RT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function RT(i,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((s=>ye.fromName(s.referenceValue)))}class jI extends Rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cg(n)&&su(n.arrayValue,this.value)}}class zI extends Rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&su(this.value.arrayValue,n)}}class qI extends Rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!su(this.value.arrayValue,n)}}class BI extends Rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>su(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n=null,s=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.Te=null}}function g0(i,e=null,n=[],s=[],o=null,u=null,d=null){return new HI(i,e,n,s,o,u,d)}function hg(i){const e=xe(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Nm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),kh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>po(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>po(s))).join(",")),e.Te=n}return e.Te}function dg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!VI(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!AT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!m0(i.startAt,e.startAt)&&m0(i.endAt,e.endAt)}function Dm(i){return ye.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n=null,s=[],o=[],u=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function FI(i,e,n,s,o,u,d,m){return new pu(i,e,n,s,o,u,d,m)}function fg(i){return new pu(i)}function p0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function xT(i){return i.collectionGroup!==null}function Wl(i){const e=xe(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Vt(Kt.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new wh(u,s))})),n.has(Kt.keyField().canonicalString())||e.Ie.push(new wh(Kt.keyField(),s))}return e.Ie}function Ar(i){const e=xe(i);return e.Ee||(e.Ee=GI(e,Wl(i))),e.Ee}function GI(i,e){if(i.limitType==="F")return g0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new wh(o.field,u)}));const n=i.endAt?new Th(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Th(i.startAt.position,i.startAt.inclusive):null;return g0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Om(i,e){const n=i.filters.concat([e]);return new pu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Pm(i,e,n){return new pu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Uh(i,e){return dg(Ar(i),Ar(e))&&i.limitType===e.limitType}function IT(i){return`${hg(Ar(i))}|lt:${i.limitType}`}function Ja(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>ST(o))).join(", ")}]`),kh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>po(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>po(o))).join(",")),`Target(${s})`})(Ar(i))}; limitType=${i.limitType})`}function jh(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ye.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of Wl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(d,m,p){const y=f0(d,m,p);return d.inclusive?y<=0:y<0})(s.startAt,Wl(s),o)||s.endAt&&!(function(d,m,p){const y=f0(d,m,p);return d.inclusive?y>=0:y>0})(s.endAt,Wl(s),o))})(i,e)}function QI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function CT(i){return(e,n)=>{let s=!1;for(const o of Wl(i)){const u=KI(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function KI(i,e,n){const s=i.field.isKeyField()?ye.comparator(e.key,n.key):(function(u,d,m){const p=d.data.field(u),y=m.data.field(u);return p!==null&&y!==null?go(p,y):Ae(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){fs(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return dT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=new dt(ye.comparator);function yi(){return YI}const NT=new dt(ye.comparator);function Fl(...i){let e=NT;for(const n of i)e=e.insert(n.key,n);return e}function DT(i){let e=NT;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Zs(){return Zl()}function OT(){return Zl()}function Zl(){return new sa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const XI=new dt(ye.comparator),$I=new Vt(ye.comparator);function je(...i){let e=$I;for(const n of i)e=e.add(n);return e}const WI=new Vt(Ue);function ZI(){return WI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_h(e)?"-0":e}}function PT(i){return{integerValue:""+i}}function JI(i,e){return RI(e)?PT(e):mg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(){this._=void 0}}function eC(i,e,n){return i instanceof bh?(function(o,u){const d={fields:{[gT]:{stringValue:mT},[yT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&ug(u)&&(u=Lh(u)),u&&(d.fields[pT]=u),{mapValue:d}})(n,e):i instanceof au?MT(i,e):i instanceof ou?kT(i,e):(function(o,u){const d=VT(o,u),m=y0(d)+y0(o.Ae);return Cm(d)&&Cm(o.Ae)?PT(m):mg(o.serializer,m)})(i,e)}function tC(i,e,n){return i instanceof au?MT(i,e):i instanceof ou?kT(i,e):n}function VT(i,e){return i instanceof Ah?(function(s){return Cm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class bh extends zh{}class au extends zh{constructor(e){super(),this.elements=e}}function MT(i,e){const n=LT(e);for(const s of i.elements)n.some((o=>Nr(o,s)))||n.push(s);return{arrayValue:{values:n}}}class ou extends zh{constructor(e){super(),this.elements=e}}function kT(i,e){let n=LT(e);for(const s of i.elements)n=n.filter((o=>!Nr(o,s)));return{arrayValue:{values:n}}}class Ah extends zh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function y0(i){return _t(i.integerValue||i.doubleValue)}function LT(i){return cg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function nC(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof au&&o instanceof au||s instanceof ou&&o instanceof ou?mo(s.elements,o.elements,Nr):s instanceof Ah&&o instanceof Ah?Nr(s.Ae,o.Ae):s instanceof bh&&o instanceof bh})(i.transform,e.transform)}class rC{constructor(e,n){this.version=e,this.transformResults=n}}class er{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new er}static exists(e){return new er(void 0,e)}static updateTime(e){return new er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ah(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class qh{}function UT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new zT(i.key,er.none()):new yu(i.key,i.data,er.none());{const n=i.data,s=yn.empty();let o=new Vt(Kt.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new ms(i.key,s,new xn(o.toArray()),er.none())}}function iC(i,e,n){i instanceof yu?(function(o,u,d){const m=o.value.clone(),p=v0(o.fieldTransforms,u,d.transformResults);m.setAll(p),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(i,e,n):i instanceof ms?(function(o,u,d){if(!ah(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=v0(o.fieldTransforms,u,d.transformResults),p=u.data;p.setAll(jT(o)),p.setAll(m),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(i,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Jl(i,e,n,s){return i instanceof yu?(function(u,d,m,p){if(!ah(u.precondition,d))return m;const y=u.value.clone(),T=E0(u.fieldTransforms,p,d);return y.setAll(T),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(i,e,n,s):i instanceof ms?(function(u,d,m,p){if(!ah(u.precondition,d))return m;const y=E0(u.fieldTransforms,p,d),T=d.data;return T.setAll(jT(u)),T.setAll(y),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(i,e,n,s):(function(u,d,m){return ah(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(i,e,n)}function sC(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=VT(s.transform,o||null);u!=null&&(n===null&&(n=yn.empty()),n.set(s.field,u))}return n||null}function _0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&mo(s,o,((u,d)=>nC(u,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class yu extends qh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ms extends qh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function jT(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function v0(i,e,n){const s=new Map;Ye(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],d=u.transform,m=e.data.field(u.field);s.set(u.field,tC(d,m,n[o]))}return s}function E0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,d=n.data.field(o.field);s.set(o.field,eC(u,d,e))}return s}class zT extends qh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aC extends qh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&iC(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Jl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Jl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=OT();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=n.has(o.key)?null:m;const p=UT(d,m);p!==null&&s.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(Re.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),je())}isEqual(e){return this.batchId===e.batchId&&mo(this.mutations,e.mutations,((n,s)=>_0(n,s)))&&mo(this.baseMutations,e.baseMutations,((n,s)=>_0(n,s)))}}class gg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ye(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return XI})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new gg(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,He;function cC(i){switch(i){case $.OK:return Ae(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return Ae(15467,{code:i})}}function qT(i){if(i===void 0)return pi("GRPC error has no .code"),$.UNKNOWN;switch(i){case St.OK:return $.OK;case St.CANCELLED:return $.CANCELLED;case St.UNKNOWN:return $.UNKNOWN;case St.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case St.INTERNAL:return $.INTERNAL;case St.UNAVAILABLE:return $.UNAVAILABLE;case St.UNAUTHENTICATED:return $.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case St.NOT_FOUND:return $.NOT_FOUND;case St.ALREADY_EXISTS:return $.ALREADY_EXISTS;case St.PERMISSION_DENIED:return $.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case St.ABORTED:return $.ABORTED;case St.OUT_OF_RANGE:return $.OUT_OF_RANGE;case St.UNIMPLEMENTED:return $.UNIMPLEMENTED;case St.DATA_LOSS:return $.DATA_LOSS;default:return Ae(39323,{code:i})}}(He=St||(St={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=new is([4294967295,4294967295],0);function T0(i){const e=hC().encode(i),n=new tT;return n.update(e),new Uint8Array(n.digest())}function w0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new is([n,s],0),new is([o,u],0)]}class pg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Gl(`Invalid padding: ${n}`);if(s<0)throw new Gl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Gl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Gl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=is.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(is.fromNumber(s)));return o.compare(dC)===1&&(o=new is([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=T0(e),[s,o]=w0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new pg(u,o,n);return s.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const n=T0(e),[s,o]=w0(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(s,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,_u.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Bh(Re.min(),o,new dt(Ue),yi(),je())}}class _u{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new _u(s,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class BT{constructor(e,n){this.targetId=e,this.Ce=n}}class HT{constructor(e,n,s=Xt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class b0{constructor(){this.ve=0,this.Fe=A0(),this.Me=Xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),n=je(),s=je();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:u})}})),new _u(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=A0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fC{constructor(e){this.Ge=e,this.ze=new Map,this.je=yi(),this.Je=Xc(),this.He=Xc(),this.Ye=new dt(Ue)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Dm(u))if(s===0){const d=new ye(u.path);this.et(n,d,rn.newNoDocument(d,Re.min()))}else Ye(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const m=this.ut(e),p=m?this.ct(m,e,d):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,m;try{d=ls(s).toUint8Array()}catch(p){if(p instanceof fT)return fo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new pg(d,o,u)}catch(p){return fo(p instanceof Gl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const m=this.ot(d);if(m){if(u.current&&Dm(m.target)){const p=new ye(m.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,rn.newNoDocument(p,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let s=je();this.He.forEach(((u,d)=>{let m=!0;d.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new Bh(e,n,this.Ye,this.je,s);return this.je=yi(),this.Je=Xc(),this.He=Xc(),this.Ye=new dt(Ue),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new b0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Vt(Ue),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Vt(Ue),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new b0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Xc(){return new dt(ye.comparator)}function A0(){return new dt(ye.comparator)}const mC={asc:"ASCENDING",desc:"DESCENDING"},gC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pC={and:"AND",or:"OR"};class yC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vm(i,e){return i.useProto3Json||kh(e)?e:{value:e}}function Sh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function _C(i,e){return Sh(i,e.toTimestamp())}function Sr(i){return Ye(!!i,49232),Re.fromTimestamp((function(n){const s=os(n);return new lt(s.seconds,s.nanos)})(i))}function yg(i,e){return Mm(i,e).canonicalString()}function Mm(i,e){const n=(function(o){return new ot(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function GT(i){const e=ot.fromString(i);return Ye($T(e),10190,{key:e.toString()}),e}function km(i,e){return yg(i.databaseId,e.path)}function hm(i,e){const n=GT(e);if(n.get(1)!==i.databaseId.projectId)throw new ue($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ue($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ye(KT(n))}function QT(i,e){return yg(i.databaseId,e)}function vC(i){const e=GT(i);return e.length===4?ot.emptyPath():KT(e)}function Lm(i){return new ot(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function KT(i){return Ye(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function S0(i,e,n){return{name:km(i,e),fields:n.value.mapValue.fields}}function EC(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ae(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,T){return y.useProto3Json?(Ye(T===void 0||typeof T=="string",58123),Xt.fromBase64String(T||"")):(Ye(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Xt.fromUint8Array(T||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(y){const T=y.code===void 0?$.UNKNOWN:qT(y.code);return new ue(T,y.message||"")})(d);n=new HT(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=hm(i,s.document.name),u=Sr(s.document.updateTime),d=s.document.createTime?Sr(s.document.createTime):Re.min(),m=new yn({mapValue:{fields:s.document.fields}}),p=rn.newFoundDocument(o,u,d,m),y=s.targetIds||[],T=s.removedTargetIds||[];n=new oh(y,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=hm(i,s.document),u=s.readTime?Sr(s.readTime):Re.min(),d=rn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new oh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=hm(i,s.document),u=s.removedTargetIds||[];n=new oh([],u,o,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new uC(o,u),m=s.targetId;n=new BT(m,d)}}return n}function TC(i,e){let n;if(e instanceof yu)n={update:S0(i,e.key,e.value)};else if(e instanceof zT)n={delete:km(i,e.key)};else if(e instanceof ms)n={update:S0(i,e.key,e.data),updateMask:NC(e.fieldMask)};else{if(!(e instanceof aC))return Ae(16599,{Vt:e.type});n={verify:km(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,d){const m=d.transform;if(m instanceof bh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof au)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ou)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Ah)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw Ae(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:_C(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ae(27497)})(i,e.precondition)),n}function wC(i,e){return i&&i.length>0?(Ye(e!==void 0,14353),i.map((n=>(function(o,u){let d=o.updateTime?Sr(o.updateTime):Sr(u);return d.isEqual(Re.min())&&(d=Sr(u)),new rC(d,o.transformResults||[])})(n,e)))):[]}function bC(i,e){return{documents:[QT(i,e.path)]}}function AC(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=QT(i,o);const u=(function(y){if(y.length!==0)return XT(nr.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((T=>(function(S){return{field:eo(S.field),direction:xC(S.dir)}})(T)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=Vm(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function SC(i){let e=vC(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ye(s===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=(function(A){const S=YT(A);return S instanceof nr&&bT(S)?S.getFilters():[S]})(n.where));let d=[];n.orderBy&&(d=(function(A){return A.map((S=>(function(U){return new wh(to(U.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(S)))})(n.orderBy));let m=null;n.limit&&(m=(function(A){let S;return S=typeof A=="object"?A.value:A,kh(S)?null:S})(n.limit));let p=null;n.startAt&&(p=(function(A){const S=!!A.before,L=A.values||[];return new Th(L,S)})(n.startAt));let y=null;return n.endAt&&(y=(function(A){const S=!A.before,L=A.values||[];return new Th(L,S)})(n.endAt)),FI(e,o,d,u,m,"F",p,y)}function RC(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function YT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=to(n.unaryFilter.field);return Rt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=to(n.unaryFilter.field);return Rt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=to(n.unaryFilter.field);return Rt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=to(n.unaryFilter.field);return Rt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Rt.create(to(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return nr.create(n.compositeFilter.filters.map((s=>YT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(i):Ae(30097,{filter:i})}function xC(i){return mC[i]}function IC(i){return gC[i]}function CC(i){return pC[i]}function eo(i){return{fieldPath:i.canonicalString()}}function to(i){return Kt.fromServerFormat(i.fieldPath)}function XT(i){return i instanceof Rt?(function(n){if(n.op==="=="){if(d0(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NAN"}};if(h0(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(d0(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NAN"}};if(h0(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(n.field),op:IC(n.op),value:n.value}}})(i):i instanceof nr?(function(n){const s=n.getFilters().map((o=>XT(o)));return s.length===1?s[0]:{compositeFilter:{op:CC(n.op),filters:s}}})(i):Ae(54877,{filter:i})}function NC(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function $T(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n,s,o,u=Re.min(),d=Re.min(),m=Xt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.yt=e}}function OC(i){const e=SC({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Pm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this.Cn=new VC}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(as.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(as.min())}updateCollectionGroup(e,n,s){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class VC{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Vt(ot.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Vt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WT=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(WT,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new yo(0)}static cr(){return new yo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="LruGarbageCollector",MC=1048576;function I0([i,e],[n,s]){const o=Ue(i,n);return o===0?Ue(e,s):o}class kC{constructor(e){this.Ir=e,this.buffer=new Vt(I0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();I0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LC{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(x0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ao(n)?he(x0,"Ignoring IndexedDB error during garbage collection: ",n):await bo(n)}await this.Vr(3e5)}))}}class UC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(Mh.ce);const s=new kC(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(R0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),R0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,d,m,p,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,d=Date.now(),this.nthSequenceNumber(e,o)))).next((A=>(s=A,m=Date.now(),this.removeTargets(e,s,n)))).next((A=>(u=A,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((A=>(y=Date.now(),Za()<=Le.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${A} documents in `+(y-p)+`ms
Total Duration: ${y-T}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A}))))}}function jC(i,e){return new UC(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.changes=new sa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Z.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Jl(s.mutation,o,xn.empty(),lt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,je()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=je()){const o=Zs();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let d=Fl();return u.forEach(((m,p)=>{d=d.insert(m,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=Zs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,je())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,m)=>{n.set(d,m)}))}))}computeViews(e,n,s,o){let u=yi();const d=Zl(),m=(function(){return Zl()})();return n.forEach(((p,y)=>{const T=s.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof ms)?u=u.insert(y.key,y):T!==void 0?(d.set(y.key,T.mutation.getFieldMask()),Jl(T.mutation,y,T.mutation.getFieldMask(),lt.now())):d.set(y.key,xn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((y,T)=>d.set(y,T))),n.forEach(((y,T)=>m.set(y,new qC(T,d.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=Zl();let o=new dt(((d,m)=>d-m)),u=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const m of d)m.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let T=s.get(p)||xn.empty();T=m.applyToLocalView(y,T),s.set(p,T);const A=(o.get(m.batchId)||je()).add(p);o=o.insert(m.batchId,A)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,T=p.value,A=OT();T.forEach((S=>{if(!u.has(S)){const L=UT(n.get(S),s.get(S));L!==null&&A.set(S,L),u=u.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,A))}return Z.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return ye.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):Z.resolve(Zs());let m=nu,p=u;return d.next((y=>Z.forEach(y,((T,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(T)?Z.resolve():this.remoteDocumentCache.getEntry(e,T).next((S=>{p=p.insert(T,S)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,p,y,je()))).next((T=>({batchId:m,changes:DT(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next((s=>{let o=Fl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=Fl();return this.indexManager.getCollectionParents(e,u).next((m=>Z.forEach(m,(p=>{const y=(function(A,S){return new pu(S,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((T=>{T.forEach(((A,S)=>{d=d.insert(A,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((d=>{u.forEach(((p,y)=>{const T=y.getKey();d.get(T)===null&&(d=d.insert(T,rn.newInvalidDocument(T)))}));let m=Fl();return d.forEach(((p,y)=>{const T=u.get(p);T!==void 0&&Jl(T.mutation,y,xn.empty(),lt.now()),jh(n,y)&&(m=m.insert(p,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Sr(o.createTime)}})(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:OC(o.bundledQuery),readTime:Sr(o.readTime)}})(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.overlays=new dt(ye.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Zs();return Z.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),Z.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),Z.resolve()}getOverlaysForCollection(e,n,s){const o=Zs(),u=n.length+1,d=new ye(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new dt(((y,T)=>y-T));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=u.get(y.largestBatchId);T===null&&(T=Zs(),u=u.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const m=Zs(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,T)=>m.set(y,T))),!(m.size()>=o)););return Z.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new lC(n,s));let u=this.qr.get(n);u===void 0&&(u=je(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.Qr=new Vt(zt.$r),this.Ur=new Vt(zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new zt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new zt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ye(new ot([])),s=new zt(n,e),o=new zt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ye(new ot([])),s=new zt(n,e),o=new zt(n,e+1);let u=je();return this.Ur.forEachInRange([s,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new zt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class zt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ye.comparator(e.key,n.key)||Ue(e.Yr,n.Yr)}static Kr(e,n){return Ue(e.Yr,n.Yr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Vt(zt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new oC(u,n,s,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new zt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return Z.resolve(d)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return Z.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?lg:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new zt(n,0),o=new zt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(d=>{const m=this.Xr(d.Yr);u.push(m)})),Z.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Vt(Ue);return n.forEach((o=>{const u=new zt(o,0),d=new zt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(m=>{s=s.add(m.Yr)}))})),Z.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ye.isDocumentKey(u)||(u=u.child(""));const d=new zt(new ye(u),0);let m=new Vt(Ue);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Yr)),!0)}),d),Z.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ye(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Z.forEach(n.mutations,(o=>{const u=new zt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new zt(n,0),o=this.Zr.firstAfterOrEqual(s);return Z.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.ri=e,this.docs=(function(){return new dt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return Z.resolve(s?s.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let s=yi();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():rn.newInvalidDocument(o))})),Z.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=yi();const d=n.path,m=new ye(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:T}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||wI(TI(T),s)<=0||(o.has(T.key)||jh(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return Z.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ae(9500)}ii(e,n){return Z.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new YC(this)}getSize(e){return Z.resolve(this.size)}}class YC extends zC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.persistence=e,this.si=new sa((n=>hg(n)),dg),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new _g,this.targetCount=0,this.ai=yo.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new yo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),Z.waitFor(u).next((()=>o))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return Z.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),Z.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),Z.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return Z.resolve(s)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Mh(0),this.li=!1,this.li=!0,this.hi=new GC,this.referenceDelegate=e(this),this.Pi=new XC(this),this.indexManager=new PC,this.remoteDocumentCache=(function(o){return new KC(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new DC(n),this.Ii=new HC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new FC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new QC(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){he("MemoryPersistence","Starting transaction:",e);const o=new $C(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return Z.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class $C extends AI{constructor(e){super(),this.currentSequenceNumber=e}}class vg{constructor(e){this.persistence=e,this.Ri=new _g,this.Vi=null}static mi(e){return new vg(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),Z.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(s=>{const o=ye.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Rh{constructor(e,n){this.persistence=e,this.pi=new sa((s=>xI(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=jC(this,n)}static mi(e,n){return new Rh(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return Z.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?Z.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((m=>{m||(s++,u.removeEntry(d,Re.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ih(e.data.value)),n}br(e,n,s){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return Z.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=je(),o=je();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Eg(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return AS()?8:SI(an())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new WC;return this.Ss(e,n,d).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,d,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(Za()<=Le.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Ja(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(Za()<=Le.DEBUG&&he("QueryEngine","Query:",Ja(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Za()<=Le.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Ja(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ar(n))):Z.resolve())}ys(e,n){if(p0(n))return Z.resolve(null);let s=Ar(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Pm(n,null,"F"),s=Ar(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const d=je(...u);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const y=this.Ds(n,m);return this.Cs(n,y,d,p.readTime)?this.ys(e,Pm(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,s,o){return p0(n)||o.isEqual(Re.min())?Z.resolve(null):this.ps.getDocuments(e,s).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,s,o)?Z.resolve(null):(Za()<=Le.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ja(n)),this.vs(e,d,n,EI(o,nu)).next((m=>m)))}))}Ds(e,n){let s=new Vt(CT(e));return n.forEach(((o,u)=>{jh(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Za()<=Le.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Ja(n)),this.ps.getDocumentsMatchingQuery(e,n,as.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="LocalStore",JC=3e8;class e2{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new dt(Ue),this.xs=new sa((u=>hg(u)),dg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function t2(i,e,n,s){return new e2(i,e,n,s)}async function JT(i,e){const n=xe(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const d=[],m=[];let p=je();for(const y of o){d.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}for(const y of u){m.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(s,p).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:m})))}))}))}function n2(i,e){const n=xe(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,y,T){const A=y.batch,S=A.keys();let L=Z.resolve();return S.forEach((U=>{L=L.next((()=>T.getEntry(p,U))).next((K=>{const F=y.docVersions.get(U);Ye(F!==null,48541),K.version.compareTo(F)<0&&(A.applyToRemoteDocument(K,y),K.isValidDocument()&&(K.setReadTime(y.commitVersion),T.addEntry(K)))}))})),L.next((()=>m.mutationQueue.removeMutationBatch(p,A)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=je();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function ew(i){const e=xe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function r2(i,e){const n=xe(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((T,A)=>{const S=o.get(A);if(!S)return;m.push(n.Pi.removeMatchingKeys(u,T.removedDocuments,A).next((()=>n.Pi.addMatchingKeys(u,T.addedDocuments,A))));let L=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?L=L.withResumeToken(Xt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):T.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(T.resumeToken,s)),o=o.insert(A,L),(function(K,F,ae){return K.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=JC?!0:ae.addedDocuments.size+ae.modifiedDocuments.size+ae.removedDocuments.size>0})(S,L,T)&&m.push(n.Pi.updateTargetData(u,L))}));let p=yi(),y=je();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))})),m.push(i2(u,d,e.documentUpdates).next((T=>{p=T.ks,y=T.qs}))),!s.isEqual(Re.min())){const T=n.Pi.getLastRemoteSnapshotVersion(u).next((A=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(T)}return Z.waitFor(m).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,y))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function i2(i,e,n){let s=je(),o=je();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let d=yi();return n.forEach(((m,p)=>{const y=u.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):he(Tg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)})),{ks:d,qs:o}}))}function s2(i,e){const n=xe(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=lg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function a2(i,e){const n=xe(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,Z.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new Ji(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Um(i,e,n){const s=xe(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Ao(d))throw d;he(Tg,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function C0(i,e,n){const s=xe(i);let o=Re.min(),u=je();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,y,T){const A=xe(p),S=A.xs.get(T);return S!==void 0?Z.resolve(A.Ms.get(S)):A.Pi.getTargetData(y,T)})(s,d,Ar(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:Re.min(),n?u:je()))).next((m=>(o2(s,QI(e),m),{documents:m,Qs:u})))))}function o2(i,e,n){let s=i.Os.get(e)||Re.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class N0{constructor(){this.activeTargetIds=ZI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l2{constructor(){this.Mo=new N0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new N0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="ConnectivityMonitor";class O0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(D0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(D0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c=null;function jm(){return $c===null?$c=(function(){return 268435456+Math.round(2147483648*Math.random())})():$c++,"0x"+$c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="RestConnection",c2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class h2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===vh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const d=jm(),m=this.zo(e,n.toUriEncodedString());he(dm,`Sending RPC '${e}' ${d}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:y}=new URL(m),T=vo(y);return this.Jo(e,m,p,s,T).then((A=>(he(dm,`Received RPC '${e}' ${d}: `,A),A)),(A=>{throw fo(dm,`RPC '${e}' ${d} failed with error: `,A,"url: ",m,"request:",s),A}))}Ho(e,n,s,o,u,d){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=c2[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class f2 extends h2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const d=jm();return new Promise(((m,p)=>{const y=new nT;y.setWithCredentials(!0),y.listenOnce(rT.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case rh.NO_ERROR:const A=y.getResponseJson();he(en,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(A)),m(A);break;case rh.TIMEOUT:he(en,`RPC '${e}' ${d} timed out`),p(new ue($.DEADLINE_EXCEEDED,"Request time out"));break;case rh.HTTP_ERROR:const S=y.getStatus();if(he(en,`RPC '${e}' ${d} failed with status:`,S,"response text:",y.getResponseText()),S>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const U=L==null?void 0:L.error;if(U&&U.status&&U.message){const K=(function(ae){const se=ae.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(se)>=0?se:$.UNKNOWN})(U.status);p(new ue(K,U.message))}else p(new ue($.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ue($.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he(en,`RPC '${e}' ${d} completed.`)}}));const T=JSON.stringify(o);he(en,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",T,s,15)}))}T_(e,n,s){const o=jm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=aT(),m=sT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const T=u.join("");he(en,`Creating RPC '${e}' stream ${o}: ${T}`,p);const A=d.createWebChannel(T,p);this.I_(A);let S=!1,L=!1;const U=new d2({Yo:F=>{L?he(en,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(S||(he(en,`Opening RPC '${e}' stream ${o} transport.`),A.open(),S=!0),he(en,`RPC '${e}' stream ${o} sending:`,F),A.send(F))},Zo:()=>A.close()}),K=(F,ae,se)=>{F.listen(ae,(ne=>{try{se(ne)}catch(me){setTimeout((()=>{throw me}),0)}}))};return K(A,Hl.EventType.OPEN,(()=>{L||(he(en,`RPC '${e}' stream ${o} transport opened.`),U.o_())})),K(A,Hl.EventType.CLOSE,(()=>{L||(L=!0,he(en,`RPC '${e}' stream ${o} transport closed`),U.a_(),this.E_(A))})),K(A,Hl.EventType.ERROR,(F=>{L||(L=!0,fo(en,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),U.a_(new ue($.UNAVAILABLE,"The operation could not be completed")))})),K(A,Hl.EventType.MESSAGE,(F=>{var ae;if(!L){const se=F.data[0];Ye(!!se,16349);const ne=se,me=(ne==null?void 0:ne.error)||((ae=ne[0])==null?void 0:ae.error);if(me){he(en,`RPC '${e}' stream ${o} received error:`,me);const ce=me.status;let _e=(function(x){const D=St[x];if(D!==void 0)return qT(D)})(ce),C=me.message;_e===void 0&&(_e=$.INTERNAL,C="Unknown error status: "+ce+" with message "+me.message),L=!0,U.a_(new ue(_e,C)),A.close()}else he(en,`RPC '${e}' stream ${o} received:`,se),U.u_(se)}})),K(m,iT.STAT_EVENT,(F=>{F.stat===Rm.PROXY?he(en,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===Rm.NOPROXY&&he(en,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function fm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(i){return new yC(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="PersistentStream";class nw{constructor(e,n,s,o,u,d,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(pi(n.toString()),pi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new ue($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(P0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(he(P0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class m2 extends nw{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=EC(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Re.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Re.min():d.readTime?Sr(d.readTime):Re.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Lm(this.serializer),n.addTarget=(function(u,d){let m;const p=d.target;if(m=Dm(p)?{documents:bC(u,p)}:{query:AC(u,p).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=FT(u,d.resumeToken);const y=Vm(u,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(Re.min())>0){m.readTime=Sh(u,d.snapshotVersion.toTimestamp());const y=Vm(u,d.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const s=RC(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Lm(this.serializer),n.removeTarget=e,this.q_(n)}}class g2 extends nw{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=wC(e.writeResults,e.commitTime),s=Sr(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Lm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>TC(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{}class y2 extends p2{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ue($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,Mm(n,s),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ue($.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,Mm(n,s),o,d,m,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ue($.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class _2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pi(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="RemoteStore";class v2{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{aa(this)&&(he(ia,"Restarting streams for network reachability change."),await(async function(p){const y=xe(p);y.Ea.add(4),await vu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Fh(y)})(this))}))})),this.Ra=new _2(s,o)}}async function Fh(i){if(aa(i))for(const e of i.da)await e(!0)}async function vu(i){for(const e of i.da)await e(!1)}function rw(i,e){const n=xe(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Sg(n)?Ag(n):So(n).O_()&&bg(n,e))}function wg(i,e){const n=xe(i),s=So(n);n.Ia.delete(e),s.O_()&&iw(n,e),n.Ia.size===0&&(s.O_()?s.L_():aa(n)&&n.Ra.set("Unknown"))}function bg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}So(i).Y_(e)}function iw(i,e){i.Va.Ue(e),So(i).Z_(e)}function Ag(i){i.Va=new fC({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),So(i).start(),i.Ra.ua()}function Sg(i){return aa(i)&&!So(i).x_()&&i.Ia.size>0}function aa(i){return xe(i).Ea.size===0}function sw(i){i.Va=void 0}async function E2(i){i.Ra.set("Online")}async function T2(i){i.Ia.forEach(((e,n)=>{bg(i,e)}))}async function w2(i,e){sw(i),Sg(i)?(i.Ra.ha(e),Ag(i)):i.Ra.set("Unknown")}async function b2(i,e,n){if(i.Ra.set("Online"),e instanceof HT&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(s){he(ia,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await xh(i,s)}else if(e instanceof oh?i.Va.Ze(e):e instanceof BT?i.Va.st(e):i.Va.tt(e),!n.isEqual(Re.min()))try{const s=await ew(i.localStore);n.compareTo(s)>=0&&await(function(u,d){const m=u.Va.Tt(d);return m.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const T=u.Ia.get(y);T&&u.Ia.set(y,T.withResumeToken(p.resumeToken,d))}})),m.targetMismatches.forEach(((p,y)=>{const T=u.Ia.get(p);if(!T)return;u.Ia.set(p,T.withResumeToken(Xt.EMPTY_BYTE_STRING,T.snapshotVersion)),iw(u,p);const A=new Ji(T.target,p,y,T.sequenceNumber);bg(u,A)})),u.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){he(ia,"Failed to raise snapshot:",s),await xh(i,s)}}async function xh(i,e,n){if(!Ao(e))throw e;i.Ea.add(1),await vu(i),i.Ra.set("Offline"),n||(n=()=>ew(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{he(ia,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Fh(i)}))}function aw(i,e){return e().catch((n=>xh(i,n,e)))}async function Gh(i){const e=xe(i),n=cs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:lg;for(;A2(e);)try{const o=await s2(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,S2(e,o)}catch(o){await xh(e,o)}ow(e)&&lw(e)}function A2(i){return aa(i)&&i.Ta.length<10}function S2(i,e){i.Ta.push(e);const n=cs(i);n.O_()&&n.X_&&n.ea(e.mutations)}function ow(i){return aa(i)&&!cs(i).x_()&&i.Ta.length>0}function lw(i){cs(i).start()}async function R2(i){cs(i).ra()}async function x2(i){const e=cs(i);for(const n of i.Ta)e.ea(n.mutations)}async function I2(i,e,n){const s=i.Ta.shift(),o=gg.from(s,e,n);await aw(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Gh(i)}async function C2(i,e){e&&cs(i).X_&&await(async function(s,o){if((function(d){return cC(d)&&d!==$.ABORTED})(o.code)){const u=s.Ta.shift();cs(s).B_(),await aw(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Gh(s)}})(i,e),ow(i)&&lw(i)}async function V0(i,e){const n=xe(i);n.asyncQueue.verifyOperationInProgress(),he(ia,"RemoteStore received new credentials");const s=aa(n);n.Ea.add(3),await vu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Fh(n)}async function N2(i,e){const n=xe(i);e?(n.Ea.delete(2),await Fh(n)):e||(n.Ea.add(2),await vu(n),n.Ra.set("Unknown"))}function So(i){return i.ma||(i.ma=(function(n,s,o){const u=xe(n);return u.sa(),new m2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:E2.bind(null,i),t_:T2.bind(null,i),r_:w2.bind(null,i),H_:b2.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Sg(i)?Ag(i):i.Ra.set("Unknown")):(await i.ma.stop(),sw(i))}))),i.ma}function cs(i){return i.fa||(i.fa=(function(n,s,o){const u=xe(n);return u.sa(),new g2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:R2.bind(null,i),r_:C2.bind(null,i),ta:x2.bind(null,i),na:I2.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Gh(i)):(await i.fa.stop(),i.Ta.length>0&&(he(ia,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,m=new Rg(e,n,d,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xg(i,e){if(pi("AsyncQueue",`${e}: ${i}`),Ao(i))return new ue($.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{static emptySet(e){return new oo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ye.comparator(n.key,s.key):(n,s)=>ye.comparator(n.key,s.key),this.keyedMap=Fl(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof oo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new oo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(){this.ga=new dt(ye.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class _o{constructor(e,n,s,o,u,d,m,p,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach((m=>{d.push({type:0,doc:m})})),new _o(e,n,oo.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class O2{constructor(){this.queries=k0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=xe(n),u=o.queries;o.queries=k0(),u.forEach(((d,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new ue($.ABORTED,"Firestore shutting down"))}}function k0(){return new sa((i=>IT(i)),Uh)}async function uw(i,e){const n=xe(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new D2,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=xg(d,`Initialization of query '${Ja(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Ig(n)}async function cw(i,e){const n=xe(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function P2(i,e){const n=xe(i);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const m of d.Sa)m.Fa(o)&&(s=!0);d.wa=o}}s&&Ig(n)}function V2(i,e,n){const s=xe(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function Ig(i){i.Ca.forEach((e=>{e.next()}))}var zm,L0;(L0=zm||(zm={})).Ma="default",L0.Cache="cache";class hw{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new _o(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=_o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this.key=e}}class fw{constructor(e){this.key=e}}class M2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=je(),this.mutatedKeys=je(),this.eu=CT(e),this.tu=new oo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new M0,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,A)=>{const S=o.get(T),L=jh(this.query,A)?A:null,U=!!S&&this.mutatedKeys.has(S.key),K=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let F=!1;S&&L?S.data.isEqual(L.data)?U!==K&&(s.track({type:3,doc:L}),F=!0):this.su(S,L)||(s.track({type:2,doc:L}),F=!0,(p&&this.eu(L,p)>0||y&&this.eu(L,y)<0)&&(m=!0)):!S&&L?(s.track({type:0,doc:L}),F=!0):S&&!L&&(s.track({type:1,doc:S}),F=!0,(p||y)&&(m=!0)),F&&(L?(d=d.add(L),u=K?u.add(T):u.delete(T)):(d=d.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),u=u.delete(T.key),s.track({type:1,doc:T})}return{tu:d,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((T,A)=>(function(L,U){const K=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:F})}};return K(L)-K(U)})(T.type,A.type)||this.eu(T.doc,A.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,d.length!==0||y?{snapshot:new _o(this.query,e.tu,u,d,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new M0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=je(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new fw(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new dw(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return _o.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Cg="SyncEngine";class k2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class L2{constructor(e){this.key=e,this.hu=!1}}class U2{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new sa((m=>IT(m)),Uh),this.Iu=new Map,this.Eu=new Set,this.du=new dt(ye.comparator),this.Au=new Map,this.Ru=new _g,this.Vu={},this.mu=new Map,this.fu=yo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function j2(i,e,n=!0){const s=vw(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await mw(s,e,n,!0),o}async function z2(i,e){const n=vw(i);await mw(n,e,!0,!1)}async function mw(i,e,n,s){const o=await a2(i.localStore,Ar(e)),u=o.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await q2(i,e,u,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&rw(i.remoteStore,o),m}async function q2(i,e,n,s,o){i.pu=(A,S,L)=>(async function(K,F,ae,se){let ne=F.view.ru(ae);ne.Cs&&(ne=await C0(K.localStore,F.query,!1).then((({documents:C})=>F.view.ru(C,ne))));const me=se&&se.targetChanges.get(F.targetId),ce=se&&se.targetMismatches.get(F.targetId)!=null,_e=F.view.applyChanges(ne,K.isPrimaryClient,me,ce);return j0(K,F.targetId,_e.au),_e.snapshot})(i,A,S,L);const u=await C0(i.localStore,e,!0),d=new M2(e,u.Qs),m=d.ru(u.documents),p=_u.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),y=d.applyChanges(m,i.isPrimaryClient,p);j0(i,n,y.au);const T=new k2(e,n,d);return i.Tu.set(e,T),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),y.snapshot}async function B2(i,e,n){const s=xe(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((d=>!Uh(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Um(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&wg(s.remoteStore,o.targetId),qm(s,o.targetId)})).catch(bo)):(qm(s,o.targetId),await Um(s.localStore,o.targetId,!0))}async function H2(i,e){const n=xe(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),wg(n.remoteStore,s.targetId))}async function F2(i,e,n){const s=W2(i);try{const o=await(function(d,m){const p=xe(d),y=lt.now(),T=m.reduce(((L,U)=>L.add(U.key)),je());let A,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let U=yi(),K=je();return p.Ns.getEntries(L,T).next((F=>{U=F,U.forEach(((ae,se)=>{se.isValidDocument()||(K=K.add(ae))}))})).next((()=>p.localDocuments.getOverlayedDocuments(L,U))).next((F=>{A=F;const ae=[];for(const se of m){const ne=sC(se,A.get(se.key).overlayedDocument);ne!=null&&ae.push(new ms(se.key,ne,ET(ne.value.mapValue),er.exists(!0)))}return p.mutationQueue.addMutationBatch(L,y,ae,m)})).next((F=>{S=F;const ae=F.applyToLocalDocumentSet(A,K);return p.documentOverlayCache.saveOverlays(L,F.batchId,ae)}))})).then((()=>({batchId:S.batchId,changes:DT(A)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,m,p){let y=d.Vu[d.currentUser.toKey()];y||(y=new dt(Ue)),y=y.insert(m,p),d.Vu[d.currentUser.toKey()]=y})(s,o.batchId,n),await Eu(s,o.changes),await Gh(s.remoteStore)}catch(o){const u=xg(o,"Failed to persist write");n.reject(u)}}async function gw(i,e){const n=xe(i);try{const s=await r2(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(Ye(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Ye(d.hu,14607):o.removedDocuments.size>0&&(Ye(d.hu,42227),d.hu=!1))})),await Eu(n,s,e)}catch(s){await bo(s)}}function U0(i,e,n){const s=xe(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const p=xe(d);p.onlineState=m;let y=!1;p.queries.forEach(((T,A)=>{for(const S of A.Sa)S.va(m)&&(y=!0)})),y&&Ig(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function G2(i,e,n){const s=xe(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let d=new dt(ye.comparator);d=d.insert(u,rn.newNoDocument(u,Re.min()));const m=je().add(u),p=new Bh(Re.min(),new Map,new dt(Ue),d,m);await gw(s,p),s.du=s.du.remove(u),s.Au.delete(e),Ng(s)}else await Um(s.localStore,e,!1).then((()=>qm(s,e,n))).catch(bo)}async function Q2(i,e){const n=xe(i),s=e.batch.batchId;try{const o=await n2(n.localStore,e);yw(n,s,null),pw(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Eu(n,o)}catch(o){await bo(o)}}async function K2(i,e,n){const s=xe(i);try{const o=await(function(d,m){const p=xe(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return p.mutationQueue.lookupMutationBatch(y,m).next((A=>(Ye(A!==null,37113),T=A.keys(),p.mutationQueue.removeMutationBatch(y,A)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,T,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>p.localDocuments.getDocuments(y,T)))}))})(s.localStore,e);yw(s,e,n),pw(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Eu(s,o)}catch(o){await bo(o)}}function pw(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function yw(i,e,n){const s=xe(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function qm(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||_w(i,s)}))}function _w(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(wg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Ng(i))}function j0(i,e,n){for(const s of n)s instanceof dw?(i.Ru.addReference(s.key,e),Y2(i,s)):s instanceof fw?(he(Cg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||_w(i,s.key)):Ae(19791,{wu:s})}function Y2(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(he(Cg,"New document in limbo: "+n),i.Eu.add(s),Ng(i))}function Ng(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new ye(ot.fromString(e)),s=i.fu.next();i.Au.set(s,new L2(n)),i.du=i.du.insert(n,s),rw(i.remoteStore,new Ji(Ar(fg(n.path)),s,"TargetPurposeLimboResolution",Mh.ce))}}async function Eu(i,e,n){const s=xe(i),o=[],u=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{d.push(s.pu(p,e,n).then((y=>{var T;if((y||n)&&s.isPrimaryClient){const A=y?!y.fromCache:(T=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(p.targetId,A?"current":"not-current")}if(y){o.push(y);const A=Eg.As(p.targetId,y);u.push(A)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(p,y){const T=xe(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>Z.forEach(y,(S=>Z.forEach(S.Es,(L=>T.persistence.referenceDelegate.addReference(A,S.targetId,L))).next((()=>Z.forEach(S.ds,(L=>T.persistence.referenceDelegate.removeReference(A,S.targetId,L)))))))))}catch(A){if(!Ao(A))throw A;he(Tg,"Failed to update sequence numbers: "+A)}for(const A of y){const S=A.targetId;if(!A.fromCache){const L=T.Ms.get(S),U=L.snapshotVersion,K=L.withLastLimboFreeSnapshotVersion(U);T.Ms=T.Ms.insert(S,K)}}})(s.localStore,u))}async function X2(i,e){const n=xe(i);if(!n.currentUser.isEqual(e)){he(Cg,"User change. New user:",e.toKey());const s=await JT(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new ue($.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Eu(n,s.Ls)}}function $2(i,e){const n=xe(i),s=n.Au.get(e);if(s&&s.hu)return je().add(s.key);{let o=je();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const m=n.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function vw(i){const e=xe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=gw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G2.bind(null,e),e.Pu.H_=P2.bind(null,e.eventManager),e.Pu.yu=V2.bind(null,e.eventManager),e}function W2(i){const e=xe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K2.bind(null,e),e}class Ih{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return t2(this.persistence,new ZC,e.initialUser,this.serializer)}Cu(e){return new ZT(vg.mi,this.serializer)}Du(e){return new l2}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ih.provider={build:()=>new Ih};class Z2 extends Ih{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ye(this.persistence.referenceDelegate instanceof Rh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new LC(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new ZT((s=>Rh.mi(s,n)),this.serializer)}}class Bm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>U0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=X2.bind(null,this.syncEngine),await N2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new O2})()}createDatastore(e){const n=Hh(e.databaseInfo.databaseId),s=(function(u){return new f2(u)})(e.databaseInfo);return(function(u,d,m,p){return new y2(u,d,m,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,d,m){return new v2(s,o,u,d,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>U0(this.syncEngine,n,0)),(function(){return O0.v()?new O0:new u2})())}createSyncEngine(e,n){return(function(o,u,d,m,p,y,T){const A=new U2(o,u,d,m,p,y);return T&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=xe(o);he(ia,"RemoteStore shutting down."),u.Ea.add(5),await vu(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Bm.provider={build:()=>new Bm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="FirestoreClient";class J2{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=og.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async d=>{he(hs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(he(hs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=xg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function mm(i,e){i.asyncQueue.verifyOperationInProgress(),he(hs,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await JT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function z0(i,e){i.asyncQueue.verifyOperationInProgress();const n=await eN(i);he(hs,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>V0(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>V0(e.remoteStore,o))),i._onlineComponents=e}async function eN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){he(hs,"Using user provided OfflineComponentProvider");try{await mm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===$.FAILED_PRECONDITION||o.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;fo("Error using user provided cache. Falling back to memory cache: "+n),await mm(i,new Ih)}}else he(hs,"Using default OfflineComponentProvider"),await mm(i,new Z2(void 0));return i._offlineComponents}async function Tw(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(he(hs,"Using user provided OnlineComponentProvider"),await z0(i,i._uninitializedComponentsProvider._online)):(he(hs,"Using default OnlineComponentProvider"),await z0(i,new Bm))),i._onlineComponents}function tN(i){return Tw(i).then((e=>e.syncEngine))}async function ww(i){const e=await Tw(i),n=e.eventManager;return n.onListen=j2.bind(null,e.syncEngine),n.onUnlisten=B2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=z2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=H2.bind(null,e.syncEngine),n}function nN(i,e,n={}){const s=new di;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,m,p,y){const T=new Ew({next:S=>{T.Nu(),d.enqueueAndForget((()=>cw(u,A)));const L=S.docs.has(m);!L&&S.fromCache?y.reject(new ue($.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&S.fromCache&&p&&p.source==="server"?y.reject(new ue($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),A=new hw(fg(m.path),T,{includeMetadataChanges:!0,qa:!0});return uw(u,A)})(await ww(i),i.asyncQueue,e,n,s))),s.promise}function rN(i,e,n={}){const s=new di;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,m,p,y){const T=new Ew({next:S=>{T.Nu(),d.enqueueAndForget((()=>cw(u,A))),S.fromCache&&p.source==="server"?y.reject(new ue($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),A=new hw(m,T,{includeMetadataChanges:!0,qa:!0});return uw(u,A)})(await ww(i),i.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="firestore.googleapis.com",B0=!0;class H0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Aw,this.ssl=B0}else this.host=e.host,this.ssl=e.ssl??B0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MC)throw new ue($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ue($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ue($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ue($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new uI;switch(s.type){case"firstParty":return new fI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ue($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=q0.get(n);s&&(he("ComponentProvider","Removing Datastore"),q0.delete(n),s.terminate())})(this),Promise.resolve()}}function iN(i,e,n,s={}){var y;i=Cr(i,Qh);const o=vo(e),u=i._getSettings(),d={...u,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(hE(`https://${m}`),dE("Firestore",!0)),u.host!==Aw&&u.host!==m&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!ea(p,d)&&(i._setSettings(p),s.mockUserToken)){let T,A;if(typeof s.mockUserToken=="string")T=s.mockUserToken,A=nn.MOCK_USER;else{T=gS(s.mockUserToken,(y=i._app)==null?void 0:y.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new ue($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new nn(S)}i._authCredentials=new cI(new lT(T,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ro(this.firestore,e,this._query)}}class vt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}toJSON(){return{type:vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(gu(n,vt._jsonSchema))return new vt(e,s||null,new ye(ot.fromString(n.referencePath)))}}vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:xt("string",vt._jsonSchemaVersion),referencePath:xt("string")};class ss extends Ro{constructor(e,n,s){super(e,n,fg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new ye(e))}withConverter(e){return new ss(this.firestore,e,this._path)}}function In(i,e,...n){if(i=It(i),uT("collection","path",e),i instanceof Qh){const s=ot.fromString(e,...n);return n0(s),new ss(i,null,s)}{if(!(i instanceof vt||i instanceof ss))throw new ue($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ot.fromString(e,...n));return n0(s),new ss(i.firestore,null,s)}}function xo(i,e,...n){if(i=It(i),arguments.length===1&&(e=og.newId()),uT("doc","path",e),i instanceof Qh){const s=ot.fromString(e,...n);return t0(s),new vt(i,null,new ye(s))}{if(!(i instanceof vt||i instanceof ss))throw new ue($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ot.fromString(e,...n));return t0(s),new vt(i.firestore,i instanceof ss?i.converter:null,new ye(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="AsyncQueue";class G0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tw(this,"async_queue_retry"),this._c=()=>{const s=fm();s&&he(F0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=fm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new di;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ao(e))throw e;he(F0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,pi("INTERNAL UNHANDLED ERROR: ",Q0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Rg.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:Q0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Q0(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Io extends Qh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new G0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new G0(e),this._firestoreClient=void 0,await e}}}function sN(i,e){const n=typeof i=="object"?i:pE(),s=typeof i=="string"?i:vh,o=Xm(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=fS("firestore");u&&iN(o,...u)}return o}function Dg(i){if(i._terminated)throw new ue($.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||aN(i),i._firestoreClient}function aN(i){var s,o,u;const e=i._freezeSettings(),n=(function(m,p,y,T){return new NI(m,p,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,bw(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(i._databaseId,((s=i._app)==null?void 0:s.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new J2(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bn(Xt.fromBase64String(e))}catch(n){throw new ue($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bn(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gu(e,Bn._jsonSchema))return Bn.fromBase64String(e.bytes)}}Bn._jsonSchemaVersion="firestore/bytes/1.0",Bn._jsonSchema={type:xt("string",Bn._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rr._jsonSchemaVersion}}static fromJSON(e){if(gu(e,Rr._jsonSchema))return new Rr(e.latitude,e.longitude)}}Rr._jsonSchemaVersion="firestore/geoPoint/1.0",Rr._jsonSchema={type:xt("string",Rr._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:xr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gu(e,xr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new xr(e.vectorValues);throw new ue($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xr._jsonSchemaVersion="firestore/vectorValue/1.0",xr._jsonSchema={type:xt("string",xr._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=/^__.*__$/;class lN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new yu(e,this.data,n,this.fieldTransforms)}}class Sw{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ms(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Rw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:i})}}class Pg{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Pg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ch(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Rw(this.Ac)&&oN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class uN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Hh(e)}Cc(e,n,s,o=!1){return new Pg({Ac:e,methodName:n,Dc:s,path:Kt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yh(i){const e=i._freezeSettings(),n=Hh(i._databaseId);return new uN(i._databaseId,!!e.ignoreUndefinedProperties,n)}function xw(i,e,n,s,o,u={}){const d=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);Vg("Data must be an object, but it was:",d,s);const m=Iw(s,d);let p,y;if(u.merge)p=new xn(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const T=[];for(const A of u.mergeFields){const S=Hm(e,A,n);if(!d.contains(S))throw new ue($.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Nw(T,S)||T.push(S)}p=new xn(T),y=d.fieldTransforms.filter((A=>p.covers(A.field)))}else p=null,y=d.fieldTransforms;return new lN(new yn(m),p,y)}class Xh extends Og{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xh}}function cN(i,e,n,s){const o=i.Cc(1,e,n);Vg("Data must be an object, but it was:",o,s);const u=[],d=yn.empty();fs(s,((p,y)=>{const T=Mg(e,p,n);y=It(y);const A=o.yc(T);if(y instanceof Xh)u.push(T);else{const S=Tu(y,A);S!=null&&(u.push(T),d.set(T,S))}}));const m=new xn(u);return new Sw(d,m,o.fieldTransforms)}function hN(i,e,n,s,o,u){const d=i.Cc(1,e,n),m=[Hm(e,s,n)],p=[o];if(u.length%2!=0)throw new ue($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(Hm(e,u[S])),p.push(u[S+1]);const y=[],T=yn.empty();for(let S=m.length-1;S>=0;--S)if(!Nw(y,m[S])){const L=m[S];let U=p[S];U=It(U);const K=d.yc(L);if(U instanceof Xh)y.push(L);else{const F=Tu(U,K);F!=null&&(y.push(L),T.set(L,F))}}const A=new xn(y);return new Sw(T,A,d.fieldTransforms)}function dN(i,e,n,s=!1){return Tu(n,i.Cc(s?4:3,e))}function Tu(i,e){if(Cw(i=It(i)))return Vg("Unsupported field value:",e,i),Iw(i,e);if(i instanceof Og)return(function(s,o){if(!Rw(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let d=0;for(const m of s){let p=Tu(m,o.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),d++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=It(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return JI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=lt.fromDate(s);return{timestampValue:Sh(o.serializer,u)}}if(s instanceof lt){const u=new lt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Sh(o.serializer,u)}}if(s instanceof Rr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Bn)return{bytesValue:FT(o.serializer,s._byteString)};if(s instanceof vt){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:yg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof xr)return(function(d,m){return{mapValue:{fields:{[_T]:{stringValue:vT},[Eh]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return mg(m.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Vh(s)}`)})(i,e)}function Iw(i,e){const n={};return dT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fs(i,((s,o)=>{const u=Tu(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function Cw(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof lt||i instanceof Rr||i instanceof Bn||i instanceof vt||i instanceof Og||i instanceof xr)}function Vg(i,e,n){if(!Cw(n)||!cT(n)){const s=Vh(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function Hm(i,e,n){if((e=It(e))instanceof Kh)return e._internalPath;if(typeof e=="string")return Mg(i,e);throw Ch("Field path arguments must be of type string or ",i,!1,void 0,n)}const fN=new RegExp("[~\\*/\\[\\]]");function Mg(i,e,n){if(e.search(fN)>=0)throw Ch(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Kh(...e.split("."))._internalPath}catch{throw Ch(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Ch(i,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||d)&&(p+=" (found",u&&(p+=` in field ${s}`),d&&(p+=` in document ${o}`),p+=")"),new ue($.INVALID_ARGUMENT,m+i+p)}function Nw(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(kg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mN extends Dw{data(){return super.data()}}function kg(i,e){return typeof e=="string"?Mg(i,e):e instanceof Kh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ue($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lg{}class pN extends Lg{}function Ir(i,e,...n){let s=[];e instanceof Lg&&s.push(e),s=s.concat(n),(function(u){const d=u.filter((p=>p instanceof Ug)).length,m=u.filter((p=>p instanceof $h)).length;if(d>1||d>0&&m>0)throw new ue($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class $h extends pN{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new $h(e,n,s)}_apply(e){const n=this._parse(e);return Ow(e._query,n),new Ro(e.firestore,e.converter,Om(e._query,n))}_parse(e){const n=Yh(e.firestore);return(function(u,d,m,p,y,T,A){let S;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ue($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){Y0(A,T);const U=[];for(const K of A)U.push(K0(p,u,K));S={arrayValue:{values:U}}}else S=K0(p,u,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||Y0(A,T),S=dN(m,d,A,T==="in"||T==="not-in");return Rt.create(y,T,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function sn(i,e,n){const s=e,o=kg("where",i);return $h._create(o,s,n)}class Ug extends Lg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ug(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:nr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let d=o;const m=u.getFlattenedFilters();for(const p of m)Ow(d,p),d=Om(d,p)})(e._query,n),new Ro(e.firestore,e.converter,Om(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function K0(i,e,n){if(typeof(n=It(n))=="string"){if(n==="")throw new ue($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xT(e)&&n.indexOf("/")!==-1)throw new ue($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ot.fromString(n));if(!ye.isDocumentKey(s))throw new ue($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return c0(i,new ye(s))}if(n instanceof vt)return c0(i,n._key);throw new ue($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vh(n)}.`)}function Y0(i,e){if(!Array.isArray(i)||i.length===0)throw new ue($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ow(i,e){const n=(function(o,u){for(const d of o)for(const m of d.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ue($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class yN{convertValue(e,n="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return fs(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){var s,o,u;const n=(u=(o=(s=e.fields)==null?void 0:s[Eh].arrayValue)==null?void 0:o.values)==null?void 0:u.map((d=>_t(d.doubleValue)));return new xr(n)}convertGeoPoint(e){return new Rr(_t(e.latitude),_t(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Lh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ru(e));default:return null}}convertTimestamp(e){const n=os(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ot.fromString(e);Ye($T(s),9688,{name:e});const o=new iu(s.get(1),s.get(3)),u=new ye(s.popFirst(5));return o.isEqual(n)||pi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class Ql{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Js extends Dw{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(kg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Js._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Js._jsonSchemaVersion="firestore/documentSnapshot/1.0",Js._jsonSchema={type:xt("string",Js._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class lh extends Js{data(e={}){return super.data(e)}}class lo{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ql(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new lh(this._firestore,this._userDataWriter,s.key,s,new Ql(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const p=new lh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ql(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new lh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ql(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),T=d.indexOf(m.doc.key)),{type:_N(m.type),doc:p,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=lo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=og.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _N(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(i){i=Cr(i,vt);const e=Cr(i.firestore,Io);return nN(Dg(e),i._key).then((n=>TN(e,i,n)))}lo._jsonSchemaVersion="firestore/querySnapshot/1.0",lo._jsonSchema={type:xt("string",lo._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};class Vw extends yN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}}function tr(i){i=Cr(i,Ro);const e=Cr(i.firestore,Io),n=Dg(e),s=new Vw(e);return gN(i._query),rN(n,i._query).then((o=>new lo(e,s,i,o)))}function vN(i,e,n){i=Cr(i,vt);const s=Cr(i.firestore,Io),o=Pw(i.converter,e);return jg(s,[xw(Yh(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,er.none())])}function EN(i,e,n,...s){i=Cr(i,vt);const o=Cr(i.firestore,Io),u=Yh(o);let d;return d=typeof(e=It(e))=="string"||e instanceof Kh?hN(u,"updateDoc",i._key,e,n,s):cN(u,"updateDoc",i._key,e),jg(o,[d.toMutation(i._key,er.exists(!0))])}function Mw(i,e){const n=Cr(i.firestore,Io),s=xo(i),o=Pw(i.converter,e);return jg(n,[xw(Yh(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,er.exists(!1))]).then((()=>s))}function jg(i,e){return(function(s,o){const u=new di;return s.asyncQueue.enqueueAndForget((async()=>F2(await tN(s),o,u))),u.promise})(Dg(i),e)}function TN(i,e,n){const s=n.docs.get(e._key),o=new Vw(i);return new Js(i,o,e._key,s,new Ql(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){wo=o})(Eo),co(new ta("firestore",((s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),m=new Io(new hI(s.getProvider("auth-internal")),new mI(d,s.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ue($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(y.options.projectId,T)})(d,o),d);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),rs(Wv,Zv,e),rs(Wv,Zv,"esm2020")})();var wN="firebase",bN="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs(wN,bN,"app");const AN={apiKey:"AIzaSyCDZJqOx5eXpu3cD_FBJ8oi-hYvLCpbDXE",authDomain:"verdadreto-bec6a.firebaseapp.com",projectId:"verdadreto-bec6a",storageBucket:"verdadreto-bec6a.firebasestorage.app",messagingSenderId:"938969209658",appId:"1:938969209658:web:534282f57a8ff381c00e03"},kw=gE(AN),Yt=sN(kw),rr=oI(kw),Lw=new ui;Lw.setCustomParameters({prompt:"select_account"});const X0=()=>{const i="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<6;n++)e+=i.charAt(Math.floor(Math.random()*i.length));return e},SN=async i=>{try{const e=In(Yt,"users"),n=Ir(e,sn("referralCode","==",i));return(await tr(n)).empty}catch(e){return console.error("Error checking referral code uniqueness:",e),!1}},RN=async()=>{let i,e=!1,n=0;const s=10;do i=X0(),e=await SN(i),n++;while(!e&&n<s);return e||(i=X0()+Date.now().toString().slice(-2)),i},zg=async(i,e)=>{try{const n=xo(Yt,"users",i.uid);if(!(await wu(n)).exists()){const o=await RN(),u={uid:i.uid,email:i.email,displayName:i.displayName,photoURL:i.photoURL,isAnonymous:i.isAnonymous,emailVerified:i.emailVerified,referralCode:o,referralCount:0,createdAt:new Date,...e&&{usedReferralCode:e}};await vN(n,u)}}catch(n){console.error("Error creating user profile:",n)}},Co=i=>({uid:i.uid,email:i.email,displayName:i.displayName,photoURL:i.photoURL,isAnonymous:i.isAnonymous,emailVerified:i.emailVerified}),Uw=async i=>{try{const e=await px(rr,Lw);return await zg(e.user,i),Co(e.user)}catch(e){throw console.error("Error al iniciar sesin con Google:",e),new Error(e.message||"Error al iniciar sesin con Google")}},jw=async(i,e)=>{try{const n=await FR(rr,i,e);return Co(n.user)}catch(n){throw console.error("Error al iniciar sesin:",n),new Error(Bg(n.code))}},zw=async(i,e,n,s)=>{try{const o=await HR(rr,i,e);return n&&await QR(o.user,{displayName:n}),await zg(o.user,s),await HE(o.user),Co(o.user)}catch(o){throw console.error("Error al registrarse:",o),new Error(Bg(o.code))}},qw=async()=>{try{const i=await UR(rr);return await zg(i.user),Co(i.user)}catch(i){throw console.error("Error al iniciar sesin annima:",i),new Error("Error al iniciar sesin annima")}},xN=async()=>{try{await $R(rr)}catch(i){throw console.error("Error al cerrar sesin:",i),new Error("Error al cerrar sesin")}},Bw=async i=>{try{await BR(rr,i)}catch(e){throw console.error("Error al enviar email de restablecimiento:",e),new Error(Bg(e.code))}},Hw=async()=>{try{if(rr.currentUser)await HE(rr.currentUser);else throw new Error("No hay usuario autenticado")}catch(i){throw console.error("Error al reenviar verificacin:",i),new Error("Error al reenviar verificacin de email")}},Fw=i=>XR(rr,e=>{i(e?Co(e):null)}),qg=()=>rr.currentUser?Co(rr.currentUser):null,Fm=()=>{const i=qg();return i!==null&&!i.isAnonymous&&i.emailVerified},Bg=i=>{switch(i){case"auth/user-not-found":return"No existe una cuenta con este email";case"auth/wrong-password":return"Contrasea incorrecta";case"auth/email-already-in-use":return"Ya existe una cuenta con este email";case"auth/weak-password":return"La contrasea debe tener al menos 6 caracteres";case"auth/invalid-email":return"Email invlido";case"auth/too-many-requests":return"Demasiados intentos fallidos. Intenta ms tarde";case"auth/network-request-failed":return"Error de conexin. Verifica tu internet";default:return"Error de autenticacin. Intenta nuevamente"}},IN=Object.freeze(Object.defineProperty({__proto__:null,canPurchase:Fm,getCurrentUser:qg,logout:xN,onAuthStateChange:Fw,registerWithEmail:zw,resendEmailVerification:Hw,resetPassword:Bw,signInAnonymous:qw,signInWithEmail:jw,signInWithGoogle:Uw},Symbol.toStringTag,{value:"Module"})),Gw=le.createContext(void 0),CN=({children:i})=>{const[e,n]=le.useState({user:null,isLoading:!0,isAuthenticated:!1});le.useEffect(()=>{const m=Fw(p=>{n({user:p,isLoading:!1,isAuthenticated:p!==null&&!p.isAnonymous})});return()=>m()},[]);const d={...e,login:()=>{},logout:async()=>{try{const{logout:m}=await nE(async()=>{const{logout:p}=await Promise.resolve().then(()=>IN);return{logout:p}},void 0,import.meta.url);await m()}catch(m){console.error("Error al cerrar sesin:",m)}},refreshUser:()=>{const m=qg();n(p=>({...p,user:m,isAuthenticated:m!==null&&!m.isAnonymous}))}};return E.jsx(Gw.Provider,{value:d,children:i})},Hg=()=>{const i=le.useContext(Gw);if(i===void 0)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return i},ds={PURCHASED_PACKS:"verdad_reto_purchased_packs",CACHED_GAME_ITEMS:"verdad_reto_cached_items",CACHED_CATEGORIES:"verdad_reto_cached_categories",CACHE_PERMISSION:"verdad_reto_cache_permission",LAST_SYNC:"verdad_reto_last_sync"},NN=()=>{const i=localStorage.getItem(ds.CACHE_PERMISSION);if(i==="granted")return!0;if(i==="denied")return!1;const e=window.confirm(`Deseas permitir que la aplicacin guarde los packs comprados localmente para poder jugar sin conexin?

Esto mejorar tu experiencia permitindote acceder a tus packs incluso sin internet.`);return localStorage.setItem(ds.CACHE_PERMISSION,e?"granted":"denied"),e},lu=()=>localStorage.getItem(ds.CACHE_PERMISSION)==="granted",DN=async(i,e,n)=>{if(!lu()){console.log("Cache permission not granted, skipping cache");return}try{const s={pack:i,gameData:{items:e,categories:n,timestamp:Date.now()},timestamp:Date.now()},o=Fg();o[i.id]=s,localStorage.setItem(ds.PURCHASED_PACKS,JSON.stringify(o)),localStorage.setItem(ds.LAST_SYNC,Date.now().toString()),console.log(`Pack ${i.name} cached successfully`)}catch(s){console.error("Error caching pack:",s)}},Fg=()=>{try{const i=localStorage.getItem(ds.PURCHASED_PACKS);return i?JSON.parse(i):{}}catch(i){return console.error("Error reading cached packs:",i),{}}},ON=i=>{if(!lu())return null;try{const e=Fg(),n=[],s=[];for(const o of i){const u=e[o];u&&(n.push(...u.gameData.items),s.push(...u.gameData.categories))}return n.length===0?null:{items:n,categories:[...new Set(s)]}}catch(e){return console.error("Error reading cached game data:",e),null}},PN=()=>{Object.values(ds).forEach(i=>{localStorage.removeItem(i)}),console.log("Cache cleared successfully")},Qw=()=>{const i=Fg(),e=localStorage.getItem(ds.LAST_SYNC);return{hasPermission:lu(),packsCount:Object.keys(i).length,lastSync:e?new Date(parseInt(e)):null,packs:Object.keys(i)}};var Kw="basil",VN=function(e){return e===3?"v3":e},Yw="https://js.stripe.com",MN="".concat(Yw,"/").concat(Kw,"/stripe.js"),kN=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,LN=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var UN=function(e){return kN.test(e)||LN.test(e)},jN=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Yw,'"]')),n=0;n<e.length;n++){var s=e[n];if(UN(s.src))return s}return null},$0=function(e){var n="",s=document.createElement("script");s.src="".concat(MN).concat(n);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(s),s},zN=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:n})},jl=null,Wc=null,Zc=null,qN=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},BN=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},HN=function(e){return jl!==null?jl:(jl=new Promise(function(n,s){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var o=jN();if(!(o&&e)){if(!o)o=$0(e);else if(o&&Zc!==null&&Wc!==null){var u;o.removeEventListener("load",Zc),o.removeEventListener("error",Wc),(u=o.parentNode)===null||u===void 0||u.removeChild(o),o=$0(e)}}Zc=BN(n,s),Wc=qN(s),o.addEventListener("load",Zc),o.addEventListener("error",Wc)}catch(d){s(d);return}}),jl.catch(function(n){return jl=null,Promise.reject(n)}))},FN=function(e,n,s){if(e===null)return null;var o=n[0],u=o.match(/^pk_test/),d=VN(e.version),m=Kw;u&&d!==m&&console.warn("Stripe.js@".concat(d," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(m,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var p=e.apply(void 0,n);return zN(p,s),p},zl,Xw=!1,$w=function(){return zl||(zl=HN(null).catch(function(e){return zl=null,Promise.reject(e)}),zl)};Promise.resolve().then(function(){return $w()}).catch(function(i){Xw||console.warn(i)});var GN=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];Xw=!0;var o=Date.now();return $w().then(function(u){return FN(u,n,o)})};const QN="pk_live_51S2dpMEamlsERKowyMSm4kgm11dMknJLyZGy9gZsIBBd3BQo3l9Vnn0TYKWcmuDtnq23YEsHo7FL69hGEM3UAboz00Onx53LCm";let gm=null;const KN=()=>(gm||(gm=GN(QN)),gm),Ww=async()=>{try{const i=await wu(xo(Yt,"config","stripe"));return i.exists()?i.data():null}catch(i){return console.error("Error obteniendo configuracin de Stripe:",i),null}},YN=async(i,e,n)=>{try{if(!i.isPremium)throw new Error("Este pack no requiere pago");const s=await Ww();if(!s)throw new Error("Configuracin de Stripe no disponible");const o=i.priceAmount||0,u=i.originalPriceAmount||i.priceAmount||0;console.log("Creando sesin de checkout:",{packId:i.id,originalAmount:u,finalAmount:o,hasDiscount:i.hasDiscount,discountReason:i.discountReason});const d=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packId:i.id,priceId:i.stripePriceId,userEmail:e,userId:n,successUrl:`${window.location.origin}${s.successUrl}&pack=${i.id}`,cancelUrl:`${window.location.origin}${s.cancelUrl}`,hasDiscount:i.hasDiscount,finalAmount:o,originalAmount:u,discountReason:i.discountReason})});if(!d.ok){const p=await d.json();throw new Error(p.error||"Error creando sesin de pago")}const m=await d.json();return{sessionId:m.id,url:m.url}}catch(s){throw console.error("Error creando sesin de checkout:",s),s}},XN=async(i,e,n)=>{try{const s=await KN();if(!s)throw new Error("Stripe no est disponible");const o=await YN(i,e,n);if(!o)throw new Error("No se pudo crear la sesin de pago");await $N({userId:n,packId:i.id,stripeSessionId:o.sessionId,purchaseDate:new Date,amount:i.priceAmount||0,currency:i.currency||"EUR",status:"pending",email:e});const{error:u}=await s.redirectToCheckout({sessionId:o.sessionId});if(u)throw new Error(u.message)}catch(s){throw console.error("Error redirigiendo a checkout:",s),s}},$N=async i=>{try{return(await Mw(In(Yt,"userPurchases"),{...i,purchaseDate:i.purchaseDate.toISOString()})).id}catch(e){throw console.error("Error guardando compra pendiente:",e),e}},WN=async i=>{try{const e=Ir(In(Yt,"userPurchases"),sn("userId","==",i),sn("status","==","completed"));return(await tr(e)).docs.map(s=>({id:s.id,...s.data(),purchaseDate:new Date(s.data().purchaseDate)}))}catch(e){return console.error("Error obteniendo compras del usuario:",e),[]}},W0=async i=>{try{return(await WN(i)).map(n=>n.packId)}catch(e){return console.error("Error obteniendo packs comprados:",e),[]}},ZN=({onClose:i})=>{const[e,n]=le.useState(null),[s,o]=le.useState(!1);le.useEffect(()=>{u()},[]);const u=()=>{const p=Qw();n(p)},d=async()=>{o(!0);try{NN()&&u()}finally{o(!1)}},m=()=>{window.confirm("Ests seguro de que quieres eliminar todos los datos guardados localmente?")&&(PN(),u())};return e?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("h2",{className:"text-xl font-bold",children:"Almacenamiento Local"}),E.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"Estado del Cach"}),E.jsxs("div",{className:"space-y-2 text-sm",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Permiso:"}),E.jsx("span",{className:`font-medium ${e.hasPermission?"text-green-600":"text-red-600"}`,children:e.hasPermission?"Activado":"Desactivado"})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Packs guardados:"}),E.jsx("span",{className:"font-medium",children:e.packsCount})]}),e.lastSync&&E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"ltima sincronizacin:"}),E.jsxs("span",{className:"font-medium text-xs",children:[e.lastSync.toLocaleDateString()," ",e.lastSync.toLocaleTimeString()]})]})]})]}),e.packsCount>0&&E.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"Packs Disponibles Sin Conexin"}),E.jsx("div",{className:"space-y-1 text-sm",children:e.packs.map(p=>E.jsxs("div",{className:"flex items-center",children:[E.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),E.jsx("span",{className:"capitalize",children:p.replace("-"," ")})]},p))})]}),E.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"Qu es el almacenamiento local?"}),E.jsx("p",{className:"text-sm text-gray-700",children:"Permite guardar los packs que compres en tu dispositivo para poder jugar sin conexin a internet. Los datos se mantienen seguros en tu navegador."})]}),E.jsxs("div",{className:"flex flex-col space-y-2",children:[e.hasPermission?E.jsx("div",{className:"text-center text-green-600 font-medium",children:" Almacenamiento local activado"}):E.jsx(Ge,{onClick:d,disabled:s,className:"w-full bg-green-600 hover:bg-green-700",children:s?"Procesando...":"Activar Almacenamiento Local"}),e.packsCount>0&&E.jsx(Ge,{onClick:m,className:"w-full bg-red-600 hover:bg-red-700",children:"Limpiar Datos Guardados"}),E.jsx(Ge,{onClick:i,className:"w-full bg-gray-600 hover:bg-gray-700",children:"Cerrar"})]})]})]})}):E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:E.jsx("div",{className:"text-center",children:"Cargando informacin del cach..."})})})},JN=({pack:i,onBack:e,onSuccess:n})=>{const{user:s}=Hg(),[o,u]=le.useState(!1),[d,m]=le.useState(null),[p,y]=le.useState(null);le.useEffect(()=>{(async()=>{try{const L=await Ww();y(L)}catch{m("Error cargando configuracin de pago")}})()},[]);const T=async()=>{if(!s||!s.email){m("Debes estar autenticado para realizar una compra");return}if(!i.isPremium){m("Este pack no requiere pago");return}u(!0),m(null);try{await XN(i,s.email,s.uid),n&&n()}catch(S){m(S.message||"Error procesando el pago"),u(!1)}},A=(S,L)=>new Intl.NumberFormat("es-ES",{style:"currency",currency:L.toUpperCase()}).format(S/100);return p?E.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:E.jsxs("div",{className:"w-full max-w-md",children:[E.jsxs("div",{className:"relative text-center mb-8",children:[E.jsx("button",{onClick:e,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:E.jsx(eE,{className:"w-8 h-8"})}),E.jsx("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Checkout"})]}),E.jsxs(Hn,{className:"p-6",children:[E.jsxs("div",{className:"text-center mb-6",children:[E.jsx("div",{className:"text-6xl mb-4",children:i.icon}),E.jsx("h2",{className:"text-2xl font-bold text-cyan-400 mb-2",children:i.name}),E.jsx("p",{className:"text-gray-400 mb-4",children:i.description}),i.priceAmount&&i.currency&&E.jsxs("div",{className:"bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-lg p-4 mb-4",children:[E.jsx("div",{className:"text-3xl font-bold text-white",children:A(i.priceAmount,i.currency)}),E.jsx("div",{className:"text-sm text-gray-300",children:"Pago nico"})]})]}),E.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 mb-6",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[E.jsx(ro,{className:"w-5 h-5 text-green-400"}),E.jsx("span",{className:"text-green-400 font-semibold",children:"Pago seguro"})]}),E.jsx("p",{className:"text-sm text-gray-300",children:"Tu pago est protegido por Stripe. No almacenamos informacin de tarjetas de crdito."})]}),s&&E.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:[E.jsxs("div",{className:"text-sm text-gray-300",children:[E.jsx("strong",{children:"Cuenta:"})," ",s.displayName||s.email]}),E.jsxs("div",{className:"text-sm text-gray-300",children:[E.jsx("strong",{children:"Email:"})," ",s.email]})]}),d&&E.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6",children:E.jsx("p",{className:"text-red-200 text-sm",children:d})}),E.jsx(Ge,{onClick:T,disabled:o||!s,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:o?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Procesando..."]}):E.jsxs(E.Fragment,{children:[E.jsx(tE,{className:"w-5 h-5"}),"Pagar con Stripe"]})}),E.jsx("div",{className:"mt-4 text-center",children:E.jsx("p",{className:"text-xs text-gray-400",children:"Al continuar, aceptas nuestros trminos de servicio y poltica de privacidad."})})]}),E.jsxs("div",{className:"mt-6 text-center",children:[E.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Mtodos de pago aceptados:"}),E.jsxs("div",{className:"flex justify-center gap-2",children:[E.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Visa"}),E.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Mastercard"}),E.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"American Express"})]})]})]})}):E.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),E.jsx("p",{className:"text-gray-400",children:"Cargando configuracin de pago..."})]})})},eD=({availablePacks:i,purchasedPacks:e,onPurchase:n,onBack:s,onGoToLogin:o})=>{const{user:u,isAuthenticated:d}=Hg(),[m,p]=le.useState(!1),[y,T]=le.useState(!1),[A,S]=le.useState(!1),[L,U]=le.useState(null),[K,F]=le.useState([]),[ae,se]=le.useState(!1);le.useEffect(()=>{(async()=>{if(u&&d){se(!0);try{const R=await W0(u.uid);F(R)}catch(R){console.error("Error cargando compras del usuario:",R)}finally{se(!1)}}else F([])})()},[u,d]);const ne=C=>{const R=i.find(x=>x.id===C);if(R){if(!R.isPremium||R.id==="base"){if(!Fm()){p(!0),setTimeout(()=>p(!1),3e3);return}n(C);return}if(!Fm()){p(!0),setTimeout(()=>p(!1),3e3);return}U(R),S(!0)}},me=async()=>{if(S(!1),U(null),u&&d)try{const C=await W0(u.uid);F(C),L&&C.includes(L.id)&&n(L.id)}catch(C){console.error("Error actualizando compras:",C)}},ce=()=>{S(!1),U(null)},_e=Qw();return E.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:E.jsxs("div",{className:"w-full max-w-2xl",children:[E.jsxs("div",{className:"relative text-center mb-8",children:[E.jsx("button",{onClick:s,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:E.jsx(eE,{className:"w-8 h-8"})}),E.jsx("button",{onClick:()=>T(!0),className:"absolute right-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",title:"Gestionar almacenamiento local",children:E.jsxs("div",{className:"relative",children:[E.jsx(J0,{className:"w-8 h-8"}),_e.packsCount>0&&E.jsx("span",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:_e.packsCount})]})}),E.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Tienda de Paquetes"}),E.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 text-sm",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(LA,{className:"w-4 h-4"}),u?E.jsx("span",{className:`${d?"text-green-400":"text-yellow-400"}`,children:d?`Conectado como ${u.displayName||u.email}`:"Usuario annimo - Inicia sesin para comprar"}):E.jsx("span",{className:"text-gray-400",children:"No conectado"})]}),u&&d&&E.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:E.jsx("a",{href:"https://verdad-reto.es.eu.org/delete-account.html",target:"_blank",rel:"noopener noreferrer",className:"hover:text-red-400 transition-colors",children:"Eliminar cuenta"})})]})]}),m&&E.jsxs("div",{className:"mb-6 p-4 bg-yellow-500/20 border border-yellow-500 rounded-lg text-center",children:[E.jsx("p",{className:"text-yellow-100 mb-2",children:"Necesitas iniciar sesin y verificar tu email para comprar packs premium"}),o&&E.jsx(Ge,{onClick:o,className:"bg-yellow-600 hover:bg-yellow-700",children:"Ir a Iniciar Sesin"})]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(C=>{const R=e.includes(C.id),x=K.includes(C.id),D=R||x,P=C.id==="base",M=C.isPremium&&!P,I=M&&!D;return E.jsxs(Hn,{className:`flex flex-col text-center border-2 transition-all ${D?"border-green-500/50":I?"border-yellow-500/50 opacity-75":"border-transparent hover:border-pink-500/50"}`,children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"text-5xl mb-4",children:C.icon}),I&&E.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-500 rounded-full p-1",children:E.jsx(ro,{className:"w-4 h-4 text-black"})})]}),E.jsx("h2",{className:`text-2xl font-bold ${D?"text-green-400":I?"text-yellow-400":"text-cyan-400"}`,children:C.name}),E.jsx("p",{className:"text-gray-400 mt-2 mb-2 flex-grow",children:C.description}),M&&C.priceAmount&&C.currency&&E.jsxs("div",{className:"mb-4",children:[C.hasDiscount&&C.originalPriceAmount?E.jsxs("div",{className:"space-y-1",children:[E.jsx("div",{className:"text-sm text-gray-500 line-through",children:new Intl.NumberFormat("es-ES",{style:"currency",currency:C.currency.toUpperCase()}).format(C.originalPriceAmount/100)}),E.jsx("div",{className:`text-lg font-bold ${D?"text-green-400":"text-red-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:C.currency.toUpperCase()}).format(C.priceAmount/100)}),E.jsx("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:C.discountPercentage?`-${C.discountPercentage}%`:`-${new Intl.NumberFormat("es-ES",{style:"currency",currency:C.currency.toUpperCase()}).format((C.originalPriceAmount-C.priceAmount)/100)}`}),C.discountReason&&E.jsx("div",{className:"text-xs text-yellow-400 italic",children:C.discountReason})]}):E.jsx("div",{className:`text-lg font-bold ${D?"text-green-400":"text-yellow-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:C.currency.toUpperCase()}).format(C.priceAmount/100)}),E.jsx("div",{className:"text-xs text-gray-500",children:"Pago nico"})]}),D?E.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-green-700 text-green-200",children:" Comprado"}):P?E.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-blue-700 text-blue-200",children:"Incluido"}):M?E.jsx(Ge,{onClick:()=>ne(C.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",disabled:ae,children:ae?E.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):E.jsxs(E.Fragment,{children:[E.jsx(tE,{className:"w-4 h-4"}),"Comprar ",C.price]})}):E.jsxs(Ge,{onClick:()=>ne(C.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2",children:[E.jsx(ro,{className:"w-4 h-4"}),"Desbloquear (",C.price,")"]})]},C.id)})}),y&&E.jsx(ZN,{onClose:()=>T(!1)}),A&&L&&E.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:E.jsx("div",{className:"w-full h-full",children:E.jsx(JN,{pack:L,onBack:ce,onSuccess:me})})})]})})},tD=i=>{var n;if(!i.hasDiscount||!i.priceAmount)return i;if(i.discountValidUntil&&new Date>i.discountValidUntil)return{...i,hasDiscount:!1};let e=i.priceAmount;return i.discountPercentage?e=i.priceAmount*(1-i.discountPercentage/100):i.discountAmount&&(e=i.priceAmount-i.discountAmount),e=Math.max(0,Math.round(e)),{...i,originalPriceAmount:i.priceAmount,priceAmount:e,price:new Intl.NumberFormat("es-ES",{style:"currency",currency:((n=i.currency)==null?void 0:n.toUpperCase())||"EUR"}).format(e/100)}},Zw=async()=>{try{const i=In(Yt,"packs"),e=await tr(i);return e.empty?(console.warn("No packs found in Firebase database"),[]):e.docs.map(o=>{const u=o.data();return{id:o.id,name:u.name,description:u.description,price:u.price,icon:u.icon,isActive:u.isActive??!0,priceAmount:u.priceAmount,currency:u.currency,isPremium:u.isPremium??!1,stripeProductId:u.stripeProductId,stripePriceId:u.stripePriceId,hasDiscount:u.hasDiscount??!1,discountPercentage:u.discountPercentage,discountAmount:u.discountAmount,discountReason:u.discountReason,discountValidUntil:u.discountValidUntil?u.discountValidUntil.toDate():void 0,originalPriceAmount:u.originalPriceAmount,allowDemo:u.allowDemo??!1,demoPlaysCount:u.demoPlaysCount??0}}).filter(o=>o.isActive).map(o=>tD(o))}catch(i){throw console.error("Error connecting to Firebase:",i),new Error("No se pudo conectar a la base de datos. Verifica tu conexin a internet.")}},nD=async i=>{try{if(!i||i.length===0)return console.warn("No categories provided for questions query"),[];const e=In(Yt,"gameItems"),n=Ir(e,sn("type","==","question"),sn("category","in",i)),s=await tr(n);return s.empty?(console.warn("No questions found in Firebase database for categories:",i),[]):s.docs.map(u=>{const d=u.data();return{text:d.text,category:d.category}})}catch(e){throw console.error("Error fetching questions from Firebase:",e),new Error("No se pudieron cargar las preguntas. Verifica tu conexin a internet.")}},rD=async i=>{try{if(!i||i.length===0)return console.warn("No categories provided for dares query"),[];const e=In(Yt,"gameItems"),n=Ir(e,sn("type","==","dare"),sn("category","in",i)),s=await tr(n);return s.empty?(console.warn("No dares found in Firebase database for categories:",i),[]):s.docs.map(u=>{const d=u.data();return{text:d.text,category:d.category}})}catch(e){throw console.error("Error fetching dares from Firebase:",e),new Error("No se pudieron cargar los retos. Verifica tu conexin a internet.")}},iD=async i=>{try{if(!i||i.length===0)return console.warn("No pack IDs provided for categories query"),[];const e=In(Yt,"gameItems"),n=Ir(e,sn("packId","in",i)),s=await tr(n);return s.empty?(console.warn("No categories found in Firebase database for packs:",i),[]):[...new Set(s.docs.map(u=>u.data().category))]}catch(e){throw console.error("Error fetching categories from Firebase:",e),new Error("No se pudieron cargar las categoras. Verifica tu conexin a internet.")}},sD=async i=>{try{if(!i||i.length===0)return console.warn("No pack IDs provided for game data query"),{questions:[],dares:[],categories:[]};const e=await iD(i),[n,s]=await Promise.all([nD(e),rD(e)]);if(lu()&&(n.length>0||s.length>0)){const o=[...n,...s],u=i.reduce((d,m)=>{const p=o.filter(T=>T.packId===m),y=e.filter(T=>p.some(A=>A.category===T));return p.length>0&&(d[m]={items:p,categories:y}),d},{});for(const[d,m]of Object.entries(u)){const y=(await Zw()).find(T=>T.id===d);y&&await DN(y,m.items,m.categories)}}return{questions:n,dares:s,categories:e}}catch(e){console.error("Error fetching game data from Firebase:",e);const n=ON(i);if(n){console.log("Using cached game data for offline play");const s=n.items.filter(u=>!("type"in u)||u.type==="question"),o=n.items.filter(u=>"type"in u&&u.type==="dare");return{questions:s,dares:o,categories:n.categories}}throw lu()?new Error("No hay conexin a internet y no tienes datos guardados para estos packs."):new Error("No hay conexin a internet y no tienes packs guardados localmente. Deseas activar el almacenamiento local para jugar sin conexin?")}},aD=async i=>{try{const e=In(Yt,"gameItems"),n=Ir(e,sn("packId","==",i),sn("isDemo","==",!0)),o=(await tr(n)).docs.map(p=>({id:p.id,...p.data()})),u=o.filter(p=>p.type==="question").map(p=>({text:p.text,category:p.category,isDemo:!0,packId:p.packId})),d=o.filter(p=>p.type==="dare").map(p=>({text:p.text,category:p.category,isDemo:!0,packId:p.packId})),m=[...new Set(o.map(p=>p.category))];return{questions:u,dares:d,categories:m}}catch(e){return console.error("Error fetching demo data:",e),{questions:[],dares:[],categories:[]}}},oD=async(i,e)=>{try{const n={packId:i,userId:e||"anonymous",timestamp:new Date,type:"demo_play"};await Mw(In(Yt,"demoLogs"),n);const s=In(Yt,"packs"),o=xo(s,i),u=await wu(o);if(u.exists()){const d=u.data().demoPlaysCount||0;await EN(o,{demoPlaysCount:d+1})}console.log("Demo play logged successfully")}catch(n){console.error("Error logging demo play:",n)}},lD=async(i,e)=>{try{if(!i||i.trim().length===0)return{isValid:!1,error:"El cdigo de referido no puede estar vaco"};const n=In(Yt,"users"),s=Ir(n,sn("referralCode","==",i.toUpperCase())),o=await tr(s);if(o.empty)return{isValid:!1,error:"Cdigo de referido no vlido"};const u=o.docs[0],d=u.data(),m=u.id;if(m===e)return{isValid:!1,error:"No puedes usar tu propio cdigo de referido"};const p=await wu(xo(Yt,"users",e));if(p.exists()&&p.data().usedReferralCode)return{isValid:!1,error:"Ya has usado un cdigo de referido anteriormente"};const y=new Date,T=new Date(y.getTime()-3600*1e3),A=In(Yt,"referrals"),S=Ir(A,sn("referrerUid","==",m),sn("createdAt",">=",T));if((await tr(S)).size>=5)return{isValid:!1,message:"Lmite de referidos por hora excedido. Intenta ms tarde."};const U=new Date(y.getTime()-1440*60*1e3),K=Ir(A,sn("referrerUid","==",m),sn("createdAt",">=",U));return(await tr(K)).size>=20?{isValid:!1,message:"Lmite diario de referidos excedido. Intenta maana."}:{isValid:!0,referrerName:d.displayName||d.email||"Usuario"}}catch(n){return console.error("Error validating referral code:",n),{isValid:!1,error:"Error al validar el cdigo de referido"}}},uD=async i=>{try{const e=await wu(xo(Yt,"users",i));if(!e.exists())return[];const s=e.data().referralCount||0,o=In(Yt,"packs"),u=Ir(o,sn("isReferralUnlockable","==",!0)),d=await tr(u),m=[];return d.forEach(p=>{const T=p.data().requiredReferrals||0;s>=T&&m.push(p.id)}),m}catch(e){return console.error("Error checking referral pack unlocks:",e),[]}},cD=({onBack:i,onSuccess:e})=>{const[n,s]=le.useState("login"),[o,u]=le.useState(""),[d,m]=le.useState(""),[p,y]=le.useState(""),[T,A]=le.useState(""),[S,L]=le.useState(""),[U,K]=le.useState(null),[F,ae]=le.useState(!1),[se,ne]=le.useState(!1),[me,ce]=le.useState(""),[_e,C]=le.useState(""),{refreshUser:R,user:x}=Hg(),D=async()=>{ne(!0),ce("");try{const te=n==="register"&&S&&(U!=null&&U.isValid)?S:void 0;await Uw(te),R(),e()}catch(te){ce(te.message)}finally{ne(!1)}},P=async()=>{ne(!0),ce("");try{await qw(),R(),e()}catch(te){ce(te.message)}finally{ne(!1)}},M=async te=>{te.preventDefault(),ne(!0),ce(""),C("");try{if(n==="login"){const Ie=await jw(o,d);if(R(),!Ie.emailVerified){C("Tu email no est verificado. Revisa tu bandeja de entrada o reenva la verificacin.");return}e()}else if(n==="register"){if(d!==p)throw new Error("Las contraseas no coinciden");const Ie=S&&(U!=null&&U.isValid)?S:void 0;await zw(o,d,T,Ie),C("Cuenta creada exitosamente. Revisa tu email para verificar tu cuenta antes de poder comprar packs premium."),s("login")}else n==="forgot-password"&&(await Bw(o),C("Email de restablecimiento enviado. Revisa tu bandeja de entrada."),s("login"))}catch(Ie){ce(Ie.message)}finally{ne(!1)}},I=async()=>{ne(!0),ce("");try{await Hw(),C("Email de verificacin reenviado.")}catch(te){ce(te.message)}finally{ne(!1)}},ke=()=>{u(""),m(""),y(""),A(""),L(""),K(null),ce(""),C("")},Pe=async te=>{if(!te.trim()){K(null);return}ae(!0);try{const Ie="temp-"+Date.now(),O=await lD(te,Ie);K({isValid:O.isValid,message:O.isValid?`Cdigo vlido de ${O.referrerName}`:O.error||"Cdigo no vlido"})}catch{K({isValid:!1,message:"Error al validar cdigo"})}finally{ae(!1)}},Q=te=>{L(te.toUpperCase()),te.trim().length>=6?Pe(te):K(null)},re=te=>{s(te),ke()};return E.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:E.jsxs(Hn,{className:"w-full max-w-md p-8 space-y-6",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:n==="login"?"Iniciar Sesin":n==="register"?"Crear Cuenta":"Recuperar Contrasea"}),E.jsx("p",{className:"text-white/80",children:n==="login"?"Accede a tu cuenta para comprar packs premium":n==="register"?"Crea una cuenta para acceder a contenido premium":"Ingresa tu email para recuperar tu contrasea"})]}),me&&E.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:me}),_e&&E.jsxs("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:[E.jsx("p",{children:_e}),_e.includes("no est verificado")&&E.jsx(Ge,{onClick:I,disabled:se,className:"mt-2 bg-green-600 hover:bg-green-700 text-sm",children:"Reenviar verificacin"})]}),E.jsxs("form",{onSubmit:M,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Email"}),E.jsx("input",{type:"email",value:o,onChange:te=>u(te.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"tu@email.com",required:!0})]}),n!=="forgot-password"&&E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Contrasea"}),E.jsx("input",{type:"password",value:d,onChange:te=>m(te.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"",required:!0,minLength:6})]}),n==="register"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Confirmar Contrasea"}),E.jsx("input",{type:"password",value:p,onChange:te=>y(te.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"",required:!0,minLength:6})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Nombre (opcional)"}),E.jsx("input",{type:"text",value:T,onChange:te=>A(te.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"Tu nombre"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Cdigo de Referido (opcional)"}),E.jsx("input",{type:"text",value:S,onChange:te=>Q(te.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${U===null?"border-white/20 focus:ring-white/50":U.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ej: ABC123",maxLength:8}),F&&E.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando cdigo..."}),U&&E.jsx("p",{className:`text-sm mt-1 ${U.isValid?"text-green-400":"text-red-400"}`,children:U.message})]})]}),E.jsx(Ge,{type:"submit",disabled:se,className:"w-full",children:se?"Cargando...":n==="login"?"Iniciar Sesin":n==="register"?"Crear Cuenta":"Enviar Email"})]}),n!=="forgot-password"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-white/20"})}),E.jsx("div",{className:"relative flex justify-center text-sm",children:E.jsx("span",{className:"px-2 bg-transparent text-white/60",children:"o"})})]}),E.jsxs(Ge,{onClick:D,disabled:se,className:"w-full bg-white text-gray-900 hover:bg-gray-100",children:[E.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[E.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),E.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),E.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),E.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar con Google"]})]}),E.jsxs("div",{className:"text-center space-y-2",children:[n==="login"&&E.jsxs(E.Fragment,{children:[E.jsx("button",{type:"button",onClick:()=>re("forgot-password"),className:"text-white/80 hover:text-white text-sm underline",children:"Olvidaste tu contrasea?"}),E.jsxs("div",{children:[E.jsx("span",{className:"text-white/60 text-sm",children:"No tienes cuenta? "}),E.jsx("button",{type:"button",onClick:()=>re("register"),className:"text-white hover:text-white/80 text-sm underline",children:"Regstrate"})]})]}),n==="register"&&E.jsxs("div",{children:[E.jsx("span",{className:"text-white/60 text-sm",children:"Ya tienes cuenta? "}),E.jsx("button",{type:"button",onClick:()=>re("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Inicia sesin"})]}),n==="forgot-password"&&E.jsx("button",{type:"button",onClick:()=>re("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Volver al inicio de sesin"})]}),E.jsxs("div",{className:"border-t border-white/20 pt-4",children:[E.jsx(Ge,{onClick:P,disabled:se,className:"w-full bg-white/10 hover:bg-white/20 text-white border border-white/20",children:"Continuar sin cuenta"}),E.jsx("p",{className:"text-white/60 text-xs text-center mt-2",children:"Podrs jugar pero no comprar packs premium"})]}),E.jsx("div",{className:"text-center",children:E.jsx(Ge,{onClick:i,className:"text-white/80 hover:text-white bg-transparent",children:" Volver"})})]})})},hD=()=>{const[i,e]=le.useState(st.Setup),[n,s]=le.useState([]),[o,u]=le.useState([]),[d,m]=le.useState([]),[p,y]=le.useState(0),[T,A]=le.useState({totalRounds:5}),[S,L]=le.useState({currentRound:1,playersCompletedInRound:0}),[U,K]=le.useState({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),[F,ae]=le.useState({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),[se,ne]=le.useState({isLoading:!0,error:null}),[me,ce]=le.useState([]),[_e,C]=le.useState(()=>{try{const fe=window.localStorage.getItem("purchasedPacks");return fe?JSON.parse(fe):[]}catch(fe){return console.error("Error reading from localStorage",fe),[]}}),[R,x]=le.useState(!1),[D,P]=le.useState(null),[M,I]=le.useState(!1),[ke,Pe]=le.useState(null),[Q,re]=le.useState([]),[te,Ie]=le.useState([]),O=le.useCallback(async fe=>{try{const ve=await uD(fe);Ie(ve)}catch(ve){console.error("Error loading referral unlocked packs:",ve),Ie([])}},[]);le.useEffect(()=>{(async()=>{try{const ve=await Zw();ce(ve)}catch(ve){console.error("Error loading available packs:",ve)}})()},[]),le.useEffect(()=>{try{window.localStorage.setItem("purchasedPacks",JSON.stringify(_e))}catch(fe){console.error("Error writing to localStorage",fe)}},[_e,te]);const J=le.useCallback(async()=>{ne({isLoading:!0,error:null});try{const fe=["base",..._e.filter(Xe=>Xe!=="base"),...te.filter(Xe=>Xe!=="base"&&!_e.includes(Xe))],ve=await sD(fe);u(ve.questions),m(ve.dares),ne({isLoading:!1,error:null})}catch(fe){console.error("Error loading game data:",fe),ne({isLoading:!1,error:fe instanceof Error?fe.message:"Error desconocido"})}},[_e]);le.useEffect(()=>{J()},[J]);const oe=()=>{if(n.length<2){alert("Se necesitan al menos 2 jugadores para empezar.");return}e(st.PackSelection)},ee=()=>{e(st.RoundConfiguration)},pe=()=>{e(st.Setup)},Ne=()=>{e(st.Shop)},we=()=>{e(st.Login)},Et=fe=>{e(st.Setup),fe!=null&&fe.uid&&O(fe.uid)},Je=()=>{e(st.Setup)},Cn=fe=>{const ve=me.find(Xe=>Xe.id===fe);ve&&(Pe(ve),I(!0))},ir=()=>{I(!1),Pe(null)},Gn=fe=>{re(ve=>ve.includes(fe)?ve:[...ve,fe])},Pr=async()=>{if(ke)try{const fe=await aD(ke.id);if(fe.questions.length===0&&fe.dares.length===0){alert("Este pack no tiene contenido demo disponible.");return}x(!0),P(ke.id),u(fe.questions),m(fe.dares),await oD(ke.id),e(st.RoundConfiguration)}catch(fe){console.error("Error starting demo:",fe),alert("Error al cargar el demo. Intntalo de nuevo.")}},Vr=fe=>{A(fe),K({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:new Date,gameEndTime:null,roundStats:[]}),ae({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),L({currentRound:1,playersCompletedInRound:0}),e(st.Game)},Mr=()=>{const fe=(p+1)%n.length;if(y(fe),fe===0){const ve=S.currentRound+1;ve>T.totalRounds?on():(L({currentRound:ve,playersCompletedInRound:0}),ae({roundNumber:ve,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}))}else L(ve=>({...ve,playersCompletedInRound:ve.playersCompletedInRound+1}))},gs=()=>{const fe={...F,roundEndTime:new Date};K(ve=>({...ve,totalRounds:ve.totalRounds+1,roundStats:[...ve.roundStats,fe]})),e(st.RoundEnd)},oa=()=>{const fe=S.currentRound+1;L({currentRound:fe,playersCompletedInRound:0}),ae({roundNumber:fe,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),y(0),e(st.Game)},on=()=>{K(fe=>({...fe,gameEndTime:new Date})),e(st.GameEnd)},No=()=>{const fe=n[p];ae(ve=>({...ve,questionsAsked:ve.questionsAsked+1,playersParticipated:ve.playersParticipated.includes(fe)?ve.playersParticipated:[...ve.playersParticipated,fe]})),K(ve=>({...ve,totalQuestions:ve.totalQuestions+1}))},ps=()=>{const fe=n[p];ae(ve=>({...ve,daresCompleted:ve.daresCompleted+1,playersParticipated:ve.playersParticipated.includes(fe)?ve.playersParticipated:[...ve.playersParticipated,fe]})),K(ve=>({...ve,totalDares:ve.totalDares+1}))},kr=le.useCallback(()=>{e(st.Setup),s([]),y(0),A({totalRounds:5}),L({currentRound:1,playersCompletedInRound:0}),K({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),ae({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),x(!1),P(null),I(!1),Pe(null),re([])},[]),Lr=fe=>{_e.includes(fe)||C([..._e,fe])},Do=()=>_e.includes("no-ads"),Ei=()=>{switch(i){case st.Setup:return E.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-900 bg-opacity-50 backdrop-blur-sm",children:E.jsxs("div",{className:"w-full max-w-md mx-auto animate-fade-in",children:[E.jsx("h1",{className:"text-5xl font-extrabold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Verdad o Reto"}),E.jsx("p",{className:"text-center text-gray-400 mb-8",children:"El juego para animar la fiesta"}),E.jsxs("div",{className:"space-y-6",children:[E.jsx(zA,{players:n,setPlayers:s}),se.isLoading&&E.jsx(Hn,{className:"text-center text-gray-400",children:E.jsx("p",{children:"Cargando datos desde Firebase..."})}),se.error&&E.jsxs(Hn,{className:"text-center text-red-400",children:[E.jsxs("p",{children:["Error de conexin: ",se.error]}),E.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Verifica tu configuracin de Firebase"}),E.jsx(Ge,{onClick:J,className:"mt-4",variant:"secondary",children:"Reintentar"})]}),!se.isLoading&&!se.error&&E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsx(Ge,{onClick:oe,className:"w-full text-lg",disabled:n.length<2||o.length===0||d.length===0,children:"Empezar a Jugar"}),E.jsxs(Ge,{onClick:()=>e(st.Shop),variant:"secondary",className:"w-full text-lg flex items-center justify-center gap-2",children:[E.jsx(J0,{className:"w-6 h-6"}),"Tienda de Paquetes"]}),E.jsx(Ge,{onClick:we,variant:"secondary",className:"w-full text-lg",children:"Iniciar Sesin"})]})]})]})});case st.Login:return E.jsx(cD,{onBack:Je,onSuccess:Et});case st.Shop:return E.jsx(eD,{availablePacks:me,purchasedPacks:_e,onPurchase:Lr,onBack:()=>e(st.Setup),onGoToLogin:we});case st.PackSelection:return E.jsxs(E.Fragment,{children:[E.jsx(qA,{availablePacks:me,purchasedPacks:_e,adWatchedPacks:Q,referralUnlockedPacks:te,onContinue:ee,onBack:pe,onGoToShop:Ne,onPlayDemo:Cn}),E.jsx(eS,{pack:ke,isOpen:M,onClose:ir,onStartDemo:Pr,onAdWatched:Gn})]});case st.RoundConfiguration:return E.jsx(nS,{onSelectRounds:fe=>{Vr({totalRounds:fe})},onBack:()=>e(st.PackSelection)});case st.Game:return E.jsx(tS,{players:n,currentPlayerIndex:p,onNextPlayer:Mr,onNewGame:kr,questions:o,dares:d,roundConfig:T,gameProgress:S,onRoundEnd:gs,onQuestionAsked:No,onDareCompleted:ps});case st.RoundEnd:return E.jsx(rS,{roundStats:F,currentRound:S.currentRound,totalRounds:T.totalRounds,onContinue:oa,onEndGame:on,hasNoAds:Do()});case st.GameEnd:return E.jsx(iS,{gameStats:U,players:n,onNewGame:kr,onBackToMenu:()=>e(st.Setup),isDemoMode:R,demoPackId:D});default:return E.jsx("div",{children:"Error: Estado de juego desconocido."})}};return E.jsx(CN,{children:E.jsxs("main",{className:"relative min-h-screen bg-gray-900 overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-purple-900/30 via-transparent to-pink-900/30"}),E.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-96 h-96 bg-purple-600 rounded-full filter blur-3xl opacity-20 animate-blob"}),E.jsx("div",{className:"absolute bottom-[-10%] right-[5%] w-96 h-96 bg-pink-600 rounded-full filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),E.jsx("div",{className:"absolute top-[10%] right-[-15%] w-80 h-80 bg-cyan-600 rounded-full filter blur-3xl opacity-10 animate-blob animation-delay-4000"}),E.jsx("div",{className:"relative z-10",children:Ei()}),E.jsx("style",{children:`
          .animate-blob {
            animation: blob 7s infinite;
          }
          .animation-delay-2000 {
            animation-delay: 2s;
          }
          .animation-delay-4000 {
            animation-delay: 4s;
          }
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
          }
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `})]})})},Jw=document.getElementById("root");if(!Jw)throw new Error("Could not find root element to mount to");const dD=MA.createRoot(Jw);dD.render(E.jsx(xA.StrictMode,{children:E.jsx(hD,{})}));export{_v as A,rE as W};
