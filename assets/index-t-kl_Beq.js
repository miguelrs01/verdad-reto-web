(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function jE(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Tm={exports:{}},Zl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function pA(){if(M0)return Zl;M0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:r,type:i,key:d,ref:o!==void 0?o:null,props:c}}return Zl.Fragment=e,Zl.jsx=t,Zl.jsxs=t,Zl}var V0;function yA(){return V0||(V0=1,Tm.exports=pA()),Tm.exports}var p=yA(),bm={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function _A(){if(j0)return ke;j0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.iterator;function A(P){return P===null||typeof P!="object"?null:(P=b&&P[b]||P["@@iterator"],typeof P=="function"?P:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,F={};function z(P,ne,de){this.props=P,this.context=ne,this.refs=F,this.updater=de||I}z.prototype.isReactComponent={},z.prototype.setState=function(P,ne){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,ne,"setState")},z.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function re(){}re.prototype=z.prototype;function ie(P,ne,de){this.props=P,this.context=ne,this.refs=F,this.updater=de||I}var se=ie.prototype=new re;se.constructor=ie,j(se,z.prototype),se.isPureReactComponent=!0;var fe=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},K=Object.prototype.hasOwnProperty;function N(P,ne,de,oe,ve,Pe){return de=Pe.ref,{$$typeof:r,type:P,key:ne,ref:de!==void 0?de:null,props:Pe}}function x(P,ne){return N(P.type,ne,void 0,void 0,void 0,P.props)}function C(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function O(P){var ne={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(de){return ne[de]})}var k=/\/+/g;function V(P,ne){return typeof P=="object"&&P!==null&&P.key!=null?O(""+P.key):ne.toString(36)}function R(){}function Ce(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(R,R):(P.status="pending",P.then(function(ne){P.status==="pending"&&(P.status="fulfilled",P.value=ne)},function(ne){P.status==="pending"&&(P.status="rejected",P.reason=ne)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Oe(P,ne,de,oe,ve){var Pe=typeof P;(Pe==="undefined"||Pe==="boolean")&&(P=null);var Ae=!1;if(P===null)Ae=!0;else switch(Pe){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(P.$$typeof){case r:case e:Ae=!0;break;case w:return Ae=P._init,Oe(Ae(P._payload),ne,de,oe,ve)}}if(Ae)return ve=ve(P),Ae=oe===""?"."+V(P,0):oe,fe(ve)?(de="",Ae!=null&&(de=Ae.replace(k,"$&/")+"/"),Oe(ve,ne,de,"",function(Jt){return Jt})):ve!=null&&(C(ve)&&(ve=x(ve,de+(ve.key==null||P&&P.key===ve.key?"":(""+ve.key).replace(k,"$&/")+"/")+Ae)),ne.push(ve)),1;Ae=0;var Nt=oe===""?".":oe+":";if(fe(P))for(var We=0;We<P.length;We++)oe=P[We],Pe=Nt+V(oe,We),Ae+=Oe(oe,ne,de,Pe,ve);else if(We=A(P),typeof We=="function")for(P=We.call(P),We=0;!(oe=P.next()).done;)oe=oe.value,Pe=Nt+V(oe,We++),Ae+=Oe(oe,ne,de,Pe,ve);else if(Pe==="object"){if(typeof P.then=="function")return Oe(Ce(P),ne,de,oe,ve);throw ne=String(P),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function Q(P,ne,de){if(P==null)return P;var oe=[],ve=0;return Oe(P,oe,"","",function(Pe){return ne.call(de,Pe,ve++)}),oe}function ae(P){if(P._status===-1){var ne=P._result;ne=ne(),ne.then(function(de){(P._status===0||P._status===-1)&&(P._status=1,P._result=de)},function(de){(P._status===0||P._status===-1)&&(P._status=2,P._result=de)}),P._status===-1&&(P._status=0,P._result=ne)}if(P._status===1)return P._result.default;throw P._result}var $=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function ye(){}return ke.Children={map:Q,forEach:function(P,ne,de){Q(P,function(){ne.apply(this,arguments)},de)},count:function(P){var ne=0;return Q(P,function(){ne++}),ne},toArray:function(P){return Q(P,function(ne){return ne})||[]},only:function(P){if(!C(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},ke.Component=z,ke.Fragment=t,ke.Profiler=o,ke.PureComponent=ie,ke.StrictMode=i,ke.Suspense=g,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,ke.__COMPILER_RUNTIME={__proto__:null,c:function(P){return le.H.useMemoCache(P)}},ke.cache=function(P){return function(){return P.apply(null,arguments)}},ke.cloneElement=function(P,ne,de){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var oe=j({},P.props),ve=P.key,Pe=void 0;if(ne!=null)for(Ae in ne.ref!==void 0&&(Pe=void 0),ne.key!==void 0&&(ve=""+ne.key),ne)!K.call(ne,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&ne.ref===void 0||(oe[Ae]=ne[Ae]);var Ae=arguments.length-2;if(Ae===1)oe.children=de;else if(1<Ae){for(var Nt=Array(Ae),We=0;We<Ae;We++)Nt[We]=arguments[We+2];oe.children=Nt}return N(P.type,ve,void 0,void 0,Pe,oe)},ke.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:c,_context:P},P},ke.createElement=function(P,ne,de){var oe,ve={},Pe=null;if(ne!=null)for(oe in ne.key!==void 0&&(Pe=""+ne.key),ne)K.call(ne,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ve[oe]=ne[oe]);var Ae=arguments.length-2;if(Ae===1)ve.children=de;else if(1<Ae){for(var Nt=Array(Ae),We=0;We<Ae;We++)Nt[We]=arguments[We+2];ve.children=Nt}if(P&&P.defaultProps)for(oe in Ae=P.defaultProps,Ae)ve[oe]===void 0&&(ve[oe]=Ae[oe]);return N(P,Pe,void 0,void 0,null,ve)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(P){return{$$typeof:m,render:P}},ke.isValidElement=C,ke.lazy=function(P){return{$$typeof:w,_payload:{_status:-1,_result:P},_init:ae}},ke.memo=function(P,ne){return{$$typeof:_,type:P,compare:ne===void 0?null:ne}},ke.startTransition=function(P){var ne=le.T,de={};le.T=de;try{var oe=P(),ve=le.S;ve!==null&&ve(de,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(ye,$)}catch(Pe){$(Pe)}finally{le.T=ne}},ke.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},ke.use=function(P){return le.H.use(P)},ke.useActionState=function(P,ne,de){return le.H.useActionState(P,ne,de)},ke.useCallback=function(P,ne){return le.H.useCallback(P,ne)},ke.useContext=function(P){return le.H.useContext(P)},ke.useDebugValue=function(){},ke.useDeferredValue=function(P,ne){return le.H.useDeferredValue(P,ne)},ke.useEffect=function(P,ne,de){var oe=le.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(P,ne)},ke.useId=function(){return le.H.useId()},ke.useImperativeHandle=function(P,ne,de){return le.H.useImperativeHandle(P,ne,de)},ke.useInsertionEffect=function(P,ne){return le.H.useInsertionEffect(P,ne)},ke.useLayoutEffect=function(P,ne){return le.H.useLayoutEffect(P,ne)},ke.useMemo=function(P,ne){return le.H.useMemo(P,ne)},ke.useOptimistic=function(P,ne){return le.H.useOptimistic(P,ne)},ke.useReducer=function(P,ne,de){return le.H.useReducer(P,ne,de)},ke.useRef=function(P){return le.H.useRef(P)},ke.useState=function(P){return le.H.useState(P)},ke.useSyncExternalStore=function(P,ne,de){return le.H.useSyncExternalStore(P,ne,de)},ke.useTransition=function(){return le.H.useTransition()},ke.version="19.1.1",ke}var L0;function pg(){return L0||(L0=1,bm.exports=_A()),bm.exports}var X=pg();const vA=jE(X);var Sm={exports:{}},ec={},Am={exports:{}},xm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0;function EA(){return U0||(U0=1,(function(r){function e(Q,ae){var $=Q.length;Q.push(ae);e:for(;0<$;){var ye=$-1>>>1,P=Q[ye];if(0<o(P,ae))Q[ye]=ae,Q[$]=P,$=ye;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var ae=Q[0],$=Q.pop();if($!==ae){Q[0]=$;e:for(var ye=0,P=Q.length,ne=P>>>1;ye<ne;){var de=2*(ye+1)-1,oe=Q[de],ve=de+1,Pe=Q[ve];if(0>o(oe,$))ve<P&&0>o(Pe,oe)?(Q[ye]=Pe,Q[ve]=$,ye=ve):(Q[ye]=oe,Q[de]=$,ye=de);else if(ve<P&&0>o(Pe,$))Q[ye]=Pe,Q[ve]=$,ye=ve;else break e}}return ae}function o(Q,ae){var $=Q.sortIndex-ae.sortIndex;return $!==0?$:Q.id-ae.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();r.unstable_now=function(){return d.now()-m}}var g=[],_=[],w=1,b=null,A=3,I=!1,j=!1,F=!1,z=!1,re=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function fe(Q){for(var ae=t(_);ae!==null;){if(ae.callback===null)i(_);else if(ae.startTime<=Q)i(_),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=t(_)}}function le(Q){if(F=!1,fe(Q),!j)if(t(g)!==null)j=!0,K||(K=!0,V());else{var ae=t(_);ae!==null&&Oe(le,ae.startTime-Q)}}var K=!1,N=-1,x=5,C=-1;function O(){return z?!0:!(r.unstable_now()-C<x)}function k(){if(z=!1,K){var Q=r.unstable_now();C=Q;var ae=!0;try{e:{j=!1,F&&(F=!1,ie(N),N=-1),I=!0;var $=A;try{t:{for(fe(Q),b=t(g);b!==null&&!(b.expirationTime>Q&&O());){var ye=b.callback;if(typeof ye=="function"){b.callback=null,A=b.priorityLevel;var P=ye(b.expirationTime<=Q);if(Q=r.unstable_now(),typeof P=="function"){b.callback=P,fe(Q),ae=!0;break t}b===t(g)&&i(g),fe(Q)}else i(g);b=t(g)}if(b!==null)ae=!0;else{var ne=t(_);ne!==null&&Oe(le,ne.startTime-Q),ae=!1}}break e}finally{b=null,A=$,I=!1}ae=void 0}}finally{ae?V():K=!1}}}var V;if(typeof se=="function")V=function(){se(k)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Ce=R.port2;R.port1.onmessage=k,V=function(){Ce.postMessage(null)}}else V=function(){re(k,0)};function Oe(Q,ae){N=re(function(){Q(r.unstable_now())},ae)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(Q){switch(A){case 1:case 2:case 3:var ae=3;break;default:ae=A}var $=A;A=ae;try{return Q()}finally{A=$}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function(Q,ae){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var $=A;A=Q;try{return ae()}finally{A=$}},r.unstable_scheduleCallback=function(Q,ae,$){var ye=r.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ye+$:ye):$=ye,Q){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=$+P,Q={id:w++,callback:ae,priorityLevel:Q,startTime:$,expirationTime:P,sortIndex:-1},$>ye?(Q.sortIndex=$,e(_,Q),t(g)===null&&Q===t(_)&&(F?(ie(N),N=-1):F=!0,Oe(le,$-ye))):(Q.sortIndex=P,e(g,Q),j||I||(j=!0,K||(K=!0,V()))),Q},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(Q){var ae=A;return function(){var $=A;A=ae;try{return Q.apply(this,arguments)}finally{A=$}}}})(xm)),xm}var z0;function wA(){return z0||(z0=1,Am.exports=EA()),Am.exports}var Rm={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0;function TA(){if(q0)return cn;q0=1;var r=pg();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)_+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,_,w){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:_,implementation:w}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cn.createPortal=function(g,_){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(g,_,null,w)},cn.flushSync=function(g){var _=d.T,w=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=_,i.p=w,i.d.f()}},cn.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,i.d.C(g,_))},cn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},cn.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var w=_.as,b=m(w,_.crossOrigin),A=typeof _.integrity=="string"?_.integrity:void 0,I=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;w==="style"?i.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:I}):w==="script"&&i.d.X(g,{crossOrigin:b,integrity:A,fetchPriority:I,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},cn.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var w=m(_.as,_.crossOrigin);i.d.M(g,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&i.d.M(g)},cn.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var w=_.as,b=m(w,_.crossOrigin);i.d.L(g,w,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},cn.preloadModule=function(g,_){if(typeof g=="string")if(_){var w=m(_.as,_.crossOrigin);i.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else i.d.m(g)},cn.requestFormReset=function(g){i.d.r(g)},cn.unstable_batchedUpdates=function(g,_){return g(_)},cn.useFormState=function(g,_,w){return d.H.useFormState(g,_,w)},cn.useFormStatus=function(){return d.H.useHostTransitionStatus()},cn.version="19.1.1",cn}var B0;function bA(){if(B0)return Rm.exports;B0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Rm.exports=TA(),Rm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0;function SA(){if(H0)return ec;H0=1;var r=wA(),e=pg(),t=bA();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function d(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(i(188))}function g(n){var s=n.alternate;if(!s){if(s=c(n),s===null)throw Error(i(188));return s!==n?null:n}for(var a=n,l=s;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),n;if(f===l)return m(h),s;f=f.sibling}throw Error(i(188))}if(a.return!==l.return)a=h,l=f;else{for(var E=!1,T=h.child;T;){if(T===a){E=!0,a=h,l=f;break}if(T===l){E=!0,l=h,a=f;break}T=T.sibling}if(!E){for(T=f.child;T;){if(T===a){E=!0,a=f,l=h;break}if(T===l){E=!0,l=f,a=h;break}T=T.sibling}if(!E)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?n:s}function _(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=_(n),s!==null)return s;n=n.sibling}return null}var w=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),ie=Symbol.for("react.consumer"),se=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function V(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function Ce(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case z:return"Profiler";case F:return"StrictMode";case le:return"Suspense";case K:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case I:return"Portal";case se:return(n.displayName||"Context")+".Provider";case ie:return(n._context.displayName||"Context")+".Consumer";case fe:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case N:return s=n.displayName||null,s!==null?s:Ce(n.type)||"Memo";case x:s=n._payload,n=n._init;try{return Ce(n(s))}catch{}}return null}var Oe=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},ye=[],P=-1;function ne(n){return{current:n}}function de(n){0>P||(n.current=ye[P],ye[P]=null,P--)}function oe(n,s){P++,ye[P]=n.current,n.current=s}var ve=ne(null),Pe=ne(null),Ae=ne(null),Nt=ne(null);function We(n,s){switch(oe(Ae,s),oe(Pe,n),oe(ve,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?c0(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=c0(s),n=u0(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}de(ve),oe(ve,n)}function Jt(){de(ve),de(Pe),de(Ae)}function lr(n){n.memoizedState!==null&&oe(Nt,n);var s=ve.current,a=u0(s,n.type);s!==a&&(oe(Pe,n),oe(ve,a))}function cr(n){Pe.current===n&&(de(ve),de(Pe)),Nt.current===n&&(de(Nt),Yl._currentValue=$)}var Er=Object.prototype.hasOwnProperty,Wr=r.unstable_scheduleCallback,wr=r.unstable_cancelCallback,Ia=r.unstable_shouldYield,Wo=r.unstable_requestPaint,pn=r.unstable_now,Ca=r.unstable_getCurrentPriorityLevel,Jr=r.unstable_ImmediatePriority,Ls=r.unstable_UserBlockingPriority,Zr=r.unstable_NormalPriority,Jo=r.unstable_LowPriority,Us=r.unstable_IdlePriority,zs=r.log,Na=r.unstable_setDisableYieldValue,ft=null,Je=null;function yn(n){if(typeof zs=="function"&&Na(n),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(ft,n)}catch{}}var Ht=Math.clz32?Math.clz32:es,Da=Math.log,Zo=Math.LN2;function es(n){return n>>>=0,n===0?32:31-(Da(n)/Zo|0)|0}var ts=256,ns=4194304;function On(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function qs(n,s,a){var l=n.pendingLanes;if(l===0)return 0;var h=0,f=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?h=On(l):(E&=T,E!==0?h=On(E):a||(a=T&~n,a!==0&&(h=On(a))))):(T=l&~f,T!==0?h=On(T):E!==0?h=On(E):a||(a=l&~n,a!==0&&(h=On(a)))),h===0?0:s!==0&&s!==h&&(s&f)===0&&(f=h&-h,a=s&-s,f>=a||f===32&&(a&4194048)!==0)?s:h}function Tr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Li(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ui(){var n=ts;return ts<<=1,(ts&4194048)===0&&(ts=256),n}function Bs(){var n=ns;return ns<<=1,(ns&62914560)===0&&(ns=4194304),n}function ur(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function kn(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function zi(n,s,a,l,h,f){var E=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var T=n.entanglements,D=n.expirationTimes,B=n.hiddenUpdates;for(a=E&~a;0<a;){var J=31-Ht(a),ee=1<<J;T[J]=0,D[J]=-1;var H=B[J];if(H!==null)for(B[J]=null,J=0;J<H.length;J++){var G=H[J];G!==null&&(G.lane&=-536870913)}a&=~ee}l!==0&&Kn(n,l,0),f!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=f&~(E&~s))}function Kn(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-Ht(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function qi(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var l=31-Ht(a),h=1<<l;h&s|n[l]&s&&(n[l]|=s),a&=~h}}function br(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Hs(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Sr(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:C0(n.type))}function Pa(n,s){var a=ae.p;try{return ae.p=n,s()}finally{ae.p=a}}var dt=Math.random().toString(36).slice(2),At="__reactFiber$"+dt,wt="__reactProps$"+dt,bn="__reactContainer$"+dt,ue="__reactEvents$"+dt,me="__reactListeners$"+dt,ct="__reactHandles$"+dt,Fs="__reactResources$"+dt,Sn="__reactMarker$"+dt;function An(n){delete n[At],delete n[wt],delete n[ue],delete n[me],delete n[ct]}function rs(n){var s=n[At];if(s)return s;for(var a=n.parentNode;a;){if(s=a[bn]||a[At]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=m0(n);n!==null;){if(a=n[At])return a;n=m0(n)}return s}n=a,a=n.parentNode}return null}function Ar(n){if(n=n[At]||n[bn]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function xr(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function _n(n){var s=n[Fs];return s||(s=n[Fs]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function xt(n){n[Sn]=!0}var el=new Set,Oa={};function dr(n,s){ss(n,s),ss(n+"Capture",s)}function ss(n,s){for(Oa[n]=s,n=0;n<s.length;n++)el.add(s[n])}var Yc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xc={},Bi={};function $c(n){return Er.call(Bi,n)?!0:Er.call(Xc,n)?!1:Yc.test(n)?Bi[n]=!0:(Xc[n]=!0,!1)}function Gs(n,s,a){if($c(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function Rr(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function Zt(n,s,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+l)}}var Hi,Wc;function is(n){if(Hi===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Hi=s&&s[1]||"",Wc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hi+n+Wc}var ka=!1;function Ma(n,s){if(!n||ka)return"";ka=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(G){var H=G}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(G){H=G}n.call(ee.prototype)}}else{try{throw Error()}catch(G){H=G}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(G){if(G&&H&&typeof G.stack=="string")return[G.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),E=f[0],T=f[1];if(E&&T){var D=E.split(`
`),B=T.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===B.length)for(l=D.length-1,h=B.length-1;1<=l&&0<=h&&D[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==B[h]){var J=`
`+D[l].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=l&&0<=h);break}}}finally{ka=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?is(a):""}function tl(n){switch(n.tag){case 26:case 27:case 5:return is(n.type);case 16:return is("Lazy");case 13:return is("Suspense");case 19:return is("SuspenseList");case 0:case 15:return Ma(n.type,!1);case 11:return Ma(n.type.render,!1);case 1:return Ma(n.type,!0);case 31:return is("Activity");default:return""}}function Va(n){try{var s="";do s+=tl(n),n=n.return;while(n);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function vn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function nl(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ah(n){var s=nl(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),l=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,f.call(this,E)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ja(n){n._valueTracker||(n._valueTracker=Ah(n))}function rl(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return n&&(l=nl(n)?n.checked?"true":"false":n.value),n=l,n!==a?(s.setValue(n),!0):!1}function Fi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var xh=/[\n"\\]/g;function Dt(n){return n.replace(xh,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Mn(n,s,a,l,h,f,E,T){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+vn(s)):n.value!==""+vn(s)&&(n.value=""+vn(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?Qs(n,E,vn(s)):a!=null?Qs(n,E,vn(a)):l!=null&&n.removeAttribute("value"),h==null&&f!=null&&(n.defaultChecked=!!f),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+vn(T):n.removeAttribute("name")}function Gi(n,s,a,l,h,f,E,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(n.type=f),s!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||s!=null))return;a=a!=null?""+vn(a):"",s=s!=null?""+vn(s):a,T||s===n.value||(n.value=s),n.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=T?n.checked:!!l,n.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Qs(n,s,a){s==="number"&&Fi(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function as(n,s,a,l){if(n=n.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=s.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&l&&(n[a].defaultSelected=!0)}else{for(a=""+vn(a),s=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,l&&(n[h].defaultSelected=!0);return}s!==null||n[h].disabled||(s=n[h])}s!==null&&(s.selected=!0)}}function st(n,s,a){if(s!=null&&(s=""+vn(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+vn(a):""}function Qi(n,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(i(92));if(Oe(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=vn(s),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Yn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Ki=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jc(n,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,a):typeof a!="number"||a===0||Ki.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function sl(n,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&Jc(n,h,l)}else for(var f in s)s.hasOwnProperty(f)&&Jc(n,f,s[f])}function il(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ih=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function La(n){return Ih.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var os=null;function Xn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ls=null,cs=null;function al(n){var s=Ar(n);if(s&&(n=s.stateNode)){var a=n[wt]||null;e:switch(n=s.stateNode,s.type){case"input":if(Mn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Dt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==n&&l.form===n.form){var h=l[wt]||null;if(!h)throw Error(i(90));Mn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===n.form&&rl(l)}break e;case"textarea":st(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&as(n,!!a.multiple,s,!1)}}}var Ir=!1;function Zc(n,s,a){if(Ir)return n(s,a);Ir=!0;try{var l=n(s);return l}finally{if(Ir=!1,(ls!==null||cs!==null)&&(Qu(),ls&&(s=ls,n=cs,cs=ls=null,al(s),n)))for(s=0;s<n.length;s++)al(n[s])}}function Yi(n,s){var a=n.stateNode;if(a===null)return null;var l=a[wt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$n=!1;if(hr)try{var Xi={};Object.defineProperty(Xi,"passive",{get:function(){$n=!0}}),window.addEventListener("test",Xi,Xi),window.removeEventListener("test",Xi,Xi)}catch{$n=!1}var Cr=null,Ks=null,us=null;function ol(){if(us)return us;var n,s=Ks,a=s.length,l,h="value"in Cr?Cr.value:Cr.textContent,f=h.length;for(n=0;n<a&&s[n]===h[n];n++);var E=a-n;for(l=1;l<=E&&s[a-l]===h[f-l];l++);return us=h.slice(n,1<l?1-l:void 0)}function Nr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Dr(){return!0}function ll(){return!1}function Ft(n){function s(a,l,h,f,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Dr:ll,this.isPropagationStopped=ll,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Dr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Dr)},persist:function(){},isPersistent:Dr}),s}var et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=Ft(et),$i=w({},et,{view:0,detail:0}),eu=Ft($i),za,qa,Pr,Wi=w({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ea,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Pr&&(Pr&&n.type==="mousemove"?(za=n.screenX-Pr.screenX,qa=n.screenY-Pr.screenY):qa=za=0,Pr=n),za)},movementY:function(n){return"movementY"in n?n.movementY:qa}}),Wn=Ft(Wi),tu=w({},Wi,{dataTransfer:0}),Ch=Ft(tu),Ji=w({},$i,{relatedTarget:0}),Ba=Ft(Ji),cl=w({},et,{animationName:0,elapsedTime:0,pseudoElement:0}),Ha=Ft(cl),nu=w({},et,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Fa=Ft(nu),Nh=w({},et,{data:0}),ul=Ft(Nh),Zi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=su[n])?!!s[n]:!1}function ea(){return dl}var iu=w({},$i,{key:function(n){if(n.key){var s=Zi[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Nr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ru[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ea,charCode:function(n){return n.type==="keypress"?Nr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Nr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ga=Ft(iu),au=w({},Wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hl=Ft(au),ds=w({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ea}),ou=Ft(ds),lu=w({},et,{propertyName:0,elapsedTime:0,pseudoElement:0}),cu=Ft(lu),uu=w({},Wi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Qa=Ft(uu),En=w({},et,{newState:0,oldState:0}),du=Ft(En),hu=[9,13,27,32],Or=hr&&"CompositionEvent"in window,u=null;hr&&"documentMode"in document&&(u=document.documentMode);var y=hr&&"TextEvent"in window&&!u,v=hr&&(!Or||u&&8<u&&11>=u),S=" ",U=!1;function Y(n,s){switch(n){case"keyup":return hu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var He=!1;function Lt(n,s){switch(n){case"compositionend":return ce(s);case"keypress":return s.which!==32?null:(U=!0,S);case"textInput":return n=s.data,n===S&&U?null:n;default:return null}}function Fe(n,s){if(He)return n==="compositionend"||!Or&&Y(n,s)?(n=ol(),us=Ks=Cr=null,He=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v&&s.locale!=="ko"?null:s.data;default:return null}}var Gt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ut(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Gt[n.type]:s==="textarea"}function hs(n,s,a,l){ls?cs?cs.push(l):cs=[l]:ls=l,s=Ju(s,"onChange"),0<s.length&&(a=new Ua("onChange","change",null,a,l),n.push({event:a,listeners:s}))}var en=null,kr=null;function fl(n){s0(n,0)}function fu(n){var s=xr(n);if(rl(s))return n}function Ap(n,s){if(n==="change")return s}var xp=!1;if(hr){var Dh;if(hr){var Ph="oninput"in document;if(!Ph){var Rp=document.createElement("div");Rp.setAttribute("oninput","return;"),Ph=typeof Rp.oninput=="function"}Dh=Ph}else Dh=!1;xp=Dh&&(!document.documentMode||9<document.documentMode)}function Ip(){en&&(en.detachEvent("onpropertychange",Cp),kr=en=null)}function Cp(n){if(n.propertyName==="value"&&fu(kr)){var s=[];hs(s,kr,n,Xn(n)),Zc(fl,s)}}function Qb(n,s,a){n==="focusin"?(Ip(),en=s,kr=a,en.attachEvent("onpropertychange",Cp)):n==="focusout"&&Ip()}function Kb(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return fu(kr)}function Yb(n,s){if(n==="click")return fu(s)}function Xb(n,s){if(n==="input"||n==="change")return fu(s)}function $b(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Vn=typeof Object.is=="function"?Object.is:$b;function ml(n,s){if(Vn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Er.call(s,h)||!Vn(n[h],s[h]))return!1}return!0}function Np(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Dp(n,s){var a=Np(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=s&&l>=s)return{node:a,offset:s-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Np(a)}}function Pp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Pp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Op(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Fi(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Fi(n.document)}return s}function Oh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var Wb=hr&&"documentMode"in document&&11>=document.documentMode,Ka=null,kh=null,gl=null,Mh=!1;function kp(n,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Mh||Ka==null||Ka!==Fi(l)||(l=Ka,"selectionStart"in l&&Oh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),gl&&ml(gl,l)||(gl=l,l=Ju(kh,"onSelect"),0<l.length&&(s=new Ua("onSelect","select",null,s,a),n.push({event:s,listeners:l}),s.target=Ka)))}function ta(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Ya={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionrun:ta("Transition","TransitionRun"),transitionstart:ta("Transition","TransitionStart"),transitioncancel:ta("Transition","TransitionCancel"),transitionend:ta("Transition","TransitionEnd")},Vh={},Mp={};hr&&(Mp=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function na(n){if(Vh[n])return Vh[n];if(!Ya[n])return n;var s=Ya[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Mp)return Vh[n]=s[a];return n}var Vp=na("animationend"),jp=na("animationiteration"),Lp=na("animationstart"),Jb=na("transitionrun"),Zb=na("transitionstart"),eS=na("transitioncancel"),Up=na("transitionend"),zp=new Map,jh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jh.push("scrollEnd");function fr(n,s){zp.set(n,s),dr(s,[n])}var qp=new WeakMap;function Jn(n,s){if(typeof n=="object"&&n!==null){var a=qp.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Va(s)},qp.set(n,s),s)}return{value:n,source:s,stack:Va(s)}}var Zn=[],Xa=0,Lh=0;function mu(){for(var n=Xa,s=Lh=Xa=0;s<n;){var a=Zn[s];Zn[s++]=null;var l=Zn[s];Zn[s++]=null;var h=Zn[s];Zn[s++]=null;var f=Zn[s];if(Zn[s++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}f!==0&&Bp(a,h,f)}}function gu(n,s,a,l){Zn[Xa++]=n,Zn[Xa++]=s,Zn[Xa++]=a,Zn[Xa++]=l,Lh|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Uh(n,s,a,l){return gu(n,s,a,l),pu(n)}function $a(n,s){return gu(n,null,null,s),pu(n)}function Bp(n,s,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=n.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(n=f.stateNode,n===null||n._visibility&1||(h=!0)),n=f,f=f.return;return n.tag===3?(f=n.stateNode,h&&s!==null&&(h=31-Ht(a),n=f.hiddenUpdates,l=n[h],l===null?n[h]=[s]:l.push(s),s.lane=a|536870912),f):null}function pu(n){if(50<zl)throw zl=0,Qf=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Wa={};function tS(n,s,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(n,s,a,l){return new tS(n,s,a,l)}function zh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function fs(n,s){var a=n.alternate;return a===null?(a=jn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Hp(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function yu(n,s,a,l,h,f){var E=0;if(l=n,typeof n=="function")zh(n)&&(E=1);else if(typeof n=="string")E=rA(n,a,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=jn(31,a,s,h),n.elementType=C,n.lanes=f,n;case j:return ra(a.children,h,f,s);case F:E=8,h|=24;break;case z:return n=jn(12,a,s,h|2),n.elementType=z,n.lanes=f,n;case le:return n=jn(13,a,s,h),n.elementType=le,n.lanes=f,n;case K:return n=jn(19,a,s,h),n.elementType=K,n.lanes=f,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case re:case se:E=10;break e;case ie:E=9;break e;case fe:E=11;break e;case N:E=14;break e;case x:E=16,l=null;break e}E=29,a=Error(i(130,n===null?"null":typeof n,"")),l=null}return s=jn(E,a,s,h),s.elementType=n,s.type=l,s.lanes=f,s}function ra(n,s,a,l){return n=jn(7,n,l,s),n.lanes=a,n}function qh(n,s,a){return n=jn(6,n,null,s),n.lanes=a,n}function Bh(n,s,a){return s=jn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Ja=[],Za=0,_u=null,vu=0,er=[],tr=0,sa=null,ms=1,gs="";function ia(n,s){Ja[Za++]=vu,Ja[Za++]=_u,_u=n,vu=s}function Fp(n,s,a){er[tr++]=ms,er[tr++]=gs,er[tr++]=sa,sa=n;var l=ms;n=gs;var h=32-Ht(l)-1;l&=~(1<<h),a+=1;var f=32-Ht(s)+h;if(30<f){var E=h-h%5;f=(l&(1<<E)-1).toString(32),l>>=E,h-=E,ms=1<<32-Ht(s)+h|a<<h|l,gs=f+n}else ms=1<<f|a<<h|l,gs=n}function Hh(n){n.return!==null&&(ia(n,1),Fp(n,1,0))}function Fh(n){for(;n===_u;)_u=Ja[--Za],Ja[Za]=null,vu=Ja[--Za],Ja[Za]=null;for(;n===sa;)sa=er[--tr],er[tr]=null,gs=er[--tr],er[tr]=null,ms=er[--tr],er[tr]=null}var wn=null,Tt=null,Ze=!1,aa=null,Mr=!1,Gh=Error(i(519));function oa(n){var s=Error(i(418,""));throw _l(Jn(s,n)),Gh}function Gp(n){var s=n.stateNode,a=n.type,l=n.memoizedProps;switch(s[At]=n,s[wt]=l,a){case"dialog":Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":case"embed":Ue("load",s);break;case"video":case"audio":for(a=0;a<Bl.length;a++)Ue(Bl[a],s);break;case"source":Ue("error",s);break;case"img":case"image":case"link":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"input":Ue("invalid",s),Gi(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ja(s);break;case"select":Ue("invalid",s);break;case"textarea":Ue("invalid",s),Qi(s,l.value,l.defaultValue,l.children),ja(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||l0(s.textContent,a)?(l.popover!=null&&(Ue("beforetoggle",s),Ue("toggle",s)),l.onScroll!=null&&Ue("scroll",s),l.onScrollEnd!=null&&Ue("scrollend",s),l.onClick!=null&&(s.onclick=Zu),s=!0):s=!1,s||oa(n)}function Qp(n){for(wn=n.return;wn;)switch(wn.tag){case 5:case 13:Mr=!1;return;case 27:case 3:Mr=!0;return;default:wn=wn.return}}function pl(n){if(n!==wn)return!1;if(!Ze)return Qp(n),Ze=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||lm(n.type,n.memoizedProps)),a=!a),a&&Tt&&oa(n),Qp(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(s===0){Tt=gr(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;n=n.nextSibling}Tt=null}}else s===27?(s=Tt,ci(n.type)?(n=hm,hm=null,Tt=n):Tt=s):Tt=wn?gr(n.stateNode.nextSibling):null;return!0}function yl(){Tt=wn=null,Ze=!1}function Kp(){var n=aa;return n!==null&&(In===null?In=n:In.push.apply(In,n),aa=null),n}function _l(n){aa===null?aa=[n]:aa.push(n)}var Qh=ne(null),la=null,ps=null;function Ys(n,s,a){oe(Qh,s._currentValue),s._currentValue=a}function ys(n){n._currentValue=Qh.current,de(Qh)}function Kh(n,s,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===a)break;n=n.return}}function Yh(n,s,a,l){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var f=h.dependencies;if(f!==null){var E=h.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=h;for(var D=0;D<s.length;D++)if(T.context===s[D]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),Kh(f.return,a,n),l||(E=null);break e}f=T.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(i(341));E.lanes|=a,f=E.alternate,f!==null&&(f.lanes|=a),Kh(E,a,n),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===n){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function vl(n,s,a,l){n=null;for(var h=s,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var T=h.type;Vn(h.pendingProps.value,E.value)||(n!==null?n.push(T):n=[T])}}else if(h===Nt.current){if(E=h.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(Yl):n=[Yl])}h=h.return}n!==null&&Yh(s,n,a,l),s.flags|=262144}function Eu(n){for(n=n.firstContext;n!==null;){if(!Vn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ca(n){la=n,ps=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ln(n){return Yp(la,n)}function wu(n,s){return la===null&&ca(n),Yp(n,s)}function Yp(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},ps===null){if(n===null)throw Error(i(308));ps=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else ps=ps.next=s;return a}var nS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},rS=r.unstable_scheduleCallback,sS=r.unstable_NormalPriority,zt={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xh(){return{controller:new nS,data:new Map,refCount:0}}function El(n){n.refCount--,n.refCount===0&&rS(sS,function(){n.controller.abort()})}var wl=null,$h=0,eo=0,to=null;function iS(n,s){if(wl===null){var a=wl=[];$h=0,eo=Zf(),to={status:"pending",value:void 0,then:function(l){a.push(l)}}}return $h++,s.then(Xp,Xp),s}function Xp(){if(--$h===0&&wl!==null){to!==null&&(to.status="fulfilled");var n=wl;wl=null,eo=0,to=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function aS(n,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var $p=Q.S;Q.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&iS(n,s),$p!==null&&$p(n,s)};var ua=ne(null);function Wh(){var n=ua.current;return n!==null?n:ht.pooledCache}function Tu(n,s){s===null?oe(ua,ua.current):oe(ua,s.pool)}function Wp(){var n=Wh();return n===null?null:{parent:zt._currentValue,pool:n}}var Tl=Error(i(460)),Jp=Error(i(474)),bu=Error(i(542)),Jh={then:function(){}};function Zp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Su(){}function ey(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(Su,Su),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ny(n),n;default:if(typeof s.status=="string")s.then(Su,Su);else{if(n=ht,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ny(n),n}throw bl=s,Tl}}var bl=null;function ty(){if(bl===null)throw Error(i(459));var n=bl;return bl=null,n}function ny(n){if(n===Tl||n===bu)throw Error(i(483))}var Xs=!1;function Zh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ef(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function $s(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ws(n,s,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(nt&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=pu(n),Bp(n,null,a),s}return gu(n,l,s,a),pu(n)}function Sl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,qi(n,a)}}function tf(n,s){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=E:f=f.next=E,a=a.next}while(a!==null);f===null?h=f=s:f=f.next=s}else h=f=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var nf=!1;function Al(){if(nf){var n=to;if(n!==null)throw n}}function xl(n,s,a,l){nf=!1;var h=n.updateQueue;Xs=!1;var f=h.firstBaseUpdate,E=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var D=T,B=D.next;D.next=null,E===null?f=B:E.next=B,E=D;var J=n.alternate;J!==null&&(J=J.updateQueue,T=J.lastBaseUpdate,T!==E&&(T===null?J.firstBaseUpdate=B:T.next=B,J.lastBaseUpdate=D))}if(f!==null){var ee=h.baseState;E=0,J=B=D=null,T=f;do{var H=T.lane&-536870913,G=H!==T.lane;if(G?(Ge&H)===H:(l&H)===H){H!==0&&H===eo&&(nf=!0),J!==null&&(J=J.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ie=n,Te=T;H=s;var ot=a;switch(Te.tag){case 1:if(Ie=Te.payload,typeof Ie=="function"){ee=Ie.call(ot,ee,H);break e}ee=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Te.payload,H=typeof Ie=="function"?Ie.call(ot,ee,H):Ie,H==null)break e;ee=w({},ee,H);break e;case 2:Xs=!0}}H=T.callback,H!==null&&(n.flags|=64,G&&(n.flags|=8192),G=h.callbacks,G===null?h.callbacks=[H]:G.push(H))}else G={lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},J===null?(B=J=G,D=ee):J=J.next=G,E|=H;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;G=T,T=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);J===null&&(D=ee),h.baseState=D,h.firstBaseUpdate=B,h.lastBaseUpdate=J,f===null&&(h.shared.lanes=0),ii|=E,n.lanes=E,n.memoizedState=ee}}function ry(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function sy(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)ry(a[n],s)}var no=ne(null),Au=ne(0);function iy(n,s){n=Ss,oe(Au,n),oe(no,s),Ss=n|s.baseLanes}function rf(){oe(Au,Ss),oe(no,no.current)}function sf(){Ss=Au.current,de(no),de(Au)}var Js=0,Me=null,it=null,Pt=null,xu=!1,ro=!1,da=!1,Ru=0,Rl=0,so=null,oS=0;function Rt(){throw Error(i(321))}function af(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Vn(n[a],s[a]))return!1;return!0}function of(n,s,a,l,h,f){return Js=f,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=n===null||n.memoizedState===null?By:Hy,da=!1,f=a(l,h),da=!1,ro&&(f=oy(s,a,l,h)),ay(n),f}function ay(n){Q.H=Ou;var s=it!==null&&it.next!==null;if(Js=0,Pt=it=Me=null,xu=!1,Rl=0,so=null,s)throw Error(i(300));n===null||Qt||(n=n.dependencies,n!==null&&Eu(n)&&(Qt=!0))}function oy(n,s,a,l){Me=n;var h=0;do{if(ro&&(so=null),Rl=0,ro=!1,25<=h)throw Error(i(301));if(h+=1,Pt=it=null,n.updateQueue!=null){var f=n.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=mS,f=s(a,l)}while(ro);return f}function lS(){var n=Q.H,s=n.useState()[0];return s=typeof s.then=="function"?Il(s):s,n=n.useState()[0],(it!==null?it.memoizedState:null)!==n&&(Me.flags|=1024),s}function lf(){var n=Ru!==0;return Ru=0,n}function cf(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function uf(n){if(xu){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}xu=!1}Js=0,Pt=it=Me=null,ro=!1,Rl=Ru=0,so=null}function xn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Me.memoizedState=Pt=n:Pt=Pt.next=n,Pt}function Ot(){if(it===null){var n=Me.alternate;n=n!==null?n.memoizedState:null}else n=it.next;var s=Pt===null?Me.memoizedState:Pt.next;if(s!==null)Pt=s,it=n;else{if(n===null)throw Me.alternate===null?Error(i(467)):Error(i(310));it=n,n={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Pt===null?Me.memoizedState=Pt=n:Pt=Pt.next=n}return Pt}function df(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(n){var s=Rl;return Rl+=1,so===null&&(so=[]),n=ey(so,n,s),s=Me,(Pt===null?s.memoizedState:Pt.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?By:Hy),n}function Iu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Il(n);if(n.$$typeof===se)return ln(n)}throw Error(i(438,String(n)))}function hf(n){var s=null,a=Me.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Me.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=df(),Me.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),l=0;l<n;l++)a[l]=O;return s.index++,a}function _s(n,s){return typeof s=="function"?s(n):s}function Cu(n){var s=Ot();return ff(s,it,n)}function ff(n,s,a){var l=n.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var h=n.baseQueue,f=l.pending;if(f!==null){if(h!==null){var E=h.next;h.next=f.next,f.next=E}s.baseQueue=h=f,l.pending=null}if(f=n.baseState,h===null)n.memoizedState=f;else{s=h.next;var T=E=null,D=null,B=s,J=!1;do{var ee=B.lane&-536870913;if(ee!==B.lane?(Ge&ee)===ee:(Js&ee)===ee){var H=B.revertLane;if(H===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),ee===eo&&(J=!0);else if((Js&H)===H){B=B.next,H===eo&&(J=!0);continue}else ee={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},D===null?(T=D=ee,E=f):D=D.next=ee,Me.lanes|=H,ii|=H;ee=B.action,da&&a(f,ee),f=B.hasEagerState?B.eagerState:a(f,ee)}else H={lane:ee,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},D===null?(T=D=H,E=f):D=D.next=H,Me.lanes|=ee,ii|=ee;B=B.next}while(B!==null&&B!==s);if(D===null?E=f:D.next=T,!Vn(f,n.memoizedState)&&(Qt=!0,J&&(a=to,a!==null)))throw a;n.memoizedState=f,n.baseState=E,n.baseQueue=D,l.lastRenderedState=f}return h===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function mf(n){var s=Ot(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=n;var l=a.dispatch,h=a.pending,f=s.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do f=n(f,E.action),E=E.next;while(E!==h);Vn(f,s.memoizedState)||(Qt=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),a.lastRenderedState=f}return[f,l]}function ly(n,s,a){var l=Me,h=Ot(),f=Ze;if(f){if(a===void 0)throw Error(i(407));a=a()}else a=s();var E=!Vn((it||h).memoizedState,a);E&&(h.memoizedState=a,Qt=!0),h=h.queue;var T=dy.bind(null,l,h,n);if(Cl(2048,8,T,[n]),h.getSnapshot!==s||E||Pt!==null&&Pt.memoizedState.tag&1){if(l.flags|=2048,io(9,Nu(),uy.bind(null,l,h,a,s),null),ht===null)throw Error(i(349));f||(Js&124)!==0||cy(l,s,a)}return a}function cy(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Me.updateQueue,s===null?(s=df(),Me.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function uy(n,s,a,l){s.value=a,s.getSnapshot=l,hy(s)&&fy(n)}function dy(n,s,a){return a(function(){hy(s)&&fy(n)})}function hy(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Vn(n,a)}catch{return!0}}function fy(n){var s=$a(n,2);s!==null&&Bn(s,n,2)}function gf(n){var s=xn();if(typeof n=="function"){var a=n;if(n=a(),da){yn(!0);try{a()}finally{yn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:n},s}function my(n,s,a,l){return n.baseState=a,ff(n,it,typeof l=="function"?l:_s)}function cS(n,s,a,l,h){if(Pu(n))throw Error(i(485));if(n=s.action,n!==null){var f={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};Q.T!==null?a(!0):f.isTransition=!1,l(f),a=s.pending,a===null?(f.next=s.pending=f,gy(s,f)):(f.next=a.next,s.pending=a.next=f)}}function gy(n,s){var a=s.action,l=s.payload,h=n.state;if(s.isTransition){var f=Q.T,E={};Q.T=E;try{var T=a(h,l),D=Q.S;D!==null&&D(E,T),py(n,s,T)}catch(B){pf(n,s,B)}finally{Q.T=f}}else try{f=a(h,l),py(n,s,f)}catch(B){pf(n,s,B)}}function py(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){yy(n,s,l)},function(l){return pf(n,s,l)}):yy(n,s,a)}function yy(n,s,a){s.status="fulfilled",s.value=a,_y(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,gy(n,a)))}function pf(n,s,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,_y(s),s=s.next;while(s!==l)}n.action=null}function _y(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function vy(n,s){return s}function Ey(n,s){if(Ze){var a=ht.formState;if(a!==null){e:{var l=Me;if(Ze){if(Tt){t:{for(var h=Tt,f=Mr;h.nodeType!==8;){if(!f){h=null;break t}if(h=gr(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){Tt=gr(h.nextSibling),l=h.data==="F!";break e}}oa(l)}l=!1}l&&(s=a[0])}}return a=xn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:s},a.queue=l,a=Uy.bind(null,Me,l),l.dispatch=a,l=gf(!1),f=wf.bind(null,Me,!1,l.queue),l=xn(),h={state:s,dispatch:null,action:n,pending:null},l.queue=h,a=cS.bind(null,Me,h,f,a),h.dispatch=a,l.memoizedState=n,[s,a,!1]}function wy(n){var s=Ot();return Ty(s,it,n)}function Ty(n,s,a){if(s=ff(n,s,vy)[0],n=Cu(_s)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Il(s)}catch(E){throw E===Tl?bu:E}else l=s;s=Ot();var h=s.queue,f=h.dispatch;return a!==s.memoizedState&&(Me.flags|=2048,io(9,Nu(),uS.bind(null,h,a),null)),[l,f,n]}function uS(n,s){n.action=s}function by(n){var s=Ot(),a=it;if(a!==null)return Ty(s,a,n);Ot(),s=s.memoizedState,a=Ot();var l=a.queue.dispatch;return a.memoizedState=n,[s,l,!1]}function io(n,s,a,l){return n={tag:n,create:a,deps:l,inst:s,next:null},s=Me.updateQueue,s===null&&(s=df(),Me.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,s.lastEffect=n),n}function Nu(){return{destroy:void 0,resource:void 0}}function Sy(){return Ot().memoizedState}function Du(n,s,a,l){var h=xn();l=l===void 0?null:l,Me.flags|=n,h.memoizedState=io(1|s,Nu(),a,l)}function Cl(n,s,a,l){var h=Ot();l=l===void 0?null:l;var f=h.memoizedState.inst;it!==null&&l!==null&&af(l,it.memoizedState.deps)?h.memoizedState=io(s,f,a,l):(Me.flags|=n,h.memoizedState=io(1|s,f,a,l))}function Ay(n,s){Du(8390656,8,n,s)}function xy(n,s){Cl(2048,8,n,s)}function Ry(n,s){return Cl(4,2,n,s)}function Iy(n,s){return Cl(4,4,n,s)}function Cy(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Ny(n,s,a){a=a!=null?a.concat([n]):null,Cl(4,4,Cy.bind(null,s,n),a)}function yf(){}function Dy(n,s){var a=Ot();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&af(s,l[1])?l[0]:(a.memoizedState=[n,s],n)}function Py(n,s){var a=Ot();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&af(s,l[1]))return l[0];if(l=n(),da){yn(!0);try{n()}finally{yn(!1)}}return a.memoizedState=[l,s],l}function _f(n,s,a){return a===void 0||(Js&1073741824)!==0?n.memoizedState=s:(n.memoizedState=a,n=M_(),Me.lanes|=n,ii|=n,a)}function Oy(n,s,a,l){return Vn(a,s)?a:no.current!==null?(n=_f(n,a,l),Vn(n,s)||(Qt=!0),n):(Js&42)===0?(Qt=!0,n.memoizedState=a):(n=M_(),Me.lanes|=n,ii|=n,s)}function ky(n,s,a,l,h){var f=ae.p;ae.p=f!==0&&8>f?f:8;var E=Q.T,T={};Q.T=T,wf(n,!1,s,a);try{var D=h(),B=Q.S;if(B!==null&&B(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var J=aS(D,l);Nl(n,s,J,qn(n))}else Nl(n,s,l,qn(n))}catch(ee){Nl(n,s,{then:function(){},status:"rejected",reason:ee},qn())}finally{ae.p=f,Q.T=E}}function dS(){}function vf(n,s,a,l){if(n.tag!==5)throw Error(i(476));var h=My(n).queue;ky(n,h,s,$,a===null?dS:function(){return Vy(n),a(l)})}function My(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:$},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Vy(n){var s=My(n).next.queue;Nl(n,s,{},qn())}function Ef(){return ln(Yl)}function jy(){return Ot().memoizedState}function Ly(){return Ot().memoizedState}function hS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=qn();n=$s(a);var l=Ws(s,n,a);l!==null&&(Bn(l,s,a),Sl(l,s,a)),s={cache:Xh()},n.payload=s;return}s=s.return}}function fS(n,s,a){var l=qn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Pu(n)?zy(s,a):(a=Uh(n,s,a,l),a!==null&&(Bn(a,n,l),qy(a,s,l)))}function Uy(n,s,a){var l=qn();Nl(n,s,a,l)}function Nl(n,s,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Pu(n))zy(s,h);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var E=s.lastRenderedState,T=f(E,a);if(h.hasEagerState=!0,h.eagerState=T,Vn(T,E))return gu(n,s,h,0),ht===null&&mu(),!1}catch{}finally{}if(a=Uh(n,s,h,l),a!==null)return Bn(a,n,l),qy(a,s,l),!0}return!1}function wf(n,s,a,l){if(l={lane:2,revertLane:Zf(),action:l,hasEagerState:!1,eagerState:null,next:null},Pu(n)){if(s)throw Error(i(479))}else s=Uh(n,a,l,2),s!==null&&Bn(s,n,2)}function Pu(n){var s=n.alternate;return n===Me||s!==null&&s===Me}function zy(n,s){ro=xu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function qy(n,s,a){if((a&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,qi(n,a)}}var Ou={readContext:ln,use:Iu,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},By={readContext:ln,use:Iu,useCallback:function(n,s){return xn().memoizedState=[n,s===void 0?null:s],n},useContext:ln,useEffect:Ay,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Du(4194308,4,Cy.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Du(4194308,4,n,s)},useInsertionEffect:function(n,s){Du(4,2,n,s)},useMemo:function(n,s){var a=xn();s=s===void 0?null:s;var l=n();if(da){yn(!0);try{n()}finally{yn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(n,s,a){var l=xn();if(a!==void 0){var h=a(s);if(da){yn(!0);try{a(s)}finally{yn(!1)}}}else h=s;return l.memoizedState=l.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},l.queue=n,n=n.dispatch=fS.bind(null,Me,n),[l.memoizedState,n]},useRef:function(n){var s=xn();return n={current:n},s.memoizedState=n},useState:function(n){n=gf(n);var s=n.queue,a=Uy.bind(null,Me,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:yf,useDeferredValue:function(n,s){var a=xn();return _f(a,n,s)},useTransition:function(){var n=gf(!1);return n=ky.bind(null,Me,n.queue,!0,!1),xn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var l=Me,h=xn();if(Ze){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),ht===null)throw Error(i(349));(Ge&124)!==0||cy(l,s,a)}h.memoizedState=a;var f={value:a,getSnapshot:s};return h.queue=f,Ay(dy.bind(null,l,f,n),[n]),l.flags|=2048,io(9,Nu(),uy.bind(null,l,f,a,s),null),a},useId:function(){var n=xn(),s=ht.identifierPrefix;if(Ze){var a=gs,l=ms;a=(l&~(1<<32-Ht(l)-1)).toString(32)+a,s="«"+s+"R"+a,a=Ru++,0<a&&(s+="H"+a.toString(32)),s+="»"}else a=oS++,s="«"+s+"r"+a.toString(32)+"»";return n.memoizedState=s},useHostTransitionStatus:Ef,useFormState:Ey,useActionState:Ey,useOptimistic:function(n){var s=xn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=wf.bind(null,Me,!0,a),a.dispatch=s,[n,s]},useMemoCache:hf,useCacheRefresh:function(){return xn().memoizedState=hS.bind(null,Me)}},Hy={readContext:ln,use:Iu,useCallback:Dy,useContext:ln,useEffect:xy,useImperativeHandle:Ny,useInsertionEffect:Ry,useLayoutEffect:Iy,useMemo:Py,useReducer:Cu,useRef:Sy,useState:function(){return Cu(_s)},useDebugValue:yf,useDeferredValue:function(n,s){var a=Ot();return Oy(a,it.memoizedState,n,s)},useTransition:function(){var n=Cu(_s)[0],s=Ot().memoizedState;return[typeof n=="boolean"?n:Il(n),s]},useSyncExternalStore:ly,useId:jy,useHostTransitionStatus:Ef,useFormState:wy,useActionState:wy,useOptimistic:function(n,s){var a=Ot();return my(a,it,n,s)},useMemoCache:hf,useCacheRefresh:Ly},mS={readContext:ln,use:Iu,useCallback:Dy,useContext:ln,useEffect:xy,useImperativeHandle:Ny,useInsertionEffect:Ry,useLayoutEffect:Iy,useMemo:Py,useReducer:mf,useRef:Sy,useState:function(){return mf(_s)},useDebugValue:yf,useDeferredValue:function(n,s){var a=Ot();return it===null?_f(a,n,s):Oy(a,it.memoizedState,n,s)},useTransition:function(){var n=mf(_s)[0],s=Ot().memoizedState;return[typeof n=="boolean"?n:Il(n),s]},useSyncExternalStore:ly,useId:jy,useHostTransitionStatus:Ef,useFormState:by,useActionState:by,useOptimistic:function(n,s){var a=Ot();return it!==null?my(a,it,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:hf,useCacheRefresh:Ly},ao=null,Dl=0;function ku(n){var s=Dl;return Dl+=1,ao===null&&(ao=[]),ey(ao,n,s)}function Pl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Mu(n,s){throw s.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Fy(n){var s=n._init;return s(n._payload)}function Gy(n){function s(L,M){if(n){var q=L.deletions;q===null?(L.deletions=[M],L.flags|=16):q.push(M)}}function a(L,M){if(!n)return null;for(;M!==null;)s(L,M),M=M.sibling;return null}function l(L){for(var M=new Map;L!==null;)L.key!==null?M.set(L.key,L):M.set(L.index,L),L=L.sibling;return M}function h(L,M){return L=fs(L,M),L.index=0,L.sibling=null,L}function f(L,M,q){return L.index=q,n?(q=L.alternate,q!==null?(q=q.index,q<M?(L.flags|=67108866,M):q):(L.flags|=67108866,M)):(L.flags|=1048576,M)}function E(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function T(L,M,q,Z){return M===null||M.tag!==6?(M=qh(q,L.mode,Z),M.return=L,M):(M=h(M,q),M.return=L,M)}function D(L,M,q,Z){var pe=q.type;return pe===j?J(L,M,q.props.children,Z,q.key):M!==null&&(M.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===x&&Fy(pe)===M.type)?(M=h(M,q.props),Pl(M,q),M.return=L,M):(M=yu(q.type,q.key,q.props,null,L.mode,Z),Pl(M,q),M.return=L,M)}function B(L,M,q,Z){return M===null||M.tag!==4||M.stateNode.containerInfo!==q.containerInfo||M.stateNode.implementation!==q.implementation?(M=Bh(q,L.mode,Z),M.return=L,M):(M=h(M,q.children||[]),M.return=L,M)}function J(L,M,q,Z,pe){return M===null||M.tag!==7?(M=ra(q,L.mode,Z,pe),M.return=L,M):(M=h(M,q),M.return=L,M)}function ee(L,M,q){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=qh(""+M,L.mode,q),M.return=L,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case A:return q=yu(M.type,M.key,M.props,null,L.mode,q),Pl(q,M),q.return=L,q;case I:return M=Bh(M,L.mode,q),M.return=L,M;case x:var Z=M._init;return M=Z(M._payload),ee(L,M,q)}if(Oe(M)||V(M))return M=ra(M,L.mode,q,null),M.return=L,M;if(typeof M.then=="function")return ee(L,ku(M),q);if(M.$$typeof===se)return ee(L,wu(L,M),q);Mu(L,M)}return null}function H(L,M,q,Z){var pe=M!==null?M.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return pe!==null?null:T(L,M,""+q,Z);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case A:return q.key===pe?D(L,M,q,Z):null;case I:return q.key===pe?B(L,M,q,Z):null;case x:return pe=q._init,q=pe(q._payload),H(L,M,q,Z)}if(Oe(q)||V(q))return pe!==null?null:J(L,M,q,Z,null);if(typeof q.then=="function")return H(L,M,ku(q),Z);if(q.$$typeof===se)return H(L,M,wu(L,q),Z);Mu(L,q)}return null}function G(L,M,q,Z,pe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return L=L.get(q)||null,T(M,L,""+Z,pe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return L=L.get(Z.key===null?q:Z.key)||null,D(M,L,Z,pe);case I:return L=L.get(Z.key===null?q:Z.key)||null,B(M,L,Z,pe);case x:var Ve=Z._init;return Z=Ve(Z._payload),G(L,M,q,Z,pe)}if(Oe(Z)||V(Z))return L=L.get(q)||null,J(M,L,Z,pe,null);if(typeof Z.then=="function")return G(L,M,q,ku(Z),pe);if(Z.$$typeof===se)return G(L,M,q,wu(M,Z),pe);Mu(M,Z)}return null}function Ie(L,M,q,Z){for(var pe=null,Ve=null,_e=M,Se=M=0,Yt=null;_e!==null&&Se<q.length;Se++){_e.index>Se?(Yt=_e,_e=null):Yt=_e.sibling;var Xe=H(L,_e,q[Se],Z);if(Xe===null){_e===null&&(_e=Yt);break}n&&_e&&Xe.alternate===null&&s(L,_e),M=f(Xe,M,Se),Ve===null?pe=Xe:Ve.sibling=Xe,Ve=Xe,_e=Yt}if(Se===q.length)return a(L,_e),Ze&&ia(L,Se),pe;if(_e===null){for(;Se<q.length;Se++)_e=ee(L,q[Se],Z),_e!==null&&(M=f(_e,M,Se),Ve===null?pe=_e:Ve.sibling=_e,Ve=_e);return Ze&&ia(L,Se),pe}for(_e=l(_e);Se<q.length;Se++)Yt=G(_e,L,Se,q[Se],Z),Yt!==null&&(n&&Yt.alternate!==null&&_e.delete(Yt.key===null?Se:Yt.key),M=f(Yt,M,Se),Ve===null?pe=Yt:Ve.sibling=Yt,Ve=Yt);return n&&_e.forEach(function(mi){return s(L,mi)}),Ze&&ia(L,Se),pe}function Te(L,M,q,Z){if(q==null)throw Error(i(151));for(var pe=null,Ve=null,_e=M,Se=M=0,Yt=null,Xe=q.next();_e!==null&&!Xe.done;Se++,Xe=q.next()){_e.index>Se?(Yt=_e,_e=null):Yt=_e.sibling;var mi=H(L,_e,Xe.value,Z);if(mi===null){_e===null&&(_e=Yt);break}n&&_e&&mi.alternate===null&&s(L,_e),M=f(mi,M,Se),Ve===null?pe=mi:Ve.sibling=mi,Ve=mi,_e=Yt}if(Xe.done)return a(L,_e),Ze&&ia(L,Se),pe;if(_e===null){for(;!Xe.done;Se++,Xe=q.next())Xe=ee(L,Xe.value,Z),Xe!==null&&(M=f(Xe,M,Se),Ve===null?pe=Xe:Ve.sibling=Xe,Ve=Xe);return Ze&&ia(L,Se),pe}for(_e=l(_e);!Xe.done;Se++,Xe=q.next())Xe=G(_e,L,Se,Xe.value,Z),Xe!==null&&(n&&Xe.alternate!==null&&_e.delete(Xe.key===null?Se:Xe.key),M=f(Xe,M,Se),Ve===null?pe=Xe:Ve.sibling=Xe,Ve=Xe);return n&&_e.forEach(function(gA){return s(L,gA)}),Ze&&ia(L,Se),pe}function ot(L,M,q,Z){if(typeof q=="object"&&q!==null&&q.type===j&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case A:e:{for(var pe=q.key;M!==null;){if(M.key===pe){if(pe=q.type,pe===j){if(M.tag===7){a(L,M.sibling),Z=h(M,q.props.children),Z.return=L,L=Z;break e}}else if(M.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===x&&Fy(pe)===M.type){a(L,M.sibling),Z=h(M,q.props),Pl(Z,q),Z.return=L,L=Z;break e}a(L,M);break}else s(L,M);M=M.sibling}q.type===j?(Z=ra(q.props.children,L.mode,Z,q.key),Z.return=L,L=Z):(Z=yu(q.type,q.key,q.props,null,L.mode,Z),Pl(Z,q),Z.return=L,L=Z)}return E(L);case I:e:{for(pe=q.key;M!==null;){if(M.key===pe)if(M.tag===4&&M.stateNode.containerInfo===q.containerInfo&&M.stateNode.implementation===q.implementation){a(L,M.sibling),Z=h(M,q.children||[]),Z.return=L,L=Z;break e}else{a(L,M);break}else s(L,M);M=M.sibling}Z=Bh(q,L.mode,Z),Z.return=L,L=Z}return E(L);case x:return pe=q._init,q=pe(q._payload),ot(L,M,q,Z)}if(Oe(q))return Ie(L,M,q,Z);if(V(q)){if(pe=V(q),typeof pe!="function")throw Error(i(150));return q=pe.call(q),Te(L,M,q,Z)}if(typeof q.then=="function")return ot(L,M,ku(q),Z);if(q.$$typeof===se)return ot(L,M,wu(L,q),Z);Mu(L,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,M!==null&&M.tag===6?(a(L,M.sibling),Z=h(M,q),Z.return=L,L=Z):(a(L,M),Z=qh(q,L.mode,Z),Z.return=L,L=Z),E(L)):a(L,M)}return function(L,M,q,Z){try{Dl=0;var pe=ot(L,M,q,Z);return ao=null,pe}catch(_e){if(_e===Tl||_e===bu)throw _e;var Ve=jn(29,_e,null,L.mode);return Ve.lanes=Z,Ve.return=L,Ve}finally{}}}var oo=Gy(!0),Qy=Gy(!1),nr=ne(null),Vr=null;function Zs(n){var s=n.alternate;oe(qt,qt.current&1),oe(nr,n),Vr===null&&(s===null||no.current!==null||s.memoizedState!==null)&&(Vr=n)}function Ky(n){if(n.tag===22){if(oe(qt,qt.current),oe(nr,n),Vr===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Vr=n)}}else ei()}function ei(){oe(qt,qt.current),oe(nr,nr.current)}function vs(n){de(nr),Vr===n&&(Vr=null),de(qt)}var qt=ne(0);function Vu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||dm(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Tf(n,s,a,l){s=n.memoizedState,a=a(l,s),a=a==null?s:w({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var bf={enqueueSetState:function(n,s,a){n=n._reactInternals;var l=qn(),h=$s(l);h.payload=s,a!=null&&(h.callback=a),s=Ws(n,h,l),s!==null&&(Bn(s,n,l),Sl(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var l=qn(),h=$s(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=Ws(n,h,l),s!==null&&(Bn(s,n,l),Sl(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=qn(),l=$s(a);l.tag=2,s!=null&&(l.callback=s),s=Ws(n,l,a),s!==null&&(Bn(s,n,a),Sl(s,n,a))}};function Yy(n,s,a,l,h,f,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,f,E):s.prototype&&s.prototype.isPureReactComponent?!ml(a,l)||!ml(h,f):!0}function Xy(n,s,a,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==n&&bf.enqueueReplaceState(s,s.state,null)}function ha(n,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(n=n.defaultProps){a===s&&(a=w({},a));for(var h in n)a[h]===void 0&&(a[h]=n[h])}return a}var ju=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function $y(n){ju(n)}function Wy(n){console.error(n)}function Jy(n){ju(n)}function Lu(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Zy(n,s,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Sf(n,s,a){return a=$s(a),a.tag=3,a.payload={element:null},a.callback=function(){Lu(n,s)},a}function e_(n){return n=$s(n),n.tag=3,n}function t_(n,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;n.payload=function(){return h(f)},n.callback=function(){Zy(s,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Zy(s,a,l),typeof h!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function gS(n,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&vl(s,a,h,!0),a=nr.current,a!==null){switch(a.tag){case 13:return Vr===null?Yf():a.alternate===null&&bt===0&&(bt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Jh?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),$f(n,l,h)),!1;case 22:return a.flags|=65536,l===Jh?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),$f(n,l,h)),!1}throw Error(i(435,a.tag))}return $f(n,l,h),Yf(),!1}if(Ze)return s=nr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==Gh&&(n=Error(i(422),{cause:l}),_l(Jn(n,a)))):(l!==Gh&&(s=Error(i(423),{cause:l}),_l(Jn(s,a))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,l=Jn(l,a),h=Sf(n.stateNode,l,h),tf(n,h),bt!==4&&(bt=2)),!1;var f=Error(i(520),{cause:l});if(f=Jn(f,a),Ul===null?Ul=[f]:Ul.push(f),bt!==4&&(bt=2),s===null)return!0;l=Jn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=h&-h,a.lanes|=n,n=Sf(a.stateNode,l,n),tf(a,n),!1;case 1:if(s=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ai===null||!ai.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=e_(h),t_(h,n,a,l),tf(a,h),!1}a=a.return}while(a!==null);return!1}var n_=Error(i(461)),Qt=!1;function tn(n,s,a,l){s.child=n===null?Qy(s,null,a,l):oo(s,n.child,a,l)}function r_(n,s,a,l,h){a=a.render;var f=s.ref;if("ref"in l){var E={};for(var T in l)T!=="ref"&&(E[T]=l[T])}else E=l;return ca(s),l=of(n,s,a,E,f,h),T=lf(),n!==null&&!Qt?(cf(n,s,h),Es(n,s,h)):(Ze&&T&&Hh(s),s.flags|=1,tn(n,s,l,h),s.child)}function s_(n,s,a,l,h){if(n===null){var f=a.type;return typeof f=="function"&&!zh(f)&&f.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=f,i_(n,s,f,l,h)):(n=yu(a.type,null,l,s,s.mode,h),n.ref=s.ref,n.return=s,s.child=n)}if(f=n.child,!Pf(n,h)){var E=f.memoizedProps;if(a=a.compare,a=a!==null?a:ml,a(E,l)&&n.ref===s.ref)return Es(n,s,h)}return s.flags|=1,n=fs(f,l),n.ref=s.ref,n.return=s,s.child=n}function i_(n,s,a,l,h){if(n!==null){var f=n.memoizedProps;if(ml(f,l)&&n.ref===s.ref)if(Qt=!1,s.pendingProps=l=f,Pf(n,h))(n.flags&131072)!==0&&(Qt=!0);else return s.lanes=n.lanes,Es(n,s,h)}return Af(n,s,a,l,h)}function a_(n,s,a){var l=s.pendingProps,h=l.children,f=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,n!==null){for(h=s.child=n.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;s.childLanes=f&~l}else s.childLanes=0,s.child=null;return o_(n,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Tu(s,f!==null?f.cachePool:null),f!==null?iy(s,f):rf(),Ky(s);else return s.lanes=s.childLanes=536870912,o_(n,s,f!==null?f.baseLanes|a:a,a)}else f!==null?(Tu(s,f.cachePool),iy(s,f),ei(),s.memoizedState=null):(n!==null&&Tu(s,null),rf(),ei());return tn(n,s,h,a),s.child}function o_(n,s,a,l){var h=Wh();return h=h===null?null:{parent:zt._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},n!==null&&Tu(s,null),rf(),Ky(s),n!==null&&vl(n,s,l,!0),null}function Uu(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function Af(n,s,a,l,h){return ca(s),a=of(n,s,a,l,void 0,h),l=lf(),n!==null&&!Qt?(cf(n,s,h),Es(n,s,h)):(Ze&&l&&Hh(s),s.flags|=1,tn(n,s,a,h),s.child)}function l_(n,s,a,l,h,f){return ca(s),s.updateQueue=null,a=oy(s,l,a,h),ay(n),l=lf(),n!==null&&!Qt?(cf(n,s,f),Es(n,s,f)):(Ze&&l&&Hh(s),s.flags|=1,tn(n,s,a,f),s.child)}function c_(n,s,a,l,h){if(ca(s),s.stateNode===null){var f=Wa,E=a.contextType;typeof E=="object"&&E!==null&&(f=ln(E)),f=new a(l,f),s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=bf,s.stateNode=f,f._reactInternals=s,f=s.stateNode,f.props=l,f.state=s.memoizedState,f.refs={},Zh(s),E=a.contextType,f.context=typeof E=="object"&&E!==null?ln(E):Wa,f.state=s.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(Tf(s,a,E,l),f.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&bf.enqueueReplaceState(f,f.state,null),xl(s,l,f,h),Al(),f.state=s.memoizedState),typeof f.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){f=s.stateNode;var T=s.memoizedProps,D=ha(a,T);f.props=D;var B=f.context,J=a.contextType;E=Wa,typeof J=="object"&&J!==null&&(E=ln(J));var ee=a.getDerivedStateFromProps;J=typeof ee=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,J||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||B!==E)&&Xy(s,f,l,E),Xs=!1;var H=s.memoizedState;f.state=H,xl(s,l,f,h),Al(),B=s.memoizedState,T||H!==B||Xs?(typeof ee=="function"&&(Tf(s,a,ee,l),B=s.memoizedState),(D=Xs||Yy(s,a,D,l,H,B,E))?(J||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(s.flags|=4194308)):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=B),f.props=l,f.state=B,f.context=E,l=D):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{f=s.stateNode,ef(n,s),E=s.memoizedProps,J=ha(a,E),f.props=J,ee=s.pendingProps,H=f.context,B=a.contextType,D=Wa,typeof B=="object"&&B!==null&&(D=ln(B)),T=a.getDerivedStateFromProps,(B=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==ee||H!==D)&&Xy(s,f,l,D),Xs=!1,H=s.memoizedState,f.state=H,xl(s,l,f,h),Al();var G=s.memoizedState;E!==ee||H!==G||Xs||n!==null&&n.dependencies!==null&&Eu(n.dependencies)?(typeof T=="function"&&(Tf(s,a,T,l),G=s.memoizedState),(J=Xs||Yy(s,a,J,l,H,G,D)||n!==null&&n.dependencies!==null&&Eu(n.dependencies))?(B||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,G,D),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,G,D)),typeof f.componentDidUpdate=="function"&&(s.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=G),f.props=l,f.state=G,f.context=D,l=J):(typeof f.componentDidUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),l=!1)}return f=l,Uu(n,s),l=(s.flags&128)!==0,f||l?(f=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),s.flags|=1,n!==null&&l?(s.child=oo(s,n.child,null,h),s.child=oo(s,null,a,h)):tn(n,s,a,h),s.memoizedState=f.state,n=s.child):n=Es(n,s,h),n}function u_(n,s,a,l){return yl(),s.flags|=256,tn(n,s,a,l),s.child}var xf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rf(n){return{baseLanes:n,cachePool:Wp()}}function If(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=rr),n}function d_(n,s,a){var l=s.pendingProps,h=!1,f=(s.flags&128)!==0,E;if((E=f)||(E=n!==null&&n.memoizedState===null?!1:(qt.current&2)!==0),E&&(h=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if(Ze){if(h?Zs(s):ei(),Ze){var T=Tt,D;if(D=T){e:{for(D=T,T=Mr;D.nodeType!==8;){if(!T){T=null;break e}if(D=gr(D.nextSibling),D===null){T=null;break e}}T=D}T!==null?(s.memoizedState={dehydrated:T,treeContext:sa!==null?{id:ms,overflow:gs}:null,retryLane:536870912,hydrationErrors:null},D=jn(18,null,null,0),D.stateNode=T,D.return=s,s.child=D,wn=s,Tt=null,D=!0):D=!1}D||oa(s)}if(T=s.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return dm(T)?s.lanes=32:s.lanes=536870912,null;vs(s)}return T=l.children,l=l.fallback,h?(ei(),h=s.mode,T=zu({mode:"hidden",children:T},h),l=ra(l,h,a,null),T.return=s,l.return=s,T.sibling=l,s.child=T,h=s.child,h.memoizedState=Rf(a),h.childLanes=If(n,E,a),s.memoizedState=xf,l):(Zs(s),Cf(s,T))}if(D=n.memoizedState,D!==null&&(T=D.dehydrated,T!==null)){if(f)s.flags&256?(Zs(s),s.flags&=-257,s=Nf(n,s,a)):s.memoizedState!==null?(ei(),s.child=n.child,s.flags|=128,s=null):(ei(),h=l.fallback,T=s.mode,l=zu({mode:"visible",children:l.children},T),h=ra(h,T,a,null),h.flags|=2,l.return=s,h.return=s,l.sibling=h,s.child=l,oo(s,n.child,null,a),l=s.child,l.memoizedState=Rf(a),l.childLanes=If(n,E,a),s.memoizedState=xf,s=h);else if(Zs(s),dm(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var B=E.dgst;E=B,l=Error(i(419)),l.stack="",l.digest=E,_l({value:l,source:null,stack:null}),s=Nf(n,s,a)}else if(Qt||vl(n,s,a,!1),E=(a&n.childLanes)!==0,Qt||E){if(E=ht,E!==null&&(l=a&-a,l=(l&42)!==0?1:br(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==D.retryLane))throw D.retryLane=l,$a(n,l),Bn(E,n,l),n_;T.data==="$?"||Yf(),s=Nf(n,s,a)}else T.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=D.treeContext,Tt=gr(T.nextSibling),wn=s,Ze=!0,aa=null,Mr=!1,n!==null&&(er[tr++]=ms,er[tr++]=gs,er[tr++]=sa,ms=n.id,gs=n.overflow,sa=s),s=Cf(s,l.children),s.flags|=4096);return s}return h?(ei(),h=l.fallback,T=s.mode,D=n.child,B=D.sibling,l=fs(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,B!==null?h=fs(B,h):(h=ra(h,T,a,null),h.flags|=2),h.return=s,l.return=s,l.sibling=h,s.child=l,l=h,h=s.child,T=n.child.memoizedState,T===null?T=Rf(a):(D=T.cachePool,D!==null?(B=zt._currentValue,D=D.parent!==B?{parent:B,pool:B}:D):D=Wp(),T={baseLanes:T.baseLanes|a,cachePool:D}),h.memoizedState=T,h.childLanes=If(n,E,a),s.memoizedState=xf,l):(Zs(s),a=n.child,n=a.sibling,a=fs(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=a,s.memoizedState=null,a)}function Cf(n,s){return s=zu({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function zu(n,s){return n=jn(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Nf(n,s,a){return oo(s,n.child,null,a),n=Cf(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function h_(n,s,a){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),Kh(n.return,s,a)}function Df(n,s,a,l,h){var f=n.memoizedState;f===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function f_(n,s,a){var l=s.pendingProps,h=l.revealOrder,f=l.tail;if(tn(n,s,l.children,a),l=qt.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&h_(n,a,s);else if(n.tag===19)h_(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(oe(qt,l),h){case"forwards":for(a=s.child,h=null;a!==null;)n=a.alternate,n!==null&&Vu(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),Df(s,!1,h,a,f);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(n=h.alternate,n!==null&&Vu(n)===null){s.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}Df(s,!0,a,null,f);break;case"together":Df(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Es(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ii|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(vl(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,a=fs(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=fs(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Pf(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Eu(n)))}function pS(n,s,a){switch(s.tag){case 3:We(s,s.stateNode.containerInfo),Ys(s,zt,n.memoizedState.cache),yl();break;case 27:case 5:lr(s);break;case 4:We(s,s.stateNode.containerInfo);break;case 10:Ys(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Zs(s),s.flags|=128,null):(a&s.child.childLanes)!==0?d_(n,s,a):(Zs(s),n=Es(n,s,a),n!==null?n.sibling:null);Zs(s);break;case 19:var h=(n.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(vl(n,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return f_(n,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),oe(qt,qt.current),l)break;return null;case 22:case 23:return s.lanes=0,a_(n,s,a);case 24:Ys(s,zt,n.memoizedState.cache)}return Es(n,s,a)}function m_(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)Qt=!0;else{if(!Pf(n,a)&&(s.flags&128)===0)return Qt=!1,pS(n,s,a);Qt=(n.flags&131072)!==0}else Qt=!1,Ze&&(s.flags&1048576)!==0&&Fp(s,vu,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var l=s.elementType,h=l._init;if(l=h(l._payload),s.type=l,typeof l=="function")zh(l)?(n=ha(l,n),s.tag=1,s=c_(null,s,l,n,a)):(s.tag=0,s=Af(null,s,l,n,a));else{if(l!=null){if(h=l.$$typeof,h===fe){s.tag=11,s=r_(null,s,l,n,a);break e}else if(h===N){s.tag=14,s=s_(null,s,l,n,a);break e}}throw s=Ce(l)||l,Error(i(306,s,""))}}return s;case 0:return Af(n,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=ha(l,s.pendingProps),c_(n,s,l,h,a);case 3:e:{if(We(s,s.stateNode.containerInfo),n===null)throw Error(i(387));l=s.pendingProps;var f=s.memoizedState;h=f.element,ef(n,s),xl(s,l,null,a);var E=s.memoizedState;if(l=E.cache,Ys(s,zt,l),l!==f.cache&&Yh(s,[zt],a,!0),Al(),l=E.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=u_(n,s,l,a);break e}else if(l!==h){h=Jn(Error(i(424)),s),_l(h),s=u_(n,s,l,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Tt=gr(n.firstChild),wn=s,Ze=!0,aa=null,Mr=!0,a=Qy(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(yl(),l===h){s=Es(n,s,a);break e}tn(n,s,l,a)}s=s.child}return s;case 26:return Uu(n,s),n===null?(a=_0(s.type,null,s.pendingProps,null))?s.memoizedState=a:Ze||(a=s.type,n=s.pendingProps,l=ed(Ae.current).createElement(a),l[At]=s,l[wt]=n,rn(l,a,n),xt(l),s.stateNode=l):s.memoizedState=_0(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return lr(s),n===null&&Ze&&(l=s.stateNode=g0(s.type,s.pendingProps,Ae.current),wn=s,Mr=!0,h=Tt,ci(s.type)?(hm=h,Tt=gr(l.firstChild)):Tt=h),tn(n,s,s.pendingProps.children,a),Uu(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Ze&&((h=l=Tt)&&(l=FS(l,s.type,s.pendingProps,Mr),l!==null?(s.stateNode=l,wn=s,Tt=gr(l.firstChild),Mr=!1,h=!0):h=!1),h||oa(s)),lr(s),h=s.type,f=s.pendingProps,E=n!==null?n.memoizedProps:null,l=f.children,lm(h,f)?l=null:E!==null&&lm(h,E)&&(s.flags|=32),s.memoizedState!==null&&(h=of(n,s,lS,null,null,a),Yl._currentValue=h),Uu(n,s),tn(n,s,l,a),s.child;case 6:return n===null&&Ze&&((n=a=Tt)&&(a=GS(a,s.pendingProps,Mr),a!==null?(s.stateNode=a,wn=s,Tt=null,n=!0):n=!1),n||oa(s)),null;case 13:return d_(n,s,a);case 4:return We(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=oo(s,null,l,a):tn(n,s,l,a),s.child;case 11:return r_(n,s,s.type,s.pendingProps,a);case 7:return tn(n,s,s.pendingProps,a),s.child;case 8:return tn(n,s,s.pendingProps.children,a),s.child;case 12:return tn(n,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Ys(s,s.type,l.value),tn(n,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,ca(s),h=ln(h),l=l(h),s.flags|=1,tn(n,s,l,a),s.child;case 14:return s_(n,s,s.type,s.pendingProps,a);case 15:return i_(n,s,s.type,s.pendingProps,a);case 19:return f_(n,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},n===null?(a=zu(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=fs(n.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return a_(n,s,a);case 24:return ca(s),l=ln(zt),n===null?(h=Wh(),h===null&&(h=ht,f=Xh(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),s.memoizedState={parent:l,cache:h},Zh(s),Ys(s,zt,h)):((n.lanes&a)!==0&&(ef(n,s),xl(s,null,null,a),Al()),h=n.memoizedState,f=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Ys(s,zt,l)):(l=f.cache,Ys(s,zt,l),l!==h.cache&&Yh(s,[zt],a,!0))),tn(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ws(n){n.flags|=4}function g_(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!b0(s)){if(s=nr.current,s!==null&&((Ge&4194048)===Ge?Vr!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||s!==Vr))throw bl=Jh,Jp;n.flags|=8192}}function qu(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Bs():536870912,n.lanes|=s,ho|=s)}function Ol(n,s){if(!Ze)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function yt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(s)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=l,n.childLanes=a,s}function yS(n,s,a){var l=s.pendingProps;switch(Fh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(s),null;case 1:return yt(s),null;case 3:return a=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ys(zt),Jt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(pl(s)?ws(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Kp())),yt(s),null;case 26:return a=s.memoizedState,n===null?(ws(s),a!==null?(yt(s),g_(s,a)):(yt(s),s.flags&=-16777217)):a?a!==n.memoizedState?(ws(s),yt(s),g_(s,a)):(yt(s),s.flags&=-16777217):(n.memoizedProps!==l&&ws(s),yt(s),s.flags&=-16777217),null;case 27:cr(s),a=Ae.current;var h=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==l&&ws(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return yt(s),null}n=ve.current,pl(s)?Gp(s):(n=g0(h,l,a),s.stateNode=n,ws(s))}return yt(s),null;case 5:if(cr(s),a=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&ws(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return yt(s),null}if(n=ve.current,pl(s))Gp(s);else{switch(h=ed(Ae.current),n){case 1:n=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=h.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}n[At]=s,n[wt]=l;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)n.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=n;e:switch(rn(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ws(s)}}return yt(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&ws(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(n=Ae.current,pl(s)){if(n=s.stateNode,a=s.memoizedProps,l=null,h=wn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}n[At]=s,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||l0(n.nodeValue,a)),n||oa(s)}else n=ed(n).createTextNode(l),n[At]=s,s.stateNode=n}return yt(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=pl(s),l!==null&&l.dehydrated!==null){if(n===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[At]=s}else yl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;yt(s),h=!1}else h=Kp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(vs(s),s):(vs(s),null)}if(vs(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==n&&a&&(s.child.flags|=8192),qu(s,s.updateQueue),yt(s),null;case 4:return Jt(),n===null&&rm(s.stateNode.containerInfo),yt(s),null;case 10:return ys(s.type),yt(s),null;case 19:if(de(qt),h=s.memoizedState,h===null)return yt(s),null;if(l=(s.flags&128)!==0,f=h.rendering,f===null)if(l)Ol(h,!1);else{if(bt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(f=Vu(n),f!==null){for(s.flags|=128,Ol(h,!1),n=f.updateQueue,s.updateQueue=n,qu(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)Hp(a,n),a=a.sibling;return oe(qt,qt.current&1|2),s.child}n=n.sibling}h.tail!==null&&pn()>Fu&&(s.flags|=128,l=!0,Ol(h,!1),s.lanes=4194304)}else{if(!l)if(n=Vu(f),n!==null){if(s.flags|=128,l=!0,n=n.updateQueue,s.updateQueue=n,qu(s,n),Ol(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Ze)return yt(s),null}else 2*pn()-h.renderingStartTime>Fu&&a!==536870912&&(s.flags|=128,l=!0,Ol(h,!1),s.lanes=4194304);h.isBackwards?(f.sibling=s.child,s.child=f):(n=h.last,n!==null?n.sibling=f:s.child=f,h.last=f)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=pn(),s.sibling=null,n=qt.current,oe(qt,l?n&1|2:n&1),s):(yt(s),null);case 22:case 23:return vs(s),sf(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(yt(s),s.subtreeFlags&6&&(s.flags|=8192)):yt(s),a=s.updateQueue,a!==null&&qu(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),n!==null&&de(ua),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),ys(zt),yt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function _S(n,s){switch(Fh(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ys(zt),Jt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return cr(s),null;case 13:if(vs(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));yl()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return de(qt),null;case 4:return Jt(),null;case 10:return ys(s.type),null;case 22:case 23:return vs(s),sf(),n!==null&&de(ua),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ys(zt),null;case 25:return null;default:return null}}function p_(n,s){switch(Fh(s),s.tag){case 3:ys(zt),Jt();break;case 26:case 27:case 5:cr(s);break;case 4:Jt();break;case 13:vs(s);break;case 19:de(qt);break;case 10:ys(s.type);break;case 22:case 23:vs(s),sf(),n!==null&&de(ua);break;case 24:ys(zt)}}function kl(n,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&n)===n){l=void 0;var f=a.create,E=a.inst;l=f(),E.destroy=l}a=a.next}while(a!==h)}}catch(T){ut(s,s.return,T)}}function ti(n,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&n)===n){var E=l.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,h=s;var D=a,B=T;try{B()}catch(J){ut(h,D,J)}}}l=l.next}while(l!==f)}}catch(J){ut(s,s.return,J)}}function y_(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{sy(s,a)}catch(l){ut(n,n.return,l)}}}function __(n,s,a){a.props=ha(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){ut(n,s,l)}}function Ml(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(h){ut(n,s,h)}}function jr(n,s){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ut(n,s,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ut(n,s,h)}else a.current=null}function v_(n){var s=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ut(n,n.return,h)}}function Of(n,s,a){try{var l=n.stateNode;US(l,n.type,a,s),l[wt]=s}catch(h){ut(n,n.return,h)}}function E_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ci(n.type)||n.tag===4}function kf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||E_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ci(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Mf(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Zu));else if(l!==4&&(l===27&&ci(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(Mf(n,s,a),n=n.sibling;n!==null;)Mf(n,s,a),n=n.sibling}function Bu(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(l!==4&&(l===27&&ci(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Bu(n,s,a),n=n.sibling;n!==null;)Bu(n,s,a),n=n.sibling}function w_(n){var s=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);rn(s,l,a),s[At]=n,s[wt]=a}catch(f){ut(n,n.return,f)}}var Ts=!1,It=!1,Vf=!1,T_=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function vS(n,s){if(n=n.containerInfo,am=ad,n=Op(n),Oh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var E=0,T=-1,D=-1,B=0,J=0,ee=n,H=null;t:for(;;){for(var G;ee!==a||h!==0&&ee.nodeType!==3||(T=E+h),ee!==f||l!==0&&ee.nodeType!==3||(D=E+l),ee.nodeType===3&&(E+=ee.nodeValue.length),(G=ee.firstChild)!==null;)H=ee,ee=G;for(;;){if(ee===n)break t;if(H===a&&++B===h&&(T=E),H===f&&++J===l&&(D=E),(G=ee.nextSibling)!==null)break;ee=H,H=ee.parentNode}ee=G}a=T===-1||D===-1?null:{start:T,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(om={focusedElem:n,selectionRange:a},ad=!1,Kt=s;Kt!==null;)if(s=Kt,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,Kt=n;else for(;Kt!==null;){switch(s=Kt,f=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&f!==null){n=void 0,a=s,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Ie=ha(a.type,h,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(Ie,f),l.__reactInternalSnapshotBeforeUpdate=n}catch(Te){ut(a,a.return,Te)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)um(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":um(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Kt=n;break}Kt=s.return}}function b_(n,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ni(n,a),l&4&&kl(5,a);break;case 1:if(ni(n,a),l&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(E){ut(a,a.return,E)}else{var h=ha(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(h,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){ut(a,a.return,E)}}l&64&&y_(a),l&512&&Ml(a,a.return);break;case 3:if(ni(n,a),l&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{sy(n,s)}catch(E){ut(a,a.return,E)}}break;case 27:s===null&&l&4&&w_(a);case 26:case 5:ni(n,a),s===null&&l&4&&v_(a),l&512&&Ml(a,a.return);break;case 12:ni(n,a);break;case 13:ni(n,a),l&4&&x_(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=IS.bind(null,a),QS(n,a))));break;case 22:if(l=a.memoizedState!==null||Ts,!l){s=s!==null&&s.memoizedState!==null||It,h=Ts;var f=It;Ts=l,(It=s)&&!f?ri(n,a,(a.subtreeFlags&8772)!==0):ni(n,a),Ts=h,It=f}break;case 30:break;default:ni(n,a)}}function S_(n){var s=n.alternate;s!==null&&(n.alternate=null,S_(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&An(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var mt=null,Rn=!1;function bs(n,s,a){for(a=a.child;a!==null;)A_(n,s,a),a=a.sibling}function A_(n,s,a){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(ft,a)}catch{}switch(a.tag){case 26:It||jr(a,s),bs(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:It||jr(a,s);var l=mt,h=Rn;ci(a.type)&&(mt=a.stateNode,Rn=!1),bs(n,s,a),Fl(a.stateNode),mt=l,Rn=h;break;case 5:It||jr(a,s);case 6:if(l=mt,h=Rn,mt=null,bs(n,s,a),mt=l,Rn=h,mt!==null)if(Rn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(a.stateNode)}catch(f){ut(a,s,f)}else try{mt.removeChild(a.stateNode)}catch(f){ut(a,s,f)}break;case 18:mt!==null&&(Rn?(n=mt,f0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Jl(n)):f0(mt,a.stateNode));break;case 4:l=mt,h=Rn,mt=a.stateNode.containerInfo,Rn=!0,bs(n,s,a),mt=l,Rn=h;break;case 0:case 11:case 14:case 15:It||ti(2,a,s),It||ti(4,a,s),bs(n,s,a);break;case 1:It||(jr(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&__(a,s,l)),bs(n,s,a);break;case 21:bs(n,s,a);break;case 22:It=(l=It)||a.memoizedState!==null,bs(n,s,a),It=l;break;default:bs(n,s,a)}}function x_(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Jl(n)}catch(a){ut(s,s.return,a)}}function ES(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new T_),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new T_),s;default:throw Error(i(435,n.tag))}}function jf(n,s){var a=ES(n);s.forEach(function(l){var h=CS.bind(null,n,l);a.has(l)||(a.add(l),l.then(h,h))})}function Ln(n,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=n,E=s,T=E;e:for(;T!==null;){switch(T.tag){case 27:if(ci(T.type)){mt=T.stateNode,Rn=!1;break e}break;case 5:mt=T.stateNode,Rn=!1;break e;case 3:case 4:mt=T.stateNode.containerInfo,Rn=!0;break e}T=T.return}if(mt===null)throw Error(i(160));A_(f,E,h),mt=null,Rn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)R_(s,n),s=s.sibling}var mr=null;function R_(n,s){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ln(s,n),Un(n),l&4&&(ti(3,n,n.return),kl(3,n),ti(5,n,n.return));break;case 1:Ln(s,n),Un(n),l&512&&(It||a===null||jr(a,a.return)),l&64&&Ts&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=mr;if(Ln(s,n),Un(n),l&512&&(It||a===null||jr(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Sn]||f[At]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),rn(f,l,a),f[At]=n,xt(f),l=f;break e;case"link":var E=w0("link","href",h).get(l+(a.href||""));if(E){for(var T=0;T<E.length;T++)if(f=E[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(T,1);break t}}f=h.createElement(l),rn(f,l,a),h.head.appendChild(f);break;case"meta":if(E=w0("meta","content",h).get(l+(a.content||""))){for(T=0;T<E.length;T++)if(f=E[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(T,1);break t}}f=h.createElement(l),rn(f,l,a),h.head.appendChild(f);break;default:throw Error(i(468,l))}f[At]=n,xt(f),l=f}n.stateNode=l}else T0(h,n.type,n.stateNode);else n.stateNode=E0(h,l,n.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?T0(h,n.type,n.stateNode):E0(h,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Of(n,n.memoizedProps,a.memoizedProps)}break;case 27:Ln(s,n),Un(n),l&512&&(It||a===null||jr(a,a.return)),a!==null&&l&4&&Of(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Ln(s,n),Un(n),l&512&&(It||a===null||jr(a,a.return)),n.flags&32){h=n.stateNode;try{Yn(h,"")}catch(G){ut(n,n.return,G)}}l&4&&n.stateNode!=null&&(h=n.memoizedProps,Of(n,h,a!==null?a.memoizedProps:h)),l&1024&&(Vf=!0);break;case 6:if(Ln(s,n),Un(n),l&4){if(n.stateNode===null)throw Error(i(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(G){ut(n,n.return,G)}}break;case 3:if(rd=null,h=mr,mr=td(s.containerInfo),Ln(s,n),mr=h,Un(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Jl(s.containerInfo)}catch(G){ut(n,n.return,G)}Vf&&(Vf=!1,I_(n));break;case 4:l=mr,mr=td(n.stateNode.containerInfo),Ln(s,n),Un(n),mr=l;break;case 12:Ln(s,n),Un(n);break;case 13:Ln(s,n),Un(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Hf=pn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,jf(n,l)));break;case 22:h=n.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,B=Ts,J=It;if(Ts=B||h,It=J||D,Ln(s,n),It=J,Ts=B,Un(n),l&8192)e:for(s=n.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||D||Ts||It||fa(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){D=a=s;try{if(f=D.stateNode,h)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=D.stateNode;var ee=D.memoizedProps.style,H=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;T.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(G){ut(D,D.return,G)}}}else if(s.tag===6){if(a===null){D=s;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(G){ut(D,D.return,G)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,jf(n,a))));break;case 19:Ln(s,n),Un(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,jf(n,l)));break;case 30:break;case 21:break;default:Ln(s,n),Un(n)}}function Un(n){var s=n.flags;if(s&2){try{for(var a,l=n.return;l!==null;){if(E_(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,f=kf(n);Bu(n,f,h);break;case 5:var E=a.stateNode;a.flags&32&&(Yn(E,""),a.flags&=-33);var T=kf(n);Bu(n,T,E);break;case 3:case 4:var D=a.stateNode.containerInfo,B=kf(n);Mf(n,B,D);break;default:throw Error(i(161))}}catch(J){ut(n,n.return,J)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function I_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;I_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ni(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)b_(n,s.alternate,s),s=s.sibling}function fa(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:ti(4,s,s.return),fa(s);break;case 1:jr(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&__(s,s.return,a),fa(s);break;case 27:Fl(s.stateNode);case 26:case 5:jr(s,s.return),fa(s);break;case 22:s.memoizedState===null&&fa(s);break;case 30:fa(s);break;default:fa(s)}n=n.sibling}}function ri(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=n,f=s,E=f.flags;switch(f.tag){case 0:case 11:case 15:ri(h,f,a),kl(4,f);break;case 1:if(ri(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){ut(l,l.return,B)}if(l=f,h=l.updateQueue,h!==null){var T=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)ry(D[h],T)}catch(B){ut(l,l.return,B)}}a&&E&64&&y_(f),Ml(f,f.return);break;case 27:w_(f);case 26:case 5:ri(h,f,a),a&&l===null&&E&4&&v_(f),Ml(f,f.return);break;case 12:ri(h,f,a);break;case 13:ri(h,f,a),a&&E&4&&x_(h,f);break;case 22:f.memoizedState===null&&ri(h,f,a),Ml(f,f.return);break;case 30:break;default:ri(h,f,a)}s=s.sibling}}function Lf(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&El(a))}function Uf(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&El(n))}function Lr(n,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)C_(n,s,a,l),s=s.sibling}function C_(n,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Lr(n,s,a,l),h&2048&&kl(9,s);break;case 1:Lr(n,s,a,l);break;case 3:Lr(n,s,a,l),h&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&El(n)));break;case 12:if(h&2048){Lr(n,s,a,l),n=s.stateNode;try{var f=s.memoizedProps,E=f.id,T=f.onPostCommit;typeof T=="function"&&T(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){ut(s,s.return,D)}}else Lr(n,s,a,l);break;case 13:Lr(n,s,a,l);break;case 23:break;case 22:f=s.stateNode,E=s.alternate,s.memoizedState!==null?f._visibility&2?Lr(n,s,a,l):Vl(n,s):f._visibility&2?Lr(n,s,a,l):(f._visibility|=2,lo(n,s,a,l,(s.subtreeFlags&10256)!==0)),h&2048&&Lf(E,s);break;case 24:Lr(n,s,a,l),h&2048&&Uf(s.alternate,s);break;default:Lr(n,s,a,l)}}function lo(n,s,a,l,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var f=n,E=s,T=a,D=l,B=E.flags;switch(E.tag){case 0:case 11:case 15:lo(f,E,T,D,h),kl(8,E);break;case 23:break;case 22:var J=E.stateNode;E.memoizedState!==null?J._visibility&2?lo(f,E,T,D,h):Vl(f,E):(J._visibility|=2,lo(f,E,T,D,h)),h&&B&2048&&Lf(E.alternate,E);break;case 24:lo(f,E,T,D,h),h&&B&2048&&Uf(E.alternate,E);break;default:lo(f,E,T,D,h)}s=s.sibling}}function Vl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,l=s,h=l.flags;switch(l.tag){case 22:Vl(a,l),h&2048&&Lf(l.alternate,l);break;case 24:Vl(a,l),h&2048&&Uf(l.alternate,l);break;default:Vl(a,l)}s=s.sibling}}var jl=8192;function co(n){if(n.subtreeFlags&jl)for(n=n.child;n!==null;)N_(n),n=n.sibling}function N_(n){switch(n.tag){case 26:co(n),n.flags&jl&&n.memoizedState!==null&&iA(mr,n.memoizedState,n.memoizedProps);break;case 5:co(n);break;case 3:case 4:var s=mr;mr=td(n.stateNode.containerInfo),co(n),mr=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=jl,jl=16777216,co(n),jl=s):co(n));break;default:co(n)}}function D_(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ll(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Kt=l,O_(l,n)}D_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)P_(n),n=n.sibling}function P_(n){switch(n.tag){case 0:case 11:case 15:Ll(n),n.flags&2048&&ti(9,n,n.return);break;case 3:Ll(n);break;case 12:Ll(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Hu(n)):Ll(n);break;default:Ll(n)}}function Hu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Kt=l,O_(l,n)}D_(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:ti(8,s,s.return),Hu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Hu(s));break;default:Hu(s)}n=n.sibling}}function O_(n,s){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:ti(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:El(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Kt=l;else e:for(a=n;Kt!==null;){l=Kt;var h=l.sibling,f=l.return;if(S_(l),l===a){Kt=null;break e}if(h!==null){h.return=f,Kt=h;break e}Kt=f}}}var wS={getCacheForType:function(n){var s=ln(zt),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a}},TS=typeof WeakMap=="function"?WeakMap:Map,nt=0,ht=null,Le=null,Ge=0,rt=0,zn=null,si=!1,uo=!1,zf=!1,Ss=0,bt=0,ii=0,ma=0,qf=0,rr=0,ho=0,Ul=null,In=null,Bf=!1,Hf=0,Fu=1/0,Gu=null,ai=null,nn=0,oi=null,fo=null,mo=0,Ff=0,Gf=null,k_=null,zl=0,Qf=null;function qn(){if((nt&2)!==0&&Ge!==0)return Ge&-Ge;if(Q.T!==null){var n=eo;return n!==0?n:Zf()}return Sr()}function M_(){rr===0&&(rr=(Ge&536870912)===0||Ze?Ui():536870912);var n=nr.current;return n!==null&&(n.flags|=32),rr}function Bn(n,s,a){(n===ht&&(rt===2||rt===9)||n.cancelPendingCommit!==null)&&(go(n,0),li(n,Ge,rr,!1)),kn(n,a),((nt&2)===0||n!==ht)&&(n===ht&&((nt&2)===0&&(ma|=a),bt===4&&li(n,Ge,rr,!1)),Ur(n))}function V_(n,s,a){if((nt&6)!==0)throw Error(i(327));var l=!a&&(s&124)===0&&(s&n.expiredLanes)===0||Tr(n,s),h=l?AS(n,s):Xf(n,s,!0),f=l;do{if(h===0){uo&&!l&&li(n,s,0,!1);break}else{if(a=n.current.alternate,f&&!bS(a)){h=Xf(n,s,!1),f=!1;continue}if(h===2){if(f=s,n.errorRecoveryDisabledLanes&f)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var T=n;h=Ul;var D=T.current.memoizedState.isDehydrated;if(D&&(go(T,E).flags|=256),E=Xf(T,E,!1),E!==2){if(zf&&!D){T.errorRecoveryDisabledLanes|=f,ma|=f,h=4;break e}f=In,In=h,f!==null&&(In===null?In=f:In.push.apply(In,f))}h=E}if(f=!1,h!==2)continue}}if(h===1){go(n,0),li(n,s,0,!0);break}e:{switch(l=n,f=h,f){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:li(l,s,rr,!si);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=Hf+300-pn(),10<h)){if(li(l,s,rr,!si),qs(l,0,!0)!==0)break e;l.timeoutHandle=d0(j_.bind(null,l,a,In,Gu,Bf,s,rr,ma,ho,si,f,2,-0,0),h);break e}j_(l,a,In,Gu,Bf,s,rr,ma,ho,si,f,0,-0,0)}}break}while(!0);Ur(n)}function j_(n,s,a,l,h,f,E,T,D,B,J,ee,H,G){if(n.timeoutHandle=-1,ee=s.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(Kl={stylesheets:null,count:0,unsuspend:sA},N_(s),ee=aA(),ee!==null)){n.cancelPendingCommit=ee(F_.bind(null,n,s,f,a,l,h,E,T,D,J,1,H,G)),li(n,f,E,!B);return}F_(n,s,f,a,l,h,E,T,D)}function bS(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!Vn(f(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function li(n,s,a,l){s&=~qf,s&=~ma,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var h=s;0<h;){var f=31-Ht(h),E=1<<f;l[f]=-1,h&=~E}a!==0&&Kn(n,a,s)}function Qu(){return(nt&6)===0?(ql(0),!1):!0}function Kf(){if(Le!==null){if(rt===0)var n=Le.return;else n=Le,ps=la=null,uf(n),ao=null,Dl=0,n=Le;for(;n!==null;)p_(n.alternate,n),n=n.return;Le=null}}function go(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,qS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Kf(),ht=n,Le=a=fs(n.current,null),Ge=s,rt=0,zn=null,si=!1,uo=Tr(n,s),zf=!1,ho=rr=qf=ma=ii=bt=0,In=Ul=null,Bf=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var h=31-Ht(l),f=1<<h;s|=n[h],l&=~f}return Ss=s,mu(),a}function L_(n,s){Me=null,Q.H=Ou,s===Tl||s===bu?(s=ty(),rt=3):s===Jp?(s=ty(),rt=4):rt=s===n_?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,zn=s,Le===null&&(bt=1,Lu(n,Jn(s,n.current)))}function U_(){var n=Q.H;return Q.H=Ou,n===null?Ou:n}function z_(){var n=Q.A;return Q.A=wS,n}function Yf(){bt=4,si||(Ge&4194048)!==Ge&&nr.current!==null||(uo=!0),(ii&134217727)===0&&(ma&134217727)===0||ht===null||li(ht,Ge,rr,!1)}function Xf(n,s,a){var l=nt;nt|=2;var h=U_(),f=z_();(ht!==n||Ge!==s)&&(Gu=null,go(n,s)),s=!1;var E=bt;e:do try{if(rt!==0&&Le!==null){var T=Le,D=zn;switch(rt){case 8:Kf(),E=6;break e;case 3:case 2:case 9:case 6:nr.current===null&&(s=!0);var B=rt;if(rt=0,zn=null,po(n,T,D,B),a&&uo){E=0;break e}break;default:B=rt,rt=0,zn=null,po(n,T,D,B)}}SS(),E=bt;break}catch(J){L_(n,J)}while(!0);return s&&n.shellSuspendCounter++,ps=la=null,nt=l,Q.H=h,Q.A=f,Le===null&&(ht=null,Ge=0,mu()),E}function SS(){for(;Le!==null;)q_(Le)}function AS(n,s){var a=nt;nt|=2;var l=U_(),h=z_();ht!==n||Ge!==s?(Gu=null,Fu=pn()+500,go(n,s)):uo=Tr(n,s);e:do try{if(rt!==0&&Le!==null){s=Le;var f=zn;t:switch(rt){case 1:rt=0,zn=null,po(n,s,f,1);break;case 2:case 9:if(Zp(f)){rt=0,zn=null,B_(s);break}s=function(){rt!==2&&rt!==9||ht!==n||(rt=7),Ur(n)},f.then(s,s);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Zp(f)?(rt=0,zn=null,B_(s)):(rt=0,zn=null,po(n,s,f,7));break;case 5:var E=null;switch(Le.tag){case 26:E=Le.memoizedState;case 5:case 27:var T=Le;if(!E||b0(E)){rt=0,zn=null;var D=T.sibling;if(D!==null)Le=D;else{var B=T.return;B!==null?(Le=B,Ku(B)):Le=null}break t}}rt=0,zn=null,po(n,s,f,5);break;case 6:rt=0,zn=null,po(n,s,f,6);break;case 8:Kf(),bt=6;break e;default:throw Error(i(462))}}xS();break}catch(J){L_(n,J)}while(!0);return ps=la=null,Q.H=l,Q.A=h,nt=a,Le!==null?0:(ht=null,Ge=0,mu(),bt)}function xS(){for(;Le!==null&&!Ia();)q_(Le)}function q_(n){var s=m_(n.alternate,n,Ss);n.memoizedProps=n.pendingProps,s===null?Ku(n):Le=s}function B_(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=l_(a,s,s.pendingProps,s.type,void 0,Ge);break;case 11:s=l_(a,s,s.pendingProps,s.type.render,s.ref,Ge);break;case 5:uf(s);default:p_(a,s),s=Le=Hp(s,Ss),s=m_(a,s,Ss)}n.memoizedProps=n.pendingProps,s===null?Ku(n):Le=s}function po(n,s,a,l){ps=la=null,uf(s),ao=null,Dl=0;var h=s.return;try{if(gS(n,h,s,a,Ge)){bt=1,Lu(n,Jn(a,n.current)),Le=null;return}}catch(f){if(h!==null)throw Le=h,f;bt=1,Lu(n,Jn(a,n.current)),Le=null;return}s.flags&32768?(Ze||l===1?n=!0:uo||(Ge&536870912)!==0?n=!1:(si=n=!0,(l===2||l===9||l===3||l===6)&&(l=nr.current,l!==null&&l.tag===13&&(l.flags|=16384))),H_(s,n)):Ku(s)}function Ku(n){var s=n;do{if((s.flags&32768)!==0){H_(s,si);return}n=s.return;var a=yS(s.alternate,s,Ss);if(a!==null){Le=a;return}if(s=s.sibling,s!==null){Le=s;return}Le=s=n}while(s!==null);bt===0&&(bt=5)}function H_(n,s){do{var a=_S(n.alternate,n);if(a!==null){a.flags&=32767,Le=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){Le=n;return}Le=n=a}while(n!==null);bt=6,Le=null}function F_(n,s,a,l,h,f,E,T,D){n.cancelPendingCommit=null;do Yu();while(nn!==0);if((nt&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(f=s.lanes|s.childLanes,f|=Lh,zi(n,a,f,E,T,D),n===ht&&(Le=ht=null,Ge=0),fo=s,oi=n,mo=a,Ff=f,Gf=h,k_=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,NS(Zr,function(){return X_(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=ae.p,ae.p=2,E=nt,nt|=4;try{vS(n,s,a)}finally{nt=E,ae.p=h,Q.T=l}}nn=1,G_(),Q_(),K_()}}function G_(){if(nn===1){nn=0;var n=oi,s=fo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=ae.p;ae.p=2;var h=nt;nt|=4;try{R_(s,n);var f=om,E=Op(n.containerInfo),T=f.focusedElem,D=f.selectionRange;if(E!==T&&T&&T.ownerDocument&&Pp(T.ownerDocument.documentElement,T)){if(D!==null&&Oh(T)){var B=D.start,J=D.end;if(J===void 0&&(J=B),"selectionStart"in T)T.selectionStart=B,T.selectionEnd=Math.min(J,T.value.length);else{var ee=T.ownerDocument||document,H=ee&&ee.defaultView||window;if(H.getSelection){var G=H.getSelection(),Ie=T.textContent.length,Te=Math.min(D.start,Ie),ot=D.end===void 0?Te:Math.min(D.end,Ie);!G.extend&&Te>ot&&(E=ot,ot=Te,Te=E);var L=Dp(T,Te),M=Dp(T,ot);if(L&&M&&(G.rangeCount!==1||G.anchorNode!==L.node||G.anchorOffset!==L.offset||G.focusNode!==M.node||G.focusOffset!==M.offset)){var q=ee.createRange();q.setStart(L.node,L.offset),G.removeAllRanges(),Te>ot?(G.addRange(q),G.extend(M.node,M.offset)):(q.setEnd(M.node,M.offset),G.addRange(q))}}}}for(ee=[],G=T;G=G.parentNode;)G.nodeType===1&&ee.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ee.length;T++){var Z=ee[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}ad=!!am,om=am=null}finally{nt=h,ae.p=l,Q.T=a}}n.current=s,nn=2}}function Q_(){if(nn===2){nn=0;var n=oi,s=fo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=ae.p;ae.p=2;var h=nt;nt|=4;try{b_(n,s.alternate,s)}finally{nt=h,ae.p=l,Q.T=a}}nn=3}}function K_(){if(nn===4||nn===3){nn=0,Wo();var n=oi,s=fo,a=mo,l=k_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?nn=5:(nn=0,fo=oi=null,Y_(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(ai=null),Hs(a),s=s.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(ft,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=Q.T,h=ae.p,ae.p=2,Q.T=null;try{for(var f=n.onRecoverableError,E=0;E<l.length;E++){var T=l[E];f(T.value,{componentStack:T.stack})}}finally{Q.T=s,ae.p=h}}(mo&3)!==0&&Yu(),Ur(n),h=n.pendingLanes,(a&4194090)!==0&&(h&42)!==0?n===Qf?zl++:(zl=0,Qf=n):zl=0,ql(0)}}function Y_(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,El(s)))}function Yu(n){return G_(),Q_(),K_(),X_()}function X_(){if(nn!==5)return!1;var n=oi,s=Ff;Ff=0;var a=Hs(mo),l=Q.T,h=ae.p;try{ae.p=32>a?32:a,Q.T=null,a=Gf,Gf=null;var f=oi,E=mo;if(nn=0,fo=oi=null,mo=0,(nt&6)!==0)throw Error(i(331));var T=nt;if(nt|=4,P_(f.current),C_(f,f.current,E,a),nt=T,ql(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(ft,f)}catch{}return!0}finally{ae.p=h,Q.T=l,Y_(n,s)}}function $_(n,s,a){s=Jn(a,s),s=Sf(n.stateNode,s,2),n=Ws(n,s,2),n!==null&&(kn(n,2),Ur(n))}function ut(n,s,a){if(n.tag===3)$_(n,n,a);else for(;s!==null;){if(s.tag===3){$_(s,n,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ai===null||!ai.has(l))){n=Jn(a,n),a=e_(2),l=Ws(s,a,2),l!==null&&(t_(a,l,s,n),kn(l,2),Ur(l));break}}s=s.return}}function $f(n,s,a){var l=n.pingCache;if(l===null){l=n.pingCache=new TS;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(zf=!0,h.add(a),n=RS.bind(null,n,s,a),s.then(n,n))}function RS(n,s,a){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ht===n&&(Ge&a)===a&&(bt===4||bt===3&&(Ge&62914560)===Ge&&300>pn()-Hf?(nt&2)===0&&go(n,0):qf|=a,ho===Ge&&(ho=0)),Ur(n)}function W_(n,s){s===0&&(s=Bs()),n=$a(n,s),n!==null&&(kn(n,s),Ur(n))}function IS(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),W_(n,a)}function CS(n,s){var a=0;switch(n.tag){case 13:var l=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),W_(n,a)}function NS(n,s){return Wr(n,s)}var Xu=null,yo=null,Wf=!1,$u=!1,Jf=!1,ga=0;function Ur(n){n!==yo&&n.next===null&&(yo===null?Xu=yo=n:yo=yo.next=n),$u=!0,Wf||(Wf=!0,PS())}function ql(n,s){if(!Jf&&$u){Jf=!0;do for(var a=!1,l=Xu;l!==null;){if(n!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var E=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-Ht(42|n)+1)-1,f&=h&~(E&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,t0(l,f))}else f=Ge,f=qs(l,l===ht?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Tr(l,f)||(a=!0,t0(l,f));l=l.next}while(a);Jf=!1}}function DS(){J_()}function J_(){$u=Wf=!1;var n=0;ga!==0&&(zS()&&(n=ga),ga=0);for(var s=pn(),a=null,l=Xu;l!==null;){var h=l.next,f=Z_(l,s);f===0?(l.next=null,a===null?Xu=h:a.next=h,h===null&&(yo=a)):(a=l,(n!==0||(f&3)!==0)&&($u=!0)),l=h}ql(n)}function Z_(n,s){for(var a=n.suspendedLanes,l=n.pingedLanes,h=n.expirationTimes,f=n.pendingLanes&-62914561;0<f;){var E=31-Ht(f),T=1<<E,D=h[E];D===-1?((T&a)===0||(T&l)!==0)&&(h[E]=Li(T,s)):D<=s&&(n.expiredLanes|=T),f&=~T}if(s=ht,a=Ge,a=qs(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===s&&(rt===2||rt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&wr(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Tr(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(l!==null&&wr(l),Hs(a)){case 2:case 8:a=Ls;break;case 32:a=Zr;break;case 268435456:a=Us;break;default:a=Zr}return l=e0.bind(null,n),a=Wr(a,l),n.callbackPriority=s,n.callbackNode=a,s}return l!==null&&l!==null&&wr(l),n.callbackPriority=2,n.callbackNode=null,2}function e0(n,s){if(nn!==0&&nn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Yu()&&n.callbackNode!==a)return null;var l=Ge;return l=qs(n,n===ht?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(V_(n,l,s),Z_(n,pn()),n.callbackNode!=null&&n.callbackNode===a?e0.bind(null,n):null)}function t0(n,s){if(Yu())return null;V_(n,s,!0)}function PS(){BS(function(){(nt&6)!==0?Wr(Jr,DS):J_()})}function Zf(){return ga===0&&(ga=Ui()),ga}function n0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:La(""+n)}function r0(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function OS(n,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var f=n0((h[wt]||null).action),E=l.submitter;E&&(s=(s=E[wt]||null)?n0(s.formAction):E.getAttribute("formAction"),s!==null&&(f=s,E=null));var T=new Ua("action","action",null,l,h);n.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ga!==0){var D=E?r0(h,E):new FormData(h);vf(a,{pending:!0,data:D,method:h.method,action:f},null,D)}}else typeof f=="function"&&(T.preventDefault(),D=E?r0(h,E):new FormData(h),vf(a,{pending:!0,data:D,method:h.method,action:f},f,D))},currentTarget:h}]})}}for(var em=0;em<jh.length;em++){var tm=jh[em],kS=tm.toLowerCase(),MS=tm[0].toUpperCase()+tm.slice(1);fr(kS,"on"+MS)}fr(Vp,"onAnimationEnd"),fr(jp,"onAnimationIteration"),fr(Lp,"onAnimationStart"),fr("dblclick","onDoubleClick"),fr("focusin","onFocus"),fr("focusout","onBlur"),fr(Jb,"onTransitionRun"),fr(Zb,"onTransitionStart"),fr(eS,"onTransitionCancel"),fr(Up,"onTransitionEnd"),ss("onMouseEnter",["mouseout","mouseover"]),ss("onMouseLeave",["mouseout","mouseover"]),ss("onPointerEnter",["pointerout","pointerover"]),ss("onPointerLeave",["pointerout","pointerover"]),dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),dr("onBeforeInput",["compositionend","keypress","textInput","paste"]),dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bl));function s0(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],h=l.event;l=l.listeners;e:{var f=void 0;if(s)for(var E=l.length-1;0<=E;E--){var T=l[E],D=T.instance,B=T.currentTarget;if(T=T.listener,D!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=B;try{f(h)}catch(J){ju(J)}h.currentTarget=null,f=D}else for(E=0;E<l.length;E++){if(T=l[E],D=T.instance,B=T.currentTarget,T=T.listener,D!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=B;try{f(h)}catch(J){ju(J)}h.currentTarget=null,f=D}}}}function Ue(n,s){var a=s[ue];a===void 0&&(a=s[ue]=new Set);var l=n+"__bubble";a.has(l)||(i0(s,n,2,!1),a.add(l))}function nm(n,s,a){var l=0;s&&(l|=4),i0(a,n,l,s)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function rm(n){if(!n[Wu]){n[Wu]=!0,el.forEach(function(a){a!=="selectionchange"&&(VS.has(a)||nm(a,!1,n),nm(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Wu]||(s[Wu]=!0,nm("selectionchange",!1,s))}}function i0(n,s,a,l){switch(C0(s)){case 2:var h=cA;break;case 8:h=uA;break;default:h=ym}a=h.bind(null,s,a,n),h=void 0,!$n||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?n.addEventListener(s,a,{capture:!0,passive:h}):n.addEventListener(s,a,!0):h!==void 0?n.addEventListener(s,a,{passive:h}):n.addEventListener(s,a,!1)}function sm(n,s,a,l,h){var f=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var T=l.stateNode.containerInfo;if(T===h)break;if(E===4)for(E=l.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;T!==null;){if(E=rs(T),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){l=f=E;continue e}T=T.parentNode}}l=l.return}Zc(function(){var B=f,J=Xn(a),ee=[];e:{var H=zp.get(n);if(H!==void 0){var G=Ua,Ie=n;switch(n){case"keypress":if(Nr(a)===0)break e;case"keydown":case"keyup":G=Ga;break;case"focusin":Ie="focus",G=Ba;break;case"focusout":Ie="blur",G=Ba;break;case"beforeblur":case"afterblur":G=Ba;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Wn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Ch;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=ou;break;case Vp:case jp:case Lp:G=Ha;break;case Up:G=cu;break;case"scroll":case"scrollend":G=eu;break;case"wheel":G=Qa;break;case"copy":case"cut":case"paste":G=Fa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=hl;break;case"toggle":case"beforetoggle":G=du}var Te=(s&4)!==0,ot=!Te&&(n==="scroll"||n==="scrollend"),L=Te?H!==null?H+"Capture":null:H;Te=[];for(var M=B,q;M!==null;){var Z=M;if(q=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||q===null||L===null||(Z=Yi(M,L),Z!=null&&Te.push(Hl(M,Z,q))),ot)break;M=M.return}0<Te.length&&(H=new G(H,Ie,null,a,J),ee.push({event:H,listeners:Te}))}}if((s&7)===0){e:{if(H=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",H&&a!==os&&(Ie=a.relatedTarget||a.fromElement)&&(rs(Ie)||Ie[bn]))break e;if((G||H)&&(H=J.window===J?J:(H=J.ownerDocument)?H.defaultView||H.parentWindow:window,G?(Ie=a.relatedTarget||a.toElement,G=B,Ie=Ie?rs(Ie):null,Ie!==null&&(ot=c(Ie),Te=Ie.tag,Ie!==ot||Te!==5&&Te!==27&&Te!==6)&&(Ie=null)):(G=null,Ie=B),G!==Ie)){if(Te=Wn,Z="onMouseLeave",L="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(Te=hl,Z="onPointerLeave",L="onPointerEnter",M="pointer"),ot=G==null?H:xr(G),q=Ie==null?H:xr(Ie),H=new Te(Z,M+"leave",G,a,J),H.target=ot,H.relatedTarget=q,Z=null,rs(J)===B&&(Te=new Te(L,M+"enter",Ie,a,J),Te.target=q,Te.relatedTarget=ot,Z=Te),ot=Z,G&&Ie)t:{for(Te=G,L=Ie,M=0,q=Te;q;q=_o(q))M++;for(q=0,Z=L;Z;Z=_o(Z))q++;for(;0<M-q;)Te=_o(Te),M--;for(;0<q-M;)L=_o(L),q--;for(;M--;){if(Te===L||L!==null&&Te===L.alternate)break t;Te=_o(Te),L=_o(L)}Te=null}else Te=null;G!==null&&a0(ee,H,G,Te,!1),Ie!==null&&ot!==null&&a0(ee,ot,Ie,Te,!0)}}e:{if(H=B?xr(B):window,G=H.nodeName&&H.nodeName.toLowerCase(),G==="select"||G==="input"&&H.type==="file")var pe=Ap;else if(Ut(H))if(xp)pe=Xb;else{pe=Kb;var Ve=Qb}else G=H.nodeName,!G||G.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?B&&il(B.elementType)&&(pe=Ap):pe=Yb;if(pe&&(pe=pe(n,B))){hs(ee,pe,a,J);break e}Ve&&Ve(n,H,B),n==="focusout"&&B&&H.type==="number"&&B.memoizedProps.value!=null&&Qs(H,"number",H.value)}switch(Ve=B?xr(B):window,n){case"focusin":(Ut(Ve)||Ve.contentEditable==="true")&&(Ka=Ve,kh=B,gl=null);break;case"focusout":gl=kh=Ka=null;break;case"mousedown":Mh=!0;break;case"contextmenu":case"mouseup":case"dragend":Mh=!1,kp(ee,a,J);break;case"selectionchange":if(Wb)break;case"keydown":case"keyup":kp(ee,a,J)}var _e;if(Or)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else He?Y(n,a)&&(Se="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(v&&a.locale!=="ko"&&(He||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&He&&(_e=ol()):(Cr=J,Ks="value"in Cr?Cr.value:Cr.textContent,He=!0)),Ve=Ju(B,Se),0<Ve.length&&(Se=new ul(Se,n,null,a,J),ee.push({event:Se,listeners:Ve}),_e?Se.data=_e:(_e=ce(a),_e!==null&&(Se.data=_e)))),(_e=y?Lt(n,a):Fe(n,a))&&(Se=Ju(B,"onBeforeInput"),0<Se.length&&(Ve=new ul("onBeforeInput","beforeinput",null,a,J),ee.push({event:Ve,listeners:Se}),Ve.data=_e)),OS(ee,n,B,a,J)}s0(ee,s)})}function Hl(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Ju(n,s){for(var a=s+"Capture",l=[];n!==null;){var h=n,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Yi(n,a),h!=null&&l.unshift(Hl(n,h,f)),h=Yi(n,s),h!=null&&l.push(Hl(n,h,f))),n.tag===3)return l;n=n.return}return[]}function _o(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function a0(n,s,a,l,h){for(var f=s._reactName,E=[];a!==null&&a!==l;){var T=a,D=T.alternate,B=T.stateNode;if(T=T.tag,D!==null&&D===l)break;T!==5&&T!==26&&T!==27||B===null||(D=B,h?(B=Yi(a,f),B!=null&&E.unshift(Hl(a,B,D))):h||(B=Yi(a,f),B!=null&&E.push(Hl(a,B,D)))),a=a.return}E.length!==0&&n.push({event:s,listeners:E})}var jS=/\r\n?/g,LS=/\u0000|\uFFFD/g;function o0(n){return(typeof n=="string"?n:""+n).replace(jS,`
`).replace(LS,"")}function l0(n,s){return s=o0(s),o0(n)===s}function Zu(){}function at(n,s,a,l,h,f){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Yn(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Yn(n,""+l);break;case"className":Rr(n,"class",l);break;case"tabIndex":Rr(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Rr(n,a,l);break;case"style":sl(n,l,f);break;case"data":if(s!=="object"){Rr(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=La(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(s!=="input"&&at(n,s,"name",h.name,h,null),at(n,s,"formEncType",h.formEncType,h,null),at(n,s,"formMethod",h.formMethod,h,null),at(n,s,"formTarget",h.formTarget,h,null)):(at(n,s,"encType",h.encType,h,null),at(n,s,"method",h.method,h,null),at(n,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=La(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Zu);break;case"onScroll":l!=null&&Ue("scroll",n);break;case"onScrollEnd":l!=null&&Ue("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=La(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ue("beforetoggle",n),Ue("toggle",n),Gs(n,"popover",l);break;case"xlinkActuate":Zt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Zt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Zt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Zt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Zt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Zt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Zt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Zt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Zt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Gs(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Rh.get(a)||a,Gs(n,a,l))}}function im(n,s,a,l,h,f){switch(a){case"style":sl(n,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Yn(n,l):(typeof l=="number"||typeof l=="bigint")&&Yn(n,""+l);break;case"onScroll":l!=null&&Ue("scroll",n);break;case"onScrollEnd":l!=null&&Ue("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),f=n[wt]||null,f=f!=null?f[a]:null,typeof f=="function"&&n.removeEventListener(s,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,l,h);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Gs(n,a,l)}}}function rn(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",n),Ue("load",n);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var E=a[f];if(E!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:at(n,s,f,E,a,null)}}h&&at(n,s,"srcSet",a.srcSet,a,null),l&&at(n,s,"src",a.src,a,null);return;case"input":Ue("invalid",n);var T=f=E=h=null,D=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":h=J;break;case"type":E=J;break;case"checked":D=J;break;case"defaultChecked":B=J;break;case"value":f=J;break;case"defaultValue":T=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:at(n,s,l,J,a,null)}}Gi(n,f,T,D,B,E,h,!1),ja(n);return;case"select":Ue("invalid",n),l=E=f=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":E=T;break;case"multiple":l=T;default:at(n,s,h,T,a,null)}s=f,a=E,n.multiple=!!l,s!=null?as(n,!!l,s,!1):a!=null&&as(n,!!l,a,!0);return;case"textarea":Ue("invalid",n),f=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(T=a[E],T!=null))switch(E){case"value":l=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:at(n,s,E,T,a,null)}Qi(n,l,h,f),ja(n);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:at(n,s,D,l,a,null)}return;case"dialog":Ue("beforetoggle",n),Ue("toggle",n),Ue("cancel",n),Ue("close",n);break;case"iframe":case"object":Ue("load",n);break;case"video":case"audio":for(l=0;l<Bl.length;l++)Ue(Bl[l],n);break;case"image":Ue("error",n),Ue("load",n);break;case"details":Ue("toggle",n);break;case"embed":case"source":case"link":Ue("error",n),Ue("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:at(n,s,B,l,a,null)}return;default:if(il(s)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&im(n,s,J,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&at(n,s,T,l,a,null))}function US(n,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,E=null,T=null,D=null,B=null,J=null;for(G in a){var ee=a[G];if(a.hasOwnProperty(G)&&ee!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":D=ee;default:l.hasOwnProperty(G)||at(n,s,G,null,l,ee)}}for(var H in l){var G=l[H];if(ee=a[H],l.hasOwnProperty(H)&&(G!=null||ee!=null))switch(H){case"type":f=G;break;case"name":h=G;break;case"checked":B=G;break;case"defaultChecked":J=G;break;case"value":E=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:G!==ee&&at(n,s,H,G,l,ee)}}Mn(n,E,T,D,B,J,f,h);return;case"select":G=E=T=H=null;for(f in a)if(D=a[f],a.hasOwnProperty(f)&&D!=null)switch(f){case"value":break;case"multiple":G=D;default:l.hasOwnProperty(f)||at(n,s,f,null,l,D)}for(h in l)if(f=l[h],D=a[h],l.hasOwnProperty(h)&&(f!=null||D!=null))switch(h){case"value":H=f;break;case"defaultValue":T=f;break;case"multiple":E=f;default:f!==D&&at(n,s,h,f,l,D)}s=T,a=E,l=G,H!=null?as(n,!!a,H,!1):!!l!=!!a&&(s!=null?as(n,!!a,s,!0):as(n,!!a,a?[]:"",!1));return;case"textarea":G=H=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:at(n,s,T,null,l,h)}for(E in l)if(h=l[E],f=a[E],l.hasOwnProperty(E)&&(h!=null||f!=null))switch(E){case"value":H=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==f&&at(n,s,E,h,l,f)}st(n,H,G);return;case"option":for(var Ie in a)if(H=a[Ie],a.hasOwnProperty(Ie)&&H!=null&&!l.hasOwnProperty(Ie))switch(Ie){case"selected":n.selected=!1;break;default:at(n,s,Ie,null,l,H)}for(D in l)if(H=l[D],G=a[D],l.hasOwnProperty(D)&&H!==G&&(H!=null||G!=null))switch(D){case"selected":n.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:at(n,s,D,H,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)H=a[Te],a.hasOwnProperty(Te)&&H!=null&&!l.hasOwnProperty(Te)&&at(n,s,Te,null,l,H);for(B in l)if(H=l[B],G=a[B],l.hasOwnProperty(B)&&H!==G&&(H!=null||G!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,s));break;default:at(n,s,B,H,l,G)}return;default:if(il(s)){for(var ot in a)H=a[ot],a.hasOwnProperty(ot)&&H!==void 0&&!l.hasOwnProperty(ot)&&im(n,s,ot,void 0,l,H);for(J in l)H=l[J],G=a[J],!l.hasOwnProperty(J)||H===G||H===void 0&&G===void 0||im(n,s,J,H,l,G);return}}for(var L in a)H=a[L],a.hasOwnProperty(L)&&H!=null&&!l.hasOwnProperty(L)&&at(n,s,L,null,l,H);for(ee in l)H=l[ee],G=a[ee],!l.hasOwnProperty(ee)||H===G||H==null&&G==null||at(n,s,ee,H,l,G)}var am=null,om=null;function ed(n){return n.nodeType===9?n:n.ownerDocument}function c0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function u0(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function lm(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var cm=null;function zS(){var n=window.event;return n&&n.type==="popstate"?n===cm?!1:(cm=n,!0):(cm=null,!1)}var d0=typeof setTimeout=="function"?setTimeout:void 0,qS=typeof clearTimeout=="function"?clearTimeout:void 0,h0=typeof Promise=="function"?Promise:void 0,BS=typeof queueMicrotask=="function"?queueMicrotask:typeof h0<"u"?function(n){return h0.resolve(null).then(n).catch(HS)}:d0;function HS(n){setTimeout(function(){throw n})}function ci(n){return n==="head"}function f0(n,s){var a=s,l=0,h=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var E=n.ownerDocument;if(a&1&&Fl(E.documentElement),a&2&&Fl(E.body),a&4)for(a=E.head,Fl(a),E=a.firstChild;E;){var T=E.nextSibling,D=E.nodeName;E[Sn]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=T}}if(h===0){n.removeChild(f),Jl(s);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Jl(s)}function um(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":um(a),An(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function FS(n,s,a,l){for(;n.nodeType===1;){var h=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Sn])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(f=n.getAttribute("rel"),f==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(f!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(f=n.getAttribute("src"),(f!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===f)return n}else return n;if(n=gr(n.nextSibling),n===null)break}return null}function GS(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=gr(n.nextSibling),n===null))return null;return n}function dm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function QS(n,s){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function gr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var hm=null;function m0(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}function g0(n,s,a){switch(s=ed(a),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Fl(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);An(n)}var sr=new Map,p0=new Set;function td(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var As=ae.d;ae.d={f:KS,r:YS,D:XS,C:$S,L:WS,m:JS,X:eA,S:ZS,M:tA};function KS(){var n=As.f(),s=Qu();return n||s}function YS(n){var s=Ar(n);s!==null&&s.tag===5&&s.type==="form"?Vy(s):As.r(n)}var vo=typeof document>"u"?null:document;function y0(n,s,a){var l=vo;if(l&&typeof s=="string"&&s){var h=Dt(s);h='link[rel="'+n+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),p0.has(h)||(p0.add(h),n={rel:n,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),rn(s,"link",n),xt(s),l.head.appendChild(s)))}}function XS(n){As.D(n),y0("dns-prefetch",n,null)}function $S(n,s){As.C(n,s),y0("preconnect",n,s)}function WS(n,s,a){As.L(n,s,a);var l=vo;if(l&&n&&s){var h='link[rel="preload"][as="'+Dt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Dt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Dt(a.imageSizes)+'"]')):h+='[href="'+Dt(n)+'"]';var f=h;switch(s){case"style":f=Eo(n);break;case"script":f=wo(n)}sr.has(f)||(n=w({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),sr.set(f,n),l.querySelector(h)!==null||s==="style"&&l.querySelector(Gl(f))||s==="script"&&l.querySelector(Ql(f))||(s=l.createElement("link"),rn(s,"link",n),xt(s),l.head.appendChild(s)))}}function JS(n,s){As.m(n,s);var a=vo;if(a&&n){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Dt(l)+'"][href="'+Dt(n)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=wo(n)}if(!sr.has(f)&&(n=w({rel:"modulepreload",href:n},s),sr.set(f,n),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ql(f)))return}l=a.createElement("link"),rn(l,"link",n),xt(l),a.head.appendChild(l)}}}function ZS(n,s,a){As.S(n,s,a);var l=vo;if(l&&n){var h=_n(l).hoistableStyles,f=Eo(n);s=s||"default";var E=h.get(f);if(!E){var T={loading:0,preload:null};if(E=l.querySelector(Gl(f)))T.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":s},a),(a=sr.get(f))&&fm(n,a);var D=E=l.createElement("link");xt(D),rn(D,"link",n),D._p=new Promise(function(B,J){D.onload=B,D.onerror=J}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,nd(E,s,l)}E={type:"stylesheet",instance:E,count:1,state:T},h.set(f,E)}}}function eA(n,s){As.X(n,s);var a=vo;if(a&&n){var l=_n(a).hoistableScripts,h=wo(n),f=l.get(h);f||(f=a.querySelector(Ql(h)),f||(n=w({src:n,async:!0},s),(s=sr.get(h))&&mm(n,s),f=a.createElement("script"),xt(f),rn(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function tA(n,s){As.M(n,s);var a=vo;if(a&&n){var l=_n(a).hoistableScripts,h=wo(n),f=l.get(h);f||(f=a.querySelector(Ql(h)),f||(n=w({src:n,async:!0,type:"module"},s),(s=sr.get(h))&&mm(n,s),f=a.createElement("script"),xt(f),rn(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function _0(n,s,a,l){var h=(h=Ae.current)?td(h):null;if(!h)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Eo(a.href),a=_n(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Eo(a.href);var f=_n(h).hoistableStyles,E=f.get(n);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(n,E),(f=h.querySelector(Gl(n)))&&!f._p&&(E.instance=f,E.state.loading=5),sr.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},sr.set(n,a),f||nA(h,n,a,E.state))),s&&l===null)throw Error(i(528,""));return E}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=wo(a),a=_n(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Eo(n){return'href="'+Dt(n)+'"'}function Gl(n){return'link[rel="stylesheet"]['+n+"]"}function v0(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function nA(n,s,a,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),rn(s,"link",a),xt(s),n.head.appendChild(s))}function wo(n){return'[src="'+Dt(n)+'"]'}function Ql(n){return"script[async]"+n}function E0(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+Dt(a.href)+'"]');if(l)return s.instance=l,xt(l),l;var h=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),xt(l),rn(l,"style",h),nd(l,a.precedence,n),s.instance=l;case"stylesheet":h=Eo(a.href);var f=n.querySelector(Gl(h));if(f)return s.state.loading|=4,s.instance=f,xt(f),f;l=v0(a),(h=sr.get(h))&&fm(l,h),f=(n.ownerDocument||n).createElement("link"),xt(f);var E=f;return E._p=new Promise(function(T,D){E.onload=T,E.onerror=D}),rn(f,"link",l),s.state.loading|=4,nd(f,a.precedence,n),s.instance=f;case"script":return f=wo(a.src),(h=n.querySelector(Ql(f)))?(s.instance=h,xt(h),h):(l=a,(h=sr.get(f))&&(l=w({},a),mm(l,h)),n=n.ownerDocument||n,h=n.createElement("script"),xt(h),rn(h,"link",l),n.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,nd(l,a.precedence,n));return s.instance}function nd(n,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,E=0;E<l.length;E++){var T=l[E];if(T.dataset.precedence===s)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(n,f.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function fm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function mm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var rd=null;function w0(n,s,a){if(rd===null){var l=new Map,h=rd=new Map;h.set(a,l)}else h=rd,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),h=0;h<a.length;h++){var f=a[h];if(!(f[Sn]||f[At]||n==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(s)||"";E=n+E;var T=l.get(E);T?T.push(f):l.set(E,[f])}}return l}function T0(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function rA(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function b0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Kl=null;function sA(){}function iA(n,s,a){if(Kl===null)throw Error(i(475));var l=Kl;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=Eo(a.href),f=n.querySelector(Gl(h));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=sd.bind(l),n.then(l,l)),s.state.loading|=4,s.instance=f,xt(f);return}f=n.ownerDocument||n,a=v0(a),(h=sr.get(h))&&fm(a,h),f=f.createElement("link"),xt(f);var E=f;E._p=new Promise(function(T,D){E.onload=T,E.onerror=D}),rn(f,"link",a),s.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=sd.bind(l),n.addEventListener("load",s),n.addEventListener("error",s))}}function aA(){if(Kl===null)throw Error(i(475));var n=Kl;return n.stylesheets&&n.count===0&&gm(n,n.stylesheets),0<n.count?function(s){var a=setTimeout(function(){if(n.stylesheets&&gm(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(a)}}:null}function sd(){if(this.count--,this.count===0){if(this.stylesheets)gm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var id=null;function gm(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,id=new Map,s.forEach(oA,n),id=null,sd.call(n))}function oA(n,s){if(!(s.state.loading&4)){var a=id.get(n);if(a)var l=a.get(null);else{a=new Map,id.set(n,a);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var E=h[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=s.instance,E=h.getAttribute("data-precedence"),f=a.get(E)||l,f===l&&a.set(null,h),a.set(E,h),this.count++,l=sd.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),s.state.loading|=4}}var Yl={$$typeof:se,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function lA(n,s,a,l,h,f,E,T){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ur(0),this.hiddenUpdates=ur(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function S0(n,s,a,l,h,f,E,T,D,B,J,ee){return n=new lA(n,s,a,E,T,D,B,ee),s=1,f===!0&&(s|=24),f=jn(3,null,null,s),n.current=f,f.stateNode=n,s=Xh(),s.refCount++,n.pooledCache=s,s.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:s},Zh(f),n}function A0(n){return n?(n=Wa,n):Wa}function x0(n,s,a,l,h,f){h=A0(h),l.context===null?l.context=h:l.pendingContext=h,l=$s(s),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Ws(n,l,s),a!==null&&(Bn(a,n,s),Sl(a,n,s))}function R0(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function pm(n,s){R0(n,s),(n=n.alternate)&&R0(n,s)}function I0(n){if(n.tag===13){var s=$a(n,67108864);s!==null&&Bn(s,n,67108864),pm(n,67108864)}}var ad=!0;function cA(n,s,a,l){var h=Q.T;Q.T=null;var f=ae.p;try{ae.p=2,ym(n,s,a,l)}finally{ae.p=f,Q.T=h}}function uA(n,s,a,l){var h=Q.T;Q.T=null;var f=ae.p;try{ae.p=8,ym(n,s,a,l)}finally{ae.p=f,Q.T=h}}function ym(n,s,a,l){if(ad){var h=_m(l);if(h===null)sm(n,s,l,od,a),N0(n,l);else if(hA(h,n,s,a,l))l.stopPropagation();else if(N0(n,l),s&4&&-1<dA.indexOf(n)){for(;h!==null;){var f=Ar(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=On(f.pendingLanes);if(E!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var D=1<<31-Ht(E);T.entanglements[1]|=D,E&=~D}Ur(f),(nt&6)===0&&(Fu=pn()+500,ql(0))}}break;case 13:T=$a(f,2),T!==null&&Bn(T,f,2),Qu(),pm(f,2)}if(f=_m(l),f===null&&sm(n,s,l,od,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else sm(n,s,l,null,a)}}function _m(n){return n=Xn(n),vm(n)}var od=null;function vm(n){if(od=null,n=rs(n),n!==null){var s=c(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=d(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return od=n,null}function C0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ca()){case Jr:return 2;case Ls:return 8;case Zr:case Jo:return 32;case Us:return 268435456;default:return 32}default:return 32}}var Em=!1,ui=null,di=null,hi=null,Xl=new Map,$l=new Map,fi=[],dA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function N0(n,s){switch(n){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":di=null;break;case"mouseover":case"mouseout":hi=null;break;case"pointerover":case"pointerout":Xl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(s.pointerId)}}function Wl(n,s,a,l,h,f){return n===null||n.nativeEvent!==f?(n={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},s!==null&&(s=Ar(s),s!==null&&I0(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),n)}function hA(n,s,a,l,h){switch(s){case"focusin":return ui=Wl(ui,n,s,a,l,h),!0;case"dragenter":return di=Wl(di,n,s,a,l,h),!0;case"mouseover":return hi=Wl(hi,n,s,a,l,h),!0;case"pointerover":var f=h.pointerId;return Xl.set(f,Wl(Xl.get(f)||null,n,s,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,$l.set(f,Wl($l.get(f)||null,n,s,a,l,h)),!0}return!1}function D0(n){var s=rs(n.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=d(a),s!==null){n.blockedOn=s,Pa(n.priority,function(){if(a.tag===13){var l=qn();l=br(l);var h=$a(a,l);h!==null&&Bn(h,a,l),pm(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ld(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=_m(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);os=l,a.target.dispatchEvent(l),os=null}else return s=Ar(a),s!==null&&I0(s),n.blockedOn=a,!1;s.shift()}return!0}function P0(n,s,a){ld(n)&&a.delete(s)}function fA(){Em=!1,ui!==null&&ld(ui)&&(ui=null),di!==null&&ld(di)&&(di=null),hi!==null&&ld(hi)&&(hi=null),Xl.forEach(P0),$l.forEach(P0)}function cd(n,s){n.blockedOn===s&&(n.blockedOn=null,Em||(Em=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,fA)))}var ud=null;function O0(n){ud!==n&&(ud=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ud===n&&(ud=null);for(var s=0;s<n.length;s+=3){var a=n[s],l=n[s+1],h=n[s+2];if(typeof l!="function"){if(vm(l||a)===null)continue;break}var f=Ar(a);f!==null&&(n.splice(s,3),s-=3,vf(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Jl(n){function s(D){return cd(D,n)}ui!==null&&cd(ui,n),di!==null&&cd(di,n),hi!==null&&cd(hi,n),Xl.forEach(s),$l.forEach(s);for(var a=0;a<fi.length;a++){var l=fi[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<fi.length&&(a=fi[0],a.blockedOn===null);)D0(a),a.blockedOn===null&&fi.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],E=h[wt]||null;if(typeof f=="function")E||O0(a);else if(E){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,E=f[wt]||null)T=E.formAction;else if(vm(h)!==null)continue}else T=E.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),O0(a)}}}function wm(n){this._internalRoot=n}dd.prototype.render=wm.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,l=qn();x0(a,l,n,s,null,null)},dd.prototype.unmount=wm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;x0(n.current,2,null,n,null,null),Qu(),s[bn]=null}};function dd(n){this._internalRoot=n}dd.prototype.unstable_scheduleHydration=function(n){if(n){var s=Sr();n={blockedOn:null,target:n,priority:s};for(var a=0;a<fi.length&&s!==0&&s<fi[a].priority;a++);fi.splice(a,0,n),a===0&&D0(n)}};var k0=e.version;if(k0!=="19.1.1")throw Error(i(527,k0,"19.1.1"));ae.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(s),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var mA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{ft=hd.inject(mA),Je=hd}catch{}}return ec.createRoot=function(n,s){if(!o(n))throw Error(i(299));var a=!1,l="",h=$y,f=Wy,E=Jy,T=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(T=s.unstable_transitionCallbacks)),s=S0(n,1,!1,null,null,a,l,h,f,E,T,null),n[bn]=s.current,rm(n),new wm(s)},ec.hydrateRoot=function(n,s,a){if(!o(n))throw Error(i(299));var l=!1,h="",f=$y,E=Wy,T=Jy,D=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),s=S0(n,1,!0,s,a??null,l,h,f,E,T,D,B),s.context=A0(null),a=s.current,l=qn(),l=br(l),h=$s(l),h.callback=null,Ws(a,h,l),a=l,s.current.lanes=a,kn(s,a),Ur(s),n[bn]=s.current,rm(n),new dd(s)},ec.version="19.1.1",ec}var F0;function AA(){if(F0)return Sm.exports;F0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Sm.exports=SA(),Sm.exports}var xA=AA();const RA=jE(xA);var je=(r=>(r[r.Welcome=0]="Welcome",r[r.Setup=1]="Setup",r[r.Login=2]="Login",r[r.Profile=3]="Profile",r[r.Shop=4]="Shop",r[r.PackSelection=5]="PackSelection",r[r.RoundConfiguration=6]="RoundConfiguration",r[r.Game=7]="Game",r[r.RoundEnd=8]="RoundEnd",r[r.GameEnd=9]="GameEnd",r))(je||{});const IA={CHANGES_BEFORE_AD:3};var ir=(r=>(r.Pack="pack",r.Question="question",r.Dare="dare",r))(ir||{}),cc=(r=>(r.Pending="pending",r.Discarded="discarded",r.Possible="possible",r.Accepted="accepted",r.Rejected="rejected",r))(cc||{});const gt={MAX_SUGGESTIONS_PER_DAY:5,MAX_SUGGESTIONS_PER_WEEK:15,MIN_TITLE_LENGTH:5,MAX_TITLE_LENGTH:100,MIN_CONTENT_LENGTH:10,MAX_CONTENT_LENGTH:500};var Hn=(r=>(r.PostGame="post_game",r.PostRound="post_round",r.QuestionChange="question_change",r.Banner="banner",r.Rewarded="rewarded",r.Interstitial="interstitial",r))(Hn||{});const Pn=({children:r,className:e})=>p.jsx("div",{className:`bg-gray-800 border border-purple-500/30 rounded-2xl shadow-lg shadow-purple-900/20 p-6 sm:p-8 ${e}`,children:r}),CA=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Im=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),NA=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),LE=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),Io=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),DA=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),UE=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),PA=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),OA=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),kA=({players:r,setPlayers:e})=>{const[t,i]=X.useState(""),o=d=>{d.preventDefault(),t.trim()&&!r.includes(t.trim())&&(e([...r,t.trim()]),i(""))},c=d=>{e(r.filter((m,g)=>g!==d))};return p.jsxs(Pn,{children:[p.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-pink-400",children:"Añadir Jugadores"}),p.jsxs("form",{onSubmit:o,className:"flex flex-col gap-2 mb-4",children:[p.jsx("input",{type:"text",value:t,onChange:d=>i(d.target.value),placeholder:"Nombre del jugador",className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-purple-500"}),p.jsx("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md transition text-base",children:"Añadir"})]}),p.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:r.map((d,m)=>p.jsxs("li",{className:"flex justify-between items-center bg-gray-700/50 p-2 rounded-md animate-fade-in",children:[p.jsx("span",{className:"font-medium",children:d}),p.jsx("button",{onClick:()=>c(m),className:"text-gray-400 hover:text-red-500 transition",children:p.jsx(CA,{className:"w-5 h-5"})})]},m))})]})},be=({children:r,variant:e="primary",className:t,...i})=>{const o="px-6 py-3 font-bold rounded-lg text-white transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 disabled:opacity-50 disabled:cursor-not-allowed",c={primary:"bg-purple-600 hover:bg-purple-700 focus:ring-purple-500/50 shadow-lg shadow-purple-600/30",secondary:"bg-pink-500 hover:bg-pink-600 focus:ring-pink-500/50 shadow-lg shadow-pink-500/30",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500/50"};return p.jsx("button",{className:`${o} ${c[e]} ${t}`,...i,children:r})},MA=()=>{};var G0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},VA=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[t++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[t++],d=r[t++],m=r[t++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const c=r[t++],d=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},qE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const c=r[o],d=o+1<r.length,m=d?r[o+1]:0,g=o+2<r.length,_=g?r[o+2]:0,w=c>>2,b=(c&3)<<4|m>>4;let A=(m&15)<<2|_>>6,I=_&63;g||(I=64,d||(A=64)),i.push(t[w],t[b],t[A],t[I])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(zE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):VA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const c=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const _=o<r.length?t[r.charAt(o)]:64;++o;const b=o<r.length?t[r.charAt(o)]:64;if(++o,c==null||m==null||_==null||b==null)throw new jA;const A=c<<2|m>>4;if(i.push(A),_!==64){const I=m<<4&240|_>>2;if(i.push(I),b!==64){const j=_<<6&192|b;i.push(j)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class jA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LA=function(r){const e=zE(r);return qE.encodeByteArray(e,!0)},Pd=function(r){return LA(r).replace(/\./g,"")},BE=function(r){try{return qE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=()=>UA().__FIREBASE_DEFAULTS__,qA=()=>{if(typeof process>"u"||typeof G0>"u")return;const r=G0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},BA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&BE(r[1]);return e&&JSON.parse(e)},nh=()=>{try{return MA()||zA()||qA()||BA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},HE=r=>{var e,t;return(t=(e=nh())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},HA=r=>{const e=HE(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},FE=()=>{var r;return(r=nh())==null?void 0:r.config},GE=r=>{var e;return(e=nh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function QE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Pd(JSON.stringify(t)),Pd(JSON.stringify(d)),""].join(".")}const uc={};function QA(){const r={prod:[],emulator:[]};for(const e of Object.keys(uc))uc[e]?r.emulator.push(e):r.prod.push(e);return r}function KA(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Q0=!1;function KE(r,e){if(typeof window>"u"||typeof document>"u"||!Bo(window.location.host)||uc[r]===e||uc[r]||Q0)return;uc[r]=e;function t(A){return`__firebase__banner__${A}`}const i="__firebase__banner",c=QA().prod.length>0;function d(){const A=document.getElementById(i);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,I){A.setAttribute("width","24"),A.setAttribute("id",I),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function _(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Q0=!0,d()},A}function w(A,I){A.setAttribute("id",I),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function b(){const A=KA(i),I=t("text"),j=document.getElementById(I)||document.createElement("span"),F=t("learnmore"),z=document.getElementById(F)||document.createElement("a"),re=t("preprendIcon"),ie=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const se=A.element;m(se),w(z,F);const fe=_();g(ie,re),se.append(ie,j,z,fe),document.body.appendChild(se)}c?(j.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function XA(){var e;const r=(e=nh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $A(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function JA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZA(){const r=gn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function ex(){return!XA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tx(){try{return typeof indexedDB=="object"}catch{return!1}}function nx(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="FirebaseError";class Ms extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=rx,Object.setPrototypeOf(this,Ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dc.prototype.create)}}class Dc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?sx(c,i):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Ms(o,m,i)}}function sx(r,e){return r.replace(ix,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const ix=/\{\$([^}]+)}/g;function ax(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ea(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const c=r[o],d=e[o];if(K0(c)&&K0(d)){if(!Ea(c,d))return!1}else if(c!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function K0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function rc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function sc(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function ox(r,e){const t=new lx(r,e);return t.subscribe.bind(t)}class lx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");cx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Cm),o.error===void 0&&(o.error=Cm),o.complete===void 0&&(o.complete=Cm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cx(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Cm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(r){return r&&r._delegate?r._delegate:r}class wa{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new FA;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hx(e))try{this.getOrInitializeService({instanceIdentifier:pa})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pa){return this.instances.has(e)}getOptions(e=pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);i===m&&d.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:dx(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=pa){return this.component?this.component.multipleInstances?e:pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dx(r){return r===pa?void 0:r}function hx(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ux(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ze||(ze={}));const mx={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},gx=ze.INFO,px={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},yx=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=px[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yg{constructor(e){this.name=e,this._logLevel=gx,this._logHandler=yx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const _x=(r,e)=>e.some(t=>r instanceof t);let Y0,X0;function vx(){return Y0||(Y0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ex(){return X0||(X0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YE=new WeakMap,Bm=new WeakMap,XE=new WeakMap,Nm=new WeakMap,_g=new WeakMap;function wx(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{t(wi(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&YE.set(t,r)}).catch(()=>{}),_g.set(e,r),e}function Tx(r){if(Bm.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{t(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Bm.set(r,e)}let Hm={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Bm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||XE.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function bx(r){Hm=r(Hm)}function Sx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Dm(this),e,...t);return XE.set(i,e.sort?e.sort():[e]),wi(i)}:Ex().includes(r)?function(...e){return r.apply(Dm(this),e),wi(YE.get(this))}:function(...e){return wi(r.apply(Dm(this),e))}}function Ax(r){return typeof r=="function"?Sx(r):(r instanceof IDBTransaction&&Tx(r),_x(r,vx())?new Proxy(r,Hm):r)}function wi(r){if(r instanceof IDBRequest)return wx(r);if(Nm.has(r))return Nm.get(r);const e=Ax(r);return e!==r&&(Nm.set(r,e),_g.set(e,r)),e}const Dm=r=>_g.get(r);function xx(r,e,{blocked:t,upgrade:i,blocking:o,terminated:c}={}){const d=indexedDB.open(r,e),m=wi(d);return i&&d.addEventListener("upgradeneeded",g=>{i(wi(d.result),g.oldVersion,g.newVersion,wi(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const Rx=["get","getKey","getAll","getAllKeys","count"],Ix=["put","add","delete","clear"],Pm=new Map;function $0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Pm.get(e))return Pm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Ix.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Rx.includes(t)))return;const c=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let _=g.store;return i&&(_=_.index(m.shift())),(await Promise.all([_[t](...m),o&&g.done]))[0]};return Pm.set(e,c),c}bx(r=>({...r,get:(e,t,i)=>$0(e,t)||r.get(e,t,i),has:(e,t)=>!!$0(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Nx(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Nx(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fm="@firebase/app",W0="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new yg("@firebase/app"),Dx="@firebase/app-compat",Px="@firebase/analytics-compat",Ox="@firebase/analytics",kx="@firebase/app-check-compat",Mx="@firebase/app-check",Vx="@firebase/auth",jx="@firebase/auth-compat",Lx="@firebase/database",Ux="@firebase/data-connect",zx="@firebase/database-compat",qx="@firebase/functions",Bx="@firebase/functions-compat",Hx="@firebase/installations",Fx="@firebase/installations-compat",Gx="@firebase/messaging",Qx="@firebase/messaging-compat",Kx="@firebase/performance",Yx="@firebase/performance-compat",Xx="@firebase/remote-config",$x="@firebase/remote-config-compat",Wx="@firebase/storage",Jx="@firebase/storage-compat",Zx="@firebase/firestore",e1="@firebase/ai",t1="@firebase/firestore-compat",n1="firebase",r1="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="[DEFAULT]",s1={[Fm]:"fire-core",[Dx]:"fire-core-compat",[Ox]:"fire-analytics",[Px]:"fire-analytics-compat",[Mx]:"fire-app-check",[kx]:"fire-app-check-compat",[Vx]:"fire-auth",[jx]:"fire-auth-compat",[Lx]:"fire-rtdb",[Ux]:"fire-data-connect",[zx]:"fire-rtdb-compat",[qx]:"fire-fn",[Bx]:"fire-fn-compat",[Hx]:"fire-iid",[Fx]:"fire-iid-compat",[Gx]:"fire-fcm",[Qx]:"fire-fcm-compat",[Kx]:"fire-perf",[Yx]:"fire-perf-compat",[Xx]:"fire-rc",[$x]:"fire-rc-compat",[Wx]:"fire-gcs",[Jx]:"fire-gcs-compat",[Zx]:"fire-fst",[t1]:"fire-fst-compat",[e1]:"fire-vertex","fire-js":"fire-js",[n1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=new Map,i1=new Map,Qm=new Map;function J0(r,e){try{r.container.addComponent(e)}catch(t){Cs.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Oo(r){const e=r.name;if(Qm.has(e))return Cs.debug(`There were multiple attempts to register component ${e}.`),!1;Qm.set(e,r);for(const t of Od.values())J0(t,r);for(const t of i1.values())J0(t,r);return!0}function vg(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Nn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ti=new Dc("app","Firebase",a1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ti.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=r1;function $E(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Gm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Ti.create("bad-app-name",{appName:String(o)});if(t||(t=FE()),!t)throw Ti.create("no-options");const c=Od.get(o);if(c){if(Ea(t,c.options)&&Ea(i,c.config))return c;throw Ti.create("duplicate-app",{appName:o})}const d=new fx(o);for(const g of Qm.values())d.addComponent(g);const m=new o1(t,i,d);return Od.set(o,m),m}function WE(r=Gm){const e=Od.get(r);if(!e&&r===Gm&&FE())return $E();if(!e)throw Ti.create("no-app",{appName:r});return e}function bi(r,e,t){let i=s1[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cs.warn(d.join(" "));return}Oo(new wa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="firebase-heartbeat-database",c1=1,_c="firebase-heartbeat-store";let Om=null;function JE(){return Om||(Om=xx(l1,c1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(_c)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ti.create("idb-open",{originalErrorMessage:r.message})})),Om}async function u1(r){try{const t=(await JE()).transaction(_c),i=await t.objectStore(_c).get(ZE(r));return await t.done,i}catch(e){if(e instanceof Ms)Cs.warn(e.message);else{const t=Ti.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cs.warn(t.message)}}}async function Z0(r,e){try{const i=(await JE()).transaction(_c,"readwrite");await i.objectStore(_c).put(e,ZE(r)),await i.done}catch(t){if(t instanceof Ms)Cs.warn(t.message);else{const i=Ti.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Cs.warn(i.message)}}}function ZE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=1024,h1=30;class f1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new g1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=ev();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>h1){const d=p1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Cs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ev(),{heartbeatsToSend:i,unsentEntries:o}=m1(this._heartbeatsCache.heartbeats),c=Pd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Cs.warn(t),""}}}function ev(){return new Date().toISOString().substring(0,10)}function m1(r,e=d1){const t=[];let i=r.slice();for(const o of r){const c=t.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),tv(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),tv(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class g1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tx()?nx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await u1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Z0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Z0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function tv(r){return Pd(JSON.stringify({version:2,heartbeats:r})).length}function p1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(r){Oo(new wa("platform-logger",e=>new Cx(e),"PRIVATE")),Oo(new wa("heartbeat",e=>new f1(e),"PRIVATE")),bi(Fm,W0,r),bi(Fm,W0,"esm2020"),bi("fire-js","")}y1("");var _1="firebase",v1="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bi(_1,v1,"app");var nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Si,ew;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,x){function C(){}C.prototype=x.prototype,N.D=x.prototype,N.prototype=new C,N.prototype.constructor=N,N.C=function(O,k,V){for(var R=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)R[Ce-2]=arguments[Ce];return x.prototype[k].apply(O,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,x,C){C||(C=0);var O=Array(16);if(typeof x=="string")for(var k=0;16>k;++k)O[k]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(k=0;16>k;++k)O[k]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;x=N.g[0],C=N.g[1],k=N.g[2];var V=N.g[3],R=x+(V^C&(k^V))+O[0]+3614090360&4294967295;x=C+(R<<7&4294967295|R>>>25),R=V+(k^x&(C^k))+O[1]+3905402710&4294967295,V=x+(R<<12&4294967295|R>>>20),R=k+(C^V&(x^C))+O[2]+606105819&4294967295,k=V+(R<<17&4294967295|R>>>15),R=C+(x^k&(V^x))+O[3]+3250441966&4294967295,C=k+(R<<22&4294967295|R>>>10),R=x+(V^C&(k^V))+O[4]+4118548399&4294967295,x=C+(R<<7&4294967295|R>>>25),R=V+(k^x&(C^k))+O[5]+1200080426&4294967295,V=x+(R<<12&4294967295|R>>>20),R=k+(C^V&(x^C))+O[6]+2821735955&4294967295,k=V+(R<<17&4294967295|R>>>15),R=C+(x^k&(V^x))+O[7]+4249261313&4294967295,C=k+(R<<22&4294967295|R>>>10),R=x+(V^C&(k^V))+O[8]+1770035416&4294967295,x=C+(R<<7&4294967295|R>>>25),R=V+(k^x&(C^k))+O[9]+2336552879&4294967295,V=x+(R<<12&4294967295|R>>>20),R=k+(C^V&(x^C))+O[10]+4294925233&4294967295,k=V+(R<<17&4294967295|R>>>15),R=C+(x^k&(V^x))+O[11]+2304563134&4294967295,C=k+(R<<22&4294967295|R>>>10),R=x+(V^C&(k^V))+O[12]+1804603682&4294967295,x=C+(R<<7&4294967295|R>>>25),R=V+(k^x&(C^k))+O[13]+4254626195&4294967295,V=x+(R<<12&4294967295|R>>>20),R=k+(C^V&(x^C))+O[14]+2792965006&4294967295,k=V+(R<<17&4294967295|R>>>15),R=C+(x^k&(V^x))+O[15]+1236535329&4294967295,C=k+(R<<22&4294967295|R>>>10),R=x+(k^V&(C^k))+O[1]+4129170786&4294967295,x=C+(R<<5&4294967295|R>>>27),R=V+(C^k&(x^C))+O[6]+3225465664&4294967295,V=x+(R<<9&4294967295|R>>>23),R=k+(x^C&(V^x))+O[11]+643717713&4294967295,k=V+(R<<14&4294967295|R>>>18),R=C+(V^x&(k^V))+O[0]+3921069994&4294967295,C=k+(R<<20&4294967295|R>>>12),R=x+(k^V&(C^k))+O[5]+3593408605&4294967295,x=C+(R<<5&4294967295|R>>>27),R=V+(C^k&(x^C))+O[10]+38016083&4294967295,V=x+(R<<9&4294967295|R>>>23),R=k+(x^C&(V^x))+O[15]+3634488961&4294967295,k=V+(R<<14&4294967295|R>>>18),R=C+(V^x&(k^V))+O[4]+3889429448&4294967295,C=k+(R<<20&4294967295|R>>>12),R=x+(k^V&(C^k))+O[9]+568446438&4294967295,x=C+(R<<5&4294967295|R>>>27),R=V+(C^k&(x^C))+O[14]+3275163606&4294967295,V=x+(R<<9&4294967295|R>>>23),R=k+(x^C&(V^x))+O[3]+4107603335&4294967295,k=V+(R<<14&4294967295|R>>>18),R=C+(V^x&(k^V))+O[8]+1163531501&4294967295,C=k+(R<<20&4294967295|R>>>12),R=x+(k^V&(C^k))+O[13]+2850285829&4294967295,x=C+(R<<5&4294967295|R>>>27),R=V+(C^k&(x^C))+O[2]+4243563512&4294967295,V=x+(R<<9&4294967295|R>>>23),R=k+(x^C&(V^x))+O[7]+1735328473&4294967295,k=V+(R<<14&4294967295|R>>>18),R=C+(V^x&(k^V))+O[12]+2368359562&4294967295,C=k+(R<<20&4294967295|R>>>12),R=x+(C^k^V)+O[5]+4294588738&4294967295,x=C+(R<<4&4294967295|R>>>28),R=V+(x^C^k)+O[8]+2272392833&4294967295,V=x+(R<<11&4294967295|R>>>21),R=k+(V^x^C)+O[11]+1839030562&4294967295,k=V+(R<<16&4294967295|R>>>16),R=C+(k^V^x)+O[14]+4259657740&4294967295,C=k+(R<<23&4294967295|R>>>9),R=x+(C^k^V)+O[1]+2763975236&4294967295,x=C+(R<<4&4294967295|R>>>28),R=V+(x^C^k)+O[4]+1272893353&4294967295,V=x+(R<<11&4294967295|R>>>21),R=k+(V^x^C)+O[7]+4139469664&4294967295,k=V+(R<<16&4294967295|R>>>16),R=C+(k^V^x)+O[10]+3200236656&4294967295,C=k+(R<<23&4294967295|R>>>9),R=x+(C^k^V)+O[13]+681279174&4294967295,x=C+(R<<4&4294967295|R>>>28),R=V+(x^C^k)+O[0]+3936430074&4294967295,V=x+(R<<11&4294967295|R>>>21),R=k+(V^x^C)+O[3]+3572445317&4294967295,k=V+(R<<16&4294967295|R>>>16),R=C+(k^V^x)+O[6]+76029189&4294967295,C=k+(R<<23&4294967295|R>>>9),R=x+(C^k^V)+O[9]+3654602809&4294967295,x=C+(R<<4&4294967295|R>>>28),R=V+(x^C^k)+O[12]+3873151461&4294967295,V=x+(R<<11&4294967295|R>>>21),R=k+(V^x^C)+O[15]+530742520&4294967295,k=V+(R<<16&4294967295|R>>>16),R=C+(k^V^x)+O[2]+3299628645&4294967295,C=k+(R<<23&4294967295|R>>>9),R=x+(k^(C|~V))+O[0]+4096336452&4294967295,x=C+(R<<6&4294967295|R>>>26),R=V+(C^(x|~k))+O[7]+1126891415&4294967295,V=x+(R<<10&4294967295|R>>>22),R=k+(x^(V|~C))+O[14]+2878612391&4294967295,k=V+(R<<15&4294967295|R>>>17),R=C+(V^(k|~x))+O[5]+4237533241&4294967295,C=k+(R<<21&4294967295|R>>>11),R=x+(k^(C|~V))+O[12]+1700485571&4294967295,x=C+(R<<6&4294967295|R>>>26),R=V+(C^(x|~k))+O[3]+2399980690&4294967295,V=x+(R<<10&4294967295|R>>>22),R=k+(x^(V|~C))+O[10]+4293915773&4294967295,k=V+(R<<15&4294967295|R>>>17),R=C+(V^(k|~x))+O[1]+2240044497&4294967295,C=k+(R<<21&4294967295|R>>>11),R=x+(k^(C|~V))+O[8]+1873313359&4294967295,x=C+(R<<6&4294967295|R>>>26),R=V+(C^(x|~k))+O[15]+4264355552&4294967295,V=x+(R<<10&4294967295|R>>>22),R=k+(x^(V|~C))+O[6]+2734768916&4294967295,k=V+(R<<15&4294967295|R>>>17),R=C+(V^(k|~x))+O[13]+1309151649&4294967295,C=k+(R<<21&4294967295|R>>>11),R=x+(k^(C|~V))+O[4]+4149444226&4294967295,x=C+(R<<6&4294967295|R>>>26),R=V+(C^(x|~k))+O[11]+3174756917&4294967295,V=x+(R<<10&4294967295|R>>>22),R=k+(x^(V|~C))+O[2]+718787259&4294967295,k=V+(R<<15&4294967295|R>>>17),R=C+(V^(k|~x))+O[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+V&4294967295}i.prototype.u=function(N,x){x===void 0&&(x=N.length);for(var C=x-this.blockSize,O=this.B,k=this.h,V=0;V<x;){if(k==0)for(;V<=C;)o(this,N,V),V+=this.blockSize;if(typeof N=="string"){for(;V<x;)if(O[k++]=N.charCodeAt(V++),k==this.blockSize){o(this,O),k=0;break}}else for(;V<x;)if(O[k++]=N[V++],k==this.blockSize){o(this,O),k=0;break}}this.h=k,this.o+=x},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;var C=8*this.o;for(x=N.length-8;x<N.length;++x)N[x]=C&255,C/=256;for(this.u(N),N=Array(16),x=C=0;4>x;++x)for(var O=0;32>O;O+=8)N[C++]=this.g[x]>>>O&255;return N};function c(N,x){var C=m;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=x(N)}function d(N,x){this.h=x;for(var C=[],O=!0,k=N.length-1;0<=k;k--){var V=N[k]|0;O&&V==x||(C[k]=V,O=!1)}this.g=C}var m={};function g(N){return-128<=N&&128>N?c(N,function(x){return new d([x|0],0>x?-1:0)}):new d([N|0],0>N?-1:0)}function _(N){if(isNaN(N)||!isFinite(N))return b;if(0>N)return z(_(-N));for(var x=[],C=1,O=0;N>=C;O++)x[O]=N/C|0,C*=4294967296;return new d(x,0)}function w(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return z(w(N.substring(1),x));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=_(Math.pow(x,8)),O=b,k=0;k<N.length;k+=8){var V=Math.min(8,N.length-k),R=parseInt(N.substring(k,k+V),x);8>V?(V=_(Math.pow(x,V)),O=O.j(V).add(_(R))):(O=O.j(C),O=O.add(_(R)))}return O}var b=g(0),A=g(1),I=g(16777216);r=d.prototype,r.m=function(){if(F(this))return-z(this).m();for(var N=0,x=1,C=0;C<this.g.length;C++){var O=this.i(C);N+=(0<=O?O:4294967296+O)*x,x*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(j(this))return"0";if(F(this))return"-"+z(this).toString(N);for(var x=_(Math.pow(N,6)),C=this,O="";;){var k=fe(C,x).g;C=re(C,k.j(x));var V=((0<C.g.length?C.g[0]:C.h)>>>0).toString(N);if(C=k,j(C))return V+O;for(;6>V.length;)V="0"+V;O=V+O}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function j(N){if(N.h!=0)return!1;for(var x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function F(N){return N.h==-1}r.l=function(N){return N=re(this,N),F(N)?-1:j(N)?0:1};function z(N){for(var x=N.g.length,C=[],O=0;O<x;O++)C[O]=~N.g[O];return new d(C,~N.h).add(A)}r.abs=function(){return F(this)?z(this):this},r.add=function(N){for(var x=Math.max(this.g.length,N.g.length),C=[],O=0,k=0;k<=x;k++){var V=O+(this.i(k)&65535)+(N.i(k)&65535),R=(V>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);O=R>>>16,V&=65535,R&=65535,C[k]=R<<16|V}return new d(C,C[C.length-1]&-2147483648?-1:0)};function re(N,x){return N.add(z(x))}r.j=function(N){if(j(this)||j(N))return b;if(F(this))return F(N)?z(this).j(z(N)):z(z(this).j(N));if(F(N))return z(this.j(z(N)));if(0>this.l(I)&&0>N.l(I))return _(this.m()*N.m());for(var x=this.g.length+N.g.length,C=[],O=0;O<2*x;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(var k=0;k<N.g.length;k++){var V=this.i(O)>>>16,R=this.i(O)&65535,Ce=N.i(k)>>>16,Oe=N.i(k)&65535;C[2*O+2*k]+=R*Oe,ie(C,2*O+2*k),C[2*O+2*k+1]+=V*Oe,ie(C,2*O+2*k+1),C[2*O+2*k+1]+=R*Ce,ie(C,2*O+2*k+1),C[2*O+2*k+2]+=V*Ce,ie(C,2*O+2*k+2)}for(O=0;O<x;O++)C[O]=C[2*O+1]<<16|C[2*O];for(O=x;O<2*x;O++)C[O]=0;return new d(C,0)};function ie(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function se(N,x){this.g=N,this.h=x}function fe(N,x){if(j(x))throw Error("division by zero");if(j(N))return new se(b,b);if(F(N))return x=fe(z(N),x),new se(z(x.g),z(x.h));if(F(x))return x=fe(N,z(x)),new se(z(x.g),x.h);if(30<N.g.length){if(F(N)||F(x))throw Error("slowDivide_ only works with positive integers.");for(var C=A,O=x;0>=O.l(N);)C=le(C),O=le(O);var k=K(C,1),V=K(O,1);for(O=K(O,2),C=K(C,2);!j(O);){var R=V.add(O);0>=R.l(N)&&(k=k.add(C),V=R),O=K(O,1),C=K(C,1)}return x=re(N,k.j(x)),new se(k,x)}for(k=b;0<=N.l(x);){for(C=Math.max(1,Math.floor(N.m()/x.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),V=_(C),R=V.j(x);F(R)||0<R.l(N);)C-=O,V=_(C),R=V.j(x);j(V)&&(V=A),k=k.add(V),N=re(N,R)}return new se(k,N)}r.A=function(N){return fe(this,N).h},r.and=function(N){for(var x=Math.max(this.g.length,N.g.length),C=[],O=0;O<x;O++)C[O]=this.i(O)&N.i(O);return new d(C,this.h&N.h)},r.or=function(N){for(var x=Math.max(this.g.length,N.g.length),C=[],O=0;O<x;O++)C[O]=this.i(O)|N.i(O);return new d(C,this.h|N.h)},r.xor=function(N){for(var x=Math.max(this.g.length,N.g.length),C=[],O=0;O<x;O++)C[O]=this.i(O)^N.i(O);return new d(C,this.h^N.h)};function le(N){for(var x=N.g.length+1,C=[],O=0;O<x;O++)C[O]=N.i(O)<<1|N.i(O-1)>>>31;return new d(C,N.h)}function K(N,x){var C=x>>5;x%=32;for(var O=N.g.length-C,k=[],V=0;V<O;V++)k[V]=0<x?N.i(V+C)>>>x|N.i(V+C+1)<<32-x:N.i(V+C);return new d(k,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ew=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=w,Si=d}).apply(typeof nv<"u"?nv:typeof self<"u"?self:typeof window<"u"?window:{});var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tw,ic,nw,Td,Km,rw,sw,iw;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,y,v){return u==Array.prototype||u==Object.prototype||(u[y]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof fd=="object"&&fd];for(var y=0;y<u.length;++y){var v=u[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,y){if(y)e:{var v=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var U=u[S];if(!(U in v))break e;v=v[U]}u=u[u.length-1],S=v[u],y=y(S),y!=S&&y!=null&&e(v,u,{configurable:!0,writable:!0,value:y})}}function c(u,y){u instanceof String&&(u+="");var v=0,S=!1,U={next:function(){if(!S&&v<u.length){var Y=v++;return{value:y(Y,u[Y]),done:!1}}return S=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(u){return u||function(){return c(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function g(u){var y=typeof u;return y=y!="object"?y:u?Array.isArray(u)?"array":y:"null",y=="array"||y=="object"&&typeof u.length=="number"}function _(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function w(u,y,v){return u.call.apply(u.bind,arguments)}function b(u,y,v){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,S),u.apply(y,U)}}return function(){return u.apply(y,arguments)}}function A(u,y,v){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:b,A.apply(null,arguments)}function I(u,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function j(u,y){function v(){}v.prototype=y.prototype,u.aa=y.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(S,U,Y){for(var ce=Array(arguments.length-2),He=2;He<arguments.length;He++)ce[He-2]=arguments[He];return y.prototype[U].apply(S,ce)}}function F(u){const y=u.length;if(0<y){const v=Array(y);for(let S=0;S<y;S++)v[S]=u[S];return v}return[]}function z(u,y){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(g(S)){const U=u.length||0,Y=S.length||0;u.length=U+Y;for(let ce=0;ce<Y;ce++)u[U+ce]=S[ce]}else u.push(S)}}class re{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ie(u){return/^[\s\xa0]*$/.test(u)}function se(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function fe(u){return fe[" "](u),u}fe[" "]=function(){};var le=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function K(u,y,v){for(const S in u)y.call(v,u[S],S,u)}function N(u,y){for(const v in u)y.call(void 0,u[v],v,u)}function x(u){const y={};for(const v in u)y[v]=u[v];return y}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,y){let v,S;for(let U=1;U<arguments.length;U++){S=arguments[U];for(v in S)u[v]=S[v];for(let Y=0;Y<C.length;Y++)v=C[Y],Object.prototype.hasOwnProperty.call(S,v)&&(u[v]=S[v])}}function k(u){var y=1;u=u.split(":");const v=[];for(;0<y&&u.length;)v.push(u.shift()),y--;return u.length&&v.push(u.join(":")),v}function V(u){m.setTimeout(()=>{throw u},0)}function R(){var u=ye;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class Ce{constructor(){this.h=this.g=null}add(y,v){const S=Oe.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var Oe=new re(()=>new Q,u=>u.reset());class Q{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,$=!1,ye=new Ce,P=()=>{const u=m.Promise.resolve(void 0);ae=()=>{u.then(ne)}};var ne=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(v){V(v)}var y=Oe;y.j(u),100>y.h&&(y.h++,u.next=y.g,y.g=u)}$=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return u})();function Pe(u,y){if(oe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget){if(le){e:{try{fe(y.nodeName);var U=!0;break e}catch{}U=!1}U||(y=null)}}else v=="mouseover"?y=u.fromElement:v=="mouseout"&&(y=u.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ae[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Pe.aa.h.call(this)}}j(Pe,oe);var Ae={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Nt="closure_listenable_"+(1e6*Math.random()|0),We=0;function Jt(u,y,v,S,U){this.listener=u,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=U,this.key=++We,this.da=this.fa=!1}function lr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function cr(u){this.src=u,this.g={},this.h=0}cr.prototype.add=function(u,y,v,S,U){var Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);var ce=Wr(u,y,S,U);return-1<ce?(y=u[ce],v||(y.fa=!1)):(y=new Jt(y,this.src,Y,!!S,U),y.fa=v,u.push(y)),y};function Er(u,y){var v=y.type;if(v in u.g){var S=u.g[v],U=Array.prototype.indexOf.call(S,y,void 0),Y;(Y=0<=U)&&Array.prototype.splice.call(S,U,1),Y&&(lr(y),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Wr(u,y,v,S){for(var U=0;U<u.length;++U){var Y=u[U];if(!Y.da&&Y.listener==y&&Y.capture==!!v&&Y.ha==S)return U}return-1}var wr="closure_lm_"+(1e6*Math.random()|0),Ia={};function Wo(u,y,v,S,U){if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)Wo(u,y[Y],v,S,U);return null}return v=Na(v),u&&u[Nt]?u.K(y,v,_(S)?!!S.capture:!1,U):pn(u,y,v,!1,S,U)}function pn(u,y,v,S,U,Y){if(!y)throw Error("Invalid event type");var ce=_(U)?!!U.capture:!!U,He=Us(u);if(He||(u[wr]=He=new cr(u)),v=He.add(y,v,S,ce,Y),v.proxy)return v;if(S=Ca(),v.proxy=S,S.src=u,S.listener=v,u.addEventListener)ve||(U=ce),U===void 0&&(U=!1),u.addEventListener(y.toString(),S,U);else if(u.attachEvent)u.attachEvent(Zr(y.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ca(){function u(v){return y.call(u.src,u.listener,v)}const y=Jo;return u}function Jr(u,y,v,S,U){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Jr(u,y[Y],v,S,U);else S=_(S)?!!S.capture:!!S,v=Na(v),u&&u[Nt]?(u=u.i,y=String(y).toString(),y in u.g&&(Y=u.g[y],v=Wr(Y,v,S,U),-1<v&&(lr(Y[v]),Array.prototype.splice.call(Y,v,1),Y.length==0&&(delete u.g[y],u.h--)))):u&&(u=Us(u))&&(y=u.g[y.toString()],u=-1,y&&(u=Wr(y,v,S,U)),(v=-1<u?y[u]:null)&&Ls(v))}function Ls(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[Nt])Er(y.i,u);else{var v=u.type,S=u.proxy;y.removeEventListener?y.removeEventListener(v,S,u.capture):y.detachEvent?y.detachEvent(Zr(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=Us(y))?(Er(v,u),v.h==0&&(v.src=null,y[wr]=null)):lr(u)}}}function Zr(u){return u in Ia?Ia[u]:Ia[u]="on"+u}function Jo(u,y){if(u.da)u=!0;else{y=new Pe(y,this);var v=u.listener,S=u.ha||u.src;u.fa&&Ls(u),u=v.call(S,y)}return u}function Us(u){return u=u[wr],u instanceof cr?u:null}var zs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Na(u){return typeof u=="function"?u:(u[zs]||(u[zs]=function(y){return u.handleEvent(y)}),u[zs])}function ft(){de.call(this),this.i=new cr(this),this.M=this,this.F=null}j(ft,de),ft.prototype[Nt]=!0,ft.prototype.removeEventListener=function(u,y,v,S){Jr(this,u,y,v,S)};function Je(u,y){var v,S=u.F;if(S)for(v=[];S;S=S.F)v.push(S);if(u=u.M,S=y.type||y,typeof y=="string")y=new oe(y,u);else if(y instanceof oe)y.target=y.target||u;else{var U=y;y=new oe(S,u),O(y,U)}if(U=!0,v)for(var Y=v.length-1;0<=Y;Y--){var ce=y.g=v[Y];U=yn(ce,S,!0,y)&&U}if(ce=y.g=u,U=yn(ce,S,!0,y)&&U,U=yn(ce,S,!1,y)&&U,v)for(Y=0;Y<v.length;Y++)ce=y.g=v[Y],U=yn(ce,S,!1,y)&&U}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var u=this.i,y;for(y in u.g){for(var v=u.g[y],S=0;S<v.length;S++)lr(v[S]);delete u.g[y],u.h--}}this.F=null},ft.prototype.K=function(u,y,v,S){return this.i.add(String(u),y,!1,v,S)},ft.prototype.L=function(u,y,v,S){return this.i.add(String(u),y,!0,v,S)};function yn(u,y,v,S){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();for(var U=!0,Y=0;Y<y.length;++Y){var ce=y[Y];if(ce&&!ce.da&&ce.capture==v){var He=ce.listener,Lt=ce.ha||ce.src;ce.fa&&Er(u.i,ce),U=He.call(Lt,S)!==!1&&U}}return U&&!S.defaultPrevented}function Ht(u,y,v){if(typeof u=="function")v&&(u=A(u,v));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(u,y||0)}function Da(u){u.g=Ht(()=>{u.g=null,u.i&&(u.i=!1,Da(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class Zo extends de{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Da(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function es(u){de.call(this),this.h=u,this.g={}}j(es,de);var ts=[];function ns(u){K(u.g,function(y,v){this.g.hasOwnProperty(v)&&Ls(y)},u),u.g={}}es.prototype.N=function(){es.aa.N.call(this),ns(this)},es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var On=m.JSON.stringify,qs=m.JSON.parse,Tr=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function Li(){}Li.prototype.h=null;function Ui(u){return u.h||(u.h=u.i())}function Bs(){}var ur={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kn(){oe.call(this,"d")}j(kn,oe);function zi(){oe.call(this,"c")}j(zi,oe);var Kn={},qi=null;function br(){return qi=qi||new ft}Kn.La="serverreachability";function Hs(u){oe.call(this,Kn.La,u)}j(Hs,oe);function Sr(u){const y=br();Je(y,new Hs(y))}Kn.STAT_EVENT="statevent";function Pa(u,y){oe.call(this,Kn.STAT_EVENT,u),this.stat=y}j(Pa,oe);function dt(u){const y=br();Je(y,new Pa(y,u))}Kn.Ma="timingevent";function At(u,y){oe.call(this,Kn.Ma,u),this.size=y}j(At,oe);function wt(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},y)}function bn(){this.g=!0}bn.prototype.xa=function(){this.g=!1};function ue(u,y,v,S,U,Y){u.info(function(){if(u.g)if(Y)for(var ce="",He=Y.split("&"),Lt=0;Lt<He.length;Lt++){var Fe=He[Lt].split("=");if(1<Fe.length){var Gt=Fe[0];Fe=Fe[1];var Ut=Gt.split("_");ce=2<=Ut.length&&Ut[1]=="type"?ce+(Gt+"="+Fe+"&"):ce+(Gt+"=redacted&")}}else ce=null;else ce=Y;return"XMLHTTP REQ ("+S+") [attempt "+U+"]: "+y+`
`+v+`
`+ce})}function me(u,y,v,S,U,Y,ce){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+U+"]: "+y+`
`+v+`
`+Y+" "+ce})}function ct(u,y,v,S){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Sn(u,v)+(S?" "+S:"")})}function Fs(u,y){u.info(function(){return"TIMEOUT: "+y})}bn.prototype.info=function(){};function Sn(u,y){if(!u.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var S=v[u];if(!(2>S.length)){var U=S[1];if(Array.isArray(U)&&!(1>U.length)){var Y=U[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ce=1;ce<U.length;ce++)U[ce]=""}}}}return On(v)}catch{return y}}var An={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ar;function xr(){}j(xr,Li),xr.prototype.g=function(){return new XMLHttpRequest},xr.prototype.i=function(){return{}},Ar=new xr;function _n(u,y,v,S){this.j=u,this.i=y,this.l=v,this.R=S||1,this.U=new es(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xt}function xt(){this.i=null,this.g="",this.h=!1}var el={},Oa={};function dr(u,y,v){u.L=1,u.v=Qi(Mn(y)),u.m=v,u.P=!0,ss(u,null)}function ss(u,y){u.F=Date.now(),Bi(u),u.A=Mn(u.v);var v=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),al(v.i,"t",S),u.C=0,v=u.j.J,u.h=new xt,u.g=cu(u.j,v?y:null,!u.m),0<u.O&&(u.M=new Zo(A(u.Y,u,u.g),u.O)),y=u.U,v=u.g,S=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(ts[0]=U.toString()),U=ts);for(var Y=0;Y<U.length;Y++){var ce=Wo(v,U[Y],S||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,y)):(u.u="GET",u.g.ea(u.A,u.u,null,y)),Sr(),ue(u.i,u.u,u.A,u.l,u.R,u.m)}_n.prototype.ca=function(u){u=u.target;const y=this.M;y&&Wn(u)==3?y.j():this.Y(u)},_n.prototype.Y=function(u){try{if(u==this.g)e:{const Ut=Wn(this.g);var y=this.g.Ba();const hs=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||tu(this.g)))){this.J||Ut!=4||y==7||(y==8||0>=hs?Sr(3):Sr(2)),Gs(this);var v=this.g.Z();this.X=v;t:if(Yc(this)){var S=tu(this.g);u="";var U=S.length,Y=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zt(this),Rr(this);var ce="";break t}this.h.i=new m.TextDecoder}for(y=0;y<U;y++)this.h.h=!0,u+=this.h.i.decode(S[y],{stream:!(Y&&y==U-1)});S.length=0,this.h.g+=u,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=v==200,me(this.i,this.u,this.A,this.l,this.R,Ut,v),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Lt=this.g;if((He=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(He)){var Fe=He;break t}}Fe=null}if(v=Fe)ct(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hi(this,v);else{this.o=!1,this.s=3,dt(12),Zt(this),Rr(this);break e}}if(this.P){v=!0;let en;for(;!this.J&&this.C<ce.length;)if(en=Xc(this,ce),en==Oa){Ut==4&&(this.s=4,dt(14),v=!1),ct(this.i,this.l,null,"[Incomplete Response]");break}else if(en==el){this.s=4,dt(15),ct(this.i,this.l,ce,"[Invalid Chunk]"),v=!1;break}else ct(this.i,this.l,en,null),Hi(this,en);if(Yc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||ce.length!=0||this.h.h||(this.s=1,dt(16),v=!1),this.o=this.o&&v,!v)ct(this.i,this.l,ce,"[Invalid Chunked Response]"),Zt(this),Rr(this);else if(0<ce.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),ea(Gt),Gt.M=!0,dt(11))}}else ct(this.i,this.l,ce,null),Hi(this,ce);Ut==4&&Zt(this),this.o&&!this.J&&(Ut==4?au(this.j,this):(this.o=!1,Bi(this)))}else Ch(this.g),v==400&&0<ce.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Zt(this),Rr(this)}}}catch{}finally{}};function Yc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Xc(u,y){var v=u.C,S=y.indexOf(`
`,v);return S==-1?Oa:(v=Number(y.substring(v,S)),isNaN(v)?el:(S+=1,S+v>y.length?Oa:(y=y.slice(S,S+v),u.C=S+v,y)))}_n.prototype.cancel=function(){this.J=!0,Zt(this)};function Bi(u){u.S=Date.now()+u.I,$c(u,u.I)}function $c(u,y){if(u.B!=null)throw Error("WatchDog timer not null");u.B=wt(A(u.ba,u),y)}function Gs(u){u.B&&(m.clearTimeout(u.B),u.B=null)}_n.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Fs(this.i,this.A),this.L!=2&&(Sr(),dt(17)),Zt(this),this.s=2,Rr(this)):$c(this,this.S-u)};function Rr(u){u.j.G==0||u.J||au(u.j,u)}function Zt(u){Gs(u);var y=u.M;y&&typeof y.ma=="function"&&y.ma(),u.M=null,ns(u.U),u.g&&(y=u.g,u.g=null,y.abort(),y.ma())}function Hi(u,y){try{var v=u.j;if(v.G!=0&&(v.g==u||tl(v.h,u))){if(!u.K&&tl(v.h,u)&&v.G==3){try{var S=v.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var U=S;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Ga(v),Ha(v);else break e;dl(v),dt(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=wt(A(v.Za,v),6e3));if(1>=Ma(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else ds(v,11)}else if((u.K||v.g==u)&&Ga(v),!ie(y))for(U=v.Da.g.parse(y),y=0;y<U.length;y++){let Fe=U[y];if(v.T=Fe[0],Fe=Fe[1],v.G==2)if(Fe[0]=="c"){v.K=Fe[1],v.ia=Fe[2];const Gt=Fe[3];Gt!=null&&(v.la=Gt,v.j.info("VER="+v.la));const Ut=Fe[4];Ut!=null&&(v.Aa=Ut,v.j.info("SVER="+v.Aa));const hs=Fe[5];hs!=null&&typeof hs=="number"&&0<hs&&(S=1.5*hs,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const en=u.g;if(en){const kr=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kr){var Y=S.h;Y.g||kr.indexOf("spdy")==-1&&kr.indexOf("quic")==-1&&kr.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Va(Y,Y.h),Y.h=null))}if(S.D){const fl=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;fl&&(S.ya=fl,st(S.I,S.D,fl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var ce=u;if(S.qa=lu(S,S.J?S.ia:null,S.W),ce.K){vn(S.h,ce);var He=ce,Lt=S.L;Lt&&(He.I=Lt),He.B&&(Gs(He),Bi(He)),S.g=ce}else su(S);0<v.i.length&&Fa(v)}else Fe[0]!="stop"&&Fe[0]!="close"||ds(v,7);else v.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?ds(v,7):cl(v):Fe[0]!="noop"&&v.l&&v.l.ta(Fe),v.v=0)}}Sr(4)}catch{}}var Wc=class{constructor(u,y){this.g=u,this.map=y}};function is(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ka(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ma(u){return u.h?1:u.g?u.g.size:0}function tl(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function Va(u,y){u.g?u.g.add(y):u.h=y}function vn(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}is.prototype.cancel=function(){if(this.i=nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function nl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const v of u.g.values())y=y.concat(v.D);return y}return F(u.i)}function Ah(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var y=[],v=u.length,S=0;S<v;S++)y.push(u[S]);return y}y=[],v=0;for(S in u)y[v++]=u[S];return y}function ja(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var y=[];u=u.length;for(var v=0;v<u;v++)y.push(v);return y}y=[],v=0;for(const S in u)y[v++]=S;return y}}}function rl(u,y){if(u.forEach&&typeof u.forEach=="function")u.forEach(y,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,y,void 0);else for(var v=ja(u),S=Ah(u),U=S.length,Y=0;Y<U;Y++)y.call(void 0,S[Y],v&&v[Y],u)}var Fi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xh(u,y){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var S=u[v].indexOf("="),U=null;if(0<=S){var Y=u[v].substring(0,S);U=u[v].substring(S+1)}else Y=u[v];y(Y,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Dt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Dt){this.h=u.h,Gi(this,u.j),this.o=u.o,this.g=u.g,Qs(this,u.s),this.l=u.l;var y=u.i,v=new os;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),as(this,v),this.m=u.m}else u&&(y=String(u).match(Fi))?(this.h=!1,Gi(this,y[1]||"",!0),this.o=Yn(y[2]||""),this.g=Yn(y[3]||"",!0),Qs(this,y[4]),this.l=Yn(y[5]||"",!0),as(this,y[6]||"",!0),this.m=Yn(y[7]||"")):(this.h=!1,this.i=new os(null,this.h))}Dt.prototype.toString=function(){var u=[],y=this.j;y&&u.push(Ki(y,sl,!0),":");var v=this.g;return(v||y=="file")&&(u.push("//"),(y=this.o)&&u.push(Ki(y,sl,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Ki(v,v.charAt(0)=="/"?Rh:il,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Ki(v,La)),u.join("")};function Mn(u){return new Dt(u)}function Gi(u,y,v){u.j=v?Yn(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function Qs(u,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);u.s=y}else u.s=null}function as(u,y,v){y instanceof os?(u.i=y,Zc(u.i,u.h)):(v||(y=Ki(y,Ih)),u.i=new os(y,u.h))}function st(u,y,v){u.i.set(y,v)}function Qi(u){return st(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Yn(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ki(u,y,v){return typeof u=="string"?(u=encodeURI(u).replace(y,Jc),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Jc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var sl=/[#\/\?@]/g,il=/[#\?:]/g,Rh=/[#\?]/g,Ih=/[#\?@]/g,La=/#/g;function os(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function Xn(u){u.g||(u.g=new Map,u.h=0,u.i&&xh(u.i,function(y,v){u.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=os.prototype,r.add=function(u,y){Xn(this),this.i=null,u=Ir(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(y),this.h+=1,this};function ls(u,y){Xn(u),y=Ir(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function cs(u,y){return Xn(u),y=Ir(u,y),u.g.has(y)}r.forEach=function(u,y){Xn(this),this.g.forEach(function(v,S){v.forEach(function(U){u.call(y,U,S,this)},this)},this)},r.na=function(){Xn(this);const u=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let S=0;S<y.length;S++){const U=u[S];for(let Y=0;Y<U.length;Y++)v.push(y[S])}return v},r.V=function(u){Xn(this);let y=[];if(typeof u=="string")cs(this,u)&&(y=y.concat(this.g.get(Ir(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)y=y.concat(u[v])}return y},r.set=function(u,y){return Xn(this),this.i=null,u=Ir(this,u),cs(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},r.get=function(u,y){return u?(u=this.V(u),0<u.length?String(u[0]):y):y};function al(u,y,v){ls(u,y),0<v.length&&(u.i=null,u.g.set(Ir(u,y),F(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var S=y[v];const Y=encodeURIComponent(String(S)),ce=this.V(S);for(S=0;S<ce.length;S++){var U=Y;ce[S]!==""&&(U+="="+encodeURIComponent(String(ce[S]))),u.push(U)}}return this.i=u.join("&")};function Ir(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Zc(u,y){y&&!u.j&&(Xn(u),u.i=null,u.g.forEach(function(v,S){var U=S.toLowerCase();S!=U&&(ls(this,S),al(this,U,v))},u)),u.j=y}function Yi(u,y){const v=new bn;if(m.Image){const S=new Image;S.onload=I($n,v,"TestLoadImage: loaded",!0,y,S),S.onerror=I($n,v,"TestLoadImage: error",!1,y,S),S.onabort=I($n,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=I($n,v,"TestLoadImage: timeout",!1,y,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else y(!1)}function hr(u,y){const v=new bn,S=new AbortController,U=setTimeout(()=>{S.abort(),$n(v,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:S.signal}).then(Y=>{clearTimeout(U),Y.ok?$n(v,"TestPingServer: ok",!0,y):$n(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),$n(v,"TestPingServer: error",!1,y)})}function $n(u,y,v,S,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),S(v)}catch{}}function Xi(){this.g=new Tr}function Cr(u,y,v){const S=v||"";try{rl(u,function(U,Y){let ce=U;_(U)&&(ce=On(U)),y.push(S+Y+"="+encodeURIComponent(ce))})}catch(U){throw y.push(S+"type="+encodeURIComponent("_badmap")),U}}function Ks(u){this.l=u.Ub||null,this.j=u.eb||!1}j(Ks,Li),Ks.prototype.g=function(){return new us(this.l,this.j)},Ks.prototype.i=(function(u){return function(){return u}})({});function us(u,y){ft.call(this),this.D=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(us,ft),r=us.prototype,r.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=y,this.readyState=1,Dr(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(y.body=u),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Dr(this)),this.g&&(this.readyState=3,Dr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ol(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ol(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?Nr(this):Dr(this),this.readyState==3&&ol(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Nr(this))},r.Qa=function(u){this.g&&(this.response=u,Nr(this))},r.ga=function(){this.g&&Nr(this)};function Nr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Dr(u)}r.setRequestHeader=function(u,y){this.u.append(u,y)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=y.next();return u.join(`\r
`)};function Dr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(us.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ll(u){let y="";return K(u,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Ft(u,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=ll(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):st(u,y,v))}function et(u){ft.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(et,ft);var Ua=/^https?$/i,$i=["POST","PUT"];r=et.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ar.g(),this.v=this.o?Ui(this.o):Ui(Ar),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(Y){eu(this,Y);return}if(u=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var U in S)v.set(U,S[U]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Y of S.keys())v.set(Y,S.get(Y));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(Y=>Y.toLowerCase()=="content-type"),U=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call($i,y,void 0))||S||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ce]of v)this.g.setRequestHeader(Y,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wi(this),this.u=!0,this.g.send(u),this.u=!1}catch(Y){eu(this,Y)}};function eu(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.m=5,za(u),Pr(u)}function za(u){u.A||(u.A=!0,Je(u,"complete"),Je(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Je(this,"complete"),Je(this,"abort"),Pr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pr(this,!0)),et.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?qa(this):this.bb())},r.bb=function(){qa(this)};function qa(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Wn(u)!=4||u.Z()!=2)){if(u.u&&Wn(u)==4)Ht(u.Ea,0,u);else if(Je(u,"readystatechange"),Wn(u)==4){u.h=!1;try{const ce=u.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=ce===0){var U=String(u.D).match(Fi)[1]||null;!U&&m.self&&m.self.location&&(U=m.self.location.protocol.slice(0,-1)),S=!Ua.test(U?U.toLowerCase():"")}v=S}if(v)Je(u,"complete"),Je(u,"success");else{u.m=6;try{var Y=2<Wn(u)?u.g.statusText:""}catch{Y=""}u.l=Y+" ["+u.Z()+"]",za(u)}}finally{Pr(u)}}}}function Pr(u,y){if(u.g){Wi(u);const v=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,y||Je(u,"ready");try{v.onreadystatechange=S}catch{}}}function Wi(u){u.I&&(m.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Wn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),qs(y)}};function tu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ch(u){const y={};u=(u.g&&2<=Wn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(ie(u[S]))continue;var v=k(u[S]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Y=y[U]||[];y[U]=Y,Y.push(v)}N(y,function(S){return S.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ji(u,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||y}function Ba(u){this.Aa=0,this.i=[],this.j=new bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ji("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ji("baseRetryDelayMs",5e3,u),this.cb=Ji("retryDelaySeedMs",1e4,u),this.Wa=Ji("forwardChannelMaxRetries",2,u),this.wa=Ji("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new is(u&&u.concurrentRequestLimit),this.Da=new Xi,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ba.prototype,r.la=8,r.G=1,r.connect=function(u,y,v,S){dt(0),this.W=u,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=lu(this,null,this.W),Fa(this)};function cl(u){if(nu(u),u.G==3){var y=u.U++,v=Mn(u.I);if(st(v,"SID",u.K),st(v,"RID",y),st(v,"TYPE","terminate"),Zi(u,v),y=new _n(u,u.j,y),y.L=2,y.v=Qi(Mn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=cu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Bi(y)}ou(u)}function Ha(u){u.g&&(ea(u),u.g.cancel(),u.g=null)}function nu(u){Ha(u),u.u&&(m.clearTimeout(u.u),u.u=null),Ga(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function Fa(u){if(!ka(u.h)&&!u.s){u.s=!0;var y=u.Ga;ae||P(),$||(ae(),$=!0),ye.add(y,u),u.B=0}}function Nh(u,y){return Ma(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=y.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=wt(A(u.Ga,u,y),hl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new _n(this,this.j,u);let Y=this.o;if(this.S&&(Y?(Y=x(Y),O(Y,this.S)):Y=this.S),this.m!==null||this.O||(U.H=Y,Y=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=ru(this,U,y),v=Mn(this.I),st(v,"RID",u),st(v,"CVER",22),this.D&&st(v,"X-HTTP-Session-Id",this.D),Zi(this,v),Y&&(this.O?y="headers="+encodeURIComponent(String(ll(Y)))+"&"+y:this.m&&Ft(v,this.m,Y)),Va(this.h,U),this.Ua&&st(v,"TYPE","init"),this.P?(st(v,"$req",y),st(v,"SID","null"),U.T=!0,dr(U,v,null)):dr(U,v,y),this.G=2}}else this.G==3&&(u?ul(this,u):this.i.length==0||ka(this.h)||ul(this))};function ul(u,y){var v;y?v=y.l:v=u.U++;const S=Mn(u.I);st(S,"SID",u.K),st(S,"RID",v),st(S,"AID",u.T),Zi(u,S),u.m&&u.o&&Ft(S,u.m,u.o),v=new _n(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),y&&(u.i=y.D.concat(u.i)),y=ru(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Va(u.h,v),dr(v,S,y)}function Zi(u,y){u.H&&K(u.H,function(v,S){st(y,S,v)}),u.l&&rl({},function(v,S){st(y,S,v)})}function ru(u,y,v){v=Math.min(u.i.length,v);var S=u.l?A(u.l.Na,u.l,u):null;e:{var U=u.i;let Y=-1;for(;;){const ce=["count="+v];Y==-1?0<v?(Y=U[0].g,ce.push("ofs="+Y)):Y=0:ce.push("ofs="+Y);let He=!0;for(let Lt=0;Lt<v;Lt++){let Fe=U[Lt].g;const Gt=U[Lt].map;if(Fe-=Y,0>Fe)Y=Math.max(0,U[Lt].g-100),He=!1;else try{Cr(Gt,ce,"req"+Fe+"_")}catch{S&&S(Gt)}}if(He){S=ce.join("&");break e}}}return u=u.i.splice(0,v),y.D=u,S}function su(u){if(!u.g&&!u.u){u.Y=1;var y=u.Fa;ae||P(),$||(ae(),$=!0),ye.add(y,u),u.v=0}}function dl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=wt(A(u.Fa,u),hl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,iu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=wt(A(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Ha(this),iu(this))};function ea(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function iu(u){u.g=new _n(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var y=Mn(u.qa);st(y,"RID","rpc"),st(y,"SID",u.K),st(y,"AID",u.T),st(y,"CI",u.F?"0":"1"),!u.F&&u.ja&&st(y,"TO",u.ja),st(y,"TYPE","xmlhttp"),Zi(u,y),u.m&&u.o&&Ft(y,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Qi(Mn(y)),v.m=null,v.P=!0,ss(v,u)}r.Za=function(){this.C!=null&&(this.C=null,Ha(this),dl(this),dt(19))};function Ga(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function au(u,y){var v=null;if(u.g==y){Ga(u),ea(u),u.g=null;var S=2}else if(tl(u.h,y))v=y.D,vn(u.h,y),S=1;else return;if(u.G!=0){if(y.o)if(S==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var U=u.B;S=br(),Je(S,new At(S,v)),Fa(u)}else su(u);else if(U=y.s,U==3||U==0&&0<y.X||!(S==1&&Nh(u,y)||S==2&&dl(u)))switch(v&&0<v.length&&(y=u.h,y.i=y.i.concat(v)),U){case 1:ds(u,5);break;case 4:ds(u,10);break;case 3:ds(u,6);break;default:ds(u,2)}}}function hl(u,y){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*y}function ds(u,y){if(u.j.info("Error code "+y),y==2){var v=A(u.fb,u),S=u.Xa;const U=!S;S=new Dt(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Gi(S,"https"),Qi(S),U?Yi(S.toString(),v):hr(S.toString(),v)}else dt(2);u.G=0,u.l&&u.l.sa(y),ou(u),nu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function ou(u){if(u.G=0,u.ka=[],u.l){const y=nl(u.h);(y.length!=0||u.i.length!=0)&&(z(u.ka,y),z(u.ka,u.i),u.h.i.length=0,F(u.i),u.i.length=0),u.l.ra()}}function lu(u,y,v){var S=v instanceof Dt?Mn(v):new Dt(v);if(S.g!="")y&&(S.g=y+"."+S.g),Qs(S,S.s);else{var U=m.location;S=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;var Y=new Dt(null);S&&Gi(Y,S),y&&(Y.g=y),U&&Qs(Y,U),v&&(Y.l=v),S=Y}return v=u.D,y=u.ya,v&&y&&st(S,v,y),st(S,"VER",u.la),Zi(u,S),S}function cu(u,y,v){if(y&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Ca&&!u.pa?new et(new Ks({eb:v})):new et(u.pa),y.Ha(u.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function uu(){}r=uu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Qa(){}Qa.prototype.g=function(u,y){return new En(u,y)};function En(u,y){ft.call(this),this.g=new Ba(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(u?u["X-WebChannel-Client-Profile"]=y.va:u={"X-WebChannel-Client-Profile":y.va}),this.g.S=u,(u=y&&y.Sb)&&!ie(u)&&(this.g.m=u),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ie(y)&&(this.g.D=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new Or(this)}j(En,ft),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){cl(this.g)},En.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=On(u),u=v);y.i.push(new Wc(y.Ya++,u)),y.G==3&&Fa(y)},En.prototype.N=function(){this.g.l=null,delete this.j,cl(this.g),delete this.g,En.aa.N.call(this)};function du(u){kn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const v in y){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}j(du,kn);function hu(){zi.call(this),this.status=1}j(hu,zi);function Or(u){this.g=u}j(Or,uu),Or.prototype.ua=function(){Je(this.g,"a")},Or.prototype.ta=function(u){Je(this.g,new du(u))},Or.prototype.sa=function(u){Je(this.g,new hu)},Or.prototype.ra=function(){Je(this.g,"b")},Qa.prototype.createWebChannel=Qa.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,iw=function(){return new Qa},sw=function(){return br()},rw=Kn,Km={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},An.NO_ERROR=0,An.TIMEOUT=8,An.HTTP_ERROR=6,Td=An,rs.COMPLETE="complete",nw=rs,Bs.EventType=ur,ur.OPEN="a",ur.CLOSE="b",ur.ERROR="c",ur.MESSAGE="d",ft.prototype.listen=ft.prototype.K,ic=Bs,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,tw=et}).apply(typeof fd<"u"?fd:typeof self<"u"?self:typeof window<"u"?window:{});const rv="@firebase/firestore",sv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new yg("@firebase/firestore");function To(){return Ta.logLevel}function ge(r,...e){if(Ta.logLevel<=ze.DEBUG){const t=e.map(Eg);Ta.debug(`Firestore (${Fo}): ${r}`,...t)}}function Ns(r,...e){if(Ta.logLevel<=ze.ERROR){const t=e.map(Eg);Ta.error(`Firestore (${Fo}): ${r}`,...t)}}function ko(r,...e){if(Ta.logLevel<=ze.WARN){const t=e.map(Eg);Ta.warn(`Firestore (${Fo}): ${r}`,...t)}}function Eg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,aw(r,i,t)}function aw(r,e,t){let i=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ns(i),new Error(i)}function Ke(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||aw(e,o,i)}function De(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Ms{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fn.UNAUTHENTICATED)))}shutdown(){}}class w1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class T1{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let c=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new qr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new qr)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string",31837,{l:i}),new ow(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class b1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class S1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new b1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const i=c=>{c.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ge("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new iv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=x1(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<t&&(i+=e.charAt(o[c]%62))}return i}}function qe(r,e){return r<e?-1:r>e?1:0}function Ym(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),c=e.charAt(i);if(o!==c)return km(o)===km(c)?qe(o,c):km(o)?1:-1}return qe(r.length,e.length)}const R1=55296,I1=57343;function km(r){const e=r.charCodeAt(0);return e>=R1&&e<=I1}function Mo(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="__name__";class zr{constructor(e,t,i){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&we(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return zr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const c=zr.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return qe(e.length,t.length)}static compareSegments(e,t){const i=zr.isNumericId(e),o=zr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?zr.extractNumericId(e).compare(zr.extractNumericId(t)):Ym(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Si.fromString(e.substring(4,e.length-2))}}class lt extends zr{construct(e,t,i){return new lt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const C1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends zr{construct(e,t,i){return new an(e,t,i)}static isValidIdentifier(e){return C1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===av}static keyField(){return new an([av])}static fromServerFormat(e){const t=[];let i="",o=0;const c=()=>{if(i.length===0)throw new he(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(i+=m,o++):(c(),o++)}if(c(),d)throw new he(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(t)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(lt.fromString(e))}static fromName(e){return new Ee(lt.fromString(e).popFirst(5))}static empty(){return new Ee(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(r,e,t){if(!t)throw new he(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function N1(r,e,t,i){if(e===!0&&i===!0)throw new he(W.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ov(r){if(!Ee.isDocumentKey(r))throw new he(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function lv(r){if(Ee.isDocumentKey(r))throw new he(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function cw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function rh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":we(12329,{type:typeof r})}function Dn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rh(r);throw new he(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function D1(r,e){if(e<=0)throw new he(W.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Oc(r,e){if(!cw(r))throw new he(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const d=r[i];if(o&&typeof d!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${i}' field to equal '${c.value}'`;break}}if(t)throw new he(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=-62135596800,uv=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*uv);return new Ye(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<cv)throw new he(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uv}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oc(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:jt("string",Ye._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Ye(0,0))}static max(){return new xe(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=-1;function P1(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(i===1e9?new Ye(t+1,0):new Ye(t,i));return new Ii(o,Ee.empty(),e)}function O1(r){return new Ii(r.readTime,r.key,vc)}class Ii{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ii(xe.min(),Ee.empty(),vc)}static max(){return new Ii(xe.max(),Ee.empty(),vc)}}function k1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(r.documentKey,e.documentKey),t!==0?t:qe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==M1)throw r;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,i)=>{t(e)}))}static reject(e){return new te(((t,i)=>{i(e)}))}static waitFor(e){return new te(((t,i)=>{let o=0,c=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++c,d&&c===o&&t()}),(g=>i(g)))})),d=!0,c===o&&t()}))}static or(e){let t=te.resolve(!1);for(const i of e)t=t.next((o=>o?te.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,c)=>{i.push(t.call(this,o,c))})),this.waitFor(i)}static mapArray(e,t){return new te(((i,o)=>{const c=e.length,d=new Array(c);let m=0;for(let g=0;g<c;g++){const _=g;t(e[_]).next((w=>{d[_]=w,++m,m===c&&i(d)}),(w=>o(w)))}}))}static doWhile(e,t){return new te(((i,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):i()};c()}))}}function j1(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=-1;function kc(r){return r==null}function kd(r){return r===0&&1/r==-1/0}function L1(r){return typeof r=="number"&&Number.isInteger(r)&&!kd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="";function U1(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=dv(e)),e=z1(r.get(t),e);return dv(e)}function z1(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const c=r.charAt(o);switch(c){case"\0":t+="";break;case uw:t+="";break;default:t+=c}}return t}function dv(r){return r+uw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Mi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function dw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,t,i,o,c){this.key=e,this.value=t,this.color=i??sn.RED,this.left=o??sn.EMPTY,this.right=c??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,c){return new sn(e??this.key,t??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,i),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return sn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,i,o,c){return this}insert(e,t,i){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fv(this.data.getIterator())}getIteratorFrom(e){return new fv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class fv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new Gn([])}unionWith(e){let t=new Bt(an.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new hw("Invalid base64 string: "+c):c}})(e);return new on(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const q1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(r){if(Ke(!!r,39018),typeof r=="string"){let e=0;const t=q1.exec(r);if(Ke(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ct(r.seconds),nanos:Ct(r.nanos)}}function Ct(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ni(r){return typeof r=="string"?on.fromBase64String(r):on.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="server_timestamp",mw="__type__",gw="__previous_value__",pw="__local_write_time__";function bg(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[mw])==null?void 0:i.stringValue)===fw}function ih(r){const e=r.mapValue.fields[gw];return bg(e)?ih(e):e}function Ec(r){const e=Ci(r.mapValue.fields[pw].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,t,i,o,c,d,m,g,_,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=w}}const Md="(default)";class wc{constructor(e,t){this.projectId=e,this.database=t||Md}static empty(){return new wc("","")}get isDefaultDatabase(){return this.database===Md}isEqual(e){return e instanceof wc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="__type__",H1="__max__",gd={mapValue:{}},_w="__vector__",Vd="value";function Di(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?bg(r)?4:G1(r)?9007199254740991:F1(r)?10:11:we(28295,{value:r})}function Kr(r,e){if(r===e)return!0;const t=Di(r);if(t!==Di(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ec(r).isEqual(Ec(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=Ci(o.timestampValue),m=Ci(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return Ni(o.bytesValue).isEqual(Ni(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return Ct(o.geoPointValue.latitude)===Ct(c.geoPointValue.latitude)&&Ct(o.geoPointValue.longitude)===Ct(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Ct(o.integerValue)===Ct(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=Ct(o.doubleValue),m=Ct(c.doubleValue);return d===m?kd(d)===kd(m):isNaN(d)&&isNaN(m)}return!1})(r,e);case 9:return Mo(r.arrayValue.values||[],e.arrayValue.values||[],Kr);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},m=c.mapValue.fields||{};if(hv(d)!==hv(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!Kr(d[g],m[g])))return!1;return!0})(r,e);default:return we(52216,{left:r})}}function Tc(r,e){return(r.values||[]).find((t=>Kr(t,e)))!==void 0}function Vo(r,e){if(r===e)return 0;const t=Di(r),i=Di(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const m=Ct(c.integerValue||c.doubleValue),g=Ct(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return mv(r.timestampValue,e.timestampValue);case 4:return mv(Ec(r),Ec(e));case 5:return Ym(r.stringValue,e.stringValue);case 6:return(function(c,d){const m=Ni(c),g=Ni(d);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const m=c.split("/"),g=d.split("/");for(let _=0;_<m.length&&_<g.length;_++){const w=qe(m[_],g[_]);if(w!==0)return w}return qe(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const m=qe(Ct(c.latitude),Ct(d.latitude));return m!==0?m:qe(Ct(c.longitude),Ct(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return gv(r.arrayValue,e.arrayValue);case 10:return(function(c,d){var A,I,j,F;const m=c.fields||{},g=d.fields||{},_=(A=m[Vd])==null?void 0:A.arrayValue,w=(I=g[Vd])==null?void 0:I.arrayValue,b=qe(((j=_==null?void 0:_.values)==null?void 0:j.length)||0,((F=w==null?void 0:w.values)==null?void 0:F.length)||0);return b!==0?b:gv(_,w)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===gd.mapValue&&d===gd.mapValue)return 0;if(c===gd.mapValue)return 1;if(d===gd.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),_=d.fields||{},w=Object.keys(_);g.sort(),w.sort();for(let b=0;b<g.length&&b<w.length;++b){const A=Ym(g[b],w[b]);if(A!==0)return A;const I=Vo(m[g[b]],_[w[b]]);if(I!==0)return I}return qe(g.length,w.length)})(r.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function mv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return qe(r,e);const t=Ci(r),i=Ci(e),o=qe(t.seconds,i.seconds);return o!==0?o:qe(t.nanos,i.nanos)}function gv(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const c=Vo(t[o],i[o]);if(c)return c}return qe(t.length,i.length)}function jo(r){return Xm(r)}function Xm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Ci(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ni(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ee.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const c of t.values||[])o?o=!1:i+=",",i+=Xm(c);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const d of i)c?c=!1:o+=",",o+=`${d}:${Xm(t.fields[d])}`;return o+"}"})(r.mapValue):we(61005,{value:r})}function bd(r){switch(Di(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ih(r);return e?16+bd(e):16;case 5:return 2*r.stringValue.length;case 6:return Ni(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,c)=>o+bd(c)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Mi(i.fields,((c,d)=>{o+=c.length+bd(d)})),o})(r.mapValue);default:throw we(13486,{value:r})}}function pv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function $m(r){return!!r&&"integerValue"in r}function Sg(r){return!!r&&"arrayValue"in r}function yv(r){return!!r&&"nullValue"in r}function _v(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Sd(r){return!!r&&"mapValue"in r}function F1(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[yw])==null?void 0:i.stringValue)===_w}function dc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Mi(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=dc(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dc(r.arrayValue.values[t]);return e}return{...r}}function G1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===H1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Sd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dc(t)}setAll(e){let t=an.emptyPath(),i={},o=[];e.forEach(((d,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}d?i[m.lastSegment()]=dc(d):o.push(m.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,i,o)}delete(e){const t=this.field(e.popLast());Sd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Sd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Mi(t,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new Tn(dc(this.value))}}function vw(r){const e=[];return Mi(r.fields,((t,i)=>{const o=new an([t]);if(Sd(i)){const c=vw(i.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,i,o,c,d,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new $t(e,0,xe.min(),xe.min(),xe.min(),Tn.empty(),0)}static newFoundDocument(e,t,i,o){return new $t(e,1,t,xe.min(),i,o,0)}static newNoDocument(e,t){return new $t(e,2,t,xe.min(),xe.min(),Tn.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,xe.min(),xe.min(),Tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t){this.position=e,this.inclusive=t}}function vv(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const c=e[o],d=r.position[o];if(c.field.isKeyField()?i=Ee.comparator(Ee.fromName(d.referenceValue),t.key):i=Vo(d,t.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ev(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Kr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Q1(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{}class Vt extends Ew{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Y1(e,t,i):t==="array-contains"?new W1(e,i):t==="in"?new J1(e,i):t==="not-in"?new Z1(e,i):t==="array-contains-any"?new eR(e,i):new Vt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new X1(e,i):new $1(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vo(t,this.value)):t!==null&&Di(this.value)===Di(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _r extends Ew{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new _r(e,t)}matches(e){return ww(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ww(r){return r.op==="and"}function Tw(r){return K1(r)&&ww(r)}function K1(r){for(const e of r.filters)if(e instanceof _r)return!1;return!0}function Wm(r){if(r instanceof Vt)return r.field.canonicalString()+r.op.toString()+jo(r.value);if(Tw(r))return r.filters.map((e=>Wm(e))).join(",");{const e=r.filters.map((t=>Wm(t))).join(",");return`${r.op}(${e})`}}function bw(r,e){return r instanceof Vt?(function(i,o){return o instanceof Vt&&i.op===o.op&&i.field.isEqual(o.field)&&Kr(i.value,o.value)})(r,e):r instanceof _r?(function(i,o){return o instanceof _r&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,d,m)=>c&&bw(d,o.filters[m])),!0):!1})(r,e):void we(19439)}function Sw(r){return r instanceof Vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${jo(t.value)}`})(r):r instanceof _r?(function(t){return t.op.toString()+" {"+t.getFilters().map(Sw).join(" ,")+"}"})(r):"Filter"}class Y1 extends Vt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class X1 extends Vt{constructor(e,t){super(e,"in",t),this.keys=Aw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class $1 extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=Aw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Aw(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class W1 extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sg(t)&&Tc(t.arrayValue,this.value)}}class J1 extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Tc(this.value.arrayValue,t)}}class Z1 extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tc(this.value.arrayValue,t)}}class eR extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Tc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,t=null,i=[],o=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=d,this.endAt=m,this.Te=null}}function wv(r,e=null,t=[],i=[],o=null,c=null,d=null){return new tR(r,e,t,i,o,c,d)}function Ag(r){const e=De(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Wm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),kc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>jo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>jo(i))).join(",")),e.Te=t}return e.Te}function xg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Q1(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!bw(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Ev(r.startAt,e.startAt)&&Ev(r.endAt,e.endAt)}function Jm(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t=null,i=[],o=[],c=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function nR(r,e,t,i,o,c,d,m){return new Ko(r,e,t,i,o,c,d,m)}function ah(r){return new Ko(r)}function Tv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function xw(r){return r.collectionGroup!==null}function hc(r){const e=De(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Bt(an.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new bc(c,i))})),t.has(an.keyField().canonicalString())||e.Ie.push(new bc(an.keyField(),i))}return e.Ie}function Br(r){const e=De(r);return e.Ee||(e.Ee=rR(e,hc(r))),e.Ee}function rR(r,e){if(r.limitType==="F")return wv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new bc(o.field,c)}));const t=r.endAt?new jd(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new jd(r.startAt.position,r.startAt.inclusive):null;return wv(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Zm(r,e){const t=r.filters.concat([e]);return new Ko(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ld(r,e,t){return new Ko(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function oh(r,e){return xg(Br(r),Br(e))&&r.limitType===e.limitType}function Rw(r){return`${Ag(Br(r))}|lt:${r.limitType}`}function bo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Sw(o))).join(", ")}]`),kc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>jo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>jo(o))).join(",")),`Target(${i})`})(Br(r))}; limitType=${r.limitType})`}function lh(r,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Ee.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(r,e)&&(function(i,o){for(const c of hc(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(d,m,g){const _=vv(d,m,g);return d.inclusive?_<=0:_<0})(i.startAt,hc(i),o)||i.endAt&&!(function(d,m,g){const _=vv(d,m,g);return d.inclusive?_>=0:_>0})(i.endAt,hc(i),o))})(r,e)}function sR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Iw(r){return(e,t)=>{let i=!1;for(const o of hc(r)){const c=iR(o,e,t);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function iR(r,e,t){const i=r.field.isKeyField()?Ee.comparator(e.key,t.key):(function(c,d,m){const g=d.data.field(c),_=m.data.field(c);return g!==null&&_!==null?Vo(g,_):we(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Mi(this.inner,((t,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return dw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=new Et(Ee.comparator);function Ds(){return aR}const Cw=new Et(Ee.comparator);function ac(...r){let e=Cw;for(const t of r)e=e.insert(t.key,t);return e}function Nw(r){let e=Cw;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ya(){return fc()}function Dw(){return fc()}function fc(){return new Aa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const oR=new Et(Ee.comparator),lR=new Bt(Ee.comparator);function Be(...r){let e=lR;for(const t of r)e=e.add(t);return e}const cR=new Bt(qe);function uR(){return cR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kd(e)?"-0":e}}function Pw(r){return{integerValue:""+r}}function Ow(r,e){return L1(e)?Pw(e):Rg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(){this._=void 0}}function dR(r,e,t){return r instanceof Ud?(function(o,c){const d={fields:{[mw]:{stringValue:fw},[pw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&bg(c)&&(c=ih(c)),c&&(d.fields[gw]=c),{mapValue:d}})(t,e):r instanceof Sc?Mw(r,e):r instanceof Ac?Vw(r,e):(function(o,c){const d=kw(o,c),m=bv(d)+bv(o.Ae);return $m(d)&&$m(o.Ae)?Pw(m):Rg(o.serializer,m)})(r,e)}function hR(r,e,t){return r instanceof Sc?Mw(r,e):r instanceof Ac?Vw(r,e):t}function kw(r,e){return r instanceof xc?(function(i){return $m(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class Ud extends ch{}class Sc extends ch{constructor(e){super(),this.elements=e}}function Mw(r,e){const t=jw(e);for(const i of r.elements)t.some((o=>Kr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Ac extends ch{constructor(e){super(),this.elements=e}}function Vw(r,e){let t=jw(e);for(const i of r.elements)t=t.filter((o=>!Kr(o,i)));return{arrayValue:{values:t}}}class xc extends ch{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bv(r){return Ct(r.integerValue||r.doubleValue)}function jw(r){return Sg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,t){this.field=e,this.transform=t}}function mR(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof Sc&&o instanceof Sc||i instanceof Ac&&o instanceof Ac?Mo(i.elements,o.elements,Kr):i instanceof xc&&o instanceof xc?Kr(i.Ae,o.Ae):i instanceof Ud&&o instanceof Ud})(r.transform,e.transform)}class gR{constructor(e,t){this.version=e,this.transformResults=t}}class mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mn}static exists(e){return new mn(void 0,e)}static updateTime(e){return new mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ad(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class uh{}function Lw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Ig(r.key,mn.none()):new Mc(r.key,r.data,mn.none());{const t=r.data,i=Tn.empty();let o=new Bt(an.comparator);for(let c of e.fields)if(!o.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?i.delete(c):i.set(c,d),o=o.add(c)}return new Vi(r.key,i,new Gn(o.toArray()),mn.none())}}function pR(r,e,t){r instanceof Mc?(function(o,c,d){const m=o.value.clone(),g=Av(o.fieldTransforms,c,d.transformResults);m.setAll(g),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(r,e,t):r instanceof Vi?(function(o,c,d){if(!Ad(o.precondition,c))return void c.convertToUnknownDocument(d.version);const m=Av(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(Uw(o)),g.setAll(m),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,t):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function mc(r,e,t,i){return r instanceof Mc?(function(c,d,m,g){if(!Ad(c.precondition,d))return m;const _=c.value.clone(),w=xv(c.fieldTransforms,g,d);return _.setAll(w),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(r,e,t,i):r instanceof Vi?(function(c,d,m,g){if(!Ad(c.precondition,d))return m;const _=xv(c.fieldTransforms,g,d),w=d.data;return w.setAll(Uw(c)),w.setAll(_),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(r,e,t,i):(function(c,d,m){return Ad(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(r,e,t)}function yR(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),c=kw(i.transform,o||null);c!=null&&(t===null&&(t=Tn.empty()),t.set(i.field,c))}return t||null}function Sv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Mo(i,o,((c,d)=>mR(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Mc extends uh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Vi extends uh{constructor(e,t,i,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Uw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Av(r,e,t){const i=new Map;Ke(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const c=r[o],d=c.transform,m=e.data.field(c.field);i.set(c.field,hR(d,m,t[o]))}return i}function xv(r,e,t){const i=new Map;for(const o of r){const c=o.transform,d=t.data.field(o.field);i.set(o.field,dR(c,d,e))}return i}class Ig extends uh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zw extends uh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&pR(c,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=mc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=mc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Dw();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=t.has(o.key)?null:m;const g=Lw(d,m);g!==null&&i.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(xe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,((t,i)=>Sv(t,i)))&&Mo(this.baseMutations,e.baseMutations,((t,i)=>Sv(t,i)))}}class Cg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ke(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return oR})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,i[d].version);return new Cg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Qe;function qw(r){switch(r){case W.OK:return we(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return we(15467,{code:r})}}function Bw(r){if(r===void 0)return Ns("GRPC error has no .code"),W.UNKNOWN;switch(r){case kt.OK:return W.OK;case kt.CANCELLED:return W.CANCELLED;case kt.UNKNOWN:return W.UNKNOWN;case kt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case kt.INTERNAL:return W.INTERNAL;case kt.UNAVAILABLE:return W.UNAVAILABLE;case kt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case kt.NOT_FOUND:return W.NOT_FOUND;case kt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case kt.ABORTED:return W.ABORTED;case kt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case kt.DATA_LOSS:return W.DATA_LOSS;default:return we(39323,{code:r})}}(Qe=kt||(kt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=new Si([4294967295,4294967295],0);function Rv(r){const e=wR().encode(r),t=new ew;return t.update(e),new Uint8Array(t.digest())}function Iv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Si([t,i],0),new Si([o,c],0)]}class Ng{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new oc(`Invalid padding: ${t}`);if(i<0)throw new oc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new oc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new oc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Si.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Si.fromNumber(i)));return o.compare(TR)===1&&(o=new Si([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Rv(e),[i,o]=Iv(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(i,o,c);if(!this.we(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Ng(c,o,t);return i.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const t=Rv(e),[i,o]=Iv(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(i,o,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,t,i,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Vc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new dh(xe.min(),o,new Et(qe),Ds(),Be())}}class Vc{constructor(e,t,i,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Vc(i,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class Hw{constructor(e,t){this.targetId=e,this.Ce=t}}class Fw{constructor(e,t,i=on.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Cv{constructor(){this.ve=0,this.Fe=Nv(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),i=Be();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:we(38017,{changeType:c})}})),new Vc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Nv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ds(),this.Je=pd(),this.He=pd(),this.Ye=new Et(qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(Jm(c))if(i===0){const d=new Ee(c.path);this.et(t,d,$t.newNoDocument(d,xe.min()))}else Ke(i===1,20013,{expectedCount:i});else{const d=this._t(t);if(d!==i){const m=this.ut(e),g=m?this.ct(m,e,d):1;if(g!==0){this.it(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,_)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=t;let d,m;try{d=Ni(i).toUint8Array()}catch(g){if(g instanceof hw)return ko("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Ng(d,o,c)}catch(g){return ko(g instanceof oc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((c=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const m=this.ot(d);if(m){if(c.current&&Jm(m.target)){const g=new Ee(m.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,$t.newNoDocument(g,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let i=Be();this.He.forEach(((c,d)=>{let m=!0;d.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new dh(e,t,this.Ye,this.je,i);return this.je=Ds(),this.Je=pd(),this.He=pd(),this.Ye=new Et(qe),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Cv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Bt(qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Bt(qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Cv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function pd(){return new Et(Ee.comparator)}function Nv(){return new Et(Ee.comparator)}const SR={asc:"ASCENDING",desc:"DESCENDING"},AR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xR={and:"AND",or:"OR"};class RR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function eg(r,e){return r.useProto3Json||kc(e)?e:{value:e}}function zd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function IR(r,e){return zd(r,e.toTimestamp())}function Qn(r){return Ke(!!r,49232),xe.fromTimestamp((function(t){const i=Ci(t);return new Ye(i.seconds,i.nanos)})(r))}function Dg(r,e){return tg(r,e).canonicalString()}function tg(r,e){const t=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Qw(r){const e=lt.fromString(r);return Ke(Jw(e),10190,{key:e.toString()}),e}function qd(r,e){return Dg(r.databaseId,e.path)}function gc(r,e){const t=Qw(e);if(t.get(1)!==r.databaseId.projectId)throw new he(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new he(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ee(Yw(t))}function Kw(r,e){return Dg(r.databaseId,e)}function CR(r){const e=Qw(r);return e.length===4?lt.emptyPath():Yw(e)}function ng(r){return new lt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Yw(r){return Ke(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Dv(r,e,t){return{name:qd(r,e),fields:t.value.mapValue.fields}}function NR(r,e){return"found"in e?(function(i,o){Ke(!!o.found,43571),o.found.name,o.found.updateTime;const c=gc(i,o.found.name),d=Qn(o.found.updateTime),m=o.found.createTime?Qn(o.found.createTime):xe.min(),g=new Tn({mapValue:{fields:o.found.fields}});return $t.newFoundDocument(c,d,m,g)})(r,e):"missing"in e?(function(i,o){Ke(!!o.missing,3894),Ke(!!o.readTime,22933);const c=gc(i,o.missing),d=Qn(o.readTime);return $t.newNoDocument(c,d)})(r,e):we(7234,{result:e})}function DR(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:we(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(_,w){return _.useProto3Json?(Ke(w===void 0||typeof w=="string",58123),on.fromBase64String(w||"")):(Ke(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),on.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(_){const w=_.code===void 0?W.UNKNOWN:Bw(_.code);return new he(w,_.message||"")})(d);t=new Fw(i,o,c,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=gc(r,i.document.name),c=Qn(i.document.updateTime),d=i.document.createTime?Qn(i.document.createTime):xe.min(),m=new Tn({mapValue:{fields:i.document.fields}}),g=$t.newFoundDocument(o,c,d,m),_=i.targetIds||[],w=i.removedTargetIds||[];t=new xd(_,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=gc(r,i.document),c=i.readTime?Qn(i.readTime):xe.min(),d=$t.newNoDocument(o,c),m=i.removedTargetIds||[];t=new xd([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=gc(r,i.document),c=i.removedTargetIds||[];t=new xd([],c,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,d=new ER(o,c),m=i.targetId;t=new Hw(m,d)}}return t}function Xw(r,e){let t;if(e instanceof Mc)t={update:Dv(r,e.key,e.value)};else if(e instanceof Ig)t={delete:qd(r,e.key)};else if(e instanceof Vi)t={update:Dv(r,e.key,e.data),updateMask:zR(e.fieldMask)};else{if(!(e instanceof zw))return we(16599,{Vt:e.type});t={verify:qd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(c,d){const m=d.transform;if(m instanceof Ud)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Sc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ac)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof xc)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw we(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:IR(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:we(27497)})(r,e.precondition)),t}function PR(r,e){return r&&r.length>0?(Ke(e!==void 0,14353),r.map((t=>(function(o,c){let d=o.updateTime?Qn(o.updateTime):Qn(c);return d.isEqual(xe.min())&&(d=Qn(c)),new gR(d,o.transformResults||[])})(t,e)))):[]}function OR(r,e){return{documents:[Kw(r,e.path)]}}function kR(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Kw(r,o);const c=(function(_){if(_.length!==0)return Ww(_r.create(_,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(_){if(_.length!==0)return _.map((w=>(function(A){return{field:So(A.field),direction:jR(A.dir)}})(w)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=eg(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:t,parent:o}}function MR(r){let e=CR(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ke(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let c=[];t.where&&(c=(function(b){const A=$w(b);return A instanceof _r&&Tw(A)?A.getFilters():[A]})(t.where));let d=[];t.orderBy&&(d=(function(b){return b.map((A=>(function(j){return new bc(Ao(j.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(A)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let A;return A=typeof b=="object"?b.value:b,kc(A)?null:A})(t.limit));let g=null;t.startAt&&(g=(function(b){const A=!!b.before,I=b.values||[];return new jd(I,A)})(t.startAt));let _=null;return t.endAt&&(_=(function(b){const A=!b.before,I=b.values||[];return new jd(I,A)})(t.endAt)),nR(e,o,d,c,m,"F",g,_)}function VR(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $w(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ao(t.unaryFilter.field);return Vt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Ao(t.unaryFilter.field);return Vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ao(t.unaryFilter.field);return Vt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ao(t.unaryFilter.field);return Vt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Vt.create(Ao(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return _r.create(t.compositeFilter.filters.map((i=>$w(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(r):we(30097,{filter:r})}function jR(r){return SR[r]}function LR(r){return AR[r]}function UR(r){return xR[r]}function So(r){return{fieldPath:r.canonicalString()}}function Ao(r){return an.fromServerFormat(r.fieldPath)}function Ww(r){return r instanceof Vt?(function(t){if(t.op==="=="){if(_v(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NAN"}};if(yv(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_v(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NAN"}};if(yv(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(t.field),op:LR(t.op),value:t.value}}})(r):r instanceof _r?(function(t){const i=t.getFilters().map((o=>Ww(o)));return i.length===1?i[0]:{compositeFilter:{op:UR(t.op),filters:i}}})(r):we(54877,{filter:r})}function zR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Jw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t,i,o,c=xe.min(),d=xe.min(),m=on.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.yt=e}}function BR(r){const e=MR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ld(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.Cn=new FR}addToCollectionParentIndex(e,t){return this.Cn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Ii.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Ii.min())}updateCollectionGroup(e,t,i){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class FR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Bt(lt.comparator),c=!o.has(i);return this.index[t]=o.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Bt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zw=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(Zw,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lo(0)}static cr(){return new Lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="LruGarbageCollector",GR=1048576;function kv([r,e],[t,i]){const o=qe(r,t);return o===0?qe(e,i):o}class QR{constructor(e){this.Ir=e,this.buffer=new Bt(kv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();kv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(Ov,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qo(t)?ge(Ov,"Ignoring IndexedDB error during garbage collection: ",t):await Go(t)}await this.Vr(3e5)}))}}class YR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(sh.ce);const i=new QR(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(Pv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,c,d,m,g,_;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,d=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(i=b,m=Date.now(),this.removeTargets(e,i,t)))).next((b=>(c=b,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(_=Date.now(),To()<=ze.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(_-g)+`ms
Total Duration: ${_-w}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:b}))))}}function XR(r,e){return new YR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.changes=new Aa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&mc(i.mutation,o,Gn.empty(),Ye.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Be()){const o=ya();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((c=>{let d=ac();return c.forEach(((m,g)=>{d=d.insert(m,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=ya();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Be())))}populateOverlays(e,t,i){const o=[];return i.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,m)=>{t.set(d,m)}))}))}computeViews(e,t,i,o){let c=Ds();const d=fc(),m=(function(){return fc()})();return t.forEach(((g,_)=>{const w=i.get(_.key);o.has(_.key)&&(w===void 0||w.mutation instanceof Vi)?c=c.insert(_.key,_):w!==void 0?(d.set(_.key,w.mutation.getFieldMask()),mc(w.mutation,_,w.mutation.getFieldMask(),Ye.now())):d.set(_.key,Gn.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((_,w)=>d.set(_,w))),t.forEach(((_,w)=>m.set(_,new WR(w,d.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=fc();let o=new Et(((d,m)=>d-m)),c=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const m of d)m.keys().forEach((g=>{const _=t.get(g);if(_===null)return;let w=i.get(g)||Gn.empty();w=m.applyToLocalView(_,w),i.set(g,w);const b=(o.get(m.batchId)||Be()).add(g);o=o.insert(m.batchId,b)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,w=g.value,b=Dw();w.forEach((A=>{if(!c.has(A)){const I=Lw(t.get(A),i.get(A));I!==null&&b.set(A,I),c=c.add(A)}})),d.push(this.documentOverlayCache.saveOverlays(e,_,b))}return te.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(d){return Ee.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-c.size):te.resolve(ya());let m=vc,g=c;return d.next((_=>te.forEach(_,((w,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),c.get(w)?te.resolve():this.remoteDocumentCache.getEntry(e,w).next((A=>{g=g.insert(w,A)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,g,_,Be()))).next((w=>({batchId:m,changes:Nw(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=ac();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const c=t.collectionGroup;let d=ac();return this.indexManager.getCollectionParents(e,c).next((m=>te.forEach(m,(g=>{const _=(function(b,A){return new Ko(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next((w=>{w.forEach(((b,A)=>{d=d.insert(b,A)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,c,o)))).next((d=>{c.forEach(((g,_)=>{const w=_.getKey();d.get(w)===null&&(d=d.insert(w,$t.newInvalidDocument(w)))}));let m=ac();return d.forEach(((g,_)=>{const w=c.get(g);w!==void 0&&mc(w.mutation,_,Gn.empty(),Ye.now()),lh(t,_)&&(m=m.insert(g,_))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Qn(o.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:BR(o.bundledQuery),readTime:Qn(o.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.overlays=new Et(Ee.comparator),this.qr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ya();return te.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,c)=>{this.St(e,t,c)})),te.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(i)),te.resolve()}getOverlaysForCollection(e,t,i){const o=ya(),c=t.length+1,d=new Ee(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===c&&g.largestBatchId>i&&o.set(g.getKey(),g)}return te.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let c=new Et(((_,w)=>_-w));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let w=c.get(_.largestBatchId);w===null&&(w=ya(),c=c.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const m=ya(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,w)=>m.set(_,w))),!(m.size()>=o)););return te.resolve(m)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new vR(t,i));let c=this.qr.get(t);c===void 0&&(c=Be(),this.qr.set(t,c)),this.qr.set(t,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(){this.Qr=new Bt(Xt.$r),this.Ur=new Bt(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Xt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Xt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ee(new lt([])),i=new Xt(t,e),o=new Xt(t,e+1),c=[];return this.Ur.forEachInRange([i,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new lt([])),i=new Xt(t,e),o=new Xt(t,e+1);let c=Be();return this.Ur.forEachInRange([i,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new Xt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Xt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||qe(e.Yr,t.Yr)}static Kr(e,t){return qe(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Bt(Xt.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new _R(c,t,i,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new Xt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return te.resolve(d)}lookupMutationBatch(e,t){return te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),c=o<0?0:o;return te.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Tg:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Xt(t,0),o=new Xt(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,o],(d=>{const m=this.Xr(d.Yr);c.push(m)})),te.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Bt(qe);return t.forEach((o=>{const c=new Xt(o,0),d=new Xt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(m=>{i=i.add(m.Yr)}))})),te.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let c=i;Ee.isDocumentKey(c)||(c=c.child(""));const d=new Xt(new Ee(c),0);let m=new Bt(qe);return this.Zr.forEachWhile((g=>{const _=g.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Yr)),!0)}),d),te.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return te.forEach(t.mutations,(o=>{const c=new Xt(o.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Xt(t,0),o=this.Zr.firstAfterOrEqual(i);return te.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.ri=e,this.docs=(function(){return new Et(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),c=o?o.size:0,d=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return te.resolve(i?i.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let i=Ds();return t.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():$t.newInvalidDocument(o))})),te.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let c=Ds();const d=t.path,m=new Ee(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:w}}=g.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||k1(O1(w),i)<=0||(o.has(w.key)||lh(t,w))&&(c=c.insert(w.key,w.mutableCopy()))}return te.resolve(c)}getAllFromCollectionGroup(e,t,i,o){we(9500)}ii(e,t){return te.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new sI(this)}getSize(e){return te.resolve(this.size)}}class sI extends $R{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.persistence=e,this.si=new Aa((t=>Ag(t)),xg),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new Pg,this.targetCount=0,this.ai=Lo.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Lo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Pr(t),te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,i){let o=0;const c=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),te.waitFor(c).next((()=>o))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return te.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),te.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),te.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return te.resolve(i)}containsKey(e,t){return te.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,t){this.ui={},this.overlays={},this.ci=new sh(0),this.li=!1,this.li=!0,this.hi=new tI,this.referenceDelegate=e(this),this.Pi=new iI(this),this.indexManager=new HR,this.remoteDocumentCache=(function(o){return new rI(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new qR(t),this.Ii=new ZR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new nI(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ge("MemoryPersistence","Starting transaction:",e);const o=new aI(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return te.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class aI extends V1{constructor(e){super(),this.currentSequenceNumber=e}}class Og{constructor(e){this.persistence=e,this.Ri=new Pg,this.Vi=null}static mi(e){return new Og(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),te.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(i=>{const o=Ee.fromPath(i);return this.gi(e,o).next((c=>{c||t.removeEntry(o,xe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return te.or([()=>te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Bd{constructor(e,t){this.persistence=e,this.pi=new Aa((i=>U1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=XR(this,t)}static mi(e,t){return new Bd(e,t)}Ei(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return te.forEach(this.pi,((i,o)=>this.br(e,i,o).next((c=>c?te.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,t).next((m=>{m||(i++,c.removeEntry(d,xe.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),te.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bd(e.data.value)),t}br(e,t,i){return te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return te.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Be(),o=Be();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new kg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ex()?8:j1(gn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,o,i).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new oI;return this.Ss(e,t,d).next((m=>{if(c.result=m,this.Vs)return this.bs(e,t,d,m.size)}))})).next((()=>c.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(To()<=ze.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(To()<=ze.DEBUG&&ge("QueryEngine","Query:",bo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(To()<=ze.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Br(t))):te.resolve())}ys(e,t){if(Tv(t))return te.resolve(null);let i=Br(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Ld(t,null,"F"),i=Br(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const d=Be(...c);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const _=this.Ds(t,m);return this.Cs(t,_,d,g.readTime)?this.ys(e,Ld(t,null,"F")):this.vs(e,_,t,g)}))))})))))}ws(e,t,i,o){return Tv(t)||o.isEqual(xe.min())?te.resolve(null):this.ps.getDocuments(e,i).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,i,o)?te.resolve(null):(To()<=ze.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(t)),this.vs(e,d,t,P1(o,vc)).next((m=>m)))}))}Ds(e,t){let i=new Bt(Iw(e));return t.forEach(((o,c)=>{lh(e,c)&&(i=i.add(c))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,i){return To()<=ze.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",bo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ii.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="LocalStore",cI=3e8;class uI{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Et(qe),this.xs=new Aa((c=>Ag(c)),xg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function dI(r,e,t,i){return new uI(r,e,t,i)}async function tT(r,e){const t=De(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((c=>{const d=[],m=[];let g=Be();for(const _ of o){d.push(_.batchId);for(const w of _.mutations)g=g.add(w.key)}for(const _ of c){m.push(_.batchId);for(const w of _.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(i,g).next((_=>({Ls:_,removedBatchIds:d,addedBatchIds:m})))}))}))}function hI(r,e){const t=De(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,_,w){const b=_.batch,A=b.keys();let I=te.resolve();return A.forEach((j=>{I=I.next((()=>w.getEntry(g,j))).next((F=>{const z=_.docVersions.get(j);Ke(z!==null,48541),F.version.compareTo(z)<0&&(b.applyToRemoteDocument(F,_),F.isValidDocument()&&(F.setReadTime(_.commitVersion),w.addEntry(F)))}))})),I.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(t,i,e,c).next((()=>c.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=Be();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function nT(r){const e=De(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function fI(r,e){const t=De(r),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((w,b)=>{const A=o.get(b);if(!A)return;m.push(t.Pi.removeMatchingKeys(c,w.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(c,w.addedDocuments,b))));let I=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?I=I.withResumeToken(on.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):w.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(w.resumeToken,i)),o=o.insert(b,I),(function(F,z,re){return F.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=cI?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(A,I,w)&&m.push(t.Pi.updateTargetData(c,I))}));let g=Ds(),_=Be();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,w))})),m.push(mI(c,d,e.documentUpdates).next((w=>{g=w.ks,_=w.qs}))),!i.isEqual(xe.min())){const w=t.Pi.getLastRemoteSnapshotVersion(c).next((b=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i)));m.push(w)}return te.waitFor(m).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,_))).next((()=>g))})).then((c=>(t.Ms=o,c)))}function mI(r,e,t){let i=Be(),o=Be();return t.forEach((c=>i=i.add(c))),e.getEntries(r,i).next((c=>{let d=Ds();return t.forEach(((m,g)=>{const _=c.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(xe.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):ge(Mg,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)})),{ks:d,qs:o}}))}function gI(r,e){const t=De(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Tg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function pI(r,e){const t=De(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((c=>c?(o=c,te.resolve(o)):t.Pi.allocateTargetId(i).next((d=>(o=new vi(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function rg(r,e,t){const i=De(r),o=i.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",c,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Qo(d))throw d;ge(Mg,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Mv(r,e,t){const i=De(r);let o=xe.min(),c=Be();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,_,w){const b=De(g),A=b.xs.get(w);return A!==void 0?te.resolve(b.Ms.get(A)):b.Pi.getTargetData(_,w)})(i,d,Br(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,m.targetId).next((g=>{c=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,t?o:xe.min(),t?c:Be()))).next((m=>(yI(i,sR(e),m),{documents:m,Qs:c})))))}function yI(r,e,t){let i=r.Os.get(e)||xe.min();t.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),r.Os.set(e,i)}class Vv{constructor(){this.activeTargetIds=uR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _I{constructor(){this.Mo=new Vv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Vv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="ConnectivityMonitor";class Lv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(jv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(jv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd=null;function sg(){return yd===null?yd=(function(){return 268435456+Math.round(2147483648*Math.random())})():yd++,"0x"+yd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="RestConnection",EI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Md?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,c){const d=sg(),m=this.zo(e,t.toUriEncodedString());ge(Mm,`Sending RPC '${e}' ${d}:`,m,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:_}=new URL(m),w=Bo(_);return this.Jo(e,m,g,i,w).then((b=>(ge(Mm,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw ko(Mm,`RPC '${e}' ${d} failed with error: `,b,"url: ",m,"request:",i),b}))}Ho(e,t,i,o,c,d){return this.Go(e,t,i,o,c)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),i&&i.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const i=EI[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class bI extends wI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,c){const d=sg();return new Promise(((m,g)=>{const _=new tw;_.setWithCredentials(!0),_.listenOnce(nw.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Td.NO_ERROR:const b=_.getResponseJson();ge(un,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),m(b);break;case Td.TIMEOUT:ge(un,`RPC '${e}' ${d} timed out`),g(new he(W.DEADLINE_EXCEEDED,"Request time out"));break;case Td.HTTP_ERROR:const A=_.getStatus();if(ge(un,`RPC '${e}' ${d} failed with status:`,A,"response text:",_.getResponseText()),A>0){let I=_.getResponseJson();Array.isArray(I)&&(I=I[0]);const j=I==null?void 0:I.error;if(j&&j.status&&j.message){const F=(function(re){const ie=re.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ie)>=0?ie:W.UNKNOWN})(j.status);g(new he(F,j.message))}else g(new he(W.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new he(W.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{ge(un,`RPC '${e}' ${d} completed.`)}}));const w=JSON.stringify(o);ge(un,`RPC '${e}' ${d} sending request:`,o),_.send(t,"POST",w,i,15)}))}T_(e,t,i){const o=sg(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=iw(),m=sw(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const w=c.join("");ge(un,`Creating RPC '${e}' stream ${o}: ${w}`,g);const b=d.createWebChannel(w,g);this.I_(b);let A=!1,I=!1;const j=new TI({Yo:z=>{I?ge(un,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(A||(ge(un,`Opening RPC '${e}' stream ${o} transport.`),b.open(),A=!0),ge(un,`RPC '${e}' stream ${o} sending:`,z),b.send(z))},Zo:()=>b.close()}),F=(z,re,ie)=>{z.listen(re,(se=>{try{ie(se)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return F(b,ic.EventType.OPEN,(()=>{I||(ge(un,`RPC '${e}' stream ${o} transport opened.`),j.o_())})),F(b,ic.EventType.CLOSE,(()=>{I||(I=!0,ge(un,`RPC '${e}' stream ${o} transport closed`),j.a_(),this.E_(b))})),F(b,ic.EventType.ERROR,(z=>{I||(I=!0,ko(un,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),j.a_(new he(W.UNAVAILABLE,"The operation could not be completed")))})),F(b,ic.EventType.MESSAGE,(z=>{var re;if(!I){const ie=z.data[0];Ke(!!ie,16349);const se=ie,fe=(se==null?void 0:se.error)||((re=se[0])==null?void 0:re.error);if(fe){ge(un,`RPC '${e}' stream ${o} received error:`,fe);const le=fe.status;let K=(function(C){const O=kt[C];if(O!==void 0)return Bw(O)})(le),N=fe.message;K===void 0&&(K=W.INTERNAL,N="Unknown error status: "+le+" with message "+fe.message),I=!0,j.a_(new he(K,N)),b.close()}else ge(un,`RPC '${e}' stream ${o} received:`,ie),j.u_(ie)}})),F(m,rw.STAT_EVENT,(z=>{z.stat===Km.PROXY?ge(un,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===Km.NOPROXY&&ge(un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(r){return new RR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,t,i=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="PersistentStream";class rT{constructor(e,t,i,o,c,d,m,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Vg(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Ns(t.toString()),Ns("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new he(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(Uv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ge(Uv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SI extends rT{constructor(e,t,i,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=DR(this.serializer,e),i=(function(c){if(!("targetChange"in c))return xe.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?xe.min():d.readTime?Qn(d.readTime):xe.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=ng(this.serializer),t.addTarget=(function(c,d){let m;const g=d.target;if(m=Jm(g)?{documents:OR(c,g)}:{query:kR(c,g).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=Gw(c,d.resumeToken);const _=eg(c,d.expectedCount);_!==null&&(m.expectedCount=_)}else if(d.snapshotVersion.compareTo(xe.min())>0){m.readTime=zd(c,d.snapshotVersion.toTimestamp());const _=eg(c,d.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const i=VR(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=ng(this.serializer),t.removeTarget=e,this.q_(t)}}class AI extends rT{constructor(e,t,i,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=PR(e.writeResults,e.commitTime),i=Qn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=ng(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Xw(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{}class RI extends xI{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,tg(t,i),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(W.UNKNOWN,c.toString())}))}Ho(e,t,i,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,tg(t,i),o,d,m,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new he(W.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class II{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ns(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="RemoteStore";class CI{constructor(e,t,i,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{xa(this)&&(ge(ba,"Restarting streams for network reachability change."),await(async function(g){const _=De(g);_.Ea.add(4),await jc(_),_.Ra.set("Unknown"),_.Ea.delete(4),await fh(_)})(this))}))})),this.Ra=new II(i,o)}}async function fh(r){if(xa(r))for(const e of r.da)await e(!0)}async function jc(r){for(const e of r.da)await e(!1)}function sT(r,e){const t=De(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),zg(t)?Ug(t):Yo(t).O_()&&Lg(t,e))}function jg(r,e){const t=De(r),i=Yo(t);t.Ia.delete(e),i.O_()&&iT(t,e),t.Ia.size===0&&(i.O_()?i.L_():xa(t)&&t.Ra.set("Unknown"))}function Lg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yo(r).Y_(e)}function iT(r,e){r.Va.Ue(e),Yo(r).Z_(e)}function Ug(r){r.Va=new bR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Yo(r).start(),r.Ra.ua()}function zg(r){return xa(r)&&!Yo(r).x_()&&r.Ia.size>0}function xa(r){return De(r).Ea.size===0}function aT(r){r.Va=void 0}async function NI(r){r.Ra.set("Online")}async function DI(r){r.Ia.forEach(((e,t)=>{Lg(r,e)}))}async function PI(r,e){aT(r),zg(r)?(r.Ra.ha(e),Ug(r)):r.Ra.set("Unknown")}async function OI(r,e,t){if(r.Ra.set("Online"),e instanceof Fw&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(i){ge(ba,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Hd(r,i)}else if(e instanceof xd?r.Va.Ze(e):e instanceof Hw?r.Va.st(e):r.Va.tt(e),!t.isEqual(xe.min()))try{const i=await nT(r.localStore);t.compareTo(i)>=0&&await(function(c,d){const m=c.Va.Tt(d);return m.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const w=c.Ia.get(_);w&&c.Ia.set(_,w.withResumeToken(g.resumeToken,d))}})),m.targetMismatches.forEach(((g,_)=>{const w=c.Ia.get(g);if(!w)return;c.Ia.set(g,w.withResumeToken(on.EMPTY_BYTE_STRING,w.snapshotVersion)),iT(c,g);const b=new vi(w.target,g,_,w.sequenceNumber);Lg(c,b)})),c.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(i){ge(ba,"Failed to raise snapshot:",i),await Hd(r,i)}}async function Hd(r,e,t){if(!Qo(e))throw e;r.Ea.add(1),await jc(r),r.Ra.set("Offline"),t||(t=()=>nT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ge(ba,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await fh(r)}))}function oT(r,e){return e().catch((t=>Hd(r,t,e)))}async function mh(r){const e=De(r),t=Pi(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Tg;for(;kI(e);)try{const o=await gI(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,MI(e,o)}catch(o){await Hd(e,o)}lT(e)&&cT(e)}function kI(r){return xa(r)&&r.Ta.length<10}function MI(r,e){r.Ta.push(e);const t=Pi(r);t.O_()&&t.X_&&t.ea(e.mutations)}function lT(r){return xa(r)&&!Pi(r).x_()&&r.Ta.length>0}function cT(r){Pi(r).start()}async function VI(r){Pi(r).ra()}async function jI(r){const e=Pi(r);for(const t of r.Ta)e.ea(t.mutations)}async function LI(r,e,t){const i=r.Ta.shift(),o=Cg.from(i,e,t);await oT(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await mh(r)}async function UI(r,e){e&&Pi(r).X_&&await(async function(i,o){if((function(d){return qw(d)&&d!==W.ABORTED})(o.code)){const c=i.Ta.shift();Pi(i).B_(),await oT(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await mh(i)}})(r,e),lT(r)&&cT(r)}async function zv(r,e){const t=De(r);t.asyncQueue.verifyOperationInProgress(),ge(ba,"RemoteStore received new credentials");const i=xa(t);t.Ea.add(3),await jc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await fh(t)}async function zI(r,e){const t=De(r);e?(t.Ea.delete(2),await fh(t)):e||(t.Ea.add(2),await jc(t),t.Ra.set("Unknown"))}function Yo(r){return r.ma||(r.ma=(function(t,i,o){const c=De(t);return c.sa(),new SI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:NI.bind(null,r),t_:DI.bind(null,r),r_:PI.bind(null,r),H_:OI.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),zg(r)?Ug(r):r.Ra.set("Unknown")):(await r.ma.stop(),aT(r))}))),r.ma}function Pi(r){return r.fa||(r.fa=(function(t,i,o){const c=De(t);return c.sa(),new AI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:VI.bind(null,r),r_:UI.bind(null,r),ta:jI.bind(null,r),na:LI.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await mh(r)):(await r.fa.stop(),r.Ta.length>0&&(ge(ba,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,t,i,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,c){const d=Date.now()+i,m=new qg(e,t,d,o,c);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bg(r,e){if(Ns("AsyncQueue",`${e}: ${r}`),Qo(r))return new he(W.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=ac(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Co;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.ga=new Et(Ee.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Uo{constructor(e,t,i,o,c,d,m,g,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,c){const d=[];return t.forEach((m=>{d.push({type:0,doc:m})})),new Uo(e,t,Co.emptySet(t),d,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class BI{constructor(){this.queries=Bv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=De(t),c=o.queries;o.queries=Bv(),c.forEach(((d,m)=>{for(const g of m.Sa)g.onError(i)}))})(this,new he(W.ABORTED,"Firestore shutting down"))}}function Bv(){return new Aa((r=>Rw(r)),oh)}async function Hg(r,e){const t=De(r);let i=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(i=2):(c=new qI,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=Bg(d,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Gg(t)}async function Fg(r,e){const t=De(r),i=e.query;let o=3;const c=t.queries.get(i);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function HI(r,e){const t=De(r);let i=!1;for(const o of e){const c=o.query,d=t.queries.get(c);if(d){for(const m of d.Sa)m.Fa(o)&&(i=!0);d.wa=o}}i&&Gg(t)}function FI(r,e,t){const i=De(r),o=i.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);i.queries.delete(e)}function Gg(r){r.Ca.forEach((e=>{e.next()}))}var ig,Hv;(Hv=ig||(ig={})).Ma="default",Hv.Cache="cache";class Qg{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Uo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ig.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.key=e}}class dT{constructor(e){this.key=e}}class GI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=Iw(e),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new qv,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,b)=>{const A=o.get(w),I=lh(this.query,b)?b:null,j=!!A&&this.mutatedKeys.has(A.key),F=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let z=!1;A&&I?A.data.isEqual(I.data)?j!==F&&(i.track({type:3,doc:I}),z=!0):this.su(A,I)||(i.track({type:2,doc:I}),z=!0,(g&&this.eu(I,g)>0||_&&this.eu(I,_)<0)&&(m=!0)):!A&&I?(i.track({type:0,doc:I}),z=!0):A&&!I&&(i.track({type:1,doc:A}),z=!0,(g||_)&&(m=!0)),z&&(I?(d=d.add(I),c=F?c.add(w):c.delete(w)):(d=d.delete(w),c=c.delete(w)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),c=c.delete(w.key),i.track({type:1,doc:w})}return{tu:d,iu:i,Cs:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((w,b)=>(function(I,j){const F=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:z})}};return F(I)-F(j)})(w.type,b.type)||this.eu(w.doc,b.doc))),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,_=g!==this.Za;return this.Za=g,d.length!==0||_?{snapshot:new Uo(this.query,e.tu,c,d,e.mutatedKeys,g===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new dT(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new uT(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Uo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Kg="SyncEngine";class QI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class KI{constructor(e){this.key=e,this.hu=!1}}class YI{constructor(e,t,i,o,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Aa((m=>Rw(m)),oh),this.Iu=new Map,this.Eu=new Set,this.du=new Et(Ee.comparator),this.Au=new Map,this.Ru=new Pg,this.Vu={},this.mu=new Map,this.fu=Lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XI(r,e,t=!0){const i=yT(r);let o;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await hT(i,e,t,!0),o}async function $I(r,e){const t=yT(r);await hT(t,e,!0,!1)}async function hT(r,e,t,i){const o=await pI(r.localStore,Br(e)),c=o.targetId,d=r.sharedClientState.addLocalQueryTarget(c,t);let m;return i&&(m=await WI(r,e,c,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&sT(r.remoteStore,o),m}async function WI(r,e,t,i,o){r.pu=(b,A,I)=>(async function(F,z,re,ie){let se=z.view.ru(re);se.Cs&&(se=await Mv(F.localStore,z.query,!1).then((({documents:N})=>z.view.ru(N,se))));const fe=ie&&ie.targetChanges.get(z.targetId),le=ie&&ie.targetMismatches.get(z.targetId)!=null,K=z.view.applyChanges(se,F.isPrimaryClient,fe,le);return Gv(F,z.targetId,K.au),K.snapshot})(r,b,A,I);const c=await Mv(r.localStore,e,!0),d=new GI(e,c.Qs),m=d.ru(c.documents),g=Vc.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),_=d.applyChanges(m,r.isPrimaryClient,g);Gv(r,t,_.au);const w=new QI(e,t,d);return r.Tu.set(e,w),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),_.snapshot}async function JI(r,e,t){const i=De(r),o=i.Tu.get(e),c=i.Iu.get(o.targetId);if(c.length>1)return i.Iu.set(o.targetId,c.filter((d=>!oh(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await rg(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&jg(i.remoteStore,o.targetId),ag(i,o.targetId)})).catch(Go)):(ag(i,o.targetId),await rg(i.localStore,o.targetId,!0))}async function ZI(r,e){const t=De(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),jg(t.remoteStore,i.targetId))}async function eC(r,e,t){const i=oC(r);try{const o=await(function(d,m){const g=De(d),_=Ye.now(),w=m.reduce(((I,j)=>I.add(j.key)),Be());let b,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let j=Ds(),F=Be();return g.Ns.getEntries(I,w).next((z=>{j=z,j.forEach(((re,ie)=>{ie.isValidDocument()||(F=F.add(re))}))})).next((()=>g.localDocuments.getOverlayedDocuments(I,j))).next((z=>{b=z;const re=[];for(const ie of m){const se=yR(ie,b.get(ie.key).overlayedDocument);se!=null&&re.push(new Vi(ie.key,se,vw(se.value.mapValue),mn.exists(!0)))}return g.mutationQueue.addMutationBatch(I,_,re,m)})).next((z=>{A=z;const re=z.applyToLocalDocumentSet(b,F);return g.documentOverlayCache.saveOverlays(I,z.batchId,re)}))})).then((()=>({batchId:A.batchId,changes:Nw(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,m,g){let _=d.Vu[d.currentUser.toKey()];_||(_=new Et(qe)),_=_.insert(m,g),d.Vu[d.currentUser.toKey()]=_})(i,o.batchId,t),await Lc(i,o.changes),await mh(i.remoteStore)}catch(o){const c=Bg(o,"Failed to persist write");t.reject(c)}}async function fT(r,e){const t=De(r);try{const i=await fI(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=t.Au.get(c);d&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Ke(d.hu,14607):o.removedDocuments.size>0&&(Ke(d.hu,42227),d.hu=!1))})),await Lc(t,i,e)}catch(i){await Go(i)}}function Fv(r,e,t){const i=De(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((c,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const g=De(d);g.onlineState=m;let _=!1;g.queries.forEach(((w,b)=>{for(const A of b.Sa)A.va(m)&&(_=!0)})),_&&Gg(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function tC(r,e,t){const i=De(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),c=o&&o.key;if(c){let d=new Et(Ee.comparator);d=d.insert(c,$t.newNoDocument(c,xe.min()));const m=Be().add(c),g=new dh(xe.min(),new Map,new Et(qe),d,m);await fT(i,g),i.du=i.du.remove(c),i.Au.delete(e),Yg(i)}else await rg(i.localStore,e,!1).then((()=>ag(i,e,t))).catch(Go)}async function nC(r,e){const t=De(r),i=e.batch.batchId;try{const o=await hI(t.localStore,e);gT(t,i,null),mT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Lc(t,o)}catch(o){await Go(o)}}async function rC(r,e,t){const i=De(r);try{const o=await(function(d,m){const g=De(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let w;return g.mutationQueue.lookupMutationBatch(_,m).next((b=>(Ke(b!==null,37113),w=b.keys(),g.mutationQueue.removeMutationBatch(_,b)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,w,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w))).next((()=>g.localDocuments.getDocuments(_,w)))}))})(i.localStore,e);gT(i,e,t),mT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Lc(i,o)}catch(o){await Go(o)}}function mT(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function gT(r,e,t){const i=De(r);let o=i.Vu[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function ag(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||pT(r,i)}))}function pT(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(jg(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Yg(r))}function Gv(r,e,t){for(const i of t)i instanceof uT?(r.Ru.addReference(i.key,e),sC(r,i)):i instanceof dT?(ge(Kg,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||pT(r,i.key)):we(19791,{wu:i})}function sC(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(ge(Kg,"New document in limbo: "+t),r.Eu.add(i),Yg(r))}function Yg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ee(lt.fromString(e)),i=r.fu.next();r.Au.set(i,new KI(t)),r.du=r.du.insert(t,i),sT(r.remoteStore,new vi(Br(ah(t.path)),i,"TargetPurposeLimboResolution",sh.ce))}}async function Lc(r,e,t){const i=De(r),o=[],c=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,g)=>{d.push(i.pu(g,e,t).then((_=>{var w;if((_||t)&&i.isPrimaryClient){const b=_?!_.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:w.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(_){o.push(_);const b=kg.As(g.targetId,_);c.push(b)}})))})),await Promise.all(d),i.Pu.H_(o),await(async function(g,_){const w=De(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>te.forEach(_,(A=>te.forEach(A.Es,(I=>w.persistence.referenceDelegate.addReference(b,A.targetId,I))).next((()=>te.forEach(A.ds,(I=>w.persistence.referenceDelegate.removeReference(b,A.targetId,I)))))))))}catch(b){if(!Qo(b))throw b;ge(Mg,"Failed to update sequence numbers: "+b)}for(const b of _){const A=b.targetId;if(!b.fromCache){const I=w.Ms.get(A),j=I.snapshotVersion,F=I.withLastLimboFreeSnapshotVersion(j);w.Ms=w.Ms.insert(A,F)}}})(i.localStore,c))}async function iC(r,e){const t=De(r);if(!t.currentUser.isEqual(e)){ge(Kg,"User change. New user:",e.toKey());const i=await tT(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new he(W.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Lc(t,i.Ls)}}function aC(r,e){const t=De(r),i=t.Au.get(e);if(i&&i.hu)return Be().add(i.key);{let o=Be();const c=t.Iu.get(e);if(!c)return o;for(const d of c){const m=t.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function yT(r){const e=De(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=fT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tC.bind(null,e),e.Pu.H_=HI.bind(null,e.eventManager),e.Pu.yu=FI.bind(null,e.eventManager),e}function oC(r){const e=De(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rC.bind(null,e),e}class Fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return dI(this.persistence,new lI,e.initialUser,this.serializer)}Cu(e){return new eT(Og.mi,this.serializer)}Du(e){return new _I}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fd.provider={build:()=>new Fd};class lC extends Fd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ke(this.persistence.referenceDelegate instanceof Bd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new KR(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new eT((i=>Bd.mi(i,t)),this.serializer)}}class og{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Fv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=iC.bind(null,this.syncEngine),await zI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new BI})()}createDatastore(e){const t=hh(e.databaseInfo.databaseId),i=(function(c){return new bI(c)})(e.databaseInfo);return(function(c,d,m,g){return new RI(c,d,m,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,c,d,m){return new CI(i,o,c,d,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Fv(this.syncEngine,t,0)),(function(){return Lv.v()?new Lv:new vI})())}createSyncEngine(e,t){return(function(o,c,d,m,g,_,w){const b=new YI(o,c,d,m,g,_);return w&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const c=De(o);ge(ba,"RemoteStore shutting down."),c.Ea.add(5),await jc(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}og.provider={build:()=>new og};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ns("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new he(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,c){const d=De(o),m={documents:c.map((b=>qd(d.serializer,b)))},g=await d.Ho("BatchGetDocuments",d.serializer.databaseId,lt.emptyPath(),m,c.length),_=new Map;g.forEach((b=>{const A=NR(d.serializer,b);_.set(A.key.toString(),A)}));const w=[];return c.forEach((b=>{const A=_.get(b.toString());Ke(!!A,55234,{key:b}),w.push(A)})),w})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ig(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const o=Ee.fromPath(i);this.mutations.push(new zw(o,this.precondition(o)))})),await(async function(i,o){const c=De(i),d={writes:o.map((m=>Xw(c.serializer,m)))};await c.Go("Commit",c.serializer.databaseId,lt.emptyPath(),d)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw we(50498,{Gu:e.constructor.name});t=xe.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new he(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(xe.min())?mn.exists(!1):mn.updateTime(t):mn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xe.min()))throw new he(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mn.updateTime(t)}return mn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t,i,o,c){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=o,this.deferred=c,this.zu=i.maxAttempts,this.M_=new Vg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new cC(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((o=>{this.Yu(o)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!kc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!qw(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="FirestoreClient";class dC{constructor(e,t,i,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=fn.UNAUTHENTICATED,this.clientId=wg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async d=>{ge(Oi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ge(Oi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Bg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function jm(r,e){r.asyncQueue.verifyOperationInProgress(),ge(Oi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await tT(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Qv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await hC(r);ge(Oi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>zv(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>zv(e.remoteStore,o))),r._onlineComponents=e}async function hC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ge(Oi,"Using user provided OfflineComponentProvider");try{await jm(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ko("Error using user provided cache. Falling back to memory cache: "+t),await jm(r,new Fd)}}else ge(Oi,"Using default OfflineComponentProvider"),await jm(r,new lC(void 0));return r._offlineComponents}async function $g(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ge(Oi,"Using user provided OnlineComponentProvider"),await Qv(r,r._uninitializedComponentsProvider._online)):(ge(Oi,"Using default OnlineComponentProvider"),await Qv(r,new og))),r._onlineComponents}function fC(r){return $g(r).then((e=>e.syncEngine))}function mC(r){return $g(r).then((e=>e.datastore))}async function Gd(r){const e=await $g(r),t=e.eventManager;return t.onListen=XI.bind(null,e.syncEngine),t.onUnlisten=JI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$I.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ZI.bind(null,e.syncEngine),t}function gC(r,e,t={}){const i=new qr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,g,_){const w=new Xg({next:A=>{w.Nu(),d.enqueueAndForget((()=>Fg(c,b)));const I=A.docs.has(m);!I&&A.fromCache?_.reject(new he(W.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&A.fromCache&&g&&g.source==="server"?_.reject(new he(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(A)},error:A=>_.reject(A)}),b=new Qg(ah(m.path),w,{includeMetadataChanges:!0,qa:!0});return Hg(c,b)})(await Gd(r),r.asyncQueue,e,t,i))),i.promise}function pC(r,e,t={}){const i=new qr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,g,_){const w=new Xg({next:A=>{w.Nu(),d.enqueueAndForget((()=>Fg(c,b))),A.fromCache&&g.source==="server"?_.reject(new he(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),b=new Qg(m,w,{includeMetadataChanges:!0,qa:!0});return Hg(c,b)})(await Gd(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="firestore.googleapis.com",Yv=!0;class Xv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vT,this.ssl=Yv}else this.host=e.host,this.ssl=e.ssl??Yv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Zw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GR)throw new he(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_T(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new E1;switch(i.type){case"firstParty":return new S1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Kv.get(t);i&&(ge("ComponentProvider","Removing Datastore"),Kv.delete(t),i.terminate())})(this),Promise.resolve()}}function yC(r,e,t,i={}){var _;r=Dn(r,gh);const o=Bo(e),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(QE(`https://${m}`),KE("Firestore",!0)),c.host!==vT&&c.host!==m&&ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:i};if(!Ea(g,d)&&(r._setSettings(g),i.mockUserToken)){let w,b;if(typeof i.mockUserToken=="string")w=i.mockUserToken,b=fn.MOCK_USER;else{w=GA(i.mockUserToken,(_=r._app)==null?void 0:_.options.projectId);const A=i.mockUserToken.sub||i.mockUserToken.user_id;if(!A)throw new he(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new fn(A)}r._authCredentials=new w1(new ow(w,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Vs(this.firestore,e,this._query)}}class _t{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ai(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Oc(t,_t._jsonSchema))return new _t(e,i||null,new Ee(lt.fromString(t.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:jt("string",_t._jsonSchemaVersion),referencePath:jt("string")};class Ai extends Vs{constructor(e,t,i){super(e,t,ah(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new Ee(e))}withConverter(e){return new Ai(this.firestore,e,this._path)}}function tt(r,e,...t){if(r=vt(r),lw("collection","path",e),r instanceof gh){const i=lt.fromString(e,...t);return lv(i),new Ai(r,null,i)}{if(!(r instanceof _t||r instanceof Ai))throw new he(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(lt.fromString(e,...t));return lv(i),new Ai(r.firestore,null,i)}}function Wt(r,e,...t){if(r=vt(r),arguments.length===1&&(e=wg.newId()),lw("doc","path",e),r instanceof gh){const i=lt.fromString(e,...t);return ov(i),new _t(r,null,new Ee(i))}{if(!(r instanceof _t||r instanceof Ai))throw new he(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(lt.fromString(e,...t));return ov(i),new _t(r.firestore,r instanceof Ai?r.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="AsyncQueue";class Wv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Vg(this,"async_queue_retry"),this._c=()=>{const i=Vm();i&&ge($v,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Vm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Vm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new qr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qo(e))throw e;ge($v,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ns("INTERNAL UNHANDLED ERROR: ",Jv(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=qg.createAndSchedule(this,e,t,i,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:Jv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Jv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of i)if(c in o&&typeof o[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Ps extends gh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Wv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wv(e),this._firestoreClient=void 0,await e}}}function _C(r,e){const t=typeof r=="object"?r:WE(),i=typeof r=="string"?r:Md,o=vg(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=HA("firestore");c&&yC(o,...c)}return o}function Uc(r){if(r._terminated)throw new he(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||vC(r),r._firestoreClient}function vC(r){var i,o,c;const e=r._freezeSettings(),t=(function(m,g,_,w){return new B1(m,g,_,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,_T(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new dC(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(on.fromBase64String(e))}catch(t){throw new he(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fn(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oc(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:jt("string",Fn._jsonSchemaVersion),bytes:jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hr._jsonSchemaVersion}}static fromJSON(e){if(Oc(e,Hr._jsonSchema))return new Hr(e.latitude,e.longitude)}}Hr._jsonSchemaVersion="firestore/geoPoint/1.0",Hr._jsonSchema={type:jt("string",Hr._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oc(e,Fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Fr(e.vectorValues);throw new he(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fr._jsonSchemaVersion="firestore/vectorValue/1.0",Fr._jsonSchema={type:jt("string",Fr._jsonSchemaVersion),vectorValues:jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=/^__.*__$/;class wC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mc(e,this.data,t,this.fieldTransforms)}}class ET{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:r})}}class Wg{constructor(e,t,i,o,c,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Qd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(wT(this.Ac)&&EC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class TC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||hh(e)}Cc(e,t,i,o=!1){return new Wg({Ac:e,methodName:t,Dc:i,path:an.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qc(r){const e=r._freezeSettings(),t=hh(r._databaseId);return new TC(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Jg(r,e,t,i,o,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,t,o);ep("Data must be an object, but it was:",d,i);const m=ST(i,d);let g,_;if(c.merge)g=new Gn(d.fieldMask),_=d.fieldTransforms;else if(c.mergeFields){const w=[];for(const b of c.mergeFields){const A=lg(e,b,t);if(!d.contains(A))throw new he(W.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);xT(w,A)||w.push(A)}g=new Gn(w),_=d.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,_=d.fieldTransforms;return new wC(new Tn(m),g,_)}class yh extends ph{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yh}}class Zg extends ph{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new xc(e.serializer,Ow(e.serializer,this.Fc));return new fR(e.path,t)}isEqual(e){return e instanceof Zg&&this.Fc===e.Fc}}function TT(r,e,t,i){const o=r.Cc(1,e,t);ep("Data must be an object, but it was:",o,i);const c=[],d=Tn.empty();Mi(i,((g,_)=>{const w=tp(e,g,t);_=vt(_);const b=o.yc(w);if(_ instanceof yh)c.push(w);else{const A=Bc(_,b);A!=null&&(c.push(w),d.set(w,A))}}));const m=new Gn(c);return new ET(d,m,o.fieldTransforms)}function bT(r,e,t,i,o,c){const d=r.Cc(1,e,t),m=[lg(e,i,t)],g=[o];if(c.length%2!=0)throw new he(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<c.length;A+=2)m.push(lg(e,c[A])),g.push(c[A+1]);const _=[],w=Tn.empty();for(let A=m.length-1;A>=0;--A)if(!xT(_,m[A])){const I=m[A];let j=g[A];j=vt(j);const F=d.yc(I);if(j instanceof yh)_.push(I);else{const z=Bc(j,F);z!=null&&(_.push(I),w.set(I,z))}}const b=new Gn(_);return new ET(w,b,d.fieldTransforms)}function bC(r,e,t,i=!1){return Bc(t,r.Cc(i?4:3,e))}function Bc(r,e){if(AT(r=vt(r)))return ep("Unsupported field value:",e,r),ST(r,e);if(r instanceof ph)return(function(i,o){if(!wT(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const c=[];let d=0;for(const m of i){let g=Bc(m,o.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(i,o){if((i=vt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Ow(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Ye.fromDate(i);return{timestampValue:zd(o.serializer,c)}}if(i instanceof Ye){const c=new Ye(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:zd(o.serializer,c)}}if(i instanceof Hr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Fn)return{bytesValue:Gw(o.serializer,i._byteString)};if(i instanceof _t){const c=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Dg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Fr)return(function(d,m){return{mapValue:{fields:{[yw]:{stringValue:_w},[Vd]:{arrayValue:{values:d.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return Rg(m.serializer,_)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${rh(i)}`)})(r,e)}function ST(r,e){const t={};return dw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mi(r,((i,o)=>{const c=Bc(o,e.mc(i));c!=null&&(t[i]=c)})),{mapValue:{fields:t}}}function AT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ye||r instanceof Hr||r instanceof Fn||r instanceof _t||r instanceof ph||r instanceof Fr)}function ep(r,e,t){if(!AT(t)||!cw(t)){const i=rh(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function lg(r,e,t){if((e=vt(e))instanceof zc)return e._internalPath;if(typeof e=="string")return tp(r,e);throw Qd("Field path arguments must be of type string or ",r,!1,void 0,t)}const SC=new RegExp("[~\\*/\\[\\]]");function tp(r,e,t){if(e.search(SC)>=0)throw Qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new zc(...e.split("."))._internalPath}catch{throw Qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Qd(r,e,t,i,o){const c=i&&!i.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${i}`),d&&(g+=` in document ${o}`),g+=")"),new he(W.INVALID_ARGUMENT,m+r+g)}function xT(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,i,o,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_h("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class AC extends Kd{data(){return super.data()}}function _h(r,e){return typeof e=="string"?tp(r,e):e instanceof zc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class np{}class rp extends np{}function St(r,e,...t){let i=[];e instanceof np&&i.push(e),i=i.concat(t),(function(c){const d=c.filter((g=>g instanceof sp)).length,m=c.filter((g=>g instanceof vh)).length;if(d>1||d>0&&m>0)throw new he(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class vh extends rp{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new vh(e,t,i)}_apply(e){const t=this._parse(e);return CT(e._query,t),new Vs(e.firestore,e.converter,Zm(e._query,t))}_parse(e){const t=qc(e.firestore);return(function(c,d,m,g,_,w,b){let A;if(_.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new he(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){tE(b,w);const j=[];for(const F of b)j.push(eE(g,c,F));A={arrayValue:{values:j}}}else A=eE(g,c,b)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||tE(b,w),A=bC(m,d,b,w==="in"||w==="not-in");return Vt.create(_,w,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function $e(r,e,t){const i=e,o=_h("where",r);return vh._create(o,i,t)}class sp extends np{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sp(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:_r.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let d=o;const m=c.getFlattenedFilters();for(const g of m)CT(d,g),d=Zm(d,g)})(e._query,t),new Vs(e.firestore,e.converter,Zm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ip extends rp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ip(e,t)}_apply(e){const t=(function(o,c,d){if(o.startAt!==null)throw new he(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bc(c,d)})(e._query,this._field,this._direction);return new Vs(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new Ko(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function Yd(r,e="asc"){const t=e,i=_h("orderBy",r);return ip._create(i,t)}class ap extends rp{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new ap(e,t,i)}_apply(e){return new Vs(e.firestore,e.converter,Ld(e._query,this._limit,this._limitType))}}function IT(r){return D1("limit",r),ap._create("limit",r,"F")}function eE(r,e,t){if(typeof(t=vt(t))=="string"){if(t==="")throw new he(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xw(e)&&t.indexOf("/")!==-1)throw new he(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(lt.fromString(t));if(!Ee.isDocumentKey(i))throw new he(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return pv(r,new Ee(i))}if(t instanceof _t)return pv(r,t._key);throw new he(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rh(t)}.`)}function tE(r,e){if(!Array.isArray(r)||r.length===0)throw new he(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CT(r,e){const t=(function(o,c){for(const d of o)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class NT{convertValue(e,t="none"){switch(Di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Mi(e,((o,c)=>{i[o]=this.convertValue(c,t)})),i}convertVectorValue(e){var i,o,c;const t=(c=(o=(i=e.fields)==null?void 0:i[Vd].arrayValue)==null?void 0:o.values)==null?void 0:c.map((d=>Ct(d.doubleValue)));return new Fr(t)}convertGeoPoint(e){return new Hr(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=ih(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ec(e));default:return null}}convertTimestamp(e){const t=Ci(e);return new Ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=lt.fromString(e);Ke(Jw(i),9688,{name:e});const o=new wc(i.get(1),i.get(3)),c=new Ee(i.popFirst(5));return o.isEqual(t)||Ns(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class xC extends NT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}class xo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xi extends Kd{constructor(e,t,i,o,c,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(_h("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=xi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}xi._jsonSchemaVersion="firestore/documentSnapshot/1.0",xi._jsonSchema={type:jt("string",xi._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class Rd extends xi{data(e={}){return super.data(e)}}class va{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new xo(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Rd(this._firestore,this._userDataWriter,i.key,i,new xo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const g=new Rd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new xo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new Rd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new xo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,w=-1;return m.type!==0&&(_=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),w=d.indexOf(m.doc.key)),{type:RC(m.type),doc:g,oldIndex:_,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=va._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(r){r=Dn(r,_t);const e=Dn(r.firestore,Ps);return gC(Uc(e),r._key).then((t=>DT(e,r,t)))}va._jsonSchemaVersion="firestore/querySnapshot/1.0",va._jsonSchema={type:jt("string",va._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class Eh extends NT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}function pt(r){r=Dn(r,Vs);const e=Dn(r.firestore,Ps),t=Uc(e),i=new Eh(e);return RT(r._query),pC(t,r._query).then((o=>new va(e,i,r,o)))}function Rc(r,e,t){r=Dn(r,_t);const i=Dn(r.firestore,Ps),o=op(r.converter,e,t);return cp(i,[Jg(qc(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,mn.none())])}function lp(r,e,t,...i){r=Dn(r,_t);const o=Dn(r.firestore,Ps),c=qc(o);let d;return d=typeof(e=vt(e))=="string"||e instanceof zc?bT(c,"updateDoc",r._key,e,t,i):TT(c,"updateDoc",r._key,e),cp(o,[d.toMutation(r._key,mn.exists(!0))])}function Hc(r,e){const t=Dn(r.firestore,Ps),i=Wt(r),o=op(r.converter,e);return cp(t,[Jg(qc(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,mn.exists(!1))]).then((()=>i))}function IC(r,...e){var g,_,w;r=vt(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Zv(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Zv(e[i])){const b=e[i];e[i]=(g=b.next)==null?void 0:g.bind(b),e[i+1]=(_=b.error)==null?void 0:_.bind(b),e[i+2]=(w=b.complete)==null?void 0:w.bind(b)}let c,d,m;if(r instanceof _t)d=Dn(r.firestore,Ps),m=ah(r._key.path),c={next:b=>{e[i]&&e[i](DT(d,r,b))},error:e[i+1],complete:e[i+2]};else{const b=Dn(r,Vs);d=Dn(b.firestore,Ps),m=b._query;const A=new Eh(d);c={next:I=>{e[i]&&e[i](new va(d,A,b,I))},error:e[i+1],complete:e[i+2]},RT(r._query)}return(function(A,I,j,F){const z=new Xg(F),re=new Qg(I,z,j);return A.asyncQueue.enqueueAndForget((async()=>Hg(await Gd(A),re))),()=>{z.Nu(),A.asyncQueue.enqueueAndForget((async()=>Fg(await Gd(A),re)))}})(Uc(d),m,o,c)}function cp(r,e){return(function(i,o){const c=new qr;return i.asyncQueue.enqueueAndForget((async()=>eC(await fC(i),o,c))),c.promise})(Uc(r),e)}function DT(r,e,t){const i=t.docs.get(e._key),o=new Eh(r);return new xi(r,o,e._key,i,new xo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC={maxAttempts:5};function lc(r,e){if((r=vt(r)).firestore!==e)throw new he(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qc(e)}get(e){const t=lc(e,this._firestore),i=new xC(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return we(24041);const c=o[0];if(c.isFoundDocument())return new Kd(this._firestore,i,c.key,c,t.converter);if(c.isNoDocument())return new Kd(this._firestore,i,t._key,null,t.converter);throw we(18433,{doc:c})}))}set(e,t,i){const o=lc(e,this._firestore),c=op(o.converter,t,i),d=Jg(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,i);return this._transaction.set(o._key,d),this}update(e,t,i,...o){const c=lc(e,this._firestore);let d;return d=typeof(t=vt(t))=="string"||t instanceof zc?bT(this._dataReader,"Transaction.update",c._key,t,i,o):TT(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,d),this}delete(e){const t=lc(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC extends NC{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=lc(e,this._firestore),i=new Eh(this._firestore);return super.get(e).then((o=>new xi(this._firestore,i,t._key,o._document,new xo(!1,!1),t.converter)))}}function PC(r,e,t){r=Dn(r,Ps);const i={...CC,...t};return(function(c){if(c.maxAttempts<1)throw new he(W.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(c,d,m){const g=new qr;return c.asyncQueue.enqueueAndForget((async()=>{const _=await mC(c);new uC(c.asyncQueue,_,m,d,g).ju()})),g.promise})(Uc(r),(o=>e(new DC(r,o))),i)}function PT(r){return new Zg("increment",r)}(function(e,t=!0){(function(o){Fo=o})(Ho),Oo(new wa("firestore",((i,{instanceIdentifier:o,options:c})=>{const d=i.getProvider("app").getImmediate(),m=new Ps(new T1(i.getProvider("auth-internal")),new A1(d,i.getProvider("app-check-internal")),(function(_,w){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new he(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wc(_.options.projectId,w)})(d,o),d);return c={useFetchStreams:t,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),bi(rv,sv,e),bi(rv,sv,"esm2020")})();function OT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OC=OT,kT=new Dc("auth","Firebase",OT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd=new yg("@firebase/auth");function kC(r,...e){Xd.logLevel<=ze.WARN&&Xd.warn(`Auth (${Ho}): ${r}`,...e)}function Id(r,...e){Xd.logLevel<=ze.ERROR&&Xd.error(`Auth (${Ho}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(r,...e){throw dp(r,...e)}function yr(r,...e){return dp(r,...e)}function up(r,e,t){const i={...OC(),[e]:t};return new Dc("auth","Firebase",i).create(e,{appName:r.name})}function Gr(r){return up(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function MC(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&or(r,"argument-error"),up(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dp(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return kT.create(r,...e)}function Re(r,e,...t){if(!r)throw dp(e,...t)}function Rs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Id(e),new Error(e)}function Os(r,e){r||Rs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function VC(){return nE()==="http:"||nE()==="https:"}function nE(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VC()||WA()||"connection"in navigator)?navigator.onLine:!0}function LC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Os(t>e,"Short delay should be less than long delay!"),this.isMobile=YA()||JA()}get(){return jC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(r,e){Os(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qC=new Fc(3e4,6e4);function js(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Xr(r,e,t,i,o={}){return VT(r,o,async()=>{let c={},d={};i&&(e==="GET"?d=i:c={body:JSON.stringify(i)});const m=Pc({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const _={method:e,headers:g,...c};return $A()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&Bo(r.emulatorConfig.host)&&(_.credentials="include"),MT.fetch()(await jT(r,r.config.apiHost,t,m),_)})}async function VT(r,e,t){r._canInitEmulator=!1;const i={...UC,...e};try{const o=new HC(r),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw _d(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw _d(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw _d(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw _d(r,"user-disabled",d);const w=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw up(r,w,_);or(r,w)}}catch(o){if(o instanceof Ms)throw o;or(r,"network-request-failed",{message:String(o)})}}async function Gc(r,e,t,i,o={}){const c=await Xr(r,e,t,i,o);return"mfaPendingCredential"in c&&or(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function jT(r,e,t,i){const o=`${e}${t}?${i}`,c=r,d=c.config.emulator?hp(r.config,o):`${r.config.apiScheme}://${o}`;return zC.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function BC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(yr(this.auth,"network-request-failed")),qC.get())})}}function _d(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=yr(r,e,i);return o.customData._tokenResponse=t,o}function rE(r){return r!==void 0&&r.enterprise!==void 0}class FC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return BC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function GC(r,e){return Xr(r,"GET","/v2/recaptchaConfig",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(r,e){return Xr(r,"POST","/v1/accounts:delete",e)}async function $d(r,e){return Xr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KC(r,e=!1){const t=vt(r),i=await t.getIdToken(e),o=fp(i);Re(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:i,authTime:pc(Lm(o.auth_time)),issuedAtTime:pc(Lm(o.iat)),expirationTime:pc(Lm(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Lm(r){return Number(r)*1e3}function fp(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Id("JWT malformed, contained fewer than 3 sections"),null;try{const o=BE(t);return o?JSON.parse(o):(Id("Failed to decode base64 JWT payload"),null)}catch(o){return Id("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function sE(r){const e=fp(r);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ms&&YC(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function YC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pc(this.lastLoginAt),this.creationTime=pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wd(r){var b;const e=r.auth,t=await r.getIdToken(),i=await zo(r,$d(e,{idToken:t}));Re(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const c=(b=o.providerUserInfo)!=null&&b.length?LT(o.providerUserInfo):[],d=WC(r.providerData,c),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!(d!=null&&d.length),_=m?g:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new ug(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(r,w)}async function $C(r){const e=vt(r);await Wd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WC(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function LT(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JC(r,e){const t=await VT(r,{},async()=>{const i=Pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,d=await jT(r,o,"/v1/token",`key=${c}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:i};return r.emulatorConfig&&Bo(r.emulatorConfig.host)&&(g.credentials="include"),MT.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ZC(r,e){return Xr(r,"POST","/v2/accounts:revokeToken",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=sE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:c}=await JC(e,t);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:c}=t,d=new No;return i&&(Re(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(Re(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Re(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new No,this.toJSON())}_performRefresh(){return Rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(r,e){Re(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class pr{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new XC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ug(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await zo(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return KC(this,e)}reload(){return $C(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Wd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(Gr(this.auth));const e=await this.getIdToken();return await zo(this,QC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,_=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:b,emailVerified:A,isAnonymous:I,providerData:j,stsTokenManager:F}=t;Re(b&&F,e,"internal-error");const z=No.fromJSON(this.name,F);Re(typeof b=="string",e,"internal-error"),gi(i,e.name),gi(o,e.name),Re(typeof A=="boolean",e,"internal-error"),Re(typeof I=="boolean",e,"internal-error"),gi(c,e.name),gi(d,e.name),gi(m,e.name),gi(g,e.name),gi(_,e.name),gi(w,e.name);const re=new pr({uid:b,auth:e,email:o,emailVerified:A,displayName:i,isAnonymous:I,photoURL:d,phoneNumber:c,tenantId:m,stsTokenManager:z,createdAt:_,lastLoginAt:w});return j&&Array.isArray(j)&&(re.providerData=j.map(ie=>({...ie}))),g&&(re._redirectEventId=g),re}static async _fromIdTokenResponse(e,t,i=!1){const o=new No;o.updateFromServerResponse(t);const c=new pr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Wd(c),c}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Re(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?LT(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),m=new No;m.updateFromIdToken(i);const g=new pr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new ug(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new Map;function Is(r){Os(r instanceof Function,"Expected a class definition");let e=iE.get(r);return e?(Os(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,iE.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}UT.type="NONE";const aE=UT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(r,e,t){return`firebase:${r}:${e}:${t}`}class Do{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=Cd(this.userKey,o.apiKey,c),this.fullPersistenceKey=Cd("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await $d(this.auth,{idToken:e}).catch(()=>{});return t?pr._fromGetAccountInfoResponse(this.auth,t,e):null}return pr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Do(Is(aE),e,i);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=o[0]||Is(aE);const d=Cd(i,e.config.apiKey,e.name);let m=null;for(const _ of t)try{const w=await _._get(d);if(w){let b;if(typeof w=="string"){const A=await $d(e,{idToken:w}).catch(()=>{});if(!A)break;b=await pr._fromGetAccountInfoResponse(e,A,w)}else b=pr._fromJSON(e,w);_!==c&&(m=b),c=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Do(c,e,i):(c=g[0],m&&await c._set(d,m.toJSON()),await Promise.all(t.map(async _=>{if(_!==c)try{await _._remove(d)}catch{}})),new Do(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GT(e))return"Blackberry";if(QT(e))return"Webos";if(qT(e))return"Safari";if((e.includes("chrome/")||BT(e))&&!e.includes("edge/"))return"Chrome";if(FT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function zT(r=gn()){return/firefox\//i.test(r)}function qT(r=gn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BT(r=gn()){return/crios\//i.test(r)}function HT(r=gn()){return/iemobile/i.test(r)}function FT(r=gn()){return/android/i.test(r)}function GT(r=gn()){return/blackberry/i.test(r)}function QT(r=gn()){return/webos/i.test(r)}function mp(r=gn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function eN(r=gn()){var e;return mp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function tN(){return ZA()&&document.documentMode===10}function KT(r=gn()){return mp(r)||FT(r)||QT(r)||GT(r)||/windows phone/i.test(r)||HT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(r,e=[]){let t;switch(r){case"Browser":t=oE(gn());break;case"Worker":t=`${oE(gn())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ho}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=c=>new Promise((d,m)=>{try{const g=e(c);d(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(r,e={}){return Xr(r,"GET","/v2/passwordPolicy",js(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=6;class iN{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??sN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lE(this),this.idTokenSubscription=new lE(this),this.beforeStateQueue=new nN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Is(t)),this._initializationPromise=this.queue(async()=>{var i,o,c;if(!this._deleted&&(this.persistenceManager=await Do.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await $d(this,{idToken:e}),i=await pr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Nn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,m=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===m)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(d){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(Gr(this));const t=e?vt(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(Gr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(Gr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rN(this),t=new iN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await ZC(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Is(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Do.create(this,[Is(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&kC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function $r(r){return vt(r)}class lE{constructor(e){this.auth=e,this.observer=null,this.addObserver=ox(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oN(r){wh=r}function XT(r){return wh.loadJS(r)}function lN(){return wh.recaptchaEnterpriseScript}function cN(){return wh.gapiScript}function uN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class dN{constructor(){this.enterprise=new hN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class hN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const fN="recaptcha-enterprise",$T="NO_RECAPTCHA";class mN{constructor(e){this.type=fN,this.auth=$r(e)}async verify(e="verify",t=!1){async function i(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{GC(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new FC(g);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,d(_.siteKey)}}).catch(g=>{m(g)})})}function o(c,d,m){const g=window.grecaptcha;rE(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(_=>{d(_)}).catch(()=>{d($T)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dN().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{i(this.auth).then(m=>{if(!t&&rE(window.grecaptcha))o(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=lN();g.length!==0&&(g+=m),XT(g).then(()=>{o(m,c,d)}).catch(_=>{d(_)})}}).catch(m=>{d(m)})})}}async function cE(r,e,t,i=!1,o=!1){const c=new mN(r);let d;if(o)d=$T;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Jd(r,e,t,i,o){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await cE(r,e,t,t==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await cE(r,e,t,t==="getOobCode");return i(r,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(r,e){const t=vg(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(Ea(c,e??{}))return o;or(o,"already-initialized")}return t.initialize({options:e})}function pN(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Is);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function yN(r,e,t){const i=$r(r);Re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=WT(e),{host:d,port:m}=_N(e),g=m===null?"":`:${m}`,_={url:`${c}//${d}${g}/`},w=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Re(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Re(Ea(_,i.config.emulator)&&Ea(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=_,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,Bo(d)?(QE(`${c}//${d}${g}`),KE("Auth",!0)):vN()}function WT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function _N(r){const e=WT(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:uE(i.substr(c.length+1))}}else{const[c,d]=i.split(":");return{host:c,port:uE(d)}}}function uE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function vN(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rs("not implemented")}_getIdTokenResponse(e){return Rs("not implemented")}_linkToIdToken(e,t){return Rs("not implemented")}_getReauthenticationResolver(e){return Rs("not implemented")}}async function EN(r,e){return Xr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(r,e){return Gc(r,"POST","/v1/accounts:signInWithPassword",js(r,e))}async function JT(r,e){return Xr(r,"POST","/v1/accounts:sendOobCode",js(r,e))}async function TN(r,e){return JT(r,e)}async function bN(r,e){return JT(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(r,e){return Gc(r,"POST","/v1/accounts:signInWithEmailLink",js(r,e))}async function AN(r,e){return Gc(r,"POST","/v1/accounts:signInWithEmailLink",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends gp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ic(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ic(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jd(e,t,"signInWithPassword",wN);case"emailLink":return SN(e,{email:this._email,oobCode:this._password});default:or(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jd(e,i,"signUpPassword",EN);case"emailLink":return AN(e,{idToken:t,email:this._email,oobCode:this._password});default:or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(r,e){return Gc(r,"POST","/v1/accounts:signInWithIdp",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="http://localhost";class Sa extends gp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):or("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=t;if(!i||!o)return null;const d=new Sa(i,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Po(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Po(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Po(e,t)}buildRequest(){const e={requestUri:xN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IN(r){const e=rc(sc(r)).link,t=e?rc(sc(e)).deep_link_id:null,i=rc(sc(r)).deep_link_id;return(i?rc(sc(i)).link:null)||i||t||e||r}class pp{constructor(e){const t=rc(sc(e)),i=t.apiKey??null,o=t.oobCode??null,c=RN(t.mode??null);Re(i&&o&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=IN(e);try{return new pp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.providerId=Xo.PROVIDER_ID}static credential(e,t){return Ic._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=pp.parseLink(t);return Re(i,"argument-error"),Ic._fromEmailAndCode(e,i.code,i.tenantId)}}Xo.PROVIDER_ID="password";Xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends yp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Qc{constructor(){super("facebook.com")}static credential(e){return Sa._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";pi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends Qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Sa._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return xs.credential(t,i)}catch{return null}}}xs.GOOGLE_SIGN_IN_METHOD="google.com";xs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Qc{constructor(){super("github.com")}static credential(e){return Sa._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.GITHUB_SIGN_IN_METHOD="github.com";yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Qc{constructor(){super("twitter.com")}static credential(e,t){return Sa._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return _i.credential(t,i)}catch{return null}}}_i.TWITTER_SIGN_IN_METHOD="twitter.com";_i.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(r,e){return Gc(r,"POST","/v1/accounts:signUp",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const c=await pr._fromIdTokenResponse(e,i,o),d=dE(i);return new ks({user:c,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=dE(i);return new ks({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function dE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(r){var o;if(Nn(r.app))return Promise.reject(Gr(r));const e=$r(r);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new ks({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await ZT(e,{returnSecureToken:!0}),i=await ks._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd extends Ms{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Zd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Zd(e,t,i,o)}}function eb(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Zd._fromErrorAndOperation(r,c,e,i):c})}async function NN(r,e,t=!1){const i=await zo(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ks._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(r,e,t=!1){const{auth:i}=r;if(Nn(i.app))return Promise.reject(Gr(i));const o="reauthenticate";try{const c=await zo(r,eb(i,o,e,r),t);Re(c.idToken,i,"internal-error");const d=fp(c.idToken);Re(d,i,"internal-error");const{sub:m}=d;return Re(r.uid===m,i,"user-mismatch"),ks._forOperation(r,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&or(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tb(r,e,t=!1){if(Nn(r.app))return Promise.reject(Gr(r));const i="signIn",o=await eb(r,i,e),c=await ks._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(c.user),c}async function PN(r,e){return tb($r(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nb(r){const e=$r(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ON(r,e,t){const i=$r(r);await Jd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",bN)}async function kN(r,e,t){if(Nn(r.app))return Promise.reject(Gr(r));const i=$r(r),d=await Jd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZT).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&nb(r),g}),m=await ks._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(m.user),m}function MN(r,e,t){return Nn(r.app)?Promise.reject(Gr(r)):PN(vt(r),Xo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&nb(r),i})}async function rb(r,e){const t=vt(r),o={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()},{email:c}=await TN(t.auth,o);c!==r.email&&await r.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(r,e){return Xr(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=vt(r),c={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await zo(i,VN(i.auth,c));i.displayName=d.displayName||null,i.photoURL=d.photoUrl||null;const m=i.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=i.displayName,m.photoURL=i.photoURL),await i._updateTokensIfNecessary(d)}function LN(r,e,t,i){return vt(r).onIdTokenChanged(e,t,i)}function UN(r,e,t){return vt(r).beforeAuthStateChanged(e,t)}function zN(r,e,t,i){return vt(r).onAuthStateChanged(e,t,i)}function qN(r){return vt(r).signOut()}const eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(eh,"1"),this.storage.removeItem(eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=1e3,HN=10;class ib extends sb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},c=this.storage.getItem(i);tN()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,HN):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},BN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ib.type="LOCAL";const FN=ib;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab extends sb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ab.type="SESSION";const ob=ab;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Th(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:c}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(d).map(async _=>_(t.origin,c)),g=await GN(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Th.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((m,g)=>{const _=_p("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(b){const A=b;if(A.data.eventId===_)switch(A.data.status){case"ack":clearTimeout(w),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(A.data.response);break;default:clearTimeout(w),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return window}function KN(r){Qr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function YN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XN(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function $N(){return lb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="firebaseLocalStorageDb",WN=1,th="firebaseLocalStorage",ub="fbase_key";class Kc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function bh(r,e){return r.transaction([th],e?"readwrite":"readonly").objectStore(th)}function JN(){const r=indexedDB.deleteDatabase(cb);return new Kc(r).toPromise()}function dg(){const r=indexedDB.open(cb,WN);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(th,{keyPath:ub})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(th)?e(i):(i.close(),await JN(),e(await dg()))})})}async function hE(r,e,t){const i=bh(r,!0).put({[ub]:e,value:t});return new Kc(i).toPromise()}async function ZN(r,e){const t=bh(r,!1).get(e),i=await new Kc(t).toPromise();return i===void 0?null:i.value}function fE(r,e){const t=bh(r,!0).delete(e);return new Kc(t).toPromise()}const e2=800,t2=3;class db{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>t2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Th._getInstance($N()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await YN(),!this.activeServiceWorker)return;this.sender=new QN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dg();return await hE(e,eh,"1"),await fE(e,eh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>hE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>ZN(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=bh(o,!1).getAll();return new Kc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),e2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}db.type="LOCAL";const n2=db;new Fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(r,e){return e?Is(e):(Re(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp extends gp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Po(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Po(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Po(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function r2(r){return tb(r.auth,new vp(r),r.bypassAuthState)}function s2(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),DN(t,new vp(r),r.bypassAuthState)}async function i2(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),NN(t,new vp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,t,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return r2;case"linkViaPopup":case"linkViaRedirect":return i2;case"reauthViaPopup":case"reauthViaRedirect":return s2;default:or(this.auth,"internal-error")}}resolve(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=new Fc(2e3,1e4);async function o2(r,e,t){if(Nn(r.app))return Promise.reject(yr(r,"operation-not-supported-in-this-environment"));const i=$r(r);MC(r,e,yp);const o=hb(i,t);return new _a(i,"signInViaPopup",e,o).executeNotNull()}class _a extends fb{constructor(e,t,i,o,c){super(e,t,o,c),this.provider=i,this.authWindow=null,this.pollId=null,_a.currentPopupAction&&_a.currentPopupAction.cancel(),_a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Os(this.filter.length===1,"Popup operations only handle one event");const e=_p();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_a.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,a2.get())};e()}}_a.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="pendingRedirect",Nd=new Map;class c2 extends fb{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Nd.get(this.auth._key());if(!e){try{const i=await u2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Nd.set(this.auth._key(),e)}return this.bypassAuthState||Nd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function u2(r,e){const t=f2(e),i=h2(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function d2(r,e){Nd.set(r._key(),e)}function h2(r){return Is(r._redirectPersistence)}function f2(r){return Cd(l2,r.config.apiKey,r.name)}async function m2(r,e,t=!1){if(Nn(r.app))return Promise.reject(Gr(r));const i=$r(r),o=hb(i,e),d=await new c2(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=600*1e3;class p2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!y2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!mb(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(yr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=g2&&this.cachedEventUids.clear(),this.cachedEventUids.has(mE(e))}saveEventToCache(e){this.cachedEventUids.add(mE(e)),this.lastProcessedEventTime=Date.now()}}function mE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function mb({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function y2(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(r,e={}){return Xr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,E2=/^https?/;async function w2(r){if(r.config.emulator)return;const{authorizedDomains:e}=await _2(r);for(const t of e)try{if(T2(t))return}catch{}or(r,"unauthorized-domain")}function T2(r){const e=cg(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!E2.test(t))return!1;if(v2.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=new Fc(3e4,6e4);function gE(){const r=Qr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function S2(r){return new Promise((e,t)=>{var o,c,d;function i(){gE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gE(),t(yr(r,"network-request-failed"))},timeout:b2.get()})}if((c=(o=Qr().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=Qr().gapi)!=null&&d.load)i();else{const m=uN("iframefcb");return Qr()[m]=()=>{gapi.load?i():t(yr(r,"network-request-failed"))},XT(`${cN()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Dd=null,e})}let Dd=null;function A2(r){return Dd=Dd||S2(r),Dd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=new Fc(5e3,15e3),R2="__/auth/iframe",I2="emulator/auth/iframe",C2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},N2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D2(r){const e=r.config;Re(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?hp(e,I2):`https://${r.config.authDomain}/${R2}`,i={apiKey:e.apiKey,appName:r.name,v:Ho},o=N2.get(r.config.apiHost);o&&(i.eid=o);const c=r._getFrameworks();return c.length&&(i.fw=c.join(",")),`${t}?${Pc(i).slice(1)}`}async function P2(r){const e=await A2(r),t=Qr().gapi;return Re(t,r,"internal-error"),e.open({where:document.body,url:D2(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:C2,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const d=yr(r,"network-request-failed"),m=Qr().setTimeout(()=>{c(d)},x2.get());function g(){Qr().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},k2=500,M2=600,V2="_blank",j2="http://localhost";class pE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function L2(r,e,t,i=k2,o=M2){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g={...O2,width:i.toString(),height:o.toString(),top:c,left:d},_=gn().toLowerCase();t&&(m=BT(_)?V2:t),zT(_)&&(e=e||j2,g.scrollbars="yes");const w=Object.entries(g).reduce((A,[I,j])=>`${A}${I}=${j},`,"");if(eN(_)&&m!=="_self")return U2(e||"",m),new pE(null);const b=window.open(e||"",m,w);Re(b,r,"popup-blocked");try{b.focus()}catch{}return new pE(b)}function U2(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="__/auth/handler",q2="emulator/auth/handler",B2=encodeURIComponent("fac");async function yE(r,e,t,i,o,c){Re(r.config.authDomain,r,"auth-domain-config-required"),Re(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Ho,eventId:o};if(e instanceof yp){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",ax(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,b]of Object.entries({}))d[w]=b}if(e instanceof Qc){const w=e.getScopes().filter(b=>b!=="");w.length>0&&(d.scopes=w.join(","))}r.tenantId&&(d.tid=r.tenantId);const m=d;for(const w of Object.keys(m))m[w]===void 0&&delete m[w];const g=await r._getAppCheckToken(),_=g?`#${B2}=${encodeURIComponent(g)}`:"";return`${H2(r)}?${Pc(m).slice(1)}${_}`}function H2({config:r}){return r.emulator?hp(r,q2):`https://${r.authDomain}/${z2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="webStorageSupport";class F2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ob,this._completeRedirectFn=m2,this._overrideRedirectResult=d2}async _openPopup(e,t,i,o){var d;Os((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await yE(e,t,i,cg(),o);return L2(e,c,_p())}async _openRedirect(e,t,i,o){await this._originValidation(e);const c=await yE(e,t,i,cg(),o);return KN(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(Os(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await P2(e),i=new p2(e);return t.register("authEvent",o=>(Re(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Um,{type:Um},o=>{var d;const c=(d=o==null?void 0:o[0])==null?void 0:d[Um];c!==void 0&&t(!!c),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=w2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return KT()||qT()||mp()}}const G2=F2;var _E="@firebase/auth",vE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Y2(r){Oo(new wa("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=i.options;Re(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YT(r)},_=new aN(i,o,c,g);return pN(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Oo(new wa("auth-internal",e=>{const t=$r(e.getProvider("auth").getImmediate());return(i=>new Q2(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bi(_E,vE,K2(r)),bi(_E,vE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=300,$2=GE("authIdTokenMaxAge")||X2;let EE=null;const W2=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>$2)return;const o=t==null?void 0:t.token;EE!==o&&(EE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function J2(r=WE()){const e=vg(r,"auth");if(e.isInitialized())return e.getImmediate();const t=gN(r,{popupRedirectResolver:G2,persistence:[n2,FN,ob]}),i=GE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const d=W2(c.toString());UN(t,d,()=>d(t.currentUser)),LN(t,m=>d(m))}}const o=HE("auth");return o&&yN(t,`http://${o}`),t}function Z2(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}oN({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const c=yr("internal-error");c.customData=o,t(c)},i.type="text/javascript",i.charset="UTF-8",Z2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Y2("Browser");const eD={apiKey:"AIzaSyCDZJqOx5eXpu3cD_FBJ8oi-hYvLCpbDXE",authDomain:"verdadreto-bec6a.firebaseapp.com",projectId:"verdadreto-bec6a",storageBucket:"verdadreto-bec6a.firebasestorage.app",messagingSenderId:"938969209658",appId:"1:938969209658:web:534282f57a8ff381c00e03"},gb=$E(eD),Ne=_C(gb),vr=J2(gb),pb=new xs;pb.setCustomParameters({prompt:"select_account"});class tD{constructor(){this.currentUser=null,this.sessionId=this.generateSessionId()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setCurrentUser(e){this.currentUser=e}async trackEvent(e,t){var i,o,c;try{const d={eventType:e,userId:(i=this.currentUser)==null?void 0:i.uid,userEmail:((o=this.currentUser)==null?void 0:o.email)||void 0,isAnonymous:((c=this.currentUser)==null?void 0:c.isAnonymous)??!0,timestamp:Ye.now(),sessionId:this.sessionId,...t};await Hc(tt(Ne,"analytics"),d),console.log("Analytics event tracked:",e)}catch(d){console.error("Error tracking analytics event:",d)}}async trackGameStart(e,t,i){await this.trackEvent("game_start",{packId:e,packName:t,gameData:{playersCount:i}})}async trackGameEnd(e,t,i,o){await this.trackEvent("game_end",{packId:e,packName:t,gameData:{roundsPlayed:i,duration:o}})}async trackPackSelected(e,t){await this.trackEvent("pack_selected",{packId:e,packName:t})}async trackDemoUsed(e,t){await this.trackEvent("demo_used",{packId:e,packName:t})}async trackUserLogin(){await this.trackEvent("user_login")}async trackUserRegister(){await this.trackEvent("user_register")}async trackSessionStart(){await this.trackEvent("session_start")}async trackSessionEnd(){await this.trackEvent("session_end")}async getStatsForPeriod(e,t){const i=new Date;let o,c=i;switch(e){case"realtime":o=new Date(i.getTime()-300*1e3);break;case"day":o=t?new Date(t):new Date(i.getFullYear(),i.getMonth(),i.getDate()),c=new Date(o.getTime()+1440*60*1e3);break;case"month":o=t?new Date(t):new Date(i.getFullYear(),i.getMonth(),1),c=new Date(o.getFullYear(),o.getMonth()+1,0);break;case"year":o=t?new Date(t):new Date(i.getFullYear(),0,1),c=new Date(o.getFullYear()+1,0,0);break}const d=Ye.fromDate(o),m=Ye.fromDate(c),g=St(tt(Ne,"analytics"),$e("timestamp",">=",d),$e("timestamp","<=",m),Yd("timestamp","desc")),w=(await pt(g)).docs.map(b=>b.data());return this.calculateStats(w,e)}calculateStats(e,t){const i=new Set,o=new Set,c=new Set,d=new Map;let m=0,g=0,_=0;const w=Date.now()-300*1e3,b=new Set;e.forEach(I=>{switch(I.userId&&(i.add(I.userId),I.isAnonymous?c.add(I.userId):o.add(I.userId)),I.timestamp.toMillis()>w&&b.add(I.sessionId),I.eventType){case"game_start":if(m++,I.packId&&I.packName){const j=d.get(I.packId)||{name:I.packName,count:0};d.set(I.packId,{...j,count:j.count+1})}break;case"demo_used":g++;break}}),_=b.size;const A=Array.from(d.entries()).map(([I,j])=>({packId:I,packName:j.name,count:j.count})).sort((I,j)=>j.count-I.count).slice(0,10);return{totalUsers:i.size,registeredUsers:o.size,anonymousUsers:c.size,totalGames:m,totalDemos:g,activeUsers:_,mostPlayedPacks:A,gamesPerDay:t==="day"?m:Math.round(m/this.getDaysInPeriod(t)),demosPerDay:t==="day"?g:Math.round(g/this.getDaysInPeriod(t))}}getDaysInPeriod(e){switch(e){case"realtime":return 1;case"day":return 1;case"month":return 30;case"year":return 365;default:return 1}}async getRecentEvents(e=50){const t=St(tt(Ne,"analytics"),Yd("timestamp","desc"),IT(e));return(await pt(t)).docs.map(o=>({id:o.id,...o.data()}))}}const Ei=new tD,nD=({availablePacks:r,purchasedPacks:e,adWatchedPacks:t,referralUnlockedPacks:i,suggestionUnlockedPacks:o,onContinue:c,onBack:d,onGoToShop:m,onPlayDemo:g})=>{const _=r.some(I=>I.id==="base"),w={id:"base",name:"Pack Base",description:"Preguntas y retos básicos incluidos",price:"INCLUIDO",icon:"🎮",questionsUrl:"",daresUrl:"",allowDemo:!1,demoPlaysCount:0},b=r.filter(I=>I.id!=="no-ads"),A=_?b:[w,...b];return e.length>0,p.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:p.jsxs(Pn,{className:"w-full max-w-2xl text-center",children:[p.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Packs Disponibles"}),p.jsx("p",{className:"text-gray-400 mb-8",children:"Estos son los packs que tienes disponibles para jugar"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:A.map(I=>{const j=I.id==="base"||e.includes(I.id),F=I.id==="base",z=t.includes(I.id),re=i.includes(I.id),ie=o.includes(I.id),se=j||re||ie;return p.jsxs("div",{className:`relative p-4 rounded-lg border transition-all duration-200 ${j?"border-green-500 bg-green-500/10":re?"border-blue-500 bg-blue-500/10":ie?"border-purple-500 bg-purple-500/10":z?"border-yellow-500 bg-yellow-500/10":"border-gray-600 bg-gray-800/50 opacity-60"}`,children:[p.jsx("div",{className:"absolute top-2 right-2",children:j?p.jsx(Im,{className:"w-6 h-6 text-green-500"}):re?p.jsx(Im,{className:"w-6 h-6 text-blue-500"}):ie?p.jsx(Im,{className:"w-6 h-6 text-purple-500"}):p.jsx(Io,{className:"w-6 h-6 text-yellow-500"})}),p.jsx("div",{className:"text-4xl mb-2",children:I.icon}),p.jsx("h3",{className:`text-xl font-bold mb-2 ${se||z?"text-white":"text-gray-400"}`,children:I.name}),p.jsx("p",{className:`text-sm mb-3 ${se||z?"text-gray-300":"text-gray-500"}`,children:I.description}),I.isReferralUnlockable&&!se&&p.jsxs("p",{className:"text-xs text-blue-400 mb-2",children:["🎯 Requiere ",I.requiredReferrals," referidos"]}),I.isSuggestionUnlockable&&!se&&p.jsxs("p",{className:"text-xs text-purple-400 mb-2",children:["💡 Requiere ",I.requiredApprovedSuggestions," sugerencias aprobadas"]}),p.jsx("div",{className:`text-lg font-semibold ${j?"text-green-400":re?"text-blue-400":ie?"text-purple-400":"text-yellow-400"}`,children:F?"INCLUIDO":j?"COMPRADO":re?"POR REFERIDOS":ie?"POR SUGERENCIAS":z?"DEMO VISTO":"PREMIUM"}),!se&&!z&&p.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx(Io,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),p.jsx("p",{className:"text-yellow-400 font-semibold text-sm mb-3",children:I.isReferralUnlockable?`${I.requiredReferrals} REFERIDOS`:I.isSuggestionUnlockable?`${I.requiredApprovedSuggestions} SUGERENCIAS`:"PREMIUM"}),I.allowDemo&&p.jsx(be,{onClick:fe=>{fe.stopPropagation(),Ei.trackDemoUsed(I.id,I.name),g(I.id)},variant:"secondary",className:"px-3 py-1 text-xs bg-yellow-500 hover:bg-yellow-600 text-white border border-yellow-400 shadow-md",children:"💎 Jugar Demo"})]})})]},I.id)})}),r.some(I=>!e.includes(I.id))&&p.jsx("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:p.jsxs("p",{className:"text-yellow-400 text-sm",children:[p.jsx(Io,{className:"w-4 h-4 inline mr-2"}),"Los packs premium están bloqueados. Visita la tienda para desbloquearlos."]})}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(be,{onClick:d,variant:"secondary",className:"px-6",children:"Volver"}),p.jsx(be,{onClick:m,variant:"secondary",className:"px-6 bg-yellow-600 hover:bg-yellow-700 text-white",children:"Ir a la Tienda"}),p.jsx(be,{onClick:()=>{A.forEach(I=>{const j=I.id==="base"||e.includes(I.id),F=i.includes(I.id),z=o.includes(I.id);(j||F||z)&&Ei.trackPackSelected(I.id,I.name)}),c()},className:"px-6",disabled:!1,children:"Continuar al Juego"})]})]})})},rD="modulepreload",sD=function(r,e){return new URL(r,e).href},wE={},yb=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let d=function(w){return Promise.all(w.map(b=>Promise.resolve(b).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};const m=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),_=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=d(t.map(w=>{if(w=sD(w,i),w in wE)return;wE[w]=!0;const b=w.endsWith(".css"),A=b?'[rel="stylesheet"]':"";if(!!i)for(let F=m.length-1;F>=0;F--){const z=m[F];if(z.href===w&&(!b||z.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${A}`))return;const j=document.createElement("link");if(j.rel=b?"stylesheet":rD,b||(j.as="script"),j.crossOrigin="",j.href=w,_&&j.setAttribute("nonce",_),document.head.appendChild(j),b)return new Promise((F,z)=>{j.addEventListener("load",F),j.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${w}`)))})}))}function c(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return o.then(d=>{for(const m of d||[])m.status==="rejected"&&c(m.reason);return e().catch(c)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var qo;(function(r){r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE"})(qo||(qo={}));class zm extends Error{constructor(e,t,i){super(e),this.message=e,this.code=t,this.data=i}}const iD=r=>{var e,t;return r!=null&&r.androidBridge?"android":!((t=(e=r==null?void 0:r.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},aD=r=>{const e=r.CapacitorCustomPlatform||null,t=r.Capacitor||{},i=t.Plugins=t.Plugins||{},o=()=>e!==null?e.name:iD(r),c=()=>o()!=="web",d=b=>{const A=_.get(b);return!!(A!=null&&A.platforms.has(o())||m(b))},m=b=>{var A;return(A=t.PluginHeaders)===null||A===void 0?void 0:A.find(I=>I.name===b)},g=b=>r.console.error(b),_=new Map,w=(b,A={})=>{const I=_.get(b);if(I)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),I.proxy;const j=o(),F=m(b);let z;const re=async()=>(!z&&j in A?z=typeof A[j]=="function"?z=await A[j]():z=A[j]:e!==null&&!z&&"web"in A&&(z=typeof A.web=="function"?z=await A.web():z=A.web),z),ie=(x,C)=>{var O,k;if(F){const V=F==null?void 0:F.methods.find(R=>C===R.name);if(V)return V.rtype==="promise"?R=>t.nativePromise(b,C.toString(),R):(R,Ce)=>t.nativeCallback(b,C.toString(),R,Ce);if(x)return(O=x[C])===null||O===void 0?void 0:O.bind(x)}else{if(x)return(k=x[C])===null||k===void 0?void 0:k.bind(x);throw new zm(`"${b}" plugin is not implemented on ${j}`,qo.Unimplemented)}},se=x=>{let C;const O=(...k)=>{const V=re().then(R=>{const Ce=ie(R,x);if(Ce){const Oe=Ce(...k);return C=Oe==null?void 0:Oe.remove,Oe}else throw new zm(`"${b}.${x}()" is not implemented on ${j}`,qo.Unimplemented)});return x==="addListener"&&(V.remove=async()=>C()),V};return O.toString=()=>`${x.toString()}() { [capacitor code] }`,Object.defineProperty(O,"name",{value:x,writable:!1,configurable:!1}),O},fe=se("addListener"),le=se("removeListener"),K=(x,C)=>{const O=fe({eventName:x},C),k=async()=>{const R=await O;le({eventName:x,callbackId:R},C)},V=new Promise(R=>O.then(()=>R({remove:k})));return V.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await k()},V},N=new Proxy({},{get(x,C){switch(C){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return F?K:fe;case"removeListener":return le;default:return se(C)}}});return i[b]=N,_.set(b,{name:b,proxy:N,platforms:new Set([...Object.keys(A),...F?[j]:[]])}),N};return t.convertFileSrc||(t.convertFileSrc=b=>b),t.getPlatform=o,t.handleError=g,t.isNativePlatform=c,t.isPluginAvailable=d,t.registerPlugin=w,t.Exception=zm,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},oD=r=>r.Capacitor=aD(r),hn=oD(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Ep=hn.registerPlugin;class _b{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(t);const c=this.windowListeners[e];c&&!c.registered&&this.addWindowListener(c),i&&this.sendRetainedArgumentsForEvent(e);const d=async()=>this.removeListener(e,t);return Promise.resolve({remove:d})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,i){const o=this.listeners[e];if(!o){if(i){let c=this.retainedEventArguments[e];c||(c=[]),c.push(t),this.retainedEventArguments[e]=c}return}o.forEach(c=>c(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:i=>{this.notifyListeners(t,i)}}}unimplemented(e="not implemented"){return new hn.Exception(e,qo.Unimplemented)}unavailable(e="not available"){return new hn.Exception(e,qo.Unavailable)}async removeListener(e,t){const i=this.listeners[e];if(!i)return;const o=i.indexOf(t);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(i=>{this.notifyListeners(e,i)}))}}const TE=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),bE=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class lD extends _b{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[o,c]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=bE(o).trim(),c=bE(c).trim(),t[o]=c}),t}async setCookie(e){try{const t=TE(e.key),i=TE(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,c=(e.path||"/").replace("path=",""),d=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${i||""}${o}; path=${c}; ${d};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Ep("CapacitorCookies",{web:()=>new lD});const cD=async r=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{const o=i.result;e(o.indexOf(",")>=0?o.split(",")[1]:o)},i.onerror=o=>t(o),i.readAsDataURL(r)}),uD=(r={})=>{const e=Object.keys(r);return Object.keys(r).map(o=>o.toLocaleLowerCase()).reduce((o,c,d)=>(o[c]=r[e[d]],o),{})},dD=(r,e=!0)=>r?Object.entries(r).reduce((i,o)=>{const[c,d]=o;let m,g;return Array.isArray(d)?(g="",d.forEach(_=>{m=e?encodeURIComponent(_):_,g+=`${c}=${m}&`}),g.slice(0,-1)):(m=e?encodeURIComponent(d):d,g=`${c}=${m}`),`${i}&${g}`},"").substr(1):null,hD=(r,e={})=>{const t=Object.assign({method:r.method||"GET",headers:r.headers},e),o=uD(r.headers)["content-type"]||"";if(typeof r.data=="string")t.body=r.data;else if(o.includes("application/x-www-form-urlencoded")){const c=new URLSearchParams;for(const[d,m]of Object.entries(r.data||{}))c.set(d,m);t.body=c.toString()}else if(o.includes("multipart/form-data")||r.data instanceof FormData){const c=new FormData;if(r.data instanceof FormData)r.data.forEach((m,g)=>{c.append(g,m)});else for(const m of Object.keys(r.data))c.append(m,r.data[m]);t.body=c;const d=new Headers(t.headers);d.delete("content-type"),t.headers=d}else(o.includes("application/json")||typeof r.data=="object")&&(t.body=JSON.stringify(r.data));return t};class fD extends _b{async request(e){const t=hD(e,e.webFetchExtra),i=dD(e.params,e.shouldEncodeUrlParams),o=i?`${e.url}?${i}`:e.url,c=await fetch(o,t),d=c.headers.get("content-type")||"";let{responseType:m="text"}=c.ok?e:{};d.includes("application/json")&&(m="json");let g,_;switch(m){case"arraybuffer":case"blob":_=await c.blob(),g=await cD(_);break;case"json":g=await c.json();break;case"document":case"text":default:g=await c.text()}const w={};return c.headers.forEach((b,A)=>{w[A]=b}),{data:g,headers:w,status:c.status,url:c.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Ep("CapacitorHttp",{web:()=>new fD});var SE;(function(r){r.General="General",r.ParentalGuidance="ParentalGuidance",r.Teen="Teen",r.MatureAudience="MatureAudience"})(SE||(SE={}));var AE;(function(r){r.SizeChanged="bannerAdSizeChanged",r.Loaded="bannerAdLoaded",r.FailedToLoad="bannerAdFailedToLoad",r.Opened="bannerAdOpened",r.Closed="bannerAdClosed",r.AdImpression="bannerAdImpression"})(AE||(AE={}));var hg;(function(r){r.TOP_CENTER="TOP_CENTER",r.CENTER="CENTER",r.BOTTOM_CENTER="BOTTOM_CENTER"})(hg||(hg={}));var fg;(function(r){r.BANNER="BANNER",r.FULL_BANNER="FULL_BANNER",r.LARGE_BANNER="LARGE_BANNER",r.MEDIUM_RECTANGLE="MEDIUM_RECTANGLE",r.LEADERBOARD="LEADERBOARD",r.ADAPTIVE_BANNER="ADAPTIVE_BANNER",r.SMART_BANNER="SMART_BANNER"})(fg||(fg={}));var yc;(function(r){r.Loaded="interstitialAdLoaded",r.FailedToLoad="interstitialAdFailedToLoad",r.Showed="interstitialAdShowed",r.FailedToShow="interstitialAdFailedToShow",r.Dismissed="interstitialAdDismissed"})(yc||(yc={}));var xE;(function(r){r.Loaded="onRewardedInterstitialAdLoaded",r.FailedToLoad="onRewardedInterstitialAdFailedToLoad",r.Showed="onRewardedInterstitialAdShowed",r.FailedToShow="onRewardedInterstitialAdFailedToShow",r.Dismissed="onRewardedInterstitialAdDismissed",r.Rewarded="onRewardedInterstitialAdReward"})(xE||(xE={}));var Ro;(function(r){r.Loaded="onRewardedVideoAdLoaded",r.FailedToLoad="onRewardedVideoAdFailedToLoad",r.Showed="onRewardedVideoAdShowed",r.FailedToShow="onRewardedVideoAdFailedToShow",r.Dismissed="onRewardedVideoAdDismissed",r.Rewarded="onRewardedVideoAdReward"})(Ro||(Ro={}));var RE;(function(r){r.NOT_REQUIRED="NOT_REQUIRED",r.OBTAINED="OBTAINED",r.REQUIRED="REQUIRED",r.UNKNOWN="UNKNOWN"})(RE||(RE={}));var IE;(function(r){r[r.DISABLED=0]="DISABLED",r[r.EEA=1]="EEA",r[r.NOT_EEA=2]="NOT_EEA"})(IE||(IE={}));const dn=Ep("AdMob",{web:()=>yb(()=>import("./web-DHbwcTVU.js"),[],import.meta.url).then(r=>new r.AdMobWeb)}),vd={enabled:!0,questionChangeThreshold:IA.CHANGES_BEFORE_AD,adLoadingTime:1e3,adPlayingTime:3e3,showInRoundEnd:!0,showInGameEnd:!0,showInDemo:!1,autoPlay:!0,skipAfterSeconds:5,frequency:{questionChanges:3,roundEnd:1,gameEnd:1},types:{interstitial:!0,rewarded:!0,banner:!1}};class mD{constructor(){this.STORAGE_KEY="ads_config",this.config=this.loadConfig()}loadConfig(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){const t=JSON.parse(e);return{...vd,...t}}}catch(e){console.error("Error loading ads config:",e)}return{...vd}}saveConfig(){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.config))}catch(e){console.error("Error saving ads config:",e)}}getConfig(){return{...this.config}}updateConfig(e){this.config={...this.config,...e},this.saveConfig()}setEnabled(e){this.config.enabled=e,this.saveConfig()}isEnabled(){return this.config.enabled}shouldShowAdForQuestionChange(e){return this.config.enabled&&e>=this.config.questionChangeThreshold}shouldShowAdInRoundEnd(){return this.config.enabled&&this.config.showInRoundEnd}shouldShowAdInGameEnd(){return this.config.enabled&&this.config.showInGameEnd}shouldShowAdInDemo(){return this.config.enabled&&this.config.showInDemo}getAdLoadingTime(){return this.config.adLoadingTime}getAdPlayingTime(){return this.config.adPlayingTime}getQuestionChangeThreshold(){return this.config.questionChangeThreshold}resetToDefault(){this.config={...vd},this.saveConfig()}exportConfig(){return JSON.stringify(this.config,null,2)}importConfig(e){try{const t=JSON.parse(e);if(this.isValidConfig(t))return this.config={...vd,...t},this.saveConfig(),!0}catch(t){console.error("Error importing ads config:",t)}return!1}isValidConfig(e){return typeof e=="object"&&typeof e.enabled=="boolean"&&typeof e.questionChangeThreshold=="number"&&typeof e.adLoadingTime=="number"&&typeof e.adPlayingTime=="number"}getConfigStats(){return{enabled:this.config.enabled,questionChangeThreshold:this.config.questionChangeThreshold,totalTypes:Object.values(this.config.types).filter(Boolean).length,autoPlay:this.config.autoPlay,lastModified:localStorage.getItem(this.STORAGE_KEY+"_modified")||"Never"}}}const Mt=new mD;class gD{constructor(){this.isInitialized=!1,this.config=null,this.configUnsubscribe=null}async initialize(e){if(this.isInitialized){this.config={...this.config,...e};return}try{this.config=e,hn.isNativePlatform()?(await dn.initialize({requestTrackingAuthorization:!0,testingDevices:e.testMode?["YOUR_DEVICE_ID"]:[],initializeForTesting:e.testMode||!1}),this.isInitialized=!0,console.log("AdMob initialized successfully"),this.configUnsubscribe=Mt.onConfigChange(t=>{console.log("Configuración de anuncios actualizada:",t)})):console.log("AdMob not available on web platform")}catch(t){throw console.error("Failed to initialize AdMob:",t),t}}async showBannerAd(e,t){const i={success:!1,adType:Hn.BANNER,error:null,timestamp:Date.now()};try{if(!Mt.canShowAd(Hn.BANNER,t))return i.error="Ad blocked by configuration or conditions",console.log("Banner ad blocked by configuration"),i;if(!this.isInitialized||!this.config)throw i.error="AdMob not initialized",new Error("AdMob not initialized");if(!hn.isNativePlatform())throw i.error="AdMob banners only available on native platforms",new Error("AdMob banners only available on native platforms");if(!this.config.bannerAdUnitId)throw i.error="bannerAdUnitId not configured",new Error("bannerAdUnitId not configured");const o={adId:this.config.bannerAdUnitId,adSize:fg.ADAPTIVE_BANNER,position:hg.BOTTOM_CENTER,margin:0,isTesting:this.config.testMode||!1,...e};return await dn.showBanner(o),Mt.recordAdShown(Hn.BANNER),i.success=!0,console.log("Banner ad shown successfully"),i}catch(o){return i.error=o instanceof Error?o.message:"Unknown error",console.error("Failed to show banner ad:",o),i}}async hideBannerAd(){if(this.isInitialized&&hn.isNativePlatform())try{await dn.hideBanner(),console.log("Banner ad hidden successfully")}catch(e){console.error("Failed to hide banner ad:",e)}}async resumeBannerAd(){if(this.isInitialized&&hn.isNativePlatform())try{await dn.resumeBanner(),console.log("Banner ad resumed successfully")}catch(e){console.error("Failed to resume banner ad:",e)}}async removeBannerAd(){if(this.isInitialized&&hn.isNativePlatform())try{await dn.removeBanner(),console.log("Banner ad removed successfully")}catch(e){console.error("Failed to remove banner ad:",e)}}async showInterstitial(e){const t={success:!1,adType:Hn.POST_GAME,error:null,timestamp:Date.now()};try{if(!Mt.canShowAd(Hn.POST_GAME,e))return t.error="Ad blocked by configuration or conditions",console.log("Interstitial ad blocked by configuration"),t;if(!this.isInitialized||!this.config)return t.error="AdMob not initialized",console.warn("AdMob not initialized"),t;if(!hn.isNativePlatform())return t.error="Interstitials are only available on native platforms",console.warn("Interstitials are only available on native platforms"),t;if(!this.config.interstitialAdUnitId)return t.error="No interstitialAdUnitId configured",console.warn("No interstitialAdUnitId configured"),t;let i=null,o=null,c=null;const d=new Promise((_,w)=>{setTimeout(()=>w(new Error("Interstitial ad timeout")),3e4)}),m=new Promise(async(_,w)=>{try{i=await dn.addListener(yc.Loaded,j=>{console.log("Interstitial loaded")}),c=await dn.addListener(yc.FailedToLoad,j=>{console.error("Interstitial failed to load:",j),w(new Error("Failed to load interstitial"))});let b=null;const A=new Promise(j=>{b=j});o=await dn.addListener(yc.Dismissed,()=>{console.log("Interstitial dismissed"),b&&b()});const I={adId:this.config.interstitialAdUnitId,isTesting:this.config.testMode||!1};await dn.prepareInterstitial(I),await dn.showInterstitial(),await A,_(!0)}catch(b){w(b)}});return await Promise.race([m,d])&&(Mt.recordAdShown(Hn.POST_GAME),t.success=!0),t}catch(i){return t.error=i instanceof Error?i.message:"Unknown error",console.error("Failed to show interstitial ad:",i),t}finally{try{loadedSub&&await loadedSub.remove(),dismissedSub&&await dismissedSub.remove(),failedSub&&await failedSub.remove()}catch(i){console.warn("Error cleaning up interstitial listeners:",i)}}}async showRewarded(e){const t={success:!1,adType:Hn.QUESTION_CHANGE,error:null,timestamp:Date.now()};try{if(!Mt.canShowAd(Hn.QUESTION_CHANGE,e))return t.error="Ad blocked by configuration or conditions",console.log("Rewarded ad blocked by configuration"),t;if(!this.isInitialized||!this.config)return t.error="AdMob not initialized",console.warn("AdMob not initialized"),t;if(!hn.isNativePlatform())return t.error="Rewarded ads are only available on native platforms",console.warn("Rewarded ads are only available on native platforms"),t;if(!this.config.rewardedAdUnitId)return t.error="No rewardedAdUnitId configured",console.warn("No rewardedAdUnitId configured"),t;let i=null,o=null,c=null,d=null;const m=new Promise((w,b)=>{setTimeout(()=>b(new Error("Rewarded ad timeout")),3e4)}),g=new Promise(async(w,b)=>{try{let A=!1;i=await dn.addListener(Ro.Loaded,z=>{console.log("Rewarded loaded")}),d=await dn.addListener(Ro.FailedToLoad,z=>{console.error("Rewarded failed to load:",z),b(new Error("Failed to load rewarded ad"))}),o=await dn.addListener(Ro.Rewarded,z=>{A=!0,console.log("User rewarded",z)});let I=null;const j=new Promise(z=>{I=z});c=await dn.addListener(Ro.Dismissed,()=>{console.log("Rewarded dismissed"),I&&I()});const F={adId:this.config.rewardedAdUnitId,isTesting:this.config.testMode||!1};await dn.prepareRewardVideoAd(F),await dn.showRewardVideoAd(),await j,w(A)}catch(A){b(A)}});return await Promise.race([g,m])&&(Mt.recordAdShown(Hn.QUESTION_CHANGE),t.success=!0,t.rewarded=!0),t}catch(i){return t.error=i instanceof Error?i.message:"Unknown error",console.error("Failed to show rewarded ad:",i),t}finally{try{loadedSub&&await loadedSub.remove(),rewardedSub&&await rewardedSub.remove(),dismissedSub&&await dismissedSub.remove(),failedSub&&await failedSub.remove()}catch(i){console.warn("Error cleaning up rewarded listeners:",i)}}}async showBestMonetizingAd(e){var t,i;if((t=this.config)!=null&&t.rewardedAdUnitId){const o=await this.showRewarded(e);if(o.success)return o}if((i=this.config)!=null&&i.interstitialAdUnitId){const o=await this.showInterstitial(e);if(o.success)return o}return{success:!1,adType:Hn.POST_GAME,error:"No ads available or all blocked",timestamp:Date.now()}}isNativePlatform(){return hn.isNativePlatform()}isWebPlatform(){return hn.getPlatform()==="web"}getConfig(){return this.config}async showPostGameAd(e){const t=await this.showInterstitial(e);return t.adType=Hn.POST_GAME,t}async showPostRoundAd(e){const t=await this.showInterstitial(e);return t.adType=Hn.POST_ROUND,t}async showQuestionChangeAd(e){return await this.showRewarded(e)}canShowAdType(e,t){return Mt.canShowAd(e,t)}getAdsConfig(){return Mt.getConfig()}getSessionState(){return Mt.getSessionState()}resetSession(){Mt.resetSessionState()}destroy(){this.configUnsubscribe&&(this.configUnsubscribe(),this.configUnsubscribe=null)}}const Ri=new gD,pD=({pack:r,isOpen:e,onClose:t,onStartDemo:i,onAdWatched:o,hasNoAds:c=!1})=>{const[d,m]=X.useState(!1),[g,_]=X.useState(null);if(!e)return null;const w=async()=>{m(!0),_(null);try{if(c||!Mt.shouldShowAdInDemo()){o&&o(r.id),i();return}await Ri.showInterstitial()?(o&&o(r.id),i(),t()):_("No se pudo cargar el anuncio. Necesitas ver un anuncio para jugar el demo.")}catch(b){console.error("Error al mostrar anuncio:",b),_("Error al cargar el anuncio. Necesitas ver un anuncio para jugar el demo.")}finally{m(!1)}};return p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 animate-fade-in",children:p.jsxs(Pn,{className:"w-full max-w-md relative",children:[p.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:p.jsx(PA,{className:"w-6 h-6"})}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-6xl mb-4",children:r.icon}),p.jsxs("h2",{className:"text-2xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-500",children:["Demo: ",r.name]}),p.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:p.jsxs("div",{className:"flex items-start gap-3 text-left",children:[p.jsx(OA,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),p.jsxs("div",{className:"text-sm text-blue-300",children:[p.jsx("p",{className:"mb-2",children:p.jsx("strong",{children:"¿Qué incluye el demo?"})}),p.jsxs("ul",{className:"space-y-1 text-xs",children:[p.jsx("li",{children:"• Podrás probar 5 preguntas y 5 retos que siempre serán los mismos (el pack incluye muchos más)"}),p.jsx("li",{children:"• Puedes jugar de forma ilimitada"}),p.jsx("li",{children:"• Solo necesitas ver un anuncio antes de cada partida"}),p.jsx("li",{children:"• Perfecto para probar si te gusta el pack"})]})]})]})}),g&&p.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mb-4",children:p.jsx("p",{className:"text-yellow-400 text-sm",children:g})}),p.jsxs("div",{className:"flex flex-col gap-3",children:[p.jsx(be,{onClick:w,disabled:d,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:d?p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Cargando anuncio..."]}):p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx("span",{role:"img","aria-label":"gem",children:"💎"}),"Ver anuncio y jugar demo"]})}),p.jsx(be,{onClick:t,variant:"secondary",className:"w-full",disabled:d,children:"Volver atrás"})]}),p.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"¿Te gusta el pack? Al final de la partida podrás comprarlo completo."})]})]})})},yD=({players:r,currentPlayerIndex:e,onNextPlayer:t,onNewGame:i,questions:o,dares:c,roundConfig:d,gameProgress:m,onRoundEnd:g,onQuestionAsked:_,onDareCompleted:w,onQuestionChange:b,onAdRequired:A,questionChangeState:I={changesCount:0,isAdLoading:!1,isAdPlaying:!1}})=>{const[j,F]=X.useState(null),[z,re]=X.useState(null),[ie,se]=X.useState(new Set),[fe,le]=X.useState(new Set),K=r[e];X.useEffect(()=>{Ei.trackGameStart("mixed","Juego Mixto",r.length)},[]);const N=R=>{if(!R.includes("$jugador"))return R;const Ce=r.filter((Q,ae)=>ae!==e);if(Ce.length===0)return R.replace(/\$jugador/g,"otro jugador");const Oe=Ce[Math.floor(Math.random()*Ce.length)];return R.replace(/\$jugador/g,Oe)},x=X.useMemo(()=>o.map((R,Ce)=>({item:R,index:Ce})),[o]),C=X.useMemo(()=>c.map((R,Ce)=>({item:R,index:Ce})),[c]),O=R=>{const Ce=R==="pregunta"?x:C,Oe=R==="pregunta"?ie:fe,Q=R==="pregunta"?se:le;if(Ce.length===0){console.error(`No hay ${R}s disponibles`);return}const ae=Ce.filter(ye=>!Oe.has(ye.index));let $;if(ae.length===0){Q(new Set);const ye=Math.floor(Math.random()*Ce.length);$=Ce[ye],Q(new Set([$.index]))}else{const ye=Math.floor(Math.random()*ae.length);$=ae[ye],Q(P=>new Set(P).add($.index))}F($.item),re(R),R==="pregunta"&&_?_():R==="reto"&&w&&w()},k=async()=>{if(!j||!z)return;if(Mt.shouldShowAdForQuestionChange(I.changesCount+1)&&A)try{await A()}catch(Q){console.error("Error showing ad:",Q);return}const Ce=z==="pregunta"?x:C;if(Ce.length<=1){console.log("No hay suficientes items para cambiar");return}const Oe=Ce.filter(Q=>Q.item.text!==j.text);if(Oe.length>0){const Q=Math.floor(Math.random()*Oe.length),ae=Oe[Q];F(ae.item),(z==="pregunta"?se:le)(ye=>new Set(ye).add(ae.index)),b&&b()}},V=()=>{F(null),re(null),e===r.length-1?m.currentRound+1>d.totalRounds?t():g():t()};return p.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center animate-fade-in",children:[p.jsxs(Pn,{className:"w-full max-w-lg min-h-[24rem] flex flex-col justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"mb-2",children:p.jsxs("p",{className:"text-sm text-gray-500",children:["Ronda ",m.currentRound," de ",d.totalRounds]})}),p.jsx("p",{className:"text-lg text-gray-400",children:"Turno de:"}),p.jsx("h2",{className:"text-4xl font-bold my-4 text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400",children:K})]}),j?p.jsxs("div",{className:"animate-fade-in",children:[p.jsx("h3",{className:"text-2xl font-bold mb-6 text-cyan-400 capitalize",children:z}),p.jsx("p",{className:"text-xl md:text-2xl leading-relaxed",children:N(j.text)}),p.jsxs("div",{className:"mt-6 flex flex-col items-center gap-2",children:[p.jsxs(be,{onClick:k,variant:"secondary",className:"text-sm px-4 py-2",disabled:I.isAdLoading||I.isAdPlaying,children:["🔄 Cambiar ",z]}),p.jsxs("p",{className:"text-xs text-gray-500",children:["Cambios restantes antes del anuncio: ",Mt.getQuestionChangeThreshold()-I.changesCount%Mt.getQuestionChangeThreshold()]}),(I.isAdLoading||I.isAdPlaying)&&p.jsx("p",{className:"text-xs text-yellow-400",children:I.isAdLoading?"Cargando anuncio...":"Reproduciendo anuncio..."})]})]}):p.jsxs("div",{className:"animate-fade-in",children:[p.jsx("h3",{className:"text-2xl font-bold mb-6",children:"¿Verdad o Reto?"}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(be,{onClick:()=>O("pregunta"),className:"w-full sm:w-auto",children:"Pregunta"}),p.jsx(be,{onClick:()=>O("reto"),variant:"secondary",className:"w-full sm:w-auto",children:"Reto"})]})]}),p.jsx("div",{className:"mt-8",children:j&&p.jsx(be,{onClick:V,children:"Siguiente Jugador"})})]}),p.jsx("button",{onClick:i,className:"mt-6 text-sm text-gray-500 hover:text-gray-300 transition-colors duration-200 px-4 py-2 rounded-lg hover:bg-gray-800/50 focus:outline-none focus:ring-2 focus:ring-gray-600",children:"Empezar nuevo juego"})]})},_D=({onSelectRounds:r,onBack:e})=>{const t=[{value:5,label:"5 Rondas",description:"Partida rápida (15-20 min)"},{value:10,label:"10 Rondas",description:"Partida estándar (30-40 min)"},{value:15,label:"15 Rondas",description:"Partida larga (45-60 min)"}];return p.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:p.jsxs(Pn,{className:"w-full max-w-2xl text-center",children:[p.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Configurar Partida"}),p.jsx("p",{className:"text-gray-400 mb-8",children:"Elige cuántas rondas quieres jugar"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:t.map(i=>p.jsxs("div",{className:"relative p-6 rounded-lg border border-gray-600 bg-gray-800/50 hover:border-purple-500 transition-all duration-200 cursor-pointer group",onClick:()=>r(i.value),children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:i.value}),p.jsx("div",{className:"text-lg font-semibold text-white mb-2",children:i.label}),p.jsx("div",{className:"text-sm text-gray-400",children:i.description})]}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]},i.value))}),p.jsx("div",{className:"text-sm text-gray-500 mb-6",children:"💡 Al final de cada ronda se mostrará un anuncio breve"}),p.jsx("div",{className:"flex gap-4 justify-center",children:p.jsx(be,{onClick:e,variant:"secondary",className:"px-6",children:"Volver"})})]})})},vb=({dataAdSlot:r,className:e,style:t,fallbackContent:i,timeout:o=5e3,admobConfig:c,hasNoAds:d=!1})=>{const[m,g]=X.useState("loading"),[_,w]=X.useState(!1),[b,A]=X.useState(!1);return X.useEffect(()=>{let I,j=null,F=!0;return(async()=>{if(d){F&&w(!0);return}try{I=setTimeout(()=>{F&&m==="loading"&&(console.warn("Ad loading timeout reached"),g("timeout"),w(!0))},o);const re=hn.isNativePlatform();if(A(re),re&&c)try{await Ri.initialize({...c,bannerAdUnitId:r}),await Ri.showBannerAd(),F&&(g("loaded"),clearTimeout(I));return}catch(ie){console.warn("AdMob failed:",ie),F&&(g("error"),w(!0),clearTimeout(I));return}if(typeof window<"u"&&!re){let ie=0;const se=10,fe=()=>{if(F)if(window.adsbygoogle||ie>=se)try{(window.adsbygoogle=window.adsbygoogle||[]).push({}),setTimeout(()=>{if(F){if(j=document.querySelector(`[data-ad-slot="${r}"]`),j){const le=j.innerHTML;le&&le.trim()!==""?g("loaded"):(g("error"),w(!0))}else g("error"),w(!0);clearTimeout(I)}},2e3)}catch(le){console.error("Error loading AdSense ad:",le),F&&(g("error"),w(!0),clearTimeout(I))}else ie++,setTimeout(fe,200)};fe()}else re&&!c&&(console.warn("Native platform detected but no AdMob config provided"),F&&(g("error"),w(!0),clearTimeout(I)))}catch(re){console.error("Error in ad loading process:",re),F&&(g("error"),w(!0),clearTimeout(I))}})(),()=>{F=!1,I&&clearTimeout(I),b&&m==="loaded"&&Ri.removeBannerAd().catch(console.error)}},[r,o,c,d]),_?p.jsx("div",{className:`ad-fallback ${e||""}`,style:t,children:i||p.jsx("div",{className:"ad-fallback-message"})}):p.jsxs("div",{className:`ad-container ${e||""}`,style:t,children:[m==="loading"&&p.jsx("div",{className:"ad-loading",children:p.jsx("div",{className:"loading-spinner"})}),p.jsx("ins",{className:"adsbygoogle",style:{display:m==="loaded"?"block":"none",textAlign:"center",width:"100%",height:"auto"},"data-ad-client":"ca-pub-XXXXXXXXXXXXXXXX","data-ad-slot":r,"data-ad-format":"auto","data-full-width-responsive":"true"})]})},vD=({roundStats:r,currentRound:e,totalRounds:t,onContinue:i,onEndGame:o,hasNoAds:c=!1})=>{var j;const[d,m]=X.useState(!1),[g,_]=X.useState(!1),[w,b]=X.useState(5);X.useEffect(()=>{let F=!0;const z=async()=>{try{await Ri.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),m(!0);const fe=await Ri.showInterstitial();F&&(_(!0),console.log("Anuncio intersticial mostrado:",fe))}catch(fe){console.warn("Fallo al mostrar anuncio nativo:",fe),F&&(m(!0),_(!0))}},re=!c&&Mt.shouldShowAdInRoundEnd();if(re&&hn.isNativePlatform())return z(),()=>{F=!1};if(!re){m(!0),_(!0);return}const ie=setTimeout(()=>{m(!0)},800);let se;return d&&!g&&(se=setInterval(()=>{b(fe=>fe<=1?(_(!0),se&&clearInterval(se),0):fe-1)},1e3)),()=>{clearTimeout(ie),se&&clearInterval(se)}},[c,d,g]);const A=e>=t,I=hn.isNativePlatform();return p.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:p.jsxs(Pn,{className:"w-full max-w-2xl text-center",children:[p.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-green-500 to-blue-500",children:A?"¡Partida Completada!":`¡Ronda ${r.roundNumber} Completada!`}),!A&&p.jsxs("p",{className:"text-gray-400 mb-6",children:["Ronda ",e," de ",t]}),p.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-6",children:[p.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Estadísticas de la Ronda"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-2xl font-bold text-blue-400",children:r.questionsAsked}),p.jsx("div",{className:"text-sm text-gray-400",children:"Preguntas"})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-2xl font-bold text-purple-400",children:r.daresCompleted}),p.jsx("div",{className:"text-sm text-gray-400",children:"Retos"})]})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Jugadores participantes:"}),p.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:((j=r.playersParticipated)==null?void 0:j.map((F,z)=>p.jsx("span",{className:"px-3 py-1 bg-purple-600 text-white rounded-full text-sm",children:F},z)))||p.jsx("span",{className:"text-gray-400 text-sm",children:"No hay jugadores registrados"})})]})]}),!c&&p.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[p.jsxs("div",{className:"text-center mb-4",children:[p.jsx("div",{className:"text-lg font-semibold mb-2",children:"📺 Anuncio"}),g?p.jsx("div",{className:"text-green-400 mb-4",children:"✅ Anuncio completado"}):p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",I?"":`${w}s`]}),!I&&p.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:p.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-w)/5*100}%`}})})]})]}),!I&&p.jsx(vb,{dataAdSlot:"1234567890",className:"round-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},hasNoAds:c,fallbackContent:p.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),p.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:A?p.jsx(be,{onClick:o,className:"px-8 py-3 text-lg",disabled:!c&&!g,children:"Ver Resultados Finales"}):p.jsxs(p.Fragment,{children:[p.jsx(be,{onClick:o,variant:"secondary",className:"px-6",disabled:!c&&!g,children:"Terminar Partida"}),p.jsx(be,{onClick:i,className:"px-8 py-3 text-lg",disabled:!c&&!g,children:"Siguiente Ronda"})]})}),!g&&p.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Los botones se habilitarán cuando termine el anuncio"})]})})},ED=({gameStats:r,players:e,onNewGame:t,onBackToMenu:i,hasNoAds:o=!1,isDemoMode:c=!1,demoPackId:d=null})=>{const m=r.gameEndTime&&r.gameStartTime?Math.round((r.gameEndTime.getTime()-r.gameStartTime.getTime())/1e3/60):0,g=r.totalRounds>0?Math.round(r.totalQuestions/r.totalRounds):0,_=r.totalRounds>0?Math.round(r.totalDares/r.totalRounds):0,[w,b]=X.useState(!1),[A,I]=X.useState(!1),[j,F]=X.useState(5),z=hn.isNativePlatform();return X.useEffect(()=>{Ei.trackGameEnd("mixed","Juego Mixto",r.totalRounds,m)},[]),X.useEffect(()=>{let re=!0;const ie=async()=>{try{await Ri.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),I(!0);const K=await Ri.showInterstitial();re&&(b(!0),console.log("Anuncio intersticial al final de partida mostrado:",K))}catch(K){console.warn("Error mostrando anuncio al final de partida:",K),re&&(I(!0),b(!0))}},se=!o&&Mt.shouldShowAdInGameEnd();if(se&&z)return ie(),()=>{re=!1};if(!se){b(!0),I(!0);return}const fe=setTimeout(()=>I(!0),800);let le;return A&&!w&&(le=setInterval(()=>{F(K=>K<=1?(b(!0),le&&clearInterval(le),0):K-1)},1e3)),()=>{clearTimeout(fe),le&&clearInterval(le)}},[o,z,A,w]),p.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:p.jsxs(Pn,{className:"w-full max-w-4xl text-center",children:[p.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500",children:"🎉 ¡Partida Finalizada! 🎉"}),p.jsx("p",{className:"text-gray-400 mb-8 text-base sm:text-lg",children:"¡Esperamos que se hayan divertido mucho!"}),!o&&A&&p.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[p.jsxs("div",{className:"text-center mb-4",children:[p.jsx("div",{className:"text-lg font-semibold mb-2",children:"📺 Anuncio"}),w?p.jsx("div",{className:"text-green-400 mb-4",children:"✅ Anuncio completado"}):p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",z?"":`${j}s`]}),!z&&p.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:p.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-j)/5*100}%`}})})]})]}),!z&&p.jsx(vb,{dataAdSlot:"1234567890",className:"game-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},hasNoAds:o,fallbackContent:p.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[p.jsxs("div",{className:"bg-gradient-to-br from-blue-600/20 to-blue-800/20 rounded-lg p-6 border border-blue-500/30",children:[p.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-blue-400 mb-2",children:r.totalRounds}),p.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Rondas Jugadas"}),p.jsxs("div",{className:"text-sm text-gray-400",children:[m," minutos"]})]}),p.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-purple-800/20 rounded-lg p-6 border border-purple-500/30",children:[p.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-purple-400 mb-2",children:r.totalQuestions}),p.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Preguntas"}),p.jsxs("div",{className:"text-sm text-gray-400",children:[g," por ronda"]})]}),p.jsxs("div",{className:"bg-gradient-to-br from-pink-600/20 to-pink-800/20 rounded-lg p-6 border border-pink-500/30",children:[p.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-pink-400 mb-2",children:r.totalDares}),p.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Retos"}),p.jsxs("div",{className:"text-sm text-gray-400",children:[_," por ronda"]})]})]}),p.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[p.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Jugadores Participantes"}),p.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:e.map((re,ie)=>p.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full",children:[p.jsx("span",{className:"text-lg",children:"🎮"}),p.jsx("span",{className:"font-medium",children:re})]},ie))})]}),c?p.jsx("div",{className:"bg-gradient-to-r from-yellow-600/20 to-orange-600/20 rounded-lg p-8 mb-8 border border-yellow-500/30",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-4xl mb-4",children:"🎮✨"}),p.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"¡Demo Completado!"}),p.jsx("p",{className:"text-gray-300 mb-6 text-lg",children:"¿Te gustó este pack? ¡Desbloquea el contenido completo!"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[p.jsxs("div",{className:"bg-yellow-500/10 rounded-lg p-4 border border-yellow-500/30",children:[p.jsx("p",{className:"text-yellow-200 font-medium mb-2",children:"🔓 Pack Completo"}),p.jsx("p",{className:"text-gray-300 text-sm",children:"Más de 50 preguntas y retos únicos"})]}),p.jsxs("div",{className:"bg-yellow-500/10 rounded-lg p-4 border border-yellow-500/30",children:[p.jsx("p",{className:"text-yellow-200 font-medium mb-2",children:"🎯 Sin Límites"}),p.jsx("p",{className:"text-gray-300 text-sm",children:"Juega todas las veces que quieras"})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(be,{onClick:i,className:"px-8 py-3 text-lg bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-bold rounded-lg shadow-lg transform hover:scale-105 transition-all",children:"🛒 ¡Comprar Pack Completo!"}),p.jsx(be,{onClick:t,variant:"secondary",className:"px-8 py-3 text-lg border-2 border-yellow-500 text-yellow-400 hover:bg-yellow-500/10",disabled:!o&&!w,children:"🔄 Jugar Demo Otra Vez"})]})]})}):p.jsx("div",{className:"bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-lg p-8 mb-8 border border-purple-500/30",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-3xl mb-4",children:"🌟"}),p.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"¡Partida Épica Completada!"}),p.jsx("p",{className:"text-gray-300 mb-6 text-lg",children:"¿Listos para más diversión? ¡La fiesta no tiene que terminar aquí!"}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(be,{onClick:t,className:"px-8 py-3 text-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 font-bold shadow-lg transform hover:scale-105 transition-all",disabled:!o&&!w,children:"🎮 ¡Otra Partida!"}),p.jsx(be,{onClick:i,variant:"secondary",className:"px-8 py-3 text-lg border-2 border-purple-500 text-purple-400 hover:bg-purple-500/10",disabled:!o&&!w,children:"🛒 Explorar Más Packs"})]})]})}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[p.jsx(be,{onClick:t,className:"px-8 py-3 text-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 font-bold shadow-lg transform hover:scale-105 transition-all",disabled:!o&&!w,children:"🎮 Nueva Partida"}),p.jsx(be,{onClick:i,variant:"secondary",className:"px-8 py-3 text-lg border-2 border-purple-500 text-purple-400 hover:bg-purple-500/10",disabled:!o&&!w,children:"🏠 Volver al Menú"})]}),p.jsxs("div",{className:"mt-8 text-xs text-gray-500",children:[p.jsx("p",{children:"¿Te gustó el juego? ¡Compártelo con tus amigos!"}),p.jsx("p",{className:"mt-1",children:"Verdad o Reto - La diversión nunca termina"})]})]})})},CE=["PUTO","PUTA","MIERDA","JODER","COÑO","CABRON","CABRONA","PENDEJO","PENDEJA","IDIOTA","ESTUPIDO","ESTUPIDA","TONTO","TONTA","IMBECIL","GILIPOLLAS","HIJO","HIJA","MADRE","PADRE","MAMA","PAPA","SEXO","PORNO","XXX","NAZI","HITLER","MUERTE","MATAR","SUICIDIO","DROGA","DROGAS","MARICON","MARICA","GAY","LESBIANA","TRANS","HOMO","HETERO","NEGRO","BLANCO","CHINO","JUDIO","MUSULMAN","CRISTIANO","GORDO","GORDA","FEO","FEA","FLACOS","FLACA","FUCK","SHIT","BITCH","DAMN","HELL","ASS","ASSHOLE","BASTARD","STUPID","IDIOT","MORON","RETARD","DUMB","LOSER","FREAK","SEX","PORN","XXX","NUDE","NAKED","BOOBS","PENIS","VAGINA","NAZI","HITLER","KILL","DIE","DEATH","SUICIDE","DRUG","DRUGS","FAG","FAGGOT","HOMO","LESBIAN","TRANS","QUEER","BLACK","WHITE","ASIAN","JEWISH","MUSLIM","CHRISTIAN","FAT","UGLY","SKINNY","GROSS","DISGUSTING","WTF","OMFG","STFU","GTFO","LMAO","ROFL","ADMIN","MODERATOR","OWNER","STAFF","SUPPORT","VERDAD","RETO","GAME","JUEGO","APP","OFICIAL","666","420","69","88","1488","NULL","UNDEFINED","ERROR","ADMIN","ROOT","SYSTEM","DELETE","DROP","TRUNCATE","ALTER","CREATE"],wD=[/^\d+$/,/^[A-Z]\1{5}$/,/^(.)\1{2,}/,/^[0O1IL]{6}$/,/^(ABC|123|XYZ|QWE|ASD|ZXC)/],mg=r=>{if(!r||typeof r!="string")return!1;const e=r.toUpperCase().trim();if(e.length!==6||CE.includes(e))return!1;for(const d of CE)if(e.includes(d))return!1;for(const d of wD)if(d.test(e))return!1;const t="AEIOU",i="BCDFGHJKLMNPQRSTVWXYZ",o=e.split("").every(d=>t.includes(d)),c=e.split("").every(d=>i.includes(d));return!(o||c)},NE=(r=[])=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t=0;const i=1e3;for(;t<i;){let m="";for(let g=0;g<6;g++)m+=e.charAt(Math.floor(Math.random()*e.length));if(mg(m)&&!r.includes(m))return m;t++}const o=Date.now().toString(36).toUpperCase(),c=Math.random().toString(36).substring(2,4).toUpperCase(),d=(o+c).substring(0,6).padEnd(6,"0");return mg(d)?d:"REF001"},Eb=r=>{if(!r||typeof r!="string")return{isValid:!1,error:"El código de referido es requerido"};const e=r.toUpperCase().trim().replace(/[^A-Z0-9]/g,"");return e.length!==6?{isValid:!1,error:"El código de referido debe tener exactamente 6 caracteres"}:mg(e)?{isValid:!0,sanitizedCode:e}:{isValid:!1,error:"El código de referido contiene contenido inapropiado o no válido"}},TD=async()=>{try{const r=tt(Ne,"users"),e=await pt(r),t=[];return e.forEach(i=>{const o=i.data();o.referralCode&&t.push(o.referralCode)}),t}catch(r){return console.error("Error getting existing referral codes:",r),[]}},bD=async r=>{try{const e=tt(Ne,"users"),t=St(e,$e("referralCode","==",r));return!(await pt(t)).empty}catch(e){return console.error("Error checking referral code existence:",e),!1}},SD=async()=>{try{const r=await TD();return NE(r)}catch(r){return console.error("Error generating unique referral code:",r),NE([])}},wp=async(r,e)=>{try{const t=Wt(Ne,"users",r.uid);if(!(await Yr(t)).exists()){const o=await SD();let c={};if(e){const g=Eb(e);g.isValid&&g.sanitizedCode?await bD(g.sanitizedCode)?c={usedReferralCode:g.sanitizedCode,referralProcessedAt:new Date}:console.warn("Referral code does not exist:",g.sanitizedCode):console.warn("Invalid referral code provided:",e,g.error)}const d={uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,isAnonymous:r.isAnonymous,emailVerified:r.emailVerified,referralCode:o,referralCount:0,createdAt:new Date,lastLoginAt:new Date,migrationVersion:"1.0",usedReferralCode:null,referredBy:null,referralProcessedAt:null,lastKnownIP:null,deviceId:null,acceptedSuggestions:0,...c};await Rc(t,d);const m=Wt(Ne,"userReferralCodes",r.uid);await Rc(m,{referralCode:o,displayName:r.displayName||r.email||"Usuario",createdAt:new Date})}}catch(t){console.error("Error creating user profile:",t)}},$o=r=>({uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,isAnonymous:r.isAnonymous,emailVerified:r.emailVerified}),wb=async r=>{try{const e=await o2(vr,pb);return await wp(e.user,r),$o(e.user)}catch(e){throw console.error("Error al iniciar sesión con Google:",e),new Error(e.message||"Error al iniciar sesión con Google")}},Tb=async(r,e)=>{try{const t=await MN(vr,r,e);return $o(t.user)}catch(t){throw console.error("Error al iniciar sesión:",t),new Error(bp(t.code))}},bb=async(r,e,t,i)=>{try{const o=await kN(vr,r,e);return t&&await jN(o.user,{displayName:t}),await wp(o.user,i),await rb(o.user),$o(o.user)}catch(o){throw console.error("Error al registrarse:",o),new Error(bp(o.code))}},Sb=async()=>{try{const r=await CN(vr);return await wp(r.user),$o(r.user)}catch(r){throw console.error("Error al iniciar sesión anónima:",r),new Error("Error al iniciar sesión anónima")}},Ab=async()=>{try{await qN(vr)}catch(r){throw console.error("Error al cerrar sesión:",r),new Error("Error al cerrar sesión")}},xb=async r=>{try{await ON(vr,r)}catch(e){throw console.error("Error al enviar email de restablecimiento:",e),new Error(bp(e.code))}},Rb=async()=>{try{if(vr.currentUser)await rb(vr.currentUser);else throw new Error("No hay usuario autenticado")}catch(r){throw console.error("Error al reenviar verificación:",r),new Error("Error al reenviar verificación de email")}},Ib=r=>zN(vr,e=>{r(e?$o(e):null)}),Tp=()=>vr.currentUser?$o(vr.currentUser):null,gg=()=>{const r=Tp();return r!==null&&!r.isAnonymous&&r.emailVerified},bp=r=>{switch(r){case"auth/user-not-found":return"No existe una cuenta con este email";case"auth/wrong-password":return"Contraseña incorrecta";case"auth/email-already-in-use":return"Ya existe una cuenta con este email";case"auth/weak-password":return"La contraseña debe tener al menos 6 caracteres";case"auth/invalid-email":return"Email inválido";case"auth/too-many-requests":return"Demasiados intentos fallidos. Intenta más tarde";case"auth/network-request-failed":return"Error de conexión. Verifica tu internet";default:return"Error de autenticación. Intenta nuevamente"}},AD=Object.freeze(Object.defineProperty({__proto__:null,canPurchase:gg,getCurrentUser:Tp,logout:Ab,onAuthStateChange:Ib,registerWithEmail:bb,resendEmailVerification:Rb,resetPassword:xb,signInAnonymous:Sb,signInWithEmail:Tb,signInWithGoogle:wb},Symbol.toStringTag,{value:"Module"})),xD=()=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let t=0;t<6;t++)e+=r.charAt(Math.floor(Math.random()*r.length));return e},RD=async r=>{try{const e=tt(Ne,"users"),t=St(e,$e("referralCode","==",r));return(await pt(t)).empty}catch(e){return console.error("Error verificando unicidad del código:",e),!1}},ID=async()=>{let r=0;const e=10;for(;r<e;){const t=xD();if(await RD(t))return t;r++}throw new Error("No se pudo generar un código único después de "+e+" intentos")},Cb=async r=>{try{if(!(r!=null&&r.uid)){console.warn("Usuario no válido para migración");return}const e=Wt(Ne,"users",r.uid),t=await Yr(e);if(!t.exists()){console.warn("Documento de usuario no encontrado:",r.uid);return}const i=t.data(),o={};let c=!1;if(!i.referralCode)try{const d=await ID();o.referralCode=d,c=!0,console.log("✅ Generando código de referido para usuario:",r.uid,"-",d)}catch(d){console.error("Error generando código de referido:",d),o.referralCode=`TEMP${Date.now().toString().slice(-6)}`,c=!0}if((i.referralCount===void 0||i.referralCount===null)&&(o.referralCount=0,c=!0),i.createdAt||(o.createdAt=new Date,c=!0),o.lastLoginAt=new Date,c=!0,i.usedReferralCode===void 0&&(o.usedReferralCode=null,c=!0),i.referredBy===void 0&&(o.referredBy=null,c=!0),i.referralProcessedAt===void 0&&(o.referralProcessedAt=null,c=!0),i.lastKnownIP===void 0&&(o.lastKnownIP=null,c=!0),i.deviceId===void 0&&(o.deviceId=null,c=!0),i.acceptedSuggestions===void 0&&(o.acceptedSuggestions=0,c=!0),i.deviceId===void 0&&(o.deviceId=null,c=!0),i.autoMigratedAt||(o.autoMigratedAt=new Date,o.migrationVersion=i.migrationVersion||"1.0",c=!0),c){if(await lp(e,o),o.referralCode)try{const d=Wt(Ne,"userReferralCodes",r.uid);await Rc(d,{referralCode:o.referralCode,displayName:i.displayName||i.email||"Usuario",createdAt:i.createdAt||o.createdAt||new Date}),console.log("✅ Documento de código de referido creado para:",r.uid)}catch(d){console.error("Error creando documento de código de referido:",d)}console.log("✅ Usuario migrado automáticamente:",r.uid)}}catch(e){console.error("Error en migración automática de usuario:",e)}},Nb=X.createContext(void 0),CD=({children:r})=>{const[e,t]=X.useState({user:null,isLoading:!0,isAuthenticated:!1});X.useEffect(()=>{const m=Ib(async g=>{if(g&&!g.isAnonymous&&g.uid)try{await Cb(g)}catch(_){console.error("Error durante la migración automática del usuario:",_)}t({user:g,isLoading:!1,isAuthenticated:g!==null&&!g.isAnonymous})});return()=>m()},[]);const d={...e,login:()=>{},logout:async()=>{try{const{logout:m}=await yb(async()=>{const{logout:g}=await Promise.resolve().then(()=>AD);return{logout:g}},void 0,import.meta.url);await m()}catch(m){console.error("Error al cerrar sesión:",m)}},refreshUser:()=>{const m=Tp();t(g=>({...g,user:m,isAuthenticated:m!==null&&!m.isAnonymous}))}};return p.jsx(Nb.Provider,{value:d,children:r})},ji=()=>{const r=X.useContext(Nb);if(r===void 0)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return r},ki={PURCHASED_PACKS:"verdad_reto_purchased_packs",CACHED_GAME_ITEMS:"verdad_reto_cached_items",CACHED_CATEGORIES:"verdad_reto_cached_categories",CACHE_PERMISSION:"verdad_reto_cache_permission",LAST_SYNC:"verdad_reto_last_sync"},ND=()=>{const r=localStorage.getItem(ki.CACHE_PERMISSION);if(r==="granted")return!0;if(r==="denied")return!1;const e=window.confirm(`¿Deseas permitir que la aplicación guarde los packs comprados localmente para poder jugar sin conexión?

Esto mejorará tu experiencia permitiéndote acceder a tus packs incluso sin internet.`);return localStorage.setItem(ki.CACHE_PERMISSION,e?"granted":"denied"),e},Cc=()=>localStorage.getItem(ki.CACHE_PERMISSION)==="granted",DD=async(r,e,t)=>{if(!Cc()){console.log("Cache permission not granted, skipping cache");return}try{const i={pack:r,gameData:{items:e,categories:t,timestamp:Date.now()},timestamp:Date.now()},o=Sp();o[r.id]=i,localStorage.setItem(ki.PURCHASED_PACKS,JSON.stringify(o)),localStorage.setItem(ki.LAST_SYNC,Date.now().toString()),console.log(`Pack ${r.name} cached successfully`)}catch(i){console.error("Error caching pack:",i)}},Sp=()=>{try{const r=localStorage.getItem(ki.PURCHASED_PACKS);return r?JSON.parse(r):{}}catch(r){return console.error("Error reading cached packs:",r),{}}},PD=r=>{if(!Cc())return null;try{const e=Sp(),t=[],i=[];for(const o of r){const c=e[o];c&&(t.push(...c.gameData.items),i.push(...c.gameData.categories))}return t.length===0?null:{items:t,categories:[...new Set(i)]}}catch(e){return console.error("Error reading cached game data:",e),null}},OD=()=>{Object.values(ki).forEach(r=>{localStorage.removeItem(r)}),console.log("Cache cleared successfully")},Db=()=>{const r=Sp(),e=localStorage.getItem(ki.LAST_SYNC);return{hasPermission:Cc(),packsCount:Object.keys(r).length,lastSync:e?new Date(parseInt(e)):null,packs:Object.keys(r)}};var Pb="basil",kD=function(e){return e===3?"v3":e},Ob="https://js.stripe.com",MD="".concat(Ob,"/").concat(Pb,"/stripe.js"),VD=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,jD=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var LD=function(e){return VD.test(e)||jD.test(e)},UD=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Ob,'"]')),t=0;t<e.length;t++){var i=e[t];if(LD(i.src))return i}return null},DE=function(e){var t="",i=document.createElement("script");i.src="".concat(MD).concat(t);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(i),i},zD=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})},tc=null,Ed=null,wd=null,qD=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},BD=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},HD=function(e){return tc!==null?tc:(tc=new Promise(function(t,i){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var o=UD();if(!(o&&e)){if(!o)o=DE(e);else if(o&&wd!==null&&Ed!==null){var c;o.removeEventListener("load",wd),o.removeEventListener("error",Ed),(c=o.parentNode)===null||c===void 0||c.removeChild(o),o=DE(e)}}wd=BD(t,i),Ed=qD(i),o.addEventListener("load",wd),o.addEventListener("error",Ed)}catch(d){i(d);return}}),tc.catch(function(t){return tc=null,Promise.reject(t)}))},FD=function(e,t,i){if(e===null)return null;var o=t[0],c=o.match(/^pk_test/),d=kD(e.version),m=Pb;c&&d!==m&&console.warn("Stripe.js@".concat(d," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(m,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var g=e.apply(void 0,t);return zD(g,i),g},nc,kb=!1,Mb=function(){return nc||(nc=HD(null).catch(function(e){return nc=null,Promise.reject(e)}),nc)};Promise.resolve().then(function(){return Mb()}).catch(function(r){kb||console.warn(r)});var GD=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];kb=!0;var o=Date.now();return Mb().then(function(c){return FD(c,t,o)})};const QD="pk_live_51S2dpMEamlsERKowyMSm4kgm11dMknJLyZGy9gZsIBBd3BQo3l9Vnn0TYKWcmuDtnq23YEsHo7FL69hGEM3UAboz00Onx53LCm";let qm=null;const KD=()=>(qm||(qm=GD(QD)),qm),Vb=async()=>{try{const r=await Yr(Wt(Ne,"config","stripe"));return r.exists()?r.data():null}catch(r){return console.error("Error obteniendo configuración de Stripe:",r),null}},YD=async(r,e,t)=>{try{if(!r.isPremium)throw new Error("Este pack no requiere pago");const i=await Vb();if(!i)throw new Error("Configuración de Stripe no disponible");const o=r.priceAmount||0,c=r.originalPriceAmount||r.priceAmount||0;console.log("Creando sesión de checkout:",{packId:r.id,originalAmount:c,finalAmount:o,hasDiscount:r.hasDiscount,discountReason:r.discountReason});const d=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packId:r.id,priceId:r.stripePriceId,userEmail:e,userId:t,successUrl:`${window.location.origin}${i.successUrl}&pack=${r.id}`,cancelUrl:`${window.location.origin}${i.cancelUrl}`,hasDiscount:r.hasDiscount,finalAmount:o,originalAmount:c,discountReason:r.discountReason})});if(!d.ok){const g=await d.json();throw new Error(g.error||"Error creando sesión de pago")}const m=await d.json();return{sessionId:m.id,url:m.url}}catch(i){throw console.error("Error creando sesión de checkout:",i),i}},XD=async(r,e,t)=>{try{const i=await KD();if(!i)throw new Error("Stripe no está disponible");const o=await YD(r,e,t);if(!o)throw new Error("No se pudo crear la sesión de pago");await $D({userId:t,packId:r.id,stripeSessionId:o.sessionId,purchaseDate:new Date,amount:r.priceAmount||0,currency:r.currency||"EUR",status:"pending",email:e});const{error:c}=await i.redirectToCheckout({sessionId:o.sessionId});if(c)throw new Error(c.message)}catch(i){throw console.error("Error redirigiendo a checkout:",i),i}},$D=async r=>{try{return(await Hc(tt(Ne,"userPurchases"),{...r,purchaseDate:r.purchaseDate.toISOString()})).id}catch(e){throw console.error("Error guardando compra pendiente:",e),e}},WD=async r=>{try{const e=St(tt(Ne,"userPurchases"),$e("userId","==",r),$e("status","==","completed"));return(await pt(e)).docs.map(i=>({id:i.id,...i.data(),purchaseDate:new Date(i.data().purchaseDate)}))}catch(e){return console.error("Error obteniendo compras del usuario:",e),[]}},PE=async r=>{try{return(await WD(r)).map(t=>t.packId)}catch(e){return console.error("Error obteniendo packs comprados:",e),[]}},JD=({onClose:r})=>{const[e,t]=X.useState(null),[i,o]=X.useState(!1);X.useEffect(()=>{c()},[]);const c=()=>{const g=Db();t(g)},d=async()=>{o(!0);try{ND()&&c()}finally{o(!1)}},m=()=>{window.confirm("¿Estás seguro de que quieres eliminar todos los datos guardados localmente?")&&(OD(),c())};return e?p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h2",{className:"text-xl font-bold",children:"Almacenamiento Local"}),p.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Estado del Caché"}),p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Permiso:"}),p.jsx("span",{className:`font-medium ${e.hasPermission?"text-green-600":"text-red-600"}`,children:e.hasPermission?"Activado":"Desactivado"})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Packs guardados:"}),p.jsx("span",{className:"font-medium",children:e.packsCount})]}),e.lastSync&&p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Última sincronización:"}),p.jsxs("span",{className:"font-medium text-xs",children:[e.lastSync.toLocaleDateString()," ",e.lastSync.toLocaleTimeString()]})]})]})]}),e.packsCount>0&&p.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Packs Disponibles Sin Conexión"}),p.jsx("div",{className:"space-y-1 text-sm",children:e.packs.map(g=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),p.jsx("span",{className:"capitalize",children:g.replace("-"," ")})]},g))})]}),p.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"¿Qué es el almacenamiento local?"}),p.jsx("p",{className:"text-sm text-gray-700",children:"Permite guardar los packs que compres en tu dispositivo para poder jugar sin conexión a internet. Los datos se mantienen seguros en tu navegador."})]}),p.jsxs("div",{className:"flex flex-col space-y-2",children:[e.hasPermission?p.jsx("div",{className:"text-center text-green-600 font-medium",children:"✓ Almacenamiento local activado"}):p.jsx(be,{onClick:d,disabled:i,className:"w-full bg-green-600 hover:bg-green-700",children:i?"Procesando...":"Activar Almacenamiento Local"}),e.packsCount>0&&p.jsx(be,{onClick:m,className:"w-full bg-red-600 hover:bg-red-700",children:"Limpiar Datos Guardados"}),p.jsx(be,{onClick:r,className:"w-full bg-gray-600 hover:bg-gray-700",children:"Cerrar"})]})]})]})}):p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:p.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:p.jsx("div",{className:"text-center",children:"Cargando información del caché..."})})})},ZD=({pack:r,onBack:e,onSuccess:t})=>{const{user:i}=ji(),[o,c]=X.useState(!1),[d,m]=X.useState(null),[g,_]=X.useState(null);X.useEffect(()=>{(async()=>{try{const I=await Vb();_(I)}catch{m("Error cargando configuración de pago")}})()},[]);const w=async()=>{if(!i||!i.email){m("Debes estar autenticado para realizar una compra");return}if(!r.isPremium){m("Este pack no requiere pago");return}c(!0),m(null);try{await XD(r,i.email,i.uid),t&&t()}catch(A){m(A.message||"Error procesando el pago"),c(!1)}},b=(A,I)=>new Intl.NumberFormat("es-ES",{style:"currency",currency:I.toUpperCase()}).format(A/100);return g?p.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"w-full max-w-md",children:[p.jsxs("div",{className:"relative text-center mb-8",children:[p.jsx("button",{onClick:e,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:p.jsx(LE,{className:"w-8 h-8"})}),p.jsx("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Checkout"})]}),p.jsxs(Pn,{className:"p-6",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("div",{className:"text-6xl mb-4",children:r.icon}),p.jsx("h2",{className:"text-2xl font-bold text-cyan-400 mb-2",children:r.name}),p.jsx("p",{className:"text-gray-400 mb-4",children:r.description}),r.priceAmount&&r.currency&&p.jsxs("div",{className:"bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-lg p-4 mb-4",children:[p.jsx("div",{className:"text-3xl font-bold text-white",children:b(r.priceAmount,r.currency)}),p.jsx("div",{className:"text-sm text-gray-300",children:"Pago único"})]})]}),p.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 mb-6",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(Io,{className:"w-5 h-5 text-green-400"}),p.jsx("span",{className:"text-green-400 font-semibold",children:"Pago seguro"})]}),p.jsx("p",{className:"text-sm text-gray-300",children:"Tu pago está protegido por Stripe. No almacenamos información de tarjetas de crédito."})]}),i&&p.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:[p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsx("strong",{children:"Cuenta:"})," ",i.displayName||i.email]}),p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsx("strong",{children:"Email:"})," ",i.email]})]}),d&&p.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6",children:p.jsx("p",{className:"text-red-200 text-sm",children:d})}),p.jsx(be,{onClick:w,disabled:o||!i,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:o?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Procesando..."]}):p.jsxs(p.Fragment,{children:[p.jsx(UE,{className:"w-5 h-5"}),"Pagar con Stripe"]})}),p.jsx("div",{className:"mt-4 text-center",children:p.jsx("p",{className:"text-xs text-gray-400",children:"Al continuar, aceptas nuestros términos de servicio y política de privacidad."})})]}),p.jsxs("div",{className:"mt-6 text-center",children:[p.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Métodos de pago aceptados:"}),p.jsxs("div",{className:"flex justify-center gap-2",children:[p.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Visa"}),p.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Mastercard"}),p.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"American Express"})]})]})]})}):p.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-400",children:"Cargando configuración de pago..."})]})})},e4=({availablePacks:r,purchasedPacks:e,onPurchase:t,onBack:i,onGoToLogin:o})=>{const{user:c,isAuthenticated:d}=ji(),[m,g]=X.useState(!1),[_,w]=X.useState(!1),[b,A]=X.useState(!1),[I,j]=X.useState(null),[F,z]=X.useState([]),[re,ie]=X.useState(!1);X.useEffect(()=>{(async()=>{if(c&&d){ie(!0);try{const N=await PE(c.uid);z(N)}catch(N){console.error("Error cargando compras del usuario:",N)}finally{ie(!1)}}else z([])})()},[c,d]);const se=K=>{const N=r.find(x=>x.id===K);if(N){if(!N.isPremium||N.id==="base"){if(!gg()){g(!0),setTimeout(()=>g(!1),3e3);return}t(K);return}if(!gg()){g(!0),setTimeout(()=>g(!1),3e3);return}j(N),A(!0)}},fe=async()=>{if(A(!1),j(null),c&&d)try{const K=await PE(c.uid);z(K),I&&K.includes(I.id)&&t(I.id)}catch(K){console.error("Error actualizando compras:",K)}},le=()=>{A(!1),j(null)};return Db(),p.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in pt-16",children:p.jsxs("div",{className:"w-full max-w-2xl",children:[p.jsxs("div",{className:"relative text-center mb-8",children:[p.jsx("button",{onClick:i,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:p.jsx(LE,{className:"w-8 h-8"})}),p.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Tienda de Paquetes"}),p.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(DA,{className:"w-4 h-4"}),c?p.jsx("span",{className:`${d?"text-green-400":"text-yellow-400"}`,children:d?`Conectado como ${c.displayName||c.email}`:"Usuario anónimo - Inicia sesión para comprar"}):p.jsx("span",{className:"text-gray-400",children:"No conectado"})]}),c&&d&&p.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:p.jsx("a",{href:"https://verdad-reto.es.eu.org/delete-account.html",target:"_blank",rel:"noopener noreferrer",className:"hover:text-red-400 transition-colors",children:"Eliminar cuenta"})})]})]}),m&&p.jsxs("div",{className:"mb-6 p-4 bg-yellow-500/20 border border-yellow-500 rounded-lg text-center",children:[p.jsx("p",{className:"text-yellow-100 mb-2",children:"Necesitas iniciar sesión y verificar tu email para comprar packs premium"}),o&&p.jsx(be,{onClick:o,className:"bg-yellow-600 hover:bg-yellow-700",children:"Ir a Iniciar Sesión"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(K=>{const N=e.includes(K.id),x=F.includes(K.id),C=N||x,O=K.id==="base",k=K.isPremium&&!O,V=k&&!C;return p.jsxs(Pn,{className:`flex flex-col text-center border-2 transition-all ${C?"border-green-500/50":V?"border-yellow-500/50 opacity-75":"border-transparent hover:border-pink-500/50"}`,children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"text-5xl mb-4",children:K.icon}),V&&p.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-500 rounded-full p-1",children:p.jsx(Io,{className:"w-4 h-4 text-black"})})]}),p.jsx("h2",{className:`text-2xl font-bold ${C?"text-green-400":V?"text-yellow-400":"text-cyan-400"}`,children:K.name}),p.jsx("p",{className:"text-gray-400 mt-2 mb-2 flex-grow",children:K.description}),k&&K.priceAmount&&K.currency&&p.jsxs("div",{className:"mb-4",children:[K.hasDiscount&&K.originalPriceAmount?p.jsxs("div",{className:"space-y-1",children:[p.jsx("div",{className:"text-sm text-gray-500 line-through",children:new Intl.NumberFormat("es-ES",{style:"currency",currency:K.currency.toUpperCase()}).format(K.originalPriceAmount/100)}),p.jsx("div",{className:`text-lg font-bold ${C?"text-green-400":"text-red-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:K.currency.toUpperCase()}).format(K.priceAmount/100)}),p.jsx("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:K.discountPercentage?`-${K.discountPercentage}%`:`-${new Intl.NumberFormat("es-ES",{style:"currency",currency:K.currency.toUpperCase()}).format((K.originalPriceAmount-K.priceAmount)/100)}`}),K.discountReason&&p.jsx("div",{className:"text-xs text-yellow-400 italic",children:K.discountReason})]}):p.jsx("div",{className:`text-lg font-bold ${C?"text-green-400":"text-yellow-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:K.currency.toUpperCase()}).format(K.priceAmount/100)}),p.jsx("div",{className:"text-xs text-gray-500",children:"Pago único"})]}),C?p.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-green-700 text-green-200",children:"✓ Comprado"}):O?p.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-blue-700 text-blue-200",children:"Incluido"}):k?p.jsx(be,{onClick:()=>se(K.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",disabled:re,children:re?p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):p.jsxs(p.Fragment,{children:[p.jsx(UE,{className:"w-4 h-4"}),"Comprar ",K.price]})}):p.jsxs(be,{onClick:()=>se(K.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2",children:[p.jsx(Io,{className:"w-4 h-4"}),"Desbloquear (",K.price,")"]})]},K.id)})}),_&&p.jsx(JD,{onClose:()=>w(!1)}),b&&I&&p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:p.jsx("div",{className:"w-full h-full",children:p.jsx(ZD,{pack:I,onBack:le,onSuccess:fe})})})]})})},t4=r=>{var t;if(!r.hasDiscount||!r.priceAmount)return r;if(r.discountValidUntil&&new Date>r.discountValidUntil)return{...r,hasDiscount:!1};let e=r.priceAmount;return r.discountPercentage?e=r.priceAmount*(1-r.discountPercentage/100):r.discountAmount&&(e=r.priceAmount-r.discountAmount),e=Math.max(0,Math.round(e)),{...r,originalPriceAmount:r.priceAmount,priceAmount:e,price:new Intl.NumberFormat("es-ES",{style:"currency",currency:((t=r.currency)==null?void 0:t.toUpperCase())||"EUR"}).format(e/100)}},Sh=async()=>{try{const r=tt(Ne,"packs"),e=await pt(r);return e.empty?(console.warn("No packs found in Firebase database"),[]):e.docs.map(o=>{const c=o.data();return{id:o.id,name:c.name,description:c.description,price:c.price,icon:c.icon,isActive:c.isActive??!0,priceAmount:c.priceAmount,currency:c.currency,isPremium:c.isPremium??!1,stripeProductId:c.stripeProductId,stripePriceId:c.stripePriceId,hasDiscount:c.hasDiscount??!1,discountPercentage:c.discountPercentage,discountAmount:c.discountAmount,discountReason:c.discountReason,discountValidUntil:c.discountValidUntil?c.discountValidUntil.toDate():void 0,originalPriceAmount:c.originalPriceAmount,allowDemo:c.allowDemo??!1,demoPlaysCount:c.demoPlaysCount??0}}).filter(o=>o.isActive).map(o=>t4(o))}catch(r){throw console.error("Error connecting to Firebase:",r),new Error("No se pudo conectar a la base de datos. Verifica tu conexión a internet.")}},n4=async r=>{try{if(!r||r.length===0)return console.warn("No categories provided for questions query"),[];const e=tt(Ne,"gameItems"),t=St(e,$e("type","==","question"),$e("category","in",r)),i=await pt(t);return i.empty?(console.warn("No questions found in Firebase database for categories:",r),[]):i.docs.map(c=>{const d=c.data();return{text:d.text,category:d.category}})}catch(e){throw console.error("Error fetching questions from Firebase:",e),new Error("No se pudieron cargar las preguntas. Verifica tu conexión a internet.")}},r4=async r=>{try{if(!r||r.length===0)return console.warn("No categories provided for dares query"),[];const e=tt(Ne,"gameItems"),t=St(e,$e("type","==","dare"),$e("category","in",r)),i=await pt(t);return i.empty?(console.warn("No dares found in Firebase database for categories:",r),[]):i.docs.map(c=>{const d=c.data();return{text:d.text,category:d.category}})}catch(e){throw console.error("Error fetching dares from Firebase:",e),new Error("No se pudieron cargar los retos. Verifica tu conexión a internet.")}},s4=async r=>{try{if(!r||r.length===0)return console.warn("No pack IDs provided for categories query"),[];const e=tt(Ne,"gameItems"),t=St(e,$e("packId","in",r)),i=await pt(t);return i.empty?(console.warn("No categories found in Firebase database for packs:",r),[]):[...new Set(i.docs.map(c=>c.data().category))]}catch(e){throw console.error("Error fetching categories from Firebase:",e),new Error("No se pudieron cargar las categorías. Verifica tu conexión a internet.")}},i4=async r=>{try{if(!r||r.length===0)return console.warn("No pack IDs provided for game data query"),{questions:[],dares:[],categories:[]};const e=await s4(r),[t,i]=await Promise.all([n4(e),r4(e)]);if(Cc()&&(t.length>0||i.length>0)){const o=[...t,...i],c=r.reduce((d,m)=>{const g=o.filter(w=>w.packId===m),_=e.filter(w=>g.some(b=>b.category===w));return g.length>0&&(d[m]={items:g,categories:_}),d},{});for(const[d,m]of Object.entries(c)){const _=(await Sh()).find(w=>w.id===d);_&&await DD(_,m.items,m.categories)}}return{questions:t,dares:i,categories:e}}catch(e){console.error("Error fetching game data from Firebase:",e);const t=PD(r);if(t){console.log("Using cached game data for offline play");const i=t.items.filter(c=>!("type"in c)||c.type==="question"),o=t.items.filter(c=>"type"in c&&c.type==="dare");return{questions:i,dares:o,categories:t.categories}}throw Cc()?new Error("No hay conexión a internet y no tienes datos guardados para estos packs."):new Error("No hay conexión a internet y no tienes packs guardados localmente. ¿Deseas activar el almacenamiento local para jugar sin conexión?")}},a4=async r=>{try{const e=tt(Ne,"gameItems"),t=St(e,$e("packId","==",r),$e("isDemo","==",!0)),o=(await pt(t)).docs.map(g=>({id:g.id,...g.data()})),c=o.filter(g=>g.type==="question").map(g=>({text:g.text,category:g.category,isDemo:!0,packId:g.packId})),d=o.filter(g=>g.type==="dare").map(g=>({text:g.text,category:g.category,isDemo:!0,packId:g.packId})),m=[...new Set(o.map(g=>g.category))];return{questions:c,dares:d,categories:m}}catch(e){return console.error("Error fetching demo data:",e),{questions:[],dares:[],categories:[]}}},o4=async(r,e)=>{try{const t={packId:r,userId:e||"anonymous",timestamp:new Date,type:"demo_play"};await Hc(tt(Ne,"demoLogs"),t);const i=tt(Ne,"packs"),o=Wt(i,r),c=await Yr(o);if(c.exists()){const d=c.data().demoPlaysCount||0;await lp(o,{demoPlaysCount:d+1})}console.log("Demo play logged successfully")}catch(t){console.error("Error logging demo play:",t)}},jb=async(r,e)=>{try{if(!r||r.trim().length===0)return{isValid:!1,error:"El código de referido no puede estar vacío"};const t=Eb(r);if(!t.isValid)return{isValid:!1,error:t.error||"El código de referido no es válido"};const i=t.sanitizedCode,o=tt(Ne,"userReferralCodes"),c=St(o,$e("referralCode","==",i)),d=await pt(c);if(d.empty)return{isValid:!1,error:"Código de referido no válido"};const m=d.docs[0],g=m.data(),_=m.id;if(_===e)return{isValid:!1,error:"No puedes usar tu propio código de referido"};const w=await Yr(Wt(Ne,"users",e));if(w.exists()&&w.data().usedReferralCode)return{isValid:!1,error:"Ya has usado un código de referido anteriormente"};const b=new Date,A=new Date(b.getTime()-3600*1e3),I=tt(Ne,"referrals"),j=St(I,$e("referrerUid","==",_),$e("createdAt",">=",A));if((await pt(j)).size>=5)return{isValid:!1,message:"Límite de referidos por hora excedido. Intenta más tarde."};const z=new Date(b.getTime()-1440*60*1e3),re=St(I,$e("referrerUid","==",_),$e("createdAt",">=",z));return(await pt(re)).size>=20?{isValid:!1,message:"Límite diario de referidos excedido. Intenta mañana."}:{isValid:!0,referrerName:g.displayName||g.email||"Usuario"}}catch(t){return console.error("Error validating referral code:",t),{isValid:!1,error:"Error al validar el código de referido"}}},l4=async(r,e)=>{try{return await PC(Ne,async t=>{var fe;const i=tt(Ne,"userReferralCodes"),o=St(i,$e("referralCode","==",r.toUpperCase())),c=await pt(o);if(c.empty)throw new Error("Código de referido no válido");const d=c.docs[0],m=Wt(Ne,"users",d.id),g=Wt(Ne,"users",e),_=await t.get(g);if(_.exists()&&_.data().usedReferralCode)throw new Error("Ya has usado un código de referido");if(d.id===e)throw new Error("No puedes usar tu propio código");const w=new Date,b=_.data(),A=((fe=b==null?void 0:b.createdAt)==null?void 0:fe.toDate())||new Date,I=new Date(w.getTime()-300*1e3);if(A>I)throw new Error("Usuario muy reciente, posible abuso");const j=b==null?void 0:b.lastKnownIP,F=d.data(),z=F==null?void 0:F.lastKnownIP;j&&z&&j===z&&console.warn("Posible abuso: misma IP para referrer y referido");const re=b==null?void 0:b.deviceId,ie=F==null?void 0:F.deviceId;if(re&&ie&&re===ie)throw new Error("No se puede usar el mismo dispositivo para referir");t.update(m,{referralCount:PT(1)}),t.update(g,{usedReferralCode:r.toUpperCase(),referredBy:d.id,referralProcessedAt:w});const se=Wt(tt(Ne,"referrals"));return t.set(se,{referrerId:d.id,referredUserId:e,referralCode:r.toUpperCase(),createdAt:w,status:"completed",referrerIP:z||null,referredUserIP:j||null,sameIP:j&&z?j===z:!1,userAccountAge:w.getTime()-A.getTime()}),!0})}catch(t){return console.error("Error processing referral:",t),!1}},c4=async r=>{try{const e=await Yr(Wt(Ne,"users",r));if(!e.exists())return null;const t=e.data(),i=tt(Ne,"referrals"),o=St(i,$e("referrerId","==",r)),c=await pt(o),d=[];return c.forEach(m=>{var _;const g=m.data();d.push({id:g.referredUserId,name:`Usuario ${g.referredUserId.substring(0,8)}...`,joinedAt:((_=g.createdAt)==null?void 0:_.toDate())||new Date})}),{referralCode:t.referralCode||"",referralCount:t.referralCount||0,usedReferralCode:t.usedReferralCode||null,referredBy:t.referredBy||null,referredUsers:d}}catch(e){return console.error("Error getting user referral data:",e),null}},u4=async r=>{try{const e=await Yr(Wt(Ne,"users",r));if(!e.exists())return[];const i=e.data().referralCount||0,o=tt(Ne,"packs"),c=St(o,$e("isReferralUnlockable","==",!0)),d=await pt(c),m=[];return d.forEach(g=>{const w=g.data().requiredReferrals||0;i>=w&&m.push(g.id)}),m}catch(e){return console.error("Error checking referral pack unlocks:",e),[]}},d4=async r=>{try{const e=tt(Ne,"suggestions"),t=St(e,$e("authorId","==",r),$e("status","==","accepted")),o=(await pt(t)).size,c=tt(Ne,"packs"),d=St(c,$e("isSuggestionUnlockable","==",!0)),m=await pt(d),g=[];return m.forEach(_=>{const b=_.data().requiredApprovedSuggestions||0;o>=b&&g.push(_.id)}),g}catch(e){return console.error("Error checking suggestion pack unlocks:",e),[]}},OE=async(r,e)=>{try{const t=Wt(Ne,"userQuestionChangeStats",r);(await Yr(t)).exists()?await lp(t,{totalChanges:PT(1),adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,updatedAt:new Date}):await Rc(t,{userId:r,totalChanges:e.totalChanges,adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,createdAt:new Date,updatedAt:new Date}),console.log("Question change stats saved successfully")}catch(t){console.error("Error saving question change stats:",t)}},Lb=async r=>{try{const e=tt(Ne,"suggestions"),t=St(e,$e("userId","==",r),$e("status","==","accepted"));return(await pt(t)).size}catch(e){return console.error("Error getting user accepted suggestions count:",e),0}},h4=({onBack:r,onSuccess:e})=>{const[t,i]=X.useState("login"),[o,c]=X.useState(""),[d,m]=X.useState(""),[g,_]=X.useState(""),[w,b]=X.useState(""),[A,I]=X.useState(""),[j,F]=X.useState(null),[z,re]=X.useState(!1),[ie,se]=X.useState(!1),[fe,le]=X.useState(""),[K,N]=X.useState(""),{refreshUser:x,user:C}=ji(),O=async()=>{se(!0),le("");try{const $=t==="register"&&A&&(j!=null&&j.isValid)?A:void 0;await wb($),x(),e()}catch($){le($.message)}finally{se(!1)}},k=async()=>{se(!0),le("");try{await Sb(),x(),e()}catch($){le($.message)}finally{se(!1)}},V=async $=>{$.preventDefault(),se(!0),le(""),N("");try{if(t==="login"){const ye=await Tb(o,d);if(x(),!ye.emailVerified){N("Tu email no está verificado. Revisa tu bandeja de entrada o reenvía la verificación.");return}e()}else if(t==="register"){if(d!==g)throw new Error("Las contraseñas no coinciden");const ye=A&&(j!=null&&j.isValid)?A:void 0;await bb(o,d,w,ye),N("Cuenta creada exitosamente. Revisa tu email para verificar tu cuenta antes de poder comprar packs premium."),i("login")}else t==="forgot-password"&&(await xb(o),N("Email de restablecimiento enviado. Revisa tu bandeja de entrada."),i("login"))}catch(ye){le(ye.message)}finally{se(!1)}},R=async()=>{se(!0),le("");try{await Rb(),N("Email de verificación reenviado.")}catch($){le($.message)}finally{se(!1)}},Ce=()=>{c(""),m(""),_(""),b(""),I(""),F(null),le(""),N("")},Oe=async $=>{if(!$.trim()){F(null);return}re(!0);try{const ye="temp-"+Date.now(),P=await jb($,ye);F({isValid:P.isValid,message:P.isValid?`Código válido de ${P.referrerName}`:P.error||"Código no válido"})}catch{F({isValid:!1,message:"Error al validar código"})}finally{re(!1)}},Q=$=>{I($.toUpperCase()),$.trim().length>=6?Oe($):F(null)},ae=$=>{i($),Ce()};return p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:p.jsxs(Pn,{className:"w-full max-w-md p-8 space-y-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:t==="login"?"Iniciar Sesión":t==="register"?"Crear Cuenta":"Recuperar Contraseña"}),p.jsx("p",{className:"text-white/80",children:t==="login"?"Accede a tu cuenta para comprar packs premium":t==="register"?"Crea una cuenta para acceder a contenido premium":"Ingresa tu email para recuperar tu contraseña"})]}),fe&&p.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:fe}),K&&p.jsxs("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:[p.jsx("p",{children:K}),K.includes("no está verificado")&&p.jsx(be,{onClick:R,disabled:ie,className:"mt-2 bg-green-600 hover:bg-green-700 text-sm",children:"Reenviar verificación"})]}),p.jsxs("form",{onSubmit:V,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Email"}),p.jsx("input",{type:"email",value:o,onChange:$=>c($.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"tu@email.com",required:!0})]}),t!=="forgot-password"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Contraseña"}),p.jsx("input",{type:"password",value:d,onChange:$=>m($.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"••••••••",required:!0,minLength:6})]}),t==="register"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Confirmar Contraseña"}),p.jsx("input",{type:"password",value:g,onChange:$=>_($.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"••••••••",required:!0,minLength:6})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Nombre (opcional)"}),p.jsx("input",{type:"text",value:w,onChange:$=>b($.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"Tu nombre"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Código de Referido (opcional)"}),p.jsx("input",{type:"text",value:A,onChange:$=>Q($.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${j===null?"border-white/20 focus:ring-white/50":j.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ej: ABC123",maxLength:8}),z&&p.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando código..."}),j&&p.jsx("p",{className:`text-sm mt-1 ${j.isValid?"text-green-400":"text-red-400"}`,children:j.message})]})]}),p.jsx(be,{type:"submit",disabled:ie,className:"w-full",children:ie?"Cargando...":t==="login"?"Iniciar Sesión":t==="register"?"Crear Cuenta":"Enviar Email"})]}),t!=="forgot-password"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-white/20"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-2 bg-transparent text-white/60",children:"o"})})]}),p.jsxs(be,{onClick:O,disabled:ie,className:"w-full bg-white text-gray-900 hover:bg-gray-100 flex items-center justify-center",children:[p.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar con Google"]})]}),p.jsxs("div",{className:"text-center space-y-2",children:[t==="login"&&p.jsxs(p.Fragment,{children:[p.jsx("button",{type:"button",onClick:()=>ae("forgot-password"),className:"text-white/80 hover:text-white text-sm underline",children:"¿Olvidaste tu contraseña?"}),p.jsxs("div",{children:[p.jsx("span",{className:"text-white/60 text-sm",children:"¿No tienes cuenta? "}),p.jsx("button",{type:"button",onClick:()=>ae("register"),className:"text-white hover:text-white/80 text-sm underline",children:"Regístrate"})]})]}),t==="register"&&p.jsxs("div",{children:[p.jsx("span",{className:"text-white/60 text-sm",children:"¿Ya tienes cuenta? "}),p.jsx("button",{type:"button",onClick:()=>ae("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Inicia sesión"})]}),t==="forgot-password"&&p.jsx("button",{type:"button",onClick:()=>ae("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Volver al inicio de sesión"})]}),p.jsxs("div",{className:"border-t border-white/20 pt-4",children:[p.jsx(be,{onClick:k,disabled:ie,className:"w-full bg-white/10 hover:bg-white/20 text-white border border-white/20",children:"Continuar sin cuenta"}),p.jsx("p",{className:"text-white/60 text-xs text-center mt-2",children:"Podrás jugar pero no comprar packs premium"})]}),p.jsx("div",{className:"text-center",children:p.jsx(be,{onClick:r,className:"text-white/80 hover:text-white bg-transparent",children:"← Volver"})})]})})},Nc="suggestions",f4=async(r,e,t)=>{try{const i=new Date;if(!await zb(e))throw new Error("Has alcanzado el límite de sugerencias permitidas");const c=await Ub(e,r.title,r.content);if(!c.isValid)throw new Error(c.error||"Contenido no válido");const d={type:r.type,authorUid:e,authorName:t,title:r.title,content:r.content,targetPackId:r.targetPackId,status:cc.Pending,createdAt:i,updatedAt:i};if(r.targetPackId){const _=await Yr(Wt(Ne,"packs",r.targetPackId));_.exists()&&(d.targetPackName=_.data().name)}const m={type:d.type,authorUid:d.authorUid,authorName:d.authorName,title:d.title,content:d.content,status:d.status,createdAt:Ye.fromDate(d.createdAt),updatedAt:Ye.fromDate(d.updatedAt)};return d.targetPackId!==void 0&&(m.targetPackId=d.targetPackId),d.targetPackName!==void 0&&(m.targetPackName=d.targetPackName),(await Hc(tt(Ne,Nc),m)).id}catch(i){throw console.error("Error creating suggestion:",i),i}},m4=["spam","test","prueba","asdf","qwerty","123","abc"],kE=r=>{const e=r.toLowerCase();return m4.some(t=>e.includes(t.toLowerCase()))},g4=async(r,e,t)=>{try{const i=St(tt(Ne,Nc),$e("authorUid","==",r),Yd("createdAt","desc"),IT(10)),o=await pt(i);for(const c of o.docs){const d=c.data();if(d.title===e||d.content===t)return!0;const m=ME(e,d.title),g=ME(t,d.content);if(m>.8||g>.8)return!0}return!1}catch(i){return console.error("Error checking duplicate content:",i),!1}},ME=(r,e)=>{const t=r.toLowerCase().split(/\s+/),i=e.toLowerCase().split(/\s+/),o=new Set(t),c=new Set(i),d=new Set([...o].filter(g=>c.has(g))),m=new Set([...o,...c]);return d.size/m.size},Ub=async(r,e,t)=>e.length<gt.MIN_TITLE_LENGTH?{isValid:!1,error:`El título debe tener al menos ${gt.MIN_TITLE_LENGTH} caracteres`}:e.length>gt.MAX_TITLE_LENGTH?{isValid:!1,error:`El título no puede exceder ${gt.MAX_TITLE_LENGTH} caracteres`}:t.length<gt.MIN_CONTENT_LENGTH?{isValid:!1,error:`El contenido debe tener al menos ${gt.MIN_CONTENT_LENGTH} caracteres`}:t.length>gt.MAX_CONTENT_LENGTH?{isValid:!1,error:`El contenido no puede exceder ${gt.MAX_CONTENT_LENGTH} caracteres`}:kE(e)||kE(t)?{isValid:!1,error:"El contenido contiene palabras no permitidas"}:await g4(r,e,t)?{isValid:!1,error:"Ya has enviado una sugerencia similar recientemente"}:{isValid:!0},zb=async r=>{try{if(!r)return!0;const e=new Date,t=new Date(e.getTime()-1440*60*1e3),i=new Date(e.getTime()-10080*60*1e3),o=St(tt(Ne,Nc),$e("authorUid","==",r),$e("createdAt",">=",Ye.fromDate(t)));if((await pt(o)).size>=gt.MAX_SUGGESTIONS_PER_DAY)return!1;const d=St(tt(Ne,Nc),$e("authorUid","==",r),$e("createdAt",">=",Ye.fromDate(i)));return!((await pt(d)).size>=gt.MAX_SUGGESTIONS_PER_WEEK)}catch(e){return console.error("Error checking suggestion limits:",e),!0}},p4=async r=>{try{const e=await qb(r),t={total:e.length,pending:0,approved:0,rejected:0};return e.forEach(i=>{switch(i.status){case cc.Pending:t.pending++;break;case cc.Accepted:t.approved++;break;case cc.Rejected:t.rejected++;break}}),t}catch(e){throw console.error("Error getting user suggestion stats:",e),e}},qb=async r=>{try{const e=St(tt(Ne,Nc),$e("authorUid","==",r),Yd("createdAt","desc"));return(await pt(e)).docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt.toDate(),updatedAt:i.data().updatedAt.toDate()}))}catch(e){throw console.error("Error getting user suggestions:",e),e}},Bb=({onClose:r,onSuccess:e})=>{const{user:t}=ji(),[i,o]=X.useState({type:ir.Pack,title:"",content:"",targetPackId:void 0}),[c,d]=X.useState([]),[m,g]=X.useState(!1),[_,w]=X.useState(null),[b,A]=X.useState(!0),[I,j]=X.useState(0);X.useEffect(()=>{F(),z(),re()},[t]);const F=async()=>{try{const K=await Sh();d(K)}catch(K){console.error("Error loading packs:",K)}},z=async()=>{if(!t){A(!0),w(null);return}try{const K=await zb(t.uid);A(K),w(K?null:"Has alcanzado el límite de sugerencias permitidas. Intenta más tarde.")}catch(K){console.error("Error checking user limits:",K),A(!0),w(null)}},re=async()=>{if(t)try{const K=await Lb(t.uid);j(K)}catch(K){console.error("Error loading accepted suggestions count:",K)}},ie=K=>{o(N=>({...N,type:K,targetPackId:K===ir.Pack?void 0:N.targetPackId}))},se=async K=>{if(K.preventDefault(),!(!t||!b)){if(i.title.length<gt.MIN_TITLE_LENGTH){w(`El título debe tener al menos ${gt.MIN_TITLE_LENGTH} caracteres`);return}if(i.title.length>gt.MAX_TITLE_LENGTH){w(`El título no puede exceder ${gt.MAX_TITLE_LENGTH} caracteres`);return}if(i.content.length<gt.MIN_CONTENT_LENGTH){w(`El contenido debe tener al menos ${gt.MIN_CONTENT_LENGTH} caracteres`);return}if(i.content.length>gt.MAX_CONTENT_LENGTH){w(`El contenido no puede exceder ${gt.MAX_CONTENT_LENGTH} caracteres`);return}if(i.type!==ir.Pack&&!i.targetPackId){w("Debes seleccionar un pack para preguntas y retos");return}g(!0),w(null);try{const N=await Ub(t.uid,i.title,i.content);if(!N.isValid){w(N.error||"Contenido no válido"),g(!1);return}await f4(i,t.uid,t.displayName||"Usuario anónimo"),typeof e=="function"?e():r()}catch(N){w(N.message||"Error al enviar la sugerencia")}finally{g(!1)}}},fe=K=>{switch(K){case ir.Pack:return"Pack nuevo";case ir.Question:return"Pregunta";case ir.Dare:return"Reto";default:return K}},le=()=>{switch(i.type){case ir.Pack:return"Describe tu idea para un nuevo pack: temática, tipo de preguntas/retos, etc.";case ir.Question:return"Escribe tu pregunta aquí...";case ir.Dare:return"Describe el reto que propones...";default:return"Describe tu sugerencia..."}};return t?p.jsx("div",{className:"suggestion-form-overlay",children:p.jsxs("div",{className:"suggestion-form",children:[p.jsxs("div",{className:"suggestion-form-header",children:[p.jsxs("div",{children:[p.jsx("h2",{children:"Enviar Sugerencia"}),p.jsxs("p",{className:"accepted-count",children:["Sugerencias aprobadas: ",p.jsx("strong",{children:I})]})]}),p.jsx("button",{className:"close-button",onClick:r,children:"×"})]}),p.jsxs("form",{onSubmit:se,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Tipo de sugerencia:"}),p.jsx("div",{className:"type-selector",children:Object.values(ir).map(K=>p.jsx("button",{type:"button",className:`type-button ${i.type===K?"active":""}`,onClick:()=>ie(K),children:fe(K)},K))})]}),i.type!==ir.Pack&&p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"targetPack",children:"Pack de destino:"}),p.jsxs("select",{id:"targetPack",value:i.targetPackId||"",onChange:K=>o(N=>({...N,targetPackId:K.target.value||void 0})),required:!0,children:[p.jsx("option",{value:"",children:"Selecciona un pack"}),c.map(K=>p.jsx("option",{value:K.id,children:K.name},K.id))]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"title",children:"Título:"}),p.jsx("input",{type:"text",id:"title",value:i.title,onChange:K=>o(N=>({...N,title:K.target.value})),placeholder:`Título de tu ${fe(i.type).toLowerCase()}`,maxLength:gt.MAX_TITLE_LENGTH,required:!0}),p.jsxs("small",{children:[i.title.length,"/",gt.MAX_TITLE_LENGTH," caracteres"]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"content",children:"Descripción:"}),p.jsx("textarea",{id:"content",value:i.content,onChange:K=>o(N=>({...N,content:K.target.value})),placeholder:le(),maxLength:gt.MAX_CONTENT_LENGTH,rows:6,required:!0}),p.jsxs("small",{children:[i.content.length,"/",gt.MAX_CONTENT_LENGTH," caracteres"]})]}),_&&p.jsx("div",{className:"error-message",children:_}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",className:"cancel-button",onClick:r,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"submit-button",disabled:m||!b,children:m?"Enviando...":"Enviar Sugerencia"})]})]}),p.jsxs("div",{className:"suggestion-info",children:[p.jsx("h4",{children:"Información importante:"}),p.jsxs("ul",{children:[p.jsxs("li",{children:["Máximo ",gt.MAX_SUGGESTIONS_PER_DAY," sugerencias por día"]}),p.jsxs("li",{children:["Máximo ",gt.MAX_SUGGESTIONS_PER_WEEK," sugerencias por semana"]}),p.jsx("li",{children:"No podrás editar ni eliminar tu sugerencia una vez enviada"}),p.jsx("li",{children:"Recibirás notificaciones sobre el estado de tu sugerencia"})]})]})]})}):p.jsx("div",{className:"suggestion-form-overlay",children:p.jsxs("div",{className:"suggestion-form",children:[p.jsxs("div",{className:"suggestion-form-header",children:[p.jsx("h2",{children:"Iniciar sesión requerido"}),p.jsx("button",{className:"close-button",onClick:r,children:"×"})]}),p.jsx("p",{children:"Debes iniciar sesión para enviar sugerencias."}),p.jsx("button",{className:"cancel-button",onClick:r,children:"Cerrar"})]})})},y4="incidents",_4=async r=>{try{return(await Hc(tt(Ne,y4),{...r,timestamp:Ye.fromDate(r.timestamp)})).id}catch(e){throw console.error("Error al reportar incidencia:",e),new Error("No se pudo reportar la incidencia")}},Hb=({onClose:r})=>{const[e,t]=X.useState(""),[i,o]=X.useState(!1),[c,d]=X.useState(!1),{user:m}=ji(),g=async _=>{if(_.preventDefault(),!!e.trim()){o(!0);try{await _4({userId:(m==null?void 0:m.uid)||"anonymous",userEmail:(m==null?void 0:m.email)||"Usuario anónimo",description:e.trim(),timestamp:new Date,status:"pending"}),d(!0)}catch(w){console.error("Error al reportar incidencia:",w),alert("Error al enviar el reporte. Por favor, inténtalo de nuevo.")}finally{o(!1)}}};return c?p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-green-600",children:"¡Gracias!"}),p.jsx("p",{className:"text-gray-700 mb-6",children:"Muchas gracias por reportar la incidencia. El equipo de desarrollo la revisará y se pondrá con ello."}),p.jsx(be,{onClick:r,className:"w-full bg-blue-500 hover:bg-blue-600 text-white",children:"Cerrar"})]})}):p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900",children:"Reportar Incidencia"}),p.jsxs("form",{onSubmit:g,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-black mb-2",children:"Describe la incidencia:"}),p.jsx("textarea",{id:"description",value:e,onChange:_=>t(_.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 placeholder-gray-500",rows:4,placeholder:"Describe el problema que has encontrado...",required:!0,disabled:i})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx(be,{type:"button",onClick:r,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white",disabled:i,children:"Cancelar"}),p.jsx(be,{type:"submit",className:"flex-1 bg-red-500 hover:bg-red-600 text-white",disabled:i||!e.trim(),children:i?"Enviando...":"Reportar"})]})]})]})})},v4=({onBack:r})=>{const{user:e}=ji(),[t,i]=X.useState(null),[o,c]=X.useState(""),[d,m]=X.useState(null),[g,_]=X.useState(!1),[w,b]=X.useState(!1),[A,I]=X.useState(!0),[j,F]=X.useState(""),[z,re]=X.useState(""),[ie,se]=X.useState(0),[fe,le]=X.useState(!1),[K,N]=X.useState(!1),[x,C]=X.useState(null),[O,k]=X.useState([]);X.useEffect(()=>{V()},[e]);const V=async()=>{if(e!=null&&e.uid){I(!0);try{const[$,ye,P,ne]=await Promise.all([c4(e.uid),Lb(e.uid),p4(e.uid),qb(e.uid)]);i($),se(ye),C(P),k(ne)}catch($){console.error("Error loading user data:",$),F("Error al cargar datos del usuario")}finally{I(!1)}}},R=async $=>{if(!$.trim()){m(null);return}if(!(e!=null&&e.uid)){m({isValid:!1,message:"Error de autenticación"});return}_(!0);try{const ye=await jb($,e.uid);m({isValid:ye.isValid,message:ye.isValid?`Código válido de ${ye.referrerName}`:ye.error||"Código no válido"})}catch{m({isValid:!1,message:"Error al validar código"})}finally{_(!1)}},Ce=$=>{c($.toUpperCase()),$.trim().length>=6?R($):m(null)},Oe=async()=>{if(!(!(e!=null&&e.uid)||!o||!(d!=null&&d.isValid))){b(!0),F(""),re("");try{await l4(o,e.uid)?(re("¡Código de referido aplicado exitosamente!"),c(""),m(null),await V()):F("Error al procesar el código de referido")}catch{F("Error al procesar el código de referido")}finally{b(!1)}}},Q=async()=>{if(t!=null&&t.referralCode)try{await navigator.clipboard.writeText(t.referralCode),re("¡Código copiado al portapapeles!"),setTimeout(()=>re(""),3e3)}catch{F("Error al copiar el código")}},ae=async()=>{try{await Ab()}catch{F("Error al cerrar sesión")}};return A?p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:p.jsx(Pn,{className:"w-full max-w-2xl p-8",children:p.jsxs("div",{className:"text-center text-white",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),p.jsx("p",{children:"Cargando perfil..."})]})})}):p.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:[p.jsxs(Pn,{className:"w-full max-w-2xl p-8 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h1",{className:"text-3xl font-bold text-white",children:"Mi Perfil"}),p.jsx(be,{onClick:r,className:"bg-white/20 hover:bg-white/30 text-white",children:"Volver"})]}),j&&p.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:j}),z&&p.jsx("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:z}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h2",{className:"text-xl font-semibold text-white",children:"Información Personal"}),p.jsx(be,{onClick:ae,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2",children:"Cerrar Sesión"})]}),p.jsxs("div",{className:"space-y-2 text-white/80",children:[p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Email:"})," ",e==null?void 0:e.email]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Nombre:"})," ",(e==null?void 0:e.displayName)||"No especificado"]})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mi Código de Referido"}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("div",{className:"flex-1",children:p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Tu código:"}),p.jsx("p",{className:"text-2xl font-bold text-white tracking-wider",children:(t==null?void 0:t.referralCode)||"Cargando..."})]})}),p.jsx(be,{onClick:Q,className:"bg-blue-600 hover:bg-blue-700",disabled:!(t!=null&&t.referralCode),children:"Copiar"})]}),p.jsx("p",{className:"text-white/60 text-sm mt-2",children:"Comparte este código con tus amigos para ganar referidos"})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mis Estadísticas"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-3xl font-bold text-white",children:(t==null?void 0:t.referralCount)||0}),p.jsx("p",{className:"text-white/60 text-sm",children:"Total de referidos"})]}),p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-3xl font-bold text-green-400",children:ie}),p.jsx("p",{className:"text-white/60 text-sm",children:"Sugerencias aceptadas"})]})]}),(t==null?void 0:t.referredUsers)&&t.referredUsers.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Usuarios Referidos"}),p.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.referredUsers.map(($,ye)=>p.jsxs("div",{className:"bg-white/10 rounded p-3 flex justify-between items-center",children:[p.jsx("span",{className:"text-white",children:$.name}),p.jsx("span",{className:"text-white/60 text-sm",children:$.joinedAt.toLocaleDateString()})]},$.id))})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Contribuir con Sugerencias"}),p.jsx("p",{className:"text-white/60 text-sm mb-4",children:"¿Tienes ideas para nuevos packs, preguntas o retos? ¡Compártelas con nosotros!"}),p.jsx(be,{onClick:()=>le(!0),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:"💡 Recomendar Pack/Pregunta/Reto"})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Reportar Problema"}),p.jsx("p",{className:"text-white/60 text-sm mb-4",children:"¿Encontraste un error o problema en la aplicación? Repórtalo para que podamos solucionarlo."}),p.jsx(be,{onClick:()=>N(!0),className:"w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:"🐛 Reportar Incidencia"})]}),!(t!=null&&t.usedReferralCode)&&p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Usar Código de Referido"}),p.jsx("p",{className:"text-white/60 text-sm mb-4",children:"¿Tienes un código de referido? Úsalo aquí para ayudar a un amigo."}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("input",{type:"text",value:o,onChange:$=>Ce($.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${d===null?"border-white/20 focus:ring-white/50":d.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ingresa el código de referido",maxLength:8}),g&&p.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando código..."}),d&&p.jsx("p",{className:`text-sm mt-1 ${d.isValid?"text-green-400":"text-red-400"}`,children:d.message})]}),p.jsx(be,{onClick:Oe,disabled:!(d!=null&&d.isValid)||w,className:"w-full bg-green-600 hover:bg-green-700",children:w?"Procesando...":"Usar Código"})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mis Sugerencias"}),x&&p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-white",children:x.total}),p.jsx("p",{className:"text-white/60 text-sm",children:"Total"})]}),p.jsxs("div",{className:"bg-yellow-500/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-yellow-300",children:x.pending}),p.jsx("p",{className:"text-white/60 text-sm",children:"Pendientes"})]}),p.jsxs("div",{className:"bg-green-500/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-green-300",children:x.approved}),p.jsx("p",{className:"text-white/60 text-sm",children:"Aprobadas"})]}),p.jsxs("div",{className:"bg-red-500/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-red-300",children:x.rejected}),p.jsx("p",{className:"text-white/60 text-sm",children:"Rechazadas"})]})]}),O.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Sugerencias Recientes"}),p.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:O.slice(0,5).map($=>p.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsx("h4",{className:"font-medium text-white truncate flex-1 mr-2",children:$.title}),p.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${$.status==="pending"?"bg-yellow-500/20 text-yellow-300":$.status==="approved"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:$.status==="pending"?"Pendiente":$.status==="approved"?"Aprobada":"Rechazada"})]}),p.jsx("p",{className:"text-white/60 text-sm line-clamp-2",children:$.content}),p.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-white/40",children:[p.jsx("span",{children:$.type==="question"?"Pregunta":"Reto"}),p.jsx("span",{children:$.createdAt.toLocaleDateString()})]})]},$.id))}),O.length>5&&p.jsxs("p",{className:"text-white/60 text-sm mt-3 text-center",children:["Y ",O.length-5," sugerencias más..."]})]}),O.length===0&&x&&p.jsxs("div",{className:"text-center py-8",children:[p.jsx("p",{className:"text-white/60",children:"Aún no has realizado ninguna sugerencia"}),p.jsx("p",{className:"text-white/40 text-sm mt-1",children:"¡Comparte tus ideas para mejorar el juego!"})]})]}),(t==null?void 0:t.usedReferralCode)&&p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Código de Referido Usado"}),p.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[p.jsx("p",{className:"text-white/60 text-sm",children:"Ya has usado el código:"}),p.jsx("p",{className:"text-xl font-bold text-white tracking-wider",children:t.usedReferralCode})]})]})]}),fe&&p.jsx(Bb,{isOpen:fe,onClose:()=>le(!1)}),K&&p.jsx(Hb,{onClose:()=>N(!1)})]})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),w4=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),VE=r=>{const e=w4(r);return e.charAt(0).toUpperCase()+e.slice(1)},Fb=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),T4=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var b4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=X.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:d,...m},g)=>X.createElement("svg",{ref:g,...b4,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:Fb("lucide",o),...!c&&!T4(m)&&{"aria-hidden":"true"},...m},[...d.map(([_,w])=>X.createElement(_,w)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=(r,e)=>{const t=X.forwardRef(({className:i,...o},c)=>X.createElement(S4,{ref:c,iconNode:e,className:Fb(`lucide-${E4(VE(r))}`,`lucide-${r}`,i),...o}));return t.displayName=VE(r),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],x4=Ra("circle-check-big",A4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],I4=Ra("circle-x",R4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],N4=Ra("info",C4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],P4=Ra("share-2",D4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],k4=Ra("shopping-bag",O4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],V4=Ra("triangle-alert",M4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],L4=Ra("x",j4);class U4{constructor(){this.config=null,this.listeners=[],this.hasShownThisSession=!1,this.defaultConfig={enabled:!1,title:"¡Bienvenido a Verdad o Reto!",subtitle:"Disfruta de los mejores desafíos",modules:[],showOnce:!1,showOnAppStart:!0,backgroundColor:"#1F2937",textColor:"#FFFFFF",version:"1.0.0",lastModified:Date.now()},this.loadConfig()}async loadConfig(){try{const e=Wt(Ne,"config","welcomeScreen");IC(e,t=>{t.exists()?this.config={...this.defaultConfig,...t.data()}:this.config=this.defaultConfig,this.notifyListeners()})}catch(e){console.error("Error loading welcome screen config:",e),this.config=this.defaultConfig,this.notifyListeners()}}getConfig(){return this.config}async saveConfig(e){try{const t={...e,version:this.generateNewVersion(),lastModified:Date.now()},i=Wt(Ne,"config","welcomeScreen");await Rc(i,t)}catch(t){throw console.error("Error saving welcome screen config:",t),t}}generateNewVersion(){return`v${Date.now()}`}shouldShowWelcomeScreen(){return!this.config||!this.config.enabled||this.config.showOnce&&this.hasShownThisSession||this.hasUserDisabledForCurrentVersion()?!1:this.config.showOnAppStart}markAsShown(){this.hasShownThisSession=!0}markAsSeen(){this.markAsShown()}markAsDisabled(){this.markAsDontShowAgain()}resetSessionFlag(){this.hasShownThisSession=!1}getStorageKey(){return"welcomeScreen_dontShowAgain"}hasUserDisabledForCurrentVersion(){var i;if(!((i=this.config)!=null&&i.version))return!1;const e=this.getStorageKey();return localStorage.getItem(e)===this.config.version}markAsDontShowAgain(){var t;if(!((t=this.config)!=null&&t.version))return;const e=this.getStorageKey();localStorage.setItem(e,this.config.version)}clearDontShowAgainPreference(){const e=this.getStorageKey();localStorage.removeItem(e)}canShowAgain(){return!this.hasUserDisabledForCurrentVersion()}addListener(e){this.listeners.push(e)}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}notifyListeners(){this.listeners.forEach(e=>e(this.config))}addModule(e){if(!this.config)return;const t=this.config.modules.findIndex(i=>i.id===e.id);t>=0?this.config.modules[t]=e:this.config.modules.push(e),this.config.modules.sort((i,o)=>i.order-o.order)}removeModule(e){this.config&&(this.config.modules=this.config.modules.filter(t=>t.id!==e))}getEnabledModules(){return this.config?this.config.modules.filter(e=>e.enabled).sort((e,t)=>e.order-t.order):[]}createReferralProgressModule(e,t=1){return{id:"referral_progress",type:"referral_progress",enabled:!0,order:t,config:e}}createCustomMessageModule(e,t=2){return{id:`custom_message_${Date.now()}`,type:"custom_message",enabled:!0,order:t,config:e}}createShopButtonModule(e,t=3){return{id:"shop_button",type:"shop_button",enabled:!0,order:t,config:e}}async getUserReferralInfo(e){try{const t=Wt(Ne,"users",e),i=await Yr(t);if(i.exists()){const o=i.data();return{current:o.referralCount||0,target:o.referralTarget||5}}}catch(t){console.error("Error getting user referral info:",t)}return{current:0,target:5}}generateReferralLink(e,t){const i=/Android/i.test(navigator.userAgent),o=/iPhone|iPad|iPod/i.test(navigator.userAgent);return i?`https://play.google.com/store/apps/details?id=com.verdadreto.app&referrer=ref%3D${t}%26user%3D${e}`:o?`https://apps.apple.com/app/verdad-o-reto/id123456789?ref=${t}&user=${e}`:`${window.location.origin}?ref=${t}&user=${e}`}async shareApp(e,t,i){const o=this.generateReferralLink(e,t),c=`¡Únete a Verdad o Reto! Usa mi código de referido: ${t}`,d=i||c;if(navigator.share)try{await navigator.share({title:"Verdad o Reto",text:d,url:o})}catch(m){console.log("Error sharing:",m),this.fallbackShare(d,o)}else this.fallbackShare(d,o)}fallbackShare(e,t){const i=`${e}

${t}`;if(navigator.clipboard)navigator.clipboard.writeText(i).then(()=>{alert("¡Enlace copiado al portapapeles!")});else{const o=document.createElement("textarea");o.value=i,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),alert("¡Enlace copiado al portapapeles!")}}}const ar=new U4,z4=(r,e,t)=>{let i="",o="info";switch(r.messageType){case"plain":i=r.plainMessage||"",o="info";break;case"referral":const d=t.filter(m=>m.isReferralUnlockable&&m.requiredReferrals>e.current).sort((m,g)=>m.requiredReferrals-g.requiredReferrals)[0];if(d){const m=d.requiredReferrals-e.current;i=(r.referralMessage||"").replace(/\{remaining\}/g,m.toString()).replace(/\{pack\}/g,d.name)}else i=(r.referralMessage||"").replace(/\{remaining\}/g,"0").replace(/\{pack\}/g,"todos los packs");o="warning";break;case"shop":i=r.shopMessage||"",o="success";break;default:i=r.plainMessage||"",o="info"}return{message:i,type:o}},q4=({config:r,onContinue:e,onSkip:t,onShare:i,onGoToShop:o,onDontShowAgain:c})=>{const{user:d}=ji(),[m,g]=X.useState(r||null),[_,w]=X.useState({current:0,target:5}),[b,A]=X.useState(!1),[I,j]=X.useState(!1),[F,z]=X.useState([]);X.useEffect(()=>{if(r)g(r);else{const le=K=>{g(K)};return ar.addListener(le),g(ar.getConfig()),()=>{ar.removeListener(le)}}},[r]),X.useEffect(()=>{d!=null&&d.uid&&ar.getUserReferralInfo(d.uid).then(w)},[d]),X.useEffect(()=>{(async()=>{try{const K=await Sh();z(K)}catch(K){console.error("Error loading available packs:",K)}})()},[]);const re=async()=>{var le,K;if(!(!(d!=null&&d.uid)||!(d!=null&&d.referralCode))){A(!0);try{const N=((K=(le=m==null?void 0:m.modules.find(x=>x.type==="referral_progress"))==null?void 0:le.config)==null?void 0:K.shareMessage)||"¡Únete a Verdad o Reto!";await ar.shareApp(d.uid,d.referralCode,N),i()}catch(N){console.error("Error sharing:",N)}finally{A(!1)}}},ie=()=>{I&&c&&c(),e()},se=()=>{I&&c&&c(),t()};if(!m||!m.enabled)return null;const fe=ar.getEnabledModules();return p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[p.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:t}),p.jsxs("div",{className:"relative w-full max-w-md mx-auto rounded-2xl shadow-2xl overflow-hidden",style:{backgroundColor:m.backgroundColor,color:m.textColor},children:[p.jsxs("div",{className:"relative p-6 text-center",children:[p.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-white hover:bg-opacity-10 transition-colors",children:p.jsx(L4,{size:20})}),p.jsx("h1",{className:"text-2xl font-bold mb-2",children:m.title}),m.subtitle&&p.jsx("p",{className:"text-opacity-80",style:{color:m.textColor},children:m.subtitle})]}),p.jsxs("div",{className:"px-6 pb-6 space-y-4",children:[fe.map(le=>p.jsx(B4,{module:le,referralInfo:_,onShare:re,onNavigateToShop:o,isSharing:b,textColor:m.textColor,availablePacks:F},le.id)),c&&p.jsxs("div",{className:"flex items-center gap-2 mt-4 mb-2",children:[p.jsx("input",{type:"checkbox",id:"dontShowAgain",checked:I,onChange:le=>j(le.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),p.jsx("label",{htmlFor:"dontShowAgain",className:"text-sm cursor-pointer",style:{color:m.textColor},children:"No volver a mostrar"})]}),p.jsxs("div",{className:"flex gap-3 mt-6",children:[p.jsx(be,{onClick:se,variant:"secondary",className:"flex-1",children:"Omitir"}),p.jsx(be,{onClick:ie,className:"flex-1",children:"Continuar"})]})]})]})]})},B4=({module:r,referralInfo:e,onShare:t,onNavigateToShop:i,isSharing:o,textColor:c,availablePacks:d})=>{switch(r.type){case"referral_progress":return p.jsx(H4,{config:r.config,referralInfo:e,onShare:t,isSharing:o,textColor:c});case"custom_message":return p.jsx(F4,{config:r.config,textColor:c,referralInfo:e,availablePacks:d,onNavigateToShop:i});case"shop_button":return p.jsx(G4,{config:r.config,onNavigateToShop:i});default:return null}},H4=({config:r,referralInfo:e,onShare:t,isSharing:i,textColor:o})=>{const c=Math.min(e.current/e.target*100,100),d=Math.max(e.target-e.current,0);return p.jsxs("div",{className:"bg-white bg-opacity-10 rounded-xl p-4",children:[r.showProgress&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-sm font-medium",children:"Referidos"}),p.jsxs("span",{className:"text-sm",children:[e.current,"/",e.target]})]}),p.jsx("div",{className:"w-full bg-white bg-opacity-20 rounded-full h-3 mb-3",children:p.jsx("div",{className:"bg-gradient-to-r from-purple-400 to-pink-400 h-3 rounded-full transition-all duration-500",style:{width:`${c}%`}})})]}),r.progressMessage&&p.jsx("p",{className:"text-sm mb-3 text-center",style:{color:o},children:d>0?r.progressMessage.replace("{remaining}",d.toString()):"¡Objetivo completado! 🎉"}),p.jsxs(be,{onClick:t,disabled:i,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:[p.jsx(P4,{size:16}),i?"Compartiendo...":r.shareButtonText]})]})},F4=({config:r,textColor:e,referralInfo:t,availablePacks:i,onNavigateToShop:o})=>{const c=z4(r,t,i),d=()=>{switch(c.type){case"info":return p.jsx(N4,{size:20,className:"text-blue-400"});case"warning":return p.jsx(V4,{size:20,className:"text-yellow-400"});case"success":return p.jsx(x4,{size:20,className:"text-green-400"});case"error":return p.jsx(I4,{size:20,className:"text-red-400"});default:return null}},m=()=>{switch(c.type){case"info":return"border-blue-400";case"warning":return"border-yellow-400";case"success":return"border-green-400";case"error":return"border-red-400";default:return"border-gray-400"}},g=()=>{r.messageType==="shop"&&r.shopMessageRedirect&&o&&o()};return p.jsx("div",{className:`border-l-4 ${m()} bg-white bg-opacity-10 rounded-r-xl p-4 ${r.messageType==="shop"&&r.shopMessageRedirect?"cursor-pointer hover:bg-opacity-20 transition-colors":""}`,onClick:g,children:p.jsxs("div",{className:"flex items-start gap-3",children:[d(),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm",style:{color:e},children:c.message}),r.messageType==="shop"&&r.shopMessageRedirect&&p.jsx("p",{className:"text-xs mt-1 opacity-75",style:{color:e},children:"Toca para ir a la tienda"})]})]})})},G4=({config:r,onNavigateToShop:e})=>{const t=()=>{switch(r.style){case"primary":return"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white";case"secondary":return"bg-white bg-opacity-20 hover:bg-opacity-30 text-white border border-white border-opacity-30";case"accent":return"bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-white";default:return"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white"}};return p.jsxs(be,{onClick:e,className:`w-full ${t()} font-medium py-3 px-4 rounded-lg transition-all duration-200 flex items-center justify-center gap-2`,children:[p.jsx(k4,{size:16}),r.text]})},Q4=()=>{const{user:r}=ji(),[e,t]=X.useState(je.Welcome),[i,o]=X.useState(!0),[c,d]=X.useState(null);X.useEffect(()=>{r||t(je.Setup),Ei.setCurrentUser(r),r&&(Ei.trackSessionStart(),r.isAnonymous||Ei.trackUserLogin())},[r]),X.useEffect(()=>{(async()=>{try{const me=ar.getConfig();d(me);const ct=ar.shouldShowWelcomeScreen();o(ct),ct||t(je.Setup)}catch(me){console.error("Error loading welcome screen config:",me),o(!1),t(je.Setup)}})()},[]);const[m,g]=X.useState([]),[_,w]=X.useState([]),[b,A]=X.useState([]),[I,j]=X.useState(0),[F,z]=X.useState({totalRounds:5}),[re,ie]=X.useState({currentRound:1,playersCompletedInRound:0}),[se,fe]=X.useState({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),[le,K]=X.useState({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),[N,x]=X.useState({isLoading:!0,error:null}),[C,O]=X.useState([]),[k,V]=X.useState(()=>{try{const ue=window.localStorage.getItem("purchasedPacks");return ue?JSON.parse(ue):[]}catch(ue){return console.error("Error reading from localStorage",ue),[]}}),[R,Ce]=X.useState(!1),[Oe,Q]=X.useState(null),[ae,$]=X.useState(!1),[ye,P]=X.useState(null),[ne,de]=X.useState([]),[oe,ve]=X.useState([]),[Pe,Ae]=X.useState([]),[Nt,We]=X.useState({changesCount:0,isAdLoading:!1,isAdPlaying:!1,lastChangedItem:void 0}),[Jt,lr]=X.useState({totalChanges:0,adsWatched:0,lastChangeDate:void 0}),[cr,Er]=X.useState(!1),[Wr,wr]=X.useState(!1),[Ia,Wo]=X.useState(!1),pn=X.useCallback(async ue=>{try{const me=await u4(ue);ve(me)}catch(me){console.error("Error loading referral unlocked packs:",me),ve([])}},[]),Ca=X.useCallback(async ue=>{try{const me=await d4(ue);Ae(me)}catch(me){console.error("Error loading suggestion unlocked packs:",me),Ae([])}},[]);X.useEffect(()=>{(async()=>{try{const me=await Sh();O(me)}catch(me){console.error("Error loading available packs:",me)}})()},[]),X.useEffect(()=>{try{window.localStorage.setItem("purchasedPacks",JSON.stringify(k))}catch(ue){console.error("Error writing to localStorage",ue)}},[k,oe,Pe]);const Jr=X.useCallback(async()=>{x({isLoading:!0,error:null});try{const ue=["base",...k.filter(ct=>ct!=="base"),...oe.filter(ct=>ct!=="base"&&!k.includes(ct)),...Pe.filter(ct=>ct!=="base"&&!k.includes(ct)&&!oe.includes(ct))],me=await i4(ue);w(me.questions),A(me.dares),x({isLoading:!1,error:null})}catch(ue){console.error("Error loading game data:",ue),x({isLoading:!1,error:ue instanceof Error?ue.message:"Error desconocido"})}},[k,Pe]);X.useEffect(()=>{Jr()},[Jr]);const Ls=()=>{if(m.length<2){alert("Se necesitan al menos 2 jugadores para empezar.");return}t(je.PackSelection)},Zr=()=>{t(je.RoundConfiguration)},Jo=()=>{t(je.Setup)},Us=()=>{t(je.Shop)},zs=()=>{t(je.Login)},Na=async ue=>{var me,ct;if(t(je.Setup),((me=ue==null?void 0:ue.metadata)==null?void 0:me.creationTime)===((ct=ue==null?void 0:ue.metadata)==null?void 0:ct.lastSignInTime)&&Ei.trackUserRegister(),ue!=null&&ue.uid)try{await Cb(ue.uid),pn(ue.uid),Ca(ue.uid)}catch(Fs){console.error("Error durante la migración del usuario:",Fs),pn(ue.uid),Ca(ue.uid)}},ft=X.useCallback(async()=>{const ue={...Jt,totalChanges:Jt.totalChanges+1,lastChangeDate:new Date};if(We(me=>({...me,changesCount:me.changesCount+1})),lr(ue),r&&!r.isAnonymous)try{await OE(r.uid,ue)}catch(me){console.error("Error saving question change stats:",me)}},[Jt,r]),Je=X.useCallback(async()=>new Promise((ue,me)=>{if(!Mt.isEnabled()){ue();return}We(Sn=>({...Sn,isAdLoading:!0}));const ct=Mt.getAdLoadingTime(),Fs=Mt.getAdPlayingTime();setTimeout(()=>{We(Sn=>({...Sn,isAdLoading:!1,isAdPlaying:!0})),setTimeout(()=>{We(An=>({...An,isAdPlaying:!1,changesCount:0}));const Sn={...Jt,adsWatched:Jt.adsWatched+1};if(lr(Sn),r&&!r.isAnonymous)try{OE(r.uid,Sn).catch(An=>{console.error("Error saving ad watched stats:",An)})}catch(An){console.error("Error saving ad watched stats:",An)}ue()},Fs)},ct)}),[Jt,r]),yn=()=>{t(je.Setup)},Ht=ue=>{const me=C.find(ct=>ct.id===ue);me&&(P(me),$(!0))},Da=()=>{$(!1),P(null)},Zo=ue=>{de(me=>me.includes(ue)?me:[...me,ue])},es=async()=>{if(ye)try{const ue=await a4(ye.id);if(ue.questions.length===0&&ue.dares.length===0){alert("Este pack no tiene contenido demo disponible.");return}Ce(!0),Q(ye.id),w(ue.questions),A(ue.dares),await o4(ye.id),t(je.RoundConfiguration)}catch(ue){console.error("Error starting demo:",ue),alert("Error al cargar el demo. Inténtalo de nuevo.")}},ts=ue=>{z(ue),fe({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:new Date,gameEndTime:null,roundStats:[]}),K({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),ie({currentRound:1,playersCompletedInRound:0}),t(je.Game)},ns=()=>{const ue=(I+1)%m.length;if(j(ue),ue===0){const me=re.currentRound+1;me>F.totalRounds?Tr():(ie({currentRound:me,playersCompletedInRound:0}),K({roundNumber:me,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}))}else ie(me=>({...me,playersCompletedInRound:me.playersCompletedInRound+1}))},On=()=>{const ue={...le,roundEndTime:new Date};fe(me=>({...me,totalRounds:me.totalRounds+1,roundStats:[...me.roundStats,ue]})),t(je.RoundEnd)},qs=()=>{const ue=re.currentRound+1;ie({currentRound:ue,playersCompletedInRound:0}),K({roundNumber:ue,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),j(0),t(je.Game)},Tr=()=>{fe(ue=>({...ue,gameEndTime:new Date})),t(je.GameEnd)},Li=()=>{const ue=m[I];K(me=>({...me,questionsAsked:me.questionsAsked+1,playersParticipated:me.playersParticipated.includes(ue)?me.playersParticipated:[...me.playersParticipated,ue]})),fe(me=>({...me,totalQuestions:me.totalQuestions+1}))},Ui=()=>{const ue=m[I];K(me=>({...me,daresCompleted:me.daresCompleted+1,playersParticipated:me.playersParticipated.includes(ue)?me.playersParticipated:[...me.playersParticipated,ue]})),fe(me=>({...me,totalDares:me.totalDares+1}))},Bs=X.useCallback(()=>{t(je.Setup),g([]),j(0),z({totalRounds:5}),ie({currentRound:1,playersCompletedInRound:0}),fe({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),K({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),Ce(!1),Q(null),$(!1),P(null),de([])},[]),ur=ue=>{k.includes(ue)||V([...k,ue])},kn=()=>k.includes("no-ads"),zi=()=>{Er(!1)},Kn=()=>{ar.markAsSeen(),o(!1),t(je.Setup)},qi=()=>{ar.markAsSeen(),o(!1),t(je.Setup)},br=()=>{ar.markAsDisabled(),o(!1),t(je.Setup)},Hs=()=>{navigator.share?navigator.share({title:"Verdad o Reto",text:"¡Únete a la diversión con Verdad o Reto!",url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("Enlace copiado al portapapeles"))},Sr=()=>{ar.markAsSeen(),o(!1),t(je.Shop)},Pa=()=>{console.log("Sugerencia enviada exitosamente"),Er(!1)},dt=()=>{wr(!0)},At=()=>{wr(!1)},wt=()=>{t(je.Setup)},bn=()=>{switch(e){case je.Welcome:return p.jsx(q4,{config:c,onContinue:Kn,onSkip:qi,onDontShowAgain:br,onShare:Hs,onGoToShop:Sr});case je.Setup:return p.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-900 bg-opacity-50 backdrop-blur-sm",children:p.jsxs("div",{className:"w-full max-w-md mx-auto animate-fade-in",children:[p.jsx("h1",{className:"text-5xl font-extrabold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Verdad o Reto"}),p.jsx("p",{className:"text-center text-gray-400 mb-8",children:"El juego para animar la fiesta"}),p.jsxs("div",{className:"space-y-6",children:[p.jsx(kA,{players:m,setPlayers:g}),N.isLoading&&p.jsx(Pn,{className:"text-center text-gray-400",children:p.jsx("p",{children:"Cargando datos desde Firebase..."})}),N.error&&p.jsxs(Pn,{className:"text-center text-red-400",children:[p.jsxs("p",{children:["Error de conexión: ",N.error]}),p.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Verifica tu configuración de Firebase"}),p.jsx(be,{onClick:Jr,className:"mt-4",variant:"secondary",children:"Reintentar"})]}),!N.isLoading&&!N.error&&p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx(be,{onClick:Ls,className:"w-full text-lg",disabled:m.length<2||_.length===0||b.length===0,children:"Empezar a Jugar"}),r&&!r.isAnonymous?p.jsx(be,{onClick:()=>t(je.Profile),variant:"secondary",className:"w-full text-lg",children:"Mi Perfil"}):p.jsx(be,{onClick:zs,variant:"secondary",className:"w-full text-lg",children:"Iniciar Sesión"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(be,{onClick:()=>t(je.Shop),variant:"secondary",className:`flex-[2] text-lg bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 
                                      hover:from-yellow-500 hover:via-yellow-600 hover:to-yellow-700 
                                      text-white font-semibold shadow-lg hover:shadow-xl 
                                      transform hover:scale-105 transition-all duration-200 
                                      flex items-center justify-center gap-2 rounded-2xl`,children:[p.jsx(NA,{className:"w-5 h-5"}),"Tienda de Paquetes"]}),p.jsx(be,{onClick:dt,variant:"secondary",className:"flex-1 text-sm bg-red-600 hover:bg-red-700 text-white",children:"Reportar"})]})]})]})]})});case je.Login:return p.jsx(h4,{onBack:yn,onSuccess:Na});case je.Profile:return p.jsx(v4,{onBack:wt});case je.Shop:return p.jsx(e4,{availablePacks:C,purchasedPacks:k,onPurchase:ur,onBack:()=>t(je.Setup),onGoToLogin:zs});case je.PackSelection:return p.jsxs(p.Fragment,{children:[p.jsx(nD,{availablePacks:C,purchasedPacks:k,adWatchedPacks:ne,referralUnlockedPacks:oe,suggestionUnlockedPacks:Pe,onContinue:Zr,onBack:Jo,onGoToShop:Us,onPlayDemo:Ht}),p.jsx(pD,{pack:ye,isOpen:ae,onClose:Da,onStartDemo:es,onAdWatched:Zo,hasNoAds:kn()})]});case je.RoundConfiguration:return p.jsx(_D,{onSelectRounds:ue=>{ts({totalRounds:ue})},onBack:()=>t(je.PackSelection)});case je.Game:return p.jsx(yD,{players:m,currentPlayerIndex:I,onNextPlayer:ns,onNewGame:Bs,questions:_,dares:b,roundConfig:F,gameProgress:re,onRoundEnd:On,onQuestionAsked:Li,onDareCompleted:Ui,onQuestionChange:ft,onAdRequired:Je,questionChangeState:Nt});case je.RoundEnd:return p.jsx(vD,{roundStats:le,currentRound:re.currentRound,totalRounds:F.totalRounds,onContinue:qs,onEndGame:Tr,hasNoAds:kn()});case je.GameEnd:return p.jsx(ED,{gameStats:se,players:m,onNewGame:Bs,onBackToMenu:()=>t(je.Setup),hasNoAds:kn(),isDemoMode:R,demoPackId:Oe});default:return p.jsx("div",{children:"Error: Estado de juego desconocido."})}};return p.jsxs("main",{className:"relative min-h-screen bg-gray-900 overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-purple-900/30 via-transparent to-pink-900/30"}),p.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-96 h-96 bg-purple-600 rounded-full filter blur-3xl opacity-20 animate-blob"}),p.jsx("div",{className:"absolute bottom-[-10%] right-[5%] w-96 h-96 bg-pink-600 rounded-full filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),p.jsx("div",{className:"absolute top-[10%] right-[-15%] w-80 h-80 bg-cyan-600 rounded-full filter blur-3xl opacity-10 animate-blob animation-delay-4000"}),p.jsx("div",{className:"relative z-10",children:bn()}),p.jsx("style",{children:`
          .animate-blob {
            animation: blob 7s infinite;
          }
          .animation-delay-2000 {
            animation-delay: 2s;
          }
          .animation-delay-4000 {
            animation-delay: 4s;
          }
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
          }
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `}),cr&&p.jsx(Bb,{onClose:zi,onSuccess:Pa}),Wr&&p.jsx(Hb,{onClose:At})]})},Gb=document.getElementById("root");if(!Gb)throw new Error("Could not find root element to mount to");const K4=RA.createRoot(Gb);K4.render(p.jsx(vA.StrictMode,{children:p.jsx(CD,{children:p.jsx(Q4,{})})}));export{RE as A,_b as W};
