(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function b0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ud={exports:{}},Al={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function Qb(){if(P_)return Al;P_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Al.Fragment=e,Al.jsx=n,Al.jsxs=n,Al}var k_;function Kb(){return k_||(k_=1,Ud.exports=Qb()),Ud.exports}var E=Kb(),jd={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function Yb(){if(L_)return xe;L_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.iterator;function I(O){return O===null||typeof O!="object"?null:(O=R&&O[R]||O["@@iterator"],typeof O=="function"?O:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,J={};function W(O,Z,re){this.props=O,this.context=Z,this.refs=J,this.updater=re||z}W.prototype.isReactComponent={},W.prototype.setState=function(O,Z){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Z,"setState")},W.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ce(){}ce.prototype=W.prototype;function ue(O,Z,re){this.props=O,this.context=Z,this.refs=J,this.updater=re||z}var ae=ue.prototype=new ce;ae.constructor=ue,F(ae,W.prototype),ae.isPureReactComponent=!0;var we=Array.isArray,ge={H:null,A:null,T:null,S:null,V:null},Re=Object.prototype.hasOwnProperty;function N(O,Z,re,ee,de,Ie){return re=Ie.ref,{$$typeof:i,type:O,key:Z,ref:re!==void 0?re:null,props:Ie}}function w(O,Z){return N(O.type,Z,void 0,void 0,void 0,O.props)}function A(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function D(O){var Z={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(re){return Z[re]})}var M=/\/+/g;function P(O,Z){return typeof O=="object"&&O!==null&&O.key!=null?D(""+O.key):Z.toString(36)}function C(){}function at(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(C,C):(O.status="pending",O.then(function(Z){O.status==="pending"&&(O.status="fulfilled",O.value=Z)},function(Z){O.status==="pending"&&(O.status="rejected",O.reason=Z)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function He(O,Z,re,ee,de){var Ie=typeof O;(Ie==="undefined"||Ie==="boolean")&&(O=null);var Te=!1;if(O===null)Te=!0;else switch(Ie){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(O.$$typeof){case i:case e:Te=!0;break;case S:return Te=O._init,He(Te(O._payload),Z,re,ee,de)}}if(Te)return de=de(O),Te=ee===""?"."+P(O,0):ee,we(de)?(re="",Te!=null&&(re=Te.replace(M,"$&/")+"/"),He(de,Z,re,"",function(Sn){return Sn})):de!=null&&(A(de)&&(de=w(de,re+(de.key==null||O&&O.key===de.key?"":(""+de.key).replace(M,"$&/")+"/")+Te)),Z.push(de)),1;Te=0;var vt=ee===""?".":ee+":";if(we(O))for(var Qe=0;Qe<O.length;Qe++)ee=O[Qe],Ie=vt+P(ee,Qe),Te+=He(ee,Z,re,Ie,de);else if(Qe=I(O),typeof Qe=="function")for(O=Qe.call(O),Qe=0;!(ee=O.next()).done;)ee=ee.value,Ie=vt+P(ee,Qe++),Te+=He(ee,Z,re,Ie,de);else if(Ie==="object"){if(typeof O.then=="function")return He(at(O),Z,re,ee,de);throw Z=String(O),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Te}function G(O,Z,re){if(O==null)return O;var ee=[],de=0;return He(O,ee,"","",function(Ie){return Z.call(re,Ie,de++)}),ee}function ne(O){if(O._status===-1){var Z=O._result;Z=Z(),Z.then(function(re){(O._status===0||O._status===-1)&&(O._status=1,O._result=re)},function(re){(O._status===0||O._status===-1)&&(O._status=2,O._result=re)}),O._status===-1&&(O._status=0,O._result=Z)}if(O._status===1)return O._result.default;throw O._result}var he=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function ze(){}return xe.Children={map:G,forEach:function(O,Z,re){G(O,function(){Z.apply(this,arguments)},re)},count:function(O){var Z=0;return G(O,function(){Z++}),Z},toArray:function(O){return G(O,function(Z){return Z})||[]},only:function(O){if(!A(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},xe.Component=W,xe.Fragment=n,xe.Profiler=o,xe.PureComponent=ue,xe.StrictMode=s,xe.Suspense=p,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ge,xe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return ge.H.useMemoCache(O)}},xe.cache=function(O){return function(){return O.apply(null,arguments)}},xe.cloneElement=function(O,Z,re){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ee=F({},O.props),de=O.key,Ie=void 0;if(Z!=null)for(Te in Z.ref!==void 0&&(Ie=void 0),Z.key!==void 0&&(de=""+Z.key),Z)!Re.call(Z,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&Z.ref===void 0||(ee[Te]=Z[Te]);var Te=arguments.length-2;if(Te===1)ee.children=re;else if(1<Te){for(var vt=Array(Te),Qe=0;Qe<Te;Qe++)vt[Qe]=arguments[Qe+2];ee.children=vt}return N(O.type,de,void 0,void 0,Ie,ee)},xe.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},xe.createElement=function(O,Z,re){var ee,de={},Ie=null;if(Z!=null)for(ee in Z.key!==void 0&&(Ie=""+Z.key),Z)Re.call(Z,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(de[ee]=Z[ee]);var Te=arguments.length-2;if(Te===1)de.children=re;else if(1<Te){for(var vt=Array(Te),Qe=0;Qe<Te;Qe++)vt[Qe]=arguments[Qe+2];de.children=vt}if(O&&O.defaultProps)for(ee in Te=O.defaultProps,Te)de[ee]===void 0&&(de[ee]=Te[ee]);return N(O,Ie,void 0,void 0,null,de)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(O){return{$$typeof:m,render:O}},xe.isValidElement=A,xe.lazy=function(O){return{$$typeof:S,_payload:{_status:-1,_result:O},_init:ne}},xe.memo=function(O,Z){return{$$typeof:y,type:O,compare:Z===void 0?null:Z}},xe.startTransition=function(O){var Z=ge.T,re={};ge.T=re;try{var ee=O(),de=ge.S;de!==null&&de(re,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(ze,he)}catch(Ie){he(Ie)}finally{ge.T=Z}},xe.unstable_useCacheRefresh=function(){return ge.H.useCacheRefresh()},xe.use=function(O){return ge.H.use(O)},xe.useActionState=function(O,Z,re){return ge.H.useActionState(O,Z,re)},xe.useCallback=function(O,Z){return ge.H.useCallback(O,Z)},xe.useContext=function(O){return ge.H.useContext(O)},xe.useDebugValue=function(){},xe.useDeferredValue=function(O,Z){return ge.H.useDeferredValue(O,Z)},xe.useEffect=function(O,Z,re){var ee=ge.H;if(typeof re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(O,Z)},xe.useId=function(){return ge.H.useId()},xe.useImperativeHandle=function(O,Z,re){return ge.H.useImperativeHandle(O,Z,re)},xe.useInsertionEffect=function(O,Z){return ge.H.useInsertionEffect(O,Z)},xe.useLayoutEffect=function(O,Z){return ge.H.useLayoutEffect(O,Z)},xe.useMemo=function(O,Z){return ge.H.useMemo(O,Z)},xe.useOptimistic=function(O,Z){return ge.H.useOptimistic(O,Z)},xe.useReducer=function(O,Z,re){return ge.H.useReducer(O,Z,re)},xe.useRef=function(O){return ge.H.useRef(O)},xe.useState=function(O){return ge.H.useState(O)},xe.useSyncExternalStore=function(O,Z,re){return ge.H.useSyncExternalStore(O,Z,re)},xe.useTransition=function(){return ge.H.useTransition()},xe.version="19.1.1",xe}var U_;function Cm(){return U_||(U_=1,jd.exports=Yb()),jd.exports}var le=Cm();const Xb=b0(le);var zd={exports:{}},Rl={},qd={exports:{}},Bd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j_;function $b(){return j_||(j_=1,(function(i){function e(G,ne){var he=G.length;G.push(ne);e:for(;0<he;){var ze=he-1>>>1,O=G[ze];if(0<o(O,ne))G[ze]=ne,G[he]=O,he=ze;else break e}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var ne=G[0],he=G.pop();if(he!==ne){G[0]=he;e:for(var ze=0,O=G.length,Z=O>>>1;ze<Z;){var re=2*(ze+1)-1,ee=G[re],de=re+1,Ie=G[de];if(0>o(ee,he))de<O&&0>o(Ie,ee)?(G[ze]=Ie,G[de]=he,ze=de):(G[ze]=ee,G[re]=he,ze=re);else if(de<O&&0>o(Ie,he))G[ze]=Ie,G[de]=he,ze=de;else break e}}return ne}function o(G,ne){var he=G.sortIndex-ne.sortIndex;return he!==0?he:G.id-ne.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var p=[],y=[],S=1,R=null,I=3,z=!1,F=!1,J=!1,W=!1,ce=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function we(G){for(var ne=n(y);ne!==null;){if(ne.callback===null)s(y);else if(ne.startTime<=G)s(y),ne.sortIndex=ne.expirationTime,e(p,ne);else break;ne=n(y)}}function ge(G){if(J=!1,we(G),!F)if(n(p)!==null)F=!0,Re||(Re=!0,P());else{var ne=n(y);ne!==null&&He(ge,ne.startTime-G)}}var Re=!1,N=-1,w=5,A=-1;function D(){return W?!0:!(i.unstable_now()-A<w)}function M(){if(W=!1,Re){var G=i.unstable_now();A=G;var ne=!0;try{e:{F=!1,J&&(J=!1,ue(N),N=-1),z=!0;var he=I;try{t:{for(we(G),R=n(p);R!==null&&!(R.expirationTime>G&&D());){var ze=R.callback;if(typeof ze=="function"){R.callback=null,I=R.priorityLevel;var O=ze(R.expirationTime<=G);if(G=i.unstable_now(),typeof O=="function"){R.callback=O,we(G),ne=!0;break t}R===n(p)&&s(p),we(G)}else s(p);R=n(p)}if(R!==null)ne=!0;else{var Z=n(y);Z!==null&&He(ge,Z.startTime-G),ne=!1}}break e}finally{R=null,I=he,z=!1}ne=void 0}}finally{ne?P():Re=!1}}}var P;if(typeof ae=="function")P=function(){ae(M)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,at=C.port2;C.port1.onmessage=M,P=function(){at.postMessage(null)}}else P=function(){ce(M,0)};function He(G,ne){N=ce(function(){G(i.unstable_now())},ne)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return I},i.unstable_next=function(G){switch(I){case 1:case 2:case 3:var ne=3;break;default:ne=I}var he=I;I=ne;try{return G()}finally{I=he}},i.unstable_requestPaint=function(){W=!0},i.unstable_runWithPriority=function(G,ne){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var he=I;I=G;try{return ne()}finally{I=he}},i.unstable_scheduleCallback=function(G,ne,he){var ze=i.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?ze+he:ze):he=ze,G){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=he+O,G={id:S++,callback:ne,priorityLevel:G,startTime:he,expirationTime:O,sortIndex:-1},he>ze?(G.sortIndex=he,e(y,G),n(p)===null&&G===n(y)&&(J?(ue(N),N=-1):J=!0,He(ge,he-ze))):(G.sortIndex=O,e(p,G),F||z||(F=!0,Re||(Re=!0,P()))),G},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(G){var ne=I;return function(){var he=I;I=ne;try{return G.apply(this,arguments)}finally{I=he}}}})(Bd)),Bd}var z_;function Zb(){return z_||(z_=1,qd.exports=$b()),qd.exports}var Hd={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function Wb(){if(q_)return Zt;q_=1;var i=Cm();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)y+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,S){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:R==null?null:""+R,children:p,containerInfo:y,implementation:S}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Zt.createPortal=function(p,y){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,S)},Zt.flushSync=function(p){var y=f.T,S=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=y,s.p=S,s.d.f()}},Zt.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Zt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Zt.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var S=y.as,R=m(S,y.crossOrigin),I=typeof y.integrity=="string"?y.integrity:void 0,z=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;S==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:R,integrity:I,fetchPriority:z}):S==="script"&&s.d.X(p,{crossOrigin:R,integrity:I,fetchPriority:z,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Zt.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var S=m(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Zt.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var S=y.as,R=m(S,y.crossOrigin);s.d.L(p,S,{crossOrigin:R,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Zt.preloadModule=function(p,y){if(typeof p=="string")if(y){var S=m(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Zt.requestFormReset=function(p){s.d.r(p)},Zt.unstable_batchedUpdates=function(p,y){return p(y)},Zt.useFormState=function(p,y,S){return f.H.useFormState(p,y,S)},Zt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Zt.version="19.1.1",Zt}var B_;function Jb(){if(B_)return Hd.exports;B_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Hd.exports=Wb(),Hd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function ew(){if(H_)return Rl;H_=1;var i=Zb(),e=Cm(),n=Jb();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function f(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,l=d;break}if(T===l){v=!0,l=h,a=d;break}T=T.sibling}if(!v){for(T=d.child;T;){if(T===a){v=!0,a=d,l=h;break}if(T===l){v=!0,l=d,a=h;break}T=T.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function y(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=y(t),r!==null)return r;t=t.sibling}return null}var S=Object.assign,R=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),ue=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),we=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function at(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case W:return"Profiler";case J:return"StrictMode";case ge:return"Suspense";case Re:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case z:return"Portal";case ae:return(t.displayName||"Context")+".Provider";case ue:return(t._context.displayName||"Context")+".Consumer";case we:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return r=t.displayName||null,r!==null?r:at(t.type)||"Memo";case w:r=t._payload,t=t._init;try{return at(t(r))}catch{}}return null}var He=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},ze=[],O=-1;function Z(t){return{current:t}}function re(t){0>O||(t.current=ze[O],ze[O]=null,O--)}function ee(t,r){O++,ze[O]=t.current,t.current=r}var de=Z(null),Ie=Z(null),Te=Z(null),vt=Z(null);function Qe(t,r){switch(ee(Te,r),ee(Ie,t),ee(de,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?u_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=u_(r),t=c_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}re(de),ee(de,t)}function Sn(){re(de),re(Ie),re(Te)}function Zn(t){t.memoizedState!==null&&ee(vt,t);var r=de.current,a=c_(r,t.type);r!==a&&(ee(Ie,t),ee(de,a))}function jn(t){Ie.current===t&&(re(de),re(Ie)),vt.current===t&&(re(vt),El._currentValue=he)}var pe=Object.prototype.hasOwnProperty,nt=i.unstable_scheduleCallback,wr=i.unstable_cancelCallback,yo=i.unstable_shouldYield,lu=i.unstable_requestPaint,bn=i.unstable_now,Lh=i.unstable_getCurrentPriorityLevel,_o=i.unstable_ImmediatePriority,Xs=i.unstable_UserBlockingPriority,es=i.unstable_NormalPriority,Uh=i.unstable_LowPriority,$s=i.unstable_IdlePriority,vo=i.log,uu=i.unstable_setDisableYieldValue,ft=null,Ke=null;function fn(t){if(typeof vo=="function"&&uu(t),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(ft,t)}catch{}}var Xt=Math.clz32?Math.clz32:ts,cu=Math.log,jh=Math.LN2;function ts(t){return t>>>=0,t===0?32:31-(cu(t)/jh|0)|0}var ns=256,rs=4194304;function zn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Zs(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=zn(l):(v&=T,v!==0?h=zn(v):a||(a=T&~t,a!==0&&(h=zn(a))))):(T=l&~d,T!==0?h=zn(T):v!==0?h=zn(v):a||(a=l&~t,a!==0&&(h=zn(a)))),h===0?0:r!==0&&r!==h&&(r&d)===0&&(d=h&-h,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:h}function is(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Eo(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function To(){var t=ns;return ns<<=1,(ns&4194048)===0&&(ns=256),t}function So(){var t=rs;return rs<<=1,(rs&62914560)===0&&(rs=4194304),t}function Ar(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Rr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function bo(t,r,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,x=t.expirationTimes,j=t.hiddenUpdates;for(a=v&~a;0<a;){var Q=31-Xt(a),X=1<<Q;T[Q]=0,x[Q]=-1;var q=j[Q];if(q!==null)for(j[Q]=null,Q=0;Q<q.length;Q++){var B=q[Q];B!==null&&(B.lane&=-536870913)}a&=~X}l!==0&&Wn(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~r))}function Wn(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Xt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function wo(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Xt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function li(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ws(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ui(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:C_(t.type))}function hu(t,r){var a=ne.p;try{return ne.p=t,r()}finally{ne.p=a}}var lt=Math.random().toString(36).slice(2),It="__reactFiber$"+lt,Et="__reactProps$"+lt,wn="__reactContainer$"+lt,Ao="__reactEvents$"+lt,zh="__reactListeners$"+lt,ci="__reactHandles$"+lt,fu="__reactResources$"+lt,ss="__reactMarker$"+lt;function hi(t){delete t[It],delete t[Et],delete t[Ao],delete t[zh],delete t[ci]}function Ir(t){var r=t[It];if(r)return r;for(var a=t.parentNode;a;){if(r=a[wn]||a[It]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=m_(t);t!==null;){if(a=t[It])return a;t=m_(t)}return r}t=a,a=t.parentNode}return null}function Jn(t){if(t=t[It]||t[wn]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function er(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function nn(t){var r=t[fu];return r||(r=t[fu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function gt(t){t[ss]=!0}var Ro=new Set,Js={};function qn(t,r){xr(t,r),xr(t+"Capture",r)}function xr(t,r){for(Js[t]=r,t=0;t<r.length;t++)Ro.add(r[t])}var du=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mu={},as={};function gu(t){return pe.call(as,t)?!0:pe.call(mu,t)?!1:du.test(t)?as[t]=!0:(mu[t]=!0,!1)}function fi(t,r,a){if(gu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function tr(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function zt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var os,pu;function Cr(t){if(os===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);os=r&&r[1]||"",pu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+os+t+pu}var ea=!1;function ta(t,r){if(!t||ea)return"";ea=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(B){var q=B}Reflect.construct(t,[],X)}else{try{X.call()}catch(B){q=B}t.call(X.prototype)}}else{try{throw Error()}catch(B){q=B}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(B){if(B&&q&&typeof B.stack=="string")return[B.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],T=d[1];if(v&&T){var x=v.split(`
`),j=T.split(`
`);for(h=l=0;l<x.length&&!x[l].includes("DetermineComponentFrameRoot");)l++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(l===x.length||h===j.length)for(l=x.length-1,h=j.length-1;1<=l&&0<=h&&x[l]!==j[h];)h--;for(;1<=l&&0<=h;l--,h--)if(x[l]!==j[h]){if(l!==1||h!==1)do if(l--,h--,0>h||x[l]!==j[h]){var Q=`
`+x[l].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=l&&0<=h);break}}}finally{ea=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Cr(a):""}function Io(t){switch(t.tag){case 26:case 27:case 5:return Cr(t.type);case 16:return Cr("Lazy");case 13:return Cr("Suspense");case 19:return Cr("SuspenseList");case 0:case 15:return ta(t.type,!1);case 11:return ta(t.type.render,!1);case 1:return ta(t.type,!0);case 31:return Cr("Activity");default:return""}}function na(t){try{var r="";do r+=Io(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function rn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function qh(t){var r=xo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function ra(t){t._valueTracker||(t._valueTracker=qh(t))}function Co(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=xo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function ls(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Bh=/[\n"\\]/g;function Tt(t){return t.replace(Bh,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function dn(t,r,a,l,h,d,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),r!=null?v==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+rn(r)):t.value!==""+rn(r)&&(t.value=""+rn(r)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),r!=null?di(t,v,rn(r)):a!=null?di(t,v,rn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+rn(T):t.removeAttribute("name")}function us(t,r,a,l,h,d,v,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null))return;a=a!=null?""+rn(a):"",r=r!=null?""+rn(r):a,T||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function di(t,r,a){r==="number"&&ls(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Nr(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+rn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Ze(t,r,a){if(r!=null&&(r=""+rn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+rn(a):""}function cs(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(He(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=rn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function An(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var hs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yu(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||hs.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function No(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&yu(t,h,l)}else for(var d in r)r.hasOwnProperty(d)&&yu(t,d,r[d])}function Do(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ia(t){return Gh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Dr=null;function Rn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Or=null,Vr=null;function Oo(t){var r=Jn(t);if(r&&(t=r.stateNode)){var a=t[Et]||null;e:switch(t=r.stateNode,r.type){case"input":if(dn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Tt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[Et]||null;if(!h)throw Error(s(90));dn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Co(l)}break e;case"textarea":Ze(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Nr(t,!!a.multiple,r,!1)}}}var nr=!1;function _u(t,r,a){if(nr)return t(r,a);nr=!0;try{var l=t(r);return l}finally{if(nr=!1,(Or!==null||Vr!==null)&&(hc(),Or&&(r=Or,t=Vr,Vr=Or=null,Oo(r),t)))for(r=0;r<t.length;r++)Oo(t[r])}}function fs(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Et]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),In=!1;if(Bn)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){In=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{In=!1}var rr=null,mi=null,Mr=null;function Vo(){if(Mr)return Mr;var t,r=mi,a=r.length,l,h="value"in rr?rr.value:rr.textContent,d=h.length;for(t=0;t<a&&r[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&r[a-l]===h[d-l];l++);return Mr=h.slice(t,1<l?1-l:void 0)}function ir(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function sr(){return!0}function Mo(){return!1}function Mt(t){function r(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?sr:Mo,this.isPropagationStopped=Mo,this}return S(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),r}var Ge={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sa=Mt(Ge),ms=S({},Ge,{view:0,detail:0}),vu=Mt(ms),aa,oa,ar,gs=S({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_s,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ar&&(ar&&t.type==="mousemove"?(aa=t.screenX-ar.screenX,oa=t.screenY-ar.screenY):oa=aa=0,ar=t),aa)},movementY:function(t){return"movementY"in t?t.movementY:oa}}),xn=Mt(gs),Eu=S({},gs,{dataTransfer:0}),Fh=Mt(Eu),ps=S({},ms,{relatedTarget:0}),la=Mt(ps),Po=S({},Ge,{animationName:0,elapsedTime:0,pseudoElement:0}),ua=Mt(Po),Tu=S({},Ge,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ca=Mt(Tu),Qh=S({},Ge,{data:0}),ko=Mt(Qh),ys={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Su={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lo(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=bu[t])?!!r[t]:!1}function _s(){return Lo}var wu=S({},ms,{key:function(t){if(t.key){var r=ys[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ir(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Su[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_s,charCode:function(t){return t.type==="keypress"?ir(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ir(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ha=Mt(wu),Au=S({},gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uo=Mt(Au),Pr=S({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_s}),Ru=Mt(Pr),Iu=S({},Ge,{propertyName:0,elapsedTime:0,pseudoElement:0}),xu=Mt(Iu),Cu=S({},gs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fa=Mt(Cu),sn=S({},Ge,{newState:0,oldState:0}),Nu=Mt(sn),Du=[9,13,27,32],or=Bn&&"CompositionEvent"in window,c=null;Bn&&"documentMode"in document&&(c=document.documentMode);var g=Bn&&"TextEvent"in window&&!c,_=Bn&&(!or||c&&8<c&&11>=c),b=" ",L=!1;function H(t,r){switch(t){case"keyup":return Du.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function te(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ke=!1;function xt(t,r){switch(t){case"compositionend":return te(r);case"keypress":return r.which!==32?null:(L=!0,b);case"textInput":return t=r.data,t===b&&L?null:t;default:return null}}function Le(t,r){if(ke)return t==="compositionend"||!or&&H(t,r)?(t=Vo(),Mr=mi=rr=null,ke=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _&&r.locale!=="ko"?null:r.data;default:return null}}var Pt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ct(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Pt[t.type]:r==="textarea"}function kr(t,r,a,l){Or?Vr?Vr.push(l):Vr=[l]:Or=l,r=yc(r,"onChange"),0<r.length&&(a=new sa("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var qt=null,lr=null;function jo(t){i_(t,0)}function Ou(t){var r=er(t);if(Co(r))return t}function Ag(t,r){if(t==="change")return r}var Rg=!1;if(Bn){var Kh;if(Bn){var Yh="oninput"in document;if(!Yh){var Ig=document.createElement("div");Ig.setAttribute("oninput","return;"),Yh=typeof Ig.oninput=="function"}Kh=Yh}else Kh=!1;Rg=Kh&&(!document.documentMode||9<document.documentMode)}function xg(){qt&&(qt.detachEvent("onpropertychange",Cg),lr=qt=null)}function Cg(t){if(t.propertyName==="value"&&Ou(lr)){var r=[];kr(r,lr,t,Rn(t)),_u(jo,r)}}function SS(t,r,a){t==="focusin"?(xg(),qt=r,lr=a,qt.attachEvent("onpropertychange",Cg)):t==="focusout"&&xg()}function bS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ou(lr)}function wS(t,r){if(t==="click")return Ou(r)}function AS(t,r){if(t==="input"||t==="change")return Ou(r)}function RS(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var mn=typeof Object.is=="function"?Object.is:RS;function zo(t,r){if(mn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!pe.call(r,h)||!mn(t[h],r[h]))return!1}return!0}function Ng(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Dg(t,r){var a=Ng(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ng(a)}}function Og(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Og(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Vg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=ls(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=ls(t.document)}return r}function Xh(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var IS=Bn&&"documentMode"in document&&11>=document.documentMode,da=null,$h=null,qo=null,Zh=!1;function Mg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Zh||da==null||da!==ls(l)||(l=da,"selectionStart"in l&&Xh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),qo&&zo(qo,l)||(qo=l,l=yc($h,"onSelect"),0<l.length&&(r=new sa("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=da)))}function vs(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var ma={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionrun:vs("Transition","TransitionRun"),transitionstart:vs("Transition","TransitionStart"),transitioncancel:vs("Transition","TransitionCancel"),transitionend:vs("Transition","TransitionEnd")},Wh={},Pg={};Bn&&(Pg=document.createElement("div").style,"AnimationEvent"in window||(delete ma.animationend.animation,delete ma.animationiteration.animation,delete ma.animationstart.animation),"TransitionEvent"in window||delete ma.transitionend.transition);function Es(t){if(Wh[t])return Wh[t];if(!ma[t])return t;var r=ma[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Pg)return Wh[t]=r[a];return t}var kg=Es("animationend"),Lg=Es("animationiteration"),Ug=Es("animationstart"),xS=Es("transitionrun"),CS=Es("transitionstart"),NS=Es("transitioncancel"),jg=Es("transitionend"),zg=new Map,Jh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jh.push("scrollEnd");function Hn(t,r){zg.set(t,r),qn(r,[t])}var qg=new WeakMap;function Cn(t,r){if(typeof t=="object"&&t!==null){var a=qg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:na(r)},qg.set(t,r),r)}return{value:t,source:r,stack:na(r)}}var Nn=[],ga=0,ef=0;function Vu(){for(var t=ga,r=ef=ga=0;r<t;){var a=Nn[r];Nn[r++]=null;var l=Nn[r];Nn[r++]=null;var h=Nn[r];Nn[r++]=null;var d=Nn[r];if(Nn[r++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&Bg(a,h,d)}}function Mu(t,r,a,l){Nn[ga++]=t,Nn[ga++]=r,Nn[ga++]=a,Nn[ga++]=l,ef|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function tf(t,r,a,l){return Mu(t,r,a,l),Pu(t)}function pa(t,r){return Mu(t,null,null,r),Pu(t)}function Bg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&r!==null&&(h=31-Xt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),d):null}function Pu(t){if(50<fl)throw fl=0,ld=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var ya={};function DS(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,r,a,l){return new DS(t,r,a,l)}function nf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Lr(t,r){var a=t.alternate;return a===null?(a=gn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Hg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function ku(t,r,a,l,h,d){var v=0;if(l=t,typeof t=="function")nf(t)&&(v=1);else if(typeof t=="string")v=Vb(t,a,de.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=gn(31,a,r,h),t.elementType=A,t.lanes=d,t;case F:return Ts(a.children,h,d,r);case J:v=8,h|=24;break;case W:return t=gn(12,a,r,h|2),t.elementType=W,t.lanes=d,t;case ge:return t=gn(13,a,r,h),t.elementType=ge,t.lanes=d,t;case Re:return t=gn(19,a,r,h),t.elementType=Re,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ce:case ae:v=10;break e;case ue:v=9;break e;case we:v=11;break e;case N:v=14;break e;case w:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=gn(v,a,r,h),r.elementType=t,r.type=l,r.lanes=d,r}function Ts(t,r,a,l){return t=gn(7,t,l,r),t.lanes=a,t}function rf(t,r,a){return t=gn(6,t,null,r),t.lanes=a,t}function sf(t,r,a){return r=gn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var _a=[],va=0,Lu=null,Uu=0,Dn=[],On=0,Ss=null,Ur=1,jr="";function bs(t,r){_a[va++]=Uu,_a[va++]=Lu,Lu=t,Uu=r}function Gg(t,r,a){Dn[On++]=Ur,Dn[On++]=jr,Dn[On++]=Ss,Ss=t;var l=Ur;t=jr;var h=32-Xt(l)-1;l&=~(1<<h),a+=1;var d=32-Xt(r)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Ur=1<<32-Xt(r)+h|a<<h|l,jr=d+t}else Ur=1<<d|a<<h|l,jr=t}function af(t){t.return!==null&&(bs(t,1),Gg(t,1,0))}function of(t){for(;t===Lu;)Lu=_a[--va],_a[va]=null,Uu=_a[--va],_a[va]=null;for(;t===Ss;)Ss=Dn[--On],Dn[On]=null,jr=Dn[--On],Dn[On]=null,Ur=Dn[--On],Dn[On]=null}var an=null,dt=null,Be=!1,ws=null,ur=!1,lf=Error(s(519));function As(t){var r=Error(s(418,""));throw Go(Cn(r,t)),lf}function Fg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[It]=t,r[Et]=l,a){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(a=0;a<ml.length;a++)Oe(ml[a],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Oe("invalid",r),us(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ra(r);break;case"select":Oe("invalid",r);break;case"textarea":Oe("invalid",r),cs(r,l.value,l.defaultValue,l.children),ra(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||l_(r.textContent,a)?(l.popover!=null&&(Oe("beforetoggle",r),Oe("toggle",r)),l.onScroll!=null&&Oe("scroll",r),l.onScrollEnd!=null&&Oe("scrollend",r),l.onClick!=null&&(r.onclick=_c),r=!0):r=!1,r||As(t)}function Qg(t){for(an=t.return;an;)switch(an.tag){case 5:case 13:ur=!1;return;case 27:case 3:ur=!0;return;default:an=an.return}}function Bo(t){if(t!==an)return!1;if(!Be)return Qg(t),Be=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||wd(t.type,t.memoizedProps)),a=!a),a&&dt&&As(t),Qg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){dt=Fn(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}dt=null}}else r===27?(r=dt,Ni(t.type)?(t=xd,xd=null,dt=t):dt=r):dt=an?Fn(t.stateNode.nextSibling):null;return!0}function Ho(){dt=an=null,Be=!1}function Kg(){var t=ws;return t!==null&&(un===null?un=t:un.push.apply(un,t),ws=null),t}function Go(t){ws===null?ws=[t]:ws.push(t)}var uf=Z(null),Rs=null,zr=null;function gi(t,r,a){ee(uf,r._currentValue),r._currentValue=a}function qr(t){t._currentValue=uf.current,re(uf)}function cf(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function hf(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var x=0;x<r.length;x++)if(T.context===r[x]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),cf(d.return,a,t),l||(v=null);break e}d=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),cf(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Fo(t,r,a,l){t=null;for(var h=r,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var T=h.type;mn(h.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(h===vt.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(El):t=[El])}h=h.return}t!==null&&hf(r,t,a,l),r.flags|=262144}function ju(t){for(t=t.firstContext;t!==null;){if(!mn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Is(t){Rs=t,zr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function $t(t){return Yg(Rs,t)}function zu(t,r){return Rs===null&&Is(t),Yg(t,r)}function Yg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},zr===null){if(t===null)throw Error(s(308));zr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else zr=zr.next=r;return a}var OS=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},VS=i.unstable_scheduleCallback,MS=i.unstable_NormalPriority,Nt={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ff(){return{controller:new OS,data:new Map,refCount:0}}function Qo(t){t.refCount--,t.refCount===0&&VS(MS,function(){t.controller.abort()})}var Ko=null,df=0,Ea=0,Ta=null;function PS(t,r){if(Ko===null){var a=Ko=[];df=0,Ea=gd(),Ta={status:"pending",value:void 0,then:function(l){a.push(l)}}}return df++,r.then(Xg,Xg),r}function Xg(){if(--df===0&&Ko!==null){Ta!==null&&(Ta.status="fulfilled");var t=Ko;Ko=null,Ea=0,Ta=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function kS(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var $g=G.S;G.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&PS(t,r),$g!==null&&$g(t,r)};var xs=Z(null);function mf(){var t=xs.current;return t!==null?t:it.pooledCache}function qu(t,r){r===null?ee(xs,xs.current):ee(xs,r.pool)}function Zg(){var t=mf();return t===null?null:{parent:Nt._currentValue,pool:t}}var Yo=Error(s(460)),Wg=Error(s(474)),Bu=Error(s(542)),gf={then:function(){}};function Jg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Hu(){}function ep(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(Hu,Hu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,np(t),t;default:if(typeof r.status=="string")r.then(Hu,Hu);else{if(t=it,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,np(t),t}throw Xo=r,Yo}}var Xo=null;function tp(){if(Xo===null)throw Error(s(459));var t=Xo;return Xo=null,t}function np(t){if(t===Yo||t===Bu)throw Error(s(483))}var pi=!1;function pf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function yi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function _i(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ye&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=Pu(t),Bg(t,null,a),r}return Mu(t,l,r,a),Pu(t)}function $o(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,wo(t,a)}}function _f(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=r:d=d.next=r}else h=d=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var vf=!1;function Zo(){if(vf){var t=Ta;if(t!==null)throw t}}function Wo(t,r,a,l){vf=!1;var h=t.updateQueue;pi=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var x=T,j=x.next;x.next=null,v===null?d=j:v.next=j,v=x;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==v&&(T===null?Q.firstBaseUpdate=j:T.next=j,Q.lastBaseUpdate=x))}if(d!==null){var X=h.baseState;v=0,Q=j=x=null,T=d;do{var q=T.lane&-536870913,B=q!==T.lane;if(B?(Ue&q)===q:(l&q)===q){q!==0&&q===Ea&&(vf=!0),Q!==null&&(Q=Q.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Se=t,ye=T;q=r;var et=a;switch(ye.tag){case 1:if(Se=ye.payload,typeof Se=="function"){X=Se.call(et,X,q);break e}X=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=ye.payload,q=typeof Se=="function"?Se.call(et,X,q):Se,q==null)break e;X=S({},X,q);break e;case 2:pi=!0}}q=T.callback,q!==null&&(t.flags|=64,B&&(t.flags|=8192),B=h.callbacks,B===null?h.callbacks=[q]:B.push(q))}else B={lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(j=Q=B,x=X):Q=Q.next=B,v|=q;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;B=T,T=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);Q===null&&(x=X),h.baseState=x,h.firstBaseUpdate=j,h.lastBaseUpdate=Q,d===null&&(h.shared.lanes=0),Ri|=v,t.lanes=v,t.memoizedState=X}}function rp(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function ip(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)rp(a[t],r)}var Sa=Z(null),Gu=Z(0);function sp(t,r){t=Yr,ee(Gu,t),ee(Sa,r),Yr=t|r.baseLanes}function Ef(){ee(Gu,Yr),ee(Sa,Sa.current)}function Tf(){Yr=Gu.current,re(Sa),re(Gu)}var vi=0,Ce=null,We=null,St=null,Fu=!1,ba=!1,Cs=!1,Qu=0,Jo=0,wa=null,LS=0;function pt(){throw Error(s(321))}function Sf(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!mn(t[a],r[a]))return!1;return!0}function bf(t,r,a,l,h,d){return vi=d,Ce=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,G.H=t===null||t.memoizedState===null?Bp:Hp,Cs=!1,d=a(l,h),Cs=!1,ba&&(d=op(r,a,l,h)),ap(t),d}function ap(t){G.H=Wu;var r=We!==null&&We.next!==null;if(vi=0,St=We=Ce=null,Fu=!1,Jo=0,wa=null,r)throw Error(s(300));t===null||kt||(t=t.dependencies,t!==null&&ju(t)&&(kt=!0))}function op(t,r,a,l){Ce=t;var h=0;do{if(ba&&(wa=null),Jo=0,ba=!1,25<=h)throw Error(s(301));if(h+=1,St=We=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}G.H=GS,d=r(a,l)}while(ba);return d}function US(){var t=G.H,r=t.useState()[0];return r=typeof r.then=="function"?el(r):r,t=t.useState()[0],(We!==null?We.memoizedState:null)!==t&&(Ce.flags|=1024),r}function wf(){var t=Qu!==0;return Qu=0,t}function Af(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Rf(t){if(Fu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Fu=!1}vi=0,St=We=Ce=null,ba=!1,Jo=Qu=0,wa=null}function on(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Ce.memoizedState=St=t:St=St.next=t,St}function bt(){if(We===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var r=St===null?Ce.memoizedState:St.next;if(r!==null)St=r,We=t;else{if(t===null)throw Ce.alternate===null?Error(s(467)):Error(s(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},St===null?Ce.memoizedState=St=t:St=St.next=t}return St}function If(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function el(t){var r=Jo;return Jo+=1,wa===null&&(wa=[]),t=ep(wa,t,r),r=Ce,(St===null?r.memoizedState:St.next)===null&&(r=r.alternate,G.H=r===null||r.memoizedState===null?Bp:Hp),t}function Ku(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return el(t);if(t.$$typeof===ae)return $t(t)}throw Error(s(438,String(t)))}function xf(t){var r=null,a=Ce.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ce.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=If(),Ce.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=D;return r.index++,a}function Br(t,r){return typeof r=="function"?r(t):r}function Yu(t){var r=bt();return Cf(r,We,t)}function Cf(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}r.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{r=h.next;var T=v=null,x=null,j=r,Q=!1;do{var X=j.lane&-536870913;if(X!==j.lane?(Ue&X)===X:(vi&X)===X){var q=j.revertLane;if(q===0)x!==null&&(x=x.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),X===Ea&&(Q=!0);else if((vi&q)===q){j=j.next,q===Ea&&(Q=!0);continue}else X={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},x===null?(T=x=X,v=d):x=x.next=X,Ce.lanes|=q,Ri|=q;X=j.action,Cs&&a(d,X),d=j.hasEagerState?j.eagerState:a(d,X)}else q={lane:X,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},x===null?(T=x=q,v=d):x=x.next=q,Ce.lanes|=X,Ri|=X;j=j.next}while(j!==null&&j!==r);if(x===null?v=d:x.next=T,!mn(d,t.memoizedState)&&(kt=!0,Q&&(a=Ta,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=x,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Nf(t){var r=bt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=r.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);mn(d,r.memoizedState)||(kt=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function lp(t,r,a){var l=Ce,h=bt(),d=Be;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var v=!mn((We||h).memoizedState,a);v&&(h.memoizedState=a,kt=!0),h=h.queue;var T=hp.bind(null,l,h,t);if(tl(2048,8,T,[t]),h.getSnapshot!==r||v||St!==null&&St.memoizedState.tag&1){if(l.flags|=2048,Aa(9,Xu(),cp.bind(null,l,h,a,r),null),it===null)throw Error(s(349));d||(vi&124)!==0||up(l,r,a)}return a}function up(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Ce.updateQueue,r===null?(r=If(),Ce.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function cp(t,r,a,l){r.value=a,r.getSnapshot=l,fp(r)&&dp(t)}function hp(t,r,a){return a(function(){fp(r)&&dp(t)})}function fp(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!mn(t,a)}catch{return!0}}function dp(t){var r=pa(t,2);r!==null&&En(r,t,2)}function Df(t){var r=on();if(typeof t=="function"){var a=t;if(t=a(),Cs){fn(!0);try{a()}finally{fn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:t},r}function mp(t,r,a,l){return t.baseState=a,Cf(t,We,typeof l=="function"?l:Br)}function jS(t,r,a,l,h){if(Zu(t))throw Error(s(485));if(t=r.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};G.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,gp(r,d)):(d.next=a.next,r.pending=a.next=d)}}function gp(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var d=G.T,v={};G.T=v;try{var T=a(h,l),x=G.S;x!==null&&x(v,T),pp(t,r,T)}catch(j){Of(t,r,j)}finally{G.T=d}}else try{d=a(h,l),pp(t,r,d)}catch(j){Of(t,r,j)}}function pp(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){yp(t,r,l)},function(l){return Of(t,r,l)}):yp(t,r,a)}function yp(t,r,a){r.status="fulfilled",r.value=a,_p(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,gp(t,a)))}function Of(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,_p(r),r=r.next;while(r!==l)}t.action=null}function _p(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function vp(t,r){return r}function Ep(t,r){if(Be){var a=it.formState;if(a!==null){e:{var l=Ce;if(Be){if(dt){t:{for(var h=dt,d=ur;h.nodeType!==8;){if(!d){h=null;break t}if(h=Fn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){dt=Fn(h.nextSibling),l=h.data==="F!";break e}}As(l)}l=!1}l&&(r=a[0])}}return a=on(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vp,lastRenderedState:r},a.queue=l,a=jp.bind(null,Ce,l),l.dispatch=a,l=Df(!1),d=Lf.bind(null,Ce,!1,l.queue),l=on(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=jS.bind(null,Ce,h,d,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function Tp(t){var r=bt();return Sp(r,We,t)}function Sp(t,r,a){if(r=Cf(t,r,vp)[0],t=Yu(Br)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=el(r)}catch(v){throw v===Yo?Bu:v}else l=r;r=bt();var h=r.queue,d=h.dispatch;return a!==r.memoizedState&&(Ce.flags|=2048,Aa(9,Xu(),zS.bind(null,h,a),null)),[l,d,t]}function zS(t,r){t.action=r}function bp(t){var r=bt(),a=We;if(a!==null)return Sp(r,a,t);bt(),r=r.memoizedState,a=bt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Aa(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Ce.updateQueue,r===null&&(r=If(),Ce.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function Xu(){return{destroy:void 0,resource:void 0}}function wp(){return bt().memoizedState}function $u(t,r,a,l){var h=on();l=l===void 0?null:l,Ce.flags|=t,h.memoizedState=Aa(1|r,Xu(),a,l)}function tl(t,r,a,l){var h=bt();l=l===void 0?null:l;var d=h.memoizedState.inst;We!==null&&l!==null&&Sf(l,We.memoizedState.deps)?h.memoizedState=Aa(r,d,a,l):(Ce.flags|=t,h.memoizedState=Aa(1|r,d,a,l))}function Ap(t,r){$u(8390656,8,t,r)}function Rp(t,r){tl(2048,8,t,r)}function Ip(t,r){return tl(4,2,t,r)}function xp(t,r){return tl(4,4,t,r)}function Cp(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Np(t,r,a){a=a!=null?a.concat([t]):null,tl(4,4,Cp.bind(null,r,t),a)}function Vf(){}function Dp(t,r){var a=bt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Sf(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Op(t,r){var a=bt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Sf(r,l[1]))return l[0];if(l=t(),Cs){fn(!0);try{t()}finally{fn(!1)}}return a.memoizedState=[l,r],l}function Mf(t,r,a){return a===void 0||(vi&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=Py(),Ce.lanes|=t,Ri|=t,a)}function Vp(t,r,a,l){return mn(a,r)?a:Sa.current!==null?(t=Mf(t,a,l),mn(t,r)||(kt=!0),t):(vi&42)===0?(kt=!0,t.memoizedState=a):(t=Py(),Ce.lanes|=t,Ri|=t,r)}function Mp(t,r,a,l,h){var d=ne.p;ne.p=d!==0&&8>d?d:8;var v=G.T,T={};G.T=T,Lf(t,!1,r,a);try{var x=h(),j=G.S;if(j!==null&&j(T,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var Q=kS(x,l);nl(t,r,Q,vn(t))}else nl(t,r,l,vn(t))}catch(X){nl(t,r,{then:function(){},status:"rejected",reason:X},vn())}finally{ne.p=d,G.T=v}}function qS(){}function Pf(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=Pp(t).queue;Mp(t,h,r,he,a===null?qS:function(){return kp(t),a(l)})}function Pp(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:he},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function kp(t){var r=Pp(t).next.queue;nl(t,r,{},vn())}function kf(){return $t(El)}function Lp(){return bt().memoizedState}function Up(){return bt().memoizedState}function BS(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=vn();t=yi(a);var l=_i(r,t,a);l!==null&&(En(l,r,a),$o(l,r,a)),r={cache:ff()},t.payload=r;return}r=r.return}}function HS(t,r,a){var l=vn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Zu(t)?zp(r,a):(a=tf(t,r,a,l),a!==null&&(En(a,t,l),qp(a,r,l)))}function jp(t,r,a){var l=vn();nl(t,r,a,l)}function nl(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zu(t))zp(r,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var v=r.lastRenderedState,T=d(v,a);if(h.hasEagerState=!0,h.eagerState=T,mn(T,v))return Mu(t,r,h,0),it===null&&Vu(),!1}catch{}finally{}if(a=tf(t,r,h,l),a!==null)return En(a,t,l),qp(a,r,l),!0}return!1}function Lf(t,r,a,l){if(l={lane:2,revertLane:gd(),action:l,hasEagerState:!1,eagerState:null,next:null},Zu(t)){if(r)throw Error(s(479))}else r=tf(t,a,l,2),r!==null&&En(r,t,2)}function Zu(t){var r=t.alternate;return t===Ce||r!==null&&r===Ce}function zp(t,r){ba=Fu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function qp(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,wo(t,a)}}var Wu={readContext:$t,use:Ku,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt},Bp={readContext:$t,use:Ku,useCallback:function(t,r){return on().memoizedState=[t,r===void 0?null:r],t},useContext:$t,useEffect:Ap,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,$u(4194308,4,Cp.bind(null,r,t),a)},useLayoutEffect:function(t,r){return $u(4194308,4,t,r)},useInsertionEffect:function(t,r){$u(4,2,t,r)},useMemo:function(t,r){var a=on();r=r===void 0?null:r;var l=t();if(Cs){fn(!0);try{t()}finally{fn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=on();if(a!==void 0){var h=a(r);if(Cs){fn(!0);try{a(r)}finally{fn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=HS.bind(null,Ce,t),[l.memoizedState,t]},useRef:function(t){var r=on();return t={current:t},r.memoizedState=t},useState:function(t){t=Df(t);var r=t.queue,a=jp.bind(null,Ce,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:Vf,useDeferredValue:function(t,r){var a=on();return Mf(a,t,r)},useTransition:function(){var t=Df(!1);return t=Mp.bind(null,Ce,t.queue,!0,!1),on().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Ce,h=on();if(Be){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),it===null)throw Error(s(349));(Ue&124)!==0||up(l,r,a)}h.memoizedState=a;var d={value:a,getSnapshot:r};return h.queue=d,Ap(hp.bind(null,l,d,t),[t]),l.flags|=2048,Aa(9,Xu(),cp.bind(null,l,d,a,r),null),a},useId:function(){var t=on(),r=it.identifierPrefix;if(Be){var a=jr,l=Ur;a=(l&~(1<<32-Xt(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=Qu++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=LS++,r="«"+r+"r"+a.toString(32)+"»";return t.memoizedState=r},useHostTransitionStatus:kf,useFormState:Ep,useActionState:Ep,useOptimistic:function(t){var r=on();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Lf.bind(null,Ce,!0,a),a.dispatch=r,[t,r]},useMemoCache:xf,useCacheRefresh:function(){return on().memoizedState=BS.bind(null,Ce)}},Hp={readContext:$t,use:Ku,useCallback:Dp,useContext:$t,useEffect:Rp,useImperativeHandle:Np,useInsertionEffect:Ip,useLayoutEffect:xp,useMemo:Op,useReducer:Yu,useRef:wp,useState:function(){return Yu(Br)},useDebugValue:Vf,useDeferredValue:function(t,r){var a=bt();return Vp(a,We.memoizedState,t,r)},useTransition:function(){var t=Yu(Br)[0],r=bt().memoizedState;return[typeof t=="boolean"?t:el(t),r]},useSyncExternalStore:lp,useId:Lp,useHostTransitionStatus:kf,useFormState:Tp,useActionState:Tp,useOptimistic:function(t,r){var a=bt();return mp(a,We,t,r)},useMemoCache:xf,useCacheRefresh:Up},GS={readContext:$t,use:Ku,useCallback:Dp,useContext:$t,useEffect:Rp,useImperativeHandle:Np,useInsertionEffect:Ip,useLayoutEffect:xp,useMemo:Op,useReducer:Nf,useRef:wp,useState:function(){return Nf(Br)},useDebugValue:Vf,useDeferredValue:function(t,r){var a=bt();return We===null?Mf(a,t,r):Vp(a,We.memoizedState,t,r)},useTransition:function(){var t=Nf(Br)[0],r=bt().memoizedState;return[typeof t=="boolean"?t:el(t),r]},useSyncExternalStore:lp,useId:Lp,useHostTransitionStatus:kf,useFormState:bp,useActionState:bp,useOptimistic:function(t,r){var a=bt();return We!==null?mp(a,We,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:xf,useCacheRefresh:Up},Ra=null,rl=0;function Ju(t){var r=rl;return rl+=1,Ra===null&&(Ra=[]),ep(Ra,t,r)}function il(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function ec(t,r){throw r.$$typeof===R?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Gp(t){var r=t._init;return r(t._payload)}function Fp(t){function r(k,V){if(t){var U=k.deletions;U===null?(k.deletions=[V],k.flags|=16):U.push(V)}}function a(k,V){if(!t)return null;for(;V!==null;)r(k,V),V=V.sibling;return null}function l(k){for(var V=new Map;k!==null;)k.key!==null?V.set(k.key,k):V.set(k.index,k),k=k.sibling;return V}function h(k,V){return k=Lr(k,V),k.index=0,k.sibling=null,k}function d(k,V,U){return k.index=U,t?(U=k.alternate,U!==null?(U=U.index,U<V?(k.flags|=67108866,V):U):(k.flags|=67108866,V)):(k.flags|=1048576,V)}function v(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function T(k,V,U,K){return V===null||V.tag!==6?(V=rf(U,k.mode,K),V.return=k,V):(V=h(V,U),V.return=k,V)}function x(k,V,U,K){var oe=U.type;return oe===F?Q(k,V,U.props.children,K,U.key):V!==null&&(V.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===w&&Gp(oe)===V.type)?(V=h(V,U.props),il(V,U),V.return=k,V):(V=ku(U.type,U.key,U.props,null,k.mode,K),il(V,U),V.return=k,V)}function j(k,V,U,K){return V===null||V.tag!==4||V.stateNode.containerInfo!==U.containerInfo||V.stateNode.implementation!==U.implementation?(V=sf(U,k.mode,K),V.return=k,V):(V=h(V,U.children||[]),V.return=k,V)}function Q(k,V,U,K,oe){return V===null||V.tag!==7?(V=Ts(U,k.mode,K,oe),V.return=k,V):(V=h(V,U),V.return=k,V)}function X(k,V,U){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=rf(""+V,k.mode,U),V.return=k,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case I:return U=ku(V.type,V.key,V.props,null,k.mode,U),il(U,V),U.return=k,U;case z:return V=sf(V,k.mode,U),V.return=k,V;case w:var K=V._init;return V=K(V._payload),X(k,V,U)}if(He(V)||P(V))return V=Ts(V,k.mode,U,null),V.return=k,V;if(typeof V.then=="function")return X(k,Ju(V),U);if(V.$$typeof===ae)return X(k,zu(k,V),U);ec(k,V)}return null}function q(k,V,U,K){var oe=V!==null?V.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return oe!==null?null:T(k,V,""+U,K);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case I:return U.key===oe?x(k,V,U,K):null;case z:return U.key===oe?j(k,V,U,K):null;case w:return oe=U._init,U=oe(U._payload),q(k,V,U,K)}if(He(U)||P(U))return oe!==null?null:Q(k,V,U,K,null);if(typeof U.then=="function")return q(k,V,Ju(U),K);if(U.$$typeof===ae)return q(k,V,zu(k,U),K);ec(k,U)}return null}function B(k,V,U,K,oe){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return k=k.get(U)||null,T(V,k,""+K,oe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case I:return k=k.get(K.key===null?U:K.key)||null,x(V,k,K,oe);case z:return k=k.get(K.key===null?U:K.key)||null,j(V,k,K,oe);case w:var Ne=K._init;return K=Ne(K._payload),B(k,V,U,K,oe)}if(He(K)||P(K))return k=k.get(U)||null,Q(V,k,K,oe,null);if(typeof K.then=="function")return B(k,V,U,Ju(K),oe);if(K.$$typeof===ae)return B(k,V,U,zu(V,K),oe);ec(V,K)}return null}function Se(k,V,U,K){for(var oe=null,Ne=null,fe=V,_e=V=0,Ut=null;fe!==null&&_e<U.length;_e++){fe.index>_e?(Ut=fe,fe=null):Ut=fe.sibling;var qe=q(k,fe,U[_e],K);if(qe===null){fe===null&&(fe=Ut);break}t&&fe&&qe.alternate===null&&r(k,fe),V=d(qe,V,_e),Ne===null?oe=qe:Ne.sibling=qe,Ne=qe,fe=Ut}if(_e===U.length)return a(k,fe),Be&&bs(k,_e),oe;if(fe===null){for(;_e<U.length;_e++)fe=X(k,U[_e],K),fe!==null&&(V=d(fe,V,_e),Ne===null?oe=fe:Ne.sibling=fe,Ne=fe);return Be&&bs(k,_e),oe}for(fe=l(fe);_e<U.length;_e++)Ut=B(fe,k,_e,U[_e],K),Ut!==null&&(t&&Ut.alternate!==null&&fe.delete(Ut.key===null?_e:Ut.key),V=d(Ut,V,_e),Ne===null?oe=Ut:Ne.sibling=Ut,Ne=Ut);return t&&fe.forEach(function(Pi){return r(k,Pi)}),Be&&bs(k,_e),oe}function ye(k,V,U,K){if(U==null)throw Error(s(151));for(var oe=null,Ne=null,fe=V,_e=V=0,Ut=null,qe=U.next();fe!==null&&!qe.done;_e++,qe=U.next()){fe.index>_e?(Ut=fe,fe=null):Ut=fe.sibling;var Pi=q(k,fe,qe.value,K);if(Pi===null){fe===null&&(fe=Ut);break}t&&fe&&Pi.alternate===null&&r(k,fe),V=d(Pi,V,_e),Ne===null?oe=Pi:Ne.sibling=Pi,Ne=Pi,fe=Ut}if(qe.done)return a(k,fe),Be&&bs(k,_e),oe;if(fe===null){for(;!qe.done;_e++,qe=U.next())qe=X(k,qe.value,K),qe!==null&&(V=d(qe,V,_e),Ne===null?oe=qe:Ne.sibling=qe,Ne=qe);return Be&&bs(k,_e),oe}for(fe=l(fe);!qe.done;_e++,qe=U.next())qe=B(fe,k,_e,qe.value,K),qe!==null&&(t&&qe.alternate!==null&&fe.delete(qe.key===null?_e:qe.key),V=d(qe,V,_e),Ne===null?oe=qe:Ne.sibling=qe,Ne=qe);return t&&fe.forEach(function(Fb){return r(k,Fb)}),Be&&bs(k,_e),oe}function et(k,V,U,K){if(typeof U=="object"&&U!==null&&U.type===F&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case I:e:{for(var oe=U.key;V!==null;){if(V.key===oe){if(oe=U.type,oe===F){if(V.tag===7){a(k,V.sibling),K=h(V,U.props.children),K.return=k,k=K;break e}}else if(V.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===w&&Gp(oe)===V.type){a(k,V.sibling),K=h(V,U.props),il(K,U),K.return=k,k=K;break e}a(k,V);break}else r(k,V);V=V.sibling}U.type===F?(K=Ts(U.props.children,k.mode,K,U.key),K.return=k,k=K):(K=ku(U.type,U.key,U.props,null,k.mode,K),il(K,U),K.return=k,k=K)}return v(k);case z:e:{for(oe=U.key;V!==null;){if(V.key===oe)if(V.tag===4&&V.stateNode.containerInfo===U.containerInfo&&V.stateNode.implementation===U.implementation){a(k,V.sibling),K=h(V,U.children||[]),K.return=k,k=K;break e}else{a(k,V);break}else r(k,V);V=V.sibling}K=sf(U,k.mode,K),K.return=k,k=K}return v(k);case w:return oe=U._init,U=oe(U._payload),et(k,V,U,K)}if(He(U))return Se(k,V,U,K);if(P(U)){if(oe=P(U),typeof oe!="function")throw Error(s(150));return U=oe.call(U),ye(k,V,U,K)}if(typeof U.then=="function")return et(k,V,Ju(U),K);if(U.$$typeof===ae)return et(k,V,zu(k,U),K);ec(k,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,V!==null&&V.tag===6?(a(k,V.sibling),K=h(V,U),K.return=k,k=K):(a(k,V),K=rf(U,k.mode,K),K.return=k,k=K),v(k)):a(k,V)}return function(k,V,U,K){try{rl=0;var oe=et(k,V,U,K);return Ra=null,oe}catch(fe){if(fe===Yo||fe===Bu)throw fe;var Ne=gn(29,fe,null,k.mode);return Ne.lanes=K,Ne.return=k,Ne}finally{}}}var Ia=Fp(!0),Qp=Fp(!1),Vn=Z(null),cr=null;function Ei(t){var r=t.alternate;ee(Dt,Dt.current&1),ee(Vn,t),cr===null&&(r===null||Sa.current!==null||r.memoizedState!==null)&&(cr=t)}function Kp(t){if(t.tag===22){if(ee(Dt,Dt.current),ee(Vn,t),cr===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(cr=t)}}else Ti()}function Ti(){ee(Dt,Dt.current),ee(Vn,Vn.current)}function Hr(t){re(Vn),cr===t&&(cr=null),re(Dt)}var Dt=Z(0);function tc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Id(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Uf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:S({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var jf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=vn(),h=yi(l);h.payload=r,a!=null&&(h.callback=a),r=_i(t,h,l),r!==null&&(En(r,t,l),$o(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=vn(),h=yi(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=_i(t,h,l),r!==null&&(En(r,t,l),$o(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=vn(),l=yi(a);l.tag=2,r!=null&&(l.callback=r),r=_i(t,l,a),r!==null&&(En(r,t,a),$o(r,t,a))}};function Yp(t,r,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):r.prototype&&r.prototype.isPureReactComponent?!zo(a,l)||!zo(h,d):!0}function Xp(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&jf.enqueueReplaceState(r,r.state,null)}function Ns(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=S({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var nc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function $p(t){nc(t)}function Zp(t){console.error(t)}function Wp(t){nc(t)}function rc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Jp(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function zf(t,r,a){return a=yi(a),a.tag=3,a.payload={element:null},a.callback=function(){rc(t,r)},a}function ey(t){return t=yi(t),t.tag=3,t}function ty(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){Jp(r,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Jp(r,a,l),typeof h!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function FS(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&Fo(r,a,h,!0),a=Vn.current,a!==null){switch(a.tag){case 13:return cr===null?cd():a.alternate===null&&mt===0&&(mt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===gf?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),fd(t,l,h)),!1;case 22:return a.flags|=65536,l===gf?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),fd(t,l,h)),!1}throw Error(s(435,a.tag))}return fd(t,l,h),cd(),!1}if(Be)return r=Vn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==lf&&(t=Error(s(422),{cause:l}),Go(Cn(t,a)))):(l!==lf&&(r=Error(s(423),{cause:l}),Go(Cn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Cn(l,a),h=zf(t.stateNode,l,h),_f(t,h),mt!==4&&(mt=2)),!1;var d=Error(s(520),{cause:l});if(d=Cn(d,a),hl===null?hl=[d]:hl.push(d),mt!==4&&(mt=2),r===null)return!0;l=Cn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=zf(a.stateNode,l,t),_f(a,t),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ii===null||!Ii.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=ey(h),ty(h,t,a,l),_f(a,h),!1}a=a.return}while(a!==null);return!1}var ny=Error(s(461)),kt=!1;function Bt(t,r,a,l){r.child=t===null?Qp(r,null,a,l):Ia(r,t.child,a,l)}function ry(t,r,a,l,h){a=a.render;var d=r.ref;if("ref"in l){var v={};for(var T in l)T!=="ref"&&(v[T]=l[T])}else v=l;return Is(r),l=bf(t,r,a,v,d,h),T=wf(),t!==null&&!kt?(Af(t,r,h),Gr(t,r,h)):(Be&&T&&af(r),r.flags|=1,Bt(t,r,l,h),r.child)}function iy(t,r,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!nf(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,sy(t,r,d,l,h)):(t=ku(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!Yf(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:zo,a(v,l)&&t.ref===r.ref)return Gr(t,r,h)}return r.flags|=1,t=Lr(d,l),t.ref=r.ref,t.return=r,r.child=t}function sy(t,r,a,l,h){if(t!==null){var d=t.memoizedProps;if(zo(d,l)&&t.ref===r.ref)if(kt=!1,r.pendingProps=l=d,Yf(t,h))(t.flags&131072)!==0&&(kt=!0);else return r.lanes=t.lanes,Gr(t,r,h)}return qf(t,r,a,l,h)}function ay(t,r,a){var l=r.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=r.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;r.childLanes=d&~l}else r.childLanes=0,r.child=null;return oy(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&qu(r,d!==null?d.cachePool:null),d!==null?sp(r,d):Ef(),Kp(r);else return r.lanes=r.childLanes=536870912,oy(t,r,d!==null?d.baseLanes|a:a,a)}else d!==null?(qu(r,d.cachePool),sp(r,d),Ti(),r.memoizedState=null):(t!==null&&qu(r,null),Ef(),Ti());return Bt(t,r,h,a),r.child}function oy(t,r,a,l){var h=mf();return h=h===null?null:{parent:Nt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&qu(r,null),Ef(),Kp(r),t!==null&&Fo(t,r,l,!0),null}function ic(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function qf(t,r,a,l,h){return Is(r),a=bf(t,r,a,l,void 0,h),l=wf(),t!==null&&!kt?(Af(t,r,h),Gr(t,r,h)):(Be&&l&&af(r),r.flags|=1,Bt(t,r,a,h),r.child)}function ly(t,r,a,l,h,d){return Is(r),r.updateQueue=null,a=op(r,l,a,h),ap(t),l=wf(),t!==null&&!kt?(Af(t,r,d),Gr(t,r,d)):(Be&&l&&af(r),r.flags|=1,Bt(t,r,a,d),r.child)}function uy(t,r,a,l,h){if(Is(r),r.stateNode===null){var d=ya,v=a.contextType;typeof v=="object"&&v!==null&&(d=$t(v)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=jf,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},pf(r),v=a.contextType,d.context=typeof v=="object"&&v!==null?$t(v):ya,d.state=r.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Uf(r,a,v,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&jf.enqueueReplaceState(d,d.state,null),Wo(r,l,d,h),Zo(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){d=r.stateNode;var T=r.memoizedProps,x=Ns(a,T);d.props=x;var j=d.context,Q=a.contextType;v=ya,typeof Q=="object"&&Q!==null&&(v=$t(Q));var X=a.getDerivedStateFromProps;Q=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||j!==v)&&Xp(r,d,l,v),pi=!1;var q=r.memoizedState;d.state=q,Wo(r,l,d,h),Zo(),j=r.memoizedState,T||q!==j||pi?(typeof X=="function"&&(Uf(r,a,X,l),j=r.memoizedState),(x=pi||Yp(r,a,x,l,q,j,v))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=j),d.props=l,d.state=j,d.context=v,l=x):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,yf(t,r),v=r.memoizedProps,Q=Ns(a,v),d.props=Q,X=r.pendingProps,q=d.context,j=a.contextType,x=ya,typeof j=="object"&&j!==null&&(x=$t(j)),T=a.getDerivedStateFromProps,(j=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==X||q!==x)&&Xp(r,d,l,x),pi=!1,q=r.memoizedState,d.state=q,Wo(r,l,d,h),Zo();var B=r.memoizedState;v!==X||q!==B||pi||t!==null&&t.dependencies!==null&&ju(t.dependencies)?(typeof T=="function"&&(Uf(r,a,T,l),B=r.memoizedState),(Q=pi||Yp(r,a,Q,l,q,B,x)||t!==null&&t.dependencies!==null&&ju(t.dependencies))?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,B,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,B,x)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=B),d.props=l,d.state=B,d.context=x,l=Q):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),l=!1)}return d=l,ic(t,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,t!==null&&l?(r.child=Ia(r,t.child,null,h),r.child=Ia(r,null,a,h)):Bt(t,r,a,h),r.memoizedState=d.state,t=r.child):t=Gr(t,r,h),t}function cy(t,r,a,l){return Ho(),r.flags|=256,Bt(t,r,a,l),r.child}var Bf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hf(t){return{baseLanes:t,cachePool:Zg()}}function Gf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Mn),t}function hy(t,r,a){var l=r.pendingProps,h=!1,d=(r.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Dt.current&2)!==0),v&&(h=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,t===null){if(Be){if(h?Ei(r):Ti(),Be){var T=dt,x;if(x=T){e:{for(x=T,T=ur;x.nodeType!==8;){if(!T){T=null;break e}if(x=Fn(x.nextSibling),x===null){T=null;break e}}T=x}T!==null?(r.memoizedState={dehydrated:T,treeContext:Ss!==null?{id:Ur,overflow:jr}:null,retryLane:536870912,hydrationErrors:null},x=gn(18,null,null,0),x.stateNode=T,x.return=r,r.child=x,an=r,dt=null,x=!0):x=!1}x||As(r)}if(T=r.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Id(T)?r.lanes=32:r.lanes=536870912,null;Hr(r)}return T=l.children,l=l.fallback,h?(Ti(),h=r.mode,T=sc({mode:"hidden",children:T},h),l=Ts(l,h,a,null),T.return=r,l.return=r,T.sibling=l,r.child=T,h=r.child,h.memoizedState=Hf(a),h.childLanes=Gf(t,v,a),r.memoizedState=Bf,l):(Ei(r),Ff(r,T))}if(x=t.memoizedState,x!==null&&(T=x.dehydrated,T!==null)){if(d)r.flags&256?(Ei(r),r.flags&=-257,r=Qf(t,r,a)):r.memoizedState!==null?(Ti(),r.child=t.child,r.flags|=128,r=null):(Ti(),h=l.fallback,T=r.mode,l=sc({mode:"visible",children:l.children},T),h=Ts(h,T,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,Ia(r,t.child,null,a),l=r.child,l.memoizedState=Hf(a),l.childLanes=Gf(t,v,a),r.memoizedState=Bf,r=h);else if(Ei(r),Id(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var j=v.dgst;v=j,l=Error(s(419)),l.stack="",l.digest=v,Go({value:l,source:null,stack:null}),r=Qf(t,r,a)}else if(kt||Fo(t,r,a,!1),v=(a&t.childLanes)!==0,kt||v){if(v=it,v!==null&&(l=a&-a,l=(l&42)!==0?1:li(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==x.retryLane))throw x.retryLane=l,pa(t,l),En(v,t,l),ny;T.data==="$?"||cd(),r=Qf(t,r,a)}else T.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=x.treeContext,dt=Fn(T.nextSibling),an=r,Be=!0,ws=null,ur=!1,t!==null&&(Dn[On++]=Ur,Dn[On++]=jr,Dn[On++]=Ss,Ur=t.id,jr=t.overflow,Ss=r),r=Ff(r,l.children),r.flags|=4096);return r}return h?(Ti(),h=l.fallback,T=r.mode,x=t.child,j=x.sibling,l=Lr(x,{mode:"hidden",children:l.children}),l.subtreeFlags=x.subtreeFlags&65011712,j!==null?h=Lr(j,h):(h=Ts(h,T,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,T=t.child.memoizedState,T===null?T=Hf(a):(x=T.cachePool,x!==null?(j=Nt._currentValue,x=x.parent!==j?{parent:j,pool:j}:x):x=Zg(),T={baseLanes:T.baseLanes|a,cachePool:x}),h.memoizedState=T,h.childLanes=Gf(t,v,a),r.memoizedState=Bf,l):(Ei(r),a=t.child,t=a.sibling,a=Lr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(v=r.deletions,v===null?(r.deletions=[t],r.flags|=16):v.push(t)),r.child=a,r.memoizedState=null,a)}function Ff(t,r){return r=sc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function sc(t,r){return t=gn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Qf(t,r,a){return Ia(r,t.child,null,a),t=Ff(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function fy(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),cf(t.return,r,a)}function Kf(t,r,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function dy(t,r,a){var l=r.pendingProps,h=l.revealOrder,d=l.tail;if(Bt(t,r,l.children,a),l=Dt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fy(t,a,r);else if(t.tag===19)fy(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ee(Dt,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&tc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Kf(r,!1,h,a,d);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&tc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Kf(r,!0,a,null,d);break;case"together":Kf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Gr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Ri|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(Fo(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Lr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Lr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Yf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&ju(t)))}function QS(t,r,a){switch(r.tag){case 3:Qe(r,r.stateNode.containerInfo),gi(r,Nt,t.memoizedState.cache),Ho();break;case 27:case 5:Zn(r);break;case 4:Qe(r,r.stateNode.containerInfo);break;case 10:gi(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Ei(r),r.flags|=128,null):(a&r.child.childLanes)!==0?hy(t,r,a):(Ei(r),t=Gr(t,r,a),t!==null?t.sibling:null);Ei(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(Fo(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return dy(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ee(Dt,Dt.current),l)break;return null;case 22:case 23:return r.lanes=0,ay(t,r,a);case 24:gi(r,Nt,t.memoizedState.cache)}return Gr(t,r,a)}function my(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)kt=!0;else{if(!Yf(t,a)&&(r.flags&128)===0)return kt=!1,QS(t,r,a);kt=(t.flags&131072)!==0}else kt=!1,Be&&(r.flags&1048576)!==0&&Gg(r,Uu,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")nf(l)?(t=Ns(l,t),r.tag=1,r=uy(null,r,l,t,a)):(r.tag=0,r=qf(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===we){r.tag=11,r=ry(null,r,l,t,a);break e}else if(h===N){r.tag=14,r=iy(null,r,l,t,a);break e}}throw r=at(l)||l,Error(s(306,r,""))}}return r;case 0:return qf(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=Ns(l,r.pendingProps),uy(t,r,l,h,a);case 3:e:{if(Qe(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;h=d.element,yf(t,r),Wo(r,l,null,a);var v=r.memoizedState;if(l=v.cache,gi(r,Nt,l),l!==d.cache&&hf(r,[Nt],a,!0),Zo(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=cy(t,r,l,a);break e}else if(l!==h){h=Cn(Error(s(424)),r),Go(h),r=cy(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(dt=Fn(t.firstChild),an=r,Be=!0,ws=null,ur=!0,a=Qp(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ho(),l===h){r=Gr(t,r,a);break e}Bt(t,r,l,a)}r=r.child}return r;case 26:return ic(t,r),t===null?(a=__(r.type,null,r.pendingProps,null))?r.memoizedState=a:Be||(a=r.type,t=r.pendingProps,l=vc(Te.current).createElement(a),l[It]=r,l[Et]=t,Gt(l,a,t),gt(l),r.stateNode=l):r.memoizedState=__(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Zn(r),t===null&&Be&&(l=r.stateNode=g_(r.type,r.pendingProps,Te.current),an=r,ur=!0,h=dt,Ni(r.type)?(xd=h,dt=Fn(l.firstChild)):dt=h),Bt(t,r,r.pendingProps.children,a),ic(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Be&&((h=l=dt)&&(l=Eb(l,r.type,r.pendingProps,ur),l!==null?(r.stateNode=l,an=r,dt=Fn(l.firstChild),ur=!1,h=!0):h=!1),h||As(r)),Zn(r),h=r.type,d=r.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,wd(h,d)?l=null:v!==null&&wd(h,v)&&(r.flags|=32),r.memoizedState!==null&&(h=bf(t,r,US,null,null,a),El._currentValue=h),ic(t,r),Bt(t,r,l,a),r.child;case 6:return t===null&&Be&&((t=a=dt)&&(a=Tb(a,r.pendingProps,ur),a!==null?(r.stateNode=a,an=r,dt=null,t=!0):t=!1),t||As(r)),null;case 13:return hy(t,r,a);case 4:return Qe(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Ia(r,null,l,a):Bt(t,r,l,a),r.child;case 11:return ry(t,r,r.type,r.pendingProps,a);case 7:return Bt(t,r,r.pendingProps,a),r.child;case 8:return Bt(t,r,r.pendingProps.children,a),r.child;case 12:return Bt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,gi(r,r.type,l.value),Bt(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Is(r),h=$t(h),l=l(h),r.flags|=1,Bt(t,r,l,a),r.child;case 14:return iy(t,r,r.type,r.pendingProps,a);case 15:return sy(t,r,r.type,r.pendingProps,a);case 19:return dy(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=sc(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Lr(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return ay(t,r,a);case 24:return Is(r),l=$t(Nt),t===null?(h=mf(),h===null&&(h=it,d=ff(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),r.memoizedState={parent:l,cache:h},pf(r),gi(r,Nt,h)):((t.lanes&a)!==0&&(yf(t,r),Wo(r,null,null,a),Zo()),h=t.memoizedState,d=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),gi(r,Nt,l)):(l=d.cache,gi(r,Nt,l),l!==h.cache&&hf(r,[Nt],a,!0))),Bt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Fr(t){t.flags|=4}function gy(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!b_(r)){if(r=Vn.current,r!==null&&((Ue&4194048)===Ue?cr!==null:(Ue&62914560)!==Ue&&(Ue&536870912)===0||r!==cr))throw Xo=gf,Wg;t.flags|=8192}}function ac(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?So():536870912,t.lanes|=r,Da|=r)}function sl(t,r){if(!Be)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ct(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function KS(t,r,a){var l=r.pendingProps;switch(of(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(r),null;case 1:return ct(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),qr(Nt),Sn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Bo(r)?Fr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Kg())),ct(r),null;case 26:return a=r.memoizedState,t===null?(Fr(r),a!==null?(ct(r),gy(r,a)):(ct(r),r.flags&=-16777217)):a?a!==t.memoizedState?(Fr(r),ct(r),gy(r,a)):(ct(r),r.flags&=-16777217):(t.memoizedProps!==l&&Fr(r),ct(r),r.flags&=-16777217),null;case 27:jn(r),a=Te.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Fr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ct(r),null}t=de.current,Bo(r)?Fg(r):(t=g_(h,l,a),r.stateNode=t,Fr(r))}return ct(r),null;case 5:if(jn(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Fr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ct(r),null}if(t=de.current,Bo(r))Fg(r);else{switch(h=vc(Te.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[It]=r,t[Et]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(Gt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Fr(r)}}return ct(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Fr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Te.current,Bo(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=an,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[It]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||l_(t.nodeValue,a)),t||As(r)}else t=vc(t).createTextNode(l),t[It]=r,r.stateNode=t}return ct(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Bo(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[It]=r}else Ho(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),h=!1}else h=Kg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(Hr(r),r):(Hr(r),null)}if(Hr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),ac(r,r.updateQueue),ct(r),null;case 4:return Sn(),t===null&&vd(r.stateNode.containerInfo),ct(r),null;case 10:return qr(r.type),ct(r),null;case 19:if(re(Dt),h=r.memoizedState,h===null)return ct(r),null;if(l=(r.flags&128)!==0,d=h.rendering,d===null)if(l)sl(h,!1);else{if(mt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(d=tc(t),d!==null){for(r.flags|=128,sl(h,!1),t=d.updateQueue,r.updateQueue=t,ac(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Hg(a,t),a=a.sibling;return ee(Dt,Dt.current&1|2),r.child}t=t.sibling}h.tail!==null&&bn()>uc&&(r.flags|=128,l=!0,sl(h,!1),r.lanes=4194304)}else{if(!l)if(t=tc(d),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,ac(r,t),sl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Be)return ct(r),null}else 2*bn()-h.renderingStartTime>uc&&a!==536870912&&(r.flags|=128,l=!0,sl(h,!1),r.lanes=4194304);h.isBackwards?(d.sibling=r.child,r.child=d):(t=h.last,t!==null?t.sibling=d:r.child=d,h.last=d)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=bn(),r.sibling=null,t=Dt.current,ee(Dt,l?t&1|2:t&1),r):(ct(r),null);case 22:case 23:return Hr(r),Tf(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(ct(r),r.subtreeFlags&6&&(r.flags|=8192)):ct(r),a=r.updateQueue,a!==null&&ac(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&re(xs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),qr(Nt),ct(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function YS(t,r){switch(of(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return qr(Nt),Sn(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return jn(r),null;case 13:if(Hr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Ho()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return re(Dt),null;case 4:return Sn(),null;case 10:return qr(r.type),null;case 22:case 23:return Hr(r),Tf(),t!==null&&re(xs),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return qr(Nt),null;case 25:return null;default:return null}}function py(t,r){switch(of(r),r.tag){case 3:qr(Nt),Sn();break;case 26:case 27:case 5:jn(r);break;case 4:Sn();break;case 13:Hr(r);break;case 19:re(Dt);break;case 10:qr(r.type);break;case 22:case 23:Hr(r),Tf(),t!==null&&re(xs);break;case 24:qr(Nt)}}function al(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(T){rt(r,r.return,T)}}function Si(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=r;var x=a,j=T;try{j()}catch(Q){rt(h,x,Q)}}}l=l.next}while(l!==d)}}catch(Q){rt(r,r.return,Q)}}function yy(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{ip(r,a)}catch(l){rt(t,t.return,l)}}}function _y(t,r,a){a.props=Ns(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){rt(t,r,l)}}function ol(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){rt(t,r,h)}}function hr(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){rt(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){rt(t,r,h)}else a.current=null}function vy(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){rt(t,t.return,h)}}function Xf(t,r,a){try{var l=t.stateNode;gb(l,t.type,a,r),l[Et]=r}catch(h){rt(t,t.return,h)}}function Ey(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ni(t.type)||t.tag===4}function $f(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ey(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ni(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=_c));else if(l!==4&&(l===27&&Ni(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Zf(t,r,a),t=t.sibling;t!==null;)Zf(t,r,a),t=t.sibling}function oc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Ni(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(oc(t,r,a),t=t.sibling;t!==null;)oc(t,r,a),t=t.sibling}function Ty(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Gt(r,l,a),r[It]=t,r[Et]=a}catch(d){rt(t,t.return,d)}}var Qr=!1,yt=!1,Wf=!1,Sy=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function XS(t,r){if(t=t.containerInfo,Sd=Ac,t=Vg(t),Xh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,T=-1,x=-1,j=0,Q=0,X=t,q=null;t:for(;;){for(var B;X!==a||h!==0&&X.nodeType!==3||(T=v+h),X!==d||l!==0&&X.nodeType!==3||(x=v+l),X.nodeType===3&&(v+=X.nodeValue.length),(B=X.firstChild)!==null;)q=X,X=B;for(;;){if(X===t)break t;if(q===a&&++j===h&&(T=v),q===d&&++Q===l&&(x=v),(B=X.nextSibling)!==null)break;X=q,q=X.parentNode}X=B}a=T===-1||x===-1?null:{start:T,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(bd={focusedElem:t,selectionRange:a},Ac=!1,Lt=r;Lt!==null;)if(r=Lt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Lt=t;else for(;Lt!==null;){switch(r=Lt,d=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=r,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Se=Ns(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Se,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(ye){rt(a,a.return,ye)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Rd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Rd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Lt=t;break}Lt=r.return}}function by(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:bi(t,a),l&4&&al(5,a);break;case 1:if(bi(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(v){rt(a,a.return,v)}else{var h=Ns(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(v){rt(a,a.return,v)}}l&64&&yy(a),l&512&&ol(a,a.return);break;case 3:if(bi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ip(t,r)}catch(v){rt(a,a.return,v)}}break;case 27:r===null&&l&4&&Ty(a);case 26:case 5:bi(t,a),r===null&&l&4&&vy(a),l&512&&ol(a,a.return);break;case 12:bi(t,a);break;case 13:bi(t,a),l&4&&Ry(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=ib.bind(null,a),Sb(t,a))));break;case 22:if(l=a.memoizedState!==null||Qr,!l){r=r!==null&&r.memoizedState!==null||yt,h=Qr;var d=yt;Qr=l,(yt=r)&&!d?wi(t,a,(a.subtreeFlags&8772)!==0):bi(t,a),Qr=h,yt=d}break;case 30:break;default:bi(t,a)}}function wy(t){var r=t.alternate;r!==null&&(t.alternate=null,wy(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&hi(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ut=null,ln=!1;function Kr(t,r,a){for(a=a.child;a!==null;)Ay(t,r,a),a=a.sibling}function Ay(t,r,a){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(ft,a)}catch{}switch(a.tag){case 26:yt||hr(a,r),Kr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:yt||hr(a,r);var l=ut,h=ln;Ni(a.type)&&(ut=a.stateNode,ln=!1),Kr(t,r,a),pl(a.stateNode),ut=l,ln=h;break;case 5:yt||hr(a,r);case 6:if(l=ut,h=ln,ut=null,Kr(t,r,a),ut=l,ln=h,ut!==null)if(ln)try{(ut.nodeType===9?ut.body:ut.nodeName==="HTML"?ut.ownerDocument.body:ut).removeChild(a.stateNode)}catch(d){rt(a,r,d)}else try{ut.removeChild(a.stateNode)}catch(d){rt(a,r,d)}break;case 18:ut!==null&&(ln?(t=ut,d_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),wl(t)):d_(ut,a.stateNode));break;case 4:l=ut,h=ln,ut=a.stateNode.containerInfo,ln=!0,Kr(t,r,a),ut=l,ln=h;break;case 0:case 11:case 14:case 15:yt||Si(2,a,r),yt||Si(4,a,r),Kr(t,r,a);break;case 1:yt||(hr(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&_y(a,r,l)),Kr(t,r,a);break;case 21:Kr(t,r,a);break;case 22:yt=(l=yt)||a.memoizedState!==null,Kr(t,r,a),yt=l;break;default:Kr(t,r,a)}}function Ry(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{wl(t)}catch(a){rt(r,r.return,a)}}function $S(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Sy),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Sy),r;default:throw Error(s(435,t.tag))}}function Jf(t,r){var a=$S(t);r.forEach(function(l){var h=sb.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function pn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=r,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(Ni(T.type)){ut=T.stateNode,ln=!1;break e}break;case 5:ut=T.stateNode,ln=!1;break e;case 3:case 4:ut=T.stateNode.containerInfo,ln=!0;break e}T=T.return}if(ut===null)throw Error(s(160));Ay(d,v,h),ut=null,ln=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Iy(r,t),r=r.sibling}var Gn=null;function Iy(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:pn(r,t),yn(t),l&4&&(Si(3,t,t.return),al(3,t),Si(5,t,t.return));break;case 1:pn(r,t),yn(t),l&512&&(yt||a===null||hr(a,a.return)),l&64&&Qr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Gn;if(pn(r,t),yn(t),l&512&&(yt||a===null||hr(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ss]||d[It]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Gt(d,l,a),d[It]=t,gt(d),l=d;break e;case"link":var v=T_("link","href",h).get(l+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(d=v[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break t}}d=h.createElement(l),Gt(d,l,a),h.head.appendChild(d);break;case"meta":if(v=T_("meta","content",h).get(l+(a.content||""))){for(T=0;T<v.length;T++)if(d=v[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break t}}d=h.createElement(l),Gt(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[It]=t,gt(d),l=d}t.stateNode=l}else S_(h,t.type,t.stateNode);else t.stateNode=E_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?S_(h,t.type,t.stateNode):E_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Xf(t,t.memoizedProps,a.memoizedProps)}break;case 27:pn(r,t),yn(t),l&512&&(yt||a===null||hr(a,a.return)),a!==null&&l&4&&Xf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(pn(r,t),yn(t),l&512&&(yt||a===null||hr(a,a.return)),t.flags&32){h=t.stateNode;try{An(h,"")}catch(B){rt(t,t.return,B)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Xf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Wf=!0);break;case 6:if(pn(r,t),yn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(B){rt(t,t.return,B)}}break;case 3:if(Sc=null,h=Gn,Gn=Ec(r.containerInfo),pn(r,t),Gn=h,yn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{wl(r.containerInfo)}catch(B){rt(t,t.return,B)}Wf&&(Wf=!1,xy(t));break;case 4:l=Gn,Gn=Ec(t.stateNode.containerInfo),pn(r,t),yn(t),Gn=l;break;case 12:pn(r,t),yn(t);break;case 13:pn(r,t),yn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(sd=bn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Jf(t,l)));break;case 22:h=t.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,j=Qr,Q=yt;if(Qr=j||h,yt=Q||x,pn(r,t),yt=Q,Qr=j,yn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||x||Qr||yt||Ds(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){x=a=r;try{if(d=x.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=x.stateNode;var X=x.memoizedProps.style,q=X!=null&&X.hasOwnProperty("display")?X.display:null;T.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(B){rt(x,x.return,B)}}}else if(r.tag===6){if(a===null){x=r;try{x.stateNode.nodeValue=h?"":x.memoizedProps}catch(B){rt(x,x.return,B)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Jf(t,a))));break;case 19:pn(r,t),yn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Jf(t,l)));break;case 30:break;case 21:break;default:pn(r,t),yn(t)}}function yn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Ey(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=$f(t);oc(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(An(v,""),a.flags&=-33);var T=$f(t);oc(t,T,v);break;case 3:case 4:var x=a.stateNode.containerInfo,j=$f(t);Zf(t,j,x);break;default:throw Error(s(161))}}catch(Q){rt(t,t.return,Q)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function xy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;xy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function bi(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)by(t,r.alternate,r),r=r.sibling}function Ds(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Si(4,r,r.return),Ds(r);break;case 1:hr(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&_y(r,r.return,a),Ds(r);break;case 27:pl(r.stateNode);case 26:case 5:hr(r,r.return),Ds(r);break;case 22:r.memoizedState===null&&Ds(r);break;case 30:Ds(r);break;default:Ds(r)}t=t.sibling}}function wi(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,d=r,v=d.flags;switch(d.tag){case 0:case 11:case 15:wi(h,d,a),al(4,d);break;case 1:if(wi(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){rt(l,l.return,j)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var x=h.shared.hiddenCallbacks;if(x!==null)for(h.shared.hiddenCallbacks=null,h=0;h<x.length;h++)rp(x[h],T)}catch(j){rt(l,l.return,j)}}a&&v&64&&yy(d),ol(d,d.return);break;case 27:Ty(d);case 26:case 5:wi(h,d,a),a&&l===null&&v&4&&vy(d),ol(d,d.return);break;case 12:wi(h,d,a);break;case 13:wi(h,d,a),a&&v&4&&Ry(h,d);break;case 22:d.memoizedState===null&&wi(h,d,a),ol(d,d.return);break;case 30:break;default:wi(h,d,a)}r=r.sibling}}function ed(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Qo(a))}function td(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Qo(t))}function fr(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Cy(t,r,a,l),r=r.sibling}function Cy(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:fr(t,r,a,l),h&2048&&al(9,r);break;case 1:fr(t,r,a,l);break;case 3:fr(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Qo(t)));break;case 12:if(h&2048){fr(t,r,a,l),t=r.stateNode;try{var d=r.memoizedProps,v=d.id,T=d.onPostCommit;typeof T=="function"&&T(v,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(x){rt(r,r.return,x)}}else fr(t,r,a,l);break;case 13:fr(t,r,a,l);break;case 23:break;case 22:d=r.stateNode,v=r.alternate,r.memoizedState!==null?d._visibility&2?fr(t,r,a,l):ll(t,r):d._visibility&2?fr(t,r,a,l):(d._visibility|=2,xa(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&ed(v,r);break;case 24:fr(t,r,a,l),h&2048&&td(r.alternate,r);break;default:fr(t,r,a,l)}}function xa(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var d=t,v=r,T=a,x=l,j=v.flags;switch(v.tag){case 0:case 11:case 15:xa(d,v,T,x,h),al(8,v);break;case 23:break;case 22:var Q=v.stateNode;v.memoizedState!==null?Q._visibility&2?xa(d,v,T,x,h):ll(d,v):(Q._visibility|=2,xa(d,v,T,x,h)),h&&j&2048&&ed(v.alternate,v);break;case 24:xa(d,v,T,x,h),h&&j&2048&&td(v.alternate,v);break;default:xa(d,v,T,x,h)}r=r.sibling}}function ll(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:ll(a,l),h&2048&&ed(l.alternate,l);break;case 24:ll(a,l),h&2048&&td(l.alternate,l);break;default:ll(a,l)}r=r.sibling}}var ul=8192;function Ca(t){if(t.subtreeFlags&ul)for(t=t.child;t!==null;)Ny(t),t=t.sibling}function Ny(t){switch(t.tag){case 26:Ca(t),t.flags&ul&&t.memoizedState!==null&&Pb(Gn,t.memoizedState,t.memoizedProps);break;case 5:Ca(t);break;case 3:case 4:var r=Gn;Gn=Ec(t.stateNode.containerInfo),Ca(t),Gn=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=ul,ul=16777216,Ca(t),ul=r):Ca(t));break;default:Ca(t)}}function Dy(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function cl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Lt=l,Vy(l,t)}Dy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Oy(t),t=t.sibling}function Oy(t){switch(t.tag){case 0:case 11:case 15:cl(t),t.flags&2048&&Si(9,t,t.return);break;case 3:cl(t);break;case 12:cl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,lc(t)):cl(t);break;default:cl(t)}}function lc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Lt=l,Vy(l,t)}Dy(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Si(8,r,r.return),lc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,lc(r));break;default:lc(r)}t=t.sibling}}function Vy(t,r){for(;Lt!==null;){var a=Lt;switch(a.tag){case 0:case 11:case 15:Si(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Qo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Lt=l;else e:for(a=t;Lt!==null;){l=Lt;var h=l.sibling,d=l.return;if(wy(l),l===a){Lt=null;break e}if(h!==null){h.return=d,Lt=h;break e}Lt=d}}}var ZS={getCacheForType:function(t){var r=$t(Nt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},WS=typeof WeakMap=="function"?WeakMap:Map,Ye=0,it=null,De=null,Ue=0,Xe=0,_n=null,Ai=!1,Na=!1,nd=!1,Yr=0,mt=0,Ri=0,Os=0,rd=0,Mn=0,Da=0,hl=null,un=null,id=!1,sd=0,uc=1/0,cc=null,Ii=null,Ht=0,xi=null,Oa=null,Va=0,ad=0,od=null,My=null,fl=0,ld=null;function vn(){if((Ye&2)!==0&&Ue!==0)return Ue&-Ue;if(G.T!==null){var t=Ea;return t!==0?t:gd()}return ui()}function Py(){Mn===0&&(Mn=(Ue&536870912)===0||Be?To():536870912);var t=Vn.current;return t!==null&&(t.flags|=32),Mn}function En(t,r,a){(t===it&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)&&(Ma(t,0),Ci(t,Ue,Mn,!1)),Rr(t,a),((Ye&2)===0||t!==it)&&(t===it&&((Ye&2)===0&&(Os|=a),mt===4&&Ci(t,Ue,Mn,!1)),dr(t))}function ky(t,r,a){if((Ye&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||is(t,r),h=l?tb(t,r):hd(t,r,!0),d=l;do{if(h===0){Na&&!l&&Ci(t,r,0,!1);break}else{if(a=t.current.alternate,d&&!JS(a)){h=hd(t,r,!1),d=!1;continue}if(h===2){if(d=r,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var T=t;h=hl;var x=T.current.memoizedState.isDehydrated;if(x&&(Ma(T,v).flags|=256),v=hd(T,v,!1),v!==2){if(nd&&!x){T.errorRecoveryDisabledLanes|=d,Os|=d,h=4;break e}d=un,un=h,d!==null&&(un===null?un=d:un.push.apply(un,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Ma(t,0),Ci(t,r,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Ci(l,r,Mn,!Ai);break e;case 2:un=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=sd+300-bn(),10<h)){if(Ci(l,r,Mn,!Ai),Zs(l,0,!0)!==0)break e;l.timeoutHandle=h_(Ly.bind(null,l,a,un,cc,id,r,Mn,Os,Da,Ai,d,2,-0,0),h);break e}Ly(l,a,un,cc,id,r,Mn,Os,Da,Ai,d,0,-0,0)}}break}while(!0);dr(t)}function Ly(t,r,a,l,h,d,v,T,x,j,Q,X,q,B){if(t.timeoutHandle=-1,X=r.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(vl={stylesheets:null,count:0,unsuspend:Mb},Ny(r),X=kb(),X!==null)){t.cancelPendingCommit=X(Gy.bind(null,t,r,d,a,l,h,v,T,x,Q,1,q,B)),Ci(t,d,v,!j);return}Gy(t,r,d,a,l,h,v,T,x)}function JS(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!mn(d(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ci(t,r,a,l){r&=~rd,r&=~Os,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var d=31-Xt(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&Wn(t,a,r)}function hc(){return(Ye&6)===0?(dl(0),!1):!0}function ud(){if(De!==null){if(Xe===0)var t=De.return;else t=De,zr=Rs=null,Rf(t),Ra=null,rl=0,t=De;for(;t!==null;)py(t.alternate,t),t=t.return;De=null}}function Ma(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,yb(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ud(),it=t,De=a=Lr(t.current,null),Ue=r,Xe=0,_n=null,Ai=!1,Na=is(t,r),nd=!1,Da=Mn=rd=Os=Ri=mt=0,un=hl=null,id=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Xt(l),d=1<<h;r|=t[h],l&=~d}return Yr=r,Vu(),a}function Uy(t,r){Ce=null,G.H=Wu,r===Yo||r===Bu?(r=tp(),Xe=3):r===Wg?(r=tp(),Xe=4):Xe=r===ny?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,_n=r,De===null&&(mt=1,rc(t,Cn(r,t.current)))}function jy(){var t=G.H;return G.H=Wu,t===null?Wu:t}function zy(){var t=G.A;return G.A=ZS,t}function cd(){mt=4,Ai||(Ue&4194048)!==Ue&&Vn.current!==null||(Na=!0),(Ri&134217727)===0&&(Os&134217727)===0||it===null||Ci(it,Ue,Mn,!1)}function hd(t,r,a){var l=Ye;Ye|=2;var h=jy(),d=zy();(it!==t||Ue!==r)&&(cc=null,Ma(t,r)),r=!1;var v=mt;e:do try{if(Xe!==0&&De!==null){var T=De,x=_n;switch(Xe){case 8:ud(),v=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(r=!0);var j=Xe;if(Xe=0,_n=null,Pa(t,T,x,j),a&&Na){v=0;break e}break;default:j=Xe,Xe=0,_n=null,Pa(t,T,x,j)}}eb(),v=mt;break}catch(Q){Uy(t,Q)}while(!0);return r&&t.shellSuspendCounter++,zr=Rs=null,Ye=l,G.H=h,G.A=d,De===null&&(it=null,Ue=0,Vu()),v}function eb(){for(;De!==null;)qy(De)}function tb(t,r){var a=Ye;Ye|=2;var l=jy(),h=zy();it!==t||Ue!==r?(cc=null,uc=bn()+500,Ma(t,r)):Na=is(t,r);e:do try{if(Xe!==0&&De!==null){r=De;var d=_n;t:switch(Xe){case 1:Xe=0,_n=null,Pa(t,r,d,1);break;case 2:case 9:if(Jg(d)){Xe=0,_n=null,By(r);break}r=function(){Xe!==2&&Xe!==9||it!==t||(Xe=7),dr(t)},d.then(r,r);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:Jg(d)?(Xe=0,_n=null,By(r)):(Xe=0,_n=null,Pa(t,r,d,7));break;case 5:var v=null;switch(De.tag){case 26:v=De.memoizedState;case 5:case 27:var T=De;if(!v||b_(v)){Xe=0,_n=null;var x=T.sibling;if(x!==null)De=x;else{var j=T.return;j!==null?(De=j,fc(j)):De=null}break t}}Xe=0,_n=null,Pa(t,r,d,5);break;case 6:Xe=0,_n=null,Pa(t,r,d,6);break;case 8:ud(),mt=6;break e;default:throw Error(s(462))}}nb();break}catch(Q){Uy(t,Q)}while(!0);return zr=Rs=null,G.H=l,G.A=h,Ye=a,De!==null?0:(it=null,Ue=0,Vu(),mt)}function nb(){for(;De!==null&&!yo();)qy(De)}function qy(t){var r=my(t.alternate,t,Yr);t.memoizedProps=t.pendingProps,r===null?fc(t):De=r}function By(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=ly(a,r,r.pendingProps,r.type,void 0,Ue);break;case 11:r=ly(a,r,r.pendingProps,r.type.render,r.ref,Ue);break;case 5:Rf(r);default:py(a,r),r=De=Hg(r,Yr),r=my(a,r,Yr)}t.memoizedProps=t.pendingProps,r===null?fc(t):De=r}function Pa(t,r,a,l){zr=Rs=null,Rf(r),Ra=null,rl=0;var h=r.return;try{if(FS(t,h,r,a,Ue)){mt=1,rc(t,Cn(a,t.current)),De=null;return}}catch(d){if(h!==null)throw De=h,d;mt=1,rc(t,Cn(a,t.current)),De=null;return}r.flags&32768?(Be||l===1?t=!0:Na||(Ue&536870912)!==0?t=!1:(Ai=t=!0,(l===2||l===9||l===3||l===6)&&(l=Vn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Hy(r,t)):fc(r)}function fc(t){var r=t;do{if((r.flags&32768)!==0){Hy(r,Ai);return}t=r.return;var a=KS(r.alternate,r,Yr);if(a!==null){De=a;return}if(r=r.sibling,r!==null){De=r;return}De=r=t}while(r!==null);mt===0&&(mt=5)}function Hy(t,r){do{var a=YS(t.alternate,t);if(a!==null){a.flags&=32767,De=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){De=t;return}De=t=a}while(t!==null);mt=6,De=null}function Gy(t,r,a,l,h,d,v,T,x){t.cancelPendingCommit=null;do dc();while(Ht!==0);if((Ye&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=ef,bo(t,a,d,v,T,x),t===it&&(De=it=null,Ue=0),Oa=r,xi=t,Va=a,ad=d,od=h,My=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ab(es,function(){return Xy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=G.T,G.T=null,h=ne.p,ne.p=2,v=Ye,Ye|=4;try{XS(t,r,a)}finally{Ye=v,ne.p=h,G.T=l}}Ht=1,Fy(),Qy(),Ky()}}function Fy(){if(Ht===1){Ht=0;var t=xi,r=Oa,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var l=ne.p;ne.p=2;var h=Ye;Ye|=4;try{Iy(r,t);var d=bd,v=Vg(t.containerInfo),T=d.focusedElem,x=d.selectionRange;if(v!==T&&T&&T.ownerDocument&&Og(T.ownerDocument.documentElement,T)){if(x!==null&&Xh(T)){var j=x.start,Q=x.end;if(Q===void 0&&(Q=j),"selectionStart"in T)T.selectionStart=j,T.selectionEnd=Math.min(Q,T.value.length);else{var X=T.ownerDocument||document,q=X&&X.defaultView||window;if(q.getSelection){var B=q.getSelection(),Se=T.textContent.length,ye=Math.min(x.start,Se),et=x.end===void 0?ye:Math.min(x.end,Se);!B.extend&&ye>et&&(v=et,et=ye,ye=v);var k=Dg(T,ye),V=Dg(T,et);if(k&&V&&(B.rangeCount!==1||B.anchorNode!==k.node||B.anchorOffset!==k.offset||B.focusNode!==V.node||B.focusOffset!==V.offset)){var U=X.createRange();U.setStart(k.node,k.offset),B.removeAllRanges(),ye>et?(B.addRange(U),B.extend(V.node,V.offset)):(U.setEnd(V.node,V.offset),B.addRange(U))}}}}for(X=[],B=T;B=B.parentNode;)B.nodeType===1&&X.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<X.length;T++){var K=X[T];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}Ac=!!Sd,bd=Sd=null}finally{Ye=h,ne.p=l,G.T=a}}t.current=r,Ht=2}}function Qy(){if(Ht===2){Ht=0;var t=xi,r=Oa,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var l=ne.p;ne.p=2;var h=Ye;Ye|=4;try{by(t,r.alternate,r)}finally{Ye=h,ne.p=l,G.T=a}}Ht=3}}function Ky(){if(Ht===4||Ht===3){Ht=0,lu();var t=xi,r=Oa,a=Va,l=My;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ht=5:(Ht=0,Oa=xi=null,Yy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ii=null),Ws(a),r=r.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(ft,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=G.T,h=ne.p,ne.p=2,G.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var T=l[v];d(T.value,{componentStack:T.stack})}}finally{G.T=r,ne.p=h}}(Va&3)!==0&&dc(),dr(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===ld?fl++:(fl=0,ld=t):fl=0,dl(0)}}function Yy(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,Qo(r)))}function dc(t){return Fy(),Qy(),Ky(),Xy()}function Xy(){if(Ht!==5)return!1;var t=xi,r=ad;ad=0;var a=Ws(Va),l=G.T,h=ne.p;try{ne.p=32>a?32:a,G.T=null,a=od,od=null;var d=xi,v=Va;if(Ht=0,Oa=xi=null,Va=0,(Ye&6)!==0)throw Error(s(331));var T=Ye;if(Ye|=4,Oy(d.current),Cy(d,d.current,v,a),Ye=T,dl(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(ft,d)}catch{}return!0}finally{ne.p=h,G.T=l,Yy(t,r)}}function $y(t,r,a){r=Cn(a,r),r=zf(t.stateNode,r,2),t=_i(t,r,2),t!==null&&(Rr(t,2),dr(t))}function rt(t,r,a){if(t.tag===3)$y(t,t,a);else for(;r!==null;){if(r.tag===3){$y(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ii===null||!Ii.has(l))){t=Cn(a,t),a=ey(2),l=_i(r,a,2),l!==null&&(ty(a,l,r,t),Rr(l,2),dr(l));break}}r=r.return}}function fd(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new WS;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(nd=!0,h.add(a),t=rb.bind(null,t,r,a),r.then(t,t))}function rb(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,it===t&&(Ue&a)===a&&(mt===4||mt===3&&(Ue&62914560)===Ue&&300>bn()-sd?(Ye&2)===0&&Ma(t,0):rd|=a,Da===Ue&&(Da=0)),dr(t)}function Zy(t,r){r===0&&(r=So()),t=pa(t,r),t!==null&&(Rr(t,r),dr(t))}function ib(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Zy(t,a)}function sb(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),Zy(t,a)}function ab(t,r){return nt(t,r)}var mc=null,ka=null,dd=!1,gc=!1,md=!1,Vs=0;function dr(t){t!==ka&&t.next===null&&(ka===null?mc=ka=t:ka=ka.next=t),gc=!0,dd||(dd=!0,lb())}function dl(t,r){if(!md&&gc){md=!0;do for(var a=!1,l=mc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-Xt(42|t)+1)-1,d&=h&~(v&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,t_(l,d))}else d=Ue,d=Zs(l,l===it?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||is(l,d)||(a=!0,t_(l,d));l=l.next}while(a);md=!1}}function ob(){Wy()}function Wy(){gc=dd=!1;var t=0;Vs!==0&&(pb()&&(t=Vs),Vs=0);for(var r=bn(),a=null,l=mc;l!==null;){var h=l.next,d=Jy(l,r);d===0?(l.next=null,a===null?mc=h:a.next=h,h===null&&(ka=a)):(a=l,(t!==0||(d&3)!==0)&&(gc=!0)),l=h}dl(t)}function Jy(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-Xt(d),T=1<<v,x=h[v];x===-1?((T&a)===0||(T&l)!==0)&&(h[v]=Eo(T,r)):x<=r&&(t.expiredLanes|=T),d&=~T}if(r=it,a=Ue,a=Zs(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&wr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||is(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&wr(l),Ws(a)){case 2:case 8:a=Xs;break;case 32:a=es;break;case 268435456:a=$s;break;default:a=es}return l=e_.bind(null,t),a=nt(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&wr(l),t.callbackPriority=2,t.callbackNode=null,2}function e_(t,r){if(Ht!==0&&Ht!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(dc()&&t.callbackNode!==a)return null;var l=Ue;return l=Zs(t,t===it?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ky(t,l,r),Jy(t,bn()),t.callbackNode!=null&&t.callbackNode===a?e_.bind(null,t):null)}function t_(t,r){if(dc())return null;ky(t,r,!0)}function lb(){_b(function(){(Ye&6)!==0?nt(_o,ob):Wy()})}function gd(){return Vs===0&&(Vs=To()),Vs}function n_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ia(""+t)}function r_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function ub(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var d=n_((h[Et]||null).action),v=l.submitter;v&&(r=(r=v[Et]||null)?n_(r.formAction):v.getAttribute("formAction"),r!==null&&(d=r,v=null));var T=new sa("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Vs!==0){var x=v?r_(h,v):new FormData(h);Pf(a,{pending:!0,data:x,method:h.method,action:d},null,x)}}else typeof d=="function"&&(T.preventDefault(),x=v?r_(h,v):new FormData(h),Pf(a,{pending:!0,data:x,method:h.method,action:d},d,x))},currentTarget:h}]})}}for(var pd=0;pd<Jh.length;pd++){var yd=Jh[pd],cb=yd.toLowerCase(),hb=yd[0].toUpperCase()+yd.slice(1);Hn(cb,"on"+hb)}Hn(kg,"onAnimationEnd"),Hn(Lg,"onAnimationIteration"),Hn(Ug,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(xS,"onTransitionRun"),Hn(CS,"onTransitionStart"),Hn(NS,"onTransitionCancel"),Hn(jg,"onTransitionEnd"),xr("onMouseEnter",["mouseout","mouseover"]),xr("onMouseLeave",["mouseout","mouseover"]),xr("onPointerEnter",["pointerout","pointerover"]),xr("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ml));function i_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var v=l.length-1;0<=v;v--){var T=l[v],x=T.instance,j=T.currentTarget;if(T=T.listener,x!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=j;try{d(h)}catch(Q){nc(Q)}h.currentTarget=null,d=x}else for(v=0;v<l.length;v++){if(T=l[v],x=T.instance,j=T.currentTarget,T=T.listener,x!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=j;try{d(h)}catch(Q){nc(Q)}h.currentTarget=null,d=x}}}}function Oe(t,r){var a=r[Ao];a===void 0&&(a=r[Ao]=new Set);var l=t+"__bubble";a.has(l)||(s_(r,t,2,!1),a.add(l))}function _d(t,r,a){var l=0;r&&(l|=4),s_(a,t,l,r)}var pc="_reactListening"+Math.random().toString(36).slice(2);function vd(t){if(!t[pc]){t[pc]=!0,Ro.forEach(function(a){a!=="selectionchange"&&(fb.has(a)||_d(a,!1,t),_d(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[pc]||(r[pc]=!0,_d("selectionchange",!1,r))}}function s_(t,r,a,l){switch(C_(r)){case 2:var h=jb;break;case 8:h=zb;break;default:h=Vd}a=h.bind(null,r,a,t),h=void 0,!In||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function Ed(t,r,a,l,h){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var T=l.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=l.return;v!==null;){var x=v.tag;if((x===3||x===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=Ir(T),v===null)return;if(x=v.tag,x===5||x===6||x===26||x===27){l=d=v;continue e}T=T.parentNode}}l=l.return}_u(function(){var j=d,Q=Rn(a),X=[];e:{var q=zg.get(t);if(q!==void 0){var B=sa,Se=t;switch(t){case"keypress":if(ir(a)===0)break e;case"keydown":case"keyup":B=ha;break;case"focusin":Se="focus",B=la;break;case"focusout":Se="blur",B=la;break;case"beforeblur":case"afterblur":B=la;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=xn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Fh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=Ru;break;case kg:case Lg:case Ug:B=ua;break;case jg:B=xu;break;case"scroll":case"scrollend":B=vu;break;case"wheel":B=fa;break;case"copy":case"cut":case"paste":B=ca;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Uo;break;case"toggle":case"beforetoggle":B=Nu}var ye=(r&4)!==0,et=!ye&&(t==="scroll"||t==="scrollend"),k=ye?q!==null?q+"Capture":null:q;ye=[];for(var V=j,U;V!==null;){var K=V;if(U=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||U===null||k===null||(K=fs(V,k),K!=null&&ye.push(gl(V,K,U))),et)break;V=V.return}0<ye.length&&(q=new B(q,Se,null,a,Q),X.push({event:q,listeners:ye}))}}if((r&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",B=t==="mouseout"||t==="pointerout",q&&a!==Dr&&(Se=a.relatedTarget||a.fromElement)&&(Ir(Se)||Se[wn]))break e;if((B||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,B?(Se=a.relatedTarget||a.toElement,B=j,Se=Se?Ir(Se):null,Se!==null&&(et=u(Se),ye=Se.tag,Se!==et||ye!==5&&ye!==27&&ye!==6)&&(Se=null)):(B=null,Se=j),B!==Se)){if(ye=xn,K="onMouseLeave",k="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(ye=Uo,K="onPointerLeave",k="onPointerEnter",V="pointer"),et=B==null?q:er(B),U=Se==null?q:er(Se),q=new ye(K,V+"leave",B,a,Q),q.target=et,q.relatedTarget=U,K=null,Ir(Q)===j&&(ye=new ye(k,V+"enter",Se,a,Q),ye.target=U,ye.relatedTarget=et,K=ye),et=K,B&&Se)t:{for(ye=B,k=Se,V=0,U=ye;U;U=La(U))V++;for(U=0,K=k;K;K=La(K))U++;for(;0<V-U;)ye=La(ye),V--;for(;0<U-V;)k=La(k),U--;for(;V--;){if(ye===k||k!==null&&ye===k.alternate)break t;ye=La(ye),k=La(k)}ye=null}else ye=null;B!==null&&a_(X,q,B,ye,!1),Se!==null&&et!==null&&a_(X,et,Se,ye,!0)}}e:{if(q=j?er(j):window,B=q.nodeName&&q.nodeName.toLowerCase(),B==="select"||B==="input"&&q.type==="file")var oe=Ag;else if(Ct(q))if(Rg)oe=AS;else{oe=bS;var Ne=SS}else B=q.nodeName,!B||B.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?j&&Do(j.elementType)&&(oe=Ag):oe=wS;if(oe&&(oe=oe(t,j))){kr(X,oe,a,Q);break e}Ne&&Ne(t,q,j),t==="focusout"&&j&&q.type==="number"&&j.memoizedProps.value!=null&&di(q,"number",q.value)}switch(Ne=j?er(j):window,t){case"focusin":(Ct(Ne)||Ne.contentEditable==="true")&&(da=Ne,$h=j,qo=null);break;case"focusout":qo=$h=da=null;break;case"mousedown":Zh=!0;break;case"contextmenu":case"mouseup":case"dragend":Zh=!1,Mg(X,a,Q);break;case"selectionchange":if(IS)break;case"keydown":case"keyup":Mg(X,a,Q)}var fe;if(or)e:{switch(t){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else ke?H(t,a)&&(_e="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(_&&a.locale!=="ko"&&(ke||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&ke&&(fe=Vo()):(rr=Q,mi="value"in rr?rr.value:rr.textContent,ke=!0)),Ne=yc(j,_e),0<Ne.length&&(_e=new ko(_e,t,null,a,Q),X.push({event:_e,listeners:Ne}),fe?_e.data=fe:(fe=te(a),fe!==null&&(_e.data=fe)))),(fe=g?xt(t,a):Le(t,a))&&(_e=yc(j,"onBeforeInput"),0<_e.length&&(Ne=new ko("onBeforeInput","beforeinput",null,a,Q),X.push({event:Ne,listeners:_e}),Ne.data=fe)),ub(X,t,j,a,Q)}i_(X,r)})}function gl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function yc(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=fs(t,a),h!=null&&l.unshift(gl(t,h,d)),h=fs(t,r),h!=null&&l.push(gl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function La(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function a_(t,r,a,l,h){for(var d=r._reactName,v=[];a!==null&&a!==l;){var T=a,x=T.alternate,j=T.stateNode;if(T=T.tag,x!==null&&x===l)break;T!==5&&T!==26&&T!==27||j===null||(x=j,h?(j=fs(a,d),j!=null&&v.unshift(gl(a,j,x))):h||(j=fs(a,d),j!=null&&v.push(gl(a,j,x)))),a=a.return}v.length!==0&&t.push({event:r,listeners:v})}var db=/\r\n?/g,mb=/\u0000|\uFFFD/g;function o_(t){return(typeof t=="string"?t:""+t).replace(db,`
`).replace(mb,"")}function l_(t,r){return r=o_(r),o_(t)===r}function _c(){}function Je(t,r,a,l,h,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||An(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&An(t,""+l);break;case"className":tr(t,"class",l);break;case"tabIndex":tr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":tr(t,a,l);break;case"style":No(t,l,d);break;case"data":if(r!=="object"){tr(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ia(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&Je(t,r,"name",h.name,h,null),Je(t,r,"formEncType",h.formEncType,h,null),Je(t,r,"formMethod",h.formMethod,h,null),Je(t,r,"formTarget",h.formTarget,h,null)):(Je(t,r,"encType",h.encType,h,null),Je(t,r,"method",h.method,h,null),Je(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ia(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=_c);break;case"onScroll":l!=null&&Oe("scroll",t);break;case"onScrollEnd":l!=null&&Oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ia(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Oe("beforetoggle",t),Oe("toggle",t),fi(t,"popover",l);break;case"xlinkActuate":zt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":zt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":zt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":zt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":zt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":zt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":zt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":zt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":zt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":fi(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Hh.get(a)||a,fi(t,a,l))}}function Td(t,r,a,l,h,d){switch(a){case"style":No(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?An(t,l):(typeof l=="number"||typeof l=="bigint")&&An(t,""+l);break;case"onScroll":l!=null&&Oe("scroll",t);break;case"onScrollEnd":l!=null&&Oe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=_c);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Js.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),d=t[Et]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(r,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):fi(t,a,l)}}}function Gt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",t),Oe("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Je(t,r,d,v,a,null)}}h&&Je(t,r,"srcSet",a.srcSet,a,null),l&&Je(t,r,"src",a.src,a,null);return;case"input":Oe("invalid",t);var T=d=v=h=null,x=null,j=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":h=Q;break;case"type":v=Q;break;case"checked":x=Q;break;case"defaultChecked":j=Q;break;case"value":d=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:Je(t,r,l,Q,a,null)}}us(t,d,T,x,j,v,h,!1),ra(t);return;case"select":Oe("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":v=T;break;case"multiple":l=T;default:Je(t,r,h,T,a,null)}r=d,a=v,t.multiple=!!l,r!=null?Nr(t,!!l,r,!1):a!=null&&Nr(t,!!l,a,!0);return;case"textarea":Oe("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Je(t,r,v,T,a,null)}cs(t,l,h,d),ra(t);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(l=a[x],l!=null))switch(x){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Je(t,r,x,l,a,null)}return;case"dialog":Oe("beforetoggle",t),Oe("toggle",t),Oe("cancel",t),Oe("close",t);break;case"iframe":case"object":Oe("load",t);break;case"video":case"audio":for(l=0;l<ml.length;l++)Oe(ml[l],t);break;case"image":Oe("error",t),Oe("load",t);break;case"details":Oe("toggle",t);break;case"embed":case"source":case"link":Oe("error",t),Oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Je(t,r,j,l,a,null)}return;default:if(Do(r)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&Td(t,r,Q,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&Je(t,r,T,l,a,null))}function gb(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,T=null,x=null,j=null,Q=null;for(B in a){var X=a[B];if(a.hasOwnProperty(B)&&X!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":x=X;default:l.hasOwnProperty(B)||Je(t,r,B,null,l,X)}}for(var q in l){var B=l[q];if(X=a[q],l.hasOwnProperty(q)&&(B!=null||X!=null))switch(q){case"type":d=B;break;case"name":h=B;break;case"checked":j=B;break;case"defaultChecked":Q=B;break;case"value":v=B;break;case"defaultValue":T=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,r));break;default:B!==X&&Je(t,r,q,B,l,X)}}dn(t,v,T,x,j,Q,d,h);return;case"select":B=v=T=q=null;for(d in a)if(x=a[d],a.hasOwnProperty(d)&&x!=null)switch(d){case"value":break;case"multiple":B=x;default:l.hasOwnProperty(d)||Je(t,r,d,null,l,x)}for(h in l)if(d=l[h],x=a[h],l.hasOwnProperty(h)&&(d!=null||x!=null))switch(h){case"value":q=d;break;case"defaultValue":T=d;break;case"multiple":v=d;default:d!==x&&Je(t,r,h,d,l,x)}r=T,a=v,l=B,q!=null?Nr(t,!!a,q,!1):!!l!=!!a&&(r!=null?Nr(t,!!a,r,!0):Nr(t,!!a,a?[]:"",!1));return;case"textarea":B=q=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Je(t,r,T,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":q=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Je(t,r,v,h,l,d)}Ze(t,q,B);return;case"option":for(var Se in a)if(q=a[Se],a.hasOwnProperty(Se)&&q!=null&&!l.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:Je(t,r,Se,null,l,q)}for(x in l)if(q=l[x],B=a[x],l.hasOwnProperty(x)&&q!==B&&(q!=null||B!=null))switch(x){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Je(t,r,x,q,l,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ye in a)q=a[ye],a.hasOwnProperty(ye)&&q!=null&&!l.hasOwnProperty(ye)&&Je(t,r,ye,null,l,q);for(j in l)if(q=l[j],B=a[j],l.hasOwnProperty(j)&&q!==B&&(q!=null||B!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,r));break;default:Je(t,r,j,q,l,B)}return;default:if(Do(r)){for(var et in a)q=a[et],a.hasOwnProperty(et)&&q!==void 0&&!l.hasOwnProperty(et)&&Td(t,r,et,void 0,l,q);for(Q in l)q=l[Q],B=a[Q],!l.hasOwnProperty(Q)||q===B||q===void 0&&B===void 0||Td(t,r,Q,q,l,B);return}}for(var k in a)q=a[k],a.hasOwnProperty(k)&&q!=null&&!l.hasOwnProperty(k)&&Je(t,r,k,null,l,q);for(X in l)q=l[X],B=a[X],!l.hasOwnProperty(X)||q===B||q==null&&B==null||Je(t,r,X,q,l,B)}var Sd=null,bd=null;function vc(t){return t.nodeType===9?t:t.ownerDocument}function u_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function wd(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ad=null;function pb(){var t=window.event;return t&&t.type==="popstate"?t===Ad?!1:(Ad=t,!0):(Ad=null,!1)}var h_=typeof setTimeout=="function"?setTimeout:void 0,yb=typeof clearTimeout=="function"?clearTimeout:void 0,f_=typeof Promise=="function"?Promise:void 0,_b=typeof queueMicrotask=="function"?queueMicrotask:typeof f_<"u"?function(t){return f_.resolve(null).then(t).catch(vb)}:h_;function vb(t){setTimeout(function(){throw t})}function Ni(t){return t==="head"}function d_(t,r){var a=r,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var v=t.ownerDocument;if(a&1&&pl(v.documentElement),a&2&&pl(v.body),a&4)for(a=v.head,pl(a),v=a.firstChild;v;){var T=v.nextSibling,x=v.nodeName;v[ss]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=T}}if(h===0){t.removeChild(d),wl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);wl(r)}function Rd(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Rd(a),hi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Eb(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ss])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Fn(t.nextSibling),t===null)break}return null}function Tb(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Fn(t.nextSibling),t===null))return null;return t}function Id(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Sb(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Fn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var xd=null;function m_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function g_(t,r,a){switch(r=vc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function pl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);hi(t)}var Pn=new Map,p_=new Set;function Ec(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Xr=ne.d;ne.d={f:bb,r:wb,D:Ab,C:Rb,L:Ib,m:xb,X:Nb,S:Cb,M:Db};function bb(){var t=Xr.f(),r=hc();return t||r}function wb(t){var r=Jn(t);r!==null&&r.tag===5&&r.type==="form"?kp(r):Xr.r(t)}var Ua=typeof document>"u"?null:document;function y_(t,r,a){var l=Ua;if(l&&typeof r=="string"&&r){var h=Tt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),p_.has(h)||(p_.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Gt(r,"link",t),gt(r),l.head.appendChild(r)))}}function Ab(t){Xr.D(t),y_("dns-prefetch",t,null)}function Rb(t,r){Xr.C(t,r),y_("preconnect",t,r)}function Ib(t,r,a){Xr.L(t,r,a);var l=Ua;if(l&&t&&r){var h='link[rel="preload"][as="'+Tt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Tt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Tt(a.imageSizes)+'"]')):h+='[href="'+Tt(t)+'"]';var d=h;switch(r){case"style":d=ja(t);break;case"script":d=za(t)}Pn.has(d)||(t=S({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Pn.set(d,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(yl(d))||r==="script"&&l.querySelector(_l(d))||(r=l.createElement("link"),Gt(r,"link",t),gt(r),l.head.appendChild(r)))}}function xb(t,r){Xr.m(t,r);var a=Ua;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Tt(l)+'"][href="'+Tt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=za(t)}if(!Pn.has(d)&&(t=S({rel:"modulepreload",href:t},r),Pn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(_l(d)))return}l=a.createElement("link"),Gt(l,"link",t),gt(l),a.head.appendChild(l)}}}function Cb(t,r,a){Xr.S(t,r,a);var l=Ua;if(l&&t){var h=nn(l).hoistableStyles,d=ja(t);r=r||"default";var v=h.get(d);if(!v){var T={loading:0,preload:null};if(v=l.querySelector(yl(d)))T.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Pn.get(d))&&Cd(t,a);var x=v=l.createElement("link");gt(x),Gt(x,"link",t),x._p=new Promise(function(j,Q){x.onload=j,x.onerror=Q}),x.addEventListener("load",function(){T.loading|=1}),x.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Tc(v,r,l)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(d,v)}}}function Nb(t,r){Xr.X(t,r);var a=Ua;if(a&&t){var l=nn(a).hoistableScripts,h=za(t),d=l.get(h);d||(d=a.querySelector(_l(h)),d||(t=S({src:t,async:!0},r),(r=Pn.get(h))&&Nd(t,r),d=a.createElement("script"),gt(d),Gt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Db(t,r){Xr.M(t,r);var a=Ua;if(a&&t){var l=nn(a).hoistableScripts,h=za(t),d=l.get(h);d||(d=a.querySelector(_l(h)),d||(t=S({src:t,async:!0,type:"module"},r),(r=Pn.get(h))&&Nd(t,r),d=a.createElement("script"),gt(d),Gt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function __(t,r,a,l){var h=(h=Te.current)?Ec(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=ja(a.href),a=nn(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ja(a.href);var d=nn(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(yl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),Pn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Pn.set(t,a),d||Ob(h,t,a,v.state))),r&&l===null)throw Error(s(528,""));return v}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=za(a),a=nn(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function ja(t){return'href="'+Tt(t)+'"'}function yl(t){return'link[rel="stylesheet"]['+t+"]"}function v_(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function Ob(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Gt(r,"link",a),gt(r),t.head.appendChild(r))}function za(t){return'[src="'+Tt(t)+'"]'}function _l(t){return"script[async]"+t}function E_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Tt(a.href)+'"]');if(l)return r.instance=l,gt(l),l;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),gt(l),Gt(l,"style",h),Tc(l,a.precedence,t),r.instance=l;case"stylesheet":h=ja(a.href);var d=t.querySelector(yl(h));if(d)return r.state.loading|=4,r.instance=d,gt(d),d;l=v_(a),(h=Pn.get(h))&&Cd(l,h),d=(t.ownerDocument||t).createElement("link"),gt(d);var v=d;return v._p=new Promise(function(T,x){v.onload=T,v.onerror=x}),Gt(d,"link",l),r.state.loading|=4,Tc(d,a.precedence,t),r.instance=d;case"script":return d=za(a.src),(h=t.querySelector(_l(d)))?(r.instance=h,gt(h),h):(l=a,(h=Pn.get(d))&&(l=S({},a),Nd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),gt(h),Gt(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Tc(l,a.precedence,t));return r.instance}function Tc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var T=l[v];if(T.dataset.precedence===r)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Cd(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Nd(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Sc=null;function T_(t,r,a){if(Sc===null){var l=new Map,h=Sc=new Map;h.set(a,l)}else h=Sc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[ss]||d[It]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(r)||"";v=t+v;var T=l.get(v);T?T.push(d):l.set(v,[d])}}return l}function S_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function Vb(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function b_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var vl=null;function Mb(){}function Pb(t,r,a){if(vl===null)throw Error(s(475));var l=vl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=ja(a.href),d=t.querySelector(yl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=bc.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=d,gt(d);return}d=t.ownerDocument||t,a=v_(a),(h=Pn.get(h))&&Cd(a,h),d=d.createElement("link"),gt(d);var v=d;v._p=new Promise(function(T,x){v.onload=T,v.onerror=x}),Gt(d,"link",a),r.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=bc.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function kb(){if(vl===null)throw Error(s(475));var t=vl;return t.stylesheets&&t.count===0&&Dd(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&Dd(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function bc(){if(this.count--,this.count===0){if(this.stylesheets)Dd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var wc=null;function Dd(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,wc=new Map,r.forEach(Lb,t),wc=null,bc.call(t))}function Lb(t,r){if(!(r.state.loading&4)){var a=wc.get(t);if(a)var l=a.get(null);else{a=new Map,wc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=r.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=bc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var El={$$typeof:ae,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function Ub(t,r,a,l,h,d,v,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ar(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ar(0),this.hiddenUpdates=Ar(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function w_(t,r,a,l,h,d,v,T,x,j,Q,X){return t=new Ub(t,r,a,v,T,x,j,X),r=1,d===!0&&(r|=24),d=gn(3,null,null,r),t.current=d,d.stateNode=t,r=ff(),r.refCount++,t.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},pf(d),t}function A_(t){return t?(t=ya,t):ya}function R_(t,r,a,l,h,d){h=A_(h),l.context===null?l.context=h:l.pendingContext=h,l=yi(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=_i(t,l,r),a!==null&&(En(a,t,r),$o(a,t,r))}function I_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Od(t,r){I_(t,r),(t=t.alternate)&&I_(t,r)}function x_(t){if(t.tag===13){var r=pa(t,67108864);r!==null&&En(r,t,67108864),Od(t,67108864)}}var Ac=!0;function jb(t,r,a,l){var h=G.T;G.T=null;var d=ne.p;try{ne.p=2,Vd(t,r,a,l)}finally{ne.p=d,G.T=h}}function zb(t,r,a,l){var h=G.T;G.T=null;var d=ne.p;try{ne.p=8,Vd(t,r,a,l)}finally{ne.p=d,G.T=h}}function Vd(t,r,a,l){if(Ac){var h=Md(l);if(h===null)Ed(t,r,l,Rc,a),N_(t,l);else if(Bb(h,t,r,a,l))l.stopPropagation();else if(N_(t,l),r&4&&-1<qb.indexOf(t)){for(;h!==null;){var d=Jn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=zn(d.pendingLanes);if(v!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var x=1<<31-Xt(v);T.entanglements[1]|=x,v&=~x}dr(d),(Ye&6)===0&&(uc=bn()+500,dl(0))}}break;case 13:T=pa(d,2),T!==null&&En(T,d,2),hc(),Od(d,2)}if(d=Md(l),d===null&&Ed(t,r,l,Rc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Ed(t,r,l,null,a)}}function Md(t){return t=Rn(t),Pd(t)}var Rc=null;function Pd(t){if(Rc=null,t=Ir(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=f(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Rc=t,null}function C_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lh()){case _o:return 2;case Xs:return 8;case es:case Uh:return 32;case $s:return 268435456;default:return 32}default:return 32}}var kd=!1,Di=null,Oi=null,Vi=null,Tl=new Map,Sl=new Map,Mi=[],qb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function N_(t,r){switch(t){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":Vi=null;break;case"pointerover":case"pointerout":Tl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(r.pointerId)}}function bl(t,r,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},r!==null&&(r=Jn(r),r!==null&&x_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function Bb(t,r,a,l,h){switch(r){case"focusin":return Di=bl(Di,t,r,a,l,h),!0;case"dragenter":return Oi=bl(Oi,t,r,a,l,h),!0;case"mouseover":return Vi=bl(Vi,t,r,a,l,h),!0;case"pointerover":var d=h.pointerId;return Tl.set(d,bl(Tl.get(d)||null,t,r,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Sl.set(d,bl(Sl.get(d)||null,t,r,a,l,h)),!0}return!1}function D_(t){var r=Ir(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=f(a),r!==null){t.blockedOn=r,hu(t.priority,function(){if(a.tag===13){var l=vn();l=li(l);var h=pa(a,l);h!==null&&En(h,a,l),Od(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ic(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Md(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Dr=l,a.target.dispatchEvent(l),Dr=null}else return r=Jn(a),r!==null&&x_(r),t.blockedOn=a,!1;r.shift()}return!0}function O_(t,r,a){Ic(t)&&a.delete(r)}function Hb(){kd=!1,Di!==null&&Ic(Di)&&(Di=null),Oi!==null&&Ic(Oi)&&(Oi=null),Vi!==null&&Ic(Vi)&&(Vi=null),Tl.forEach(O_),Sl.forEach(O_)}function xc(t,r){t.blockedOn===r&&(t.blockedOn=null,kd||(kd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Hb)))}var Cc=null;function V_(t){Cc!==t&&(Cc=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Cc===t&&(Cc=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(Pd(l||a)===null)continue;break}var d=Jn(a);d!==null&&(t.splice(r,3),r-=3,Pf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function wl(t){function r(x){return xc(x,t)}Di!==null&&xc(Di,t),Oi!==null&&xc(Oi,t),Vi!==null&&xc(Vi,t),Tl.forEach(r),Sl.forEach(r);for(var a=0;a<Mi.length;a++){var l=Mi[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Mi.length&&(a=Mi[0],a.blockedOn===null);)D_(a),a.blockedOn===null&&Mi.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[Et]||null;if(typeof d=="function")v||V_(a);else if(v){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Et]||null)T=v.formAction;else if(Pd(h)!==null)continue}else T=v.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),V_(a)}}}function Ld(t){this._internalRoot=t}Nc.prototype.render=Ld.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=vn();R_(a,l,t,r,null,null)},Nc.prototype.unmount=Ld.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;R_(t.current,2,null,t,null,null),hc(),r[wn]=null}};function Nc(t){this._internalRoot=t}Nc.prototype.unstable_scheduleHydration=function(t){if(t){var r=ui();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Mi.length&&r!==0&&r<Mi[a].priority;a++);Mi.splice(a,0,t),a===0&&D_(t)}};var M_=e.version;if(M_!=="19.1.1")throw Error(s(527,M_,"19.1.1"));ne.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var Gb={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dc.isDisabled&&Dc.supportsFiber)try{ft=Dc.inject(Gb),Ke=Dc}catch{}}return Rl.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=$p,d=Zp,v=Wp,T=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(T=r.unstable_transitionCallbacks)),r=w_(t,1,!1,null,null,a,l,h,d,v,T,null),t[wn]=r.current,vd(t),new Ld(r)},Rl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=$p,v=Zp,T=Wp,x=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(x=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),r=w_(t,1,!0,r,a??null,l,h,d,v,T,x,j),r.context=A_(null),a=r.current,l=vn(),l=li(l),h=yi(l),h.callback=null,_i(a,h,l),a=l,r.current.lanes=a,Rr(r,a),dr(r),t[wn]=r.current,vd(t),new Nc(r)},Rl.version="19.1.1",Rl}var G_;function tw(){if(G_)return zd.exports;G_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),zd.exports=ew(),zd.exports}var nw=tw();const rw=b0(nw);var tt=(i=>(i[i.Setup=0]="Setup",i[i.Login=1]="Login",i[i.Shop=2]="Shop",i[i.PackSelection=3]="PackSelection",i[i.RoundConfiguration=4]="RoundConfiguration",i[i.CategorySelection=5]="CategorySelection",i[i.Game=6]="Game",i[i.RoundEnd=7]="RoundEnd",i[i.GameEnd=8]="GameEnd",i))(tt||{});const Tn=({children:i,className:e})=>E.jsx("div",{className:`bg-gray-800 border border-purple-500/30 rounded-2xl shadow-lg shadow-purple-900/20 p-6 sm:p-8 ${e}`,children:i}),iw=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),sw=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),w0=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),A0=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),Fa=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),aw=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),R0=({className:i})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),ow=({players:i,setPlayers:e})=>{const[n,s]=le.useState(""),o=f=>{f.preventDefault(),n.trim()&&!i.includes(n.trim())&&(e([...i,n.trim()]),s(""))},u=f=>{e(i.filter((m,p)=>p!==f))};return E.jsxs(Tn,{children:[E.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-pink-400",children:"Añadir Jugadores"}),E.jsxs("form",{onSubmit:o,className:"flex gap-2 mb-4",children:[E.jsx("input",{type:"text",value:n,onChange:f=>s(f.target.value),placeholder:"Nombre del jugador",className:"flex-grow bg-gray-700 border border-gray-600 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"}),E.jsx("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md transition",children:"Añadir"})]}),E.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:i.map((f,m)=>E.jsxs("li",{className:"flex justify-between items-center bg-gray-700/50 p-2 rounded-md animate-fade-in",children:[E.jsx("span",{className:"font-medium",children:f}),E.jsx("button",{onClick:()=>u(m),className:"text-gray-400 hover:text-red-500 transition",children:E.jsx(iw,{className:"w-5 h-5"})})]},m))})]})},$e=({children:i,variant:e="primary",className:n,...s})=>{const o="px-6 py-3 font-bold rounded-lg text-white transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 disabled:opacity-50 disabled:cursor-not-allowed",u={primary:"bg-purple-600 hover:bg-purple-700 focus:ring-purple-500/50 shadow-lg shadow-purple-600/30",secondary:"bg-pink-500 hover:bg-pink-600 focus:ring-pink-500/50 shadow-lg shadow-pink-500/30",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500/50"};return E.jsx("button",{className:`${o} ${u[e]} ${n}`,...s,children:i})},lw=({availablePacks:i,purchasedPacks:e,onContinue:n,onBack:s,onGoToShop:o})=>{const f=[{id:"base",name:"Pack Base",description:"Preguntas y retos básicos incluidos",price:"INCLUIDO",icon:"🎮",questionsUrl:"",daresUrl:""},...i];return e.length>0,E.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:E.jsxs(Tn,{className:"w-full max-w-2xl text-center",children:[E.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Packs Disponibles"}),E.jsx("p",{className:"text-gray-400 mb-8",children:"Estos son los packs que tienes disponibles para jugar"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:f.map(m=>{const p=m.id==="base"||e.includes(m.id),y=m.id==="base";return E.jsxs("div",{className:`relative p-4 rounded-lg border transition-all duration-200 ${p?"border-green-500 bg-green-500/10":"border-gray-600 bg-gray-800/50 opacity-60"}`,children:[E.jsx("div",{className:"absolute top-2 right-2",children:p?E.jsx(sw,{className:"w-6 h-6 text-green-500"}):E.jsx(Fa,{className:"w-6 h-6 text-yellow-500"})}),E.jsx("div",{className:"text-4xl mb-2",children:m.icon}),E.jsx("h3",{className:`text-xl font-bold mb-2 ${p?"text-white":"text-gray-400"}`,children:m.name}),E.jsx("p",{className:`text-sm mb-3 ${p?"text-gray-300":"text-gray-500"}`,children:m.description}),E.jsx("div",{className:`text-lg font-semibold ${p?"text-green-400":"text-yellow-400"}`,children:y?"INCLUIDO":p?"DESBLOQUEADO":"PREMIUM"}),!p&&E.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg flex items-center justify-center",children:E.jsxs("div",{className:"text-center",children:[E.jsx(Fa,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),E.jsx("p",{className:"text-yellow-400 font-semibold text-sm",children:"PREMIUM"})]})})]},m.id)})}),i.some(m=>!e.includes(m.id))&&E.jsx("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:E.jsxs("p",{className:"text-yellow-400 text-sm",children:[E.jsx(Fa,{className:"w-4 h-4 inline mr-2"}),"Los packs premium están bloqueados. Visita la tienda para desbloquearlos."]})}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[E.jsx($e,{onClick:s,variant:"secondary",className:"px-6",children:"Volver"}),E.jsx($e,{onClick:o,variant:"secondary",className:"px-6 bg-yellow-600 hover:bg-yellow-700 text-white",children:"Ir a la Tienda"}),E.jsx($e,{onClick:n,className:"px-6",disabled:!1,children:"Continuar al Juego"})]})]})})},uw=()=>{};var F_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},cw=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],f=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},x0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,p=o+2<i.length,y=p?i[o+2]:0,S=u>>2,R=(u&3)<<4|m>>4;let I=(m&15)<<2|y>>6,z=y&63;p||(z=64,f||(I=64)),s.push(n[S],n[R],n[I],n[z])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(I0(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):cw(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const R=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||y==null||R==null)throw new hw;const I=u<<2|m>>4;if(s.push(I),y!==64){const z=m<<4&240|y>>2;if(s.push(z),R!==64){const F=y<<6&192|R;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class hw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fw=function(i){const e=I0(i);return x0.encodeByteArray(e,!0)},$c=function(i){return fw(i).replace(/\./g,"")},C0=function(i){try{return x0.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw=()=>dw().__FIREBASE_DEFAULTS__,gw=()=>{if(typeof process>"u"||typeof F_>"u")return;const i=F_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},pw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&C0(i[1]);return e&&JSON.parse(e)},yh=()=>{try{return uw()||mw()||gw()||pw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},N0=i=>{var e,n;return(n=(e=yh())==null?void 0:e.emulatorHosts)==null?void 0:n[i]},yw=i=>{const e=N0(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},D0=()=>{var i;return(i=yh())==null?void 0:i.config},O0=i=>{var e;return(e=yh())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function V0(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[$c(JSON.stringify(n)),$c(JSON.stringify(f)),""].join(".")}const Pl={};function Ew(){const i={prod:[],emulator:[]};for(const e of Object.keys(Pl))Pl[e]?i.emulator.push(e):i.prod.push(e);return i}function Tw(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Q_=!1;function M0(i,e){if(typeof window>"u"||typeof document>"u"||!ao(window.location.host)||Pl[i]===e||Pl[i]||Q_)return;Pl[i]=e;function n(I){return`__firebase__banner__${I}`}const s="__firebase__banner",u=Ew().prod.length>0;function f(){const I=document.getElementById(s);I&&I.remove()}function m(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function p(I,z){I.setAttribute("width","24"),I.setAttribute("id",z),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Q_=!0,f()},I}function S(I,z){I.setAttribute("id",z),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function R(){const I=Tw(s),z=n("text"),F=document.getElementById(z)||document.createElement("span"),J=n("learnmore"),W=document.getElementById(J)||document.createElement("a"),ce=n("preprendIcon"),ue=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const ae=I.element;m(ae),S(W,J);const we=y();p(ue,ce),ae.append(ue,F,W,we),document.body.appendChild(ae)}u?(F.innerText="Preview backend disconnected.",ue.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ue.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",R):R()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function bw(){var e;const i=(e=yh())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ww(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Aw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Rw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Iw(){const i=tn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function xw(){return!bw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cw(){try{return typeof indexedDB=="object"}catch{return!1}}function Nw(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="FirebaseError";class ai extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Dw,Object.setPrototypeOf(this,ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$l.prototype.create)}}class $l{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?Ow(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new ai(o,m,s)}}function Ow(i,e){return i.replace(Vw,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Vw=/\{\$([^}]+)}/g;function Mw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Us(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],f=e[o];if(K_(u)&&K_(f)){if(!Us(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function K_(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Cl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Nl(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function Pw(i,e){const n=new kw(i,e);return n.subscribe.bind(n)}class kw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Lw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Gd),o.error===void 0&&(o.error=Gd),o.complete===void 0&&(o.complete=Gd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lw(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Gd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(i){return i&&i._delegate?i._delegate:i}class js{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new _w;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zw(e))try{this.getOrInitializeService({instanceIdentifier:Ms})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ms){return this.instances.has(e)}getOptions(e=Ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:jw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ms){return this.component?this.component.multipleInstances?e:Ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jw(i){return i===Ms?void 0:i}function zw(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Uw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ve||(Ve={}));const Bw={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},Hw=Ve.INFO,Gw={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},Fw=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=Gw[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nm{constructor(e){this.name=e,this._logLevel=Hw,this._logHandler=Fw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Bw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const Qw=(i,e)=>e.some(n=>i instanceof n);let Y_,X_;function Kw(){return Y_||(Y_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Yw(){return X_||(X_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const P0=new WeakMap,rm=new WeakMap,k0=new WeakMap,Fd=new WeakMap,Dm=new WeakMap;function Xw(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(qi(i.result)),o()},f=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&P0.set(n,i)}).catch(()=>{}),Dm.set(e,i),e}function $w(i){if(rm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});rm.set(i,e)}let im={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return rm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||k0.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qi(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Zw(i){im=i(im)}function Ww(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Qd(this),e,...n);return k0.set(s,e.sort?e.sort():[e]),qi(s)}:Yw().includes(i)?function(...e){return i.apply(Qd(this),e),qi(P0.get(this))}:function(...e){return qi(i.apply(Qd(this),e))}}function Jw(i){return typeof i=="function"?Ww(i):(i instanceof IDBTransaction&&$w(i),Qw(i,Kw())?new Proxy(i,im):i)}function qi(i){if(i instanceof IDBRequest)return Xw(i);if(Fd.has(i))return Fd.get(i);const e=Jw(i);return e!==i&&(Fd.set(i,e),Dm.set(e,i)),e}const Qd=i=>Dm.get(i);function eA(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),m=qi(f);return s&&f.addEventListener("upgradeneeded",p=>{s(qi(f.result),p.oldVersion,p.newVersion,qi(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const tA=["get","getKey","getAll","getAllKeys","count"],nA=["put","add","delete","clear"],Kd=new Map;function $_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Kd.get(e))return Kd.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=nA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||tA.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&p.done]))[0]};return Kd.set(e,u),u}Zw(i=>({...i,get:(e,n,s)=>$_(e,n)||i.get(e,n,s),has:(e,n)=>!!$_(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function iA(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sm="@firebase/app",Z_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=new Nm("@firebase/app"),sA="@firebase/app-compat",aA="@firebase/analytics-compat",oA="@firebase/analytics",lA="@firebase/app-check-compat",uA="@firebase/app-check",cA="@firebase/auth",hA="@firebase/auth-compat",fA="@firebase/database",dA="@firebase/data-connect",mA="@firebase/database-compat",gA="@firebase/functions",pA="@firebase/functions-compat",yA="@firebase/installations",_A="@firebase/installations-compat",vA="@firebase/messaging",EA="@firebase/messaging-compat",TA="@firebase/performance",SA="@firebase/performance-compat",bA="@firebase/remote-config",wA="@firebase/remote-config-compat",AA="@firebase/storage",RA="@firebase/storage-compat",IA="@firebase/firestore",xA="@firebase/ai",CA="@firebase/firestore-compat",NA="firebase",DA="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="[DEFAULT]",OA={[sm]:"fire-core",[sA]:"fire-core-compat",[oA]:"fire-analytics",[aA]:"fire-analytics-compat",[uA]:"fire-app-check",[lA]:"fire-app-check-compat",[cA]:"fire-auth",[hA]:"fire-auth-compat",[fA]:"fire-rtdb",[dA]:"fire-data-connect",[mA]:"fire-rtdb-compat",[gA]:"fire-fn",[pA]:"fire-fn-compat",[yA]:"fire-iid",[_A]:"fire-iid-compat",[vA]:"fire-fcm",[EA]:"fire-fcm-compat",[TA]:"fire-perf",[SA]:"fire-perf-compat",[bA]:"fire-rc",[wA]:"fire-rc-compat",[AA]:"fire-gcs",[RA]:"fire-gcs-compat",[IA]:"fire-fst",[CA]:"fire-fst-compat",[xA]:"fire-vertex","fire-js":"fire-js",[NA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new Map,VA=new Map,om=new Map;function W_(i,e){try{i.container.addComponent(e)}catch(n){ti.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Za(i){const e=i.name;if(om.has(e))return ti.debug(`There were multiple attempts to register component ${e}.`),!1;om.set(e,i);for(const n of Zc.values())W_(n,i);for(const n of VA.values())W_(n,i);return!0}function Om(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function hn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bi=new $l("app","Firebase",MA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=DA;function L0(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:am,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Bi.create("bad-app-name",{appName:String(o)});if(n||(n=D0()),!n)throw Bi.create("no-options");const u=Zc.get(o);if(u){if(Us(n,u.options)&&Us(s,u.config))return u;throw Bi.create("duplicate-app",{appName:o})}const f=new qw(o);for(const p of om.values())f.addComponent(p);const m=new PA(n,s,f);return Zc.set(o,m),m}function U0(i=am){const e=Zc.get(i);if(!e&&i===am&&D0())return L0();if(!e)throw Bi.create("no-app",{appName:i});return e}function Hi(i,e,n){let s=OA[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ti.warn(f.join(" "));return}Za(new js(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="firebase-heartbeat-database",LA=1,ql="firebase-heartbeat-store";let Yd=null;function j0(){return Yd||(Yd=eA(kA,LA,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ql)}catch(n){console.warn(n)}}}}).catch(i=>{throw Bi.create("idb-open",{originalErrorMessage:i.message})})),Yd}async function UA(i){try{const n=(await j0()).transaction(ql),s=await n.objectStore(ql).get(z0(i));return await n.done,s}catch(e){if(e instanceof ai)ti.warn(e.message);else{const n=Bi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ti.warn(n.message)}}}async function J_(i,e){try{const s=(await j0()).transaction(ql,"readwrite");await s.objectStore(ql).put(e,z0(i)),await s.done}catch(n){if(n instanceof ai)ti.warn(n.message);else{const s=Bi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ti.warn(s.message)}}}function z0(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=1024,zA=30;class qA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=ev();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>zA){const f=GA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ti.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ev(),{heartbeatsToSend:s,unsentEntries:o}=BA(this._heartbeatsCache.heartbeats),u=$c(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return ti.warn(n),""}}}function ev(){return new Date().toISOString().substring(0,10)}function BA(i,e=jA){const n=[];let s=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),tv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),tv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class HA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cw()?Nw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return J_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return J_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function tv(i){return $c(JSON.stringify({version:2,heartbeats:i})).length}function GA(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(i){Za(new js("platform-logger",e=>new rA(e),"PRIVATE")),Za(new js("heartbeat",e=>new qA(e),"PRIVATE")),Hi(sm,Z_,i),Hi(sm,Z_,"esm2020"),Hi("fire-js","")}FA("");var nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gi,q0;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,w){function A(){}A.prototype=w.prototype,N.D=w.prototype,N.prototype=new A,N.prototype.constructor=N,N.C=function(D,M,P){for(var C=Array(arguments.length-2),at=2;at<arguments.length;at++)C[at-2]=arguments[at];return w.prototype[M].apply(D,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,w,A){A||(A=0);var D=Array(16);if(typeof w=="string")for(var M=0;16>M;++M)D[M]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(M=0;16>M;++M)D[M]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=N.g[0],A=N.g[1],M=N.g[2];var P=N.g[3],C=w+(P^A&(M^P))+D[0]+3614090360&4294967295;w=A+(C<<7&4294967295|C>>>25),C=P+(M^w&(A^M))+D[1]+3905402710&4294967295,P=w+(C<<12&4294967295|C>>>20),C=M+(A^P&(w^A))+D[2]+606105819&4294967295,M=P+(C<<17&4294967295|C>>>15),C=A+(w^M&(P^w))+D[3]+3250441966&4294967295,A=M+(C<<22&4294967295|C>>>10),C=w+(P^A&(M^P))+D[4]+4118548399&4294967295,w=A+(C<<7&4294967295|C>>>25),C=P+(M^w&(A^M))+D[5]+1200080426&4294967295,P=w+(C<<12&4294967295|C>>>20),C=M+(A^P&(w^A))+D[6]+2821735955&4294967295,M=P+(C<<17&4294967295|C>>>15),C=A+(w^M&(P^w))+D[7]+4249261313&4294967295,A=M+(C<<22&4294967295|C>>>10),C=w+(P^A&(M^P))+D[8]+1770035416&4294967295,w=A+(C<<7&4294967295|C>>>25),C=P+(M^w&(A^M))+D[9]+2336552879&4294967295,P=w+(C<<12&4294967295|C>>>20),C=M+(A^P&(w^A))+D[10]+4294925233&4294967295,M=P+(C<<17&4294967295|C>>>15),C=A+(w^M&(P^w))+D[11]+2304563134&4294967295,A=M+(C<<22&4294967295|C>>>10),C=w+(P^A&(M^P))+D[12]+1804603682&4294967295,w=A+(C<<7&4294967295|C>>>25),C=P+(M^w&(A^M))+D[13]+4254626195&4294967295,P=w+(C<<12&4294967295|C>>>20),C=M+(A^P&(w^A))+D[14]+2792965006&4294967295,M=P+(C<<17&4294967295|C>>>15),C=A+(w^M&(P^w))+D[15]+1236535329&4294967295,A=M+(C<<22&4294967295|C>>>10),C=w+(M^P&(A^M))+D[1]+4129170786&4294967295,w=A+(C<<5&4294967295|C>>>27),C=P+(A^M&(w^A))+D[6]+3225465664&4294967295,P=w+(C<<9&4294967295|C>>>23),C=M+(w^A&(P^w))+D[11]+643717713&4294967295,M=P+(C<<14&4294967295|C>>>18),C=A+(P^w&(M^P))+D[0]+3921069994&4294967295,A=M+(C<<20&4294967295|C>>>12),C=w+(M^P&(A^M))+D[5]+3593408605&4294967295,w=A+(C<<5&4294967295|C>>>27),C=P+(A^M&(w^A))+D[10]+38016083&4294967295,P=w+(C<<9&4294967295|C>>>23),C=M+(w^A&(P^w))+D[15]+3634488961&4294967295,M=P+(C<<14&4294967295|C>>>18),C=A+(P^w&(M^P))+D[4]+3889429448&4294967295,A=M+(C<<20&4294967295|C>>>12),C=w+(M^P&(A^M))+D[9]+568446438&4294967295,w=A+(C<<5&4294967295|C>>>27),C=P+(A^M&(w^A))+D[14]+3275163606&4294967295,P=w+(C<<9&4294967295|C>>>23),C=M+(w^A&(P^w))+D[3]+4107603335&4294967295,M=P+(C<<14&4294967295|C>>>18),C=A+(P^w&(M^P))+D[8]+1163531501&4294967295,A=M+(C<<20&4294967295|C>>>12),C=w+(M^P&(A^M))+D[13]+2850285829&4294967295,w=A+(C<<5&4294967295|C>>>27),C=P+(A^M&(w^A))+D[2]+4243563512&4294967295,P=w+(C<<9&4294967295|C>>>23),C=M+(w^A&(P^w))+D[7]+1735328473&4294967295,M=P+(C<<14&4294967295|C>>>18),C=A+(P^w&(M^P))+D[12]+2368359562&4294967295,A=M+(C<<20&4294967295|C>>>12),C=w+(A^M^P)+D[5]+4294588738&4294967295,w=A+(C<<4&4294967295|C>>>28),C=P+(w^A^M)+D[8]+2272392833&4294967295,P=w+(C<<11&4294967295|C>>>21),C=M+(P^w^A)+D[11]+1839030562&4294967295,M=P+(C<<16&4294967295|C>>>16),C=A+(M^P^w)+D[14]+4259657740&4294967295,A=M+(C<<23&4294967295|C>>>9),C=w+(A^M^P)+D[1]+2763975236&4294967295,w=A+(C<<4&4294967295|C>>>28),C=P+(w^A^M)+D[4]+1272893353&4294967295,P=w+(C<<11&4294967295|C>>>21),C=M+(P^w^A)+D[7]+4139469664&4294967295,M=P+(C<<16&4294967295|C>>>16),C=A+(M^P^w)+D[10]+3200236656&4294967295,A=M+(C<<23&4294967295|C>>>9),C=w+(A^M^P)+D[13]+681279174&4294967295,w=A+(C<<4&4294967295|C>>>28),C=P+(w^A^M)+D[0]+3936430074&4294967295,P=w+(C<<11&4294967295|C>>>21),C=M+(P^w^A)+D[3]+3572445317&4294967295,M=P+(C<<16&4294967295|C>>>16),C=A+(M^P^w)+D[6]+76029189&4294967295,A=M+(C<<23&4294967295|C>>>9),C=w+(A^M^P)+D[9]+3654602809&4294967295,w=A+(C<<4&4294967295|C>>>28),C=P+(w^A^M)+D[12]+3873151461&4294967295,P=w+(C<<11&4294967295|C>>>21),C=M+(P^w^A)+D[15]+530742520&4294967295,M=P+(C<<16&4294967295|C>>>16),C=A+(M^P^w)+D[2]+3299628645&4294967295,A=M+(C<<23&4294967295|C>>>9),C=w+(M^(A|~P))+D[0]+4096336452&4294967295,w=A+(C<<6&4294967295|C>>>26),C=P+(A^(w|~M))+D[7]+1126891415&4294967295,P=w+(C<<10&4294967295|C>>>22),C=M+(w^(P|~A))+D[14]+2878612391&4294967295,M=P+(C<<15&4294967295|C>>>17),C=A+(P^(M|~w))+D[5]+4237533241&4294967295,A=M+(C<<21&4294967295|C>>>11),C=w+(M^(A|~P))+D[12]+1700485571&4294967295,w=A+(C<<6&4294967295|C>>>26),C=P+(A^(w|~M))+D[3]+2399980690&4294967295,P=w+(C<<10&4294967295|C>>>22),C=M+(w^(P|~A))+D[10]+4293915773&4294967295,M=P+(C<<15&4294967295|C>>>17),C=A+(P^(M|~w))+D[1]+2240044497&4294967295,A=M+(C<<21&4294967295|C>>>11),C=w+(M^(A|~P))+D[8]+1873313359&4294967295,w=A+(C<<6&4294967295|C>>>26),C=P+(A^(w|~M))+D[15]+4264355552&4294967295,P=w+(C<<10&4294967295|C>>>22),C=M+(w^(P|~A))+D[6]+2734768916&4294967295,M=P+(C<<15&4294967295|C>>>17),C=A+(P^(M|~w))+D[13]+1309151649&4294967295,A=M+(C<<21&4294967295|C>>>11),C=w+(M^(A|~P))+D[4]+4149444226&4294967295,w=A+(C<<6&4294967295|C>>>26),C=P+(A^(w|~M))+D[11]+3174756917&4294967295,P=w+(C<<10&4294967295|C>>>22),C=M+(w^(P|~A))+D[2]+718787259&4294967295,M=P+(C<<15&4294967295|C>>>17),C=A+(P^(M|~w))+D[9]+3951481745&4294967295,N.g[0]=N.g[0]+w&4294967295,N.g[1]=N.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,N.g[2]=N.g[2]+M&4294967295,N.g[3]=N.g[3]+P&4294967295}s.prototype.u=function(N,w){w===void 0&&(w=N.length);for(var A=w-this.blockSize,D=this.B,M=this.h,P=0;P<w;){if(M==0)for(;P<=A;)o(this,N,P),P+=this.blockSize;if(typeof N=="string"){for(;P<w;)if(D[M++]=N.charCodeAt(P++),M==this.blockSize){o(this,D),M=0;break}}else for(;P<w;)if(D[M++]=N[P++],M==this.blockSize){o(this,D),M=0;break}}this.h=M,this.o+=w},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var w=1;w<N.length-8;++w)N[w]=0;var A=8*this.o;for(w=N.length-8;w<N.length;++w)N[w]=A&255,A/=256;for(this.u(N),N=Array(16),w=A=0;4>w;++w)for(var D=0;32>D;D+=8)N[A++]=this.g[w]>>>D&255;return N};function u(N,w){var A=m;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=w(N)}function f(N,w){this.h=w;for(var A=[],D=!0,M=N.length-1;0<=M;M--){var P=N[M]|0;D&&P==w||(A[M]=P,D=!1)}this.g=A}var m={};function p(N){return-128<=N&&128>N?u(N,function(w){return new f([w|0],0>w?-1:0)}):new f([N|0],0>N?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return R;if(0>N)return W(y(-N));for(var w=[],A=1,D=0;N>=A;D++)w[D]=N/A|0,A*=4294967296;return new f(w,0)}function S(N,w){if(N.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(N.charAt(0)=="-")return W(S(N.substring(1),w));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=y(Math.pow(w,8)),D=R,M=0;M<N.length;M+=8){var P=Math.min(8,N.length-M),C=parseInt(N.substring(M,M+P),w);8>P?(P=y(Math.pow(w,P)),D=D.j(P).add(y(C))):(D=D.j(A),D=D.add(y(C)))}return D}var R=p(0),I=p(1),z=p(16777216);i=f.prototype,i.m=function(){if(J(this))return-W(this).m();for(var N=0,w=1,A=0;A<this.g.length;A++){var D=this.i(A);N+=(0<=D?D:4294967296+D)*w,w*=4294967296}return N},i.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(F(this))return"0";if(J(this))return"-"+W(this).toString(N);for(var w=y(Math.pow(N,6)),A=this,D="";;){var M=we(A,w).g;A=ce(A,M.j(w));var P=((0<A.g.length?A.g[0]:A.h)>>>0).toString(N);if(A=M,F(A))return P+D;for(;6>P.length;)P="0"+P;D=P+D}},i.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function F(N){if(N.h!=0)return!1;for(var w=0;w<N.g.length;w++)if(N.g[w]!=0)return!1;return!0}function J(N){return N.h==-1}i.l=function(N){return N=ce(this,N),J(N)?-1:F(N)?0:1};function W(N){for(var w=N.g.length,A=[],D=0;D<w;D++)A[D]=~N.g[D];return new f(A,~N.h).add(I)}i.abs=function(){return J(this)?W(this):this},i.add=function(N){for(var w=Math.max(this.g.length,N.g.length),A=[],D=0,M=0;M<=w;M++){var P=D+(this.i(M)&65535)+(N.i(M)&65535),C=(P>>>16)+(this.i(M)>>>16)+(N.i(M)>>>16);D=C>>>16,P&=65535,C&=65535,A[M]=C<<16|P}return new f(A,A[A.length-1]&-2147483648?-1:0)};function ce(N,w){return N.add(W(w))}i.j=function(N){if(F(this)||F(N))return R;if(J(this))return J(N)?W(this).j(W(N)):W(W(this).j(N));if(J(N))return W(this.j(W(N)));if(0>this.l(z)&&0>N.l(z))return y(this.m()*N.m());for(var w=this.g.length+N.g.length,A=[],D=0;D<2*w;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(var M=0;M<N.g.length;M++){var P=this.i(D)>>>16,C=this.i(D)&65535,at=N.i(M)>>>16,He=N.i(M)&65535;A[2*D+2*M]+=C*He,ue(A,2*D+2*M),A[2*D+2*M+1]+=P*He,ue(A,2*D+2*M+1),A[2*D+2*M+1]+=C*at,ue(A,2*D+2*M+1),A[2*D+2*M+2]+=P*at,ue(A,2*D+2*M+2)}for(D=0;D<w;D++)A[D]=A[2*D+1]<<16|A[2*D];for(D=w;D<2*w;D++)A[D]=0;return new f(A,0)};function ue(N,w){for(;(N[w]&65535)!=N[w];)N[w+1]+=N[w]>>>16,N[w]&=65535,w++}function ae(N,w){this.g=N,this.h=w}function we(N,w){if(F(w))throw Error("division by zero");if(F(N))return new ae(R,R);if(J(N))return w=we(W(N),w),new ae(W(w.g),W(w.h));if(J(w))return w=we(N,W(w)),new ae(W(w.g),w.h);if(30<N.g.length){if(J(N)||J(w))throw Error("slowDivide_ only works with positive integers.");for(var A=I,D=w;0>=D.l(N);)A=ge(A),D=ge(D);var M=Re(A,1),P=Re(D,1);for(D=Re(D,2),A=Re(A,2);!F(D);){var C=P.add(D);0>=C.l(N)&&(M=M.add(A),P=C),D=Re(D,1),A=Re(A,1)}return w=ce(N,M.j(w)),new ae(M,w)}for(M=R;0<=N.l(w);){for(A=Math.max(1,Math.floor(N.m()/w.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),P=y(A),C=P.j(w);J(C)||0<C.l(N);)A-=D,P=y(A),C=P.j(w);F(P)&&(P=I),M=M.add(P),N=ce(N,C)}return new ae(M,N)}i.A=function(N){return we(this,N).h},i.and=function(N){for(var w=Math.max(this.g.length,N.g.length),A=[],D=0;D<w;D++)A[D]=this.i(D)&N.i(D);return new f(A,this.h&N.h)},i.or=function(N){for(var w=Math.max(this.g.length,N.g.length),A=[],D=0;D<w;D++)A[D]=this.i(D)|N.i(D);return new f(A,this.h|N.h)},i.xor=function(N){for(var w=Math.max(this.g.length,N.g.length),A=[],D=0;D<w;D++)A[D]=this.i(D)^N.i(D);return new f(A,this.h^N.h)};function ge(N){for(var w=N.g.length+1,A=[],D=0;D<w;D++)A[D]=N.i(D)<<1|N.i(D-1)>>>31;return new f(A,N.h)}function Re(N,w){var A=w>>5;w%=32;for(var D=N.g.length-A,M=[],P=0;P<D;P++)M[P]=0<w?N.i(P+A)>>>w|N.i(P+A+1)<<32-w:N.i(P+A);return new f(M,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,q0=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=S,Gi=f}).apply(typeof nv<"u"?nv:typeof self<"u"?self:typeof window<"u"?window:{});var Oc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var B0,Dl,H0,zc,lm,G0,F0,Q0;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oc=="object"&&Oc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,g){if(g)e:{var _=s;c=c.split(".");for(var b=0;b<c.length-1;b++){var L=c[b];if(!(L in _))break e;_=_[L]}c=c[c.length-1],b=_[c],g=g(b),g!=b&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function u(c,g){c instanceof String&&(c+="");var _=0,b=!1,L={next:function(){if(!b&&_<c.length){var H=_++;return{value:g(H,c[H]),done:!1}}return b=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function p(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function y(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function S(c,g,_){return c.call.apply(c.bind,arguments)}function R(c,g,_){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,b),c.apply(g,L)}}return function(){return c.apply(g,arguments)}}function I(c,g,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:R,I.apply(null,arguments)}function z(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var b=_.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function F(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(b,L,H){for(var te=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)te[ke-2]=arguments[ke];return g.prototype[L].apply(b,te)}}function J(c){const g=c.length;if(0<g){const _=Array(g);for(let b=0;b<g;b++)_[b]=c[b];return _}return[]}function W(c,g){for(let _=1;_<arguments.length;_++){const b=arguments[_];if(p(b)){const L=c.length||0,H=b.length||0;c.length=L+H;for(let te=0;te<H;te++)c[L+te]=b[te]}else c.push(b)}}class ce{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function ue(c){return/^[\s\xa0]*$/.test(c)}function ae(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function we(c){return we[" "](c),c}we[" "]=function(){};var ge=ae().indexOf("Gecko")!=-1&&!(ae().toLowerCase().indexOf("webkit")!=-1&&ae().indexOf("Edge")==-1)&&!(ae().indexOf("Trident")!=-1||ae().indexOf("MSIE")!=-1)&&ae().indexOf("Edge")==-1;function Re(c,g,_){for(const b in c)g.call(_,c[b],b,c)}function N(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function w(c){const g={};for(const _ in c)g[_]=c[_];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,g){let _,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(_ in b)c[_]=b[_];for(let H=0;H<A.length;H++)_=A[H],Object.prototype.hasOwnProperty.call(b,_)&&(c[_]=b[_])}}function M(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function P(c){m.setTimeout(()=>{throw c},0)}function C(){var c=ze;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class at{constructor(){this.h=this.g=null}add(g,_){const b=He.get();b.set(g,_),this.h?this.h.next=b:this.g=b,this.h=b}}var He=new ce(()=>new G,c=>c.reset());class G{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,he=!1,ze=new at,O=()=>{const c=m.Promise.resolve(void 0);ne=()=>{c.then(Z)}};var Z=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(_){P(_)}var g=He;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}he=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var de=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,g),m.removeEventListener("test",_,g)}catch{}return c})();function Ie(c,g){if(ee.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(ge){e:{try{we(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Te[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ie.aa.h.call(this)}}F(Ie,ee);var Te={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var vt="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function Sn(c,g,_,b,L){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!b,this.ha=L,this.key=++Qe,this.da=this.fa=!1}function Zn(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function jn(c){this.src=c,this.g={},this.h=0}jn.prototype.add=function(c,g,_,b,L){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var te=nt(c,g,b,L);return-1<te?(g=c[te],_||(g.fa=!1)):(g=new Sn(g,this.src,H,!!b,L),g.fa=_,c.push(g)),g};function pe(c,g){var _=g.type;if(_ in c.g){var b=c.g[_],L=Array.prototype.indexOf.call(b,g,void 0),H;(H=0<=L)&&Array.prototype.splice.call(b,L,1),H&&(Zn(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function nt(c,g,_,b){for(var L=0;L<c.length;++L){var H=c[L];if(!H.da&&H.listener==g&&H.capture==!!_&&H.ha==b)return L}return-1}var wr="closure_lm_"+(1e6*Math.random()|0),yo={};function lu(c,g,_,b,L){if(Array.isArray(g)){for(var H=0;H<g.length;H++)lu(c,g[H],_,b,L);return null}return _=uu(_),c&&c[vt]?c.K(g,_,y(b)?!!b.capture:!1,L):bn(c,g,_,!1,b,L)}function bn(c,g,_,b,L,H){if(!g)throw Error("Invalid event type");var te=y(L)?!!L.capture:!!L,ke=$s(c);if(ke||(c[wr]=ke=new jn(c)),_=ke.add(g,_,b,te,H),_.proxy)return _;if(b=Lh(),_.proxy=b,b.src=c,b.listener=_,c.addEventListener)de||(L=te),L===void 0&&(L=!1),c.addEventListener(g.toString(),b,L);else if(c.attachEvent)c.attachEvent(es(g.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Lh(){function c(_){return g.call(c.src,c.listener,_)}const g=Uh;return c}function _o(c,g,_,b,L){if(Array.isArray(g))for(var H=0;H<g.length;H++)_o(c,g[H],_,b,L);else b=y(b)?!!b.capture:!!b,_=uu(_),c&&c[vt]?(c=c.i,g=String(g).toString(),g in c.g&&(H=c.g[g],_=nt(H,_,b,L),-1<_&&(Zn(H[_]),Array.prototype.splice.call(H,_,1),H.length==0&&(delete c.g[g],c.h--)))):c&&(c=$s(c))&&(g=c.g[g.toString()],c=-1,g&&(c=nt(g,_,b,L)),(_=-1<c?g[c]:null)&&Xs(_))}function Xs(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[vt])pe(g.i,c);else{var _=c.type,b=c.proxy;g.removeEventListener?g.removeEventListener(_,b,c.capture):g.detachEvent?g.detachEvent(es(_),b):g.addListener&&g.removeListener&&g.removeListener(b),(_=$s(g))?(pe(_,c),_.h==0&&(_.src=null,g[wr]=null)):Zn(c)}}}function es(c){return c in yo?yo[c]:yo[c]="on"+c}function Uh(c,g){if(c.da)c=!0;else{g=new Ie(g,this);var _=c.listener,b=c.ha||c.src;c.fa&&Xs(c),c=_.call(b,g)}return c}function $s(c){return c=c[wr],c instanceof jn?c:null}var vo="__closure_events_fn_"+(1e9*Math.random()>>>0);function uu(c){return typeof c=="function"?c:(c[vo]||(c[vo]=function(g){return c.handleEvent(g)}),c[vo])}function ft(){re.call(this),this.i=new jn(this),this.M=this,this.F=null}F(ft,re),ft.prototype[vt]=!0,ft.prototype.removeEventListener=function(c,g,_,b){_o(this,c,g,_,b)};function Ke(c,g){var _,b=c.F;if(b)for(_=[];b;b=b.F)_.push(b);if(c=c.M,b=g.type||g,typeof g=="string")g=new ee(g,c);else if(g instanceof ee)g.target=g.target||c;else{var L=g;g=new ee(b,c),D(g,L)}if(L=!0,_)for(var H=_.length-1;0<=H;H--){var te=g.g=_[H];L=fn(te,b,!0,g)&&L}if(te=g.g=c,L=fn(te,b,!0,g)&&L,L=fn(te,b,!1,g)&&L,_)for(H=0;H<_.length;H++)te=g.g=_[H],L=fn(te,b,!1,g)&&L}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],b=0;b<_.length;b++)Zn(_[b]);delete c.g[g],c.h--}}this.F=null},ft.prototype.K=function(c,g,_,b){return this.i.add(String(c),g,!1,_,b)},ft.prototype.L=function(c,g,_,b){return this.i.add(String(c),g,!0,_,b)};function fn(c,g,_,b){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,H=0;H<g.length;++H){var te=g[H];if(te&&!te.da&&te.capture==_){var ke=te.listener,xt=te.ha||te.src;te.fa&&pe(c.i,te),L=ke.call(xt,b)!==!1&&L}}return L&&!b.defaultPrevented}function Xt(c,g,_){if(typeof c=="function")_&&(c=I(c,_));else if(c&&typeof c.handleEvent=="function")c=I(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:m.setTimeout(c,g||0)}function cu(c){c.g=Xt(()=>{c.g=null,c.i&&(c.i=!1,cu(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class jh extends re{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:cu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ts(c){re.call(this),this.h=c,this.g={}}F(ts,re);var ns=[];function rs(c){Re(c.g,function(g,_){this.g.hasOwnProperty(_)&&Xs(g)},c),c.g={}}ts.prototype.N=function(){ts.aa.N.call(this),rs(this)},ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zn=m.JSON.stringify,Zs=m.JSON.parse,is=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Eo(){}Eo.prototype.h=null;function To(c){return c.h||(c.h=c.i())}function So(){}var Ar={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rr(){ee.call(this,"d")}F(Rr,ee);function bo(){ee.call(this,"c")}F(bo,ee);var Wn={},wo=null;function li(){return wo=wo||new ft}Wn.La="serverreachability";function Ws(c){ee.call(this,Wn.La,c)}F(Ws,ee);function ui(c){const g=li();Ke(g,new Ws(g))}Wn.STAT_EVENT="statevent";function hu(c,g){ee.call(this,Wn.STAT_EVENT,c),this.stat=g}F(hu,ee);function lt(c){const g=li();Ke(g,new hu(g,c))}Wn.Ma="timingevent";function It(c,g){ee.call(this,Wn.Ma,c),this.size=g}F(It,ee);function Et(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},g)}function wn(){this.g=!0}wn.prototype.xa=function(){this.g=!1};function Ao(c,g,_,b,L,H){c.info(function(){if(c.g)if(H)for(var te="",ke=H.split("&"),xt=0;xt<ke.length;xt++){var Le=ke[xt].split("=");if(1<Le.length){var Pt=Le[0];Le=Le[1];var Ct=Pt.split("_");te=2<=Ct.length&&Ct[1]=="type"?te+(Pt+"="+Le+"&"):te+(Pt+"=redacted&")}}else te=null;else te=H;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+g+`
`+_+`
`+te})}function zh(c,g,_,b,L,H,te){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+g+`
`+_+`
`+H+" "+te})}function ci(c,g,_,b){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+ss(c,_)+(b?" "+b:"")})}function fu(c,g){c.info(function(){return"TIMEOUT: "+g})}wn.prototype.info=function(){};function ss(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var b=_[c];if(!(2>b.length)){var L=b[1];if(Array.isArray(L)&&!(1>L.length)){var H=L[0];if(H!="noop"&&H!="stop"&&H!="close")for(var te=1;te<L.length;te++)L[te]=""}}}}return zn(_)}catch{return g}}var hi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ir={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jn;function er(){}F(er,Eo),er.prototype.g=function(){return new XMLHttpRequest},er.prototype.i=function(){return{}},Jn=new er;function nn(c,g,_,b){this.j=c,this.i=g,this.l=_,this.R=b||1,this.U=new ts(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gt}function gt(){this.i=null,this.g="",this.h=!1}var Ro={},Js={};function qn(c,g,_){c.L=1,c.v=cs(dn(g)),c.m=_,c.P=!0,xr(c,null)}function xr(c,g){c.F=Date.now(),as(c),c.A=dn(c.v);var _=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),Oo(_.i,"t",b),c.C=0,_=c.j.J,c.h=new gt,c.g=xu(c.j,_?g:null,!c.m),0<c.O&&(c.M=new jh(I(c.Y,c,c.g),c.O)),g=c.U,_=c.g,b=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(ns[0]=L.toString()),L=ns);for(var H=0;H<L.length;H++){var te=lu(_,L[H],b||g.handleEvent,!1,g.h||g);if(!te)break;g.g[te.key]=te}g=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),ui(),Ao(c.i,c.u,c.A,c.l,c.R,c.m)}nn.prototype.ca=function(c){c=c.target;const g=this.M;g&&xn(c)==3?g.j():this.Y(c)},nn.prototype.Y=function(c){try{if(c==this.g)e:{const Ct=xn(this.g);var g=this.g.Ba();const kr=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||Eu(this.g)))){this.J||Ct!=4||g==7||(g==8||0>=kr?ui(3):ui(2)),fi(this);var _=this.g.Z();this.X=_;t:if(du(this)){var b=Eu(this.g);c="";var L=b.length,H=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zt(this),tr(this);var te="";break t}this.h.i=new m.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,c+=this.h.i.decode(b[g],{stream:!(H&&g==L-1)});b.length=0,this.h.g+=c,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=_==200,zh(this.i,this.u,this.A,this.l,this.R,Ct,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,xt=this.g;if((ke=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ue(ke)){var Le=ke;break t}}Le=null}if(_=Le)ci(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,os(this,_);else{this.o=!1,this.s=3,lt(12),zt(this),tr(this);break e}}if(this.P){_=!0;let qt;for(;!this.J&&this.C<te.length;)if(qt=mu(this,te),qt==Js){Ct==4&&(this.s=4,lt(14),_=!1),ci(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==Ro){this.s=4,lt(15),ci(this.i,this.l,te,"[Invalid Chunk]"),_=!1;break}else ci(this.i,this.l,qt,null),os(this,qt);if(du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||te.length!=0||this.h.h||(this.s=1,lt(16),_=!1),this.o=this.o&&_,!_)ci(this.i,this.l,te,"[Invalid Chunked Response]"),zt(this),tr(this);else if(0<te.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),_s(Pt),Pt.M=!0,lt(11))}}else ci(this.i,this.l,te,null),os(this,te);Ct==4&&zt(this),this.o&&!this.J&&(Ct==4?Au(this.j,this):(this.o=!1,as(this)))}else Fh(this.g),_==400&&0<te.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),zt(this),tr(this)}}}catch{}finally{}};function du(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function mu(c,g){var _=c.C,b=g.indexOf(`
`,_);return b==-1?Js:(_=Number(g.substring(_,b)),isNaN(_)?Ro:(b+=1,b+_>g.length?Js:(g=g.slice(b,b+_),c.C=b+_,g)))}nn.prototype.cancel=function(){this.J=!0,zt(this)};function as(c){c.S=Date.now()+c.I,gu(c,c.I)}function gu(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Et(I(c.ba,c),g)}function fi(c){c.B&&(m.clearTimeout(c.B),c.B=null)}nn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(fu(this.i,this.A),this.L!=2&&(ui(),lt(17)),zt(this),this.s=2,tr(this)):gu(this,this.S-c)};function tr(c){c.j.G==0||c.J||Au(c.j,c)}function zt(c){fi(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,rs(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function os(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||Io(_.h,c))){if(!c.K&&Io(_.h,c)&&_.G==3){try{var b=_.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)ha(_),ua(_);else break e;Lo(_),lt(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=Et(I(_.Za,_),6e3));if(1>=ta(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Pr(_,11)}else if((c.K||_.g==c)&&ha(_),!ue(g))for(L=_.Da.g.parse(g),g=0;g<L.length;g++){let Le=L[g];if(_.T=Le[0],Le=Le[1],_.G==2)if(Le[0]=="c"){_.K=Le[1],_.ia=Le[2];const Pt=Le[3];Pt!=null&&(_.la=Pt,_.j.info("VER="+_.la));const Ct=Le[4];Ct!=null&&(_.Aa=Ct,_.j.info("SVER="+_.Aa));const kr=Le[5];kr!=null&&typeof kr=="number"&&0<kr&&(b=1.5*kr,_.L=b,_.j.info("backChannelRequestTimeoutMs_="+b)),b=_;const qt=c.g;if(qt){const lr=qt.g?qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lr){var H=b.h;H.g||lr.indexOf("spdy")==-1&&lr.indexOf("quic")==-1&&lr.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(na(H,H.h),H.h=null))}if(b.D){const jo=qt.g?qt.g.getResponseHeader("X-HTTP-Session-Id"):null;jo&&(b.ya=jo,Ze(b.I,b.D,jo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),b=_;var te=c;if(b.qa=Iu(b,b.J?b.ia:null,b.W),te.K){rn(b.h,te);var ke=te,xt=b.L;xt&&(ke.I=xt),ke.B&&(fi(ke),as(ke)),b.g=te}else bu(b);0<_.i.length&&ca(_)}else Le[0]!="stop"&&Le[0]!="close"||Pr(_,7);else _.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Pr(_,7):Po(_):Le[0]!="noop"&&_.l&&_.l.ta(Le),_.v=0)}}ui(4)}catch{}}var pu=class{constructor(c,g){this.g=c,this.map=g}};function Cr(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ea(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ta(c){return c.h?1:c.g?c.g.size:0}function Io(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function na(c,g){c.g?c.g.add(g):c.h=g}function rn(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Cr.prototype.cancel=function(){if(this.i=xo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function xo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return J(c.i)}function qh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var g=[],_=c.length,b=0;b<_;b++)g.push(c[b]);return g}g=[],_=0;for(b in c)g[_++]=c[b];return g}function ra(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const b in c)g[_++]=b;return g}}}function Co(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=ra(c),b=qh(c),L=b.length,H=0;H<L;H++)g.call(void 0,b[H],_&&_[H],c)}var ls=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bh(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var b=c[_].indexOf("="),L=null;if(0<=b){var H=c[_].substring(0,b);L=c[_].substring(b+1)}else H=c[_];g(H,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Tt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Tt){this.h=c.h,us(this,c.j),this.o=c.o,this.g=c.g,di(this,c.s),this.l=c.l;var g=c.i,_=new Dr;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Nr(this,_),this.m=c.m}else c&&(g=String(c).match(ls))?(this.h=!1,us(this,g[1]||"",!0),this.o=An(g[2]||""),this.g=An(g[3]||"",!0),di(this,g[4]),this.l=An(g[5]||"",!0),Nr(this,g[6]||"",!0),this.m=An(g[7]||"")):(this.h=!1,this.i=new Dr(null,this.h))}Tt.prototype.toString=function(){var c=[],g=this.j;g&&c.push(hs(g,No,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(hs(g,No,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(hs(_,_.charAt(0)=="/"?Hh:Do,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",hs(_,ia)),c.join("")};function dn(c){return new Tt(c)}function us(c,g,_){c.j=_?An(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function di(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Nr(c,g,_){g instanceof Dr?(c.i=g,_u(c.i,c.h)):(_||(g=hs(g,Gh)),c.i=new Dr(g,c.h))}function Ze(c,g,_){c.i.set(g,_)}function cs(c){return Ze(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function An(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function hs(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,yu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function yu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var No=/[#\/\?@]/g,Do=/[#\?:]/g,Hh=/[#\?]/g,Gh=/[#\?@]/g,ia=/#/g;function Dr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Rn(c){c.g||(c.g=new Map,c.h=0,c.i&&Bh(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}i=Dr.prototype,i.add=function(c,g){Rn(this),this.i=null,c=nr(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Or(c,g){Rn(c),g=nr(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Vr(c,g){return Rn(c),g=nr(c,g),c.g.has(g)}i.forEach=function(c,g){Rn(this),this.g.forEach(function(_,b){_.forEach(function(L){c.call(g,L,b,this)},this)},this)},i.na=function(){Rn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let b=0;b<g.length;b++){const L=c[b];for(let H=0;H<L.length;H++)_.push(g[b])}return _},i.V=function(c){Rn(this);let g=[];if(typeof c=="string")Vr(this,c)&&(g=g.concat(this.g.get(nr(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},i.set=function(c,g){return Rn(this),this.i=null,c=nr(this,c),Vr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},i.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Oo(c,g,_){Or(c,g),0<_.length&&(c.i=null,c.g.set(nr(c,g),J(_)),c.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var b=g[_];const H=encodeURIComponent(String(b)),te=this.V(b);for(b=0;b<te.length;b++){var L=H;te[b]!==""&&(L+="="+encodeURIComponent(String(te[b]))),c.push(L)}}return this.i=c.join("&")};function nr(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function _u(c,g){g&&!c.j&&(Rn(c),c.i=null,c.g.forEach(function(_,b){var L=b.toLowerCase();b!=L&&(Or(this,b),Oo(this,L,_))},c)),c.j=g}function fs(c,g){const _=new wn;if(m.Image){const b=new Image;b.onload=z(In,_,"TestLoadImage: loaded",!0,g,b),b.onerror=z(In,_,"TestLoadImage: error",!1,g,b),b.onabort=z(In,_,"TestLoadImage: abort",!1,g,b),b.ontimeout=z(In,_,"TestLoadImage: timeout",!1,g,b),m.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else g(!1)}function Bn(c,g){const _=new wn,b=new AbortController,L=setTimeout(()=>{b.abort(),In(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:b.signal}).then(H=>{clearTimeout(L),H.ok?In(_,"TestPingServer: ok",!0,g):In(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),In(_,"TestPingServer: error",!1,g)})}function In(c,g,_,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(_)}catch{}}function ds(){this.g=new is}function rr(c,g,_){const b=_||"";try{Co(c,function(L,H){let te=L;y(L)&&(te=zn(L)),g.push(b+H+"="+encodeURIComponent(te))})}catch(L){throw g.push(b+"type="+encodeURIComponent("_badmap")),L}}function mi(c){this.l=c.Ub||null,this.j=c.eb||!1}F(mi,Eo),mi.prototype.g=function(){return new Mr(this.l,this.j)},mi.prototype.i=(function(c){return function(){return c}})({});function Mr(c,g){ft.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(Mr,ft),i=Mr.prototype,i.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,sr(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||m).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ir(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,sr(this)),this.g&&(this.readyState=3,sr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?ir(this):sr(this),this.readyState==3&&Vo(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,ir(this))},i.Qa=function(c){this.g&&(this.response=c,ir(this))},i.ga=function(){this.g&&ir(this)};function ir(c){c.readyState=4,c.l=null,c.j=null,c.v=null,sr(c)}i.setRequestHeader=function(c,g){this.u.append(c,g)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function sr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Mr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Mo(c){let g="";return Re(c,function(_,b){g+=b,g+=":",g+=_,g+=`\r
`}),g}function Mt(c,g,_){e:{for(b in _){var b=!1;break e}b=!0}b||(_=Mo(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Ze(c,g,_))}function Ge(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(Ge,ft);var sa=/^https?$/i,ms=["POST","PUT"];i=Ge.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,g,_,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jn.g(),this.v=this.o?To(this.o):To(Jn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(H){vu(this,H);return}if(c=_||"",_=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)_.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const H of b.keys())_.set(H,b.get(H));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),L=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(ms,g,void 0))||b||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,te]of _)this.g.setRequestHeader(H,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gs(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){vu(this,H)}};function vu(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,aa(c),ar(c)}function aa(c){c.A||(c.A=!0,Ke(c,"complete"),Ke(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ke(this,"complete"),Ke(this,"abort"),ar(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ar(this,!0)),Ge.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?oa(this):this.bb())},i.bb=function(){oa(this)};function oa(c){if(c.h&&typeof f<"u"&&(!c.v[1]||xn(c)!=4||c.Z()!=2)){if(c.u&&xn(c)==4)Xt(c.Ea,0,c);else if(Ke(c,"readystatechange"),xn(c)==4){c.h=!1;try{const te=c.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var b;if(b=te===0){var L=String(c.D).match(ls)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),b=!sa.test(L?L.toLowerCase():"")}_=b}if(_)Ke(c,"complete"),Ke(c,"success");else{c.m=6;try{var H=2<xn(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",aa(c)}}finally{ar(c)}}}}function ar(c,g){if(c.g){gs(c);const _=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Ke(c,"ready");try{_.onreadystatechange=b}catch{}}}function gs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function xn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Zs(g)}};function Eu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Fh(c){const g={};c=(c.g&&2<=xn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(ue(c[b]))continue;var _=M(c[b]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=g[L]||[];g[L]=H,H.push(_)}N(g,function(b){return b.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ps(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function la(c){this.Aa=0,this.i=[],this.j=new wn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ps("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ps("baseRetryDelayMs",5e3,c),this.cb=ps("retryDelaySeedMs",1e4,c),this.Wa=ps("forwardChannelMaxRetries",2,c),this.wa=ps("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Cr(c&&c.concurrentRequestLimit),this.Da=new ds,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=la.prototype,i.la=8,i.G=1,i.connect=function(c,g,_,b){lt(0),this.W=c,this.H=g||{},_&&b!==void 0&&(this.H.OSID=_,this.H.OAID=b),this.F=this.X,this.I=Iu(this,null,this.W),ca(this)};function Po(c){if(Tu(c),c.G==3){var g=c.U++,_=dn(c.I);if(Ze(_,"SID",c.K),Ze(_,"RID",g),Ze(_,"TYPE","terminate"),ys(c,_),g=new nn(c,c.j,g),g.L=2,g.v=cs(dn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=g.v,_=!0),_||(g.g=xu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),as(g)}Ru(c)}function ua(c){c.g&&(_s(c),c.g.cancel(),c.g=null)}function Tu(c){ua(c),c.u&&(m.clearTimeout(c.u),c.u=null),ha(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function ca(c){if(!ea(c.h)&&!c.s){c.s=!0;var g=c.Ga;ne||O(),he||(ne(),he=!0),ze.add(g,c),c.B=0}}function Qh(c,g){return ta(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Et(I(c.Ga,c,g),Uo(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new nn(this,this.j,c);let H=this.o;if(this.S&&(H?(H=w(H),D(H,this.S)):H=this.S),this.m!==null||this.O||(L.H=H,H=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var b=this.i[_];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Su(this,L,g),_=dn(this.I),Ze(_,"RID",c),Ze(_,"CVER",22),this.D&&Ze(_,"X-HTTP-Session-Id",this.D),ys(this,_),H&&(this.O?g="headers="+encodeURIComponent(String(Mo(H)))+"&"+g:this.m&&Mt(_,this.m,H)),na(this.h,L),this.Ua&&Ze(_,"TYPE","init"),this.P?(Ze(_,"$req",g),Ze(_,"SID","null"),L.T=!0,qn(L,_,null)):qn(L,_,g),this.G=2}}else this.G==3&&(c?ko(this,c):this.i.length==0||ea(this.h)||ko(this))};function ko(c,g){var _;g?_=g.l:_=c.U++;const b=dn(c.I);Ze(b,"SID",c.K),Ze(b,"RID",_),Ze(b,"AID",c.T),ys(c,b),c.m&&c.o&&Mt(b,c.m,c.o),_=new nn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Su(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),na(c.h,_),qn(_,b,g)}function ys(c,g){c.H&&Re(c.H,function(_,b){Ze(g,b,_)}),c.l&&Co({},function(_,b){Ze(g,b,_)})}function Su(c,g,_){_=Math.min(c.i.length,_);var b=c.l?I(c.l.Na,c.l,c):null;e:{var L=c.i;let H=-1;for(;;){const te=["count="+_];H==-1?0<_?(H=L[0].g,te.push("ofs="+H)):H=0:te.push("ofs="+H);let ke=!0;for(let xt=0;xt<_;xt++){let Le=L[xt].g;const Pt=L[xt].map;if(Le-=H,0>Le)H=Math.max(0,L[xt].g-100),ke=!1;else try{rr(Pt,te,"req"+Le+"_")}catch{b&&b(Pt)}}if(ke){b=te.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,b}function bu(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;ne||O(),he||(ne(),he=!0),ze.add(g,c),c.v=0}}function Lo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Et(I(c.Fa,c),Uo(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,wu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Et(I(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),ua(this),wu(this))};function _s(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function wu(c){c.g=new nn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=dn(c.qa);Ze(g,"RID","rpc"),Ze(g,"SID",c.K),Ze(g,"AID",c.T),Ze(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ze(g,"TO",c.ja),Ze(g,"TYPE","xmlhttp"),ys(c,g),c.m&&c.o&&Mt(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=cs(dn(g)),_.m=null,_.P=!0,xr(_,c)}i.Za=function(){this.C!=null&&(this.C=null,ua(this),Lo(this),lt(19))};function ha(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Au(c,g){var _=null;if(c.g==g){ha(c),_s(c),c.g=null;var b=2}else if(Io(c.h,g))_=g.D,rn(c.h,g),b=1;else return;if(c.G!=0){if(g.o)if(b==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var L=c.B;b=li(),Ke(b,new It(b,_)),ca(c)}else bu(c);else if(L=g.s,L==3||L==0&&0<g.X||!(b==1&&Qh(c,g)||b==2&&Lo(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),L){case 1:Pr(c,5);break;case 4:Pr(c,10);break;case 3:Pr(c,6);break;default:Pr(c,2)}}}function Uo(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Pr(c,g){if(c.j.info("Error code "+g),g==2){var _=I(c.fb,c),b=c.Xa;const L=!b;b=new Tt(b||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||us(b,"https"),cs(b),L?fs(b.toString(),_):Bn(b.toString(),_)}else lt(2);c.G=0,c.l&&c.l.sa(g),Ru(c),Tu(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Ru(c){if(c.G=0,c.ka=[],c.l){const g=xo(c.h);(g.length!=0||c.i.length!=0)&&(W(c.ka,g),W(c.ka,c.i),c.h.i.length=0,J(c.i),c.i.length=0),c.l.ra()}}function Iu(c,g,_){var b=_ instanceof Tt?dn(_):new Tt(_);if(b.g!="")g&&(b.g=g+"."+b.g),di(b,b.s);else{var L=m.location;b=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var H=new Tt(null);b&&us(H,b),g&&(H.g=g),L&&di(H,L),_&&(H.l=_),b=H}return _=c.D,g=c.ya,_&&g&&Ze(b,_,g),Ze(b,"VER",c.la),ys(c,b),b}function xu(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Ge(new mi({eb:_})):new Ge(c.pa),g.Ha(c.J),g}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cu(){}i=Cu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function fa(){}fa.prototype.g=function(c,g){return new sn(c,g)};function sn(c,g){ft.call(this),this.g=new la(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!ue(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!ue(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new or(this)}F(sn,ft),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Po(this.g)},sn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=zn(c),c=_);g.i.push(new pu(g.Ya++,c)),g.G==3&&ca(g)},sn.prototype.N=function(){this.g.l=null,delete this.j,Po(this.g),delete this.g,sn.aa.N.call(this)};function Nu(c){Rr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}F(Nu,Rr);function Du(){bo.call(this),this.status=1}F(Du,bo);function or(c){this.g=c}F(or,Cu),or.prototype.ua=function(){Ke(this.g,"a")},or.prototype.ta=function(c){Ke(this.g,new Nu(c))},or.prototype.sa=function(c){Ke(this.g,new Du)},or.prototype.ra=function(){Ke(this.g,"b")},fa.prototype.createWebChannel=fa.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,Q0=function(){return new fa},F0=function(){return li()},G0=Wn,lm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hi.NO_ERROR=0,hi.TIMEOUT=8,hi.HTTP_ERROR=6,zc=hi,Ir.COMPLETE="complete",H0=Ir,So.EventType=Ar,Ar.OPEN="a",Ar.CLOSE="b",Ar.ERROR="c",Ar.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Dl=So,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,B0=Ge}).apply(typeof Oc<"u"?Oc:typeof self<"u"?self:typeof window<"u"?window:{});const rv="@firebase/firestore",iv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new Nm("@firebase/firestore");function qa(){return zs.logLevel}function se(i,...e){if(zs.logLevel<=Ve.DEBUG){const n=e.map(Vm);zs.debug(`Firestore (${lo}): ${i}`,...n)}}function ni(i,...e){if(zs.logLevel<=Ve.ERROR){const n=e.map(Vm);zs.error(`Firestore (${lo}): ${i}`,...n)}}function Wa(i,...e){if(zs.logLevel<=Ve.WARN){const n=e.map(Vm);zs.warn(`Firestore (${lo}): ${i}`,...n)}}function Vm(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,K0(i,s,n)}function K0(i,e,n){let s=`FIRESTORE (${lo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw ni(s),new Error(s)}function Fe(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||K0(e,o,s)}function Ae(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends ai{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Jt.UNAUTHENTICATED)))}shutdown(){}}class KA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class YA{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Jr,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Jr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Fe(typeof s.accessToken=="string",31837,{l:s}),new Y0(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class XA{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $A{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new XA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Jt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Fe(this.o===void 0,3512);const s=u=>{u.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,se("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=WA(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Me(i,e){return i<e?-1:i>e?1:0}function um(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return Xd(o)===Xd(u)?Me(o,u):Xd(o)?1:-1}return Me(i.length,e.length)}const JA=55296,e1=57343;function Xd(i){const e=i.charCodeAt(0);return e>=JA&&e<=e1}function Ja(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="__name__";class mr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ee(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ee(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return mr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof mr?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=mr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Me(e.length,n.length)}static compareSegments(e,n){const s=mr.isNumericId(e),o=mr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?mr.extractNumericId(e).compare(mr.extractNumericId(n)):um(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gi.fromString(e.substring(4,e.length-2))}}class st extends mr{construct(e,n,s){return new st(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ie(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new st(n)}static emptyPath(){return new st([])}}const t1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends mr{construct(e,n,s){return new Qt(e,n,s)}static isValidIdentifier(e){return t1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===av}static keyField(){return new Qt([av])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ie(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ie(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ie(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new ie(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(st.fromString(e))}static fromName(e){return new me(st.fromString(e).popFirst(5))}static empty(){return new me(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(i,e,n){if(!n)throw new ie(Y.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function n1(i,e,n,s){if(e===!0&&s===!0)throw new ie(Y.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function ov(i){if(!me.isDocumentKey(i))throw new ie(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function lv(i){if(me.isDocumentKey(i))throw new ie(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function $0(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function _h(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ee(12329,{type:typeof i})}function eo(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ie(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_h(i);throw new ie(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(i,e){const n={typeString:i};return e&&(n.value=e),n}function Wl(i,e){if(!$0(i))throw new ie(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const f=i[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new ie(Y.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=-62135596800,cv=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*cv);return new ot(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<uv)throw new ie(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cv}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wl(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-uv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:Rt("string",ot._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new ot(0,0))}static max(){return new be(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=-1;function r1(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=be.fromTimestamp(s===1e9?new ot(n+1,0):new ot(n,s));return new Qi(o,me.empty(),e)}function i1(i){return new Qi(i.readTime,i.key,Bl)}class Qi{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Qi(be.min(),me.empty(),Bl)}static max(){return new Qi(be.max(),me.empty(),Bl)}}function s1(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(i.documentKey,e.documentKey),n!==0?n:Me(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class o1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(i){if(i.code!==Y.FAILED_PRECONDITION||i.message!==a1)throw i;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):$.reject(n)}static resolve(e){return new $(((n,s)=>{n(e)}))}static reject(e){return new $(((n,s)=>{s(e)}))}static waitFor(e){return new $(((n,s)=>{let o=0,u=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++u,f&&u===o&&n()}),(p=>s(p)))})),f=!0,u===o&&n()}))}static or(e){let n=$.resolve(!1);for(const s of e)n=n.next((o=>o?$.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new $(((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next((S=>{f[y]=S,++m,m===u&&s(f)}),(S=>o(S)))}}))}static doWhile(e,n){return new $(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function l1(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function co(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=-1;function Eh(i){return i==null}function Wc(i){return i===0&&1/i==-1/0}function u1(i){return typeof i=="number"&&Number.isInteger(i)&&!Wc(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="";function c1(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=hv(e)),e=h1(i.get(n),e);return hv(e)}function h1(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case Z0:n+="";break;default:n+=u}}return n}function hv(i){return i+Z0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Gs(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function W0(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){this.comparator=e,this.root=n||Ft.EMPTY}insert(e,n){return new ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vc(this.root,e,this.comparator,!0)}}class Vc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Ft.RED,this.left=o??Ft.EMPTY,this.right=u??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Ft(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Ft.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dv(this.data.getIterator())}getIteratorFrom(e){return new dv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Vt(this.comparator);return n.data=e,n}}class dv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Qn([])}unionWith(e){let n=new Vt(Qt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Qn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new J0("Invalid base64 string: "+u):u}})(e);return new Yt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new Yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const f1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ki(i){if(Fe(!!i,39018),typeof i=="string"){let e=0;const n=f1.exec(i);if(Fe(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_t(i.seconds),nanos:_t(i.nanos)}}function _t(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Yi(i){return typeof i=="string"?Yt.fromBase64String(i):Yt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="server_timestamp",tE="__type__",nE="__previous_value__",rE="__local_write_time__";function km(i){var n,s;return((s=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[tE])==null?void 0:s.stringValue)===eE}function Th(i){const e=i.mapValue.fields[nE];return km(e)?Th(e):e}function Hl(i){const e=Ki(i.mapValue.fields[rE].timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,n,s,o,u,f,m,p,y,S){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=S}}const Jc="(default)";class Gl{constructor(e,n){this.projectId=e,this.database=n||Jc}static empty(){return new Gl("","")}get isDefaultDatabase(){return this.database===Jc}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="__type__",m1="__max__",Mc={mapValue:{}},sE="__vector__",eh="value";function Xi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?km(i)?4:p1(i)?9007199254740991:g1(i)?10:11:Ee(28295,{value:i})}function Tr(i,e){if(i===e)return!0;const n=Xi(i);if(n!==Xi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Hl(i).isEqual(Hl(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Ki(o.timestampValue),m=Ki(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return Yi(o.bytesValue).isEqual(Yi(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return _t(o.geoPointValue.latitude)===_t(u.geoPointValue.latitude)&&_t(o.geoPointValue.longitude)===_t(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return _t(o.integerValue)===_t(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=_t(o.doubleValue),m=_t(u.doubleValue);return f===m?Wc(f)===Wc(m):isNaN(f)&&isNaN(m)}return!1})(i,e);case 9:return Ja(i.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(fv(f)!==fv(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!Tr(f[p],m[p])))return!1;return!0})(i,e);default:return Ee(52216,{left:i})}}function Fl(i,e){return(i.values||[]).find((n=>Tr(n,e)))!==void 0}function to(i,e){if(i===e)return 0;const n=Xi(i),s=Xi(e);if(n!==s)return Me(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(i.booleanValue,e.booleanValue);case 2:return(function(u,f){const m=_t(u.integerValue||u.doubleValue),p=_t(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(i,e);case 3:return mv(i.timestampValue,e.timestampValue);case 4:return mv(Hl(i),Hl(e));case 5:return um(i.stringValue,e.stringValue);case 6:return(function(u,f){const m=Yi(u),p=Yi(f);return m.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(u,f){const m=u.split("/"),p=f.split("/");for(let y=0;y<m.length&&y<p.length;y++){const S=Me(m[y],p[y]);if(S!==0)return S}return Me(m.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,f){const m=Me(_t(u.latitude),_t(f.latitude));return m!==0?m:Me(_t(u.longitude),_t(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return gv(i.arrayValue,e.arrayValue);case 10:return(function(u,f){var I,z,F,J;const m=u.fields||{},p=f.fields||{},y=(I=m[eh])==null?void 0:I.arrayValue,S=(z=p[eh])==null?void 0:z.arrayValue,R=Me(((F=y==null?void 0:y.values)==null?void 0:F.length)||0,((J=S==null?void 0:S.values)==null?void 0:J.length)||0);return R!==0?R:gv(y,S)})(i.mapValue,e.mapValue);case 11:return(function(u,f){if(u===Mc.mapValue&&f===Mc.mapValue)return 0;if(u===Mc.mapValue)return 1;if(f===Mc.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),y=f.fields||{},S=Object.keys(y);p.sort(),S.sort();for(let R=0;R<p.length&&R<S.length;++R){const I=um(p[R],S[R]);if(I!==0)return I;const z=to(m[p[R]],y[S[R]]);if(z!==0)return z}return Me(p.length,S.length)})(i.mapValue,e.mapValue);default:throw Ee(23264,{he:n})}}function mv(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Me(i,e);const n=Ki(i),s=Ki(e),o=Me(n.seconds,s.seconds);return o!==0?o:Me(n.nanos,s.nanos)}function gv(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=to(n[o],s[o]);if(u)return u}return Me(n.length,s.length)}function no(i){return cm(i)}function cm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=Ki(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Yi(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return me.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=cm(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${cm(n.fields[f])}`;return o+"}"})(i.mapValue):Ee(61005,{value:i})}function qc(i){switch(Xi(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Th(i);return e?16+qc(e):16;case 5:return 2*i.stringValue.length;case 6:return Yi(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+qc(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Gs(s.fields,((u,f)=>{o+=u.length+qc(f)})),o})(i.mapValue);default:throw Ee(13486,{value:i})}}function pv(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function hm(i){return!!i&&"integerValue"in i}function Lm(i){return!!i&&"arrayValue"in i}function yv(i){return!!i&&"nullValue"in i}function _v(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Bc(i){return!!i&&"mapValue"in i}function g1(i){var n,s;return((s=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[iE])==null?void 0:s.stringValue)===sE}function kl(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Gs(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=kl(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=kl(i.arrayValue.values[n]);return e}return{...i}}function p1(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===m1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Bc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=kl(n)}setAll(e){let n=Qt.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=kl(f):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Bc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Bc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Gs(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new kn(kl(this.value))}}function aE(i){const e=[];return Gs(i.fields,((n,s)=>{const o=new Qt([n]);if(Bc(s)){const u=aE(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new Qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new en(e,0,be.min(),be.min(),be.min(),kn.empty(),0)}static newFoundDocument(e,n,s,o){return new en(e,1,n,be.min(),s,o,0)}static newNoDocument(e,n){return new en(e,2,n,be.min(),be.min(),kn.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,be.min(),be.min(),kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.position=e,this.inclusive=n}}function vv(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?s=me.comparator(me.fromName(f.referenceValue),n.key):s=to(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Ev(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Tr(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n="asc"){this.field=e,this.dir=n}}function y1(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{}class At extends oE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new v1(e,n,s):n==="array-contains"?new S1(e,s):n==="in"?new b1(e,s):n==="not-in"?new w1(e,s):n==="array-contains-any"?new A1(e,s):new At(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new E1(e,s):new T1(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(to(n,this.value)):n!==null&&Xi(this.value)===Xi(n)&&this.matchesComparison(to(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends oE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xn(e,n)}matches(e){return lE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lE(i){return i.op==="and"}function uE(i){return _1(i)&&lE(i)}function _1(i){for(const e of i.filters)if(e instanceof Xn)return!1;return!0}function fm(i){if(i instanceof At)return i.field.canonicalString()+i.op.toString()+no(i.value);if(uE(i))return i.filters.map((e=>fm(e))).join(",");{const e=i.filters.map((n=>fm(n))).join(",");return`${i.op}(${e})`}}function cE(i,e){return i instanceof At?(function(s,o){return o instanceof At&&s.op===o.op&&s.field.isEqual(o.field)&&Tr(s.value,o.value)})(i,e):i instanceof Xn?(function(s,o){return o instanceof Xn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,m)=>u&&cE(f,o.filters[m])),!0):!1})(i,e):void Ee(19439)}function hE(i){return i instanceof At?(function(n){return`${n.field.canonicalString()} ${n.op} ${no(n.value)}`})(i):i instanceof Xn?(function(n){return n.op.toString()+" {"+n.getFilters().map(hE).join(" ,")+"}"})(i):"Filter"}class v1 extends At{constructor(e,n,s){super(e,n,s),this.key=me.fromName(s.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class E1 extends At{constructor(e,n){super(e,"in",n),this.keys=fE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class T1 extends At{constructor(e,n){super(e,"not-in",n),this.keys=fE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function fE(i,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((s=>me.fromName(s.referenceValue)))}class S1 extends At{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lm(n)&&Fl(n.arrayValue,this.value)}}class b1 extends At{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fl(this.value.arrayValue,n)}}class w1 extends At{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Fl(this.value.arrayValue,n)}}class A1 extends At{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Fl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function Tv(i,e=null,n=[],s=[],o=null,u=null,f=null){return new R1(i,e,n,s,o,u,f)}function Um(i){const e=Ae(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>fm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Eh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>no(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>no(s))).join(",")),e.Te=n}return e.Te}function jm(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!y1(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!cE(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ev(i.startAt,e.startAt)&&Ev(i.endAt,e.endAt)}function dm(i){return me.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function I1(i,e,n,s,o,u,f,m){return new Jl(i,e,n,s,o,u,f,m)}function zm(i){return new Jl(i)}function Sv(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function dE(i){return i.collectionGroup!==null}function Ll(i){const e=Ae(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Vt(Qt.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new nh(u,s))})),n.has(Qt.keyField().canonicalString())||e.Ie.push(new nh(Qt.keyField(),s))}return e.Ie}function gr(i){const e=Ae(i);return e.Ee||(e.Ee=x1(e,Ll(i))),e.Ee}function x1(i,e){if(i.limitType==="F")return Tv(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new nh(o.field,u)}));const n=i.endAt?new th(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new th(i.startAt.position,i.startAt.inclusive):null;return Tv(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function mm(i,e){const n=i.filters.concat([e]);return new Jl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function gm(i,e,n){return new Jl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Sh(i,e){return jm(gr(i),gr(e))&&i.limitType===e.limitType}function mE(i){return`${Um(gr(i))}|lt:${i.limitType}`}function Ba(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>hE(o))).join(", ")}]`),Eh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>no(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>no(o))).join(",")),`Target(${s})`})(gr(i))}; limitType=${i.limitType})`}function bh(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):me.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of Ll(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,p){const y=vv(f,m,p);return f.inclusive?y<=0:y<0})(s.startAt,Ll(s),o)||s.endAt&&!(function(f,m,p){const y=vv(f,m,p);return f.inclusive?y>=0:y>0})(s.endAt,Ll(s),o))})(i,e)}function C1(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function gE(i){return(e,n)=>{let s=!1;for(const o of Ll(i)){const u=N1(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function N1(i,e,n){const s=i.field.isKeyField()?me.comparator(e.key,n.key):(function(u,f,m){const p=f.data.field(u),y=m.data.field(u);return p!==null&&y!==null?to(p,y):Ee(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ee(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return W0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=new ht(me.comparator);function ri(){return D1}const pE=new ht(me.comparator);function Ol(...i){let e=pE;for(const n of i)e=e.insert(n.key,n);return e}function yE(i){let e=pE;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Ps(){return Ul()}function _E(){return Ul()}function Ul(){return new Fs((i=>i.toString()),((i,e)=>i.isEqual(e)))}const O1=new ht(me.comparator),V1=new Vt(me.comparator);function Pe(...i){let e=V1;for(const n of i)e=e.add(n);return e}const M1=new Vt(Me);function P1(){return M1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(e)?"-0":e}}function vE(i){return{integerValue:""+i}}function k1(i,e){return u1(e)?vE(e):qm(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(){this._=void 0}}function L1(i,e,n){return i instanceof rh?(function(o,u){const f={fields:{[tE]:{stringValue:eE},[rE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&km(u)&&(u=Th(u)),u&&(f.fields[nE]=u),{mapValue:f}})(n,e):i instanceof Ql?TE(i,e):i instanceof Kl?SE(i,e):(function(o,u){const f=EE(o,u),m=bv(f)+bv(o.Ae);return hm(f)&&hm(o.Ae)?vE(m):qm(o.serializer,m)})(i,e)}function U1(i,e,n){return i instanceof Ql?TE(i,e):i instanceof Kl?SE(i,e):n}function EE(i,e){return i instanceof ih?(function(s){return hm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class rh extends wh{}class Ql extends wh{constructor(e){super(),this.elements=e}}function TE(i,e){const n=bE(e);for(const s of i.elements)n.some((o=>Tr(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Kl extends wh{constructor(e){super(),this.elements=e}}function SE(i,e){let n=bE(e);for(const s of i.elements)n=n.filter((o=>!Tr(o,s)));return{arrayValue:{values:n}}}class ih extends wh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function bv(i){return _t(i.integerValue||i.doubleValue)}function bE(i){return Lm(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function j1(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Ql&&o instanceof Ql||s instanceof Kl&&o instanceof Kl?Ja(s.elements,o.elements,Tr):s instanceof ih&&o instanceof ih?Tr(s.Ae,o.Ae):s instanceof rh&&o instanceof rh})(i.transform,e.transform)}class z1{constructor(e,n){this.version=e,this.transformResults=n}}class ei{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ei}static exists(e){return new ei(void 0,e)}static updateTime(e){return new ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hc(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Ah{}function wE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new RE(i.key,ei.none()):new eu(i.key,i.data,ei.none());{const n=i.data,s=kn.empty();let o=new Vt(Qt.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Qs(i.key,s,new Qn(o.toArray()),ei.none())}}function q1(i,e,n){i instanceof eu?(function(o,u,f){const m=o.value.clone(),p=Av(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(i,e,n):i instanceof Qs?(function(o,u,f){if(!Hc(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=Av(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(AE(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(i,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function jl(i,e,n,s){return i instanceof eu?(function(u,f,m,p){if(!Hc(u.precondition,f))return m;const y=u.value.clone(),S=Rv(u.fieldTransforms,p,f);return y.setAll(S),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(i,e,n,s):i instanceof Qs?(function(u,f,m,p){if(!Hc(u.precondition,f))return m;const y=Rv(u.fieldTransforms,p,f),S=f.data;return S.setAll(AE(u)),S.setAll(y),f.convertToFoundDocument(f.version,S).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((R=>R.field)))})(i,e,n,s):(function(u,f,m){return Hc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(i,e,n)}function B1(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=EE(s.transform,o||null);u!=null&&(n===null&&(n=kn.empty()),n.set(s.field,u))}return n||null}function wv(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ja(s,o,((u,f)=>j1(u,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class eu extends Ah{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Qs extends Ah{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function AE(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function Av(i,e,n){const s=new Map;Fe(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,U1(f,m,n[o]))}return s}function Rv(i,e,n){const s=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);s.set(o.field,L1(u,f,e))}return s}class RE extends Ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class H1 extends Ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&q1(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=jl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=jl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=_E();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=wE(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(be.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,((n,s)=>wv(n,s)))&&Ja(this.baseMutations,e.baseMutations,((n,s)=>wv(n,s)))}}class Bm{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Fe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return O1})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Bm(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,je;function K1(i){switch(i){case Y.OK:return Ee(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return Ee(15467,{code:i})}}function IE(i){if(i===void 0)return ni("GRPC error has no .code"),Y.UNKNOWN;switch(i){case wt.OK:return Y.OK;case wt.CANCELLED:return Y.CANCELLED;case wt.UNKNOWN:return Y.UNKNOWN;case wt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case wt.INTERNAL:return Y.INTERNAL;case wt.UNAVAILABLE:return Y.UNAVAILABLE;case wt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case wt.NOT_FOUND:return Y.NOT_FOUND;case wt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case wt.ABORTED:return Y.ABORTED;case wt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case wt.DATA_LOSS:return Y.DATA_LOSS;default:return Ee(39323,{code:i})}}(je=wt||(wt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=new Gi([4294967295,4294967295],0);function Iv(i){const e=Y1().encode(i),n=new q0;return n.update(e),new Uint8Array(n.digest())}function xv(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Gi([n,s],0),new Gi([o,u],0)]}class Hm{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Vl(`Invalid padding: ${n}`);if(s<0)throw new Vl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Vl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Vl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Gi.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Gi.fromNumber(s)));return o.compare(X1)===1&&(o=new Gi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Iv(e),[s,o]=xv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Hm(u,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=Iv(e),[s,o]=xv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,tu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Rh(be.min(),o,new ht(Me),ri(),Pe())}}class tu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new tu(s,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class xE{constructor(e,n){this.targetId=e,this.Ce=n}}class CE{constructor(e,n,s=Yt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Cv{constructor(){this.ve=0,this.Fe=Nv(),this.Me=Yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),s=Pe();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ee(38017,{changeType:u})}})),new tu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Nv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $1{constructor(e){this.Ge=e,this.ze=new Map,this.je=ri(),this.Je=Pc(),this.He=Pc(),this.Ye=new ht(Me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(dm(u))if(s===0){const f=new me(u.path);this.et(n,f,en.newNoDocument(f,be.min()))}else Fe(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),p=m?this.ct(m,e,f):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Yi(s).toUint8Array()}catch(p){if(p instanceof J0)return Wa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Hm(f,o,u)}catch(p){return Wa(p instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&dm(m.target)){const p=new me(m.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,en.newNoDocument(p,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=Pe();this.He.forEach(((u,f)=>{let m=!0;f.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new Rh(e,n,this.Ye,this.je,s);return this.je=ri(),this.Je=Pc(),this.He=Pc(),this.Ye=new ht(Me),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Cv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Vt(Me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Vt(Me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Cv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Pc(){return new ht(me.comparator)}function Nv(){return new ht(me.comparator)}const Z1={asc:"ASCENDING",desc:"DESCENDING"},W1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J1={and:"AND",or:"OR"};class eR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pm(i,e){return i.useProto3Json||Eh(e)?e:{value:e}}function sh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function tR(i,e){return sh(i,e.toTimestamp())}function pr(i){return Fe(!!i,49232),be.fromTimestamp((function(n){const s=Ki(n);return new ot(s.seconds,s.nanos)})(i))}function Gm(i,e){return ym(i,e).canonicalString()}function ym(i,e){const n=(function(o){return new st(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function DE(i){const e=st.fromString(i);return Fe(kE(e),10190,{key:e.toString()}),e}function _m(i,e){return Gm(i.databaseId,e.path)}function $d(i,e){const n=DE(e);if(n.get(1)!==i.databaseId.projectId)throw new ie(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ie(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new me(VE(n))}function OE(i,e){return Gm(i.databaseId,e)}function nR(i){const e=DE(i);return e.length===4?st.emptyPath():VE(e)}function vm(i){return new st(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function VE(i){return Fe(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Dv(i,e,n){return{name:_m(i,e),fields:n.value.mapValue.fields}}function rR(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ee(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,S){return y.useProto3Json?(Fe(S===void 0||typeof S=="string",58123),Yt.fromBase64String(S||"")):(Fe(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Yt.fromUint8Array(S||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(y){const S=y.code===void 0?Y.UNKNOWN:IE(y.code);return new ie(S,y.message||"")})(f);n=new CE(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=$d(i,s.document.name),u=pr(s.document.updateTime),f=s.document.createTime?pr(s.document.createTime):be.min(),m=new kn({mapValue:{fields:s.document.fields}}),p=en.newFoundDocument(o,u,f,m),y=s.targetIds||[],S=s.removedTargetIds||[];n=new Gc(y,S,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=$d(i,s.document),u=s.readTime?pr(s.readTime):be.min(),f=en.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Gc([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=$d(i,s.document),u=s.removedTargetIds||[];n=new Gc([],u,o,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new Q1(o,u),m=s.targetId;n=new xE(m,f)}}return n}function iR(i,e){let n;if(e instanceof eu)n={update:Dv(i,e.key,e.value)};else if(e instanceof RE)n={delete:_m(i,e.key)};else if(e instanceof Qs)n={update:Dv(i,e.key,e.data),updateMask:dR(e.fieldMask)};else{if(!(e instanceof H1))return Ee(16599,{Vt:e.type});n={verify:_m(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const m=f.transform;if(m instanceof rh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ql)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Kl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof ih)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Ee(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:tR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ee(27497)})(i,e.precondition)),n}function sR(i,e){return i&&i.length>0?(Fe(e!==void 0,14353),i.map((n=>(function(o,u){let f=o.updateTime?pr(o.updateTime):pr(u);return f.isEqual(be.min())&&(f=pr(u)),new z1(f,o.transformResults||[])})(n,e)))):[]}function aR(i,e){return{documents:[OE(i,e.path)]}}function oR(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=OE(i,o);const u=(function(y){if(y.length!==0)return PE(Xn.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(y){if(y.length!==0)return y.map((S=>(function(I){return{field:Ha(I.field),direction:cR(I.dir)}})(S)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=pm(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function lR(i){let e=nR(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Fe(s===1,65062);const S=n.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];n.where&&(u=(function(R){const I=ME(R);return I instanceof Xn&&uE(I)?I.getFilters():[I]})(n.where));let f=[];n.orderBy&&(f=(function(R){return R.map((I=>(function(F){return new nh(Ga(F.field),(function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(I)))})(n.orderBy));let m=null;n.limit&&(m=(function(R){let I;return I=typeof R=="object"?R.value:R,Eh(I)?null:I})(n.limit));let p=null;n.startAt&&(p=(function(R){const I=!!R.before,z=R.values||[];return new th(z,I)})(n.startAt));let y=null;return n.endAt&&(y=(function(R){const I=!R.before,z=R.values||[];return new th(z,I)})(n.endAt)),I1(e,o,f,u,m,"F",p,y)}function uR(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ME(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ga(n.unaryFilter.field);return At.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Ga(n.unaryFilter.field);return At.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ga(n.unaryFilter.field);return At.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ga(n.unaryFilter.field);return At.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(i):i.fieldFilter!==void 0?(function(n){return At.create(Ga(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Xn.create(n.compositeFilter.filters.map((s=>ME(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(n.compositeFilter.op))})(i):Ee(30097,{filter:i})}function cR(i){return Z1[i]}function hR(i){return W1[i]}function fR(i){return J1[i]}function Ha(i){return{fieldPath:i.canonicalString()}}function Ga(i){return Qt.fromServerFormat(i.fieldPath)}function PE(i){return i instanceof At?(function(n){if(n.op==="=="){if(_v(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NAN"}};if(yv(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_v(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NAN"}};if(yv(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(n.field),op:hR(n.op),value:n.value}}})(i):i instanceof Xn?(function(n){const s=n.getFilters().map((o=>PE(o)));return s.length===1?s[0]:{compositeFilter:{op:fR(n.op),filters:s}}})(i):Ee(54877,{filter:i})}function dR(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function kE(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n,s,o,u=be.min(),f=be.min(),m=Yt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new zi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.yt=e}}function gR(i){const e=lR({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?gm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.Cn=new yR}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Qi.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Qi.min())}updateCollectionGroup(e,n,s){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class yR{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Vt(st.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Vt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LE=41943040;class cn{static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(LE,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ro(0)}static cr(){return new ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="LruGarbageCollector",_R=1048576;function Mv([i,e],[n,s]){const o=Me(i,n);return o===0?Me(e,s):o}class vR{constructor(e){this.Ir=e,this.buffer=new Vt(Mv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Mv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ER{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(Vv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){co(n)?se(Vv,"Ignoring IndexedDB error during garbage collection: ",n):await uo(n)}await this.Vr(3e5)}))}}class TR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return $.resolve(vh.ce);const s=new vR(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Ov)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ov):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,f,m,p,y;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((R=>(R>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,f=Date.now(),this.nthSequenceNumber(e,o)))).next((R=>(s=R,m=Date.now(),this.removeTargets(e,s,n)))).next((R=>(u=R,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((R=>(y=Date.now(),qa()<=Ve.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-S}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${R} documents in `+(y-p)+`ms
Total Duration: ${y-S}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R}))))}}function SR(i,e){return new TR(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.changes=new Fs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&jl(s.mutation,o,Qn.empty(),ot.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Pe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Pe()){const o=Ps();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=Ol();return u.forEach(((m,p)=>{f=f.insert(m,p.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=Ps();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Pe())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let u=ri();const f=Ul(),m=(function(){return Ul()})();return n.forEach(((p,y)=>{const S=s.get(y.key);o.has(y.key)&&(S===void 0||S.mutation instanceof Qs)?u=u.insert(y.key,y):S!==void 0?(f.set(y.key,S.mutation.getFieldMask()),jl(S.mutation,y,S.mutation.getFieldMask(),ot.now())):f.set(y.key,Qn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((y,S)=>f.set(y,S))),n.forEach(((y,S)=>m.set(y,new wR(S,f.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=Ul();let o=new ht(((f,m)=>f-m)),u=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let S=s.get(p)||Qn.empty();S=m.applyToLocalView(y,S),s.set(p,S);const R=(o.get(m.batchId)||Pe()).add(p);o=o.insert(m.batchId,R)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,S=p.value,R=_E();S.forEach((I=>{if(!u.has(I)){const z=wE(n.get(I),s.get(I));z!==null&&R.set(I,z),u=u.add(I)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,R))}return $.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(f){return me.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):$.resolve(Ps());let m=Bl,p=u;return f.next((y=>$.forEach(y,((S,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),u.get(S)?$.resolve():this.remoteDocumentCache.getEntry(e,S).next((I=>{p=p.insert(S,I)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,p,y,Pe()))).next((S=>({batchId:m,changes:yE(S)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next((s=>{let o=Ol();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Ol();return this.indexManager.getCollectionParents(e,u).next((m=>$.forEach(m,(p=>{const y=(function(R,I){return new Jl(I,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((S=>{S.forEach(((R,I)=>{f=f.insert(R,I)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((p,y)=>{const S=y.getKey();f.get(S)===null&&(f=f.insert(S,en.newInvalidDocument(S)))}));let m=Ol();return f.forEach(((p,y)=>{const S=u.get(p);S!==void 0&&jl(S.mutation,y,Qn.empty(),ot.now()),bh(n,y)&&(m=m.insert(p,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:pr(o.createTime)}})(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:gR(o.bundledQuery),readTime:pr(o.readTime)}})(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.overlays=new ht(me.comparator),this.qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ps();return $.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),$.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(e,n,s){const o=Ps(),u=n.length+1,f=new me(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return $.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new ht(((y,S)=>y-S));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let S=u.get(y.largestBatchId);S===null&&(S=Ps(),u=u.insert(y.largestBatchId,S)),S.set(y.getKey(),y)}}const m=Ps(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,S)=>m.set(y,S))),!(m.size()>=o)););return $.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new F1(n,s));let u=this.qr.get(n);u===void 0&&(u=Pe(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(){this.Qr=new Vt(jt.$r),this.Ur=new Vt(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new jt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new jt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new me(new st([])),s=new jt(n,e),o=new jt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new st([])),s=new jt(n,e),o=new jt(n,e+1);let u=Pe();return this.Ur.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new jt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||Me(e.Yr,n.Yr)}static Kr(e,n){return Me(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Vt(jt.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new G1(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new jt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return $.resolve(f)}lookupMutationBatch(e,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return $.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Pm:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new jt(n,0),o=new jt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(f=>{const m=this.Xr(f.Yr);u.push(m)})),$.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Vt(Me);return n.forEach((o=>{const u=new jt(o,0),f=new jt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(m=>{s=s.add(m.Yr)}))})),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;me.isDocumentKey(u)||(u=u.child(""));const f=new jt(new me(u),0);let m=new Vt(Me);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Yr)),!0)}),f),$.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(n.mutations,(o=>{const u=new jt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new jt(n,0),o=this.Zr.firstAfterOrEqual(s);return $.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.ri=e,this.docs=(function(){return new ht(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let s=ri();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():en.newInvalidDocument(o))})),$.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=ri();const f=n.path,m=new me(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:S}}=p.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||s1(i1(S),s)<=0||(o.has(S.key)||bh(n,S))&&(u=u.insert(S.key,S.mutableCopy()))}return $.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ee(9500)}ii(e,n){return $.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new DR(this)}getSize(e){return $.resolve(this.size)}}class DR extends bR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),$.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.persistence=e,this.si=new Fs((n=>Um(n)),jm),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.oi=0,this._i=new Fm,this.targetCount=0,this.ai=ro.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),$.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ro(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Pr(n),$.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),$.waitFor(u).next((()=>o))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return $.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),$.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),$.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return $.resolve(s)}containsKey(e,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,n){this.ui={},this.overlays={},this.ci=new vh(0),this.li=!1,this.li=!0,this.hi=new xR,this.referenceDelegate=e(this),this.Pi=new OR(this),this.indexManager=new pR,this.remoteDocumentCache=(function(o){return new NR(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new mR(n),this.Ii=new RR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new IR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new CR(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){se("MemoryPersistence","Starting transaction:",e);const o=new VR(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return $.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class VR extends o1{constructor(e){super(),this.currentSequenceNumber=e}}class Qm{constructor(e){this.persistence=e,this.Ri=new Fm,this.Vi=null}static mi(e){return new Qm(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),$.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(s=>{const o=me.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,be.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ah{constructor(e,n){this.persistence=e,this.pi=new Fs((s=>c1(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=SR(this,n)}static mi(e,n){return new ah(e,n)}Ei(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return $.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?$.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((m=>{m||(s++,u.removeEntry(f,be.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),$.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qc(e.data.value)),n}br(e,n,s){return $.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return $.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Pe(),o=Pe();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Km(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return xw()?8:l1(tn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new MR;return this.Ss(e,n,f).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(qa()<=Ve.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Ba(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(qa()<=Ve.DEBUG&&se("QueryEngine","Query:",Ba(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(qa()<=Ve.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Ba(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gr(n))):$.resolve())}ys(e,n){if(Sv(n))return $.resolve(null);let s=gr(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=gm(n,null,"F"),s=gr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=Pe(...u);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const y=this.Ds(n,m);return this.Cs(n,y,f,p.readTime)?this.ys(e,gm(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,s,o){return Sv(n)||o.isEqual(be.min())?$.resolve(null):this.ps.getDocuments(e,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?$.resolve(null):(qa()<=Ve.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ba(n)),this.vs(e,f,n,r1(o,Bl)).next((m=>m)))}))}Ds(e,n){let s=new Vt(gE(e));return n.forEach(((o,u)=>{bh(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return qa()<=Ve.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Ba(n)),this.ps.getDocumentsMatchingQuery(e,n,Qi.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="LocalStore",kR=3e8;class LR{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new ht(Me),this.xs=new Fs((u=>Um(u)),jm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function UR(i,e,n,s){return new LR(i,e,n,s)}async function jE(i,e){const n=Ae(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],m=[];let p=Pe();for(const y of o){f.push(y.batchId);for(const S of y.mutations)p=p.add(S.key)}for(const y of u){m.push(y.batchId);for(const S of y.mutations)p=p.add(S.key)}return n.localDocuments.getDocuments(s,p).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:m})))}))}))}function jR(i,e){const n=Ae(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,y,S){const R=y.batch,I=R.keys();let z=$.resolve();return I.forEach((F=>{z=z.next((()=>S.getEntry(p,F))).next((J=>{const W=y.docVersions.get(F);Fe(W!==null,48541),J.version.compareTo(W)<0&&(R.applyToRemoteDocument(J,y),J.isValidDocument()&&(J.setReadTime(y.commitVersion),S.addEntry(J)))}))})),z.next((()=>m.mutationQueue.removeMutationBatch(p,R)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=Pe();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function zE(i){const e=Ae(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function zR(i,e){const n=Ae(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((S,R)=>{const I=o.get(R);if(!I)return;m.push(n.Pi.removeMatchingKeys(u,S.removedDocuments,R).next((()=>n.Pi.addMatchingKeys(u,S.addedDocuments,R))));let z=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(R)!==null?z=z.withResumeToken(Yt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):S.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(S.resumeToken,s)),o=o.insert(R,z),(function(J,W,ce){return J.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=kR?!0:ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0})(I,z,S)&&m.push(n.Pi.updateTargetData(u,z))}));let p=ri(),y=Pe();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,S))})),m.push(qR(u,f,e.documentUpdates).next((S=>{p=S.ks,y=S.qs}))),!s.isEqual(be.min())){const S=n.Pi.getLastRemoteSnapshotVersion(u).next((R=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(S)}return $.waitFor(m).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,y))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function qR(i,e,n){let s=Pe(),o=Pe();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let f=ri();return n.forEach(((m,p)=>{const y=u.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(be.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):se(Ym,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)})),{ks:f,qs:o}}))}function BR(i,e){const n=Ae(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Pm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function HR(i,e){const n=Ae(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,$.resolve(o)):n.Pi.allocateTargetId(s).next((f=>(o=new zi(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Em(i,e,n){const s=Ae(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!co(f))throw f;se(Ym,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Pv(i,e,n){const s=Ae(i);let o=be.min(),u=Pe();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,y,S){const R=Ae(p),I=R.xs.get(S);return I!==void 0?$.resolve(R.Ms.get(I)):R.Pi.getTargetData(y,S)})(s,f,gr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?o:be.min(),n?u:Pe()))).next((m=>(GR(s,C1(e),m),{documents:m,Qs:u})))))}function GR(i,e,n){let s=i.Os.get(e)||be.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class kv{constructor(){this.activeTargetIds=P1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FR{constructor(){this.Mo=new kv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new kv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="ConnectivityMonitor";class Uv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(Lv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(Lv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kc=null;function Tm(){return kc===null?kc=(function(){return 268435456+Math.round(2147483648*Math.random())})():kc++,"0x"+kc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="RestConnection",KR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Jc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const f=Tm(),m=this.zo(e,n.toUriEncodedString());se(Zd,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:y}=new URL(m),S=ao(y);return this.Jo(e,m,p,s,S).then((R=>(se(Zd,`Received RPC '${e}' ${f}: `,R),R)),(R=>{throw Wa(Zd,`RPC '${e}' ${f} failed with error: `,R,"url: ",m,"request:",s),R}))}Ho(e,n,s,o,u,f){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+lo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=KR[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class $R extends YR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=Tm();return new Promise(((m,p)=>{const y=new B0;y.setWithCredentials(!0),y.listenOnce(H0.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case zc.NO_ERROR:const R=y.getResponseJson();se(Wt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(R)),m(R);break;case zc.TIMEOUT:se(Wt,`RPC '${e}' ${f} timed out`),p(new ie(Y.DEADLINE_EXCEEDED,"Request time out"));break;case zc.HTTP_ERROR:const I=y.getStatus();if(se(Wt,`RPC '${e}' ${f} failed with status:`,I,"response text:",y.getResponseText()),I>0){let z=y.getResponseJson();Array.isArray(z)&&(z=z[0]);const F=z==null?void 0:z.error;if(F&&F.status&&F.message){const J=(function(ce){const ue=ce.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(ue)>=0?ue:Y.UNKNOWN})(F.status);p(new ie(J,F.message))}else p(new ie(Y.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ie(Y.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{se(Wt,`RPC '${e}' ${f} completed.`)}}));const S=JSON.stringify(o);se(Wt,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",S,s,15)}))}T_(e,n,s){const o=Tm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Q0(),m=F0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const S=u.join("");se(Wt,`Creating RPC '${e}' stream ${o}: ${S}`,p);const R=f.createWebChannel(S,p);this.I_(R);let I=!1,z=!1;const F=new XR({Yo:W=>{z?se(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,W):(I||(se(Wt,`Opening RPC '${e}' stream ${o} transport.`),R.open(),I=!0),se(Wt,`RPC '${e}' stream ${o} sending:`,W),R.send(W))},Zo:()=>R.close()}),J=(W,ce,ue)=>{W.listen(ce,(ae=>{try{ue(ae)}catch(we){setTimeout((()=>{throw we}),0)}}))};return J(R,Dl.EventType.OPEN,(()=>{z||(se(Wt,`RPC '${e}' stream ${o} transport opened.`),F.o_())})),J(R,Dl.EventType.CLOSE,(()=>{z||(z=!0,se(Wt,`RPC '${e}' stream ${o} transport closed`),F.a_(),this.E_(R))})),J(R,Dl.EventType.ERROR,(W=>{z||(z=!0,Wa(Wt,`RPC '${e}' stream ${o} transport errored. Name:`,W.name,"Message:",W.message),F.a_(new ie(Y.UNAVAILABLE,"The operation could not be completed")))})),J(R,Dl.EventType.MESSAGE,(W=>{var ce;if(!z){const ue=W.data[0];Fe(!!ue,16349);const ae=ue,we=(ae==null?void 0:ae.error)||((ce=ae[0])==null?void 0:ce.error);if(we){se(Wt,`RPC '${e}' stream ${o} received error:`,we);const ge=we.status;let Re=(function(A){const D=wt[A];if(D!==void 0)return IE(D)})(ge),N=we.message;Re===void 0&&(Re=Y.INTERNAL,N="Unknown error status: "+ge+" with message "+we.message),z=!0,F.a_(new ie(Re,N)),R.close()}else se(Wt,`RPC '${e}' stream ${o} received:`,ue),F.u_(ue)}})),J(m,G0.STAT_EVENT,(W=>{W.stat===lm.PROXY?se(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):W.stat===lm.NOPROXY&&se(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{F.__()}),0),F}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(i){return new eR(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&se("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="PersistentStream";class BE{constructor(e,n,s,o,u,f,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(ni(n.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new ie(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return se(jv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(se(jv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ZR extends BE{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=rR(this.serializer,e),s=(function(u){if(!("targetChange"in u))return be.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?be.min():f.readTime?pr(f.readTime):be.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=vm(this.serializer),n.addTarget=(function(u,f){let m;const p=f.target;if(m=dm(p)?{documents:aR(u,p)}:{query:oR(u,p).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=NE(u,f.resumeToken);const y=pm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}else if(f.snapshotVersion.compareTo(be.min())>0){m.readTime=sh(u,f.snapshotVersion.toTimestamp());const y=pm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const s=uR(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=vm(this.serializer),n.removeTarget=e,this.q_(n)}}class WR extends BE{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=sR(e.writeResults,e.commitTime),s=pr(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=vm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>iR(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{}class eI extends JR{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ie(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,ym(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ie(Y.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,ym(n,s),o,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ie(Y.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class tI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ni(n),this.aa=!1):se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="RemoteStore";class nI{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{Ks(this)&&(se(qs,"Restarting streams for network reachability change."),await(async function(p){const y=Ae(p);y.Ea.add(4),await nu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await xh(y)})(this))}))})),this.Ra=new tI(s,o)}}async function xh(i){if(Ks(i))for(const e of i.da)await e(!0)}async function nu(i){for(const e of i.da)await e(!1)}function HE(i,e){const n=Ae(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Wm(n)?Zm(n):ho(n).O_()&&$m(n,e))}function Xm(i,e){const n=Ae(i),s=ho(n);n.Ia.delete(e),s.O_()&&GE(n,e),n.Ia.size===0&&(s.O_()?s.L_():Ks(n)&&n.Ra.set("Unknown"))}function $m(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ho(i).Y_(e)}function GE(i,e){i.Va.Ue(e),ho(i).Z_(e)}function Zm(i){i.Va=new $1({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),ho(i).start(),i.Ra.ua()}function Wm(i){return Ks(i)&&!ho(i).x_()&&i.Ia.size>0}function Ks(i){return Ae(i).Ea.size===0}function FE(i){i.Va=void 0}async function rI(i){i.Ra.set("Online")}async function iI(i){i.Ia.forEach(((e,n)=>{$m(i,e)}))}async function sI(i,e){FE(i),Wm(i)?(i.Ra.ha(e),Zm(i)):i.Ra.set("Unknown")}async function aI(i,e,n){if(i.Ra.set("Online"),e instanceof CE&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(s){se(qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await oh(i,s)}else if(e instanceof Gc?i.Va.Ze(e):e instanceof xE?i.Va.st(e):i.Va.tt(e),!n.isEqual(be.min()))try{const s=await zE(i.localStore);n.compareTo(s)>=0&&await(function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const S=u.Ia.get(y);S&&u.Ia.set(y,S.withResumeToken(p.resumeToken,f))}})),m.targetMismatches.forEach(((p,y)=>{const S=u.Ia.get(p);if(!S)return;u.Ia.set(p,S.withResumeToken(Yt.EMPTY_BYTE_STRING,S.snapshotVersion)),GE(u,p);const R=new zi(S.target,p,y,S.sequenceNumber);$m(u,R)})),u.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){se(qs,"Failed to raise snapshot:",s),await oh(i,s)}}async function oh(i,e,n){if(!co(e))throw e;i.Ea.add(1),await nu(i),i.Ra.set("Offline"),n||(n=()=>zE(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{se(qs,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await xh(i)}))}function QE(i,e){return e().catch((n=>oh(i,n,e)))}async function Ch(i){const e=Ae(i),n=$i(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pm;for(;oI(e);)try{const o=await BR(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,lI(e,o)}catch(o){await oh(e,o)}KE(e)&&YE(e)}function oI(i){return Ks(i)&&i.Ta.length<10}function lI(i,e){i.Ta.push(e);const n=$i(i);n.O_()&&n.X_&&n.ea(e.mutations)}function KE(i){return Ks(i)&&!$i(i).x_()&&i.Ta.length>0}function YE(i){$i(i).start()}async function uI(i){$i(i).ra()}async function cI(i){const e=$i(i);for(const n of i.Ta)e.ea(n.mutations)}async function hI(i,e,n){const s=i.Ta.shift(),o=Bm.from(s,e,n);await QE(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Ch(i)}async function fI(i,e){e&&$i(i).X_&&await(async function(s,o){if((function(f){return K1(f)&&f!==Y.ABORTED})(o.code)){const u=s.Ta.shift();$i(s).B_(),await QE(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Ch(s)}})(i,e),KE(i)&&YE(i)}async function zv(i,e){const n=Ae(i);n.asyncQueue.verifyOperationInProgress(),se(qs,"RemoteStore received new credentials");const s=Ks(n);n.Ea.add(3),await nu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await xh(n)}async function dI(i,e){const n=Ae(i);e?(n.Ea.delete(2),await xh(n)):e||(n.Ea.add(2),await nu(n),n.Ra.set("Unknown"))}function ho(i){return i.ma||(i.ma=(function(n,s,o){const u=Ae(n);return u.sa(),new ZR(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:rI.bind(null,i),t_:iI.bind(null,i),r_:sI.bind(null,i),H_:aI.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Wm(i)?Zm(i):i.Ra.set("Unknown")):(await i.ma.stop(),FE(i))}))),i.ma}function $i(i){return i.fa||(i.fa=(function(n,s,o){const u=Ae(n);return u.sa(),new WR(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:uI.bind(null,i),r_:fI.bind(null,i),ta:cI.bind(null,i),na:hI.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Ch(i)):(await i.fa.stop(),i.Ta.length>0&&(se(qs,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new Jm(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eg(i,e){if(ni("AsyncQueue",`${e}: ${i}`),co(i))return new ie(Y.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{static emptySet(e){return new Qa(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||me.comparator(n.key,s.key):(n,s)=>me.comparator(n.key,s.key),this.keyedMap=Ol(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Qa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.ga=new ht(me.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class io{constructor(e,n,s,o,u,f,m,p,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new io(e,n,Qa.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class gI{constructor(){this.queries=Bv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Ae(n),u=o.queries;o.queries=Bv(),u.forEach(((f,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new ie(Y.ABORTED,"Firestore shutting down"))}}function Bv(){return new Fs((i=>mE(i)),Sh)}async function XE(i,e){const n=Ae(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new mI,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=eg(f,`Initialization of query '${Ba(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&tg(n)}async function $E(i,e){const n=Ae(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function pI(i,e){const n=Ae(i);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&tg(n)}function yI(i,e,n){const s=Ae(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function tg(i){i.Ca.forEach((e=>{e.next()}))}var Sm,Hv;(Hv=Sm||(Sm={})).Ma="default",Hv.Cache="cache";class ZE{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new io(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Sm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.key=e}}class JE{constructor(e){this.key=e}}class _I{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=gE(e),this.tu=new Qa(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new qv,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((S,R)=>{const I=o.get(S),z=bh(this.query,R)?R:null,F=!!I&&this.mutatedKeys.has(I.key),J=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let W=!1;I&&z?I.data.isEqual(z.data)?F!==J&&(s.track({type:3,doc:z}),W=!0):this.su(I,z)||(s.track({type:2,doc:z}),W=!0,(p&&this.eu(z,p)>0||y&&this.eu(z,y)<0)&&(m=!0)):!I&&z?(s.track({type:0,doc:z}),W=!0):I&&!z&&(s.track({type:1,doc:I}),W=!0,(p||y)&&(m=!0)),W&&(z?(f=f.add(z),u=J?u.add(S):u.delete(S)):(f=f.delete(S),u=u.delete(S)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const S=this.query.limitType==="F"?f.last():f.first();f=f.delete(S.key),u=u.delete(S.key),s.track({type:1,doc:S})}return{tu:f,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((S,R)=>(function(z,F){const J=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:W})}};return J(z)-J(F)})(S.type,R.type)||this.eu(S.doc,R.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,f.length!==0||y?{snapshot:new io(this.query,e.tu,u,f,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new JE(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new WE(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return io.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ng="SyncEngine";class vI{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class EI{constructor(e){this.key=e,this.hu=!1}}class TI{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Fs((m=>mE(m)),Sh),this.Iu=new Map,this.Eu=new Set,this.du=new ht(me.comparator),this.Au=new Map,this.Ru=new Fm,this.Vu={},this.mu=new Map,this.fu=ro.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function SI(i,e,n=!0){const s=sT(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await eT(s,e,n,!0),o}async function bI(i,e){const n=sT(i);await eT(n,e,!0,!1)}async function eT(i,e,n,s){const o=await HR(i.localStore,gr(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await wI(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&HE(i.remoteStore,o),m}async function wI(i,e,n,s,o){i.pu=(R,I,z)=>(async function(J,W,ce,ue){let ae=W.view.ru(ce);ae.Cs&&(ae=await Pv(J.localStore,W.query,!1).then((({documents:N})=>W.view.ru(N,ae))));const we=ue&&ue.targetChanges.get(W.targetId),ge=ue&&ue.targetMismatches.get(W.targetId)!=null,Re=W.view.applyChanges(ae,J.isPrimaryClient,we,ge);return Fv(J,W.targetId,Re.au),Re.snapshot})(i,R,I,z);const u=await Pv(i.localStore,e,!0),f=new _I(e,u.Qs),m=f.ru(u.documents),p=tu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),y=f.applyChanges(m,i.isPrimaryClient,p);Fv(i,n,y.au);const S=new vI(e,n,f);return i.Tu.set(e,S),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),y.snapshot}async function AI(i,e,n){const s=Ae(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!Sh(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Em(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Xm(s.remoteStore,o.targetId),bm(s,o.targetId)})).catch(uo)):(bm(s,o.targetId),await Em(s.localStore,o.targetId,!0))}async function RI(i,e){const n=Ae(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Xm(n.remoteStore,s.targetId))}async function II(i,e,n){const s=MI(i);try{const o=await(function(f,m){const p=Ae(f),y=ot.now(),S=m.reduce(((z,F)=>z.add(F.key)),Pe());let R,I;return p.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let F=ri(),J=Pe();return p.Ns.getEntries(z,S).next((W=>{F=W,F.forEach(((ce,ue)=>{ue.isValidDocument()||(J=J.add(ce))}))})).next((()=>p.localDocuments.getOverlayedDocuments(z,F))).next((W=>{R=W;const ce=[];for(const ue of m){const ae=B1(ue,R.get(ue.key).overlayedDocument);ae!=null&&ce.push(new Qs(ue.key,ae,aE(ae.value.mapValue),ei.exists(!0)))}return p.mutationQueue.addMutationBatch(z,y,ce,m)})).next((W=>{I=W;const ce=W.applyToLocalDocumentSet(R,J);return p.documentOverlayCache.saveOverlays(z,W.batchId,ce)}))})).then((()=>({batchId:I.batchId,changes:yE(R)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,p){let y=f.Vu[f.currentUser.toKey()];y||(y=new ht(Me)),y=y.insert(m,p),f.Vu[f.currentUser.toKey()]=y})(s,o.batchId,n),await ru(s,o.changes),await Ch(s.remoteStore)}catch(o){const u=eg(o,"Failed to persist write");n.reject(u)}}async function tT(i,e){const n=Ae(i);try{const s=await zR(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(Fe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Fe(f.hu,14607):o.removedDocuments.size>0&&(Fe(f.hu,42227),f.hu=!1))})),await ru(n,s,e)}catch(s){await uo(s)}}function Gv(i,e,n){const s=Ae(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const p=Ae(f);p.onlineState=m;let y=!1;p.queries.forEach(((S,R)=>{for(const I of R.Sa)I.va(m)&&(y=!0)})),y&&tg(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function xI(i,e,n){const s=Ae(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new ht(me.comparator);f=f.insert(u,en.newNoDocument(u,be.min()));const m=Pe().add(u),p=new Rh(be.min(),new Map,new ht(Me),f,m);await tT(s,p),s.du=s.du.remove(u),s.Au.delete(e),rg(s)}else await Em(s.localStore,e,!1).then((()=>bm(s,e,n))).catch(uo)}async function CI(i,e){const n=Ae(i),s=e.batch.batchId;try{const o=await jR(n.localStore,e);rT(n,s,null),nT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ru(n,o)}catch(o){await uo(o)}}async function NI(i,e,n){const s=Ae(i);try{const o=await(function(f,m){const p=Ae(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let S;return p.mutationQueue.lookupMutationBatch(y,m).next((R=>(Fe(R!==null,37113),S=R.keys(),p.mutationQueue.removeMutationBatch(y,R)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,S,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,S))).next((()=>p.localDocuments.getDocuments(y,S)))}))})(s.localStore,e);rT(s,e,n),nT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ru(s,o)}catch(o){await uo(o)}}function nT(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function rT(i,e,n){const s=Ae(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function bm(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||iT(i,s)}))}function iT(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Xm(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),rg(i))}function Fv(i,e,n){for(const s of n)s instanceof WE?(i.Ru.addReference(s.key,e),DI(i,s)):s instanceof JE?(se(ng,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||iT(i,s.key)):Ee(19791,{wu:s})}function DI(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(se(ng,"New document in limbo: "+n),i.Eu.add(s),rg(i))}function rg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new me(st.fromString(e)),s=i.fu.next();i.Au.set(s,new EI(n)),i.du=i.du.insert(n,s),HE(i.remoteStore,new zi(gr(zm(n.path)),s,"TargetPurposeLimboResolution",vh.ce))}}async function ru(i,e,n){const s=Ae(i),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{f.push(s.pu(p,e,n).then((y=>{var S;if((y||n)&&s.isPrimaryClient){const R=y?!y.fromCache:(S=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:S.current;s.sharedClientState.updateQueryState(p.targetId,R?"current":"not-current")}if(y){o.push(y);const R=Km.As(p.targetId,y);u.push(R)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(p,y){const S=Ae(p);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(R=>$.forEach(y,(I=>$.forEach(I.Es,(z=>S.persistence.referenceDelegate.addReference(R,I.targetId,z))).next((()=>$.forEach(I.ds,(z=>S.persistence.referenceDelegate.removeReference(R,I.targetId,z)))))))))}catch(R){if(!co(R))throw R;se(Ym,"Failed to update sequence numbers: "+R)}for(const R of y){const I=R.targetId;if(!R.fromCache){const z=S.Ms.get(I),F=z.snapshotVersion,J=z.withLastLimboFreeSnapshotVersion(F);S.Ms=S.Ms.insert(I,J)}}})(s.localStore,u))}async function OI(i,e){const n=Ae(i);if(!n.currentUser.isEqual(e)){se(ng,"User change. New user:",e.toKey());const s=await jE(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new ie(Y.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ru(n,s.Ls)}}function VI(i,e){const n=Ae(i),s=n.Au.get(e);if(s&&s.hu)return Pe().add(s.key);{let o=Pe();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function sT(i){const e=Ae(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=tT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xI.bind(null,e),e.Pu.H_=pI.bind(null,e.eventManager),e.Pu.yu=yI.bind(null,e.eventManager),e}function MI(i){const e=Ae(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NI.bind(null,e),e}class lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ih(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UR(this.persistence,new PR,e.initialUser,this.serializer)}Cu(e){return new UE(Qm.mi,this.serializer)}Du(e){return new FR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lh.provider={build:()=>new lh};class PI extends lh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Fe(this.persistence.referenceDelegate instanceof ah,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new ER(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new UE((s=>ah.mi(s,n)),this.serializer)}}class wm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Gv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=OI.bind(null,this.syncEngine),await dI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new gI})()}createDatastore(e){const n=Ih(e.databaseInfo.databaseId),s=(function(u){return new $R(u)})(e.databaseInfo);return(function(u,f,m,p){return new eI(u,f,m,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,m){return new nI(s,o,u,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>Gv(this.syncEngine,n,0)),(function(){return Uv.v()?new Uv:new QR})())}createSyncEngine(e,n){return(function(o,u,f,m,p,y,S){const R=new TI(o,u,f,m,p,y);return S&&(R.gu=!0),R})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=Ae(o);se(qs,"RemoteStore shutting down."),u.Ea.add(5),await nu(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}wm.provider={build:()=>new wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ni("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi="FirestoreClient";class kI{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Jt.UNAUTHENTICATED,this.clientId=Mm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{se(Zi,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(se(Zi,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=eg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Jd(i,e){i.asyncQueue.verifyOperationInProgress(),se(Zi,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await jE(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Qv(i,e){i.asyncQueue.verifyOperationInProgress();const n=await LI(i);se(Zi,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>zv(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>zv(e.remoteStore,o))),i._onlineComponents=e}async function LI(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){se(Zi,"Using user provided OfflineComponentProvider");try{await Jd(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Y.FAILED_PRECONDITION||o.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Wa("Error using user provided cache. Falling back to memory cache: "+n),await Jd(i,new lh)}}else se(Zi,"Using default OfflineComponentProvider"),await Jd(i,new PI(void 0));return i._offlineComponents}async function oT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(se(Zi,"Using user provided OnlineComponentProvider"),await Qv(i,i._uninitializedComponentsProvider._online)):(se(Zi,"Using default OnlineComponentProvider"),await Qv(i,new wm))),i._onlineComponents}function UI(i){return oT(i).then((e=>e.syncEngine))}async function lT(i){const e=await oT(i),n=e.eventManager;return n.onListen=SI.bind(null,e.syncEngine),n.onUnlisten=AI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RI.bind(null,e.syncEngine),n}function jI(i,e,n={}){const s=new Jr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,p,y){const S=new aT({next:I=>{S.Nu(),f.enqueueAndForget((()=>$E(u,R)));const z=I.docs.has(m);!z&&I.fromCache?y.reject(new ie(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&I.fromCache&&p&&p.source==="server"?y.reject(new ie(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),R=new ZE(zm(m.path),S,{includeMetadataChanges:!0,qa:!0});return XE(u,R)})(await lT(i),i.asyncQueue,e,n,s))),s.promise}function zI(i,e,n={}){const s=new Jr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,p,y){const S=new aT({next:I=>{S.Nu(),f.enqueueAndForget((()=>$E(u,R))),I.fromCache&&p.source==="server"?y.reject(new ie(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(I)},error:I=>y.reject(I)}),R=new ZE(m,S,{includeMetadataChanges:!0,qa:!0});return XE(u,R)})(await lT(i),i.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="firestore.googleapis.com",Yv=!0;class Xv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cT,this.ssl=Yv}else this.host=e.host,this.ssl=e.ssl??Yv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_R)throw new ie(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new QA;switch(s.type){case"firstParty":return new $A(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ie(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Kv.get(n);s&&(se("ComponentProvider","Removing Datastore"),Kv.delete(n),s.terminate())})(this),Promise.resolve()}}function qI(i,e,n,s={}){var y;i=eo(i,Nh);const o=ao(e),u=i._getSettings(),f={...u,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(V0(`https://${m}`),M0("Firestore",!0)),u.host!==cT&&u.host!==m&&Wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!Us(p,f)&&(i._setSettings(p),s.mockUserToken)){let S,R;if(typeof s.mockUserToken=="string")S=s.mockUserToken,R=Jt.MOCK_USER;else{S=vw(s.mockUserToken,(y=i._app)==null?void 0:y.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new ie(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new Jt(I)}i._authCredentials=new KA(new Y0(S,R))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new fo(this.firestore,e,this._query)}}class Ot{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Wl(n,Ot._jsonSchema))return new Ot(e,s||null,new me(st.fromString(n.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Rt("string",Ot._jsonSchemaVersion),referencePath:Rt("string")};class Fi extends fo{constructor(e,n,s){super(e,n,zm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new me(e))}withConverter(e){return new Fi(this.firestore,e,this._path)}}function Ys(i,e,...n){if(i=Kt(i),X0("collection","path",e),i instanceof Nh){const s=st.fromString(e,...n);return lv(s),new Fi(i,null,s)}{if(!(i instanceof Ot||i instanceof Fi))throw new ie(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(st.fromString(e,...n));return lv(s),new Fi(i.firestore,null,s)}}function hT(i,e,...n){if(i=Kt(i),arguments.length===1&&(e=Mm.newId()),X0("doc","path",e),i instanceof Nh){const s=st.fromString(e,...n);return ov(s),new Ot(i,null,new me(s))}{if(!(i instanceof Ot||i instanceof Fi))throw new ie(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(st.fromString(e,...n));return ov(s),new Ot(i.firestore,i instanceof Fi?i.converter:null,new me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="AsyncQueue";class Zv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qE(this,"async_queue_retry"),this._c=()=>{const s=Wd();s&&se($v,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Wd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Wd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Jr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!co(e))throw e;se($v,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ni("INTERNAL UNHANDLED ERROR: ",Wv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Jm.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ee(47125,{Pc:Wv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Wv(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Dh extends Nh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new Zv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zv(e),this._firestoreClient=void 0,await e}}}function BI(i,e){const n=typeof i=="object"?i:U0(),s=typeof i=="string"?i:Jc,o=Om(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=yw("firestore");u&&qI(o,...u)}return o}function ig(i){if(i._terminated)throw new ie(Y.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||HI(i),i._firestoreClient}function HI(i){var s,o,u;const e=i._freezeSettings(),n=(function(m,p,y,S){return new d1(m,p,y,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,uT(S.experimentalLongPollingOptions),S.useFetchStreams,S.isUsingEmulator)})(i._databaseId,((s=i._app)==null?void 0:s.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new kI(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(Yt.fromBase64String(e))}catch(n){throw new ie(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ln(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wl(e,Ln._jsonSchema))return Ln.fromBase64String(e.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:Rt("string",Ln._jsonSchemaVersion),bytes:Rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yr._jsonSchemaVersion}}static fromJSON(e){if(Wl(e,yr._jsonSchema))return new yr(e.latitude,e.longitude)}}yr._jsonSchemaVersion="firestore/geoPoint/1.0",yr._jsonSchema={type:Rt("string",yr._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wl(e,_r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new _r(e.vectorValues);throw new ie(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_r._jsonSchemaVersion="firestore/vectorValue/1.0",_r._jsonSchema={type:Rt("string",_r._jsonSchemaVersion),vectorValues:Rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=/^__.*__$/;class FI{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new eu(e,this.data,n,this.fieldTransforms)}}function dT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:i})}}class ag{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ag({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return uh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dT(this.Ac)&&GI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class QI{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Ih(e)}Cc(e,n,s,o=!1){return new ag({Ac:e,methodName:n,Dc:s,path:Qt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mT(i){const e=i._freezeSettings(),n=Ih(i._databaseId);return new QI(i._databaseId,!!e.ignoreUndefinedProperties,n)}function KI(i,e,n,s,o,u={}){const f=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);yT("Data must be an object, but it was:",f,s);const m=gT(s,f);let p,y;if(u.merge)p=new Qn(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const S=[];for(const R of u.mergeFields){const I=XI(e,R,n);if(!f.contains(I))throw new ie(Y.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);ZI(S,I)||S.push(I)}p=new Qn(S),y=f.fieldTransforms.filter((R=>p.covers(R.field)))}else p=null,y=f.fieldTransforms;return new FI(new kn(m),p,y)}function YI(i,e,n,s=!1){return og(n,i.Cc(s?4:3,e))}function og(i,e){if(pT(i=Kt(i)))return yT("Unsupported field value:",e,i),gT(i,e);if(i instanceof fT)return(function(s,o){if(!dT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const m of s){let p=og(m,o.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=Kt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return k1(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ot.fromDate(s);return{timestampValue:sh(o.serializer,u)}}if(s instanceof ot){const u=new ot(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:sh(o.serializer,u)}}if(s instanceof yr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ln)return{bytesValue:NE(o.serializer,s._byteString)};if(s instanceof Ot){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Gm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof _r)return(function(f,m){return{mapValue:{fields:{[iE]:{stringValue:sE},[eh]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return qm(m.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${_h(s)}`)})(i,e)}function gT(i,e){const n={};return W0(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(i,((s,o)=>{const u=og(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function pT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ot||i instanceof yr||i instanceof Ln||i instanceof Ot||i instanceof fT||i instanceof _r)}function yT(i,e,n){if(!pT(n)||!$0(n)){const s=_h(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function XI(i,e,n){if((e=Kt(e))instanceof sg)return e._internalPath;if(typeof e=="string")return _T(i,e);throw uh("Field path arguments must be of type string or ",i,!1,void 0,n)}const $I=new RegExp("[~\\*/\\[\\]]");function _T(i,e,n){if(e.search($I)>=0)throw uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new sg(...e.split("."))._internalPath}catch{throw uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function uh(i,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new ie(Y.INVALID_ARGUMENT,m+i+p)}function ZI(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WI extends vT{data(){return super.data()}}function lg(i,e){return typeof e=="string"?_T(i,e):e instanceof sg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ie(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class ex extends ug{}function Oh(i,e,...n){let s=[];e instanceof ug&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((p=>p instanceof cg)).length,m=u.filter((p=>p instanceof Vh)).length;if(f>1||f>0&&m>0)throw new ie(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Vh extends ex{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Vh(e,n,s)}_apply(e){const n=this._parse(e);return ET(e._query,n),new fo(e.firestore,e.converter,mm(e._query,n))}_parse(e){const n=mT(e.firestore);return(function(u,f,m,p,y,S,R){let I;if(y.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new ie(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){e0(R,S);const F=[];for(const J of R)F.push(Jv(p,u,J));I={arrayValue:{values:F}}}else I=Jv(p,u,R)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||e0(R,S),I=YI(m,f,R,S==="in"||S==="not-in");return At.create(y,S,I)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Bs(i,e,n){const s=e,o=lg("where",i);return Vh._create(o,s,n)}class cg extends ug{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)ET(f,p),f=mm(f,p)})(e._query,n),new fo(e.firestore,e.converter,mm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Jv(i,e,n){if(typeof(n=Kt(n))=="string"){if(n==="")throw new ie(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dE(e)&&n.indexOf("/")!==-1)throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(st.fromString(n));if(!me.isDocumentKey(s))throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return pv(i,new me(s))}if(n instanceof Ot)return pv(i,n._key);throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_h(n)}.`)}function e0(i,e){if(!Array.isArray(i)||i.length===0)throw new ie(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ET(i,e){const n=(function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ie(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class tx{convertValue(e,n="none"){switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Gs(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){var s,o,u;const n=(u=(o=(s=e.fields)==null?void 0:s[eh].arrayValue)==null?void 0:o.values)==null?void 0:u.map((f=>_t(f.doubleValue)));return new _r(n)}convertGeoPoint(e){return new yr(_t(e.latitude),_t(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Th(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Hl(e));default:return null}}convertTimestamp(e){const n=Ki(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=st.fromString(e);Fe(kE(s),9688,{name:e});const o=new Gl(s.get(1),s.get(3)),u=new me(s.popFirst(5));return o.isEqual(n)||ni(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class Ml{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ls extends vT{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(lg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ls._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ls._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ls._jsonSchema={type:Rt("string",Ls._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class Fc extends Ls{data(e={}){return super.data(e)}}class Ka{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ml(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Fc(this._firestore,this._userDataWriter,s.key,s,new Ml(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const p=new Fc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ml(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new Fc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ml(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,S=-1;return m.type!==0&&(y=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),S=f.indexOf(m.doc.key)),{type:rx(m.type),doc:p,oldIndex:y,newIndex:S}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ka._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function rx(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(i){i=eo(i,Ot);const e=eo(i.firestore,Dh);return jI(ig(e),i._key).then((n=>ox(e,i,n)))}Ka._jsonSchemaVersion="firestore/querySnapshot/1.0",Ka._jsonSchema={type:Rt("string",Ka._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class TT extends tx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function mo(i){i=eo(i,fo);const e=eo(i.firestore,Dh),n=ig(e),s=new TT(e);return JI(i._query),zI(n,i._query).then((o=>new Ka(e,s,i,o)))}function sx(i,e){const n=eo(i.firestore,Dh),s=hT(i),o=nx(i.converter,e);return ax(n,[KI(mT(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,ei.exists(!1))]).then((()=>s))}function ax(i,e){return(function(s,o){const u=new Jr;return s.asyncQueue.enqueueAndForget((async()=>II(await UI(s),o,u))),u.promise})(ig(i),e)}function ox(i,e,n){const s=n.docs.get(e._key),o=new TT(i);return new Ls(i,o,e._key,s,new Ml(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){lo=o})(oo),Za(new js("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new Dh(new YA(s.getProvider("auth-internal")),new ZA(f,s.getProvider("app-check-internal")),(function(y,S){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ie(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(y.options.projectId,S)})(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Hi(rv,iv,e),Hi(rv,iv,"esm2020")})();var lx="firebase",ux="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hi(lx,ux,"app");function ST(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cx=ST,bT=new $l("auth","Firebase",ST());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Nm("@firebase/auth");function hx(i,...e){ch.logLevel<=Ve.WARN&&ch.warn(`Auth (${oo}): ${i}`,...e)}function Qc(i,...e){ch.logLevel<=Ve.ERROR&&ch.error(`Auth (${oo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(i,...e){throw fg(i,...e)}function Yn(i,...e){return fg(i,...e)}function hg(i,e,n){const s={...cx(),[e]:n};return new $l("auth","Firebase",s).create(e,{appName:i.name})}function vr(i){return hg(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fx(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Un(i,"argument-error"),hg(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fg(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return bT.create(i,...e)}function ve(i,e,...n){if(!i)throw fg(e,...n)}function Zr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Qc(e),new Error(e)}function ii(i,e){i||Zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function dx(){return t0()==="http:"||t0()==="https:"}function t0(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dx()||Aw()||"connection"in navigator)?navigator.onLine:!0}function gx(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ii(n>e,"Short delay should be less than long delay!"),this.isMobile=Sw()||Rw()}get(){return mx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(i,e){ii(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_x=new iu(3e4,6e4);function oi(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Sr(i,e,n,s,o={}){return AT(i,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=Zl({key:i.config.apiKey,...f}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:p,...u};return ww()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&ao(i.emulatorConfig.host)&&(y.credentials="include"),wT.fetch()(await RT(i,i.config.apiHost,n,m),y)})}async function AT(i,e,n){i._canInitEmulator=!1;const s={...px,...e};try{const o=new Ex(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Lc(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lc(i,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw Lc(i,"email-already-in-use",f);if(p==="USER_DISABLED")throw Lc(i,"user-disabled",f);const S=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw hg(i,S,y);Un(i,S)}}catch(o){if(o instanceof ai)throw o;Un(i,"network-request-failed",{message:String(o)})}}async function su(i,e,n,s,o={}){const u=await Sr(i,e,n,s,o);return"mfaPendingCredential"in u&&Un(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function RT(i,e,n,s){const o=`${e}${n}?${s}`,u=i,f=u.config.emulator?dg(i.config,o):`${i.config.apiScheme}://${o}`;return yx.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function vx(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ex{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Yn(this.auth,"network-request-failed")),_x.get())})}}function Lc(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Yn(i,e,s);return o.customData._tokenResponse=n,o}function n0(i){return i!==void 0&&i.enterprise!==void 0}class Tx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return vx(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Sx(i,e){return Sr(i,"GET","/v2/recaptchaConfig",oi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bx(i,e){return Sr(i,"POST","/v1/accounts:delete",e)}async function hh(i,e){return Sr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wx(i,e=!1){const n=Kt(i),s=await n.getIdToken(e),o=mg(s);ve(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:zl(em(o.auth_time)),issuedAtTime:zl(em(o.iat)),expirationTime:zl(em(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function em(i){return Number(i)*1e3}function mg(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Qc("JWT malformed, contained fewer than 3 sections"),null;try{const o=C0(n);return o?JSON.parse(o):(Qc("Failed to decode base64 JWT payload"),null)}catch(o){return Qc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function r0(i){const e=mg(i);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ai&&Ax(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function Ax({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zl(this.lastLoginAt),this.creationTime=zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fh(i){var R;const e=i.auth,n=await i.getIdToken(),s=await so(i,hh(e,{idToken:n}));ve(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=(R=o.providerUserInfo)!=null&&R.length?IT(o.providerUserInfo):[],f=xx(i.providerData,u),m=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!(f!=null&&f.length),y=m?p:!1,S={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Rm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,S)}async function Ix(i){const e=Kt(i);await fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xx(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function IT(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cx(i,e){const n=await AT(i,{},async()=>{const s=Zl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await RT(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return i.emulatorConfig&&ao(i.emulatorConfig.host)&&(p.credentials="include"),wT.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Nx(i,e){return Sr(i,"POST","/v2/accounts:revokeToken",oi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):r0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=r0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await Cx(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new Ya;return s&&(ve(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(ve(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(ve(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ya,this.toJSON())}_performRefresh(){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(i,e){ve(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Kn{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new Rx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Rm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await so(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wx(this,e)}reload(){return Ix(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Kn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await fh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hn(this.auth.app))return Promise.reject(vr(this.auth));const e=await this.getIdToken();return await so(this,bx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,S=n.lastLoginAt??void 0,{uid:R,emailVerified:I,isAnonymous:z,providerData:F,stsTokenManager:J}=n;ve(R&&J,e,"internal-error");const W=Ya.fromJSON(this.name,J);ve(typeof R=="string",e,"internal-error"),ki(s,e.name),ki(o,e.name),ve(typeof I=="boolean",e,"internal-error"),ve(typeof z=="boolean",e,"internal-error"),ki(u,e.name),ki(f,e.name),ki(m,e.name),ki(p,e.name),ki(y,e.name),ki(S,e.name);const ce=new Kn({uid:R,auth:e,email:o,emailVerified:I,displayName:s,isAnonymous:z,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:W,createdAt:y,lastLoginAt:S});return F&&Array.isArray(F)&&(ce.providerData=F.map(ue=>({...ue}))),p&&(ce._redirectEventId=p),ce}static async _fromIdTokenResponse(e,n,s=!1){const o=new Ya;o.updateFromServerResponse(n);const u=new Kn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await fh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];ve(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?IT(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Ya;m.updateFromIdToken(s);const p=new Kn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Rm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new Map;function Wr(i){ii(i instanceof Function,"Expected a class definition");let e=i0.get(i);return e?(ii(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,i0.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xT.type="NONE";const s0=xT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(i,e,n){return`firebase:${i}:${e}:${n}`}class Xa{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Kc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Kc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await hh(this.auth,{idToken:e}).catch(()=>{});return n?Kn._fromGetAccountInfoResponse(this.auth,n,e):null}return Kn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Xa(Wr(s0),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||Wr(s0);const f=Kc(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const S=await y._get(f);if(S){let R;if(typeof S=="string"){const I=await hh(e,{idToken:S}).catch(()=>{});if(!I)break;R=await Kn._fromGetAccountInfoResponse(e,I,S)}else R=Kn._fromJSON(e,S);y!==u&&(m=R),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Xa(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new Xa(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MT(e))return"Blackberry";if(PT(e))return"Webos";if(NT(e))return"Safari";if((e.includes("chrome/")||DT(e))&&!e.includes("edge/"))return"Chrome";if(VT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function CT(i=tn()){return/firefox\//i.test(i)}function NT(i=tn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DT(i=tn()){return/crios\//i.test(i)}function OT(i=tn()){return/iemobile/i.test(i)}function VT(i=tn()){return/android/i.test(i)}function MT(i=tn()){return/blackberry/i.test(i)}function PT(i=tn()){return/webos/i.test(i)}function gg(i=tn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function Dx(i=tn()){var e;return gg(i)&&!!((e=window.navigator)!=null&&e.standalone)}function Ox(){return Iw()&&document.documentMode===10}function kT(i=tn()){return gg(i)||VT(i)||PT(i)||MT(i)||/windows phone/i.test(i)||OT(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(i,e=[]){let n;switch(i){case"Browser":n=a0(tn());break;case"Worker":n=`${a0(tn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(i,e={}){return Sr(i,"GET","/v2/passwordPolicy",oi(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=6;class kx{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Px,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o0(this),this.idTokenSubscription=new o0(this),this.beforeStateQueue=new Vx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wr(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await Xa.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await hh(this,{idToken:e}),s=await Kn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(hn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(u=this.redirectUser)==null?void 0:u._redirectEventId,m=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===m)&&(p!=null&&p.user)&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(f){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await fh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hn(this.app))return Promise.reject(vr(this));const n=e?Kt(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hn(this.app)?Promise.reject(vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hn(this.app)?Promise.reject(vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Mx(this),n=new kx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $l("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Nx(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wr(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await Xa.create(this,[Wr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&hx(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function br(i){return Kt(i)}class o0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Pw(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ux(i){Mh=i}function UT(i){return Mh.loadJS(i)}function jx(){return Mh.recaptchaEnterpriseScript}function zx(){return Mh.gapiScript}function qx(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class Bx{constructor(){this.enterprise=new Hx}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Hx{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Gx="recaptcha-enterprise",jT="NO_RECAPTCHA";class Fx{constructor(e){this.type=Gx,this.auth=br(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{Sx(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new Tx(p);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,f(y.siteKey)}}).catch(p=>{m(p)})})}function o(u,f,m){const p=window.grecaptcha;n0(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(y=>{f(y)}).catch(()=>{f(jT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Bx().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&n0(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=jx();p.length!==0&&(p+=m),UT(p).then(()=>{o(m,u,f)}).catch(y=>{f(y)})}}).catch(m=>{f(m)})})}}async function l0(i,e,n,s=!1,o=!1){const u=new Fx(i);let f;if(o)f=jT;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function dh(i,e,n,s,o){var u;if((u=i._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await l0(i,e,n,n==="getOobCode");return s(i,f)}else return s(i,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await l0(i,e,n,n==="getOobCode");return s(i,m)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(i,e){const n=Om(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Us(u,e??{}))return o;Un(o,"already-initialized")}return n.initialize({options:e})}function Kx(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Wr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Yx(i,e,n){const s=br(i);ve(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=zT(e),{host:f,port:m}=Xx(e),p=m===null?"":`:${m}`,y={url:`${u}//${f}${p}/`},S=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){ve(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ve(Us(y,s.config.emulator)&&Us(S,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=S,s.settings.appVerificationDisabledForTesting=!0,ao(f)?(V0(`${u}//${f}${p}`),M0("Auth",!0)):$x()}function zT(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function Xx(i){const e=zT(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:u0(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:u0(f)}}}function u0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function $x(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,n){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}async function Zx(i,e){return Sr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wx(i,e){return su(i,"POST","/v1/accounts:signInWithPassword",oi(i,e))}async function qT(i,e){return Sr(i,"POST","/v1/accounts:sendOobCode",oi(i,e))}async function Jx(i,e){return qT(i,e)}async function eC(i,e){return qT(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tC(i,e){return su(i,"POST","/v1/accounts:signInWithEmailLink",oi(i,e))}async function nC(i,e){return su(i,"POST","/v1/accounts:signInWithEmailLink",oi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends pg{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Yl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Yl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dh(e,n,"signInWithPassword",Wx);case"emailLink":return tC(e,{email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dh(e,s,"signUpPassword",Zx);case"emailLink":return nC(e,{idToken:n,email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(i,e){return su(i,"POST","/v1/accounts:signInWithIdp",oi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="http://localhost";class Hs extends pg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new Hs(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return $a(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,$a(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$a(e,n)}buildRequest(){const e={requestUri:rC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sC(i){const e=Cl(Nl(i)).link,n=e?Cl(Nl(e)).deep_link_id:null,s=Cl(Nl(i)).deep_link_id;return(s?Cl(Nl(s)).link:null)||s||n||e||i}class yg{constructor(e){const n=Cl(Nl(e)),s=n.apiKey??null,o=n.oobCode??null,u=iC(n.mode??null);ve(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=sC(e);try{return new yg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.providerId=go.PROVIDER_ID}static credential(e,n){return Yl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=yg.parseLink(n);return ve(s,"argument-error"),Yl._fromEmailAndCode(e,s.code,s.tenantId)}}go.PROVIDER_ID="password";go.EMAIL_PASSWORD_SIGN_IN_METHOD="password";go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends _g{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends au{constructor(){super("facebook.com")}static credential(e){return Hs._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.FACEBOOK_SIGN_IN_METHOD="facebook.com";Li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Hs._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return $r.credential(n,s)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends au{constructor(){super("github.com")}static credential(e){return Hs._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ui.credential(e.oauthAccessToken)}catch{return null}}}Ui.GITHUB_SIGN_IN_METHOD="github.com";Ui.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends au{constructor(){super("twitter.com")}static credential(e,n){return Hs._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ji.credential(n,s)}catch{return null}}}ji.TWITTER_SIGN_IN_METHOD="twitter.com";ji.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BT(i,e){return su(i,"POST","/v1/accounts:signUp",oi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Kn._fromIdTokenResponse(e,s,o),f=c0(s);return new si({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=c0(s);return new si({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function c0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(i){var o;if(hn(i.app))return Promise.reject(vr(i));const e=br(i);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new si({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await BT(e,{returnSecureToken:!0}),s=await si._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends ai{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,mh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new mh(e,n,s,o)}}function HT(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?mh._fromErrorAndOperation(i,u,e,s):u})}async function oC(i,e,n=!1){const s=await so(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return si._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(i,e,n=!1){const{auth:s}=i;if(hn(s.app))return Promise.reject(vr(s));const o="reauthenticate";try{const u=await so(i,HT(s,o,e,i),n);ve(u.idToken,s,"internal-error");const f=mg(u.idToken);ve(f,s,"internal-error");const{sub:m}=f;return ve(i.uid===m,s,"user-mismatch"),si._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Un(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GT(i,e,n=!1){if(hn(i.app))return Promise.reject(vr(i));const s="signIn",o=await HT(i,s,e),u=await si._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function uC(i,e){return GT(br(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FT(i){const e=br(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cC(i,e,n){const s=br(i);await dh(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",eC)}async function hC(i,e,n){if(hn(i.app))return Promise.reject(vr(i));const s=br(i),f=await dh(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BT).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&FT(i),p}),m=await si._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(m.user),m}function fC(i,e,n){return hn(i.app)?Promise.reject(vr(i)):uC(Kt(i),go.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&FT(i),s})}async function QT(i,e){const n=Kt(i),o={requestType:"VERIFY_EMAIL",idToken:await i.getIdToken()},{email:u}=await Jx(n.auth,o);u!==i.email&&await i.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(i,e){return Sr(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(i,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=Kt(i),u={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},f=await so(s,dC(s.auth,u));s.displayName=f.displayName||null,s.photoURL=f.photoUrl||null;const m=s.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(f)}function gC(i,e,n,s){return Kt(i).onIdTokenChanged(e,n,s)}function pC(i,e,n){return Kt(i).beforeAuthStateChanged(e,n)}function yC(i,e,n,s){return Kt(i).onAuthStateChanged(e,n,s)}function _C(i){return Kt(i).signOut()}const gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gh,"1"),this.storage.removeItem(gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=1e3,EC=10;class YT extends KT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);Ox()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,EC):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},vC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}YT.type="LOCAL";const TC=YT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT extends KT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}XT.type="SESSION";const $T=XT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Ph(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async y=>y(n.origin,u)),p=await SC(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const y=vg("",20);o.port1.start();const S=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(R){const I=R;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(S),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(I.data.response);break;default:clearTimeout(S),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(){return window}function wC(i){Er().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(){return typeof Er().WorkerGlobalScope<"u"&&typeof Er().importScripts=="function"}async function AC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RC(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function IC(){return ZT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="firebaseLocalStorageDb",xC=1,ph="firebaseLocalStorage",JT="fbase_key";class ou{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kh(i,e){return i.transaction([ph],e?"readwrite":"readonly").objectStore(ph)}function CC(){const i=indexedDB.deleteDatabase(WT);return new ou(i).toPromise()}function Im(){const i=indexedDB.open(WT,xC);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(ph,{keyPath:JT})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(ph)?e(s):(s.close(),await CC(),e(await Im()))})})}async function h0(i,e,n){const s=kh(i,!0).put({[JT]:e,value:n});return new ou(s).toPromise()}async function NC(i,e){const n=kh(i,!1).get(e),s=await new ou(n).toPromise();return s===void 0?null:s.value}function f0(i,e){const n=kh(i,!0).delete(e);return new ou(n).toPromise()}const DC=800,OC=3;class eS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Im(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>OC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ph._getInstance(IC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await AC(),!this.activeServiceWorker)return;this.sender=new bC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Im();return await h0(e,gh,"1"),await f0(e,gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>h0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>NC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>f0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=kh(o,!1).getAll();return new ou(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eS.type="LOCAL";const VC=eS;new iu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(i,e){return e?Wr(e):(ve(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg extends pg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $a(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $a(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $a(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MC(i){return GT(i.auth,new Eg(i),i.bypassAuthState)}function PC(i){const{auth:e,user:n}=i;return ve(n,e,"internal-error"),lC(n,new Eg(i),i.bypassAuthState)}async function kC(i){const{auth:e,user:n}=i;return ve(n,e,"internal-error"),oC(n,new Eg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MC;case"linkViaPopup":case"linkViaRedirect":return kC;case"reauthViaPopup":case"reauthViaRedirect":return PC;default:Un(this.auth,"internal-error")}}resolve(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new iu(2e3,1e4);async function UC(i,e,n){if(hn(i.app))return Promise.reject(Yn(i,"operation-not-supported-in-this-environment"));const s=br(i);fx(i,e,_g);const o=tS(s,n);return new ks(s,"signInViaPopup",e,o).executeNotNull()}class ks extends nS{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,ks.currentPopupAction&&ks.currentPopupAction.cancel(),ks.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){ii(this.filter.length===1,"Popup operations only handle one event");const e=vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ks.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LC.get())};e()}}ks.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="pendingRedirect",Yc=new Map;class zC extends nS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Yc.get(this.auth._key());if(!e){try{const s=await qC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Yc.set(this.auth._key(),e)}return this.bypassAuthState||Yc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qC(i,e){const n=GC(e),s=HC(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function BC(i,e){Yc.set(i._key(),e)}function HC(i){return Wr(i._redirectPersistence)}function GC(i){return Kc(jC,i.config.apiKey,i.name)}async function FC(i,e,n=!1){if(hn(i.app))return Promise.reject(vr(i));const s=br(i),o=tS(s,e),f=await new zC(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=600*1e3;class KC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!rS(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Yn(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QC&&this.cachedEventUids.clear(),this.cachedEventUids.has(d0(e))}saveEventToCache(e){this.cachedEventUids.add(d0(e)),this.lastProcessedEventTime=Date.now()}}function d0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function rS({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rS(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(i,e={}){return Sr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZC=/^https?/;async function WC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await XC(i);for(const n of e)try{if(JC(n))return}catch{}Un(i,"unauthorized-domain")}function JC(i){const e=Am(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!ZC.test(n))return!1;if($C.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=new iu(3e4,6e4);function m0(){const i=Er().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function t2(i){return new Promise((e,n)=>{var o,u,f;function s(){m0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{m0(),n(Yn(i,"network-request-failed"))},timeout:e2.get()})}if((u=(o=Er().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((f=Er().gapi)!=null&&f.load)s();else{const m=qx("iframefcb");return Er()[m]=()=>{gapi.load?s():n(Yn(i,"network-request-failed"))},UT(`${zx()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw Xc=null,e})}let Xc=null;function n2(i){return Xc=Xc||t2(i),Xc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=new iu(5e3,15e3),i2="__/auth/iframe",s2="emulator/auth/iframe",a2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},o2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function l2(i){const e=i.config;ve(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?dg(e,s2):`https://${i.config.authDomain}/${i2}`,s={apiKey:e.apiKey,appName:i.name,v:oo},o=o2.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Zl(s).slice(1)}`}async function u2(i){const e=await n2(i),n=Er().gapi;return ve(n,i,"internal-error"),e.open({where:document.body,url:l2(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:a2,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Yn(i,"network-request-failed"),m=Er().setTimeout(()=>{u(f)},r2.get());function p(){Er().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},h2=500,f2=600,d2="_blank",m2="http://localhost";class g0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function g2(i,e,n,s=h2,o=f2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...c2,width:s.toString(),height:o.toString(),top:u,left:f},y=tn().toLowerCase();n&&(m=DT(y)?d2:n),CT(y)&&(e=e||m2,p.scrollbars="yes");const S=Object.entries(p).reduce((I,[z,F])=>`${I}${z}=${F},`,"");if(Dx(y)&&m!=="_self")return p2(e||"",m),new g0(null);const R=window.open(e||"",m,S);ve(R,i,"popup-blocked");try{R.focus()}catch{}return new g0(R)}function p2(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2="__/auth/handler",_2="emulator/auth/handler",v2=encodeURIComponent("fac");async function p0(i,e,n,s,o,u){ve(i.config.authDomain,i,"auth-domain-config-required"),ve(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:oo,eventId:o};if(e instanceof _g){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",Mw(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,R]of Object.entries({}))f[S]=R}if(e instanceof au){const S=e.getScopes().filter(R=>R!=="");S.length>0&&(f.scopes=S.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const S of Object.keys(m))m[S]===void 0&&delete m[S];const p=await i._getAppCheckToken(),y=p?`#${v2}=${encodeURIComponent(p)}`:"";return`${E2(i)}?${Zl(m).slice(1)}${y}`}function E2({config:i}){return i.emulator?dg(i,_2):`https://${i.authDomain}/${y2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="webStorageSupport";class T2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$T,this._completeRedirectFn=FC,this._overrideRedirectResult=BC}async _openPopup(e,n,s,o){var f;ii((f=this.eventManagers[e._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const u=await p0(e,n,s,Am(),o);return g2(e,u,vg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await p0(e,n,s,Am(),o);return wC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ii(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await u2(e),s=new KC(e);return n.register("authEvent",o=>(ve(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tm,{type:tm},o=>{var f;const u=(f=o==null?void 0:o[0])==null?void 0:f[tm];u!==void 0&&n(!!u),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=WC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kT()||NT()||gg()}}const S2=T2;var y0="@firebase/auth",_0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function A2(i){Za(new js("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;ve(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LT(i)},y=new Lx(s,o,u,p);return Kx(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Za(new js("auth-internal",e=>{const n=br(e.getProvider("auth").getImmediate());return(s=>new b2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hi(y0,_0,w2(i)),Hi(y0,_0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=300,I2=O0("authIdTokenMaxAge")||R2;let v0=null;const x2=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>I2)return;const o=n==null?void 0:n.token;v0!==o&&(v0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function C2(i=U0()){const e=Om(i,"auth");if(e.isInitialized())return e.getImmediate();const n=Qx(i,{popupRedirectResolver:S2,persistence:[VC,TC,$T]}),s=O0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=x2(u.toString());pC(n,f,()=>f(n.currentUser)),gC(n,m=>f(m))}}const o=N0("auth");return o&&Yx(n,`http://${o}`),n}function N2(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}Ux({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Yn("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",N2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});A2("Browser");const D2={apiKey:"AIzaSyCDZJqOx5eXpu3cD_FBJ8oi-hYvLCpbDXE",authDomain:"verdadreto-bec6a.firebaseapp.com",projectId:"verdadreto-bec6a",storageBucket:"verdadreto-bec6a.firebasestorage.app",messagingSenderId:"938969209658",appId:"1:938969209658:web:534282f57a8ff381c00e03"},iS=L0(D2),Ji=BI(iS),$n=C2(iS),sS=new $r;sS.setCustomParameters({prompt:"select_account"});const Wi={PURCHASED_PACKS:"verdad_reto_purchased_packs",CACHED_GAME_ITEMS:"verdad_reto_cached_items",CACHED_CATEGORIES:"verdad_reto_cached_categories",CACHE_PERMISSION:"verdad_reto_cache_permission",LAST_SYNC:"verdad_reto_last_sync"},O2=()=>{const i=localStorage.getItem(Wi.CACHE_PERMISSION);if(i==="granted")return!0;if(i==="denied")return!1;const e=window.confirm(`¿Deseas permitir que la aplicación guarde los packs comprados localmente para poder jugar sin conexión?

Esto mejorará tu experiencia permitiéndote acceder a tus packs incluso sin internet.`);return localStorage.setItem(Wi.CACHE_PERMISSION,e?"granted":"denied"),e},Xl=()=>localStorage.getItem(Wi.CACHE_PERMISSION)==="granted",V2=async(i,e,n)=>{if(!Xl()){console.log("Cache permission not granted, skipping cache");return}try{const s={pack:i,gameData:{items:e,categories:n,timestamp:Date.now()},timestamp:Date.now()},o=Tg();o[i.id]=s,localStorage.setItem(Wi.PURCHASED_PACKS,JSON.stringify(o)),localStorage.setItem(Wi.LAST_SYNC,Date.now().toString()),console.log(`Pack ${i.name} cached successfully`)}catch(s){console.error("Error caching pack:",s)}},Tg=()=>{try{const i=localStorage.getItem(Wi.PURCHASED_PACKS);return i?JSON.parse(i):{}}catch(i){return console.error("Error reading cached packs:",i),{}}},M2=i=>{if(!Xl())return null;try{const e=Tg(),n=[],s=[];for(const o of i){const u=e[o];u&&(n.push(...u.gameData.items),s.push(...u.gameData.categories))}return n.length===0?null:{items:n,categories:[...new Set(s)]}}catch(e){return console.error("Error reading cached game data:",e),null}},P2=()=>{Object.values(Wi).forEach(i=>{localStorage.removeItem(i)}),console.log("Cache cleared successfully")},aS=()=>{const i=Tg(),e=localStorage.getItem(Wi.LAST_SYNC);return{hasPermission:Xl(),packsCount:Object.keys(i).length,lastSync:e?new Date(parseInt(e)):null,packs:Object.keys(i)}},k2=i=>{var n;if(!i.hasDiscount||!i.priceAmount)return i;if(i.discountValidUntil&&new Date>i.discountValidUntil)return{...i,hasDiscount:!1};let e=i.priceAmount;return i.discountPercentage?e=i.priceAmount*(1-i.discountPercentage/100):i.discountAmount&&(e=i.priceAmount-i.discountAmount),e=Math.max(0,Math.round(e)),{...i,originalPriceAmount:i.priceAmount,priceAmount:e,price:new Intl.NumberFormat("es-ES",{style:"currency",currency:((n=i.currency)==null?void 0:n.toUpperCase())||"EUR"}).format(e/100)}},oS=async()=>{try{const i=Ys(Ji,"packs"),e=await mo(i);return e.empty?(console.warn("No packs found in Firebase database"),[]):e.docs.map(o=>{const u=o.data();return{id:o.id,name:u.name,description:u.description,price:u.price,icon:u.icon,isActive:u.isActive??!0,priceAmount:u.priceAmount,currency:u.currency,isPremium:u.isPremium??!1,stripeProductId:u.stripeProductId,stripePriceId:u.stripePriceId,hasDiscount:u.hasDiscount??!1,discountPercentage:u.discountPercentage,discountAmount:u.discountAmount,discountReason:u.discountReason,discountValidUntil:u.discountValidUntil?u.discountValidUntil.toDate():void 0,originalPriceAmount:u.originalPriceAmount}}).filter(o=>o.isActive).map(o=>k2(o))}catch(i){throw console.error("Error connecting to Firebase:",i),new Error("No se pudo conectar a la base de datos. Verifica tu conexión a internet.")}},L2=async i=>{try{if(!i||i.length===0)return console.warn("No categories provided for questions query"),[];const e=Ys(Ji,"gameItems"),n=Oh(e,Bs("type","==","question"),Bs("category","in",i)),s=await mo(n);return s.empty?(console.warn("No questions found in Firebase database for categories:",i),[]):s.docs.map(u=>{const f=u.data();return{text:f.text,category:f.category}})}catch(e){throw console.error("Error fetching questions from Firebase:",e),new Error("No se pudieron cargar las preguntas. Verifica tu conexión a internet.")}},U2=async i=>{try{if(!i||i.length===0)return console.warn("No categories provided for dares query"),[];const e=Ys(Ji,"gameItems"),n=Oh(e,Bs("type","==","dare"),Bs("category","in",i)),s=await mo(n);return s.empty?(console.warn("No dares found in Firebase database for categories:",i),[]):s.docs.map(u=>{const f=u.data();return{text:f.text,category:f.category}})}catch(e){throw console.error("Error fetching dares from Firebase:",e),new Error("No se pudieron cargar los retos. Verifica tu conexión a internet.")}},j2=async i=>{try{if(!i||i.length===0)return console.warn("No pack IDs provided for categories query"),[];const e=Ys(Ji,"gameItems"),n=Oh(e,Bs("packId","in",i)),s=await mo(n);return s.empty?(console.warn("No categories found in Firebase database for packs:",i),[]):[...new Set(s.docs.map(u=>u.data().category))]}catch(e){throw console.error("Error fetching categories from Firebase:",e),new Error("No se pudieron cargar las categorías. Verifica tu conexión a internet.")}},z2=async i=>{try{if(!i||i.length===0)return console.warn("No pack IDs provided for game data query"),{questions:[],dares:[],categories:[]};const e=await j2(i),[n,s]=await Promise.all([L2(e),U2(e)]);if(Xl()&&(n.length>0||s.length>0)){const o=[...n,...s],u=i.reduce((f,m)=>{const p=o.filter(S=>S.packId===m),y=e.filter(S=>p.some(R=>R.category===S));return p.length>0&&(f[m]={items:p,categories:y}),f},{});for(const[f,m]of Object.entries(u)){const y=(await oS()).find(S=>S.id===f);y&&await V2(y,m.items,m.categories)}}return{questions:n,dares:s,categories:e}}catch(e){console.error("Error fetching game data from Firebase:",e);const n=M2(i);if(n){console.log("Using cached game data for offline play");const s=n.items.filter(u=>!("type"in u)||u.type==="question"),o=n.items.filter(u=>"type"in u&&u.type==="dare");return{questions:s,dares:o,categories:n.categories}}throw Xl()?new Error("No hay conexión a internet y no tienes datos guardados para estos packs."):new Error("No hay conexión a internet y no tienes packs guardados localmente. ¿Deseas activar el almacenamiento local para jugar sin conexión?")}},q2=async()=>{try{const i=Ys(Ji,"categories"),e=await mo(i);return e.empty?(console.warn("No category metadata found in Firebase database"),[]):e.docs.map(s=>{const o=s.data();return{id:s.id,name:o.name,emoji:o.emoji,packId:o.packId}})}catch(i){throw console.error("Error fetching category metadata from Firebase:",i),new Error("No se pudieron cargar los metadatos de categorías. Verifica tu conexión a internet.")}},B2=(i,e)=>{const n=e.find(s=>s.id===i);return n?{name:n.name,emoji:n.emoji}:{name:i,emoji:"🎲"}},H2=({onSelectCategory:i,categories:e})=>{const[n,s]=le.useState([]),[o,u]=le.useState(!0);return le.useEffect(()=>{(async()=>{try{const m=await q2();s(m)}catch(m){console.error("Error loading category metadata:",m)}finally{u(!1)}})()},[]),o?E.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:E.jsx(Tn,{className:"w-full max-w-md text-center",children:E.jsx("p",{className:"text-gray-400",children:"Cargando categorías..."})})}):E.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:E.jsxs(Tn,{className:"w-full max-w-md text-center",children:[E.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Elige una Categoría"}),E.jsx("p",{className:"text-gray-400 mb-8",children:"La categoría determinará el tipo de preguntas y retos."}),E.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.map(f=>{const m=B2(f,n);return E.jsxs($e,{onClick:()=>i(f),className:"text-xl py-4 capitalize",children:[m.name," ",m.emoji]},f)})})]})})},G2=({players:i,currentPlayerIndex:e,onNextPlayer:n,onNewGame:s,questions:o,dares:u,selectedCategory:f,roundConfig:m,gameProgress:p,onRoundEnd:y,onQuestionAsked:S,onDareCompleted:R})=>{const[I,z]=le.useState(null),[F,J]=le.useState(null),[W,ce]=le.useState(new Set),[ue,ae]=le.useState(new Set),we=i[e],ge=le.useMemo(()=>o.map((A,D)=>({item:A,index:D})).filter(A=>A.item.category===f),[o,f]),Re=le.useMemo(()=>u.map((A,D)=>({item:A,index:D})).filter(A=>A.item.category===f),[u,f]),N=A=>{const D=A==="pregunta"?ge:Re,M=A==="pregunta"?W:ue,P=A==="pregunta"?ce:ae,C=D.filter(at=>!M.has(at.index));if(C.length===0){P(new Set);const at=Math.floor(Math.random()*D.length),He=D[at];z(He.item),P(G=>new Set(G).add(He.index))}else{const at=Math.floor(Math.random()*C.length),He=C[at];z(He.item),P(G=>new Set(G).add(He.index))}J(A),A==="pregunta"&&S?S():A==="reto"&&R&&R()},w=()=>{z(null),J(null),e===i.length-1?p.currentRound+1>m.totalRounds?n():y():n()};return E.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center animate-fade-in",children:[E.jsxs(Tn,{className:"w-full max-w-lg min-h-[24rem] flex flex-col justify-between",children:[E.jsxs("div",{children:[E.jsx("div",{className:"mb-2",children:E.jsxs("p",{className:"text-sm text-gray-500",children:["Ronda ",p.currentRound," de ",m.totalRounds]})}),E.jsx("p",{className:"text-lg text-gray-400",children:"Turno de:"}),E.jsx("h2",{className:"text-4xl font-bold my-4 text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400",children:we})]}),I?E.jsxs("div",{className:"animate-fade-in",children:[E.jsx("h3",{className:"text-2xl font-bold mb-6 text-cyan-400 capitalize",children:F}),E.jsx("p",{className:"text-xl md:text-2xl leading-relaxed",children:I.text})]}):E.jsxs("div",{className:"animate-fade-in",children:[E.jsx("h3",{className:"text-2xl font-bold mb-6",children:"¿Verdad o Reto?"}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[E.jsx($e,{onClick:()=>N("pregunta"),className:"w-full sm:w-auto",children:"Pregunta"}),E.jsx($e,{onClick:()=>N("reto"),variant:"secondary",className:"w-full sm:w-auto",children:"Reto"})]})]}),E.jsx("div",{className:"mt-8",children:I&&E.jsx($e,{onClick:w,children:"Siguiente Jugador"})})]}),E.jsx("button",{onClick:s,className:"mt-6 text-sm text-gray-500 hover:text-gray-300 transition",children:"Empezar nuevo juego"})]})},F2=({onSelectRounds:i,onBack:e})=>{const n=[{value:5,label:"5 Rondas",description:"Partida rápida (15-20 min)"},{value:10,label:"10 Rondas",description:"Partida estándar (30-40 min)"},{value:15,label:"15 Rondas",description:"Partida larga (45-60 min)"}];return E.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:E.jsxs(Tn,{className:"w-full max-w-2xl text-center",children:[E.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Configurar Partida"}),E.jsx("p",{className:"text-gray-400 mb-8",children:"Elige cuántas rondas quieres jugar"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:n.map(s=>E.jsxs("div",{className:"relative p-6 rounded-lg border border-gray-600 bg-gray-800/50 hover:border-purple-500 transition-all duration-200 cursor-pointer group",onClick:()=>i(s.value),children:[E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:s.value}),E.jsx("div",{className:"text-lg font-semibold text-white mb-2",children:s.label}),E.jsx("div",{className:"text-sm text-gray-400",children:s.description})]}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]},s.value))}),E.jsx("div",{className:"text-sm text-gray-500 mb-6",children:"💡 Al final de cada ronda se mostrará un anuncio breve"}),E.jsx("div",{className:"flex gap-4 justify-center",children:E.jsx($e,{onClick:e,variant:"secondary",className:"px-6",children:"Volver"})})]})})},Q2=({dataAdSlot:i,className:e,style:n})=>(le.useEffect(()=>{try{(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch(s){console.error("Error loading AdSense ad:",s)}},[]),E.jsx("ins",{className:`adsbygoogle ${e||""}`,style:{display:"block",textAlign:"center",...n},"data-ad-client":"ca-pub-XXXXXXXXXXXXXXXX","data-ad-slot":i,"data-ad-format":"auto","data-full-width-responsive":"true"})),K2=({roundStats:i,currentRound:e,totalRounds:n,onContinue:s,onEndGame:o,hasNoAds:u=!1})=>{const[f,m]=le.useState(!1),[p,y]=le.useState(!1),[S,R]=le.useState(5);le.useEffect(()=>{if(u){m(!0),y(!0);return}const z=setTimeout(()=>{m(!0)},1e3);return()=>clearTimeout(z)},[u]),le.useEffect(()=>{if(!u&&f&&!p){const z=setInterval(()=>{R(F=>F<=1?(y(!0),clearInterval(z),0):F-1)},1e3);return()=>clearInterval(z)}},[f,p,u]);const I=e>=n;return E.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:E.jsxs(Tn,{className:"w-full max-w-2xl text-center",children:[E.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-green-500 to-blue-500",children:I?"¡Partida Completada!":`¡Ronda ${i.roundNumber} Completada!`}),!I&&E.jsxs("p",{className:"text-gray-400 mb-6",children:["Ronda ",e," de ",n]}),E.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-6",children:[E.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Estadísticas de la Ronda"}),E.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[E.jsxs("div",{children:[E.jsx("div",{className:"text-2xl font-bold text-blue-400",children:i.questionsAsked}),E.jsx("div",{className:"text-sm text-gray-400",children:"Preguntas"})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-2xl font-bold text-purple-400",children:i.daresCompleted}),E.jsx("div",{className:"text-sm text-gray-400",children:"Retos"})]})]}),E.jsxs("div",{className:"mt-4",children:[E.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Jugadores participantes:"}),E.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:i.playersParticipated.map((z,F)=>E.jsx("span",{className:"px-3 py-1 bg-purple-600 text-white rounded-full text-sm",children:z},F))})]})]}),!u&&E.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[E.jsxs("div",{className:"text-center mb-4",children:[E.jsx("div",{className:"text-lg font-semibold mb-2",children:"📺 Anuncio"}),p?E.jsx("div",{className:"text-green-400 mb-4",children:"✅ Anuncio completado"}):E.jsxs("div",{className:"mb-4",children:[E.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",S,"s"]}),E.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:E.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-S)/5*100}%`}})})]})]}),E.jsx(Q2,{dataAdSlot:"1234567890",className:"round-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"}})]}),u&&E.jsx("div",{className:"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-lg p-6 mb-6 border border-yellow-500/30",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"text-2xl mb-2",children:"🚫"}),E.jsx("div",{className:"text-lg font-semibold text-yellow-400 mb-2",children:"Sin Anuncios"}),E.jsx("div",{className:"text-sm text-gray-300",children:"Gracias por apoyar la aplicación con tu compra premium"})]})}),E.jsx("div",{className:"flex gap-4 justify-center",children:I?E.jsx($e,{onClick:o,className:"px-8 py-3 text-lg",disabled:!u&&!p,children:"Ver Resultados Finales"}):E.jsxs(E.Fragment,{children:[E.jsx($e,{onClick:o,variant:"secondary",className:"px-6",disabled:!u&&!p,children:"Terminar Partida"}),E.jsx($e,{onClick:s,className:"px-8 py-3 text-lg",disabled:!u&&!p,children:"Siguiente Ronda"})]})}),!p&&E.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Los botones se habilitarán cuando termine el anuncio"})]})})},Y2=({gameStats:i,players:e,onNewGame:n,onBackToMenu:s})=>{const o=i.gameEndTime&&i.gameStartTime?Math.round((i.gameEndTime.getTime()-i.gameStartTime.getTime())/1e3/60):0,u=i.totalRounds>0?Math.round(i.totalQuestions/i.totalRounds):0,f=i.totalRounds>0?Math.round(i.totalDares/i.totalRounds):0;return E.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:E.jsxs(Tn,{className:"w-full max-w-4xl text-center",children:[E.jsx("h1",{className:"text-5xl font-extrabold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500",children:"🎉 ¡Partida Finalizada! 🎉"}),E.jsx("p",{className:"text-gray-400 mb-8 text-lg",children:"¡Esperamos que se hayan divertido mucho!"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[E.jsxs("div",{className:"bg-gradient-to-br from-blue-600/20 to-blue-800/20 rounded-lg p-6 border border-blue-500/30",children:[E.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-2",children:i.totalRounds}),E.jsx("div",{className:"text-lg text-white mb-1",children:"Rondas Jugadas"}),E.jsxs("div",{className:"text-sm text-gray-400",children:[o," minutos"]})]}),E.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-purple-800/20 rounded-lg p-6 border border-purple-500/30",children:[E.jsx("div",{className:"text-4xl font-bold text-purple-400 mb-2",children:i.totalQuestions}),E.jsx("div",{className:"text-lg text-white mb-1",children:"Preguntas"}),E.jsxs("div",{className:"text-sm text-gray-400",children:[u," por ronda"]})]}),E.jsxs("div",{className:"bg-gradient-to-br from-pink-600/20 to-pink-800/20 rounded-lg p-6 border border-pink-500/30",children:[E.jsx("div",{className:"text-4xl font-bold text-pink-400 mb-2",children:i.totalDares}),E.jsx("div",{className:"text-lg text-white mb-1",children:"Retos"}),E.jsxs("div",{className:"text-sm text-gray-400",children:[f," por ronda"]})]})]}),E.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[E.jsx("h3",{className:"text-2xl font-semibold mb-4 text-white",children:"Jugadores Participantes"}),E.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:e.map((m,p)=>E.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full",children:[E.jsx("span",{className:"text-lg",children:"🎮"}),E.jsx("span",{className:"font-medium",children:m})]},p))})]}),i.roundStats.length>0&&E.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[E.jsx("h3",{className:"text-2xl font-semibold mb-4 text-white",children:"Resumen por Rondas"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.roundStats.map((m,p)=>E.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 border border-gray-600",children:[E.jsxs("div",{className:"text-lg font-semibold text-purple-400 mb-2",children:["Ronda ",m.roundNumber]}),E.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[E.jsxs("div",{children:["📝 ",m.questionsAsked," preguntas"]}),E.jsxs("div",{children:["🎯 ",m.daresCompleted," retos"]}),E.jsxs("div",{children:["👥 ",m.playersParticipated.length," jugadores"]})]})]},p))})]}),E.jsxs("div",{className:"bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-lg p-6 mb-8 border border-purple-500/30",children:[E.jsx("div",{className:"text-2xl mb-2",children:"🌟"}),E.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"¡Gracias por jugar!"}),E.jsx("p",{className:"text-gray-300",children:"Esperamos que hayan creado recuerdos increíbles. ¡No olviden compartir sus mejores momentos!"})]}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[E.jsx($e,{onClick:n,className:"px-8 py-3 text-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:"🎮 Nueva Partida"}),E.jsx($e,{onClick:s,variant:"secondary",className:"px-8 py-3 text-lg",children:"🏠 Menú Principal"})]}),E.jsxs("div",{className:"mt-8 text-xs text-gray-500",children:[E.jsx("p",{children:"¿Te gustó el juego? ¡Compártelo con tus amigos!"}),E.jsx("p",{className:"mt-1",children:"Verdad o Reto - La diversión nunca termina"})]})]})})},X2="modulepreload",$2=function(i,e){return new URL(i,e).href},E0={},Z2=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let f=function(S){return Promise.all(S.map(R=>Promise.resolve(R).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};const m=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),y=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=f(n.map(S=>{if(S=$2(S,s),S in E0)return;E0[S]=!0;const R=S.endsWith(".css"),I=R?'[rel="stylesheet"]':"";if(!!s)for(let J=m.length-1;J>=0;J--){const W=m[J];if(W.href===S&&(!R||W.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${S}"]${I}`))return;const F=document.createElement("link");if(F.rel=R?"stylesheet":X2,R||(F.as="script"),F.crossOrigin="",F.href=S,y&&F.setAttribute("nonce",y),document.head.appendChild(F),R)return new Promise((J,W)=>{F.addEventListener("load",J),F.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${S}`)))})}))}function u(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return o.then(f=>{for(const m of f||[])m.status==="rejected"&&u(m.reason);return e().catch(u)})},po=i=>({uid:i.uid,email:i.email,displayName:i.displayName,photoURL:i.photoURL,isAnonymous:i.isAnonymous,emailVerified:i.emailVerified}),lS=async()=>{try{const i=await UC($n,sS);return po(i.user)}catch(i){throw console.error("Error al iniciar sesión con Google:",i),new Error(i.message||"Error al iniciar sesión con Google")}},uS=async(i,e)=>{try{const n=await fC($n,i,e);return po(n.user)}catch(n){throw console.error("Error al iniciar sesión:",n),new Error(bg(n.code))}},cS=async(i,e,n)=>{try{const s=await hC($n,i,e);return n&&await mC(s.user,{displayName:n}),await QT(s.user),po(s.user)}catch(s){throw console.error("Error al registrarse:",s),new Error(bg(s.code))}},hS=async()=>{try{const i=await aC($n);return po(i.user)}catch(i){throw console.error("Error al iniciar sesión anónima:",i),new Error("Error al iniciar sesión anónima")}},W2=async()=>{try{await _C($n)}catch(i){throw console.error("Error al cerrar sesión:",i),new Error("Error al cerrar sesión")}},fS=async i=>{try{await cC($n,i)}catch(e){throw console.error("Error al enviar email de restablecimiento:",e),new Error(bg(e.code))}},dS=async()=>{try{if($n.currentUser)await QT($n.currentUser);else throw new Error("No hay usuario autenticado")}catch(i){throw console.error("Error al reenviar verificación:",i),new Error("Error al reenviar verificación de email")}},mS=i=>yC($n,e=>{i(e?po(e):null)}),Sg=()=>$n.currentUser?po($n.currentUser):null,xm=()=>{const i=Sg();return i!==null&&!i.isAnonymous&&i.emailVerified},bg=i=>{switch(i){case"auth/user-not-found":return"No existe una cuenta con este email";case"auth/wrong-password":return"Contraseña incorrecta";case"auth/email-already-in-use":return"Ya existe una cuenta con este email";case"auth/weak-password":return"La contraseña debe tener al menos 6 caracteres";case"auth/invalid-email":return"Email inválido";case"auth/too-many-requests":return"Demasiados intentos fallidos. Intenta más tarde";case"auth/network-request-failed":return"Error de conexión. Verifica tu internet";default:return"Error de autenticación. Intenta nuevamente"}},J2=Object.freeze(Object.defineProperty({__proto__:null,canPurchase:xm,getCurrentUser:Sg,logout:W2,onAuthStateChange:mS,registerWithEmail:cS,resendEmailVerification:dS,resetPassword:fS,signInAnonymous:hS,signInWithEmail:uS,signInWithGoogle:lS},Symbol.toStringTag,{value:"Module"})),gS=le.createContext(void 0),eN=({children:i})=>{const[e,n]=le.useState({user:null,isLoading:!0,isAuthenticated:!1});le.useEffect(()=>{const m=mS(p=>{n({user:p,isLoading:!1,isAuthenticated:p!==null&&!p.isAnonymous})});return()=>m()},[]);const f={...e,login:()=>{},logout:async()=>{try{const{logout:m}=await Z2(async()=>{const{logout:p}=await Promise.resolve().then(()=>J2);return{logout:p}},void 0,import.meta.url);await m()}catch(m){console.error("Error al cerrar sesión:",m)}},refreshUser:()=>{const m=Sg();n(p=>({...p,user:m,isAuthenticated:m!==null&&!m.isAnonymous}))}};return E.jsx(gS.Provider,{value:f,children:i})},wg=()=>{const i=le.useContext(gS);if(i===void 0)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return i};var pS="basil",tN=function(e){return e===3?"v3":e},yS="https://js.stripe.com",nN="".concat(yS,"/").concat(pS,"/stripe.js"),rN=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,iN=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var sN=function(e){return rN.test(e)||iN.test(e)},aN=function(){for(var e=document.querySelectorAll('script[src^="'.concat(yS,'"]')),n=0;n<e.length;n++){var s=e[n];if(sN(s.src))return s}return null},T0=function(e){var n="",s=document.createElement("script");s.src="".concat(nN).concat(n);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(s),s},oN=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:n})},Il=null,Uc=null,jc=null,lN=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},uN=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},cN=function(e){return Il!==null?Il:(Il=new Promise(function(n,s){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var o=aN();if(!(o&&e)){if(!o)o=T0(e);else if(o&&jc!==null&&Uc!==null){var u;o.removeEventListener("load",jc),o.removeEventListener("error",Uc),(u=o.parentNode)===null||u===void 0||u.removeChild(o),o=T0(e)}}jc=uN(n,s),Uc=lN(s),o.addEventListener("load",jc),o.addEventListener("error",Uc)}catch(f){s(f);return}}),Il.catch(function(n){return Il=null,Promise.reject(n)}))},hN=function(e,n,s){if(e===null)return null;var o=n[0],u=o.match(/^pk_test/),f=tN(e.version),m=pS;u&&f!==m&&console.warn("Stripe.js@".concat(f," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(m,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var p=e.apply(void 0,n);return oN(p,s),p},xl,_S=!1,vS=function(){return xl||(xl=cN(null).catch(function(e){return xl=null,Promise.reject(e)}),xl)};Promise.resolve().then(function(){return vS()}).catch(function(i){_S||console.warn(i)});var fN=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];_S=!0;var o=Date.now();return vS().then(function(u){return hN(u,n,o)})};const dN="pk_live_51S2dpMEamlsERKowyMSm4kgm11dMknJLyZGy9gZsIBBd3BQo3l9Vnn0TYKWcmuDtnq23YEsHo7FL69hGEM3UAboz00Onx53LCm";let nm=null;const mN=()=>(nm||(nm=fN(dN)),nm),ES=async()=>{try{const i=await ix(hT(Ji,"config","stripe"));return i.exists()?i.data():null}catch(i){return console.error("Error obteniendo configuración de Stripe:",i),null}},gN=async(i,e,n)=>{try{if(!i.isPremium)throw new Error("Este pack no requiere pago");const s=await ES();if(!s)throw new Error("Configuración de Stripe no disponible");const o=i.priceAmount||0,u=i.originalPriceAmount||i.priceAmount||0;console.log("Creando sesión de checkout:",{packId:i.id,originalAmount:u,finalAmount:o,hasDiscount:i.hasDiscount,discountReason:i.discountReason});const f=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packId:i.id,priceId:i.stripePriceId,userEmail:e,userId:n,successUrl:`${window.location.origin}${s.successUrl}&pack=${i.id}`,cancelUrl:`${window.location.origin}${s.cancelUrl}`,hasDiscount:i.hasDiscount,finalAmount:o,originalAmount:u,discountReason:i.discountReason})});if(!f.ok){const p=await f.json();throw new Error(p.error||"Error creando sesión de pago")}const m=await f.json();return{sessionId:m.id,url:m.url}}catch(s){throw console.error("Error creando sesión de checkout:",s),s}},pN=async(i,e,n)=>{try{const s=await mN();if(!s)throw new Error("Stripe no está disponible");const o=await gN(i,e,n);if(!o)throw new Error("No se pudo crear la sesión de pago");await yN({userId:n,packId:i.id,stripeSessionId:o.sessionId,purchaseDate:new Date,amount:i.priceAmount||0,currency:i.currency||"EUR",status:"pending",email:e});const{error:u}=await s.redirectToCheckout({sessionId:o.sessionId});if(u)throw new Error(u.message)}catch(s){throw console.error("Error redirigiendo a checkout:",s),s}},yN=async i=>{try{return(await sx(Ys(Ji,"userPurchases"),{...i,purchaseDate:i.purchaseDate.toISOString()})).id}catch(e){throw console.error("Error guardando compra pendiente:",e),e}},_N=async i=>{try{const e=Oh(Ys(Ji,"userPurchases"),Bs("userId","==",i),Bs("status","==","completed"));return(await mo(e)).docs.map(s=>({id:s.id,...s.data(),purchaseDate:new Date(s.data().purchaseDate)}))}catch(e){return console.error("Error obteniendo compras del usuario:",e),[]}},S0=async i=>{try{return(await _N(i)).map(n=>n.packId)}catch(e){return console.error("Error obteniendo packs comprados:",e),[]}},vN=({onClose:i})=>{const[e,n]=le.useState(null),[s,o]=le.useState(!1);le.useEffect(()=>{u()},[]);const u=()=>{const p=aS();n(p)},f=async()=>{o(!0);try{O2()&&u()}finally{o(!1)}},m=()=>{window.confirm("¿Estás seguro de que quieres eliminar todos los datos guardados localmente?")&&(P2(),u())};return e?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("h2",{className:"text-xl font-bold",children:"Almacenamiento Local"}),E.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"Estado del Caché"}),E.jsxs("div",{className:"space-y-2 text-sm",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Permiso:"}),E.jsx("span",{className:`font-medium ${e.hasPermission?"text-green-600":"text-red-600"}`,children:e.hasPermission?"Activado":"Desactivado"})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Packs guardados:"}),E.jsx("span",{className:"font-medium",children:e.packsCount})]}),e.lastSync&&E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:"Última sincronización:"}),E.jsxs("span",{className:"font-medium text-xs",children:[e.lastSync.toLocaleDateString()," ",e.lastSync.toLocaleTimeString()]})]})]})]}),e.packsCount>0&&E.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"Packs Disponibles Sin Conexión"}),E.jsx("div",{className:"space-y-1 text-sm",children:e.packs.map(p=>E.jsxs("div",{className:"flex items-center",children:[E.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),E.jsx("span",{className:"capitalize",children:p.replace("-"," ")})]},p))})]}),E.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"¿Qué es el almacenamiento local?"}),E.jsx("p",{className:"text-sm text-gray-700",children:"Permite guardar los packs que compres en tu dispositivo para poder jugar sin conexión a internet. Los datos se mantienen seguros en tu navegador."})]}),E.jsxs("div",{className:"flex flex-col space-y-2",children:[e.hasPermission?E.jsx("div",{className:"text-center text-green-600 font-medium",children:"✓ Almacenamiento local activado"}):E.jsx($e,{onClick:f,disabled:s,className:"w-full bg-green-600 hover:bg-green-700",children:s?"Procesando...":"Activar Almacenamiento Local"}),e.packsCount>0&&E.jsx($e,{onClick:m,className:"w-full bg-red-600 hover:bg-red-700",children:"Limpiar Datos Guardados"}),E.jsx($e,{onClick:i,className:"w-full bg-gray-600 hover:bg-gray-700",children:"Cerrar"})]})]})]})}):E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:E.jsx("div",{className:"text-center",children:"Cargando información del caché..."})})})},EN=({pack:i,onBack:e,onSuccess:n})=>{const{user:s}=wg(),[o,u]=le.useState(!1),[f,m]=le.useState(null),[p,y]=le.useState(null);le.useEffect(()=>{(async()=>{try{const z=await ES();y(z)}catch{m("Error cargando configuración de pago")}})()},[]);const S=async()=>{if(!s||!s.email){m("Debes estar autenticado para realizar una compra");return}if(!i.isPremium){m("Este pack no requiere pago");return}u(!0),m(null);try{await pN(i,s.email,s.uid),n&&n()}catch(I){m(I.message||"Error procesando el pago"),u(!1)}},R=(I,z)=>new Intl.NumberFormat("es-ES",{style:"currency",currency:z.toUpperCase()}).format(I/100);return p?E.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:E.jsxs("div",{className:"w-full max-w-md",children:[E.jsxs("div",{className:"relative text-center mb-8",children:[E.jsx("button",{onClick:e,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:E.jsx(A0,{className:"w-8 h-8"})}),E.jsx("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Checkout"})]}),E.jsxs(Tn,{className:"p-6",children:[E.jsxs("div",{className:"text-center mb-6",children:[E.jsx("div",{className:"text-6xl mb-4",children:i.icon}),E.jsx("h2",{className:"text-2xl font-bold text-cyan-400 mb-2",children:i.name}),E.jsx("p",{className:"text-gray-400 mb-4",children:i.description}),i.priceAmount&&i.currency&&E.jsxs("div",{className:"bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-lg p-4 mb-4",children:[E.jsx("div",{className:"text-3xl font-bold text-white",children:R(i.priceAmount,i.currency)}),E.jsx("div",{className:"text-sm text-gray-300",children:"Pago único"})]})]}),E.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 mb-6",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[E.jsx(Fa,{className:"w-5 h-5 text-green-400"}),E.jsx("span",{className:"text-green-400 font-semibold",children:"Pago seguro"})]}),E.jsx("p",{className:"text-sm text-gray-300",children:"Tu pago está protegido por Stripe. No almacenamos información de tarjetas de crédito."})]}),s&&E.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:[E.jsxs("div",{className:"text-sm text-gray-300",children:[E.jsx("strong",{children:"Cuenta:"})," ",s.displayName||s.email]}),E.jsxs("div",{className:"text-sm text-gray-300",children:[E.jsx("strong",{children:"Email:"})," ",s.email]})]}),f&&E.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6",children:E.jsx("p",{className:"text-red-200 text-sm",children:f})}),E.jsx($e,{onClick:S,disabled:o||!s,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:o?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Procesando..."]}):E.jsxs(E.Fragment,{children:[E.jsx(R0,{className:"w-5 h-5"}),"Pagar con Stripe"]})}),E.jsx("div",{className:"mt-4 text-center",children:E.jsx("p",{className:"text-xs text-gray-400",children:"Al continuar, aceptas nuestros términos de servicio y política de privacidad."})})]}),E.jsxs("div",{className:"mt-6 text-center",children:[E.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Métodos de pago aceptados:"}),E.jsxs("div",{className:"flex justify-center gap-2",children:[E.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Visa"}),E.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Mastercard"}),E.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"American Express"})]})]})]})}):E.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),E.jsx("p",{className:"text-gray-400",children:"Cargando configuración de pago..."})]})})},TN=({availablePacks:i,purchasedPacks:e,onPurchase:n,onBack:s,onGoToLogin:o})=>{const{user:u,isAuthenticated:f}=wg(),[m,p]=le.useState(!1),[y,S]=le.useState(!1),[R,I]=le.useState(!1),[z,F]=le.useState(null),[J,W]=le.useState([]),[ce,ue]=le.useState(!1);le.useEffect(()=>{(async()=>{if(u&&f){ue(!0);try{const w=await S0(u.uid);W(w)}catch(w){console.error("Error cargando compras del usuario:",w)}finally{ue(!1)}}else W([])})()},[u,f]);const ae=N=>{const w=i.find(A=>A.id===N);if(w){if(!w.isPremium||w.id==="base"){if(!xm()){p(!0),setTimeout(()=>p(!1),3e3);return}n(N);return}if(!xm()){p(!0),setTimeout(()=>p(!1),3e3);return}F(w),I(!0)}},we=async()=>{if(I(!1),F(null),u&&f)try{const N=await S0(u.uid);W(N),z&&N.includes(z.id)&&n(z.id)}catch(N){console.error("Error actualizando compras:",N)}},ge=()=>{I(!1),F(null)},Re=aS();return E.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:E.jsxs("div",{className:"w-full max-w-2xl",children:[E.jsxs("div",{className:"relative text-center mb-8",children:[E.jsx("button",{onClick:s,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:E.jsx(A0,{className:"w-8 h-8"})}),E.jsx("button",{onClick:()=>S(!0),className:"absolute right-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",title:"Gestionar almacenamiento local",children:E.jsxs("div",{className:"relative",children:[E.jsx(w0,{className:"w-8 h-8"}),Re.packsCount>0&&E.jsx("span",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:Re.packsCount})]})}),E.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Tienda de Paquetes"}),E.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-sm",children:[E.jsx(aw,{className:"w-4 h-4"}),u?E.jsx("span",{className:`${f?"text-green-400":"text-yellow-400"}`,children:f?`Conectado como ${u.displayName||u.email}`:"Usuario anónimo - Inicia sesión para comprar"}):E.jsx("span",{className:"text-gray-400",children:"No conectado"})]})]}),m&&E.jsxs("div",{className:"mb-6 p-4 bg-yellow-500/20 border border-yellow-500 rounded-lg text-center",children:[E.jsx("p",{className:"text-yellow-100 mb-2",children:"Necesitas iniciar sesión y verificar tu email para comprar packs premium"}),o&&E.jsx($e,{onClick:o,className:"bg-yellow-600 hover:bg-yellow-700",children:"Ir a Iniciar Sesión"})]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(N=>{const w=e.includes(N.id),A=J.includes(N.id),D=w||A,M=N.id==="base",P=N.isPremium&&!M,C=P&&!D;return E.jsxs(Tn,{className:`flex flex-col text-center border-2 transition-all ${D?"border-green-500/50":C?"border-yellow-500/50 opacity-75":"border-transparent hover:border-pink-500/50"}`,children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"text-5xl mb-4",children:N.icon}),C&&E.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-500 rounded-full p-1",children:E.jsx(Fa,{className:"w-4 h-4 text-black"})})]}),E.jsx("h2",{className:`text-2xl font-bold ${D?"text-green-400":C?"text-yellow-400":"text-cyan-400"}`,children:N.name}),E.jsx("p",{className:"text-gray-400 mt-2 mb-2 flex-grow",children:N.description}),P&&N.priceAmount&&N.currency&&E.jsxs("div",{className:"mb-4",children:[N.hasDiscount&&N.originalPriceAmount?E.jsxs("div",{className:"space-y-1",children:[E.jsx("div",{className:"text-sm text-gray-500 line-through",children:new Intl.NumberFormat("es-ES",{style:"currency",currency:N.currency.toUpperCase()}).format(N.originalPriceAmount/100)}),E.jsx("div",{className:`text-lg font-bold ${D?"text-green-400":"text-red-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:N.currency.toUpperCase()}).format(N.priceAmount/100)}),E.jsx("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:N.discountPercentage?`-${N.discountPercentage}%`:`-${new Intl.NumberFormat("es-ES",{style:"currency",currency:N.currency.toUpperCase()}).format((N.originalPriceAmount-N.priceAmount)/100)}`}),N.discountReason&&E.jsx("div",{className:"text-xs text-yellow-400 italic",children:N.discountReason})]}):E.jsx("div",{className:`text-lg font-bold ${D?"text-green-400":"text-yellow-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:N.currency.toUpperCase()}).format(N.priceAmount/100)}),E.jsx("div",{className:"text-xs text-gray-500",children:"Pago único"})]}),D?E.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-green-700 text-green-200",children:"✓ Comprado"}):M?E.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-blue-700 text-blue-200",children:"Incluido"}):P?E.jsx($e,{onClick:()=>ae(N.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",disabled:ce,children:ce?E.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):E.jsxs(E.Fragment,{children:[E.jsx(R0,{className:"w-4 h-4"}),"Comprar ",N.price]})}):E.jsxs($e,{onClick:()=>ae(N.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2",children:[E.jsx(Fa,{className:"w-4 h-4"}),"Desbloquear (",N.price,")"]})]},N.id)})}),y&&E.jsx(vN,{onClose:()=>S(!1)}),R&&z&&E.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:E.jsx("div",{className:"w-full h-full",children:E.jsx(EN,{pack:z,onBack:ge,onSuccess:we})})})]})})},SN=({onBack:i,onSuccess:e})=>{const[n,s]=le.useState("login"),[o,u]=le.useState(""),[f,m]=le.useState(""),[p,y]=le.useState(""),[S,R]=le.useState(""),[I,z]=le.useState(!1),[F,J]=le.useState(""),[W,ce]=le.useState(""),{refreshUser:ue}=wg(),ae=async()=>{z(!0),J("");try{await lS(),ue(),e()}catch(A){J(A.message)}finally{z(!1)}},we=async()=>{z(!0),J("");try{await hS(),ue(),e()}catch(A){J(A.message)}finally{z(!1)}},ge=async A=>{A.preventDefault(),z(!0),J(""),ce("");try{if(n==="login"){const D=await uS(o,f);if(ue(),!D.emailVerified){ce("Tu email no está verificado. Revisa tu bandeja de entrada o reenvía la verificación.");return}e()}else if(n==="register"){if(f!==p)throw new Error("Las contraseñas no coinciden");await cS(o,f,S),ce("Cuenta creada exitosamente. Revisa tu email para verificar tu cuenta antes de poder comprar packs premium."),s("login")}else n==="forgot-password"&&(await fS(o),ce("Email de restablecimiento enviado. Revisa tu bandeja de entrada."),s("login"))}catch(D){J(D.message)}finally{z(!1)}},Re=async()=>{z(!0),J("");try{await dS(),ce("Email de verificación reenviado.")}catch(A){J(A.message)}finally{z(!1)}},N=()=>{u(""),m(""),y(""),R(""),J(""),ce("")},w=A=>{s(A),N()};return E.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:E.jsxs(Tn,{className:"w-full max-w-md p-8 space-y-6",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:n==="login"?"Iniciar Sesión":n==="register"?"Crear Cuenta":"Recuperar Contraseña"}),E.jsx("p",{className:"text-white/80",children:n==="login"?"Accede a tu cuenta para comprar packs premium":n==="register"?"Crea una cuenta para acceder a contenido premium":"Ingresa tu email para recuperar tu contraseña"})]}),F&&E.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:F}),W&&E.jsxs("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:[E.jsx("p",{children:W}),W.includes("no está verificado")&&E.jsx($e,{onClick:Re,disabled:I,className:"mt-2 bg-green-600 hover:bg-green-700 text-sm",children:"Reenviar verificación"})]}),E.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Email"}),E.jsx("input",{type:"email",value:o,onChange:A=>u(A.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"tu@email.com",required:!0})]}),n!=="forgot-password"&&E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Contraseña"}),E.jsx("input",{type:"password",value:f,onChange:A=>m(A.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"••••••••",required:!0,minLength:6})]}),n==="register"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Confirmar Contraseña"}),E.jsx("input",{type:"password",value:p,onChange:A=>y(A.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"••••••••",required:!0,minLength:6})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Nombre (opcional)"}),E.jsx("input",{type:"text",value:S,onChange:A=>R(A.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"Tu nombre"})]})]}),E.jsx($e,{type:"submit",disabled:I,className:"w-full",children:I?"Cargando...":n==="login"?"Iniciar Sesión":n==="register"?"Crear Cuenta":"Enviar Email"})]}),n!=="forgot-password"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-white/20"})}),E.jsx("div",{className:"relative flex justify-center text-sm",children:E.jsx("span",{className:"px-2 bg-transparent text-white/60",children:"o"})})]}),E.jsxs($e,{onClick:ae,disabled:I,className:"w-full bg-white text-gray-900 hover:bg-gray-100",children:[E.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[E.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),E.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),E.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),E.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar con Google"]})]}),E.jsxs("div",{className:"text-center space-y-2",children:[n==="login"&&E.jsxs(E.Fragment,{children:[E.jsx("button",{type:"button",onClick:()=>w("forgot-password"),className:"text-white/80 hover:text-white text-sm underline",children:"¿Olvidaste tu contraseña?"}),E.jsxs("div",{children:[E.jsx("span",{className:"text-white/60 text-sm",children:"¿No tienes cuenta? "}),E.jsx("button",{type:"button",onClick:()=>w("register"),className:"text-white hover:text-white/80 text-sm underline",children:"Regístrate"})]})]}),n==="register"&&E.jsxs("div",{children:[E.jsx("span",{className:"text-white/60 text-sm",children:"¿Ya tienes cuenta? "}),E.jsx("button",{type:"button",onClick:()=>w("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Inicia sesión"})]}),n==="forgot-password"&&E.jsx("button",{type:"button",onClick:()=>w("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Volver al inicio de sesión"})]}),E.jsxs("div",{className:"border-t border-white/20 pt-4",children:[E.jsx($e,{onClick:we,disabled:I,className:"w-full bg-white/10 hover:bg-white/20 text-white border border-white/20",children:"Continuar sin cuenta"}),E.jsx("p",{className:"text-white/60 text-xs text-center mt-2",children:"Podrás jugar pero no comprar packs premium"})]}),E.jsx("div",{className:"text-center",children:E.jsx($e,{onClick:i,className:"text-white/80 hover:text-white bg-transparent",children:"← Volver"})})]})})},bN=()=>{const[i,e]=le.useState(tt.Setup),[n,s]=le.useState([]),[o,u]=le.useState([]),[f,m]=le.useState([]),[p,y]=le.useState(null),[S,R]=le.useState(0),[I,z]=le.useState({totalRounds:5}),[F,J]=le.useState({currentRound:1,playersCompletedInRound:0}),[W,ce]=le.useState({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),[ue,ae]=le.useState({roundNumber:1,questionsAsked:0,daresCompleted:0,roundStartTime:new Date,roundEndTime:null}),[we,ge]=le.useState({isLoading:!0,error:null}),[Re,N]=le.useState([]),[w,A]=le.useState(()=>{try{const pe=window.localStorage.getItem("purchasedPacks");return pe?JSON.parse(pe):[]}catch(pe){return console.error("Error reading from localStorage",pe),[]}}),[D,M]=le.useState([]);le.useEffect(()=>{(async()=>{try{const nt=await oS();N(nt)}catch(nt){console.error("Error loading available packs:",nt)}})()},[]),le.useEffect(()=>{try{window.localStorage.setItem("purchasedPacks",JSON.stringify(w))}catch(pe){console.error("Error writing to localStorage",pe)}},[w]);const P=le.useCallback(async()=>{ge({isLoading:!0,error:null});try{const pe=["base",...w.filter(wr=>wr!=="base")],nt=await z2(pe);u(nt.questions),m(nt.dares),M(nt.categories),ge({isLoading:!1,error:null})}catch(pe){console.error("Error loading game data:",pe),ge({isLoading:!1,error:pe instanceof Error?pe.message:"Error desconocido"})}},[w]);le.useEffect(()=>{P()},[P]);const C=()=>{if(n.length<2){alert("Se necesitan al menos 2 jugadores para empezar.");return}e(tt.PackSelection)},at=()=>{e(tt.CategorySelection)},He=()=>{e(tt.Setup)},G=()=>{e(tt.Shop)},ne=()=>{e(tt.Login)},he=()=>{e(tt.Setup)},ze=()=>{e(tt.Setup)},O=pe=>{y(pe),e(tt.RoundConfiguration)},Z=pe=>{z(pe),ce({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:new Date,gameEndTime:null,roundStats:[]}),ae({roundNumber:1,questionsAsked:0,daresCompleted:0,roundStartTime:new Date,roundEndTime:null}),J({currentRound:1,playersCompletedInRound:0}),e(tt.Game)},re=()=>{const pe=(S+1)%n.length;if(R(pe),pe===0){const nt=F.currentRound+1;nt>I.totalRounds?Ie():(J({currentRound:nt,playersCompletedInRound:0}),ae({roundNumber:nt,questionsAsked:0,daresCompleted:0,roundStartTime:new Date,roundEndTime:null}))}else J(nt=>({...nt,playersCompletedInRound:nt.playersCompletedInRound+1}))},ee=()=>{const pe={...ue,roundEndTime:new Date};ce(nt=>({...nt,totalRounds:nt.totalRounds+1,roundStats:[...nt.roundStats,pe]})),e(tt.RoundEnd)},de=()=>{const pe=F.currentRound+1;J({currentRound:pe,playersCompletedInRound:0}),ae({roundNumber:pe,questionsAsked:0,daresCompleted:0,roundStartTime:new Date,roundEndTime:null}),R(0),e(tt.Game)},Ie=()=>{ce(pe=>({...pe,gameEndTime:new Date})),e(tt.GameEnd)},Te=()=>{ae(pe=>({...pe,questionsAsked:pe.questionsAsked+1})),ce(pe=>({...pe,totalQuestions:pe.totalQuestions+1}))},vt=()=>{ae(pe=>({...pe,daresCompleted:pe.daresCompleted+1})),ce(pe=>({...pe,totalDares:pe.totalDares+1}))},Qe=le.useCallback(()=>{e(tt.Setup),s([]),y(null),R(0),z({totalRounds:5}),J({currentRound:1,playersCompletedInRound:0}),ce({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),ae({roundNumber:1,questionsAsked:0,daresCompleted:0,roundStartTime:new Date,roundEndTime:null})},[]),Sn=pe=>{w.includes(pe)||A([...w,pe])},Zn=()=>w.includes("no-ads"),jn=()=>{switch(i){case tt.Setup:return E.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-900 bg-opacity-50 backdrop-blur-sm",children:E.jsxs("div",{className:"w-full max-w-md mx-auto animate-fade-in",children:[E.jsx("h1",{className:"text-5xl font-extrabold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Verdad o Reto"}),E.jsx("p",{className:"text-center text-gray-400 mb-8",children:"El juego para animar la fiesta"}),E.jsxs("div",{className:"space-y-6",children:[E.jsx(ow,{players:n,setPlayers:s}),we.isLoading&&E.jsx(Tn,{className:"text-center text-gray-400",children:E.jsx("p",{children:"Cargando datos desde Firebase..."})}),we.error&&E.jsxs(Tn,{className:"text-center text-red-400",children:[E.jsxs("p",{children:["Error de conexión: ",we.error]}),E.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Verifica tu configuración de Firebase"}),E.jsx($e,{onClick:P,className:"mt-4",variant:"secondary",children:"Reintentar"})]}),!we.isLoading&&!we.error&&E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsx($e,{onClick:C,className:"w-full text-lg",disabled:n.length<2||o.length===0||f.length===0,children:"Empezar a Jugar"}),E.jsxs($e,{onClick:()=>e(tt.Shop),variant:"secondary",className:"w-full text-lg flex items-center justify-center gap-2",children:[E.jsx(w0,{className:"w-6 h-6"}),"Tienda de Paquetes"]}),E.jsx($e,{onClick:ne,variant:"secondary",className:"w-full text-lg",children:"Iniciar Sesión"})]})]})]})});case tt.Login:return E.jsx(SN,{onBack:ze,onSuccess:he});case tt.Shop:return E.jsx(TN,{availablePacks:Re,purchasedPacks:w,onPurchase:Sn,onBack:()=>e(tt.Setup),onGoToLogin:ne});case tt.PackSelection:return E.jsx(lw,{availablePacks:Re,purchasedPacks:w,onContinue:at,onBack:He,onGoToShop:G});case tt.CategorySelection:return E.jsx(H2,{onSelectCategory:O,categories:D});case tt.RoundConfiguration:return E.jsx(F2,{onSelectRounds:pe=>{Z({totalRounds:pe})},onBack:()=>e(tt.CategorySelection)});case tt.Game:return p?E.jsx(G2,{players:n,currentPlayerIndex:S,onNextPlayer:re,onNewGame:Qe,questions:o,dares:f,selectedCategory:p,roundConfig:I,gameProgress:F,onRoundEnd:ee,onQuestionAsked:Te,onDareCompleted:vt}):null;case tt.RoundEnd:return E.jsx(K2,{roundStats:ue,currentRound:F.currentRound,totalRounds:I.totalRounds,onContinue:de,onEndGame:Ie,hasNoAds:Zn()});case tt.GameEnd:return E.jsx(Y2,{gameStats:W,players:n,onNewGame:Qe,onBackToMenu:()=>e(tt.Setup)});default:return E.jsx("div",{children:"Error: Estado de juego desconocido."})}};return E.jsx(eN,{children:E.jsxs("main",{className:"relative min-h-screen bg-gray-900 overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-purple-900/30 via-transparent to-pink-900/30"}),E.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-96 h-96 bg-purple-600 rounded-full filter blur-3xl opacity-20 animate-blob"}),E.jsx("div",{className:"absolute bottom-[-10%] right-[5%] w-96 h-96 bg-pink-600 rounded-full filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),E.jsx("div",{className:"absolute top-[10%] right-[-15%] w-80 h-80 bg-cyan-600 rounded-full filter blur-3xl opacity-10 animate-blob animation-delay-4000"}),E.jsx("div",{className:"relative z-10",children:jn()}),E.jsx("style",{children:`
          .animate-blob {
            animation: blob 7s infinite;
          }
          .animation-delay-2000 {
            animation-delay: 2s;
          }
          .animation-delay-4000 {
            animation-delay: 4s;
          }
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
          }
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `})]})})},TS=document.getElementById("root");if(!TS)throw new Error("Could not find root element to mount to");const wN=rw.createRoot(TS);wN.render(E.jsx(Xb.StrictMode,{children:E.jsx(bN,{})}));
