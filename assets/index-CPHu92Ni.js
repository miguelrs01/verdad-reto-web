(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function zE(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Tm={exports:{}},Zl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function vA(){if(M0)return Zl;M0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:r,type:i,key:d,ref:o!==void 0?o:null,props:c}}return Zl.Fragment=e,Zl.jsx=t,Zl.jsxs=t,Zl}var V0;function EA(){return V0||(V0=1,Tm.exports=vA()),Tm.exports}var p=EA(),bm={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function wA(){if(j0)return ke;j0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.iterator;function A(P){return P===null||typeof P!="object"?null:(P=b&&P[b]||P["@@iterator"],typeof P=="function"?P:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,Q={};function B(P,ne,de){this.props=P,this.context=ne,this.refs=Q,this.updater=de||R}B.prototype.isReactComponent={},B.prototype.setState=function(P,ne){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,ne,"setState")},B.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function ie(){}ie.prototype=B.prototype;function ae(P,ne,de){this.props=P,this.context=ne,this.refs=Q,this.updater=de||R}var oe=ae.prototype=new ie;oe.constructor=ae,j(oe,B.prototype),oe.isPureReactComponent=!0;var ge=Array.isArray,ce={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function N(P,ne,de,se,ve,Oe){return de=Oe.ref,{$$typeof:r,type:P,key:ne,ref:de!==void 0?de:null,props:Oe}}function x(P,ne){return N(P.type,ne,void 0,void 0,void 0,P.props)}function I(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function k(P){var ne={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(de){return ne[de]})}var O=/\/+/g;function V(P,ne){return typeof P=="object"&&P!==null&&P.key!=null?k(""+P.key):ne.toString(36)}function C(){}function xe(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(C,C):(P.status="pending",P.then(function(ne){P.status==="pending"&&(P.status="fulfilled",P.value=ne)},function(ne){P.status==="pending"&&(P.status="rejected",P.reason=ne)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Se(P,ne,de,se,ve){var Oe=typeof P;(Oe==="undefined"||Oe==="boolean")&&(P=null);var Re=!1;if(P===null)Re=!0;else switch(Oe){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(P.$$typeof){case r:case e:Re=!0;break;case w:return Re=P._init,Se(Re(P._payload),ne,de,se,ve)}}if(Re)return ve=ve(P),Re=se===""?"."+V(P,0):se,ge(ve)?(de="",Re!=null&&(de=Re.replace(O,"$&/")+"/"),Se(ve,ne,de,"",function(Jt){return Jt})):ve!=null&&(I(ve)&&(ve=x(ve,de+(ve.key==null||P&&P.key===ve.key?"":(""+ve.key).replace(O,"$&/")+"/")+Re)),ne.push(ve)),1;Re=0;var Dt=se===""?".":se+":";if(ge(P))for(var Je=0;Je<P.length;Je++)se=P[Je],Oe=Dt+V(se,Je),Re+=Se(se,ne,de,Oe,ve);else if(Je=A(P),typeof Je=="function")for(P=Je.call(P),Je=0;!(se=P.next()).done;)se=se.value,Oe=Dt+V(se,Je++),Re+=Se(se,ne,de,Oe,ve);else if(Oe==="object"){if(typeof P.then=="function")return Se(xe(P),ne,de,se,ve);throw ne=String(P),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Re}function K(P,ne,de){if(P==null)return P;var se=[],ve=0;return Se(P,se,"","",function(Oe){return ne.call(de,Oe,ve++)}),se}function re(P){if(P._status===-1){var ne=P._result;ne=ne(),ne.then(function(de){(P._status===0||P._status===-1)&&(P._status=1,P._result=de)},function(de){(P._status===0||P._status===-1)&&(P._status=2,P._result=de)}),P._status===-1&&(P._status=0,P._result=ne)}if(P._status===1)return P._result.default;throw P._result}var X=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function ye(){}return ke.Children={map:K,forEach:function(P,ne,de){K(P,function(){ne.apply(this,arguments)},de)},count:function(P){var ne=0;return K(P,function(){ne++}),ne},toArray:function(P){return K(P,function(ne){return ne})||[]},only:function(P){if(!I(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},ke.Component=B,ke.Fragment=t,ke.Profiler=o,ke.PureComponent=ae,ke.StrictMode=i,ke.Suspense=g,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,ke.__COMPILER_RUNTIME={__proto__:null,c:function(P){return ce.H.useMemoCache(P)}},ke.cache=function(P){return function(){return P.apply(null,arguments)}},ke.cloneElement=function(P,ne,de){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var se=j({},P.props),ve=P.key,Oe=void 0;if(ne!=null)for(Re in ne.ref!==void 0&&(Oe=void 0),ne.key!==void 0&&(ve=""+ne.key),ne)!G.call(ne,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&ne.ref===void 0||(se[Re]=ne[Re]);var Re=arguments.length-2;if(Re===1)se.children=de;else if(1<Re){for(var Dt=Array(Re),Je=0;Je<Re;Je++)Dt[Je]=arguments[Je+2];se.children=Dt}return N(P.type,ve,void 0,void 0,Oe,se)},ke.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:c,_context:P},P},ke.createElement=function(P,ne,de){var se,ve={},Oe=null;if(ne!=null)for(se in ne.key!==void 0&&(Oe=""+ne.key),ne)G.call(ne,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ve[se]=ne[se]);var Re=arguments.length-2;if(Re===1)ve.children=de;else if(1<Re){for(var Dt=Array(Re),Je=0;Je<Re;Je++)Dt[Je]=arguments[Je+2];ve.children=Dt}if(P&&P.defaultProps)for(se in Re=P.defaultProps,Re)ve[se]===void 0&&(ve[se]=Re[se]);return N(P,Oe,void 0,void 0,null,ve)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(P){return{$$typeof:m,render:P}},ke.isValidElement=I,ke.lazy=function(P){return{$$typeof:w,_payload:{_status:-1,_result:P},_init:re}},ke.memo=function(P,ne){return{$$typeof:_,type:P,compare:ne===void 0?null:ne}},ke.startTransition=function(P){var ne=ce.T,de={};ce.T=de;try{var se=P(),ve=ce.S;ve!==null&&ve(de,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(ye,X)}catch(Oe){X(Oe)}finally{ce.T=ne}},ke.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},ke.use=function(P){return ce.H.use(P)},ke.useActionState=function(P,ne,de){return ce.H.useActionState(P,ne,de)},ke.useCallback=function(P,ne){return ce.H.useCallback(P,ne)},ke.useContext=function(P){return ce.H.useContext(P)},ke.useDebugValue=function(){},ke.useDeferredValue=function(P,ne){return ce.H.useDeferredValue(P,ne)},ke.useEffect=function(P,ne,de){var se=ce.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(P,ne)},ke.useId=function(){return ce.H.useId()},ke.useImperativeHandle=function(P,ne,de){return ce.H.useImperativeHandle(P,ne,de)},ke.useInsertionEffect=function(P,ne){return ce.H.useInsertionEffect(P,ne)},ke.useLayoutEffect=function(P,ne){return ce.H.useLayoutEffect(P,ne)},ke.useMemo=function(P,ne){return ce.H.useMemo(P,ne)},ke.useOptimistic=function(P,ne){return ce.H.useOptimistic(P,ne)},ke.useReducer=function(P,ne,de){return ce.H.useReducer(P,ne,de)},ke.useRef=function(P){return ce.H.useRef(P)},ke.useState=function(P){return ce.H.useState(P)},ke.useSyncExternalStore=function(P,ne,de){return ce.H.useSyncExternalStore(P,ne,de)},ke.useTransition=function(){return ce.H.useTransition()},ke.version="19.1.1",ke}var L0;function pg(){return L0||(L0=1,bm.exports=wA()),bm.exports}var $=pg();const TA=zE($);var Sm={exports:{}},ec={},Am={exports:{}},xm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0;function bA(){return U0||(U0=1,(function(r){function e(K,re){var X=K.length;K.push(re);e:for(;0<X;){var ye=X-1>>>1,P=K[ye];if(0<o(P,re))K[ye]=re,K[X]=P,X=ye;else break e}}function t(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var re=K[0],X=K.pop();if(X!==re){K[0]=X;e:for(var ye=0,P=K.length,ne=P>>>1;ye<ne;){var de=2*(ye+1)-1,se=K[de],ve=de+1,Oe=K[ve];if(0>o(se,X))ve<P&&0>o(Oe,se)?(K[ye]=Oe,K[ve]=X,ye=ve):(K[ye]=se,K[de]=X,ye=de);else if(ve<P&&0>o(Oe,X))K[ye]=Oe,K[ve]=X,ye=ve;else break e}}return re}function o(K,re){var X=K.sortIndex-re.sortIndex;return X!==0?X:K.id-re.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();r.unstable_now=function(){return d.now()-m}}var g=[],_=[],w=1,b=null,A=3,R=!1,j=!1,Q=!1,B=!1,ie=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function ge(K){for(var re=t(_);re!==null;){if(re.callback===null)i(_);else if(re.startTime<=K)i(_),re.sortIndex=re.expirationTime,e(g,re);else break;re=t(_)}}function ce(K){if(Q=!1,ge(K),!j)if(t(g)!==null)j=!0,G||(G=!0,V());else{var re=t(_);re!==null&&Se(ce,re.startTime-K)}}var G=!1,N=-1,x=5,I=-1;function k(){return B?!0:!(r.unstable_now()-I<x)}function O(){if(B=!1,G){var K=r.unstable_now();I=K;var re=!0;try{e:{j=!1,Q&&(Q=!1,ae(N),N=-1),R=!0;var X=A;try{t:{for(ge(K),b=t(g);b!==null&&!(b.expirationTime>K&&k());){var ye=b.callback;if(typeof ye=="function"){b.callback=null,A=b.priorityLevel;var P=ye(b.expirationTime<=K);if(K=r.unstable_now(),typeof P=="function"){b.callback=P,ge(K),re=!0;break t}b===t(g)&&i(g),ge(K)}else i(g);b=t(g)}if(b!==null)re=!0;else{var ne=t(_);ne!==null&&Se(ce,ne.startTime-K),re=!1}}break e}finally{b=null,A=X,R=!1}re=void 0}}finally{re?V():G=!1}}}var V;if(typeof oe=="function")V=function(){oe(O)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,xe=C.port2;C.port1.onmessage=O,V=function(){xe.postMessage(null)}}else V=function(){ie(O,0)};function Se(K,re){N=ie(function(){K(r.unstable_now())},re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(K){switch(A){case 1:case 2:case 3:var re=3;break;default:re=A}var X=A;A=re;try{return K()}finally{A=X}},r.unstable_requestPaint=function(){B=!0},r.unstable_runWithPriority=function(K,re){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var X=A;A=K;try{return re()}finally{A=X}},r.unstable_scheduleCallback=function(K,re,X){var ye=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ye+X:ye):X=ye,K){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=X+P,K={id:w++,callback:re,priorityLevel:K,startTime:X,expirationTime:P,sortIndex:-1},X>ye?(K.sortIndex=X,e(_,K),t(g)===null&&K===t(_)&&(Q?(ae(N),N=-1):Q=!0,Se(ce,X-ye))):(K.sortIndex=P,e(g,K),j||R||(j=!0,G||(G=!0,V()))),K},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(K){var re=A;return function(){var X=A;A=re;try{return K.apply(this,arguments)}finally{A=X}}}})(xm)),xm}var z0;function SA(){return z0||(z0=1,Am.exports=bA()),Am.exports}var Rm={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0;function AA(){if(q0)return cn;q0=1;var r=pg();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)_+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,_,w){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:_,implementation:w}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cn.createPortal=function(g,_){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(g,_,null,w)},cn.flushSync=function(g){var _=d.T,w=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=_,i.p=w,i.d.f()}},cn.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,i.d.C(g,_))},cn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},cn.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var w=_.as,b=m(w,_.crossOrigin),A=typeof _.integrity=="string"?_.integrity:void 0,R=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;w==="style"?i.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:R}):w==="script"&&i.d.X(g,{crossOrigin:b,integrity:A,fetchPriority:R,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},cn.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var w=m(_.as,_.crossOrigin);i.d.M(g,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&i.d.M(g)},cn.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var w=_.as,b=m(w,_.crossOrigin);i.d.L(g,w,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},cn.preloadModule=function(g,_){if(typeof g=="string")if(_){var w=m(_.as,_.crossOrigin);i.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else i.d.m(g)},cn.requestFormReset=function(g){i.d.r(g)},cn.unstable_batchedUpdates=function(g,_){return g(_)},cn.useFormState=function(g,_,w){return d.H.useFormState(g,_,w)},cn.useFormStatus=function(){return d.H.useHostTransitionStatus()},cn.version="19.1.1",cn}var B0;function xA(){if(B0)return Rm.exports;B0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Rm.exports=AA(),Rm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0;function RA(){if(H0)return ec;H0=1;var r=SA(),e=pg(),t=xA();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function d(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(i(188))}function g(n){var s=n.alternate;if(!s){if(s=c(n),s===null)throw Error(i(188));return s!==n?null:n}for(var a=n,l=s;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),n;if(f===l)return m(h),s;f=f.sibling}throw Error(i(188))}if(a.return!==l.return)a=h,l=f;else{for(var E=!1,T=h.child;T;){if(T===a){E=!0,a=h,l=f;break}if(T===l){E=!0,l=h,a=f;break}T=T.sibling}if(!E){for(T=f.child;T;){if(T===a){E=!0,a=f,l=h;break}if(T===l){E=!0,l=f,a=h;break}T=T.sibling}if(!E)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?n:s}function _(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=_(n),s!==null)return s;n=n.sibling}return null}var w=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),ae=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function V(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function xe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case B:return"Profiler";case Q:return"StrictMode";case ce:return"Suspense";case G:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case R:return"Portal";case oe:return(n.displayName||"Context")+".Provider";case ae:return(n._context.displayName||"Context")+".Consumer";case ge:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case N:return s=n.displayName||null,s!==null?s:xe(n.type)||"Memo";case x:s=n._payload,n=n._init;try{return xe(n(s))}catch{}}return null}var Se=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ye=[],P=-1;function ne(n){return{current:n}}function de(n){0>P||(n.current=ye[P],ye[P]=null,P--)}function se(n,s){P++,ye[P]=n.current,n.current=s}var ve=ne(null),Oe=ne(null),Re=ne(null),Dt=ne(null);function Je(n,s){switch(se(Re,s),se(Oe,n),se(ve,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?c0(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=c0(s),n=u0(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}de(ve),se(ve,n)}function Jt(){de(ve),de(Oe),de(Re)}function cr(n){n.memoizedState!==null&&se(Dt,n);var s=ve.current,a=u0(s,n.type);s!==a&&(se(Oe,n),se(ve,a))}function ur(n){Oe.current===n&&(de(ve),de(Oe)),Dt.current===n&&(de(Dt),Yl._currentValue=X)}var br=Object.prototype.hasOwnProperty,es=r.unstable_scheduleCallback,Sr=r.unstable_cancelCallback,Ia=r.unstable_shouldYield,Wo=r.unstable_requestPaint,pn=r.unstable_now,Ca=r.unstable_getCurrentPriorityLevel,dr=r.unstable_ImmediatePriority,zs=r.unstable_UserBlockingPriority,ts=r.unstable_NormalPriority,Jo=r.unstable_LowPriority,qs=r.unstable_IdlePriority,Bs=r.log,Na=r.unstable_setDisableYieldValue,ft=null,Ze=null;function yn(n){if(typeof Bs=="function"&&Na(n),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(ft,n)}catch{}}var Ht=Math.clz32?Math.clz32:ns,Da=Math.log,Zo=Math.LN2;function ns(n){return n>>>=0,n===0?32:31-(Da(n)/Zo|0)|0}var rs=256,ss=4194304;function kn(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Hs(n,s,a){var l=n.pendingLanes;if(l===0)return 0;var h=0,f=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?h=kn(l):(E&=T,E!==0?h=kn(E):a||(a=T&~n,a!==0&&(h=kn(a))))):(T=l&~f,T!==0?h=kn(T):E!==0?h=kn(E):a||(a=l&~n,a!==0&&(h=kn(a)))),h===0?0:s!==0&&s!==h&&(s&f)===0&&(f=h&-h,a=s&-s,f>=a||f===32&&(a&4194048)!==0)?s:h}function is(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Fs(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Li(){var n=rs;return rs<<=1,(rs&4194048)===0&&(rs=256),n}function Ui(){var n=ss;return ss<<=1,(ss&62914560)===0&&(ss=4194304),n}function Kn(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function hr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function fr(n,s,a,l,h,f){var E=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var T=n.entanglements,D=n.expirationTimes,q=n.hiddenUpdates;for(a=E&~a;0<a;){var J=31-Ht(a),ee=1<<J;T[J]=0,D[J]=-1;var H=q[J];if(H!==null)for(q[J]=null,J=0;J<H.length;J++){var F=H[J];F!==null&&(F.lane&=-536870913)}a&=~ee}l!==0&&Yn(n,l,0),f!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=f&~(E&~s))}function Yn(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-Ht(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function zi(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var l=31-Ht(a),h=1<<l;h&s|n[l]&s&&(n[l]|=s),a&=~h}}function Ar(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Gs(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function xr(){var n=re.p;return n!==0?n:(n=window.event,n===void 0?32:C0(n.type))}function Pa(n,s){var a=re.p;try{return re.p=n,s()}finally{re.p=a}}var dt=Math.random().toString(36).slice(2),At="__reactFiber$"+dt,wt="__reactProps$"+dt,An="__reactContainer$"+dt,qi="__reactEvents$"+dt,ue="__reactListeners$"+dt,fe="__reactHandles$"+dt,He="__reactResources$"+dt,xn="__reactMarker$"+dt;function _n(n){delete n[At],delete n[wt],delete n[qi],delete n[ue],delete n[fe]}function vn(n){var s=n[At];if(s)return s;for(var a=n.parentNode;a;){if(s=a[An]||a[At]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=m0(n);n!==null;){if(a=n[At])return a;n=m0(n)}return s}n=a,a=n.parentNode}return null}function Rr(n){if(n=n[At]||n[An]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Ir(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function En(n){var s=n[He];return s||(s=n[He]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function xt(n){n[xn]=!0}var el=new Set,Oa={};function mr(n,s){as(n,s),as(n+"Capture",s)}function as(n,s){for(Oa[n]=s,n=0;n<s.length;n++)el.add(s[n])}var Yc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xc={},Bi={};function $c(n){return br.call(Bi,n)?!0:br.call(Xc,n)?!1:Yc.test(n)?Bi[n]=!0:(Xc[n]=!0,!1)}function Qs(n,s,a){if($c(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function Cr(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function Zt(n,s,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+l)}}var Hi,Wc;function os(n){if(Hi===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Hi=s&&s[1]||"",Wc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hi+n+Wc}var ka=!1;function Ma(n,s){if(!n||ka)return"";ka=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(F){var H=F}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(F){H=F}n.call(ee.prototype)}}else{try{throw Error()}catch(F){H=F}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(F){if(F&&H&&typeof F.stack=="string")return[F.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),E=f[0],T=f[1];if(E&&T){var D=E.split(`
`),q=T.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===q.length)for(l=D.length-1,h=q.length-1;1<=l&&0<=h&&D[l]!==q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==q[h]){var J=`
`+D[l].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=l&&0<=h);break}}}finally{ka=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?os(a):""}function tl(n){switch(n.tag){case 26:case 27:case 5:return os(n.type);case 16:return os("Lazy");case 13:return os("Suspense");case 19:return os("SuspenseList");case 0:case 15:return Ma(n.type,!1);case 11:return Ma(n.type.render,!1);case 1:return Ma(n.type,!0);case 31:return os("Activity");default:return""}}function Va(n){try{var s="";do s+=tl(n),n=n.return;while(n);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function wn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function nl(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ah(n){var s=nl(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),l=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,f.call(this,E)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ja(n){n._valueTracker||(n._valueTracker=Ah(n))}function rl(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return n&&(l=nl(n)?n.checked?"true":"false":n.value),n=l,n!==a?(s.setValue(n),!0):!1}function Fi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var xh=/[\n"\\]/g;function Pt(n){return n.replace(xh,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Mn(n,s,a,l,h,f,E,T){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+wn(s)):n.value!==""+wn(s)&&(n.value=""+wn(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?Ks(n,E,wn(s)):a!=null?Ks(n,E,wn(a)):l!=null&&n.removeAttribute("value"),h==null&&f!=null&&(n.defaultChecked=!!f),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+wn(T):n.removeAttribute("name")}function Gi(n,s,a,l,h,f,E,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(n.type=f),s!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||s!=null))return;a=a!=null?""+wn(a):"",s=s!=null?""+wn(s):a,T||s===n.value||(n.value=s),n.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=T?n.checked:!!l,n.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Ks(n,s,a){s==="number"&&Fi(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function ls(n,s,a,l){if(n=n.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=s.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&l&&(n[a].defaultSelected=!0)}else{for(a=""+wn(a),s=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,l&&(n[h].defaultSelected=!0);return}s!==null||n[h].disabled||(s=n[h])}s!==null&&(s.selected=!0)}}function it(n,s,a){if(s!=null&&(s=""+wn(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+wn(a):""}function Qi(n,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(i(92));if(Se(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=wn(s),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Xn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Ki=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jc(n,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,a):typeof a!="number"||a===0||Ki.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function sl(n,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&Jc(n,h,l)}else for(var f in s)s.hasOwnProperty(f)&&Jc(n,f,s[f])}function il(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ih=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function La(n){return Ih.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var cs=null;function $n(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var us=null,ds=null;function al(n){var s=Rr(n);if(s&&(n=s.stateNode)){var a=n[wt]||null;e:switch(n=s.stateNode,s.type){case"input":if(Mn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Pt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==n&&l.form===n.form){var h=l[wt]||null;if(!h)throw Error(i(90));Mn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===n.form&&rl(l)}break e;case"textarea":it(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&ls(n,!!a.multiple,s,!1)}}}var Nr=!1;function Zc(n,s,a){if(Nr)return n(s,a);Nr=!0;try{var l=n(s);return l}finally{if(Nr=!1,(us!==null||ds!==null)&&(Qu(),us&&(s=us,n=ds,ds=us=null,al(s),n)))for(s=0;s<n.length;s++)al(n[s])}}function Yi(n,s){var a=n.stateNode;if(a===null)return null;var l=a[wt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wn=!1;if(gr)try{var Xi={};Object.defineProperty(Xi,"passive",{get:function(){Wn=!0}}),window.addEventListener("test",Xi,Xi),window.removeEventListener("test",Xi,Xi)}catch{Wn=!1}var Dr=null,Ys=null,hs=null;function ol(){if(hs)return hs;var n,s=Ys,a=s.length,l,h="value"in Dr?Dr.value:Dr.textContent,f=h.length;for(n=0;n<a&&s[n]===h[n];n++);var E=a-n;for(l=1;l<=E&&s[a-l]===h[f-l];l++);return hs=h.slice(n,1<l?1-l:void 0)}function Pr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Or(){return!0}function ll(){return!1}function Ft(n){function s(a,l,h,f,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Or:ll,this.isPropagationStopped=ll,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Or)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Or)},persist:function(){},isPersistent:Or}),s}var tt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=Ft(tt),$i=w({},tt,{view:0,detail:0}),eu=Ft($i),za,qa,kr,Wi=w({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ea,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==kr&&(kr&&n.type==="mousemove"?(za=n.screenX-kr.screenX,qa=n.screenY-kr.screenY):qa=za=0,kr=n),za)},movementY:function(n){return"movementY"in n?n.movementY:qa}}),Jn=Ft(Wi),tu=w({},Wi,{dataTransfer:0}),Ch=Ft(tu),Ji=w({},$i,{relatedTarget:0}),Ba=Ft(Ji),cl=w({},tt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ha=Ft(cl),nu=w({},tt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Fa=Ft(nu),Nh=w({},tt,{data:0}),ul=Ft(Nh),Zi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=su[n])?!!s[n]:!1}function ea(){return dl}var iu=w({},$i,{key:function(n){if(n.key){var s=Zi[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Pr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ru[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ea,charCode:function(n){return n.type==="keypress"?Pr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Pr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ga=Ft(iu),au=w({},Wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hl=Ft(au),fs=w({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ea}),ou=Ft(fs),lu=w({},tt,{propertyName:0,elapsedTime:0,pseudoElement:0}),cu=Ft(lu),uu=w({},Wi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Qa=Ft(uu),Tn=w({},tt,{newState:0,oldState:0}),du=Ft(Tn),hu=[9,13,27,32],Mr=gr&&"CompositionEvent"in window,u=null;gr&&"documentMode"in document&&(u=document.documentMode);var y=gr&&"TextEvent"in window&&!u,v=gr&&(!Mr||u&&8<u&&11>=u),S=" ",U=!1;function Y(n,s){switch(n){case"keyup":return hu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function le(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fe=!1;function Lt(n,s){switch(n){case"compositionend":return le(s);case"keypress":return s.which!==32?null:(U=!0,S);case"textInput":return n=s.data,n===S&&U?null:n;default:return null}}function Ge(n,s){if(Fe)return n==="compositionend"||!Mr&&Y(n,s)?(n=ol(),hs=Ys=Dr=null,Fe=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v&&s.locale!=="ko"?null:s.data;default:return null}}var Gt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ut(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Gt[n.type]:s==="textarea"}function ms(n,s,a,l){us?ds?ds.push(l):ds=[l]:us=l,s=Ju(s,"onChange"),0<s.length&&(a=new Ua("onChange","change",null,a,l),n.push({event:a,listeners:s}))}var en=null,Vr=null;function fl(n){s0(n,0)}function fu(n){var s=Ir(n);if(rl(s))return n}function Ap(n,s){if(n==="change")return s}var xp=!1;if(gr){var Dh;if(gr){var Ph="oninput"in document;if(!Ph){var Rp=document.createElement("div");Rp.setAttribute("oninput","return;"),Ph=typeof Rp.oninput=="function"}Dh=Ph}else Dh=!1;xp=Dh&&(!document.documentMode||9<document.documentMode)}function Ip(){en&&(en.detachEvent("onpropertychange",Cp),Vr=en=null)}function Cp(n){if(n.propertyName==="value"&&fu(Vr)){var s=[];ms(s,Vr,n,$n(n)),Zc(fl,s)}}function Xb(n,s,a){n==="focusin"?(Ip(),en=s,Vr=a,en.attachEvent("onpropertychange",Cp)):n==="focusout"&&Ip()}function $b(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return fu(Vr)}function Wb(n,s){if(n==="click")return fu(s)}function Jb(n,s){if(n==="input"||n==="change")return fu(s)}function Zb(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Vn=typeof Object.is=="function"?Object.is:Zb;function ml(n,s){if(Vn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!br.call(s,h)||!Vn(n[h],s[h]))return!1}return!0}function Np(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Dp(n,s){var a=Np(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=s&&l>=s)return{node:a,offset:s-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Np(a)}}function Pp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Pp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Op(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Fi(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Fi(n.document)}return s}function Oh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var eS=gr&&"documentMode"in document&&11>=document.documentMode,Ka=null,kh=null,gl=null,Mh=!1;function kp(n,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Mh||Ka==null||Ka!==Fi(l)||(l=Ka,"selectionStart"in l&&Oh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),gl&&ml(gl,l)||(gl=l,l=Ju(kh,"onSelect"),0<l.length&&(s=new Ua("onSelect","select",null,s,a),n.push({event:s,listeners:l}),s.target=Ka)))}function ta(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Ya={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionrun:ta("Transition","TransitionRun"),transitionstart:ta("Transition","TransitionStart"),transitioncancel:ta("Transition","TransitionCancel"),transitionend:ta("Transition","TransitionEnd")},Vh={},Mp={};gr&&(Mp=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function na(n){if(Vh[n])return Vh[n];if(!Ya[n])return n;var s=Ya[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Mp)return Vh[n]=s[a];return n}var Vp=na("animationend"),jp=na("animationiteration"),Lp=na("animationstart"),tS=na("transitionrun"),nS=na("transitionstart"),rS=na("transitioncancel"),Up=na("transitionend"),zp=new Map,jh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jh.push("scrollEnd");function pr(n,s){zp.set(n,s),mr(s,[n])}var qp=new WeakMap;function Zn(n,s){if(typeof n=="object"&&n!==null){var a=qp.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Va(s)},qp.set(n,s),s)}return{value:n,source:s,stack:Va(s)}}var er=[],Xa=0,Lh=0;function mu(){for(var n=Xa,s=Lh=Xa=0;s<n;){var a=er[s];er[s++]=null;var l=er[s];er[s++]=null;var h=er[s];er[s++]=null;var f=er[s];if(er[s++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}f!==0&&Bp(a,h,f)}}function gu(n,s,a,l){er[Xa++]=n,er[Xa++]=s,er[Xa++]=a,er[Xa++]=l,Lh|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Uh(n,s,a,l){return gu(n,s,a,l),pu(n)}function $a(n,s){return gu(n,null,null,s),pu(n)}function Bp(n,s,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=n.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(n=f.stateNode,n===null||n._visibility&1||(h=!0)),n=f,f=f.return;return n.tag===3?(f=n.stateNode,h&&s!==null&&(h=31-Ht(a),n=f.hiddenUpdates,l=n[h],l===null?n[h]=[s]:l.push(s),s.lane=a|536870912),f):null}function pu(n){if(50<zl)throw zl=0,Qf=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Wa={};function sS(n,s,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(n,s,a,l){return new sS(n,s,a,l)}function zh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function gs(n,s){var a=n.alternate;return a===null?(a=jn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Hp(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function yu(n,s,a,l,h,f){var E=0;if(l=n,typeof n=="function")zh(n)&&(E=1);else if(typeof n=="string")E=aA(n,a,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=jn(31,a,s,h),n.elementType=I,n.lanes=f,n;case j:return ra(a.children,h,f,s);case Q:E=8,h|=24;break;case B:return n=jn(12,a,s,h|2),n.elementType=B,n.lanes=f,n;case ce:return n=jn(13,a,s,h),n.elementType=ce,n.lanes=f,n;case G:return n=jn(19,a,s,h),n.elementType=G,n.lanes=f,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ie:case oe:E=10;break e;case ae:E=9;break e;case ge:E=11;break e;case N:E=14;break e;case x:E=16,l=null;break e}E=29,a=Error(i(130,n===null?"null":typeof n,"")),l=null}return s=jn(E,a,s,h),s.elementType=n,s.type=l,s.lanes=f,s}function ra(n,s,a,l){return n=jn(7,n,l,s),n.lanes=a,n}function qh(n,s,a){return n=jn(6,n,null,s),n.lanes=a,n}function Bh(n,s,a){return s=jn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Ja=[],Za=0,_u=null,vu=0,tr=[],nr=0,sa=null,ps=1,ys="";function ia(n,s){Ja[Za++]=vu,Ja[Za++]=_u,_u=n,vu=s}function Fp(n,s,a){tr[nr++]=ps,tr[nr++]=ys,tr[nr++]=sa,sa=n;var l=ps;n=ys;var h=32-Ht(l)-1;l&=~(1<<h),a+=1;var f=32-Ht(s)+h;if(30<f){var E=h-h%5;f=(l&(1<<E)-1).toString(32),l>>=E,h-=E,ps=1<<32-Ht(s)+h|a<<h|l,ys=f+n}else ps=1<<f|a<<h|l,ys=n}function Hh(n){n.return!==null&&(ia(n,1),Fp(n,1,0))}function Fh(n){for(;n===_u;)_u=Ja[--Za],Ja[Za]=null,vu=Ja[--Za],Ja[Za]=null;for(;n===sa;)sa=tr[--nr],tr[nr]=null,ys=tr[--nr],tr[nr]=null,ps=tr[--nr],tr[nr]=null}var bn=null,Tt=null,et=!1,aa=null,jr=!1,Gh=Error(i(519));function oa(n){var s=Error(i(418,""));throw _l(Zn(s,n)),Gh}function Gp(n){var s=n.stateNode,a=n.type,l=n.memoizedProps;switch(s[At]=n,s[wt]=l,a){case"dialog":Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":case"embed":Ue("load",s);break;case"video":case"audio":for(a=0;a<Bl.length;a++)Ue(Bl[a],s);break;case"source":Ue("error",s);break;case"img":case"image":case"link":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"input":Ue("invalid",s),Gi(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ja(s);break;case"select":Ue("invalid",s);break;case"textarea":Ue("invalid",s),Qi(s,l.value,l.defaultValue,l.children),ja(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||l0(s.textContent,a)?(l.popover!=null&&(Ue("beforetoggle",s),Ue("toggle",s)),l.onScroll!=null&&Ue("scroll",s),l.onScrollEnd!=null&&Ue("scrollend",s),l.onClick!=null&&(s.onclick=Zu),s=!0):s=!1,s||oa(n)}function Qp(n){for(bn=n.return;bn;)switch(bn.tag){case 5:case 13:jr=!1;return;case 27:case 3:jr=!0;return;default:bn=bn.return}}function pl(n){if(n!==bn)return!1;if(!et)return Qp(n),et=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||lm(n.type,n.memoizedProps)),a=!a),a&&Tt&&oa(n),Qp(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(s===0){Tt=_r(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;n=n.nextSibling}Tt=null}}else s===27?(s=Tt,ui(n.type)?(n=hm,hm=null,Tt=n):Tt=s):Tt=bn?_r(n.stateNode.nextSibling):null;return!0}function yl(){Tt=bn=null,et=!1}function Kp(){var n=aa;return n!==null&&(Cn===null?Cn=n:Cn.push.apply(Cn,n),aa=null),n}function _l(n){aa===null?aa=[n]:aa.push(n)}var Qh=ne(null),la=null,_s=null;function Xs(n,s,a){se(Qh,s._currentValue),s._currentValue=a}function vs(n){n._currentValue=Qh.current,de(Qh)}function Kh(n,s,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===a)break;n=n.return}}function Yh(n,s,a,l){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var f=h.dependencies;if(f!==null){var E=h.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=h;for(var D=0;D<s.length;D++)if(T.context===s[D]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),Kh(f.return,a,n),l||(E=null);break e}f=T.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(i(341));E.lanes|=a,f=E.alternate,f!==null&&(f.lanes|=a),Kh(E,a,n),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===n){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function vl(n,s,a,l){n=null;for(var h=s,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var T=h.type;Vn(h.pendingProps.value,E.value)||(n!==null?n.push(T):n=[T])}}else if(h===Dt.current){if(E=h.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(Yl):n=[Yl])}h=h.return}n!==null&&Yh(s,n,a,l),s.flags|=262144}function Eu(n){for(n=n.firstContext;n!==null;){if(!Vn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ca(n){la=n,_s=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ln(n){return Yp(la,n)}function wu(n,s){return la===null&&ca(n),Yp(n,s)}function Yp(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},_s===null){if(n===null)throw Error(i(308));_s=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else _s=_s.next=s;return a}var iS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},aS=r.unstable_scheduleCallback,oS=r.unstable_NormalPriority,zt={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xh(){return{controller:new iS,data:new Map,refCount:0}}function El(n){n.refCount--,n.refCount===0&&aS(oS,function(){n.controller.abort()})}var wl=null,$h=0,eo=0,to=null;function lS(n,s){if(wl===null){var a=wl=[];$h=0,eo=Zf(),to={status:"pending",value:void 0,then:function(l){a.push(l)}}}return $h++,s.then(Xp,Xp),s}function Xp(){if(--$h===0&&wl!==null){to!==null&&(to.status="fulfilled");var n=wl;wl=null,eo=0,to=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function cS(n,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var $p=K.S;K.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&lS(n,s),$p!==null&&$p(n,s)};var ua=ne(null);function Wh(){var n=ua.current;return n!==null?n:ht.pooledCache}function Tu(n,s){s===null?se(ua,ua.current):se(ua,s.pool)}function Wp(){var n=Wh();return n===null?null:{parent:zt._currentValue,pool:n}}var Tl=Error(i(460)),Jp=Error(i(474)),bu=Error(i(542)),Jh={then:function(){}};function Zp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Su(){}function ey(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(Su,Su),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ny(n),n;default:if(typeof s.status=="string")s.then(Su,Su);else{if(n=ht,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ny(n),n}throw bl=s,Tl}}var bl=null;function ty(){if(bl===null)throw Error(i(459));var n=bl;return bl=null,n}function ny(n){if(n===Tl||n===bu)throw Error(i(483))}var $s=!1;function Zh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ef(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ws(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Js(n,s,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(rt&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=pu(n),Bp(n,null,a),s}return gu(n,l,s,a),pu(n)}function Sl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,zi(n,a)}}function tf(n,s){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=E:f=f.next=E,a=a.next}while(a!==null);f===null?h=f=s:f=f.next=s}else h=f=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var nf=!1;function Al(){if(nf){var n=to;if(n!==null)throw n}}function xl(n,s,a,l){nf=!1;var h=n.updateQueue;$s=!1;var f=h.firstBaseUpdate,E=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var D=T,q=D.next;D.next=null,E===null?f=q:E.next=q,E=D;var J=n.alternate;J!==null&&(J=J.updateQueue,T=J.lastBaseUpdate,T!==E&&(T===null?J.firstBaseUpdate=q:T.next=q,J.lastBaseUpdate=D))}if(f!==null){var ee=h.baseState;E=0,J=q=D=null,T=f;do{var H=T.lane&-536870913,F=H!==T.lane;if(F?(Qe&H)===H:(l&H)===H){H!==0&&H===eo&&(nf=!0),J!==null&&(J=J.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ne=n,Te=T;H=s;var lt=a;switch(Te.tag){case 1:if(Ne=Te.payload,typeof Ne=="function"){ee=Ne.call(lt,ee,H);break e}ee=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Te.payload,H=typeof Ne=="function"?Ne.call(lt,ee,H):Ne,H==null)break e;ee=w({},ee,H);break e;case 2:$s=!0}}H=T.callback,H!==null&&(n.flags|=64,F&&(n.flags|=8192),F=h.callbacks,F===null?h.callbacks=[H]:F.push(H))}else F={lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},J===null?(q=J=F,D=ee):J=J.next=F,E|=H;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;F=T,T=F.next,F.next=null,h.lastBaseUpdate=F,h.shared.pending=null}}while(!0);J===null&&(D=ee),h.baseState=D,h.firstBaseUpdate=q,h.lastBaseUpdate=J,f===null&&(h.shared.lanes=0),ai|=E,n.lanes=E,n.memoizedState=ee}}function ry(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function sy(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)ry(a[n],s)}var no=ne(null),Au=ne(0);function iy(n,s){n=xs,se(Au,n),se(no,s),xs=n|s.baseLanes}function rf(){se(Au,xs),se(no,no.current)}function sf(){xs=Au.current,de(no),de(Au)}var Zs=0,Me=null,at=null,Ot=null,xu=!1,ro=!1,da=!1,Ru=0,Rl=0,so=null,uS=0;function Rt(){throw Error(i(321))}function af(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Vn(n[a],s[a]))return!1;return!0}function of(n,s,a,l,h,f){return Zs=f,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,K.H=n===null||n.memoizedState===null?By:Hy,da=!1,f=a(l,h),da=!1,ro&&(f=oy(s,a,l,h)),ay(n),f}function ay(n){K.H=Ou;var s=at!==null&&at.next!==null;if(Zs=0,Ot=at=Me=null,xu=!1,Rl=0,so=null,s)throw Error(i(300));n===null||Qt||(n=n.dependencies,n!==null&&Eu(n)&&(Qt=!0))}function oy(n,s,a,l){Me=n;var h=0;do{if(ro&&(so=null),Rl=0,ro=!1,25<=h)throw Error(i(301));if(h+=1,Ot=at=null,n.updateQueue!=null){var f=n.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}K.H=yS,f=s(a,l)}while(ro);return f}function dS(){var n=K.H,s=n.useState()[0];return s=typeof s.then=="function"?Il(s):s,n=n.useState()[0],(at!==null?at.memoizedState:null)!==n&&(Me.flags|=1024),s}function lf(){var n=Ru!==0;return Ru=0,n}function cf(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function uf(n){if(xu){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}xu=!1}Zs=0,Ot=at=Me=null,ro=!1,Rl=Ru=0,so=null}function Rn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Me.memoizedState=Ot=n:Ot=Ot.next=n,Ot}function kt(){if(at===null){var n=Me.alternate;n=n!==null?n.memoizedState:null}else n=at.next;var s=Ot===null?Me.memoizedState:Ot.next;if(s!==null)Ot=s,at=n;else{if(n===null)throw Me.alternate===null?Error(i(467)):Error(i(310));at=n,n={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Ot===null?Me.memoizedState=Ot=n:Ot=Ot.next=n}return Ot}function df(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(n){var s=Rl;return Rl+=1,so===null&&(so=[]),n=ey(so,n,s),s=Me,(Ot===null?s.memoizedState:Ot.next)===null&&(s=s.alternate,K.H=s===null||s.memoizedState===null?By:Hy),n}function Iu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Il(n);if(n.$$typeof===oe)return ln(n)}throw Error(i(438,String(n)))}function hf(n){var s=null,a=Me.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Me.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=df(),Me.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),l=0;l<n;l++)a[l]=k;return s.index++,a}function Es(n,s){return typeof s=="function"?s(n):s}function Cu(n){var s=kt();return ff(s,at,n)}function ff(n,s,a){var l=n.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var h=n.baseQueue,f=l.pending;if(f!==null){if(h!==null){var E=h.next;h.next=f.next,f.next=E}s.baseQueue=h=f,l.pending=null}if(f=n.baseState,h===null)n.memoizedState=f;else{s=h.next;var T=E=null,D=null,q=s,J=!1;do{var ee=q.lane&-536870913;if(ee!==q.lane?(Qe&ee)===ee:(Zs&ee)===ee){var H=q.revertLane;if(H===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ee===eo&&(J=!0);else if((Zs&H)===H){q=q.next,H===eo&&(J=!0);continue}else ee={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(T=D=ee,E=f):D=D.next=ee,Me.lanes|=H,ai|=H;ee=q.action,da&&a(f,ee),f=q.hasEagerState?q.eagerState:a(f,ee)}else H={lane:ee,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(T=D=H,E=f):D=D.next=H,Me.lanes|=ee,ai|=ee;q=q.next}while(q!==null&&q!==s);if(D===null?E=f:D.next=T,!Vn(f,n.memoizedState)&&(Qt=!0,J&&(a=to,a!==null)))throw a;n.memoizedState=f,n.baseState=E,n.baseQueue=D,l.lastRenderedState=f}return h===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function mf(n){var s=kt(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=n;var l=a.dispatch,h=a.pending,f=s.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do f=n(f,E.action),E=E.next;while(E!==h);Vn(f,s.memoizedState)||(Qt=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),a.lastRenderedState=f}return[f,l]}function ly(n,s,a){var l=Me,h=kt(),f=et;if(f){if(a===void 0)throw Error(i(407));a=a()}else a=s();var E=!Vn((at||h).memoizedState,a);E&&(h.memoizedState=a,Qt=!0),h=h.queue;var T=dy.bind(null,l,h,n);if(Cl(2048,8,T,[n]),h.getSnapshot!==s||E||Ot!==null&&Ot.memoizedState.tag&1){if(l.flags|=2048,io(9,Nu(),uy.bind(null,l,h,a,s),null),ht===null)throw Error(i(349));f||(Zs&124)!==0||cy(l,s,a)}return a}function cy(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Me.updateQueue,s===null?(s=df(),Me.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function uy(n,s,a,l){s.value=a,s.getSnapshot=l,hy(s)&&fy(n)}function dy(n,s,a){return a(function(){hy(s)&&fy(n)})}function hy(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Vn(n,a)}catch{return!0}}function fy(n){var s=$a(n,2);s!==null&&Bn(s,n,2)}function gf(n){var s=Rn();if(typeof n=="function"){var a=n;if(n=a(),da){yn(!0);try{a()}finally{yn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:n},s}function my(n,s,a,l){return n.baseState=a,ff(n,at,typeof l=="function"?l:Es)}function hS(n,s,a,l,h){if(Pu(n))throw Error(i(485));if(n=s.action,n!==null){var f={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};K.T!==null?a(!0):f.isTransition=!1,l(f),a=s.pending,a===null?(f.next=s.pending=f,gy(s,f)):(f.next=a.next,s.pending=a.next=f)}}function gy(n,s){var a=s.action,l=s.payload,h=n.state;if(s.isTransition){var f=K.T,E={};K.T=E;try{var T=a(h,l),D=K.S;D!==null&&D(E,T),py(n,s,T)}catch(q){pf(n,s,q)}finally{K.T=f}}else try{f=a(h,l),py(n,s,f)}catch(q){pf(n,s,q)}}function py(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){yy(n,s,l)},function(l){return pf(n,s,l)}):yy(n,s,a)}function yy(n,s,a){s.status="fulfilled",s.value=a,_y(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,gy(n,a)))}function pf(n,s,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,_y(s),s=s.next;while(s!==l)}n.action=null}function _y(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function vy(n,s){return s}function Ey(n,s){if(et){var a=ht.formState;if(a!==null){e:{var l=Me;if(et){if(Tt){t:{for(var h=Tt,f=jr;h.nodeType!==8;){if(!f){h=null;break t}if(h=_r(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){Tt=_r(h.nextSibling),l=h.data==="F!";break e}}oa(l)}l=!1}l&&(s=a[0])}}return a=Rn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:s},a.queue=l,a=Uy.bind(null,Me,l),l.dispatch=a,l=gf(!1),f=wf.bind(null,Me,!1,l.queue),l=Rn(),h={state:s,dispatch:null,action:n,pending:null},l.queue=h,a=hS.bind(null,Me,h,f,a),h.dispatch=a,l.memoizedState=n,[s,a,!1]}function wy(n){var s=kt();return Ty(s,at,n)}function Ty(n,s,a){if(s=ff(n,s,vy)[0],n=Cu(Es)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Il(s)}catch(E){throw E===Tl?bu:E}else l=s;s=kt();var h=s.queue,f=h.dispatch;return a!==s.memoizedState&&(Me.flags|=2048,io(9,Nu(),fS.bind(null,h,a),null)),[l,f,n]}function fS(n,s){n.action=s}function by(n){var s=kt(),a=at;if(a!==null)return Ty(s,a,n);kt(),s=s.memoizedState,a=kt();var l=a.queue.dispatch;return a.memoizedState=n,[s,l,!1]}function io(n,s,a,l){return n={tag:n,create:a,deps:l,inst:s,next:null},s=Me.updateQueue,s===null&&(s=df(),Me.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,s.lastEffect=n),n}function Nu(){return{destroy:void 0,resource:void 0}}function Sy(){return kt().memoizedState}function Du(n,s,a,l){var h=Rn();l=l===void 0?null:l,Me.flags|=n,h.memoizedState=io(1|s,Nu(),a,l)}function Cl(n,s,a,l){var h=kt();l=l===void 0?null:l;var f=h.memoizedState.inst;at!==null&&l!==null&&af(l,at.memoizedState.deps)?h.memoizedState=io(s,f,a,l):(Me.flags|=n,h.memoizedState=io(1|s,f,a,l))}function Ay(n,s){Du(8390656,8,n,s)}function xy(n,s){Cl(2048,8,n,s)}function Ry(n,s){return Cl(4,2,n,s)}function Iy(n,s){return Cl(4,4,n,s)}function Cy(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Ny(n,s,a){a=a!=null?a.concat([n]):null,Cl(4,4,Cy.bind(null,s,n),a)}function yf(){}function Dy(n,s){var a=kt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&af(s,l[1])?l[0]:(a.memoizedState=[n,s],n)}function Py(n,s){var a=kt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&af(s,l[1]))return l[0];if(l=n(),da){yn(!0);try{n()}finally{yn(!1)}}return a.memoizedState=[l,s],l}function _f(n,s,a){return a===void 0||(Zs&1073741824)!==0?n.memoizedState=s:(n.memoizedState=a,n=M_(),Me.lanes|=n,ai|=n,a)}function Oy(n,s,a,l){return Vn(a,s)?a:no.current!==null?(n=_f(n,a,l),Vn(n,s)||(Qt=!0),n):(Zs&42)===0?(Qt=!0,n.memoizedState=a):(n=M_(),Me.lanes|=n,ai|=n,s)}function ky(n,s,a,l,h){var f=re.p;re.p=f!==0&&8>f?f:8;var E=K.T,T={};K.T=T,wf(n,!1,s,a);try{var D=h(),q=K.S;if(q!==null&&q(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var J=cS(D,l);Nl(n,s,J,qn(n))}else Nl(n,s,l,qn(n))}catch(ee){Nl(n,s,{then:function(){},status:"rejected",reason:ee},qn())}finally{re.p=f,K.T=E}}function mS(){}function vf(n,s,a,l){if(n.tag!==5)throw Error(i(476));var h=My(n).queue;ky(n,h,s,X,a===null?mS:function(){return Vy(n),a(l)})}function My(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:X},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Vy(n){var s=My(n).next.queue;Nl(n,s,{},qn())}function Ef(){return ln(Yl)}function jy(){return kt().memoizedState}function Ly(){return kt().memoizedState}function gS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=qn();n=Ws(a);var l=Js(s,n,a);l!==null&&(Bn(l,s,a),Sl(l,s,a)),s={cache:Xh()},n.payload=s;return}s=s.return}}function pS(n,s,a){var l=qn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Pu(n)?zy(s,a):(a=Uh(n,s,a,l),a!==null&&(Bn(a,n,l),qy(a,s,l)))}function Uy(n,s,a){var l=qn();Nl(n,s,a,l)}function Nl(n,s,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Pu(n))zy(s,h);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var E=s.lastRenderedState,T=f(E,a);if(h.hasEagerState=!0,h.eagerState=T,Vn(T,E))return gu(n,s,h,0),ht===null&&mu(),!1}catch{}finally{}if(a=Uh(n,s,h,l),a!==null)return Bn(a,n,l),qy(a,s,l),!0}return!1}function wf(n,s,a,l){if(l={lane:2,revertLane:Zf(),action:l,hasEagerState:!1,eagerState:null,next:null},Pu(n)){if(s)throw Error(i(479))}else s=Uh(n,a,l,2),s!==null&&Bn(s,n,2)}function Pu(n){var s=n.alternate;return n===Me||s!==null&&s===Me}function zy(n,s){ro=xu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function qy(n,s,a){if((a&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,zi(n,a)}}var Ou={readContext:ln,use:Iu,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},By={readContext:ln,use:Iu,useCallback:function(n,s){return Rn().memoizedState=[n,s===void 0?null:s],n},useContext:ln,useEffect:Ay,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Du(4194308,4,Cy.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Du(4194308,4,n,s)},useInsertionEffect:function(n,s){Du(4,2,n,s)},useMemo:function(n,s){var a=Rn();s=s===void 0?null:s;var l=n();if(da){yn(!0);try{n()}finally{yn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(n,s,a){var l=Rn();if(a!==void 0){var h=a(s);if(da){yn(!0);try{a(s)}finally{yn(!1)}}}else h=s;return l.memoizedState=l.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},l.queue=n,n=n.dispatch=pS.bind(null,Me,n),[l.memoizedState,n]},useRef:function(n){var s=Rn();return n={current:n},s.memoizedState=n},useState:function(n){n=gf(n);var s=n.queue,a=Uy.bind(null,Me,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:yf,useDeferredValue:function(n,s){var a=Rn();return _f(a,n,s)},useTransition:function(){var n=gf(!1);return n=ky.bind(null,Me,n.queue,!0,!1),Rn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var l=Me,h=Rn();if(et){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),ht===null)throw Error(i(349));(Qe&124)!==0||cy(l,s,a)}h.memoizedState=a;var f={value:a,getSnapshot:s};return h.queue=f,Ay(dy.bind(null,l,f,n),[n]),l.flags|=2048,io(9,Nu(),uy.bind(null,l,f,a,s),null),a},useId:function(){var n=Rn(),s=ht.identifierPrefix;if(et){var a=ys,l=ps;a=(l&~(1<<32-Ht(l)-1)).toString(32)+a,s="«"+s+"R"+a,a=Ru++,0<a&&(s+="H"+a.toString(32)),s+="»"}else a=uS++,s="«"+s+"r"+a.toString(32)+"»";return n.memoizedState=s},useHostTransitionStatus:Ef,useFormState:Ey,useActionState:Ey,useOptimistic:function(n){var s=Rn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=wf.bind(null,Me,!0,a),a.dispatch=s,[n,s]},useMemoCache:hf,useCacheRefresh:function(){return Rn().memoizedState=gS.bind(null,Me)}},Hy={readContext:ln,use:Iu,useCallback:Dy,useContext:ln,useEffect:xy,useImperativeHandle:Ny,useInsertionEffect:Ry,useLayoutEffect:Iy,useMemo:Py,useReducer:Cu,useRef:Sy,useState:function(){return Cu(Es)},useDebugValue:yf,useDeferredValue:function(n,s){var a=kt();return Oy(a,at.memoizedState,n,s)},useTransition:function(){var n=Cu(Es)[0],s=kt().memoizedState;return[typeof n=="boolean"?n:Il(n),s]},useSyncExternalStore:ly,useId:jy,useHostTransitionStatus:Ef,useFormState:wy,useActionState:wy,useOptimistic:function(n,s){var a=kt();return my(a,at,n,s)},useMemoCache:hf,useCacheRefresh:Ly},yS={readContext:ln,use:Iu,useCallback:Dy,useContext:ln,useEffect:xy,useImperativeHandle:Ny,useInsertionEffect:Ry,useLayoutEffect:Iy,useMemo:Py,useReducer:mf,useRef:Sy,useState:function(){return mf(Es)},useDebugValue:yf,useDeferredValue:function(n,s){var a=kt();return at===null?_f(a,n,s):Oy(a,at.memoizedState,n,s)},useTransition:function(){var n=mf(Es)[0],s=kt().memoizedState;return[typeof n=="boolean"?n:Il(n),s]},useSyncExternalStore:ly,useId:jy,useHostTransitionStatus:Ef,useFormState:by,useActionState:by,useOptimistic:function(n,s){var a=kt();return at!==null?my(a,at,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:hf,useCacheRefresh:Ly},ao=null,Dl=0;function ku(n){var s=Dl;return Dl+=1,ao===null&&(ao=[]),ey(ao,n,s)}function Pl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Mu(n,s){throw s.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Fy(n){var s=n._init;return s(n._payload)}function Gy(n){function s(L,M){if(n){var z=L.deletions;z===null?(L.deletions=[M],L.flags|=16):z.push(M)}}function a(L,M){if(!n)return null;for(;M!==null;)s(L,M),M=M.sibling;return null}function l(L){for(var M=new Map;L!==null;)L.key!==null?M.set(L.key,L):M.set(L.index,L),L=L.sibling;return M}function h(L,M){return L=gs(L,M),L.index=0,L.sibling=null,L}function f(L,M,z){return L.index=z,n?(z=L.alternate,z!==null?(z=z.index,z<M?(L.flags|=67108866,M):z):(L.flags|=67108866,M)):(L.flags|=1048576,M)}function E(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function T(L,M,z,Z){return M===null||M.tag!==6?(M=qh(z,L.mode,Z),M.return=L,M):(M=h(M,z),M.return=L,M)}function D(L,M,z,Z){var pe=z.type;return pe===j?J(L,M,z.props.children,Z,z.key):M!==null&&(M.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===x&&Fy(pe)===M.type)?(M=h(M,z.props),Pl(M,z),M.return=L,M):(M=yu(z.type,z.key,z.props,null,L.mode,Z),Pl(M,z),M.return=L,M)}function q(L,M,z,Z){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=Bh(z,L.mode,Z),M.return=L,M):(M=h(M,z.children||[]),M.return=L,M)}function J(L,M,z,Z,pe){return M===null||M.tag!==7?(M=ra(z,L.mode,Z,pe),M.return=L,M):(M=h(M,z),M.return=L,M)}function ee(L,M,z){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=qh(""+M,L.mode,z),M.return=L,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case A:return z=yu(M.type,M.key,M.props,null,L.mode,z),Pl(z,M),z.return=L,z;case R:return M=Bh(M,L.mode,z),M.return=L,M;case x:var Z=M._init;return M=Z(M._payload),ee(L,M,z)}if(Se(M)||V(M))return M=ra(M,L.mode,z,null),M.return=L,M;if(typeof M.then=="function")return ee(L,ku(M),z);if(M.$$typeof===oe)return ee(L,wu(L,M),z);Mu(L,M)}return null}function H(L,M,z,Z){var pe=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return pe!==null?null:T(L,M,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case A:return z.key===pe?D(L,M,z,Z):null;case R:return z.key===pe?q(L,M,z,Z):null;case x:return pe=z._init,z=pe(z._payload),H(L,M,z,Z)}if(Se(z)||V(z))return pe!==null?null:J(L,M,z,Z,null);if(typeof z.then=="function")return H(L,M,ku(z),Z);if(z.$$typeof===oe)return H(L,M,wu(L,z),Z);Mu(L,z)}return null}function F(L,M,z,Z,pe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return L=L.get(z)||null,T(M,L,""+Z,pe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return L=L.get(Z.key===null?z:Z.key)||null,D(M,L,Z,pe);case R:return L=L.get(Z.key===null?z:Z.key)||null,q(M,L,Z,pe);case x:var je=Z._init;return Z=je(Z._payload),F(L,M,z,Z,pe)}if(Se(Z)||V(Z))return L=L.get(z)||null,J(M,L,Z,pe,null);if(typeof Z.then=="function")return F(L,M,z,ku(Z),pe);if(Z.$$typeof===oe)return F(L,M,z,wu(M,Z),pe);Mu(M,Z)}return null}function Ne(L,M,z,Z){for(var pe=null,je=null,_e=M,Ae=M=0,Yt=null;_e!==null&&Ae<z.length;Ae++){_e.index>Ae?(Yt=_e,_e=null):Yt=_e.sibling;var $e=H(L,_e,z[Ae],Z);if($e===null){_e===null&&(_e=Yt);break}n&&_e&&$e.alternate===null&&s(L,_e),M=f($e,M,Ae),je===null?pe=$e:je.sibling=$e,je=$e,_e=Yt}if(Ae===z.length)return a(L,_e),et&&ia(L,Ae),pe;if(_e===null){for(;Ae<z.length;Ae++)_e=ee(L,z[Ae],Z),_e!==null&&(M=f(_e,M,Ae),je===null?pe=_e:je.sibling=_e,je=_e);return et&&ia(L,Ae),pe}for(_e=l(_e);Ae<z.length;Ae++)Yt=F(_e,L,Ae,z[Ae],Z),Yt!==null&&(n&&Yt.alternate!==null&&_e.delete(Yt.key===null?Ae:Yt.key),M=f(Yt,M,Ae),je===null?pe=Yt:je.sibling=Yt,je=Yt);return n&&_e.forEach(function(gi){return s(L,gi)}),et&&ia(L,Ae),pe}function Te(L,M,z,Z){if(z==null)throw Error(i(151));for(var pe=null,je=null,_e=M,Ae=M=0,Yt=null,$e=z.next();_e!==null&&!$e.done;Ae++,$e=z.next()){_e.index>Ae?(Yt=_e,_e=null):Yt=_e.sibling;var gi=H(L,_e,$e.value,Z);if(gi===null){_e===null&&(_e=Yt);break}n&&_e&&gi.alternate===null&&s(L,_e),M=f(gi,M,Ae),je===null?pe=gi:je.sibling=gi,je=gi,_e=Yt}if($e.done)return a(L,_e),et&&ia(L,Ae),pe;if(_e===null){for(;!$e.done;Ae++,$e=z.next())$e=ee(L,$e.value,Z),$e!==null&&(M=f($e,M,Ae),je===null?pe=$e:je.sibling=$e,je=$e);return et&&ia(L,Ae),pe}for(_e=l(_e);!$e.done;Ae++,$e=z.next())$e=F(_e,L,Ae,$e.value,Z),$e!==null&&(n&&$e.alternate!==null&&_e.delete($e.key===null?Ae:$e.key),M=f($e,M,Ae),je===null?pe=$e:je.sibling=$e,je=$e);return n&&_e.forEach(function(_A){return s(L,_A)}),et&&ia(L,Ae),pe}function lt(L,M,z,Z){if(typeof z=="object"&&z!==null&&z.type===j&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case A:e:{for(var pe=z.key;M!==null;){if(M.key===pe){if(pe=z.type,pe===j){if(M.tag===7){a(L,M.sibling),Z=h(M,z.props.children),Z.return=L,L=Z;break e}}else if(M.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===x&&Fy(pe)===M.type){a(L,M.sibling),Z=h(M,z.props),Pl(Z,z),Z.return=L,L=Z;break e}a(L,M);break}else s(L,M);M=M.sibling}z.type===j?(Z=ra(z.props.children,L.mode,Z,z.key),Z.return=L,L=Z):(Z=yu(z.type,z.key,z.props,null,L.mode,Z),Pl(Z,z),Z.return=L,L=Z)}return E(L);case R:e:{for(pe=z.key;M!==null;){if(M.key===pe)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){a(L,M.sibling),Z=h(M,z.children||[]),Z.return=L,L=Z;break e}else{a(L,M);break}else s(L,M);M=M.sibling}Z=Bh(z,L.mode,Z),Z.return=L,L=Z}return E(L);case x:return pe=z._init,z=pe(z._payload),lt(L,M,z,Z)}if(Se(z))return Ne(L,M,z,Z);if(V(z)){if(pe=V(z),typeof pe!="function")throw Error(i(150));return z=pe.call(z),Te(L,M,z,Z)}if(typeof z.then=="function")return lt(L,M,ku(z),Z);if(z.$$typeof===oe)return lt(L,M,wu(L,z),Z);Mu(L,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,M!==null&&M.tag===6?(a(L,M.sibling),Z=h(M,z),Z.return=L,L=Z):(a(L,M),Z=qh(z,L.mode,Z),Z.return=L,L=Z),E(L)):a(L,M)}return function(L,M,z,Z){try{Dl=0;var pe=lt(L,M,z,Z);return ao=null,pe}catch(_e){if(_e===Tl||_e===bu)throw _e;var je=jn(29,_e,null,L.mode);return je.lanes=Z,je.return=L,je}finally{}}}var oo=Gy(!0),Qy=Gy(!1),rr=ne(null),Lr=null;function ei(n){var s=n.alternate;se(qt,qt.current&1),se(rr,n),Lr===null&&(s===null||no.current!==null||s.memoizedState!==null)&&(Lr=n)}function Ky(n){if(n.tag===22){if(se(qt,qt.current),se(rr,n),Lr===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Lr=n)}}else ti()}function ti(){se(qt,qt.current),se(rr,rr.current)}function ws(n){de(rr),Lr===n&&(Lr=null),de(qt)}var qt=ne(0);function Vu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||dm(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Tf(n,s,a,l){s=n.memoizedState,a=a(l,s),a=a==null?s:w({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var bf={enqueueSetState:function(n,s,a){n=n._reactInternals;var l=qn(),h=Ws(l);h.payload=s,a!=null&&(h.callback=a),s=Js(n,h,l),s!==null&&(Bn(s,n,l),Sl(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var l=qn(),h=Ws(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=Js(n,h,l),s!==null&&(Bn(s,n,l),Sl(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=qn(),l=Ws(a);l.tag=2,s!=null&&(l.callback=s),s=Js(n,l,a),s!==null&&(Bn(s,n,a),Sl(s,n,a))}};function Yy(n,s,a,l,h,f,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,f,E):s.prototype&&s.prototype.isPureReactComponent?!ml(a,l)||!ml(h,f):!0}function Xy(n,s,a,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==n&&bf.enqueueReplaceState(s,s.state,null)}function ha(n,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(n=n.defaultProps){a===s&&(a=w({},a));for(var h in n)a[h]===void 0&&(a[h]=n[h])}return a}var ju=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function $y(n){ju(n)}function Wy(n){console.error(n)}function Jy(n){ju(n)}function Lu(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Zy(n,s,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Sf(n,s,a){return a=Ws(a),a.tag=3,a.payload={element:null},a.callback=function(){Lu(n,s)},a}function e_(n){return n=Ws(n),n.tag=3,n}function t_(n,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;n.payload=function(){return h(f)},n.callback=function(){Zy(s,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Zy(s,a,l),typeof h!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function _S(n,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&vl(s,a,h,!0),a=rr.current,a!==null){switch(a.tag){case 13:return Lr===null?Yf():a.alternate===null&&bt===0&&(bt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Jh?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),$f(n,l,h)),!1;case 22:return a.flags|=65536,l===Jh?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),$f(n,l,h)),!1}throw Error(i(435,a.tag))}return $f(n,l,h),Yf(),!1}if(et)return s=rr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==Gh&&(n=Error(i(422),{cause:l}),_l(Zn(n,a)))):(l!==Gh&&(s=Error(i(423),{cause:l}),_l(Zn(s,a))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,l=Zn(l,a),h=Sf(n.stateNode,l,h),tf(n,h),bt!==4&&(bt=2)),!1;var f=Error(i(520),{cause:l});if(f=Zn(f,a),Ul===null?Ul=[f]:Ul.push(f),bt!==4&&(bt=2),s===null)return!0;l=Zn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=h&-h,a.lanes|=n,n=Sf(a.stateNode,l,n),tf(a,n),!1;case 1:if(s=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(oi===null||!oi.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=e_(h),t_(h,n,a,l),tf(a,h),!1}a=a.return}while(a!==null);return!1}var n_=Error(i(461)),Qt=!1;function tn(n,s,a,l){s.child=n===null?Qy(s,null,a,l):oo(s,n.child,a,l)}function r_(n,s,a,l,h){a=a.render;var f=s.ref;if("ref"in l){var E={};for(var T in l)T!=="ref"&&(E[T]=l[T])}else E=l;return ca(s),l=of(n,s,a,E,f,h),T=lf(),n!==null&&!Qt?(cf(n,s,h),Ts(n,s,h)):(et&&T&&Hh(s),s.flags|=1,tn(n,s,l,h),s.child)}function s_(n,s,a,l,h){if(n===null){var f=a.type;return typeof f=="function"&&!zh(f)&&f.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=f,i_(n,s,f,l,h)):(n=yu(a.type,null,l,s,s.mode,h),n.ref=s.ref,n.return=s,s.child=n)}if(f=n.child,!Pf(n,h)){var E=f.memoizedProps;if(a=a.compare,a=a!==null?a:ml,a(E,l)&&n.ref===s.ref)return Ts(n,s,h)}return s.flags|=1,n=gs(f,l),n.ref=s.ref,n.return=s,s.child=n}function i_(n,s,a,l,h){if(n!==null){var f=n.memoizedProps;if(ml(f,l)&&n.ref===s.ref)if(Qt=!1,s.pendingProps=l=f,Pf(n,h))(n.flags&131072)!==0&&(Qt=!0);else return s.lanes=n.lanes,Ts(n,s,h)}return Af(n,s,a,l,h)}function a_(n,s,a){var l=s.pendingProps,h=l.children,f=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,n!==null){for(h=s.child=n.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;s.childLanes=f&~l}else s.childLanes=0,s.child=null;return o_(n,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Tu(s,f!==null?f.cachePool:null),f!==null?iy(s,f):rf(),Ky(s);else return s.lanes=s.childLanes=536870912,o_(n,s,f!==null?f.baseLanes|a:a,a)}else f!==null?(Tu(s,f.cachePool),iy(s,f),ti(),s.memoizedState=null):(n!==null&&Tu(s,null),rf(),ti());return tn(n,s,h,a),s.child}function o_(n,s,a,l){var h=Wh();return h=h===null?null:{parent:zt._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},n!==null&&Tu(s,null),rf(),Ky(s),n!==null&&vl(n,s,l,!0),null}function Uu(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function Af(n,s,a,l,h){return ca(s),a=of(n,s,a,l,void 0,h),l=lf(),n!==null&&!Qt?(cf(n,s,h),Ts(n,s,h)):(et&&l&&Hh(s),s.flags|=1,tn(n,s,a,h),s.child)}function l_(n,s,a,l,h,f){return ca(s),s.updateQueue=null,a=oy(s,l,a,h),ay(n),l=lf(),n!==null&&!Qt?(cf(n,s,f),Ts(n,s,f)):(et&&l&&Hh(s),s.flags|=1,tn(n,s,a,f),s.child)}function c_(n,s,a,l,h){if(ca(s),s.stateNode===null){var f=Wa,E=a.contextType;typeof E=="object"&&E!==null&&(f=ln(E)),f=new a(l,f),s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=bf,s.stateNode=f,f._reactInternals=s,f=s.stateNode,f.props=l,f.state=s.memoizedState,f.refs={},Zh(s),E=a.contextType,f.context=typeof E=="object"&&E!==null?ln(E):Wa,f.state=s.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(Tf(s,a,E,l),f.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&bf.enqueueReplaceState(f,f.state,null),xl(s,l,f,h),Al(),f.state=s.memoizedState),typeof f.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){f=s.stateNode;var T=s.memoizedProps,D=ha(a,T);f.props=D;var q=f.context,J=a.contextType;E=Wa,typeof J=="object"&&J!==null&&(E=ln(J));var ee=a.getDerivedStateFromProps;J=typeof ee=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,J||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||q!==E)&&Xy(s,f,l,E),$s=!1;var H=s.memoizedState;f.state=H,xl(s,l,f,h),Al(),q=s.memoizedState,T||H!==q||$s?(typeof ee=="function"&&(Tf(s,a,ee,l),q=s.memoizedState),(D=$s||Yy(s,a,D,l,H,q,E))?(J||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(s.flags|=4194308)):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=q),f.props=l,f.state=q,f.context=E,l=D):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{f=s.stateNode,ef(n,s),E=s.memoizedProps,J=ha(a,E),f.props=J,ee=s.pendingProps,H=f.context,q=a.contextType,D=Wa,typeof q=="object"&&q!==null&&(D=ln(q)),T=a.getDerivedStateFromProps,(q=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==ee||H!==D)&&Xy(s,f,l,D),$s=!1,H=s.memoizedState,f.state=H,xl(s,l,f,h),Al();var F=s.memoizedState;E!==ee||H!==F||$s||n!==null&&n.dependencies!==null&&Eu(n.dependencies)?(typeof T=="function"&&(Tf(s,a,T,l),F=s.memoizedState),(J=$s||Yy(s,a,J,l,H,F,D)||n!==null&&n.dependencies!==null&&Eu(n.dependencies))?(q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,F,D),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,F,D)),typeof f.componentDidUpdate=="function"&&(s.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=F),f.props=l,f.state=F,f.context=D,l=J):(typeof f.componentDidUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),l=!1)}return f=l,Uu(n,s),l=(s.flags&128)!==0,f||l?(f=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),s.flags|=1,n!==null&&l?(s.child=oo(s,n.child,null,h),s.child=oo(s,null,a,h)):tn(n,s,a,h),s.memoizedState=f.state,n=s.child):n=Ts(n,s,h),n}function u_(n,s,a,l){return yl(),s.flags|=256,tn(n,s,a,l),s.child}var xf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rf(n){return{baseLanes:n,cachePool:Wp()}}function If(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=sr),n}function d_(n,s,a){var l=s.pendingProps,h=!1,f=(s.flags&128)!==0,E;if((E=f)||(E=n!==null&&n.memoizedState===null?!1:(qt.current&2)!==0),E&&(h=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if(et){if(h?ei(s):ti(),et){var T=Tt,D;if(D=T){e:{for(D=T,T=jr;D.nodeType!==8;){if(!T){T=null;break e}if(D=_r(D.nextSibling),D===null){T=null;break e}}T=D}T!==null?(s.memoizedState={dehydrated:T,treeContext:sa!==null?{id:ps,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},D=jn(18,null,null,0),D.stateNode=T,D.return=s,s.child=D,bn=s,Tt=null,D=!0):D=!1}D||oa(s)}if(T=s.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return dm(T)?s.lanes=32:s.lanes=536870912,null;ws(s)}return T=l.children,l=l.fallback,h?(ti(),h=s.mode,T=zu({mode:"hidden",children:T},h),l=ra(l,h,a,null),T.return=s,l.return=s,T.sibling=l,s.child=T,h=s.child,h.memoizedState=Rf(a),h.childLanes=If(n,E,a),s.memoizedState=xf,l):(ei(s),Cf(s,T))}if(D=n.memoizedState,D!==null&&(T=D.dehydrated,T!==null)){if(f)s.flags&256?(ei(s),s.flags&=-257,s=Nf(n,s,a)):s.memoizedState!==null?(ti(),s.child=n.child,s.flags|=128,s=null):(ti(),h=l.fallback,T=s.mode,l=zu({mode:"visible",children:l.children},T),h=ra(h,T,a,null),h.flags|=2,l.return=s,h.return=s,l.sibling=h,s.child=l,oo(s,n.child,null,a),l=s.child,l.memoizedState=Rf(a),l.childLanes=If(n,E,a),s.memoizedState=xf,s=h);else if(ei(s),dm(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var q=E.dgst;E=q,l=Error(i(419)),l.stack="",l.digest=E,_l({value:l,source:null,stack:null}),s=Nf(n,s,a)}else if(Qt||vl(n,s,a,!1),E=(a&n.childLanes)!==0,Qt||E){if(E=ht,E!==null&&(l=a&-a,l=(l&42)!==0?1:Ar(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==D.retryLane))throw D.retryLane=l,$a(n,l),Bn(E,n,l),n_;T.data==="$?"||Yf(),s=Nf(n,s,a)}else T.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=D.treeContext,Tt=_r(T.nextSibling),bn=s,et=!0,aa=null,jr=!1,n!==null&&(tr[nr++]=ps,tr[nr++]=ys,tr[nr++]=sa,ps=n.id,ys=n.overflow,sa=s),s=Cf(s,l.children),s.flags|=4096);return s}return h?(ti(),h=l.fallback,T=s.mode,D=n.child,q=D.sibling,l=gs(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,q!==null?h=gs(q,h):(h=ra(h,T,a,null),h.flags|=2),h.return=s,l.return=s,l.sibling=h,s.child=l,l=h,h=s.child,T=n.child.memoizedState,T===null?T=Rf(a):(D=T.cachePool,D!==null?(q=zt._currentValue,D=D.parent!==q?{parent:q,pool:q}:D):D=Wp(),T={baseLanes:T.baseLanes|a,cachePool:D}),h.memoizedState=T,h.childLanes=If(n,E,a),s.memoizedState=xf,l):(ei(s),a=n.child,n=a.sibling,a=gs(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=a,s.memoizedState=null,a)}function Cf(n,s){return s=zu({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function zu(n,s){return n=jn(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Nf(n,s,a){return oo(s,n.child,null,a),n=Cf(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function h_(n,s,a){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),Kh(n.return,s,a)}function Df(n,s,a,l,h){var f=n.memoizedState;f===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function f_(n,s,a){var l=s.pendingProps,h=l.revealOrder,f=l.tail;if(tn(n,s,l.children,a),l=qt.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&h_(n,a,s);else if(n.tag===19)h_(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(se(qt,l),h){case"forwards":for(a=s.child,h=null;a!==null;)n=a.alternate,n!==null&&Vu(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),Df(s,!1,h,a,f);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(n=h.alternate,n!==null&&Vu(n)===null){s.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}Df(s,!0,a,null,f);break;case"together":Df(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ts(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ai|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(vl(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,a=gs(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=gs(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Pf(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Eu(n)))}function vS(n,s,a){switch(s.tag){case 3:Je(s,s.stateNode.containerInfo),Xs(s,zt,n.memoizedState.cache),yl();break;case 27:case 5:cr(s);break;case 4:Je(s,s.stateNode.containerInfo);break;case 10:Xs(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(ei(s),s.flags|=128,null):(a&s.child.childLanes)!==0?d_(n,s,a):(ei(s),n=Ts(n,s,a),n!==null?n.sibling:null);ei(s);break;case 19:var h=(n.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(vl(n,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return f_(n,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),se(qt,qt.current),l)break;return null;case 22:case 23:return s.lanes=0,a_(n,s,a);case 24:Xs(s,zt,n.memoizedState.cache)}return Ts(n,s,a)}function m_(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)Qt=!0;else{if(!Pf(n,a)&&(s.flags&128)===0)return Qt=!1,vS(n,s,a);Qt=(n.flags&131072)!==0}else Qt=!1,et&&(s.flags&1048576)!==0&&Fp(s,vu,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var l=s.elementType,h=l._init;if(l=h(l._payload),s.type=l,typeof l=="function")zh(l)?(n=ha(l,n),s.tag=1,s=c_(null,s,l,n,a)):(s.tag=0,s=Af(null,s,l,n,a));else{if(l!=null){if(h=l.$$typeof,h===ge){s.tag=11,s=r_(null,s,l,n,a);break e}else if(h===N){s.tag=14,s=s_(null,s,l,n,a);break e}}throw s=xe(l)||l,Error(i(306,s,""))}}return s;case 0:return Af(n,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=ha(l,s.pendingProps),c_(n,s,l,h,a);case 3:e:{if(Je(s,s.stateNode.containerInfo),n===null)throw Error(i(387));l=s.pendingProps;var f=s.memoizedState;h=f.element,ef(n,s),xl(s,l,null,a);var E=s.memoizedState;if(l=E.cache,Xs(s,zt,l),l!==f.cache&&Yh(s,[zt],a,!0),Al(),l=E.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=u_(n,s,l,a);break e}else if(l!==h){h=Zn(Error(i(424)),s),_l(h),s=u_(n,s,l,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Tt=_r(n.firstChild),bn=s,et=!0,aa=null,jr=!0,a=Qy(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(yl(),l===h){s=Ts(n,s,a);break e}tn(n,s,l,a)}s=s.child}return s;case 26:return Uu(n,s),n===null?(a=_0(s.type,null,s.pendingProps,null))?s.memoizedState=a:et||(a=s.type,n=s.pendingProps,l=ed(Re.current).createElement(a),l[At]=s,l[wt]=n,rn(l,a,n),xt(l),s.stateNode=l):s.memoizedState=_0(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return cr(s),n===null&&et&&(l=s.stateNode=g0(s.type,s.pendingProps,Re.current),bn=s,jr=!0,h=Tt,ui(s.type)?(hm=h,Tt=_r(l.firstChild)):Tt=h),tn(n,s,s.pendingProps.children,a),Uu(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&et&&((h=l=Tt)&&(l=KS(l,s.type,s.pendingProps,jr),l!==null?(s.stateNode=l,bn=s,Tt=_r(l.firstChild),jr=!1,h=!0):h=!1),h||oa(s)),cr(s),h=s.type,f=s.pendingProps,E=n!==null?n.memoizedProps:null,l=f.children,lm(h,f)?l=null:E!==null&&lm(h,E)&&(s.flags|=32),s.memoizedState!==null&&(h=of(n,s,dS,null,null,a),Yl._currentValue=h),Uu(n,s),tn(n,s,l,a),s.child;case 6:return n===null&&et&&((n=a=Tt)&&(a=YS(a,s.pendingProps,jr),a!==null?(s.stateNode=a,bn=s,Tt=null,n=!0):n=!1),n||oa(s)),null;case 13:return d_(n,s,a);case 4:return Je(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=oo(s,null,l,a):tn(n,s,l,a),s.child;case 11:return r_(n,s,s.type,s.pendingProps,a);case 7:return tn(n,s,s.pendingProps,a),s.child;case 8:return tn(n,s,s.pendingProps.children,a),s.child;case 12:return tn(n,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Xs(s,s.type,l.value),tn(n,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,ca(s),h=ln(h),l=l(h),s.flags|=1,tn(n,s,l,a),s.child;case 14:return s_(n,s,s.type,s.pendingProps,a);case 15:return i_(n,s,s.type,s.pendingProps,a);case 19:return f_(n,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},n===null?(a=zu(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=gs(n.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return a_(n,s,a);case 24:return ca(s),l=ln(zt),n===null?(h=Wh(),h===null&&(h=ht,f=Xh(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),s.memoizedState={parent:l,cache:h},Zh(s),Xs(s,zt,h)):((n.lanes&a)!==0&&(ef(n,s),xl(s,null,null,a),Al()),h=n.memoizedState,f=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Xs(s,zt,l)):(l=f.cache,Xs(s,zt,l),l!==h.cache&&Yh(s,[zt],a,!0))),tn(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function bs(n){n.flags|=4}function g_(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!b0(s)){if(s=rr.current,s!==null&&((Qe&4194048)===Qe?Lr!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||s!==Lr))throw bl=Jh,Jp;n.flags|=8192}}function qu(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Ui():536870912,n.lanes|=s,ho|=s)}function Ol(n,s){if(!et)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function yt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(s)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=l,n.childLanes=a,s}function ES(n,s,a){var l=s.pendingProps;switch(Fh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(s),null;case 1:return yt(s),null;case 3:return a=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),vs(zt),Jt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(pl(s)?bs(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Kp())),yt(s),null;case 26:return a=s.memoizedState,n===null?(bs(s),a!==null?(yt(s),g_(s,a)):(yt(s),s.flags&=-16777217)):a?a!==n.memoizedState?(bs(s),yt(s),g_(s,a)):(yt(s),s.flags&=-16777217):(n.memoizedProps!==l&&bs(s),yt(s),s.flags&=-16777217),null;case 27:ur(s),a=Re.current;var h=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==l&&bs(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return yt(s),null}n=ve.current,pl(s)?Gp(s):(n=g0(h,l,a),s.stateNode=n,bs(s))}return yt(s),null;case 5:if(ur(s),a=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&bs(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return yt(s),null}if(n=ve.current,pl(s))Gp(s);else{switch(h=ed(Re.current),n){case 1:n=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=h.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}n[At]=s,n[wt]=l;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)n.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=n;e:switch(rn(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&bs(s)}}return yt(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&bs(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(n=Re.current,pl(s)){if(n=s.stateNode,a=s.memoizedProps,l=null,h=bn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}n[At]=s,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||l0(n.nodeValue,a)),n||oa(s)}else n=ed(n).createTextNode(l),n[At]=s,s.stateNode=n}return yt(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=pl(s),l!==null&&l.dehydrated!==null){if(n===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[At]=s}else yl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;yt(s),h=!1}else h=Kp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(ws(s),s):(ws(s),null)}if(ws(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==n&&a&&(s.child.flags|=8192),qu(s,s.updateQueue),yt(s),null;case 4:return Jt(),n===null&&rm(s.stateNode.containerInfo),yt(s),null;case 10:return vs(s.type),yt(s),null;case 19:if(de(qt),h=s.memoizedState,h===null)return yt(s),null;if(l=(s.flags&128)!==0,f=h.rendering,f===null)if(l)Ol(h,!1);else{if(bt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(f=Vu(n),f!==null){for(s.flags|=128,Ol(h,!1),n=f.updateQueue,s.updateQueue=n,qu(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)Hp(a,n),a=a.sibling;return se(qt,qt.current&1|2),s.child}n=n.sibling}h.tail!==null&&pn()>Fu&&(s.flags|=128,l=!0,Ol(h,!1),s.lanes=4194304)}else{if(!l)if(n=Vu(f),n!==null){if(s.flags|=128,l=!0,n=n.updateQueue,s.updateQueue=n,qu(s,n),Ol(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!et)return yt(s),null}else 2*pn()-h.renderingStartTime>Fu&&a!==536870912&&(s.flags|=128,l=!0,Ol(h,!1),s.lanes=4194304);h.isBackwards?(f.sibling=s.child,s.child=f):(n=h.last,n!==null?n.sibling=f:s.child=f,h.last=f)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=pn(),s.sibling=null,n=qt.current,se(qt,l?n&1|2:n&1),s):(yt(s),null);case 22:case 23:return ws(s),sf(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(yt(s),s.subtreeFlags&6&&(s.flags|=8192)):yt(s),a=s.updateQueue,a!==null&&qu(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),n!==null&&de(ua),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),vs(zt),yt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function wS(n,s){switch(Fh(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return vs(zt),Jt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return ur(s),null;case 13:if(ws(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));yl()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return de(qt),null;case 4:return Jt(),null;case 10:return vs(s.type),null;case 22:case 23:return ws(s),sf(),n!==null&&de(ua),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return vs(zt),null;case 25:return null;default:return null}}function p_(n,s){switch(Fh(s),s.tag){case 3:vs(zt),Jt();break;case 26:case 27:case 5:ur(s);break;case 4:Jt();break;case 13:ws(s);break;case 19:de(qt);break;case 10:vs(s.type);break;case 22:case 23:ws(s),sf(),n!==null&&de(ua);break;case 24:vs(zt)}}function kl(n,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&n)===n){l=void 0;var f=a.create,E=a.inst;l=f(),E.destroy=l}a=a.next}while(a!==h)}}catch(T){ut(s,s.return,T)}}function ni(n,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&n)===n){var E=l.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,h=s;var D=a,q=T;try{q()}catch(J){ut(h,D,J)}}}l=l.next}while(l!==f)}}catch(J){ut(s,s.return,J)}}function y_(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{sy(s,a)}catch(l){ut(n,n.return,l)}}}function __(n,s,a){a.props=ha(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){ut(n,s,l)}}function Ml(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(h){ut(n,s,h)}}function Ur(n,s){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ut(n,s,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ut(n,s,h)}else a.current=null}function v_(n){var s=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ut(n,n.return,h)}}function Of(n,s,a){try{var l=n.stateNode;BS(l,n.type,a,s),l[wt]=s}catch(h){ut(n,n.return,h)}}function E_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ui(n.type)||n.tag===4}function kf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||E_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ui(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Mf(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Zu));else if(l!==4&&(l===27&&ui(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(Mf(n,s,a),n=n.sibling;n!==null;)Mf(n,s,a),n=n.sibling}function Bu(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(l!==4&&(l===27&&ui(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Bu(n,s,a),n=n.sibling;n!==null;)Bu(n,s,a),n=n.sibling}function w_(n){var s=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);rn(s,l,a),s[At]=n,s[wt]=a}catch(f){ut(n,n.return,f)}}var Ss=!1,It=!1,Vf=!1,T_=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function TS(n,s){if(n=n.containerInfo,am=ad,n=Op(n),Oh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var E=0,T=-1,D=-1,q=0,J=0,ee=n,H=null;t:for(;;){for(var F;ee!==a||h!==0&&ee.nodeType!==3||(T=E+h),ee!==f||l!==0&&ee.nodeType!==3||(D=E+l),ee.nodeType===3&&(E+=ee.nodeValue.length),(F=ee.firstChild)!==null;)H=ee,ee=F;for(;;){if(ee===n)break t;if(H===a&&++q===h&&(T=E),H===f&&++J===l&&(D=E),(F=ee.nextSibling)!==null)break;ee=H,H=ee.parentNode}ee=F}a=T===-1||D===-1?null:{start:T,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(om={focusedElem:n,selectionRange:a},ad=!1,Kt=s;Kt!==null;)if(s=Kt,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,Kt=n;else for(;Kt!==null;){switch(s=Kt,f=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&f!==null){n=void 0,a=s,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Ne=ha(a.type,h,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(Ne,f),l.__reactInternalSnapshotBeforeUpdate=n}catch(Te){ut(a,a.return,Te)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)um(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":um(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Kt=n;break}Kt=s.return}}function b_(n,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ri(n,a),l&4&&kl(5,a);break;case 1:if(ri(n,a),l&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(E){ut(a,a.return,E)}else{var h=ha(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(h,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){ut(a,a.return,E)}}l&64&&y_(a),l&512&&Ml(a,a.return);break;case 3:if(ri(n,a),l&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{sy(n,s)}catch(E){ut(a,a.return,E)}}break;case 27:s===null&&l&4&&w_(a);case 26:case 5:ri(n,a),s===null&&l&4&&v_(a),l&512&&Ml(a,a.return);break;case 12:ri(n,a);break;case 13:ri(n,a),l&4&&x_(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=DS.bind(null,a),XS(n,a))));break;case 22:if(l=a.memoizedState!==null||Ss,!l){s=s!==null&&s.memoizedState!==null||It,h=Ss;var f=It;Ss=l,(It=s)&&!f?si(n,a,(a.subtreeFlags&8772)!==0):ri(n,a),Ss=h,It=f}break;case 30:break;default:ri(n,a)}}function S_(n){var s=n.alternate;s!==null&&(n.alternate=null,S_(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&_n(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var mt=null,In=!1;function As(n,s,a){for(a=a.child;a!==null;)A_(n,s,a),a=a.sibling}function A_(n,s,a){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(ft,a)}catch{}switch(a.tag){case 26:It||Ur(a,s),As(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:It||Ur(a,s);var l=mt,h=In;ui(a.type)&&(mt=a.stateNode,In=!1),As(n,s,a),Fl(a.stateNode),mt=l,In=h;break;case 5:It||Ur(a,s);case 6:if(l=mt,h=In,mt=null,As(n,s,a),mt=l,In=h,mt!==null)if(In)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(a.stateNode)}catch(f){ut(a,s,f)}else try{mt.removeChild(a.stateNode)}catch(f){ut(a,s,f)}break;case 18:mt!==null&&(In?(n=mt,f0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Jl(n)):f0(mt,a.stateNode));break;case 4:l=mt,h=In,mt=a.stateNode.containerInfo,In=!0,As(n,s,a),mt=l,In=h;break;case 0:case 11:case 14:case 15:It||ni(2,a,s),It||ni(4,a,s),As(n,s,a);break;case 1:It||(Ur(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&__(a,s,l)),As(n,s,a);break;case 21:As(n,s,a);break;case 22:It=(l=It)||a.memoizedState!==null,As(n,s,a),It=l;break;default:As(n,s,a)}}function x_(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Jl(n)}catch(a){ut(s,s.return,a)}}function bS(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new T_),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new T_),s;default:throw Error(i(435,n.tag))}}function jf(n,s){var a=bS(n);s.forEach(function(l){var h=PS.bind(null,n,l);a.has(l)||(a.add(l),l.then(h,h))})}function Ln(n,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=n,E=s,T=E;e:for(;T!==null;){switch(T.tag){case 27:if(ui(T.type)){mt=T.stateNode,In=!1;break e}break;case 5:mt=T.stateNode,In=!1;break e;case 3:case 4:mt=T.stateNode.containerInfo,In=!0;break e}T=T.return}if(mt===null)throw Error(i(160));A_(f,E,h),mt=null,In=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)R_(s,n),s=s.sibling}var yr=null;function R_(n,s){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ln(s,n),Un(n),l&4&&(ni(3,n,n.return),kl(3,n),ni(5,n,n.return));break;case 1:Ln(s,n),Un(n),l&512&&(It||a===null||Ur(a,a.return)),l&64&&Ss&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=yr;if(Ln(s,n),Un(n),l&512&&(It||a===null||Ur(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[xn]||f[At]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),rn(f,l,a),f[At]=n,xt(f),l=f;break e;case"link":var E=w0("link","href",h).get(l+(a.href||""));if(E){for(var T=0;T<E.length;T++)if(f=E[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(T,1);break t}}f=h.createElement(l),rn(f,l,a),h.head.appendChild(f);break;case"meta":if(E=w0("meta","content",h).get(l+(a.content||""))){for(T=0;T<E.length;T++)if(f=E[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(T,1);break t}}f=h.createElement(l),rn(f,l,a),h.head.appendChild(f);break;default:throw Error(i(468,l))}f[At]=n,xt(f),l=f}n.stateNode=l}else T0(h,n.type,n.stateNode);else n.stateNode=E0(h,l,n.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?T0(h,n.type,n.stateNode):E0(h,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Of(n,n.memoizedProps,a.memoizedProps)}break;case 27:Ln(s,n),Un(n),l&512&&(It||a===null||Ur(a,a.return)),a!==null&&l&4&&Of(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Ln(s,n),Un(n),l&512&&(It||a===null||Ur(a,a.return)),n.flags&32){h=n.stateNode;try{Xn(h,"")}catch(F){ut(n,n.return,F)}}l&4&&n.stateNode!=null&&(h=n.memoizedProps,Of(n,h,a!==null?a.memoizedProps:h)),l&1024&&(Vf=!0);break;case 6:if(Ln(s,n),Un(n),l&4){if(n.stateNode===null)throw Error(i(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(F){ut(n,n.return,F)}}break;case 3:if(rd=null,h=yr,yr=td(s.containerInfo),Ln(s,n),yr=h,Un(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Jl(s.containerInfo)}catch(F){ut(n,n.return,F)}Vf&&(Vf=!1,I_(n));break;case 4:l=yr,yr=td(n.stateNode.containerInfo),Ln(s,n),Un(n),yr=l;break;case 12:Ln(s,n),Un(n);break;case 13:Ln(s,n),Un(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Hf=pn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,jf(n,l)));break;case 22:h=n.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,q=Ss,J=It;if(Ss=q||h,It=J||D,Ln(s,n),It=J,Ss=q,Un(n),l&8192)e:for(s=n.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||D||Ss||It||fa(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){D=a=s;try{if(f=D.stateNode,h)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=D.stateNode;var ee=D.memoizedProps.style,H=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;T.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(F){ut(D,D.return,F)}}}else if(s.tag===6){if(a===null){D=s;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(F){ut(D,D.return,F)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,jf(n,a))));break;case 19:Ln(s,n),Un(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,jf(n,l)));break;case 30:break;case 21:break;default:Ln(s,n),Un(n)}}function Un(n){var s=n.flags;if(s&2){try{for(var a,l=n.return;l!==null;){if(E_(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,f=kf(n);Bu(n,f,h);break;case 5:var E=a.stateNode;a.flags&32&&(Xn(E,""),a.flags&=-33);var T=kf(n);Bu(n,T,E);break;case 3:case 4:var D=a.stateNode.containerInfo,q=kf(n);Mf(n,q,D);break;default:throw Error(i(161))}}catch(J){ut(n,n.return,J)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function I_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;I_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ri(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)b_(n,s.alternate,s),s=s.sibling}function fa(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:ni(4,s,s.return),fa(s);break;case 1:Ur(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&__(s,s.return,a),fa(s);break;case 27:Fl(s.stateNode);case 26:case 5:Ur(s,s.return),fa(s);break;case 22:s.memoizedState===null&&fa(s);break;case 30:fa(s);break;default:fa(s)}n=n.sibling}}function si(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=n,f=s,E=f.flags;switch(f.tag){case 0:case 11:case 15:si(h,f,a),kl(4,f);break;case 1:if(si(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){ut(l,l.return,q)}if(l=f,h=l.updateQueue,h!==null){var T=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)ry(D[h],T)}catch(q){ut(l,l.return,q)}}a&&E&64&&y_(f),Ml(f,f.return);break;case 27:w_(f);case 26:case 5:si(h,f,a),a&&l===null&&E&4&&v_(f),Ml(f,f.return);break;case 12:si(h,f,a);break;case 13:si(h,f,a),a&&E&4&&x_(h,f);break;case 22:f.memoizedState===null&&si(h,f,a),Ml(f,f.return);break;case 30:break;default:si(h,f,a)}s=s.sibling}}function Lf(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&El(a))}function Uf(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&El(n))}function zr(n,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)C_(n,s,a,l),s=s.sibling}function C_(n,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:zr(n,s,a,l),h&2048&&kl(9,s);break;case 1:zr(n,s,a,l);break;case 3:zr(n,s,a,l),h&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&El(n)));break;case 12:if(h&2048){zr(n,s,a,l),n=s.stateNode;try{var f=s.memoizedProps,E=f.id,T=f.onPostCommit;typeof T=="function"&&T(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){ut(s,s.return,D)}}else zr(n,s,a,l);break;case 13:zr(n,s,a,l);break;case 23:break;case 22:f=s.stateNode,E=s.alternate,s.memoizedState!==null?f._visibility&2?zr(n,s,a,l):Vl(n,s):f._visibility&2?zr(n,s,a,l):(f._visibility|=2,lo(n,s,a,l,(s.subtreeFlags&10256)!==0)),h&2048&&Lf(E,s);break;case 24:zr(n,s,a,l),h&2048&&Uf(s.alternate,s);break;default:zr(n,s,a,l)}}function lo(n,s,a,l,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var f=n,E=s,T=a,D=l,q=E.flags;switch(E.tag){case 0:case 11:case 15:lo(f,E,T,D,h),kl(8,E);break;case 23:break;case 22:var J=E.stateNode;E.memoizedState!==null?J._visibility&2?lo(f,E,T,D,h):Vl(f,E):(J._visibility|=2,lo(f,E,T,D,h)),h&&q&2048&&Lf(E.alternate,E);break;case 24:lo(f,E,T,D,h),h&&q&2048&&Uf(E.alternate,E);break;default:lo(f,E,T,D,h)}s=s.sibling}}function Vl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,l=s,h=l.flags;switch(l.tag){case 22:Vl(a,l),h&2048&&Lf(l.alternate,l);break;case 24:Vl(a,l),h&2048&&Uf(l.alternate,l);break;default:Vl(a,l)}s=s.sibling}}var jl=8192;function co(n){if(n.subtreeFlags&jl)for(n=n.child;n!==null;)N_(n),n=n.sibling}function N_(n){switch(n.tag){case 26:co(n),n.flags&jl&&n.memoizedState!==null&&lA(yr,n.memoizedState,n.memoizedProps);break;case 5:co(n);break;case 3:case 4:var s=yr;yr=td(n.stateNode.containerInfo),co(n),yr=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=jl,jl=16777216,co(n),jl=s):co(n));break;default:co(n)}}function D_(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ll(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Kt=l,O_(l,n)}D_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)P_(n),n=n.sibling}function P_(n){switch(n.tag){case 0:case 11:case 15:Ll(n),n.flags&2048&&ni(9,n,n.return);break;case 3:Ll(n);break;case 12:Ll(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Hu(n)):Ll(n);break;default:Ll(n)}}function Hu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Kt=l,O_(l,n)}D_(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:ni(8,s,s.return),Hu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Hu(s));break;default:Hu(s)}n=n.sibling}}function O_(n,s){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:ni(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:El(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Kt=l;else e:for(a=n;Kt!==null;){l=Kt;var h=l.sibling,f=l.return;if(S_(l),l===a){Kt=null;break e}if(h!==null){h.return=f,Kt=h;break e}Kt=f}}}var SS={getCacheForType:function(n){var s=ln(zt),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a}},AS=typeof WeakMap=="function"?WeakMap:Map,rt=0,ht=null,Le=null,Qe=0,st=0,zn=null,ii=!1,uo=!1,zf=!1,xs=0,bt=0,ai=0,ma=0,qf=0,sr=0,ho=0,Ul=null,Cn=null,Bf=!1,Hf=0,Fu=1/0,Gu=null,oi=null,nn=0,li=null,fo=null,mo=0,Ff=0,Gf=null,k_=null,zl=0,Qf=null;function qn(){if((rt&2)!==0&&Qe!==0)return Qe&-Qe;if(K.T!==null){var n=eo;return n!==0?n:Zf()}return xr()}function M_(){sr===0&&(sr=(Qe&536870912)===0||et?Li():536870912);var n=rr.current;return n!==null&&(n.flags|=32),sr}function Bn(n,s,a){(n===ht&&(st===2||st===9)||n.cancelPendingCommit!==null)&&(go(n,0),ci(n,Qe,sr,!1)),hr(n,a),((rt&2)===0||n!==ht)&&(n===ht&&((rt&2)===0&&(ma|=a),bt===4&&ci(n,Qe,sr,!1)),qr(n))}function V_(n,s,a){if((rt&6)!==0)throw Error(i(327));var l=!a&&(s&124)===0&&(s&n.expiredLanes)===0||is(n,s),h=l?IS(n,s):Xf(n,s,!0),f=l;do{if(h===0){uo&&!l&&ci(n,s,0,!1);break}else{if(a=n.current.alternate,f&&!xS(a)){h=Xf(n,s,!1),f=!1;continue}if(h===2){if(f=s,n.errorRecoveryDisabledLanes&f)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var T=n;h=Ul;var D=T.current.memoizedState.isDehydrated;if(D&&(go(T,E).flags|=256),E=Xf(T,E,!1),E!==2){if(zf&&!D){T.errorRecoveryDisabledLanes|=f,ma|=f,h=4;break e}f=Cn,Cn=h,f!==null&&(Cn===null?Cn=f:Cn.push.apply(Cn,f))}h=E}if(f=!1,h!==2)continue}}if(h===1){go(n,0),ci(n,s,0,!0);break}e:{switch(l=n,f=h,f){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ci(l,s,sr,!ii);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=Hf+300-pn(),10<h)){if(ci(l,s,sr,!ii),Hs(l,0,!0)!==0)break e;l.timeoutHandle=d0(j_.bind(null,l,a,Cn,Gu,Bf,s,sr,ma,ho,ii,f,2,-0,0),h);break e}j_(l,a,Cn,Gu,Bf,s,sr,ma,ho,ii,f,0,-0,0)}}break}while(!0);qr(n)}function j_(n,s,a,l,h,f,E,T,D,q,J,ee,H,F){if(n.timeoutHandle=-1,ee=s.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(Kl={stylesheets:null,count:0,unsuspend:oA},N_(s),ee=cA(),ee!==null)){n.cancelPendingCommit=ee(F_.bind(null,n,s,f,a,l,h,E,T,D,J,1,H,F)),ci(n,f,E,!q);return}F_(n,s,f,a,l,h,E,T,D)}function xS(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!Vn(f(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ci(n,s,a,l){s&=~qf,s&=~ma,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var h=s;0<h;){var f=31-Ht(h),E=1<<f;l[f]=-1,h&=~E}a!==0&&Yn(n,a,s)}function Qu(){return(rt&6)===0?(ql(0),!1):!0}function Kf(){if(Le!==null){if(st===0)var n=Le.return;else n=Le,_s=la=null,uf(n),ao=null,Dl=0,n=Le;for(;n!==null;)p_(n.alternate,n),n=n.return;Le=null}}function go(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,FS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Kf(),ht=n,Le=a=gs(n.current,null),Qe=s,st=0,zn=null,ii=!1,uo=is(n,s),zf=!1,ho=sr=qf=ma=ai=bt=0,Cn=Ul=null,Bf=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var h=31-Ht(l),f=1<<h;s|=n[h],l&=~f}return xs=s,mu(),a}function L_(n,s){Me=null,K.H=Ou,s===Tl||s===bu?(s=ty(),st=3):s===Jp?(s=ty(),st=4):st=s===n_?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,zn=s,Le===null&&(bt=1,Lu(n,Zn(s,n.current)))}function U_(){var n=K.H;return K.H=Ou,n===null?Ou:n}function z_(){var n=K.A;return K.A=SS,n}function Yf(){bt=4,ii||(Qe&4194048)!==Qe&&rr.current!==null||(uo=!0),(ai&134217727)===0&&(ma&134217727)===0||ht===null||ci(ht,Qe,sr,!1)}function Xf(n,s,a){var l=rt;rt|=2;var h=U_(),f=z_();(ht!==n||Qe!==s)&&(Gu=null,go(n,s)),s=!1;var E=bt;e:do try{if(st!==0&&Le!==null){var T=Le,D=zn;switch(st){case 8:Kf(),E=6;break e;case 3:case 2:case 9:case 6:rr.current===null&&(s=!0);var q=st;if(st=0,zn=null,po(n,T,D,q),a&&uo){E=0;break e}break;default:q=st,st=0,zn=null,po(n,T,D,q)}}RS(),E=bt;break}catch(J){L_(n,J)}while(!0);return s&&n.shellSuspendCounter++,_s=la=null,rt=l,K.H=h,K.A=f,Le===null&&(ht=null,Qe=0,mu()),E}function RS(){for(;Le!==null;)q_(Le)}function IS(n,s){var a=rt;rt|=2;var l=U_(),h=z_();ht!==n||Qe!==s?(Gu=null,Fu=pn()+500,go(n,s)):uo=is(n,s);e:do try{if(st!==0&&Le!==null){s=Le;var f=zn;t:switch(st){case 1:st=0,zn=null,po(n,s,f,1);break;case 2:case 9:if(Zp(f)){st=0,zn=null,B_(s);break}s=function(){st!==2&&st!==9||ht!==n||(st=7),qr(n)},f.then(s,s);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:Zp(f)?(st=0,zn=null,B_(s)):(st=0,zn=null,po(n,s,f,7));break;case 5:var E=null;switch(Le.tag){case 26:E=Le.memoizedState;case 5:case 27:var T=Le;if(!E||b0(E)){st=0,zn=null;var D=T.sibling;if(D!==null)Le=D;else{var q=T.return;q!==null?(Le=q,Ku(q)):Le=null}break t}}st=0,zn=null,po(n,s,f,5);break;case 6:st=0,zn=null,po(n,s,f,6);break;case 8:Kf(),bt=6;break e;default:throw Error(i(462))}}CS();break}catch(J){L_(n,J)}while(!0);return _s=la=null,K.H=l,K.A=h,rt=a,Le!==null?0:(ht=null,Qe=0,mu(),bt)}function CS(){for(;Le!==null&&!Ia();)q_(Le)}function q_(n){var s=m_(n.alternate,n,xs);n.memoizedProps=n.pendingProps,s===null?Ku(n):Le=s}function B_(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=l_(a,s,s.pendingProps,s.type,void 0,Qe);break;case 11:s=l_(a,s,s.pendingProps,s.type.render,s.ref,Qe);break;case 5:uf(s);default:p_(a,s),s=Le=Hp(s,xs),s=m_(a,s,xs)}n.memoizedProps=n.pendingProps,s===null?Ku(n):Le=s}function po(n,s,a,l){_s=la=null,uf(s),ao=null,Dl=0;var h=s.return;try{if(_S(n,h,s,a,Qe)){bt=1,Lu(n,Zn(a,n.current)),Le=null;return}}catch(f){if(h!==null)throw Le=h,f;bt=1,Lu(n,Zn(a,n.current)),Le=null;return}s.flags&32768?(et||l===1?n=!0:uo||(Qe&536870912)!==0?n=!1:(ii=n=!0,(l===2||l===9||l===3||l===6)&&(l=rr.current,l!==null&&l.tag===13&&(l.flags|=16384))),H_(s,n)):Ku(s)}function Ku(n){var s=n;do{if((s.flags&32768)!==0){H_(s,ii);return}n=s.return;var a=ES(s.alternate,s,xs);if(a!==null){Le=a;return}if(s=s.sibling,s!==null){Le=s;return}Le=s=n}while(s!==null);bt===0&&(bt=5)}function H_(n,s){do{var a=wS(n.alternate,n);if(a!==null){a.flags&=32767,Le=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){Le=n;return}Le=n=a}while(n!==null);bt=6,Le=null}function F_(n,s,a,l,h,f,E,T,D){n.cancelPendingCommit=null;do Yu();while(nn!==0);if((rt&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(f=s.lanes|s.childLanes,f|=Lh,fr(n,a,f,E,T,D),n===ht&&(Le=ht=null,Qe=0),fo=s,li=n,mo=a,Ff=f,Gf=h,k_=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,OS(ts,function(){return X_(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=re.p,re.p=2,E=rt,rt|=4;try{TS(n,s,a)}finally{rt=E,re.p=h,K.T=l}}nn=1,G_(),Q_(),K_()}}function G_(){if(nn===1){nn=0;var n=li,s=fo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=re.p;re.p=2;var h=rt;rt|=4;try{R_(s,n);var f=om,E=Op(n.containerInfo),T=f.focusedElem,D=f.selectionRange;if(E!==T&&T&&T.ownerDocument&&Pp(T.ownerDocument.documentElement,T)){if(D!==null&&Oh(T)){var q=D.start,J=D.end;if(J===void 0&&(J=q),"selectionStart"in T)T.selectionStart=q,T.selectionEnd=Math.min(J,T.value.length);else{var ee=T.ownerDocument||document,H=ee&&ee.defaultView||window;if(H.getSelection){var F=H.getSelection(),Ne=T.textContent.length,Te=Math.min(D.start,Ne),lt=D.end===void 0?Te:Math.min(D.end,Ne);!F.extend&&Te>lt&&(E=lt,lt=Te,Te=E);var L=Dp(T,Te),M=Dp(T,lt);if(L&&M&&(F.rangeCount!==1||F.anchorNode!==L.node||F.anchorOffset!==L.offset||F.focusNode!==M.node||F.focusOffset!==M.offset)){var z=ee.createRange();z.setStart(L.node,L.offset),F.removeAllRanges(),Te>lt?(F.addRange(z),F.extend(M.node,M.offset)):(z.setEnd(M.node,M.offset),F.addRange(z))}}}}for(ee=[],F=T;F=F.parentNode;)F.nodeType===1&&ee.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ee.length;T++){var Z=ee[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}ad=!!am,om=am=null}finally{rt=h,re.p=l,K.T=a}}n.current=s,nn=2}}function Q_(){if(nn===2){nn=0;var n=li,s=fo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=re.p;re.p=2;var h=rt;rt|=4;try{b_(n,s.alternate,s)}finally{rt=h,re.p=l,K.T=a}}nn=3}}function K_(){if(nn===4||nn===3){nn=0,Wo();var n=li,s=fo,a=mo,l=k_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?nn=5:(nn=0,fo=li=null,Y_(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(oi=null),Gs(a),s=s.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(ft,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=K.T,h=re.p,re.p=2,K.T=null;try{for(var f=n.onRecoverableError,E=0;E<l.length;E++){var T=l[E];f(T.value,{componentStack:T.stack})}}finally{K.T=s,re.p=h}}(mo&3)!==0&&Yu(),qr(n),h=n.pendingLanes,(a&4194090)!==0&&(h&42)!==0?n===Qf?zl++:(zl=0,Qf=n):zl=0,ql(0)}}function Y_(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,El(s)))}function Yu(n){return G_(),Q_(),K_(),X_()}function X_(){if(nn!==5)return!1;var n=li,s=Ff;Ff=0;var a=Gs(mo),l=K.T,h=re.p;try{re.p=32>a?32:a,K.T=null,a=Gf,Gf=null;var f=li,E=mo;if(nn=0,fo=li=null,mo=0,(rt&6)!==0)throw Error(i(331));var T=rt;if(rt|=4,P_(f.current),C_(f,f.current,E,a),rt=T,ql(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(ft,f)}catch{}return!0}finally{re.p=h,K.T=l,Y_(n,s)}}function $_(n,s,a){s=Zn(a,s),s=Sf(n.stateNode,s,2),n=Js(n,s,2),n!==null&&(hr(n,2),qr(n))}function ut(n,s,a){if(n.tag===3)$_(n,n,a);else for(;s!==null;){if(s.tag===3){$_(s,n,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(oi===null||!oi.has(l))){n=Zn(a,n),a=e_(2),l=Js(s,a,2),l!==null&&(t_(a,l,s,n),hr(l,2),qr(l));break}}s=s.return}}function $f(n,s,a){var l=n.pingCache;if(l===null){l=n.pingCache=new AS;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(zf=!0,h.add(a),n=NS.bind(null,n,s,a),s.then(n,n))}function NS(n,s,a){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ht===n&&(Qe&a)===a&&(bt===4||bt===3&&(Qe&62914560)===Qe&&300>pn()-Hf?(rt&2)===0&&go(n,0):qf|=a,ho===Qe&&(ho=0)),qr(n)}function W_(n,s){s===0&&(s=Ui()),n=$a(n,s),n!==null&&(hr(n,s),qr(n))}function DS(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),W_(n,a)}function PS(n,s){var a=0;switch(n.tag){case 13:var l=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),W_(n,a)}function OS(n,s){return es(n,s)}var Xu=null,yo=null,Wf=!1,$u=!1,Jf=!1,ga=0;function qr(n){n!==yo&&n.next===null&&(yo===null?Xu=yo=n:yo=yo.next=n),$u=!0,Wf||(Wf=!0,MS())}function ql(n,s){if(!Jf&&$u){Jf=!0;do for(var a=!1,l=Xu;l!==null;){if(n!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var E=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-Ht(42|n)+1)-1,f&=h&~(E&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,t0(l,f))}else f=Qe,f=Hs(l,l===ht?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||is(l,f)||(a=!0,t0(l,f));l=l.next}while(a);Jf=!1}}function kS(){J_()}function J_(){$u=Wf=!1;var n=0;ga!==0&&(HS()&&(n=ga),ga=0);for(var s=pn(),a=null,l=Xu;l!==null;){var h=l.next,f=Z_(l,s);f===0?(l.next=null,a===null?Xu=h:a.next=h,h===null&&(yo=a)):(a=l,(n!==0||(f&3)!==0)&&($u=!0)),l=h}ql(n)}function Z_(n,s){for(var a=n.suspendedLanes,l=n.pingedLanes,h=n.expirationTimes,f=n.pendingLanes&-62914561;0<f;){var E=31-Ht(f),T=1<<E,D=h[E];D===-1?((T&a)===0||(T&l)!==0)&&(h[E]=Fs(T,s)):D<=s&&(n.expiredLanes|=T),f&=~T}if(s=ht,a=Qe,a=Hs(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===s&&(st===2||st===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Sr(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||is(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(l!==null&&Sr(l),Gs(a)){case 2:case 8:a=zs;break;case 32:a=ts;break;case 268435456:a=qs;break;default:a=ts}return l=e0.bind(null,n),a=es(a,l),n.callbackPriority=s,n.callbackNode=a,s}return l!==null&&l!==null&&Sr(l),n.callbackPriority=2,n.callbackNode=null,2}function e0(n,s){if(nn!==0&&nn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Yu()&&n.callbackNode!==a)return null;var l=Qe;return l=Hs(n,n===ht?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(V_(n,l,s),Z_(n,pn()),n.callbackNode!=null&&n.callbackNode===a?e0.bind(null,n):null)}function t0(n,s){if(Yu())return null;V_(n,s,!0)}function MS(){GS(function(){(rt&6)!==0?es(dr,kS):J_()})}function Zf(){return ga===0&&(ga=Li()),ga}function n0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:La(""+n)}function r0(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function VS(n,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var f=n0((h[wt]||null).action),E=l.submitter;E&&(s=(s=E[wt]||null)?n0(s.formAction):E.getAttribute("formAction"),s!==null&&(f=s,E=null));var T=new Ua("action","action",null,l,h);n.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ga!==0){var D=E?r0(h,E):new FormData(h);vf(a,{pending:!0,data:D,method:h.method,action:f},null,D)}}else typeof f=="function"&&(T.preventDefault(),D=E?r0(h,E):new FormData(h),vf(a,{pending:!0,data:D,method:h.method,action:f},f,D))},currentTarget:h}]})}}for(var em=0;em<jh.length;em++){var tm=jh[em],jS=tm.toLowerCase(),LS=tm[0].toUpperCase()+tm.slice(1);pr(jS,"on"+LS)}pr(Vp,"onAnimationEnd"),pr(jp,"onAnimationIteration"),pr(Lp,"onAnimationStart"),pr("dblclick","onDoubleClick"),pr("focusin","onFocus"),pr("focusout","onBlur"),pr(tS,"onTransitionRun"),pr(nS,"onTransitionStart"),pr(rS,"onTransitionCancel"),pr(Up,"onTransitionEnd"),as("onMouseEnter",["mouseout","mouseover"]),as("onMouseLeave",["mouseout","mouseover"]),as("onPointerEnter",["pointerout","pointerover"]),as("onPointerLeave",["pointerout","pointerover"]),mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mr("onBeforeInput",["compositionend","keypress","textInput","paste"]),mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),US=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bl));function s0(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],h=l.event;l=l.listeners;e:{var f=void 0;if(s)for(var E=l.length-1;0<=E;E--){var T=l[E],D=T.instance,q=T.currentTarget;if(T=T.listener,D!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=q;try{f(h)}catch(J){ju(J)}h.currentTarget=null,f=D}else for(E=0;E<l.length;E++){if(T=l[E],D=T.instance,q=T.currentTarget,T=T.listener,D!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=q;try{f(h)}catch(J){ju(J)}h.currentTarget=null,f=D}}}}function Ue(n,s){var a=s[qi];a===void 0&&(a=s[qi]=new Set);var l=n+"__bubble";a.has(l)||(i0(s,n,2,!1),a.add(l))}function nm(n,s,a){var l=0;s&&(l|=4),i0(a,n,l,s)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function rm(n){if(!n[Wu]){n[Wu]=!0,el.forEach(function(a){a!=="selectionchange"&&(US.has(a)||nm(a,!1,n),nm(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Wu]||(s[Wu]=!0,nm("selectionchange",!1,s))}}function i0(n,s,a,l){switch(C0(s)){case 2:var h=hA;break;case 8:h=fA;break;default:h=ym}a=h.bind(null,s,a,n),h=void 0,!Wn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?n.addEventListener(s,a,{capture:!0,passive:h}):n.addEventListener(s,a,!0):h!==void 0?n.addEventListener(s,a,{passive:h}):n.addEventListener(s,a,!1)}function sm(n,s,a,l,h){var f=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var T=l.stateNode.containerInfo;if(T===h)break;if(E===4)for(E=l.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;T!==null;){if(E=vn(T),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){l=f=E;continue e}T=T.parentNode}}l=l.return}Zc(function(){var q=f,J=$n(a),ee=[];e:{var H=zp.get(n);if(H!==void 0){var F=Ua,Ne=n;switch(n){case"keypress":if(Pr(a)===0)break e;case"keydown":case"keyup":F=Ga;break;case"focusin":Ne="focus",F=Ba;break;case"focusout":Ne="blur",F=Ba;break;case"beforeblur":case"afterblur":F=Ba;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Jn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Ch;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=ou;break;case Vp:case jp:case Lp:F=Ha;break;case Up:F=cu;break;case"scroll":case"scrollend":F=eu;break;case"wheel":F=Qa;break;case"copy":case"cut":case"paste":F=Fa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=hl;break;case"toggle":case"beforetoggle":F=du}var Te=(s&4)!==0,lt=!Te&&(n==="scroll"||n==="scrollend"),L=Te?H!==null?H+"Capture":null:H;Te=[];for(var M=q,z;M!==null;){var Z=M;if(z=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||z===null||L===null||(Z=Yi(M,L),Z!=null&&Te.push(Hl(M,Z,z))),lt)break;M=M.return}0<Te.length&&(H=new F(H,Ne,null,a,J),ee.push({event:H,listeners:Te}))}}if((s&7)===0){e:{if(H=n==="mouseover"||n==="pointerover",F=n==="mouseout"||n==="pointerout",H&&a!==cs&&(Ne=a.relatedTarget||a.fromElement)&&(vn(Ne)||Ne[An]))break e;if((F||H)&&(H=J.window===J?J:(H=J.ownerDocument)?H.defaultView||H.parentWindow:window,F?(Ne=a.relatedTarget||a.toElement,F=q,Ne=Ne?vn(Ne):null,Ne!==null&&(lt=c(Ne),Te=Ne.tag,Ne!==lt||Te!==5&&Te!==27&&Te!==6)&&(Ne=null)):(F=null,Ne=q),F!==Ne)){if(Te=Jn,Z="onMouseLeave",L="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(Te=hl,Z="onPointerLeave",L="onPointerEnter",M="pointer"),lt=F==null?H:Ir(F),z=Ne==null?H:Ir(Ne),H=new Te(Z,M+"leave",F,a,J),H.target=lt,H.relatedTarget=z,Z=null,vn(J)===q&&(Te=new Te(L,M+"enter",Ne,a,J),Te.target=z,Te.relatedTarget=lt,Z=Te),lt=Z,F&&Ne)t:{for(Te=F,L=Ne,M=0,z=Te;z;z=_o(z))M++;for(z=0,Z=L;Z;Z=_o(Z))z++;for(;0<M-z;)Te=_o(Te),M--;for(;0<z-M;)L=_o(L),z--;for(;M--;){if(Te===L||L!==null&&Te===L.alternate)break t;Te=_o(Te),L=_o(L)}Te=null}else Te=null;F!==null&&a0(ee,H,F,Te,!1),Ne!==null&&lt!==null&&a0(ee,lt,Ne,Te,!0)}}e:{if(H=q?Ir(q):window,F=H.nodeName&&H.nodeName.toLowerCase(),F==="select"||F==="input"&&H.type==="file")var pe=Ap;else if(Ut(H))if(xp)pe=Jb;else{pe=$b;var je=Xb}else F=H.nodeName,!F||F.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?q&&il(q.elementType)&&(pe=Ap):pe=Wb;if(pe&&(pe=pe(n,q))){ms(ee,pe,a,J);break e}je&&je(n,H,q),n==="focusout"&&q&&H.type==="number"&&q.memoizedProps.value!=null&&Ks(H,"number",H.value)}switch(je=q?Ir(q):window,n){case"focusin":(Ut(je)||je.contentEditable==="true")&&(Ka=je,kh=q,gl=null);break;case"focusout":gl=kh=Ka=null;break;case"mousedown":Mh=!0;break;case"contextmenu":case"mouseup":case"dragend":Mh=!1,kp(ee,a,J);break;case"selectionchange":if(eS)break;case"keydown":case"keyup":kp(ee,a,J)}var _e;if(Mr)e:{switch(n){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Fe?Y(n,a)&&(Ae="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(v&&a.locale!=="ko"&&(Fe||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Fe&&(_e=ol()):(Dr=J,Ys="value"in Dr?Dr.value:Dr.textContent,Fe=!0)),je=Ju(q,Ae),0<je.length&&(Ae=new ul(Ae,n,null,a,J),ee.push({event:Ae,listeners:je}),_e?Ae.data=_e:(_e=le(a),_e!==null&&(Ae.data=_e)))),(_e=y?Lt(n,a):Ge(n,a))&&(Ae=Ju(q,"onBeforeInput"),0<Ae.length&&(je=new ul("onBeforeInput","beforeinput",null,a,J),ee.push({event:je,listeners:Ae}),je.data=_e)),VS(ee,n,q,a,J)}s0(ee,s)})}function Hl(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Ju(n,s){for(var a=s+"Capture",l=[];n!==null;){var h=n,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Yi(n,a),h!=null&&l.unshift(Hl(n,h,f)),h=Yi(n,s),h!=null&&l.push(Hl(n,h,f))),n.tag===3)return l;n=n.return}return[]}function _o(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function a0(n,s,a,l,h){for(var f=s._reactName,E=[];a!==null&&a!==l;){var T=a,D=T.alternate,q=T.stateNode;if(T=T.tag,D!==null&&D===l)break;T!==5&&T!==26&&T!==27||q===null||(D=q,h?(q=Yi(a,f),q!=null&&E.unshift(Hl(a,q,D))):h||(q=Yi(a,f),q!=null&&E.push(Hl(a,q,D)))),a=a.return}E.length!==0&&n.push({event:s,listeners:E})}var zS=/\r\n?/g,qS=/\u0000|\uFFFD/g;function o0(n){return(typeof n=="string"?n:""+n).replace(zS,`
`).replace(qS,"")}function l0(n,s){return s=o0(s),o0(n)===s}function Zu(){}function ot(n,s,a,l,h,f){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Xn(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Xn(n,""+l);break;case"className":Cr(n,"class",l);break;case"tabIndex":Cr(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Cr(n,a,l);break;case"style":sl(n,l,f);break;case"data":if(s!=="object"){Cr(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=La(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(s!=="input"&&ot(n,s,"name",h.name,h,null),ot(n,s,"formEncType",h.formEncType,h,null),ot(n,s,"formMethod",h.formMethod,h,null),ot(n,s,"formTarget",h.formTarget,h,null)):(ot(n,s,"encType",h.encType,h,null),ot(n,s,"method",h.method,h,null),ot(n,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=La(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Zu);break;case"onScroll":l!=null&&Ue("scroll",n);break;case"onScrollEnd":l!=null&&Ue("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=La(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ue("beforetoggle",n),Ue("toggle",n),Qs(n,"popover",l);break;case"xlinkActuate":Zt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Zt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Zt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Zt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Zt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Zt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Zt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Zt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Zt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Qs(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Rh.get(a)||a,Qs(n,a,l))}}function im(n,s,a,l,h,f){switch(a){case"style":sl(n,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Xn(n,l):(typeof l=="number"||typeof l=="bigint")&&Xn(n,""+l);break;case"onScroll":l!=null&&Ue("scroll",n);break;case"onScrollEnd":l!=null&&Ue("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),f=n[wt]||null,f=f!=null?f[a]:null,typeof f=="function"&&n.removeEventListener(s,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,l,h);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Qs(n,a,l)}}}function rn(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",n),Ue("load",n);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var E=a[f];if(E!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ot(n,s,f,E,a,null)}}h&&ot(n,s,"srcSet",a.srcSet,a,null),l&&ot(n,s,"src",a.src,a,null);return;case"input":Ue("invalid",n);var T=f=E=h=null,D=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":h=J;break;case"type":E=J;break;case"checked":D=J;break;case"defaultChecked":q=J;break;case"value":f=J;break;case"defaultValue":T=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:ot(n,s,l,J,a,null)}}Gi(n,f,T,D,q,E,h,!1),ja(n);return;case"select":Ue("invalid",n),l=E=f=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":E=T;break;case"multiple":l=T;default:ot(n,s,h,T,a,null)}s=f,a=E,n.multiple=!!l,s!=null?ls(n,!!l,s,!1):a!=null&&ls(n,!!l,a,!0);return;case"textarea":Ue("invalid",n),f=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(T=a[E],T!=null))switch(E){case"value":l=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:ot(n,s,E,T,a,null)}Qi(n,l,h,f),ja(n);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ot(n,s,D,l,a,null)}return;case"dialog":Ue("beforetoggle",n),Ue("toggle",n),Ue("cancel",n),Ue("close",n);break;case"iframe":case"object":Ue("load",n);break;case"video":case"audio":for(l=0;l<Bl.length;l++)Ue(Bl[l],n);break;case"image":Ue("error",n),Ue("load",n);break;case"details":Ue("toggle",n);break;case"embed":case"source":case"link":Ue("error",n),Ue("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ot(n,s,q,l,a,null)}return;default:if(il(s)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&im(n,s,J,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&ot(n,s,T,l,a,null))}function BS(n,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,E=null,T=null,D=null,q=null,J=null;for(F in a){var ee=a[F];if(a.hasOwnProperty(F)&&ee!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":D=ee;default:l.hasOwnProperty(F)||ot(n,s,F,null,l,ee)}}for(var H in l){var F=l[H];if(ee=a[H],l.hasOwnProperty(H)&&(F!=null||ee!=null))switch(H){case"type":f=F;break;case"name":h=F;break;case"checked":q=F;break;case"defaultChecked":J=F;break;case"value":E=F;break;case"defaultValue":T=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,s));break;default:F!==ee&&ot(n,s,H,F,l,ee)}}Mn(n,E,T,D,q,J,f,h);return;case"select":F=E=T=H=null;for(f in a)if(D=a[f],a.hasOwnProperty(f)&&D!=null)switch(f){case"value":break;case"multiple":F=D;default:l.hasOwnProperty(f)||ot(n,s,f,null,l,D)}for(h in l)if(f=l[h],D=a[h],l.hasOwnProperty(h)&&(f!=null||D!=null))switch(h){case"value":H=f;break;case"defaultValue":T=f;break;case"multiple":E=f;default:f!==D&&ot(n,s,h,f,l,D)}s=T,a=E,l=F,H!=null?ls(n,!!a,H,!1):!!l!=!!a&&(s!=null?ls(n,!!a,s,!0):ls(n,!!a,a?[]:"",!1));return;case"textarea":F=H=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ot(n,s,T,null,l,h)}for(E in l)if(h=l[E],f=a[E],l.hasOwnProperty(E)&&(h!=null||f!=null))switch(E){case"value":H=h;break;case"defaultValue":F=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==f&&ot(n,s,E,h,l,f)}it(n,H,F);return;case"option":for(var Ne in a)if(H=a[Ne],a.hasOwnProperty(Ne)&&H!=null&&!l.hasOwnProperty(Ne))switch(Ne){case"selected":n.selected=!1;break;default:ot(n,s,Ne,null,l,H)}for(D in l)if(H=l[D],F=a[D],l.hasOwnProperty(D)&&H!==F&&(H!=null||F!=null))switch(D){case"selected":n.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:ot(n,s,D,H,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)H=a[Te],a.hasOwnProperty(Te)&&H!=null&&!l.hasOwnProperty(Te)&&ot(n,s,Te,null,l,H);for(q in l)if(H=l[q],F=a[q],l.hasOwnProperty(q)&&H!==F&&(H!=null||F!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,s));break;default:ot(n,s,q,H,l,F)}return;default:if(il(s)){for(var lt in a)H=a[lt],a.hasOwnProperty(lt)&&H!==void 0&&!l.hasOwnProperty(lt)&&im(n,s,lt,void 0,l,H);for(J in l)H=l[J],F=a[J],!l.hasOwnProperty(J)||H===F||H===void 0&&F===void 0||im(n,s,J,H,l,F);return}}for(var L in a)H=a[L],a.hasOwnProperty(L)&&H!=null&&!l.hasOwnProperty(L)&&ot(n,s,L,null,l,H);for(ee in l)H=l[ee],F=a[ee],!l.hasOwnProperty(ee)||H===F||H==null&&F==null||ot(n,s,ee,H,l,F)}var am=null,om=null;function ed(n){return n.nodeType===9?n:n.ownerDocument}function c0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function u0(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function lm(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var cm=null;function HS(){var n=window.event;return n&&n.type==="popstate"?n===cm?!1:(cm=n,!0):(cm=null,!1)}var d0=typeof setTimeout=="function"?setTimeout:void 0,FS=typeof clearTimeout=="function"?clearTimeout:void 0,h0=typeof Promise=="function"?Promise:void 0,GS=typeof queueMicrotask=="function"?queueMicrotask:typeof h0<"u"?function(n){return h0.resolve(null).then(n).catch(QS)}:d0;function QS(n){setTimeout(function(){throw n})}function ui(n){return n==="head"}function f0(n,s){var a=s,l=0,h=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var E=n.ownerDocument;if(a&1&&Fl(E.documentElement),a&2&&Fl(E.body),a&4)for(a=E.head,Fl(a),E=a.firstChild;E;){var T=E.nextSibling,D=E.nodeName;E[xn]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=T}}if(h===0){n.removeChild(f),Jl(s);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Jl(s)}function um(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":um(a),_n(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function KS(n,s,a,l){for(;n.nodeType===1;){var h=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[xn])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(f=n.getAttribute("rel"),f==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(f!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(f=n.getAttribute("src"),(f!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===f)return n}else return n;if(n=_r(n.nextSibling),n===null)break}return null}function YS(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=_r(n.nextSibling),n===null))return null;return n}function dm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function XS(n,s){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function _r(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var hm=null;function m0(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}function g0(n,s,a){switch(s=ed(a),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Fl(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);_n(n)}var ir=new Map,p0=new Set;function td(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Rs=re.d;re.d={f:$S,r:WS,D:JS,C:ZS,L:eA,m:tA,X:rA,S:nA,M:sA};function $S(){var n=Rs.f(),s=Qu();return n||s}function WS(n){var s=Rr(n);s!==null&&s.tag===5&&s.type==="form"?Vy(s):Rs.r(n)}var vo=typeof document>"u"?null:document;function y0(n,s,a){var l=vo;if(l&&typeof s=="string"&&s){var h=Pt(s);h='link[rel="'+n+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),p0.has(h)||(p0.add(h),n={rel:n,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),rn(s,"link",n),xt(s),l.head.appendChild(s)))}}function JS(n){Rs.D(n),y0("dns-prefetch",n,null)}function ZS(n,s){Rs.C(n,s),y0("preconnect",n,s)}function eA(n,s,a){Rs.L(n,s,a);var l=vo;if(l&&n&&s){var h='link[rel="preload"][as="'+Pt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Pt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Pt(a.imageSizes)+'"]')):h+='[href="'+Pt(n)+'"]';var f=h;switch(s){case"style":f=Eo(n);break;case"script":f=wo(n)}ir.has(f)||(n=w({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),ir.set(f,n),l.querySelector(h)!==null||s==="style"&&l.querySelector(Gl(f))||s==="script"&&l.querySelector(Ql(f))||(s=l.createElement("link"),rn(s,"link",n),xt(s),l.head.appendChild(s)))}}function tA(n,s){Rs.m(n,s);var a=vo;if(a&&n){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Pt(l)+'"][href="'+Pt(n)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=wo(n)}if(!ir.has(f)&&(n=w({rel:"modulepreload",href:n},s),ir.set(f,n),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ql(f)))return}l=a.createElement("link"),rn(l,"link",n),xt(l),a.head.appendChild(l)}}}function nA(n,s,a){Rs.S(n,s,a);var l=vo;if(l&&n){var h=En(l).hoistableStyles,f=Eo(n);s=s||"default";var E=h.get(f);if(!E){var T={loading:0,preload:null};if(E=l.querySelector(Gl(f)))T.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":s},a),(a=ir.get(f))&&fm(n,a);var D=E=l.createElement("link");xt(D),rn(D,"link",n),D._p=new Promise(function(q,J){D.onload=q,D.onerror=J}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,nd(E,s,l)}E={type:"stylesheet",instance:E,count:1,state:T},h.set(f,E)}}}function rA(n,s){Rs.X(n,s);var a=vo;if(a&&n){var l=En(a).hoistableScripts,h=wo(n),f=l.get(h);f||(f=a.querySelector(Ql(h)),f||(n=w({src:n,async:!0},s),(s=ir.get(h))&&mm(n,s),f=a.createElement("script"),xt(f),rn(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function sA(n,s){Rs.M(n,s);var a=vo;if(a&&n){var l=En(a).hoistableScripts,h=wo(n),f=l.get(h);f||(f=a.querySelector(Ql(h)),f||(n=w({src:n,async:!0,type:"module"},s),(s=ir.get(h))&&mm(n,s),f=a.createElement("script"),xt(f),rn(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function _0(n,s,a,l){var h=(h=Re.current)?td(h):null;if(!h)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Eo(a.href),a=En(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Eo(a.href);var f=En(h).hoistableStyles,E=f.get(n);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(n,E),(f=h.querySelector(Gl(n)))&&!f._p&&(E.instance=f,E.state.loading=5),ir.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ir.set(n,a),f||iA(h,n,a,E.state))),s&&l===null)throw Error(i(528,""));return E}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=wo(a),a=En(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Eo(n){return'href="'+Pt(n)+'"'}function Gl(n){return'link[rel="stylesheet"]['+n+"]"}function v0(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function iA(n,s,a,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),rn(s,"link",a),xt(s),n.head.appendChild(s))}function wo(n){return'[src="'+Pt(n)+'"]'}function Ql(n){return"script[async]"+n}function E0(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+Pt(a.href)+'"]');if(l)return s.instance=l,xt(l),l;var h=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),xt(l),rn(l,"style",h),nd(l,a.precedence,n),s.instance=l;case"stylesheet":h=Eo(a.href);var f=n.querySelector(Gl(h));if(f)return s.state.loading|=4,s.instance=f,xt(f),f;l=v0(a),(h=ir.get(h))&&fm(l,h),f=(n.ownerDocument||n).createElement("link"),xt(f);var E=f;return E._p=new Promise(function(T,D){E.onload=T,E.onerror=D}),rn(f,"link",l),s.state.loading|=4,nd(f,a.precedence,n),s.instance=f;case"script":return f=wo(a.src),(h=n.querySelector(Ql(f)))?(s.instance=h,xt(h),h):(l=a,(h=ir.get(f))&&(l=w({},a),mm(l,h)),n=n.ownerDocument||n,h=n.createElement("script"),xt(h),rn(h,"link",l),n.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,nd(l,a.precedence,n));return s.instance}function nd(n,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,E=0;E<l.length;E++){var T=l[E];if(T.dataset.precedence===s)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(n,f.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function fm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function mm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var rd=null;function w0(n,s,a){if(rd===null){var l=new Map,h=rd=new Map;h.set(a,l)}else h=rd,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),h=0;h<a.length;h++){var f=a[h];if(!(f[xn]||f[At]||n==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(s)||"";E=n+E;var T=l.get(E);T?T.push(f):l.set(E,[f])}}return l}function T0(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function aA(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function b0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Kl=null;function oA(){}function lA(n,s,a){if(Kl===null)throw Error(i(475));var l=Kl;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=Eo(a.href),f=n.querySelector(Gl(h));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=sd.bind(l),n.then(l,l)),s.state.loading|=4,s.instance=f,xt(f);return}f=n.ownerDocument||n,a=v0(a),(h=ir.get(h))&&fm(a,h),f=f.createElement("link"),xt(f);var E=f;E._p=new Promise(function(T,D){E.onload=T,E.onerror=D}),rn(f,"link",a),s.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=sd.bind(l),n.addEventListener("load",s),n.addEventListener("error",s))}}function cA(){if(Kl===null)throw Error(i(475));var n=Kl;return n.stylesheets&&n.count===0&&gm(n,n.stylesheets),0<n.count?function(s){var a=setTimeout(function(){if(n.stylesheets&&gm(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(a)}}:null}function sd(){if(this.count--,this.count===0){if(this.stylesheets)gm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var id=null;function gm(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,id=new Map,s.forEach(uA,n),id=null,sd.call(n))}function uA(n,s){if(!(s.state.loading&4)){var a=id.get(n);if(a)var l=a.get(null);else{a=new Map,id.set(n,a);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var E=h[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=s.instance,E=h.getAttribute("data-precedence"),f=a.get(E)||l,f===l&&a.set(null,h),a.set(E,h),this.count++,l=sd.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),s.state.loading|=4}}var Yl={$$typeof:oe,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function dA(n,s,a,l,h,f,E,T){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kn(0),this.hiddenUpdates=Kn(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function S0(n,s,a,l,h,f,E,T,D,q,J,ee){return n=new dA(n,s,a,E,T,D,q,ee),s=1,f===!0&&(s|=24),f=jn(3,null,null,s),n.current=f,f.stateNode=n,s=Xh(),s.refCount++,n.pooledCache=s,s.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:s},Zh(f),n}function A0(n){return n?(n=Wa,n):Wa}function x0(n,s,a,l,h,f){h=A0(h),l.context===null?l.context=h:l.pendingContext=h,l=Ws(s),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Js(n,l,s),a!==null&&(Bn(a,n,s),Sl(a,n,s))}function R0(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function pm(n,s){R0(n,s),(n=n.alternate)&&R0(n,s)}function I0(n){if(n.tag===13){var s=$a(n,67108864);s!==null&&Bn(s,n,67108864),pm(n,67108864)}}var ad=!0;function hA(n,s,a,l){var h=K.T;K.T=null;var f=re.p;try{re.p=2,ym(n,s,a,l)}finally{re.p=f,K.T=h}}function fA(n,s,a,l){var h=K.T;K.T=null;var f=re.p;try{re.p=8,ym(n,s,a,l)}finally{re.p=f,K.T=h}}function ym(n,s,a,l){if(ad){var h=_m(l);if(h===null)sm(n,s,l,od,a),N0(n,l);else if(gA(h,n,s,a,l))l.stopPropagation();else if(N0(n,l),s&4&&-1<mA.indexOf(n)){for(;h!==null;){var f=Rr(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=kn(f.pendingLanes);if(E!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var D=1<<31-Ht(E);T.entanglements[1]|=D,E&=~D}qr(f),(rt&6)===0&&(Fu=pn()+500,ql(0))}}break;case 13:T=$a(f,2),T!==null&&Bn(T,f,2),Qu(),pm(f,2)}if(f=_m(l),f===null&&sm(n,s,l,od,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else sm(n,s,l,null,a)}}function _m(n){return n=$n(n),vm(n)}var od=null;function vm(n){if(od=null,n=vn(n),n!==null){var s=c(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=d(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return od=n,null}function C0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ca()){case dr:return 2;case zs:return 8;case ts:case Jo:return 32;case qs:return 268435456;default:return 32}default:return 32}}var Em=!1,di=null,hi=null,fi=null,Xl=new Map,$l=new Map,mi=[],mA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function N0(n,s){switch(n){case"focusin":case"focusout":di=null;break;case"dragenter":case"dragleave":hi=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":Xl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(s.pointerId)}}function Wl(n,s,a,l,h,f){return n===null||n.nativeEvent!==f?(n={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},s!==null&&(s=Rr(s),s!==null&&I0(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),n)}function gA(n,s,a,l,h){switch(s){case"focusin":return di=Wl(di,n,s,a,l,h),!0;case"dragenter":return hi=Wl(hi,n,s,a,l,h),!0;case"mouseover":return fi=Wl(fi,n,s,a,l,h),!0;case"pointerover":var f=h.pointerId;return Xl.set(f,Wl(Xl.get(f)||null,n,s,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,$l.set(f,Wl($l.get(f)||null,n,s,a,l,h)),!0}return!1}function D0(n){var s=vn(n.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=d(a),s!==null){n.blockedOn=s,Pa(n.priority,function(){if(a.tag===13){var l=qn();l=Ar(l);var h=$a(a,l);h!==null&&Bn(h,a,l),pm(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ld(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=_m(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);cs=l,a.target.dispatchEvent(l),cs=null}else return s=Rr(a),s!==null&&I0(s),n.blockedOn=a,!1;s.shift()}return!0}function P0(n,s,a){ld(n)&&a.delete(s)}function pA(){Em=!1,di!==null&&ld(di)&&(di=null),hi!==null&&ld(hi)&&(hi=null),fi!==null&&ld(fi)&&(fi=null),Xl.forEach(P0),$l.forEach(P0)}function cd(n,s){n.blockedOn===s&&(n.blockedOn=null,Em||(Em=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,pA)))}var ud=null;function O0(n){ud!==n&&(ud=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ud===n&&(ud=null);for(var s=0;s<n.length;s+=3){var a=n[s],l=n[s+1],h=n[s+2];if(typeof l!="function"){if(vm(l||a)===null)continue;break}var f=Rr(a);f!==null&&(n.splice(s,3),s-=3,vf(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Jl(n){function s(D){return cd(D,n)}di!==null&&cd(di,n),hi!==null&&cd(hi,n),fi!==null&&cd(fi,n),Xl.forEach(s),$l.forEach(s);for(var a=0;a<mi.length;a++){var l=mi[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<mi.length&&(a=mi[0],a.blockedOn===null);)D0(a),a.blockedOn===null&&mi.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],E=h[wt]||null;if(typeof f=="function")E||O0(a);else if(E){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,E=f[wt]||null)T=E.formAction;else if(vm(h)!==null)continue}else T=E.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),O0(a)}}}function wm(n){this._internalRoot=n}dd.prototype.render=wm.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,l=qn();x0(a,l,n,s,null,null)},dd.prototype.unmount=wm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;x0(n.current,2,null,n,null,null),Qu(),s[An]=null}};function dd(n){this._internalRoot=n}dd.prototype.unstable_scheduleHydration=function(n){if(n){var s=xr();n={blockedOn:null,target:n,priority:s};for(var a=0;a<mi.length&&s!==0&&s<mi[a].priority;a++);mi.splice(a,0,n),a===0&&D0(n)}};var k0=e.version;if(k0!=="19.1.1")throw Error(i(527,k0,"19.1.1"));re.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(s),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var yA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{ft=hd.inject(yA),Ze=hd}catch{}}return ec.createRoot=function(n,s){if(!o(n))throw Error(i(299));var a=!1,l="",h=$y,f=Wy,E=Jy,T=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(T=s.unstable_transitionCallbacks)),s=S0(n,1,!1,null,null,a,l,h,f,E,T,null),n[An]=s.current,rm(n),new wm(s)},ec.hydrateRoot=function(n,s,a){if(!o(n))throw Error(i(299));var l=!1,h="",f=$y,E=Wy,T=Jy,D=null,q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(q=a.formState)),s=S0(n,1,!0,s,a??null,l,h,f,E,T,D,q),s.context=A0(null),a=s.current,l=qn(),l=Ar(l),h=Ws(l),h.callback=null,Js(a,h,l),a=l,s.current.lanes=a,hr(s,a),qr(s),n[An]=s.current,rm(n),new dd(s)},ec.version="19.1.1",ec}var F0;function IA(){if(F0)return Sm.exports;F0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Sm.exports=RA(),Sm.exports}var CA=IA();const NA=zE(CA);var Ve=(r=>(r[r.Welcome=0]="Welcome",r[r.Setup=1]="Setup",r[r.Login=2]="Login",r[r.Profile=3]="Profile",r[r.Shop=4]="Shop",r[r.PackSelection=5]="PackSelection",r[r.RoundConfiguration=6]="RoundConfiguration",r[r.Game=7]="Game",r[r.RoundEnd=8]="RoundEnd",r[r.GameEnd=9]="GameEnd",r))(Ve||{});const DA={CHANGES_BEFORE_AD:3};var ar=(r=>(r.Pack="pack",r.Question="question",r.Dare="dare",r))(ar||{}),cc=(r=>(r.Pending="pending",r.Discarded="discarded",r.Possible="possible",r.Accepted="accepted",r.Rejected="rejected",r))(cc||{});const gt={MAX_SUGGESTIONS_PER_DAY:5,MAX_SUGGESTIONS_PER_WEEK:15,MIN_TITLE_LENGTH:5,MAX_TITLE_LENGTH:100,MIN_CONTENT_LENGTH:10,MAX_CONTENT_LENGTH:500};var Hn=(r=>(r.PostGame="post_game",r.PostRound="post_round",r.QuestionChange="question_change",r.Banner="banner",r.Rewarded="rewarded",r.Interstitial="interstitial",r))(Hn||{});const On=({children:r,className:e})=>p.jsx("div",{className:`bg-gray-800 border border-purple-500/30 rounded-2xl shadow-lg shadow-purple-900/20 p-6 sm:p-8 ${e}`,children:r}),PA=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Im=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),OA=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),qE=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),Io=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),kA=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),BE=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),MA=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),VA=({className:r})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),jA=({players:r,setPlayers:e})=>{const[t,i]=$.useState(""),o=d=>{d.preventDefault(),t.trim()&&!r.includes(t.trim())&&(e([...r,t.trim()]),i(""))},c=d=>{e(r.filter((m,g)=>g!==d))};return p.jsxs(On,{children:[p.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-pink-400",children:"Añadir Jugadores"}),p.jsxs("form",{onSubmit:o,className:"flex flex-col gap-2 mb-4",children:[p.jsx("input",{type:"text",value:t,onChange:d=>i(d.target.value),placeholder:"Nombre del jugador",className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-purple-500"}),p.jsx("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md transition text-base",children:"Añadir"})]}),p.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:r.map((d,m)=>p.jsxs("li",{className:"flex justify-between items-center bg-gray-700/50 p-2 rounded-md animate-fade-in",children:[p.jsx("span",{className:"font-medium",children:d}),p.jsx("button",{onClick:()=>c(m),className:"text-gray-400 hover:text-red-500 transition",children:p.jsx(PA,{className:"w-5 h-5"})})]},m))})]})},be=({children:r,variant:e="primary",className:t,...i})=>{const o="px-6 py-3 font-bold rounded-lg text-white transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 disabled:opacity-50 disabled:cursor-not-allowed",c={primary:"bg-purple-600 hover:bg-purple-700 focus:ring-purple-500/50 shadow-lg shadow-purple-600/30",secondary:"bg-pink-500 hover:bg-pink-600 focus:ring-pink-500/50 shadow-lg shadow-pink-500/30",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500/50"};return p.jsx("button",{className:`${o} ${c[e]} ${t}`,...i,children:r})},LA=()=>{};var G0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},UA=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[t++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[t++],d=r[t++],m=r[t++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const c=r[t++],d=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},FE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const c=r[o],d=o+1<r.length,m=d?r[o+1]:0,g=o+2<r.length,_=g?r[o+2]:0,w=c>>2,b=(c&3)<<4|m>>4;let A=(m&15)<<2|_>>6,R=_&63;g||(R=64,d||(A=64)),i.push(t[w],t[b],t[A],t[R])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(HE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):UA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const c=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const _=o<r.length?t[r.charAt(o)]:64;++o;const b=o<r.length?t[r.charAt(o)]:64;if(++o,c==null||m==null||_==null||b==null)throw new zA;const A=c<<2|m>>4;if(i.push(A),_!==64){const R=m<<4&240|_>>2;if(i.push(R),b!==64){const j=_<<6&192|b;i.push(j)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class zA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qA=function(r){const e=HE(r);return FE.encodeByteArray(e,!0)},Pd=function(r){return qA(r).replace(/\./g,"")},GE=function(r){try{return FE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=()=>BA().__FIREBASE_DEFAULTS__,FA=()=>{if(typeof process>"u"||typeof G0>"u")return;const r=G0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},GA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&GE(r[1]);return e&&JSON.parse(e)},nh=()=>{try{return LA()||HA()||FA()||GA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},QE=r=>{var e,t;return(t=(e=nh())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},QA=r=>{const e=QE(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},KE=()=>{var r;return(r=nh())==null?void 0:r.config},YE=r=>{var e;return(e=nh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function XE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Pd(JSON.stringify(t)),Pd(JSON.stringify(d)),""].join(".")}const uc={};function XA(){const r={prod:[],emulator:[]};for(const e of Object.keys(uc))uc[e]?r.emulator.push(e):r.prod.push(e);return r}function $A(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Q0=!1;function $E(r,e){if(typeof window>"u"||typeof document>"u"||!Bo(window.location.host)||uc[r]===e||uc[r]||Q0)return;uc[r]=e;function t(A){return`__firebase__banner__${A}`}const i="__firebase__banner",c=XA().prod.length>0;function d(){const A=document.getElementById(i);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,R){A.setAttribute("width","24"),A.setAttribute("id",R),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function _(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Q0=!0,d()},A}function w(A,R){A.setAttribute("id",R),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function b(){const A=$A(i),R=t("text"),j=document.getElementById(R)||document.createElement("span"),Q=t("learnmore"),B=document.getElementById(Q)||document.createElement("a"),ie=t("preprendIcon"),ae=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const oe=A.element;m(oe),w(B,Q);const ge=_();g(ae,ie),oe.append(ae,j,B,ge),document.body.appendChild(oe)}c?(j.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function JA(){var e;const r=(e=nh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ex(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function tx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nx(){const r=gn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function rx(){return!JA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sx(){try{return typeof indexedDB=="object"}catch{return!1}}function ix(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="FirebaseError";class js extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=ax,Object.setPrototypeOf(this,js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dc.prototype.create)}}class Dc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?ox(c,i):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new js(o,m,i)}}function ox(r,e){return r.replace(lx,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const lx=/\{\$([^}]+)}/g;function cx(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ea(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const c=r[o],d=e[o];if(K0(c)&&K0(d)){if(!Ea(c,d))return!1}else if(c!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function K0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function rc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function sc(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function ux(r,e){const t=new dx(r,e);return t.subscribe.bind(t)}class dx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");hx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Cm),o.error===void 0&&(o.error=Cm),o.complete===void 0&&(o.complete=Cm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hx(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Cm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(r){return r&&r._delegate?r._delegate:r}class wa{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new KA;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gx(e))try{this.getOrInitializeService({instanceIdentifier:pa})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pa){return this.instances.has(e)}getOptions(e=pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);i===m&&d.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:mx(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=pa){return this.component?this.component.multipleInstances?e:pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mx(r){return r===pa?void 0:r}function gx(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ze||(ze={}));const yx={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},_x=ze.INFO,vx={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},Ex=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=vx[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yg{constructor(e){this.name=e,this._logLevel=_x,this._logHandler=Ex,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const wx=(r,e)=>e.some(t=>r instanceof t);let Y0,X0;function Tx(){return Y0||(Y0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bx(){return X0||(X0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WE=new WeakMap,Bm=new WeakMap,JE=new WeakMap,Nm=new WeakMap,_g=new WeakMap;function Sx(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{t(Ti(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&WE.set(t,r)}).catch(()=>{}),_g.set(e,r),e}function Ax(r){if(Bm.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{t(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Bm.set(r,e)}let Hm={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Bm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||JE.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ti(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function xx(r){Hm=r(Hm)}function Rx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Dm(this),e,...t);return JE.set(i,e.sort?e.sort():[e]),Ti(i)}:bx().includes(r)?function(...e){return r.apply(Dm(this),e),Ti(WE.get(this))}:function(...e){return Ti(r.apply(Dm(this),e))}}function Ix(r){return typeof r=="function"?Rx(r):(r instanceof IDBTransaction&&Ax(r),wx(r,Tx())?new Proxy(r,Hm):r)}function Ti(r){if(r instanceof IDBRequest)return Sx(r);if(Nm.has(r))return Nm.get(r);const e=Ix(r);return e!==r&&(Nm.set(r,e),_g.set(e,r)),e}const Dm=r=>_g.get(r);function Cx(r,e,{blocked:t,upgrade:i,blocking:o,terminated:c}={}){const d=indexedDB.open(r,e),m=Ti(d);return i&&d.addEventListener("upgradeneeded",g=>{i(Ti(d.result),g.oldVersion,g.newVersion,Ti(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const Nx=["get","getKey","getAll","getAllKeys","count"],Dx=["put","add","delete","clear"],Pm=new Map;function $0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Pm.get(e))return Pm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Dx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Nx.includes(t)))return;const c=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let _=g.store;return i&&(_=_.index(m.shift())),(await Promise.all([_[t](...m),o&&g.done]))[0]};return Pm.set(e,c),c}xx(r=>({...r,get:(e,t,i)=>$0(e,t)||r.get(e,t,i),has:(e,t)=>!!$0(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ox(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Ox(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fm="@firebase/app",W0="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new yg("@firebase/app"),kx="@firebase/app-compat",Mx="@firebase/analytics-compat",Vx="@firebase/analytics",jx="@firebase/app-check-compat",Lx="@firebase/app-check",Ux="@firebase/auth",zx="@firebase/auth-compat",qx="@firebase/database",Bx="@firebase/data-connect",Hx="@firebase/database-compat",Fx="@firebase/functions",Gx="@firebase/functions-compat",Qx="@firebase/installations",Kx="@firebase/installations-compat",Yx="@firebase/messaging",Xx="@firebase/messaging-compat",$x="@firebase/performance",Wx="@firebase/performance-compat",Jx="@firebase/remote-config",Zx="@firebase/remote-config-compat",e1="@firebase/storage",t1="@firebase/storage-compat",n1="@firebase/firestore",r1="@firebase/ai",s1="@firebase/firestore-compat",i1="firebase",a1="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="[DEFAULT]",o1={[Fm]:"fire-core",[kx]:"fire-core-compat",[Vx]:"fire-analytics",[Mx]:"fire-analytics-compat",[Lx]:"fire-app-check",[jx]:"fire-app-check-compat",[Ux]:"fire-auth",[zx]:"fire-auth-compat",[qx]:"fire-rtdb",[Bx]:"fire-data-connect",[Hx]:"fire-rtdb-compat",[Fx]:"fire-fn",[Gx]:"fire-fn-compat",[Qx]:"fire-iid",[Kx]:"fire-iid-compat",[Yx]:"fire-fcm",[Xx]:"fire-fcm-compat",[$x]:"fire-perf",[Wx]:"fire-perf-compat",[Jx]:"fire-rc",[Zx]:"fire-rc-compat",[e1]:"fire-gcs",[t1]:"fire-gcs-compat",[n1]:"fire-fst",[s1]:"fire-fst-compat",[r1]:"fire-vertex","fire-js":"fire-js",[i1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=new Map,l1=new Map,Qm=new Map;function J0(r,e){try{r.container.addComponent(e)}catch(t){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Oo(r){const e=r.name;if(Qm.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;Qm.set(e,r);for(const t of Od.values())J0(t,r);for(const t of l1.values())J0(t,r);return!0}function vg(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Dn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new Dc("app","Firebase",c1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=a1;function ZE(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Gm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw bi.create("bad-app-name",{appName:String(o)});if(t||(t=KE()),!t)throw bi.create("no-options");const c=Od.get(o);if(c){if(Ea(t,c.options)&&Ea(i,c.config))return c;throw bi.create("duplicate-app",{appName:o})}const d=new px(o);for(const g of Qm.values())d.addComponent(g);const m=new u1(t,i,d);return Od.set(o,m),m}function ew(r=Gm){const e=Od.get(r);if(!e&&r===Gm&&KE())return ZE();if(!e)throw bi.create("no-app",{appName:r});return e}function Si(r,e,t){let i=o1[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(d.join(" "));return}Oo(new wa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="firebase-heartbeat-database",h1=1,_c="firebase-heartbeat-store";let Om=null;function tw(){return Om||(Om=Cx(d1,h1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(_c)}catch(t){console.warn(t)}}}}).catch(r=>{throw bi.create("idb-open",{originalErrorMessage:r.message})})),Om}async function f1(r){try{const t=(await tw()).transaction(_c),i=await t.objectStore(_c).get(nw(r));return await t.done,i}catch(e){if(e instanceof js)Ds.warn(e.message);else{const t=bi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(t.message)}}}async function Z0(r,e){try{const i=(await tw()).transaction(_c,"readwrite");await i.objectStore(_c).put(e,nw(r)),await i.done}catch(t){if(t instanceof js)Ds.warn(t.message);else{const i=bi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ds.warn(i.message)}}}function nw(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=1024,g1=30;class p1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=ev();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>g1){const d=v1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ds.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ev(),{heartbeatsToSend:i,unsentEntries:o}=y1(this._heartbeatsCache.heartbeats),c=Pd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Ds.warn(t),""}}}function ev(){return new Date().toISOString().substring(0,10)}function y1(r,e=m1){const t=[];let i=r.slice();for(const o of r){const c=t.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),tv(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),tv(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class _1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sx()?ix().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await f1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Z0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Z0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function tv(r){return Pd(JSON.stringify({version:2,heartbeats:r})).length}function v1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(r){Oo(new wa("platform-logger",e=>new Px(e),"PRIVATE")),Oo(new wa("heartbeat",e=>new p1(e),"PRIVATE")),Si(Fm,W0,r),Si(Fm,W0,"esm2020"),Si("fire-js","")}E1("");var w1="firebase",T1="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Si(w1,T1,"app");var nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ai,rw;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,x){function I(){}I.prototype=x.prototype,N.D=x.prototype,N.prototype=new I,N.prototype.constructor=N,N.C=function(k,O,V){for(var C=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)C[xe-2]=arguments[xe];return x.prototype[O].apply(k,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,x,I){I||(I=0);var k=Array(16);if(typeof x=="string")for(var O=0;16>O;++O)k[O]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(O=0;16>O;++O)k[O]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=N.g[0],I=N.g[1],O=N.g[2];var V=N.g[3],C=x+(V^I&(O^V))+k[0]+3614090360&4294967295;x=I+(C<<7&4294967295|C>>>25),C=V+(O^x&(I^O))+k[1]+3905402710&4294967295,V=x+(C<<12&4294967295|C>>>20),C=O+(I^V&(x^I))+k[2]+606105819&4294967295,O=V+(C<<17&4294967295|C>>>15),C=I+(x^O&(V^x))+k[3]+3250441966&4294967295,I=O+(C<<22&4294967295|C>>>10),C=x+(V^I&(O^V))+k[4]+4118548399&4294967295,x=I+(C<<7&4294967295|C>>>25),C=V+(O^x&(I^O))+k[5]+1200080426&4294967295,V=x+(C<<12&4294967295|C>>>20),C=O+(I^V&(x^I))+k[6]+2821735955&4294967295,O=V+(C<<17&4294967295|C>>>15),C=I+(x^O&(V^x))+k[7]+4249261313&4294967295,I=O+(C<<22&4294967295|C>>>10),C=x+(V^I&(O^V))+k[8]+1770035416&4294967295,x=I+(C<<7&4294967295|C>>>25),C=V+(O^x&(I^O))+k[9]+2336552879&4294967295,V=x+(C<<12&4294967295|C>>>20),C=O+(I^V&(x^I))+k[10]+4294925233&4294967295,O=V+(C<<17&4294967295|C>>>15),C=I+(x^O&(V^x))+k[11]+2304563134&4294967295,I=O+(C<<22&4294967295|C>>>10),C=x+(V^I&(O^V))+k[12]+1804603682&4294967295,x=I+(C<<7&4294967295|C>>>25),C=V+(O^x&(I^O))+k[13]+4254626195&4294967295,V=x+(C<<12&4294967295|C>>>20),C=O+(I^V&(x^I))+k[14]+2792965006&4294967295,O=V+(C<<17&4294967295|C>>>15),C=I+(x^O&(V^x))+k[15]+1236535329&4294967295,I=O+(C<<22&4294967295|C>>>10),C=x+(O^V&(I^O))+k[1]+4129170786&4294967295,x=I+(C<<5&4294967295|C>>>27),C=V+(I^O&(x^I))+k[6]+3225465664&4294967295,V=x+(C<<9&4294967295|C>>>23),C=O+(x^I&(V^x))+k[11]+643717713&4294967295,O=V+(C<<14&4294967295|C>>>18),C=I+(V^x&(O^V))+k[0]+3921069994&4294967295,I=O+(C<<20&4294967295|C>>>12),C=x+(O^V&(I^O))+k[5]+3593408605&4294967295,x=I+(C<<5&4294967295|C>>>27),C=V+(I^O&(x^I))+k[10]+38016083&4294967295,V=x+(C<<9&4294967295|C>>>23),C=O+(x^I&(V^x))+k[15]+3634488961&4294967295,O=V+(C<<14&4294967295|C>>>18),C=I+(V^x&(O^V))+k[4]+3889429448&4294967295,I=O+(C<<20&4294967295|C>>>12),C=x+(O^V&(I^O))+k[9]+568446438&4294967295,x=I+(C<<5&4294967295|C>>>27),C=V+(I^O&(x^I))+k[14]+3275163606&4294967295,V=x+(C<<9&4294967295|C>>>23),C=O+(x^I&(V^x))+k[3]+4107603335&4294967295,O=V+(C<<14&4294967295|C>>>18),C=I+(V^x&(O^V))+k[8]+1163531501&4294967295,I=O+(C<<20&4294967295|C>>>12),C=x+(O^V&(I^O))+k[13]+2850285829&4294967295,x=I+(C<<5&4294967295|C>>>27),C=V+(I^O&(x^I))+k[2]+4243563512&4294967295,V=x+(C<<9&4294967295|C>>>23),C=O+(x^I&(V^x))+k[7]+1735328473&4294967295,O=V+(C<<14&4294967295|C>>>18),C=I+(V^x&(O^V))+k[12]+2368359562&4294967295,I=O+(C<<20&4294967295|C>>>12),C=x+(I^O^V)+k[5]+4294588738&4294967295,x=I+(C<<4&4294967295|C>>>28),C=V+(x^I^O)+k[8]+2272392833&4294967295,V=x+(C<<11&4294967295|C>>>21),C=O+(V^x^I)+k[11]+1839030562&4294967295,O=V+(C<<16&4294967295|C>>>16),C=I+(O^V^x)+k[14]+4259657740&4294967295,I=O+(C<<23&4294967295|C>>>9),C=x+(I^O^V)+k[1]+2763975236&4294967295,x=I+(C<<4&4294967295|C>>>28),C=V+(x^I^O)+k[4]+1272893353&4294967295,V=x+(C<<11&4294967295|C>>>21),C=O+(V^x^I)+k[7]+4139469664&4294967295,O=V+(C<<16&4294967295|C>>>16),C=I+(O^V^x)+k[10]+3200236656&4294967295,I=O+(C<<23&4294967295|C>>>9),C=x+(I^O^V)+k[13]+681279174&4294967295,x=I+(C<<4&4294967295|C>>>28),C=V+(x^I^O)+k[0]+3936430074&4294967295,V=x+(C<<11&4294967295|C>>>21),C=O+(V^x^I)+k[3]+3572445317&4294967295,O=V+(C<<16&4294967295|C>>>16),C=I+(O^V^x)+k[6]+76029189&4294967295,I=O+(C<<23&4294967295|C>>>9),C=x+(I^O^V)+k[9]+3654602809&4294967295,x=I+(C<<4&4294967295|C>>>28),C=V+(x^I^O)+k[12]+3873151461&4294967295,V=x+(C<<11&4294967295|C>>>21),C=O+(V^x^I)+k[15]+530742520&4294967295,O=V+(C<<16&4294967295|C>>>16),C=I+(O^V^x)+k[2]+3299628645&4294967295,I=O+(C<<23&4294967295|C>>>9),C=x+(O^(I|~V))+k[0]+4096336452&4294967295,x=I+(C<<6&4294967295|C>>>26),C=V+(I^(x|~O))+k[7]+1126891415&4294967295,V=x+(C<<10&4294967295|C>>>22),C=O+(x^(V|~I))+k[14]+2878612391&4294967295,O=V+(C<<15&4294967295|C>>>17),C=I+(V^(O|~x))+k[5]+4237533241&4294967295,I=O+(C<<21&4294967295|C>>>11),C=x+(O^(I|~V))+k[12]+1700485571&4294967295,x=I+(C<<6&4294967295|C>>>26),C=V+(I^(x|~O))+k[3]+2399980690&4294967295,V=x+(C<<10&4294967295|C>>>22),C=O+(x^(V|~I))+k[10]+4293915773&4294967295,O=V+(C<<15&4294967295|C>>>17),C=I+(V^(O|~x))+k[1]+2240044497&4294967295,I=O+(C<<21&4294967295|C>>>11),C=x+(O^(I|~V))+k[8]+1873313359&4294967295,x=I+(C<<6&4294967295|C>>>26),C=V+(I^(x|~O))+k[15]+4264355552&4294967295,V=x+(C<<10&4294967295|C>>>22),C=O+(x^(V|~I))+k[6]+2734768916&4294967295,O=V+(C<<15&4294967295|C>>>17),C=I+(V^(O|~x))+k[13]+1309151649&4294967295,I=O+(C<<21&4294967295|C>>>11),C=x+(O^(I|~V))+k[4]+4149444226&4294967295,x=I+(C<<6&4294967295|C>>>26),C=V+(I^(x|~O))+k[11]+3174756917&4294967295,V=x+(C<<10&4294967295|C>>>22),C=O+(x^(V|~I))+k[2]+718787259&4294967295,O=V+(C<<15&4294967295|C>>>17),C=I+(V^(O|~x))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+V&4294967295}i.prototype.u=function(N,x){x===void 0&&(x=N.length);for(var I=x-this.blockSize,k=this.B,O=this.h,V=0;V<x;){if(O==0)for(;V<=I;)o(this,N,V),V+=this.blockSize;if(typeof N=="string"){for(;V<x;)if(k[O++]=N.charCodeAt(V++),O==this.blockSize){o(this,k),O=0;break}}else for(;V<x;)if(k[O++]=N[V++],O==this.blockSize){o(this,k),O=0;break}}this.h=O,this.o+=x},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;var I=8*this.o;for(x=N.length-8;x<N.length;++x)N[x]=I&255,I/=256;for(this.u(N),N=Array(16),x=I=0;4>x;++x)for(var k=0;32>k;k+=8)N[I++]=this.g[x]>>>k&255;return N};function c(N,x){var I=m;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=x(N)}function d(N,x){this.h=x;for(var I=[],k=!0,O=N.length-1;0<=O;O--){var V=N[O]|0;k&&V==x||(I[O]=V,k=!1)}this.g=I}var m={};function g(N){return-128<=N&&128>N?c(N,function(x){return new d([x|0],0>x?-1:0)}):new d([N|0],0>N?-1:0)}function _(N){if(isNaN(N)||!isFinite(N))return b;if(0>N)return B(_(-N));for(var x=[],I=1,k=0;N>=I;k++)x[k]=N/I|0,I*=4294967296;return new d(x,0)}function w(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return B(w(N.substring(1),x));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=_(Math.pow(x,8)),k=b,O=0;O<N.length;O+=8){var V=Math.min(8,N.length-O),C=parseInt(N.substring(O,O+V),x);8>V?(V=_(Math.pow(x,V)),k=k.j(V).add(_(C))):(k=k.j(I),k=k.add(_(C)))}return k}var b=g(0),A=g(1),R=g(16777216);r=d.prototype,r.m=function(){if(Q(this))return-B(this).m();for(var N=0,x=1,I=0;I<this.g.length;I++){var k=this.i(I);N+=(0<=k?k:4294967296+k)*x,x*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(j(this))return"0";if(Q(this))return"-"+B(this).toString(N);for(var x=_(Math.pow(N,6)),I=this,k="";;){var O=ge(I,x).g;I=ie(I,O.j(x));var V=((0<I.g.length?I.g[0]:I.h)>>>0).toString(N);if(I=O,j(I))return V+k;for(;6>V.length;)V="0"+V;k=V+k}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function j(N){if(N.h!=0)return!1;for(var x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function Q(N){return N.h==-1}r.l=function(N){return N=ie(this,N),Q(N)?-1:j(N)?0:1};function B(N){for(var x=N.g.length,I=[],k=0;k<x;k++)I[k]=~N.g[k];return new d(I,~N.h).add(A)}r.abs=function(){return Q(this)?B(this):this},r.add=function(N){for(var x=Math.max(this.g.length,N.g.length),I=[],k=0,O=0;O<=x;O++){var V=k+(this.i(O)&65535)+(N.i(O)&65535),C=(V>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);k=C>>>16,V&=65535,C&=65535,I[O]=C<<16|V}return new d(I,I[I.length-1]&-2147483648?-1:0)};function ie(N,x){return N.add(B(x))}r.j=function(N){if(j(this)||j(N))return b;if(Q(this))return Q(N)?B(this).j(B(N)):B(B(this).j(N));if(Q(N))return B(this.j(B(N)));if(0>this.l(R)&&0>N.l(R))return _(this.m()*N.m());for(var x=this.g.length+N.g.length,I=[],k=0;k<2*x;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(var O=0;O<N.g.length;O++){var V=this.i(k)>>>16,C=this.i(k)&65535,xe=N.i(O)>>>16,Se=N.i(O)&65535;I[2*k+2*O]+=C*Se,ae(I,2*k+2*O),I[2*k+2*O+1]+=V*Se,ae(I,2*k+2*O+1),I[2*k+2*O+1]+=C*xe,ae(I,2*k+2*O+1),I[2*k+2*O+2]+=V*xe,ae(I,2*k+2*O+2)}for(k=0;k<x;k++)I[k]=I[2*k+1]<<16|I[2*k];for(k=x;k<2*x;k++)I[k]=0;return new d(I,0)};function ae(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function oe(N,x){this.g=N,this.h=x}function ge(N,x){if(j(x))throw Error("division by zero");if(j(N))return new oe(b,b);if(Q(N))return x=ge(B(N),x),new oe(B(x.g),B(x.h));if(Q(x))return x=ge(N,B(x)),new oe(B(x.g),x.h);if(30<N.g.length){if(Q(N)||Q(x))throw Error("slowDivide_ only works with positive integers.");for(var I=A,k=x;0>=k.l(N);)I=ce(I),k=ce(k);var O=G(I,1),V=G(k,1);for(k=G(k,2),I=G(I,2);!j(k);){var C=V.add(k);0>=C.l(N)&&(O=O.add(I),V=C),k=G(k,1),I=G(I,1)}return x=ie(N,O.j(x)),new oe(O,x)}for(O=b;0<=N.l(x);){for(I=Math.max(1,Math.floor(N.m()/x.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),V=_(I),C=V.j(x);Q(C)||0<C.l(N);)I-=k,V=_(I),C=V.j(x);j(V)&&(V=A),O=O.add(V),N=ie(N,C)}return new oe(O,N)}r.A=function(N){return ge(this,N).h},r.and=function(N){for(var x=Math.max(this.g.length,N.g.length),I=[],k=0;k<x;k++)I[k]=this.i(k)&N.i(k);return new d(I,this.h&N.h)},r.or=function(N){for(var x=Math.max(this.g.length,N.g.length),I=[],k=0;k<x;k++)I[k]=this.i(k)|N.i(k);return new d(I,this.h|N.h)},r.xor=function(N){for(var x=Math.max(this.g.length,N.g.length),I=[],k=0;k<x;k++)I[k]=this.i(k)^N.i(k);return new d(I,this.h^N.h)};function ce(N){for(var x=N.g.length+1,I=[],k=0;k<x;k++)I[k]=N.i(k)<<1|N.i(k-1)>>>31;return new d(I,N.h)}function G(N,x){var I=x>>5;x%=32;for(var k=N.g.length-I,O=[],V=0;V<k;V++)O[V]=0<x?N.i(V+I)>>>x|N.i(V+I+1)<<32-x:N.i(V+I);return new d(O,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,rw=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=w,Ai=d}).apply(typeof nv<"u"?nv:typeof self<"u"?self:typeof window<"u"?window:{});var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sw,ic,iw,Td,Km,aw,ow,lw;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,y,v){return u==Array.prototype||u==Object.prototype||(u[y]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof fd=="object"&&fd];for(var y=0;y<u.length;++y){var v=u[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,y){if(y)e:{var v=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var U=u[S];if(!(U in v))break e;v=v[U]}u=u[u.length-1],S=v[u],y=y(S),y!=S&&y!=null&&e(v,u,{configurable:!0,writable:!0,value:y})}}function c(u,y){u instanceof String&&(u+="");var v=0,S=!1,U={next:function(){if(!S&&v<u.length){var Y=v++;return{value:y(Y,u[Y]),done:!1}}return S=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(u){return u||function(){return c(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function g(u){var y=typeof u;return y=y!="object"?y:u?Array.isArray(u)?"array":y:"null",y=="array"||y=="object"&&typeof u.length=="number"}function _(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function w(u,y,v){return u.call.apply(u.bind,arguments)}function b(u,y,v){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,S),u.apply(y,U)}}return function(){return u.apply(y,arguments)}}function A(u,y,v){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:b,A.apply(null,arguments)}function R(u,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function j(u,y){function v(){}v.prototype=y.prototype,u.aa=y.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(S,U,Y){for(var le=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)le[Fe-2]=arguments[Fe];return y.prototype[U].apply(S,le)}}function Q(u){const y=u.length;if(0<y){const v=Array(y);for(let S=0;S<y;S++)v[S]=u[S];return v}return[]}function B(u,y){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(g(S)){const U=u.length||0,Y=S.length||0;u.length=U+Y;for(let le=0;le<Y;le++)u[U+le]=S[le]}else u.push(S)}}class ie{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ae(u){return/^[\s\xa0]*$/.test(u)}function oe(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function ge(u){return ge[" "](u),u}ge[" "]=function(){};var ce=oe().indexOf("Gecko")!=-1&&!(oe().toLowerCase().indexOf("webkit")!=-1&&oe().indexOf("Edge")==-1)&&!(oe().indexOf("Trident")!=-1||oe().indexOf("MSIE")!=-1)&&oe().indexOf("Edge")==-1;function G(u,y,v){for(const S in u)y.call(v,u[S],S,u)}function N(u,y){for(const v in u)y.call(void 0,u[v],v,u)}function x(u){const y={};for(const v in u)y[v]=u[v];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,y){let v,S;for(let U=1;U<arguments.length;U++){S=arguments[U];for(v in S)u[v]=S[v];for(let Y=0;Y<I.length;Y++)v=I[Y],Object.prototype.hasOwnProperty.call(S,v)&&(u[v]=S[v])}}function O(u){var y=1;u=u.split(":");const v=[];for(;0<y&&u.length;)v.push(u.shift()),y--;return u.length&&v.push(u.join(":")),v}function V(u){m.setTimeout(()=>{throw u},0)}function C(){var u=ye;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class xe{constructor(){this.h=this.g=null}add(y,v){const S=Se.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var Se=new ie(()=>new K,u=>u.reset());class K{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let re,X=!1,ye=new xe,P=()=>{const u=m.Promise.resolve(void 0);re=()=>{u.then(ne)}};var ne=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(v){V(v)}var y=Se;y.j(u),100>y.h&&(y.h++,u.next=y.g,y.g=u)}X=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return u})();function Oe(u,y){if(se.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget){if(ce){e:{try{ge(y.nodeName);var U=!0;break e}catch{}U=!1}U||(y=null)}}else v=="mouseover"?y=u.fromElement:v=="mouseout"&&(y=u.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Re[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Oe.aa.h.call(this)}}j(Oe,se);var Re={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Dt="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Jt(u,y,v,S,U){this.listener=u,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=U,this.key=++Je,this.da=this.fa=!1}function cr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ur(u){this.src=u,this.g={},this.h=0}ur.prototype.add=function(u,y,v,S,U){var Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);var le=es(u,y,S,U);return-1<le?(y=u[le],v||(y.fa=!1)):(y=new Jt(y,this.src,Y,!!S,U),y.fa=v,u.push(y)),y};function br(u,y){var v=y.type;if(v in u.g){var S=u.g[v],U=Array.prototype.indexOf.call(S,y,void 0),Y;(Y=0<=U)&&Array.prototype.splice.call(S,U,1),Y&&(cr(y),u.g[v].length==0&&(delete u.g[v],u.h--))}}function es(u,y,v,S){for(var U=0;U<u.length;++U){var Y=u[U];if(!Y.da&&Y.listener==y&&Y.capture==!!v&&Y.ha==S)return U}return-1}var Sr="closure_lm_"+(1e6*Math.random()|0),Ia={};function Wo(u,y,v,S,U){if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)Wo(u,y[Y],v,S,U);return null}return v=Na(v),u&&u[Dt]?u.K(y,v,_(S)?!!S.capture:!1,U):pn(u,y,v,!1,S,U)}function pn(u,y,v,S,U,Y){if(!y)throw Error("Invalid event type");var le=_(U)?!!U.capture:!!U,Fe=qs(u);if(Fe||(u[Sr]=Fe=new ur(u)),v=Fe.add(y,v,S,le,Y),v.proxy)return v;if(S=Ca(),v.proxy=S,S.src=u,S.listener=v,u.addEventListener)ve||(U=le),U===void 0&&(U=!1),u.addEventListener(y.toString(),S,U);else if(u.attachEvent)u.attachEvent(ts(y.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ca(){function u(v){return y.call(u.src,u.listener,v)}const y=Jo;return u}function dr(u,y,v,S,U){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)dr(u,y[Y],v,S,U);else S=_(S)?!!S.capture:!!S,v=Na(v),u&&u[Dt]?(u=u.i,y=String(y).toString(),y in u.g&&(Y=u.g[y],v=es(Y,v,S,U),-1<v&&(cr(Y[v]),Array.prototype.splice.call(Y,v,1),Y.length==0&&(delete u.g[y],u.h--)))):u&&(u=qs(u))&&(y=u.g[y.toString()],u=-1,y&&(u=es(y,v,S,U)),(v=-1<u?y[u]:null)&&zs(v))}function zs(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[Dt])br(y.i,u);else{var v=u.type,S=u.proxy;y.removeEventListener?y.removeEventListener(v,S,u.capture):y.detachEvent?y.detachEvent(ts(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=qs(y))?(br(v,u),v.h==0&&(v.src=null,y[Sr]=null)):cr(u)}}}function ts(u){return u in Ia?Ia[u]:Ia[u]="on"+u}function Jo(u,y){if(u.da)u=!0;else{y=new Oe(y,this);var v=u.listener,S=u.ha||u.src;u.fa&&zs(u),u=v.call(S,y)}return u}function qs(u){return u=u[Sr],u instanceof ur?u:null}var Bs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Na(u){return typeof u=="function"?u:(u[Bs]||(u[Bs]=function(y){return u.handleEvent(y)}),u[Bs])}function ft(){de.call(this),this.i=new ur(this),this.M=this,this.F=null}j(ft,de),ft.prototype[Dt]=!0,ft.prototype.removeEventListener=function(u,y,v,S){dr(this,u,y,v,S)};function Ze(u,y){var v,S=u.F;if(S)for(v=[];S;S=S.F)v.push(S);if(u=u.M,S=y.type||y,typeof y=="string")y=new se(y,u);else if(y instanceof se)y.target=y.target||u;else{var U=y;y=new se(S,u),k(y,U)}if(U=!0,v)for(var Y=v.length-1;0<=Y;Y--){var le=y.g=v[Y];U=yn(le,S,!0,y)&&U}if(le=y.g=u,U=yn(le,S,!0,y)&&U,U=yn(le,S,!1,y)&&U,v)for(Y=0;Y<v.length;Y++)le=y.g=v[Y],U=yn(le,S,!1,y)&&U}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var u=this.i,y;for(y in u.g){for(var v=u.g[y],S=0;S<v.length;S++)cr(v[S]);delete u.g[y],u.h--}}this.F=null},ft.prototype.K=function(u,y,v,S){return this.i.add(String(u),y,!1,v,S)},ft.prototype.L=function(u,y,v,S){return this.i.add(String(u),y,!0,v,S)};function yn(u,y,v,S){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();for(var U=!0,Y=0;Y<y.length;++Y){var le=y[Y];if(le&&!le.da&&le.capture==v){var Fe=le.listener,Lt=le.ha||le.src;le.fa&&br(u.i,le),U=Fe.call(Lt,S)!==!1&&U}}return U&&!S.defaultPrevented}function Ht(u,y,v){if(typeof u=="function")v&&(u=A(u,v));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(u,y||0)}function Da(u){u.g=Ht(()=>{u.g=null,u.i&&(u.i=!1,Da(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class Zo extends de{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Da(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(u){de.call(this),this.h=u,this.g={}}j(ns,de);var rs=[];function ss(u){G(u.g,function(y,v){this.g.hasOwnProperty(v)&&zs(y)},u),u.g={}}ns.prototype.N=function(){ns.aa.N.call(this),ss(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kn=m.JSON.stringify,Hs=m.JSON.parse,is=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function Fs(){}Fs.prototype.h=null;function Li(u){return u.h||(u.h=u.i())}function Ui(){}var Kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hr(){se.call(this,"d")}j(hr,se);function fr(){se.call(this,"c")}j(fr,se);var Yn={},zi=null;function Ar(){return zi=zi||new ft}Yn.La="serverreachability";function Gs(u){se.call(this,Yn.La,u)}j(Gs,se);function xr(u){const y=Ar();Ze(y,new Gs(y))}Yn.STAT_EVENT="statevent";function Pa(u,y){se.call(this,Yn.STAT_EVENT,u),this.stat=y}j(Pa,se);function dt(u){const y=Ar();Ze(y,new Pa(y,u))}Yn.Ma="timingevent";function At(u,y){se.call(this,Yn.Ma,u),this.size=y}j(At,se);function wt(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},y)}function An(){this.g=!0}An.prototype.xa=function(){this.g=!1};function qi(u,y,v,S,U,Y){u.info(function(){if(u.g)if(Y)for(var le="",Fe=Y.split("&"),Lt=0;Lt<Fe.length;Lt++){var Ge=Fe[Lt].split("=");if(1<Ge.length){var Gt=Ge[0];Ge=Ge[1];var Ut=Gt.split("_");le=2<=Ut.length&&Ut[1]=="type"?le+(Gt+"="+Ge+"&"):le+(Gt+"=redacted&")}}else le=null;else le=Y;return"XMLHTTP REQ ("+S+") [attempt "+U+"]: "+y+`
`+v+`
`+le})}function ue(u,y,v,S,U,Y,le){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+U+"]: "+y+`
`+v+`
`+Y+" "+le})}function fe(u,y,v,S){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+xn(u,v)+(S?" "+S:"")})}function He(u,y){u.info(function(){return"TIMEOUT: "+y})}An.prototype.info=function(){};function xn(u,y){if(!u.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var S=v[u];if(!(2>S.length)){var U=S[1];if(Array.isArray(U)&&!(1>U.length)){var Y=U[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var le=1;le<U.length;le++)U[le]=""}}}}return kn(v)}catch{return y}}var _n={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rr;function Ir(){}j(Ir,Fs),Ir.prototype.g=function(){return new XMLHttpRequest},Ir.prototype.i=function(){return{}},Rr=new Ir;function En(u,y,v,S){this.j=u,this.i=y,this.l=v,this.R=S||1,this.U=new ns(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xt}function xt(){this.i=null,this.g="",this.h=!1}var el={},Oa={};function mr(u,y,v){u.L=1,u.v=Qi(Mn(y)),u.m=v,u.P=!0,as(u,null)}function as(u,y){u.F=Date.now(),Bi(u),u.A=Mn(u.v);var v=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),al(v.i,"t",S),u.C=0,v=u.j.J,u.h=new xt,u.g=cu(u.j,v?y:null,!u.m),0<u.O&&(u.M=new Zo(A(u.Y,u,u.g),u.O)),y=u.U,v=u.g,S=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(rs[0]=U.toString()),U=rs);for(var Y=0;Y<U.length;Y++){var le=Wo(v,U[Y],S||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,y)):(u.u="GET",u.g.ea(u.A,u.u,null,y)),xr(),qi(u.i,u.u,u.A,u.l,u.R,u.m)}En.prototype.ca=function(u){u=u.target;const y=this.M;y&&Jn(u)==3?y.j():this.Y(u)},En.prototype.Y=function(u){try{if(u==this.g)e:{const Ut=Jn(this.g);var y=this.g.Ba();const ms=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||tu(this.g)))){this.J||Ut!=4||y==7||(y==8||0>=ms?xr(3):xr(2)),Qs(this);var v=this.g.Z();this.X=v;t:if(Yc(this)){var S=tu(this.g);u="";var U=S.length,Y=Jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zt(this),Cr(this);var le="";break t}this.h.i=new m.TextDecoder}for(y=0;y<U;y++)this.h.h=!0,u+=this.h.i.decode(S[y],{stream:!(Y&&y==U-1)});S.length=0,this.h.g+=u,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=v==200,ue(this.i,this.u,this.A,this.l,this.R,Ut,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,Lt=this.g;if((Fe=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ae(Fe)){var Ge=Fe;break t}}Ge=null}if(v=Ge)fe(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hi(this,v);else{this.o=!1,this.s=3,dt(12),Zt(this),Cr(this);break e}}if(this.P){v=!0;let en;for(;!this.J&&this.C<le.length;)if(en=Xc(this,le),en==Oa){Ut==4&&(this.s=4,dt(14),v=!1),fe(this.i,this.l,null,"[Incomplete Response]");break}else if(en==el){this.s=4,dt(15),fe(this.i,this.l,le,"[Invalid Chunk]"),v=!1;break}else fe(this.i,this.l,en,null),Hi(this,en);if(Yc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||le.length!=0||this.h.h||(this.s=1,dt(16),v=!1),this.o=this.o&&v,!v)fe(this.i,this.l,le,"[Invalid Chunked Response]"),Zt(this),Cr(this);else if(0<le.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),ea(Gt),Gt.M=!0,dt(11))}}else fe(this.i,this.l,le,null),Hi(this,le);Ut==4&&Zt(this),this.o&&!this.J&&(Ut==4?au(this.j,this):(this.o=!1,Bi(this)))}else Ch(this.g),v==400&&0<le.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Zt(this),Cr(this)}}}catch{}finally{}};function Yc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Xc(u,y){var v=u.C,S=y.indexOf(`
`,v);return S==-1?Oa:(v=Number(y.substring(v,S)),isNaN(v)?el:(S+=1,S+v>y.length?Oa:(y=y.slice(S,S+v),u.C=S+v,y)))}En.prototype.cancel=function(){this.J=!0,Zt(this)};function Bi(u){u.S=Date.now()+u.I,$c(u,u.I)}function $c(u,y){if(u.B!=null)throw Error("WatchDog timer not null");u.B=wt(A(u.ba,u),y)}function Qs(u){u.B&&(m.clearTimeout(u.B),u.B=null)}En.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(He(this.i,this.A),this.L!=2&&(xr(),dt(17)),Zt(this),this.s=2,Cr(this)):$c(this,this.S-u)};function Cr(u){u.j.G==0||u.J||au(u.j,u)}function Zt(u){Qs(u);var y=u.M;y&&typeof y.ma=="function"&&y.ma(),u.M=null,ss(u.U),u.g&&(y=u.g,u.g=null,y.abort(),y.ma())}function Hi(u,y){try{var v=u.j;if(v.G!=0&&(v.g==u||tl(v.h,u))){if(!u.K&&tl(v.h,u)&&v.G==3){try{var S=v.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var U=S;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Ga(v),Ha(v);else break e;dl(v),dt(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=wt(A(v.Za,v),6e3));if(1>=Ma(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else fs(v,11)}else if((u.K||v.g==u)&&Ga(v),!ae(y))for(U=v.Da.g.parse(y),y=0;y<U.length;y++){let Ge=U[y];if(v.T=Ge[0],Ge=Ge[1],v.G==2)if(Ge[0]=="c"){v.K=Ge[1],v.ia=Ge[2];const Gt=Ge[3];Gt!=null&&(v.la=Gt,v.j.info("VER="+v.la));const Ut=Ge[4];Ut!=null&&(v.Aa=Ut,v.j.info("SVER="+v.Aa));const ms=Ge[5];ms!=null&&typeof ms=="number"&&0<ms&&(S=1.5*ms,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const en=u.g;if(en){const Vr=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vr){var Y=S.h;Y.g||Vr.indexOf("spdy")==-1&&Vr.indexOf("quic")==-1&&Vr.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Va(Y,Y.h),Y.h=null))}if(S.D){const fl=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;fl&&(S.ya=fl,it(S.I,S.D,fl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var le=u;if(S.qa=lu(S,S.J?S.ia:null,S.W),le.K){wn(S.h,le);var Fe=le,Lt=S.L;Lt&&(Fe.I=Lt),Fe.B&&(Qs(Fe),Bi(Fe)),S.g=le}else su(S);0<v.i.length&&Fa(v)}else Ge[0]!="stop"&&Ge[0]!="close"||fs(v,7);else v.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?fs(v,7):cl(v):Ge[0]!="noop"&&v.l&&v.l.ta(Ge),v.v=0)}}xr(4)}catch{}}var Wc=class{constructor(u,y){this.g=u,this.map=y}};function os(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ka(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ma(u){return u.h?1:u.g?u.g.size:0}function tl(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function Va(u,y){u.g?u.g.add(y):u.h=y}function wn(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}os.prototype.cancel=function(){if(this.i=nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function nl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const v of u.g.values())y=y.concat(v.D);return y}return Q(u.i)}function Ah(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var y=[],v=u.length,S=0;S<v;S++)y.push(u[S]);return y}y=[],v=0;for(S in u)y[v++]=u[S];return y}function ja(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var y=[];u=u.length;for(var v=0;v<u;v++)y.push(v);return y}y=[],v=0;for(const S in u)y[v++]=S;return y}}}function rl(u,y){if(u.forEach&&typeof u.forEach=="function")u.forEach(y,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,y,void 0);else for(var v=ja(u),S=Ah(u),U=S.length,Y=0;Y<U;Y++)y.call(void 0,S[Y],v&&v[Y],u)}var Fi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xh(u,y){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var S=u[v].indexOf("="),U=null;if(0<=S){var Y=u[v].substring(0,S);U=u[v].substring(S+1)}else Y=u[v];y(Y,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Pt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Pt){this.h=u.h,Gi(this,u.j),this.o=u.o,this.g=u.g,Ks(this,u.s),this.l=u.l;var y=u.i,v=new cs;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),ls(this,v),this.m=u.m}else u&&(y=String(u).match(Fi))?(this.h=!1,Gi(this,y[1]||"",!0),this.o=Xn(y[2]||""),this.g=Xn(y[3]||"",!0),Ks(this,y[4]),this.l=Xn(y[5]||"",!0),ls(this,y[6]||"",!0),this.m=Xn(y[7]||"")):(this.h=!1,this.i=new cs(null,this.h))}Pt.prototype.toString=function(){var u=[],y=this.j;y&&u.push(Ki(y,sl,!0),":");var v=this.g;return(v||y=="file")&&(u.push("//"),(y=this.o)&&u.push(Ki(y,sl,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Ki(v,v.charAt(0)=="/"?Rh:il,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Ki(v,La)),u.join("")};function Mn(u){return new Pt(u)}function Gi(u,y,v){u.j=v?Xn(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function Ks(u,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);u.s=y}else u.s=null}function ls(u,y,v){y instanceof cs?(u.i=y,Zc(u.i,u.h)):(v||(y=Ki(y,Ih)),u.i=new cs(y,u.h))}function it(u,y,v){u.i.set(y,v)}function Qi(u){return it(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Xn(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ki(u,y,v){return typeof u=="string"?(u=encodeURI(u).replace(y,Jc),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Jc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var sl=/[#\/\?@]/g,il=/[#\?:]/g,Rh=/[#\?]/g,Ih=/[#\?@]/g,La=/#/g;function cs(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function $n(u){u.g||(u.g=new Map,u.h=0,u.i&&xh(u.i,function(y,v){u.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=cs.prototype,r.add=function(u,y){$n(this),this.i=null,u=Nr(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(y),this.h+=1,this};function us(u,y){$n(u),y=Nr(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function ds(u,y){return $n(u),y=Nr(u,y),u.g.has(y)}r.forEach=function(u,y){$n(this),this.g.forEach(function(v,S){v.forEach(function(U){u.call(y,U,S,this)},this)},this)},r.na=function(){$n(this);const u=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let S=0;S<y.length;S++){const U=u[S];for(let Y=0;Y<U.length;Y++)v.push(y[S])}return v},r.V=function(u){$n(this);let y=[];if(typeof u=="string")ds(this,u)&&(y=y.concat(this.g.get(Nr(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)y=y.concat(u[v])}return y},r.set=function(u,y){return $n(this),this.i=null,u=Nr(this,u),ds(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},r.get=function(u,y){return u?(u=this.V(u),0<u.length?String(u[0]):y):y};function al(u,y,v){us(u,y),0<v.length&&(u.i=null,u.g.set(Nr(u,y),Q(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var S=y[v];const Y=encodeURIComponent(String(S)),le=this.V(S);for(S=0;S<le.length;S++){var U=Y;le[S]!==""&&(U+="="+encodeURIComponent(String(le[S]))),u.push(U)}}return this.i=u.join("&")};function Nr(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Zc(u,y){y&&!u.j&&($n(u),u.i=null,u.g.forEach(function(v,S){var U=S.toLowerCase();S!=U&&(us(this,S),al(this,U,v))},u)),u.j=y}function Yi(u,y){const v=new An;if(m.Image){const S=new Image;S.onload=R(Wn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=R(Wn,v,"TestLoadImage: error",!1,y,S),S.onabort=R(Wn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=R(Wn,v,"TestLoadImage: timeout",!1,y,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else y(!1)}function gr(u,y){const v=new An,S=new AbortController,U=setTimeout(()=>{S.abort(),Wn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:S.signal}).then(Y=>{clearTimeout(U),Y.ok?Wn(v,"TestPingServer: ok",!0,y):Wn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),Wn(v,"TestPingServer: error",!1,y)})}function Wn(u,y,v,S,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),S(v)}catch{}}function Xi(){this.g=new is}function Dr(u,y,v){const S=v||"";try{rl(u,function(U,Y){let le=U;_(U)&&(le=kn(U)),y.push(S+Y+"="+encodeURIComponent(le))})}catch(U){throw y.push(S+"type="+encodeURIComponent("_badmap")),U}}function Ys(u){this.l=u.Ub||null,this.j=u.eb||!1}j(Ys,Fs),Ys.prototype.g=function(){return new hs(this.l,this.j)},Ys.prototype.i=(function(u){return function(){return u}})({});function hs(u,y){ft.call(this),this.D=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(hs,ft),r=hs.prototype,r.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=y,this.readyState=1,Or(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(y.body=u),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pr(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Or(this)),this.g&&(this.readyState=3,Or(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ol(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ol(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?Pr(this):Or(this),this.readyState==3&&ol(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Pr(this))},r.Qa=function(u){this.g&&(this.response=u,Pr(this))},r.ga=function(){this.g&&Pr(this)};function Pr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Or(u)}r.setRequestHeader=function(u,y){this.u.append(u,y)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=y.next();return u.join(`\r
`)};function Or(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(hs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ll(u){let y="";return G(u,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Ft(u,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=ll(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):it(u,y,v))}function tt(u){ft.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(tt,ft);var Ua=/^https?$/i,$i=["POST","PUT"];r=tt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rr.g(),this.v=this.o?Li(this.o):Li(Rr),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(Y){eu(this,Y);return}if(u=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var U in S)v.set(U,S[U]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Y of S.keys())v.set(Y,S.get(Y));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(Y=>Y.toLowerCase()=="content-type"),U=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call($i,y,void 0))||S||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,le]of v)this.g.setRequestHeader(Y,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wi(this),this.u=!0,this.g.send(u),this.u=!1}catch(Y){eu(this,Y)}};function eu(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.m=5,za(u),kr(u)}function za(u){u.A||(u.A=!0,Ze(u,"complete"),Ze(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ze(this,"complete"),Ze(this,"abort"),kr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kr(this,!0)),tt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?qa(this):this.bb())},r.bb=function(){qa(this)};function qa(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Jn(u)!=4||u.Z()!=2)){if(u.u&&Jn(u)==4)Ht(u.Ea,0,u);else if(Ze(u,"readystatechange"),Jn(u)==4){u.h=!1;try{const le=u.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=le===0){var U=String(u.D).match(Fi)[1]||null;!U&&m.self&&m.self.location&&(U=m.self.location.protocol.slice(0,-1)),S=!Ua.test(U?U.toLowerCase():"")}v=S}if(v)Ze(u,"complete"),Ze(u,"success");else{u.m=6;try{var Y=2<Jn(u)?u.g.statusText:""}catch{Y=""}u.l=Y+" ["+u.Z()+"]",za(u)}}finally{kr(u)}}}}function kr(u,y){if(u.g){Wi(u);const v=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,y||Ze(u,"ready");try{v.onreadystatechange=S}catch{}}}function Wi(u){u.I&&(m.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Jn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Jn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),Hs(y)}};function tu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ch(u){const y={};u=(u.g&&2<=Jn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(ae(u[S]))continue;var v=O(u[S]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Y=y[U]||[];y[U]=Y,Y.push(v)}N(y,function(S){return S.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ji(u,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||y}function Ba(u){this.Aa=0,this.i=[],this.j=new An,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ji("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ji("baseRetryDelayMs",5e3,u),this.cb=Ji("retryDelaySeedMs",1e4,u),this.Wa=Ji("forwardChannelMaxRetries",2,u),this.wa=Ji("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new os(u&&u.concurrentRequestLimit),this.Da=new Xi,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ba.prototype,r.la=8,r.G=1,r.connect=function(u,y,v,S){dt(0),this.W=u,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=lu(this,null,this.W),Fa(this)};function cl(u){if(nu(u),u.G==3){var y=u.U++,v=Mn(u.I);if(it(v,"SID",u.K),it(v,"RID",y),it(v,"TYPE","terminate"),Zi(u,v),y=new En(u,u.j,y),y.L=2,y.v=Qi(Mn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=cu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Bi(y)}ou(u)}function Ha(u){u.g&&(ea(u),u.g.cancel(),u.g=null)}function nu(u){Ha(u),u.u&&(m.clearTimeout(u.u),u.u=null),Ga(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function Fa(u){if(!ka(u.h)&&!u.s){u.s=!0;var y=u.Ga;re||P(),X||(re(),X=!0),ye.add(y,u),u.B=0}}function Nh(u,y){return Ma(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=y.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=wt(A(u.Ga,u,y),hl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new En(this,this.j,u);let Y=this.o;if(this.S&&(Y?(Y=x(Y),k(Y,this.S)):Y=this.S),this.m!==null||this.O||(U.H=Y,Y=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=ru(this,U,y),v=Mn(this.I),it(v,"RID",u),it(v,"CVER",22),this.D&&it(v,"X-HTTP-Session-Id",this.D),Zi(this,v),Y&&(this.O?y="headers="+encodeURIComponent(String(ll(Y)))+"&"+y:this.m&&Ft(v,this.m,Y)),Va(this.h,U),this.Ua&&it(v,"TYPE","init"),this.P?(it(v,"$req",y),it(v,"SID","null"),U.T=!0,mr(U,v,null)):mr(U,v,y),this.G=2}}else this.G==3&&(u?ul(this,u):this.i.length==0||ka(this.h)||ul(this))};function ul(u,y){var v;y?v=y.l:v=u.U++;const S=Mn(u.I);it(S,"SID",u.K),it(S,"RID",v),it(S,"AID",u.T),Zi(u,S),u.m&&u.o&&Ft(S,u.m,u.o),v=new En(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),y&&(u.i=y.D.concat(u.i)),y=ru(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Va(u.h,v),mr(v,S,y)}function Zi(u,y){u.H&&G(u.H,function(v,S){it(y,S,v)}),u.l&&rl({},function(v,S){it(y,S,v)})}function ru(u,y,v){v=Math.min(u.i.length,v);var S=u.l?A(u.l.Na,u.l,u):null;e:{var U=u.i;let Y=-1;for(;;){const le=["count="+v];Y==-1?0<v?(Y=U[0].g,le.push("ofs="+Y)):Y=0:le.push("ofs="+Y);let Fe=!0;for(let Lt=0;Lt<v;Lt++){let Ge=U[Lt].g;const Gt=U[Lt].map;if(Ge-=Y,0>Ge)Y=Math.max(0,U[Lt].g-100),Fe=!1;else try{Dr(Gt,le,"req"+Ge+"_")}catch{S&&S(Gt)}}if(Fe){S=le.join("&");break e}}}return u=u.i.splice(0,v),y.D=u,S}function su(u){if(!u.g&&!u.u){u.Y=1;var y=u.Fa;re||P(),X||(re(),X=!0),ye.add(y,u),u.v=0}}function dl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=wt(A(u.Fa,u),hl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,iu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=wt(A(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Ha(this),iu(this))};function ea(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function iu(u){u.g=new En(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var y=Mn(u.qa);it(y,"RID","rpc"),it(y,"SID",u.K),it(y,"AID",u.T),it(y,"CI",u.F?"0":"1"),!u.F&&u.ja&&it(y,"TO",u.ja),it(y,"TYPE","xmlhttp"),Zi(u,y),u.m&&u.o&&Ft(y,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Qi(Mn(y)),v.m=null,v.P=!0,as(v,u)}r.Za=function(){this.C!=null&&(this.C=null,Ha(this),dl(this),dt(19))};function Ga(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function au(u,y){var v=null;if(u.g==y){Ga(u),ea(u),u.g=null;var S=2}else if(tl(u.h,y))v=y.D,wn(u.h,y),S=1;else return;if(u.G!=0){if(y.o)if(S==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var U=u.B;S=Ar(),Ze(S,new At(S,v)),Fa(u)}else su(u);else if(U=y.s,U==3||U==0&&0<y.X||!(S==1&&Nh(u,y)||S==2&&dl(u)))switch(v&&0<v.length&&(y=u.h,y.i=y.i.concat(v)),U){case 1:fs(u,5);break;case 4:fs(u,10);break;case 3:fs(u,6);break;default:fs(u,2)}}}function hl(u,y){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*y}function fs(u,y){if(u.j.info("Error code "+y),y==2){var v=A(u.fb,u),S=u.Xa;const U=!S;S=new Pt(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Gi(S,"https"),Qi(S),U?Yi(S.toString(),v):gr(S.toString(),v)}else dt(2);u.G=0,u.l&&u.l.sa(y),ou(u),nu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function ou(u){if(u.G=0,u.ka=[],u.l){const y=nl(u.h);(y.length!=0||u.i.length!=0)&&(B(u.ka,y),B(u.ka,u.i),u.h.i.length=0,Q(u.i),u.i.length=0),u.l.ra()}}function lu(u,y,v){var S=v instanceof Pt?Mn(v):new Pt(v);if(S.g!="")y&&(S.g=y+"."+S.g),Ks(S,S.s);else{var U=m.location;S=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;var Y=new Pt(null);S&&Gi(Y,S),y&&(Y.g=y),U&&Ks(Y,U),v&&(Y.l=v),S=Y}return v=u.D,y=u.ya,v&&y&&it(S,v,y),it(S,"VER",u.la),Zi(u,S),S}function cu(u,y,v){if(y&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Ca&&!u.pa?new tt(new Ys({eb:v})):new tt(u.pa),y.Ha(u.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function uu(){}r=uu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Qa(){}Qa.prototype.g=function(u,y){return new Tn(u,y)};function Tn(u,y){ft.call(this),this.g=new Ba(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(u?u["X-WebChannel-Client-Profile"]=y.va:u={"X-WebChannel-Client-Profile":y.va}),this.g.S=u,(u=y&&y.Sb)&&!ae(u)&&(this.g.m=u),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ae(y)&&(this.g.D=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new Mr(this)}j(Tn,ft),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){cl(this.g)},Tn.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=kn(u),u=v);y.i.push(new Wc(y.Ya++,u)),y.G==3&&Fa(y)},Tn.prototype.N=function(){this.g.l=null,delete this.j,cl(this.g),delete this.g,Tn.aa.N.call(this)};function du(u){hr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const v in y){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}j(du,hr);function hu(){fr.call(this),this.status=1}j(hu,fr);function Mr(u){this.g=u}j(Mr,uu),Mr.prototype.ua=function(){Ze(this.g,"a")},Mr.prototype.ta=function(u){Ze(this.g,new du(u))},Mr.prototype.sa=function(u){Ze(this.g,new hu)},Mr.prototype.ra=function(){Ze(this.g,"b")},Qa.prototype.createWebChannel=Qa.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,lw=function(){return new Qa},ow=function(){return Ar()},aw=Yn,Km={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_n.NO_ERROR=0,_n.TIMEOUT=8,_n.HTTP_ERROR=6,Td=_n,vn.COMPLETE="complete",iw=vn,Ui.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",ft.prototype.listen=ft.prototype.K,ic=Ui,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,sw=tt}).apply(typeof fd<"u"?fd:typeof self<"u"?self:typeof window<"u"?window:{});const rv="@firebase/firestore",sv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new yg("@firebase/firestore");function To(){return Ta.logLevel}function me(r,...e){if(Ta.logLevel<=ze.DEBUG){const t=e.map(Eg);Ta.debug(`Firestore (${Fo}): ${r}`,...t)}}function Ps(r,...e){if(Ta.logLevel<=ze.ERROR){const t=e.map(Eg);Ta.error(`Firestore (${Fo}): ${r}`,...t)}}function ko(r,...e){if(Ta.logLevel<=ze.WARN){const t=e.map(Eg);Ta.warn(`Firestore (${Fo}): ${r}`,...t)}}function Eg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,cw(r,i,t)}function cw(r,e,t){let i=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ps(i),new Error(i)}function Ye(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||cw(e,o,i)}function Pe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends js{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fn.UNAUTHENTICATED)))}shutdown(){}}class S1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class A1{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ye(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let c=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Fr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Fr)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ye(typeof i.accessToken=="string",31837,{l:i}),new uw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class x1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class R1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new x1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ye(this.o===void 0,3512);const i=c=>{c.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new iv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=C1(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<t&&(i+=e.charAt(o[c]%62))}return i}}function qe(r,e){return r<e?-1:r>e?1:0}function Ym(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),c=e.charAt(i);if(o!==c)return km(o)===km(c)?qe(o,c):km(o)?1:-1}return qe(r.length,e.length)}const N1=55296,D1=57343;function km(r){const e=r.charCodeAt(0);return e>=N1&&e<=D1}function Mo(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="__name__";class Br{constructor(e,t,i){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&we(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Br.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Br?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const c=Br.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return qe(e.length,t.length)}static compareSegments(e,t){const i=Br.isNumericId(e),o=Br.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Br.extractNumericId(e).compare(Br.extractNumericId(t)):Ym(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ai.fromString(e.substring(4,e.length-2))}}class ct extends Br{construct(e,t,i){return new ct(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new ct(t)}static emptyPath(){return new ct([])}}const P1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Br{construct(e,t,i){return new an(e,t,i)}static isValidIdentifier(e){return P1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===av}static keyField(){return new an([av])}static fromServerFormat(e){const t=[];let i="",o=0;const c=()=>{if(i.length===0)throw new he(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(i+=m,o++):(c(),o++)}if(c(),d)throw new he(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(t)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ct.fromString(e))}static fromName(e){return new Ee(ct.fromString(e).popFirst(5))}static empty(){return new Ee(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(r,e,t){if(!t)throw new he(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function O1(r,e,t,i){if(e===!0&&i===!0)throw new he(W.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ov(r){if(!Ee.isDocumentKey(r))throw new he(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function lv(r){if(Ee.isDocumentKey(r))throw new he(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function hw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function rh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":we(12329,{type:typeof r})}function Pn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rh(r);throw new he(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function k1(r,e){if(e<=0)throw new he(W.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Oc(r,e){if(!hw(r))throw new he(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const d=r[i];if(o&&typeof d!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${i}' field to equal '${c.value}'`;break}}if(t)throw new he(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=-62135596800,uv=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*uv);return new Xe(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<cv)throw new he(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uv}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oc(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:jt("string",Xe._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new Xe(0,0))}static max(){return new Ie(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=-1;function M1(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(i===1e9?new Xe(t+1,0):new Xe(t,i));return new Ii(o,Ee.empty(),e)}function V1(r){return new Ii(r.readTime,r.key,vc)}class Ii{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ii(Ie.min(),Ee.empty(),vc)}static max(){return new Ii(Ie.max(),Ee.empty(),vc)}}function j1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(r.documentKey,e.documentKey),t!==0?t:qe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class U1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==L1)throw r;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,i)=>{t(e)}))}static reject(e){return new te(((t,i)=>{i(e)}))}static waitFor(e){return new te(((t,i)=>{let o=0,c=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++c,d&&c===o&&t()}),(g=>i(g)))})),d=!0,c===o&&t()}))}static or(e){let t=te.resolve(!1);for(const i of e)t=t.next((o=>o?te.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,c)=>{i.push(t.call(this,o,c))})),this.waitFor(i)}static mapArray(e,t){return new te(((i,o)=>{const c=e.length,d=new Array(c);let m=0;for(let g=0;g<c;g++){const _=g;t(e[_]).next((w=>{d[_]=w,++m,m===c&&i(d)}),(w=>o(w)))}}))}static doWhile(e,t){return new te(((i,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):i()};c()}))}}function z1(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=-1;function kc(r){return r==null}function kd(r){return r===0&&1/r==-1/0}function q1(r){return typeof r=="number"&&Number.isInteger(r)&&!kd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="";function B1(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=dv(e)),e=H1(r.get(t),e);return dv(e)}function H1(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const c=r.charAt(o);switch(c){case"\0":t+="";break;case fw:t+="";break;default:t+=c}}return t}function dv(r){return r+fw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Mi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function mw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,t,i,o,c){this.key=e,this.value=t,this.color=i??sn.RED,this.left=o??sn.EMPTY,this.right=c??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,c){return new sn(e??this.key,t??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,i),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return sn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,i,o,c){return this}insert(e,t,i){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fv(this.data.getIterator())}getIteratorFrom(e){return new fv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class fv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new Gn([])}unionWith(e){let t=new Bt(an.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new gw("Invalid base64 string: "+c):c}})(e);return new on(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const F1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(r){if(Ye(!!r,39018),typeof r=="string"){let e=0;const t=F1.exec(r);if(Ye(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Nt(r.seconds),nanos:Nt(r.nanos)}}function Nt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ni(r){return typeof r=="string"?on.fromBase64String(r):on.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="server_timestamp",yw="__type__",_w="__previous_value__",vw="__local_write_time__";function bg(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[yw])==null?void 0:i.stringValue)===pw}function ih(r){const e=r.mapValue.fields[_w];return bg(e)?ih(e):e}function Ec(r){const e=Ci(r.mapValue.fields[vw].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,t,i,o,c,d,m,g,_,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=w}}const Md="(default)";class wc{constructor(e,t){this.projectId=e,this.database=t||Md}static empty(){return new wc("","")}get isDefaultDatabase(){return this.database===Md}isEqual(e){return e instanceof wc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="__type__",Q1="__max__",gd={mapValue:{}},ww="__vector__",Vd="value";function Di(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?bg(r)?4:Y1(r)?9007199254740991:K1(r)?10:11:we(28295,{value:r})}function $r(r,e){if(r===e)return!0;const t=Di(r);if(t!==Di(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ec(r).isEqual(Ec(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=Ci(o.timestampValue),m=Ci(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return Ni(o.bytesValue).isEqual(Ni(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return Nt(o.geoPointValue.latitude)===Nt(c.geoPointValue.latitude)&&Nt(o.geoPointValue.longitude)===Nt(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Nt(o.integerValue)===Nt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=Nt(o.doubleValue),m=Nt(c.doubleValue);return d===m?kd(d)===kd(m):isNaN(d)&&isNaN(m)}return!1})(r,e);case 9:return Mo(r.arrayValue.values||[],e.arrayValue.values||[],$r);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},m=c.mapValue.fields||{};if(hv(d)!==hv(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!$r(d[g],m[g])))return!1;return!0})(r,e);default:return we(52216,{left:r})}}function Tc(r,e){return(r.values||[]).find((t=>$r(t,e)))!==void 0}function Vo(r,e){if(r===e)return 0;const t=Di(r),i=Di(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const m=Nt(c.integerValue||c.doubleValue),g=Nt(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return mv(r.timestampValue,e.timestampValue);case 4:return mv(Ec(r),Ec(e));case 5:return Ym(r.stringValue,e.stringValue);case 6:return(function(c,d){const m=Ni(c),g=Ni(d);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const m=c.split("/"),g=d.split("/");for(let _=0;_<m.length&&_<g.length;_++){const w=qe(m[_],g[_]);if(w!==0)return w}return qe(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const m=qe(Nt(c.latitude),Nt(d.latitude));return m!==0?m:qe(Nt(c.longitude),Nt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return gv(r.arrayValue,e.arrayValue);case 10:return(function(c,d){var A,R,j,Q;const m=c.fields||{},g=d.fields||{},_=(A=m[Vd])==null?void 0:A.arrayValue,w=(R=g[Vd])==null?void 0:R.arrayValue,b=qe(((j=_==null?void 0:_.values)==null?void 0:j.length)||0,((Q=w==null?void 0:w.values)==null?void 0:Q.length)||0);return b!==0?b:gv(_,w)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===gd.mapValue&&d===gd.mapValue)return 0;if(c===gd.mapValue)return 1;if(d===gd.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),_=d.fields||{},w=Object.keys(_);g.sort(),w.sort();for(let b=0;b<g.length&&b<w.length;++b){const A=Ym(g[b],w[b]);if(A!==0)return A;const R=Vo(m[g[b]],_[w[b]]);if(R!==0)return R}return qe(g.length,w.length)})(r.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function mv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return qe(r,e);const t=Ci(r),i=Ci(e),o=qe(t.seconds,i.seconds);return o!==0?o:qe(t.nanos,i.nanos)}function gv(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const c=Vo(t[o],i[o]);if(c)return c}return qe(t.length,i.length)}function jo(r){return Xm(r)}function Xm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Ci(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ni(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ee.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const c of t.values||[])o?o=!1:i+=",",i+=Xm(c);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const d of i)c?c=!1:o+=",",o+=`${d}:${Xm(t.fields[d])}`;return o+"}"})(r.mapValue):we(61005,{value:r})}function bd(r){switch(Di(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ih(r);return e?16+bd(e):16;case 5:return 2*r.stringValue.length;case 6:return Ni(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,c)=>o+bd(c)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Mi(i.fields,((c,d)=>{o+=c.length+bd(d)})),o})(r.mapValue);default:throw we(13486,{value:r})}}function pv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function $m(r){return!!r&&"integerValue"in r}function Sg(r){return!!r&&"arrayValue"in r}function yv(r){return!!r&&"nullValue"in r}function _v(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Sd(r){return!!r&&"mapValue"in r}function K1(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Ew])==null?void 0:i.stringValue)===ww}function dc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Mi(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=dc(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dc(r.arrayValue.values[t]);return e}return{...r}}function Y1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Q1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Sd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dc(t)}setAll(e){let t=an.emptyPath(),i={},o=[];e.forEach(((d,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}d?i[m.lastSegment()]=dc(d):o.push(m.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,i,o)}delete(e){const t=this.field(e.popLast());Sd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Sd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Mi(t,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new Sn(dc(this.value))}}function Tw(r){const e=[];return Mi(r.fields,((t,i)=>{const o=new an([t]);if(Sd(i)){const c=Tw(i.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,i,o,c,d,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new $t(e,0,Ie.min(),Ie.min(),Ie.min(),Sn.empty(),0)}static newFoundDocument(e,t,i,o){return new $t(e,1,t,Ie.min(),i,o,0)}static newNoDocument(e,t){return new $t(e,2,t,Ie.min(),Ie.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Ie.min(),Ie.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t){this.position=e,this.inclusive=t}}function vv(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const c=e[o],d=r.position[o];if(c.field.isKeyField()?i=Ee.comparator(Ee.fromName(d.referenceValue),t.key):i=Vo(d,t.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ev(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!$r(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t="asc"){this.field=e,this.dir=t}}function X1(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{}class Vt extends bw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new W1(e,t,i):t==="array-contains"?new eR(e,i):t==="in"?new tR(e,i):t==="not-in"?new nR(e,i):t==="array-contains-any"?new rR(e,i):new Vt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new J1(e,i):new Z1(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vo(t,this.value)):t!==null&&Di(this.value)===Di(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wr extends bw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new wr(e,t)}matches(e){return Sw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Sw(r){return r.op==="and"}function Aw(r){return $1(r)&&Sw(r)}function $1(r){for(const e of r.filters)if(e instanceof wr)return!1;return!0}function Wm(r){if(r instanceof Vt)return r.field.canonicalString()+r.op.toString()+jo(r.value);if(Aw(r))return r.filters.map((e=>Wm(e))).join(",");{const e=r.filters.map((t=>Wm(t))).join(",");return`${r.op}(${e})`}}function xw(r,e){return r instanceof Vt?(function(i,o){return o instanceof Vt&&i.op===o.op&&i.field.isEqual(o.field)&&$r(i.value,o.value)})(r,e):r instanceof wr?(function(i,o){return o instanceof wr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,d,m)=>c&&xw(d,o.filters[m])),!0):!1})(r,e):void we(19439)}function Rw(r){return r instanceof Vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${jo(t.value)}`})(r):r instanceof wr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Rw).join(" ,")+"}"})(r):"Filter"}class W1 extends Vt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class J1 extends Vt{constructor(e,t){super(e,"in",t),this.keys=Iw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Z1 extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=Iw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Iw(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class eR extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sg(t)&&Tc(t.arrayValue,this.value)}}class tR extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Tc(this.value.arrayValue,t)}}class nR extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tc(this.value.arrayValue,t)}}class rR extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Tc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,t=null,i=[],o=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=d,this.endAt=m,this.Te=null}}function wv(r,e=null,t=[],i=[],o=null,c=null,d=null){return new sR(r,e,t,i,o,c,d)}function Ag(r){const e=Pe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Wm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),kc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>jo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>jo(i))).join(",")),e.Te=t}return e.Te}function xg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!X1(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!xw(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Ev(r.startAt,e.startAt)&&Ev(r.endAt,e.endAt)}function Jm(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t=null,i=[],o=[],c=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function iR(r,e,t,i,o,c,d,m){return new Ko(r,e,t,i,o,c,d,m)}function ah(r){return new Ko(r)}function Tv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Cw(r){return r.collectionGroup!==null}function hc(r){const e=Pe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Bt(an.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new bc(c,i))})),t.has(an.keyField().canonicalString())||e.Ie.push(new bc(an.keyField(),i))}return e.Ie}function Gr(r){const e=Pe(r);return e.Ee||(e.Ee=aR(e,hc(r))),e.Ee}function aR(r,e){if(r.limitType==="F")return wv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new bc(o.field,c)}));const t=r.endAt?new jd(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new jd(r.startAt.position,r.startAt.inclusive):null;return wv(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Zm(r,e){const t=r.filters.concat([e]);return new Ko(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ld(r,e,t){return new Ko(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function oh(r,e){return xg(Gr(r),Gr(e))&&r.limitType===e.limitType}function Nw(r){return`${Ag(Gr(r))}|lt:${r.limitType}`}function bo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Rw(o))).join(", ")}]`),kc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>jo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>jo(o))).join(",")),`Target(${i})`})(Gr(r))}; limitType=${r.limitType})`}function lh(r,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Ee.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(r,e)&&(function(i,o){for(const c of hc(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(d,m,g){const _=vv(d,m,g);return d.inclusive?_<=0:_<0})(i.startAt,hc(i),o)||i.endAt&&!(function(d,m,g){const _=vv(d,m,g);return d.inclusive?_>=0:_>0})(i.endAt,hc(i),o))})(r,e)}function oR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Dw(r){return(e,t)=>{let i=!1;for(const o of hc(r)){const c=lR(o,e,t);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function lR(r,e,t){const i=r.field.isKeyField()?Ee.comparator(e.key,t.key):(function(c,d,m){const g=d.data.field(c),_=m.data.field(c);return g!==null&&_!==null?Vo(g,_):we(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Mi(this.inner,((t,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return mw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=new Et(Ee.comparator);function Os(){return cR}const Pw=new Et(Ee.comparator);function ac(...r){let e=Pw;for(const t of r)e=e.insert(t.key,t);return e}function Ow(r){let e=Pw;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ya(){return fc()}function kw(){return fc()}function fc(){return new Aa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const uR=new Et(Ee.comparator),dR=new Bt(Ee.comparator);function Be(...r){let e=dR;for(const t of r)e=e.add(t);return e}const hR=new Bt(qe);function fR(){return hR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kd(e)?"-0":e}}function Mw(r){return{integerValue:""+r}}function Vw(r,e){return q1(e)?Mw(e):Rg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(){this._=void 0}}function mR(r,e,t){return r instanceof Ud?(function(o,c){const d={fields:{[yw]:{stringValue:pw},[vw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&bg(c)&&(c=ih(c)),c&&(d.fields[_w]=c),{mapValue:d}})(t,e):r instanceof Sc?Lw(r,e):r instanceof Ac?Uw(r,e):(function(o,c){const d=jw(o,c),m=bv(d)+bv(o.Ae);return $m(d)&&$m(o.Ae)?Mw(m):Rg(o.serializer,m)})(r,e)}function gR(r,e,t){return r instanceof Sc?Lw(r,e):r instanceof Ac?Uw(r,e):t}function jw(r,e){return r instanceof xc?(function(i){return $m(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class Ud extends ch{}class Sc extends ch{constructor(e){super(),this.elements=e}}function Lw(r,e){const t=zw(e);for(const i of r.elements)t.some((o=>$r(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Ac extends ch{constructor(e){super(),this.elements=e}}function Uw(r,e){let t=zw(e);for(const i of r.elements)t=t.filter((o=>!$r(o,i)));return{arrayValue:{values:t}}}class xc extends ch{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bv(r){return Nt(r.integerValue||r.doubleValue)}function zw(r){return Sg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,t){this.field=e,this.transform=t}}function yR(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof Sc&&o instanceof Sc||i instanceof Ac&&o instanceof Ac?Mo(i.elements,o.elements,$r):i instanceof xc&&o instanceof xc?$r(i.Ae,o.Ae):i instanceof Ud&&o instanceof Ud})(r.transform,e.transform)}class _R{constructor(e,t){this.version=e,this.transformResults=t}}class mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mn}static exists(e){return new mn(void 0,e)}static updateTime(e){return new mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ad(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class uh{}function qw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Ig(r.key,mn.none()):new Mc(r.key,r.data,mn.none());{const t=r.data,i=Sn.empty();let o=new Bt(an.comparator);for(let c of e.fields)if(!o.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?i.delete(c):i.set(c,d),o=o.add(c)}return new Vi(r.key,i,new Gn(o.toArray()),mn.none())}}function vR(r,e,t){r instanceof Mc?(function(o,c,d){const m=o.value.clone(),g=Av(o.fieldTransforms,c,d.transformResults);m.setAll(g),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(r,e,t):r instanceof Vi?(function(o,c,d){if(!Ad(o.precondition,c))return void c.convertToUnknownDocument(d.version);const m=Av(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(Bw(o)),g.setAll(m),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,t):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function mc(r,e,t,i){return r instanceof Mc?(function(c,d,m,g){if(!Ad(c.precondition,d))return m;const _=c.value.clone(),w=xv(c.fieldTransforms,g,d);return _.setAll(w),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(r,e,t,i):r instanceof Vi?(function(c,d,m,g){if(!Ad(c.precondition,d))return m;const _=xv(c.fieldTransforms,g,d),w=d.data;return w.setAll(Bw(c)),w.setAll(_),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(r,e,t,i):(function(c,d,m){return Ad(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(r,e,t)}function ER(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),c=jw(i.transform,o||null);c!=null&&(t===null&&(t=Sn.empty()),t.set(i.field,c))}return t||null}function Sv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Mo(i,o,((c,d)=>yR(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Mc extends uh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Vi extends uh{constructor(e,t,i,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Bw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Av(r,e,t){const i=new Map;Ye(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const c=r[o],d=c.transform,m=e.data.field(c.field);i.set(c.field,gR(d,m,t[o]))}return i}function xv(r,e,t){const i=new Map;for(const o of r){const c=o.transform,d=t.data.field(o.field);i.set(o.field,mR(c,d,e))}return i}class Ig extends uh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hw extends uh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&vR(c,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=mc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=mc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=kw();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=t.has(o.key)?null:m;const g=qw(d,m);g!==null&&i.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Ie.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,((t,i)=>Sv(t,i)))&&Mo(this.baseMutations,e.baseMutations,((t,i)=>Sv(t,i)))}}class Cg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ye(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return uR})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,i[d].version);return new Cg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Ke;function Fw(r){switch(r){case W.OK:return we(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return we(15467,{code:r})}}function Gw(r){if(r===void 0)return Ps("GRPC error has no .code"),W.UNKNOWN;switch(r){case Mt.OK:return W.OK;case Mt.CANCELLED:return W.CANCELLED;case Mt.UNKNOWN:return W.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return W.INTERNAL;case Mt.UNAVAILABLE:return W.UNAVAILABLE;case Mt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Mt.NOT_FOUND:return W.NOT_FOUND;case Mt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Mt.ABORTED:return W.ABORTED;case Mt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Mt.DATA_LOSS:return W.DATA_LOSS;default:return we(39323,{code:r})}}(Ke=Mt||(Mt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=new Ai([4294967295,4294967295],0);function Rv(r){const e=SR().encode(r),t=new rw;return t.update(e),new Uint8Array(t.digest())}function Iv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ai([t,i],0),new Ai([o,c],0)]}class Ng{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new oc(`Invalid padding: ${t}`);if(i<0)throw new oc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new oc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new oc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ai.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Ai.fromNumber(i)));return o.compare(AR)===1&&(o=new Ai([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Rv(e),[i,o]=Iv(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(i,o,c);if(!this.we(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Ng(c,o,t);return i.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const t=Rv(e),[i,o]=Iv(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(i,o,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,t,i,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Vc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new dh(Ie.min(),o,new Et(qe),Os(),Be())}}class Vc{constructor(e,t,i,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Vc(i,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class Qw{constructor(e,t){this.targetId=e,this.Ce=t}}class Kw{constructor(e,t,i=on.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Cv{constructor(){this.ve=0,this.Fe=Nv(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),i=Be();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:we(38017,{changeType:c})}})),new Vc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Nv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Os(),this.Je=pd(),this.He=pd(),this.Ye=new Et(qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(Jm(c))if(i===0){const d=new Ee(c.path);this.et(t,d,$t.newNoDocument(d,Ie.min()))}else Ye(i===1,20013,{expectedCount:i});else{const d=this._t(t);if(d!==i){const m=this.ut(e),g=m?this.ct(m,e,d):1;if(g!==0){this.it(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,_)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=t;let d,m;try{d=Ni(i).toUint8Array()}catch(g){if(g instanceof gw)return ko("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Ng(d,o,c)}catch(g){return ko(g instanceof oc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((c=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const m=this.ot(d);if(m){if(c.current&&Jm(m.target)){const g=new Ee(m.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,$t.newNoDocument(g,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let i=Be();this.He.forEach(((c,d)=>{let m=!0;d.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new dh(e,t,this.Ye,this.je,i);return this.je=Os(),this.Je=pd(),this.He=pd(),this.Ye=new Et(qe),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Cv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Bt(qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Bt(qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Cv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function pd(){return new Et(Ee.comparator)}function Nv(){return new Et(Ee.comparator)}const RR={asc:"ASCENDING",desc:"DESCENDING"},IR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CR={and:"AND",or:"OR"};class NR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function eg(r,e){return r.useProto3Json||kc(e)?e:{value:e}}function zd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function DR(r,e){return zd(r,e.toTimestamp())}function Qn(r){return Ye(!!r,49232),Ie.fromTimestamp((function(t){const i=Ci(t);return new Xe(i.seconds,i.nanos)})(r))}function Dg(r,e){return tg(r,e).canonicalString()}function tg(r,e){const t=(function(o){return new ct(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Xw(r){const e=ct.fromString(r);return Ye(tT(e),10190,{key:e.toString()}),e}function qd(r,e){return Dg(r.databaseId,e.path)}function gc(r,e){const t=Xw(e);if(t.get(1)!==r.databaseId.projectId)throw new he(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new he(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ee(Ww(t))}function $w(r,e){return Dg(r.databaseId,e)}function PR(r){const e=Xw(r);return e.length===4?ct.emptyPath():Ww(e)}function ng(r){return new ct(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Ww(r){return Ye(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Dv(r,e,t){return{name:qd(r,e),fields:t.value.mapValue.fields}}function OR(r,e){return"found"in e?(function(i,o){Ye(!!o.found,43571),o.found.name,o.found.updateTime;const c=gc(i,o.found.name),d=Qn(o.found.updateTime),m=o.found.createTime?Qn(o.found.createTime):Ie.min(),g=new Sn({mapValue:{fields:o.found.fields}});return $t.newFoundDocument(c,d,m,g)})(r,e):"missing"in e?(function(i,o){Ye(!!o.missing,3894),Ye(!!o.readTime,22933);const c=gc(i,o.missing),d=Qn(o.readTime);return $t.newNoDocument(c,d)})(r,e):we(7234,{result:e})}function kR(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:we(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(_,w){return _.useProto3Json?(Ye(w===void 0||typeof w=="string",58123),on.fromBase64String(w||"")):(Ye(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),on.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(_){const w=_.code===void 0?W.UNKNOWN:Gw(_.code);return new he(w,_.message||"")})(d);t=new Kw(i,o,c,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=gc(r,i.document.name),c=Qn(i.document.updateTime),d=i.document.createTime?Qn(i.document.createTime):Ie.min(),m=new Sn({mapValue:{fields:i.document.fields}}),g=$t.newFoundDocument(o,c,d,m),_=i.targetIds||[],w=i.removedTargetIds||[];t=new xd(_,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=gc(r,i.document),c=i.readTime?Qn(i.readTime):Ie.min(),d=$t.newNoDocument(o,c),m=i.removedTargetIds||[];t=new xd([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=gc(r,i.document),c=i.removedTargetIds||[];t=new xd([],c,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,d=new bR(o,c),m=i.targetId;t=new Qw(m,d)}}return t}function Jw(r,e){let t;if(e instanceof Mc)t={update:Dv(r,e.key,e.value)};else if(e instanceof Ig)t={delete:qd(r,e.key)};else if(e instanceof Vi)t={update:Dv(r,e.key,e.data),updateMask:HR(e.fieldMask)};else{if(!(e instanceof Hw))return we(16599,{Vt:e.type});t={verify:qd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(c,d){const m=d.transform;if(m instanceof Ud)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Sc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ac)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof xc)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw we(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:DR(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:we(27497)})(r,e.precondition)),t}function MR(r,e){return r&&r.length>0?(Ye(e!==void 0,14353),r.map((t=>(function(o,c){let d=o.updateTime?Qn(o.updateTime):Qn(c);return d.isEqual(Ie.min())&&(d=Qn(c)),new _R(d,o.transformResults||[])})(t,e)))):[]}function VR(r,e){return{documents:[$w(r,e.path)]}}function jR(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=$w(r,o);const c=(function(_){if(_.length!==0)return eT(wr.create(_,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(_){if(_.length!==0)return _.map((w=>(function(A){return{field:So(A.field),direction:zR(A.dir)}})(w)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=eg(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:t,parent:o}}function LR(r){let e=PR(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ye(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let c=[];t.where&&(c=(function(b){const A=Zw(b);return A instanceof wr&&Aw(A)?A.getFilters():[A]})(t.where));let d=[];t.orderBy&&(d=(function(b){return b.map((A=>(function(j){return new bc(Ao(j.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(A)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let A;return A=typeof b=="object"?b.value:b,kc(A)?null:A})(t.limit));let g=null;t.startAt&&(g=(function(b){const A=!!b.before,R=b.values||[];return new jd(R,A)})(t.startAt));let _=null;return t.endAt&&(_=(function(b){const A=!b.before,R=b.values||[];return new jd(R,A)})(t.endAt)),iR(e,o,d,c,m,"F",g,_)}function UR(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Zw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ao(t.unaryFilter.field);return Vt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Ao(t.unaryFilter.field);return Vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ao(t.unaryFilter.field);return Vt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ao(t.unaryFilter.field);return Vt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Vt.create(Ao(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return wr.create(t.compositeFilter.filters.map((i=>Zw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(r):we(30097,{filter:r})}function zR(r){return RR[r]}function qR(r){return IR[r]}function BR(r){return CR[r]}function So(r){return{fieldPath:r.canonicalString()}}function Ao(r){return an.fromServerFormat(r.fieldPath)}function eT(r){return r instanceof Vt?(function(t){if(t.op==="=="){if(_v(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NAN"}};if(yv(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_v(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NAN"}};if(yv(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(t.field),op:qR(t.op),value:t.value}}})(r):r instanceof wr?(function(t){const i=t.getFilters().map((o=>eT(o)));return i.length===1?i[0]:{compositeFilter:{op:BR(t.op),filters:i}}})(r):we(54877,{filter:r})}function HR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function tT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,t,i,o,c=Ie.min(),d=Ie.min(),m=on.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.yt=e}}function GR(r){const e=LR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ld(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.Cn=new KR}addToCollectionParentIndex(e,t){return this.Cn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Ii.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Ii.min())}updateCollectionGroup(e,t,i){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class KR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Bt(ct.comparator),c=!o.has(i);return this.index[t]=o.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Bt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nT=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(nT,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lo(0)}static cr(){return new Lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="LruGarbageCollector",YR=1048576;function kv([r,e],[t,i]){const o=qe(r,t);return o===0?qe(e,i):o}class XR{constructor(e){this.Ir=e,this.buffer=new Bt(kv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();kv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $R{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(Ov,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qo(t)?me(Ov,"Ignoring IndexedDB error during garbage collection: ",t):await Go(t)}await this.Vr(3e5)}))}}class WR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(sh.ce);const i=new XR(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(Pv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,c,d,m,g,_;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,d=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(i=b,m=Date.now(),this.removeTargets(e,i,t)))).next((b=>(c=b,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(_=Date.now(),To()<=ze.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(_-g)+`ms
Total Duration: ${_-w}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:b}))))}}function JR(r,e){return new WR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.changes=new Aa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&mc(i.mutation,o,Gn.empty(),Xe.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Be()){const o=ya();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((c=>{let d=ac();return c.forEach(((m,g)=>{d=d.insert(m,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=ya();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Be())))}populateOverlays(e,t,i){const o=[];return i.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,m)=>{t.set(d,m)}))}))}computeViews(e,t,i,o){let c=Os();const d=fc(),m=(function(){return fc()})();return t.forEach(((g,_)=>{const w=i.get(_.key);o.has(_.key)&&(w===void 0||w.mutation instanceof Vi)?c=c.insert(_.key,_):w!==void 0?(d.set(_.key,w.mutation.getFieldMask()),mc(w.mutation,_,w.mutation.getFieldMask(),Xe.now())):d.set(_.key,Gn.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((_,w)=>d.set(_,w))),t.forEach(((_,w)=>m.set(_,new eI(w,d.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=fc();let o=new Et(((d,m)=>d-m)),c=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const m of d)m.keys().forEach((g=>{const _=t.get(g);if(_===null)return;let w=i.get(g)||Gn.empty();w=m.applyToLocalView(_,w),i.set(g,w);const b=(o.get(m.batchId)||Be()).add(g);o=o.insert(m.batchId,b)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,w=g.value,b=kw();w.forEach((A=>{if(!c.has(A)){const R=qw(t.get(A),i.get(A));R!==null&&b.set(A,R),c=c.add(A)}})),d.push(this.documentOverlayCache.saveOverlays(e,_,b))}return te.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(d){return Ee.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-c.size):te.resolve(ya());let m=vc,g=c;return d.next((_=>te.forEach(_,((w,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),c.get(w)?te.resolve():this.remoteDocumentCache.getEntry(e,w).next((A=>{g=g.insert(w,A)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,g,_,Be()))).next((w=>({batchId:m,changes:Ow(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=ac();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const c=t.collectionGroup;let d=ac();return this.indexManager.getCollectionParents(e,c).next((m=>te.forEach(m,(g=>{const _=(function(b,A){return new Ko(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next((w=>{w.forEach(((b,A)=>{d=d.insert(b,A)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,c,o)))).next((d=>{c.forEach(((g,_)=>{const w=_.getKey();d.get(w)===null&&(d=d.insert(w,$t.newInvalidDocument(w)))}));let m=ac();return d.forEach(((g,_)=>{const w=c.get(g);w!==void 0&&mc(w.mutation,_,Gn.empty(),Xe.now()),lh(t,_)&&(m=m.insert(g,_))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Qn(o.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:GR(o.bundledQuery),readTime:Qn(o.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.overlays=new Et(Ee.comparator),this.qr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ya();return te.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,c)=>{this.St(e,t,c)})),te.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(i)),te.resolve()}getOverlaysForCollection(e,t,i){const o=ya(),c=t.length+1,d=new Ee(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===c&&g.largestBatchId>i&&o.set(g.getKey(),g)}return te.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let c=new Et(((_,w)=>_-w));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let w=c.get(_.largestBatchId);w===null&&(w=ya(),c=c.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const m=ya(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,w)=>m.set(_,w))),!(m.size()>=o)););return te.resolve(m)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new TR(t,i));let c=this.qr.get(t);c===void 0&&(c=Be(),this.qr.set(t,c)),this.qr.set(t,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(){this.Qr=new Bt(Xt.$r),this.Ur=new Bt(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Xt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Xt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ee(new ct([])),i=new Xt(t,e),o=new Xt(t,e+1),c=[];return this.Ur.forEachInRange([i,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new ct([])),i=new Xt(t,e),o=new Xt(t,e+1);let c=Be();return this.Ur.forEachInRange([i,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new Xt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Xt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||qe(e.Yr,t.Yr)}static Kr(e,t){return qe(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Bt(Xt.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new wR(c,t,i,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new Xt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return te.resolve(d)}lookupMutationBatch(e,t){return te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),c=o<0?0:o;return te.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Tg:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Xt(t,0),o=new Xt(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,o],(d=>{const m=this.Xr(d.Yr);c.push(m)})),te.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Bt(qe);return t.forEach((o=>{const c=new Xt(o,0),d=new Xt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(m=>{i=i.add(m.Yr)}))})),te.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let c=i;Ee.isDocumentKey(c)||(c=c.child(""));const d=new Xt(new Ee(c),0);let m=new Bt(qe);return this.Zr.forEachWhile((g=>{const _=g.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Yr)),!0)}),d),te.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ye(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return te.forEach(t.mutations,(o=>{const c=new Xt(o.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Xt(t,0),o=this.Zr.firstAfterOrEqual(i);return te.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.ri=e,this.docs=(function(){return new Et(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),c=o?o.size:0,d=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return te.resolve(i?i.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let i=Os();return t.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():$t.newInvalidDocument(o))})),te.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let c=Os();const d=t.path,m=new Ee(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:w}}=g.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||j1(V1(w),i)<=0||(o.has(w.key)||lh(t,w))&&(c=c.insert(w.key,w.mutableCopy()))}return te.resolve(c)}getAllFromCollectionGroup(e,t,i,o){we(9500)}ii(e,t){return te.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new oI(this)}getSize(e){return te.resolve(this.size)}}class oI extends ZR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.persistence=e,this.si=new Aa((t=>Ag(t)),xg),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new Pg,this.targetCount=0,this.ai=Lo.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Lo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Pr(t),te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,i){let o=0;const c=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),te.waitFor(c).next((()=>o))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return te.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),te.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),te.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return te.resolve(i)}containsKey(e,t){return te.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,t){this.ui={},this.overlays={},this.ci=new sh(0),this.li=!1,this.li=!0,this.hi=new sI,this.referenceDelegate=e(this),this.Pi=new lI(this),this.indexManager=new QR,this.remoteDocumentCache=(function(o){return new aI(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new FR(t),this.Ii=new nI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new iI(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){me("MemoryPersistence","Starting transaction:",e);const o=new cI(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return te.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class cI extends U1{constructor(e){super(),this.currentSequenceNumber=e}}class Og{constructor(e){this.persistence=e,this.Ri=new Pg,this.Vi=null}static mi(e){return new Og(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),te.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(i=>{const o=Ee.fromPath(i);return this.gi(e,o).next((c=>{c||t.removeEntry(o,Ie.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return te.or([()=>te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Bd{constructor(e,t){this.persistence=e,this.pi=new Aa((i=>B1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=JR(this,t)}static mi(e,t){return new Bd(e,t)}Ei(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return te.forEach(this.pi,((i,o)=>this.br(e,i,o).next((c=>c?te.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,t).next((m=>{m||(i++,c.removeEntry(d,Ie.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),te.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bd(e.data.value)),t}br(e,t,i){return te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return te.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Be(),o=Be();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new kg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return rx()?8:z1(gn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,o,i).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new uI;return this.Ss(e,t,d).next((m=>{if(c.result=m,this.Vs)return this.bs(e,t,d,m.size)}))})).next((()=>c.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(To()<=ze.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(To()<=ze.DEBUG&&me("QueryEngine","Query:",bo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(To()<=ze.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(t))):te.resolve())}ys(e,t){if(Tv(t))return te.resolve(null);let i=Gr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Ld(t,null,"F"),i=Gr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const d=Be(...c);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const _=this.Ds(t,m);return this.Cs(t,_,d,g.readTime)?this.ys(e,Ld(t,null,"F")):this.vs(e,_,t,g)}))))})))))}ws(e,t,i,o){return Tv(t)||o.isEqual(Ie.min())?te.resolve(null):this.ps.getDocuments(e,i).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,i,o)?te.resolve(null):(To()<=ze.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(t)),this.vs(e,d,t,M1(o,vc)).next((m=>m)))}))}Ds(e,t){let i=new Bt(Dw(e));return t.forEach(((o,c)=>{lh(e,c)&&(i=i.add(c))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,i){return To()<=ze.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",bo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ii.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="LocalStore",hI=3e8;class fI{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Et(qe),this.xs=new Aa((c=>Ag(c)),xg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function mI(r,e,t,i){return new fI(r,e,t,i)}async function sT(r,e){const t=Pe(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((c=>{const d=[],m=[];let g=Be();for(const _ of o){d.push(_.batchId);for(const w of _.mutations)g=g.add(w.key)}for(const _ of c){m.push(_.batchId);for(const w of _.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(i,g).next((_=>({Ls:_,removedBatchIds:d,addedBatchIds:m})))}))}))}function gI(r,e){const t=Pe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,_,w){const b=_.batch,A=b.keys();let R=te.resolve();return A.forEach((j=>{R=R.next((()=>w.getEntry(g,j))).next((Q=>{const B=_.docVersions.get(j);Ye(B!==null,48541),Q.version.compareTo(B)<0&&(b.applyToRemoteDocument(Q,_),Q.isValidDocument()&&(Q.setReadTime(_.commitVersion),w.addEntry(Q)))}))})),R.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(t,i,e,c).next((()=>c.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=Be();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function iT(r){const e=Pe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function pI(r,e){const t=Pe(r),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((w,b)=>{const A=o.get(b);if(!A)return;m.push(t.Pi.removeMatchingKeys(c,w.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(c,w.addedDocuments,b))));let R=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?R=R.withResumeToken(on.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):w.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(w.resumeToken,i)),o=o.insert(b,R),(function(Q,B,ie){return Q.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=hI?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(A,R,w)&&m.push(t.Pi.updateTargetData(c,R))}));let g=Os(),_=Be();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,w))})),m.push(yI(c,d,e.documentUpdates).next((w=>{g=w.ks,_=w.qs}))),!i.isEqual(Ie.min())){const w=t.Pi.getLastRemoteSnapshotVersion(c).next((b=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i)));m.push(w)}return te.waitFor(m).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,_))).next((()=>g))})).then((c=>(t.Ms=o,c)))}function yI(r,e,t){let i=Be(),o=Be();return t.forEach((c=>i=i.add(c))),e.getEntries(r,i).next((c=>{let d=Os();return t.forEach(((m,g)=>{const _=c.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ie.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):me(Mg,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)})),{ks:d,qs:o}}))}function _I(r,e){const t=Pe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Tg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function vI(r,e){const t=Pe(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((c=>c?(o=c,te.resolve(o)):t.Pi.allocateTargetId(i).next((d=>(o=new Ei(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function rg(r,e,t){const i=Pe(r),o=i.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",c,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Qo(d))throw d;me(Mg,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Mv(r,e,t){const i=Pe(r);let o=Ie.min(),c=Be();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,_,w){const b=Pe(g),A=b.xs.get(w);return A!==void 0?te.resolve(b.Ms.get(A)):b.Pi.getTargetData(_,w)})(i,d,Gr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,m.targetId).next((g=>{c=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,t?o:Ie.min(),t?c:Be()))).next((m=>(EI(i,oR(e),m),{documents:m,Qs:c})))))}function EI(r,e,t){let i=r.Os.get(e)||Ie.min();t.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),r.Os.set(e,i)}class Vv{constructor(){this.activeTargetIds=fR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wI{constructor(){this.Mo=new Vv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Vv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="ConnectivityMonitor";class Lv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(jv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(jv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd=null;function sg(){return yd===null?yd=(function(){return 268435456+Math.round(2147483648*Math.random())})():yd++,"0x"+yd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="RestConnection",bI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Md?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,c){const d=sg(),m=this.zo(e,t.toUriEncodedString());me(Mm,`Sending RPC '${e}' ${d}:`,m,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:_}=new URL(m),w=Bo(_);return this.Jo(e,m,g,i,w).then((b=>(me(Mm,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw ko(Mm,`RPC '${e}' ${d} failed with error: `,b,"url: ",m,"request:",i),b}))}Ho(e,t,i,o,c,d){return this.Go(e,t,i,o,c)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),i&&i.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const i=bI[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class xI extends SI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,c){const d=sg();return new Promise(((m,g)=>{const _=new sw;_.setWithCredentials(!0),_.listenOnce(iw.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Td.NO_ERROR:const b=_.getResponseJson();me(un,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),m(b);break;case Td.TIMEOUT:me(un,`RPC '${e}' ${d} timed out`),g(new he(W.DEADLINE_EXCEEDED,"Request time out"));break;case Td.HTTP_ERROR:const A=_.getStatus();if(me(un,`RPC '${e}' ${d} failed with status:`,A,"response text:",_.getResponseText()),A>0){let R=_.getResponseJson();Array.isArray(R)&&(R=R[0]);const j=R==null?void 0:R.error;if(j&&j.status&&j.message){const Q=(function(ie){const ae=ie.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ae)>=0?ae:W.UNKNOWN})(j.status);g(new he(Q,j.message))}else g(new he(W.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new he(W.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{me(un,`RPC '${e}' ${d} completed.`)}}));const w=JSON.stringify(o);me(un,`RPC '${e}' ${d} sending request:`,o),_.send(t,"POST",w,i,15)}))}T_(e,t,i){const o=sg(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=lw(),m=ow(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const w=c.join("");me(un,`Creating RPC '${e}' stream ${o}: ${w}`,g);const b=d.createWebChannel(w,g);this.I_(b);let A=!1,R=!1;const j=new AI({Yo:B=>{R?me(un,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(A||(me(un,`Opening RPC '${e}' stream ${o} transport.`),b.open(),A=!0),me(un,`RPC '${e}' stream ${o} sending:`,B),b.send(B))},Zo:()=>b.close()}),Q=(B,ie,ae)=>{B.listen(ie,(oe=>{try{ae(oe)}catch(ge){setTimeout((()=>{throw ge}),0)}}))};return Q(b,ic.EventType.OPEN,(()=>{R||(me(un,`RPC '${e}' stream ${o} transport opened.`),j.o_())})),Q(b,ic.EventType.CLOSE,(()=>{R||(R=!0,me(un,`RPC '${e}' stream ${o} transport closed`),j.a_(),this.E_(b))})),Q(b,ic.EventType.ERROR,(B=>{R||(R=!0,ko(un,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),j.a_(new he(W.UNAVAILABLE,"The operation could not be completed")))})),Q(b,ic.EventType.MESSAGE,(B=>{var ie;if(!R){const ae=B.data[0];Ye(!!ae,16349);const oe=ae,ge=(oe==null?void 0:oe.error)||((ie=oe[0])==null?void 0:ie.error);if(ge){me(un,`RPC '${e}' stream ${o} received error:`,ge);const ce=ge.status;let G=(function(I){const k=Mt[I];if(k!==void 0)return Gw(k)})(ce),N=ge.message;G===void 0&&(G=W.INTERNAL,N="Unknown error status: "+ce+" with message "+ge.message),R=!0,j.a_(new he(G,N)),b.close()}else me(un,`RPC '${e}' stream ${o} received:`,ae),j.u_(ae)}})),Q(m,aw.STAT_EVENT,(B=>{B.stat===Km.PROXY?me(un,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===Km.NOPROXY&&me(un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(r){return new NR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,t,i=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="PersistentStream";class aT{constructor(e,t,i,o,c,d,m,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Vg(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Ps(t.toString()),Ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new he(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(Uv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(me(Uv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class RI extends aT{constructor(e,t,i,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=kR(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Ie.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ie.min():d.readTime?Qn(d.readTime):Ie.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=ng(this.serializer),t.addTarget=(function(c,d){let m;const g=d.target;if(m=Jm(g)?{documents:VR(c,g)}:{query:jR(c,g).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=Yw(c,d.resumeToken);const _=eg(c,d.expectedCount);_!==null&&(m.expectedCount=_)}else if(d.snapshotVersion.compareTo(Ie.min())>0){m.readTime=zd(c,d.snapshotVersion.toTimestamp());const _=eg(c,d.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const i=UR(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=ng(this.serializer),t.removeTarget=e,this.q_(t)}}class II extends aT{constructor(e,t,i,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=MR(e.writeResults,e.commitTime),i=Qn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=ng(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Jw(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{}class NI extends CI{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,tg(t,i),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(W.UNKNOWN,c.toString())}))}Ho(e,t,i,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,tg(t,i),o,d,m,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new he(W.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class DI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ps(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="RemoteStore";class PI{constructor(e,t,i,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{xa(this)&&(me(ba,"Restarting streams for network reachability change."),await(async function(g){const _=Pe(g);_.Ea.add(4),await jc(_),_.Ra.set("Unknown"),_.Ea.delete(4),await fh(_)})(this))}))})),this.Ra=new DI(i,o)}}async function fh(r){if(xa(r))for(const e of r.da)await e(!0)}async function jc(r){for(const e of r.da)await e(!1)}function oT(r,e){const t=Pe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),zg(t)?Ug(t):Yo(t).O_()&&Lg(t,e))}function jg(r,e){const t=Pe(r),i=Yo(t);t.Ia.delete(e),i.O_()&&lT(t,e),t.Ia.size===0&&(i.O_()?i.L_():xa(t)&&t.Ra.set("Unknown"))}function Lg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yo(r).Y_(e)}function lT(r,e){r.Va.Ue(e),Yo(r).Z_(e)}function Ug(r){r.Va=new xR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Yo(r).start(),r.Ra.ua()}function zg(r){return xa(r)&&!Yo(r).x_()&&r.Ia.size>0}function xa(r){return Pe(r).Ea.size===0}function cT(r){r.Va=void 0}async function OI(r){r.Ra.set("Online")}async function kI(r){r.Ia.forEach(((e,t)=>{Lg(r,e)}))}async function MI(r,e){cT(r),zg(r)?(r.Ra.ha(e),Ug(r)):r.Ra.set("Unknown")}async function VI(r,e,t){if(r.Ra.set("Online"),e instanceof Kw&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(i){me(ba,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Hd(r,i)}else if(e instanceof xd?r.Va.Ze(e):e instanceof Qw?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ie.min()))try{const i=await iT(r.localStore);t.compareTo(i)>=0&&await(function(c,d){const m=c.Va.Tt(d);return m.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const w=c.Ia.get(_);w&&c.Ia.set(_,w.withResumeToken(g.resumeToken,d))}})),m.targetMismatches.forEach(((g,_)=>{const w=c.Ia.get(g);if(!w)return;c.Ia.set(g,w.withResumeToken(on.EMPTY_BYTE_STRING,w.snapshotVersion)),lT(c,g);const b=new Ei(w.target,g,_,w.sequenceNumber);Lg(c,b)})),c.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(i){me(ba,"Failed to raise snapshot:",i),await Hd(r,i)}}async function Hd(r,e,t){if(!Qo(e))throw e;r.Ea.add(1),await jc(r),r.Ra.set("Offline"),t||(t=()=>iT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{me(ba,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await fh(r)}))}function uT(r,e){return e().catch((t=>Hd(r,t,e)))}async function mh(r){const e=Pe(r),t=Pi(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Tg;for(;jI(e);)try{const o=await _I(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,LI(e,o)}catch(o){await Hd(e,o)}dT(e)&&hT(e)}function jI(r){return xa(r)&&r.Ta.length<10}function LI(r,e){r.Ta.push(e);const t=Pi(r);t.O_()&&t.X_&&t.ea(e.mutations)}function dT(r){return xa(r)&&!Pi(r).x_()&&r.Ta.length>0}function hT(r){Pi(r).start()}async function UI(r){Pi(r).ra()}async function zI(r){const e=Pi(r);for(const t of r.Ta)e.ea(t.mutations)}async function qI(r,e,t){const i=r.Ta.shift(),o=Cg.from(i,e,t);await uT(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await mh(r)}async function BI(r,e){e&&Pi(r).X_&&await(async function(i,o){if((function(d){return Fw(d)&&d!==W.ABORTED})(o.code)){const c=i.Ta.shift();Pi(i).B_(),await uT(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await mh(i)}})(r,e),dT(r)&&hT(r)}async function zv(r,e){const t=Pe(r);t.asyncQueue.verifyOperationInProgress(),me(ba,"RemoteStore received new credentials");const i=xa(t);t.Ea.add(3),await jc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await fh(t)}async function HI(r,e){const t=Pe(r);e?(t.Ea.delete(2),await fh(t)):e||(t.Ea.add(2),await jc(t),t.Ra.set("Unknown"))}function Yo(r){return r.ma||(r.ma=(function(t,i,o){const c=Pe(t);return c.sa(),new RI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:OI.bind(null,r),t_:kI.bind(null,r),r_:MI.bind(null,r),H_:VI.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),zg(r)?Ug(r):r.Ra.set("Unknown")):(await r.ma.stop(),cT(r))}))),r.ma}function Pi(r){return r.fa||(r.fa=(function(t,i,o){const c=Pe(t);return c.sa(),new II(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:UI.bind(null,r),r_:BI.bind(null,r),ta:zI.bind(null,r),na:qI.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await mh(r)):(await r.fa.stop(),r.Ta.length>0&&(me(ba,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,t,i,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,c){const d=Date.now()+i,m=new qg(e,t,d,o,c);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bg(r,e){if(Ps("AsyncQueue",`${e}: ${r}`),Qo(r))return new he(W.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=ac(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Co;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.ga=new Et(Ee.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Uo{constructor(e,t,i,o,c,d,m,g,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,c){const d=[];return t.forEach((m=>{d.push({type:0,doc:m})})),new Uo(e,t,Co.emptySet(t),d,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class GI{constructor(){this.queries=Bv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Pe(t),c=o.queries;o.queries=Bv(),c.forEach(((d,m)=>{for(const g of m.Sa)g.onError(i)}))})(this,new he(W.ABORTED,"Firestore shutting down"))}}function Bv(){return new Aa((r=>Nw(r)),oh)}async function Hg(r,e){const t=Pe(r);let i=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(i=2):(c=new FI,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=Bg(d,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Gg(t)}async function Fg(r,e){const t=Pe(r),i=e.query;let o=3;const c=t.queries.get(i);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function QI(r,e){const t=Pe(r);let i=!1;for(const o of e){const c=o.query,d=t.queries.get(c);if(d){for(const m of d.Sa)m.Fa(o)&&(i=!0);d.wa=o}}i&&Gg(t)}function KI(r,e,t){const i=Pe(r),o=i.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);i.queries.delete(e)}function Gg(r){r.Ca.forEach((e=>{e.next()}))}var ig,Hv;(Hv=ig||(ig={})).Ma="default",Hv.Cache="cache";class Qg{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Uo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ig.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.key=e}}class mT{constructor(e){this.key=e}}class YI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=Dw(e),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new qv,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,b)=>{const A=o.get(w),R=lh(this.query,b)?b:null,j=!!A&&this.mutatedKeys.has(A.key),Q=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let B=!1;A&&R?A.data.isEqual(R.data)?j!==Q&&(i.track({type:3,doc:R}),B=!0):this.su(A,R)||(i.track({type:2,doc:R}),B=!0,(g&&this.eu(R,g)>0||_&&this.eu(R,_)<0)&&(m=!0)):!A&&R?(i.track({type:0,doc:R}),B=!0):A&&!R&&(i.track({type:1,doc:A}),B=!0,(g||_)&&(m=!0)),B&&(R?(d=d.add(R),c=Q?c.add(w):c.delete(w)):(d=d.delete(w),c=c.delete(w)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),c=c.delete(w.key),i.track({type:1,doc:w})}return{tu:d,iu:i,Cs:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((w,b)=>(function(R,j){const Q=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:B})}};return Q(R)-Q(j)})(w.type,b.type)||this.eu(w.doc,b.doc))),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,_=g!==this.Za;return this.Za=g,d.length!==0||_?{snapshot:new Uo(this.query,e.tu,c,d,e.mutatedKeys,g===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new mT(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new fT(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Uo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Kg="SyncEngine";class XI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class $I{constructor(e){this.key=e,this.hu=!1}}class WI{constructor(e,t,i,o,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Aa((m=>Nw(m)),oh),this.Iu=new Map,this.Eu=new Set,this.du=new Et(Ee.comparator),this.Au=new Map,this.Ru=new Pg,this.Vu={},this.mu=new Map,this.fu=Lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function JI(r,e,t=!0){const i=ET(r);let o;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await gT(i,e,t,!0),o}async function ZI(r,e){const t=ET(r);await gT(t,e,!0,!1)}async function gT(r,e,t,i){const o=await vI(r.localStore,Gr(e)),c=o.targetId,d=r.sharedClientState.addLocalQueryTarget(c,t);let m;return i&&(m=await eC(r,e,c,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&oT(r.remoteStore,o),m}async function eC(r,e,t,i,o){r.pu=(b,A,R)=>(async function(Q,B,ie,ae){let oe=B.view.ru(ie);oe.Cs&&(oe=await Mv(Q.localStore,B.query,!1).then((({documents:N})=>B.view.ru(N,oe))));const ge=ae&&ae.targetChanges.get(B.targetId),ce=ae&&ae.targetMismatches.get(B.targetId)!=null,G=B.view.applyChanges(oe,Q.isPrimaryClient,ge,ce);return Gv(Q,B.targetId,G.au),G.snapshot})(r,b,A,R);const c=await Mv(r.localStore,e,!0),d=new YI(e,c.Qs),m=d.ru(c.documents),g=Vc.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),_=d.applyChanges(m,r.isPrimaryClient,g);Gv(r,t,_.au);const w=new XI(e,t,d);return r.Tu.set(e,w),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),_.snapshot}async function tC(r,e,t){const i=Pe(r),o=i.Tu.get(e),c=i.Iu.get(o.targetId);if(c.length>1)return i.Iu.set(o.targetId,c.filter((d=>!oh(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await rg(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&jg(i.remoteStore,o.targetId),ag(i,o.targetId)})).catch(Go)):(ag(i,o.targetId),await rg(i.localStore,o.targetId,!0))}async function nC(r,e){const t=Pe(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),jg(t.remoteStore,i.targetId))}async function rC(r,e,t){const i=uC(r);try{const o=await(function(d,m){const g=Pe(d),_=Xe.now(),w=m.reduce(((R,j)=>R.add(j.key)),Be());let b,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let j=Os(),Q=Be();return g.Ns.getEntries(R,w).next((B=>{j=B,j.forEach(((ie,ae)=>{ae.isValidDocument()||(Q=Q.add(ie))}))})).next((()=>g.localDocuments.getOverlayedDocuments(R,j))).next((B=>{b=B;const ie=[];for(const ae of m){const oe=ER(ae,b.get(ae.key).overlayedDocument);oe!=null&&ie.push(new Vi(ae.key,oe,Tw(oe.value.mapValue),mn.exists(!0)))}return g.mutationQueue.addMutationBatch(R,_,ie,m)})).next((B=>{A=B;const ie=B.applyToLocalDocumentSet(b,Q);return g.documentOverlayCache.saveOverlays(R,B.batchId,ie)}))})).then((()=>({batchId:A.batchId,changes:Ow(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,m,g){let _=d.Vu[d.currentUser.toKey()];_||(_=new Et(qe)),_=_.insert(m,g),d.Vu[d.currentUser.toKey()]=_})(i,o.batchId,t),await Lc(i,o.changes),await mh(i.remoteStore)}catch(o){const c=Bg(o,"Failed to persist write");t.reject(c)}}async function pT(r,e){const t=Pe(r);try{const i=await pI(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=t.Au.get(c);d&&(Ye(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Ye(d.hu,14607):o.removedDocuments.size>0&&(Ye(d.hu,42227),d.hu=!1))})),await Lc(t,i,e)}catch(i){await Go(i)}}function Fv(r,e,t){const i=Pe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((c,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const g=Pe(d);g.onlineState=m;let _=!1;g.queries.forEach(((w,b)=>{for(const A of b.Sa)A.va(m)&&(_=!0)})),_&&Gg(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function sC(r,e,t){const i=Pe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),c=o&&o.key;if(c){let d=new Et(Ee.comparator);d=d.insert(c,$t.newNoDocument(c,Ie.min()));const m=Be().add(c),g=new dh(Ie.min(),new Map,new Et(qe),d,m);await pT(i,g),i.du=i.du.remove(c),i.Au.delete(e),Yg(i)}else await rg(i.localStore,e,!1).then((()=>ag(i,e,t))).catch(Go)}async function iC(r,e){const t=Pe(r),i=e.batch.batchId;try{const o=await gI(t.localStore,e);_T(t,i,null),yT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Lc(t,o)}catch(o){await Go(o)}}async function aC(r,e,t){const i=Pe(r);try{const o=await(function(d,m){const g=Pe(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let w;return g.mutationQueue.lookupMutationBatch(_,m).next((b=>(Ye(b!==null,37113),w=b.keys(),g.mutationQueue.removeMutationBatch(_,b)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,w,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w))).next((()=>g.localDocuments.getDocuments(_,w)))}))})(i.localStore,e);_T(i,e,t),yT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Lc(i,o)}catch(o){await Go(o)}}function yT(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function _T(r,e,t){const i=Pe(r);let o=i.Vu[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function ag(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||vT(r,i)}))}function vT(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(jg(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Yg(r))}function Gv(r,e,t){for(const i of t)i instanceof fT?(r.Ru.addReference(i.key,e),oC(r,i)):i instanceof mT?(me(Kg,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||vT(r,i.key)):we(19791,{wu:i})}function oC(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(me(Kg,"New document in limbo: "+t),r.Eu.add(i),Yg(r))}function Yg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ee(ct.fromString(e)),i=r.fu.next();r.Au.set(i,new $I(t)),r.du=r.du.insert(t,i),oT(r.remoteStore,new Ei(Gr(ah(t.path)),i,"TargetPurposeLimboResolution",sh.ce))}}async function Lc(r,e,t){const i=Pe(r),o=[],c=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,g)=>{d.push(i.pu(g,e,t).then((_=>{var w;if((_||t)&&i.isPrimaryClient){const b=_?!_.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:w.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(_){o.push(_);const b=kg.As(g.targetId,_);c.push(b)}})))})),await Promise.all(d),i.Pu.H_(o),await(async function(g,_){const w=Pe(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>te.forEach(_,(A=>te.forEach(A.Es,(R=>w.persistence.referenceDelegate.addReference(b,A.targetId,R))).next((()=>te.forEach(A.ds,(R=>w.persistence.referenceDelegate.removeReference(b,A.targetId,R)))))))))}catch(b){if(!Qo(b))throw b;me(Mg,"Failed to update sequence numbers: "+b)}for(const b of _){const A=b.targetId;if(!b.fromCache){const R=w.Ms.get(A),j=R.snapshotVersion,Q=R.withLastLimboFreeSnapshotVersion(j);w.Ms=w.Ms.insert(A,Q)}}})(i.localStore,c))}async function lC(r,e){const t=Pe(r);if(!t.currentUser.isEqual(e)){me(Kg,"User change. New user:",e.toKey());const i=await sT(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new he(W.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Lc(t,i.Ls)}}function cC(r,e){const t=Pe(r),i=t.Au.get(e);if(i&&i.hu)return Be().add(i.key);{let o=Be();const c=t.Iu.get(e);if(!c)return o;for(const d of c){const m=t.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function ET(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=pT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sC.bind(null,e),e.Pu.H_=QI.bind(null,e.eventManager),e.Pu.yu=KI.bind(null,e.eventManager),e}function uC(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aC.bind(null,e),e}class Fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return mI(this.persistence,new dI,e.initialUser,this.serializer)}Cu(e){return new rT(Og.mi,this.serializer)}Du(e){return new wI}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fd.provider={build:()=>new Fd};class dC extends Fd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ye(this.persistence.referenceDelegate instanceof Bd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new $R(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new rT((i=>Bd.mi(i,t)),this.serializer)}}class og{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Fv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lC.bind(null,this.syncEngine),await HI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new GI})()}createDatastore(e){const t=hh(e.databaseInfo.databaseId),i=(function(c){return new xI(c)})(e.databaseInfo);return(function(c,d,m,g){return new NI(c,d,m,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,c,d,m){return new PI(i,o,c,d,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Fv(this.syncEngine,t,0)),(function(){return Lv.v()?new Lv:new TI})())}createSyncEngine(e,t){return(function(o,c,d,m,g,_,w){const b=new WI(o,c,d,m,g,_);return w&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const c=Pe(o);me(ba,"RemoteStore shutting down."),c.Ea.add(5),await jc(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}og.provider={build:()=>new og};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ps("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new he(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,c){const d=Pe(o),m={documents:c.map((b=>qd(d.serializer,b)))},g=await d.Ho("BatchGetDocuments",d.serializer.databaseId,ct.emptyPath(),m,c.length),_=new Map;g.forEach((b=>{const A=OR(d.serializer,b);_.set(A.key.toString(),A)}));const w=[];return c.forEach((b=>{const A=_.get(b.toString());Ye(!!A,55234,{key:b}),w.push(A)})),w})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ig(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const o=Ee.fromPath(i);this.mutations.push(new Hw(o,this.precondition(o)))})),await(async function(i,o){const c=Pe(i),d={writes:o.map((m=>Jw(c.serializer,m)))};await c.Go("Commit",c.serializer.databaseId,ct.emptyPath(),d)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw we(50498,{Gu:e.constructor.name});t=Ie.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new he(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ie.min())?mn.exists(!1):mn.updateTime(t):mn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ie.min()))throw new he(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mn.updateTime(t)}return mn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t,i,o,c){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=o,this.deferred=c,this.zu=i.maxAttempts,this.M_=new Vg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new hC(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((o=>{this.Yu(o)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!kc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Fw(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="FirestoreClient";class mC{constructor(e,t,i,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=fn.UNAUTHENTICATED,this.clientId=wg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async d=>{me(Oi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(me(Oi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Bg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function jm(r,e){r.asyncQueue.verifyOperationInProgress(),me(Oi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await sT(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Qv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await gC(r);me(Oi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>zv(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>zv(e.remoteStore,o))),r._onlineComponents=e}async function gC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){me(Oi,"Using user provided OfflineComponentProvider");try{await jm(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ko("Error using user provided cache. Falling back to memory cache: "+t),await jm(r,new Fd)}}else me(Oi,"Using default OfflineComponentProvider"),await jm(r,new dC(void 0));return r._offlineComponents}async function $g(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(me(Oi,"Using user provided OnlineComponentProvider"),await Qv(r,r._uninitializedComponentsProvider._online)):(me(Oi,"Using default OnlineComponentProvider"),await Qv(r,new og))),r._onlineComponents}function pC(r){return $g(r).then((e=>e.syncEngine))}function yC(r){return $g(r).then((e=>e.datastore))}async function Gd(r){const e=await $g(r),t=e.eventManager;return t.onListen=JI.bind(null,e.syncEngine),t.onUnlisten=tC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nC.bind(null,e.syncEngine),t}function _C(r,e,t={}){const i=new Fr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,g,_){const w=new Xg({next:A=>{w.Nu(),d.enqueueAndForget((()=>Fg(c,b)));const R=A.docs.has(m);!R&&A.fromCache?_.reject(new he(W.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&A.fromCache&&g&&g.source==="server"?_.reject(new he(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(A)},error:A=>_.reject(A)}),b=new Qg(ah(m.path),w,{includeMetadataChanges:!0,qa:!0});return Hg(c,b)})(await Gd(r),r.asyncQueue,e,t,i))),i.promise}function vC(r,e,t={}){const i=new Fr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,g,_){const w=new Xg({next:A=>{w.Nu(),d.enqueueAndForget((()=>Fg(c,b))),A.fromCache&&g.source==="server"?_.reject(new he(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),b=new Qg(m,w,{includeMetadataChanges:!0,qa:!0});return Hg(c,b)})(await Gd(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="firestore.googleapis.com",Yv=!0;class Xv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TT,this.ssl=Yv}else this.host=e.host,this.ssl=e.ssl??Yv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YR)throw new he(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}O1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wT(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new b1;switch(i.type){case"firstParty":return new R1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Kv.get(t);i&&(me("ComponentProvider","Removing Datastore"),Kv.delete(t),i.terminate())})(this),Promise.resolve()}}function EC(r,e,t,i={}){var _;r=Pn(r,gh);const o=Bo(e),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(XE(`https://${m}`),$E("Firestore",!0)),c.host!==TT&&c.host!==m&&ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:i};if(!Ea(g,d)&&(r._setSettings(g),i.mockUserToken)){let w,b;if(typeof i.mockUserToken=="string")w=i.mockUserToken,b=fn.MOCK_USER;else{w=YA(i.mockUserToken,(_=r._app)==null?void 0:_.options.projectId);const A=i.mockUserToken.sub||i.mockUserToken.user_id;if(!A)throw new he(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new fn(A)}r._authCredentials=new S1(new uw(w,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ls(this.firestore,e,this._query)}}class _t{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Oc(t,_t._jsonSchema))return new _t(e,i||null,new Ee(ct.fromString(t.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:jt("string",_t._jsonSchemaVersion),referencePath:jt("string")};class xi extends Ls{constructor(e,t,i){super(e,t,ah(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new Ee(e))}withConverter(e){return new xi(this.firestore,e,this._path)}}function nt(r,e,...t){if(r=vt(r),dw("collection","path",e),r instanceof gh){const i=ct.fromString(e,...t);return lv(i),new xi(r,null,i)}{if(!(r instanceof _t||r instanceof xi))throw new he(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ct.fromString(e,...t));return lv(i),new xi(r.firestore,null,i)}}function Wt(r,e,...t){if(r=vt(r),arguments.length===1&&(e=wg.newId()),dw("doc","path",e),r instanceof gh){const i=ct.fromString(e,...t);return ov(i),new _t(r,null,new Ee(i))}{if(!(r instanceof _t||r instanceof xi))throw new he(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ct.fromString(e,...t));return ov(i),new _t(r.firestore,r instanceof xi?r.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="AsyncQueue";class Wv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Vg(this,"async_queue_retry"),this._c=()=>{const i=Vm();i&&me($v,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Vm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Vm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Fr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qo(e))throw e;me($v,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ps("INTERNAL UNHANDLED ERROR: ",Jv(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=qg.createAndSchedule(this,e,t,i,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:Jv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Jv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of i)if(c in o&&typeof o[c]=="function")return!0;return!1})(r,["next","error","complete"])}class ks extends gh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Wv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wv(e),this._firestoreClient=void 0,await e}}}function wC(r,e){const t=typeof r=="object"?r:ew(),i=typeof r=="string"?r:Md,o=vg(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=QA("firestore");c&&EC(o,...c)}return o}function Uc(r){if(r._terminated)throw new he(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||TC(r),r._firestoreClient}function TC(r){var i,o,c;const e=r._freezeSettings(),t=(function(m,g,_,w){return new G1(m,g,_,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,wT(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new mC(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(on.fromBase64String(e))}catch(t){throw new he(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fn(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oc(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:jt("string",Fn._jsonSchemaVersion),bytes:jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qr._jsonSchemaVersion}}static fromJSON(e){if(Oc(e,Qr._jsonSchema))return new Qr(e.latitude,e.longitude)}}Qr._jsonSchemaVersion="firestore/geoPoint/1.0",Qr._jsonSchema={type:jt("string",Qr._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oc(e,Kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Kr(e.vectorValues);throw new he(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kr._jsonSchemaVersion="firestore/vectorValue/1.0",Kr._jsonSchema={type:jt("string",Kr._jsonSchemaVersion),vectorValues:jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=/^__.*__$/;class SC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mc(e,this.data,t,this.fieldTransforms)}}class bT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ST(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:r})}}class Wg{constructor(e,t,i,o,c,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Qd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ST(this.Ac)&&bC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class AC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||hh(e)}Cc(e,t,i,o=!1){return new Wg({Ac:e,methodName:t,Dc:i,path:an.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qc(r){const e=r._freezeSettings(),t=hh(r._databaseId);return new AC(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Jg(r,e,t,i,o,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,t,o);ep("Data must be an object, but it was:",d,i);const m=RT(i,d);let g,_;if(c.merge)g=new Gn(d.fieldMask),_=d.fieldTransforms;else if(c.mergeFields){const w=[];for(const b of c.mergeFields){const A=lg(e,b,t);if(!d.contains(A))throw new he(W.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);CT(w,A)||w.push(A)}g=new Gn(w),_=d.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,_=d.fieldTransforms;return new SC(new Sn(m),g,_)}class yh extends ph{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yh}}class Zg extends ph{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new xc(e.serializer,Vw(e.serializer,this.Fc));return new pR(e.path,t)}isEqual(e){return e instanceof Zg&&this.Fc===e.Fc}}function AT(r,e,t,i){const o=r.Cc(1,e,t);ep("Data must be an object, but it was:",o,i);const c=[],d=Sn.empty();Mi(i,((g,_)=>{const w=tp(e,g,t);_=vt(_);const b=o.yc(w);if(_ instanceof yh)c.push(w);else{const A=Bc(_,b);A!=null&&(c.push(w),d.set(w,A))}}));const m=new Gn(c);return new bT(d,m,o.fieldTransforms)}function xT(r,e,t,i,o,c){const d=r.Cc(1,e,t),m=[lg(e,i,t)],g=[o];if(c.length%2!=0)throw new he(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<c.length;A+=2)m.push(lg(e,c[A])),g.push(c[A+1]);const _=[],w=Sn.empty();for(let A=m.length-1;A>=0;--A)if(!CT(_,m[A])){const R=m[A];let j=g[A];j=vt(j);const Q=d.yc(R);if(j instanceof yh)_.push(R);else{const B=Bc(j,Q);B!=null&&(_.push(R),w.set(R,B))}}const b=new Gn(_);return new bT(w,b,d.fieldTransforms)}function xC(r,e,t,i=!1){return Bc(t,r.Cc(i?4:3,e))}function Bc(r,e){if(IT(r=vt(r)))return ep("Unsupported field value:",e,r),RT(r,e);if(r instanceof ph)return(function(i,o){if(!ST(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const c=[];let d=0;for(const m of i){let g=Bc(m,o.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(i,o){if((i=vt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Vw(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Xe.fromDate(i);return{timestampValue:zd(o.serializer,c)}}if(i instanceof Xe){const c=new Xe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:zd(o.serializer,c)}}if(i instanceof Qr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Fn)return{bytesValue:Yw(o.serializer,i._byteString)};if(i instanceof _t){const c=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Dg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Kr)return(function(d,m){return{mapValue:{fields:{[Ew]:{stringValue:ww},[Vd]:{arrayValue:{values:d.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return Rg(m.serializer,_)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${rh(i)}`)})(r,e)}function RT(r,e){const t={};return mw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mi(r,((i,o)=>{const c=Bc(o,e.mc(i));c!=null&&(t[i]=c)})),{mapValue:{fields:t}}}function IT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Xe||r instanceof Qr||r instanceof Fn||r instanceof _t||r instanceof ph||r instanceof Kr)}function ep(r,e,t){if(!IT(t)||!hw(t)){const i=rh(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function lg(r,e,t){if((e=vt(e))instanceof zc)return e._internalPath;if(typeof e=="string")return tp(r,e);throw Qd("Field path arguments must be of type string or ",r,!1,void 0,t)}const RC=new RegExp("[~\\*/\\[\\]]");function tp(r,e,t){if(e.search(RC)>=0)throw Qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new zc(...e.split("."))._internalPath}catch{throw Qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Qd(r,e,t,i,o){const c=i&&!i.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${i}`),d&&(g+=` in document ${o}`),g+=")"),new he(W.INVALID_ARGUMENT,m+r+g)}function CT(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,i,o,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_h("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class IC extends Kd{data(){return super.data()}}function _h(r,e){return typeof e=="string"?tp(r,e):e instanceof zc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class np{}class rp extends np{}function St(r,e,...t){let i=[];e instanceof np&&i.push(e),i=i.concat(t),(function(c){const d=c.filter((g=>g instanceof sp)).length,m=c.filter((g=>g instanceof vh)).length;if(d>1||d>0&&m>0)throw new he(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class vh extends rp{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new vh(e,t,i)}_apply(e){const t=this._parse(e);return PT(e._query,t),new Ls(e.firestore,e.converter,Zm(e._query,t))}_parse(e){const t=qc(e.firestore);return(function(c,d,m,g,_,w,b){let A;if(_.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new he(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){tE(b,w);const j=[];for(const Q of b)j.push(eE(g,c,Q));A={arrayValue:{values:j}}}else A=eE(g,c,b)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||tE(b,w),A=xC(m,d,b,w==="in"||w==="not-in");return Vt.create(_,w,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function We(r,e,t){const i=e,o=_h("where",r);return vh._create(o,i,t)}class sp extends np{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sp(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:wr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let d=o;const m=c.getFlattenedFilters();for(const g of m)PT(d,g),d=Zm(d,g)})(e._query,t),new Ls(e.firestore,e.converter,Zm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ip extends rp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ip(e,t)}_apply(e){const t=(function(o,c,d){if(o.startAt!==null)throw new he(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bc(c,d)})(e._query,this._field,this._direction);return new Ls(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new Ko(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function Yd(r,e="asc"){const t=e,i=_h("orderBy",r);return ip._create(i,t)}class ap extends rp{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new ap(e,t,i)}_apply(e){return new Ls(e.firestore,e.converter,Ld(e._query,this._limit,this._limitType))}}function DT(r){return k1("limit",r),ap._create("limit",r,"F")}function eE(r,e,t){if(typeof(t=vt(t))=="string"){if(t==="")throw new he(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cw(e)&&t.indexOf("/")!==-1)throw new he(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ct.fromString(t));if(!Ee.isDocumentKey(i))throw new he(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return pv(r,new Ee(i))}if(t instanceof _t)return pv(r,t._key);throw new he(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rh(t)}.`)}function tE(r,e){if(!Array.isArray(r)||r.length===0)throw new he(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PT(r,e){const t=(function(o,c){for(const d of o)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class OT{convertValue(e,t="none"){switch(Di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Mi(e,((o,c)=>{i[o]=this.convertValue(c,t)})),i}convertVectorValue(e){var i,o,c;const t=(c=(o=(i=e.fields)==null?void 0:i[Vd].arrayValue)==null?void 0:o.values)==null?void 0:c.map((d=>Nt(d.doubleValue)));return new Kr(t)}convertGeoPoint(e){return new Qr(Nt(e.latitude),Nt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=ih(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ec(e));default:return null}}convertTimestamp(e){const t=Ci(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ct.fromString(e);Ye(tT(i),9688,{name:e});const o=new wc(i.get(1),i.get(3)),c=new Ee(i.popFirst(5));return o.isEqual(t)||Ps(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class CC extends OT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}class xo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ri extends Kd{constructor(e,t,i,o,c,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(_h("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ri._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ri._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ri._jsonSchema={type:jt("string",Ri._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class Rd extends Ri{data(e={}){return super.data(e)}}class va{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new xo(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Rd(this._firestore,this._userDataWriter,i.key,i,new xo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const g=new Rd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new xo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new Rd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new xo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,w=-1;return m.type!==0&&(_=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),w=d.indexOf(m.doc.key)),{type:NC(m.type),doc:g,oldIndex:_,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=va._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function NC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(r){r=Pn(r,_t);const e=Pn(r.firestore,ks);return _C(Uc(e),r._key).then((t=>kT(e,r,t)))}va._jsonSchemaVersion="firestore/querySnapshot/1.0",va._jsonSchema={type:jt("string",va._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class Eh extends OT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}function pt(r){r=Pn(r,Ls);const e=Pn(r.firestore,ks),t=Uc(e),i=new Eh(e);return NT(r._query),vC(t,r._query).then((o=>new va(e,i,r,o)))}function Rc(r,e,t){r=Pn(r,_t);const i=Pn(r.firestore,ks),o=op(r.converter,e,t);return cp(i,[Jg(qc(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,mn.none())])}function lp(r,e,t,...i){r=Pn(r,_t);const o=Pn(r.firestore,ks),c=qc(o);let d;return d=typeof(e=vt(e))=="string"||e instanceof zc?xT(c,"updateDoc",r._key,e,t,i):AT(c,"updateDoc",r._key,e),cp(o,[d.toMutation(r._key,mn.exists(!0))])}function Hc(r,e){const t=Pn(r.firestore,ks),i=Wt(r),o=op(r.converter,e);return cp(t,[Jg(qc(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,mn.exists(!1))]).then((()=>i))}function DC(r,...e){var g,_,w;r=vt(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Zv(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Zv(e[i])){const b=e[i];e[i]=(g=b.next)==null?void 0:g.bind(b),e[i+1]=(_=b.error)==null?void 0:_.bind(b),e[i+2]=(w=b.complete)==null?void 0:w.bind(b)}let c,d,m;if(r instanceof _t)d=Pn(r.firestore,ks),m=ah(r._key.path),c={next:b=>{e[i]&&e[i](kT(d,r,b))},error:e[i+1],complete:e[i+2]};else{const b=Pn(r,Ls);d=Pn(b.firestore,ks),m=b._query;const A=new Eh(d);c={next:R=>{e[i]&&e[i](new va(d,A,b,R))},error:e[i+1],complete:e[i+2]},NT(r._query)}return(function(A,R,j,Q){const B=new Xg(Q),ie=new Qg(R,B,j);return A.asyncQueue.enqueueAndForget((async()=>Hg(await Gd(A),ie))),()=>{B.Nu(),A.asyncQueue.enqueueAndForget((async()=>Fg(await Gd(A),ie)))}})(Uc(d),m,o,c)}function cp(r,e){return(function(i,o){const c=new Fr;return i.asyncQueue.enqueueAndForget((async()=>rC(await pC(i),o,c))),c.promise})(Uc(r),e)}function kT(r,e,t){const i=t.docs.get(e._key),o=new Eh(r);return new Ri(r,o,e._key,i,new xo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC={maxAttempts:5};function lc(r,e){if((r=vt(r)).firestore!==e)throw new he(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qc(e)}get(e){const t=lc(e,this._firestore),i=new CC(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return we(24041);const c=o[0];if(c.isFoundDocument())return new Kd(this._firestore,i,c.key,c,t.converter);if(c.isNoDocument())return new Kd(this._firestore,i,t._key,null,t.converter);throw we(18433,{doc:c})}))}set(e,t,i){const o=lc(e,this._firestore),c=op(o.converter,t,i),d=Jg(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,i);return this._transaction.set(o._key,d),this}update(e,t,i,...o){const c=lc(e,this._firestore);let d;return d=typeof(t=vt(t))=="string"||t instanceof zc?xT(this._dataReader,"Transaction.update",c._key,t,i,o):AT(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,d),this}delete(e){const t=lc(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC extends OC{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=lc(e,this._firestore),i=new Eh(this._firestore);return super.get(e).then((o=>new Ri(this._firestore,i,t._key,o._document,new xo(!1,!1),t.converter)))}}function MC(r,e,t){r=Pn(r,ks);const i={...PC,...t};return(function(c){if(c.maxAttempts<1)throw new he(W.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(c,d,m){const g=new Fr;return c.asyncQueue.enqueueAndForget((async()=>{const _=await yC(c);new fC(c.asyncQueue,_,m,d,g).ju()})),g.promise})(Uc(r),(o=>e(new kC(r,o))),i)}function MT(r){return new Zg("increment",r)}(function(e,t=!0){(function(o){Fo=o})(Ho),Oo(new wa("firestore",((i,{instanceIdentifier:o,options:c})=>{const d=i.getProvider("app").getImmediate(),m=new ks(new A1(i.getProvider("auth-internal")),new I1(d,i.getProvider("app-check-internal")),(function(_,w){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new he(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wc(_.options.projectId,w)})(d,o),d);return c={useFetchStreams:t,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Si(rv,sv,e),Si(rv,sv,"esm2020")})();function VT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VC=VT,jT=new Dc("auth","Firebase",VT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd=new yg("@firebase/auth");function jC(r,...e){Xd.logLevel<=ze.WARN&&Xd.warn(`Auth (${Ho}): ${r}`,...e)}function Id(r,...e){Xd.logLevel<=ze.ERROR&&Xd.error(`Auth (${Ho}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(r,...e){throw dp(r,...e)}function Er(r,...e){return dp(r,...e)}function up(r,e,t){const i={...VC(),[e]:t};return new Dc("auth","Firebase",i).create(e,{appName:r.name})}function Yr(r){return up(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LC(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&lr(r,"argument-error"),up(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dp(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return jT.create(r,...e)}function Ce(r,e,...t){if(!r)throw dp(e,...t)}function Cs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Id(e),new Error(e)}function Ms(r,e){r||Cs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function UC(){return nE()==="http:"||nE()==="https:"}function nE(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UC()||ex()||"connection"in navigator)?navigator.onLine:!0}function qC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ms(t>e,"Short delay should be less than long delay!"),this.isMobile=WA()||tx()}get(){return zC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(r,e){Ms(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],FC=new Fc(3e4,6e4);function Us(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Jr(r,e,t,i,o={}){return UT(r,o,async()=>{let c={},d={};i&&(e==="GET"?d=i:c={body:JSON.stringify(i)});const m=Pc({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const _={method:e,headers:g,...c};return ZA()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&Bo(r.emulatorConfig.host)&&(_.credentials="include"),LT.fetch()(await zT(r,r.config.apiHost,t,m),_)})}async function UT(r,e,t){r._canInitEmulator=!1;const i={...BC,...e};try{const o=new QC(r),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw _d(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw _d(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw _d(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw _d(r,"user-disabled",d);const w=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw up(r,w,_);lr(r,w)}}catch(o){if(o instanceof js)throw o;lr(r,"network-request-failed",{message:String(o)})}}async function Gc(r,e,t,i,o={}){const c=await Jr(r,e,t,i,o);return"mfaPendingCredential"in c&&lr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function zT(r,e,t,i){const o=`${e}${t}?${i}`,c=r,d=c.config.emulator?hp(r.config,o):`${r.config.apiScheme}://${o}`;return HC.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function GC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class QC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Er(this.auth,"network-request-failed")),FC.get())})}}function _d(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Er(r,e,i);return o.customData._tokenResponse=t,o}function rE(r){return r!==void 0&&r.enterprise!==void 0}class KC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return GC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function YC(r,e){return Jr(r,"GET","/v2/recaptchaConfig",Us(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(r,e){return Jr(r,"POST","/v1/accounts:delete",e)}async function $d(r,e){return Jr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $C(r,e=!1){const t=vt(r),i=await t.getIdToken(e),o=fp(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:i,authTime:pc(Lm(o.auth_time)),issuedAtTime:pc(Lm(o.iat)),expirationTime:pc(Lm(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Lm(r){return Number(r)*1e3}function fp(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Id("JWT malformed, contained fewer than 3 sections"),null;try{const o=GE(t);return o?JSON.parse(o):(Id("Failed to decode base64 JWT payload"),null)}catch(o){return Id("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function sE(r){const e=fp(r);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof js&&WC(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function WC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pc(this.lastLoginAt),this.creationTime=pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wd(r){var b;const e=r.auth,t=await r.getIdToken(),i=await zo(r,$d(e,{idToken:t}));Ce(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const c=(b=o.providerUserInfo)!=null&&b.length?qT(o.providerUserInfo):[],d=eN(r.providerData,c),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!(d!=null&&d.length),_=m?g:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new ug(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(r,w)}async function ZC(r){const e=vt(r);await Wd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eN(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function qT(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(r,e){const t=await UT(r,{},async()=>{const i=Pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,d=await zT(r,o,"/v1/token",`key=${c}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:i};return r.emulatorConfig&&Bo(r.emulatorConfig.host)&&(g.credentials="include"),LT.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function nN(r,e){return Jr(r,"POST","/v2/accounts:revokeToken",Us(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=sE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:c}=await tN(e,t);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:c}=t,d=new No;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Ce(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new No,this.toJSON())}_performRefresh(){return Cs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(r,e){Ce(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class vr{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new JC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ug(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await zo(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $C(this,e)}reload(){return ZC(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Wd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(Yr(this.auth));const e=await this.getIdToken();return await zo(this,XC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,_=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:b,emailVerified:A,isAnonymous:R,providerData:j,stsTokenManager:Q}=t;Ce(b&&Q,e,"internal-error");const B=No.fromJSON(this.name,Q);Ce(typeof b=="string",e,"internal-error"),pi(i,e.name),pi(o,e.name),Ce(typeof A=="boolean",e,"internal-error"),Ce(typeof R=="boolean",e,"internal-error"),pi(c,e.name),pi(d,e.name),pi(m,e.name),pi(g,e.name),pi(_,e.name),pi(w,e.name);const ie=new vr({uid:b,auth:e,email:o,emailVerified:A,displayName:i,isAnonymous:R,photoURL:d,phoneNumber:c,tenantId:m,stsTokenManager:B,createdAt:_,lastLoginAt:w});return j&&Array.isArray(j)&&(ie.providerData=j.map(ae=>({...ae}))),g&&(ie._redirectEventId=g),ie}static async _fromIdTokenResponse(e,t,i=!1){const o=new No;o.updateFromServerResponse(t);const c=new vr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Wd(c),c}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?qT(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),m=new No;m.updateFromIdToken(i);const g=new vr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new ug(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new Map;function Ns(r){Ms(r instanceof Function,"Expected a class definition");let e=iE.get(r);return e?(Ms(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,iE.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}BT.type="NONE";const aE=BT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(r,e,t){return`firebase:${r}:${e}:${t}`}class Do{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=Cd(this.userKey,o.apiKey,c),this.fullPersistenceKey=Cd("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await $d(this.auth,{idToken:e}).catch(()=>{});return t?vr._fromGetAccountInfoResponse(this.auth,t,e):null}return vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Do(Ns(aE),e,i);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=o[0]||Ns(aE);const d=Cd(i,e.config.apiKey,e.name);let m=null;for(const _ of t)try{const w=await _._get(d);if(w){let b;if(typeof w=="string"){const A=await $d(e,{idToken:w}).catch(()=>{});if(!A)break;b=await vr._fromGetAccountInfoResponse(e,A,w)}else b=vr._fromJSON(e,w);_!==c&&(m=b),c=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Do(c,e,i):(c=g[0],m&&await c._set(d,m.toJSON()),await Promise.all(t.map(async _=>{if(_!==c)try{await _._remove(d)}catch{}})),new Do(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YT(e))return"Blackberry";if(XT(e))return"Webos";if(FT(e))return"Safari";if((e.includes("chrome/")||GT(e))&&!e.includes("edge/"))return"Chrome";if(KT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function HT(r=gn()){return/firefox\//i.test(r)}function FT(r=gn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GT(r=gn()){return/crios\//i.test(r)}function QT(r=gn()){return/iemobile/i.test(r)}function KT(r=gn()){return/android/i.test(r)}function YT(r=gn()){return/blackberry/i.test(r)}function XT(r=gn()){return/webos/i.test(r)}function mp(r=gn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function rN(r=gn()){var e;return mp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function sN(){return nx()&&document.documentMode===10}function $T(r=gn()){return mp(r)||KT(r)||XT(r)||YT(r)||/windows phone/i.test(r)||QT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(r,e=[]){let t;switch(r){case"Browser":t=oE(gn());break;case"Worker":t=`${oE(gn())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ho}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=c=>new Promise((d,m)=>{try{const g=e(c);d(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aN(r,e={}){return Jr(r,"GET","/v2/passwordPolicy",Us(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=6;class lN{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??oN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lE(this),this.idTokenSubscription=new lE(this),this.beforeStateQueue=new iN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ns(t)),this._initializationPromise=this.queue(async()=>{var i,o,c;if(!this._deleted&&(this.persistenceManager=await Do.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await $d(this,{idToken:e}),i=await vr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Dn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,m=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===m)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(d){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(Yr(this));const t=e?vt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(Yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(Yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ns(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aN(this),t=new lN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await nN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ns(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Do.create(this,[Ns(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&jC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Zr(r){return vt(r)}class lE{constructor(e){this.auth=e,this.observer=null,this.addObserver=ux(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uN(r){wh=r}function JT(r){return wh.loadJS(r)}function dN(){return wh.recaptchaEnterpriseScript}function hN(){return wh.gapiScript}function fN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class mN{constructor(){this.enterprise=new gN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class gN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const pN="recaptcha-enterprise",ZT="NO_RECAPTCHA";class yN{constructor(e){this.type=pN,this.auth=Zr(e)}async verify(e="verify",t=!1){async function i(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{YC(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new KC(g);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,d(_.siteKey)}}).catch(g=>{m(g)})})}function o(c,d,m){const g=window.grecaptcha;rE(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(_=>{d(_)}).catch(()=>{d(ZT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mN().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{i(this.auth).then(m=>{if(!t&&rE(window.grecaptcha))o(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=dN();g.length!==0&&(g+=m),JT(g).then(()=>{o(m,c,d)}).catch(_=>{d(_)})}}).catch(m=>{d(m)})})}}async function cE(r,e,t,i=!1,o=!1){const c=new yN(r);let d;if(o)d=ZT;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Jd(r,e,t,i,o){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await cE(r,e,t,t==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await cE(r,e,t,t==="getOobCode");return i(r,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(r,e){const t=vg(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(Ea(c,e??{}))return o;lr(o,"already-initialized")}return t.initialize({options:e})}function vN(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Ns);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function EN(r,e,t){const i=Zr(r);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=eb(e),{host:d,port:m}=wN(e),g=m===null?"":`:${m}`,_={url:`${c}//${d}${g}/`},w=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(Ea(_,i.config.emulator)&&Ea(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=_,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,Bo(d)?(XE(`${c}//${d}${g}`),$E("Auth",!0)):TN()}function eb(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function wN(r){const e=eb(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:uE(i.substr(c.length+1))}}else{const[c,d]=i.split(":");return{host:c,port:uE(d)}}}function uE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function TN(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Cs("not implemented")}_getIdTokenResponse(e){return Cs("not implemented")}_linkToIdToken(e,t){return Cs("not implemented")}_getReauthenticationResolver(e){return Cs("not implemented")}}async function bN(r,e){return Jr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(r,e){return Gc(r,"POST","/v1/accounts:signInWithPassword",Us(r,e))}async function tb(r,e){return Jr(r,"POST","/v1/accounts:sendOobCode",Us(r,e))}async function AN(r,e){return tb(r,e)}async function xN(r,e){return tb(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(r,e){return Gc(r,"POST","/v1/accounts:signInWithEmailLink",Us(r,e))}async function IN(r,e){return Gc(r,"POST","/v1/accounts:signInWithEmailLink",Us(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends gp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ic(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ic(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jd(e,t,"signInWithPassword",SN);case"emailLink":return RN(e,{email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jd(e,i,"signUpPassword",bN);case"emailLink":return IN(e,{idToken:t,email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(r,e){return Gc(r,"POST","/v1/accounts:signInWithIdp",Us(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="http://localhost";class Sa extends gp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):lr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=t;if(!i||!o)return null;const d=new Sa(i,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Po(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Po(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Po(e,t)}buildRequest(){const e={requestUri:CN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DN(r){const e=rc(sc(r)).link,t=e?rc(sc(e)).deep_link_id:null,i=rc(sc(r)).deep_link_id;return(i?rc(sc(i)).link:null)||i||t||e||r}class pp{constructor(e){const t=rc(sc(e)),i=t.apiKey??null,o=t.oobCode??null,c=NN(t.mode??null);Ce(i&&o&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=DN(e);try{return new pp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.providerId=Xo.PROVIDER_ID}static credential(e,t){return Ic._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=pp.parseLink(t);return Ce(i,"argument-error"),Ic._fromEmailAndCode(e,i.code,i.tenantId)}}Xo.PROVIDER_ID="password";Xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends yp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Qc{constructor(){super("facebook.com")}static credential(e){return Sa._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends Qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Sa._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Is.credential(t,i)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Qc{constructor(){super("github.com")}static credential(e){return Sa._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.GITHUB_SIGN_IN_METHOD="github.com";_i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Qc{constructor(){super("twitter.com")}static credential(e,t){return Sa._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return vi.credential(t,i)}catch{return null}}}vi.TWITTER_SIGN_IN_METHOD="twitter.com";vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nb(r,e){return Gc(r,"POST","/v1/accounts:signUp",Us(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const c=await vr._fromIdTokenResponse(e,i,o),d=dE(i);return new Vs({user:c,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=dE(i);return new Vs({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function dE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(r){var o;if(Dn(r.app))return Promise.reject(Yr(r));const e=Zr(r);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new Vs({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await nb(e,{returnSecureToken:!0}),i=await Vs._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd extends js{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Zd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Zd(e,t,i,o)}}function rb(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Zd._fromErrorAndOperation(r,c,e,i):c})}async function ON(r,e,t=!1){const i=await zo(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Vs._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(r,e,t=!1){const{auth:i}=r;if(Dn(i.app))return Promise.reject(Yr(i));const o="reauthenticate";try{const c=await zo(r,rb(i,o,e,r),t);Ce(c.idToken,i,"internal-error");const d=fp(c.idToken);Ce(d,i,"internal-error");const{sub:m}=d;return Ce(r.uid===m,i,"user-mismatch"),Vs._forOperation(r,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&lr(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sb(r,e,t=!1){if(Dn(r.app))return Promise.reject(Yr(r));const i="signIn",o=await rb(r,i,e),c=await Vs._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(c.user),c}async function MN(r,e){return sb(Zr(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ib(r){const e=Zr(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function VN(r,e,t){const i=Zr(r);await Jd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",xN)}async function jN(r,e,t){if(Dn(r.app))return Promise.reject(Yr(r));const i=Zr(r),d=await Jd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nb).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&ib(r),g}),m=await Vs._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(m.user),m}function LN(r,e,t){return Dn(r.app)?Promise.reject(Yr(r)):MN(vt(r),Xo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&ib(r),i})}async function ab(r,e){const t=vt(r),o={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()},{email:c}=await AN(t.auth,o);c!==r.email&&await r.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(r,e){return Jr(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=vt(r),c={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await zo(i,UN(i.auth,c));i.displayName=d.displayName||null,i.photoURL=d.photoUrl||null;const m=i.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=i.displayName,m.photoURL=i.photoURL),await i._updateTokensIfNecessary(d)}function qN(r,e,t,i){return vt(r).onIdTokenChanged(e,t,i)}function BN(r,e,t){return vt(r).beforeAuthStateChanged(e,t)}function HN(r,e,t,i){return vt(r).onAuthStateChanged(e,t,i)}function FN(r){return vt(r).signOut()}const eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(eh,"1"),this.storage.removeItem(eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=1e3,QN=10;class lb extends ob{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$T(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},c=this.storage.getItem(i);sN()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,QN):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},GN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}lb.type="LOCAL";const KN=lb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb extends ob{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}cb.type="SESSION";const ub=cb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Th(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:c}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(d).map(async _=>_(t.origin,c)),g=await YN(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Th.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((m,g)=>{const _=_p("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(b){const A=b;if(A.data.eventId===_)switch(A.data.status){case"ack":clearTimeout(w),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(A.data.response);break;default:clearTimeout(w),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(){return window}function $N(r){Xr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(){return typeof Xr().WorkerGlobalScope<"u"&&typeof Xr().importScripts=="function"}async function WN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JN(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function ZN(){return db()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="firebaseLocalStorageDb",e2=1,th="firebaseLocalStorage",fb="fbase_key";class Kc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function bh(r,e){return r.transaction([th],e?"readwrite":"readonly").objectStore(th)}function t2(){const r=indexedDB.deleteDatabase(hb);return new Kc(r).toPromise()}function dg(){const r=indexedDB.open(hb,e2);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(th,{keyPath:fb})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(th)?e(i):(i.close(),await t2(),e(await dg()))})})}async function hE(r,e,t){const i=bh(r,!0).put({[fb]:e,value:t});return new Kc(i).toPromise()}async function n2(r,e){const t=bh(r,!1).get(e),i=await new Kc(t).toPromise();return i===void 0?null:i.value}function fE(r,e){const t=bh(r,!0).delete(e);return new Kc(t).toPromise()}const r2=800,s2=3;class mb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>s2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return db()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Th._getInstance(ZN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await WN(),!this.activeServiceWorker)return;this.sender=new XN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dg();return await hE(e,eh,"1"),await fE(e,eh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>hE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>n2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=bh(o,!1).getAll();return new Kc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),r2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mb.type="LOCAL";const i2=mb;new Fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(r,e){return e?Ns(e):(Ce(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp extends gp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Po(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Po(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Po(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function a2(r){return sb(r.auth,new vp(r),r.bypassAuthState)}function o2(r){const{auth:e,user:t}=r;return Ce(t,e,"internal-error"),kN(t,new vp(r),r.bypassAuthState)}async function l2(r){const{auth:e,user:t}=r;return Ce(t,e,"internal-error"),ON(t,new vp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,t,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return a2;case"linkViaPopup":case"linkViaRedirect":return l2;case"reauthViaPopup":case"reauthViaRedirect":return o2;default:lr(this.auth,"internal-error")}}resolve(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=new Fc(2e3,1e4);async function u2(r,e,t){if(Dn(r.app))return Promise.reject(Er(r,"operation-not-supported-in-this-environment"));const i=Zr(r);LC(r,e,yp);const o=gb(i,t);return new _a(i,"signInViaPopup",e,o).executeNotNull()}class _a extends pb{constructor(e,t,i,o,c){super(e,t,o,c),this.provider=i,this.authWindow=null,this.pollId=null,_a.currentPopupAction&&_a.currentPopupAction.cancel(),_a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Ms(this.filter.length===1,"Popup operations only handle one event");const e=_p();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_a.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,c2.get())};e()}}_a.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="pendingRedirect",Nd=new Map;class h2 extends pb{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Nd.get(this.auth._key());if(!e){try{const i=await f2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Nd.set(this.auth._key(),e)}return this.bypassAuthState||Nd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function f2(r,e){const t=p2(e),i=g2(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function m2(r,e){Nd.set(r._key(),e)}function g2(r){return Ns(r._redirectPersistence)}function p2(r){return Cd(d2,r.config.apiKey,r.name)}async function y2(r,e,t=!1){if(Dn(r.app))return Promise.reject(Yr(r));const i=Zr(r),o=gb(i,e),d=await new h2(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=600*1e3;class v2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!yb(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Er(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_2&&this.cachedEventUids.clear(),this.cachedEventUids.has(mE(e))}saveEventToCache(e){this.cachedEventUids.add(mE(e)),this.lastProcessedEventTime=Date.now()}}function mE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function yb({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E2(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w2(r,e={}){return Jr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,b2=/^https?/;async function S2(r){if(r.config.emulator)return;const{authorizedDomains:e}=await w2(r);for(const t of e)try{if(A2(t))return}catch{}lr(r,"unauthorized-domain")}function A2(r){const e=cg(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!b2.test(t))return!1;if(T2.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=new Fc(3e4,6e4);function gE(){const r=Xr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function R2(r){return new Promise((e,t)=>{var o,c,d;function i(){gE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gE(),t(Er(r,"network-request-failed"))},timeout:x2.get()})}if((c=(o=Xr().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=Xr().gapi)!=null&&d.load)i();else{const m=fN("iframefcb");return Xr()[m]=()=>{gapi.load?i():t(Er(r,"network-request-failed"))},JT(`${hN()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Dd=null,e})}let Dd=null;function I2(r){return Dd=Dd||R2(r),Dd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=new Fc(5e3,15e3),N2="__/auth/iframe",D2="emulator/auth/iframe",P2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k2(r){const e=r.config;Ce(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?hp(e,D2):`https://${r.config.authDomain}/${N2}`,i={apiKey:e.apiKey,appName:r.name,v:Ho},o=O2.get(r.config.apiHost);o&&(i.eid=o);const c=r._getFrameworks();return c.length&&(i.fw=c.join(",")),`${t}?${Pc(i).slice(1)}`}async function M2(r){const e=await I2(r),t=Xr().gapi;return Ce(t,r,"internal-error"),e.open({where:document.body,url:k2(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:P2,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const d=Er(r,"network-request-failed"),m=Xr().setTimeout(()=>{c(d)},C2.get());function g(){Xr().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j2=500,L2=600,U2="_blank",z2="http://localhost";class pE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function q2(r,e,t,i=j2,o=L2){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g={...V2,width:i.toString(),height:o.toString(),top:c,left:d},_=gn().toLowerCase();t&&(m=GT(_)?U2:t),HT(_)&&(e=e||z2,g.scrollbars="yes");const w=Object.entries(g).reduce((A,[R,j])=>`${A}${R}=${j},`,"");if(rN(_)&&m!=="_self")return B2(e||"",m),new pE(null);const b=window.open(e||"",m,w);Ce(b,r,"popup-blocked");try{b.focus()}catch{}return new pE(b)}function B2(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="__/auth/handler",F2="emulator/auth/handler",G2=encodeURIComponent("fac");async function yE(r,e,t,i,o,c){Ce(r.config.authDomain,r,"auth-domain-config-required"),Ce(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Ho,eventId:o};if(e instanceof yp){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",cx(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,b]of Object.entries({}))d[w]=b}if(e instanceof Qc){const w=e.getScopes().filter(b=>b!=="");w.length>0&&(d.scopes=w.join(","))}r.tenantId&&(d.tid=r.tenantId);const m=d;for(const w of Object.keys(m))m[w]===void 0&&delete m[w];const g=await r._getAppCheckToken(),_=g?`#${G2}=${encodeURIComponent(g)}`:"";return`${Q2(r)}?${Pc(m).slice(1)}${_}`}function Q2({config:r}){return r.emulator?hp(r,F2):`https://${r.authDomain}/${H2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="webStorageSupport";class K2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ub,this._completeRedirectFn=y2,this._overrideRedirectResult=m2}async _openPopup(e,t,i,o){var d;Ms((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await yE(e,t,i,cg(),o);return q2(e,c,_p())}async _openRedirect(e,t,i,o){await this._originValidation(e);const c=await yE(e,t,i,cg(),o);return $N(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(Ms(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await M2(e),i=new v2(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Um,{type:Um},o=>{var d;const c=(d=o==null?void 0:o[0])==null?void 0:d[Um];c!==void 0&&t(!!c),lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=S2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $T()||FT()||mp()}}const Y2=K2;var _E="@firebase/auth",vE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W2(r){Oo(new wa("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=i.options;Ce(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WT(r)},_=new cN(i,o,c,g);return vN(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Oo(new wa("auth-internal",e=>{const t=Zr(e.getProvider("auth").getImmediate());return(i=>new X2(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Si(_E,vE,$2(r)),Si(_E,vE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=300,Z2=YE("authIdTokenMaxAge")||J2;let EE=null;const eD=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Z2)return;const o=t==null?void 0:t.token;EE!==o&&(EE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function tD(r=ew()){const e=vg(r,"auth");if(e.isInitialized())return e.getImmediate();const t=_N(r,{popupRedirectResolver:Y2,persistence:[i2,KN,ub]}),i=YE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const d=eD(c.toString());BN(t,d,()=>d(t.currentUser)),qN(t,m=>d(m))}}const o=QE("auth");return o&&EN(t,`http://${o}`),t}function nD(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}uN({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const c=Er("internal-error");c.customData=o,t(c)},i.type="text/javascript",i.charset="UTF-8",nD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W2("Browser");const rD={apiKey:"AIzaSyCDZJqOx5eXpu3cD_FBJ8oi-hYvLCpbDXE",authDomain:"verdadreto-bec6a.firebaseapp.com",projectId:"verdadreto-bec6a",storageBucket:"verdadreto-bec6a.firebasestorage.app",messagingSenderId:"938969209658",appId:"1:938969209658:web:534282f57a8ff381c00e03"},_b=ZE(rD),De=wC(_b),Tr=tD(_b),vb=new Is;vb.setCustomParameters({prompt:"select_account"});class sD{constructor(){this.currentUser=null,this.sessionId=this.generateSessionId()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setCurrentUser(e){this.currentUser=e}async trackEvent(e,t){var i,o,c;try{const d={eventType:e,isAnonymous:((i=this.currentUser)==null?void 0:i.isAnonymous)??!0,timestamp:Xe.now(),sessionId:this.sessionId,...t};(o=this.currentUser)!=null&&o.uid&&(d.userId=this.currentUser.uid),(c=this.currentUser)!=null&&c.email&&(d.userEmail=this.currentUser.email),await Hc(nt(De,"analytics"),d),console.log("Analytics event tracked:",e)}catch(d){console.error("Error tracking analytics event:",d)}}async trackGameStart(e,t,i){await this.trackEvent("game_start",{packId:e,packName:t,gameData:{playersCount:i}})}async trackGameEnd(e,t,i,o){await this.trackEvent("game_end",{packId:e,packName:t,gameData:{roundsPlayed:i,duration:o}})}async trackPackSelected(e,t){await this.trackEvent("pack_selected",{packId:e,packName:t})}async trackDemoUsed(e,t){await this.trackEvent("demo_used",{packId:e,packName:t})}async trackUserLogin(){await this.trackEvent("user_login")}async trackUserRegister(){await this.trackEvent("user_register")}async trackSessionStart(){await this.trackEvent("session_start")}async trackSessionEnd(){await this.trackEvent("session_end")}async getStatsForPeriod(e,t){const i=new Date;let o,c=i;switch(e){case"realtime":o=new Date(i.getTime()-300*1e3);break;case"day":o=t?new Date(t):new Date(i.getFullYear(),i.getMonth(),i.getDate()),c=new Date(o.getTime()+1440*60*1e3);break;case"month":o=t?new Date(t):new Date(i.getFullYear(),i.getMonth(),1),c=new Date(o.getFullYear(),o.getMonth()+1,0);break;case"year":o=t?new Date(t):new Date(i.getFullYear(),0,1),c=new Date(o.getFullYear()+1,0,0);break}const d=Xe.fromDate(o),m=Xe.fromDate(c),g=St(nt(De,"analytics"),We("timestamp",">=",d),We("timestamp","<=",m),Yd("timestamp","desc")),w=(await pt(g)).docs.map(b=>b.data());return this.calculateStats(w,e)}calculateStats(e,t){const i=new Set,o=new Set,c=new Set,d=new Map;let m=0,g=0,_=0;const w=Date.now()-300*1e3,b=new Set;e.forEach(R=>{switch(R.userId&&(i.add(R.userId),R.isAnonymous?c.add(R.userId):o.add(R.userId)),R.timestamp.toMillis()>w&&b.add(R.sessionId),R.eventType){case"game_start":if(m++,R.packId&&R.packName){const j=d.get(R.packId)||{name:R.packName,count:0};d.set(R.packId,{...j,count:j.count+1})}break;case"demo_used":g++;break}}),_=b.size;const A=Array.from(d.entries()).map(([R,j])=>({packId:R,packName:j.name,count:j.count})).sort((R,j)=>j.count-R.count).slice(0,10);return{totalUsers:i.size,registeredUsers:o.size,anonymousUsers:c.size,totalGames:m,totalDemos:g,activeUsers:_,mostPlayedPacks:A,gamesPerDay:t==="day"?m:Math.round(m/this.getDaysInPeriod(t)),demosPerDay:t==="day"?g:Math.round(g/this.getDaysInPeriod(t))}}getDaysInPeriod(e){switch(e){case"realtime":return 1;case"day":return 1;case"month":return 30;case"year":return 365;default:return 1}}async getRecentEvents(e=50){const t=St(nt(De,"analytics"),Yd("timestamp","desc"),DT(e));return(await pt(t)).docs.map(o=>({id:o.id,...o.data()}))}}const wi=new sD,iD=({availablePacks:r,purchasedPacks:e,adWatchedPacks:t,referralUnlockedPacks:i,suggestionUnlockedPacks:o,onContinue:c,onBack:d,onGoToShop:m,onPlayDemo:g})=>{const _=r.some(R=>R.id==="base"),w={id:"base",name:"Pack Base",description:"Preguntas y retos básicos incluidos",price:"INCLUIDO",icon:"🎮",questionsUrl:"",daresUrl:"",allowDemo:!1,demoPlaysCount:0},b=r.filter(R=>R.id!=="no-ads"),A=_?b:[w,...b];return e.length>0,p.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:p.jsxs(On,{className:"w-full max-w-2xl text-center",children:[p.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Packs Disponibles"}),p.jsx("p",{className:"text-gray-400 mb-8",children:"Estos son los packs que tienes disponibles para jugar"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:A.map(R=>{const j=R.id==="base"||e.includes(R.id),Q=R.id==="base",B=t.includes(R.id),ie=i.includes(R.id),ae=o.includes(R.id),oe=j||ie||ae;return p.jsxs("div",{className:`relative p-4 rounded-lg border transition-all duration-200 ${j?"border-green-500 bg-green-500/10":ie?"border-blue-500 bg-blue-500/10":ae?"border-purple-500 bg-purple-500/10":B?"border-yellow-500 bg-yellow-500/10":"border-gray-600 bg-gray-800/50 opacity-60"}`,children:[p.jsx("div",{className:"absolute top-2 right-2",children:j?p.jsx(Im,{className:"w-6 h-6 text-green-500"}):ie?p.jsx(Im,{className:"w-6 h-6 text-blue-500"}):ae?p.jsx(Im,{className:"w-6 h-6 text-purple-500"}):p.jsx(Io,{className:"w-6 h-6 text-yellow-500"})}),p.jsx("div",{className:"text-4xl mb-2",children:R.icon}),p.jsx("h3",{className:`text-xl font-bold mb-2 ${oe||B?"text-white":"text-gray-400"}`,children:R.name}),p.jsx("p",{className:`text-sm mb-3 ${oe||B?"text-gray-300":"text-gray-500"}`,children:R.description}),R.isReferralUnlockable&&!oe&&p.jsxs("p",{className:"text-xs text-blue-400 mb-2",children:["🎯 Requiere ",R.requiredReferrals," referidos"]}),R.isSuggestionUnlockable&&!oe&&p.jsxs("p",{className:"text-xs text-purple-400 mb-2",children:["💡 Requiere ",R.requiredApprovedSuggestions," sugerencias aprobadas"]}),p.jsx("div",{className:`text-lg font-semibold ${j?"text-green-400":ie?"text-blue-400":ae?"text-purple-400":"text-yellow-400"}`,children:Q?"INCLUIDO":j?"COMPRADO":ie?"POR REFERIDOS":ae?"POR SUGERENCIAS":B?"DEMO VISTO":"PREMIUM"}),!oe&&!B&&p.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx(Io,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),p.jsx("p",{className:"text-yellow-400 font-semibold text-sm mb-3",children:R.isReferralUnlockable?`${R.requiredReferrals} REFERIDOS`:R.isSuggestionUnlockable?`${R.requiredApprovedSuggestions} SUGERENCIAS`:"PREMIUM"}),R.allowDemo&&p.jsx(be,{onClick:ge=>{ge.stopPropagation(),wi.trackDemoUsed(R.id,R.name),g(R.id)},variant:"secondary",className:"px-3 py-1 text-xs bg-yellow-500 hover:bg-yellow-600 text-white border border-yellow-400 shadow-md",children:"💎 Jugar Demo"})]})})]},R.id)})}),r.some(R=>!e.includes(R.id))&&p.jsx("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:p.jsxs("p",{className:"text-yellow-400 text-sm",children:[p.jsx(Io,{className:"w-4 h-4 inline mr-2"}),"Los packs premium están bloqueados. Visita la tienda para desbloquearlos."]})}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(be,{onClick:d,variant:"secondary",className:"px-6",children:"Volver"}),p.jsx(be,{onClick:m,variant:"secondary",className:"px-6 bg-yellow-600 hover:bg-yellow-700 text-white",children:"Ir a la Tienda"}),p.jsx(be,{onClick:()=>{A.forEach(R=>{const j=R.id==="base"||e.includes(R.id),Q=i.includes(R.id),B=o.includes(R.id);(j||Q||B)&&wi.trackPackSelected(R.id,R.name)}),c()},className:"px-6",disabled:!1,children:"Continuar al Juego"})]})]})})},aD="modulepreload",oD=function(r,e){return new URL(r,e).href},wE={},Eb=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let d=function(w){return Promise.all(w.map(b=>Promise.resolve(b).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};const m=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),_=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=d(t.map(w=>{if(w=oD(w,i),w in wE)return;wE[w]=!0;const b=w.endsWith(".css"),A=b?'[rel="stylesheet"]':"";if(!!i)for(let Q=m.length-1;Q>=0;Q--){const B=m[Q];if(B.href===w&&(!b||B.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${A}`))return;const j=document.createElement("link");if(j.rel=b?"stylesheet":aD,b||(j.as="script"),j.crossOrigin="",j.href=w,_&&j.setAttribute("nonce",_),document.head.appendChild(j),b)return new Promise((Q,B)=>{j.addEventListener("load",Q),j.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${w}`)))})}))}function c(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return o.then(d=>{for(const m of d||[])m.status==="rejected"&&c(m.reason);return e().catch(c)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var qo;(function(r){r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE"})(qo||(qo={}));class zm extends Error{constructor(e,t,i){super(e),this.message=e,this.code=t,this.data=i}}const lD=r=>{var e,t;return r!=null&&r.androidBridge?"android":!((t=(e=r==null?void 0:r.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},cD=r=>{const e=r.CapacitorCustomPlatform||null,t=r.Capacitor||{},i=t.Plugins=t.Plugins||{},o=()=>e!==null?e.name:lD(r),c=()=>o()!=="web",d=b=>{const A=_.get(b);return!!(A!=null&&A.platforms.has(o())||m(b))},m=b=>{var A;return(A=t.PluginHeaders)===null||A===void 0?void 0:A.find(R=>R.name===b)},g=b=>r.console.error(b),_=new Map,w=(b,A={})=>{const R=_.get(b);if(R)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),R.proxy;const j=o(),Q=m(b);let B;const ie=async()=>(!B&&j in A?B=typeof A[j]=="function"?B=await A[j]():B=A[j]:e!==null&&!B&&"web"in A&&(B=typeof A.web=="function"?B=await A.web():B=A.web),B),ae=(x,I)=>{var k,O;if(Q){const V=Q==null?void 0:Q.methods.find(C=>I===C.name);if(V)return V.rtype==="promise"?C=>t.nativePromise(b,I.toString(),C):(C,xe)=>t.nativeCallback(b,I.toString(),C,xe);if(x)return(k=x[I])===null||k===void 0?void 0:k.bind(x)}else{if(x)return(O=x[I])===null||O===void 0?void 0:O.bind(x);throw new zm(`"${b}" plugin is not implemented on ${j}`,qo.Unimplemented)}},oe=x=>{let I;const k=(...O)=>{const V=ie().then(C=>{const xe=ae(C,x);if(xe){const Se=xe(...O);return I=Se==null?void 0:Se.remove,Se}else throw new zm(`"${b}.${x}()" is not implemented on ${j}`,qo.Unimplemented)});return x==="addListener"&&(V.remove=async()=>I()),V};return k.toString=()=>`${x.toString()}() { [capacitor code] }`,Object.defineProperty(k,"name",{value:x,writable:!1,configurable:!1}),k},ge=oe("addListener"),ce=oe("removeListener"),G=(x,I)=>{const k=ge({eventName:x},I),O=async()=>{const C=await k;ce({eventName:x,callbackId:C},I)},V=new Promise(C=>k.then(()=>C({remove:O})));return V.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await O()},V},N=new Proxy({},{get(x,I){switch(I){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Q?G:ge;case"removeListener":return ce;default:return oe(I)}}});return i[b]=N,_.set(b,{name:b,proxy:N,platforms:new Set([...Object.keys(A),...Q?[j]:[]])}),N};return t.convertFileSrc||(t.convertFileSrc=b=>b),t.getPlatform=o,t.handleError=g,t.isNativePlatform=c,t.isPluginAvailable=d,t.registerPlugin=w,t.Exception=zm,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},uD=r=>r.Capacitor=cD(r),hn=uD(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Ep=hn.registerPlugin;class wb{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(t);const c=this.windowListeners[e];c&&!c.registered&&this.addWindowListener(c),i&&this.sendRetainedArgumentsForEvent(e);const d=async()=>this.removeListener(e,t);return Promise.resolve({remove:d})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,i){const o=this.listeners[e];if(!o){if(i){let c=this.retainedEventArguments[e];c||(c=[]),c.push(t),this.retainedEventArguments[e]=c}return}o.forEach(c=>c(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:i=>{this.notifyListeners(t,i)}}}unimplemented(e="not implemented"){return new hn.Exception(e,qo.Unimplemented)}unavailable(e="not available"){return new hn.Exception(e,qo.Unavailable)}async removeListener(e,t){const i=this.listeners[e];if(!i)return;const o=i.indexOf(t);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(i=>{this.notifyListeners(e,i)}))}}const TE=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),bE=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class dD extends wb{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[o,c]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=bE(o).trim(),c=bE(c).trim(),t[o]=c}),t}async setCookie(e){try{const t=TE(e.key),i=TE(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,c=(e.path||"/").replace("path=",""),d=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${i||""}${o}; path=${c}; ${d};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Ep("CapacitorCookies",{web:()=>new dD});const hD=async r=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{const o=i.result;e(o.indexOf(",")>=0?o.split(",")[1]:o)},i.onerror=o=>t(o),i.readAsDataURL(r)}),fD=(r={})=>{const e=Object.keys(r);return Object.keys(r).map(o=>o.toLocaleLowerCase()).reduce((o,c,d)=>(o[c]=r[e[d]],o),{})},mD=(r,e=!0)=>r?Object.entries(r).reduce((i,o)=>{const[c,d]=o;let m,g;return Array.isArray(d)?(g="",d.forEach(_=>{m=e?encodeURIComponent(_):_,g+=`${c}=${m}&`}),g.slice(0,-1)):(m=e?encodeURIComponent(d):d,g=`${c}=${m}`),`${i}&${g}`},"").substr(1):null,gD=(r,e={})=>{const t=Object.assign({method:r.method||"GET",headers:r.headers},e),o=fD(r.headers)["content-type"]||"";if(typeof r.data=="string")t.body=r.data;else if(o.includes("application/x-www-form-urlencoded")){const c=new URLSearchParams;for(const[d,m]of Object.entries(r.data||{}))c.set(d,m);t.body=c.toString()}else if(o.includes("multipart/form-data")||r.data instanceof FormData){const c=new FormData;if(r.data instanceof FormData)r.data.forEach((m,g)=>{c.append(g,m)});else for(const m of Object.keys(r.data))c.append(m,r.data[m]);t.body=c;const d=new Headers(t.headers);d.delete("content-type"),t.headers=d}else(o.includes("application/json")||typeof r.data=="object")&&(t.body=JSON.stringify(r.data));return t};class pD extends wb{async request(e){const t=gD(e,e.webFetchExtra),i=mD(e.params,e.shouldEncodeUrlParams),o=i?`${e.url}?${i}`:e.url,c=await fetch(o,t),d=c.headers.get("content-type")||"";let{responseType:m="text"}=c.ok?e:{};d.includes("application/json")&&(m="json");let g,_;switch(m){case"arraybuffer":case"blob":_=await c.blob(),g=await hD(_);break;case"json":g=await c.json();break;case"document":case"text":default:g=await c.text()}const w={};return c.headers.forEach((b,A)=>{w[A]=b}),{data:g,headers:w,status:c.status,url:c.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Ep("CapacitorHttp",{web:()=>new pD});var SE;(function(r){r.General="General",r.ParentalGuidance="ParentalGuidance",r.Teen="Teen",r.MatureAudience="MatureAudience"})(SE||(SE={}));var AE;(function(r){r.SizeChanged="bannerAdSizeChanged",r.Loaded="bannerAdLoaded",r.FailedToLoad="bannerAdFailedToLoad",r.Opened="bannerAdOpened",r.Closed="bannerAdClosed",r.AdImpression="bannerAdImpression"})(AE||(AE={}));var hg;(function(r){r.TOP_CENTER="TOP_CENTER",r.CENTER="CENTER",r.BOTTOM_CENTER="BOTTOM_CENTER"})(hg||(hg={}));var fg;(function(r){r.BANNER="BANNER",r.FULL_BANNER="FULL_BANNER",r.LARGE_BANNER="LARGE_BANNER",r.MEDIUM_RECTANGLE="MEDIUM_RECTANGLE",r.LEADERBOARD="LEADERBOARD",r.ADAPTIVE_BANNER="ADAPTIVE_BANNER",r.SMART_BANNER="SMART_BANNER"})(fg||(fg={}));var yc;(function(r){r.Loaded="interstitialAdLoaded",r.FailedToLoad="interstitialAdFailedToLoad",r.Showed="interstitialAdShowed",r.FailedToShow="interstitialAdFailedToShow",r.Dismissed="interstitialAdDismissed"})(yc||(yc={}));var xE;(function(r){r.Loaded="onRewardedInterstitialAdLoaded",r.FailedToLoad="onRewardedInterstitialAdFailedToLoad",r.Showed="onRewardedInterstitialAdShowed",r.FailedToShow="onRewardedInterstitialAdFailedToShow",r.Dismissed="onRewardedInterstitialAdDismissed",r.Rewarded="onRewardedInterstitialAdReward"})(xE||(xE={}));var Ro;(function(r){r.Loaded="onRewardedVideoAdLoaded",r.FailedToLoad="onRewardedVideoAdFailedToLoad",r.Showed="onRewardedVideoAdShowed",r.FailedToShow="onRewardedVideoAdFailedToShow",r.Dismissed="onRewardedVideoAdDismissed",r.Rewarded="onRewardedVideoAdReward"})(Ro||(Ro={}));var RE;(function(r){r.NOT_REQUIRED="NOT_REQUIRED",r.OBTAINED="OBTAINED",r.REQUIRED="REQUIRED",r.UNKNOWN="UNKNOWN"})(RE||(RE={}));var IE;(function(r){r[r.DISABLED=0]="DISABLED",r[r.EEA=1]="EEA",r[r.NOT_EEA=2]="NOT_EEA"})(IE||(IE={}));const dn=Ep("AdMob",{web:()=>Eb(()=>import("./web-BUQaP_eP.js"),[],import.meta.url).then(r=>new r.AdMobWeb)}),vd={enabled:!0,questionChangeThreshold:DA.CHANGES_BEFORE_AD,adLoadingTime:1e3,adPlayingTime:3e3,showInRoundEnd:!0,showInGameEnd:!0,showInDemo:!0,autoPlay:!0,skipAfterSeconds:5,frequency:{questionChanges:3,roundEnd:1,gameEnd:1},types:{interstitial:!0,rewarded:!0,banner:!1}};class yD{constructor(){this.STORAGE_KEY="ads_config",this.config=this.loadConfig()}loadConfig(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){const t=JSON.parse(e);return{...vd,...t}}}catch(e){console.error("Error loading ads config:",e)}return{...vd}}saveConfig(){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.config))}catch(e){console.error("Error saving ads config:",e)}}getConfig(){return{...this.config}}updateConfig(e){this.config={...this.config,...e},this.saveConfig()}setEnabled(e){this.config.enabled=e,this.saveConfig()}isEnabled(){return this.config.enabled}shouldShowAdForQuestionChange(e){return this.config.enabled&&e>=this.config.questionChangeThreshold}shouldShowAdInRoundEnd(){return this.config.enabled&&this.config.showInRoundEnd}shouldShowAdInGameEnd(){return this.config.enabled&&this.config.showInGameEnd}shouldShowAdInDemo(){return this.config.enabled&&this.config.showInDemo}getAdLoadingTime(){return this.config.adLoadingTime}getAdPlayingTime(){return this.config.adPlayingTime}getQuestionChangeThreshold(){return this.config.questionChangeThreshold}resetToDefault(){this.config={...vd},this.saveConfig()}exportConfig(){return JSON.stringify(this.config,null,2)}importConfig(e){try{const t=JSON.parse(e);if(this.isValidConfig(t))return this.config={...vd,...t},this.saveConfig(),!0}catch(t){console.error("Error importing ads config:",t)}return!1}isValidConfig(e){return typeof e=="object"&&typeof e.enabled=="boolean"&&typeof e.questionChangeThreshold=="number"&&typeof e.adLoadingTime=="number"&&typeof e.adPlayingTime=="number"}getConfigStats(){return{enabled:this.config.enabled,questionChangeThreshold:this.config.questionChangeThreshold,totalTypes:Object.values(this.config.types).filter(Boolean).length,autoPlay:this.config.autoPlay,lastModified:localStorage.getItem(this.STORAGE_KEY+"_modified")||"Never"}}}const Ct=new yD;class _D{constructor(){this.isInitialized=!1,this.config=null,this.configUnsubscribe=null}async initialize(e){if(this.isInitialized){this.config={...this.config,...e};return}try{this.config=e,hn.isNativePlatform()?(await dn.initialize({requestTrackingAuthorization:!0,testingDevices:e.testMode?["YOUR_DEVICE_ID"]:[],initializeForTesting:e.testMode||!1}),this.isInitialized=!0,console.log("AdMob initialized successfully"),this.configUnsubscribe=Ct.onConfigChange(t=>{console.log("Configuración de anuncios actualizada:",t)})):console.log("AdMob not available on web platform")}catch(t){throw console.error("Failed to initialize AdMob:",t),t}}async showBannerAd(e,t){const i={success:!1,adType:Hn.BANNER,error:null,timestamp:Date.now()};try{if(!Ct.canShowAd(Hn.BANNER,t))return i.error="Ad blocked by configuration or conditions",console.log("Banner ad blocked by configuration"),i;if(!this.isInitialized||!this.config)throw i.error="AdMob not initialized",new Error("AdMob not initialized");if(!hn.isNativePlatform())throw i.error="AdMob banners only available on native platforms",new Error("AdMob banners only available on native platforms");if(!this.config.bannerAdUnitId)throw i.error="bannerAdUnitId not configured",new Error("bannerAdUnitId not configured");const o={adId:this.config.bannerAdUnitId,adSize:fg.ADAPTIVE_BANNER,position:hg.BOTTOM_CENTER,margin:0,isTesting:this.config.testMode||!1,...e};return await dn.showBanner(o),Ct.recordAdShown(Hn.BANNER),i.success=!0,console.log("Banner ad shown successfully"),i}catch(o){return i.error=o instanceof Error?o.message:"Unknown error",console.error("Failed to show banner ad:",o),i}}async hideBannerAd(){if(this.isInitialized&&hn.isNativePlatform())try{await dn.hideBanner(),console.log("Banner ad hidden successfully")}catch(e){console.error("Failed to hide banner ad:",e)}}async resumeBannerAd(){if(this.isInitialized&&hn.isNativePlatform())try{await dn.resumeBanner(),console.log("Banner ad resumed successfully")}catch(e){console.error("Failed to resume banner ad:",e)}}async removeBannerAd(){if(this.isInitialized&&hn.isNativePlatform())try{await dn.removeBanner(),console.log("Banner ad removed successfully")}catch(e){console.error("Failed to remove banner ad:",e)}}async showInterstitial(e){const t={success:!1,adType:Hn.POST_GAME,error:null,timestamp:Date.now()};try{if(!Ct.canShowAd(Hn.POST_GAME,e))return t.error="Ad blocked by configuration or conditions",console.log("Interstitial ad blocked by configuration"),t;if(!this.isInitialized||!this.config)return t.error="AdMob not initialized",console.warn("AdMob not initialized"),t;if(!hn.isNativePlatform())return t.error="Interstitials are only available on native platforms",console.warn("Interstitials are only available on native platforms"),t;if(!this.config.interstitialAdUnitId)return t.error="No interstitialAdUnitId configured",console.warn("No interstitialAdUnitId configured"),t;let i=null,o=null,c=null;const d=new Promise((_,w)=>{setTimeout(()=>w(new Error("Interstitial ad timeout")),3e4)}),m=new Promise(async(_,w)=>{try{i=await dn.addListener(yc.Loaded,j=>{console.log("Interstitial loaded")}),c=await dn.addListener(yc.FailedToLoad,j=>{console.error("Interstitial failed to load:",j),w(new Error("Failed to load interstitial"))});let b=null;const A=new Promise(j=>{b=j});o=await dn.addListener(yc.Dismissed,()=>{console.log("Interstitial dismissed"),b&&b()});const R={adId:this.config.interstitialAdUnitId,isTesting:this.config.testMode||!1};await dn.prepareInterstitial(R),await dn.showInterstitial(),await A,_(!0)}catch(b){w(b)}});return await Promise.race([m,d])&&(Ct.recordAdShown(Hn.POST_GAME),t.success=!0),t}catch(i){return t.error=i instanceof Error?i.message:"Unknown error",console.error("Failed to show interstitial ad:",i),t}finally{try{loadedSub&&await loadedSub.remove(),dismissedSub&&await dismissedSub.remove(),failedSub&&await failedSub.remove()}catch(i){console.warn("Error cleaning up interstitial listeners:",i)}}}async showRewarded(e){const t={success:!1,adType:Hn.QUESTION_CHANGE,error:null,timestamp:Date.now()};try{if(!Ct.canShowAd(Hn.QUESTION_CHANGE,e))return t.error="Ad blocked by configuration or conditions",console.log("Rewarded ad blocked by configuration"),t;if(!this.isInitialized||!this.config)return t.error="AdMob not initialized",console.warn("AdMob not initialized"),t;if(!hn.isNativePlatform())return t.error="Rewarded ads are only available on native platforms",console.warn("Rewarded ads are only available on native platforms"),t;if(!this.config.rewardedAdUnitId)return t.error="No rewardedAdUnitId configured",console.warn("No rewardedAdUnitId configured"),t;let i=null,o=null,c=null,d=null;const m=new Promise((w,b)=>{setTimeout(()=>b(new Error("Rewarded ad timeout")),3e4)}),g=new Promise(async(w,b)=>{try{let A=!1;i=await dn.addListener(Ro.Loaded,B=>{console.log("Rewarded loaded")}),d=await dn.addListener(Ro.FailedToLoad,B=>{console.error("Rewarded failed to load:",B),b(new Error("Failed to load rewarded ad"))}),o=await dn.addListener(Ro.Rewarded,B=>{A=!0,console.log("User rewarded",B)});let R=null;const j=new Promise(B=>{R=B});c=await dn.addListener(Ro.Dismissed,()=>{console.log("Rewarded dismissed"),R&&R()});const Q={adId:this.config.rewardedAdUnitId,isTesting:this.config.testMode||!1};await dn.prepareRewardVideoAd(Q),await dn.showRewardVideoAd(),await j,w(A)}catch(A){b(A)}});return await Promise.race([g,m])&&(Ct.recordAdShown(Hn.QUESTION_CHANGE),t.success=!0,t.rewarded=!0),t}catch(i){return t.error=i instanceof Error?i.message:"Unknown error",console.error("Failed to show rewarded ad:",i),t}finally{try{loadedSub&&await loadedSub.remove(),rewardedSub&&await rewardedSub.remove(),dismissedSub&&await dismissedSub.remove(),failedSub&&await failedSub.remove()}catch(i){console.warn("Error cleaning up rewarded listeners:",i)}}}async showBestMonetizingAd(e){var t,i;if((t=this.config)!=null&&t.rewardedAdUnitId){const o=await this.showRewarded(e);if(o.success)return o}if((i=this.config)!=null&&i.interstitialAdUnitId){const o=await this.showInterstitial(e);if(o.success)return o}return{success:!1,adType:Hn.POST_GAME,error:"No ads available or all blocked",timestamp:Date.now()}}isNativePlatform(){return hn.isNativePlatform()}isWebPlatform(){return hn.getPlatform()==="web"}getConfig(){return this.config}async showPostGameAd(e){const t=await this.showInterstitial(e);return t.adType=Hn.POST_GAME,t}async showPostRoundAd(e){const t=await this.showInterstitial(e);return t.adType=Hn.POST_ROUND,t}async showQuestionChangeAd(e){return await this.showRewarded(e)}canShowAdType(e,t){return Ct.canShowAd(e,t)}getAdsConfig(){return Ct.getConfig()}getSessionState(){return Ct.getSessionState()}resetSession(){Ct.resetSessionState()}destroy(){this.configUnsubscribe&&(this.configUnsubscribe(),this.configUnsubscribe=null)}}const Hr=new _D,vD=({pack:r,isOpen:e,onClose:t,onStartDemo:i,onAdWatched:o,hasNoAds:c=!1,onStartDemoWithoutAd:d})=>{const[m,g]=$.useState(!1),[_,w]=$.useState(null);if(!e)return null;const b=()=>{d?d():(i(),t())},A=async()=>{g(!0),w(null);try{if(c||!Ct.shouldShowAdInDemo()){o&&o(r.id),i();return}const R=await Hr.showInterstitial();R.success?(o&&o(r.id),i()):(console.log("Error al mostrar anuncio:",R.error),w("Ahora mismo no se puede reproducir el anuncio por lo que no podrá usarse el pack demo."))}catch(R){console.error("Error al mostrar anuncio:",R),w("Ahora mismo no se puede reproducir el anuncio por lo que no podrá usarse el pack demo.")}finally{g(!1)}};return p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 animate-fade-in",children:p.jsxs(On,{className:"w-full max-w-md relative",children:[p.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:p.jsx(MA,{className:"w-6 h-6"})}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-6xl mb-4",children:r.icon}),p.jsxs("h2",{className:"text-2xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-500",children:["Demo: ",r.name]}),p.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:p.jsxs("div",{className:"flex items-start gap-3 text-left",children:[p.jsx(VA,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),p.jsxs("div",{className:"text-sm text-blue-300",children:[p.jsx("p",{className:"mb-2",children:p.jsx("strong",{children:"¿Qué incluye el demo?"})}),p.jsxs("ul",{className:"space-y-1 text-xs",children:[p.jsx("li",{children:"• Podrás probar 5 preguntas y 5 retos que siempre serán los mismos (el pack incluye muchos más)"}),p.jsx("li",{children:"• Puedes jugar de forma ilimitada"}),p.jsx("li",{children:"• Solo necesitas ver un anuncio antes de cada partida"}),p.jsx("li",{children:"• Perfecto para probar si te gusta el pack"})]})]})]})}),_&&p.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 mb-4",children:p.jsx("p",{className:"text-red-400 text-sm font-medium",children:_})}),p.jsx("div",{className:"flex flex-col gap-3",children:_?p.jsxs(p.Fragment,{children:[p.jsx(be,{onClick:t,variant:"secondary",className:"w-full",children:"Volver atrás"}),p.jsx(be,{onClick:b,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700",children:p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx("span",{role:"img","aria-label":"play",children:"▶️"}),"Iniciar partida sin pack demo"]})})]}):p.jsxs(p.Fragment,{children:[p.jsx(be,{onClick:A,disabled:m,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:m?p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),c?"Iniciando demo...":"Cargando anuncio..."]}):p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx("span",{role:"img","aria-label":"gem",children:"💎"}),c?"Jugar demo":"Ver anuncio y jugar demo"]})}),p.jsx(be,{onClick:t,variant:"secondary",className:"w-full",disabled:m,children:"Volver atrás"})]})}),p.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"¿Te gusta el pack? Al final de la partida podrás comprarlo completo."})]})]})})},ED=({players:r,currentPlayerIndex:e,onNextPlayer:t,onNewGame:i,questions:o,dares:c,roundConfig:d,gameProgress:m,onRoundEnd:g,onQuestionAsked:_,onDareCompleted:w,onQuestionChange:b,onAdRequired:A,questionChangeState:R={changesCount:0,isAdLoading:!1,isAdPlaying:!1},hasNoAds:j=!1})=>{const[Q,B]=$.useState(null),[ie,ae]=$.useState(null),[oe,ge]=$.useState(new Set),[ce,G]=$.useState(new Set),N=r[e];$.useEffect(()=>{wi.trackGameStart("mixed","Juego Mixto",r.length)},[]);const x=xe=>{if(!xe.includes("$jugador"))return xe;const Se=r.filter((re,X)=>X!==e);if(Se.length===0)return xe.replace(/\$jugador/g,"otro jugador");const K=Se[Math.floor(Math.random()*Se.length)];return xe.replace(/\$jugador/g,K)},I=$.useMemo(()=>o.map((xe,Se)=>({item:xe,index:Se})),[o]),k=$.useMemo(()=>c.map((xe,Se)=>({item:xe,index:Se})),[c]),O=xe=>{const Se=xe==="pregunta"?I:k,K=xe==="pregunta"?oe:ce,re=xe==="pregunta"?ge:G;if(Se.length===0){console.error(`No hay ${xe}s disponibles`);return}const X=Se.filter(P=>!K.has(P.index));let ye;if(X.length===0){re(new Set);const P=Math.floor(Math.random()*Se.length);ye=Se[P],re(new Set([ye.index]))}else{const P=Math.floor(Math.random()*X.length);ye=X[P],re(ne=>new Set(ne).add(ye.index))}B(ye.item),ae(xe),xe==="pregunta"&&_?_():xe==="reto"&&w&&w()},V=async()=>{if(!Q||!ie)return;if(Ct.shouldShowAdForQuestionChange(R.changesCount+1)&&A)try{await A()}catch(re){console.error("Error showing ad:",re);return}const Se=ie==="pregunta"?I:k;if(Se.length<=1){console.log("No hay suficientes items para cambiar");return}const K=Se.filter(re=>re.item.text!==Q.text);if(K.length>0){const re=Math.floor(Math.random()*K.length),X=K[re];B(X.item),(ie==="pregunta"?ge:G)(P=>new Set(P).add(X.index)),b&&b()}},C=()=>{B(null),ae(null),e===r.length-1?m.currentRound+1>d.totalRounds?t():g():t()};return p.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center animate-fade-in",children:[p.jsxs(On,{className:"w-full max-w-lg min-h-[24rem] flex flex-col justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"mb-2",children:p.jsxs("p",{className:"text-sm text-gray-500",children:["Ronda ",m.currentRound," de ",d.totalRounds]})}),p.jsx("p",{className:"text-lg text-gray-400",children:"Turno de:"}),p.jsx("h2",{className:"text-4xl font-bold my-4 text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400",children:N})]}),Q?p.jsxs("div",{className:"animate-fade-in",children:[p.jsx("h3",{className:"text-2xl font-bold mb-6 text-cyan-400 capitalize",children:ie}),p.jsx("p",{className:"text-xl md:text-2xl leading-relaxed",children:x(Q.text)}),p.jsxs("div",{className:"mt-6 flex flex-col items-center gap-2",children:[p.jsxs(be,{onClick:V,variant:"secondary",className:"text-sm px-4 py-2",disabled:R.isAdLoading||R.isAdPlaying,children:["🔄 Cambiar ",ie]}),!j&&Ct.isEnabled()&&(R.isAdLoading||R.isAdPlaying)&&p.jsx("p",{className:"text-xs text-yellow-400",children:R.isAdLoading?"Cargando anuncio...":"Reproduciendo anuncio..."})]})]}):p.jsxs("div",{className:"animate-fade-in",children:[p.jsx("h3",{className:"text-2xl font-bold mb-6",children:"¿Verdad o Reto?"}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(be,{onClick:()=>O("pregunta"),className:"w-full sm:w-auto",children:"Pregunta"}),p.jsx(be,{onClick:()=>O("reto"),variant:"secondary",className:"w-full sm:w-auto",children:"Reto"})]})]}),p.jsx("div",{className:"mt-8",children:Q&&p.jsx(be,{onClick:C,children:"Siguiente Jugador"})})]}),p.jsx("button",{onClick:i,className:"mt-6 text-sm text-gray-500 hover:text-gray-300 transition-colors duration-200 px-4 py-2 rounded-lg hover:bg-gray-800/50 focus:outline-none focus:ring-2 focus:ring-gray-600",children:"Empezar nuevo juego"})]})},wD=({onSelectRounds:r,onBack:e,hasNoAds:t=!1})=>{const i=[{value:5,label:"5 Rondas",description:"Partida rápida (15-20 min)"},{value:10,label:"10 Rondas",description:"Partida estándar (30-40 min)"},{value:15,label:"15 Rondas",description:"Partida larga (45-60 min)"}];return p.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:p.jsxs(On,{className:"w-full max-w-2xl text-center",children:[p.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Configurar Partida"}),p.jsx("p",{className:"text-gray-400 mb-8",children:"Elige cuántas rondas quieres jugar"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:i.map(o=>p.jsxs("div",{className:"relative p-6 rounded-lg border border-gray-600 bg-gray-800/50 hover:border-purple-500 transition-all duration-200 cursor-pointer group",onClick:()=>r(o.value),children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:o.value}),p.jsx("div",{className:"text-lg font-semibold text-white mb-2",children:o.label}),p.jsx("div",{className:"text-sm text-gray-400",children:o.description})]}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]},o.value))}),!t&&p.jsx("div",{className:"text-sm text-gray-500 mb-6",children:"💡 Al final de cada ronda se mostrará un anuncio breve"}),p.jsx("div",{className:"flex gap-4 justify-center",children:p.jsx(be,{onClick:e,variant:"secondary",className:"px-6",children:"Volver"})})]})})},TD=({roundStats:r,currentRound:e,totalRounds:t,onContinue:i,onEndGame:o,hasNoAds:c=!1})=>{var Q;const[d,m]=$.useState(!1),[g,_]=$.useState(!1),[w,b]=$.useState(5);$.useEffect(()=>{m(!0),_(!0)},[]);const A=async()=>{if(!(!c&&Ct.shouldShowAdInRoundEnd())){i();return}m(!1),_(!1);try{m(!0),hn.isNativePlatform()?(await Hr.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),await Hr.showInterstitial()):console.log("Modo web: omitiendo simulación de anuncio"),_(!0),i()}catch(ie){console.warn("Fallo al mostrar anuncio:",ie),_(!0),i()}},R=async()=>{if(!(!c&&Ct.shouldShowAdInRoundEnd())){o();return}m(!1),_(!1);try{m(!0),hn.isNativePlatform()?(await Hr.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),await Hr.showInterstitial()):console.log("Modo web: omitiendo simulación de anuncio"),_(!0),o()}catch(ie){console.warn("Fallo al mostrar anuncio:",ie),_(!0),o()}},j=e>=t;return hn.isNativePlatform(),p.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:p.jsxs(On,{className:"w-full max-w-2xl text-center",children:[p.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-green-500 to-blue-500",children:j?"¡Partida Completada!":`¡Ronda ${r.roundNumber} Completada!`}),!j&&p.jsxs("p",{className:"text-gray-400 mb-6",children:["Ronda ",e," de ",t]}),p.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-6",children:[p.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Estadísticas de la Ronda"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-2xl font-bold text-blue-400",children:r.questionsAsked}),p.jsx("div",{className:"text-sm text-gray-400",children:"Preguntas"})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-2xl font-bold text-purple-400",children:r.daresCompleted}),p.jsx("div",{className:"text-sm text-gray-400",children:"Retos"})]})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Jugadores participantes:"}),p.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:((Q=r.playersParticipated)==null?void 0:Q.map((B,ie)=>p.jsx("span",{className:"px-3 py-1 bg-purple-600 text-white rounded-full text-sm",children:B},ie)))||p.jsx("span",{className:"text-gray-400 text-sm",children:"No hay jugadores registrados"})})]})]}),p.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:j?p.jsx(be,{onClick:R,className:"px-8 py-3 text-lg",children:"Ver Resultados Finales"}):p.jsxs(p.Fragment,{children:[p.jsx(be,{onClick:R,variant:"secondary",className:"px-6",children:"Terminar Partida"}),p.jsx(be,{onClick:A,className:"px-8 py-3 text-lg",children:"Siguiente Ronda"})]})})]})})},bD=({gameStats:r,players:e,onNewGame:t,onBackToMenu:i,hasNoAds:o=!1,isDemoMode:c=!1,demoPackId:d=null})=>{const m=r.gameEndTime&&r.gameStartTime?Math.round((r.gameEndTime.getTime()-r.gameStartTime.getTime())/1e3/60):0;r.totalRounds>0&&Math.round(r.totalQuestions/r.totalRounds),r.totalRounds>0&&Math.round(r.totalDares/r.totalRounds);const[g,_]=$.useState(!1),[w,b]=$.useState(!1),[A,R]=$.useState(!1),[j,Q]=$.useState(null),[B,ie]=$.useState(5),ae=hn.isNativePlatform();$.useEffect(()=>{wi.trackGameEnd("mixed","Juego Mixto",r.totalRounds,m)},[]),$.useEffect(()=>{_(!0),b(!0),R(!1),Q(null)},[]);const oe=async()=>{if(!(!o&&Ct.shouldShowAdInGameEnd())){t();return}b(!1),_(!1),R(!0),Q(null);try{ae?(await Hr.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),b(!0),R(!1),await Hr.showInterstitial()):(b(!0),R(!1),console.log("Modo web: omitiendo simulación de anuncio")),_(!0),t()}catch(G){console.warn("Error mostrando anuncio al final de partida:",G),Q(G instanceof Error?G.message:"Error desconocido"),R(!1),b(!0),_(!0),t()}},ge=async()=>{if(!(!o&&Ct.shouldShowAdInGameEnd())){i();return}b(!1),_(!1),R(!0),Q(null);try{ae?(await Hr.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),b(!0),R(!1),await Hr.showInterstitial()):(b(!0),R(!1),console.log("Modo web: omitiendo simulación de anuncio")),_(!0),i()}catch(G){console.warn("Error mostrando anuncio al final de partida:",G),Q(G instanceof Error?G.message:"Error desconocido"),R(!1),b(!0),_(!0),i()}};return p.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:p.jsxs(On,{className:"w-full max-w-4xl text-center",children:[p.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500",children:"🎉 ¡Partida Finalizada! 🎉"}),p.jsx("p",{className:"text-gray-400 mb-8 text-base sm:text-lg",children:"¡Esperamos que se hayan divertido mucho!"}),p.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-6",children:[p.jsx("h3",{className:"text-xl font-semibold mb-4 text-white text-center",children:"Estadísticas de la Partida"}),p.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[p.jsxs("div",{className:"text-center p-3 bg-gray-700/50 rounded-lg",children:[p.jsx("div",{className:"text-2xl font-bold text-purple-400",children:r.totalRounds}),p.jsx("div",{className:"text-sm text-gray-300",children:"Rondas"})]}),p.jsxs("div",{className:"text-center p-3 bg-gray-700/50 rounded-lg",children:[p.jsx("div",{className:"text-2xl font-bold text-blue-400",children:r.totalQuestions}),p.jsx("div",{className:"text-sm text-gray-300",children:"Preguntas"})]}),p.jsxs("div",{className:"text-center p-3 bg-gray-700/50 rounded-lg",children:[p.jsx("div",{className:"text-2xl font-bold text-green-400",children:r.totalDares}),p.jsx("div",{className:"text-sm text-gray-300",children:"Retos"})]})]})]}),p.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[p.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Jugadores Participantes"}),p.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:e.map((ce,G)=>p.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full",children:[p.jsx("span",{className:"text-lg",children:"🎮"}),p.jsx("span",{className:"font-medium",children:ce})]},G))})]}),c?p.jsx("div",{className:"bg-gradient-to-r from-yellow-600/20 to-orange-600/20 rounded-lg p-8 mb-8 border border-yellow-500/30",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-4xl mb-4",children:"🎮✨"}),p.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"¡Demo Completado!"}),p.jsx("p",{className:"text-gray-300 mb-6 text-lg",children:"¿Te gustó este pack? ¡Desbloquea el contenido completo!"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[p.jsxs("div",{className:"bg-yellow-500/10 rounded-lg p-4 border border-yellow-500/30",children:[p.jsx("p",{className:"text-yellow-200 font-medium mb-2",children:"🔓 Pack Completo"}),p.jsx("p",{className:"text-gray-300 text-sm",children:"Más de 50 preguntas y retos únicos"})]}),p.jsxs("div",{className:"bg-yellow-500/10 rounded-lg p-4 border border-yellow-500/30",children:[p.jsx("p",{className:"text-yellow-200 font-medium mb-2",children:"🎯 Sin Límites"}),p.jsx("p",{className:"text-gray-300 text-sm",children:"Juega todas las veces que quieras"})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(be,{onClick:i,className:"px-8 py-3 text-lg bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-bold rounded-lg shadow-lg transform hover:scale-105 transition-all",children:"🛒 ¡Comprar Pack Completo!"}),p.jsx(be,{onClick:oe,variant:"secondary",className:"px-8 py-3 text-lg border-2 border-yellow-500 text-yellow-400 hover:bg-yellow-500/10",children:"🔄 Jugar Demo Otra Vez"})]})]})}):p.jsx("div",{className:"bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-lg p-8 mb-8 border border-purple-500/30",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-3xl mb-4",children:"🌟"}),p.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"¡Partida Épica Completada!"}),p.jsx("p",{className:"text-gray-300 mb-6 text-lg",children:"¿Listos para más diversión? ¡La fiesta no tiene que terminar aquí!"}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(be,{onClick:oe,className:"px-8 py-3 text-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold rounded-lg shadow-lg transform hover:scale-105 transition-all",children:"🎮 Empezar Nueva Partida"}),p.jsx(be,{onClick:ge,className:"px-8 py-3 text-lg bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-bold rounded-lg shadow-lg transform hover:scale-105 transition-all",children:"🛒 Explorar Más Packs"})]})]})}),p.jsx("div",{className:"mt-4 text-xs text-gray-500 text-center",children:p.jsx("p",{children:"Gracias por jugar Verdad o Reto. ¡Comparte tus mejores momentos!"})})]})})},CE=["PUTO","PUTA","MIERDA","JODER","COÑO","CABRON","CABRONA","PENDEJO","PENDEJA","IDIOTA","ESTUPIDO","ESTUPIDA","TONTO","TONTA","IMBECIL","GILIPOLLAS","HIJO","HIJA","MADRE","PADRE","MAMA","PAPA","SEXO","PORNO","XXX","NAZI","HITLER","MUERTE","MATAR","SUICIDIO","DROGA","DROGAS","MARICON","MARICA","GAY","LESBIANA","TRANS","HOMO","HETERO","NEGRO","BLANCO","CHINO","JUDIO","MUSULMAN","CRISTIANO","GORDO","GORDA","FEO","FEA","FLACOS","FLACA","FUCK","SHIT","BITCH","DAMN","HELL","ASS","ASSHOLE","BASTARD","STUPID","IDIOT","MORON","RETARD","DUMB","LOSER","FREAK","SEX","PORN","XXX","NUDE","NAKED","BOOBS","PENIS","VAGINA","NAZI","HITLER","KILL","DIE","DEATH","SUICIDE","DRUG","DRUGS","FAG","FAGGOT","HOMO","LESBIAN","TRANS","QUEER","BLACK","WHITE","ASIAN","JEWISH","MUSLIM","CHRISTIAN","FAT","UGLY","SKINNY","GROSS","DISGUSTING","WTF","OMFG","STFU","GTFO","LMAO","ROFL","ADMIN","MODERATOR","OWNER","STAFF","SUPPORT","VERDAD","RETO","GAME","JUEGO","APP","OFICIAL","666","420","69","88","1488","NULL","UNDEFINED","ERROR","ADMIN","ROOT","SYSTEM","DELETE","DROP","TRUNCATE","ALTER","CREATE"],SD=[/^\d+$/,/^[A-Z]\1{5}$/,/^(.)\1{2,}/,/^[0O1IL]{6}$/,/^(ABC|123|XYZ|QWE|ASD|ZXC)/],mg=r=>{if(!r||typeof r!="string")return!1;const e=r.toUpperCase().trim();if(e.length!==6||CE.includes(e))return!1;for(const d of CE)if(e.includes(d))return!1;for(const d of SD)if(d.test(e))return!1;const t="AEIOU",i="BCDFGHJKLMNPQRSTVWXYZ",o=e.split("").every(d=>t.includes(d)),c=e.split("").every(d=>i.includes(d));return!(o||c)},NE=(r=[])=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t=0;const i=1e3;for(;t<i;){let m="";for(let g=0;g<6;g++)m+=e.charAt(Math.floor(Math.random()*e.length));if(mg(m)&&!r.includes(m))return m;t++}const o=Date.now().toString(36).toUpperCase(),c=Math.random().toString(36).substring(2,4).toUpperCase(),d=(o+c).substring(0,6).padEnd(6,"0");return mg(d)?d:"REF001"},Tb=r=>{if(!r||typeof r!="string")return{isValid:!1,error:"El código de referido es requerido"};const e=r.toUpperCase().trim().replace(/[^A-Z0-9]/g,"");return e.length!==6?{isValid:!1,error:"El código de referido debe tener exactamente 6 caracteres"}:mg(e)?{isValid:!0,sanitizedCode:e}:{isValid:!1,error:"El código de referido contiene contenido inapropiado o no válido"}},AD=async()=>{try{const r=nt(De,"users"),e=await pt(r),t=[];return e.forEach(i=>{const o=i.data();o.referralCode&&t.push(o.referralCode)}),t}catch(r){return console.error("Error getting existing referral codes:",r),[]}},xD=async r=>{try{const e=nt(De,"users"),t=St(e,We("referralCode","==",r));return!(await pt(t)).empty}catch(e){return console.error("Error checking referral code existence:",e),!1}},RD=async()=>{try{const r=await AD();return NE(r)}catch(r){return console.error("Error generating unique referral code:",r),NE([])}},wp=async(r,e)=>{try{const t=Wt(De,"users",r.uid);if(!(await Wr(t)).exists()){const o=await RD();let c={};if(e){const g=Tb(e);g.isValid&&g.sanitizedCode?await xD(g.sanitizedCode)?c={usedReferralCode:g.sanitizedCode,referralProcessedAt:new Date}:console.warn("Referral code does not exist:",g.sanitizedCode):console.warn("Invalid referral code provided:",e,g.error)}const d={uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,isAnonymous:r.isAnonymous,emailVerified:r.emailVerified,referralCode:o,referralCount:0,createdAt:new Date,lastLoginAt:new Date,migrationVersion:"1.0",usedReferralCode:null,referredBy:null,referralProcessedAt:null,lastKnownIP:null,deviceId:null,acceptedSuggestions:0,...c};await Rc(t,d);const m=Wt(De,"userReferralCodes",r.uid);await Rc(m,{referralCode:o,displayName:r.displayName||r.email||"Usuario",createdAt:new Date})}}catch(t){console.error("Error creating user profile:",t)}},$o=r=>({uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,isAnonymous:r.isAnonymous,emailVerified:r.emailVerified}),bb=async r=>{try{const e=await u2(Tr,vb);return await wp(e.user,r),$o(e.user)}catch(e){throw console.error("Error al iniciar sesión con Google:",e),new Error(e.message||"Error al iniciar sesión con Google")}},Sb=async(r,e)=>{try{const t=await LN(Tr,r,e);return $o(t.user)}catch(t){throw console.error("Error al iniciar sesión:",t),new Error(bp(t.code))}},Ab=async(r,e,t,i)=>{try{const o=await jN(Tr,r,e);return t&&await zN(o.user,{displayName:t}),await wp(o.user,i),await ab(o.user),$o(o.user)}catch(o){throw console.error("Error al registrarse:",o),new Error(bp(o.code))}},xb=async()=>{try{const r=await PN(Tr);return await wp(r.user),$o(r.user)}catch(r){throw console.error("Error al iniciar sesión anónima:",r),new Error("Error al iniciar sesión anónima")}},Rb=async()=>{try{await FN(Tr)}catch(r){throw console.error("Error al cerrar sesión:",r),new Error("Error al cerrar sesión")}},Ib=async r=>{try{await VN(Tr,r)}catch(e){throw console.error("Error al enviar email de restablecimiento:",e),new Error(bp(e.code))}},Cb=async()=>{try{if(Tr.currentUser)await ab(Tr.currentUser);else throw new Error("No hay usuario autenticado")}catch(r){throw console.error("Error al reenviar verificación:",r),new Error("Error al reenviar verificación de email")}},Nb=r=>HN(Tr,e=>{r(e?$o(e):null)}),Tp=()=>Tr.currentUser?$o(Tr.currentUser):null,gg=()=>{const r=Tp();return r!==null&&!r.isAnonymous&&r.emailVerified},bp=r=>{switch(r){case"auth/user-not-found":return"No existe una cuenta con este email";case"auth/wrong-password":return"Contraseña incorrecta";case"auth/email-already-in-use":return"Ya existe una cuenta con este email";case"auth/weak-password":return"La contraseña debe tener al menos 6 caracteres";case"auth/invalid-email":return"Email inválido";case"auth/too-many-requests":return"Demasiados intentos fallidos. Intenta más tarde";case"auth/network-request-failed":return"Error de conexión. Verifica tu internet";default:return"Error de autenticación. Intenta nuevamente"}},ID=Object.freeze(Object.defineProperty({__proto__:null,canPurchase:gg,getCurrentUser:Tp,logout:Rb,onAuthStateChange:Nb,registerWithEmail:Ab,resendEmailVerification:Cb,resetPassword:Ib,signInAnonymous:xb,signInWithEmail:Sb,signInWithGoogle:bb},Symbol.toStringTag,{value:"Module"})),CD=()=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let t=0;t<6;t++)e+=r.charAt(Math.floor(Math.random()*r.length));return e},ND=async r=>{try{const e=nt(De,"users"),t=St(e,We("referralCode","==",r));return(await pt(t)).empty}catch(e){return console.error("Error verificando unicidad del código:",e),!1}},DD=async()=>{let r=0;const e=10;for(;r<e;){const t=CD();if(await ND(t))return t;r++}throw new Error("No se pudo generar un código único después de "+e+" intentos")},Db=async r=>{try{if(!(r!=null&&r.uid)){console.warn("Usuario no válido para migración");return}const e=Wt(De,"users",r.uid),t=await Wr(e);if(!t.exists()){console.warn("Documento de usuario no encontrado:",r.uid);return}const i=t.data(),o={};let c=!1;if(!i.referralCode)try{const d=await DD();o.referralCode=d,c=!0,console.log("✅ Generando código de referido para usuario:",r.uid,"-",d)}catch(d){console.error("Error generando código de referido:",d),o.referralCode=`TEMP${Date.now().toString().slice(-6)}`,c=!0}if((i.referralCount===void 0||i.referralCount===null)&&(o.referralCount=0,c=!0),i.createdAt||(o.createdAt=new Date,c=!0),o.lastLoginAt=new Date,c=!0,i.usedReferralCode===void 0&&(o.usedReferralCode=null,c=!0),i.referredBy===void 0&&(o.referredBy=null,c=!0),i.referralProcessedAt===void 0&&(o.referralProcessedAt=null,c=!0),i.lastKnownIP===void 0&&(o.lastKnownIP=null,c=!0),i.deviceId===void 0&&(o.deviceId=null,c=!0),i.acceptedSuggestions===void 0&&(o.acceptedSuggestions=0,c=!0),i.deviceId===void 0&&(o.deviceId=null,c=!0),i.autoMigratedAt||(o.autoMigratedAt=new Date,o.migrationVersion=i.migrationVersion||"1.0",c=!0),c){if(await lp(e,o),o.referralCode)try{const d=Wt(De,"userReferralCodes",r.uid);await Rc(d,{referralCode:o.referralCode,displayName:i.displayName||i.email||"Usuario",createdAt:i.createdAt||o.createdAt||new Date}),console.log("✅ Documento de código de referido creado para:",r.uid)}catch(d){console.error("Error creando documento de código de referido:",d)}console.log("✅ Usuario migrado automáticamente:",r.uid)}}catch(e){console.error("Error en migración automática de usuario:",e)}},Pb=$.createContext(void 0),PD=({children:r})=>{const[e,t]=$.useState({user:null,isLoading:!0,isAuthenticated:!1});$.useEffect(()=>{const m=Nb(async g=>{if(g&&!g.isAnonymous&&g.uid)try{await Db(g)}catch(_){console.error("Error durante la migración automática del usuario:",_)}t({user:g,isLoading:!1,isAuthenticated:g!==null&&!g.isAnonymous})});return()=>m()},[]);const d={...e,login:()=>{},logout:async()=>{try{const{logout:m}=await Eb(async()=>{const{logout:g}=await Promise.resolve().then(()=>ID);return{logout:g}},void 0,import.meta.url);await m()}catch(m){console.error("Error al cerrar sesión:",m)}},refreshUser:()=>{const m=Tp();t(g=>({...g,user:m,isAuthenticated:m!==null&&!m.isAnonymous}))}};return p.jsx(Pb.Provider,{value:d,children:r})},ji=()=>{const r=$.useContext(Pb);if(r===void 0)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return r},ki={PURCHASED_PACKS:"verdad_reto_purchased_packs",CACHED_GAME_ITEMS:"verdad_reto_cached_items",CACHED_CATEGORIES:"verdad_reto_cached_categories",CACHE_PERMISSION:"verdad_reto_cache_permission",LAST_SYNC:"verdad_reto_last_sync"},OD=()=>{const r=localStorage.getItem(ki.CACHE_PERMISSION);if(r==="granted")return!0;if(r==="denied")return!1;const e=window.confirm(`¿Deseas permitir que la aplicación guarde los packs comprados localmente para poder jugar sin conexión?

Esto mejorará tu experiencia permitiéndote acceder a tus packs incluso sin internet.`);return localStorage.setItem(ki.CACHE_PERMISSION,e?"granted":"denied"),e},Cc=()=>localStorage.getItem(ki.CACHE_PERMISSION)==="granted",kD=async(r,e,t)=>{if(!Cc()){console.log("Cache permission not granted, skipping cache");return}try{const i={pack:r,gameData:{items:e,categories:t,timestamp:Date.now()},timestamp:Date.now()},o=Sp();o[r.id]=i,localStorage.setItem(ki.PURCHASED_PACKS,JSON.stringify(o)),localStorage.setItem(ki.LAST_SYNC,Date.now().toString()),console.log(`Pack ${r.name} cached successfully`)}catch(i){console.error("Error caching pack:",i)}},Sp=()=>{try{const r=localStorage.getItem(ki.PURCHASED_PACKS);return r?JSON.parse(r):{}}catch(r){return console.error("Error reading cached packs:",r),{}}},MD=r=>{if(!Cc())return null;try{const e=Sp(),t=[],i=[];for(const o of r){const c=e[o];c&&(t.push(...c.gameData.items),i.push(...c.gameData.categories))}return t.length===0?null:{items:t,categories:[...new Set(i)]}}catch(e){return console.error("Error reading cached game data:",e),null}},VD=()=>{Object.values(ki).forEach(r=>{localStorage.removeItem(r)}),console.log("Cache cleared successfully")},Ob=()=>{const r=Sp(),e=localStorage.getItem(ki.LAST_SYNC);return{hasPermission:Cc(),packsCount:Object.keys(r).length,lastSync:e?new Date(parseInt(e)):null,packs:Object.keys(r)}};var kb="basil",jD=function(e){return e===3?"v3":e},Mb="https://js.stripe.com",LD="".concat(Mb,"/").concat(kb,"/stripe.js"),UD=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,zD=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var qD=function(e){return UD.test(e)||zD.test(e)},BD=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Mb,'"]')),t=0;t<e.length;t++){var i=e[t];if(qD(i.src))return i}return null},DE=function(e){var t="",i=document.createElement("script");i.src="".concat(LD).concat(t);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(i),i},HD=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})},tc=null,Ed=null,wd=null,FD=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},GD=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},QD=function(e){return tc!==null?tc:(tc=new Promise(function(t,i){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var o=BD();if(!(o&&e)){if(!o)o=DE(e);else if(o&&wd!==null&&Ed!==null){var c;o.removeEventListener("load",wd),o.removeEventListener("error",Ed),(c=o.parentNode)===null||c===void 0||c.removeChild(o),o=DE(e)}}wd=GD(t,i),Ed=FD(i),o.addEventListener("load",wd),o.addEventListener("error",Ed)}catch(d){i(d);return}}),tc.catch(function(t){return tc=null,Promise.reject(t)}))},KD=function(e,t,i){if(e===null)return null;var o=t[0],c=o.match(/^pk_test/),d=jD(e.version),m=kb;c&&d!==m&&console.warn("Stripe.js@".concat(d," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(m,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var g=e.apply(void 0,t);return HD(g,i),g},nc,Vb=!1,jb=function(){return nc||(nc=QD(null).catch(function(e){return nc=null,Promise.reject(e)}),nc)};Promise.resolve().then(function(){return jb()}).catch(function(r){Vb||console.warn(r)});var YD=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Vb=!0;var o=Date.now();return jb().then(function(c){return KD(c,t,o)})};const Lb=!0,PE=()=>{const r=window.location.origin,e=window.location.pathname.includes("/verdad-reto")?"/verdad-reto":"";return{success:`${r}${e}/shop?success=true`,cancel:`${r}${e}/shop?canceled=true`}},OE={useHostedCheckout:Lb,successUrl:()=>PE().success,cancelUrl:()=>PE().cancel},XD="pk_live_51S2dpMEamlsERKowyMSm4kgm11dMknJLyZGy9gZsIBBd3BQo3l9Vnn0TYKWcmuDtnq23YEsHo7FL69hGEM3UAboz00Onx53LCm";let qm=null;const Ub=()=>(qm||(qm=YD(XD)),qm),$D=async()=>{try{const r=await Wr(Wt(De,"config","stripe"));return r.exists()?r.data():null}catch(r){return console.error("Error obteniendo configuración de Stripe:",r),null}};const WD=async(r,e,t)=>{const i=await Ub();if(!i)throw new Error("Stripe no se pudo cargar");if(!r.isPremium)throw new Error("Este pack no requiere pago");r.priceAmount;const o=await i.redirectToCheckout({lineItems:[{price:r.stripePriceId,quantity:1}],mode:"payment",successUrl:`${OE.successUrl()}&pack=${r.id}&session_id={CHECKOUT_SESSION_ID}`,cancelUrl:OE.cancelUrl(),customerEmail:e,clientReferenceId:`${t}_${r.id}_${Date.now()}`});if(o.error)throw new Error(o.error.message)},JD=async(r,e,t)=>{try{if(Lb)return await WD(r,e,t),null}catch(i){throw console.error("Error creando sesión de checkout:",i),i}},ZD=async(r,e,t)=>{try{const i=await Ub();if(!i)throw new Error("Stripe no está disponible");const o=await JD(r,e,t);if(!o)throw new Error("No se pudo crear la sesión de pago");await e4({userId:t,packId:r.id,stripeSessionId:o.sessionId,purchaseDate:new Date,amount:r.priceAmount||0,currency:r.currency||"EUR",status:"pending",email:e});const{error:c}=await i.redirectToCheckout({sessionId:o.sessionId});if(c)throw new Error(c.message)}catch(i){throw console.error("Error redirigiendo a checkout:",i),i}},e4=async r=>{try{return(await Hc(nt(De,"userPurchases"),{...r,purchaseDate:r.purchaseDate.toISOString()})).id}catch(e){throw console.error("Error guardando compra pendiente:",e),e}},t4=async r=>{try{const e=St(nt(De,"userPurchases"),We("userId","==",r),We("status","==","completed"));return(await pt(e)).docs.map(i=>({id:i.id,...i.data(),purchaseDate:new Date(i.data().purchaseDate)}))}catch(e){return console.error("Error obteniendo compras del usuario:",e),[]}},kE=async r=>{try{return(await t4(r)).map(t=>t.packId)}catch(e){return console.error("Error obteniendo packs comprados:",e),[]}},n4=({onClose:r})=>{const[e,t]=$.useState(null),[i,o]=$.useState(!1);$.useEffect(()=>{c()},[]);const c=()=>{const g=Ob();t(g)},d=async()=>{o(!0);try{OD()&&c()}finally{o(!1)}},m=()=>{window.confirm("¿Estás seguro de que quieres eliminar todos los datos guardados localmente?")&&(VD(),c())};return e?p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h2",{className:"text-xl font-bold",children:"Almacenamiento Local"}),p.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Estado del Caché"}),p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Permiso:"}),p.jsx("span",{className:`font-medium ${e.hasPermission?"text-green-600":"text-red-600"}`,children:e.hasPermission?"Activado":"Desactivado"})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Packs guardados:"}),p.jsx("span",{className:"font-medium",children:e.packsCount})]}),e.lastSync&&p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Última sincronización:"}),p.jsxs("span",{className:"font-medium text-xs",children:[e.lastSync.toLocaleDateString()," ",e.lastSync.toLocaleTimeString()]})]})]})]}),e.packsCount>0&&p.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Packs Disponibles Sin Conexión"}),p.jsx("div",{className:"space-y-1 text-sm",children:e.packs.map(g=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),p.jsx("span",{className:"capitalize",children:g.replace("-"," ")})]},g))})]}),p.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"¿Qué es el almacenamiento local?"}),p.jsx("p",{className:"text-sm text-gray-700",children:"Permite guardar los packs que compres en tu dispositivo para poder jugar sin conexión a internet. Los datos se mantienen seguros en tu navegador."})]}),p.jsxs("div",{className:"flex flex-col space-y-2",children:[e.hasPermission?p.jsx("div",{className:"text-center text-green-600 font-medium",children:"✓ Almacenamiento local activado"}):p.jsx(be,{onClick:d,disabled:i,className:"w-full bg-green-600 hover:bg-green-700",children:i?"Procesando...":"Activar Almacenamiento Local"}),e.packsCount>0&&p.jsx(be,{onClick:m,className:"w-full bg-red-600 hover:bg-red-700",children:"Limpiar Datos Guardados"}),p.jsx(be,{onClick:r,className:"w-full bg-gray-600 hover:bg-gray-700",children:"Cerrar"})]})]})]})}):p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:p.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:p.jsx("div",{className:"text-center",children:"Cargando información del caché..."})})})},r4=({pack:r,onBack:e,onSuccess:t})=>{const{user:i}=ji(),[o,c]=$.useState(!1),[d,m]=$.useState(null),[g,_]=$.useState(null);$.useEffect(()=>{(async()=>{try{const R=await $D();_(R)}catch{m("Error cargando configuración de pago")}})()},[]);const w=async()=>{if(!i||!i.email){m("Debes estar autenticado para realizar una compra");return}if(!r.isPremium){m("Este pack no requiere pago");return}c(!0),m(null);try{await ZD(r,i.email,i.uid),t&&t()}catch(A){m(A.message||"Error procesando el pago"),c(!1)}},b=(A,R)=>new Intl.NumberFormat("es-ES",{style:"currency",currency:R.toUpperCase()}).format(A/100);return g?p.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"w-full max-w-md",children:[p.jsxs("div",{className:"relative text-center mb-8",children:[p.jsx("button",{onClick:e,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:p.jsx(qE,{className:"w-8 h-8"})}),p.jsx("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Checkout"})]}),p.jsxs(On,{className:"p-6",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("div",{className:"text-6xl mb-4",children:r.icon}),p.jsx("h2",{className:"text-2xl font-bold text-cyan-400 mb-2",children:r.name}),p.jsx("p",{className:"text-gray-400 mb-4",children:r.description}),r.priceAmount&&r.currency&&p.jsxs("div",{className:"bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-lg p-4 mb-4",children:[p.jsx("div",{className:"text-3xl font-bold text-white",children:b(r.priceAmount,r.currency)}),p.jsx("div",{className:"text-sm text-gray-300",children:"Pago único"})]})]}),p.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 mb-6",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(Io,{className:"w-5 h-5 text-green-400"}),p.jsx("span",{className:"text-green-400 font-semibold",children:"Pago seguro"})]}),p.jsx("p",{className:"text-sm text-gray-300",children:"Tu pago está protegido por Stripe. No almacenamos información de tarjetas de crédito."})]}),i&&p.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:[p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsx("strong",{children:"Cuenta:"})," ",i.displayName||i.email]}),p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsx("strong",{children:"Email:"})," ",i.email]})]}),d&&p.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6",children:p.jsx("p",{className:"text-red-200 text-sm",children:d})}),p.jsx(be,{onClick:w,disabled:o||!i,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:o?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Procesando..."]}):p.jsxs(p.Fragment,{children:[p.jsx(BE,{className:"w-5 h-5"}),"Pagar con Stripe"]})}),p.jsx("div",{className:"mt-4 text-center",children:p.jsx("p",{className:"text-xs text-gray-400",children:"Al continuar, aceptas nuestros términos de servicio y política de privacidad."})})]}),p.jsxs("div",{className:"mt-6 text-center",children:[p.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Métodos de pago aceptados:"}),p.jsxs("div",{className:"flex justify-center gap-2",children:[p.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Visa"}),p.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Mastercard"}),p.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"American Express"})]})]})]})}):p.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-400",children:"Cargando configuración de pago..."})]})})},s4=({availablePacks:r,purchasedPacks:e,onPurchase:t,onBack:i,onGoToLogin:o})=>{const{user:c,isAuthenticated:d}=ji(),[m,g]=$.useState(!1),[_,w]=$.useState(!1),[b,A]=$.useState(!1),[R,j]=$.useState(null),[Q,B]=$.useState([]),[ie,ae]=$.useState(!1);$.useEffect(()=>{(async()=>{if(c&&d){ae(!0);try{const N=await kE(c.uid);B(N)}catch(N){console.error("Error cargando compras del usuario:",N)}finally{ae(!1)}}else B([])})()},[c,d]);const oe=G=>{const N=r.find(x=>x.id===G);if(N){if(!N.isPremium||N.id==="base"){if(!gg()){g(!0),setTimeout(()=>g(!1),3e3);return}t(G);return}if(!gg()){g(!0),setTimeout(()=>g(!1),3e3);return}j(N),A(!0)}},ge=async()=>{if(A(!1),j(null),c&&d)try{const G=await kE(c.uid);B(G),R&&G.includes(R.id)&&t(R.id)}catch(G){console.error("Error actualizando compras:",G)}},ce=()=>{A(!1),j(null)};return Ob(),p.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in pt-16",children:p.jsxs("div",{className:"w-full max-w-2xl",children:[p.jsxs("div",{className:"relative text-center mb-8",children:[p.jsx("button",{onClick:i,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:p.jsx(qE,{className:"w-8 h-8"})}),p.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Tienda de Paquetes"}),p.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(kA,{className:"w-4 h-4"}),c?p.jsx("span",{className:`${d?"text-green-400":"text-yellow-400"}`,children:d?`Conectado como ${c.displayName||c.email}`:"Usuario anónimo - Inicia sesión para comprar"}):p.jsx("span",{className:"text-gray-400",children:"No conectado"})]}),c&&d&&p.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:p.jsx("a",{href:"https://verdad-reto.es.eu.org/delete-account.html",target:"_blank",rel:"noopener noreferrer",className:"hover:text-red-400 transition-colors",children:"Eliminar cuenta"})})]})]}),m&&p.jsxs("div",{className:"mb-6 p-4 bg-yellow-500/20 border border-yellow-500 rounded-lg text-center",children:[p.jsx("p",{className:"text-yellow-100 mb-2",children:"Necesitas iniciar sesión y verificar tu email para comprar packs premium"}),o&&p.jsx(be,{onClick:o,className:"bg-yellow-600 hover:bg-yellow-700",children:"Ir a Iniciar Sesión"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(G=>{const N=e.includes(G.id),x=Q.includes(G.id),I=N||x,k=G.id==="base",O=G.isPremium&&!k,V=O&&!I;return p.jsxs(On,{className:`flex flex-col text-center border-2 transition-all ${I?"border-green-500/50":V?"border-yellow-500/50 opacity-75":"border-transparent hover:border-pink-500/50"}`,children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"text-5xl mb-4",children:G.icon}),V&&p.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-500 rounded-full p-1",children:p.jsx(Io,{className:"w-4 h-4 text-black"})})]}),p.jsx("h2",{className:`text-2xl font-bold ${I?"text-green-400":V?"text-yellow-400":"text-cyan-400"}`,children:G.name}),p.jsx("p",{className:"text-gray-400 mt-2 mb-2 flex-grow",children:G.description}),O&&G.priceAmount&&G.currency&&p.jsxs("div",{className:"mb-4",children:[G.hasDiscount&&G.originalPriceAmount?p.jsxs("div",{className:"space-y-1",children:[p.jsx("div",{className:"text-sm text-gray-500 line-through",children:new Intl.NumberFormat("es-ES",{style:"currency",currency:G.currency.toUpperCase()}).format(G.originalPriceAmount/100)}),p.jsx("div",{className:`text-lg font-bold ${I?"text-green-400":"text-red-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:G.currency.toUpperCase()}).format(G.priceAmount/100)}),p.jsx("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:G.discountPercentage?`-${G.discountPercentage}%`:`-${new Intl.NumberFormat("es-ES",{style:"currency",currency:G.currency.toUpperCase()}).format((G.originalPriceAmount-G.priceAmount)/100)}`}),G.discountReason&&p.jsx("div",{className:"text-xs text-yellow-400 italic",children:G.discountReason})]}):p.jsx("div",{className:`text-lg font-bold ${I?"text-green-400":"text-yellow-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:G.currency.toUpperCase()}).format(G.priceAmount/100)}),p.jsx("div",{className:"text-xs text-gray-500",children:"Pago único"})]}),I?p.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-green-700 text-green-200",children:"✓ Comprado"}):k?p.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-blue-700 text-blue-200",children:"Incluido"}):O?p.jsx(be,{onClick:()=>oe(G.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",disabled:ie,children:ie?p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):p.jsxs(p.Fragment,{children:[p.jsx(BE,{className:"w-4 h-4"}),"Comprar ",G.price]})}):p.jsxs(be,{onClick:()=>oe(G.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2",children:[p.jsx(Io,{className:"w-4 h-4"}),"Desbloquear (",G.price,")"]})]},G.id)})}),_&&p.jsx(n4,{onClose:()=>w(!1)}),b&&R&&p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:p.jsx("div",{className:"w-full h-full",children:p.jsx(r4,{pack:R,onBack:ce,onSuccess:ge})})})]})})},i4=r=>{var t;if(!r.hasDiscount||!r.priceAmount)return r;if(r.discountValidUntil&&new Date>r.discountValidUntil)return{...r,hasDiscount:!1};let e=r.priceAmount;return r.discountPercentage?e=r.priceAmount*(1-r.discountPercentage/100):r.discountAmount&&(e=r.priceAmount-r.discountAmount),e=Math.max(0,Math.round(e)),{...r,originalPriceAmount:r.priceAmount,priceAmount:e,price:new Intl.NumberFormat("es-ES",{style:"currency",currency:((t=r.currency)==null?void 0:t.toUpperCase())||"EUR"}).format(e/100)}},Sh=async()=>{try{const r=nt(De,"packs"),e=await pt(r);return e.empty?(console.warn("No packs found in Firebase database"),[]):e.docs.map(o=>{const c=o.data();return{id:o.id,name:c.name,description:c.description,price:c.price,icon:c.icon,isActive:c.isActive??!0,priceAmount:c.priceAmount,currency:c.currency,isPremium:c.isPremium??!1,stripeProductId:c.stripeProductId,stripePriceId:c.stripePriceId,hasDiscount:c.hasDiscount??!1,discountPercentage:c.discountPercentage,discountAmount:c.discountAmount,discountReason:c.discountReason,discountValidUntil:c.discountValidUntil?c.discountValidUntil.toDate():void 0,originalPriceAmount:c.originalPriceAmount,allowDemo:c.allowDemo??!1,demoPlaysCount:c.demoPlaysCount??0}}).filter(o=>o.isActive).map(o=>i4(o))}catch(r){throw console.error("Error connecting to Firebase:",r),new Error("No se pudo conectar a la base de datos. Verifica tu conexión a internet.")}},a4=async r=>{try{if(!r||r.length===0)return console.warn("No categories provided for questions query"),[];const e=nt(De,"gameItems"),t=St(e,We("type","==","question"),We("category","in",r)),i=await pt(t);return i.empty?(console.warn("No questions found in Firebase database for categories:",r),[]):i.docs.map(c=>{const d=c.data();return{text:d.text,category:d.category}})}catch(e){throw console.error("Error fetching questions from Firebase:",e),new Error("No se pudieron cargar las preguntas. Verifica tu conexión a internet.")}},o4=async r=>{try{if(!r||r.length===0)return console.warn("No categories provided for dares query"),[];const e=nt(De,"gameItems"),t=St(e,We("type","==","dare"),We("category","in",r)),i=await pt(t);return i.empty?(console.warn("No dares found in Firebase database for categories:",r),[]):i.docs.map(c=>{const d=c.data();return{text:d.text,category:d.category}})}catch(e){throw console.error("Error fetching dares from Firebase:",e),new Error("No se pudieron cargar los retos. Verifica tu conexión a internet.")}},l4=async r=>{try{if(!r||r.length===0)return console.warn("No pack IDs provided for categories query"),[];const e=nt(De,"gameItems"),t=St(e,We("packId","in",r)),i=await pt(t);return i.empty?(console.warn("No categories found in Firebase database for packs:",r),[]):[...new Set(i.docs.map(c=>c.data().category))]}catch(e){throw console.error("Error fetching categories from Firebase:",e),new Error("No se pudieron cargar las categorías. Verifica tu conexión a internet.")}},ME=async r=>{try{if(!r||r.length===0)return console.warn("No pack IDs provided for game data query"),{questions:[],dares:[],categories:[]};const e=await l4(r),[t,i]=await Promise.all([a4(e),o4(e)]);if(Cc()&&(t.length>0||i.length>0)){const o=[...t,...i],c=r.reduce((d,m)=>{const g=o.filter(w=>w.packId===m),_=e.filter(w=>g.some(b=>b.category===w));return g.length>0&&(d[m]={items:g,categories:_}),d},{});for(const[d,m]of Object.entries(c)){const _=(await Sh()).find(w=>w.id===d);_&&await kD(_,m.items,m.categories)}}return{questions:t,dares:i,categories:e}}catch(e){console.error("Error fetching game data from Firebase:",e);const t=MD(r);if(t){console.log("Using cached game data for offline play");const i=t.items.filter(c=>!("type"in c)||c.type==="question"),o=t.items.filter(c=>"type"in c&&c.type==="dare");return{questions:i,dares:o,categories:t.categories}}throw Cc()?new Error("No hay conexión a internet y no tienes datos guardados para estos packs."):new Error("No hay conexión a internet y no tienes packs guardados localmente. ¿Deseas activar el almacenamiento local para jugar sin conexión?")}},c4=async r=>{try{const e=nt(De,"gameItems"),t=St(e,We("packId","==",r),We("isDemo","==",!0)),o=(await pt(t)).docs.map(g=>({id:g.id,...g.data()})),c=o.filter(g=>g.type==="question").map(g=>({text:g.text,category:g.category,isDemo:!0,packId:g.packId})),d=o.filter(g=>g.type==="dare").map(g=>({text:g.text,category:g.category,isDemo:!0,packId:g.packId})),m=[...new Set(o.map(g=>g.category))];return{questions:c,dares:d,categories:m}}catch(e){return console.error("Error fetching demo data:",e),{questions:[],dares:[],categories:[]}}},u4=async(r,e)=>{try{const t={packId:r,userId:e||"anonymous",timestamp:new Date,type:"demo_play"};await Hc(nt(De,"demoLogs"),t);const i=nt(De,"packs"),o=Wt(i,r),c=await Wr(o);if(c.exists()){const d=c.data().demoPlaysCount||0;await lp(o,{demoPlaysCount:d+1})}console.log("Demo play logged successfully")}catch(t){console.error("Error logging demo play:",t)}},zb=async(r,e)=>{try{if(!r||r.trim().length===0)return{isValid:!1,error:"El código de referido no puede estar vacío"};const t=Tb(r);if(!t.isValid)return{isValid:!1,error:t.error||"El código de referido no es válido"};const i=t.sanitizedCode,o=nt(De,"userReferralCodes"),c=St(o,We("referralCode","==",i)),d=await pt(c);if(d.empty)return{isValid:!1,error:"Código de referido no válido"};const m=d.docs[0],g=m.data(),_=m.id;if(_===e)return{isValid:!1,error:"No puedes usar tu propio código de referido"};const w=await Wr(Wt(De,"users",e));if(w.exists()&&w.data().usedReferralCode)return{isValid:!1,error:"Ya has usado un código de referido anteriormente"};const b=new Date,A=new Date(b.getTime()-3600*1e3),R=nt(De,"referrals"),j=St(R,We("referrerUid","==",_),We("createdAt",">=",A));if((await pt(j)).size>=5)return{isValid:!1,message:"Límite de referidos por hora excedido. Intenta más tarde."};const B=new Date(b.getTime()-1440*60*1e3),ie=St(R,We("referrerUid","==",_),We("createdAt",">=",B));return(await pt(ie)).size>=20?{isValid:!1,message:"Límite diario de referidos excedido. Intenta mañana."}:{isValid:!0,referrerName:g.displayName||g.email||"Usuario"}}catch(t){return console.error("Error validating referral code:",t),{isValid:!1,error:"Error al validar el código de referido"}}},d4=async(r,e)=>{try{return await MC(De,async t=>{var ge;const i=nt(De,"userReferralCodes"),o=St(i,We("referralCode","==",r.toUpperCase())),c=await pt(o);if(c.empty)throw new Error("Código de referido no válido");const d=c.docs[0],m=Wt(De,"users",d.id),g=Wt(De,"users",e),_=await t.get(g);if(_.exists()&&_.data().usedReferralCode)throw new Error("Ya has usado un código de referido");if(d.id===e)throw new Error("No puedes usar tu propio código");const w=new Date,b=_.data(),A=((ge=b==null?void 0:b.createdAt)==null?void 0:ge.toDate())||new Date,R=new Date(w.getTime()-300*1e3);if(A>R)throw new Error("Usuario muy reciente, posible abuso");const j=b==null?void 0:b.lastKnownIP,Q=d.data(),B=Q==null?void 0:Q.lastKnownIP;j&&B&&j===B&&console.warn("Posible abuso: misma IP para referrer y referido");const ie=b==null?void 0:b.deviceId,ae=Q==null?void 0:Q.deviceId;if(ie&&ae&&ie===ae)throw new Error("No se puede usar el mismo dispositivo para referir");t.update(m,{referralCount:MT(1)}),t.update(g,{usedReferralCode:r.toUpperCase(),referredBy:d.id,referralProcessedAt:w});const oe=Wt(nt(De,"referrals"));return t.set(oe,{referrerId:d.id,referredUserId:e,referralCode:r.toUpperCase(),createdAt:w,status:"completed",referrerIP:B||null,referredUserIP:j||null,sameIP:j&&B?j===B:!1,userAccountAge:w.getTime()-A.getTime()}),!0})}catch(t){return console.error("Error processing referral:",t),!1}},h4=async r=>{try{const e=await Wr(Wt(De,"users",r));if(!e.exists())return null;const t=e.data(),i=nt(De,"referrals"),o=St(i,We("referrerId","==",r)),c=await pt(o),d=[];return c.forEach(m=>{var _;const g=m.data();d.push({id:g.referredUserId,name:`Usuario ${g.referredUserId.substring(0,8)}...`,joinedAt:((_=g.createdAt)==null?void 0:_.toDate())||new Date})}),{referralCode:t.referralCode||"",referralCount:t.referralCount||0,usedReferralCode:t.usedReferralCode||null,referredBy:t.referredBy||null,referredUsers:d}}catch(e){return console.error("Error getting user referral data:",e),null}},f4=async r=>{try{const e=await Wr(Wt(De,"users",r));if(!e.exists())return[];const i=e.data().referralCount||0,o=nt(De,"packs"),c=St(o,We("isReferralUnlockable","==",!0)),d=await pt(c),m=[];return d.forEach(g=>{const w=g.data().requiredReferrals||0;i>=w&&m.push(g.id)}),m}catch(e){return console.error("Error checking referral pack unlocks:",e),[]}},m4=async r=>{try{const e=nt(De,"suggestions"),t=St(e,We("authorId","==",r),We("status","==","accepted")),o=(await pt(t)).size,c=nt(De,"packs"),d=St(c,We("isSuggestionUnlockable","==",!0)),m=await pt(d),g=[];return m.forEach(_=>{const b=_.data().requiredApprovedSuggestions||0;o>=b&&g.push(_.id)}),g}catch(e){return console.error("Error checking suggestion pack unlocks:",e),[]}},VE=async(r,e)=>{try{const t=Wt(De,"userQuestionChangeStats",r);(await Wr(t)).exists()?await lp(t,{totalChanges:MT(1),adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,updatedAt:new Date}):await Rc(t,{userId:r,totalChanges:e.totalChanges,adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,createdAt:new Date,updatedAt:new Date}),console.log("Question change stats saved successfully")}catch(t){console.error("Error saving question change stats:",t)}},qb=async r=>{try{const e=nt(De,"suggestions"),t=St(e,We("userId","==",r),We("status","==","accepted"));return(await pt(t)).size}catch(e){return console.error("Error getting user accepted suggestions count:",e),0}},g4=({onBack:r,onSuccess:e})=>{const[t,i]=$.useState("login"),[o,c]=$.useState(""),[d,m]=$.useState(""),[g,_]=$.useState(""),[w,b]=$.useState(""),[A,R]=$.useState(""),[j,Q]=$.useState(null),[B,ie]=$.useState(!1),[ae,oe]=$.useState(!1),[ge,ce]=$.useState(""),[G,N]=$.useState(""),{refreshUser:x,user:I}=ji(),k=async()=>{oe(!0),ce("");try{const X=t==="register"&&A&&(j!=null&&j.isValid)?A:void 0;await bb(X),x(),e()}catch(X){ce(X.message)}finally{oe(!1)}},O=async()=>{oe(!0),ce("");try{await xb(),x(),e()}catch(X){ce(X.message)}finally{oe(!1)}},V=async X=>{X.preventDefault(),oe(!0),ce(""),N("");try{if(t==="login"){const ye=await Sb(o,d);if(x(),!ye.emailVerified){N("Tu email no está verificado. Revisa tu bandeja de entrada o reenvía la verificación.");return}e()}else if(t==="register"){if(d!==g)throw new Error("Las contraseñas no coinciden");const ye=A&&(j!=null&&j.isValid)?A:void 0;await Ab(o,d,w,ye),N("Cuenta creada exitosamente. Revisa tu email para verificar tu cuenta antes de poder comprar packs premium."),i("login")}else t==="forgot-password"&&(await Ib(o),N("Email de restablecimiento enviado. Revisa tu bandeja de entrada."),i("login"))}catch(ye){ce(ye.message)}finally{oe(!1)}},C=async()=>{oe(!0),ce("");try{await Cb(),N("Email de verificación reenviado.")}catch(X){ce(X.message)}finally{oe(!1)}},xe=()=>{c(""),m(""),_(""),b(""),R(""),Q(null),ce(""),N("")},Se=async X=>{if(!X.trim()){Q(null);return}ie(!0);try{const ye="temp-"+Date.now(),P=await zb(X,ye);Q({isValid:P.isValid,message:P.isValid?`Código válido de ${P.referrerName}`:P.error||"Código no válido"})}catch{Q({isValid:!1,message:"Error al validar código"})}finally{ie(!1)}},K=X=>{R(X.toUpperCase()),X.trim().length>=6?Se(X):Q(null)},re=X=>{i(X),xe()};return p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:p.jsxs(On,{className:"w-full max-w-md p-8 space-y-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:t==="login"?"Iniciar Sesión":t==="register"?"Crear Cuenta":"Recuperar Contraseña"}),p.jsx("p",{className:"text-white/80",children:t==="login"?"Accede a tu cuenta para comprar packs premium":t==="register"?"Crea una cuenta para acceder a contenido premium":"Ingresa tu email para recuperar tu contraseña"})]}),ge&&p.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:ge}),G&&p.jsxs("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:[p.jsx("p",{children:G}),G.includes("no está verificado")&&p.jsx(be,{onClick:C,disabled:ae,className:"mt-2 bg-green-600 hover:bg-green-700 text-sm",children:"Reenviar verificación"})]}),p.jsxs("form",{onSubmit:V,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Email"}),p.jsx("input",{type:"email",value:o,onChange:X=>c(X.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"tu@email.com",required:!0})]}),t!=="forgot-password"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Contraseña"}),p.jsx("input",{type:"password",value:d,onChange:X=>m(X.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"••••••••",required:!0,minLength:6})]}),t==="register"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Confirmar Contraseña"}),p.jsx("input",{type:"password",value:g,onChange:X=>_(X.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"••••••••",required:!0,minLength:6})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Nombre (opcional)"}),p.jsx("input",{type:"text",value:w,onChange:X=>b(X.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"Tu nombre"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Código de Referido (opcional)"}),p.jsx("input",{type:"text",value:A,onChange:X=>K(X.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${j===null?"border-white/20 focus:ring-white/50":j.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ej: ABC123",maxLength:8}),B&&p.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando código..."}),j&&p.jsx("p",{className:`text-sm mt-1 ${j.isValid?"text-green-400":"text-red-400"}`,children:j.message})]})]}),p.jsx(be,{type:"submit",disabled:ae,className:"w-full",children:ae?"Cargando...":t==="login"?"Iniciar Sesión":t==="register"?"Crear Cuenta":"Enviar Email"})]}),t!=="forgot-password"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-white/20"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-2 bg-transparent text-white/60",children:"o"})})]}),p.jsxs(be,{onClick:k,disabled:ae,className:"w-full bg-white text-gray-900 hover:bg-gray-100 flex items-center justify-center",children:[p.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar con Google"]})]}),p.jsxs("div",{className:"text-center space-y-2",children:[t==="login"&&p.jsxs(p.Fragment,{children:[p.jsx("button",{type:"button",onClick:()=>re("forgot-password"),className:"text-white/80 hover:text-white text-sm underline",children:"¿Olvidaste tu contraseña?"}),p.jsxs("div",{children:[p.jsx("span",{className:"text-white/60 text-sm",children:"¿No tienes cuenta? "}),p.jsx("button",{type:"button",onClick:()=>re("register"),className:"text-white hover:text-white/80 text-sm underline",children:"Regístrate"})]})]}),t==="register"&&p.jsxs("div",{children:[p.jsx("span",{className:"text-white/60 text-sm",children:"¿Ya tienes cuenta? "}),p.jsx("button",{type:"button",onClick:()=>re("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Inicia sesión"})]}),t==="forgot-password"&&p.jsx("button",{type:"button",onClick:()=>re("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Volver al inicio de sesión"})]}),p.jsxs("div",{className:"border-t border-white/20 pt-4",children:[p.jsx(be,{onClick:O,disabled:ae,className:"w-full bg-white/10 hover:bg-white/20 text-white border border-white/20",children:"Continuar sin cuenta"}),p.jsx("p",{className:"text-white/60 text-xs text-center mt-2",children:"Podrás jugar pero no comprar packs premium"})]}),p.jsx("div",{className:"text-center",children:p.jsx(be,{onClick:r,className:"text-white/80 hover:text-white bg-transparent",children:"← Volver"})})]})})},Nc="suggestions",p4=async(r,e,t)=>{try{const i=new Date;if(!await Hb(e))throw new Error("Has alcanzado el límite de sugerencias permitidas");const c=await Bb(e,r.title,r.content);if(!c.isValid)throw new Error(c.error||"Contenido no válido");const d={type:r.type,authorUid:e,authorName:t,title:r.title,content:r.content,targetPackId:r.targetPackId,status:cc.Pending,createdAt:i,updatedAt:i};if(r.targetPackId){const _=await Wr(Wt(De,"packs",r.targetPackId));_.exists()&&(d.targetPackName=_.data().name)}const m={type:d.type,authorUid:d.authorUid,authorName:d.authorName,title:d.title,content:d.content,status:d.status,createdAt:Xe.fromDate(d.createdAt),updatedAt:Xe.fromDate(d.updatedAt)};return d.targetPackId!==void 0&&(m.targetPackId=d.targetPackId),d.targetPackName!==void 0&&(m.targetPackName=d.targetPackName),(await Hc(nt(De,Nc),m)).id}catch(i){throw console.error("Error creating suggestion:",i),i}},y4=["spam","test","prueba","asdf","qwerty","123","abc"],jE=r=>{const e=r.toLowerCase();return y4.some(t=>e.includes(t.toLowerCase()))},_4=async(r,e,t)=>{try{const i=St(nt(De,Nc),We("authorUid","==",r),Yd("createdAt","desc"),DT(10)),o=await pt(i);for(const c of o.docs){const d=c.data();if(d.title===e||d.content===t)return!0;const m=LE(e,d.title),g=LE(t,d.content);if(m>.8||g>.8)return!0}return!1}catch(i){return console.error("Error checking duplicate content:",i),!1}},LE=(r,e)=>{const t=r.toLowerCase().split(/\s+/),i=e.toLowerCase().split(/\s+/),o=new Set(t),c=new Set(i),d=new Set([...o].filter(g=>c.has(g))),m=new Set([...o,...c]);return d.size/m.size},Bb=async(r,e,t)=>e.length<gt.MIN_TITLE_LENGTH?{isValid:!1,error:`El título debe tener al menos ${gt.MIN_TITLE_LENGTH} caracteres`}:e.length>gt.MAX_TITLE_LENGTH?{isValid:!1,error:`El título no puede exceder ${gt.MAX_TITLE_LENGTH} caracteres`}:t.length<gt.MIN_CONTENT_LENGTH?{isValid:!1,error:`El contenido debe tener al menos ${gt.MIN_CONTENT_LENGTH} caracteres`}:t.length>gt.MAX_CONTENT_LENGTH?{isValid:!1,error:`El contenido no puede exceder ${gt.MAX_CONTENT_LENGTH} caracteres`}:jE(e)||jE(t)?{isValid:!1,error:"El contenido contiene palabras no permitidas"}:await _4(r,e,t)?{isValid:!1,error:"Ya has enviado una sugerencia similar recientemente"}:{isValid:!0},Hb=async r=>{try{if(!r)return!0;const e=new Date,t=new Date(e.getTime()-1440*60*1e3),i=new Date(e.getTime()-10080*60*1e3),o=St(nt(De,Nc),We("authorUid","==",r),We("createdAt",">=",Xe.fromDate(t)));if((await pt(o)).size>=gt.MAX_SUGGESTIONS_PER_DAY)return!1;const d=St(nt(De,Nc),We("authorUid","==",r),We("createdAt",">=",Xe.fromDate(i)));return!((await pt(d)).size>=gt.MAX_SUGGESTIONS_PER_WEEK)}catch(e){return console.error("Error checking suggestion limits:",e),!0}},v4=async r=>{try{const e=await Fb(r),t={total:e.length,pending:0,approved:0,rejected:0};return e.forEach(i=>{switch(i.status){case cc.Pending:t.pending++;break;case cc.Accepted:t.approved++;break;case cc.Rejected:t.rejected++;break}}),t}catch(e){throw console.error("Error getting user suggestion stats:",e),e}},Fb=async r=>{try{const e=St(nt(De,Nc),We("authorUid","==",r),Yd("createdAt","desc"));return(await pt(e)).docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt.toDate(),updatedAt:i.data().updatedAt.toDate()}))}catch(e){throw console.error("Error getting user suggestions:",e),e}},Gb=({onClose:r,onSuccess:e})=>{const{user:t}=ji(),[i,o]=$.useState({type:ar.Pack,title:"",content:"",targetPackId:void 0}),[c,d]=$.useState([]),[m,g]=$.useState(!1),[_,w]=$.useState(null),[b,A]=$.useState(!0),[R,j]=$.useState(0);$.useEffect(()=>{Q(),B(),ie()},[t]);const Q=async()=>{try{const G=await Sh();d(G)}catch(G){console.error("Error loading packs:",G)}},B=async()=>{if(!t){A(!0),w(null);return}try{const G=await Hb(t.uid);A(G),w(G?null:"Has alcanzado el límite de sugerencias permitidas. Intenta más tarde.")}catch(G){console.error("Error checking user limits:",G),A(!0),w(null)}},ie=async()=>{if(t)try{const G=await qb(t.uid);j(G)}catch(G){console.error("Error loading accepted suggestions count:",G)}},ae=G=>{o(N=>({...N,type:G,targetPackId:G===ar.Pack?void 0:N.targetPackId}))},oe=async G=>{if(G.preventDefault(),!(!t||!b)){if(i.title.length<gt.MIN_TITLE_LENGTH){w(`El título debe tener al menos ${gt.MIN_TITLE_LENGTH} caracteres`);return}if(i.title.length>gt.MAX_TITLE_LENGTH){w(`El título no puede exceder ${gt.MAX_TITLE_LENGTH} caracteres`);return}if(i.content.length<gt.MIN_CONTENT_LENGTH){w(`El contenido debe tener al menos ${gt.MIN_CONTENT_LENGTH} caracteres`);return}if(i.content.length>gt.MAX_CONTENT_LENGTH){w(`El contenido no puede exceder ${gt.MAX_CONTENT_LENGTH} caracteres`);return}if(i.type!==ar.Pack&&!i.targetPackId){w("Debes seleccionar un pack para preguntas y retos");return}g(!0),w(null);try{const N=await Bb(t.uid,i.title,i.content);if(!N.isValid){w(N.error||"Contenido no válido"),g(!1);return}await p4(i,t.uid,t.displayName||"Usuario anónimo"),typeof e=="function"?e():r()}catch(N){w(N.message||"Error al enviar la sugerencia")}finally{g(!1)}}},ge=G=>{switch(G){case ar.Pack:return"Pack nuevo";case ar.Question:return"Pregunta";case ar.Dare:return"Reto";default:return G}},ce=()=>{switch(i.type){case ar.Pack:return"Describe tu idea para un nuevo pack: temática, tipo de preguntas/retos, etc.";case ar.Question:return"Escribe tu pregunta aquí...";case ar.Dare:return"Describe el reto que propones...";default:return"Describe tu sugerencia..."}};return t?p.jsx("div",{className:"suggestion-form-overlay",children:p.jsxs("div",{className:"suggestion-form",children:[p.jsxs("div",{className:"suggestion-form-header",children:[p.jsxs("div",{children:[p.jsx("h2",{children:"Enviar Sugerencia"}),p.jsxs("p",{className:"accepted-count",children:["Sugerencias aprobadas: ",p.jsx("strong",{children:R})]})]}),p.jsx("button",{className:"close-button",onClick:r,children:"×"})]}),p.jsxs("form",{onSubmit:oe,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Tipo de sugerencia:"}),p.jsx("div",{className:"type-selector",children:Object.values(ar).map(G=>p.jsx("button",{type:"button",className:`type-button ${i.type===G?"active":""}`,onClick:()=>ae(G),children:ge(G)},G))})]}),i.type!==ar.Pack&&p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"targetPack",children:"Pack de destino:"}),p.jsxs("select",{id:"targetPack",value:i.targetPackId||"",onChange:G=>o(N=>({...N,targetPackId:G.target.value||void 0})),required:!0,children:[p.jsx("option",{value:"",children:"Selecciona un pack"}),c.map(G=>p.jsx("option",{value:G.id,children:G.name},G.id))]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"title",children:"Título:"}),p.jsx("input",{type:"text",id:"title",value:i.title,onChange:G=>o(N=>({...N,title:G.target.value})),placeholder:`Título de tu ${ge(i.type).toLowerCase()}`,maxLength:gt.MAX_TITLE_LENGTH,required:!0}),p.jsxs("small",{children:[i.title.length,"/",gt.MAX_TITLE_LENGTH," caracteres"]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"content",children:"Descripción:"}),p.jsx("textarea",{id:"content",value:i.content,onChange:G=>o(N=>({...N,content:G.target.value})),placeholder:ce(),maxLength:gt.MAX_CONTENT_LENGTH,rows:6,required:!0}),p.jsxs("small",{children:[i.content.length,"/",gt.MAX_CONTENT_LENGTH," caracteres"]})]}),_&&p.jsx("div",{className:"error-message",children:_}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",className:"cancel-button",onClick:r,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"submit-button",disabled:m||!b,children:m?"Enviando...":"Enviar Sugerencia"})]})]}),p.jsxs("div",{className:"suggestion-info",children:[p.jsx("h4",{children:"Información importante:"}),p.jsxs("ul",{children:[p.jsxs("li",{children:["Máximo ",gt.MAX_SUGGESTIONS_PER_DAY," sugerencias por día"]}),p.jsxs("li",{children:["Máximo ",gt.MAX_SUGGESTIONS_PER_WEEK," sugerencias por semana"]}),p.jsx("li",{children:"No podrás editar ni eliminar tu sugerencia una vez enviada"}),p.jsx("li",{children:"Recibirás notificaciones sobre el estado de tu sugerencia"})]})]})]})}):p.jsx("div",{className:"suggestion-form-overlay",children:p.jsxs("div",{className:"suggestion-form",children:[p.jsxs("div",{className:"suggestion-form-header",children:[p.jsx("h2",{children:"Iniciar sesión requerido"}),p.jsx("button",{className:"close-button",onClick:r,children:"×"})]}),p.jsx("p",{children:"Debes iniciar sesión para enviar sugerencias."}),p.jsx("button",{className:"cancel-button",onClick:r,children:"Cerrar"})]})})},E4="incidents",w4=async r=>{try{return(await Hc(nt(De,E4),{...r,timestamp:Xe.fromDate(r.timestamp)})).id}catch(e){throw console.error("Error al reportar incidencia:",e),new Error("No se pudo reportar la incidencia")}},Qb=({onClose:r})=>{const[e,t]=$.useState(""),[i,o]=$.useState(!1),[c,d]=$.useState(!1),{user:m}=ji(),g=async _=>{if(_.preventDefault(),!!e.trim()){o(!0);try{await w4({userId:(m==null?void 0:m.uid)||"anonymous",userEmail:(m==null?void 0:m.email)||"Usuario anónimo",description:e.trim(),timestamp:new Date,status:"pending"}),d(!0)}catch(w){console.error("Error al reportar incidencia:",w),alert("Error al enviar el reporte. Por favor, inténtalo de nuevo.")}finally{o(!1)}}};return c?p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-green-600",children:"¡Gracias!"}),p.jsx("p",{className:"text-gray-700 mb-6",children:"Muchas gracias por reportar la incidencia. El equipo de desarrollo la revisará y se pondrá con ello."}),p.jsx(be,{onClick:r,className:"w-full bg-blue-500 hover:bg-blue-600 text-white",children:"Cerrar"})]})}):p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900",children:"Reportar Incidencia"}),p.jsxs("form",{onSubmit:g,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-black mb-2",children:"Describe la incidencia:"}),p.jsx("textarea",{id:"description",value:e,onChange:_=>t(_.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 placeholder-gray-500",rows:4,placeholder:"Describe el problema que has encontrado...",required:!0,disabled:i})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx(be,{type:"button",onClick:r,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white",disabled:i,children:"Cancelar"}),p.jsx(be,{type:"submit",className:"flex-1 bg-red-500 hover:bg-red-600 text-white",disabled:i||!e.trim(),children:i?"Enviando...":"Reportar"})]})]})]})})},T4=({onBack:r})=>{const{user:e}=ji(),[t,i]=$.useState(null),[o,c]=$.useState(""),[d,m]=$.useState(null),[g,_]=$.useState(!1),[w,b]=$.useState(!1),[A,R]=$.useState(!0),[j,Q]=$.useState(""),[B,ie]=$.useState(""),[ae,oe]=$.useState(0),[ge,ce]=$.useState(!1),[G,N]=$.useState(!1),[x,I]=$.useState(null),[k,O]=$.useState([]);$.useEffect(()=>{V()},[e]);const V=async()=>{if(e!=null&&e.uid){R(!0);try{const[X,ye,P,ne]=await Promise.all([h4(e.uid),qb(e.uid),v4(e.uid),Fb(e.uid)]);i(X),oe(ye),I(P),O(ne)}catch(X){console.error("Error loading user data:",X),Q("Error al cargar datos del usuario")}finally{R(!1)}}},C=async X=>{if(!X.trim()){m(null);return}if(!(e!=null&&e.uid)){m({isValid:!1,message:"Error de autenticación"});return}_(!0);try{const ye=await zb(X,e.uid);m({isValid:ye.isValid,message:ye.isValid?`Código válido de ${ye.referrerName}`:ye.error||"Código no válido"})}catch{m({isValid:!1,message:"Error al validar código"})}finally{_(!1)}},xe=X=>{c(X.toUpperCase()),X.trim().length>=6?C(X):m(null)},Se=async()=>{if(!(!(e!=null&&e.uid)||!o||!(d!=null&&d.isValid))){b(!0),Q(""),ie("");try{await d4(o,e.uid)?(ie("¡Código de referido aplicado exitosamente!"),c(""),m(null),await V()):Q("Error al procesar el código de referido")}catch{Q("Error al procesar el código de referido")}finally{b(!1)}}},K=async()=>{if(t!=null&&t.referralCode)try{await navigator.clipboard.writeText(t.referralCode),ie("¡Código copiado al portapapeles!"),setTimeout(()=>ie(""),3e3)}catch{Q("Error al copiar el código")}},re=async()=>{try{await Rb()}catch{Q("Error al cerrar sesión")}};return A?p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:p.jsx(On,{className:"w-full max-w-2xl p-8",children:p.jsxs("div",{className:"text-center text-white",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),p.jsx("p",{children:"Cargando perfil..."})]})})}):p.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:[p.jsxs(On,{className:"w-full max-w-2xl p-8 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h1",{className:"text-3xl font-bold text-white",children:"Mi Perfil"}),p.jsx(be,{onClick:r,className:"bg-white/20 hover:bg-white/30 text-white",children:"Volver"})]}),j&&p.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:j}),B&&p.jsx("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:B}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h2",{className:"text-xl font-semibold text-white",children:"Información Personal"}),p.jsx(be,{onClick:re,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2",children:"Cerrar Sesión"})]}),p.jsxs("div",{className:"space-y-2 text-white/80",children:[p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Email:"})," ",e==null?void 0:e.email]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Nombre:"})," ",(e==null?void 0:e.displayName)||"No especificado"]})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mi Código de Referido"}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("div",{className:"flex-1",children:p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Tu código:"}),p.jsx("p",{className:"text-2xl font-bold text-white tracking-wider",children:(t==null?void 0:t.referralCode)||"Cargando..."})]})}),p.jsx(be,{onClick:K,className:"bg-blue-600 hover:bg-blue-700",disabled:!(t!=null&&t.referralCode),children:"Copiar"})]}),p.jsx("p",{className:"text-white/60 text-sm mt-2",children:"Comparte este código con tus amigos para ganar referidos"})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mis Estadísticas"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-3xl font-bold text-white",children:(t==null?void 0:t.referralCount)||0}),p.jsx("p",{className:"text-white/60 text-sm",children:"Total de referidos"})]}),p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-3xl font-bold text-green-400",children:ae}),p.jsx("p",{className:"text-white/60 text-sm",children:"Sugerencias aceptadas"})]})]}),(t==null?void 0:t.referredUsers)&&t.referredUsers.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Usuarios Referidos"}),p.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.referredUsers.map((X,ye)=>p.jsxs("div",{className:"bg-white/10 rounded p-3 flex justify-between items-center",children:[p.jsx("span",{className:"text-white",children:X.name}),p.jsx("span",{className:"text-white/60 text-sm",children:X.joinedAt.toLocaleDateString()})]},X.id))})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Contribuir con Sugerencias"}),p.jsx("p",{className:"text-white/60 text-sm mb-4",children:"¿Tienes ideas para nuevos packs, preguntas o retos? ¡Compártelas con nosotros!"}),p.jsx(be,{onClick:()=>ce(!0),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:"💡 Recomendar Pack/Pregunta/Reto"})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Reportar Problema"}),p.jsx("p",{className:"text-white/60 text-sm mb-4",children:"¿Encontraste un error o problema en la aplicación? Repórtalo para que podamos solucionarlo."}),p.jsx(be,{onClick:()=>N(!0),className:"w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:"🐛 Reportar Incidencia"})]}),!(t!=null&&t.usedReferralCode)&&p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Usar Código de Referido"}),p.jsx("p",{className:"text-white/60 text-sm mb-4",children:"¿Tienes un código de referido? Úsalo aquí para ayudar a un amigo."}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("input",{type:"text",value:o,onChange:X=>xe(X.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${d===null?"border-white/20 focus:ring-white/50":d.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ingresa el código de referido",maxLength:8}),g&&p.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando código..."}),d&&p.jsx("p",{className:`text-sm mt-1 ${d.isValid?"text-green-400":"text-red-400"}`,children:d.message})]}),p.jsx(be,{onClick:Se,disabled:!(d!=null&&d.isValid)||w,className:"w-full bg-green-600 hover:bg-green-700",children:w?"Procesando...":"Usar Código"})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mis Sugerencias"}),x&&p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-white",children:x.total}),p.jsx("p",{className:"text-white/60 text-sm",children:"Total"})]}),p.jsxs("div",{className:"bg-yellow-500/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-yellow-300",children:x.pending}),p.jsx("p",{className:"text-white/60 text-sm",children:"Pendientes"})]}),p.jsxs("div",{className:"bg-green-500/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-green-300",children:x.approved}),p.jsx("p",{className:"text-white/60 text-sm",children:"Aprobadas"})]}),p.jsxs("div",{className:"bg-red-500/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-red-300",children:x.rejected}),p.jsx("p",{className:"text-white/60 text-sm",children:"Rechazadas"})]})]}),k.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Sugerencias Recientes"}),p.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:k.slice(0,5).map(X=>p.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsx("h4",{className:"font-medium text-white truncate flex-1 mr-2",children:X.title}),p.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${X.status==="pending"?"bg-yellow-500/20 text-yellow-300":X.status==="approved"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:X.status==="pending"?"Pendiente":X.status==="approved"?"Aprobada":"Rechazada"})]}),p.jsx("p",{className:"text-white/60 text-sm line-clamp-2",children:X.content}),p.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-white/40",children:[p.jsx("span",{children:X.type==="question"?"Pregunta":"Reto"}),p.jsx("span",{children:X.createdAt.toLocaleDateString()})]})]},X.id))}),k.length>5&&p.jsxs("p",{className:"text-white/60 text-sm mt-3 text-center",children:["Y ",k.length-5," sugerencias más..."]})]}),k.length===0&&x&&p.jsxs("div",{className:"text-center py-8",children:[p.jsx("p",{className:"text-white/60",children:"Aún no has realizado ninguna sugerencia"}),p.jsx("p",{className:"text-white/40 text-sm mt-1",children:"¡Comparte tus ideas para mejorar el juego!"})]})]}),(t==null?void 0:t.usedReferralCode)&&p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Código de Referido Usado"}),p.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[p.jsx("p",{className:"text-white/60 text-sm",children:"Ya has usado el código:"}),p.jsx("p",{className:"text-xl font-bold text-white tracking-wider",children:t.usedReferralCode})]})]})]}),ge&&p.jsx(Gb,{isOpen:ge,onClose:()=>ce(!1)}),G&&p.jsx(Qb,{onClose:()=>N(!1)})]})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),S4=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),UE=r=>{const e=S4(r);return e.charAt(0).toUpperCase()+e.slice(1)},Kb=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),A4=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var x4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=$.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:d,...m},g)=>$.createElement("svg",{ref:g,...x4,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:Kb("lucide",o),...!c&&!A4(m)&&{"aria-hidden":"true"},...m},[...d.map(([_,w])=>$.createElement(_,w)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=(r,e)=>{const t=$.forwardRef(({className:i,...o},c)=>$.createElement(R4,{ref:c,iconNode:e,className:Kb(`lucide-${b4(UE(r))}`,`lucide-${r}`,i),...o}));return t.displayName=UE(r),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],C4=Ra("circle-check-big",I4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],D4=Ra("circle-x",N4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],O4=Ra("info",P4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],M4=Ra("share-2",k4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],j4=Ra("shopping-bag",V4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],U4=Ra("triangle-alert",L4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],q4=Ra("x",z4);class B4{constructor(){this.config=null,this.listeners=[],this.hasShownThisSession=!1,this.defaultConfig={enabled:!1,title:"¡Bienvenido a Verdad o Reto!",subtitle:"Disfruta de los mejores desafíos",modules:[],showOnce:!1,showOnAppStart:!0,backgroundColor:"#1F2937",textColor:"#FFFFFF",version:"1.0.0",lastModified:Date.now()},this.loadConfig()}async loadConfig(){try{const e=Wt(De,"config","welcomeScreen");DC(e,t=>{t.exists()?this.config={...this.defaultConfig,...t.data()}:this.config=this.defaultConfig,this.notifyListeners()})}catch(e){console.error("Error loading welcome screen config:",e),this.config=this.defaultConfig,this.notifyListeners()}}getConfig(){return this.config}async saveConfig(e){try{const t={...e,version:this.generateNewVersion(),lastModified:Date.now()},i=Wt(De,"config","welcomeScreen");await Rc(i,t)}catch(t){throw console.error("Error saving welcome screen config:",t),t}}generateNewVersion(){return`v${Date.now()}`}shouldShowWelcomeScreen(){return!this.config||!this.config.enabled||this.config.showOnce&&this.hasShownThisSession||this.hasUserDisabledForCurrentVersion()?!1:this.config.showOnAppStart}markAsShown(){this.hasShownThisSession=!0}markAsSeen(){this.markAsShown()}markAsDisabled(){this.markAsDontShowAgain()}resetSessionFlag(){this.hasShownThisSession=!1}getStorageKey(){return"welcomeScreen_dontShowAgain"}hasUserDisabledForCurrentVersion(){var i;if(!((i=this.config)!=null&&i.version))return!1;const e=this.getStorageKey();return localStorage.getItem(e)===this.config.version}markAsDontShowAgain(){var t;if(!((t=this.config)!=null&&t.version))return;const e=this.getStorageKey();localStorage.setItem(e,this.config.version)}clearDontShowAgainPreference(){const e=this.getStorageKey();localStorage.removeItem(e)}canShowAgain(){return!this.hasUserDisabledForCurrentVersion()}addListener(e){this.listeners.push(e)}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}notifyListeners(){this.listeners.forEach(e=>e(this.config))}addModule(e){if(!this.config)return;const t=this.config.modules.findIndex(i=>i.id===e.id);t>=0?this.config.modules[t]=e:this.config.modules.push(e),this.config.modules.sort((i,o)=>i.order-o.order)}removeModule(e){this.config&&(this.config.modules=this.config.modules.filter(t=>t.id!==e))}getEnabledModules(){return this.config?this.config.modules.filter(e=>e.enabled).sort((e,t)=>e.order-t.order):[]}createReferralProgressModule(e,t=1){return{id:"referral_progress",type:"referral_progress",enabled:!0,order:t,config:e}}createCustomMessageModule(e,t=2){return{id:`custom_message_${Date.now()}`,type:"custom_message",enabled:!0,order:t,config:e}}createShopButtonModule(e,t=3){return{id:"shop_button",type:"shop_button",enabled:!0,order:t,config:e}}async getUserReferralInfo(e){try{const t=Wt(De,"users",e),i=await Wr(t);if(i.exists()){const o=i.data();return{current:o.referralCount||0,target:o.referralTarget||5}}}catch(t){console.error("Error getting user referral info:",t)}return{current:0,target:5}}generateReferralLink(e,t){const i=/Android/i.test(navigator.userAgent),o=/iPhone|iPad|iPod/i.test(navigator.userAgent);return i?`https://play.google.com/store/apps/details?id=com.verdadreto.app&referrer=ref%3D${t}%26user%3D${e}`:o?`https://apps.apple.com/app/verdad-o-reto/id123456789?ref=${t}&user=${e}`:`${window.location.origin}?ref=${t}&user=${e}`}async shareApp(e,t,i){const o=this.generateReferralLink(e,t),c=`¡Únete a Verdad o Reto! Usa mi código de referido: ${t}`,d=i||c;if(navigator.share)try{await navigator.share({title:"Verdad o Reto",text:d,url:o})}catch(m){console.log("Error sharing:",m),this.fallbackShare(d,o)}else this.fallbackShare(d,o)}fallbackShare(e,t){const i=`${e}

${t}`;if(navigator.clipboard)navigator.clipboard.writeText(i).then(()=>{alert("¡Enlace copiado al portapapeles!")});else{const o=document.createElement("textarea");o.value=i,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),alert("¡Enlace copiado al portapapeles!")}}}const or=new B4,H4=(r,e,t)=>{let i="",o="info";switch(r.messageType){case"plain":i=r.plainMessage||"",o="info";break;case"referral":const d=t.filter(m=>m.isReferralUnlockable&&m.requiredReferrals>e.current).sort((m,g)=>m.requiredReferrals-g.requiredReferrals)[0];if(d){const m=d.requiredReferrals-e.current;i=(r.referralMessage||"").replace(/\{remaining\}/g,m.toString()).replace(/\{pack\}/g,d.name)}else i=(r.referralMessage||"").replace(/\{remaining\}/g,"0").replace(/\{pack\}/g,"todos los packs");o="warning";break;case"shop":i=r.shopMessage||"",o="success";break;default:i=r.plainMessage||"",o="info"}return{message:i,type:o}},F4=({config:r,onContinue:e,onSkip:t,onShare:i,onGoToShop:o,onDontShowAgain:c})=>{const{user:d}=ji(),[m,g]=$.useState(r||null),[_,w]=$.useState({current:0,target:5}),[b,A]=$.useState(!1),[R,j]=$.useState(!1),[Q,B]=$.useState([]);$.useEffect(()=>{if(r)g(r);else{const ce=G=>{g(G)};return or.addListener(ce),g(or.getConfig()),()=>{or.removeListener(ce)}}},[r]),$.useEffect(()=>{d!=null&&d.uid&&or.getUserReferralInfo(d.uid).then(w)},[d]),$.useEffect(()=>{(async()=>{try{const G=await Sh();B(G)}catch(G){console.error("Error loading available packs:",G)}})()},[]);const ie=async()=>{var ce,G;if(!(!(d!=null&&d.uid)||!(d!=null&&d.referralCode))){A(!0);try{const N=((G=(ce=m==null?void 0:m.modules.find(x=>x.type==="referral_progress"))==null?void 0:ce.config)==null?void 0:G.shareMessage)||"¡Únete a Verdad o Reto!";await or.shareApp(d.uid,d.referralCode,N),i()}catch(N){console.error("Error sharing:",N)}finally{A(!1)}}},ae=()=>{R&&c&&c(),e()},oe=()=>{R&&c&&c(),t()};if(!m||!m.enabled)return null;const ge=or.getEnabledModules();return p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[p.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:t}),p.jsxs("div",{className:"relative w-full max-w-md mx-auto rounded-2xl shadow-2xl overflow-hidden",style:{backgroundColor:m.backgroundColor,color:m.textColor},children:[p.jsxs("div",{className:"relative p-6 text-center",children:[p.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-white hover:bg-opacity-10 transition-colors",children:p.jsx(q4,{size:20})}),p.jsx("h1",{className:"text-2xl font-bold mb-2",children:m.title}),m.subtitle&&p.jsx("p",{className:"text-opacity-80",style:{color:m.textColor},children:m.subtitle})]}),p.jsxs("div",{className:"px-6 pb-6 space-y-4",children:[ge.map(ce=>p.jsx(G4,{module:ce,referralInfo:_,onShare:ie,onNavigateToShop:o,isSharing:b,textColor:m.textColor,availablePacks:Q},ce.id)),c&&p.jsxs("div",{className:"flex items-center gap-2 mt-4 mb-2",children:[p.jsx("input",{type:"checkbox",id:"dontShowAgain",checked:R,onChange:ce=>j(ce.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),p.jsx("label",{htmlFor:"dontShowAgain",className:"text-sm cursor-pointer",style:{color:m.textColor},children:"No volver a mostrar"})]}),p.jsxs("div",{className:"flex gap-3 mt-6",children:[p.jsx(be,{onClick:oe,variant:"secondary",className:"flex-1",children:"Omitir"}),p.jsx(be,{onClick:ae,className:"flex-1",children:"Continuar"})]})]})]})]})},G4=({module:r,referralInfo:e,onShare:t,onNavigateToShop:i,isSharing:o,textColor:c,availablePacks:d})=>{switch(r.type){case"referral_progress":return p.jsx(Q4,{config:r.config,referralInfo:e,onShare:t,isSharing:o,textColor:c});case"custom_message":return p.jsx(K4,{config:r.config,textColor:c,referralInfo:e,availablePacks:d,onNavigateToShop:i});case"shop_button":return p.jsx(Y4,{config:r.config,onNavigateToShop:i});default:return null}},Q4=({config:r,referralInfo:e,onShare:t,isSharing:i,textColor:o})=>{const c=Math.min(e.current/e.target*100,100),d=Math.max(e.target-e.current,0);return p.jsxs("div",{className:"bg-white bg-opacity-10 rounded-xl p-4",children:[r.showProgress&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-sm font-medium",children:"Referidos"}),p.jsxs("span",{className:"text-sm",children:[e.current,"/",e.target]})]}),p.jsx("div",{className:"w-full bg-white bg-opacity-20 rounded-full h-3 mb-3",children:p.jsx("div",{className:"bg-gradient-to-r from-purple-400 to-pink-400 h-3 rounded-full transition-all duration-500",style:{width:`${c}%`}})})]}),r.progressMessage&&p.jsx("p",{className:"text-sm mb-3 text-center",style:{color:o},children:d>0?r.progressMessage.replace("{remaining}",d.toString()):"¡Objetivo completado! 🎉"}),p.jsxs(be,{onClick:t,disabled:i,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:[p.jsx(M4,{size:16}),i?"Compartiendo...":r.shareButtonText]})]})},K4=({config:r,textColor:e,referralInfo:t,availablePacks:i,onNavigateToShop:o})=>{const c=H4(r,t,i),d=()=>{switch(c.type){case"info":return p.jsx(O4,{size:20,className:"text-blue-400"});case"warning":return p.jsx(U4,{size:20,className:"text-yellow-400"});case"success":return p.jsx(C4,{size:20,className:"text-green-400"});case"error":return p.jsx(D4,{size:20,className:"text-red-400"});default:return null}},m=()=>{switch(c.type){case"info":return"border-blue-400";case"warning":return"border-yellow-400";case"success":return"border-green-400";case"error":return"border-red-400";default:return"border-gray-400"}},g=()=>{r.messageType==="shop"&&r.shopMessageRedirect&&o&&o()};return p.jsx("div",{className:`border-l-4 ${m()} bg-white bg-opacity-10 rounded-r-xl p-4 ${r.messageType==="shop"&&r.shopMessageRedirect?"cursor-pointer hover:bg-opacity-20 transition-colors":""}`,onClick:g,children:p.jsxs("div",{className:"flex items-start gap-3",children:[d(),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm",style:{color:e},children:c.message}),r.messageType==="shop"&&r.shopMessageRedirect&&p.jsx("p",{className:"text-xs mt-1 opacity-75",style:{color:e},children:"Toca para ir a la tienda"})]})]})})},Y4=({config:r,onNavigateToShop:e})=>{const t=()=>{switch(r.style){case"primary":return"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white";case"secondary":return"bg-white bg-opacity-20 hover:bg-opacity-30 text-white border border-white border-opacity-30";case"accent":return"bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-white";default:return"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white"}};return p.jsxs(be,{onClick:e,className:`w-full ${t()} font-medium py-3 px-4 rounded-lg transition-all duration-200 flex items-center justify-center gap-2`,children:[p.jsx(j4,{size:16}),r.text]})},X4=()=>{const{user:r}=ji(),[e,t]=$.useState(Ve.Welcome),[i,o]=$.useState(!0),[c,d]=$.useState(null);$.useEffect(()=>{r||t(Ve.Setup),wi.setCurrentUser(r),r&&(wi.trackSessionStart(),r.isAnonymous||wi.trackUserLogin())},[r]),$.useEffect(()=>{const ue=async()=>{try{const He=or.getConfig();d(He);const xn=or.shouldShowWelcomeScreen();o(xn),xn||t(Ve.Setup)}catch(He){console.error("Error loading welcome screen config:",He),o(!1),t(Ve.Setup)}},fe=async()=>{try{await Hr.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),console.log("AdMob inicializado correctamente en App.tsx")}catch(He){console.error("Error inicializando AdMob:",He)}};ue(),fe()},[]);const[m,g]=$.useState([]),[_,w]=$.useState([]),[b,A]=$.useState([]),[R,j]=$.useState(0),[Q,B]=$.useState({totalRounds:5}),[ie,ae]=$.useState({currentRound:1,playersCompletedInRound:0}),[oe,ge]=$.useState({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),[ce,G]=$.useState({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),[N,x]=$.useState({isLoading:!0,error:null}),[I,k]=$.useState([]),[O,V]=$.useState(()=>{try{const ue=window.localStorage.getItem("purchasedPacks");return ue?JSON.parse(ue):[]}catch(ue){return console.error("Error reading from localStorage",ue),[]}}),[C,xe]=$.useState(!1),[Se,K]=$.useState(null),[re,X]=$.useState(!1),[ye,P]=$.useState(null),[ne,de]=$.useState([]),[se,ve]=$.useState([]),[Oe,Re]=$.useState([]),[Dt,Je]=$.useState({changesCount:0,isAdLoading:!1,isAdPlaying:!1,lastChangedItem:void 0}),[Jt,cr]=$.useState({totalChanges:0,adsWatched:0,lastChangeDate:void 0}),[ur,br]=$.useState(!1),[es,Sr]=$.useState(!1),[Ia,Wo]=$.useState(!1),pn=$.useCallback(async ue=>{try{const fe=await f4(ue);ve(fe)}catch(fe){console.error("Error loading referral unlocked packs:",fe),ve([])}},[]),Ca=$.useCallback(async ue=>{try{const fe=await m4(ue);Re(fe)}catch(fe){console.error("Error loading suggestion unlocked packs:",fe),Re([])}},[]);$.useEffect(()=>{(async()=>{try{const fe=await Sh();k(fe)}catch(fe){console.error("Error loading available packs:",fe)}})()},[]),$.useEffect(()=>{try{window.localStorage.setItem("purchasedPacks",JSON.stringify(O))}catch(ue){console.error("Error writing to localStorage",ue)}},[O,se,Oe]);const dr=$.useCallback(async()=>{x({isLoading:!0,error:null});try{const ue=["base",...O.filter(He=>He!=="base"),...se.filter(He=>He!=="base"&&!O.includes(He)),...Oe.filter(He=>He!=="base"&&!O.includes(He)&&!se.includes(He))],fe=await ME(ue);w(fe.questions),A(fe.dares),x({isLoading:!1,error:null})}catch(ue){console.error("Error loading game data:",ue),x({isLoading:!1,error:ue instanceof Error?ue.message:"Error desconocido"})}},[O,Oe]);$.useEffect(()=>{dr()},[dr]);const zs=()=>{if(m.length<2){alert("Se necesitan al menos 2 jugadores para empezar.");return}t(Ve.PackSelection)},ts=()=>{t(Ve.RoundConfiguration)},Jo=()=>{t(Ve.Setup)},qs=()=>{t(Ve.Shop)},Bs=()=>{t(Ve.Login)},Na=async ue=>{var fe,He;if(t(Ve.Setup),((fe=ue==null?void 0:ue.metadata)==null?void 0:fe.creationTime)===((He=ue==null?void 0:ue.metadata)==null?void 0:He.lastSignInTime)&&wi.trackUserRegister(),ue!=null&&ue.uid)try{await Db(ue.uid),pn(ue.uid),Ca(ue.uid)}catch(xn){console.error("Error durante la migración del usuario:",xn),pn(ue.uid),Ca(ue.uid)}},ft=$.useCallback(async()=>{const ue={...Jt,totalChanges:Jt.totalChanges+1,lastChangeDate:new Date};if(Je(fe=>({...fe,changesCount:fe.changesCount+1})),cr(ue),r&&!r.isAnonymous)try{await VE(r.uid,ue)}catch(fe){console.error("Error saving question change stats:",fe)}},[Jt,r]),Ze=$.useCallback(async()=>new Promise((ue,fe)=>{if(!Ct.isEnabled()){ue();return}Je(_n=>({..._n,isAdLoading:!0}));const He=Ct.getAdLoadingTime(),xn=Ct.getAdPlayingTime();setTimeout(()=>{Je(_n=>({..._n,isAdLoading:!1,isAdPlaying:!0})),setTimeout(()=>{Je(vn=>({...vn,isAdPlaying:!1,changesCount:0}));const _n={...Jt,adsWatched:Jt.adsWatched+1};if(cr(_n),r&&!r.isAnonymous)try{VE(r.uid,_n).catch(vn=>{console.error("Error saving ad watched stats:",vn)})}catch(vn){console.error("Error saving ad watched stats:",vn)}ue()},xn)},He)}),[Jt,r]),yn=()=>{t(Ve.Setup)},Ht=ue=>{const fe=I.find(He=>He.id===ue);fe&&(P(fe),X(!0))},Da=()=>{X(!1),P(null)},Zo=ue=>{de(fe=>fe.includes(ue)?fe:[...fe,ue])},ns=async()=>{if(ye)try{const ue=await c4(ye.id);if(ue.questions.length===0&&ue.dares.length===0){alert("Este pack no tiene contenido demo disponible.");return}xe(!0),K(ye.id),w(ue.questions),A(ue.dares),await u4(ye.id),t(Ve.RoundConfiguration)}catch(ue){console.error("Error starting demo:",ue),alert("Error al cargar el demo. Inténtalo de nuevo.")}},rs=async()=>{X(!1),P(null);try{const ue=["base",...O.filter(He=>He!=="base"),...se.filter(He=>He!=="base"&&!O.includes(He)),...Oe.filter(He=>He!=="base"&&!O.includes(He)&&!se.includes(He))],fe=await ME(ue);w(fe.questions),A(fe.dares),xe(!1),K(null),t(Ve.RoundConfiguration)}catch(ue){console.error("Error starting game without demo:",ue),alert("Error al cargar el juego. Inténtalo de nuevo.")}},ss=ue=>{B(ue),ge({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:new Date,gameEndTime:null,roundStats:[]}),G({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),ae({currentRound:1,playersCompletedInRound:0}),t(Ve.Game)},kn=()=>{const ue=(R+1)%m.length;if(j(ue),ue===0){const fe=ie.currentRound+1;fe>Q.totalRounds?Fs():(ae({currentRound:fe,playersCompletedInRound:0}),G({roundNumber:fe,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}))}else ae(fe=>({...fe,playersCompletedInRound:fe.playersCompletedInRound+1}))},Hs=()=>{const ue={...ce,roundEndTime:new Date};ge(fe=>({...fe,totalRounds:fe.totalRounds+1,roundStats:[...fe.roundStats,ue]})),t(Ve.RoundEnd)},is=()=>{const ue=ie.currentRound+1;ae({currentRound:ue,playersCompletedInRound:0}),G({roundNumber:ue,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),j(0),t(Ve.Game)},Fs=()=>{ge(ue=>({...ue,gameEndTime:new Date})),t(Ve.GameEnd)},Li=()=>{const ue=m[R];G(fe=>({...fe,questionsAsked:fe.questionsAsked+1,playersParticipated:fe.playersParticipated.includes(ue)?fe.playersParticipated:[...fe.playersParticipated,ue]})),ge(fe=>({...fe,totalQuestions:fe.totalQuestions+1}))},Ui=()=>{const ue=m[R];G(fe=>({...fe,daresCompleted:fe.daresCompleted+1,playersParticipated:fe.playersParticipated.includes(ue)?fe.playersParticipated:[...fe.playersParticipated,ue]})),ge(fe=>({...fe,totalDares:fe.totalDares+1}))},Kn=$.useCallback(()=>{t(Ve.Setup),j(0),B({totalRounds:5}),ae({currentRound:1,playersCompletedInRound:0}),ge({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),G({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),xe(!1),K(null),X(!1),P(null),de([]),dr()},[dr]),hr=ue=>{O.includes(ue)||V([...O,ue])},fr=()=>O.includes("no-ads"),Yn=()=>{br(!1)},zi=()=>{or.markAsSeen(),o(!1),t(Ve.Setup)},Ar=()=>{or.markAsSeen(),o(!1),t(Ve.Setup)},Gs=()=>{or.markAsDisabled(),o(!1),t(Ve.Setup)},xr=()=>{navigator.share?navigator.share({title:"Verdad o Reto",text:"¡Únete a la diversión con Verdad o Reto!",url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("Enlace copiado al portapapeles"))},Pa=()=>{or.markAsSeen(),o(!1),t(Ve.Shop)},dt=()=>{console.log("Sugerencia enviada exitosamente"),br(!1)},At=()=>{Sr(!0)},wt=()=>{Sr(!1)},An=()=>{t(Ve.Setup)},qi=()=>{switch(e){case Ve.Welcome:return p.jsx(F4,{config:c,onContinue:zi,onSkip:Ar,onDontShowAgain:Gs,onShare:xr,onGoToShop:Pa});case Ve.Setup:return p.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-900 bg-opacity-50 backdrop-blur-sm",children:p.jsxs("div",{className:"w-full max-w-md mx-auto animate-fade-in",children:[p.jsx("h1",{className:"text-5xl font-extrabold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Verdad o Reto"}),p.jsx("p",{className:"text-center text-gray-400 mb-8",children:"El juego para animar la fiesta"}),p.jsxs("div",{className:"space-y-6",children:[p.jsx(jA,{players:m,setPlayers:g}),N.isLoading&&p.jsx(On,{className:"text-center text-gray-400",children:p.jsx("p",{children:"Cargando datos desde Firebase..."})}),N.error&&p.jsxs(On,{className:"text-center text-red-400",children:[p.jsxs("p",{children:["Error de conexión: ",N.error]}),p.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Verifica tu configuración de Firebase"}),p.jsx(be,{onClick:dr,className:"mt-4",variant:"secondary",children:"Reintentar"})]}),!N.isLoading&&!N.error&&p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx(be,{onClick:zs,className:"w-full text-lg",disabled:m.length<2||_.length===0||b.length===0,children:"Empezar a Jugar"}),r&&!r.isAnonymous?p.jsx(be,{onClick:()=>t(Ve.Profile),variant:"secondary",className:"w-full text-lg",children:"Mi Perfil"}):p.jsx(be,{onClick:Bs,variant:"secondary",className:"w-full text-lg",children:"Iniciar Sesión"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(be,{onClick:()=>t(Ve.Shop),variant:"secondary",className:`flex-[2] text-lg bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 
                                      hover:from-yellow-500 hover:via-yellow-600 hover:to-yellow-700 
                                      text-white font-semibold shadow-lg hover:shadow-xl 
                                      transform hover:scale-105 transition-all duration-200 
                                      flex items-center justify-center gap-2 rounded-2xl`,children:[p.jsx(OA,{className:"w-5 h-5"}),"Tienda de Paquetes"]}),p.jsx(be,{onClick:At,variant:"secondary",className:"flex-1 text-sm bg-red-600 hover:bg-red-700 text-white",children:"Reportar"})]})]})]})]})});case Ve.Login:return p.jsx(g4,{onBack:yn,onSuccess:Na});case Ve.Profile:return p.jsx(T4,{onBack:An});case Ve.Shop:return p.jsx(s4,{availablePacks:I,purchasedPacks:O,onPurchase:hr,onBack:()=>t(Ve.Setup),onGoToLogin:Bs});case Ve.PackSelection:return p.jsxs(p.Fragment,{children:[p.jsx(iD,{availablePacks:I,purchasedPacks:O,adWatchedPacks:ne,referralUnlockedPacks:se,suggestionUnlockedPacks:Oe,onContinue:ts,onBack:Jo,onGoToShop:qs,onPlayDemo:Ht}),p.jsx(vD,{pack:ye,isOpen:re,onClose:Da,onStartDemo:ns,onAdWatched:Zo,hasNoAds:fr(),onStartDemoWithoutAd:rs})]});case Ve.RoundConfiguration:return p.jsx(wD,{onSelectRounds:ue=>{ss({totalRounds:ue})},onBack:()=>t(Ve.PackSelection),hasNoAds:fr()});case Ve.Game:return p.jsx(ED,{players:m,currentPlayerIndex:R,onNextPlayer:kn,onNewGame:Kn,questions:_,dares:b,roundConfig:Q,gameProgress:ie,onRoundEnd:Hs,onQuestionAsked:Li,onDareCompleted:Ui,onQuestionChange:ft,onAdRequired:Ze,questionChangeState:Dt,hasNoAds:fr()});case Ve.RoundEnd:return p.jsx(TD,{roundStats:ce,currentRound:ie.currentRound,totalRounds:Q.totalRounds,onContinue:is,onEndGame:Fs,hasNoAds:fr()});case Ve.GameEnd:return p.jsx(bD,{gameStats:oe,players:m,onNewGame:Kn,onBackToMenu:()=>t(Ve.Setup),hasNoAds:fr(),isDemoMode:C,demoPackId:Se});default:return p.jsx("div",{children:"Error: Estado de juego desconocido."})}};return p.jsxs("main",{className:"relative min-h-screen bg-gray-900 overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-purple-900/30 via-transparent to-pink-900/30"}),p.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-96 h-96 bg-purple-600 rounded-full filter blur-3xl opacity-20 animate-blob"}),p.jsx("div",{className:"absolute bottom-[-10%] right-[5%] w-96 h-96 bg-pink-600 rounded-full filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),p.jsx("div",{className:"absolute top-[10%] right-[-15%] w-80 h-80 bg-cyan-600 rounded-full filter blur-3xl opacity-10 animate-blob animation-delay-4000"}),p.jsx("div",{className:"relative z-10",children:qi()}),p.jsx("style",{children:`
          .animate-blob {
            animation: blob 7s infinite;
          }
          .animation-delay-2000 {
            animation-delay: 2s;
          }
          .animation-delay-4000 {
            animation-delay: 4s;
          }
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
          }
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `}),ur&&p.jsx(Gb,{onClose:Yn,onSuccess:dt}),es&&p.jsx(Qb,{onClose:wt})]})},Yb=document.getElementById("root");if(!Yb)throw new Error("Could not find root element to mount to");const $4=NA.createRoot(Yb);$4.render(p.jsx(TA.StrictMode,{children:p.jsx(PD,{children:p.jsx(X4,{})})}));export{RE as A,wb as W};
