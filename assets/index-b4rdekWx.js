(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function IE(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var pm={exports:{}},Xl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function uS(){if(Iv)return Xl;Iv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:s,type:i,key:h,ref:o!==void 0?o:null,props:c}}return Xl.Fragment=e,Xl.jsx=t,Xl.jsxs=t,Xl}var Cv;function dS(){return Cv||(Cv=1,pm.exports=uS()),pm.exports}var p=dS(),ym={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function hS(){if(Nv)return Me;Nv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,F={};function z(O,J,le){this.props=O,this.context=J,this.refs=F,this.updater=le||C}z.prototype.isReactComponent={},z.prototype.setState=function(O,J){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,J,"setState")},z.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ie(){}ie.prototype=z.prototype;function se(O,J,le){this.props=O,this.context=J,this.refs=F,this.updater=le||C}var re=se.prototype=new ie;re.constructor=se,j(re,z.prototype),re.isPureReactComponent=!0;var fe=Array.isArray,ue={H:null,A:null,T:null,S:null,V:null},X=Object.prototype.hasOwnProperty;function N(O,J,le,oe,_e,Ne){return le=Ne.ref,{$$typeof:s,type:O,key:J,ref:le!==void 0?le:null,props:Ne}}function x(O,J){return N(O.type,J,void 0,void 0,void 0,O.props)}function I(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function P(O){var J={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(le){return J[le]})}var M=/\/+/g;function V(O,J){return typeof O=="object"&&O!==null&&O.key!=null?P(""+O.key):J.toString(36)}function R(){}function Ie(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(R,R):(O.status="pending",O.then(function(J){O.status==="pending"&&(O.status="fulfilled",O.value=J)},function(J){O.status==="pending"&&(O.status="rejected",O.reason=J)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Oe(O,J,le,oe,_e){var Ne=typeof O;(Ne==="undefined"||Ne==="boolean")&&(O=null);var Ae=!1;if(O===null)Ae=!0;else switch(Ne){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(O.$$typeof){case s:case e:Ae=!0;break;case w:return Ae=O._init,Oe(Ae(O._payload),J,le,oe,_e)}}if(Ae)return _e=_e(O),Ae=oe===""?"."+V(O,0):oe,fe(_e)?(le="",Ae!=null&&(le=Ae.replace(M,"$&/")+"/"),Oe(_e,J,le,"",function(qn){return qn})):_e!=null&&(I(_e)&&(_e=x(_e,le+(_e.key==null||O&&O.key===_e.key?"":(""+_e.key).replace(M,"$&/")+"/")+Ae)),J.push(_e)),1;Ae=0;var It=oe===""?".":oe+":";if(fe(O))for(var nt=0;nt<O.length;nt++)oe=O[nt],Ne=It+V(oe,nt),Ae+=Oe(oe,J,le,Ne,_e);else if(nt=S(O),typeof nt=="function")for(O=nt.call(O),nt=0;!(oe=O.next()).done;)oe=oe.value,Ne=It+V(oe,nt++),Ae+=Oe(oe,J,le,Ne,_e);else if(Ne==="object"){if(typeof O.then=="function")return Oe(Ie(O),J,le,oe,_e);throw J=String(O),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function Q(O,J,le){if(O==null)return O;var oe=[],_e=0;return Oe(O,oe,"","",function(Ne){return J.call(le,Ne,_e++)}),oe}function ae(O){if(O._status===-1){var J=O._result;J=J(),J.then(function(le){(O._status===0||O._status===-1)&&(O._status=1,O._result=le)},function(le){(O._status===0||O._status===-1)&&(O._status=2,O._result=le)}),O._status===-1&&(O._status=0,O._result=J)}if(O._status===1)return O._result.default;throw O._result}var Y=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function pe(){}return Me.Children={map:Q,forEach:function(O,J,le){Q(O,function(){J.apply(this,arguments)},le)},count:function(O){var J=0;return Q(O,function(){J++}),J},toArray:function(O){return Q(O,function(J){return J})||[]},only:function(O){if(!I(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Me.Component=z,Me.Fragment=t,Me.Profiler=o,Me.PureComponent=se,Me.StrictMode=i,Me.Suspense=g,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,Me.__COMPILER_RUNTIME={__proto__:null,c:function(O){return ue.H.useMemoCache(O)}},Me.cache=function(O){return function(){return O.apply(null,arguments)}},Me.cloneElement=function(O,J,le){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var oe=j({},O.props),_e=O.key,Ne=void 0;if(J!=null)for(Ae in J.ref!==void 0&&(Ne=void 0),J.key!==void 0&&(_e=""+J.key),J)!X.call(J,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&J.ref===void 0||(oe[Ae]=J[Ae]);var Ae=arguments.length-2;if(Ae===1)oe.children=le;else if(1<Ae){for(var It=Array(Ae),nt=0;nt<Ae;nt++)It[nt]=arguments[nt+2];oe.children=It}return N(O.type,_e,void 0,void 0,Ne,oe)},Me.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},Me.createElement=function(O,J,le){var oe,_e={},Ne=null;if(J!=null)for(oe in J.key!==void 0&&(Ne=""+J.key),J)X.call(J,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(_e[oe]=J[oe]);var Ae=arguments.length-2;if(Ae===1)_e.children=le;else if(1<Ae){for(var It=Array(Ae),nt=0;nt<Ae;nt++)It[nt]=arguments[nt+2];_e.children=It}if(O&&O.defaultProps)for(oe in Ae=O.defaultProps,Ae)_e[oe]===void 0&&(_e[oe]=Ae[oe]);return N(O,Ne,void 0,void 0,null,_e)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(O){return{$$typeof:m,render:O}},Me.isValidElement=I,Me.lazy=function(O){return{$$typeof:w,_payload:{_status:-1,_result:O},_init:ae}},Me.memo=function(O,J){return{$$typeof:_,type:O,compare:J===void 0?null:J}},Me.startTransition=function(O){var J=ue.T,le={};ue.T=le;try{var oe=O(),_e=ue.S;_e!==null&&_e(le,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(pe,Y)}catch(Ne){Y(Ne)}finally{ue.T=J}},Me.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},Me.use=function(O){return ue.H.use(O)},Me.useActionState=function(O,J,le){return ue.H.useActionState(O,J,le)},Me.useCallback=function(O,J){return ue.H.useCallback(O,J)},Me.useContext=function(O){return ue.H.useContext(O)},Me.useDebugValue=function(){},Me.useDeferredValue=function(O,J){return ue.H.useDeferredValue(O,J)},Me.useEffect=function(O,J,le){var oe=ue.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(O,J)},Me.useId=function(){return ue.H.useId()},Me.useImperativeHandle=function(O,J,le){return ue.H.useImperativeHandle(O,J,le)},Me.useInsertionEffect=function(O,J){return ue.H.useInsertionEffect(O,J)},Me.useLayoutEffect=function(O,J){return ue.H.useLayoutEffect(O,J)},Me.useMemo=function(O,J){return ue.H.useMemo(O,J)},Me.useOptimistic=function(O,J){return ue.H.useOptimistic(O,J)},Me.useReducer=function(O,J,le){return ue.H.useReducer(O,J,le)},Me.useRef=function(O){return ue.H.useRef(O)},Me.useState=function(O){return ue.H.useState(O)},Me.useSyncExternalStore=function(O,J,le){return ue.H.useSyncExternalStore(O,J,le)},Me.useTransition=function(){return ue.H.useTransition()},Me.version="19.1.1",Me}var Dv;function ug(){return Dv||(Dv=1,ym.exports=hS()),ym.exports}var te=ug();const fS=IE(te);var _m={exports:{}},$l={},vm={exports:{}},Em={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function mS(){return Ov||(Ov=1,(function(s){function e(Q,ae){var Y=Q.length;Q.push(ae);e:for(;0<Y;){var pe=Y-1>>>1,O=Q[pe];if(0<o(O,ae))Q[pe]=ae,Q[Y]=O,Y=pe;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var ae=Q[0],Y=Q.pop();if(Y!==ae){Q[0]=Y;e:for(var pe=0,O=Q.length,J=O>>>1;pe<J;){var le=2*(pe+1)-1,oe=Q[le],_e=le+1,Ne=Q[_e];if(0>o(oe,Y))_e<O&&0>o(Ne,oe)?(Q[pe]=Ne,Q[_e]=Y,pe=_e):(Q[pe]=oe,Q[le]=Y,pe=le);else if(_e<O&&0>o(Ne,Y))Q[pe]=Ne,Q[_e]=Y,pe=_e;else break e}}return ae}function o(Q,ae){var Y=Q.sortIndex-ae.sortIndex;return Y!==0?Y:Q.id-ae.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],_=[],w=1,b=null,S=3,C=!1,j=!1,F=!1,z=!1,ie=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function fe(Q){for(var ae=t(_);ae!==null;){if(ae.callback===null)i(_);else if(ae.startTime<=Q)i(_),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=t(_)}}function ue(Q){if(F=!1,fe(Q),!j)if(t(g)!==null)j=!0,X||(X=!0,V());else{var ae=t(_);ae!==null&&Oe(ue,ae.startTime-Q)}}var X=!1,N=-1,x=5,I=-1;function P(){return z?!0:!(s.unstable_now()-I<x)}function M(){if(z=!1,X){var Q=s.unstable_now();I=Q;var ae=!0;try{e:{j=!1,F&&(F=!1,se(N),N=-1),C=!0;var Y=S;try{t:{for(fe(Q),b=t(g);b!==null&&!(b.expirationTime>Q&&P());){var pe=b.callback;if(typeof pe=="function"){b.callback=null,S=b.priorityLevel;var O=pe(b.expirationTime<=Q);if(Q=s.unstable_now(),typeof O=="function"){b.callback=O,fe(Q),ae=!0;break t}b===t(g)&&i(g),fe(Q)}else i(g);b=t(g)}if(b!==null)ae=!0;else{var J=t(_);J!==null&&Oe(ue,J.startTime-Q),ae=!1}}break e}finally{b=null,S=Y,C=!1}ae=void 0}}finally{ae?V():X=!1}}}var V;if(typeof re=="function")V=function(){re(M)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Ie=R.port2;R.port1.onmessage=M,V=function(){Ie.postMessage(null)}}else V=function(){ie(M,0)};function Oe(Q,ae){N=ie(function(){Q(s.unstable_now())},ae)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Q){Q.callback=null},s.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<Q?Math.floor(1e3/Q):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var Y=S;S=ae;try{return Q()}finally{S=Y}},s.unstable_requestPaint=function(){z=!0},s.unstable_runWithPriority=function(Q,ae){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Y=S;S=Q;try{return ae()}finally{S=Y}},s.unstable_scheduleCallback=function(Q,ae,Y){var pe=s.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?pe+Y:pe):Y=pe,Q){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Y+O,Q={id:w++,callback:ae,priorityLevel:Q,startTime:Y,expirationTime:O,sortIndex:-1},Y>pe?(Q.sortIndex=Y,e(_,Q),t(g)===null&&Q===t(_)&&(F?(se(N),N=-1):F=!0,Oe(ue,Y-pe))):(Q.sortIndex=O,e(g,Q),j||C||(j=!0,X||(X=!0,V()))),Q},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(Q){var ae=S;return function(){var Y=S;S=ae;try{return Q.apply(this,arguments)}finally{S=Y}}}})(Em)),Em}var Pv;function gS(){return Pv||(Pv=1,vm.exports=mS()),vm.exports}var wm={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function pS(){if(Mv)return on;Mv=1;var s=ug();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)_+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,_,w){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:_,implementation:w}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,on.createPortal=function(g,_){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(g,_,null,w)},on.flushSync=function(g){var _=h.T,w=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=_,i.p=w,i.d.f()}},on.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,i.d.C(g,_))},on.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},on.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var w=_.as,b=m(w,_.crossOrigin),S=typeof _.integrity=="string"?_.integrity:void 0,C=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;w==="style"?i.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:C}):w==="script"&&i.d.X(g,{crossOrigin:b,integrity:S,fetchPriority:C,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},on.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var w=m(_.as,_.crossOrigin);i.d.M(g,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&i.d.M(g)},on.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var w=_.as,b=m(w,_.crossOrigin);i.d.L(g,w,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},on.preloadModule=function(g,_){if(typeof g=="string")if(_){var w=m(_.as,_.crossOrigin);i.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else i.d.m(g)},on.requestFormReset=function(g){i.d.r(g)},on.unstable_batchedUpdates=function(g,_){return g(_)},on.useFormState=function(g,_,w){return h.H.useFormState(g,_,w)},on.useFormStatus=function(){return h.H.useHostTransitionStatus()},on.version="19.1.1",on}var kv;function yS(){if(kv)return wm.exports;kv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),wm.exports=pS(),wm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function _S(){if(Vv)return $l;Vv=1;var s=gS(),e=ug(),t=yS();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function h(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(i(188))}function g(n){var r=n.alternate;if(!r){if(r=c(n),r===null)throw Error(i(188));return r!==n?null:n}for(var a=n,l=r;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return m(d),n;if(f===l)return m(d),r;f=f.sibling}throw Error(i(188))}if(a.return!==l.return)a=d,l=f;else{for(var E=!1,T=d.child;T;){if(T===a){E=!0,a=d,l=f;break}if(T===l){E=!0,l=d,a=f;break}T=T.sibling}if(!E){for(T=f.child;T;){if(T===a){E=!0,a=f,l=d;break}if(T===l){E=!0,l=f,a=d;break}T=T.sibling}if(!E)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?n:r}function _(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=_(n),r!==null)return r;n=n.sibling}return null}var w=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),re=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function V(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function Ie(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case z:return"Profiler";case F:return"StrictMode";case ue:return"Suspense";case X:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case C:return"Portal";case re:return(n.displayName||"Context")+".Provider";case se:return(n._context.displayName||"Context")+".Consumer";case fe:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case N:return r=n.displayName||null,r!==null?r:Ie(n.type)||"Memo";case x:r=n._payload,n=n._init;try{return Ie(n(r))}catch{}}return null}var Oe=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},pe=[],O=-1;function J(n){return{current:n}}function le(n){0>O||(n.current=pe[O],pe[O]=null,O--)}function oe(n,r){O++,pe[O]=n.current,n.current=r}var _e=J(null),Ne=J(null),Ae=J(null),It=J(null);function nt(n,r){switch(oe(Ae,r),oe(Ne,n),oe(_e,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?nv(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=nv(r),n=rv(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}le(_e),oe(_e,n)}function qn(){le(_e),le(Ne),le(Ae)}function sr(n){n.memoizedState!==null&&oe(It,n);var r=_e.current,a=rv(r,n.type);r!==a&&(oe(Ne,n),oe(_e,a))}function _r(n){Ne.current===n&&(le(_e),le(Ne)),It.current===n&&(le(It),Gl._currentValue=Y)}var ks=Object.prototype.hasOwnProperty,vr=s.unstable_scheduleCallback,Er=s.unstable_cancelCallback,Kr=s.unstable_shouldYield,Aa=s.unstable_requestPaint,wn=s.unstable_now,Qo=s.unstable_getCurrentPriorityLevel,Oi=s.unstable_ImmediatePriority,Yr=s.unstable_UserBlockingPriority,Xr=s.unstable_NormalPriority,Ko=s.unstable_LowPriority,Vs=s.unstable_IdlePriority,Pi=s.log,Sa=s.unstable_setDisableYieldValue,ht=null,$e=null;function mn(n){if(typeof Pi=="function"&&Sa(n),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(ht,n)}catch{}}var Ht=Math.clz32?Math.clz32:$r,xa=Math.log,Yo=Math.LN2;function $r(n){return n>>>=0,n===0?32:31-(xa(n)/Yo|0)|0}var wr=256,Wr=4194304;function In(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Jr(n,r,a){var l=n.pendingLanes;if(l===0)return 0;var d=0,f=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?d=In(l):(E&=T,E!==0?d=In(E):a||(a=T&~n,a!==0&&(d=In(a))))):(T=l&~f,T!==0?d=In(T):E!==0?d=In(E):a||(a=l&~n,a!==0&&(d=In(a)))),d===0?0:r!==0&&r!==d&&(r&f)===0&&(f=d&-d,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:d}function Zr(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function es(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mi(){var n=wr;return wr<<=1,(wr&4194048)===0&&(wr=256),n}function ki(){var n=Wr;return Wr<<=1,(Wr&62914560)===0&&(Wr=4194304),n}function ir(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function ar(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Vi(n,r,a,l,d,f){var E=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var T=n.entanglements,D=n.expirationTimes,B=n.hiddenUpdates;for(a=E&~a;0<a;){var W=31-Ht(a),ee=1<<W;T[W]=0,D[W]=-1;var H=B[W];if(H!==null)for(B[W]=null,W=0;W<H.length;W++){var G=H[W];G!==null&&(G.lane&=-536870913)}a&=~ee}l!==0&&Bn(n,l,0),f!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=f&~(E&~r))}function Bn(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var l=31-Ht(r);n.entangledLanes|=r,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function de(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var l=31-Ht(a),d=1<<l;d&r|n[l]&r&&(n[l]|=r),a&=~d}}function me(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function _t(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Hn(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:Tv(n.type))}function or(n,r){var a=ae.p;try{return ae.p=n,r()}finally{ae.p=a}}var Ze=Math.random().toString(36).slice(2),jt="__reactFiber$"+Ze,Ct="__reactProps$"+Ze,Gn="__reactContainer$"+Ze,Xo="__reactEvents$"+Ze,_h="__reactListeners$"+Ze,js="__reactHandles$"+Ze,Bc="__reactResources$"+Ze,ji="__reactMarker$"+Ze;function Ls(n){delete n[jt],delete n[Ct],delete n[Xo],delete n[_h],delete n[js]}function ts(n){var r=n[jt];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Gn]||a[jt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=ov(n);n!==null;){if(a=n[jt])return a;n=ov(n)}return r}n=a,a=n.parentNode}return null}function Tr(n){if(n=n[jt]||n[Gn]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function br(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function gn(n){var r=n[Bc];return r||(r=n[Bc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function At(n){n[ji]=!0}var $o=new Set,Ra={};function lr(n,r){ns(n,r),ns(n+"Capture",r)}function ns(n,r){for(Ra[n]=r,n=0;n<r.length;n++)$o.add(r[n])}var Hc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gc={},Li={};function Fc(n){return ks.call(Li,n)?!0:ks.call(Gc,n)?!1:Hc.test(n)?Li[n]=!0:(Gc[n]=!0,!1)}function Us(n,r,a){if(Fc(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function Ar(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function Wt(n,r,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+l)}}var Ui,Qc;function rs(n){if(Ui===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ui=r&&r[1]||"",Qc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ui+n+Qc}var Ia=!1;function Ca(n,r){if(!n||Ia)return"";Ia=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(G){var H=G}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(G){H=G}n.call(ee.prototype)}}else{try{throw Error()}catch(G){H=G}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(G){if(G&&H&&typeof G.stack=="string")return[G.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),E=f[0],T=f[1];if(E&&T){var D=E.split(`
`),B=T.split(`
`);for(d=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;d<B.length&&!B[d].includes("DetermineComponentFrameRoot");)d++;if(l===D.length||d===B.length)for(l=D.length-1,d=B.length-1;1<=l&&0<=d&&D[l]!==B[d];)d--;for(;1<=l&&0<=d;l--,d--)if(D[l]!==B[d]){if(l!==1||d!==1)do if(l--,d--,0>d||D[l]!==B[d]){var W=`
`+D[l].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=l&&0<=d);break}}}finally{Ia=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?rs(a):""}function Wo(n){switch(n.tag){case 26:case 27:case 5:return rs(n.type);case 16:return rs("Lazy");case 13:return rs("Suspense");case 19:return rs("SuspenseList");case 0:case 15:return Ca(n.type,!1);case 11:return Ca(n.type.render,!1);case 1:return Ca(n.type,!0);case 31:return rs("Activity");default:return""}}function Na(n){try{var r="";do r+=Wo(n),n=n.return;while(n);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function pn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Jo(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function vh(n){var r=Jo(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),l=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(E){l=""+E,f.call(this,E)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Da(n){n._valueTracker||(n._valueTracker=vh(n))}function Zo(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return n&&(l=Jo(n)?n.checked?"true":"false":n.value),n=l,n!==a?(r.setValue(n),!0):!1}function zi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Eh=/[\n"\\]/g;function Nt(n){return n.replace(Eh,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Cn(n,r,a,l,d,f,E,T){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),r!=null?E==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+pn(r)):n.value!==""+pn(r)&&(n.value=""+pn(r)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),r!=null?zs(n,E,pn(r)):a!=null?zs(n,E,pn(a)):l!=null&&n.removeAttribute("value"),d==null&&f!=null&&(n.defaultChecked=!!f),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+pn(T):n.removeAttribute("name")}function qi(n,r,a,l,d,f,E,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(n.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null))return;a=a!=null?""+pn(a):"",r=r!=null?""+pn(r):a,T||r===n.value||(n.value=r),n.defaultValue=r}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=T?n.checked:!!l,n.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function zs(n,r,a){r==="number"&&zi(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function ss(n,r,a,l){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&l&&(n[a].defaultSelected=!0)}else{for(a=""+pn(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,l&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function it(n,r,a){if(r!=null&&(r=""+pn(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+pn(a):""}function Bi(n,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(Oe(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=pn(r),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Fn(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Hi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kc(n,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":l?n.setProperty(r,a):typeof a!="number"||a===0||Hi.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function el(n,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var d in r)l=r[d],r.hasOwnProperty(d)&&a[d]!==l&&Kc(n,d,l)}else for(var f in r)r.hasOwnProperty(f)&&Kc(n,f,r[f])}function tl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Th=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oa(n){return Th.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var is=null;function Qn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var as=null,os=null;function nl(n){var r=Tr(n);if(r&&(n=r.stateNode)){var a=n[Ct]||null;e:switch(n=r.stateNode,r.type){case"input":if(Cn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Nt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==n&&l.form===n.form){var d=l[Ct]||null;if(!d)throw Error(i(90));Cn(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===n.form&&Zo(l)}break e;case"textarea":it(n,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ss(n,!!a.multiple,r,!1)}}}var Sr=!1;function Yc(n,r,a){if(Sr)return n(r,a);Sr=!0;try{var l=n(r);return l}finally{if(Sr=!1,(as!==null||os!==null)&&(qu(),as&&(r=as,n=os,os=as=null,nl(r),n)))for(r=0;r<n.length;r++)nl(n[r])}}function Gi(n,r){var a=n.stateNode;if(a===null)return null;var l=a[Ct]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kn=!1;if(cr)try{var Fi={};Object.defineProperty(Fi,"passive",{get:function(){Kn=!0}}),window.addEventListener("test",Fi,Fi),window.removeEventListener("test",Fi,Fi)}catch{Kn=!1}var xr=null,qs=null,ls=null;function rl(){if(ls)return ls;var n,r=qs,a=r.length,l,d="value"in xr?xr.value:xr.textContent,f=d.length;for(n=0;n<a&&r[n]===d[n];n++);var E=a-n;for(l=1;l<=E&&r[a-l]===d[f-l];l++);return ls=d.slice(n,1<l?1-l:void 0)}function Rr(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Ir(){return!0}function sl(){return!1}function Gt(n){function r(a,l,d,f,E){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ir:sl,this.isPropagationStopped=sl,this}return w(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ir)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ir)},persist:function(){},isPersistent:Ir}),r}var et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pa=Gt(et),Qi=w({},et,{view:0,detail:0}),Xc=Gt(Qi),Ma,ka,Cr,Ki=w({},Qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$i,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Cr&&(Cr&&n.type==="mousemove"?(Ma=n.screenX-Cr.screenX,ka=n.screenY-Cr.screenY):ka=Ma=0,Cr=n),Ma)},movementY:function(n){return"movementY"in n?n.movementY:ka}}),Yn=Gt(Ki),$c=w({},Ki,{dataTransfer:0}),bh=Gt($c),Yi=w({},Qi,{relatedTarget:0}),Va=Gt(Yi),il=w({},et,{animationName:0,elapsedTime:0,pseudoElement:0}),ja=Gt(il),Wc=w({},et,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),La=Gt(Wc),Ah=w({},et,{data:0}),al=Gt(Ah),Xi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ol(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Zc[n])?!!r[n]:!1}function $i(){return ol}var eu=w({},Qi,{key:function(n){if(n.key){var r=Xi[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Rr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Jc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$i,charCode:function(n){return n.type==="keypress"?Rr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Rr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ua=Gt(eu),tu=w({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ll=Gt(tu),cs=w({},Qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$i}),nu=Gt(cs),ru=w({},et,{propertyName:0,elapsedTime:0,pseudoElement:0}),su=Gt(ru),iu=w({},Ki,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),za=Gt(iu),yn=w({},et,{newState:0,oldState:0}),au=Gt(yn),ou=[9,13,27,32],Nr=cr&&"CompositionEvent"in window,u=null;cr&&"documentMode"in document&&(u=document.documentMode);var y=cr&&"TextEvent"in window&&!u,v=cr&&(!Nr||u&&8<u&&11>=u),A=" ",U=!1;function K(n,r){switch(n){case"keyup":return ou.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Be=!1;function Lt(n,r){switch(n){case"compositionend":return ce(r);case"keypress":return r.which!==32?null:(U=!0,A);case"textInput":return n=r.data,n===A&&U?null:n;default:return null}}function He(n,r){if(Be)return n==="compositionend"||!Nr&&K(n,r)?(n=rl(),ls=qs=xr=null,Be=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var Ft={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ut(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Ft[n.type]:r==="textarea"}function us(n,r,a,l){as?os?os.push(l):os=[l]:as=l,r=Ku(r,"onChange"),0<r.length&&(a=new Pa("onChange","change",null,a,l),n.push({event:a,listeners:r}))}var Jt=null,Dr=null;function cl(n){W_(n,0)}function lu(n){var r=br(n);if(Zo(r))return n}function _p(n,r){if(n==="change")return r}var vp=!1;if(cr){var Sh;if(cr){var xh="oninput"in document;if(!xh){var Ep=document.createElement("div");Ep.setAttribute("oninput","return;"),xh=typeof Ep.oninput=="function"}Sh=xh}else Sh=!1;vp=Sh&&(!document.documentMode||9<document.documentMode)}function wp(){Jt&&(Jt.detachEvent("onpropertychange",Tp),Dr=Jt=null)}function Tp(n){if(n.propertyName==="value"&&lu(Dr)){var r=[];us(r,Dr,n,Qn(n)),Yc(cl,r)}}function zb(n,r,a){n==="focusin"?(wp(),Jt=r,Dr=a,Jt.attachEvent("onpropertychange",Tp)):n==="focusout"&&wp()}function qb(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return lu(Dr)}function Bb(n,r){if(n==="click")return lu(r)}function Hb(n,r){if(n==="input"||n==="change")return lu(r)}function Gb(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Nn=typeof Object.is=="function"?Object.is:Gb;function ul(n,r){if(Nn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!ks.call(r,d)||!Nn(n[d],r[d]))return!1}return!0}function bp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ap(n,r){var a=bp(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=r&&l>=r)return{node:a,offset:r-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=bp(a)}}function Sp(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Sp(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function xp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=zi(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=zi(n.document)}return r}function Rh(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var Fb=cr&&"documentMode"in document&&11>=document.documentMode,qa=null,Ih=null,dl=null,Ch=!1;function Rp(n,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ch||qa==null||qa!==zi(l)||(l=qa,"selectionStart"in l&&Rh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),dl&&ul(dl,l)||(dl=l,l=Ku(Ih,"onSelect"),0<l.length&&(r=new Pa("onSelect","select",null,r,a),n.push({event:r,listeners:l}),r.target=qa)))}function Wi(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Ba={animationend:Wi("Animation","AnimationEnd"),animationiteration:Wi("Animation","AnimationIteration"),animationstart:Wi("Animation","AnimationStart"),transitionrun:Wi("Transition","TransitionRun"),transitionstart:Wi("Transition","TransitionStart"),transitioncancel:Wi("Transition","TransitionCancel"),transitionend:Wi("Transition","TransitionEnd")},Nh={},Ip={};cr&&(Ip=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function Ji(n){if(Nh[n])return Nh[n];if(!Ba[n])return n;var r=Ba[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Ip)return Nh[n]=r[a];return n}var Cp=Ji("animationend"),Np=Ji("animationiteration"),Dp=Ji("animationstart"),Qb=Ji("transitionrun"),Kb=Ji("transitionstart"),Yb=Ji("transitioncancel"),Op=Ji("transitionend"),Pp=new Map,Dh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dh.push("scrollEnd");function ur(n,r){Pp.set(n,r),lr(r,[n])}var Mp=new WeakMap;function Xn(n,r){if(typeof n=="object"&&n!==null){var a=Mp.get(n);return a!==void 0?a:(r={value:n,source:r,stack:Na(r)},Mp.set(n,r),r)}return{value:n,source:r,stack:Na(r)}}var $n=[],Ha=0,Oh=0;function cu(){for(var n=Ha,r=Oh=Ha=0;r<n;){var a=$n[r];$n[r++]=null;var l=$n[r];$n[r++]=null;var d=$n[r];$n[r++]=null;var f=$n[r];if($n[r++]=null,l!==null&&d!==null){var E=l.pending;E===null?d.next=d:(d.next=E.next,E.next=d),l.pending=d}f!==0&&kp(a,d,f)}}function uu(n,r,a,l){$n[Ha++]=n,$n[Ha++]=r,$n[Ha++]=a,$n[Ha++]=l,Oh|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Ph(n,r,a,l){return uu(n,r,a,l),du(n)}function Ga(n,r){return uu(n,null,null,r),du(n)}function kp(n,r,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var d=!1,f=n.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(n=f.stateNode,n===null||n._visibility&1||(d=!0)),n=f,f=f.return;return n.tag===3?(f=n.stateNode,d&&r!==null&&(d=31-Ht(a),n=f.hiddenUpdates,l=n[d],l===null?n[d]=[r]:l.push(r),r.lane=a|536870912),f):null}function du(n){if(50<Vl)throw Vl=0,zf=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Fa={};function Xb(n,r,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(n,r,a,l){return new Xb(n,r,a,l)}function Mh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ds(n,r){var a=n.alternate;return a===null?(a=Dn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Vp(n,r){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function hu(n,r,a,l,d,f){var E=0;if(l=n,typeof n=="function")Mh(n)&&(E=1);else if(typeof n=="string")E=WA(n,a,_e.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=Dn(31,a,r,d),n.elementType=I,n.lanes=f,n;case j:return Zi(a.children,d,f,r);case F:E=8,d|=24;break;case z:return n=Dn(12,a,r,d|2),n.elementType=z,n.lanes=f,n;case ue:return n=Dn(13,a,r,d),n.elementType=ue,n.lanes=f,n;case X:return n=Dn(19,a,r,d),n.elementType=X,n.lanes=f,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ie:case re:E=10;break e;case se:E=9;break e;case fe:E=11;break e;case N:E=14;break e;case x:E=16,l=null;break e}E=29,a=Error(i(130,n===null?"null":typeof n,"")),l=null}return r=Dn(E,a,r,d),r.elementType=n,r.type=l,r.lanes=f,r}function Zi(n,r,a,l){return n=Dn(7,n,l,r),n.lanes=a,n}function kh(n,r,a){return n=Dn(6,n,null,r),n.lanes=a,n}function Vh(n,r,a){return r=Dn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Qa=[],Ka=0,fu=null,mu=0,Wn=[],Jn=0,ea=null,hs=1,fs="";function ta(n,r){Qa[Ka++]=mu,Qa[Ka++]=fu,fu=n,mu=r}function jp(n,r,a){Wn[Jn++]=hs,Wn[Jn++]=fs,Wn[Jn++]=ea,ea=n;var l=hs;n=fs;var d=32-Ht(l)-1;l&=~(1<<d),a+=1;var f=32-Ht(r)+d;if(30<f){var E=d-d%5;f=(l&(1<<E)-1).toString(32),l>>=E,d-=E,hs=1<<32-Ht(r)+d|a<<d|l,fs=f+n}else hs=1<<f|a<<d|l,fs=n}function jh(n){n.return!==null&&(ta(n,1),jp(n,1,0))}function Lh(n){for(;n===fu;)fu=Qa[--Ka],Qa[Ka]=null,mu=Qa[--Ka],Qa[Ka]=null;for(;n===ea;)ea=Wn[--Jn],Wn[Jn]=null,fs=Wn[--Jn],Wn[Jn]=null,hs=Wn[--Jn],Wn[Jn]=null}var _n=null,vt=null,We=!1,na=null,Or=!1,Uh=Error(i(519));function ra(n){var r=Error(i(418,""));throw ml(Xn(r,n)),Uh}function Lp(n){var r=n.stateNode,a=n.type,l=n.memoizedProps;switch(r[jt]=n,r[Ct]=l,a){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(a=0;a<Ll.length;a++)Le(Ll[a],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),qi(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Da(r);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Bi(r,l.value,l.defaultValue,l.children),Da(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||tv(r.textContent,a)?(l.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),l.onScroll!=null&&Le("scroll",r),l.onScrollEnd!=null&&Le("scrollend",r),l.onClick!=null&&(r.onclick=Yu),r=!0):r=!1,r||ra(n)}function Up(n){for(_n=n.return;_n;)switch(_n.tag){case 5:case 13:Or=!1;return;case 27:case 3:Or=!0;return;default:_n=_n.return}}function hl(n){if(n!==_n)return!1;if(!We)return Up(n),We=!0,!1;var r=n.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||nm(n.type,n.memoizedProps)),a=!a),a&&vt&&ra(n),Up(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(r===0){vt=hr(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;n=n.nextSibling}vt=null}}else r===27?(r=vt,ri(n.type)?(n=am,am=null,vt=n):vt=r):vt=_n?hr(n.stateNode.nextSibling):null;return!0}function fl(){vt=_n=null,We=!1}function zp(){var n=na;return n!==null&&(An===null?An=n:An.push.apply(An,n),na=null),n}function ml(n){na===null?na=[n]:na.push(n)}var zh=J(null),sa=null,ms=null;function Bs(n,r,a){oe(zh,r._currentValue),r._currentValue=a}function gs(n){n._currentValue=zh.current,le(zh)}function qh(n,r,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),n===a)break;n=n.return}}function Bh(n,r,a,l){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var f=d.dependencies;if(f!==null){var E=d.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=d;for(var D=0;D<r.length;D++)if(T.context===r[D]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),qh(f.return,a,n),l||(E=null);break e}f=T.next}}else if(d.tag===18){if(E=d.return,E===null)throw Error(i(341));E.lanes|=a,f=E.alternate,f!==null&&(f.lanes|=a),qh(E,a,n),E=null}else E=d.child;if(E!==null)E.return=d;else for(E=d;E!==null;){if(E===n){E=null;break}if(d=E.sibling,d!==null){d.return=E.return,E=d;break}E=E.return}d=E}}function gl(n,r,a,l){n=null;for(var d=r,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var E=d.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var T=d.type;Nn(d.pendingProps.value,E.value)||(n!==null?n.push(T):n=[T])}}else if(d===It.current){if(E=d.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Gl):n=[Gl])}d=d.return}n!==null&&Bh(r,n,a,l),r.flags|=262144}function gu(n){for(n=n.firstContext;n!==null;){if(!Nn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ia(n){sa=n,ms=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function an(n){return qp(sa,n)}function pu(n,r){return sa===null&&ia(n),qp(n,r)}function qp(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ms===null){if(n===null)throw Error(i(308));ms=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else ms=ms.next=r;return a}var $b=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},Wb=s.unstable_scheduleCallback,Jb=s.unstable_NormalPriority,zt={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hh(){return{controller:new $b,data:new Map,refCount:0}}function pl(n){n.refCount--,n.refCount===0&&Wb(Jb,function(){n.controller.abort()})}var yl=null,Gh=0,Ya=0,Xa=null;function Zb(n,r){if(yl===null){var a=yl=[];Gh=0,Ya=Kf(),Xa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Gh++,r.then(Bp,Bp),r}function Bp(){if(--Gh===0&&yl!==null){Xa!==null&&(Xa.status="fulfilled");var n=yl;yl=null,Ya=0,Xa=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function eA(n,r){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return n.then(function(){l.status="fulfilled",l.value=r;for(var d=0;d<a.length;d++)(0,a[d])(r)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Hp=Q.S;Q.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Zb(n,r),Hp!==null&&Hp(n,r)};var aa=J(null);function Fh(){var n=aa.current;return n!==null?n:dt.pooledCache}function yu(n,r){r===null?oe(aa,aa.current):oe(aa,r.pool)}function Gp(){var n=Fh();return n===null?null:{parent:zt._currentValue,pool:n}}var _l=Error(i(460)),Fp=Error(i(474)),_u=Error(i(542)),Qh={then:function(){}};function Qp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function vu(){}function Kp(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(vu,vu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Xp(n),n;default:if(typeof r.status=="string")r.then(vu,vu);else{if(n=dt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(l){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=l}},function(l){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Xp(n),n}throw vl=r,_l}}var vl=null;function Yp(){if(vl===null)throw Error(i(459));var n=vl;return vl=null,n}function Xp(n){if(n===_l||n===_u)throw Error(i(483))}var Hs=!1;function Kh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yh(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Gs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Fs(n,r,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(rt&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,r=du(n),kp(n,null,a),r}return uu(n,l,r,a),du(n)}function El(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,de(n,a)}}function Xh(n,r){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=E:f=f.next=E,a=a.next}while(a!==null);f===null?d=f=r:f=f.next=r}else d=f=r;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var $h=!1;function wl(){if($h){var n=Xa;if(n!==null)throw n}}function Tl(n,r,a,l){$h=!1;var d=n.updateQueue;Hs=!1;var f=d.firstBaseUpdate,E=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var D=T,B=D.next;D.next=null,E===null?f=B:E.next=B,E=D;var W=n.alternate;W!==null&&(W=W.updateQueue,T=W.lastBaseUpdate,T!==E&&(T===null?W.firstBaseUpdate=B:T.next=B,W.lastBaseUpdate=D))}if(f!==null){var ee=d.baseState;E=0,W=B=D=null,T=f;do{var H=T.lane&-536870913,G=H!==T.lane;if(G?(Ge&H)===H:(l&H)===H){H!==0&&H===Ya&&($h=!0),W!==null&&(W=W.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Re=n,Te=T;H=r;var lt=a;switch(Te.tag){case 1:if(Re=Te.payload,typeof Re=="function"){ee=Re.call(lt,ee,H);break e}ee=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Te.payload,H=typeof Re=="function"?Re.call(lt,ee,H):Re,H==null)break e;ee=w({},ee,H);break e;case 2:Hs=!0}}H=T.callback,H!==null&&(n.flags|=64,G&&(n.flags|=8192),G=d.callbacks,G===null?d.callbacks=[H]:G.push(H))}else G={lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},W===null?(B=W=G,D=ee):W=W.next=G,E|=H;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;G=T,T=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);W===null&&(D=ee),d.baseState=D,d.firstBaseUpdate=B,d.lastBaseUpdate=W,f===null&&(d.shared.lanes=0),Zs|=E,n.lanes=E,n.memoizedState=ee}}function $p(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function Wp(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)$p(a[n],r)}var $a=J(null),Eu=J(0);function Jp(n,r){n=Ts,oe(Eu,n),oe($a,r),Ts=n|r.baseLanes}function Wh(){oe(Eu,Ts),oe($a,$a.current)}function Jh(){Ts=Eu.current,le($a),le(Eu)}var Qs=0,ke=null,at=null,Dt=null,wu=!1,Wa=!1,oa=!1,Tu=0,bl=0,Ja=null,tA=0;function St(){throw Error(i(321))}function Zh(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Nn(n[a],r[a]))return!1;return!0}function ef(n,r,a,l,d,f){return Qs=f,ke=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Q.H=n===null||n.memoizedState===null?ky:Vy,oa=!1,f=a(l,d),oa=!1,Wa&&(f=ey(r,a,l,d)),Zp(n),f}function Zp(n){Q.H=Iu;var r=at!==null&&at.next!==null;if(Qs=0,Dt=at=ke=null,wu=!1,bl=0,Ja=null,r)throw Error(i(300));n===null||Qt||(n=n.dependencies,n!==null&&gu(n)&&(Qt=!0))}function ey(n,r,a,l){ke=n;var d=0;do{if(Wa&&(Ja=null),bl=0,Wa=!1,25<=d)throw Error(i(301));if(d+=1,Dt=at=null,n.updateQueue!=null){var f=n.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=lA,f=r(a,l)}while(Wa);return f}function nA(){var n=Q.H,r=n.useState()[0];return r=typeof r.then=="function"?Al(r):r,n=n.useState()[0],(at!==null?at.memoizedState:null)!==n&&(ke.flags|=1024),r}function tf(){var n=Tu!==0;return Tu=0,n}function nf(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function rf(n){if(wu){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}wu=!1}Qs=0,Dt=at=ke=null,Wa=!1,bl=Tu=0,Ja=null}function Tn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?ke.memoizedState=Dt=n:Dt=Dt.next=n,Dt}function Ot(){if(at===null){var n=ke.alternate;n=n!==null?n.memoizedState:null}else n=at.next;var r=Dt===null?ke.memoizedState:Dt.next;if(r!==null)Dt=r,at=n;else{if(n===null)throw ke.alternate===null?Error(i(467)):Error(i(310));at=n,n={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Dt===null?ke.memoizedState=Dt=n:Dt=Dt.next=n}return Dt}function sf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Al(n){var r=bl;return bl+=1,Ja===null&&(Ja=[]),n=Kp(Ja,n,r),r=ke,(Dt===null?r.memoizedState:Dt.next)===null&&(r=r.alternate,Q.H=r===null||r.memoizedState===null?ky:Vy),n}function bu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Al(n);if(n.$$typeof===re)return an(n)}throw Error(i(438,String(n)))}function af(n){var r=null,a=ke.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=sf(),ke.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),l=0;l<n;l++)a[l]=P;return r.index++,a}function ps(n,r){return typeof r=="function"?r(n):r}function Au(n){var r=Ot();return of(r,at,n)}function of(n,r,a){var l=n.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var d=n.baseQueue,f=l.pending;if(f!==null){if(d!==null){var E=d.next;d.next=f.next,f.next=E}r.baseQueue=d=f,l.pending=null}if(f=n.baseState,d===null)n.memoizedState=f;else{r=d.next;var T=E=null,D=null,B=r,W=!1;do{var ee=B.lane&-536870913;if(ee!==B.lane?(Ge&ee)===ee:(Qs&ee)===ee){var H=B.revertLane;if(H===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),ee===Ya&&(W=!0);else if((Qs&H)===H){B=B.next,H===Ya&&(W=!0);continue}else ee={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},D===null?(T=D=ee,E=f):D=D.next=ee,ke.lanes|=H,Zs|=H;ee=B.action,oa&&a(f,ee),f=B.hasEagerState?B.eagerState:a(f,ee)}else H={lane:ee,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},D===null?(T=D=H,E=f):D=D.next=H,ke.lanes|=ee,Zs|=ee;B=B.next}while(B!==null&&B!==r);if(D===null?E=f:D.next=T,!Nn(f,n.memoizedState)&&(Qt=!0,W&&(a=Xa,a!==null)))throw a;n.memoizedState=f,n.baseState=E,n.baseQueue=D,l.lastRenderedState=f}return d===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function lf(n){var r=Ot(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=n;var l=a.dispatch,d=a.pending,f=r.memoizedState;if(d!==null){a.pending=null;var E=d=d.next;do f=n(f,E.action),E=E.next;while(E!==d);Nn(f,r.memoizedState)||(Qt=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function ty(n,r,a){var l=ke,d=Ot(),f=We;if(f){if(a===void 0)throw Error(i(407));a=a()}else a=r();var E=!Nn((at||d).memoizedState,a);E&&(d.memoizedState=a,Qt=!0),d=d.queue;var T=sy.bind(null,l,d,n);if(Sl(2048,8,T,[n]),d.getSnapshot!==r||E||Dt!==null&&Dt.memoizedState.tag&1){if(l.flags|=2048,Za(9,Su(),ry.bind(null,l,d,a,r),null),dt===null)throw Error(i(349));f||(Qs&124)!==0||ny(l,r,a)}return a}function ny(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=ke.updateQueue,r===null?(r=sf(),ke.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function ry(n,r,a,l){r.value=a,r.getSnapshot=l,iy(r)&&ay(n)}function sy(n,r,a){return a(function(){iy(r)&&ay(n)})}function iy(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Nn(n,a)}catch{return!0}}function ay(n){var r=Ga(n,2);r!==null&&Vn(r,n,2)}function cf(n){var r=Tn();if(typeof n=="function"){var a=n;if(n=a(),oa){mn(!0);try{a()}finally{mn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:n},r}function oy(n,r,a,l){return n.baseState=a,of(n,at,typeof l=="function"?l:ps)}function rA(n,r,a,l,d){if(Ru(n))throw Error(i(485));if(n=r.action,n!==null){var f={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};Q.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,ly(r,f)):(f.next=a.next,r.pending=a.next=f)}}function ly(n,r){var a=r.action,l=r.payload,d=n.state;if(r.isTransition){var f=Q.T,E={};Q.T=E;try{var T=a(d,l),D=Q.S;D!==null&&D(E,T),cy(n,r,T)}catch(B){uf(n,r,B)}finally{Q.T=f}}else try{f=a(d,l),cy(n,r,f)}catch(B){uf(n,r,B)}}function cy(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){uy(n,r,l)},function(l){return uf(n,r,l)}):uy(n,r,a)}function uy(n,r,a){r.status="fulfilled",r.value=a,dy(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,ly(n,a)))}function uf(n,r,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,dy(r),r=r.next;while(r!==l)}n.action=null}function dy(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function hy(n,r){return r}function fy(n,r){if(We){var a=dt.formState;if(a!==null){e:{var l=ke;if(We){if(vt){t:{for(var d=vt,f=Or;d.nodeType!==8;){if(!f){d=null;break t}if(d=hr(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){vt=hr(d.nextSibling),l=d.data==="F!";break e}}ra(l)}l=!1}l&&(r=a[0])}}return a=Tn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hy,lastRenderedState:r},a.queue=l,a=Oy.bind(null,ke,l),l.dispatch=a,l=cf(!1),f=gf.bind(null,ke,!1,l.queue),l=Tn(),d={state:r,dispatch:null,action:n,pending:null},l.queue=d,a=rA.bind(null,ke,d,f,a),d.dispatch=a,l.memoizedState=n,[r,a,!1]}function my(n){var r=Ot();return gy(r,at,n)}function gy(n,r,a){if(r=of(n,r,hy)[0],n=Au(ps)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Al(r)}catch(E){throw E===_l?_u:E}else l=r;r=Ot();var d=r.queue,f=d.dispatch;return a!==r.memoizedState&&(ke.flags|=2048,Za(9,Su(),sA.bind(null,d,a),null)),[l,f,n]}function sA(n,r){n.action=r}function py(n){var r=Ot(),a=at;if(a!==null)return gy(r,a,n);Ot(),r=r.memoizedState,a=Ot();var l=a.queue.dispatch;return a.memoizedState=n,[r,l,!1]}function Za(n,r,a,l){return n={tag:n,create:a,deps:l,inst:r,next:null},r=ke.updateQueue,r===null&&(r=sf(),ke.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,r.lastEffect=n),n}function Su(){return{destroy:void 0,resource:void 0}}function yy(){return Ot().memoizedState}function xu(n,r,a,l){var d=Tn();l=l===void 0?null:l,ke.flags|=n,d.memoizedState=Za(1|r,Su(),a,l)}function Sl(n,r,a,l){var d=Ot();l=l===void 0?null:l;var f=d.memoizedState.inst;at!==null&&l!==null&&Zh(l,at.memoizedState.deps)?d.memoizedState=Za(r,f,a,l):(ke.flags|=n,d.memoizedState=Za(1|r,f,a,l))}function _y(n,r){xu(8390656,8,n,r)}function vy(n,r){Sl(2048,8,n,r)}function Ey(n,r){return Sl(4,2,n,r)}function wy(n,r){return Sl(4,4,n,r)}function Ty(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function by(n,r,a){a=a!=null?a.concat([n]):null,Sl(4,4,Ty.bind(null,r,n),a)}function df(){}function Ay(n,r){var a=Ot();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Zh(r,l[1])?l[0]:(a.memoizedState=[n,r],n)}function Sy(n,r){var a=Ot();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Zh(r,l[1]))return l[0];if(l=n(),oa){mn(!0);try{n()}finally{mn(!1)}}return a.memoizedState=[l,r],l}function hf(n,r,a){return a===void 0||(Qs&1073741824)!==0?n.memoizedState=r:(n.memoizedState=a,n=I_(),ke.lanes|=n,Zs|=n,a)}function xy(n,r,a,l){return Nn(a,r)?a:$a.current!==null?(n=hf(n,a,l),Nn(n,r)||(Qt=!0),n):(Qs&42)===0?(Qt=!0,n.memoizedState=a):(n=I_(),ke.lanes|=n,Zs|=n,r)}function Ry(n,r,a,l,d){var f=ae.p;ae.p=f!==0&&8>f?f:8;var E=Q.T,T={};Q.T=T,gf(n,!1,r,a);try{var D=d(),B=Q.S;if(B!==null&&B(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var W=eA(D,l);xl(n,r,W,kn(n))}else xl(n,r,l,kn(n))}catch(ee){xl(n,r,{then:function(){},status:"rejected",reason:ee},kn())}finally{ae.p=f,Q.T=E}}function iA(){}function ff(n,r,a,l){if(n.tag!==5)throw Error(i(476));var d=Iy(n).queue;Ry(n,d,r,Y,a===null?iA:function(){return Cy(n),a(l)})}function Iy(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:Y},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Cy(n){var r=Iy(n).next.queue;xl(n,r,{},kn())}function mf(){return an(Gl)}function Ny(){return Ot().memoizedState}function Dy(){return Ot().memoizedState}function aA(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=kn();n=Gs(a);var l=Fs(r,n,a);l!==null&&(Vn(l,r,a),El(l,r,a)),r={cache:Hh()},n.payload=r;return}r=r.return}}function oA(n,r,a){var l=kn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ru(n)?Py(r,a):(a=Ph(n,r,a,l),a!==null&&(Vn(a,n,l),My(a,r,l)))}function Oy(n,r,a){var l=kn();xl(n,r,a,l)}function xl(n,r,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ru(n))Py(r,d);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var E=r.lastRenderedState,T=f(E,a);if(d.hasEagerState=!0,d.eagerState=T,Nn(T,E))return uu(n,r,d,0),dt===null&&cu(),!1}catch{}finally{}if(a=Ph(n,r,d,l),a!==null)return Vn(a,n,l),My(a,r,l),!0}return!1}function gf(n,r,a,l){if(l={lane:2,revertLane:Kf(),action:l,hasEagerState:!1,eagerState:null,next:null},Ru(n)){if(r)throw Error(i(479))}else r=Ph(n,a,l,2),r!==null&&Vn(r,n,2)}function Ru(n){var r=n.alternate;return n===ke||r!==null&&r===ke}function Py(n,r){Wa=wu=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function My(n,r,a){if((a&4194048)!==0){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,de(n,a)}}var Iu={readContext:an,use:bu,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St},ky={readContext:an,use:bu,useCallback:function(n,r){return Tn().memoizedState=[n,r===void 0?null:r],n},useContext:an,useEffect:_y,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,xu(4194308,4,Ty.bind(null,r,n),a)},useLayoutEffect:function(n,r){return xu(4194308,4,n,r)},useInsertionEffect:function(n,r){xu(4,2,n,r)},useMemo:function(n,r){var a=Tn();r=r===void 0?null:r;var l=n();if(oa){mn(!0);try{n()}finally{mn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(n,r,a){var l=Tn();if(a!==void 0){var d=a(r);if(oa){mn(!0);try{a(r)}finally{mn(!1)}}}else d=r;return l.memoizedState=l.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},l.queue=n,n=n.dispatch=oA.bind(null,ke,n),[l.memoizedState,n]},useRef:function(n){var r=Tn();return n={current:n},r.memoizedState=n},useState:function(n){n=cf(n);var r=n.queue,a=Oy.bind(null,ke,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:df,useDeferredValue:function(n,r){var a=Tn();return hf(a,n,r)},useTransition:function(){var n=cf(!1);return n=Ry.bind(null,ke,n.queue,!0,!1),Tn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var l=ke,d=Tn();if(We){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),dt===null)throw Error(i(349));(Ge&124)!==0||ny(l,r,a)}d.memoizedState=a;var f={value:a,getSnapshot:r};return d.queue=f,_y(sy.bind(null,l,f,n),[n]),l.flags|=2048,Za(9,Su(),ry.bind(null,l,f,a,r),null),a},useId:function(){var n=Tn(),r=dt.identifierPrefix;if(We){var a=fs,l=hs;a=(l&~(1<<32-Ht(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=Tu++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=tA++,r="«"+r+"r"+a.toString(32)+"»";return n.memoizedState=r},useHostTransitionStatus:mf,useFormState:fy,useActionState:fy,useOptimistic:function(n){var r=Tn();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=gf.bind(null,ke,!0,a),a.dispatch=r,[n,r]},useMemoCache:af,useCacheRefresh:function(){return Tn().memoizedState=aA.bind(null,ke)}},Vy={readContext:an,use:bu,useCallback:Ay,useContext:an,useEffect:vy,useImperativeHandle:by,useInsertionEffect:Ey,useLayoutEffect:wy,useMemo:Sy,useReducer:Au,useRef:yy,useState:function(){return Au(ps)},useDebugValue:df,useDeferredValue:function(n,r){var a=Ot();return xy(a,at.memoizedState,n,r)},useTransition:function(){var n=Au(ps)[0],r=Ot().memoizedState;return[typeof n=="boolean"?n:Al(n),r]},useSyncExternalStore:ty,useId:Ny,useHostTransitionStatus:mf,useFormState:my,useActionState:my,useOptimistic:function(n,r){var a=Ot();return oy(a,at,n,r)},useMemoCache:af,useCacheRefresh:Dy},lA={readContext:an,use:bu,useCallback:Ay,useContext:an,useEffect:vy,useImperativeHandle:by,useInsertionEffect:Ey,useLayoutEffect:wy,useMemo:Sy,useReducer:lf,useRef:yy,useState:function(){return lf(ps)},useDebugValue:df,useDeferredValue:function(n,r){var a=Ot();return at===null?hf(a,n,r):xy(a,at.memoizedState,n,r)},useTransition:function(){var n=lf(ps)[0],r=Ot().memoizedState;return[typeof n=="boolean"?n:Al(n),r]},useSyncExternalStore:ty,useId:Ny,useHostTransitionStatus:mf,useFormState:py,useActionState:py,useOptimistic:function(n,r){var a=Ot();return at!==null?oy(a,at,n,r):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:af,useCacheRefresh:Dy},eo=null,Rl=0;function Cu(n){var r=Rl;return Rl+=1,eo===null&&(eo=[]),Kp(eo,n,r)}function Il(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Nu(n,r){throw r.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function jy(n){var r=n._init;return r(n._payload)}function Ly(n){function r(L,k){if(n){var q=L.deletions;q===null?(L.deletions=[k],L.flags|=16):q.push(k)}}function a(L,k){if(!n)return null;for(;k!==null;)r(L,k),k=k.sibling;return null}function l(L){for(var k=new Map;L!==null;)L.key!==null?k.set(L.key,L):k.set(L.index,L),L=L.sibling;return k}function d(L,k){return L=ds(L,k),L.index=0,L.sibling=null,L}function f(L,k,q){return L.index=q,n?(q=L.alternate,q!==null?(q=q.index,q<k?(L.flags|=67108866,k):q):(L.flags|=67108866,k)):(L.flags|=1048576,k)}function E(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function T(L,k,q,Z){return k===null||k.tag!==6?(k=kh(q,L.mode,Z),k.return=L,k):(k=d(k,q),k.return=L,k)}function D(L,k,q,Z){var ye=q.type;return ye===j?W(L,k,q.props.children,Z,q.key):k!==null&&(k.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===x&&jy(ye)===k.type)?(k=d(k,q.props),Il(k,q),k.return=L,k):(k=hu(q.type,q.key,q.props,null,L.mode,Z),Il(k,q),k.return=L,k)}function B(L,k,q,Z){return k===null||k.tag!==4||k.stateNode.containerInfo!==q.containerInfo||k.stateNode.implementation!==q.implementation?(k=Vh(q,L.mode,Z),k.return=L,k):(k=d(k,q.children||[]),k.return=L,k)}function W(L,k,q,Z,ye){return k===null||k.tag!==7?(k=Zi(q,L.mode,Z,ye),k.return=L,k):(k=d(k,q),k.return=L,k)}function ee(L,k,q){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=kh(""+k,L.mode,q),k.return=L,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case S:return q=hu(k.type,k.key,k.props,null,L.mode,q),Il(q,k),q.return=L,q;case C:return k=Vh(k,L.mode,q),k.return=L,k;case x:var Z=k._init;return k=Z(k._payload),ee(L,k,q)}if(Oe(k)||V(k))return k=Zi(k,L.mode,q,null),k.return=L,k;if(typeof k.then=="function")return ee(L,Cu(k),q);if(k.$$typeof===re)return ee(L,pu(L,k),q);Nu(L,k)}return null}function H(L,k,q,Z){var ye=k!==null?k.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ye!==null?null:T(L,k,""+q,Z);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return q.key===ye?D(L,k,q,Z):null;case C:return q.key===ye?B(L,k,q,Z):null;case x:return ye=q._init,q=ye(q._payload),H(L,k,q,Z)}if(Oe(q)||V(q))return ye!==null?null:W(L,k,q,Z,null);if(typeof q.then=="function")return H(L,k,Cu(q),Z);if(q.$$typeof===re)return H(L,k,pu(L,q),Z);Nu(L,q)}return null}function G(L,k,q,Z,ye){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return L=L.get(q)||null,T(k,L,""+Z,ye);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case S:return L=L.get(Z.key===null?q:Z.key)||null,D(k,L,Z,ye);case C:return L=L.get(Z.key===null?q:Z.key)||null,B(k,L,Z,ye);case x:var Ve=Z._init;return Z=Ve(Z._payload),G(L,k,q,Z,ye)}if(Oe(Z)||V(Z))return L=L.get(q)||null,W(k,L,Z,ye,null);if(typeof Z.then=="function")return G(L,k,q,Cu(Z),ye);if(Z.$$typeof===re)return G(L,k,q,pu(k,Z),ye);Nu(k,Z)}return null}function Re(L,k,q,Z){for(var ye=null,Ve=null,ve=k,be=k=0,Yt=null;ve!==null&&be<q.length;be++){ve.index>be?(Yt=ve,ve=null):Yt=ve.sibling;var Ye=H(L,ve,q[be],Z);if(Ye===null){ve===null&&(ve=Yt);break}n&&ve&&Ye.alternate===null&&r(L,ve),k=f(Ye,k,be),Ve===null?ye=Ye:Ve.sibling=Ye,Ve=Ye,ve=Yt}if(be===q.length)return a(L,ve),We&&ta(L,be),ye;if(ve===null){for(;be<q.length;be++)ve=ee(L,q[be],Z),ve!==null&&(k=f(ve,k,be),Ve===null?ye=ve:Ve.sibling=ve,Ve=ve);return We&&ta(L,be),ye}for(ve=l(ve);be<q.length;be++)Yt=G(ve,L,be,q[be],Z),Yt!==null&&(n&&Yt.alternate!==null&&ve.delete(Yt.key===null?be:Yt.key),k=f(Yt,k,be),Ve===null?ye=Yt:Ve.sibling=Yt,Ve=Yt);return n&&ve.forEach(function(li){return r(L,li)}),We&&ta(L,be),ye}function Te(L,k,q,Z){if(q==null)throw Error(i(151));for(var ye=null,Ve=null,ve=k,be=k=0,Yt=null,Ye=q.next();ve!==null&&!Ye.done;be++,Ye=q.next()){ve.index>be?(Yt=ve,ve=null):Yt=ve.sibling;var li=H(L,ve,Ye.value,Z);if(li===null){ve===null&&(ve=Yt);break}n&&ve&&li.alternate===null&&r(L,ve),k=f(li,k,be),Ve===null?ye=li:Ve.sibling=li,Ve=li,ve=Yt}if(Ye.done)return a(L,ve),We&&ta(L,be),ye;if(ve===null){for(;!Ye.done;be++,Ye=q.next())Ye=ee(L,Ye.value,Z),Ye!==null&&(k=f(Ye,k,be),Ve===null?ye=Ye:Ve.sibling=Ye,Ve=Ye);return We&&ta(L,be),ye}for(ve=l(ve);!Ye.done;be++,Ye=q.next())Ye=G(ve,L,be,Ye.value,Z),Ye!==null&&(n&&Ye.alternate!==null&&ve.delete(Ye.key===null?be:Ye.key),k=f(Ye,k,be),Ve===null?ye=Ye:Ve.sibling=Ye,Ve=Ye);return n&&ve.forEach(function(cS){return r(L,cS)}),We&&ta(L,be),ye}function lt(L,k,q,Z){if(typeof q=="object"&&q!==null&&q.type===j&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case S:e:{for(var ye=q.key;k!==null;){if(k.key===ye){if(ye=q.type,ye===j){if(k.tag===7){a(L,k.sibling),Z=d(k,q.props.children),Z.return=L,L=Z;break e}}else if(k.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===x&&jy(ye)===k.type){a(L,k.sibling),Z=d(k,q.props),Il(Z,q),Z.return=L,L=Z;break e}a(L,k);break}else r(L,k);k=k.sibling}q.type===j?(Z=Zi(q.props.children,L.mode,Z,q.key),Z.return=L,L=Z):(Z=hu(q.type,q.key,q.props,null,L.mode,Z),Il(Z,q),Z.return=L,L=Z)}return E(L);case C:e:{for(ye=q.key;k!==null;){if(k.key===ye)if(k.tag===4&&k.stateNode.containerInfo===q.containerInfo&&k.stateNode.implementation===q.implementation){a(L,k.sibling),Z=d(k,q.children||[]),Z.return=L,L=Z;break e}else{a(L,k);break}else r(L,k);k=k.sibling}Z=Vh(q,L.mode,Z),Z.return=L,L=Z}return E(L);case x:return ye=q._init,q=ye(q._payload),lt(L,k,q,Z)}if(Oe(q))return Re(L,k,q,Z);if(V(q)){if(ye=V(q),typeof ye!="function")throw Error(i(150));return q=ye.call(q),Te(L,k,q,Z)}if(typeof q.then=="function")return lt(L,k,Cu(q),Z);if(q.$$typeof===re)return lt(L,k,pu(L,q),Z);Nu(L,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,k!==null&&k.tag===6?(a(L,k.sibling),Z=d(k,q),Z.return=L,L=Z):(a(L,k),Z=kh(q,L.mode,Z),Z.return=L,L=Z),E(L)):a(L,k)}return function(L,k,q,Z){try{Rl=0;var ye=lt(L,k,q,Z);return eo=null,ye}catch(ve){if(ve===_l||ve===_u)throw ve;var Ve=Dn(29,ve,null,L.mode);return Ve.lanes=Z,Ve.return=L,Ve}finally{}}}var to=Ly(!0),Uy=Ly(!1),Zn=J(null),Pr=null;function Ks(n){var r=n.alternate;oe(qt,qt.current&1),oe(Zn,n),Pr===null&&(r===null||$a.current!==null||r.memoizedState!==null)&&(Pr=n)}function zy(n){if(n.tag===22){if(oe(qt,qt.current),oe(Zn,n),Pr===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(Pr=n)}}else Ys()}function Ys(){oe(qt,qt.current),oe(Zn,Zn.current)}function ys(n){le(Zn),Pr===n&&(Pr=null),le(qt)}var qt=J(0);function Du(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||im(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function pf(n,r,a,l){r=n.memoizedState,a=a(l,r),a=a==null?r:w({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var yf={enqueueSetState:function(n,r,a){n=n._reactInternals;var l=kn(),d=Gs(l);d.payload=r,a!=null&&(d.callback=a),r=Fs(n,d,l),r!==null&&(Vn(r,n,l),El(r,n,l))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var l=kn(),d=Gs(l);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=Fs(n,d,l),r!==null&&(Vn(r,n,l),El(r,n,l))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=kn(),l=Gs(a);l.tag=2,r!=null&&(l.callback=r),r=Fs(n,l,a),r!==null&&(Vn(r,n,a),El(r,n,a))}};function qy(n,r,a,l,d,f,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,f,E):r.prototype&&r.prototype.isPureReactComponent?!ul(a,l)||!ul(d,f):!0}function By(n,r,a,l){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==n&&yf.enqueueReplaceState(r,r.state,null)}function la(n,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(n=n.defaultProps){a===r&&(a=w({},a));for(var d in n)a[d]===void 0&&(a[d]=n[d])}return a}var Ou=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Hy(n){Ou(n)}function Gy(n){console.error(n)}function Fy(n){Ou(n)}function Pu(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Qy(n,r,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function _f(n,r,a){return a=Gs(a),a.tag=3,a.payload={element:null},a.callback=function(){Pu(n,r)},a}function Ky(n){return n=Gs(n),n.tag=3,n}function Yy(n,r,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;n.payload=function(){return d(f)},n.callback=function(){Qy(r,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Qy(r,a,l),typeof d!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function cA(n,r,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&gl(r,a,d,!0),a=Zn.current,a!==null){switch(a.tag){case 13:return Pr===null?Bf():a.alternate===null&&Et===0&&(Et=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Qh?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Gf(n,l,d)),!1;case 22:return a.flags|=65536,l===Qh?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Gf(n,l,d)),!1}throw Error(i(435,a.tag))}return Gf(n,l,d),Bf(),!1}if(We)return r=Zn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,l!==Uh&&(n=Error(i(422),{cause:l}),ml(Xn(n,a)))):(l!==Uh&&(r=Error(i(423),{cause:l}),ml(Xn(r,a))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,l=Xn(l,a),d=_f(n.stateNode,l,d),Xh(n,d),Et!==4&&(Et=2)),!1;var f=Error(i(520),{cause:l});if(f=Xn(f,a),kl===null?kl=[f]:kl.push(f),Et!==4&&(Et=2),r===null)return!0;l=Xn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=d&-d,a.lanes|=n,n=_f(a.stateNode,l,n),Xh(a,n),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ei===null||!ei.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Ky(d),Yy(d,n,a,l),Xh(a,d),!1}a=a.return}while(a!==null);return!1}var Xy=Error(i(461)),Qt=!1;function Zt(n,r,a,l){r.child=n===null?Uy(r,null,a,l):to(r,n.child,a,l)}function $y(n,r,a,l,d){a=a.render;var f=r.ref;if("ref"in l){var E={};for(var T in l)T!=="ref"&&(E[T]=l[T])}else E=l;return ia(r),l=ef(n,r,a,E,f,d),T=tf(),n!==null&&!Qt?(nf(n,r,d),_s(n,r,d)):(We&&T&&jh(r),r.flags|=1,Zt(n,r,l,d),r.child)}function Wy(n,r,a,l,d){if(n===null){var f=a.type;return typeof f=="function"&&!Mh(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,Jy(n,r,f,l,d)):(n=hu(a.type,null,l,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(f=n.child,!xf(n,d)){var E=f.memoizedProps;if(a=a.compare,a=a!==null?a:ul,a(E,l)&&n.ref===r.ref)return _s(n,r,d)}return r.flags|=1,n=ds(f,l),n.ref=r.ref,n.return=r,r.child=n}function Jy(n,r,a,l,d){if(n!==null){var f=n.memoizedProps;if(ul(f,l)&&n.ref===r.ref)if(Qt=!1,r.pendingProps=l=f,xf(n,d))(n.flags&131072)!==0&&(Qt=!0);else return r.lanes=n.lanes,_s(n,r,d)}return vf(n,r,a,l,d)}function Zy(n,r,a){var l=r.pendingProps,d=l.children,f=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,n!==null){for(d=r.child=n.child,f=0;d!==null;)f=f|d.lanes|d.childLanes,d=d.sibling;r.childLanes=f&~l}else r.childLanes=0,r.child=null;return e_(n,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&yu(r,f!==null?f.cachePool:null),f!==null?Jp(r,f):Wh(),zy(r);else return r.lanes=r.childLanes=536870912,e_(n,r,f!==null?f.baseLanes|a:a,a)}else f!==null?(yu(r,f.cachePool),Jp(r,f),Ys(),r.memoizedState=null):(n!==null&&yu(r,null),Wh(),Ys());return Zt(n,r,d,a),r.child}function e_(n,r,a,l){var d=Fh();return d=d===null?null:{parent:zt._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},n!==null&&yu(r,null),Wh(),zy(r),n!==null&&gl(n,r,l,!0),null}function Mu(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(n===null||n.ref!==a)&&(r.flags|=4194816)}}function vf(n,r,a,l,d){return ia(r),a=ef(n,r,a,l,void 0,d),l=tf(),n!==null&&!Qt?(nf(n,r,d),_s(n,r,d)):(We&&l&&jh(r),r.flags|=1,Zt(n,r,a,d),r.child)}function t_(n,r,a,l,d,f){return ia(r),r.updateQueue=null,a=ey(r,l,a,d),Zp(n),l=tf(),n!==null&&!Qt?(nf(n,r,f),_s(n,r,f)):(We&&l&&jh(r),r.flags|=1,Zt(n,r,a,f),r.child)}function n_(n,r,a,l,d){if(ia(r),r.stateNode===null){var f=Fa,E=a.contextType;typeof E=="object"&&E!==null&&(f=an(E)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=yf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Kh(r),E=a.contextType,f.context=typeof E=="object"&&E!==null?an(E):Fa,f.state=r.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(pf(r,a,E,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&yf.enqueueReplaceState(f,f.state,null),Tl(r,l,f,d),wl(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(n===null){f=r.stateNode;var T=r.memoizedProps,D=la(a,T);f.props=D;var B=f.context,W=a.contextType;E=Fa,typeof W=="object"&&W!==null&&(E=an(W));var ee=a.getDerivedStateFromProps;W=typeof ee=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,W||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||B!==E)&&By(r,f,l,E),Hs=!1;var H=r.memoizedState;f.state=H,Tl(r,l,f,d),wl(),B=r.memoizedState,T||H!==B||Hs?(typeof ee=="function"&&(pf(r,a,ee,l),B=r.memoizedState),(D=Hs||qy(r,a,D,l,H,B,E))?(W||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=B),f.props=l,f.state=B,f.context=E,l=D):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,Yh(n,r),E=r.memoizedProps,W=la(a,E),f.props=W,ee=r.pendingProps,H=f.context,B=a.contextType,D=Fa,typeof B=="object"&&B!==null&&(D=an(B)),T=a.getDerivedStateFromProps,(B=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==ee||H!==D)&&By(r,f,l,D),Hs=!1,H=r.memoizedState,f.state=H,Tl(r,l,f,d),wl();var G=r.memoizedState;E!==ee||H!==G||Hs||n!==null&&n.dependencies!==null&&gu(n.dependencies)?(typeof T=="function"&&(pf(r,a,T,l),G=r.memoizedState),(W=Hs||qy(r,a,W,l,H,G,D)||n!==null&&n.dependencies!==null&&gu(n.dependencies))?(B||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,G,D),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,G,D)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=G),f.props=l,f.state=G,f.context=D,l=W):(typeof f.componentDidUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(r.flags|=1024),l=!1)}return f=l,Mu(n,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,n!==null&&l?(r.child=to(r,n.child,null,d),r.child=to(r,null,a,d)):Zt(n,r,a,d),r.memoizedState=f.state,n=r.child):n=_s(n,r,d),n}function r_(n,r,a,l){return fl(),r.flags|=256,Zt(n,r,a,l),r.child}var Ef={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wf(n){return{baseLanes:n,cachePool:Gp()}}function Tf(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=er),n}function s_(n,r,a){var l=r.pendingProps,d=!1,f=(r.flags&128)!==0,E;if((E=f)||(E=n!==null&&n.memoizedState===null?!1:(qt.current&2)!==0),E&&(d=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,n===null){if(We){if(d?Ks(r):Ys(),We){var T=vt,D;if(D=T){e:{for(D=T,T=Or;D.nodeType!==8;){if(!T){T=null;break e}if(D=hr(D.nextSibling),D===null){T=null;break e}}T=D}T!==null?(r.memoizedState={dehydrated:T,treeContext:ea!==null?{id:hs,overflow:fs}:null,retryLane:536870912,hydrationErrors:null},D=Dn(18,null,null,0),D.stateNode=T,D.return=r,r.child=D,_n=r,vt=null,D=!0):D=!1}D||ra(r)}if(T=r.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return im(T)?r.lanes=32:r.lanes=536870912,null;ys(r)}return T=l.children,l=l.fallback,d?(Ys(),d=r.mode,T=ku({mode:"hidden",children:T},d),l=Zi(l,d,a,null),T.return=r,l.return=r,T.sibling=l,r.child=T,d=r.child,d.memoizedState=wf(a),d.childLanes=Tf(n,E,a),r.memoizedState=Ef,l):(Ks(r),bf(r,T))}if(D=n.memoizedState,D!==null&&(T=D.dehydrated,T!==null)){if(f)r.flags&256?(Ks(r),r.flags&=-257,r=Af(n,r,a)):r.memoizedState!==null?(Ys(),r.child=n.child,r.flags|=128,r=null):(Ys(),d=l.fallback,T=r.mode,l=ku({mode:"visible",children:l.children},T),d=Zi(d,T,a,null),d.flags|=2,l.return=r,d.return=r,l.sibling=d,r.child=l,to(r,n.child,null,a),l=r.child,l.memoizedState=wf(a),l.childLanes=Tf(n,E,a),r.memoizedState=Ef,r=d);else if(Ks(r),im(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var B=E.dgst;E=B,l=Error(i(419)),l.stack="",l.digest=E,ml({value:l,source:null,stack:null}),r=Af(n,r,a)}else if(Qt||gl(n,r,a,!1),E=(a&n.childLanes)!==0,Qt||E){if(E=dt,E!==null&&(l=a&-a,l=(l&42)!==0?1:me(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==D.retryLane))throw D.retryLane=l,Ga(n,l),Vn(E,n,l),Xy;T.data==="$?"||Bf(),r=Af(n,r,a)}else T.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=D.treeContext,vt=hr(T.nextSibling),_n=r,We=!0,na=null,Or=!1,n!==null&&(Wn[Jn++]=hs,Wn[Jn++]=fs,Wn[Jn++]=ea,hs=n.id,fs=n.overflow,ea=r),r=bf(r,l.children),r.flags|=4096);return r}return d?(Ys(),d=l.fallback,T=r.mode,D=n.child,B=D.sibling,l=ds(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,B!==null?d=ds(B,d):(d=Zi(d,T,a,null),d.flags|=2),d.return=r,l.return=r,l.sibling=d,r.child=l,l=d,d=r.child,T=n.child.memoizedState,T===null?T=wf(a):(D=T.cachePool,D!==null?(B=zt._currentValue,D=D.parent!==B?{parent:B,pool:B}:D):D=Gp(),T={baseLanes:T.baseLanes|a,cachePool:D}),d.memoizedState=T,d.childLanes=Tf(n,E,a),r.memoizedState=Ef,l):(Ks(r),a=n.child,n=a.sibling,a=ds(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,n!==null&&(E=r.deletions,E===null?(r.deletions=[n],r.flags|=16):E.push(n)),r.child=a,r.memoizedState=null,a)}function bf(n,r){return r=ku({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function ku(n,r){return n=Dn(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Af(n,r,a){return to(r,n.child,null,a),n=bf(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function i_(n,r,a){n.lanes|=r;var l=n.alternate;l!==null&&(l.lanes|=r),qh(n.return,r,a)}function Sf(n,r,a,l,d){var f=n.memoizedState;f===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=d)}function a_(n,r,a){var l=r.pendingProps,d=l.revealOrder,f=l.tail;if(Zt(n,r,l.children,a),l=qt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&i_(n,a,r);else if(n.tag===19)i_(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(oe(qt,l),d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&Du(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Sf(r,!1,d,a,f);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&Du(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Sf(r,!0,a,null,f);break;case"together":Sf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function _s(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Zs|=r.lanes,(a&r.childLanes)===0)if(n!==null){if(gl(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,a=ds(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=ds(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function xf(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&gu(n)))}function uA(n,r,a){switch(r.tag){case 3:nt(r,r.stateNode.containerInfo),Bs(r,zt,n.memoizedState.cache),fl();break;case 27:case 5:sr(r);break;case 4:nt(r,r.stateNode.containerInfo);break;case 10:Bs(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Ks(r),r.flags|=128,null):(a&r.child.childLanes)!==0?s_(n,r,a):(Ks(r),n=_s(n,r,a),n!==null?n.sibling:null);Ks(r);break;case 19:var d=(n.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(gl(n,r,a,!1),l=(a&r.childLanes)!==0),d){if(l)return a_(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),oe(qt,qt.current),l)break;return null;case 22:case 23:return r.lanes=0,Zy(n,r,a);case 24:Bs(r,zt,n.memoizedState.cache)}return _s(n,r,a)}function o_(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)Qt=!0;else{if(!xf(n,a)&&(r.flags&128)===0)return Qt=!1,uA(n,r,a);Qt=(n.flags&131072)!==0}else Qt=!1,We&&(r.flags&1048576)!==0&&jp(r,mu,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var l=r.elementType,d=l._init;if(l=d(l._payload),r.type=l,typeof l=="function")Mh(l)?(n=la(l,n),r.tag=1,r=n_(null,r,l,n,a)):(r.tag=0,r=vf(null,r,l,n,a));else{if(l!=null){if(d=l.$$typeof,d===fe){r.tag=11,r=$y(null,r,l,n,a);break e}else if(d===N){r.tag=14,r=Wy(null,r,l,n,a);break e}}throw r=Ie(l)||l,Error(i(306,r,""))}}return r;case 0:return vf(n,r,r.type,r.pendingProps,a);case 1:return l=r.type,d=la(l,r.pendingProps),n_(n,r,l,d,a);case 3:e:{if(nt(r,r.stateNode.containerInfo),n===null)throw Error(i(387));l=r.pendingProps;var f=r.memoizedState;d=f.element,Yh(n,r),Tl(r,l,null,a);var E=r.memoizedState;if(l=E.cache,Bs(r,zt,l),l!==f.cache&&Bh(r,[zt],a,!0),wl(),l=E.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=r_(n,r,l,a);break e}else if(l!==d){d=Xn(Error(i(424)),r),ml(d),r=r_(n,r,l,a);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(vt=hr(n.firstChild),_n=r,We=!0,na=null,Or=!0,a=Uy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(fl(),l===d){r=_s(n,r,a);break e}Zt(n,r,l,a)}r=r.child}return r;case 26:return Mu(n,r),n===null?(a=dv(r.type,null,r.pendingProps,null))?r.memoizedState=a:We||(a=r.type,n=r.pendingProps,l=Xu(Ae.current).createElement(a),l[jt]=r,l[Ct]=n,tn(l,a,n),At(l),r.stateNode=l):r.memoizedState=dv(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return sr(r),n===null&&We&&(l=r.stateNode=lv(r.type,r.pendingProps,Ae.current),_n=r,Or=!0,d=vt,ri(r.type)?(am=d,vt=hr(l.firstChild)):vt=d),Zt(n,r,r.pendingProps.children,a),Mu(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&We&&((d=l=vt)&&(l=LA(l,r.type,r.pendingProps,Or),l!==null?(r.stateNode=l,_n=r,vt=hr(l.firstChild),Or=!1,d=!0):d=!1),d||ra(r)),sr(r),d=r.type,f=r.pendingProps,E=n!==null?n.memoizedProps:null,l=f.children,nm(d,f)?l=null:E!==null&&nm(d,E)&&(r.flags|=32),r.memoizedState!==null&&(d=ef(n,r,nA,null,null,a),Gl._currentValue=d),Mu(n,r),Zt(n,r,l,a),r.child;case 6:return n===null&&We&&((n=a=vt)&&(a=UA(a,r.pendingProps,Or),a!==null?(r.stateNode=a,_n=r,vt=null,n=!0):n=!1),n||ra(r)),null;case 13:return s_(n,r,a);case 4:return nt(r,r.stateNode.containerInfo),l=r.pendingProps,n===null?r.child=to(r,null,l,a):Zt(n,r,l,a),r.child;case 11:return $y(n,r,r.type,r.pendingProps,a);case 7:return Zt(n,r,r.pendingProps,a),r.child;case 8:return Zt(n,r,r.pendingProps.children,a),r.child;case 12:return Zt(n,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Bs(r,r.type,l.value),Zt(n,r,l.children,a),r.child;case 9:return d=r.type._context,l=r.pendingProps.children,ia(r),d=an(d),l=l(d),r.flags|=1,Zt(n,r,l,a),r.child;case 14:return Wy(n,r,r.type,r.pendingProps,a);case 15:return Jy(n,r,r.type,r.pendingProps,a);case 19:return a_(n,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},n===null?(a=ku(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=ds(n.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return Zy(n,r,a);case 24:return ia(r),l=an(zt),n===null?(d=Fh(),d===null&&(d=dt,f=Hh(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),r.memoizedState={parent:l,cache:d},Kh(r),Bs(r,zt,d)):((n.lanes&a)!==0&&(Yh(n,r),Tl(r,null,null,a),wl()),d=n.memoizedState,f=r.memoizedState,d.parent!==l?(d={parent:l,cache:l},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Bs(r,zt,l)):(l=f.cache,Bs(r,zt,l),l!==d.cache&&Bh(r,[zt],a,!0))),Zt(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function vs(n){n.flags|=4}function l_(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!pv(r)){if(r=Zn.current,r!==null&&((Ge&4194048)===Ge?Pr!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||r!==Pr))throw vl=Qh,Fp;n.flags|=8192}}function Vu(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?ki():536870912,n.lanes|=r,io|=r)}function Cl(n,r){if(!We)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function pt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=l,n.childLanes=a,r}function dA(n,r,a){var l=r.pendingProps;switch(Lh(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(r),null;case 1:return pt(r),null;case 3:return a=r.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),gs(zt),qn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(hl(r)?vs(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,zp())),pt(r),null;case 26:return a=r.memoizedState,n===null?(vs(r),a!==null?(pt(r),l_(r,a)):(pt(r),r.flags&=-16777217)):a?a!==n.memoizedState?(vs(r),pt(r),l_(r,a)):(pt(r),r.flags&=-16777217):(n.memoizedProps!==l&&vs(r),pt(r),r.flags&=-16777217),null;case 27:_r(r),a=Ae.current;var d=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==l&&vs(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return pt(r),null}n=_e.current,hl(r)?Lp(r):(n=lv(d,l,a),r.stateNode=n,vs(r))}return pt(r),null;case 5:if(_r(r),a=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&vs(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return pt(r),null}if(n=_e.current,hl(r))Lp(r);else{switch(d=Xu(Ae.current),n){case 1:n=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=d.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}n[jt]=r,n[Ct]=l;e:for(d=r.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break e;for(;d.sibling===null;){if(d.return===null||d.return===r)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}r.stateNode=n;e:switch(tn(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&vs(r)}}return pt(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==l&&vs(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(n=Ae.current,hl(r)){if(n=r.stateNode,a=r.memoizedProps,l=null,d=_n,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}n[jt]=r,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||tv(n.nodeValue,a)),n||ra(r)}else n=Xu(n).createTextNode(l),n[jt]=r,r.stateNode=n}return pt(r),null;case 13:if(l=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=hl(r),l!==null&&l.dehydrated!==null){if(n===null){if(!d)throw Error(i(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[jt]=r}else fl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pt(r),d=!1}else d=zp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(ys(r),r):(ys(r),null)}if(ys(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=r.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)}return a!==n&&a&&(r.child.flags|=8192),Vu(r,r.updateQueue),pt(r),null;case 4:return qn(),n===null&&Wf(r.stateNode.containerInfo),pt(r),null;case 10:return gs(r.type),pt(r),null;case 19:if(le(qt),d=r.memoizedState,d===null)return pt(r),null;if(l=(r.flags&128)!==0,f=d.rendering,f===null)if(l)Cl(d,!1);else{if(Et!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(f=Du(n),f!==null){for(r.flags|=128,Cl(d,!1),n=f.updateQueue,r.updateQueue=n,Vu(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)Vp(a,n),a=a.sibling;return oe(qt,qt.current&1|2),r.child}n=n.sibling}d.tail!==null&&wn()>Uu&&(r.flags|=128,l=!0,Cl(d,!1),r.lanes=4194304)}else{if(!l)if(n=Du(f),n!==null){if(r.flags|=128,l=!0,n=n.updateQueue,r.updateQueue=n,Vu(r,n),Cl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!We)return pt(r),null}else 2*wn()-d.renderingStartTime>Uu&&a!==536870912&&(r.flags|=128,l=!0,Cl(d,!1),r.lanes=4194304);d.isBackwards?(f.sibling=r.child,r.child=f):(n=d.last,n!==null?n.sibling=f:r.child=f,d.last=f)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=wn(),r.sibling=null,n=qt.current,oe(qt,l?n&1|2:n&1),r):(pt(r),null);case 22:case 23:return ys(r),Jh(),l=r.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(pt(r),r.subtreeFlags&6&&(r.flags|=8192)):pt(r),a=r.updateQueue,a!==null&&Vu(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),n!==null&&le(aa),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),gs(zt),pt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function hA(n,r){switch(Lh(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return gs(zt),qn(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return _r(r),null;case 13:if(ys(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));fl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return le(qt),null;case 4:return qn(),null;case 10:return gs(r.type),null;case 22:case 23:return ys(r),Jh(),n!==null&&le(aa),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return gs(zt),null;case 25:return null;default:return null}}function c_(n,r){switch(Lh(r),r.tag){case 3:gs(zt),qn();break;case 26:case 27:case 5:_r(r);break;case 4:qn();break;case 13:ys(r);break;case 19:le(qt);break;case 10:gs(r.type);break;case 22:case 23:ys(r),Jh(),n!==null&&le(aa);break;case 24:gs(zt)}}function Nl(n,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&n)===n){l=void 0;var f=a.create,E=a.inst;l=f(),E.destroy=l}a=a.next}while(a!==d)}}catch(T){ut(r,r.return,T)}}function Xs(n,r,a){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&n)===n){var E=l.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,d=r;var D=a,B=T;try{B()}catch(W){ut(d,D,W)}}}l=l.next}while(l!==f)}}catch(W){ut(r,r.return,W)}}function u_(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{Wp(r,a)}catch(l){ut(n,n.return,l)}}}function d_(n,r,a){a.props=la(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){ut(n,r,l)}}function Dl(n,r){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(d){ut(n,r,d)}}function Mr(n,r){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){ut(n,r,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){ut(n,r,d)}else a.current=null}function h_(n){var r=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){ut(n,n.return,d)}}function Rf(n,r,a){try{var l=n.stateNode;PA(l,n.type,a,r),l[Ct]=r}catch(d){ut(n,n.return,d)}}function f_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ri(n.type)||n.tag===4}function If(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||f_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ri(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Cf(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(n),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Yu));else if(l!==4&&(l===27&&ri(n.type)&&(a=n.stateNode,r=null),n=n.child,n!==null))for(Cf(n,r,a),n=n.sibling;n!==null;)Cf(n,r,a),n=n.sibling}function ju(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(l!==4&&(l===27&&ri(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(ju(n,r,a),n=n.sibling;n!==null;)ju(n,r,a),n=n.sibling}function m_(n){var r=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);tn(r,l,a),r[jt]=n,r[Ct]=a}catch(f){ut(n,n.return,f)}}var Es=!1,xt=!1,Nf=!1,g_=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function fA(n,r){if(n=n.containerInfo,em=td,n=xp(n),Rh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var E=0,T=-1,D=-1,B=0,W=0,ee=n,H=null;t:for(;;){for(var G;ee!==a||d!==0&&ee.nodeType!==3||(T=E+d),ee!==f||l!==0&&ee.nodeType!==3||(D=E+l),ee.nodeType===3&&(E+=ee.nodeValue.length),(G=ee.firstChild)!==null;)H=ee,ee=G;for(;;){if(ee===n)break t;if(H===a&&++B===d&&(T=E),H===f&&++W===l&&(D=E),(G=ee.nextSibling)!==null)break;ee=H,H=ee.parentNode}ee=G}a=T===-1||D===-1?null:{start:T,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(tm={focusedElem:n,selectionRange:a},td=!1,Kt=r;Kt!==null;)if(r=Kt,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,Kt=n;else for(;Kt!==null;){switch(r=Kt,f=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&f!==null){n=void 0,a=r,d=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Re=la(a.type,d,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(Re,f),l.__reactInternalSnapshotBeforeUpdate=n}catch(Te){ut(a,a.return,Te)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)sm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":sm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Kt=n;break}Kt=r.return}}function p_(n,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:$s(n,a),l&4&&Nl(5,a);break;case 1:if($s(n,a),l&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(E){ut(a,a.return,E)}else{var d=la(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(d,r,n.__reactInternalSnapshotBeforeUpdate)}catch(E){ut(a,a.return,E)}}l&64&&u_(a),l&512&&Dl(a,a.return);break;case 3:if($s(n,a),l&64&&(n=a.updateQueue,n!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Wp(n,r)}catch(E){ut(a,a.return,E)}}break;case 27:r===null&&l&4&&m_(a);case 26:case 5:$s(n,a),r===null&&l&4&&h_(a),l&512&&Dl(a,a.return);break;case 12:$s(n,a);break;case 13:$s(n,a),l&4&&v_(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=TA.bind(null,a),zA(n,a))));break;case 22:if(l=a.memoizedState!==null||Es,!l){r=r!==null&&r.memoizedState!==null||xt,d=Es;var f=xt;Es=l,(xt=r)&&!f?Ws(n,a,(a.subtreeFlags&8772)!==0):$s(n,a),Es=d,xt=f}break;case 30:break;default:$s(n,a)}}function y_(n){var r=n.alternate;r!==null&&(n.alternate=null,y_(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Ls(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ft=null,bn=!1;function ws(n,r,a){for(a=a.child;a!==null;)__(n,r,a),a=a.sibling}function __(n,r,a){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(ht,a)}catch{}switch(a.tag){case 26:xt||Mr(a,r),ws(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:xt||Mr(a,r);var l=ft,d=bn;ri(a.type)&&(ft=a.stateNode,bn=!1),ws(n,r,a),zl(a.stateNode),ft=l,bn=d;break;case 5:xt||Mr(a,r);case 6:if(l=ft,d=bn,ft=null,ws(n,r,a),ft=l,bn=d,ft!==null)if(bn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(a.stateNode)}catch(f){ut(a,r,f)}else try{ft.removeChild(a.stateNode)}catch(f){ut(a,r,f)}break;case 18:ft!==null&&(bn?(n=ft,av(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Yl(n)):av(ft,a.stateNode));break;case 4:l=ft,d=bn,ft=a.stateNode.containerInfo,bn=!0,ws(n,r,a),ft=l,bn=d;break;case 0:case 11:case 14:case 15:xt||Xs(2,a,r),xt||Xs(4,a,r),ws(n,r,a);break;case 1:xt||(Mr(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&d_(a,r,l)),ws(n,r,a);break;case 21:ws(n,r,a);break;case 22:xt=(l=xt)||a.memoizedState!==null,ws(n,r,a),xt=l;break;default:ws(n,r,a)}}function v_(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Yl(n)}catch(a){ut(r,r.return,a)}}function mA(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new g_),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new g_),r;default:throw Error(i(435,n.tag))}}function Df(n,r){var a=mA(n);r.forEach(function(l){var d=bA.bind(null,n,l);a.has(l)||(a.add(l),l.then(d,d))})}function On(n,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],f=n,E=r,T=E;e:for(;T!==null;){switch(T.tag){case 27:if(ri(T.type)){ft=T.stateNode,bn=!1;break e}break;case 5:ft=T.stateNode,bn=!1;break e;case 3:case 4:ft=T.stateNode.containerInfo,bn=!0;break e}T=T.return}if(ft===null)throw Error(i(160));__(f,E,d),ft=null,bn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)E_(r,n),r=r.sibling}var dr=null;function E_(n,r){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:On(r,n),Pn(n),l&4&&(Xs(3,n,n.return),Nl(3,n),Xs(5,n,n.return));break;case 1:On(r,n),Pn(n),l&512&&(xt||a===null||Mr(a,a.return)),l&64&&Es&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=dr;if(On(r,n),Pn(n),l&512&&(xt||a===null||Mr(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[ji]||f[jt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),tn(f,l,a),f[jt]=n,At(f),l=f;break e;case"link":var E=mv("link","href",d).get(l+(a.href||""));if(E){for(var T=0;T<E.length;T++)if(f=E[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(T,1);break t}}f=d.createElement(l),tn(f,l,a),d.head.appendChild(f);break;case"meta":if(E=mv("meta","content",d).get(l+(a.content||""))){for(T=0;T<E.length;T++)if(f=E[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(T,1);break t}}f=d.createElement(l),tn(f,l,a),d.head.appendChild(f);break;default:throw Error(i(468,l))}f[jt]=n,At(f),l=f}n.stateNode=l}else gv(d,n.type,n.stateNode);else n.stateNode=fv(d,l,n.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?gv(d,n.type,n.stateNode):fv(d,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Rf(n,n.memoizedProps,a.memoizedProps)}break;case 27:On(r,n),Pn(n),l&512&&(xt||a===null||Mr(a,a.return)),a!==null&&l&4&&Rf(n,n.memoizedProps,a.memoizedProps);break;case 5:if(On(r,n),Pn(n),l&512&&(xt||a===null||Mr(a,a.return)),n.flags&32){d=n.stateNode;try{Fn(d,"")}catch(G){ut(n,n.return,G)}}l&4&&n.stateNode!=null&&(d=n.memoizedProps,Rf(n,d,a!==null?a.memoizedProps:d)),l&1024&&(Nf=!0);break;case 6:if(On(r,n),Pn(n),l&4){if(n.stateNode===null)throw Error(i(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(G){ut(n,n.return,G)}}break;case 3:if(Ju=null,d=dr,dr=$u(r.containerInfo),On(r,n),dr=d,Pn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Yl(r.containerInfo)}catch(G){ut(n,n.return,G)}Nf&&(Nf=!1,w_(n));break;case 4:l=dr,dr=$u(n.stateNode.containerInfo),On(r,n),Pn(n),dr=l;break;case 12:On(r,n),Pn(n);break;case 13:On(r,n),Pn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(jf=wn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Df(n,l)));break;case 22:d=n.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,B=Es,W=xt;if(Es=B||d,xt=W||D,On(r,n),xt=W,Es=B,Pn(n),l&8192)e:for(r=n.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(a===null||D||Es||xt||ca(n)),a=null,r=n;;){if(r.tag===5||r.tag===26){if(a===null){D=a=r;try{if(f=D.stateNode,d)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=D.stateNode;var ee=D.memoizedProps.style,H=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;T.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(G){ut(D,D.return,G)}}}else if(r.tag===6){if(a===null){D=r;try{D.stateNode.nodeValue=d?"":D.memoizedProps}catch(G){ut(D,D.return,G)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Df(n,a))));break;case 19:On(r,n),Pn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Df(n,l)));break;case 30:break;case 21:break;default:On(r,n),Pn(n)}}function Pn(n){var r=n.flags;if(r&2){try{for(var a,l=n.return;l!==null;){if(f_(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,f=If(n);ju(n,f,d);break;case 5:var E=a.stateNode;a.flags&32&&(Fn(E,""),a.flags&=-33);var T=If(n);ju(n,T,E);break;case 3:case 4:var D=a.stateNode.containerInfo,B=If(n);Cf(n,B,D);break;default:throw Error(i(161))}}catch(W){ut(n,n.return,W)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function w_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;w_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function $s(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)p_(n,r.alternate,r),r=r.sibling}function ca(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Xs(4,r,r.return),ca(r);break;case 1:Mr(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&d_(r,r.return,a),ca(r);break;case 27:zl(r.stateNode);case 26:case 5:Mr(r,r.return),ca(r);break;case 22:r.memoizedState===null&&ca(r);break;case 30:ca(r);break;default:ca(r)}n=n.sibling}}function Ws(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,d=n,f=r,E=f.flags;switch(f.tag){case 0:case 11:case 15:Ws(d,f,a),Nl(4,f);break;case 1:if(Ws(d,f,a),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(B){ut(l,l.return,B)}if(l=f,d=l.updateQueue,d!==null){var T=l.stateNode;try{var D=d.shared.hiddenCallbacks;if(D!==null)for(d.shared.hiddenCallbacks=null,d=0;d<D.length;d++)$p(D[d],T)}catch(B){ut(l,l.return,B)}}a&&E&64&&u_(f),Dl(f,f.return);break;case 27:m_(f);case 26:case 5:Ws(d,f,a),a&&l===null&&E&4&&h_(f),Dl(f,f.return);break;case 12:Ws(d,f,a);break;case 13:Ws(d,f,a),a&&E&4&&v_(d,f);break;case 22:f.memoizedState===null&&Ws(d,f,a),Dl(f,f.return);break;case 30:break;default:Ws(d,f,a)}r=r.sibling}}function Of(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&pl(a))}function Pf(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&pl(n))}function kr(n,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)T_(n,r,a,l),r=r.sibling}function T_(n,r,a,l){var d=r.flags;switch(r.tag){case 0:case 11:case 15:kr(n,r,a,l),d&2048&&Nl(9,r);break;case 1:kr(n,r,a,l);break;case 3:kr(n,r,a,l),d&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&pl(n)));break;case 12:if(d&2048){kr(n,r,a,l),n=r.stateNode;try{var f=r.memoizedProps,E=f.id,T=f.onPostCommit;typeof T=="function"&&T(E,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){ut(r,r.return,D)}}else kr(n,r,a,l);break;case 13:kr(n,r,a,l);break;case 23:break;case 22:f=r.stateNode,E=r.alternate,r.memoizedState!==null?f._visibility&2?kr(n,r,a,l):Ol(n,r):f._visibility&2?kr(n,r,a,l):(f._visibility|=2,no(n,r,a,l,(r.subtreeFlags&10256)!==0)),d&2048&&Of(E,r);break;case 24:kr(n,r,a,l),d&2048&&Pf(r.alternate,r);break;default:kr(n,r,a,l)}}function no(n,r,a,l,d){for(d=d&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var f=n,E=r,T=a,D=l,B=E.flags;switch(E.tag){case 0:case 11:case 15:no(f,E,T,D,d),Nl(8,E);break;case 23:break;case 22:var W=E.stateNode;E.memoizedState!==null?W._visibility&2?no(f,E,T,D,d):Ol(f,E):(W._visibility|=2,no(f,E,T,D,d)),d&&B&2048&&Of(E.alternate,E);break;case 24:no(f,E,T,D,d),d&&B&2048&&Pf(E.alternate,E);break;default:no(f,E,T,D,d)}r=r.sibling}}function Ol(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,l=r,d=l.flags;switch(l.tag){case 22:Ol(a,l),d&2048&&Of(l.alternate,l);break;case 24:Ol(a,l),d&2048&&Pf(l.alternate,l);break;default:Ol(a,l)}r=r.sibling}}var Pl=8192;function ro(n){if(n.subtreeFlags&Pl)for(n=n.child;n!==null;)b_(n),n=n.sibling}function b_(n){switch(n.tag){case 26:ro(n),n.flags&Pl&&n.memoizedState!==null&&ZA(dr,n.memoizedState,n.memoizedProps);break;case 5:ro(n);break;case 3:case 4:var r=dr;dr=$u(n.stateNode.containerInfo),ro(n),dr=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=Pl,Pl=16777216,ro(n),Pl=r):ro(n));break;default:ro(n)}}function A_(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Ml(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Kt=l,x_(l,n)}A_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)S_(n),n=n.sibling}function S_(n){switch(n.tag){case 0:case 11:case 15:Ml(n),n.flags&2048&&Xs(9,n,n.return);break;case 3:Ml(n);break;case 12:Ml(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Lu(n)):Ml(n);break;default:Ml(n)}}function Lu(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Kt=l,x_(l,n)}A_(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Xs(8,r,r.return),Lu(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Lu(r));break;default:Lu(r)}n=n.sibling}}function x_(n,r){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:Xs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:pl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Kt=l;else e:for(a=n;Kt!==null;){l=Kt;var d=l.sibling,f=l.return;if(y_(l),l===a){Kt=null;break e}if(d!==null){d.return=f,Kt=d;break e}Kt=f}}}var gA={getCacheForType:function(n){var r=an(zt),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a}},pA=typeof WeakMap=="function"?WeakMap:Map,rt=0,dt=null,je=null,Ge=0,st=0,Mn=null,Js=!1,so=!1,Mf=!1,Ts=0,Et=0,Zs=0,ua=0,kf=0,er=0,io=0,kl=null,An=null,Vf=!1,jf=0,Uu=1/0,zu=null,ei=null,en=0,ti=null,ao=null,oo=0,Lf=0,Uf=null,R_=null,Vl=0,zf=null;function kn(){if((rt&2)!==0&&Ge!==0)return Ge&-Ge;if(Q.T!==null){var n=Ya;return n!==0?n:Kf()}return Hn()}function I_(){er===0&&(er=(Ge&536870912)===0||We?Mi():536870912);var n=Zn.current;return n!==null&&(n.flags|=32),er}function Vn(n,r,a){(n===dt&&(st===2||st===9)||n.cancelPendingCommit!==null)&&(lo(n,0),ni(n,Ge,er,!1)),ar(n,a),((rt&2)===0||n!==dt)&&(n===dt&&((rt&2)===0&&(ua|=a),Et===4&&ni(n,Ge,er,!1)),Vr(n))}function C_(n,r,a){if((rt&6)!==0)throw Error(i(327));var l=!a&&(r&124)===0&&(r&n.expiredLanes)===0||Zr(n,r),d=l?vA(n,r):Hf(n,r,!0),f=l;do{if(d===0){so&&!l&&ni(n,r,0,!1);break}else{if(a=n.current.alternate,f&&!yA(a)){d=Hf(n,r,!1),f=!1;continue}if(d===2){if(f=r,n.errorRecoveryDisabledLanes&f)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var T=n;d=kl;var D=T.current.memoizedState.isDehydrated;if(D&&(lo(T,E).flags|=256),E=Hf(T,E,!1),E!==2){if(Mf&&!D){T.errorRecoveryDisabledLanes|=f,ua|=f,d=4;break e}f=An,An=d,f!==null&&(An===null?An=f:An.push.apply(An,f))}d=E}if(f=!1,d!==2)continue}}if(d===1){lo(n,0),ni(n,r,0,!0);break}e:{switch(l=n,f=d,f){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ni(l,r,er,!Js);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(d=jf+300-wn(),10<d)){if(ni(l,r,er,!Js),Jr(l,0,!0)!==0)break e;l.timeoutHandle=sv(N_.bind(null,l,a,An,zu,Vf,r,er,ua,io,Js,f,2,-0,0),d);break e}N_(l,a,An,zu,Vf,r,er,ua,io,Js,f,0,-0,0)}}break}while(!0);Vr(n)}function N_(n,r,a,l,d,f,E,T,D,B,W,ee,H,G){if(n.timeoutHandle=-1,ee=r.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(Hl={stylesheets:null,count:0,unsuspend:JA},b_(r),ee=eS(),ee!==null)){n.cancelPendingCommit=ee(j_.bind(null,n,r,f,a,l,d,E,T,D,W,1,H,G)),ni(n,f,E,!B);return}j_(n,r,f,a,l,d,E,T,D)}function yA(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],f=d.getSnapshot;d=d.value;try{if(!Nn(f(),d))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ni(n,r,a,l){r&=~kf,r&=~ua,n.suspendedLanes|=r,n.pingedLanes&=~r,l&&(n.warmLanes|=r),l=n.expirationTimes;for(var d=r;0<d;){var f=31-Ht(d),E=1<<f;l[f]=-1,d&=~E}a!==0&&Bn(n,a,r)}function qu(){return(rt&6)===0?(jl(0),!1):!0}function qf(){if(je!==null){if(st===0)var n=je.return;else n=je,ms=sa=null,rf(n),eo=null,Rl=0,n=je;for(;n!==null;)c_(n.alternate,n),n=n.return;je=null}}function lo(n,r){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,kA(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),qf(),dt=n,je=a=ds(n.current,null),Ge=r,st=0,Mn=null,Js=!1,so=Zr(n,r),Mf=!1,io=er=kf=ua=Zs=Et=0,An=kl=null,Vf=!1,(r&8)!==0&&(r|=r&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=r;0<l;){var d=31-Ht(l),f=1<<d;r|=n[d],l&=~f}return Ts=r,cu(),a}function D_(n,r){ke=null,Q.H=Iu,r===_l||r===_u?(r=Yp(),st=3):r===Fp?(r=Yp(),st=4):st=r===Xy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Mn=r,je===null&&(Et=1,Pu(n,Xn(r,n.current)))}function O_(){var n=Q.H;return Q.H=Iu,n===null?Iu:n}function P_(){var n=Q.A;return Q.A=gA,n}function Bf(){Et=4,Js||(Ge&4194048)!==Ge&&Zn.current!==null||(so=!0),(Zs&134217727)===0&&(ua&134217727)===0||dt===null||ni(dt,Ge,er,!1)}function Hf(n,r,a){var l=rt;rt|=2;var d=O_(),f=P_();(dt!==n||Ge!==r)&&(zu=null,lo(n,r)),r=!1;var E=Et;e:do try{if(st!==0&&je!==null){var T=je,D=Mn;switch(st){case 8:qf(),E=6;break e;case 3:case 2:case 9:case 6:Zn.current===null&&(r=!0);var B=st;if(st=0,Mn=null,co(n,T,D,B),a&&so){E=0;break e}break;default:B=st,st=0,Mn=null,co(n,T,D,B)}}_A(),E=Et;break}catch(W){D_(n,W)}while(!0);return r&&n.shellSuspendCounter++,ms=sa=null,rt=l,Q.H=d,Q.A=f,je===null&&(dt=null,Ge=0,cu()),E}function _A(){for(;je!==null;)M_(je)}function vA(n,r){var a=rt;rt|=2;var l=O_(),d=P_();dt!==n||Ge!==r?(zu=null,Uu=wn()+500,lo(n,r)):so=Zr(n,r);e:do try{if(st!==0&&je!==null){r=je;var f=Mn;t:switch(st){case 1:st=0,Mn=null,co(n,r,f,1);break;case 2:case 9:if(Qp(f)){st=0,Mn=null,k_(r);break}r=function(){st!==2&&st!==9||dt!==n||(st=7),Vr(n)},f.then(r,r);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:Qp(f)?(st=0,Mn=null,k_(r)):(st=0,Mn=null,co(n,r,f,7));break;case 5:var E=null;switch(je.tag){case 26:E=je.memoizedState;case 5:case 27:var T=je;if(!E||pv(E)){st=0,Mn=null;var D=T.sibling;if(D!==null)je=D;else{var B=T.return;B!==null?(je=B,Bu(B)):je=null}break t}}st=0,Mn=null,co(n,r,f,5);break;case 6:st=0,Mn=null,co(n,r,f,6);break;case 8:qf(),Et=6;break e;default:throw Error(i(462))}}EA();break}catch(W){D_(n,W)}while(!0);return ms=sa=null,Q.H=l,Q.A=d,rt=a,je!==null?0:(dt=null,Ge=0,cu(),Et)}function EA(){for(;je!==null&&!Kr();)M_(je)}function M_(n){var r=o_(n.alternate,n,Ts);n.memoizedProps=n.pendingProps,r===null?Bu(n):je=r}function k_(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=t_(a,r,r.pendingProps,r.type,void 0,Ge);break;case 11:r=t_(a,r,r.pendingProps,r.type.render,r.ref,Ge);break;case 5:rf(r);default:c_(a,r),r=je=Vp(r,Ts),r=o_(a,r,Ts)}n.memoizedProps=n.pendingProps,r===null?Bu(n):je=r}function co(n,r,a,l){ms=sa=null,rf(r),eo=null,Rl=0;var d=r.return;try{if(cA(n,d,r,a,Ge)){Et=1,Pu(n,Xn(a,n.current)),je=null;return}}catch(f){if(d!==null)throw je=d,f;Et=1,Pu(n,Xn(a,n.current)),je=null;return}r.flags&32768?(We||l===1?n=!0:so||(Ge&536870912)!==0?n=!1:(Js=n=!0,(l===2||l===9||l===3||l===6)&&(l=Zn.current,l!==null&&l.tag===13&&(l.flags|=16384))),V_(r,n)):Bu(r)}function Bu(n){var r=n;do{if((r.flags&32768)!==0){V_(r,Js);return}n=r.return;var a=dA(r.alternate,r,Ts);if(a!==null){je=a;return}if(r=r.sibling,r!==null){je=r;return}je=r=n}while(r!==null);Et===0&&(Et=5)}function V_(n,r){do{var a=hA(n.alternate,n);if(a!==null){a.flags&=32767,je=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){je=n;return}je=n=a}while(n!==null);Et=6,je=null}function j_(n,r,a,l,d,f,E,T,D){n.cancelPendingCommit=null;do Hu();while(en!==0);if((rt&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(f=r.lanes|r.childLanes,f|=Oh,Vi(n,a,f,E,T,D),n===dt&&(je=dt=null,Ge=0),ao=r,ti=n,oo=a,Lf=f,Uf=d,R_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,AA(Xr,function(){return B_(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,d=ae.p,ae.p=2,E=rt,rt|=4;try{fA(n,r,a)}finally{rt=E,ae.p=d,Q.T=l}}en=1,L_(),U_(),z_()}}function L_(){if(en===1){en=0;var n=ti,r=ao,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=ae.p;ae.p=2;var d=rt;rt|=4;try{E_(r,n);var f=tm,E=xp(n.containerInfo),T=f.focusedElem,D=f.selectionRange;if(E!==T&&T&&T.ownerDocument&&Sp(T.ownerDocument.documentElement,T)){if(D!==null&&Rh(T)){var B=D.start,W=D.end;if(W===void 0&&(W=B),"selectionStart"in T)T.selectionStart=B,T.selectionEnd=Math.min(W,T.value.length);else{var ee=T.ownerDocument||document,H=ee&&ee.defaultView||window;if(H.getSelection){var G=H.getSelection(),Re=T.textContent.length,Te=Math.min(D.start,Re),lt=D.end===void 0?Te:Math.min(D.end,Re);!G.extend&&Te>lt&&(E=lt,lt=Te,Te=E);var L=Ap(T,Te),k=Ap(T,lt);if(L&&k&&(G.rangeCount!==1||G.anchorNode!==L.node||G.anchorOffset!==L.offset||G.focusNode!==k.node||G.focusOffset!==k.offset)){var q=ee.createRange();q.setStart(L.node,L.offset),G.removeAllRanges(),Te>lt?(G.addRange(q),G.extend(k.node,k.offset)):(q.setEnd(k.node,k.offset),G.addRange(q))}}}}for(ee=[],G=T;G=G.parentNode;)G.nodeType===1&&ee.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ee.length;T++){var Z=ee[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}td=!!em,tm=em=null}finally{rt=d,ae.p=l,Q.T=a}}n.current=r,en=2}}function U_(){if(en===2){en=0;var n=ti,r=ao,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=ae.p;ae.p=2;var d=rt;rt|=4;try{p_(n,r.alternate,r)}finally{rt=d,ae.p=l,Q.T=a}}en=3}}function z_(){if(en===4||en===3){en=0,Aa();var n=ti,r=ao,a=oo,l=R_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?en=5:(en=0,ao=ti=null,q_(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(ei=null),_t(a),r=r.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(ht,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=Q.T,d=ae.p,ae.p=2,Q.T=null;try{for(var f=n.onRecoverableError,E=0;E<l.length;E++){var T=l[E];f(T.value,{componentStack:T.stack})}}finally{Q.T=r,ae.p=d}}(oo&3)!==0&&Hu(),Vr(n),d=n.pendingLanes,(a&4194090)!==0&&(d&42)!==0?n===zf?Vl++:(Vl=0,zf=n):Vl=0,jl(0)}}function q_(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,pl(r)))}function Hu(n){return L_(),U_(),z_(),B_()}function B_(){if(en!==5)return!1;var n=ti,r=Lf;Lf=0;var a=_t(oo),l=Q.T,d=ae.p;try{ae.p=32>a?32:a,Q.T=null,a=Uf,Uf=null;var f=ti,E=oo;if(en=0,ao=ti=null,oo=0,(rt&6)!==0)throw Error(i(331));var T=rt;if(rt|=4,S_(f.current),T_(f,f.current,E,a),rt=T,jl(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(ht,f)}catch{}return!0}finally{ae.p=d,Q.T=l,q_(n,r)}}function H_(n,r,a){r=Xn(a,r),r=_f(n.stateNode,r,2),n=Fs(n,r,2),n!==null&&(ar(n,2),Vr(n))}function ut(n,r,a){if(n.tag===3)H_(n,n,a);else for(;r!==null;){if(r.tag===3){H_(r,n,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ei===null||!ei.has(l))){n=Xn(a,n),a=Ky(2),l=Fs(r,a,2),l!==null&&(Yy(a,l,r,n),ar(l,2),Vr(l));break}}r=r.return}}function Gf(n,r,a){var l=n.pingCache;if(l===null){l=n.pingCache=new pA;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(a)||(Mf=!0,d.add(a),n=wA.bind(null,n,r,a),r.then(n,n))}function wA(n,r,a){var l=n.pingCache;l!==null&&l.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,dt===n&&(Ge&a)===a&&(Et===4||Et===3&&(Ge&62914560)===Ge&&300>wn()-jf?(rt&2)===0&&lo(n,0):kf|=a,io===Ge&&(io=0)),Vr(n)}function G_(n,r){r===0&&(r=ki()),n=Ga(n,r),n!==null&&(ar(n,r),Vr(n))}function TA(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),G_(n,a)}function bA(n,r){var a=0;switch(n.tag){case 13:var l=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),G_(n,a)}function AA(n,r){return vr(n,r)}var Gu=null,uo=null,Ff=!1,Fu=!1,Qf=!1,da=0;function Vr(n){n!==uo&&n.next===null&&(uo===null?Gu=uo=n:uo=uo.next=n),Fu=!0,Ff||(Ff=!0,xA())}function jl(n,r){if(!Qf&&Fu){Qf=!0;do for(var a=!1,l=Gu;l!==null;){if(n!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var E=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-Ht(42|n)+1)-1,f&=d&~(E&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Y_(l,f))}else f=Ge,f=Jr(l,l===dt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Zr(l,f)||(a=!0,Y_(l,f));l=l.next}while(a);Qf=!1}}function SA(){F_()}function F_(){Fu=Ff=!1;var n=0;da!==0&&(MA()&&(n=da),da=0);for(var r=wn(),a=null,l=Gu;l!==null;){var d=l.next,f=Q_(l,r);f===0?(l.next=null,a===null?Gu=d:a.next=d,d===null&&(uo=a)):(a=l,(n!==0||(f&3)!==0)&&(Fu=!0)),l=d}jl(n)}function Q_(n,r){for(var a=n.suspendedLanes,l=n.pingedLanes,d=n.expirationTimes,f=n.pendingLanes&-62914561;0<f;){var E=31-Ht(f),T=1<<E,D=d[E];D===-1?((T&a)===0||(T&l)!==0)&&(d[E]=es(T,r)):D<=r&&(n.expiredLanes|=T),f&=~T}if(r=dt,a=Ge,a=Jr(n,n===r?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===r&&(st===2||st===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Er(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Zr(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(l!==null&&Er(l),_t(a)){case 2:case 8:a=Yr;break;case 32:a=Xr;break;case 268435456:a=Vs;break;default:a=Xr}return l=K_.bind(null,n),a=vr(a,l),n.callbackPriority=r,n.callbackNode=a,r}return l!==null&&l!==null&&Er(l),n.callbackPriority=2,n.callbackNode=null,2}function K_(n,r){if(en!==0&&en!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Hu()&&n.callbackNode!==a)return null;var l=Ge;return l=Jr(n,n===dt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(C_(n,l,r),Q_(n,wn()),n.callbackNode!=null&&n.callbackNode===a?K_.bind(null,n):null)}function Y_(n,r){if(Hu())return null;C_(n,r,!0)}function xA(){VA(function(){(rt&6)!==0?vr(Oi,SA):F_()})}function Kf(){return da===0&&(da=Mi()),da}function X_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Oa(""+n)}function $_(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function RA(n,r,a,l,d){if(r==="submit"&&a&&a.stateNode===d){var f=X_((d[Ct]||null).action),E=l.submitter;E&&(r=(r=E[Ct]||null)?X_(r.formAction):E.getAttribute("formAction"),r!==null&&(f=r,E=null));var T=new Pa("action","action",null,l,d);n.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(da!==0){var D=E?$_(d,E):new FormData(d);ff(a,{pending:!0,data:D,method:d.method,action:f},null,D)}}else typeof f=="function"&&(T.preventDefault(),D=E?$_(d,E):new FormData(d),ff(a,{pending:!0,data:D,method:d.method,action:f},f,D))},currentTarget:d}]})}}for(var Yf=0;Yf<Dh.length;Yf++){var Xf=Dh[Yf],IA=Xf.toLowerCase(),CA=Xf[0].toUpperCase()+Xf.slice(1);ur(IA,"on"+CA)}ur(Cp,"onAnimationEnd"),ur(Np,"onAnimationIteration"),ur(Dp,"onAnimationStart"),ur("dblclick","onDoubleClick"),ur("focusin","onFocus"),ur("focusout","onBlur"),ur(Qb,"onTransitionRun"),ur(Kb,"onTransitionStart"),ur(Yb,"onTransitionCancel"),ur(Op,"onTransitionEnd"),ns("onMouseEnter",["mouseout","mouseover"]),ns("onMouseLeave",["mouseout","mouseover"]),ns("onPointerEnter",["pointerout","pointerover"]),ns("onPointerLeave",["pointerout","pointerover"]),lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lr("onBeforeInput",["compositionend","keypress","textInput","paste"]),lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function W_(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],d=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var E=l.length-1;0<=E;E--){var T=l[E],D=T.instance,B=T.currentTarget;if(T=T.listener,D!==f&&d.isPropagationStopped())break e;f=T,d.currentTarget=B;try{f(d)}catch(W){Ou(W)}d.currentTarget=null,f=D}else for(E=0;E<l.length;E++){if(T=l[E],D=T.instance,B=T.currentTarget,T=T.listener,D!==f&&d.isPropagationStopped())break e;f=T,d.currentTarget=B;try{f(d)}catch(W){Ou(W)}d.currentTarget=null,f=D}}}}function Le(n,r){var a=r[Xo];a===void 0&&(a=r[Xo]=new Set);var l=n+"__bubble";a.has(l)||(J_(r,n,2,!1),a.add(l))}function $f(n,r,a){var l=0;r&&(l|=4),J_(a,n,l,r)}var Qu="_reactListening"+Math.random().toString(36).slice(2);function Wf(n){if(!n[Qu]){n[Qu]=!0,$o.forEach(function(a){a!=="selectionchange"&&(NA.has(a)||$f(a,!1,n),$f(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Qu]||(r[Qu]=!0,$f("selectionchange",!1,r))}}function J_(n,r,a,l){switch(Tv(r)){case 2:var d=rS;break;case 8:d=sS;break;default:d=dm}a=d.bind(null,r,a,n),d=void 0,!Kn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function Jf(n,r,a,l,d){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var T=l.stateNode.containerInfo;if(T===d)break;if(E===4)for(E=l.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===d)return;E=E.return}for(;T!==null;){if(E=ts(T),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){l=f=E;continue e}T=T.parentNode}}l=l.return}Yc(function(){var B=f,W=Qn(a),ee=[];e:{var H=Pp.get(n);if(H!==void 0){var G=Pa,Re=n;switch(n){case"keypress":if(Rr(a)===0)break e;case"keydown":case"keyup":G=Ua;break;case"focusin":Re="focus",G=Va;break;case"focusout":Re="blur",G=Va;break;case"beforeblur":case"afterblur":G=Va;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=bh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=nu;break;case Cp:case Np:case Dp:G=ja;break;case Op:G=su;break;case"scroll":case"scrollend":G=Xc;break;case"wheel":G=za;break;case"copy":case"cut":case"paste":G=La;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=ll;break;case"toggle":case"beforetoggle":G=au}var Te=(r&4)!==0,lt=!Te&&(n==="scroll"||n==="scrollend"),L=Te?H!==null?H+"Capture":null:H;Te=[];for(var k=B,q;k!==null;){var Z=k;if(q=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||q===null||L===null||(Z=Gi(k,L),Z!=null&&Te.push(Ul(k,Z,q))),lt)break;k=k.return}0<Te.length&&(H=new G(H,Re,null,a,W),ee.push({event:H,listeners:Te}))}}if((r&7)===0){e:{if(H=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",H&&a!==is&&(Re=a.relatedTarget||a.fromElement)&&(ts(Re)||Re[Gn]))break e;if((G||H)&&(H=W.window===W?W:(H=W.ownerDocument)?H.defaultView||H.parentWindow:window,G?(Re=a.relatedTarget||a.toElement,G=B,Re=Re?ts(Re):null,Re!==null&&(lt=c(Re),Te=Re.tag,Re!==lt||Te!==5&&Te!==27&&Te!==6)&&(Re=null)):(G=null,Re=B),G!==Re)){if(Te=Yn,Z="onMouseLeave",L="onMouseEnter",k="mouse",(n==="pointerout"||n==="pointerover")&&(Te=ll,Z="onPointerLeave",L="onPointerEnter",k="pointer"),lt=G==null?H:br(G),q=Re==null?H:br(Re),H=new Te(Z,k+"leave",G,a,W),H.target=lt,H.relatedTarget=q,Z=null,ts(W)===B&&(Te=new Te(L,k+"enter",Re,a,W),Te.target=q,Te.relatedTarget=lt,Z=Te),lt=Z,G&&Re)t:{for(Te=G,L=Re,k=0,q=Te;q;q=ho(q))k++;for(q=0,Z=L;Z;Z=ho(Z))q++;for(;0<k-q;)Te=ho(Te),k--;for(;0<q-k;)L=ho(L),q--;for(;k--;){if(Te===L||L!==null&&Te===L.alternate)break t;Te=ho(Te),L=ho(L)}Te=null}else Te=null;G!==null&&Z_(ee,H,G,Te,!1),Re!==null&&lt!==null&&Z_(ee,lt,Re,Te,!0)}}e:{if(H=B?br(B):window,G=H.nodeName&&H.nodeName.toLowerCase(),G==="select"||G==="input"&&H.type==="file")var ye=_p;else if(Ut(H))if(vp)ye=Hb;else{ye=qb;var Ve=zb}else G=H.nodeName,!G||G.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?B&&tl(B.elementType)&&(ye=_p):ye=Bb;if(ye&&(ye=ye(n,B))){us(ee,ye,a,W);break e}Ve&&Ve(n,H,B),n==="focusout"&&B&&H.type==="number"&&B.memoizedProps.value!=null&&zs(H,"number",H.value)}switch(Ve=B?br(B):window,n){case"focusin":(Ut(Ve)||Ve.contentEditable==="true")&&(qa=Ve,Ih=B,dl=null);break;case"focusout":dl=Ih=qa=null;break;case"mousedown":Ch=!0;break;case"contextmenu":case"mouseup":case"dragend":Ch=!1,Rp(ee,a,W);break;case"selectionchange":if(Fb)break;case"keydown":case"keyup":Rp(ee,a,W)}var ve;if(Nr)e:{switch(n){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Be?K(n,a)&&(be="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(v&&a.locale!=="ko"&&(Be||be!=="onCompositionStart"?be==="onCompositionEnd"&&Be&&(ve=rl()):(xr=W,qs="value"in xr?xr.value:xr.textContent,Be=!0)),Ve=Ku(B,be),0<Ve.length&&(be=new al(be,n,null,a,W),ee.push({event:be,listeners:Ve}),ve?be.data=ve:(ve=ce(a),ve!==null&&(be.data=ve)))),(ve=y?Lt(n,a):He(n,a))&&(be=Ku(B,"onBeforeInput"),0<be.length&&(Ve=new al("onBeforeInput","beforeinput",null,a,W),ee.push({event:Ve,listeners:be}),Ve.data=ve)),RA(ee,n,B,a,W)}W_(ee,r)})}function Ul(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Ku(n,r){for(var a=r+"Capture",l=[];n!==null;){var d=n,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=Gi(n,a),d!=null&&l.unshift(Ul(n,d,f)),d=Gi(n,r),d!=null&&l.push(Ul(n,d,f))),n.tag===3)return l;n=n.return}return[]}function ho(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Z_(n,r,a,l,d){for(var f=r._reactName,E=[];a!==null&&a!==l;){var T=a,D=T.alternate,B=T.stateNode;if(T=T.tag,D!==null&&D===l)break;T!==5&&T!==26&&T!==27||B===null||(D=B,d?(B=Gi(a,f),B!=null&&E.unshift(Ul(a,B,D))):d||(B=Gi(a,f),B!=null&&E.push(Ul(a,B,D)))),a=a.return}E.length!==0&&n.push({event:r,listeners:E})}var DA=/\r\n?/g,OA=/\u0000|\uFFFD/g;function ev(n){return(typeof n=="string"?n:""+n).replace(DA,`
`).replace(OA,"")}function tv(n,r){return r=ev(r),ev(n)===r}function Yu(){}function ot(n,r,a,l,d,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Fn(n,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Fn(n,""+l);break;case"className":Ar(n,"class",l);break;case"tabIndex":Ar(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ar(n,a,l);break;case"style":el(n,l,f);break;case"data":if(r!=="object"){Ar(n,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Oa(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&ot(n,r,"name",d.name,d,null),ot(n,r,"formEncType",d.formEncType,d,null),ot(n,r,"formMethod",d.formMethod,d,null),ot(n,r,"formTarget",d.formTarget,d,null)):(ot(n,r,"encType",d.encType,d,null),ot(n,r,"method",d.method,d,null),ot(n,r,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Oa(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Yu);break;case"onScroll":l!=null&&Le("scroll",n);break;case"onScrollEnd":l!=null&&Le("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Oa(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Le("beforetoggle",n),Le("toggle",n),Us(n,"popover",l);break;case"xlinkActuate":Wt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Wt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Wt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Wt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Wt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Wt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Wt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Wt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Wt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Us(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=wh.get(a)||a,Us(n,a,l))}}function Zf(n,r,a,l,d,f){switch(a){case"style":el(n,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Fn(n,l):(typeof l=="number"||typeof l=="bigint")&&Fn(n,""+l);break;case"onScroll":l!=null&&Le("scroll",n);break;case"onScrollEnd":l!=null&&Le("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Yu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ra.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),r=a.slice(2,d?a.length-7:void 0),f=n[Ct]||null,f=f!=null?f[a]:null,typeof f=="function"&&n.removeEventListener(r,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,l,d);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Us(n,a,l)}}}function tn(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",n),Le("load",n);var l=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var E=a[f];if(E!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ot(n,r,f,E,a,null)}}d&&ot(n,r,"srcSet",a.srcSet,a,null),l&&ot(n,r,"src",a.src,a,null);return;case"input":Le("invalid",n);var T=f=E=d=null,D=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":d=W;break;case"type":E=W;break;case"checked":D=W;break;case"defaultChecked":B=W;break;case"value":f=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:ot(n,r,l,W,a,null)}}qi(n,f,T,D,B,E,d,!1),Da(n);return;case"select":Le("invalid",n),l=E=f=null;for(d in a)if(a.hasOwnProperty(d)&&(T=a[d],T!=null))switch(d){case"value":f=T;break;case"defaultValue":E=T;break;case"multiple":l=T;default:ot(n,r,d,T,a,null)}r=f,a=E,n.multiple=!!l,r!=null?ss(n,!!l,r,!1):a!=null&&ss(n,!!l,a,!0);return;case"textarea":Le("invalid",n),f=d=l=null;for(E in a)if(a.hasOwnProperty(E)&&(T=a[E],T!=null))switch(E){case"value":l=T;break;case"defaultValue":d=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:ot(n,r,E,T,a,null)}Bi(n,l,d,f),Da(n);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ot(n,r,D,l,a,null)}return;case"dialog":Le("beforetoggle",n),Le("toggle",n),Le("cancel",n),Le("close",n);break;case"iframe":case"object":Le("load",n);break;case"video":case"audio":for(l=0;l<Ll.length;l++)Le(Ll[l],n);break;case"image":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"embed":case"source":case"link":Le("error",n),Le("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ot(n,r,B,l,a,null)}return;default:if(tl(r)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&Zf(n,r,W,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&ot(n,r,T,l,a,null))}function PA(n,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,E=null,T=null,D=null,B=null,W=null;for(G in a){var ee=a[G];if(a.hasOwnProperty(G)&&ee!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":D=ee;default:l.hasOwnProperty(G)||ot(n,r,G,null,l,ee)}}for(var H in l){var G=l[H];if(ee=a[H],l.hasOwnProperty(H)&&(G!=null||ee!=null))switch(H){case"type":f=G;break;case"name":d=G;break;case"checked":B=G;break;case"defaultChecked":W=G;break;case"value":E=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,r));break;default:G!==ee&&ot(n,r,H,G,l,ee)}}Cn(n,E,T,D,B,W,f,d);return;case"select":G=E=T=H=null;for(f in a)if(D=a[f],a.hasOwnProperty(f)&&D!=null)switch(f){case"value":break;case"multiple":G=D;default:l.hasOwnProperty(f)||ot(n,r,f,null,l,D)}for(d in l)if(f=l[d],D=a[d],l.hasOwnProperty(d)&&(f!=null||D!=null))switch(d){case"value":H=f;break;case"defaultValue":T=f;break;case"multiple":E=f;default:f!==D&&ot(n,r,d,f,l,D)}r=T,a=E,l=G,H!=null?ss(n,!!a,H,!1):!!l!=!!a&&(r!=null?ss(n,!!a,r,!0):ss(n,!!a,a?[]:"",!1));return;case"textarea":G=H=null;for(T in a)if(d=a[T],a.hasOwnProperty(T)&&d!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ot(n,r,T,null,l,d)}for(E in l)if(d=l[E],f=a[E],l.hasOwnProperty(E)&&(d!=null||f!=null))switch(E){case"value":H=d;break;case"defaultValue":G=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==f&&ot(n,r,E,d,l,f)}it(n,H,G);return;case"option":for(var Re in a)if(H=a[Re],a.hasOwnProperty(Re)&&H!=null&&!l.hasOwnProperty(Re))switch(Re){case"selected":n.selected=!1;break;default:ot(n,r,Re,null,l,H)}for(D in l)if(H=l[D],G=a[D],l.hasOwnProperty(D)&&H!==G&&(H!=null||G!=null))switch(D){case"selected":n.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:ot(n,r,D,H,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)H=a[Te],a.hasOwnProperty(Te)&&H!=null&&!l.hasOwnProperty(Te)&&ot(n,r,Te,null,l,H);for(B in l)if(H=l[B],G=a[B],l.hasOwnProperty(B)&&H!==G&&(H!=null||G!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,r));break;default:ot(n,r,B,H,l,G)}return;default:if(tl(r)){for(var lt in a)H=a[lt],a.hasOwnProperty(lt)&&H!==void 0&&!l.hasOwnProperty(lt)&&Zf(n,r,lt,void 0,l,H);for(W in l)H=l[W],G=a[W],!l.hasOwnProperty(W)||H===G||H===void 0&&G===void 0||Zf(n,r,W,H,l,G);return}}for(var L in a)H=a[L],a.hasOwnProperty(L)&&H!=null&&!l.hasOwnProperty(L)&&ot(n,r,L,null,l,H);for(ee in l)H=l[ee],G=a[ee],!l.hasOwnProperty(ee)||H===G||H==null&&G==null||ot(n,r,ee,H,l,G)}var em=null,tm=null;function Xu(n){return n.nodeType===9?n:n.ownerDocument}function nv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rv(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function nm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var rm=null;function MA(){var n=window.event;return n&&n.type==="popstate"?n===rm?!1:(rm=n,!0):(rm=null,!1)}var sv=typeof setTimeout=="function"?setTimeout:void 0,kA=typeof clearTimeout=="function"?clearTimeout:void 0,iv=typeof Promise=="function"?Promise:void 0,VA=typeof queueMicrotask=="function"?queueMicrotask:typeof iv<"u"?function(n){return iv.resolve(null).then(n).catch(jA)}:sv;function jA(n){setTimeout(function(){throw n})}function ri(n){return n==="head"}function av(n,r){var a=r,l=0,d=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var E=n.ownerDocument;if(a&1&&zl(E.documentElement),a&2&&zl(E.body),a&4)for(a=E.head,zl(a),E=a.firstChild;E;){var T=E.nextSibling,D=E.nodeName;E[ji]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=T}}if(d===0){n.removeChild(f),Yl(r);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Yl(r)}function sm(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":sm(a),Ls(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function LA(n,r,a,l){for(;n.nodeType===1;){var d=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[ji])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(f=n.getAttribute("rel"),f==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(f!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(f=n.getAttribute("src"),(f!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===f)return n}else return n;if(n=hr(n.nextSibling),n===null)break}return null}function UA(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=hr(n.nextSibling),n===null))return null;return n}function im(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function zA(n,r){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function hr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var am=null;function ov(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}function lv(n,r,a){switch(r=Xu(a),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function zl(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Ls(n)}var tr=new Map,cv=new Set;function $u(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var bs=ae.d;ae.d={f:qA,r:BA,D:HA,C:GA,L:FA,m:QA,X:YA,S:KA,M:XA};function qA(){var n=bs.f(),r=qu();return n||r}function BA(n){var r=Tr(n);r!==null&&r.tag===5&&r.type==="form"?Cy(r):bs.r(n)}var fo=typeof document>"u"?null:document;function uv(n,r,a){var l=fo;if(l&&typeof r=="string"&&r){var d=Nt(r);d='link[rel="'+n+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),cv.has(d)||(cv.add(d),n={rel:n,crossOrigin:a,href:r},l.querySelector(d)===null&&(r=l.createElement("link"),tn(r,"link",n),At(r),l.head.appendChild(r)))}}function HA(n){bs.D(n),uv("dns-prefetch",n,null)}function GA(n,r){bs.C(n,r),uv("preconnect",n,r)}function FA(n,r,a){bs.L(n,r,a);var l=fo;if(l&&n&&r){var d='link[rel="preload"][as="'+Nt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Nt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Nt(a.imageSizes)+'"]')):d+='[href="'+Nt(n)+'"]';var f=d;switch(r){case"style":f=mo(n);break;case"script":f=go(n)}tr.has(f)||(n=w({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),tr.set(f,n),l.querySelector(d)!==null||r==="style"&&l.querySelector(ql(f))||r==="script"&&l.querySelector(Bl(f))||(r=l.createElement("link"),tn(r,"link",n),At(r),l.head.appendChild(r)))}}function QA(n,r){bs.m(n,r);var a=fo;if(a&&n){var l=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+Nt(l)+'"][href="'+Nt(n)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=go(n)}if(!tr.has(f)&&(n=w({rel:"modulepreload",href:n},r),tr.set(f,n),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bl(f)))return}l=a.createElement("link"),tn(l,"link",n),At(l),a.head.appendChild(l)}}}function KA(n,r,a){bs.S(n,r,a);var l=fo;if(l&&n){var d=gn(l).hoistableStyles,f=mo(n);r=r||"default";var E=d.get(f);if(!E){var T={loading:0,preload:null};if(E=l.querySelector(ql(f)))T.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":r},a),(a=tr.get(f))&&om(n,a);var D=E=l.createElement("link");At(D),tn(D,"link",n),D._p=new Promise(function(B,W){D.onload=B,D.onerror=W}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Wu(E,r,l)}E={type:"stylesheet",instance:E,count:1,state:T},d.set(f,E)}}}function YA(n,r){bs.X(n,r);var a=fo;if(a&&n){var l=gn(a).hoistableScripts,d=go(n),f=l.get(d);f||(f=a.querySelector(Bl(d)),f||(n=w({src:n,async:!0},r),(r=tr.get(d))&&lm(n,r),f=a.createElement("script"),At(f),tn(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function XA(n,r){bs.M(n,r);var a=fo;if(a&&n){var l=gn(a).hoistableScripts,d=go(n),f=l.get(d);f||(f=a.querySelector(Bl(d)),f||(n=w({src:n,async:!0,type:"module"},r),(r=tr.get(d))&&lm(n,r),f=a.createElement("script"),At(f),tn(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function dv(n,r,a,l){var d=(d=Ae.current)?$u(d):null;if(!d)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=mo(a.href),a=gn(d).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=mo(a.href);var f=gn(d).hoistableStyles,E=f.get(n);if(E||(d=d.ownerDocument||d,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(n,E),(f=d.querySelector(ql(n)))&&!f._p&&(E.instance=f,E.state.loading=5),tr.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},tr.set(n,a),f||$A(d,n,a,E.state))),r&&l===null)throw Error(i(528,""));return E}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=go(a),a=gn(d).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function mo(n){return'href="'+Nt(n)+'"'}function ql(n){return'link[rel="stylesheet"]['+n+"]"}function hv(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function $A(n,r,a,l){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=n.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),tn(r,"link",a),At(r),n.head.appendChild(r))}function go(n){return'[src="'+Nt(n)+'"]'}function Bl(n){return"script[async]"+n}function fv(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=n.querySelector('style[data-href~="'+Nt(a.href)+'"]');if(l)return r.instance=l,At(l),l;var d=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),At(l),tn(l,"style",d),Wu(l,a.precedence,n),r.instance=l;case"stylesheet":d=mo(a.href);var f=n.querySelector(ql(d));if(f)return r.state.loading|=4,r.instance=f,At(f),f;l=hv(a),(d=tr.get(d))&&om(l,d),f=(n.ownerDocument||n).createElement("link"),At(f);var E=f;return E._p=new Promise(function(T,D){E.onload=T,E.onerror=D}),tn(f,"link",l),r.state.loading|=4,Wu(f,a.precedence,n),r.instance=f;case"script":return f=go(a.src),(d=n.querySelector(Bl(f)))?(r.instance=d,At(d),d):(l=a,(d=tr.get(f))&&(l=w({},a),lm(l,d)),n=n.ownerDocument||n,d=n.createElement("script"),At(d),tn(d,"link",l),n.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Wu(l,a.precedence,n));return r.instance}function Wu(n,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,E=0;E<l.length;E++){var T=l[E];if(T.dataset.precedence===r)f=T;else if(f!==d)break}f?f.parentNode.insertBefore(n,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function om(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function lm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Ju=null;function mv(n,r,a){if(Ju===null){var l=new Map,d=Ju=new Map;d.set(a,l)}else d=Ju,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),d=0;d<a.length;d++){var f=a[d];if(!(f[ji]||f[jt]||n==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(r)||"";E=n+E;var T=l.get(E);T?T.push(f):l.set(E,[f])}}return l}function gv(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function WA(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function pv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Hl=null;function JA(){}function ZA(n,r,a){if(Hl===null)throw Error(i(475));var l=Hl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=mo(a.href),f=n.querySelector(ql(d));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=Zu.bind(l),n.then(l,l)),r.state.loading|=4,r.instance=f,At(f);return}f=n.ownerDocument||n,a=hv(a),(d=tr.get(d))&&om(a,d),f=f.createElement("link"),At(f);var E=f;E._p=new Promise(function(T,D){E.onload=T,E.onerror=D}),tn(f,"link",a),r.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Zu.bind(l),n.addEventListener("load",r),n.addEventListener("error",r))}}function eS(){if(Hl===null)throw Error(i(475));var n=Hl;return n.stylesheets&&n.count===0&&cm(n,n.stylesheets),0<n.count?function(r){var a=setTimeout(function(){if(n.stylesheets&&cm(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Zu(){if(this.count--,this.count===0){if(this.stylesheets)cm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ed=null;function cm(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ed=new Map,r.forEach(tS,n),ed=null,Zu.call(n))}function tS(n,r){if(!(r.state.loading&4)){var a=ed.get(n);if(a)var l=a.get(null);else{a=new Map,ed.set(n,a);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var E=d[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}d=r.instance,E=d.getAttribute("data-precedence"),f=a.get(E)||l,f===l&&a.set(null,d),a.set(E,d),this.count++,l=Zu.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),r.state.loading|=4}}var Gl={$$typeof:re,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function nS(n,r,a,l,d,f,E,T){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ir(0),this.hiddenUpdates=ir(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function yv(n,r,a,l,d,f,E,T,D,B,W,ee){return n=new nS(n,r,a,E,T,D,B,ee),r=1,f===!0&&(r|=24),f=Dn(3,null,null,r),n.current=f,f.stateNode=n,r=Hh(),r.refCount++,n.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Kh(f),n}function _v(n){return n?(n=Fa,n):Fa}function vv(n,r,a,l,d,f){d=_v(d),l.context===null?l.context=d:l.pendingContext=d,l=Gs(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Fs(n,l,r),a!==null&&(Vn(a,n,r),El(a,n,r))}function Ev(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function um(n,r){Ev(n,r),(n=n.alternate)&&Ev(n,r)}function wv(n){if(n.tag===13){var r=Ga(n,67108864);r!==null&&Vn(r,n,67108864),um(n,67108864)}}var td=!0;function rS(n,r,a,l){var d=Q.T;Q.T=null;var f=ae.p;try{ae.p=2,dm(n,r,a,l)}finally{ae.p=f,Q.T=d}}function sS(n,r,a,l){var d=Q.T;Q.T=null;var f=ae.p;try{ae.p=8,dm(n,r,a,l)}finally{ae.p=f,Q.T=d}}function dm(n,r,a,l){if(td){var d=hm(l);if(d===null)Jf(n,r,l,nd,a),bv(n,l);else if(aS(d,n,r,a,l))l.stopPropagation();else if(bv(n,l),r&4&&-1<iS.indexOf(n)){for(;d!==null;){var f=Tr(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=In(f.pendingLanes);if(E!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var D=1<<31-Ht(E);T.entanglements[1]|=D,E&=~D}Vr(f),(rt&6)===0&&(Uu=wn()+500,jl(0))}}break;case 13:T=Ga(f,2),T!==null&&Vn(T,f,2),qu(),um(f,2)}if(f=hm(l),f===null&&Jf(n,r,l,nd,a),f===d)break;d=f}d!==null&&l.stopPropagation()}else Jf(n,r,l,null,a)}}function hm(n){return n=Qn(n),fm(n)}var nd=null;function fm(n){if(nd=null,n=ts(n),n!==null){var r=c(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=h(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return nd=n,null}function Tv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qo()){case Oi:return 2;case Yr:return 8;case Xr:case Ko:return 32;case Vs:return 268435456;default:return 32}default:return 32}}var mm=!1,si=null,ii=null,ai=null,Fl=new Map,Ql=new Map,oi=[],iS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bv(n,r){switch(n){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":ii=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":Fl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(r.pointerId)}}function Kl(n,r,a,l,d,f){return n===null||n.nativeEvent!==f?(n={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},r!==null&&(r=Tr(r),r!==null&&wv(r)),n):(n.eventSystemFlags|=l,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function aS(n,r,a,l,d){switch(r){case"focusin":return si=Kl(si,n,r,a,l,d),!0;case"dragenter":return ii=Kl(ii,n,r,a,l,d),!0;case"mouseover":return ai=Kl(ai,n,r,a,l,d),!0;case"pointerover":var f=d.pointerId;return Fl.set(f,Kl(Fl.get(f)||null,n,r,a,l,d)),!0;case"gotpointercapture":return f=d.pointerId,Ql.set(f,Kl(Ql.get(f)||null,n,r,a,l,d)),!0}return!1}function Av(n){var r=ts(n.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){n.blockedOn=r,or(n.priority,function(){if(a.tag===13){var l=kn();l=me(l);var d=Ga(a,l);d!==null&&Vn(d,a,l),um(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function rd(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=hm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);is=l,a.target.dispatchEvent(l),is=null}else return r=Tr(a),r!==null&&wv(r),n.blockedOn=a,!1;r.shift()}return!0}function Sv(n,r,a){rd(n)&&a.delete(r)}function oS(){mm=!1,si!==null&&rd(si)&&(si=null),ii!==null&&rd(ii)&&(ii=null),ai!==null&&rd(ai)&&(ai=null),Fl.forEach(Sv),Ql.forEach(Sv)}function sd(n,r){n.blockedOn===r&&(n.blockedOn=null,mm||(mm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,oS)))}var id=null;function xv(n){id!==n&&(id=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){id===n&&(id=null);for(var r=0;r<n.length;r+=3){var a=n[r],l=n[r+1],d=n[r+2];if(typeof l!="function"){if(fm(l||a)===null)continue;break}var f=Tr(a);f!==null&&(n.splice(r,3),r-=3,ff(f,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function Yl(n){function r(D){return sd(D,n)}si!==null&&sd(si,n),ii!==null&&sd(ii,n),ai!==null&&sd(ai,n),Fl.forEach(r),Ql.forEach(r);for(var a=0;a<oi.length;a++){var l=oi[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<oi.length&&(a=oi[0],a.blockedOn===null);)Av(a),a.blockedOn===null&&oi.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],f=a[l+1],E=d[Ct]||null;if(typeof f=="function")E||xv(a);else if(E){var T=null;if(f&&f.hasAttribute("formAction")){if(d=f,E=f[Ct]||null)T=E.formAction;else if(fm(d)!==null)continue}else T=E.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),xv(a)}}}function gm(n){this._internalRoot=n}ad.prototype.render=gm.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=kn();vv(a,l,n,r,null,null)},ad.prototype.unmount=gm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;vv(n.current,2,null,n,null,null),qu(),r[Gn]=null}};function ad(n){this._internalRoot=n}ad.prototype.unstable_scheduleHydration=function(n){if(n){var r=Hn();n={blockedOn:null,target:n,priority:r};for(var a=0;a<oi.length&&r!==0&&r<oi[a].priority;a++);oi.splice(a,0,n),a===0&&Av(n)}};var Rv=e.version;if(Rv!=="19.1.1")throw Error(i(527,Rv,"19.1.1"));ae.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(r),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var lS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!od.isDisabled&&od.supportsFiber)try{ht=od.inject(lS),$e=od}catch{}}return $l.createRoot=function(n,r){if(!o(n))throw Error(i(299));var a=!1,l="",d=Hy,f=Gy,E=Fy,T=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(T=r.unstable_transitionCallbacks)),r=yv(n,1,!1,null,null,a,l,d,f,E,T,null),n[Gn]=r.current,Wf(n),new gm(r)},$l.hydrateRoot=function(n,r,a){if(!o(n))throw Error(i(299));var l=!1,d="",f=Hy,E=Gy,T=Fy,D=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),r=yv(n,1,!0,r,a??null,l,d,f,E,T,D,B),r.context=_v(null),a=r.current,l=kn(),l=me(l),d=Gs(l),d.callback=null,Fs(a,d,l),a=l,r.current.lanes=a,ar(r,a),Vr(r),n[Gn]=r.current,Wf(n),new ad(r)},$l.version="19.1.1",$l}var jv;function vS(){if(jv)return _m.exports;jv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),_m.exports=_S(),_m.exports}var ES=vS();const wS=IE(ES);var Je=(s=>(s[s.Setup=0]="Setup",s[s.Login=1]="Login",s[s.Profile=2]="Profile",s[s.Shop=3]="Shop",s[s.PackSelection=4]="PackSelection",s[s.RoundConfiguration=5]="RoundConfiguration",s[s.Game=6]="Game",s[s.RoundEnd=7]="RoundEnd",s[s.GameEnd=8]="GameEnd",s))(Je||{});const CE={CHANGES_BEFORE_AD:3,MAX_CHANGE_ATTEMPTS:10};var nr=(s=>(s.Pack="pack",s.Question="question",s.Dare="dare",s))(nr||{}),ic=(s=>(s.Pending="pending",s.Discarded="discarded",s.Possible="possible",s.Accepted="accepted",s.Rejected="rejected",s))(ic||{});const mt={MAX_SUGGESTIONS_PER_DAY:5,MAX_SUGGESTIONS_PER_WEEK:15,MIN_TITLE_LENGTH:5,MAX_TITLE_LENGTH:100,MIN_CONTENT_LENGTH:10,MAX_CONTENT_LENGTH:500};var jn=(s=>(s.PostGame="post_game",s.PostRound="post_round",s.QuestionChange="question_change",s.Banner="banner",s.Rewarded="rewarded",s.Interstitial="interstitial",s))(jn||{});const Rn=({children:s,className:e})=>p.jsx("div",{className:`bg-gray-800 border border-purple-500/30 rounded-2xl shadow-lg shadow-purple-900/20 p-6 sm:p-8 ${e}`,children:s}),TS=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Tm=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),bS=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),NE=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),To=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),AS=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),DE=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),SS=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),xS=({className:s})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),RS=({players:s,setPlayers:e})=>{const[t,i]=te.useState(""),o=h=>{h.preventDefault(),t.trim()&&!s.includes(t.trim())&&(e([...s,t.trim()]),i(""))},c=h=>{e(s.filter((m,g)=>g!==h))};return p.jsxs(Rn,{children:[p.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-pink-400",children:"Añadir Jugadores"}),p.jsxs("form",{onSubmit:o,className:"flex flex-col gap-2 mb-4",children:[p.jsx("input",{type:"text",value:t,onChange:h=>i(h.target.value),placeholder:"Nombre del jugador",className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-purple-500"}),p.jsx("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md transition text-base",children:"Añadir"})]}),p.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:s.map((h,m)=>p.jsxs("li",{className:"flex justify-between items-center bg-gray-700/50 p-2 rounded-md animate-fade-in",children:[p.jsx("span",{className:"font-medium",children:h}),p.jsx("button",{onClick:()=>c(m),className:"text-gray-400 hover:text-red-500 transition",children:p.jsx(TS,{className:"w-5 h-5"})})]},m))})]})},De=({children:s,variant:e="primary",className:t,...i})=>{const o="px-6 py-3 font-bold rounded-lg text-white transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 disabled:opacity-50 disabled:cursor-not-allowed",c={primary:"bg-purple-600 hover:bg-purple-700 focus:ring-purple-500/50 shadow-lg shadow-purple-600/30",secondary:"bg-pink-500 hover:bg-pink-600 focus:ring-pink-500/50 shadow-lg shadow-pink-500/30",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500/50"};return p.jsx("button",{className:`${o} ${c[e]} ${t}`,...i,children:s})},IS=()=>{};var Lv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},CS=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const o=s[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[t++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[t++],h=s[t++],m=s[t++],g=((o&7)<<18|(c&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const c=s[t++],h=s[t++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},PE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const c=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,_=g?s[o+2]:0,w=c>>2,b=(c&3)<<4|m>>4;let S=(m&15)<<2|_>>6,C=_&63;g||(C=64,h||(S=64)),i.push(t[w],t[b],t[S],t[C])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(OE(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):CS(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const c=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const _=o<s.length?t[s.charAt(o)]:64;++o;const b=o<s.length?t[s.charAt(o)]:64;if(++o,c==null||m==null||_==null||b==null)throw new NS;const S=c<<2|m>>4;if(i.push(S),_!==64){const C=m<<4&240|_>>2;if(i.push(C),b!==64){const j=_<<6&192|b;i.push(j)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class NS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DS=function(s){const e=OE(s);return PE.encodeByteArray(e,!0)},Rd=function(s){return DS(s).replace(/\./g,"")},ME=function(s){try{return PE.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=()=>OS().__FIREBASE_DEFAULTS__,MS=()=>{if(typeof process>"u"||typeof Lv>"u")return;const s=Lv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},kS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&ME(s[1]);return e&&JSON.parse(e)},Wd=()=>{try{return IS()||PS()||MS()||kS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},kE=s=>{var e,t;return(t=(e=Wd())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},VS=s=>{const e=kE(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},VE=()=>{var s;return(s=Wd())==null?void 0:s.config},jE=s=>{var e;return(e=Wd())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function LE(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Rd(JSON.stringify(t)),Rd(JSON.stringify(h)),""].join(".")}const ac={};function US(){const s={prod:[],emulator:[]};for(const e of Object.keys(ac))ac[e]?s.emulator.push(e):s.prod.push(e);return s}function zS(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Uv=!1;function UE(s,e){if(typeof window>"u"||typeof document>"u"||!jo(window.location.host)||ac[s]===e||ac[s]||Uv)return;ac[s]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",c=US().prod.length>0;function h(){const S=document.getElementById(i);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,C){S.setAttribute("width","24"),S.setAttribute("id",C),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function _(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Uv=!0,h()},S}function w(S,C){S.setAttribute("id",C),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function b(){const S=zS(i),C=t("text"),j=document.getElementById(C)||document.createElement("span"),F=t("learnmore"),z=document.getElementById(F)||document.createElement("a"),ie=t("preprendIcon"),se=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const re=S.element;m(re),w(z,F);const fe=_();g(se,ie),re.append(se,j,z,fe),document.body.appendChild(re)}c?(j.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function BS(){var e;const s=(e=Wd())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function FS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QS(){const s=fn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function KS(){return!BS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YS(){try{return typeof indexedDB=="object"}catch{return!1}}function XS(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="FirebaseError";class Os extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=$S,Object.setPrototypeOf(this,Os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xc.prototype.create)}}class xc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?WS(c,i):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Os(o,m,i)}}function WS(s,e){return s.replace(JS,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const JS=/\{\$([^}]+)}/g;function ZS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ga(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const c=s[o],h=e[o];if(zv(c)&&zv(h)){if(!ga(c,h))return!1}else if(c!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function zv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Zl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function ec(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function ex(s,e){const t=new tx(s,e);return t.subscribe.bind(t)}class tx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");nx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=bm),o.error===void 0&&(o.error=bm),o.complete===void 0&&(o.complete=bm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nx(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function bm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(s){return s&&s._delegate?s._delegate:s}class pa{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new jS;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ix(e))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ha){return this.instances.has(e)}getOptions(e=ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[c,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);i===m&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:sx(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ha){return this.component?this.component.multipleInstances?e:ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sx(s){return s===ha?void 0:s}function ix(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ue||(Ue={}));const ox={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},lx=Ue.INFO,cx={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},ux=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=cx[e];if(o)console[o](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dg{constructor(e){this.name=e,this._logLevel=lx,this._logHandler=ux,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ox[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const dx=(s,e)=>e.some(t=>s instanceof t);let qv,Bv;function hx(){return qv||(qv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fx(){return Bv||(Bv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zE=new WeakMap,Vm=new WeakMap,qE=new WeakMap,Am=new WeakMap,hg=new WeakMap;function mx(s){const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",h)},c=()=>{t(gi(s.result)),o()},h=()=>{i(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&zE.set(t,s)}).catch(()=>{}),hg.set(e,s),e}function gx(s){if(Vm.has(s))return;const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",h),s.removeEventListener("abort",h)},c=()=>{t(),o()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",h),s.addEventListener("abort",h)});Vm.set(s,e)}let jm={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Vm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||qE.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gi(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function px(s){jm=s(jm)}function yx(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(Sm(this),e,...t);return qE.set(i,e.sort?e.sort():[e]),gi(i)}:fx().includes(s)?function(...e){return s.apply(Sm(this),e),gi(zE.get(this))}:function(...e){return gi(s.apply(Sm(this),e))}}function _x(s){return typeof s=="function"?yx(s):(s instanceof IDBTransaction&&gx(s),dx(s,hx())?new Proxy(s,jm):s)}function gi(s){if(s instanceof IDBRequest)return mx(s);if(Am.has(s))return Am.get(s);const e=_x(s);return e!==s&&(Am.set(s,e),hg.set(e,s)),e}const Sm=s=>hg.get(s);function vx(s,e,{blocked:t,upgrade:i,blocking:o,terminated:c}={}){const h=indexedDB.open(s,e),m=gi(h);return i&&h.addEventListener("upgradeneeded",g=>{i(gi(h.result),g.oldVersion,g.newVersion,gi(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const Ex=["get","getKey","getAll","getAllKeys","count"],wx=["put","add","delete","clear"],xm=new Map;function Hv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(xm.get(e))return xm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=wx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Ex.includes(t)))return;const c=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return i&&(_=_.index(m.shift())),(await Promise.all([_[t](...m),o&&g.done]))[0]};return xm.set(e,c),c}px(s=>({...s,get:(e,t,i)=>Hv(e,t)||s.get(e,t,i),has:(e,t)=>!!Hv(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(bx(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function bx(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lm="@firebase/app",Gv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new dg("@firebase/app"),Ax="@firebase/app-compat",Sx="@firebase/analytics-compat",xx="@firebase/analytics",Rx="@firebase/app-check-compat",Ix="@firebase/app-check",Cx="@firebase/auth",Nx="@firebase/auth-compat",Dx="@firebase/database",Ox="@firebase/data-connect",Px="@firebase/database-compat",Mx="@firebase/functions",kx="@firebase/functions-compat",Vx="@firebase/installations",jx="@firebase/installations-compat",Lx="@firebase/messaging",Ux="@firebase/messaging-compat",zx="@firebase/performance",qx="@firebase/performance-compat",Bx="@firebase/remote-config",Hx="@firebase/remote-config-compat",Gx="@firebase/storage",Fx="@firebase/storage-compat",Qx="@firebase/firestore",Kx="@firebase/ai",Yx="@firebase/firestore-compat",Xx="firebase",$x="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="[DEFAULT]",Wx={[Lm]:"fire-core",[Ax]:"fire-core-compat",[xx]:"fire-analytics",[Sx]:"fire-analytics-compat",[Ix]:"fire-app-check",[Rx]:"fire-app-check-compat",[Cx]:"fire-auth",[Nx]:"fire-auth-compat",[Dx]:"fire-rtdb",[Ox]:"fire-data-connect",[Px]:"fire-rtdb-compat",[Mx]:"fire-fn",[kx]:"fire-fn-compat",[Vx]:"fire-iid",[jx]:"fire-iid-compat",[Lx]:"fire-fcm",[Ux]:"fire-fcm-compat",[zx]:"fire-perf",[qx]:"fire-perf-compat",[Bx]:"fire-rc",[Hx]:"fire-rc-compat",[Gx]:"fire-gcs",[Fx]:"fire-gcs-compat",[Qx]:"fire-fst",[Yx]:"fire-fst-compat",[Kx]:"fire-vertex","fire-js":"fire-js",[Xx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new Map,Jx=new Map,zm=new Map;function Fv(s,e){try{s.container.addComponent(e)}catch(t){Rs.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Io(s){const e=s.name;if(zm.has(e))return Rs.debug(`There were multiple attempts to register component ${e}.`),!1;zm.set(e,s);for(const t of Id.values())Fv(t,s);for(const t of Jx.values())Fv(t,s);return!0}function fg(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function xn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pi=new xc("app","Firebase",Zx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=$x;function BE(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:Um,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw pi.create("bad-app-name",{appName:String(o)});if(t||(t=VE()),!t)throw pi.create("no-options");const c=Id.get(o);if(c){if(ga(t,c.options)&&ga(i,c.config))return c;throw pi.create("duplicate-app",{appName:o})}const h=new ax(o);for(const g of zm.values())h.addComponent(g);const m=new eR(t,i,h);return Id.set(o,m),m}function HE(s=Um){const e=Id.get(s);if(!e&&s===Um&&VE())return BE();if(!e)throw pi.create("no-app",{appName:s});return e}function yi(s,e,t){let i=Wx[s]??s;t&&(i+=`-${t}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rs.warn(h.join(" "));return}Io(new pa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="firebase-heartbeat-database",nR=1,mc="firebase-heartbeat-store";let Rm=null;function GE(){return Rm||(Rm=vx(tR,nR,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(mc)}catch(t){console.warn(t)}}}}).catch(s=>{throw pi.create("idb-open",{originalErrorMessage:s.message})})),Rm}async function rR(s){try{const t=(await GE()).transaction(mc),i=await t.objectStore(mc).get(FE(s));return await t.done,i}catch(e){if(e instanceof Os)Rs.warn(e.message);else{const t=pi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rs.warn(t.message)}}}async function Qv(s,e){try{const i=(await GE()).transaction(mc,"readwrite");await i.objectStore(mc).put(e,FE(s)),await i.done}catch(t){if(t instanceof Os)Rs.warn(t.message);else{const i=pi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Rs.warn(i.message)}}}function FE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=1024,iR=30;class aR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new lR(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Kv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>iR){const h=cR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Rs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Kv(),{heartbeatsToSend:i,unsentEntries:o}=oR(this._heartbeatsCache.heartbeats),c=Rd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Rs.warn(t),""}}}function Kv(){return new Date().toISOString().substring(0,10)}function oR(s,e=sR){const t=[];let i=s.slice();for(const o of s){const c=t.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),Yv(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Yv(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class lR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YS()?XS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Qv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Qv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Yv(s){return Rd(JSON.stringify({version:2,heartbeats:s})).length}function cR(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(s){Io(new pa("platform-logger",e=>new Tx(e),"PRIVATE")),Io(new pa("heartbeat",e=>new aR(e),"PRIVATE")),yi(Lm,Gv,s),yi(Lm,Gv,"esm2020"),yi("fire-js","")}uR("");var dR="firebase",hR="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yi(dR,hR,"app");var Xv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _i,QE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,x){function I(){}I.prototype=x.prototype,N.D=x.prototype,N.prototype=new I,N.prototype.constructor=N,N.C=function(P,M,V){for(var R=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)R[Ie-2]=arguments[Ie];return x.prototype[M].apply(P,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,x,I){I||(I=0);var P=Array(16);if(typeof x=="string")for(var M=0;16>M;++M)P[M]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(M=0;16>M;++M)P[M]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=N.g[0],I=N.g[1],M=N.g[2];var V=N.g[3],R=x+(V^I&(M^V))+P[0]+3614090360&4294967295;x=I+(R<<7&4294967295|R>>>25),R=V+(M^x&(I^M))+P[1]+3905402710&4294967295,V=x+(R<<12&4294967295|R>>>20),R=M+(I^V&(x^I))+P[2]+606105819&4294967295,M=V+(R<<17&4294967295|R>>>15),R=I+(x^M&(V^x))+P[3]+3250441966&4294967295,I=M+(R<<22&4294967295|R>>>10),R=x+(V^I&(M^V))+P[4]+4118548399&4294967295,x=I+(R<<7&4294967295|R>>>25),R=V+(M^x&(I^M))+P[5]+1200080426&4294967295,V=x+(R<<12&4294967295|R>>>20),R=M+(I^V&(x^I))+P[6]+2821735955&4294967295,M=V+(R<<17&4294967295|R>>>15),R=I+(x^M&(V^x))+P[7]+4249261313&4294967295,I=M+(R<<22&4294967295|R>>>10),R=x+(V^I&(M^V))+P[8]+1770035416&4294967295,x=I+(R<<7&4294967295|R>>>25),R=V+(M^x&(I^M))+P[9]+2336552879&4294967295,V=x+(R<<12&4294967295|R>>>20),R=M+(I^V&(x^I))+P[10]+4294925233&4294967295,M=V+(R<<17&4294967295|R>>>15),R=I+(x^M&(V^x))+P[11]+2304563134&4294967295,I=M+(R<<22&4294967295|R>>>10),R=x+(V^I&(M^V))+P[12]+1804603682&4294967295,x=I+(R<<7&4294967295|R>>>25),R=V+(M^x&(I^M))+P[13]+4254626195&4294967295,V=x+(R<<12&4294967295|R>>>20),R=M+(I^V&(x^I))+P[14]+2792965006&4294967295,M=V+(R<<17&4294967295|R>>>15),R=I+(x^M&(V^x))+P[15]+1236535329&4294967295,I=M+(R<<22&4294967295|R>>>10),R=x+(M^V&(I^M))+P[1]+4129170786&4294967295,x=I+(R<<5&4294967295|R>>>27),R=V+(I^M&(x^I))+P[6]+3225465664&4294967295,V=x+(R<<9&4294967295|R>>>23),R=M+(x^I&(V^x))+P[11]+643717713&4294967295,M=V+(R<<14&4294967295|R>>>18),R=I+(V^x&(M^V))+P[0]+3921069994&4294967295,I=M+(R<<20&4294967295|R>>>12),R=x+(M^V&(I^M))+P[5]+3593408605&4294967295,x=I+(R<<5&4294967295|R>>>27),R=V+(I^M&(x^I))+P[10]+38016083&4294967295,V=x+(R<<9&4294967295|R>>>23),R=M+(x^I&(V^x))+P[15]+3634488961&4294967295,M=V+(R<<14&4294967295|R>>>18),R=I+(V^x&(M^V))+P[4]+3889429448&4294967295,I=M+(R<<20&4294967295|R>>>12),R=x+(M^V&(I^M))+P[9]+568446438&4294967295,x=I+(R<<5&4294967295|R>>>27),R=V+(I^M&(x^I))+P[14]+3275163606&4294967295,V=x+(R<<9&4294967295|R>>>23),R=M+(x^I&(V^x))+P[3]+4107603335&4294967295,M=V+(R<<14&4294967295|R>>>18),R=I+(V^x&(M^V))+P[8]+1163531501&4294967295,I=M+(R<<20&4294967295|R>>>12),R=x+(M^V&(I^M))+P[13]+2850285829&4294967295,x=I+(R<<5&4294967295|R>>>27),R=V+(I^M&(x^I))+P[2]+4243563512&4294967295,V=x+(R<<9&4294967295|R>>>23),R=M+(x^I&(V^x))+P[7]+1735328473&4294967295,M=V+(R<<14&4294967295|R>>>18),R=I+(V^x&(M^V))+P[12]+2368359562&4294967295,I=M+(R<<20&4294967295|R>>>12),R=x+(I^M^V)+P[5]+4294588738&4294967295,x=I+(R<<4&4294967295|R>>>28),R=V+(x^I^M)+P[8]+2272392833&4294967295,V=x+(R<<11&4294967295|R>>>21),R=M+(V^x^I)+P[11]+1839030562&4294967295,M=V+(R<<16&4294967295|R>>>16),R=I+(M^V^x)+P[14]+4259657740&4294967295,I=M+(R<<23&4294967295|R>>>9),R=x+(I^M^V)+P[1]+2763975236&4294967295,x=I+(R<<4&4294967295|R>>>28),R=V+(x^I^M)+P[4]+1272893353&4294967295,V=x+(R<<11&4294967295|R>>>21),R=M+(V^x^I)+P[7]+4139469664&4294967295,M=V+(R<<16&4294967295|R>>>16),R=I+(M^V^x)+P[10]+3200236656&4294967295,I=M+(R<<23&4294967295|R>>>9),R=x+(I^M^V)+P[13]+681279174&4294967295,x=I+(R<<4&4294967295|R>>>28),R=V+(x^I^M)+P[0]+3936430074&4294967295,V=x+(R<<11&4294967295|R>>>21),R=M+(V^x^I)+P[3]+3572445317&4294967295,M=V+(R<<16&4294967295|R>>>16),R=I+(M^V^x)+P[6]+76029189&4294967295,I=M+(R<<23&4294967295|R>>>9),R=x+(I^M^V)+P[9]+3654602809&4294967295,x=I+(R<<4&4294967295|R>>>28),R=V+(x^I^M)+P[12]+3873151461&4294967295,V=x+(R<<11&4294967295|R>>>21),R=M+(V^x^I)+P[15]+530742520&4294967295,M=V+(R<<16&4294967295|R>>>16),R=I+(M^V^x)+P[2]+3299628645&4294967295,I=M+(R<<23&4294967295|R>>>9),R=x+(M^(I|~V))+P[0]+4096336452&4294967295,x=I+(R<<6&4294967295|R>>>26),R=V+(I^(x|~M))+P[7]+1126891415&4294967295,V=x+(R<<10&4294967295|R>>>22),R=M+(x^(V|~I))+P[14]+2878612391&4294967295,M=V+(R<<15&4294967295|R>>>17),R=I+(V^(M|~x))+P[5]+4237533241&4294967295,I=M+(R<<21&4294967295|R>>>11),R=x+(M^(I|~V))+P[12]+1700485571&4294967295,x=I+(R<<6&4294967295|R>>>26),R=V+(I^(x|~M))+P[3]+2399980690&4294967295,V=x+(R<<10&4294967295|R>>>22),R=M+(x^(V|~I))+P[10]+4293915773&4294967295,M=V+(R<<15&4294967295|R>>>17),R=I+(V^(M|~x))+P[1]+2240044497&4294967295,I=M+(R<<21&4294967295|R>>>11),R=x+(M^(I|~V))+P[8]+1873313359&4294967295,x=I+(R<<6&4294967295|R>>>26),R=V+(I^(x|~M))+P[15]+4264355552&4294967295,V=x+(R<<10&4294967295|R>>>22),R=M+(x^(V|~I))+P[6]+2734768916&4294967295,M=V+(R<<15&4294967295|R>>>17),R=I+(V^(M|~x))+P[13]+1309151649&4294967295,I=M+(R<<21&4294967295|R>>>11),R=x+(M^(I|~V))+P[4]+4149444226&4294967295,x=I+(R<<6&4294967295|R>>>26),R=V+(I^(x|~M))+P[11]+3174756917&4294967295,V=x+(R<<10&4294967295|R>>>22),R=M+(x^(V|~I))+P[2]+718787259&4294967295,M=V+(R<<15&4294967295|R>>>17),R=I+(V^(M|~x))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+M&4294967295,N.g[3]=N.g[3]+V&4294967295}i.prototype.u=function(N,x){x===void 0&&(x=N.length);for(var I=x-this.blockSize,P=this.B,M=this.h,V=0;V<x;){if(M==0)for(;V<=I;)o(this,N,V),V+=this.blockSize;if(typeof N=="string"){for(;V<x;)if(P[M++]=N.charCodeAt(V++),M==this.blockSize){o(this,P),M=0;break}}else for(;V<x;)if(P[M++]=N[V++],M==this.blockSize){o(this,P),M=0;break}}this.h=M,this.o+=x},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;var I=8*this.o;for(x=N.length-8;x<N.length;++x)N[x]=I&255,I/=256;for(this.u(N),N=Array(16),x=I=0;4>x;++x)for(var P=0;32>P;P+=8)N[I++]=this.g[x]>>>P&255;return N};function c(N,x){var I=m;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=x(N)}function h(N,x){this.h=x;for(var I=[],P=!0,M=N.length-1;0<=M;M--){var V=N[M]|0;P&&V==x||(I[M]=V,P=!1)}this.g=I}var m={};function g(N){return-128<=N&&128>N?c(N,function(x){return new h([x|0],0>x?-1:0)}):new h([N|0],0>N?-1:0)}function _(N){if(isNaN(N)||!isFinite(N))return b;if(0>N)return z(_(-N));for(var x=[],I=1,P=0;N>=I;P++)x[P]=N/I|0,I*=4294967296;return new h(x,0)}function w(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return z(w(N.substring(1),x));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=_(Math.pow(x,8)),P=b,M=0;M<N.length;M+=8){var V=Math.min(8,N.length-M),R=parseInt(N.substring(M,M+V),x);8>V?(V=_(Math.pow(x,V)),P=P.j(V).add(_(R))):(P=P.j(I),P=P.add(_(R)))}return P}var b=g(0),S=g(1),C=g(16777216);s=h.prototype,s.m=function(){if(F(this))return-z(this).m();for(var N=0,x=1,I=0;I<this.g.length;I++){var P=this.i(I);N+=(0<=P?P:4294967296+P)*x,x*=4294967296}return N},s.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(j(this))return"0";if(F(this))return"-"+z(this).toString(N);for(var x=_(Math.pow(N,6)),I=this,P="";;){var M=fe(I,x).g;I=ie(I,M.j(x));var V=((0<I.g.length?I.g[0]:I.h)>>>0).toString(N);if(I=M,j(I))return V+P;for(;6>V.length;)V="0"+V;P=V+P}},s.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function j(N){if(N.h!=0)return!1;for(var x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function F(N){return N.h==-1}s.l=function(N){return N=ie(this,N),F(N)?-1:j(N)?0:1};function z(N){for(var x=N.g.length,I=[],P=0;P<x;P++)I[P]=~N.g[P];return new h(I,~N.h).add(S)}s.abs=function(){return F(this)?z(this):this},s.add=function(N){for(var x=Math.max(this.g.length,N.g.length),I=[],P=0,M=0;M<=x;M++){var V=P+(this.i(M)&65535)+(N.i(M)&65535),R=(V>>>16)+(this.i(M)>>>16)+(N.i(M)>>>16);P=R>>>16,V&=65535,R&=65535,I[M]=R<<16|V}return new h(I,I[I.length-1]&-2147483648?-1:0)};function ie(N,x){return N.add(z(x))}s.j=function(N){if(j(this)||j(N))return b;if(F(this))return F(N)?z(this).j(z(N)):z(z(this).j(N));if(F(N))return z(this.j(z(N)));if(0>this.l(C)&&0>N.l(C))return _(this.m()*N.m());for(var x=this.g.length+N.g.length,I=[],P=0;P<2*x;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var M=0;M<N.g.length;M++){var V=this.i(P)>>>16,R=this.i(P)&65535,Ie=N.i(M)>>>16,Oe=N.i(M)&65535;I[2*P+2*M]+=R*Oe,se(I,2*P+2*M),I[2*P+2*M+1]+=V*Oe,se(I,2*P+2*M+1),I[2*P+2*M+1]+=R*Ie,se(I,2*P+2*M+1),I[2*P+2*M+2]+=V*Ie,se(I,2*P+2*M+2)}for(P=0;P<x;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=x;P<2*x;P++)I[P]=0;return new h(I,0)};function se(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function re(N,x){this.g=N,this.h=x}function fe(N,x){if(j(x))throw Error("division by zero");if(j(N))return new re(b,b);if(F(N))return x=fe(z(N),x),new re(z(x.g),z(x.h));if(F(x))return x=fe(N,z(x)),new re(z(x.g),x.h);if(30<N.g.length){if(F(N)||F(x))throw Error("slowDivide_ only works with positive integers.");for(var I=S,P=x;0>=P.l(N);)I=ue(I),P=ue(P);var M=X(I,1),V=X(P,1);for(P=X(P,2),I=X(I,2);!j(P);){var R=V.add(P);0>=R.l(N)&&(M=M.add(I),V=R),P=X(P,1),I=X(I,1)}return x=ie(N,M.j(x)),new re(M,x)}for(M=b;0<=N.l(x);){for(I=Math.max(1,Math.floor(N.m()/x.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),V=_(I),R=V.j(x);F(R)||0<R.l(N);)I-=P,V=_(I),R=V.j(x);j(V)&&(V=S),M=M.add(V),N=ie(N,R)}return new re(M,N)}s.A=function(N){return fe(this,N).h},s.and=function(N){for(var x=Math.max(this.g.length,N.g.length),I=[],P=0;P<x;P++)I[P]=this.i(P)&N.i(P);return new h(I,this.h&N.h)},s.or=function(N){for(var x=Math.max(this.g.length,N.g.length),I=[],P=0;P<x;P++)I[P]=this.i(P)|N.i(P);return new h(I,this.h|N.h)},s.xor=function(N){for(var x=Math.max(this.g.length,N.g.length),I=[],P=0;P<x;P++)I[P]=this.i(P)^N.i(P);return new h(I,this.h^N.h)};function ue(N){for(var x=N.g.length+1,I=[],P=0;P<x;P++)I[P]=N.i(P)<<1|N.i(P-1)>>>31;return new h(I,N.h)}function X(N,x){var I=x>>5;x%=32;for(var P=N.g.length-I,M=[],V=0;V<P;V++)M[V]=0<x?N.i(V+I)>>>x|N.i(V+I+1)<<32-x:N.i(V+I);return new h(M,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,QE=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=w,_i=h}).apply(typeof Xv<"u"?Xv:typeof self<"u"?self:typeof window<"u"?window:{});var ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KE,tc,YE,yd,qm,XE,$E,WE;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,y,v){return u==Array.prototype||u==Object.prototype||(u[y]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ld=="object"&&ld];for(var y=0;y<u.length;++y){var v=u[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,y){if(y)e:{var v=i;u=u.split(".");for(var A=0;A<u.length-1;A++){var U=u[A];if(!(U in v))break e;v=v[U]}u=u[u.length-1],A=v[u],y=y(A),y!=A&&y!=null&&e(v,u,{configurable:!0,writable:!0,value:y})}}function c(u,y){u instanceof String&&(u+="");var v=0,A=!1,U={next:function(){if(!A&&v<u.length){var K=v++;return{value:y(K,u[K]),done:!1}}return A=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(u){return u||function(){return c(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(u){var y=typeof u;return y=y!="object"?y:u?Array.isArray(u)?"array":y:"null",y=="array"||y=="object"&&typeof u.length=="number"}function _(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function w(u,y,v){return u.call.apply(u.bind,arguments)}function b(u,y,v){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,A),u.apply(y,U)}}return function(){return u.apply(y,arguments)}}function S(u,y,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:b,S.apply(null,arguments)}function C(u,y){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function j(u,y){function v(){}v.prototype=y.prototype,u.aa=y.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(A,U,K){for(var ce=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ce[Be-2]=arguments[Be];return y.prototype[U].apply(A,ce)}}function F(u){const y=u.length;if(0<y){const v=Array(y);for(let A=0;A<y;A++)v[A]=u[A];return v}return[]}function z(u,y){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(g(A)){const U=u.length||0,K=A.length||0;u.length=U+K;for(let ce=0;ce<K;ce++)u[U+ce]=A[ce]}else u.push(A)}}class ie{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function se(u){return/^[\s\xa0]*$/.test(u)}function re(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function fe(u){return fe[" "](u),u}fe[" "]=function(){};var ue=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function X(u,y,v){for(const A in u)y.call(v,u[A],A,u)}function N(u,y){for(const v in u)y.call(void 0,u[v],v,u)}function x(u){const y={};for(const v in u)y[v]=u[v];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,y){let v,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(v in A)u[v]=A[v];for(let K=0;K<I.length;K++)v=I[K],Object.prototype.hasOwnProperty.call(A,v)&&(u[v]=A[v])}}function M(u){var y=1;u=u.split(":");const v=[];for(;0<y&&u.length;)v.push(u.shift()),y--;return u.length&&v.push(u.join(":")),v}function V(u){m.setTimeout(()=>{throw u},0)}function R(){var u=pe;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class Ie{constructor(){this.h=this.g=null}add(y,v){const A=Oe.get();A.set(y,v),this.h?this.h.next=A:this.g=A,this.h=A}}var Oe=new ie(()=>new Q,u=>u.reset());class Q{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,Y=!1,pe=new Ie,O=()=>{const u=m.Promise.resolve(void 0);ae=()=>{u.then(J)}};var J=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(v){V(v)}var y=Oe;y.j(u),100>y.h&&(y.h++,u.next=y.g,y.g=u)}Y=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return u})();function Ne(u,y){if(oe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget){if(ue){e:{try{fe(y.nodeName);var U=!0;break e}catch{}U=!1}U||(y=null)}}else v=="mouseover"?y=u.fromElement:v=="mouseout"&&(y=u.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ae[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ne.aa.h.call(this)}}j(Ne,oe);var Ae={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var It="closure_listenable_"+(1e6*Math.random()|0),nt=0;function qn(u,y,v,A,U){this.listener=u,this.proxy=null,this.src=y,this.type=v,this.capture=!!A,this.ha=U,this.key=++nt,this.da=this.fa=!1}function sr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function _r(u){this.src=u,this.g={},this.h=0}_r.prototype.add=function(u,y,v,A,U){var K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);var ce=vr(u,y,A,U);return-1<ce?(y=u[ce],v||(y.fa=!1)):(y=new qn(y,this.src,K,!!A,U),y.fa=v,u.push(y)),y};function ks(u,y){var v=y.type;if(v in u.g){var A=u.g[v],U=Array.prototype.indexOf.call(A,y,void 0),K;(K=0<=U)&&Array.prototype.splice.call(A,U,1),K&&(sr(y),u.g[v].length==0&&(delete u.g[v],u.h--))}}function vr(u,y,v,A){for(var U=0;U<u.length;++U){var K=u[U];if(!K.da&&K.listener==y&&K.capture==!!v&&K.ha==A)return U}return-1}var Er="closure_lm_"+(1e6*Math.random()|0),Kr={};function Aa(u,y,v,A,U){if(Array.isArray(y)){for(var K=0;K<y.length;K++)Aa(u,y[K],v,A,U);return null}return v=Sa(v),u&&u[It]?u.K(y,v,_(A)?!!A.capture:!1,U):wn(u,y,v,!1,A,U)}function wn(u,y,v,A,U,K){if(!y)throw Error("Invalid event type");var ce=_(U)?!!U.capture:!!U,Be=Vs(u);if(Be||(u[Er]=Be=new _r(u)),v=Be.add(y,v,A,ce,K),v.proxy)return v;if(A=Qo(),v.proxy=A,A.src=u,A.listener=v,u.addEventListener)_e||(U=ce),U===void 0&&(U=!1),u.addEventListener(y.toString(),A,U);else if(u.attachEvent)u.attachEvent(Xr(y.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Qo(){function u(v){return y.call(u.src,u.listener,v)}const y=Ko;return u}function Oi(u,y,v,A,U){if(Array.isArray(y))for(var K=0;K<y.length;K++)Oi(u,y[K],v,A,U);else A=_(A)?!!A.capture:!!A,v=Sa(v),u&&u[It]?(u=u.i,y=String(y).toString(),y in u.g&&(K=u.g[y],v=vr(K,v,A,U),-1<v&&(sr(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete u.g[y],u.h--)))):u&&(u=Vs(u))&&(y=u.g[y.toString()],u=-1,y&&(u=vr(y,v,A,U)),(v=-1<u?y[u]:null)&&Yr(v))}function Yr(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[It])ks(y.i,u);else{var v=u.type,A=u.proxy;y.removeEventListener?y.removeEventListener(v,A,u.capture):y.detachEvent?y.detachEvent(Xr(v),A):y.addListener&&y.removeListener&&y.removeListener(A),(v=Vs(y))?(ks(v,u),v.h==0&&(v.src=null,y[Er]=null)):sr(u)}}}function Xr(u){return u in Kr?Kr[u]:Kr[u]="on"+u}function Ko(u,y){if(u.da)u=!0;else{y=new Ne(y,this);var v=u.listener,A=u.ha||u.src;u.fa&&Yr(u),u=v.call(A,y)}return u}function Vs(u){return u=u[Er],u instanceof _r?u:null}var Pi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sa(u){return typeof u=="function"?u:(u[Pi]||(u[Pi]=function(y){return u.handleEvent(y)}),u[Pi])}function ht(){le.call(this),this.i=new _r(this),this.M=this,this.F=null}j(ht,le),ht.prototype[It]=!0,ht.prototype.removeEventListener=function(u,y,v,A){Oi(this,u,y,v,A)};function $e(u,y){var v,A=u.F;if(A)for(v=[];A;A=A.F)v.push(A);if(u=u.M,A=y.type||y,typeof y=="string")y=new oe(y,u);else if(y instanceof oe)y.target=y.target||u;else{var U=y;y=new oe(A,u),P(y,U)}if(U=!0,v)for(var K=v.length-1;0<=K;K--){var ce=y.g=v[K];U=mn(ce,A,!0,y)&&U}if(ce=y.g=u,U=mn(ce,A,!0,y)&&U,U=mn(ce,A,!1,y)&&U,v)for(K=0;K<v.length;K++)ce=y.g=v[K],U=mn(ce,A,!1,y)&&U}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,y;for(y in u.g){for(var v=u.g[y],A=0;A<v.length;A++)sr(v[A]);delete u.g[y],u.h--}}this.F=null},ht.prototype.K=function(u,y,v,A){return this.i.add(String(u),y,!1,v,A)},ht.prototype.L=function(u,y,v,A){return this.i.add(String(u),y,!0,v,A)};function mn(u,y,v,A){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();for(var U=!0,K=0;K<y.length;++K){var ce=y[K];if(ce&&!ce.da&&ce.capture==v){var Be=ce.listener,Lt=ce.ha||ce.src;ce.fa&&ks(u.i,ce),U=Be.call(Lt,A)!==!1&&U}}return U&&!A.defaultPrevented}function Ht(u,y,v){if(typeof u=="function")v&&(u=S(u,v));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(u,y||0)}function xa(u){u.g=Ht(()=>{u.g=null,u.i&&(u.i=!1,xa(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class Yo extends le{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:xa(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(u){le.call(this),this.h=u,this.g={}}j($r,le);var wr=[];function Wr(u){X(u.g,function(y,v){this.g.hasOwnProperty(v)&&Yr(y)},u),u.g={}}$r.prototype.N=function(){$r.aa.N.call(this),Wr(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var In=m.JSON.stringify,Jr=m.JSON.parse,Zr=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function es(){}es.prototype.h=null;function Mi(u){return u.h||(u.h=u.i())}function ki(){}var ir={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ar(){oe.call(this,"d")}j(ar,oe);function Vi(){oe.call(this,"c")}j(Vi,oe);var Bn={},de=null;function me(){return de=de||new ht}Bn.La="serverreachability";function _t(u){oe.call(this,Bn.La,u)}j(_t,oe);function Hn(u){const y=me();$e(y,new _t(y))}Bn.STAT_EVENT="statevent";function or(u,y){oe.call(this,Bn.STAT_EVENT,u),this.stat=y}j(or,oe);function Ze(u){const y=me();$e(y,new or(y,u))}Bn.Ma="timingevent";function jt(u,y){oe.call(this,Bn.Ma,u),this.size=y}j(jt,oe);function Ct(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},y)}function Gn(){this.g=!0}Gn.prototype.xa=function(){this.g=!1};function Xo(u,y,v,A,U,K){u.info(function(){if(u.g)if(K)for(var ce="",Be=K.split("&"),Lt=0;Lt<Be.length;Lt++){var He=Be[Lt].split("=");if(1<He.length){var Ft=He[0];He=He[1];var Ut=Ft.split("_");ce=2<=Ut.length&&Ut[1]=="type"?ce+(Ft+"="+He+"&"):ce+(Ft+"=redacted&")}}else ce=null;else ce=K;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+y+`
`+v+`
`+ce})}function _h(u,y,v,A,U,K,ce){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+y+`
`+v+`
`+K+" "+ce})}function js(u,y,v,A){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+ji(u,v)+(A?" "+A:"")})}function Bc(u,y){u.info(function(){return"TIMEOUT: "+y})}Gn.prototype.info=function(){};function ji(u,y){if(!u.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var A=v[u];if(!(2>A.length)){var U=A[1];if(Array.isArray(U)&&!(1>U.length)){var K=U[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ce=1;ce<U.length;ce++)U[ce]=""}}}}return In(v)}catch{return y}}var Ls={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ts={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tr;function br(){}j(br,es),br.prototype.g=function(){return new XMLHttpRequest},br.prototype.i=function(){return{}},Tr=new br;function gn(u,y,v,A){this.j=u,this.i=y,this.l=v,this.R=A||1,this.U=new $r(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new At}function At(){this.i=null,this.g="",this.h=!1}var $o={},Ra={};function lr(u,y,v){u.L=1,u.v=Bi(Cn(y)),u.m=v,u.P=!0,ns(u,null)}function ns(u,y){u.F=Date.now(),Li(u),u.A=Cn(u.v);var v=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),nl(v.i,"t",A),u.C=0,v=u.j.J,u.h=new At,u.g=su(u.j,v?y:null,!u.m),0<u.O&&(u.M=new Yo(S(u.Y,u,u.g),u.O)),y=u.U,v=u.g,A=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(wr[0]=U.toString()),U=wr);for(var K=0;K<U.length;K++){var ce=Aa(v,U[K],A||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,y)):(u.u="GET",u.g.ea(u.A,u.u,null,y)),Hn(),Xo(u.i,u.u,u.A,u.l,u.R,u.m)}gn.prototype.ca=function(u){u=u.target;const y=this.M;y&&Yn(u)==3?y.j():this.Y(u)},gn.prototype.Y=function(u){try{if(u==this.g)e:{const Ut=Yn(this.g);var y=this.g.Ba();const us=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||$c(this.g)))){this.J||Ut!=4||y==7||(y==8||0>=us?Hn(3):Hn(2)),Us(this);var v=this.g.Z();this.X=v;t:if(Hc(this)){var A=$c(this.g);u="";var U=A.length,K=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wt(this),Ar(this);var ce="";break t}this.h.i=new m.TextDecoder}for(y=0;y<U;y++)this.h.h=!0,u+=this.h.i.decode(A[y],{stream:!(K&&y==U-1)});A.length=0,this.h.g+=u,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=v==200,_h(this.i,this.u,this.A,this.l,this.R,Ut,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,Lt=this.g;if((Be=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(Be)){var He=Be;break t}}He=null}if(v=He)js(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ui(this,v);else{this.o=!1,this.s=3,Ze(12),Wt(this),Ar(this);break e}}if(this.P){v=!0;let Jt;for(;!this.J&&this.C<ce.length;)if(Jt=Gc(this,ce),Jt==Ra){Ut==4&&(this.s=4,Ze(14),v=!1),js(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==$o){this.s=4,Ze(15),js(this.i,this.l,ce,"[Invalid Chunk]"),v=!1;break}else js(this.i,this.l,Jt,null),Ui(this,Jt);if(Hc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||ce.length!=0||this.h.h||(this.s=1,Ze(16),v=!1),this.o=this.o&&v,!v)js(this.i,this.l,ce,"[Invalid Chunked Response]"),Wt(this),Ar(this);else if(0<ce.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),$i(Ft),Ft.M=!0,Ze(11))}}else js(this.i,this.l,ce,null),Ui(this,ce);Ut==4&&Wt(this),this.o&&!this.J&&(Ut==4?tu(this.j,this):(this.o=!1,Li(this)))}else bh(this.g),v==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Ze(12)):(this.s=0,Ze(13)),Wt(this),Ar(this)}}}catch{}finally{}};function Hc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Gc(u,y){var v=u.C,A=y.indexOf(`
`,v);return A==-1?Ra:(v=Number(y.substring(v,A)),isNaN(v)?$o:(A+=1,A+v>y.length?Ra:(y=y.slice(A,A+v),u.C=A+v,y)))}gn.prototype.cancel=function(){this.J=!0,Wt(this)};function Li(u){u.S=Date.now()+u.I,Fc(u,u.I)}function Fc(u,y){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ct(S(u.ba,u),y)}function Us(u){u.B&&(m.clearTimeout(u.B),u.B=null)}gn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Bc(this.i,this.A),this.L!=2&&(Hn(),Ze(17)),Wt(this),this.s=2,Ar(this)):Fc(this,this.S-u)};function Ar(u){u.j.G==0||u.J||tu(u.j,u)}function Wt(u){Us(u);var y=u.M;y&&typeof y.ma=="function"&&y.ma(),u.M=null,Wr(u.U),u.g&&(y=u.g,u.g=null,y.abort(),y.ma())}function Ui(u,y){try{var v=u.j;if(v.G!=0&&(v.g==u||Wo(v.h,u))){if(!u.K&&Wo(v.h,u)&&v.G==3){try{var A=v.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Ua(v),ja(v);else break e;ol(v),Ze(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ct(S(v.Za,v),6e3));if(1>=Ca(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else cs(v,11)}else if((u.K||v.g==u)&&Ua(v),!se(y))for(U=v.Da.g.parse(y),y=0;y<U.length;y++){let He=U[y];if(v.T=He[0],He=He[1],v.G==2)if(He[0]=="c"){v.K=He[1],v.ia=He[2];const Ft=He[3];Ft!=null&&(v.la=Ft,v.j.info("VER="+v.la));const Ut=He[4];Ut!=null&&(v.Aa=Ut,v.j.info("SVER="+v.Aa));const us=He[5];us!=null&&typeof us=="number"&&0<us&&(A=1.5*us,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Jt=u.g;if(Jt){const Dr=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dr){var K=A.h;K.g||Dr.indexOf("spdy")==-1&&Dr.indexOf("quic")==-1&&Dr.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Na(K,K.h),K.h=null))}if(A.D){const cl=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;cl&&(A.ya=cl,it(A.I,A.D,cl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var ce=u;if(A.qa=ru(A,A.J?A.ia:null,A.W),ce.K){pn(A.h,ce);var Be=ce,Lt=A.L;Lt&&(Be.I=Lt),Be.B&&(Us(Be),Li(Be)),A.g=ce}else Zc(A);0<v.i.length&&La(v)}else He[0]!="stop"&&He[0]!="close"||cs(v,7);else v.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?cs(v,7):il(v):He[0]!="noop"&&v.l&&v.l.ta(He),v.v=0)}}Hn(4)}catch{}}var Qc=class{constructor(u,y){this.g=u,this.map=y}};function rs(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ia(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ca(u){return u.h?1:u.g?u.g.size:0}function Wo(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function Na(u,y){u.g?u.g.add(y):u.h=y}function pn(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}rs.prototype.cancel=function(){if(this.i=Jo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Jo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const v of u.g.values())y=y.concat(v.D);return y}return F(u.i)}function vh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var y=[],v=u.length,A=0;A<v;A++)y.push(u[A]);return y}y=[],v=0;for(A in u)y[v++]=u[A];return y}function Da(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var y=[];u=u.length;for(var v=0;v<u;v++)y.push(v);return y}y=[],v=0;for(const A in u)y[v++]=A;return y}}}function Zo(u,y){if(u.forEach&&typeof u.forEach=="function")u.forEach(y,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,y,void 0);else for(var v=Da(u),A=vh(u),U=A.length,K=0;K<U;K++)y.call(void 0,A[K],v&&v[K],u)}var zi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Eh(u,y){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var A=u[v].indexOf("="),U=null;if(0<=A){var K=u[v].substring(0,A);U=u[v].substring(A+1)}else K=u[v];y(K,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Nt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Nt){this.h=u.h,qi(this,u.j),this.o=u.o,this.g=u.g,zs(this,u.s),this.l=u.l;var y=u.i,v=new is;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),ss(this,v),this.m=u.m}else u&&(y=String(u).match(zi))?(this.h=!1,qi(this,y[1]||"",!0),this.o=Fn(y[2]||""),this.g=Fn(y[3]||"",!0),zs(this,y[4]),this.l=Fn(y[5]||"",!0),ss(this,y[6]||"",!0),this.m=Fn(y[7]||"")):(this.h=!1,this.i=new is(null,this.h))}Nt.prototype.toString=function(){var u=[],y=this.j;y&&u.push(Hi(y,el,!0),":");var v=this.g;return(v||y=="file")&&(u.push("//"),(y=this.o)&&u.push(Hi(y,el,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Hi(v,v.charAt(0)=="/"?wh:tl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Hi(v,Oa)),u.join("")};function Cn(u){return new Nt(u)}function qi(u,y,v){u.j=v?Fn(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function zs(u,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);u.s=y}else u.s=null}function ss(u,y,v){y instanceof is?(u.i=y,Yc(u.i,u.h)):(v||(y=Hi(y,Th)),u.i=new is(y,u.h))}function it(u,y,v){u.i.set(y,v)}function Bi(u){return it(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Fn(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Hi(u,y,v){return typeof u=="string"?(u=encodeURI(u).replace(y,Kc),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Kc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var el=/[#\/\?@]/g,tl=/[#\?:]/g,wh=/[#\?]/g,Th=/[#\?@]/g,Oa=/#/g;function is(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function Qn(u){u.g||(u.g=new Map,u.h=0,u.i&&Eh(u.i,function(y,v){u.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=is.prototype,s.add=function(u,y){Qn(this),this.i=null,u=Sr(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(y),this.h+=1,this};function as(u,y){Qn(u),y=Sr(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function os(u,y){return Qn(u),y=Sr(u,y),u.g.has(y)}s.forEach=function(u,y){Qn(this),this.g.forEach(function(v,A){v.forEach(function(U){u.call(y,U,A,this)},this)},this)},s.na=function(){Qn(this);const u=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let A=0;A<y.length;A++){const U=u[A];for(let K=0;K<U.length;K++)v.push(y[A])}return v},s.V=function(u){Qn(this);let y=[];if(typeof u=="string")os(this,u)&&(y=y.concat(this.g.get(Sr(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)y=y.concat(u[v])}return y},s.set=function(u,y){return Qn(this),this.i=null,u=Sr(this,u),os(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},s.get=function(u,y){return u?(u=this.V(u),0<u.length?String(u[0]):y):y};function nl(u,y,v){as(u,y),0<v.length&&(u.i=null,u.g.set(Sr(u,y),F(v)),u.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var A=y[v];const K=encodeURIComponent(String(A)),ce=this.V(A);for(A=0;A<ce.length;A++){var U=K;ce[A]!==""&&(U+="="+encodeURIComponent(String(ce[A]))),u.push(U)}}return this.i=u.join("&")};function Sr(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Yc(u,y){y&&!u.j&&(Qn(u),u.i=null,u.g.forEach(function(v,A){var U=A.toLowerCase();A!=U&&(as(this,A),nl(this,U,v))},u)),u.j=y}function Gi(u,y){const v=new Gn;if(m.Image){const A=new Image;A.onload=C(Kn,v,"TestLoadImage: loaded",!0,y,A),A.onerror=C(Kn,v,"TestLoadImage: error",!1,y,A),A.onabort=C(Kn,v,"TestLoadImage: abort",!1,y,A),A.ontimeout=C(Kn,v,"TestLoadImage: timeout",!1,y,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else y(!1)}function cr(u,y){const v=new Gn,A=new AbortController,U=setTimeout(()=>{A.abort(),Kn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:A.signal}).then(K=>{clearTimeout(U),K.ok?Kn(v,"TestPingServer: ok",!0,y):Kn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),Kn(v,"TestPingServer: error",!1,y)})}function Kn(u,y,v,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(v)}catch{}}function Fi(){this.g=new Zr}function xr(u,y,v){const A=v||"";try{Zo(u,function(U,K){let ce=U;_(U)&&(ce=In(U)),y.push(A+K+"="+encodeURIComponent(ce))})}catch(U){throw y.push(A+"type="+encodeURIComponent("_badmap")),U}}function qs(u){this.l=u.Ub||null,this.j=u.eb||!1}j(qs,es),qs.prototype.g=function(){return new ls(this.l,this.j)},qs.prototype.i=(function(u){return function(){return u}})({});function ls(u,y){ht.call(this),this.D=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(ls,ht),s=ls.prototype,s.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=y,this.readyState=1,Ir(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(y.body=u),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rr(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ir(this)),this.g&&(this.readyState=3,Ir(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function rl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?Rr(this):Ir(this),this.readyState==3&&rl(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,Rr(this))},s.Qa=function(u){this.g&&(this.response=u,Rr(this))},s.ga=function(){this.g&&Rr(this)};function Rr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ir(u)}s.setRequestHeader=function(u,y){this.u.append(u,y)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=y.next();return u.join(`\r
`)};function Ir(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function sl(u){let y="";return X(u,function(v,A){y+=A,y+=":",y+=v,y+=`\r
`}),y}function Gt(u,y,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=sl(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):it(u,y,v))}function et(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(et,ht);var Pa=/^https?$/i,Qi=["POST","PUT"];s=et.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,y,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tr.g(),this.v=this.o?Mi(this.o):Mi(Tr),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(K){Xc(this,K);return}if(u=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)v.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())v.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),U=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Qi,y,void 0))||A||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ce]of v)this.g.setRequestHeader(K,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ki(this),this.u=!0,this.g.send(u),this.u=!1}catch(K){Xc(this,K)}};function Xc(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.m=5,Ma(u),Cr(u)}function Ma(u){u.A||(u.A=!0,$e(u,"complete"),$e(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,$e(this,"complete"),$e(this,"abort"),Cr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cr(this,!0)),et.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?ka(this):this.bb())},s.bb=function(){ka(this)};function ka(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Yn(u)!=4||u.Z()!=2)){if(u.u&&Yn(u)==4)Ht(u.Ea,0,u);else if($e(u,"readystatechange"),Yn(u)==4){u.h=!1;try{const ce=u.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var A;if(A=ce===0){var U=String(u.D).match(zi)[1]||null;!U&&m.self&&m.self.location&&(U=m.self.location.protocol.slice(0,-1)),A=!Pa.test(U?U.toLowerCase():"")}v=A}if(v)$e(u,"complete"),$e(u,"success");else{u.m=6;try{var K=2<Yn(u)?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.Z()+"]",Ma(u)}}finally{Cr(u)}}}}function Cr(u,y){if(u.g){Ki(u);const v=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,y||$e(u,"ready");try{v.onreadystatechange=A}catch{}}}function Ki(u){u.I&&(m.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function Yn(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),Jr(y)}};function $c(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function bh(u){const y={};u=(u.g&&2<=Yn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(se(u[A]))continue;var v=M(u[A]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=y[U]||[];y[U]=K,K.push(v)}N(y,function(A){return A.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yi(u,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||y}function Va(u){this.Aa=0,this.i=[],this.j=new Gn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yi("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yi("baseRetryDelayMs",5e3,u),this.cb=Yi("retryDelaySeedMs",1e4,u),this.Wa=Yi("forwardChannelMaxRetries",2,u),this.wa=Yi("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new rs(u&&u.concurrentRequestLimit),this.Da=new Fi,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Va.prototype,s.la=8,s.G=1,s.connect=function(u,y,v,A){Ze(0),this.W=u,this.H=y||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=ru(this,null,this.W),La(this)};function il(u){if(Wc(u),u.G==3){var y=u.U++,v=Cn(u.I);if(it(v,"SID",u.K),it(v,"RID",y),it(v,"TYPE","terminate"),Xi(u,v),y=new gn(u,u.j,y),y.L=2,y.v=Bi(Cn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=su(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Li(y)}nu(u)}function ja(u){u.g&&($i(u),u.g.cancel(),u.g=null)}function Wc(u){ja(u),u.u&&(m.clearTimeout(u.u),u.u=null),Ua(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function La(u){if(!Ia(u.h)&&!u.s){u.s=!0;var y=u.Ga;ae||O(),Y||(ae(),Y=!0),pe.add(y,u),u.B=0}}function Ah(u,y){return Ca(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=y.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ct(S(u.Ga,u,y),ll(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new gn(this,this.j,u);let K=this.o;if(this.S&&(K?(K=x(K),P(K,this.S)):K=this.S),this.m!==null||this.O||(U.H=K,K=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Jc(this,U,y),v=Cn(this.I),it(v,"RID",u),it(v,"CVER",22),this.D&&it(v,"X-HTTP-Session-Id",this.D),Xi(this,v),K&&(this.O?y="headers="+encodeURIComponent(String(sl(K)))+"&"+y:this.m&&Gt(v,this.m,K)),Na(this.h,U),this.Ua&&it(v,"TYPE","init"),this.P?(it(v,"$req",y),it(v,"SID","null"),U.T=!0,lr(U,v,null)):lr(U,v,y),this.G=2}}else this.G==3&&(u?al(this,u):this.i.length==0||Ia(this.h)||al(this))};function al(u,y){var v;y?v=y.l:v=u.U++;const A=Cn(u.I);it(A,"SID",u.K),it(A,"RID",v),it(A,"AID",u.T),Xi(u,A),u.m&&u.o&&Gt(A,u.m,u.o),v=new gn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),y&&(u.i=y.D.concat(u.i)),y=Jc(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Na(u.h,v),lr(v,A,y)}function Xi(u,y){u.H&&X(u.H,function(v,A){it(y,A,v)}),u.l&&Zo({},function(v,A){it(y,A,v)})}function Jc(u,y,v){v=Math.min(u.i.length,v);var A=u.l?S(u.l.Na,u.l,u):null;e:{var U=u.i;let K=-1;for(;;){const ce=["count="+v];K==-1?0<v?(K=U[0].g,ce.push("ofs="+K)):K=0:ce.push("ofs="+K);let Be=!0;for(let Lt=0;Lt<v;Lt++){let He=U[Lt].g;const Ft=U[Lt].map;if(He-=K,0>He)K=Math.max(0,U[Lt].g-100),Be=!1;else try{xr(Ft,ce,"req"+He+"_")}catch{A&&A(Ft)}}if(Be){A=ce.join("&");break e}}}return u=u.i.splice(0,v),y.D=u,A}function Zc(u){if(!u.g&&!u.u){u.Y=1;var y=u.Fa;ae||O(),Y||(ae(),Y=!0),pe.add(y,u),u.v=0}}function ol(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ct(S(u.Fa,u),ll(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,eu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ct(S(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ze(10),ja(this),eu(this))};function $i(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function eu(u){u.g=new gn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var y=Cn(u.qa);it(y,"RID","rpc"),it(y,"SID",u.K),it(y,"AID",u.T),it(y,"CI",u.F?"0":"1"),!u.F&&u.ja&&it(y,"TO",u.ja),it(y,"TYPE","xmlhttp"),Xi(u,y),u.m&&u.o&&Gt(y,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Bi(Cn(y)),v.m=null,v.P=!0,ns(v,u)}s.Za=function(){this.C!=null&&(this.C=null,ja(this),ol(this),Ze(19))};function Ua(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function tu(u,y){var v=null;if(u.g==y){Ua(u),$i(u),u.g=null;var A=2}else if(Wo(u.h,y))v=y.D,pn(u.h,y),A=1;else return;if(u.G!=0){if(y.o)if(A==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var U=u.B;A=me(),$e(A,new jt(A,v)),La(u)}else Zc(u);else if(U=y.s,U==3||U==0&&0<y.X||!(A==1&&Ah(u,y)||A==2&&ol(u)))switch(v&&0<v.length&&(y=u.h,y.i=y.i.concat(v)),U){case 1:cs(u,5);break;case 4:cs(u,10);break;case 3:cs(u,6);break;default:cs(u,2)}}}function ll(u,y){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*y}function cs(u,y){if(u.j.info("Error code "+y),y==2){var v=S(u.fb,u),A=u.Xa;const U=!A;A=new Nt(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||qi(A,"https"),Bi(A),U?Gi(A.toString(),v):cr(A.toString(),v)}else Ze(2);u.G=0,u.l&&u.l.sa(y),nu(u),Wc(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function nu(u){if(u.G=0,u.ka=[],u.l){const y=Jo(u.h);(y.length!=0||u.i.length!=0)&&(z(u.ka,y),z(u.ka,u.i),u.h.i.length=0,F(u.i),u.i.length=0),u.l.ra()}}function ru(u,y,v){var A=v instanceof Nt?Cn(v):new Nt(v);if(A.g!="")y&&(A.g=y+"."+A.g),zs(A,A.s);else{var U=m.location;A=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;var K=new Nt(null);A&&qi(K,A),y&&(K.g=y),U&&zs(K,U),v&&(K.l=v),A=K}return v=u.D,y=u.ya,v&&y&&it(A,v,y),it(A,"VER",u.la),Xi(u,A),A}function su(u,y,v){if(y&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Ca&&!u.pa?new et(new qs({eb:v})):new et(u.pa),y.Ha(u.J),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function iu(){}s=iu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function za(){}za.prototype.g=function(u,y){return new yn(u,y)};function yn(u,y){ht.call(this),this.g=new Va(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(u?u["X-WebChannel-Client-Profile"]=y.va:u={"X-WebChannel-Client-Profile":y.va}),this.g.S=u,(u=y&&y.Sb)&&!se(u)&&(this.g.m=u),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!se(y)&&(this.g.D=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new Nr(this)}j(yn,ht),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){il(this.g)},yn.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=In(u),u=v);y.i.push(new Qc(y.Ya++,u)),y.G==3&&La(y)},yn.prototype.N=function(){this.g.l=null,delete this.j,il(this.g),delete this.g,yn.aa.N.call(this)};function au(u){ar.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const v in y){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}j(au,ar);function ou(){Vi.call(this),this.status=1}j(ou,Vi);function Nr(u){this.g=u}j(Nr,iu),Nr.prototype.ua=function(){$e(this.g,"a")},Nr.prototype.ta=function(u){$e(this.g,new au(u))},Nr.prototype.sa=function(u){$e(this.g,new ou)},Nr.prototype.ra=function(){$e(this.g,"b")},za.prototype.createWebChannel=za.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,WE=function(){return new za},$E=function(){return me()},XE=Bn,qm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ls.NO_ERROR=0,Ls.TIMEOUT=8,Ls.HTTP_ERROR=6,yd=Ls,ts.COMPLETE="complete",YE=ts,ki.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",ht.prototype.listen=ht.prototype.K,tc=ki,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,KE=et}).apply(typeof ld<"u"?ld:typeof self<"u"?self:typeof window<"u"?window:{});const $v="@firebase/firestore",Wv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new dg("@firebase/firestore");function po(){return ya.logLevel}function ge(s,...e){if(ya.logLevel<=Ue.DEBUG){const t=e.map(mg);ya.debug(`Firestore (${Uo}): ${s}`,...t)}}function Is(s,...e){if(ya.logLevel<=Ue.ERROR){const t=e.map(mg);ya.error(`Firestore (${Uo}): ${s}`,...t)}}function Co(s,...e){if(ya.logLevel<=Ue.WARN){const t=e.map(mg);ya.warn(`Firestore (${Uo}): ${s}`,...t)}}function mg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,JE(s,i,t)}function JE(s,e,t){let i=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Is(i),new Error(i)}function Qe(s,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,s||JE(e,o,i)}function Ce(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Os{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(dn.UNAUTHENTICATED)))}shutdown(){}}class mR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class gR{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let c=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Lr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Lr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string",31837,{l:i}),new ZE(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new dn(e)}}class pR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new pR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Jv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _R{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const i=c=>{c.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,ge("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Jv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Jv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=vR(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<t&&(i+=e.charAt(o[c]%62))}return i}}function ze(s,e){return s<e?-1:s>e?1:0}function Bm(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const o=s.charAt(i),c=e.charAt(i);if(o!==c)return Im(o)===Im(c)?ze(o,c):Im(o)?1:-1}return ze(s.length,e.length)}const ER=55296,wR=57343;function Im(s){const e=s.charCodeAt(0);return e>=ER&&e<=wR}function No(s,e,t){return s.length===e.length&&s.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="__name__";class jr{constructor(e,t,i){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&we(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return jr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const c=jr.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return ze(e.length,t.length)}static compareSegments(e,t){const i=jr.isNumericId(e),o=jr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?jr.extractNumericId(e).compare(jr.extractNumericId(t)):Bm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _i.fromString(e.substring(4,e.length-2))}}class ct extends jr{construct(e,t,i){return new ct(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he($.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new ct(t)}static emptyPath(){return new ct([])}}const TR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends jr{construct(e,t,i){return new rn(e,t,i)}static isValidIdentifier(e){return TR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zv}static keyField(){return new rn([Zv])}static fromServerFormat(e){const t=[];let i="",o=0;const c=()=>{if(i.length===0)throw new he($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(i+=m,o++):(c(),o++)}if(c(),h)throw new he($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(t)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ct.fromString(e))}static fromName(e){return new Ee(ct.fromString(e).popFirst(5))}static empty(){return new Ee(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(s,e,t){if(!t)throw new he($.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function bR(s,e,t,i){if(e===!0&&i===!0)throw new he($.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function e0(s){if(!Ee.isDocumentKey(s))throw new he($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function t0(s){if(Ee.isDocumentKey(s))throw new he($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function tw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Jd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":we(12329,{type:typeof s})}function gr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new he($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jd(s);throw new he($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function AR(s,e){if(e<=0)throw new he($.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(s,e){const t={typeString:s};return e&&(t.value=e),t}function Ic(s,e){if(!tw(s))throw new he($.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const h=s[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){t=`Expected '${i}' field to equal '${c.value}'`;break}}if(t)throw new he($.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=-62135596800,r0=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*r0);return new Ke(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<n0)throw new he($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/r0}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ic(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-n0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:Vt("string",Ke._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Ke(0,0))}static max(){return new Se(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=-1;function SR(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(i===1e9?new Ke(t+1,0):new Ke(t,i));return new Ti(o,Ee.empty(),e)}function xR(s){return new Ti(s.readTime,s.key,gc)}class Ti{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ti(Se.min(),Ee.empty(),gc)}static max(){return new Ti(Se.max(),Ee.empty(),gc)}}function RR(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(s.documentKey,e.documentKey),t!==0?t:ze(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(s){if(s.code!==$.FAILED_PRECONDITION||s.message!==IR)throw s;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,i)=>{t(e)}))}static reject(e){return new ne(((t,i)=>{i(e)}))}static waitFor(e){return new ne(((t,i)=>{let o=0,c=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++c,h&&c===o&&t()}),(g=>i(g)))})),h=!0,c===o&&t()}))}static or(e){let t=ne.resolve(!1);for(const i of e)t=t.next((o=>o?ne.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,c)=>{i.push(t.call(this,o,c))})),this.waitFor(i)}static mapArray(e,t){return new ne(((i,o)=>{const c=e.length,h=new Array(c);let m=0;for(let g=0;g<c;g++){const _=g;t(e[_]).next((w=>{h[_]=w,++m,m===c&&i(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new ne(((i,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):i()};c()}))}}function NR(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function qo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg=-1;function Cc(s){return s==null}function Cd(s){return s===0&&1/s==-1/0}function DR(s){return typeof s=="number"&&Number.isInteger(s)&&!Cd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="";function OR(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=s0(e)),e=PR(s.get(t),e);return s0(e)}function PR(s,e){let t=e;const i=s.length;for(let o=0;o<i;o++){const c=s.charAt(o);switch(c){case"\0":t+="";break;case nw:t+="";break;default:t+=c}}return t}function s0(s){return s+nw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Ci(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function rw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){this.comparator=e,this.root=t||nn.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cd(this.root,e,this.comparator,!1)}getReverseIterator(){return new cd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cd(this.root,e,this.comparator,!0)}}class cd{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,t,i,o,c){this.key=e,this.value=t,this.color=i??nn.RED,this.left=o??nn.EMPTY,this.right=c??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,c){return new nn(e??this.key,t??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,i),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return nn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,i,o,c){return this}insert(e,t,i){return new nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new a0(this.data.getIterator())}getIteratorFrom(e){return new a0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class a0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Un([])}unionWith(e){let t=new Bt(rn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Un(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new sw("Invalid base64 string: "+c):c}})(e);return new sn(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(e);return new sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const MR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bi(s){if(Qe(!!s,39018),typeof s=="string"){let e=0;const t=MR.exec(s);if(Qe(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Rt(s.seconds),nanos:Rt(s.nanos)}}function Rt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ai(s){return typeof s=="string"?sn.fromBase64String(s):sn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="server_timestamp",aw="__type__",ow="__previous_value__",lw="__local_write_time__";function yg(s){var t,i;return((i=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[aw])==null?void 0:i.stringValue)===iw}function eh(s){const e=s.mapValue.fields[ow];return yg(e)?eh(e):e}function pc(s){const e=bi(s.mapValue.fields[lw].timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,t,i,o,c,h,m,g,_,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=w}}const Nd="(default)";class yc{constructor(e,t){this.projectId=e,this.database=t||Nd}static empty(){return new yc("","")}get isDefaultDatabase(){return this.database===Nd}isEqual(e){return e instanceof yc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="__type__",VR="__max__",ud={mapValue:{}},uw="__vector__",Dd="value";function Si(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?yg(s)?4:LR(s)?9007199254740991:jR(s)?10:11:we(28295,{value:s})}function Gr(s,e){if(s===e)return!0;const t=Si(s);if(t!==Si(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return pc(s).isEqual(pc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=bi(o.timestampValue),m=bi(c.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,c){return Ai(o.bytesValue).isEqual(Ai(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,c){return Rt(o.geoPointValue.latitude)===Rt(c.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(c.geoPointValue.longitude)})(s,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Rt(o.integerValue)===Rt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=Rt(o.doubleValue),m=Rt(c.doubleValue);return h===m?Cd(h)===Cd(m):isNaN(h)&&isNaN(m)}return!1})(s,e);case 9:return No(s.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},m=c.mapValue.fields||{};if(i0(h)!==i0(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!Gr(h[g],m[g])))return!1;return!0})(s,e);default:return we(52216,{left:s})}}function _c(s,e){return(s.values||[]).find((t=>Gr(t,e)))!==void 0}function Do(s,e){if(s===e)return 0;const t=Si(s),i=Si(e);if(t!==i)return ze(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(s.booleanValue,e.booleanValue);case 2:return(function(c,h){const m=Rt(c.integerValue||c.doubleValue),g=Rt(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return o0(s.timestampValue,e.timestampValue);case 4:return o0(pc(s),pc(e));case 5:return Bm(s.stringValue,e.stringValue);case 6:return(function(c,h){const m=Ai(c),g=Ai(h);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(c,h){const m=c.split("/"),g=h.split("/");for(let _=0;_<m.length&&_<g.length;_++){const w=ze(m[_],g[_]);if(w!==0)return w}return ze(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,h){const m=ze(Rt(c.latitude),Rt(h.latitude));return m!==0?m:ze(Rt(c.longitude),Rt(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return l0(s.arrayValue,e.arrayValue);case 10:return(function(c,h){var S,C,j,F;const m=c.fields||{},g=h.fields||{},_=(S=m[Dd])==null?void 0:S.arrayValue,w=(C=g[Dd])==null?void 0:C.arrayValue,b=ze(((j=_==null?void 0:_.values)==null?void 0:j.length)||0,((F=w==null?void 0:w.values)==null?void 0:F.length)||0);return b!==0?b:l0(_,w)})(s.mapValue,e.mapValue);case 11:return(function(c,h){if(c===ud.mapValue&&h===ud.mapValue)return 0;if(c===ud.mapValue)return 1;if(h===ud.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),_=h.fields||{},w=Object.keys(_);g.sort(),w.sort();for(let b=0;b<g.length&&b<w.length;++b){const S=Bm(g[b],w[b]);if(S!==0)return S;const C=Do(m[g[b]],_[w[b]]);if(C!==0)return C}return ze(g.length,w.length)})(s.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function o0(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ze(s,e);const t=bi(s),i=bi(e),o=ze(t.seconds,i.seconds);return o!==0?o:ze(t.nanos,i.nanos)}function l0(s,e){const t=s.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const c=Do(t[o],i[o]);if(c)return c}return ze(t.length,i.length)}function Oo(s){return Hm(s)}function Hm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=bi(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Ai(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Ee.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",o=!0;for(const c of t.values||[])o?o=!1:i+=",",i+=Hm(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const h of i)c?c=!1:o+=",",o+=`${h}:${Hm(t.fields[h])}`;return o+"}"})(s.mapValue):we(61005,{value:s})}function _d(s){switch(Si(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=eh(s);return e?16+_d(e):16;case 5:return 2*s.stringValue.length;case 6:return Ai(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,c)=>o+_d(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let o=0;return Ci(i.fields,((c,h)=>{o+=c.length+_d(h)})),o})(s.mapValue);default:throw we(13486,{value:s})}}function c0(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Gm(s){return!!s&&"integerValue"in s}function _g(s){return!!s&&"arrayValue"in s}function u0(s){return!!s&&"nullValue"in s}function d0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function vd(s){return!!s&&"mapValue"in s}function jR(s){var t,i;return((i=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[cw])==null?void 0:i.stringValue)===uw}function oc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ci(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=oc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oc(s.arrayValue.values[t]);return e}return{...s}}function LR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===VR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!vd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oc(t)}setAll(e){let t=rn.emptyPath(),i={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}h?i[m.lastSegment()]=oc(h):o.push(m.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,i,o)}delete(e){const t=this.field(e.popLast());vd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];vd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ci(t,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new vn(oc(this.value))}}function dw(s){const e=[];return Ci(s.fields,((t,i)=>{const o=new rn([t]);if(vd(i)){const c=dw(i.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)})),new Un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,i,o,c,h,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=c,this.data=h,this.documentState=m}static newInvalidDocument(e){return new $t(e,0,Se.min(),Se.min(),Se.min(),vn.empty(),0)}static newFoundDocument(e,t,i,o){return new $t(e,1,t,Se.min(),i,o,0)}static newNoDocument(e,t){return new $t(e,2,t,Se.min(),Se.min(),vn.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Se.min(),Se.min(),vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,t){this.position=e,this.inclusive=t}}function h0(s,e,t){let i=0;for(let o=0;o<s.position.length;o++){const c=e[o],h=s.position[o];if(c.field.isKeyField()?i=Ee.comparator(Ee.fromName(h.referenceValue),t.key):i=Do(h,t.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function f0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Gr(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t="asc"){this.field=e,this.dir=t}}function UR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{}class kt extends hw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new qR(e,t,i):t==="array-contains"?new GR(e,i):t==="in"?new FR(e,i):t==="not-in"?new QR(e,i):t==="array-contains-any"?new KR(e,i):new kt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new BR(e,i):new HR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Do(t,this.value)):t!==null&&Si(this.value)===Si(t)&&this.matchesComparison(Do(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pr extends hw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new pr(e,t)}matches(e){return fw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fw(s){return s.op==="and"}function mw(s){return zR(s)&&fw(s)}function zR(s){for(const e of s.filters)if(e instanceof pr)return!1;return!0}function Fm(s){if(s instanceof kt)return s.field.canonicalString()+s.op.toString()+Oo(s.value);if(mw(s))return s.filters.map((e=>Fm(e))).join(",");{const e=s.filters.map((t=>Fm(t))).join(",");return`${s.op}(${e})`}}function gw(s,e){return s instanceof kt?(function(i,o){return o instanceof kt&&i.op===o.op&&i.field.isEqual(o.field)&&Gr(i.value,o.value)})(s,e):s instanceof pr?(function(i,o){return o instanceof pr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,h,m)=>c&&gw(h,o.filters[m])),!0):!1})(s,e):void we(19439)}function pw(s){return s instanceof kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Oo(t.value)}`})(s):s instanceof pr?(function(t){return t.op.toString()+" {"+t.getFilters().map(pw).join(" ,")+"}"})(s):"Filter"}class qR extends kt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class BR extends kt{constructor(e,t){super(e,"in",t),this.keys=yw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class HR extends kt{constructor(e,t){super(e,"not-in",t),this.keys=yw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yw(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class GR extends kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _g(t)&&_c(t.arrayValue,this.value)}}class FR extends kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_c(this.value.arrayValue,t)}}class QR extends kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(_c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_c(this.value.arrayValue,t)}}class KR extends kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_g(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>_c(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t=null,i=[],o=[],c=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=h,this.endAt=m,this.Te=null}}function m0(s,e=null,t=[],i=[],o=null,c=null,h=null){return new YR(s,e,t,i,o,c,h)}function vg(s){const e=Ce(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Fm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),Cc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Oo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Oo(i))).join(",")),e.Te=t}return e.Te}function Eg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!UR(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!gw(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!f0(s.startAt,e.startAt)&&f0(s.endAt,e.endAt)}function Qm(s){return Ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,t=null,i=[],o=[],c=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function XR(s,e,t,i,o,c,h,m){return new Bo(s,e,t,i,o,c,h,m)}function wg(s){return new Bo(s)}function g0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function _w(s){return s.collectionGroup!==null}function lc(s){const e=Ce(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Bt(rn.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new vc(c,i))})),t.has(rn.keyField().canonicalString())||e.Ie.push(new vc(rn.keyField(),i))}return e.Ie}function Ur(s){const e=Ce(s);return e.Ee||(e.Ee=$R(e,lc(s))),e.Ee}function $R(s,e){if(s.limitType==="F")return m0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new vc(o.field,c)}));const t=s.endAt?new Od(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Od(s.startAt.position,s.startAt.inclusive):null;return m0(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function Km(s,e){const t=s.filters.concat([e]);return new Bo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Pd(s,e,t){return new Bo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function th(s,e){return Eg(Ur(s),Ur(e))&&s.limitType===e.limitType}function vw(s){return`${vg(Ur(s))}|lt:${s.limitType}`}function yo(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>pw(o))).join(", ")}]`),Cc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Oo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Oo(o))).join(",")),`Target(${i})`})(Ur(s))}; limitType=${s.limitType})`}function nh(s,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Ee.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,o){for(const c of lc(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(h,m,g){const _=h0(h,m,g);return h.inclusive?_<=0:_<0})(i.startAt,lc(i),o)||i.endAt&&!(function(h,m,g){const _=h0(h,m,g);return h.inclusive?_>=0:_>0})(i.endAt,lc(i),o))})(s,e)}function WR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Ew(s){return(e,t)=>{let i=!1;for(const o of lc(s)){const c=JR(o,e,t);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function JR(s,e,t){const i=s.field.isKeyField()?Ee.comparator(e.key,t.key):(function(c,h,m){const g=h.data.field(c),_=m.data.field(c);return g!==null&&_!==null?Do(g,_):we(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ci(this.inner,((t,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return rw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new yt(Ee.comparator);function Cs(){return ZR}const ww=new yt(Ee.comparator);function nc(...s){let e=ww;for(const t of s)e=e.insert(t.key,t);return e}function Tw(s){let e=ww;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function fa(){return cc()}function bw(){return cc()}function cc(){return new Ea((s=>s.toString()),((s,e)=>s.isEqual(e)))}const e1=new yt(Ee.comparator),t1=new Bt(Ee.comparator);function qe(...s){let e=t1;for(const t of s)e=e.add(t);return e}const n1=new Bt(ze);function r1(){return n1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cd(e)?"-0":e}}function Aw(s){return{integerValue:""+s}}function Sw(s,e){return DR(e)?Aw(e):Tg(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(){this._=void 0}}function s1(s,e,t){return s instanceof Md?(function(o,c){const h={fields:{[aw]:{stringValue:iw},[lw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&yg(c)&&(c=eh(c)),c&&(h.fields[ow]=c),{mapValue:h}})(t,e):s instanceof Ec?Rw(s,e):s instanceof wc?Iw(s,e):(function(o,c){const h=xw(o,c),m=p0(h)+p0(o.Ae);return Gm(h)&&Gm(o.Ae)?Aw(m):Tg(o.serializer,m)})(s,e)}function i1(s,e,t){return s instanceof Ec?Rw(s,e):s instanceof wc?Iw(s,e):t}function xw(s,e){return s instanceof Tc?(function(i){return Gm(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class Md extends rh{}class Ec extends rh{constructor(e){super(),this.elements=e}}function Rw(s,e){const t=Cw(e);for(const i of s.elements)t.some((o=>Gr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class wc extends rh{constructor(e){super(),this.elements=e}}function Iw(s,e){let t=Cw(e);for(const i of s.elements)t=t.filter((o=>!Gr(o,i)));return{arrayValue:{values:t}}}class Tc extends rh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function p0(s){return Rt(s.integerValue||s.doubleValue)}function Cw(s){return _g(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,t){this.field=e,this.transform=t}}function o1(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof Ec&&o instanceof Ec||i instanceof wc&&o instanceof wc?No(i.elements,o.elements,Gr):i instanceof Tc&&o instanceof Tc?Gr(i.Ae,o.Ae):i instanceof Md&&o instanceof Md})(s.transform,e.transform)}class l1{constructor(e,t){this.version=e,this.transformResults=t}}class hn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ed(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class sh{}function Nw(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new bg(s.key,hn.none()):new Nc(s.key,s.data,hn.none());{const t=s.data,i=vn.empty();let o=new Bt(rn.comparator);for(let c of e.fields)if(!o.has(c)){let h=t.field(c);h===null&&c.length>1&&(c=c.popLast(),h=t.field(c)),h===null?i.delete(c):i.set(c,h),o=o.add(c)}return new Ni(s.key,i,new Un(o.toArray()),hn.none())}}function c1(s,e,t){s instanceof Nc?(function(o,c,h){const m=o.value.clone(),g=_0(o.fieldTransforms,c,h.transformResults);m.setAll(g),c.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(s,e,t):s instanceof Ni?(function(o,c,h){if(!Ed(o.precondition,c))return void c.convertToUnknownDocument(h.version);const m=_0(o.fieldTransforms,c,h.transformResults),g=c.data;g.setAll(Dw(o)),g.setAll(m),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,t):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function uc(s,e,t,i){return s instanceof Nc?(function(c,h,m,g){if(!Ed(c.precondition,h))return m;const _=c.value.clone(),w=v0(c.fieldTransforms,g,h);return _.setAll(w),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(s,e,t,i):s instanceof Ni?(function(c,h,m,g){if(!Ed(c.precondition,h))return m;const _=v0(c.fieldTransforms,g,h),w=h.data;return w.setAll(Dw(c)),w.setAll(_),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(s,e,t,i):(function(c,h,m){return Ed(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(s,e,t)}function u1(s,e){let t=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),c=xw(i.transform,o||null);c!=null&&(t===null&&(t=vn.empty()),t.set(i.field,c))}return t||null}function y0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&No(i,o,((c,h)=>o1(c,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Nc extends sh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ni extends sh{constructor(e,t,i,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Dw(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function _0(s,e,t){const i=new Map;Qe(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const c=s[o],h=c.transform,m=e.data.field(c.field);i.set(c.field,i1(h,m,t[o]))}return i}function v0(s,e,t){const i=new Map;for(const o of s){const c=o.transform,h=t.data.field(o.field);i.set(o.field,s1(c,h,e))}return i}class bg extends sh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ow extends sh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&c1(c,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=uc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=uc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=bw();return this.mutations.forEach((o=>{const c=e.get(o.key),h=c.overlayedDocument;let m=this.applyToLocalView(h,c.mutatedFields);m=t.has(o.key)?null:m;const g=Nw(h,m);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Se.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),qe())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,((t,i)=>y0(t,i)))&&No(this.baseMutations,e.baseMutations,((t,i)=>y0(t,i)))}}class Ag{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Qe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return e1})();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,i[h].version);return new Ag(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Fe;function Pw(s){switch(s){case $.OK:return we(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return we(15467,{code:s})}}function Mw(s){if(s===void 0)return Is("GRPC error has no .code"),$.UNKNOWN;switch(s){case Pt.OK:return $.OK;case Pt.CANCELLED:return $.CANCELLED;case Pt.UNKNOWN:return $.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return $.INTERNAL;case Pt.UNAVAILABLE:return $.UNAVAILABLE;case Pt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Pt.NOT_FOUND:return $.NOT_FOUND;case Pt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Pt.ABORTED:return $.ABORTED;case Pt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Pt.DATA_LOSS:return $.DATA_LOSS;default:return we(39323,{code:s})}}(Fe=Pt||(Pt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=new _i([4294967295,4294967295],0);function E0(s){const e=m1().encode(s),t=new QE;return t.update(e),new Uint8Array(t.digest())}function w0(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new _i([t,i],0),new _i([o,c],0)]}class Sg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new rc(`Invalid padding: ${t}`);if(i<0)throw new rc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new rc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new rc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_i.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(_i.fromNumber(i)));return o.compare(g1)===1&&(o=new _i([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=E0(e),[i,o]=w0(t);for(let c=0;c<this.hashCount;c++){const h=this.ye(i,o,c);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new Sg(c,o,t);return i.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const t=E0(e),[i,o]=w0(t);for(let c=0;c<this.hashCount;c++){const h=this.ye(i,o,c);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class rc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t,i,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Dc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new ih(Se.min(),o,new yt(ze),Cs(),qe())}}class Dc{constructor(e,t,i,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Dc(i,t,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class kw{constructor(e,t){this.targetId=e,this.Ce=t}}class Vw{constructor(e,t,i=sn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class T0{constructor(){this.ve=0,this.Fe=b0(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),t=qe(),i=qe();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:we(38017,{changeType:c})}})),new Dc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=b0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class p1{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cs(),this.Je=dd(),this.He=dd(),this.Ye=new yt(ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(Qm(c))if(i===0){const h=new Ee(c.path);this.et(t,h,$t.newNoDocument(h,Se.min()))}else Qe(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const m=this.ut(e),g=m?this.ct(m,e,h):1;if(g!==0){this.it(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,_)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=t;let h,m;try{h=Ai(i).toUint8Array()}catch(g){if(g instanceof sw)return Co("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Sg(h,o,c)}catch(g){return Co(g instanceof rc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((c=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,h)=>{const m=this.ot(h);if(m){if(c.current&&Qm(m.target)){const g=new Ee(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,$t.newNoDocument(g,e))}c.Be&&(t.set(h,c.ke()),c.qe())}}));let i=qe();this.He.forEach(((c,h)=>{let m=!0;h.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(e)));const o=new ih(e,t,this.Ye,this.je,i);return this.je=Cs(),this.Je=dd(),this.He=dd(),this.Ye=new yt(ze),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new T0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Bt(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Bt(ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new T0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function dd(){return new yt(Ee.comparator)}function b0(){return new yt(Ee.comparator)}const y1={asc:"ASCENDING",desc:"DESCENDING"},_1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v1={and:"AND",or:"OR"};class E1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ym(s,e){return s.useProto3Json||Cc(e)?e:{value:e}}function kd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jw(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function w1(s,e){return kd(s,e.toTimestamp())}function zn(s){return Qe(!!s,49232),Se.fromTimestamp((function(t){const i=bi(t);return new Ke(i.seconds,i.nanos)})(s))}function xg(s,e){return Xm(s,e).canonicalString()}function Xm(s,e){const t=(function(o){return new ct(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function Lw(s){const e=ct.fromString(s);return Qe(Gw(e),10190,{key:e.toString()}),e}function Vd(s,e){return xg(s.databaseId,e.path)}function dc(s,e){const t=Lw(e);if(t.get(1)!==s.databaseId.projectId)throw new he($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new he($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Ee(zw(t))}function Uw(s,e){return xg(s.databaseId,e)}function T1(s){const e=Lw(s);return e.length===4?ct.emptyPath():zw(e)}function $m(s){return new ct(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function zw(s){return Qe(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function A0(s,e,t){return{name:Vd(s,e),fields:t.value.mapValue.fields}}function b1(s,e){return"found"in e?(function(i,o){Qe(!!o.found,43571),o.found.name,o.found.updateTime;const c=dc(i,o.found.name),h=zn(o.found.updateTime),m=o.found.createTime?zn(o.found.createTime):Se.min(),g=new vn({mapValue:{fields:o.found.fields}});return $t.newFoundDocument(c,h,m,g)})(s,e):"missing"in e?(function(i,o){Qe(!!o.missing,3894),Qe(!!o.readTime,22933);const c=dc(i,o.missing),h=zn(o.readTime);return $t.newNoDocument(c,h)})(s,e):we(7234,{result:e})}function A1(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:we(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(_,w){return _.useProto3Json?(Qe(w===void 0||typeof w=="string",58123),sn.fromBase64String(w||"")):(Qe(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),sn.fromUint8Array(w||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(_){const w=_.code===void 0?$.UNKNOWN:Mw(_.code);return new he(w,_.message||"")})(h);t=new Vw(i,o,c,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=dc(s,i.document.name),c=zn(i.document.updateTime),h=i.document.createTime?zn(i.document.createTime):Se.min(),m=new vn({mapValue:{fields:i.document.fields}}),g=$t.newFoundDocument(o,c,h,m),_=i.targetIds||[],w=i.removedTargetIds||[];t=new wd(_,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=dc(s,i.document),c=i.readTime?zn(i.readTime):Se.min(),h=$t.newNoDocument(o,c),m=i.removedTargetIds||[];t=new wd([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=dc(s,i.document),c=i.removedTargetIds||[];t=new wd([],c,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,h=new f1(o,c),m=i.targetId;t=new kw(m,h)}}return t}function qw(s,e){let t;if(e instanceof Nc)t={update:A0(s,e.key,e.value)};else if(e instanceof bg)t={delete:Vd(s,e.key)};else if(e instanceof Ni)t={update:A0(s,e.key,e.data),updateMask:P1(e.fieldMask)};else{if(!(e instanceof Ow))return we(16599,{Vt:e.type});t={verify:Vd(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(c,h){const m=h.transform;if(m instanceof Md)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ec)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof wc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Tc)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw we(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:w1(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:we(27497)})(s,e.precondition)),t}function S1(s,e){return s&&s.length>0?(Qe(e!==void 0,14353),s.map((t=>(function(o,c){let h=o.updateTime?zn(o.updateTime):zn(c);return h.isEqual(Se.min())&&(h=zn(c)),new l1(h,o.transformResults||[])})(t,e)))):[]}function x1(s,e){return{documents:[Uw(s,e.path)]}}function R1(s,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Uw(s,o);const c=(function(_){if(_.length!==0)return Hw(pr.create(_,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const h=(function(_){if(_.length!==0)return _.map((w=>(function(S){return{field:_o(S.field),direction:N1(S.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=Ym(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:t,parent:o}}function I1(s){let e=T1(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Qe(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let c=[];t.where&&(c=(function(b){const S=Bw(b);return S instanceof pr&&mw(S)?S.getFilters():[S]})(t.where));let h=[];t.orderBy&&(h=(function(b){return b.map((S=>(function(j){return new vc(vo(j.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(S)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let S;return S=typeof b=="object"?b.value:b,Cc(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(b){const S=!!b.before,C=b.values||[];return new Od(C,S)})(t.startAt));let _=null;return t.endAt&&(_=(function(b){const S=!b.before,C=b.values||[];return new Od(C,S)})(t.endAt)),XR(e,o,h,c,m,"F",g,_)}function C1(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Bw(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=vo(t.unaryFilter.field);return kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=vo(t.unaryFilter.field);return kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=vo(t.unaryFilter.field);return kt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=vo(t.unaryFilter.field);return kt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(s):s.fieldFilter!==void 0?(function(t){return kt.create(vo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return pr.create(t.compositeFilter.filters.map((i=>Bw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(s):we(30097,{filter:s})}function N1(s){return y1[s]}function D1(s){return _1[s]}function O1(s){return v1[s]}function _o(s){return{fieldPath:s.canonicalString()}}function vo(s){return rn.fromServerFormat(s.fieldPath)}function Hw(s){return s instanceof kt?(function(t){if(t.op==="=="){if(d0(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NAN"}};if(u0(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(d0(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NAN"}};if(u0(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(t.field),op:D1(t.op),value:t.value}}})(s):s instanceof pr?(function(t){const i=t.getFilters().map((o=>Hw(o)));return i.length===1?i[0]:{compositeFilter:{op:O1(t.op),filters:i}}})(s):we(54877,{filter:s})}function P1(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Gw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t,i,o,c=Se.min(),h=Se.min(),m=sn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.yt=e}}function k1(s){const e=I1({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Pd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(){this.Cn=new j1}addToCollectionParentIndex(e,t){return this.Cn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Ti.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Ti.min())}updateCollectionGroup(e,t,i){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class j1{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Bt(ct.comparator),c=!o.has(i);return this.index[t]=o.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Bt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fw=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(Fw,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Po(0)}static cr(){return new Po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="LruGarbageCollector",L1=1048576;function R0([s,e],[t,i]){const o=ze(s,t);return o===0?ze(e,i):o}class U1{constructor(e){this.Ir=e,this.buffer=new Bt(R0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();R0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class z1{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(x0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){qo(t)?ge(x0,"Ignoring IndexedDB error during garbage collection: ",t):await zo(t)}await this.Vr(3e5)}))}}class q1{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(Zd.ce);const i=new U1(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(S0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),S0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,c,h,m,g,_;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,h=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(i=b,m=Date.now(),this.removeTargets(e,i,t)))).next((b=>(c=b,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(_=Date.now(),po()<=Ue.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(_-g)+`ms
Total Duration: ${_-w}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:b}))))}}function B1(s,e){return new q1(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.changes=new Ea((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ne.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&uc(i.mutation,o,Un.empty(),Ke.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,qe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=qe()){const o=fa();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((c=>{let h=nc();return c.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=fa();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,qe())))}populateOverlays(e,t,i){const o=[];return i.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,i,o){let c=Cs();const h=cc(),m=(function(){return cc()})();return t.forEach(((g,_)=>{const w=i.get(_.key);o.has(_.key)&&(w===void 0||w.mutation instanceof Ni)?c=c.insert(_.key,_):w!==void 0?(h.set(_.key,w.mutation.getFieldMask()),uc(w.mutation,_,w.mutation.getFieldMask(),Ke.now())):h.set(_.key,Un.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((_,w)=>h.set(_,w))),t.forEach(((_,w)=>m.set(_,new G1(w,h.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=cc();let o=new yt(((h,m)=>h-m)),c=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((g=>{const _=t.get(g);if(_===null)return;let w=i.get(g)||Un.empty();w=m.applyToLocalView(_,w),i.set(g,w);const b=(o.get(m.batchId)||qe()).add(g);o=o.insert(m.batchId,b)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,w=g.value,b=bw();w.forEach((S=>{if(!c.has(S)){const C=Nw(t.get(S),i.get(S));C!==null&&b.set(S,C),c=c.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,_,b))}return ne.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return Ee.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_w(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-c.size):ne.resolve(fa());let m=gc,g=c;return h.next((_=>ne.forEach(_,((w,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),c.get(w)?ne.resolve():this.remoteDocumentCache.getEntry(e,w).next((S=>{g=g.insert(w,S)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,g,_,qe()))).next((w=>({batchId:m,changes:Tw(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=nc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const c=t.collectionGroup;let h=nc();return this.indexManager.getCollectionParents(e,c).next((m=>ne.forEach(m,(g=>{const _=(function(b,S){return new Bo(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next((w=>{w.forEach(((b,S)=>{h=h.insert(b,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,c,o)))).next((h=>{c.forEach(((g,_)=>{const w=_.getKey();h.get(w)===null&&(h=h.insert(w,$t.newInvalidDocument(w)))}));let m=nc();return h.forEach(((g,_)=>{const w=c.get(g);w!==void 0&&uc(w.mutation,_,Un.empty(),Ke.now()),nh(t,_)&&(m=m.insert(g,_))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:zn(o.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:k1(o.bundledQuery),readTime:zn(o.readTime)}})(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(){this.overlays=new yt(Ee.comparator),this.qr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const i=fa();return ne.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,c)=>{this.St(e,t,c)})),ne.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(i)),ne.resolve()}getOverlaysForCollection(e,t,i){const o=fa(),c=t.length+1,h=new Ee(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===c&&g.largestBatchId>i&&o.set(g.getKey(),g)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let c=new yt(((_,w)=>_-w));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let w=c.get(_.largestBatchId);w===null&&(w=fa(),c=c.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const m=fa(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,w)=>m.set(_,w))),!(m.size()>=o)););return ne.resolve(m)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new h1(t,i));let c=this.qr.get(t);c===void 0&&(c=qe(),this.qr.set(t,c)),this.qr.set(t,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(){this.Qr=new Bt(Xt.$r),this.Ur=new Bt(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Xt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Xt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ee(new ct([])),i=new Xt(t,e),o=new Xt(t,e+1),c=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new ct([])),i=new Xt(t,e),o=new Xt(t,e+1);let c=qe();return this.Ur.forEachInRange([i,o],(h=>{c=c.add(h.key)})),c}containsKey(e){const t=new Xt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Xt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Bt(Xt.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new d1(c,t,i,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Xt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(h)}lookupMutationBatch(e,t){return ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),c=o<0?0:o;return ne.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?pg:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Xt(t,0),o=new Xt(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,o],(h=>{const m=this.Xr(h.Yr);c.push(m)})),ne.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Bt(ze);return t.forEach((o=>{const c=new Xt(o,0),h=new Xt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(m=>{i=i.add(m.Yr)}))})),ne.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let c=i;Ee.isDocumentKey(c)||(c=c.child(""));const h=new Xt(new Ee(c),0);let m=new Bt(ze);return this.Zr.forEachWhile((g=>{const _=g.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Yr)),!0)}),h),ne.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ne.forEach(t.mutations,(o=>{const c=new Xt(o.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Xt(t,0),o=this.Zr.firstAfterOrEqual(i);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.ri=e,this.docs=(function(){return new yt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),c=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ne.resolve(i?i.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let i=Cs();return t.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():$t.newInvalidDocument(o))})),ne.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let c=Cs();const h=t.path,m=new Ee(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:w}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||RR(xR(w),i)<=0||(o.has(w.key)||nh(t,w))&&(c=c.insert(w.key,w.mutableCopy()))}return ne.resolve(c)}getAllFromCollectionGroup(e,t,i,o){we(9500)}ii(e,t){return ne.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new W1(this)}getSize(e){return ne.resolve(this.size)}}class W1 extends H1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.persistence=e,this.si=new Ea((t=>vg(t)),Eg),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new Rg,this.targetCount=0,this.ai=Po.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Po(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Pr(t),ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,i){let o=0;const c=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ne.waitFor(c).next((()=>o))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ne.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ne.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((h=>{c.push(o.markPotentiallyOrphaned(e,h))})),ne.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ne.resolve(i)}containsKey(e,t){return ne.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Zd(0),this.li=!1,this.li=!0,this.hi=new Y1,this.referenceDelegate=e(this),this.Pi=new J1(this),this.indexManager=new V1,this.remoteDocumentCache=(function(o){return new $1(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new M1(t),this.Ii=new Q1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new K1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new X1(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ge("MemoryPersistence","Starting transaction:",e);const o=new Z1(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return ne.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class Z1 extends CR{constructor(e){super(),this.currentSequenceNumber=e}}class Ig{constructor(e){this.persistence=e,this.Ri=new Rg,this.Vi=null}static mi(e){return new Ig(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ne.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(i=>{const o=Ee.fromPath(i);return this.gi(e,o).next((c=>{c||t.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class jd{constructor(e,t){this.persistence=e,this.pi=new Ea((i=>OR(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=B1(this,t)}static mi(e,t){return new jd(e,t)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ne.forEach(this.pi,((i,o)=>this.br(e,i,o).next((c=>c?ne.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((m=>{m||(i++,c.removeEntry(h,Se.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_d(e.data.value)),t}br(e,t,i){return ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ne.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=qe(),o=qe();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Cg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return KS()?8:NR(fn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const c={result:null};return this.ys(e,t).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(e,t,o,i).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new eI;return this.Ss(e,t,h).next((m=>{if(c.result=m,this.Vs)return this.bs(e,t,h,m.size)}))})).next((()=>c.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(po()<=Ue.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",yo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(po()<=Ue.DEBUG&&ge("QueryEngine","Query:",yo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(po()<=Ue.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",yo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ur(t))):ne.resolve())}ys(e,t){if(g0(t))return ne.resolve(null);let i=Ur(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Pd(t,null,"F"),i=Ur(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const h=qe(...c);return this.ps.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const _=this.Ds(t,m);return this.Cs(t,_,h,g.readTime)?this.ys(e,Pd(t,null,"F")):this.vs(e,_,t,g)}))))})))))}ws(e,t,i,o){return g0(t)||o.isEqual(Se.min())?ne.resolve(null):this.ps.getDocuments(e,i).next((c=>{const h=this.Ds(t,c);return this.Cs(t,h,i,o)?ne.resolve(null):(po()<=Ue.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),yo(t)),this.vs(e,h,t,SR(o,gc)).next((m=>m)))}))}Ds(e,t){let i=new Bt(Ew(e));return t.forEach(((o,c)=>{nh(e,c)&&(i=i.add(c))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,i){return po()<=Ue.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",yo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ti.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((c=>(t.forEach((h=>{c=c.insert(h.key,h)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="LocalStore",nI=3e8;class rI{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new yt(ze),this.xs=new Ea((c=>vg(c)),Eg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function sI(s,e,t,i){return new rI(s,e,t,i)}async function Kw(s,e){const t=Ce(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((c=>{const h=[],m=[];let g=qe();for(const _ of o){h.push(_.batchId);for(const w of _.mutations)g=g.add(w.key)}for(const _ of c){m.push(_.batchId);for(const w of _.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(i,g).next((_=>({Ls:_,removedBatchIds:h,addedBatchIds:m})))}))}))}function iI(s,e){const t=Ce(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,_,w){const b=_.batch,S=b.keys();let C=ne.resolve();return S.forEach((j=>{C=C.next((()=>w.getEntry(g,j))).next((F=>{const z=_.docVersions.get(j);Qe(z!==null,48541),F.version.compareTo(z)<0&&(b.applyToRemoteDocument(F,_),F.isValidDocument()&&(F.setReadTime(_.commitVersion),w.addEntry(F)))}))})),C.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(t,i,e,c).next((()=>c.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=qe();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Yw(s){const e=Ce(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function aI(s,e){const t=Ce(s),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((w,b)=>{const S=o.get(b);if(!S)return;m.push(t.Pi.removeMatchingKeys(c,w.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(c,w.addedDocuments,b))));let C=S.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?C=C.withResumeToken(sn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):w.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(w.resumeToken,i)),o=o.insert(b,C),(function(F,z,ie){return F.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=nI?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(S,C,w)&&m.push(t.Pi.updateTargetData(c,C))}));let g=Cs(),_=qe();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,w))})),m.push(oI(c,h,e.documentUpdates).next((w=>{g=w.ks,_=w.qs}))),!i.isEqual(Se.min())){const w=t.Pi.getLastRemoteSnapshotVersion(c).next((b=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i)));m.push(w)}return ne.waitFor(m).next((()=>h.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,_))).next((()=>g))})).then((c=>(t.Ms=o,c)))}function oI(s,e,t){let i=qe(),o=qe();return t.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let h=Cs();return t.forEach(((m,g)=>{const _=c.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Se.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):ge(Ng,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function lI(s,e){const t=Ce(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=pg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function cI(s,e){const t=Ce(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((c=>c?(o=c,ne.resolve(o)):t.Pi.allocateTargetId(i).next((h=>(o=new fi(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Wm(s,e,t){const i=Ce(s),o=i.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",c,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!qo(h))throw h;ge(Ng,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function I0(s,e,t){const i=Ce(s);let o=Se.min(),c=qe();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,_,w){const b=Ce(g),S=b.xs.get(w);return S!==void 0?ne.resolve(b.Ms.get(S)):b.Pi.getTargetData(_,w)})(i,h,Ur(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{c=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:Se.min(),t?c:qe()))).next((m=>(uI(i,WR(e),m),{documents:m,Qs:c})))))}function uI(s,e,t){let i=s.Os.get(e)||Se.min();t.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.Os.set(e,i)}class C0{constructor(){this.activeTargetIds=r1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dI{constructor(){this.Mo=new C0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new C0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="ConnectivityMonitor";class D0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(N0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(N0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hd=null;function Jm(){return hd===null?hd=(function(){return 268435456+Math.round(2147483648*Math.random())})():hd++,"0x"+hd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="RestConnection",fI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Nd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,c){const h=Jm(),m=this.zo(e,t.toUriEncodedString());ge(Cm,`Sending RPC '${e}' ${h}:`,m,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:_}=new URL(m),w=jo(_);return this.Jo(e,m,g,i,w).then((b=>(ge(Cm,`Received RPC '${e}' ${h}: `,b),b)),(b=>{throw Co(Cm,`RPC '${e}' ${h} failed with error: `,b,"url: ",m,"request:",i),b}))}Ho(e,t,i,o,c,h){return this.Go(e,t,i,o,c)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),i&&i.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const i=fI[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class pI extends mI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,c){const h=Jm();return new Promise(((m,g)=>{const _=new KE;_.setWithCredentials(!0),_.listenOnce(YE.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case yd.NO_ERROR:const b=_.getResponseJson();ge(ln,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(b)),m(b);break;case yd.TIMEOUT:ge(ln,`RPC '${e}' ${h} timed out`),g(new he($.DEADLINE_EXCEEDED,"Request time out"));break;case yd.HTTP_ERROR:const S=_.getStatus();if(ge(ln,`RPC '${e}' ${h} failed with status:`,S,"response text:",_.getResponseText()),S>0){let C=_.getResponseJson();Array.isArray(C)&&(C=C[0]);const j=C==null?void 0:C.error;if(j&&j.status&&j.message){const F=(function(ie){const se=ie.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(se)>=0?se:$.UNKNOWN})(j.status);g(new he(F,j.message))}else g(new he($.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new he($.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{ge(ln,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);ge(ln,`RPC '${e}' ${h} sending request:`,o),_.send(t,"POST",w,i,15)}))}T_(e,t,i){const o=Jm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=WE(),m=$E(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const w=c.join("");ge(ln,`Creating RPC '${e}' stream ${o}: ${w}`,g);const b=h.createWebChannel(w,g);this.I_(b);let S=!1,C=!1;const j=new gI({Yo:z=>{C?ge(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(S||(ge(ln,`Opening RPC '${e}' stream ${o} transport.`),b.open(),S=!0),ge(ln,`RPC '${e}' stream ${o} sending:`,z),b.send(z))},Zo:()=>b.close()}),F=(z,ie,se)=>{z.listen(ie,(re=>{try{se(re)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return F(b,tc.EventType.OPEN,(()=>{C||(ge(ln,`RPC '${e}' stream ${o} transport opened.`),j.o_())})),F(b,tc.EventType.CLOSE,(()=>{C||(C=!0,ge(ln,`RPC '${e}' stream ${o} transport closed`),j.a_(),this.E_(b))})),F(b,tc.EventType.ERROR,(z=>{C||(C=!0,Co(ln,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),j.a_(new he($.UNAVAILABLE,"The operation could not be completed")))})),F(b,tc.EventType.MESSAGE,(z=>{var ie;if(!C){const se=z.data[0];Qe(!!se,16349);const re=se,fe=(re==null?void 0:re.error)||((ie=re[0])==null?void 0:ie.error);if(fe){ge(ln,`RPC '${e}' stream ${o} received error:`,fe);const ue=fe.status;let X=(function(I){const P=Pt[I];if(P!==void 0)return Mw(P)})(ue),N=fe.message;X===void 0&&(X=$.INTERNAL,N="Unknown error status: "+ue+" with message "+fe.message),C=!0,j.a_(new he(X,N)),b.close()}else ge(ln,`RPC '${e}' stream ${o} received:`,se),j.u_(se)}})),F(m,XE.STAT_EVENT,(z=>{z.stat===qm.PROXY?ge(ln,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===qm.NOPROXY&&ge(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Nm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(s){return new E1(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,t,i=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="PersistentStream";class Xw{constructor(e,t,i,o,c,h,m,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Dg(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(Is(t.toString()),Is("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new he($.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(O0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ge(O0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yI extends Xw{constructor(e,t,i,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=A1(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Se.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Se.min():h.readTime?zn(h.readTime):Se.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=$m(this.serializer),t.addTarget=(function(c,h){let m;const g=h.target;if(m=Qm(g)?{documents:x1(c,g)}:{query:R1(c,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=jw(c,h.resumeToken);const _=Ym(c,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(Se.min())>0){m.readTime=kd(c,h.snapshotVersion.toTimestamp());const _=Ym(c,h.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const i=C1(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=$m(this.serializer),t.removeTarget=e,this.q_(t)}}class _I extends Xw{constructor(e,t,i,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=S1(e.writeResults,e.commitTime),i=zn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=$m(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>qw(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{}class EI extends vI{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(e,Xm(t,i),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he($.UNKNOWN,c.toString())}))}Ho(e,t,i,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(e,Xm(t,i),o,h,m,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new he($.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class wI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Is(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="RemoteStore";class TI{constructor(e,t,i,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{wa(this)&&(ge(_a,"Restarting streams for network reachability change."),await(async function(g){const _=Ce(g);_.Ea.add(4),await Oc(_),_.Ra.set("Unknown"),_.Ea.delete(4),await oh(_)})(this))}))})),this.Ra=new wI(i,o)}}async function oh(s){if(wa(s))for(const e of s.da)await e(!0)}async function Oc(s){for(const e of s.da)await e(!1)}function $w(s,e){const t=Ce(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),kg(t)?Mg(t):Ho(t).O_()&&Pg(t,e))}function Og(s,e){const t=Ce(s),i=Ho(t);t.Ia.delete(e),i.O_()&&Ww(t,e),t.Ia.size===0&&(i.O_()?i.L_():wa(t)&&t.Ra.set("Unknown"))}function Pg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ho(s).Y_(e)}function Ww(s,e){s.Va.Ue(e),Ho(s).Z_(e)}function Mg(s){s.Va=new p1({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Ho(s).start(),s.Ra.ua()}function kg(s){return wa(s)&&!Ho(s).x_()&&s.Ia.size>0}function wa(s){return Ce(s).Ea.size===0}function Jw(s){s.Va=void 0}async function bI(s){s.Ra.set("Online")}async function AI(s){s.Ia.forEach(((e,t)=>{Pg(s,e)}))}async function SI(s,e){Jw(s),kg(s)?(s.Ra.ha(e),Mg(s)):s.Ra.set("Unknown")}async function xI(s,e,t){if(s.Ra.set("Online"),e instanceof Vw&&e.state===2&&e.cause)try{await(async function(o,c){const h=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(s,e)}catch(i){ge(_a,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ld(s,i)}else if(e instanceof wd?s.Va.Ze(e):e instanceof kw?s.Va.st(e):s.Va.tt(e),!t.isEqual(Se.min()))try{const i=await Yw(s.localStore);t.compareTo(i)>=0&&await(function(c,h){const m=c.Va.Tt(h);return m.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const w=c.Ia.get(_);w&&c.Ia.set(_,w.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,_)=>{const w=c.Ia.get(g);if(!w)return;c.Ia.set(g,w.withResumeToken(sn.EMPTY_BYTE_STRING,w.snapshotVersion)),Ww(c,g);const b=new fi(w.target,g,_,w.sequenceNumber);Pg(c,b)})),c.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(i){ge(_a,"Failed to raise snapshot:",i),await Ld(s,i)}}async function Ld(s,e,t){if(!qo(e))throw e;s.Ea.add(1),await Oc(s),s.Ra.set("Offline"),t||(t=()=>Yw(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ge(_a,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await oh(s)}))}function Zw(s,e){return e().catch((t=>Ld(s,t,e)))}async function lh(s){const e=Ce(s),t=xi(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pg;for(;RI(e);)try{const o=await lI(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,II(e,o)}catch(o){await Ld(e,o)}eT(e)&&tT(e)}function RI(s){return wa(s)&&s.Ta.length<10}function II(s,e){s.Ta.push(e);const t=xi(s);t.O_()&&t.X_&&t.ea(e.mutations)}function eT(s){return wa(s)&&!xi(s).x_()&&s.Ta.length>0}function tT(s){xi(s).start()}async function CI(s){xi(s).ra()}async function NI(s){const e=xi(s);for(const t of s.Ta)e.ea(t.mutations)}async function DI(s,e,t){const i=s.Ta.shift(),o=Ag.from(i,e,t);await Zw(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await lh(s)}async function OI(s,e){e&&xi(s).X_&&await(async function(i,o){if((function(h){return Pw(h)&&h!==$.ABORTED})(o.code)){const c=i.Ta.shift();xi(i).B_(),await Zw(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await lh(i)}})(s,e),eT(s)&&tT(s)}async function P0(s,e){const t=Ce(s);t.asyncQueue.verifyOperationInProgress(),ge(_a,"RemoteStore received new credentials");const i=wa(t);t.Ea.add(3),await Oc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await oh(t)}async function PI(s,e){const t=Ce(s);e?(t.Ea.delete(2),await oh(t)):e||(t.Ea.add(2),await Oc(t),t.Ra.set("Unknown"))}function Ho(s){return s.ma||(s.ma=(function(t,i,o){const c=Ce(t);return c.sa(),new yI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:bI.bind(null,s),t_:AI.bind(null,s),r_:SI.bind(null,s),H_:xI.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),kg(s)?Mg(s):s.Ra.set("Unknown")):(await s.ma.stop(),Jw(s))}))),s.ma}function xi(s){return s.fa||(s.fa=(function(t,i,o){const c=Ce(t);return c.sa(),new _I(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:CI.bind(null,s),r_:OI.bind(null,s),ta:NI.bind(null,s),na:DI.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await lh(s)):(await s.fa.stop(),s.Ta.length>0&&(ge(_a,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,t,i,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,c){const h=Date.now()+i,m=new Vg(e,t,h,o,c);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jg(s,e){if(Is("AsyncQueue",`${e}: ${s}`),qo(s))return new he($.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{static emptySet(e){return new bo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=nc(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new bo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(){this.ga=new yt(Ee.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Mo{constructor(e,t,i,o,c,h,m,g,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,c){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new Mo(e,t,bo.emptySet(t),h,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class kI{constructor(){this.queries=k0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Ce(t),c=o.queries;o.queries=k0(),c.forEach(((h,m)=>{for(const g of m.Sa)g.onError(i)}))})(this,new he($.ABORTED,"Firestore shutting down"))}}function k0(){return new Ea((s=>vw(s)),th)}async function nT(s,e){const t=Ce(s);let i=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(i=2):(c=new MI,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=jg(h,`Initialization of query '${yo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Lg(t)}async function rT(s,e){const t=Ce(s),i=e.query;let o=3;const c=t.queries.get(i);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function VI(s,e){const t=Ce(s);let i=!1;for(const o of e){const c=o.query,h=t.queries.get(c);if(h){for(const m of h.Sa)m.Fa(o)&&(i=!0);h.wa=o}}i&&Lg(t)}function jI(s,e,t){const i=Ce(s),o=i.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);i.queries.delete(e)}function Lg(s){s.Ca.forEach((e=>{e.next()}))}var Zm,V0;(V0=Zm||(Zm={})).Ma="default",V0.Cache="cache";class sT{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Mo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Zm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e){this.key=e}}class aT{constructor(e){this.key=e}}class LI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=Ew(e),this.tu=new bo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new M0,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,b)=>{const S=o.get(w),C=nh(this.query,b)?b:null,j=!!S&&this.mutatedKeys.has(S.key),F=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let z=!1;S&&C?S.data.isEqual(C.data)?j!==F&&(i.track({type:3,doc:C}),z=!0):this.su(S,C)||(i.track({type:2,doc:C}),z=!0,(g&&this.eu(C,g)>0||_&&this.eu(C,_)<0)&&(m=!0)):!S&&C?(i.track({type:0,doc:C}),z=!0):S&&!C&&(i.track({type:1,doc:S}),z=!0,(g||_)&&(m=!0)),z&&(C?(h=h.add(C),c=F?c.add(w):c.delete(w)):(h=h.delete(w),c=c.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),c=c.delete(w.key),i.track({type:1,doc:w})}return{tu:h,iu:i,Cs:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,b)=>(function(C,j){const F=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:z})}};return F(C)-F(j)})(w.type,b.type)||this.eu(w.doc,b.doc))),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,_=g!==this.Za;return this.Za=g,h.length!==0||_?{snapshot:new Mo(this.query,e.tu,c,h,e.mutatedKeys,g===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new M0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new aT(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new iT(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Mo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ug="SyncEngine";class UI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class zI{constructor(e){this.key=e,this.hu=!1}}class qI{constructor(e,t,i,o,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ea((m=>vw(m)),th),this.Iu=new Map,this.Eu=new Set,this.du=new yt(Ee.comparator),this.Au=new Map,this.Ru=new Rg,this.Vu={},this.mu=new Map,this.fu=Po.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BI(s,e,t=!0){const i=hT(s);let o;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await oT(i,e,t,!0),o}async function HI(s,e){const t=hT(s);await oT(t,e,!0,!1)}async function oT(s,e,t,i){const o=await cI(s.localStore,Ur(e)),c=o.targetId,h=s.sharedClientState.addLocalQueryTarget(c,t);let m;return i&&(m=await GI(s,e,c,h==="current",o.resumeToken)),s.isPrimaryClient&&t&&$w(s.remoteStore,o),m}async function GI(s,e,t,i,o){s.pu=(b,S,C)=>(async function(F,z,ie,se){let re=z.view.ru(ie);re.Cs&&(re=await I0(F.localStore,z.query,!1).then((({documents:N})=>z.view.ru(N,re))));const fe=se&&se.targetChanges.get(z.targetId),ue=se&&se.targetMismatches.get(z.targetId)!=null,X=z.view.applyChanges(re,F.isPrimaryClient,fe,ue);return L0(F,z.targetId,X.au),X.snapshot})(s,b,S,C);const c=await I0(s.localStore,e,!0),h=new LI(e,c.Qs),m=h.ru(c.documents),g=Dc.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",o),_=h.applyChanges(m,s.isPrimaryClient,g);L0(s,t,_.au);const w=new UI(e,t,h);return s.Tu.set(e,w),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),_.snapshot}async function FI(s,e,t){const i=Ce(s),o=i.Tu.get(e),c=i.Iu.get(o.targetId);if(c.length>1)return i.Iu.set(o.targetId,c.filter((h=>!th(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Wm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Og(i.remoteStore,o.targetId),eg(i,o.targetId)})).catch(zo)):(eg(i,o.targetId),await Wm(i.localStore,o.targetId,!0))}async function QI(s,e){const t=Ce(s),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Og(t.remoteStore,i.targetId))}async function KI(s,e,t){const i=eC(s);try{const o=await(function(h,m){const g=Ce(h),_=Ke.now(),w=m.reduce(((C,j)=>C.add(j.key)),qe());let b,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let j=Cs(),F=qe();return g.Ns.getEntries(C,w).next((z=>{j=z,j.forEach(((ie,se)=>{se.isValidDocument()||(F=F.add(ie))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,j))).next((z=>{b=z;const ie=[];for(const se of m){const re=u1(se,b.get(se.key).overlayedDocument);re!=null&&ie.push(new Ni(se.key,re,dw(re.value.mapValue),hn.exists(!0)))}return g.mutationQueue.addMutationBatch(C,_,ie,m)})).next((z=>{S=z;const ie=z.applyToLocalDocumentSet(b,F);return g.documentOverlayCache.saveOverlays(C,z.batchId,ie)}))})).then((()=>({batchId:S.batchId,changes:Tw(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let _=h.Vu[h.currentUser.toKey()];_||(_=new yt(ze)),_=_.insert(m,g),h.Vu[h.currentUser.toKey()]=_})(i,o.batchId,t),await Pc(i,o.changes),await lh(i.remoteStore)}catch(o){const c=jg(o,"Failed to persist write");t.reject(c)}}async function lT(s,e){const t=Ce(s);try{const i=await aI(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const h=t.Au.get(c);h&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Qe(h.hu,14607):o.removedDocuments.size>0&&(Qe(h.hu,42227),h.hu=!1))})),await Pc(t,i,e)}catch(i){await zo(i)}}function j0(s,e,t){const i=Ce(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((c,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=Ce(h);g.onlineState=m;let _=!1;g.queries.forEach(((w,b)=>{for(const S of b.Sa)S.va(m)&&(_=!0)})),_&&Lg(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function YI(s,e,t){const i=Ce(s);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),c=o&&o.key;if(c){let h=new yt(Ee.comparator);h=h.insert(c,$t.newNoDocument(c,Se.min()));const m=qe().add(c),g=new ih(Se.min(),new Map,new yt(ze),h,m);await lT(i,g),i.du=i.du.remove(c),i.Au.delete(e),zg(i)}else await Wm(i.localStore,e,!1).then((()=>eg(i,e,t))).catch(zo)}async function XI(s,e){const t=Ce(s),i=e.batch.batchId;try{const o=await iI(t.localStore,e);uT(t,i,null),cT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Pc(t,o)}catch(o){await zo(o)}}async function $I(s,e,t){const i=Ce(s);try{const o=await(function(h,m){const g=Ce(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let w;return g.mutationQueue.lookupMutationBatch(_,m).next((b=>(Qe(b!==null,37113),w=b.keys(),g.mutationQueue.removeMutationBatch(_,b)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,w,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w))).next((()=>g.localDocuments.getDocuments(_,w)))}))})(i.localStore,e);uT(i,e,t),cT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Pc(i,o)}catch(o){await zo(o)}}function cT(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function uT(s,e,t){const i=Ce(s);let o=i.Vu[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function eg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||dT(s,i)}))}function dT(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(Og(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),zg(s))}function L0(s,e,t){for(const i of t)i instanceof iT?(s.Ru.addReference(i.key,e),WI(s,i)):i instanceof aT?(ge(Ug,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||dT(s,i.key)):we(19791,{wu:i})}function WI(s,e){const t=e.key,i=t.path.canonicalString();s.du.get(t)||s.Eu.has(i)||(ge(Ug,"New document in limbo: "+t),s.Eu.add(i),zg(s))}function zg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Ee(ct.fromString(e)),i=s.fu.next();s.Au.set(i,new zI(t)),s.du=s.du.insert(t,i),$w(s.remoteStore,new fi(Ur(wg(t.path)),i,"TargetPurposeLimboResolution",Zd.ce))}}async function Pc(s,e,t){const i=Ce(s),o=[],c=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,g)=>{h.push(i.pu(g,e,t).then((_=>{var w;if((_||t)&&i.isPrimaryClient){const b=_?!_.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:w.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(_){o.push(_);const b=Cg.As(g.targetId,_);c.push(b)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(g,_){const w=Ce(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ne.forEach(_,(S=>ne.forEach(S.Es,(C=>w.persistence.referenceDelegate.addReference(b,S.targetId,C))).next((()=>ne.forEach(S.ds,(C=>w.persistence.referenceDelegate.removeReference(b,S.targetId,C)))))))))}catch(b){if(!qo(b))throw b;ge(Ng,"Failed to update sequence numbers: "+b)}for(const b of _){const S=b.targetId;if(!b.fromCache){const C=w.Ms.get(S),j=C.snapshotVersion,F=C.withLastLimboFreeSnapshotVersion(j);w.Ms=w.Ms.insert(S,F)}}})(i.localStore,c))}async function JI(s,e){const t=Ce(s);if(!t.currentUser.isEqual(e)){ge(Ug,"User change. New user:",e.toKey());const i=await Kw(t.localStore,e);t.currentUser=e,(function(c,h){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new he($.CANCELLED,h))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pc(t,i.Ls)}}function ZI(s,e){const t=Ce(s),i=t.Au.get(e);if(i&&i.hu)return qe().add(i.key);{let o=qe();const c=t.Iu.get(e);if(!c)return o;for(const h of c){const m=t.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function hT(s){const e=Ce(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=lT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YI.bind(null,e),e.Pu.H_=VI.bind(null,e.eventManager),e.Pu.yu=jI.bind(null,e.eventManager),e}function eC(s){const e=Ce(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$I.bind(null,e),e}class Ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ah(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return sI(this.persistence,new tI,e.initialUser,this.serializer)}Cu(e){return new Qw(Ig.mi,this.serializer)}Du(e){return new dI}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ud.provider={build:()=>new Ud};class tC extends Ud{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof jd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new z1(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new Qw((i=>jd.mi(i,t)),this.serializer)}}class tg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>j0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=JI.bind(null,this.syncEngine),await PI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kI})()}createDatastore(e){const t=ah(e.databaseInfo.databaseId),i=(function(c){return new pI(c)})(e.databaseInfo);return(function(c,h,m,g){return new EI(c,h,m,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,c,h,m){return new TI(i,o,c,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>j0(this.syncEngine,t,0)),(function(){return D0.v()?new D0:new hI})())}createSyncEngine(e,t){return(function(o,c,h,m,g,_,w){const b=new qI(o,c,h,m,g,_);return w&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const c=Ce(o);ge(_a,"RemoteStore shutting down."),c.Ea.add(5),await Oc(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}tg.provider={build:()=>new tg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Is("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new he($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,c){const h=Ce(o),m={documents:c.map((b=>Vd(h.serializer,b)))},g=await h.Ho("BatchGetDocuments",h.serializer.databaseId,ct.emptyPath(),m,c.length),_=new Map;g.forEach((b=>{const S=b1(h.serializer,b);_.set(S.key.toString(),S)}));const w=[];return c.forEach((b=>{const S=_.get(b.toString());Qe(!!S,55234,{key:b}),w.push(S)})),w})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new bg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const o=Ee.fromPath(i);this.mutations.push(new Ow(o,this.precondition(o)))})),await(async function(i,o){const c=Ce(i),h={writes:o.map((m=>qw(c.serializer,m)))};await c.Go("Commit",c.serializer.databaseId,ct.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw we(50498,{Gu:e.constructor.name});t=Se.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new he($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Se.min())?hn.exists(!1):hn.updateTime(t):hn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Se.min()))throw new he($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hn.updateTime(t)}return hn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,t,i,o,c){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=o,this.deferred=c,this.zu=i.maxAttempts,this.M_=new Dg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new nC(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((o=>{this.Yu(o)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Cc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Pw(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri="FirestoreClient";class sC{constructor(e,t,i,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=dn.UNAUTHENTICATED,this.clientId=gg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async h=>{ge(Ri,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ge(Ri,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=jg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Dm(s,e){s.asyncQueue.verifyOperationInProgress(),ge(Ri,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Kw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function U0(s,e){s.asyncQueue.verifyOperationInProgress();const t=await iC(s);ge(Ri,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>P0(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>P0(e.remoteStore,o))),s._onlineComponents=e}async function iC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ge(Ri,"Using user provided OfflineComponentProvider");try{await Dm(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===$.FAILED_PRECONDITION||o.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Co("Error using user provided cache. Falling back to memory cache: "+t),await Dm(s,new Ud)}}else ge(Ri,"Using default OfflineComponentProvider"),await Dm(s,new tC(void 0));return s._offlineComponents}async function qg(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ge(Ri,"Using user provided OnlineComponentProvider"),await U0(s,s._uninitializedComponentsProvider._online)):(ge(Ri,"Using default OnlineComponentProvider"),await U0(s,new tg))),s._onlineComponents}function aC(s){return qg(s).then((e=>e.syncEngine))}function oC(s){return qg(s).then((e=>e.datastore))}async function mT(s){const e=await qg(s),t=e.eventManager;return t.onListen=BI.bind(null,e.syncEngine),t.onUnlisten=FI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=QI.bind(null,e.syncEngine),t}function lC(s,e,t={}){const i=new Lr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,h,m,g,_){const w=new fT({next:S=>{w.Nu(),h.enqueueAndForget((()=>rT(c,b)));const C=S.docs.has(m);!C&&S.fromCache?_.reject(new he($.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&S.fromCache&&g&&g.source==="server"?_.reject(new he($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),b=new sT(wg(m.path),w,{includeMetadataChanges:!0,qa:!0});return nT(c,b)})(await mT(s),s.asyncQueue,e,t,i))),i.promise}function cC(s,e,t={}){const i=new Lr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,h,m,g,_){const w=new fT({next:S=>{w.Nu(),h.enqueueAndForget((()=>rT(c,b))),S.fromCache&&g.source==="server"?_.reject(new he($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),b=new sT(m,w,{includeMetadataChanges:!0,qa:!0});return nT(c,b)})(await mT(s),s.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="firestore.googleapis.com",q0=!0;class B0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pT,this.ssl=q0}else this.host=e.host,this.ssl=e.ssl??q0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Fw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L1)throw new he($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gT(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ch{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new fR;switch(i.type){case"firstParty":return new yR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=z0.get(t);i&&(ge("ComponentProvider","Removing Datastore"),z0.delete(t),i.terminate())})(this),Promise.resolve()}}function uC(s,e,t,i={}){var _;s=gr(s,ch);const o=jo(e),c=s._getSettings(),h={...c,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;o&&(LE(`https://${m}`),UE("Firestore",!0)),c.host!==pT&&c.host!==m&&Co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:i};if(!ga(g,h)&&(s._setSettings(g),i.mockUserToken)){let w,b;if(typeof i.mockUserToken=="string")w=i.mockUserToken,b=dn.MOCK_USER;else{w=LS(i.mockUserToken,(_=s._app)==null?void 0:_.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new he($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new dn(S)}s._authCredentials=new mR(new ZE(w,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Di(this.firestore,e,this._query)}}class wt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ic(t,wt._jsonSchema))return new wt(e,i||null,new Ee(ct.fromString(t.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:Vt("string",wt._jsonSchemaVersion),referencePath:Vt("string")};class vi extends Di{constructor(e,t,i){super(e,t,wg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new Ee(e))}withConverter(e){return new vi(this.firestore,e,this._path)}}function tt(s,e,...t){if(s=bt(s),ew("collection","path",e),s instanceof ch){const i=ct.fromString(e,...t);return t0(i),new vi(s,null,i)}{if(!(s instanceof wt||s instanceof vi))throw new he($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(ct.fromString(e,...t));return t0(i),new vi(s.firestore,null,i)}}function En(s,e,...t){if(s=bt(s),arguments.length===1&&(e=gg.newId()),ew("doc","path",e),s instanceof ch){const i=ct.fromString(e,...t);return e0(i),new wt(s,null,new Ee(i))}{if(!(s instanceof wt||s instanceof vi))throw new he($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(ct.fromString(e,...t));return e0(i),new wt(s.firestore,s instanceof vi?s.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="AsyncQueue";class G0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Dg(this,"async_queue_retry"),this._c=()=>{const i=Nm();i&&ge(H0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Nm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Nm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Lr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!qo(e))throw e;ge(H0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Is("INTERNAL UNHANDLED ERROR: ",F0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Vg.createAndSchedule(this,e,t,i,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:F0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function F0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Ta extends ch{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new G0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new G0(e),this._firestoreClient=void 0,await e}}}function dC(s,e){const t=typeof s=="object"?s:HE(),i=typeof s=="string"?s:Nd,o=fg(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=VS("firestore");c&&uC(o,...c)}return o}function uh(s){if(s._terminated)throw new he($.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||hC(s),s._firestoreClient}function hC(s){var i,o,c;const e=s._freezeSettings(),t=(function(m,g,_,w){return new kR(m,g,_,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,gT(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(s._databaseId,((i=s._app)==null?void 0:i.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new sC(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(sn.fromBase64String(e))}catch(t){throw new he($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ln(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ic(e,Ln._jsonSchema))return Ln.fromBase64String(e.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:Vt("string",Ln._jsonSchemaVersion),bytes:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zr._jsonSchemaVersion}}static fromJSON(e){if(Ic(e,zr._jsonSchema))return new zr(e.latitude,e.longitude)}}zr._jsonSchemaVersion="firestore/geoPoint/1.0",zr._jsonSchema={type:Vt("string",zr._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:qr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ic(e,qr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new qr(e.vectorValues);throw new he($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qr._jsonSchemaVersion="firestore/vectorValue/1.0",qr._jsonSchema={type:Vt("string",qr._jsonSchemaVersion),vectorValues:Vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=/^__.*__$/;class mC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nc(e,this.data,t,this.fieldTransforms)}}class yT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _T(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:s})}}class Bg{constructor(e,t,i,o,c,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Bg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(_T(this.Ac)&&fC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||ah(e)}Cc(e,t,i,o=!1){return new Bg({Ac:e,methodName:t,Dc:i,path:rn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kc(s){const e=s._freezeSettings(),t=ah(s._databaseId);return new gC(s._databaseId,!!e.ignoreUndefinedProperties,t)}function Hg(s,e,t,i,o,c={}){const h=s.Cc(c.merge||c.mergeFields?2:0,e,t,o);Fg("Data must be an object, but it was:",h,i);const m=wT(i,h);let g,_;if(c.merge)g=new Un(h.fieldMask),_=h.fieldTransforms;else if(c.mergeFields){const w=[];for(const b of c.mergeFields){const S=ng(e,b,t);if(!h.contains(S))throw new he($.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);bT(w,S)||w.push(S)}g=new Un(w),_=h.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,_=h.fieldTransforms;return new mC(new vn(m),g,_)}class hh extends dh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hh}}class Gg extends dh{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Tc(e.serializer,Sw(e.serializer,this.Fc));return new a1(e.path,t)}isEqual(e){return e instanceof Gg&&this.Fc===e.Fc}}function vT(s,e,t,i){const o=s.Cc(1,e,t);Fg("Data must be an object, but it was:",o,i);const c=[],h=vn.empty();Ci(i,((g,_)=>{const w=Qg(e,g,t);_=bt(_);const b=o.yc(w);if(_ instanceof hh)c.push(w);else{const S=Vc(_,b);S!=null&&(c.push(w),h.set(w,S))}}));const m=new Un(c);return new yT(h,m,o.fieldTransforms)}function ET(s,e,t,i,o,c){const h=s.Cc(1,e,t),m=[ng(e,i,t)],g=[o];if(c.length%2!=0)throw new he($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<c.length;S+=2)m.push(ng(e,c[S])),g.push(c[S+1]);const _=[],w=vn.empty();for(let S=m.length-1;S>=0;--S)if(!bT(_,m[S])){const C=m[S];let j=g[S];j=bt(j);const F=h.yc(C);if(j instanceof hh)_.push(C);else{const z=Vc(j,F);z!=null&&(_.push(C),w.set(C,z))}}const b=new Un(_);return new yT(w,b,h.fieldTransforms)}function pC(s,e,t,i=!1){return Vc(t,s.Cc(i?4:3,e))}function Vc(s,e){if(TT(s=bt(s)))return Fg("Unsupported field value:",e,s),wT(s,e);if(s instanceof dh)return(function(i,o){if(!_T(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const c=[];let h=0;for(const m of i){let g=Vc(m,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),h++}return{arrayValue:{values:c}}})(s,e)}return(function(i,o){if((i=bt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Sw(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Ke.fromDate(i);return{timestampValue:kd(o.serializer,c)}}if(i instanceof Ke){const c=new Ke(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:kd(o.serializer,c)}}if(i instanceof zr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ln)return{bytesValue:jw(o.serializer,i._byteString)};if(i instanceof wt){const c=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:xg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof qr)return(function(h,m){return{mapValue:{fields:{[cw]:{stringValue:uw},[Dd]:{arrayValue:{values:h.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return Tg(m.serializer,_)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Jd(i)}`)})(s,e)}function wT(s,e){const t={};return rw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ci(s,((i,o)=>{const c=Vc(o,e.mc(i));c!=null&&(t[i]=c)})),{mapValue:{fields:t}}}function TT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ke||s instanceof zr||s instanceof Ln||s instanceof wt||s instanceof dh||s instanceof qr)}function Fg(s,e,t){if(!TT(t)||!tw(t)){const i=Jd(t);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function ng(s,e,t){if((e=bt(e))instanceof Mc)return e._internalPath;if(typeof e=="string")return Qg(s,e);throw zd("Field path arguments must be of type string or ",s,!1,void 0,t)}const yC=new RegExp("[~\\*/\\[\\]]");function Qg(s,e,t){if(e.search(yC)>=0)throw zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Mc(...e.split("."))._internalPath}catch{throw zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function zd(s,e,t,i,o){const c=i&&!i.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||h)&&(g+=" (found",c&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new he($.INVALID_ARGUMENT,m+s+g)}function bT(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t,i,o,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _C(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _C extends qd{data(){return super.data()}}function fh(s,e){return typeof e=="string"?Qg(s,e):e instanceof Mc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new he($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kg{}class Yg extends Kg{}function Tt(s,e,...t){let i=[];e instanceof Kg&&i.push(e),i=i.concat(t),(function(c){const h=c.filter((g=>g instanceof Xg)).length,m=c.filter((g=>g instanceof mh)).length;if(h>1||h>0&&m>0)throw new he($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)s=o._apply(s);return s}class mh extends Yg{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new mh(e,t,i)}_apply(e){const t=this._parse(e);return ST(e._query,t),new Di(e.firestore,e.converter,Km(e._query,t))}_parse(e){const t=kc(e.firestore);return(function(c,h,m,g,_,w,b){let S;if(_.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new he($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){K0(b,w);const j=[];for(const F of b)j.push(Q0(g,c,F));S={arrayValue:{values:j}}}else S=Q0(g,c,b)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||K0(b,w),S=pC(m,h,b,w==="in"||w==="not-in");return kt.create(_,w,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Xe(s,e,t){const i=e,o=fh("where",s);return mh._create(o,i,t)}class Xg extends Kg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Xg(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:pr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let h=o;const m=c.getFlattenedFilters();for(const g of m)ST(h,g),h=Km(h,g)})(e._query,t),new Di(e.firestore,e.converter,Km(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $g extends Yg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $g(e,t)}_apply(e){const t=(function(o,c,h){if(o.startAt!==null)throw new he($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vc(c,h)})(e._query,this._field,this._direction);return new Di(e.firestore,e.converter,(function(o,c){const h=o.explicitOrderBy.concat([c]);return new Bo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function Bd(s,e="asc"){const t=e,i=fh("orderBy",s);return $g._create(i,t)}class Wg extends Yg{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Wg(e,t,i)}_apply(e){return new Di(e.firestore,e.converter,Pd(e._query,this._limit,this._limitType))}}function AT(s){return AR("limit",s),Wg._create("limit",s,"F")}function Q0(s,e,t){if(typeof(t=bt(t))=="string"){if(t==="")throw new he($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_w(e)&&t.indexOf("/")!==-1)throw new he($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ct.fromString(t));if(!Ee.isDocumentKey(i))throw new he($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return c0(s,new Ee(i))}if(t instanceof wt)return c0(s,t._key);throw new he($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jd(t)}.`)}function K0(s,e){if(!Array.isArray(s)||s.length===0)throw new he($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ST(s,e){const t=(function(o,c){for(const h of o)for(const m of h.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class xT{convertValue(e,t="none"){switch(Si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ci(e,((o,c)=>{i[o]=this.convertValue(c,t)})),i}convertVectorValue(e){var i,o,c;const t=(c=(o=(i=e.fields)==null?void 0:i[Dd].arrayValue)==null?void 0:o.values)==null?void 0:c.map((h=>Rt(h.doubleValue)));return new qr(t)}convertGeoPoint(e){return new zr(Rt(e.latitude),Rt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=eh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(pc(e));default:return null}}convertTimestamp(e){const t=bi(e);return new Ke(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ct.fromString(e);Qe(Gw(i),9688,{name:e});const o=new yc(i.get(1),i.get(3)),c=new Ee(i.popFirst(5));return o.isEqual(t)||Is(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}class EC extends xT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,t)}}class Eo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ei extends qd{constructor(e,t,i,o,c,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(fh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ei._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ei._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ei._jsonSchema={type:Vt("string",Ei._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class Td extends Ei{data(e={}){return super.data(e)}}class Ao{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Eo(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Td(this._firestore,this._userDataWriter,i.key,i,new Eo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new Td(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Eo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new Td(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Eo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,w=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),w=h.indexOf(m.doc.key)),{type:wC(m.type),doc:g,oldIndex:_,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ao._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wC(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(s){s=gr(s,wt);const e=gr(s.firestore,Ta);return lC(uh(e),s._key).then((t=>TC(e,s,t)))}Ao._jsonSchemaVersion="firestore/querySnapshot/1.0",Ao._jsonSchema={type:Vt("string",Ao._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class Zg extends xT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,t)}}function gt(s){s=gr(s,Di);const e=gr(s.firestore,Ta),t=uh(e),i=new Zg(e);return vC(s._query),cC(t,s._query).then((o=>new Ao(e,i,s,o)))}function Hd(s,e,t){s=gr(s,wt);const i=gr(s.firestore,Ta),o=Jg(s.converter,e,t);return tp(i,[Hg(kc(i),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,hn.none())])}function ep(s,e,t,...i){s=gr(s,wt);const o=gr(s.firestore,Ta),c=kc(o);let h;return h=typeof(e=bt(e))=="string"||e instanceof Mc?ET(c,"updateDoc",s._key,e,t,i):vT(c,"updateDoc",s._key,e),tp(o,[h.toMutation(s._key,hn.exists(!0))])}function jc(s,e){const t=gr(s.firestore,Ta),i=En(s),o=Jg(s.converter,e);return tp(t,[Hg(kc(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,hn.exists(!1))]).then((()=>i))}function tp(s,e){return(function(i,o){const c=new Lr;return i.asyncQueue.enqueueAndForget((async()=>KI(await aC(i),o,c))),c.promise})(uh(s),e)}function TC(s,e,t){const i=t.docs.get(e._key),o=new Zg(s);return new Ei(s,o,e._key,i,new Eo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC={maxAttempts:5};function sc(s,e){if((s=bt(s)).firestore!==e)throw new he($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=kc(e)}get(e){const t=sc(e,this._firestore),i=new EC(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return we(24041);const c=o[0];if(c.isFoundDocument())return new qd(this._firestore,i,c.key,c,t.converter);if(c.isNoDocument())return new qd(this._firestore,i,t._key,null,t.converter);throw we(18433,{doc:c})}))}set(e,t,i){const o=sc(e,this._firestore),c=Jg(o.converter,t,i),h=Hg(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,i);return this._transaction.set(o._key,h),this}update(e,t,i,...o){const c=sc(e,this._firestore);let h;return h=typeof(t=bt(t))=="string"||t instanceof Mc?ET(this._dataReader,"Transaction.update",c._key,t,i,o):vT(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,h),this}delete(e){const t=sc(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC extends AC{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=sc(e,this._firestore),i=new Zg(this._firestore);return super.get(e).then((o=>new Ei(this._firestore,i,t._key,o._document,new Eo(!1,!1),t.converter)))}}function xC(s,e,t){s=gr(s,Ta);const i={...bC,...t};return(function(c){if(c.maxAttempts<1)throw new he($.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(c,h,m){const g=new Lr;return c.asyncQueue.enqueueAndForget((async()=>{const _=await oC(c);new rC(c.asyncQueue,_,m,h,g).ju()})),g.promise})(uh(s),(o=>e(new SC(s,o))),i)}function RT(s){return new Gg("increment",s)}(function(e,t=!0){(function(o){Uo=o})(Lo),Io(new pa("firestore",((i,{instanceIdentifier:o,options:c})=>{const h=i.getProvider("app").getImmediate(),m=new Ta(new gR(i.getProvider("auth-internal")),new _R(h,i.getProvider("app-check-internal")),(function(_,w){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new he($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yc(_.options.projectId,w)})(h,o),h);return c={useFetchStreams:t,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),yi($v,Wv,e),yi($v,Wv,"esm2020")})();function IT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RC=IT,CT=new xc("auth","Firebase",IT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=new dg("@firebase/auth");function IC(s,...e){Gd.logLevel<=Ue.WARN&&Gd.warn(`Auth (${Lo}): ${s}`,...e)}function bd(s,...e){Gd.logLevel<=Ue.ERROR&&Gd.error(`Auth (${Lo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(s,...e){throw rp(s,...e)}function mr(s,...e){return rp(s,...e)}function np(s,e,t){const i={...RC(),[e]:t};return new xc("auth","Firebase",i).create(e,{appName:s.name})}function Br(s){return np(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function CC(s,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&rr(s,"argument-error"),np(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rp(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return CT.create(s,...e)}function xe(s,e,...t){if(!s)throw rp(e,...t)}function Ss(s){const e="INTERNAL ASSERTION FAILED: "+s;throw bd(e),new Error(e)}function Ns(s,e){s||Ss(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function NC(){return Y0()==="http:"||Y0()==="https:"}function Y0(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NC()||GS()||"connection"in navigator)?navigator.onLine:!0}function OC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ns(t>e,"Short delay should be less than long delay!"),this.isMobile=qS()||FS()}get(){return DC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(s,e){Ns(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kC=new Lc(3e4,6e4);function Ms(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Fr(s,e,t,i,o={}){return DT(s,o,async()=>{let c={},h={};i&&(e==="GET"?h=i:c={body:JSON.stringify(i)});const m=Rc({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const _={method:e,headers:g,...c};return HS()||(_.referrerPolicy="no-referrer"),s.emulatorConfig&&jo(s.emulatorConfig.host)&&(_.credentials="include"),NT.fetch()(await OT(s,s.config.apiHost,t,m),_)})}async function DT(s,e,t){s._canInitEmulator=!1;const i={...PC,...e};try{const o=new jC(s),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw fd(s,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const m=c.ok?h.errorMessage:h.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw fd(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw fd(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw fd(s,"user-disabled",h);const w=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw np(s,w,_);rr(s,w)}}catch(o){if(o instanceof Os)throw o;rr(s,"network-request-failed",{message:String(o)})}}async function Uc(s,e,t,i,o={}){const c=await Fr(s,e,t,i,o);return"mfaPendingCredential"in c&&rr(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function OT(s,e,t,i){const o=`${e}${t}?${i}`,c=s,h=c.config.emulator?sp(s.config,o):`${s.config.apiScheme}://${o}`;return MC.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function VC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(mr(this.auth,"network-request-failed")),kC.get())})}}function fd(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=mr(s,e,i);return o.customData._tokenResponse=t,o}function X0(s){return s!==void 0&&s.enterprise!==void 0}class LC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return VC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function UC(s,e){return Fr(s,"GET","/v2/recaptchaConfig",Ms(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(s,e){return Fr(s,"POST","/v1/accounts:delete",e)}async function Fd(s,e){return Fr(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qC(s,e=!1){const t=bt(s),i=await t.getIdToken(e),o=ip(i);xe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c==null?void 0:c.sign_in_provider;return{claims:o,token:i,authTime:hc(Om(o.auth_time)),issuedAtTime:hc(Om(o.iat)),expirationTime:hc(Om(o.exp)),signInProvider:h||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Om(s){return Number(s)*1e3}function ip(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return bd("JWT malformed, contained fewer than 3 sections"),null;try{const o=ME(t);return o?JSON.parse(o):(bd("Failed to decode base64 JWT payload"),null)}catch(o){return bd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function $0(s){const e=ip(s);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Os&&BC(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function BC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qd(s){var b;const e=s.auth,t=await s.getIdToken(),i=await ko(s,Fd(e,{idToken:t}));xe(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const c=(b=o.providerUserInfo)!=null&&b.length?PT(o.providerUserInfo):[],h=FC(s.providerData,c),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!(h!=null&&h.length),_=m?g:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new sg(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(s,w)}async function GC(s){const e=bt(s);await Qd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FC(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function PT(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(s,e){const t=await DT(s,{},async()=>{const i=Rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,h=await OT(s,o,"/v1/token",`key=${c}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:i};return s.emulatorConfig&&jo(s.emulatorConfig.host)&&(g.credentials="include"),NT.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function KC(s,e){return Fr(s,"POST","/v2/accounts:revokeToken",Ms(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=$0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:c}=await QC(e,t);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:c}=t,h=new So;return i&&(xe(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(xe(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(xe(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new So,this.toJSON())}_performRefresh(){return Ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(s,e){xe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class fr{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new HC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new sg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ko(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qC(this,e)}reload(){return GC(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Qd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Br(this.auth));const e=await this.getIdToken();return await ko(this,zC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,h=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,_=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:b,emailVerified:S,isAnonymous:C,providerData:j,stsTokenManager:F}=t;xe(b&&F,e,"internal-error");const z=So.fromJSON(this.name,F);xe(typeof b=="string",e,"internal-error"),ci(i,e.name),ci(o,e.name),xe(typeof S=="boolean",e,"internal-error"),xe(typeof C=="boolean",e,"internal-error"),ci(c,e.name),ci(h,e.name),ci(m,e.name),ci(g,e.name),ci(_,e.name),ci(w,e.name);const ie=new fr({uid:b,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:C,photoURL:h,phoneNumber:c,tenantId:m,stsTokenManager:z,createdAt:_,lastLoginAt:w});return j&&Array.isArray(j)&&(ie.providerData=j.map(se=>({...se}))),g&&(ie._redirectEventId=g),ie}static async _fromIdTokenResponse(e,t,i=!1){const o=new So;o.updateFromServerResponse(t);const c=new fr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Qd(c),c}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];xe(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?PT(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),m=new So;m.updateFromIdToken(i);const g=new fr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new sg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=new Map;function xs(s){Ns(s instanceof Function,"Expected a class definition");let e=W0.get(s);return e?(Ns(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,W0.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}MT.type="NONE";const J0=MT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(s,e,t){return`firebase:${s}:${e}:${t}`}class xo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=Ad(this.userKey,o.apiKey,c),this.fullPersistenceKey=Ad("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Fd(this.auth,{idToken:e}).catch(()=>{});return t?fr._fromGetAccountInfoResponse(this.auth,t,e):null}return fr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new xo(xs(J0),e,i);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=o[0]||xs(J0);const h=Ad(i,e.config.apiKey,e.name);let m=null;for(const _ of t)try{const w=await _._get(h);if(w){let b;if(typeof w=="string"){const S=await Fd(e,{idToken:w}).catch(()=>{});if(!S)break;b=await fr._fromGetAccountInfoResponse(e,S,w)}else b=fr._fromJSON(e,w);_!==c&&(m=b),c=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new xo(c,e,i):(c=g[0],m&&await c._set(h,m.toJSON()),await Promise.all(t.map(async _=>{if(_!==c)try{await _._remove(h)}catch{}})),new xo(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zT(e))return"Blackberry";if(qT(e))return"Webos";if(VT(e))return"Safari";if((e.includes("chrome/")||jT(e))&&!e.includes("edge/"))return"Chrome";if(UT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function kT(s=fn()){return/firefox\//i.test(s)}function VT(s=fn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jT(s=fn()){return/crios\//i.test(s)}function LT(s=fn()){return/iemobile/i.test(s)}function UT(s=fn()){return/android/i.test(s)}function zT(s=fn()){return/blackberry/i.test(s)}function qT(s=fn()){return/webos/i.test(s)}function ap(s=fn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function YC(s=fn()){var e;return ap(s)&&!!((e=window.navigator)!=null&&e.standalone)}function XC(){return QS()&&document.documentMode===10}function BT(s=fn()){return ap(s)||UT(s)||qT(s)||zT(s)||/windows phone/i.test(s)||LT(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(s,e=[]){let t;switch(s){case"Browser":t=Z0(fn());break;case"Worker":t=`${Z0(fn())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=c=>new Promise((h,m)=>{try{const g=e(c);h(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(s,e={}){return Fr(s,"GET","/v2/passwordPolicy",Ms(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=6;class ZC{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??JC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eE(this),this.idTokenSubscription=new eE(this),this.beforeStateQueue=new $C(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xs(t)),this._initializationPromise=this.queue(async()=>{var i,o,c;if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Fd(this,{idToken:e}),i=await fr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(xn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(c=this.redirectUser)==null?void 0:c._redirectEventId,m=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(Br(this));const t=e?bt(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(Br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WC(this),t=new ZC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await KC(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&xs(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[xs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(m,this,"internal-error"),m.then(()=>{h||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&IC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Qr(s){return bt(s)}class eE{constructor(e){this.auth=e,this.observer=null,this.addObserver=ex(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tN(s){gh=s}function GT(s){return gh.loadJS(s)}function nN(){return gh.recaptchaEnterpriseScript}function rN(){return gh.gapiScript}function sN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class iN{constructor(){this.enterprise=new aN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class aN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const oN="recaptcha-enterprise",FT="NO_RECAPTCHA";class lN{constructor(e){this.type=oN,this.auth=Qr(e)}async verify(e="verify",t=!1){async function i(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,m)=>{UC(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new LC(g);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,h(_.siteKey)}}).catch(g=>{m(g)})})}function o(c,h,m){const g=window.grecaptcha;X0(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(_=>{h(_)}).catch(()=>{h(FT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new iN().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{i(this.auth).then(m=>{if(!t&&X0(window.grecaptcha))o(m,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=nN();g.length!==0&&(g+=m),GT(g).then(()=>{o(m,c,h)}).catch(_=>{h(_)})}}).catch(m=>{h(m)})})}}async function tE(s,e,t,i=!1,o=!1){const c=new lN(s);let h;if(o)h=FT;else try{h=await c.verify(t)}catch{h=await c.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Kd(s,e,t,i,o){var c;if((c=s._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await tE(s,e,t,t==="getOobCode");return i(s,h)}else return i(s,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await tE(s,e,t,t==="getOobCode");return i(s,m)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(s,e){const t=fg(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(ga(c,e??{}))return o;rr(o,"already-initialized")}return t.initialize({options:e})}function uN(s,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(xs);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function dN(s,e,t){const i=Qr(s);xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=QT(e),{host:h,port:m}=hN(e),g=m===null?"":`:${m}`,_={url:`${c}//${h}${g}/`},w=Object.freeze({host:h,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){xe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xe(ga(_,i.config.emulator)&&ga(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=_,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,jo(h)?(LE(`${c}//${h}${g}`),UE("Auth",!0)):fN()}function QT(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function hN(s){const e=QT(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:nE(i.substr(c.length+1))}}else{const[c,h]=i.split(":");return{host:c,port:nE(h)}}}function nE(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function fN(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ss("not implemented")}_getIdTokenResponse(e){return Ss("not implemented")}_linkToIdToken(e,t){return Ss("not implemented")}_getReauthenticationResolver(e){return Ss("not implemented")}}async function mN(s,e){return Fr(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN(s,e){return Uc(s,"POST","/v1/accounts:signInWithPassword",Ms(s,e))}async function KT(s,e){return Fr(s,"POST","/v1/accounts:sendOobCode",Ms(s,e))}async function pN(s,e){return KT(s,e)}async function yN(s,e){return KT(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(s,e){return Uc(s,"POST","/v1/accounts:signInWithEmailLink",Ms(s,e))}async function vN(s,e){return Uc(s,"POST","/v1/accounts:signInWithEmailLink",Ms(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends op{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new bc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new bc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kd(e,t,"signInWithPassword",gN);case"emailLink":return _N(e,{email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kd(e,i,"signUpPassword",mN);case"emailLink":return vN(e,{idToken:t,email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(s,e){return Uc(s,"POST","/v1/accounts:signInWithIdp",Ms(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="http://localhost";class va extends op{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=t;if(!i||!o)return null;const h=new va(i,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Ro(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ro(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ro(e,t)}buildRequest(){const e={requestUri:EN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Rc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TN(s){const e=Zl(ec(s)).link,t=e?Zl(ec(e)).deep_link_id:null,i=Zl(ec(s)).deep_link_id;return(i?Zl(ec(i)).link:null)||i||t||e||s}class lp{constructor(e){const t=Zl(ec(e)),i=t.apiKey??null,o=t.oobCode??null,c=wN(t.mode??null);xe(i&&o&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=TN(e);try{return new lp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.providerId=Go.PROVIDER_ID}static credential(e,t){return bc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=lp.parseLink(t);return xe(i,"argument-error"),bc._fromEmailAndCode(e,i.code,i.tenantId)}}Go.PROVIDER_ID="password";Go.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends cp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends zc{constructor(){super("facebook.com")}static credential(e){return va._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends zc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return va._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return As.credential(t,i)}catch{return null}}}As.GOOGLE_SIGN_IN_METHOD="google.com";As.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends zc{constructor(){super("github.com")}static credential(e){return va._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.GITHUB_SIGN_IN_METHOD="github.com";di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends zc{constructor(){super("twitter.com")}static credential(e,t){return va._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return hi.credential(t,i)}catch{return null}}}hi.TWITTER_SIGN_IN_METHOD="twitter.com";hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YT(s,e){return Uc(s,"POST","/v1/accounts:signUp",Ms(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const c=await fr._fromIdTokenResponse(e,i,o),h=rE(i);return new Ds({user:c,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=rE(i);return new Ds({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function rE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(s){var o;if(xn(s.app))return Promise.reject(Br(s));const e=Qr(s);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new Ds({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await YT(e,{returnSecureToken:!0}),i=await Ds._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd extends Os{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Yd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Yd(e,t,i,o)}}function XT(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Yd._fromErrorAndOperation(s,c,e,i):c})}async function AN(s,e,t=!1){const i=await ko(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Ds._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(s,e,t=!1){const{auth:i}=s;if(xn(i.app))return Promise.reject(Br(i));const o="reauthenticate";try{const c=await ko(s,XT(i,o,e,s),t);xe(c.idToken,i,"internal-error");const h=ip(c.idToken);xe(h,i,"internal-error");const{sub:m}=h;return xe(s.uid===m,i,"user-mismatch"),Ds._forOperation(s,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&rr(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $T(s,e,t=!1){if(xn(s.app))return Promise.reject(Br(s));const i="signIn",o=await XT(s,i,e),c=await Ds._fromIdTokenResponse(s,i,o);return t||await s._updateCurrentUser(c.user),c}async function xN(s,e){return $T(Qr(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WT(s){const e=Qr(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function RN(s,e,t){const i=Qr(s);await Kd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",yN)}async function IN(s,e,t){if(xn(s.app))return Promise.reject(Br(s));const i=Qr(s),h=await Kd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YT).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&WT(s),g}),m=await Ds._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(m.user),m}function CN(s,e,t){return xn(s.app)?Promise.reject(Br(s)):xN(bt(s),Go.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&WT(s),i})}async function JT(s,e){const t=bt(s),o={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:c}=await pN(t.auth,o);c!==s.email&&await s.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(s,e){return Fr(s,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(s,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=bt(s),c={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},h=await ko(i,NN(i.auth,c));i.displayName=h.displayName||null,i.photoURL=h.photoUrl||null;const m=i.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=i.displayName,m.photoURL=i.photoURL),await i._updateTokensIfNecessary(h)}function ON(s,e,t,i){return bt(s).onIdTokenChanged(e,t,i)}function PN(s,e,t){return bt(s).beforeAuthStateChanged(e,t)}function MN(s,e,t,i){return bt(s).onAuthStateChanged(e,t,i)}function kN(s){return bt(s).signOut()}const Xd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xd,"1"),this.storage.removeItem(Xd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=1e3,jN=10;class eb extends ZT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},c=this.storage.getItem(i);XC()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,jN):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},VN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}eb.type="LOCAL";const LN=eb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb extends ZT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tb.type="SESSION";const nb=tb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new ph(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:c}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(h).map(async _=>_(t.origin,c)),g=await UN(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((m,g)=>{const _=up("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(b){const S=b;if(S.data.eventId===_)switch(S.data.status){case"ack":clearTimeout(w),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(S.data.response);break;default:clearTimeout(w),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(){return window}function qN(s){Hr().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(){return typeof Hr().WorkerGlobalScope<"u"&&typeof Hr().importScripts=="function"}async function BN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HN(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function GN(){return rb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="firebaseLocalStorageDb",FN=1,$d="firebaseLocalStorage",ib="fbase_key";class qc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function yh(s,e){return s.transaction([$d],e?"readwrite":"readonly").objectStore($d)}function QN(){const s=indexedDB.deleteDatabase(sb);return new qc(s).toPromise()}function ig(){const s=indexedDB.open(sb,FN);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore($d,{keyPath:ib})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains($d)?e(i):(i.close(),await QN(),e(await ig()))})})}async function sE(s,e,t){const i=yh(s,!0).put({[ib]:e,value:t});return new qc(i).toPromise()}async function KN(s,e){const t=yh(s,!1).get(e),i=await new qc(t).toPromise();return i===void 0?null:i.value}function iE(s,e){const t=yh(s,!0).delete(e);return new qc(t).toPromise()}const YN=800,XN=3;class ab{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ig(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>XN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ph._getInstance(GN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await BN(),!this.activeServiceWorker)return;this.sender=new zN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ig();return await sE(e,Xd,"1"),await iE(e,Xd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>sE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>KN(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>iE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=yh(o,!1).getAll();return new qc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ab.type="LOCAL";const $N=ab;new Lc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(s,e){return e?xs(e):(xe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp extends op{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ro(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ro(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function WN(s){return $T(s.auth,new dp(s),s.bypassAuthState)}function JN(s){const{auth:e,user:t}=s;return xe(t,e,"internal-error"),SN(t,new dp(s),s.bypassAuthState)}async function ZN(s){const{auth:e,user:t}=s;return xe(t,e,"internal-error"),AN(t,new dp(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,t,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:c,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WN;case"linkViaPopup":case"linkViaRedirect":return ZN;case"reauthViaPopup":case"reauthViaRedirect":return JN;default:rr(this.auth,"internal-error")}}resolve(e){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=new Lc(2e3,1e4);async function t2(s,e,t){if(xn(s.app))return Promise.reject(mr(s,"operation-not-supported-in-this-environment"));const i=Qr(s);CC(s,e,cp);const o=ob(i,t);return new ma(i,"signInViaPopup",e,o).executeNotNull()}class ma extends lb{constructor(e,t,i,o,c){super(e,t,o,c),this.provider=i,this.authWindow=null,this.pollId=null,ma.currentPopupAction&&ma.currentPopupAction.cancel(),ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Ns(this.filter.length===1,"Popup operations only handle one event");const e=up();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,e2.get())};e()}}ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="pendingRedirect",Sd=new Map;class r2 extends lb{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Sd.get(this.auth._key());if(!e){try{const i=await s2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Sd.set(this.auth._key(),e)}return this.bypassAuthState||Sd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function s2(s,e){const t=o2(e),i=a2(s);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function i2(s,e){Sd.set(s._key(),e)}function a2(s){return xs(s._redirectPersistence)}function o2(s){return Ad(n2,s.config.apiKey,s.name)}async function l2(s,e,t=!1){if(xn(s.app))return Promise.reject(Br(s));const i=Qr(s),o=ob(i,e),h=await new r2(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=600*1e3;class u2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!d2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!cb(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(mr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=c2&&this.cachedEventUids.clear(),this.cachedEventUids.has(aE(e))}saveEventToCache(e){this.cachedEventUids.add(aE(e)),this.lastProcessedEventTime=Date.now()}}function aE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function cb({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function d2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cb(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h2(s,e={}){return Fr(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,m2=/^https?/;async function g2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await h2(s);for(const t of e)try{if(p2(t))return}catch{}rr(s,"unauthorized-domain")}function p2(s){const e=rg(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!m2.test(t))return!1;if(f2.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=new Lc(3e4,6e4);function oE(){const s=Hr().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function _2(s){return new Promise((e,t)=>{var o,c,h;function i(){oE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oE(),t(mr(s,"network-request-failed"))},timeout:y2.get()})}if((c=(o=Hr().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((h=Hr().gapi)!=null&&h.load)i();else{const m=sN("iframefcb");return Hr()[m]=()=>{gapi.load?i():t(mr(s,"network-request-failed"))},GT(`${rN()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw xd=null,e})}let xd=null;function v2(s){return xd=xd||_2(s),xd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=new Lc(5e3,15e3),w2="__/auth/iframe",T2="emulator/auth/iframe",b2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},A2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function S2(s){const e=s.config;xe(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?sp(e,T2):`https://${s.config.authDomain}/${w2}`,i={apiKey:e.apiKey,appName:s.name,v:Lo},o=A2.get(s.config.apiHost);o&&(i.eid=o);const c=s._getFrameworks();return c.length&&(i.fw=c.join(",")),`${t}?${Rc(i).slice(1)}`}async function x2(s){const e=await v2(s),t=Hr().gapi;return xe(t,s,"internal-error"),e.open({where:document.body,url:S2(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:b2,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const h=mr(s,"network-request-failed"),m=Hr().setTimeout(()=>{c(h)},E2.get());function g(){Hr().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I2=500,C2=600,N2="_blank",D2="http://localhost";class lE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O2(s,e,t,i=I2,o=C2){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g={...R2,width:i.toString(),height:o.toString(),top:c,left:h},_=fn().toLowerCase();t&&(m=jT(_)?N2:t),kT(_)&&(e=e||D2,g.scrollbars="yes");const w=Object.entries(g).reduce((S,[C,j])=>`${S}${C}=${j},`,"");if(YC(_)&&m!=="_self")return P2(e||"",m),new lE(null);const b=window.open(e||"",m,w);xe(b,s,"popup-blocked");try{b.focus()}catch{}return new lE(b)}function P2(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="__/auth/handler",k2="emulator/auth/handler",V2=encodeURIComponent("fac");async function cE(s,e,t,i,o,c){xe(s.config.authDomain,s,"auth-domain-config-required"),xe(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:Lo,eventId:o};if(e instanceof cp){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",ZS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,b]of Object.entries({}))h[w]=b}if(e instanceof zc){const w=e.getScopes().filter(b=>b!=="");w.length>0&&(h.scopes=w.join(","))}s.tenantId&&(h.tid=s.tenantId);const m=h;for(const w of Object.keys(m))m[w]===void 0&&delete m[w];const g=await s._getAppCheckToken(),_=g?`#${V2}=${encodeURIComponent(g)}`:"";return`${j2(s)}?${Rc(m).slice(1)}${_}`}function j2({config:s}){return s.emulator?sp(s,k2):`https://${s.authDomain}/${M2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="webStorageSupport";class L2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nb,this._completeRedirectFn=l2,this._overrideRedirectResult=i2}async _openPopup(e,t,i,o){var h;Ns((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const c=await cE(e,t,i,rg(),o);return O2(e,c,up())}async _openRedirect(e,t,i,o){await this._originValidation(e);const c=await cE(e,t,i,rg(),o);return qN(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(Ns(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await x2(e),i=new u2(e);return t.register("authEvent",o=>(xe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pm,{type:Pm},o=>{var h;const c=(h=o==null?void 0:o[0])==null?void 0:h[Pm];c!==void 0&&t(!!c),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=g2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return BT()||VT()||ap()}}const U2=L2;var uE="@firebase/auth",dE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function B2(s){Io(new pa("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;xe(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HT(s)},_=new eN(i,o,c,g);return uN(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Io(new pa("auth-internal",e=>{const t=Qr(e.getProvider("auth").getImmediate());return(i=>new z2(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),yi(uE,dE,q2(s)),yi(uE,dE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=300,G2=jE("authIdTokenMaxAge")||H2;let hE=null;const F2=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>G2)return;const o=t==null?void 0:t.token;hE!==o&&(hE=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Q2(s=HE()){const e=fg(s,"auth");if(e.isInitialized())return e.getImmediate();const t=cN(s,{popupRedirectResolver:U2,persistence:[$N,LN,nb]}),i=jE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const h=F2(c.toString());PN(t,h,()=>h(t.currentUser)),ON(t,m=>h(m))}}const o=kE("auth");return o&&dN(t,`http://${o}`),t}function K2(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}tN({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const c=mr("internal-error");c.customData=o,t(c)},i.type="text/javascript",i.charset="UTF-8",K2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});B2("Browser");const Y2={apiKey:"AIzaSyCDZJqOx5eXpu3cD_FBJ8oi-hYvLCpbDXE",authDomain:"verdadreto-bec6a.firebaseapp.com",projectId:"verdadreto-bec6a",storageBucket:"verdadreto-bec6a.firebasestorage.app",messagingSenderId:"938969209658",appId:"1:938969209658:web:534282f57a8ff381c00e03"},ub=BE(Y2),Pe=dC(ub),yr=Q2(ub),db=new As;db.setCustomParameters({prompt:"select_account"});class X2{constructor(){this.currentUser=null,this.sessionId=this.generateSessionId()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setCurrentUser(e){this.currentUser=e}async trackEvent(e,t){var i,o,c;try{const h={eventType:e,userId:(i=this.currentUser)==null?void 0:i.uid,userEmail:((o=this.currentUser)==null?void 0:o.email)||void 0,isAnonymous:((c=this.currentUser)==null?void 0:c.isAnonymous)??!0,timestamp:Ke.now(),sessionId:this.sessionId,...t};await jc(tt(Pe,"analytics"),h),console.log("Analytics event tracked:",e)}catch(h){console.error("Error tracking analytics event:",h)}}async trackGameStart(e,t,i){await this.trackEvent("game_start",{packId:e,packName:t,gameData:{playersCount:i}})}async trackGameEnd(e,t,i,o){await this.trackEvent("game_end",{packId:e,packName:t,gameData:{roundsPlayed:i,duration:o}})}async trackPackSelected(e,t){await this.trackEvent("pack_selected",{packId:e,packName:t})}async trackDemoUsed(e,t){await this.trackEvent("demo_used",{packId:e,packName:t})}async trackUserLogin(){await this.trackEvent("user_login")}async trackUserRegister(){await this.trackEvent("user_register")}async trackSessionStart(){await this.trackEvent("session_start")}async trackSessionEnd(){await this.trackEvent("session_end")}async getStatsForPeriod(e,t){const i=new Date;let o,c=i;switch(e){case"realtime":o=new Date(i.getTime()-300*1e3);break;case"day":o=t?new Date(t):new Date(i.getFullYear(),i.getMonth(),i.getDate()),c=new Date(o.getTime()+1440*60*1e3);break;case"month":o=t?new Date(t):new Date(i.getFullYear(),i.getMonth(),1),c=new Date(o.getFullYear(),o.getMonth()+1,0);break;case"year":o=t?new Date(t):new Date(i.getFullYear(),0,1),c=new Date(o.getFullYear()+1,0,0);break}const h=Ke.fromDate(o),m=Ke.fromDate(c),g=Tt(tt(Pe,"analytics"),Xe("timestamp",">=",h),Xe("timestamp","<=",m),Bd("timestamp","desc")),w=(await gt(g)).docs.map(b=>b.data());return this.calculateStats(w,e)}calculateStats(e,t){const i=new Set,o=new Set,c=new Set,h=new Map;let m=0,g=0,_=0;const w=Date.now()-300*1e3,b=new Set;e.forEach(C=>{switch(C.userId&&(i.add(C.userId),C.isAnonymous?c.add(C.userId):o.add(C.userId)),C.timestamp.toMillis()>w&&b.add(C.sessionId),C.eventType){case"game_start":if(m++,C.packId&&C.packName){const j=h.get(C.packId)||{name:C.packName,count:0};h.set(C.packId,{...j,count:j.count+1})}break;case"demo_used":g++;break}}),_=b.size;const S=Array.from(h.entries()).map(([C,j])=>({packId:C,packName:j.name,count:j.count})).sort((C,j)=>j.count-C.count).slice(0,10);return{totalUsers:i.size,registeredUsers:o.size,anonymousUsers:c.size,totalGames:m,totalDemos:g,activeUsers:_,mostPlayedPacks:S,gamesPerDay:t==="day"?m:Math.round(m/this.getDaysInPeriod(t)),demosPerDay:t==="day"?g:Math.round(g/this.getDaysInPeriod(t))}}getDaysInPeriod(e){switch(e){case"realtime":return 1;case"day":return 1;case"month":return 30;case"year":return 365;default:return 1}}async getRecentEvents(e=50){const t=Tt(tt(Pe,"analytics"),Bd("timestamp","desc"),AT(e));return(await gt(t)).docs.map(o=>({id:o.id,...o.data()}))}}const mi=new X2,$2=({availablePacks:s,purchasedPacks:e,adWatchedPacks:t,referralUnlockedPacks:i,suggestionUnlockedPacks:o,onContinue:c,onBack:h,onGoToShop:m,onPlayDemo:g})=>{const _=s.some(C=>C.id==="base"),w={id:"base",name:"Pack Base",description:"Preguntas y retos básicos incluidos",price:"INCLUIDO",icon:"🎮",questionsUrl:"",daresUrl:"",allowDemo:!1,demoPlaysCount:0},b=s.filter(C=>C.id!=="no-ads"),S=_?b:[w,...b];return e.length>0,p.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:p.jsxs(Rn,{className:"w-full max-w-2xl text-center",children:[p.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Packs Disponibles"}),p.jsx("p",{className:"text-gray-400 mb-8",children:"Estos son los packs que tienes disponibles para jugar"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:S.map(C=>{const j=C.id==="base"||e.includes(C.id),F=C.id==="base",z=t.includes(C.id),ie=i.includes(C.id),se=o.includes(C.id),re=j||ie||se;return p.jsxs("div",{className:`relative p-4 rounded-lg border transition-all duration-200 ${j?"border-green-500 bg-green-500/10":ie?"border-blue-500 bg-blue-500/10":se?"border-purple-500 bg-purple-500/10":z?"border-yellow-500 bg-yellow-500/10":"border-gray-600 bg-gray-800/50 opacity-60"}`,children:[p.jsx("div",{className:"absolute top-2 right-2",children:j?p.jsx(Tm,{className:"w-6 h-6 text-green-500"}):ie?p.jsx(Tm,{className:"w-6 h-6 text-blue-500"}):se?p.jsx(Tm,{className:"w-6 h-6 text-purple-500"}):p.jsx(To,{className:"w-6 h-6 text-yellow-500"})}),p.jsx("div",{className:"text-4xl mb-2",children:C.icon}),p.jsx("h3",{className:`text-xl font-bold mb-2 ${re||z?"text-white":"text-gray-400"}`,children:C.name}),p.jsx("p",{className:`text-sm mb-3 ${re||z?"text-gray-300":"text-gray-500"}`,children:C.description}),C.isReferralUnlockable&&!re&&p.jsxs("p",{className:"text-xs text-blue-400 mb-2",children:["🎯 Requiere ",C.requiredReferrals," referidos"]}),C.isSuggestionUnlockable&&!re&&p.jsxs("p",{className:"text-xs text-purple-400 mb-2",children:["💡 Requiere ",C.requiredApprovedSuggestions," sugerencias aprobadas"]}),p.jsx("div",{className:`text-lg font-semibold ${j?"text-green-400":ie?"text-blue-400":se?"text-purple-400":"text-yellow-400"}`,children:F?"INCLUIDO":j?"COMPRADO":ie?"POR REFERIDOS":se?"POR SUGERENCIAS":z?"DEMO VISTO":"PREMIUM"}),!re&&!z&&p.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx(To,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),p.jsx("p",{className:"text-yellow-400 font-semibold text-sm mb-3",children:C.isReferralUnlockable?`${C.requiredReferrals} REFERIDOS`:C.isSuggestionUnlockable?`${C.requiredApprovedSuggestions} SUGERENCIAS`:"PREMIUM"}),C.allowDemo&&p.jsx(De,{onClick:fe=>{fe.stopPropagation(),mi.trackDemoUsed(C.id,C.name),g(C.id)},variant:"secondary",className:"px-3 py-1 text-xs bg-yellow-500 hover:bg-yellow-600 text-white border border-yellow-400 shadow-md",children:"💎 Jugar Demo"})]})})]},C.id)})}),s.some(C=>!e.includes(C.id))&&p.jsx("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:p.jsxs("p",{className:"text-yellow-400 text-sm",children:[p.jsx(To,{className:"w-4 h-4 inline mr-2"}),"Los packs premium están bloqueados. Visita la tienda para desbloquearlos."]})}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(De,{onClick:h,variant:"secondary",className:"px-6",children:"Volver"}),p.jsx(De,{onClick:m,variant:"secondary",className:"px-6 bg-yellow-600 hover:bg-yellow-700 text-white",children:"Ir a la Tienda"}),p.jsx(De,{onClick:()=>{S.forEach(C=>{const j=C.id==="base"||e.includes(C.id),F=i.includes(C.id),z=o.includes(C.id);(j||F||z)&&mi.trackPackSelected(C.id,C.name)}),c()},className:"px-6",disabled:!1,children:"Continuar al Juego"})]})]})})},W2="modulepreload",J2=function(s,e){return new URL(s,e).href},fE={},hb=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let h=function(w){return Promise.all(w.map(b=>Promise.resolve(b).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};const m=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),_=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=h(t.map(w=>{if(w=J2(w,i),w in fE)return;fE[w]=!0;const b=w.endsWith(".css"),S=b?'[rel="stylesheet"]':"";if(!!i)for(let F=m.length-1;F>=0;F--){const z=m[F];if(z.href===w&&(!b||z.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${S}`))return;const j=document.createElement("link");if(j.rel=b?"stylesheet":W2,b||(j.as="script"),j.crossOrigin="",j.href=w,_&&j.setAttribute("nonce",_),document.head.appendChild(j),b)return new Promise((F,z)=>{j.addEventListener("load",F),j.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${w}`)))})}))}function c(h){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=h,window.dispatchEvent(m),!m.defaultPrevented)throw h}return o.then(h=>{for(const m of h||[])m.status==="rejected"&&c(m.reason);return e().catch(c)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Vo;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(Vo||(Vo={}));class Mm extends Error{constructor(e,t,i){super(e),this.message=e,this.code=t,this.data=i}}const Z2=s=>{var e,t;return s!=null&&s.androidBridge?"android":!((t=(e=s==null?void 0:s.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},eD=s=>{const e=s.CapacitorCustomPlatform||null,t=s.Capacitor||{},i=t.Plugins=t.Plugins||{},o=()=>e!==null?e.name:Z2(s),c=()=>o()!=="web",h=b=>{const S=_.get(b);return!!(S!=null&&S.platforms.has(o())||m(b))},m=b=>{var S;return(S=t.PluginHeaders)===null||S===void 0?void 0:S.find(C=>C.name===b)},g=b=>s.console.error(b),_=new Map,w=(b,S={})=>{const C=_.get(b);if(C)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),C.proxy;const j=o(),F=m(b);let z;const ie=async()=>(!z&&j in S?z=typeof S[j]=="function"?z=await S[j]():z=S[j]:e!==null&&!z&&"web"in S&&(z=typeof S.web=="function"?z=await S.web():z=S.web),z),se=(x,I)=>{var P,M;if(F){const V=F==null?void 0:F.methods.find(R=>I===R.name);if(V)return V.rtype==="promise"?R=>t.nativePromise(b,I.toString(),R):(R,Ie)=>t.nativeCallback(b,I.toString(),R,Ie);if(x)return(P=x[I])===null||P===void 0?void 0:P.bind(x)}else{if(x)return(M=x[I])===null||M===void 0?void 0:M.bind(x);throw new Mm(`"${b}" plugin is not implemented on ${j}`,Vo.Unimplemented)}},re=x=>{let I;const P=(...M)=>{const V=ie().then(R=>{const Ie=se(R,x);if(Ie){const Oe=Ie(...M);return I=Oe==null?void 0:Oe.remove,Oe}else throw new Mm(`"${b}.${x}()" is not implemented on ${j}`,Vo.Unimplemented)});return x==="addListener"&&(V.remove=async()=>I()),V};return P.toString=()=>`${x.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:x,writable:!1,configurable:!1}),P},fe=re("addListener"),ue=re("removeListener"),X=(x,I)=>{const P=fe({eventName:x},I),M=async()=>{const R=await P;ue({eventName:x,callbackId:R},I)},V=new Promise(R=>P.then(()=>R({remove:M})));return V.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await M()},V},N=new Proxy({},{get(x,I){switch(I){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return F?X:fe;case"removeListener":return ue;default:return re(I)}}});return i[b]=N,_.set(b,{name:b,proxy:N,platforms:new Set([...Object.keys(S),...F?[j]:[]])}),N};return t.convertFileSrc||(t.convertFileSrc=b=>b),t.getPlatform=o,t.handleError=g,t.isNativePlatform=c,t.isPluginAvailable=h,t.registerPlugin=w,t.Exception=Mm,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},tD=s=>s.Capacitor=eD(s),un=tD(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),hp=un.registerPlugin;class fb{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(t);const c=this.windowListeners[e];c&&!c.registered&&this.addWindowListener(c),i&&this.sendRetainedArgumentsForEvent(e);const h=async()=>this.removeListener(e,t);return Promise.resolve({remove:h})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,i){const o=this.listeners[e];if(!o){if(i){let c=this.retainedEventArguments[e];c||(c=[]),c.push(t),this.retainedEventArguments[e]=c}return}o.forEach(c=>c(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:i=>{this.notifyListeners(t,i)}}}unimplemented(e="not implemented"){return new un.Exception(e,Vo.Unimplemented)}unavailable(e="not available"){return new un.Exception(e,Vo.Unavailable)}async removeListener(e,t){const i=this.listeners[e];if(!i)return;const o=i.indexOf(t);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(i=>{this.notifyListeners(e,i)}))}}const mE=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),gE=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class nD extends fb{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[o,c]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=gE(o).trim(),c=gE(c).trim(),t[o]=c}),t}async setCookie(e){try{const t=mE(e.key),i=mE(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,c=(e.path||"/").replace("path=",""),h=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${i||""}${o}; path=${c}; ${h};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}hp("CapacitorCookies",{web:()=>new nD});const rD=async s=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{const o=i.result;e(o.indexOf(",")>=0?o.split(",")[1]:o)},i.onerror=o=>t(o),i.readAsDataURL(s)}),sD=(s={})=>{const e=Object.keys(s);return Object.keys(s).map(o=>o.toLocaleLowerCase()).reduce((o,c,h)=>(o[c]=s[e[h]],o),{})},iD=(s,e=!0)=>s?Object.entries(s).reduce((i,o)=>{const[c,h]=o;let m,g;return Array.isArray(h)?(g="",h.forEach(_=>{m=e?encodeURIComponent(_):_,g+=`${c}=${m}&`}),g.slice(0,-1)):(m=e?encodeURIComponent(h):h,g=`${c}=${m}`),`${i}&${g}`},"").substr(1):null,aD=(s,e={})=>{const t=Object.assign({method:s.method||"GET",headers:s.headers},e),o=sD(s.headers)["content-type"]||"";if(typeof s.data=="string")t.body=s.data;else if(o.includes("application/x-www-form-urlencoded")){const c=new URLSearchParams;for(const[h,m]of Object.entries(s.data||{}))c.set(h,m);t.body=c.toString()}else if(o.includes("multipart/form-data")||s.data instanceof FormData){const c=new FormData;if(s.data instanceof FormData)s.data.forEach((m,g)=>{c.append(g,m)});else for(const m of Object.keys(s.data))c.append(m,s.data[m]);t.body=c;const h=new Headers(t.headers);h.delete("content-type"),t.headers=h}else(o.includes("application/json")||typeof s.data=="object")&&(t.body=JSON.stringify(s.data));return t};class oD extends fb{async request(e){const t=aD(e,e.webFetchExtra),i=iD(e.params,e.shouldEncodeUrlParams),o=i?`${e.url}?${i}`:e.url,c=await fetch(o,t),h=c.headers.get("content-type")||"";let{responseType:m="text"}=c.ok?e:{};h.includes("application/json")&&(m="json");let g,_;switch(m){case"arraybuffer":case"blob":_=await c.blob(),g=await rD(_);break;case"json":g=await c.json();break;case"document":case"text":default:g=await c.text()}const w={};return c.headers.forEach((b,S)=>{w[S]=b}),{data:g,headers:w,status:c.status,url:c.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}hp("CapacitorHttp",{web:()=>new oD});var pE;(function(s){s.General="General",s.ParentalGuidance="ParentalGuidance",s.Teen="Teen",s.MatureAudience="MatureAudience"})(pE||(pE={}));var yE;(function(s){s.SizeChanged="bannerAdSizeChanged",s.Loaded="bannerAdLoaded",s.FailedToLoad="bannerAdFailedToLoad",s.Opened="bannerAdOpened",s.Closed="bannerAdClosed",s.AdImpression="bannerAdImpression"})(yE||(yE={}));var ag;(function(s){s.TOP_CENTER="TOP_CENTER",s.CENTER="CENTER",s.BOTTOM_CENTER="BOTTOM_CENTER"})(ag||(ag={}));var og;(function(s){s.BANNER="BANNER",s.FULL_BANNER="FULL_BANNER",s.LARGE_BANNER="LARGE_BANNER",s.MEDIUM_RECTANGLE="MEDIUM_RECTANGLE",s.LEADERBOARD="LEADERBOARD",s.ADAPTIVE_BANNER="ADAPTIVE_BANNER",s.SMART_BANNER="SMART_BANNER"})(og||(og={}));var fc;(function(s){s.Loaded="interstitialAdLoaded",s.FailedToLoad="interstitialAdFailedToLoad",s.Showed="interstitialAdShowed",s.FailedToShow="interstitialAdFailedToShow",s.Dismissed="interstitialAdDismissed"})(fc||(fc={}));var _E;(function(s){s.Loaded="onRewardedInterstitialAdLoaded",s.FailedToLoad="onRewardedInterstitialAdFailedToLoad",s.Showed="onRewardedInterstitialAdShowed",s.FailedToShow="onRewardedInterstitialAdFailedToShow",s.Dismissed="onRewardedInterstitialAdDismissed",s.Rewarded="onRewardedInterstitialAdReward"})(_E||(_E={}));var wo;(function(s){s.Loaded="onRewardedVideoAdLoaded",s.FailedToLoad="onRewardedVideoAdFailedToLoad",s.Showed="onRewardedVideoAdShowed",s.FailedToShow="onRewardedVideoAdFailedToShow",s.Dismissed="onRewardedVideoAdDismissed",s.Rewarded="onRewardedVideoAdReward"})(wo||(wo={}));var vE;(function(s){s.NOT_REQUIRED="NOT_REQUIRED",s.OBTAINED="OBTAINED",s.REQUIRED="REQUIRED",s.UNKNOWN="UNKNOWN"})(vE||(vE={}));var EE;(function(s){s[s.DISABLED=0]="DISABLED",s[s.EEA=1]="EEA",s[s.NOT_EEA=2]="NOT_EEA"})(EE||(EE={}));const cn=hp("AdMob",{web:()=>hb(()=>import("./web-ZaVIwyUt.js"),[],import.meta.url).then(s=>new s.AdMobWeb)}),md={enabled:!0,questionChangeThreshold:CE.CHANGES_BEFORE_AD,adLoadingTime:1e3,adPlayingTime:3e3,showInRoundEnd:!0,showInGameEnd:!0,showInDemo:!1,autoPlay:!0,skipAfterSeconds:5,frequency:{questionChanges:3,roundEnd:1,gameEnd:1},types:{interstitial:!0,rewarded:!0,banner:!1}};class lD{constructor(){this.STORAGE_KEY="ads_config",this.config=this.loadConfig()}loadConfig(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){const t=JSON.parse(e);return{...md,...t}}}catch(e){console.error("Error loading ads config:",e)}return{...md}}saveConfig(){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.config))}catch(e){console.error("Error saving ads config:",e)}}getConfig(){return{...this.config}}updateConfig(e){this.config={...this.config,...e},this.saveConfig()}setEnabled(e){this.config.enabled=e,this.saveConfig()}isEnabled(){return this.config.enabled}shouldShowAdForQuestionChange(e){return this.config.enabled&&e>=this.config.questionChangeThreshold}shouldShowAdInRoundEnd(){return this.config.enabled&&this.config.showInRoundEnd}shouldShowAdInGameEnd(){return this.config.enabled&&this.config.showInGameEnd}shouldShowAdInDemo(){return this.config.enabled&&this.config.showInDemo}getAdLoadingTime(){return this.config.adLoadingTime}getAdPlayingTime(){return this.config.adPlayingTime}getQuestionChangeThreshold(){return this.config.questionChangeThreshold}resetToDefault(){this.config={...md},this.saveConfig()}exportConfig(){return JSON.stringify(this.config,null,2)}importConfig(e){try{const t=JSON.parse(e);if(this.isValidConfig(t))return this.config={...md,...t},this.saveConfig(),!0}catch(t){console.error("Error importing ads config:",t)}return!1}isValidConfig(e){return typeof e=="object"&&typeof e.enabled=="boolean"&&typeof e.questionChangeThreshold=="number"&&typeof e.adLoadingTime=="number"&&typeof e.adPlayingTime=="number"}getConfigStats(){return{enabled:this.config.enabled,questionChangeThreshold:this.config.questionChangeThreshold,totalTypes:Object.values(this.config.types).filter(Boolean).length,autoPlay:this.config.autoPlay,lastModified:localStorage.getItem(this.STORAGE_KEY+"_modified")||"Never"}}}const Mt=new lD;class cD{constructor(){this.isInitialized=!1,this.config=null,this.configUnsubscribe=null}async initialize(e){if(this.isInitialized){this.config={...this.config,...e};return}try{this.config=e,un.isNativePlatform()?(await cn.initialize({requestTrackingAuthorization:!0,testingDevices:e.testMode?["YOUR_DEVICE_ID"]:[],initializeForTesting:e.testMode||!1}),this.isInitialized=!0,console.log("AdMob initialized successfully"),this.configUnsubscribe=Mt.onConfigChange(t=>{console.log("Configuración de anuncios actualizada:",t)})):console.log("AdMob not available on web platform")}catch(t){throw console.error("Failed to initialize AdMob:",t),t}}async showBannerAd(e,t){const i={success:!1,adType:jn.BANNER,error:null,timestamp:Date.now()};try{if(!Mt.canShowAd(jn.BANNER,t))return i.error="Ad blocked by configuration or conditions",console.log("Banner ad blocked by configuration"),i;if(!this.isInitialized||!this.config)throw i.error="AdMob not initialized",new Error("AdMob not initialized");if(!un.isNativePlatform())throw i.error="AdMob banners only available on native platforms",new Error("AdMob banners only available on native platforms");if(!this.config.bannerAdUnitId)throw i.error="bannerAdUnitId not configured",new Error("bannerAdUnitId not configured");const o={adId:this.config.bannerAdUnitId,adSize:og.ADAPTIVE_BANNER,position:ag.BOTTOM_CENTER,margin:0,isTesting:this.config.testMode||!1,...e};return await cn.showBanner(o),Mt.recordAdShown(jn.BANNER),i.success=!0,console.log("Banner ad shown successfully"),i}catch(o){return i.error=o instanceof Error?o.message:"Unknown error",console.error("Failed to show banner ad:",o),i}}async hideBannerAd(){if(this.isInitialized&&un.isNativePlatform())try{await cn.hideBanner(),console.log("Banner ad hidden successfully")}catch(e){console.error("Failed to hide banner ad:",e)}}async resumeBannerAd(){if(this.isInitialized&&un.isNativePlatform())try{await cn.resumeBanner(),console.log("Banner ad resumed successfully")}catch(e){console.error("Failed to resume banner ad:",e)}}async removeBannerAd(){if(this.isInitialized&&un.isNativePlatform())try{await cn.removeBanner(),console.log("Banner ad removed successfully")}catch(e){console.error("Failed to remove banner ad:",e)}}async showInterstitial(e){const t={success:!1,adType:jn.POST_GAME,error:null,timestamp:Date.now()};try{if(!Mt.canShowAd(jn.POST_GAME,e))return t.error="Ad blocked by configuration or conditions",console.log("Interstitial ad blocked by configuration"),t;if(!this.isInitialized||!this.config)return t.error="AdMob not initialized",console.warn("AdMob not initialized"),t;if(!un.isNativePlatform())return t.error="Interstitials are only available on native platforms",console.warn("Interstitials are only available on native platforms"),t;if(!this.config.interstitialAdUnitId)return t.error="No interstitialAdUnitId configured",console.warn("No interstitialAdUnitId configured"),t;let i=null,o=null,c=null;const h=new Promise((_,w)=>{setTimeout(()=>w(new Error("Interstitial ad timeout")),3e4)}),m=new Promise(async(_,w)=>{try{i=await cn.addListener(fc.Loaded,j=>{console.log("Interstitial loaded")}),c=await cn.addListener(fc.FailedToLoad,j=>{console.error("Interstitial failed to load:",j),w(new Error("Failed to load interstitial"))});let b=null;const S=new Promise(j=>{b=j});o=await cn.addListener(fc.Dismissed,()=>{console.log("Interstitial dismissed"),b&&b()});const C={adId:this.config.interstitialAdUnitId,isTesting:this.config.testMode||!1};await cn.prepareInterstitial(C),await cn.showInterstitial(),await S,_(!0)}catch(b){w(b)}});return await Promise.race([m,h])&&(Mt.recordAdShown(jn.POST_GAME),t.success=!0),t}catch(i){return t.error=i instanceof Error?i.message:"Unknown error",console.error("Failed to show interstitial ad:",i),t}finally{try{loadedSub&&await loadedSub.remove(),dismissedSub&&await dismissedSub.remove(),failedSub&&await failedSub.remove()}catch(i){console.warn("Error cleaning up interstitial listeners:",i)}}}async showRewarded(e){const t={success:!1,adType:jn.QUESTION_CHANGE,error:null,timestamp:Date.now()};try{if(!Mt.canShowAd(jn.QUESTION_CHANGE,e))return t.error="Ad blocked by configuration or conditions",console.log("Rewarded ad blocked by configuration"),t;if(!this.isInitialized||!this.config)return t.error="AdMob not initialized",console.warn("AdMob not initialized"),t;if(!un.isNativePlatform())return t.error="Rewarded ads are only available on native platforms",console.warn("Rewarded ads are only available on native platforms"),t;if(!this.config.rewardedAdUnitId)return t.error="No rewardedAdUnitId configured",console.warn("No rewardedAdUnitId configured"),t;let i=null,o=null,c=null,h=null;const m=new Promise((w,b)=>{setTimeout(()=>b(new Error("Rewarded ad timeout")),3e4)}),g=new Promise(async(w,b)=>{try{let S=!1;i=await cn.addListener(wo.Loaded,z=>{console.log("Rewarded loaded")}),h=await cn.addListener(wo.FailedToLoad,z=>{console.error("Rewarded failed to load:",z),b(new Error("Failed to load rewarded ad"))}),o=await cn.addListener(wo.Rewarded,z=>{S=!0,console.log("User rewarded",z)});let C=null;const j=new Promise(z=>{C=z});c=await cn.addListener(wo.Dismissed,()=>{console.log("Rewarded dismissed"),C&&C()});const F={adId:this.config.rewardedAdUnitId,isTesting:this.config.testMode||!1};await cn.prepareRewardVideoAd(F),await cn.showRewardVideoAd(),await j,w(S)}catch(S){b(S)}});return await Promise.race([g,m])&&(Mt.recordAdShown(jn.QUESTION_CHANGE),t.success=!0,t.rewarded=!0),t}catch(i){return t.error=i instanceof Error?i.message:"Unknown error",console.error("Failed to show rewarded ad:",i),t}finally{try{loadedSub&&await loadedSub.remove(),rewardedSub&&await rewardedSub.remove(),dismissedSub&&await dismissedSub.remove(),failedSub&&await failedSub.remove()}catch(i){console.warn("Error cleaning up rewarded listeners:",i)}}}async showBestMonetizingAd(e){var t,i;if((t=this.config)!=null&&t.rewardedAdUnitId){const o=await this.showRewarded(e);if(o.success)return o}if((i=this.config)!=null&&i.interstitialAdUnitId){const o=await this.showInterstitial(e);if(o.success)return o}return{success:!1,adType:jn.POST_GAME,error:"No ads available or all blocked",timestamp:Date.now()}}isNativePlatform(){return un.isNativePlatform()}isWebPlatform(){return un.getPlatform()==="web"}getConfig(){return this.config}async showPostGameAd(e){const t=await this.showInterstitial(e);return t.adType=jn.POST_GAME,t}async showPostRoundAd(e){const t=await this.showInterstitial(e);return t.adType=jn.POST_ROUND,t}async showQuestionChangeAd(e){return await this.showRewarded(e)}canShowAdType(e,t){return Mt.canShowAd(e,t)}getAdsConfig(){return Mt.getConfig()}getSessionState(){return Mt.getSessionState()}resetSession(){Mt.resetSessionState()}destroy(){this.configUnsubscribe&&(this.configUnsubscribe(),this.configUnsubscribe=null)}}const wi=new cD,uD=({pack:s,isOpen:e,onClose:t,onStartDemo:i,onAdWatched:o,hasNoAds:c=!1})=>{const[h,m]=te.useState(!1),[g,_]=te.useState(null);if(!e)return null;const w=async()=>{m(!0),_(null);try{if(c||!Mt.shouldShowAdInDemo()){o&&o(s.id),i();return}await wi.showInterstitial()?(o&&o(s.id),i(),t()):_("No se pudo cargar el anuncio. Necesitas ver un anuncio para jugar el demo.")}catch(b){console.error("Error al mostrar anuncio:",b),_("Error al cargar el anuncio. Necesitas ver un anuncio para jugar el demo.")}finally{m(!1)}};return p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 animate-fade-in",children:p.jsxs(Rn,{className:"w-full max-w-md relative",children:[p.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:p.jsx(SS,{className:"w-6 h-6"})}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-6xl mb-4",children:s.icon}),p.jsxs("h2",{className:"text-2xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-500",children:["Demo: ",s.name]}),p.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:p.jsxs("div",{className:"flex items-start gap-3 text-left",children:[p.jsx(xS,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),p.jsxs("div",{className:"text-sm text-blue-300",children:[p.jsx("p",{className:"mb-2",children:p.jsx("strong",{children:"¿Qué incluye el demo?"})}),p.jsxs("ul",{className:"space-y-1 text-xs",children:[p.jsx("li",{children:"• Podrás probar 5 preguntas y 5 retos que siempre serán los mismos (el pack incluye muchos más)"}),p.jsx("li",{children:"• Puedes jugar de forma ilimitada"}),p.jsx("li",{children:"• Solo necesitas ver un anuncio antes de cada partida"}),p.jsx("li",{children:"• Perfecto para probar si te gusta el pack"})]})]})]})}),g&&p.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mb-4",children:p.jsx("p",{className:"text-yellow-400 text-sm",children:g})}),p.jsxs("div",{className:"flex flex-col gap-3",children:[p.jsx(De,{onClick:w,disabled:h,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:h?p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Cargando anuncio..."]}):p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx("span",{role:"img","aria-label":"gem",children:"💎"}),"Ver anuncio y jugar demo"]})}),p.jsx(De,{onClick:t,variant:"secondary",className:"w-full",disabled:h,children:"Volver atrás"})]}),p.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"¿Te gusta el pack? Al final de la partida podrás comprarlo completo."})]})]})})},dD=({players:s,currentPlayerIndex:e,onNextPlayer:t,onNewGame:i,questions:o,dares:c,roundConfig:h,gameProgress:m,onRoundEnd:g,onQuestionAsked:_,onDareCompleted:w,onQuestionChange:b,onAdRequired:S,questionChangeState:C={changesCount:0,isAdLoading:!1,isAdPlaying:!1}})=>{const[j,F]=te.useState(null),[z,ie]=te.useState(null),[se,re]=te.useState(new Set),[fe,ue]=te.useState(new Set),X=s[e];te.useEffect(()=>{mi.trackGameStart("mixed","Juego Mixto",s.length)},[]);const N=R=>{if(!R.includes("$jugador"))return R;const Ie=s.filter((Q,ae)=>ae!==e);if(Ie.length===0)return R.replace(/\$jugador/g,"otro jugador");const Oe=Ie[Math.floor(Math.random()*Ie.length)];return R.replace(/\$jugador/g,Oe)},x=te.useMemo(()=>o.map((R,Ie)=>({item:R,index:Ie})),[o]),I=te.useMemo(()=>c.map((R,Ie)=>({item:R,index:Ie})),[c]),P=R=>{const Ie=R==="pregunta"?x:I,Oe=R==="pregunta"?se:fe,Q=R==="pregunta"?re:ue,ae=Ie.filter(Y=>!Oe.has(Y.index));if(ae.length===0){Q(new Set);const Y=Math.floor(Math.random()*Ie.length),pe=Ie[Y];F(pe.item),Q(O=>new Set(O).add(pe.index))}else{const Y=Math.floor(Math.random()*ae.length),pe=ae[Y];F(pe.item),Q(O=>new Set(O).add(pe.index))}ie(R),R==="pregunta"&&_?_():R==="reto"&&w&&w()},M=async()=>{if(!j||!z)return;if(Mt.shouldShowAdForQuestionChange(C.changesCount+1)&&S)try{await S()}catch(pe){console.error("Error showing ad:",pe);return}const Ie=z==="pregunta"?x:I,Oe=z==="pregunta"?se:fe,Q=z==="pregunta"?re:ue;let ae=0,Y=null;for(;ae<CE.MAX_CHANGE_ATTEMPTS&&!Y;){const pe=Ie.filter(O=>!Oe.has(O.index)&&O.item.text!==j.text);if(pe.length===0){Q(new Set);const O=Ie.filter(J=>J.item.text!==j.text);if(O.length>0){const J=Math.floor(Math.random()*O.length),le=O[J];Y=le.item,Q(oe=>new Set([le.index]))}else break}else{const O=Math.floor(Math.random()*pe.length),J=pe[O];Y=J.item,Q(le=>new Set(le).add(J.index))}ae++}Y&&(F(Y),b&&b())},V=()=>{F(null),ie(null),e===s.length-1?m.currentRound+1>h.totalRounds?t():g():t()};return p.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center animate-fade-in",children:[p.jsxs(Rn,{className:"w-full max-w-lg min-h-[24rem] flex flex-col justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"mb-2",children:p.jsxs("p",{className:"text-sm text-gray-500",children:["Ronda ",m.currentRound," de ",h.totalRounds]})}),p.jsx("p",{className:"text-lg text-gray-400",children:"Turno de:"}),p.jsx("h2",{className:"text-4xl font-bold my-4 text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400",children:X})]}),j?p.jsxs("div",{className:"animate-fade-in",children:[p.jsx("h3",{className:"text-2xl font-bold mb-6 text-cyan-400 capitalize",children:z}),p.jsx("p",{className:"text-xl md:text-2xl leading-relaxed",children:N(j.text)}),p.jsxs("div",{className:"mt-6 flex flex-col items-center gap-2",children:[p.jsxs(De,{onClick:M,variant:"secondary",className:"text-sm px-4 py-2",disabled:C.isAdLoading||C.isAdPlaying,children:["🔄 Cambiar ",z]}),p.jsxs("p",{className:"text-xs text-gray-500",children:["Cambios restantes antes del anuncio: ",Mt.getQuestionChangeThreshold()-C.changesCount%Mt.getQuestionChangeThreshold()]}),(C.isAdLoading||C.isAdPlaying)&&p.jsx("p",{className:"text-xs text-yellow-400",children:C.isAdLoading?"Cargando anuncio...":"Reproduciendo anuncio..."})]})]}):p.jsxs("div",{className:"animate-fade-in",children:[p.jsx("h3",{className:"text-2xl font-bold mb-6",children:"¿Verdad o Reto?"}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(De,{onClick:()=>P("pregunta"),className:"w-full sm:w-auto",children:"Pregunta"}),p.jsx(De,{onClick:()=>P("reto"),variant:"secondary",className:"w-full sm:w-auto",children:"Reto"})]})]}),p.jsx("div",{className:"mt-8",children:j&&p.jsx(De,{onClick:V,children:"Siguiente Jugador"})})]}),p.jsx("button",{onClick:i,className:"mt-6 text-sm text-gray-500 hover:text-gray-300 transition",children:"Empezar nuevo juego"})]})},hD=({onSelectRounds:s,onBack:e})=>{const t=[{value:5,label:"5 Rondas",description:"Partida rápida (15-20 min)"},{value:10,label:"10 Rondas",description:"Partida estándar (30-40 min)"},{value:15,label:"15 Rondas",description:"Partida larga (45-60 min)"}];return p.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:p.jsxs(Rn,{className:"w-full max-w-2xl text-center",children:[p.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Configurar Partida"}),p.jsx("p",{className:"text-gray-400 mb-8",children:"Elige cuántas rondas quieres jugar"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:t.map(i=>p.jsxs("div",{className:"relative p-6 rounded-lg border border-gray-600 bg-gray-800/50 hover:border-purple-500 transition-all duration-200 cursor-pointer group",onClick:()=>s(i.value),children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:i.value}),p.jsx("div",{className:"text-lg font-semibold text-white mb-2",children:i.label}),p.jsx("div",{className:"text-sm text-gray-400",children:i.description})]}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]},i.value))}),p.jsx("div",{className:"text-sm text-gray-500 mb-6",children:"💡 Al final de cada ronda se mostrará un anuncio breve"}),p.jsx("div",{className:"flex gap-4 justify-center",children:p.jsx(De,{onClick:e,variant:"secondary",className:"px-6",children:"Volver"})})]})})},mb=({dataAdSlot:s,className:e,style:t,fallbackContent:i,timeout:o=5e3,admobConfig:c,hasNoAds:h=!1})=>{const[m,g]=te.useState("loading"),[_,w]=te.useState(!1),[b,S]=te.useState(!1);return te.useEffect(()=>{let C,j=null,F=!0;return(async()=>{if(h){F&&w(!0);return}try{C=setTimeout(()=>{F&&m==="loading"&&(console.warn("Ad loading timeout reached"),g("timeout"),w(!0))},o);const ie=un.isNativePlatform();if(S(ie),ie&&c)try{await wi.initialize({...c,bannerAdUnitId:s}),await wi.showBannerAd(),F&&(g("loaded"),clearTimeout(C));return}catch(se){console.warn("AdMob failed:",se),F&&(g("error"),w(!0),clearTimeout(C));return}if(typeof window<"u"&&!ie){let se=0;const re=10,fe=()=>{if(F)if(window.adsbygoogle||se>=re)try{(window.adsbygoogle=window.adsbygoogle||[]).push({}),setTimeout(()=>{if(F){if(j=document.querySelector(`[data-ad-slot="${s}"]`),j){const ue=j.innerHTML;ue&&ue.trim()!==""?g("loaded"):(g("error"),w(!0))}else g("error"),w(!0);clearTimeout(C)}},2e3)}catch(ue){console.error("Error loading AdSense ad:",ue),F&&(g("error"),w(!0),clearTimeout(C))}else se++,setTimeout(fe,200)};fe()}else ie&&!c&&(console.warn("Native platform detected but no AdMob config provided"),F&&(g("error"),w(!0),clearTimeout(C)))}catch(ie){console.error("Error in ad loading process:",ie),F&&(g("error"),w(!0),clearTimeout(C))}})(),()=>{F=!1,C&&clearTimeout(C),b&&m==="loaded"&&wi.removeBannerAd().catch(console.error)}},[s,o,c,h]),_?p.jsx("div",{className:`ad-fallback ${e||""}`,style:t,children:i||p.jsx("div",{className:"ad-fallback-message"})}):p.jsxs("div",{className:`ad-container ${e||""}`,style:t,children:[m==="loading"&&p.jsx("div",{className:"ad-loading",children:p.jsx("div",{className:"loading-spinner"})}),p.jsx("ins",{className:"adsbygoogle",style:{display:m==="loaded"?"block":"none",textAlign:"center",width:"100%",height:"auto"},"data-ad-client":"ca-pub-XXXXXXXXXXXXXXXX","data-ad-slot":s,"data-ad-format":"auto","data-full-width-responsive":"true"})]})},fD=({roundStats:s,currentRound:e,totalRounds:t,onContinue:i,onEndGame:o,hasNoAds:c=!1})=>{var j;const[h,m]=te.useState(!1),[g,_]=te.useState(!1),[w,b]=te.useState(5);te.useEffect(()=>{let F=!0;const z=async()=>{try{await wi.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),m(!0);const fe=await wi.showInterstitial();F&&(_(!0),console.log("Anuncio intersticial mostrado:",fe))}catch(fe){console.warn("Fallo al mostrar anuncio nativo:",fe),F&&(m(!0),_(!0))}},ie=!c&&Mt.shouldShowAdInRoundEnd();if(ie&&un.isNativePlatform())return z(),()=>{F=!1};if(!ie){m(!0),_(!0);return}const se=setTimeout(()=>{m(!0)},800);let re;return h&&!g&&(re=setInterval(()=>{b(fe=>fe<=1?(_(!0),re&&clearInterval(re),0):fe-1)},1e3)),()=>{clearTimeout(se),re&&clearInterval(re)}},[c,h,g]);const S=e>=t,C=un.isNativePlatform();return p.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:p.jsxs(Rn,{className:"w-full max-w-2xl text-center",children:[p.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-green-500 to-blue-500",children:S?"¡Partida Completada!":`¡Ronda ${s.roundNumber} Completada!`}),!S&&p.jsxs("p",{className:"text-gray-400 mb-6",children:["Ronda ",e," de ",t]}),p.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-6",children:[p.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Estadísticas de la Ronda"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-2xl font-bold text-blue-400",children:s.questionsAsked}),p.jsx("div",{className:"text-sm text-gray-400",children:"Preguntas"})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-2xl font-bold text-purple-400",children:s.daresCompleted}),p.jsx("div",{className:"text-sm text-gray-400",children:"Retos"})]})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Jugadores participantes:"}),p.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:((j=s.playersParticipated)==null?void 0:j.map((F,z)=>p.jsx("span",{className:"px-3 py-1 bg-purple-600 text-white rounded-full text-sm",children:F},z)))||p.jsx("span",{className:"text-gray-400 text-sm",children:"No hay jugadores registrados"})})]})]}),!c&&p.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[p.jsxs("div",{className:"text-center mb-4",children:[p.jsx("div",{className:"text-lg font-semibold mb-2",children:"📺 Anuncio"}),g?p.jsx("div",{className:"text-green-400 mb-4",children:"✅ Anuncio completado"}):p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",C?"":`${w}s`]}),!C&&p.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:p.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-w)/5*100}%`}})})]})]}),!C&&p.jsx(mb,{dataAdSlot:"1234567890",className:"round-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},hasNoAds:c,fallbackContent:p.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),p.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:S?p.jsx(De,{onClick:o,className:"px-8 py-3 text-lg",disabled:!c&&!g,children:"Ver Resultados Finales"}):p.jsxs(p.Fragment,{children:[p.jsx(De,{onClick:o,variant:"secondary",className:"px-6",disabled:!c&&!g,children:"Terminar Partida"}),p.jsx(De,{onClick:i,className:"px-8 py-3 text-lg",disabled:!c&&!g,children:"Siguiente Ronda"})]})}),!g&&p.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Los botones se habilitarán cuando termine el anuncio"})]})})},mD=({gameStats:s,players:e,onNewGame:t,onBackToMenu:i,hasNoAds:o=!1,isDemoMode:c=!1,demoPackId:h=null})=>{const m=s.gameEndTime&&s.gameStartTime?Math.round((s.gameEndTime.getTime()-s.gameStartTime.getTime())/1e3/60):0,g=s.totalRounds>0?Math.round(s.totalQuestions/s.totalRounds):0,_=s.totalRounds>0?Math.round(s.totalDares/s.totalRounds):0,[w,b]=te.useState(!1),[S,C]=te.useState(!1),[j,F]=te.useState(5),z=un.isNativePlatform();return te.useEffect(()=>{mi.trackGameEnd("mixed","Juego Mixto",s.totalRounds,m)},[]),te.useEffect(()=>{let ie=!0;const se=async()=>{try{await wi.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),C(!0);const X=await wi.showInterstitial();ie&&(b(!0),console.log("Anuncio intersticial al final de partida mostrado:",X))}catch(X){console.warn("Error mostrando anuncio al final de partida:",X),ie&&(C(!0),b(!0))}},re=!o&&Mt.shouldShowAdInGameEnd();if(re&&z)return se(),()=>{ie=!1};if(!re){b(!0),C(!0);return}const fe=setTimeout(()=>C(!0),800);let ue;return S&&!w&&(ue=setInterval(()=>{F(X=>X<=1?(b(!0),ue&&clearInterval(ue),0):X-1)},1e3)),()=>{clearTimeout(fe),ue&&clearInterval(ue)}},[o,z,S,w]),p.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:p.jsxs(Rn,{className:"w-full max-w-4xl text-center",children:[p.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500",children:"🎉 ¡Partida Finalizada! 🎉"}),p.jsx("p",{className:"text-gray-400 mb-8 text-base sm:text-lg",children:"¡Esperamos que se hayan divertido mucho!"}),!o&&p.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[p.jsxs("div",{className:"text-center mb-4",children:[p.jsx("div",{className:"text-lg font-semibold mb-2",children:"📺 Anuncio"}),w?p.jsx("div",{className:"text-green-400 mb-4",children:"✅ Anuncio completado"}):p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",z?"":`${j}s`]}),!z&&p.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:p.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-j)/5*100}%`}})})]})]}),!z&&p.jsx(mb,{dataAdSlot:"1234567890",className:"game-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},hasNoAds:o,fallbackContent:p.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[p.jsxs("div",{className:"bg-gradient-to-br from-blue-600/20 to-blue-800/20 rounded-lg p-6 border border-blue-500/30",children:[p.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-blue-400 mb-2",children:s.totalRounds}),p.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Rondas Jugadas"}),p.jsxs("div",{className:"text-sm text-gray-400",children:[m," minutos"]})]}),p.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-purple-800/20 rounded-lg p-6 border border-purple-500/30",children:[p.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-purple-400 mb-2",children:s.totalQuestions}),p.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Preguntas"}),p.jsxs("div",{className:"text-sm text-gray-400",children:[g," por ronda"]})]}),p.jsxs("div",{className:"bg-gradient-to-br from-pink-600/20 to-pink-800/20 rounded-lg p-6 border border-pink-500/30",children:[p.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-pink-400 mb-2",children:s.totalDares}),p.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Retos"}),p.jsxs("div",{className:"text-sm text-gray-400",children:[_," por ronda"]})]})]}),p.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[p.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Jugadores Participantes"}),p.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:e.map((ie,se)=>p.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full",children:[p.jsx("span",{className:"text-lg",children:"🎮"}),p.jsx("span",{className:"font-medium",children:ie})]},se))})]}),s.roundStats.length>0&&p.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[p.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Resumen por Rondas"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.roundStats.map((ie,se)=>{var re;return p.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 border border-gray-600",children:[p.jsxs("div",{className:"text-base sm:text-lg font-semibold text-purple-400 mb-2",children:["Ronda ",ie.roundNumber]}),p.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[p.jsxs("div",{children:["📝 ",ie.questionsAsked," preguntas"]}),p.jsxs("div",{children:["🎯 ",ie.daresCompleted," retos"]}),p.jsxs("div",{children:["👥 ",((re=ie.playersParticipated)==null?void 0:re.length)||0," jugadores"]})]})]},se)})})]}),c?p.jsxs("div",{className:"bg-gradient-to-r from-yellow-600/20 to-orange-600/20 rounded-lg p-6 mb-8 border border-yellow-500/30",children:[p.jsx("div",{className:"text-3xl mb-3",children:"🎮✨"}),p.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"¡Demo Completado!"}),p.jsx("p",{className:"text-gray-300 mb-4",children:"¿Te gustó este pack? ¡Hay muchas más preguntas y retos esperándote!"}),p.jsxs("div",{className:"bg-yellow-500/10 rounded-lg p-4 border border-yellow-500/30",children:[p.jsx("p",{className:"text-yellow-200 font-medium mb-2",children:"💡 ¿Sabías que?"}),p.jsx("p",{className:"text-gray-300 text-sm",children:"El pack completo incluye más de 50 preguntas y retos únicos, ¡perfectos para cualquier ocasión!"})]}),p.jsx("div",{className:"mt-4",children:p.jsx(De,{onClick:i,className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-semibold rounded-lg",children:"🛒 ¡Ir a la Tienda!"})})]}):p.jsxs("div",{className:"bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-lg p-6 mb-8 border border-purple-500/30",children:[p.jsx("div",{className:"text-2xl mb-2",children:"🌟"}),p.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"¡Gracias por jugar!"}),p.jsx("p",{className:"text-gray-300",children:"Esperamos que hayan creado recuerdos increíbles. ¡No olviden compartir sus mejores momentos!"})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(De,{onClick:t,className:"px-8 py-3 text-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",disabled:!o&&!w,children:"🎮 Nueva Partida"}),p.jsx(De,{onClick:i,variant:"secondary",className:"px-8 py-3 text-lg",disabled:!o&&!w,children:"🏠 Menú Principal"})]}),p.jsxs("div",{className:"mt-8 text-xs text-gray-500",children:[p.jsx("p",{children:"¿Te gustó el juego? ¡Compártelo con tus amigos!"}),p.jsx("p",{className:"mt-1",children:"Verdad o Reto - La diversión nunca termina"})]})]})})},wE=["PUTO","PUTA","MIERDA","JODER","COÑO","CABRON","CABRONA","PENDEJO","PENDEJA","IDIOTA","ESTUPIDO","ESTUPIDA","TONTO","TONTA","IMBECIL","GILIPOLLAS","HIJO","HIJA","MADRE","PADRE","MAMA","PAPA","SEXO","PORNO","XXX","NAZI","HITLER","MUERTE","MATAR","SUICIDIO","DROGA","DROGAS","MARICON","MARICA","GAY","LESBIANA","TRANS","HOMO","HETERO","NEGRO","BLANCO","CHINO","JUDIO","MUSULMAN","CRISTIANO","GORDO","GORDA","FEO","FEA","FLACOS","FLACA","FUCK","SHIT","BITCH","DAMN","HELL","ASS","ASSHOLE","BASTARD","STUPID","IDIOT","MORON","RETARD","DUMB","LOSER","FREAK","SEX","PORN","XXX","NUDE","NAKED","BOOBS","PENIS","VAGINA","NAZI","HITLER","KILL","DIE","DEATH","SUICIDE","DRUG","DRUGS","FAG","FAGGOT","HOMO","LESBIAN","TRANS","QUEER","BLACK","WHITE","ASIAN","JEWISH","MUSLIM","CHRISTIAN","FAT","UGLY","SKINNY","GROSS","DISGUSTING","WTF","OMFG","STFU","GTFO","LMAO","ROFL","ADMIN","MODERATOR","OWNER","STAFF","SUPPORT","VERDAD","RETO","GAME","JUEGO","APP","OFICIAL","666","420","69","88","1488","NULL","UNDEFINED","ERROR","ADMIN","ROOT","SYSTEM","DELETE","DROP","TRUNCATE","ALTER","CREATE"],gD=[/^\d+$/,/^[A-Z]\1{5}$/,/^(.)\1{2,}/,/^[0O1IL]{6}$/,/^(ABC|123|XYZ|QWE|ASD|ZXC)/],lg=s=>{if(!s||typeof s!="string")return!1;const e=s.toUpperCase().trim();if(e.length!==6||wE.includes(e))return!1;for(const h of wE)if(e.includes(h))return!1;for(const h of gD)if(h.test(e))return!1;const t="AEIOU",i="BCDFGHJKLMNPQRSTVWXYZ",o=e.split("").every(h=>t.includes(h)),c=e.split("").every(h=>i.includes(h));return!(o||c)},TE=(s=[])=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t=0;const i=1e3;for(;t<i;){let m="";for(let g=0;g<6;g++)m+=e.charAt(Math.floor(Math.random()*e.length));if(lg(m)&&!s.includes(m))return m;t++}const o=Date.now().toString(36).toUpperCase(),c=Math.random().toString(36).substring(2,4).toUpperCase(),h=(o+c).substring(0,6).padEnd(6,"0");return lg(h)?h:"REF001"},gb=s=>{if(!s||typeof s!="string")return{isValid:!1,error:"El código de referido es requerido"};const e=s.toUpperCase().trim().replace(/[^A-Z0-9]/g,"");return e.length!==6?{isValid:!1,error:"El código de referido debe tener exactamente 6 caracteres"}:lg(e)?{isValid:!0,sanitizedCode:e}:{isValid:!1,error:"El código de referido contiene contenido inapropiado o no válido"}},pD=async()=>{try{const s=tt(Pe,"users"),e=await gt(s),t=[];return e.forEach(i=>{const o=i.data();o.referralCode&&t.push(o.referralCode)}),t}catch(s){return console.error("Error getting existing referral codes:",s),[]}},yD=async s=>{try{const e=tt(Pe,"users"),t=Tt(e,Xe("referralCode","==",s));return!(await gt(t)).empty}catch(e){return console.error("Error checking referral code existence:",e),!1}},_D=async()=>{try{const s=await pD();return TE(s)}catch(s){return console.error("Error generating unique referral code:",s),TE([])}},fp=async(s,e)=>{try{const t=En(Pe,"users",s.uid);if(!(await Ps(t)).exists()){const o=await _D();let c={};if(e){const g=gb(e);g.isValid&&g.sanitizedCode?await yD(g.sanitizedCode)?c={usedReferralCode:g.sanitizedCode,referralProcessedAt:new Date}:console.warn("Referral code does not exist:",g.sanitizedCode):console.warn("Invalid referral code provided:",e,g.error)}const h={uid:s.uid,email:s.email,displayName:s.displayName,photoURL:s.photoURL,isAnonymous:s.isAnonymous,emailVerified:s.emailVerified,referralCode:o,referralCount:0,createdAt:new Date,lastLoginAt:new Date,migrationVersion:"1.0",usedReferralCode:null,referredBy:null,referralProcessedAt:null,lastKnownIP:null,deviceId:null,acceptedSuggestions:0,...c};await Hd(t,h);const m=En(Pe,"userReferralCodes",s.uid);await Hd(m,{referralCode:o,displayName:s.displayName||s.email||"Usuario",createdAt:new Date})}}catch(t){console.error("Error creating user profile:",t)}},Fo=s=>({uid:s.uid,email:s.email,displayName:s.displayName,photoURL:s.photoURL,isAnonymous:s.isAnonymous,emailVerified:s.emailVerified}),pb=async s=>{try{const e=await t2(yr,db);return await fp(e.user,s),Fo(e.user)}catch(e){throw console.error("Error al iniciar sesión con Google:",e),new Error(e.message||"Error al iniciar sesión con Google")}},yb=async(s,e)=>{try{const t=await CN(yr,s,e);return Fo(t.user)}catch(t){throw console.error("Error al iniciar sesión:",t),new Error(gp(t.code))}},_b=async(s,e,t,i)=>{try{const o=await IN(yr,s,e);return t&&await DN(o.user,{displayName:t}),await fp(o.user,i),await JT(o.user),Fo(o.user)}catch(o){throw console.error("Error al registrarse:",o),new Error(gp(o.code))}},vb=async()=>{try{const s=await bN(yr);return await fp(s.user),Fo(s.user)}catch(s){throw console.error("Error al iniciar sesión anónima:",s),new Error("Error al iniciar sesión anónima")}},Eb=async()=>{try{await kN(yr)}catch(s){throw console.error("Error al cerrar sesión:",s),new Error("Error al cerrar sesión")}},wb=async s=>{try{await RN(yr,s)}catch(e){throw console.error("Error al enviar email de restablecimiento:",e),new Error(gp(e.code))}},Tb=async()=>{try{if(yr.currentUser)await JT(yr.currentUser);else throw new Error("No hay usuario autenticado")}catch(s){throw console.error("Error al reenviar verificación:",s),new Error("Error al reenviar verificación de email")}},bb=s=>MN(yr,e=>{s(e?Fo(e):null)}),mp=()=>yr.currentUser?Fo(yr.currentUser):null,cg=()=>{const s=mp();return s!==null&&!s.isAnonymous&&s.emailVerified},gp=s=>{switch(s){case"auth/user-not-found":return"No existe una cuenta con este email";case"auth/wrong-password":return"Contraseña incorrecta";case"auth/email-already-in-use":return"Ya existe una cuenta con este email";case"auth/weak-password":return"La contraseña debe tener al menos 6 caracteres";case"auth/invalid-email":return"Email inválido";case"auth/too-many-requests":return"Demasiados intentos fallidos. Intenta más tarde";case"auth/network-request-failed":return"Error de conexión. Verifica tu internet";default:return"Error de autenticación. Intenta nuevamente"}},vD=Object.freeze(Object.defineProperty({__proto__:null,canPurchase:cg,getCurrentUser:mp,logout:Eb,onAuthStateChange:bb,registerWithEmail:_b,resendEmailVerification:Tb,resetPassword:wb,signInAnonymous:vb,signInWithEmail:yb,signInWithGoogle:pb},Symbol.toStringTag,{value:"Module"})),ED=()=>{const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let t=0;t<6;t++)e+=s.charAt(Math.floor(Math.random()*s.length));return e},wD=async s=>{try{const e=tt(Pe,"users"),t=Tt(e,Xe("referralCode","==",s));return(await gt(t)).empty}catch(e){return console.error("Error verificando unicidad del código:",e),!1}},TD=async()=>{let s=0;const e=10;for(;s<e;){const t=ED();if(await wD(t))return t;s++}throw new Error("No se pudo generar un código único después de "+e+" intentos")},Ab=async s=>{try{if(!(s!=null&&s.uid)){console.warn("Usuario no válido para migración");return}const e=En(Pe,"users",s.uid),t=await Ps(e);if(!t.exists()){console.warn("Documento de usuario no encontrado:",s.uid);return}const i=t.data(),o={};let c=!1;if(!i.referralCode)try{const h=await TD();o.referralCode=h,c=!0,console.log("✅ Generando código de referido para usuario:",s.uid,"-",h)}catch(h){console.error("Error generando código de referido:",h),o.referralCode=`TEMP${Date.now().toString().slice(-6)}`,c=!0}if((i.referralCount===void 0||i.referralCount===null)&&(o.referralCount=0,c=!0),i.createdAt||(o.createdAt=new Date,c=!0),o.lastLoginAt=new Date,c=!0,i.usedReferralCode===void 0&&(o.usedReferralCode=null,c=!0),i.referredBy===void 0&&(o.referredBy=null,c=!0),i.referralProcessedAt===void 0&&(o.referralProcessedAt=null,c=!0),i.lastKnownIP===void 0&&(o.lastKnownIP=null,c=!0),i.deviceId===void 0&&(o.deviceId=null,c=!0),i.acceptedSuggestions===void 0&&(o.acceptedSuggestions=0,c=!0),i.deviceId===void 0&&(o.deviceId=null,c=!0),i.autoMigratedAt||(o.autoMigratedAt=new Date,o.migrationVersion=i.migrationVersion||"1.0",c=!0),c){if(await ep(e,o),o.referralCode)try{const h=En(Pe,"userReferralCodes",s.uid);await Hd(h,{referralCode:o.referralCode,displayName:i.displayName||i.email||"Usuario",createdAt:i.createdAt||o.createdAt||new Date}),console.log("✅ Documento de código de referido creado para:",s.uid)}catch(h){console.error("Error creando documento de código de referido:",h)}console.log("✅ Usuario migrado automáticamente:",s.uid)}}catch(e){console.error("Error en migración automática de usuario:",e)}},Sb=te.createContext(void 0),bD=({children:s})=>{const[e,t]=te.useState({user:null,isLoading:!0,isAuthenticated:!1});te.useEffect(()=>{const m=bb(async g=>{if(g&&!g.isAnonymous&&g.uid)try{await Ab(g)}catch(_){console.error("Error durante la migración automática del usuario:",_)}t({user:g,isLoading:!1,isAuthenticated:g!==null&&!g.isAnonymous})});return()=>m()},[]);const h={...e,login:()=>{},logout:async()=>{try{const{logout:m}=await hb(async()=>{const{logout:g}=await Promise.resolve().then(()=>vD);return{logout:g}},void 0,import.meta.url);await m()}catch(m){console.error("Error al cerrar sesión:",m)}},refreshUser:()=>{const m=mp();t(g=>({...g,user:m,isAuthenticated:m!==null&&!m.isAnonymous}))}};return p.jsx(Sb.Provider,{value:h,children:s})},ba=()=>{const s=te.useContext(Sb);if(s===void 0)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return s},Ii={PURCHASED_PACKS:"verdad_reto_purchased_packs",CACHED_GAME_ITEMS:"verdad_reto_cached_items",CACHED_CATEGORIES:"verdad_reto_cached_categories",CACHE_PERMISSION:"verdad_reto_cache_permission",LAST_SYNC:"verdad_reto_last_sync"},AD=()=>{const s=localStorage.getItem(Ii.CACHE_PERMISSION);if(s==="granted")return!0;if(s==="denied")return!1;const e=window.confirm(`¿Deseas permitir que la aplicación guarde los packs comprados localmente para poder jugar sin conexión?

Esto mejorará tu experiencia permitiéndote acceder a tus packs incluso sin internet.`);return localStorage.setItem(Ii.CACHE_PERMISSION,e?"granted":"denied"),e},Ac=()=>localStorage.getItem(Ii.CACHE_PERMISSION)==="granted",SD=async(s,e,t)=>{if(!Ac()){console.log("Cache permission not granted, skipping cache");return}try{const i={pack:s,gameData:{items:e,categories:t,timestamp:Date.now()},timestamp:Date.now()},o=pp();o[s.id]=i,localStorage.setItem(Ii.PURCHASED_PACKS,JSON.stringify(o)),localStorage.setItem(Ii.LAST_SYNC,Date.now().toString()),console.log(`Pack ${s.name} cached successfully`)}catch(i){console.error("Error caching pack:",i)}},pp=()=>{try{const s=localStorage.getItem(Ii.PURCHASED_PACKS);return s?JSON.parse(s):{}}catch(s){return console.error("Error reading cached packs:",s),{}}},xD=s=>{if(!Ac())return null;try{const e=pp(),t=[],i=[];for(const o of s){const c=e[o];c&&(t.push(...c.gameData.items),i.push(...c.gameData.categories))}return t.length===0?null:{items:t,categories:[...new Set(i)]}}catch(e){return console.error("Error reading cached game data:",e),null}},RD=()=>{Object.values(Ii).forEach(s=>{localStorage.removeItem(s)}),console.log("Cache cleared successfully")},xb=()=>{const s=pp(),e=localStorage.getItem(Ii.LAST_SYNC);return{hasPermission:Ac(),packsCount:Object.keys(s).length,lastSync:e?new Date(parseInt(e)):null,packs:Object.keys(s)}};var Rb="basil",ID=function(e){return e===3?"v3":e},Ib="https://js.stripe.com",CD="".concat(Ib,"/").concat(Rb,"/stripe.js"),ND=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,DD=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var OD=function(e){return ND.test(e)||DD.test(e)},PD=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Ib,'"]')),t=0;t<e.length;t++){var i=e[t];if(OD(i.src))return i}return null},bE=function(e){var t="",i=document.createElement("script");i.src="".concat(CD).concat(t);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(i),i},MD=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})},Wl=null,gd=null,pd=null,kD=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},VD=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},jD=function(e){return Wl!==null?Wl:(Wl=new Promise(function(t,i){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var o=PD();if(!(o&&e)){if(!o)o=bE(e);else if(o&&pd!==null&&gd!==null){var c;o.removeEventListener("load",pd),o.removeEventListener("error",gd),(c=o.parentNode)===null||c===void 0||c.removeChild(o),o=bE(e)}}pd=VD(t,i),gd=kD(i),o.addEventListener("load",pd),o.addEventListener("error",gd)}catch(h){i(h);return}}),Wl.catch(function(t){return Wl=null,Promise.reject(t)}))},LD=function(e,t,i){if(e===null)return null;var o=t[0],c=o.match(/^pk_test/),h=ID(e.version),m=Rb;c&&h!==m&&console.warn("Stripe.js@".concat(h," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(m,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var g=e.apply(void 0,t);return MD(g,i),g},Jl,Cb=!1,Nb=function(){return Jl||(Jl=jD(null).catch(function(e){return Jl=null,Promise.reject(e)}),Jl)};Promise.resolve().then(function(){return Nb()}).catch(function(s){Cb||console.warn(s)});var UD=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Cb=!0;var o=Date.now();return Nb().then(function(c){return LD(c,t,o)})};const zD="pk_live_51S2dpMEamlsERKowyMSm4kgm11dMknJLyZGy9gZsIBBd3BQo3l9Vnn0TYKWcmuDtnq23YEsHo7FL69hGEM3UAboz00Onx53LCm";let km=null;const qD=()=>(km||(km=UD(zD)),km),Db=async()=>{try{const s=await Ps(En(Pe,"config","stripe"));return s.exists()?s.data():null}catch(s){return console.error("Error obteniendo configuración de Stripe:",s),null}},BD=async(s,e,t)=>{try{if(!s.isPremium)throw new Error("Este pack no requiere pago");const i=await Db();if(!i)throw new Error("Configuración de Stripe no disponible");const o=s.priceAmount||0,c=s.originalPriceAmount||s.priceAmount||0;console.log("Creando sesión de checkout:",{packId:s.id,originalAmount:c,finalAmount:o,hasDiscount:s.hasDiscount,discountReason:s.discountReason});const h=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packId:s.id,priceId:s.stripePriceId,userEmail:e,userId:t,successUrl:`${window.location.origin}${i.successUrl}&pack=${s.id}`,cancelUrl:`${window.location.origin}${i.cancelUrl}`,hasDiscount:s.hasDiscount,finalAmount:o,originalAmount:c,discountReason:s.discountReason})});if(!h.ok){const g=await h.json();throw new Error(g.error||"Error creando sesión de pago")}const m=await h.json();return{sessionId:m.id,url:m.url}}catch(i){throw console.error("Error creando sesión de checkout:",i),i}},HD=async(s,e,t)=>{try{const i=await qD();if(!i)throw new Error("Stripe no está disponible");const o=await BD(s,e,t);if(!o)throw new Error("No se pudo crear la sesión de pago");await GD({userId:t,packId:s.id,stripeSessionId:o.sessionId,purchaseDate:new Date,amount:s.priceAmount||0,currency:s.currency||"EUR",status:"pending",email:e});const{error:c}=await i.redirectToCheckout({sessionId:o.sessionId});if(c)throw new Error(c.message)}catch(i){throw console.error("Error redirigiendo a checkout:",i),i}},GD=async s=>{try{return(await jc(tt(Pe,"userPurchases"),{...s,purchaseDate:s.purchaseDate.toISOString()})).id}catch(e){throw console.error("Error guardando compra pendiente:",e),e}},FD=async s=>{try{const e=Tt(tt(Pe,"userPurchases"),Xe("userId","==",s),Xe("status","==","completed"));return(await gt(e)).docs.map(i=>({id:i.id,...i.data(),purchaseDate:new Date(i.data().purchaseDate)}))}catch(e){return console.error("Error obteniendo compras del usuario:",e),[]}},AE=async s=>{try{return(await FD(s)).map(t=>t.packId)}catch(e){return console.error("Error obteniendo packs comprados:",e),[]}},QD=({onClose:s})=>{const[e,t]=te.useState(null),[i,o]=te.useState(!1);te.useEffect(()=>{c()},[]);const c=()=>{const g=xb();t(g)},h=async()=>{o(!0);try{AD()&&c()}finally{o(!1)}},m=()=>{window.confirm("¿Estás seguro de que quieres eliminar todos los datos guardados localmente?")&&(RD(),c())};return e?p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h2",{className:"text-xl font-bold",children:"Almacenamiento Local"}),p.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Estado del Caché"}),p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Permiso:"}),p.jsx("span",{className:`font-medium ${e.hasPermission?"text-green-600":"text-red-600"}`,children:e.hasPermission?"Activado":"Desactivado"})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Packs guardados:"}),p.jsx("span",{className:"font-medium",children:e.packsCount})]}),e.lastSync&&p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Última sincronización:"}),p.jsxs("span",{className:"font-medium text-xs",children:[e.lastSync.toLocaleDateString()," ",e.lastSync.toLocaleTimeString()]})]})]})]}),e.packsCount>0&&p.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Packs Disponibles Sin Conexión"}),p.jsx("div",{className:"space-y-1 text-sm",children:e.packs.map(g=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),p.jsx("span",{className:"capitalize",children:g.replace("-"," ")})]},g))})]}),p.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"¿Qué es el almacenamiento local?"}),p.jsx("p",{className:"text-sm text-gray-700",children:"Permite guardar los packs que compres en tu dispositivo para poder jugar sin conexión a internet. Los datos se mantienen seguros en tu navegador."})]}),p.jsxs("div",{className:"flex flex-col space-y-2",children:[e.hasPermission?p.jsx("div",{className:"text-center text-green-600 font-medium",children:"✓ Almacenamiento local activado"}):p.jsx(De,{onClick:h,disabled:i,className:"w-full bg-green-600 hover:bg-green-700",children:i?"Procesando...":"Activar Almacenamiento Local"}),e.packsCount>0&&p.jsx(De,{onClick:m,className:"w-full bg-red-600 hover:bg-red-700",children:"Limpiar Datos Guardados"}),p.jsx(De,{onClick:s,className:"w-full bg-gray-600 hover:bg-gray-700",children:"Cerrar"})]})]})]})}):p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:p.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:p.jsx("div",{className:"text-center",children:"Cargando información del caché..."})})})},KD=({pack:s,onBack:e,onSuccess:t})=>{const{user:i}=ba(),[o,c]=te.useState(!1),[h,m]=te.useState(null),[g,_]=te.useState(null);te.useEffect(()=>{(async()=>{try{const C=await Db();_(C)}catch{m("Error cargando configuración de pago")}})()},[]);const w=async()=>{if(!i||!i.email){m("Debes estar autenticado para realizar una compra");return}if(!s.isPremium){m("Este pack no requiere pago");return}c(!0),m(null);try{await HD(s,i.email,i.uid),t&&t()}catch(S){m(S.message||"Error procesando el pago"),c(!1)}},b=(S,C)=>new Intl.NumberFormat("es-ES",{style:"currency",currency:C.toUpperCase()}).format(S/100);return g?p.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"w-full max-w-md",children:[p.jsxs("div",{className:"relative text-center mb-8",children:[p.jsx("button",{onClick:e,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:p.jsx(NE,{className:"w-8 h-8"})}),p.jsx("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Checkout"})]}),p.jsxs(Rn,{className:"p-6",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("div",{className:"text-6xl mb-4",children:s.icon}),p.jsx("h2",{className:"text-2xl font-bold text-cyan-400 mb-2",children:s.name}),p.jsx("p",{className:"text-gray-400 mb-4",children:s.description}),s.priceAmount&&s.currency&&p.jsxs("div",{className:"bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-lg p-4 mb-4",children:[p.jsx("div",{className:"text-3xl font-bold text-white",children:b(s.priceAmount,s.currency)}),p.jsx("div",{className:"text-sm text-gray-300",children:"Pago único"})]})]}),p.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 mb-6",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(To,{className:"w-5 h-5 text-green-400"}),p.jsx("span",{className:"text-green-400 font-semibold",children:"Pago seguro"})]}),p.jsx("p",{className:"text-sm text-gray-300",children:"Tu pago está protegido por Stripe. No almacenamos información de tarjetas de crédito."})]}),i&&p.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:[p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsx("strong",{children:"Cuenta:"})," ",i.displayName||i.email]}),p.jsxs("div",{className:"text-sm text-gray-300",children:[p.jsx("strong",{children:"Email:"})," ",i.email]})]}),h&&p.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6",children:p.jsx("p",{className:"text-red-200 text-sm",children:h})}),p.jsx(De,{onClick:w,disabled:o||!i,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:o?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Procesando..."]}):p.jsxs(p.Fragment,{children:[p.jsx(DE,{className:"w-5 h-5"}),"Pagar con Stripe"]})}),p.jsx("div",{className:"mt-4 text-center",children:p.jsx("p",{className:"text-xs text-gray-400",children:"Al continuar, aceptas nuestros términos de servicio y política de privacidad."})})]}),p.jsxs("div",{className:"mt-6 text-center",children:[p.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Métodos de pago aceptados:"}),p.jsxs("div",{className:"flex justify-center gap-2",children:[p.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Visa"}),p.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Mastercard"}),p.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"American Express"})]})]})]})}):p.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-400",children:"Cargando configuración de pago..."})]})})},YD=({availablePacks:s,purchasedPacks:e,onPurchase:t,onBack:i,onGoToLogin:o})=>{const{user:c,isAuthenticated:h}=ba(),[m,g]=te.useState(!1),[_,w]=te.useState(!1),[b,S]=te.useState(!1),[C,j]=te.useState(null),[F,z]=te.useState([]),[ie,se]=te.useState(!1);te.useEffect(()=>{(async()=>{if(c&&h){se(!0);try{const N=await AE(c.uid);z(N)}catch(N){console.error("Error cargando compras del usuario:",N)}finally{se(!1)}}else z([])})()},[c,h]);const re=X=>{const N=s.find(x=>x.id===X);if(N){if(!N.isPremium||N.id==="base"){if(!cg()){g(!0),setTimeout(()=>g(!1),3e3);return}t(X);return}if(!cg()){g(!0),setTimeout(()=>g(!1),3e3);return}j(N),S(!0)}},fe=async()=>{if(S(!1),j(null),c&&h)try{const X=await AE(c.uid);z(X),C&&X.includes(C.id)&&t(C.id)}catch(X){console.error("Error actualizando compras:",X)}},ue=()=>{S(!1),j(null)};return xb(),p.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in pt-16",children:p.jsxs("div",{className:"w-full max-w-2xl",children:[p.jsxs("div",{className:"relative text-center mb-8",children:[p.jsx("button",{onClick:i,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:p.jsx(NE,{className:"w-8 h-8"})}),p.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Tienda de Paquetes"}),p.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(AS,{className:"w-4 h-4"}),c?p.jsx("span",{className:`${h?"text-green-400":"text-yellow-400"}`,children:h?`Conectado como ${c.displayName||c.email}`:"Usuario anónimo - Inicia sesión para comprar"}):p.jsx("span",{className:"text-gray-400",children:"No conectado"})]}),c&&h&&p.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:p.jsx("a",{href:"https://verdad-reto.es.eu.org/delete-account.html",target:"_blank",rel:"noopener noreferrer",className:"hover:text-red-400 transition-colors",children:"Eliminar cuenta"})})]})]}),m&&p.jsxs("div",{className:"mb-6 p-4 bg-yellow-500/20 border border-yellow-500 rounded-lg text-center",children:[p.jsx("p",{className:"text-yellow-100 mb-2",children:"Necesitas iniciar sesión y verificar tu email para comprar packs premium"}),o&&p.jsx(De,{onClick:o,className:"bg-yellow-600 hover:bg-yellow-700",children:"Ir a Iniciar Sesión"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(X=>{const N=e.includes(X.id),x=F.includes(X.id),I=N||x,P=X.id==="base",M=X.isPremium&&!P,V=M&&!I;return p.jsxs(Rn,{className:`flex flex-col text-center border-2 transition-all ${I?"border-green-500/50":V?"border-yellow-500/50 opacity-75":"border-transparent hover:border-pink-500/50"}`,children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"text-5xl mb-4",children:X.icon}),V&&p.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-500 rounded-full p-1",children:p.jsx(To,{className:"w-4 h-4 text-black"})})]}),p.jsx("h2",{className:`text-2xl font-bold ${I?"text-green-400":V?"text-yellow-400":"text-cyan-400"}`,children:X.name}),p.jsx("p",{className:"text-gray-400 mt-2 mb-2 flex-grow",children:X.description}),M&&X.priceAmount&&X.currency&&p.jsxs("div",{className:"mb-4",children:[X.hasDiscount&&X.originalPriceAmount?p.jsxs("div",{className:"space-y-1",children:[p.jsx("div",{className:"text-sm text-gray-500 line-through",children:new Intl.NumberFormat("es-ES",{style:"currency",currency:X.currency.toUpperCase()}).format(X.originalPriceAmount/100)}),p.jsx("div",{className:`text-lg font-bold ${I?"text-green-400":"text-red-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:X.currency.toUpperCase()}).format(X.priceAmount/100)}),p.jsx("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:X.discountPercentage?`-${X.discountPercentage}%`:`-${new Intl.NumberFormat("es-ES",{style:"currency",currency:X.currency.toUpperCase()}).format((X.originalPriceAmount-X.priceAmount)/100)}`}),X.discountReason&&p.jsx("div",{className:"text-xs text-yellow-400 italic",children:X.discountReason})]}):p.jsx("div",{className:`text-lg font-bold ${I?"text-green-400":"text-yellow-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:X.currency.toUpperCase()}).format(X.priceAmount/100)}),p.jsx("div",{className:"text-xs text-gray-500",children:"Pago único"})]}),I?p.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-green-700 text-green-200",children:"✓ Comprado"}):P?p.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-blue-700 text-blue-200",children:"Incluido"}):M?p.jsx(De,{onClick:()=>re(X.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",disabled:ie,children:ie?p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):p.jsxs(p.Fragment,{children:[p.jsx(DE,{className:"w-4 h-4"}),"Comprar ",X.price]})}):p.jsxs(De,{onClick:()=>re(X.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2",children:[p.jsx(To,{className:"w-4 h-4"}),"Desbloquear (",X.price,")"]})]},X.id)})}),_&&p.jsx(QD,{onClose:()=>w(!1)}),b&&C&&p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:p.jsx("div",{className:"w-full h-full",children:p.jsx(KD,{pack:C,onBack:ue,onSuccess:fe})})})]})})},XD=s=>{var t;if(!s.hasDiscount||!s.priceAmount)return s;if(s.discountValidUntil&&new Date>s.discountValidUntil)return{...s,hasDiscount:!1};let e=s.priceAmount;return s.discountPercentage?e=s.priceAmount*(1-s.discountPercentage/100):s.discountAmount&&(e=s.priceAmount-s.discountAmount),e=Math.max(0,Math.round(e)),{...s,originalPriceAmount:s.priceAmount,priceAmount:e,price:new Intl.NumberFormat("es-ES",{style:"currency",currency:((t=s.currency)==null?void 0:t.toUpperCase())||"EUR"}).format(e/100)}},yp=async()=>{try{const s=tt(Pe,"packs"),e=await gt(s);return e.empty?(console.warn("No packs found in Firebase database"),[]):e.docs.map(o=>{const c=o.data();return{id:o.id,name:c.name,description:c.description,price:c.price,icon:c.icon,isActive:c.isActive??!0,priceAmount:c.priceAmount,currency:c.currency,isPremium:c.isPremium??!1,stripeProductId:c.stripeProductId,stripePriceId:c.stripePriceId,hasDiscount:c.hasDiscount??!1,discountPercentage:c.discountPercentage,discountAmount:c.discountAmount,discountReason:c.discountReason,discountValidUntil:c.discountValidUntil?c.discountValidUntil.toDate():void 0,originalPriceAmount:c.originalPriceAmount,allowDemo:c.allowDemo??!1,demoPlaysCount:c.demoPlaysCount??0}}).filter(o=>o.isActive).map(o=>XD(o))}catch(s){throw console.error("Error connecting to Firebase:",s),new Error("No se pudo conectar a la base de datos. Verifica tu conexión a internet.")}},$D=async s=>{try{if(!s||s.length===0)return console.warn("No categories provided for questions query"),[];const e=tt(Pe,"gameItems"),t=Tt(e,Xe("type","==","question"),Xe("category","in",s)),i=await gt(t);return i.empty?(console.warn("No questions found in Firebase database for categories:",s),[]):i.docs.map(c=>{const h=c.data();return{text:h.text,category:h.category}})}catch(e){throw console.error("Error fetching questions from Firebase:",e),new Error("No se pudieron cargar las preguntas. Verifica tu conexión a internet.")}},WD=async s=>{try{if(!s||s.length===0)return console.warn("No categories provided for dares query"),[];const e=tt(Pe,"gameItems"),t=Tt(e,Xe("type","==","dare"),Xe("category","in",s)),i=await gt(t);return i.empty?(console.warn("No dares found in Firebase database for categories:",s),[]):i.docs.map(c=>{const h=c.data();return{text:h.text,category:h.category}})}catch(e){throw console.error("Error fetching dares from Firebase:",e),new Error("No se pudieron cargar los retos. Verifica tu conexión a internet.")}},JD=async s=>{try{if(!s||s.length===0)return console.warn("No pack IDs provided for categories query"),[];const e=tt(Pe,"gameItems"),t=Tt(e,Xe("packId","in",s)),i=await gt(t);return i.empty?(console.warn("No categories found in Firebase database for packs:",s),[]):[...new Set(i.docs.map(c=>c.data().category))]}catch(e){throw console.error("Error fetching categories from Firebase:",e),new Error("No se pudieron cargar las categorías. Verifica tu conexión a internet.")}},ZD=async s=>{try{if(!s||s.length===0)return console.warn("No pack IDs provided for game data query"),{questions:[],dares:[],categories:[]};const e=await JD(s),[t,i]=await Promise.all([$D(e),WD(e)]);if(Ac()&&(t.length>0||i.length>0)){const o=[...t,...i],c=s.reduce((h,m)=>{const g=o.filter(w=>w.packId===m),_=e.filter(w=>g.some(b=>b.category===w));return g.length>0&&(h[m]={items:g,categories:_}),h},{});for(const[h,m]of Object.entries(c)){const _=(await yp()).find(w=>w.id===h);_&&await SD(_,m.items,m.categories)}}return{questions:t,dares:i,categories:e}}catch(e){console.error("Error fetching game data from Firebase:",e);const t=xD(s);if(t){console.log("Using cached game data for offline play");const i=t.items.filter(c=>!("type"in c)||c.type==="question"),o=t.items.filter(c=>"type"in c&&c.type==="dare");return{questions:i,dares:o,categories:t.categories}}throw Ac()?new Error("No hay conexión a internet y no tienes datos guardados para estos packs."):new Error("No hay conexión a internet y no tienes packs guardados localmente. ¿Deseas activar el almacenamiento local para jugar sin conexión?")}},eO=async s=>{try{const e=tt(Pe,"gameItems"),t=Tt(e,Xe("packId","==",s),Xe("isDemo","==",!0)),o=(await gt(t)).docs.map(g=>({id:g.id,...g.data()})),c=o.filter(g=>g.type==="question").map(g=>({text:g.text,category:g.category,isDemo:!0,packId:g.packId})),h=o.filter(g=>g.type==="dare").map(g=>({text:g.text,category:g.category,isDemo:!0,packId:g.packId})),m=[...new Set(o.map(g=>g.category))];return{questions:c,dares:h,categories:m}}catch(e){return console.error("Error fetching demo data:",e),{questions:[],dares:[],categories:[]}}},tO=async(s,e)=>{try{const t={packId:s,userId:e||"anonymous",timestamp:new Date,type:"demo_play"};await jc(tt(Pe,"demoLogs"),t);const i=tt(Pe,"packs"),o=En(i,s),c=await Ps(o);if(c.exists()){const h=c.data().demoPlaysCount||0;await ep(o,{demoPlaysCount:h+1})}console.log("Demo play logged successfully")}catch(t){console.error("Error logging demo play:",t)}},Ob=async(s,e)=>{try{if(!s||s.trim().length===0)return{isValid:!1,error:"El código de referido no puede estar vacío"};const t=gb(s);if(!t.isValid)return{isValid:!1,error:t.error||"El código de referido no es válido"};const i=t.sanitizedCode,o=tt(Pe,"userReferralCodes"),c=Tt(o,Xe("referralCode","==",i)),h=await gt(c);if(h.empty)return{isValid:!1,error:"Código de referido no válido"};const m=h.docs[0],g=m.data(),_=m.id;if(_===e)return{isValid:!1,error:"No puedes usar tu propio código de referido"};const w=await Ps(En(Pe,"users",e));if(w.exists()&&w.data().usedReferralCode)return{isValid:!1,error:"Ya has usado un código de referido anteriormente"};const b=new Date,S=new Date(b.getTime()-3600*1e3),C=tt(Pe,"referrals"),j=Tt(C,Xe("referrerUid","==",_),Xe("createdAt",">=",S));if((await gt(j)).size>=5)return{isValid:!1,message:"Límite de referidos por hora excedido. Intenta más tarde."};const z=new Date(b.getTime()-1440*60*1e3),ie=Tt(C,Xe("referrerUid","==",_),Xe("createdAt",">=",z));return(await gt(ie)).size>=20?{isValid:!1,message:"Límite diario de referidos excedido. Intenta mañana."}:{isValid:!0,referrerName:g.displayName||g.email||"Usuario"}}catch(t){return console.error("Error validating referral code:",t),{isValid:!1,error:"Error al validar el código de referido"}}},nO=async(s,e)=>{try{return await xC(Pe,async t=>{var fe;const i=tt(Pe,"userReferralCodes"),o=Tt(i,Xe("referralCode","==",s.toUpperCase())),c=await gt(o);if(c.empty)throw new Error("Código de referido no válido");const h=c.docs[0],m=En(Pe,"users",h.id),g=En(Pe,"users",e),_=await t.get(g);if(_.exists()&&_.data().usedReferralCode)throw new Error("Ya has usado un código de referido");if(h.id===e)throw new Error("No puedes usar tu propio código");const w=new Date,b=_.data(),S=((fe=b==null?void 0:b.createdAt)==null?void 0:fe.toDate())||new Date,C=new Date(w.getTime()-300*1e3);if(S>C)throw new Error("Usuario muy reciente, posible abuso");const j=b==null?void 0:b.lastKnownIP,F=h.data(),z=F==null?void 0:F.lastKnownIP;j&&z&&j===z&&console.warn("Posible abuso: misma IP para referrer y referido");const ie=b==null?void 0:b.deviceId,se=F==null?void 0:F.deviceId;if(ie&&se&&ie===se)throw new Error("No se puede usar el mismo dispositivo para referir");t.update(m,{referralCount:RT(1)}),t.update(g,{usedReferralCode:s.toUpperCase(),referredBy:h.id,referralProcessedAt:w});const re=En(tt(Pe,"referrals"));return t.set(re,{referrerId:h.id,referredUserId:e,referralCode:s.toUpperCase(),createdAt:w,status:"completed",referrerIP:z||null,referredUserIP:j||null,sameIP:j&&z?j===z:!1,userAccountAge:w.getTime()-S.getTime()}),!0})}catch(t){return console.error("Error processing referral:",t),!1}},rO=async s=>{try{const e=await Ps(En(Pe,"users",s));if(!e.exists())return null;const t=e.data(),i=tt(Pe,"referrals"),o=Tt(i,Xe("referrerId","==",s)),c=await gt(o),h=[];return c.forEach(m=>{var _;const g=m.data();h.push({id:g.referredUserId,name:`Usuario ${g.referredUserId.substring(0,8)}...`,joinedAt:((_=g.createdAt)==null?void 0:_.toDate())||new Date})}),{referralCode:t.referralCode||"",referralCount:t.referralCount||0,usedReferralCode:t.usedReferralCode||null,referredBy:t.referredBy||null,referredUsers:h}}catch(e){return console.error("Error getting user referral data:",e),null}},sO=async s=>{try{const e=await Ps(En(Pe,"users",s));if(!e.exists())return[];const i=e.data().referralCount||0,o=tt(Pe,"packs"),c=Tt(o,Xe("isReferralUnlockable","==",!0)),h=await gt(c),m=[];return h.forEach(g=>{const w=g.data().requiredReferrals||0;i>=w&&m.push(g.id)}),m}catch(e){return console.error("Error checking referral pack unlocks:",e),[]}},iO=async s=>{try{const e=tt(Pe,"suggestions"),t=Tt(e,Xe("authorId","==",s),Xe("status","==","accepted")),o=(await gt(t)).size,c=tt(Pe,"packs"),h=Tt(c,Xe("isSuggestionUnlockable","==",!0)),m=await gt(h),g=[];return m.forEach(_=>{const b=_.data().requiredApprovedSuggestions||0;o>=b&&g.push(_.id)}),g}catch(e){return console.error("Error checking suggestion pack unlocks:",e),[]}},SE=async(s,e)=>{try{const t=En(Pe,"userQuestionChangeStats",s);(await Ps(t)).exists()?await ep(t,{totalChanges:RT(1),adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,updatedAt:new Date}):await Hd(t,{userId:s,totalChanges:e.totalChanges,adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,createdAt:new Date,updatedAt:new Date}),console.log("Question change stats saved successfully")}catch(t){console.error("Error saving question change stats:",t)}},Pb=async s=>{try{const e=tt(Pe,"suggestions"),t=Tt(e,Xe("userId","==",s),Xe("status","==","accepted"));return(await gt(t)).size}catch(e){return console.error("Error getting user accepted suggestions count:",e),0}},aO=({onBack:s,onSuccess:e})=>{const[t,i]=te.useState("login"),[o,c]=te.useState(""),[h,m]=te.useState(""),[g,_]=te.useState(""),[w,b]=te.useState(""),[S,C]=te.useState(""),[j,F]=te.useState(null),[z,ie]=te.useState(!1),[se,re]=te.useState(!1),[fe,ue]=te.useState(""),[X,N]=te.useState(""),{refreshUser:x,user:I}=ba(),P=async()=>{re(!0),ue("");try{const Y=t==="register"&&S&&(j!=null&&j.isValid)?S:void 0;await pb(Y),x(),e()}catch(Y){ue(Y.message)}finally{re(!1)}},M=async()=>{re(!0),ue("");try{await vb(),x(),e()}catch(Y){ue(Y.message)}finally{re(!1)}},V=async Y=>{Y.preventDefault(),re(!0),ue(""),N("");try{if(t==="login"){const pe=await yb(o,h);if(x(),!pe.emailVerified){N("Tu email no está verificado. Revisa tu bandeja de entrada o reenvía la verificación.");return}e()}else if(t==="register"){if(h!==g)throw new Error("Las contraseñas no coinciden");const pe=S&&(j!=null&&j.isValid)?S:void 0;await _b(o,h,w,pe),N("Cuenta creada exitosamente. Revisa tu email para verificar tu cuenta antes de poder comprar packs premium."),i("login")}else t==="forgot-password"&&(await wb(o),N("Email de restablecimiento enviado. Revisa tu bandeja de entrada."),i("login"))}catch(pe){ue(pe.message)}finally{re(!1)}},R=async()=>{re(!0),ue("");try{await Tb(),N("Email de verificación reenviado.")}catch(Y){ue(Y.message)}finally{re(!1)}},Ie=()=>{c(""),m(""),_(""),b(""),C(""),F(null),ue(""),N("")},Oe=async Y=>{if(!Y.trim()){F(null);return}ie(!0);try{const pe="temp-"+Date.now(),O=await Ob(Y,pe);F({isValid:O.isValid,message:O.isValid?`Código válido de ${O.referrerName}`:O.error||"Código no válido"})}catch{F({isValid:!1,message:"Error al validar código"})}finally{ie(!1)}},Q=Y=>{C(Y.toUpperCase()),Y.trim().length>=6?Oe(Y):F(null)},ae=Y=>{i(Y),Ie()};return p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:p.jsxs(Rn,{className:"w-full max-w-md p-8 space-y-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:t==="login"?"Iniciar Sesión":t==="register"?"Crear Cuenta":"Recuperar Contraseña"}),p.jsx("p",{className:"text-white/80",children:t==="login"?"Accede a tu cuenta para comprar packs premium":t==="register"?"Crea una cuenta para acceder a contenido premium":"Ingresa tu email para recuperar tu contraseña"})]}),fe&&p.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:fe}),X&&p.jsxs("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:[p.jsx("p",{children:X}),X.includes("no está verificado")&&p.jsx(De,{onClick:R,disabled:se,className:"mt-2 bg-green-600 hover:bg-green-700 text-sm",children:"Reenviar verificación"})]}),p.jsxs("form",{onSubmit:V,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Email"}),p.jsx("input",{type:"email",value:o,onChange:Y=>c(Y.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"tu@email.com",required:!0})]}),t!=="forgot-password"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Contraseña"}),p.jsx("input",{type:"password",value:h,onChange:Y=>m(Y.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"••••••••",required:!0,minLength:6})]}),t==="register"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Confirmar Contraseña"}),p.jsx("input",{type:"password",value:g,onChange:Y=>_(Y.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"••••••••",required:!0,minLength:6})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Nombre (opcional)"}),p.jsx("input",{type:"text",value:w,onChange:Y=>b(Y.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"Tu nombre"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Código de Referido (opcional)"}),p.jsx("input",{type:"text",value:S,onChange:Y=>Q(Y.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${j===null?"border-white/20 focus:ring-white/50":j.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ej: ABC123",maxLength:8}),z&&p.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando código..."}),j&&p.jsx("p",{className:`text-sm mt-1 ${j.isValid?"text-green-400":"text-red-400"}`,children:j.message})]})]}),p.jsx(De,{type:"submit",disabled:se,className:"w-full",children:se?"Cargando...":t==="login"?"Iniciar Sesión":t==="register"?"Crear Cuenta":"Enviar Email"})]}),t!=="forgot-password"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-white/20"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-2 bg-transparent text-white/60",children:"o"})})]}),p.jsxs(De,{onClick:P,disabled:se,className:"w-full bg-white text-gray-900 hover:bg-gray-100 flex items-center justify-center",children:[p.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar con Google"]})]}),p.jsxs("div",{className:"text-center space-y-2",children:[t==="login"&&p.jsxs(p.Fragment,{children:[p.jsx("button",{type:"button",onClick:()=>ae("forgot-password"),className:"text-white/80 hover:text-white text-sm underline",children:"¿Olvidaste tu contraseña?"}),p.jsxs("div",{children:[p.jsx("span",{className:"text-white/60 text-sm",children:"¿No tienes cuenta? "}),p.jsx("button",{type:"button",onClick:()=>ae("register"),className:"text-white hover:text-white/80 text-sm underline",children:"Regístrate"})]})]}),t==="register"&&p.jsxs("div",{children:[p.jsx("span",{className:"text-white/60 text-sm",children:"¿Ya tienes cuenta? "}),p.jsx("button",{type:"button",onClick:()=>ae("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Inicia sesión"})]}),t==="forgot-password"&&p.jsx("button",{type:"button",onClick:()=>ae("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Volver al inicio de sesión"})]}),p.jsxs("div",{className:"border-t border-white/20 pt-4",children:[p.jsx(De,{onClick:M,disabled:se,className:"w-full bg-white/10 hover:bg-white/20 text-white border border-white/20",children:"Continuar sin cuenta"}),p.jsx("p",{className:"text-white/60 text-xs text-center mt-2",children:"Podrás jugar pero no comprar packs premium"})]}),p.jsx("div",{className:"text-center",children:p.jsx(De,{onClick:s,className:"text-white/80 hover:text-white bg-transparent",children:"← Volver"})})]})})},Sc="suggestions",oO=async(s,e,t)=>{try{const i=new Date;if(!await kb(e))throw new Error("Has alcanzado el límite de sugerencias permitidas");const c=await Mb(e,s.title,s.content);if(!c.isValid)throw new Error(c.error||"Contenido no válido");const h={type:s.type,authorUid:e,authorName:t,title:s.title,content:s.content,targetPackId:s.targetPackId,status:ic.Pending,createdAt:i,updatedAt:i};if(s.targetPackId){const _=await Ps(En(Pe,"packs",s.targetPackId));_.exists()&&(h.targetPackName=_.data().name)}const m={type:h.type,authorUid:h.authorUid,authorName:h.authorName,title:h.title,content:h.content,status:h.status,createdAt:Ke.fromDate(h.createdAt),updatedAt:Ke.fromDate(h.updatedAt)};return h.targetPackId!==void 0&&(m.targetPackId=h.targetPackId),h.targetPackName!==void 0&&(m.targetPackName=h.targetPackName),(await jc(tt(Pe,Sc),m)).id}catch(i){throw console.error("Error creating suggestion:",i),i}},lO=["spam","test","prueba","asdf","qwerty","123","abc"],xE=s=>{const e=s.toLowerCase();return lO.some(t=>e.includes(t.toLowerCase()))},cO=async(s,e,t)=>{try{const i=Tt(tt(Pe,Sc),Xe("authorUid","==",s),Bd("createdAt","desc"),AT(10)),o=await gt(i);for(const c of o.docs){const h=c.data();if(h.title===e||h.content===t)return!0;const m=RE(e,h.title),g=RE(t,h.content);if(m>.8||g>.8)return!0}return!1}catch(i){return console.error("Error checking duplicate content:",i),!1}},RE=(s,e)=>{const t=s.toLowerCase().split(/\s+/),i=e.toLowerCase().split(/\s+/),o=new Set(t),c=new Set(i),h=new Set([...o].filter(g=>c.has(g))),m=new Set([...o,...c]);return h.size/m.size},Mb=async(s,e,t)=>e.length<mt.MIN_TITLE_LENGTH?{isValid:!1,error:`El título debe tener al menos ${mt.MIN_TITLE_LENGTH} caracteres`}:e.length>mt.MAX_TITLE_LENGTH?{isValid:!1,error:`El título no puede exceder ${mt.MAX_TITLE_LENGTH} caracteres`}:t.length<mt.MIN_CONTENT_LENGTH?{isValid:!1,error:`El contenido debe tener al menos ${mt.MIN_CONTENT_LENGTH} caracteres`}:t.length>mt.MAX_CONTENT_LENGTH?{isValid:!1,error:`El contenido no puede exceder ${mt.MAX_CONTENT_LENGTH} caracteres`}:xE(e)||xE(t)?{isValid:!1,error:"El contenido contiene palabras no permitidas"}:await cO(s,e,t)?{isValid:!1,error:"Ya has enviado una sugerencia similar recientemente"}:{isValid:!0},kb=async s=>{try{if(!s)return!0;const e=new Date,t=new Date(e.getTime()-1440*60*1e3),i=new Date(e.getTime()-10080*60*1e3),o=Tt(tt(Pe,Sc),Xe("authorUid","==",s),Xe("createdAt",">=",Ke.fromDate(t)));if((await gt(o)).size>=mt.MAX_SUGGESTIONS_PER_DAY)return!1;const h=Tt(tt(Pe,Sc),Xe("authorUid","==",s),Xe("createdAt",">=",Ke.fromDate(i)));return!((await gt(h)).size>=mt.MAX_SUGGESTIONS_PER_WEEK)}catch(e){return console.error("Error checking suggestion limits:",e),!0}},uO=async s=>{try{const e=await Vb(s),t={total:e.length,pending:0,approved:0,rejected:0};return e.forEach(i=>{switch(i.status){case ic.Pending:t.pending++;break;case ic.Accepted:t.approved++;break;case ic.Rejected:t.rejected++;break}}),t}catch(e){throw console.error("Error getting user suggestion stats:",e),e}},Vb=async s=>{try{const e=Tt(tt(Pe,Sc),Xe("authorUid","==",s),Bd("createdAt","desc"));return(await gt(e)).docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt.toDate(),updatedAt:i.data().updatedAt.toDate()}))}catch(e){throw console.error("Error getting user suggestions:",e),e}},jb=({onClose:s,onSuccess:e})=>{const{user:t}=ba(),[i,o]=te.useState({type:nr.Pack,title:"",content:"",targetPackId:void 0}),[c,h]=te.useState([]),[m,g]=te.useState(!1),[_,w]=te.useState(null),[b,S]=te.useState(!0),[C,j]=te.useState(0);te.useEffect(()=>{F(),z(),ie()},[t]);const F=async()=>{try{const X=await yp();h(X)}catch(X){console.error("Error loading packs:",X)}},z=async()=>{if(!t){S(!0),w(null);return}try{const X=await kb(t.uid);S(X),w(X?null:"Has alcanzado el límite de sugerencias permitidas. Intenta más tarde.")}catch(X){console.error("Error checking user limits:",X),S(!0),w(null)}},ie=async()=>{if(t)try{const X=await Pb(t.uid);j(X)}catch(X){console.error("Error loading accepted suggestions count:",X)}},se=X=>{o(N=>({...N,type:X,targetPackId:X===nr.Pack?void 0:N.targetPackId}))},re=async X=>{if(X.preventDefault(),!(!t||!b)){if(i.title.length<mt.MIN_TITLE_LENGTH){w(`El título debe tener al menos ${mt.MIN_TITLE_LENGTH} caracteres`);return}if(i.title.length>mt.MAX_TITLE_LENGTH){w(`El título no puede exceder ${mt.MAX_TITLE_LENGTH} caracteres`);return}if(i.content.length<mt.MIN_CONTENT_LENGTH){w(`El contenido debe tener al menos ${mt.MIN_CONTENT_LENGTH} caracteres`);return}if(i.content.length>mt.MAX_CONTENT_LENGTH){w(`El contenido no puede exceder ${mt.MAX_CONTENT_LENGTH} caracteres`);return}if(i.type!==nr.Pack&&!i.targetPackId){w("Debes seleccionar un pack para preguntas y retos");return}g(!0),w(null);try{const N=await Mb(t.uid,i.title,i.content);if(!N.isValid){w(N.error||"Contenido no válido"),g(!1);return}await oO(i,t.uid,t.displayName||"Usuario anónimo"),typeof e=="function"?e():s()}catch(N){w(N.message||"Error al enviar la sugerencia")}finally{g(!1)}}},fe=X=>{switch(X){case nr.Pack:return"Pack nuevo";case nr.Question:return"Pregunta";case nr.Dare:return"Reto";default:return X}},ue=()=>{switch(i.type){case nr.Pack:return"Describe tu idea para un nuevo pack: temática, tipo de preguntas/retos, etc.";case nr.Question:return"Escribe tu pregunta aquí...";case nr.Dare:return"Describe el reto que propones...";default:return"Describe tu sugerencia..."}};return t?p.jsx("div",{className:"suggestion-form-overlay",children:p.jsxs("div",{className:"suggestion-form",children:[p.jsxs("div",{className:"suggestion-form-header",children:[p.jsxs("div",{children:[p.jsx("h2",{children:"Enviar Sugerencia"}),p.jsxs("p",{className:"accepted-count",children:["Sugerencias aprobadas: ",p.jsx("strong",{children:C})]})]}),p.jsx("button",{className:"close-button",onClick:s,children:"×"})]}),p.jsxs("form",{onSubmit:re,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Tipo de sugerencia:"}),p.jsx("div",{className:"type-selector",children:Object.values(nr).map(X=>p.jsx("button",{type:"button",className:`type-button ${i.type===X?"active":""}`,onClick:()=>se(X),children:fe(X)},X))})]}),i.type!==nr.Pack&&p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"targetPack",children:"Pack de destino:"}),p.jsxs("select",{id:"targetPack",value:i.targetPackId||"",onChange:X=>o(N=>({...N,targetPackId:X.target.value||void 0})),required:!0,children:[p.jsx("option",{value:"",children:"Selecciona un pack"}),c.map(X=>p.jsx("option",{value:X.id,children:X.name},X.id))]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"title",children:"Título:"}),p.jsx("input",{type:"text",id:"title",value:i.title,onChange:X=>o(N=>({...N,title:X.target.value})),placeholder:`Título de tu ${fe(i.type).toLowerCase()}`,maxLength:mt.MAX_TITLE_LENGTH,required:!0}),p.jsxs("small",{children:[i.title.length,"/",mt.MAX_TITLE_LENGTH," caracteres"]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"content",children:"Descripción:"}),p.jsx("textarea",{id:"content",value:i.content,onChange:X=>o(N=>({...N,content:X.target.value})),placeholder:ue(),maxLength:mt.MAX_CONTENT_LENGTH,rows:6,required:!0}),p.jsxs("small",{children:[i.content.length,"/",mt.MAX_CONTENT_LENGTH," caracteres"]})]}),_&&p.jsx("div",{className:"error-message",children:_}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",className:"cancel-button",onClick:s,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"submit-button",disabled:m||!b,children:m?"Enviando...":"Enviar Sugerencia"})]})]}),p.jsxs("div",{className:"suggestion-info",children:[p.jsx("h4",{children:"Información importante:"}),p.jsxs("ul",{children:[p.jsxs("li",{children:["Máximo ",mt.MAX_SUGGESTIONS_PER_DAY," sugerencias por día"]}),p.jsxs("li",{children:["Máximo ",mt.MAX_SUGGESTIONS_PER_WEEK," sugerencias por semana"]}),p.jsx("li",{children:"No podrás editar ni eliminar tu sugerencia una vez enviada"}),p.jsx("li",{children:"Recibirás notificaciones sobre el estado de tu sugerencia"})]})]})]})}):p.jsx("div",{className:"suggestion-form-overlay",children:p.jsxs("div",{className:"suggestion-form",children:[p.jsxs("div",{className:"suggestion-form-header",children:[p.jsx("h2",{children:"Iniciar sesión requerido"}),p.jsx("button",{className:"close-button",onClick:s,children:"×"})]}),p.jsx("p",{children:"Debes iniciar sesión para enviar sugerencias."}),p.jsx("button",{className:"cancel-button",onClick:s,children:"Cerrar"})]})})},dO="incidents",hO=async s=>{try{return(await jc(tt(Pe,dO),{...s,timestamp:Ke.fromDate(s.timestamp)})).id}catch(e){throw console.error("Error al reportar incidencia:",e),new Error("No se pudo reportar la incidencia")}},Lb=({onClose:s})=>{const[e,t]=te.useState(""),[i,o]=te.useState(!1),[c,h]=te.useState(!1),{user:m}=ba(),g=async _=>{if(_.preventDefault(),!!e.trim()){o(!0);try{await hO({userId:(m==null?void 0:m.uid)||"anonymous",userEmail:(m==null?void 0:m.email)||"Usuario anónimo",description:e.trim(),timestamp:new Date,status:"pending"}),h(!0)}catch(w){console.error("Error al reportar incidencia:",w),alert("Error al enviar el reporte. Por favor, inténtalo de nuevo.")}finally{o(!1)}}};return c?p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-green-600",children:"¡Gracias!"}),p.jsx("p",{className:"text-gray-700 mb-6",children:"Muchas gracias por reportar la incidencia. El equipo de desarrollo la revisará y se pondrá con ello."}),p.jsx(De,{onClick:s,className:"w-full bg-blue-500 hover:bg-blue-600 text-white",children:"Cerrar"})]})}):p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900",children:"Reportar Incidencia"}),p.jsxs("form",{onSubmit:g,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-black mb-2",children:"Describe la incidencia:"}),p.jsx("textarea",{id:"description",value:e,onChange:_=>t(_.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 placeholder-gray-500",rows:4,placeholder:"Describe el problema que has encontrado...",required:!0,disabled:i})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx(De,{type:"button",onClick:s,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white",disabled:i,children:"Cancelar"}),p.jsx(De,{type:"submit",className:"flex-1 bg-red-500 hover:bg-red-600 text-white",disabled:i||!e.trim(),children:i?"Enviando...":"Reportar"})]})]})]})})},fO=({onBack:s})=>{const{user:e}=ba(),[t,i]=te.useState(null),[o,c]=te.useState(""),[h,m]=te.useState(null),[g,_]=te.useState(!1),[w,b]=te.useState(!1),[S,C]=te.useState(!0),[j,F]=te.useState(""),[z,ie]=te.useState(""),[se,re]=te.useState(0),[fe,ue]=te.useState(!1),[X,N]=te.useState(!1),[x,I]=te.useState(null),[P,M]=te.useState([]);te.useEffect(()=>{V()},[e]);const V=async()=>{if(e!=null&&e.uid){C(!0);try{const[Y,pe,O,J]=await Promise.all([rO(e.uid),Pb(e.uid),uO(e.uid),Vb(e.uid)]);i(Y),re(pe),I(O),M(J)}catch(Y){console.error("Error loading user data:",Y),F("Error al cargar datos del usuario")}finally{C(!1)}}},R=async Y=>{if(!Y.trim()){m(null);return}if(!(e!=null&&e.uid)){m({isValid:!1,message:"Error de autenticación"});return}_(!0);try{const pe=await Ob(Y,e.uid);m({isValid:pe.isValid,message:pe.isValid?`Código válido de ${pe.referrerName}`:pe.error||"Código no válido"})}catch{m({isValid:!1,message:"Error al validar código"})}finally{_(!1)}},Ie=Y=>{c(Y.toUpperCase()),Y.trim().length>=6?R(Y):m(null)},Oe=async()=>{if(!(!(e!=null&&e.uid)||!o||!(h!=null&&h.isValid))){b(!0),F(""),ie("");try{await nO(o,e.uid)?(ie("¡Código de referido aplicado exitosamente!"),c(""),m(null),await V()):F("Error al procesar el código de referido")}catch{F("Error al procesar el código de referido")}finally{b(!1)}}},Q=async()=>{if(t!=null&&t.referralCode)try{await navigator.clipboard.writeText(t.referralCode),ie("¡Código copiado al portapapeles!"),setTimeout(()=>ie(""),3e3)}catch{F("Error al copiar el código")}},ae=async()=>{try{await Eb()}catch{F("Error al cerrar sesión")}};return S?p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:p.jsx(Rn,{className:"w-full max-w-2xl p-8",children:p.jsxs("div",{className:"text-center text-white",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),p.jsx("p",{children:"Cargando perfil..."})]})})}):p.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:[p.jsxs(Rn,{className:"w-full max-w-2xl p-8 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h1",{className:"text-3xl font-bold text-white",children:"Mi Perfil"}),p.jsx(De,{onClick:s,className:"bg-white/20 hover:bg-white/30 text-white",children:"Volver"})]}),j&&p.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:j}),z&&p.jsx("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:z}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h2",{className:"text-xl font-semibold text-white",children:"Información Personal"}),p.jsx(De,{onClick:ae,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2",children:"Cerrar Sesión"})]}),p.jsxs("div",{className:"space-y-2 text-white/80",children:[p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Email:"})," ",e==null?void 0:e.email]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Nombre:"})," ",(e==null?void 0:e.displayName)||"No especificado"]})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mi Código de Referido"}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("div",{className:"flex-1",children:p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Tu código:"}),p.jsx("p",{className:"text-2xl font-bold text-white tracking-wider",children:(t==null?void 0:t.referralCode)||"Cargando..."})]})}),p.jsx(De,{onClick:Q,className:"bg-blue-600 hover:bg-blue-700",disabled:!(t!=null&&t.referralCode),children:"Copiar"})]}),p.jsx("p",{className:"text-white/60 text-sm mt-2",children:"Comparte este código con tus amigos para ganar referidos"})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mis Estadísticas"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-3xl font-bold text-white",children:(t==null?void 0:t.referralCount)||0}),p.jsx("p",{className:"text-white/60 text-sm",children:"Total de referidos"})]}),p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-3xl font-bold text-green-400",children:se}),p.jsx("p",{className:"text-white/60 text-sm",children:"Sugerencias aceptadas"})]})]}),(t==null?void 0:t.referredUsers)&&t.referredUsers.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Usuarios Referidos"}),p.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.referredUsers.map((Y,pe)=>p.jsxs("div",{className:"bg-white/10 rounded p-3 flex justify-between items-center",children:[p.jsx("span",{className:"text-white",children:Y.name}),p.jsx("span",{className:"text-white/60 text-sm",children:Y.joinedAt.toLocaleDateString()})]},Y.id))})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Contribuir con Sugerencias"}),p.jsx("p",{className:"text-white/60 text-sm mb-4",children:"¿Tienes ideas para nuevos packs, preguntas o retos? ¡Compártelas con nosotros!"}),p.jsx(De,{onClick:()=>ue(!0),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:"💡 Recomendar Pack/Pregunta/Reto"})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Reportar Problema"}),p.jsx("p",{className:"text-white/60 text-sm mb-4",children:"¿Encontraste un error o problema en la aplicación? Repórtalo para que podamos solucionarlo."}),p.jsx(De,{onClick:()=>N(!0),className:"w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:"🐛 Reportar Incidencia"})]}),!(t!=null&&t.usedReferralCode)&&p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Usar Código de Referido"}),p.jsx("p",{className:"text-white/60 text-sm mb-4",children:"¿Tienes un código de referido? Úsalo aquí para ayudar a un amigo."}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("input",{type:"text",value:o,onChange:Y=>Ie(Y.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${h===null?"border-white/20 focus:ring-white/50":h.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ingresa el código de referido",maxLength:8}),g&&p.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando código..."}),h&&p.jsx("p",{className:`text-sm mt-1 ${h.isValid?"text-green-400":"text-red-400"}`,children:h.message})]}),p.jsx(De,{onClick:Oe,disabled:!(h!=null&&h.isValid)||w,className:"w-full bg-green-600 hover:bg-green-700",children:w?"Procesando...":"Usar Código"})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mis Sugerencias"}),x&&p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[p.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-white",children:x.total}),p.jsx("p",{className:"text-white/60 text-sm",children:"Total"})]}),p.jsxs("div",{className:"bg-yellow-500/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-yellow-300",children:x.pending}),p.jsx("p",{className:"text-white/60 text-sm",children:"Pendientes"})]}),p.jsxs("div",{className:"bg-green-500/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-green-300",children:x.approved}),p.jsx("p",{className:"text-white/60 text-sm",children:"Aprobadas"})]}),p.jsxs("div",{className:"bg-red-500/20 rounded-lg p-4 text-center",children:[p.jsx("p",{className:"text-2xl font-bold text-red-300",children:x.rejected}),p.jsx("p",{className:"text-white/60 text-sm",children:"Rechazadas"})]})]}),P.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Sugerencias Recientes"}),p.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:P.slice(0,5).map(Y=>p.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsx("h4",{className:"font-medium text-white truncate flex-1 mr-2",children:Y.title}),p.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Y.status==="pending"?"bg-yellow-500/20 text-yellow-300":Y.status==="approved"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:Y.status==="pending"?"Pendiente":Y.status==="approved"?"Aprobada":"Rechazada"})]}),p.jsx("p",{className:"text-white/60 text-sm line-clamp-2",children:Y.content}),p.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-white/40",children:[p.jsx("span",{children:Y.type==="question"?"Pregunta":"Reto"}),p.jsx("span",{children:Y.createdAt.toLocaleDateString()})]})]},Y.id))}),P.length>5&&p.jsxs("p",{className:"text-white/60 text-sm mt-3 text-center",children:["Y ",P.length-5," sugerencias más..."]})]}),P.length===0&&x&&p.jsxs("div",{className:"text-center py-8",children:[p.jsx("p",{className:"text-white/60",children:"Aún no has realizado ninguna sugerencia"}),p.jsx("p",{className:"text-white/40 text-sm mt-1",children:"¡Comparte tus ideas para mejorar el juego!"})]})]}),(t==null?void 0:t.usedReferralCode)&&p.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Código de Referido Usado"}),p.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[p.jsx("p",{className:"text-white/60 text-sm",children:"Ya has usado el código:"}),p.jsx("p",{className:"text-xl font-bold text-white tracking-wider",children:t.usedReferralCode})]})]})]}),fe&&p.jsx(jb,{isOpen:fe,onClose:()=>ue(!1)}),X&&p.jsx(Lb,{onClose:()=>N(!1)})]})},mO=()=>{const{user:s}=ba(),[e,t]=te.useState(Je.Setup);te.useEffect(()=>{s||t(Je.Setup),mi.setCurrentUser(s),s&&(mi.trackSessionStart(),s.isAnonymous||mi.trackUserLogin())},[s]);const[i,o]=te.useState([]),[c,h]=te.useState([]),[m,g]=te.useState([]),[_,w]=te.useState(0),[b,S]=te.useState({totalRounds:5}),[C,j]=te.useState({currentRound:1,playersCompletedInRound:0}),[F,z]=te.useState({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),[ie,se]=te.useState({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),[re,fe]=te.useState({isLoading:!0,error:null}),[ue,X]=te.useState([]),[N,x]=te.useState(()=>{try{const de=window.localStorage.getItem("purchasedPacks");return de?JSON.parse(de):[]}catch(de){return console.error("Error reading from localStorage",de),[]}}),[I,P]=te.useState(!1),[M,V]=te.useState(null),[R,Ie]=te.useState(!1),[Oe,Q]=te.useState(null),[ae,Y]=te.useState([]),[pe,O]=te.useState([]),[J,le]=te.useState([]),[oe,_e]=te.useState({changesCount:0,isAdLoading:!1,isAdPlaying:!1,lastChangedItem:void 0}),[Ne,Ae]=te.useState({totalChanges:0,adsWatched:0,lastChangeDate:void 0}),[It,nt]=te.useState(!1),[qn,sr]=te.useState(!1),[_r,ks]=te.useState(!1),vr=te.useCallback(async de=>{try{const me=await sO(de);O(me)}catch(me){console.error("Error loading referral unlocked packs:",me),O([])}},[]),Er=te.useCallback(async de=>{try{const me=await iO(de);le(me)}catch(me){console.error("Error loading suggestion unlocked packs:",me),le([])}},[]);te.useEffect(()=>{(async()=>{try{const me=await yp();X(me)}catch(me){console.error("Error loading available packs:",me)}})()},[]),te.useEffect(()=>{try{window.localStorage.setItem("purchasedPacks",JSON.stringify(N))}catch(de){console.error("Error writing to localStorage",de)}},[N,pe,J]);const Kr=te.useCallback(async()=>{fe({isLoading:!0,error:null});try{const de=["base",...N.filter(_t=>_t!=="base"),...pe.filter(_t=>_t!=="base"&&!N.includes(_t)),...J.filter(_t=>_t!=="base"&&!N.includes(_t)&&!pe.includes(_t))],me=await ZD(de);h(me.questions),g(me.dares),fe({isLoading:!1,error:null})}catch(de){console.error("Error loading game data:",de),fe({isLoading:!1,error:de instanceof Error?de.message:"Error desconocido"})}},[N,J]);te.useEffect(()=>{Kr()},[Kr]);const Aa=()=>{if(i.length<2){alert("Se necesitan al menos 2 jugadores para empezar.");return}t(Je.PackSelection)},wn=()=>{t(Je.RoundConfiguration)},Qo=()=>{t(Je.Setup)},Oi=()=>{t(Je.Shop)},Yr=()=>{t(Je.Login)},Xr=async de=>{var me,_t;if(t(Je.Setup),((me=de==null?void 0:de.metadata)==null?void 0:me.creationTime)===((_t=de==null?void 0:de.metadata)==null?void 0:_t.lastSignInTime)&&mi.trackUserRegister(),de!=null&&de.uid)try{await Ab(de.uid),vr(de.uid),Er(de.uid)}catch(Hn){console.error("Error durante la migración del usuario:",Hn),vr(de.uid),Er(de.uid)}},Ko=te.useCallback(async()=>{const de={...Ne,totalChanges:Ne.totalChanges+1,lastChangeDate:new Date};if(_e(me=>({...me,changesCount:me.changesCount+1})),Ae(de),s&&!s.isAnonymous)try{await SE(s.uid,de)}catch(me){console.error("Error saving question change stats:",me)}},[Ne,s]),Vs=te.useCallback(async()=>new Promise((de,me)=>{if(!Mt.isEnabled()){de();return}_e(or=>({...or,isAdLoading:!0}));const _t=Mt.getAdLoadingTime(),Hn=Mt.getAdPlayingTime();setTimeout(()=>{_e(or=>({...or,isAdLoading:!1,isAdPlaying:!0})),setTimeout(()=>{_e(Ze=>({...Ze,isAdPlaying:!1,changesCount:0}));const or={...Ne,adsWatched:Ne.adsWatched+1};if(Ae(or),s&&!s.isAnonymous)try{SE(s.uid,or).catch(Ze=>{console.error("Error saving ad watched stats:",Ze)})}catch(Ze){console.error("Error saving ad watched stats:",Ze)}de()},Hn)},_t)}),[Ne,s]),Pi=()=>{t(Je.Setup)},Sa=de=>{const me=ue.find(_t=>_t.id===de);me&&(Q(me),Ie(!0))},ht=()=>{Ie(!1),Q(null)},$e=de=>{Y(me=>me.includes(de)?me:[...me,de])},mn=async()=>{if(Oe)try{const de=await eO(Oe.id);if(de.questions.length===0&&de.dares.length===0){alert("Este pack no tiene contenido demo disponible.");return}P(!0),V(Oe.id),h(de.questions),g(de.dares),await tO(Oe.id),t(Je.RoundConfiguration)}catch(de){console.error("Error starting demo:",de),alert("Error al cargar el demo. Inténtalo de nuevo.")}},Ht=de=>{S(de),z({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:new Date,gameEndTime:null,roundStats:[]}),se({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),j({currentRound:1,playersCompletedInRound:0}),t(Je.Game)},xa=()=>{const de=(_+1)%i.length;if(w(de),de===0){const me=C.currentRound+1;me>b.totalRounds?wr():(j({currentRound:me,playersCompletedInRound:0}),se({roundNumber:me,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}))}else j(me=>({...me,playersCompletedInRound:me.playersCompletedInRound+1}))},Yo=()=>{const de={...ie,roundEndTime:new Date};z(me=>({...me,totalRounds:me.totalRounds+1,roundStats:[...me.roundStats,de]})),t(Je.RoundEnd)},$r=()=>{const de=C.currentRound+1;j({currentRound:de,playersCompletedInRound:0}),se({roundNumber:de,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),w(0),t(Je.Game)},wr=()=>{z(de=>({...de,gameEndTime:new Date})),t(Je.GameEnd)},Wr=()=>{const de=i[_];se(me=>({...me,questionsAsked:me.questionsAsked+1,playersParticipated:me.playersParticipated.includes(de)?me.playersParticipated:[...me.playersParticipated,de]})),z(me=>({...me,totalQuestions:me.totalQuestions+1}))},In=()=>{const de=i[_];se(me=>({...me,daresCompleted:me.daresCompleted+1,playersParticipated:me.playersParticipated.includes(de)?me.playersParticipated:[...me.playersParticipated,de]})),z(me=>({...me,totalDares:me.totalDares+1}))},Jr=te.useCallback(()=>{t(Je.Setup),o([]),w(0),S({totalRounds:5}),j({currentRound:1,playersCompletedInRound:0}),z({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),se({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),P(!1),V(null),Ie(!1),Q(null),Y([])},[]),Zr=de=>{N.includes(de)||x([...N,de])},es=()=>N.includes("no-ads"),Mi=()=>{nt(!1)},ki=()=>{console.log("Sugerencia enviada exitosamente"),nt(!1)},ir=()=>{sr(!0)},ar=()=>{sr(!1)},Vi=()=>{t(Je.Setup)},Bn=()=>{switch(e){case Je.Setup:return p.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-900 bg-opacity-50 backdrop-blur-sm",children:p.jsxs("div",{className:"w-full max-w-md mx-auto animate-fade-in",children:[p.jsx("h1",{className:"text-5xl font-extrabold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Verdad o Reto"}),p.jsx("p",{className:"text-center text-gray-400 mb-8",children:"El juego para animar la fiesta"}),p.jsxs("div",{className:"space-y-6",children:[p.jsx(RS,{players:i,setPlayers:o}),re.isLoading&&p.jsx(Rn,{className:"text-center text-gray-400",children:p.jsx("p",{children:"Cargando datos desde Firebase..."})}),re.error&&p.jsxs(Rn,{className:"text-center text-red-400",children:[p.jsxs("p",{children:["Error de conexión: ",re.error]}),p.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Verifica tu configuración de Firebase"}),p.jsx(De,{onClick:Kr,className:"mt-4",variant:"secondary",children:"Reintentar"})]}),!re.isLoading&&!re.error&&p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx(De,{onClick:Aa,className:"w-full text-lg",disabled:i.length<2||c.length===0||m.length===0,children:"Empezar a Jugar"}),s&&!s.isAnonymous?p.jsx(De,{onClick:()=>t(Je.Profile),variant:"secondary",className:"w-full text-lg",children:"Mi Perfil"}):p.jsx(De,{onClick:Yr,variant:"secondary",className:"w-full text-lg",children:"Iniciar Sesión"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(De,{onClick:()=>t(Je.Shop),variant:"secondary",className:`flex-[2] text-lg bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 
                                      hover:from-yellow-500 hover:via-yellow-600 hover:to-yellow-700 
                                      text-white font-semibold shadow-lg hover:shadow-xl 
                                      transform hover:scale-105 transition-all duration-200 
                                      flex items-center justify-center gap-2 rounded-2xl`,children:[p.jsx(bS,{className:"w-5 h-5"}),"Tienda de Paquetes"]}),p.jsx(De,{onClick:ir,variant:"secondary",className:"flex-1 text-sm bg-red-600 hover:bg-red-700 text-white",children:"Reportar"})]})]})]})]})});case Je.Login:return p.jsx(aO,{onBack:Pi,onSuccess:Xr});case Je.Profile:return p.jsx(fO,{onBack:Vi});case Je.Shop:return p.jsx(YD,{availablePacks:ue,purchasedPacks:N,onPurchase:Zr,onBack:()=>t(Je.Setup),onGoToLogin:Yr});case Je.PackSelection:return p.jsxs(p.Fragment,{children:[p.jsx($2,{availablePacks:ue,purchasedPacks:N,adWatchedPacks:ae,referralUnlockedPacks:pe,suggestionUnlockedPacks:J,onContinue:wn,onBack:Qo,onGoToShop:Oi,onPlayDemo:Sa}),p.jsx(uD,{pack:Oe,isOpen:R,onClose:ht,onStartDemo:mn,onAdWatched:$e,hasNoAds:es()})]});case Je.RoundConfiguration:return p.jsx(hD,{onSelectRounds:de=>{Ht({totalRounds:de})},onBack:()=>t(Je.PackSelection)});case Je.Game:return p.jsx(dD,{players:i,currentPlayerIndex:_,onNextPlayer:xa,onNewGame:Jr,questions:c,dares:m,roundConfig:b,gameProgress:C,onRoundEnd:Yo,onQuestionAsked:Wr,onDareCompleted:In,onQuestionChange:Ko,onAdRequired:Vs,questionChangeState:oe});case Je.RoundEnd:return p.jsx(fD,{roundStats:ie,currentRound:C.currentRound,totalRounds:b.totalRounds,onContinue:$r,onEndGame:wr,hasNoAds:es()});case Je.GameEnd:return p.jsx(mD,{gameStats:F,players:i,onNewGame:Jr,onBackToMenu:()=>t(Je.Setup),hasNoAds:es(),isDemoMode:I,demoPackId:M});default:return p.jsx("div",{children:"Error: Estado de juego desconocido."})}};return p.jsxs("main",{className:"relative min-h-screen bg-gray-900 overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-purple-900/30 via-transparent to-pink-900/30"}),p.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-96 h-96 bg-purple-600 rounded-full filter blur-3xl opacity-20 animate-blob"}),p.jsx("div",{className:"absolute bottom-[-10%] right-[5%] w-96 h-96 bg-pink-600 rounded-full filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),p.jsx("div",{className:"absolute top-[10%] right-[-15%] w-80 h-80 bg-cyan-600 rounded-full filter blur-3xl opacity-10 animate-blob animation-delay-4000"}),p.jsx("div",{className:"relative z-10",children:Bn()}),p.jsx("style",{children:`
          .animate-blob {
            animation: blob 7s infinite;
          }
          .animation-delay-2000 {
            animation-delay: 2s;
          }
          .animation-delay-4000 {
            animation-delay: 4s;
          }
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
          }
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `}),It&&p.jsx(jb,{onClose:Mi,onSuccess:ki}),qn&&p.jsx(Lb,{onClose:ar})]})},Ub=document.getElementById("root");if(!Ub)throw new Error("Could not find root element to mount to");const gO=wS.createRoot(Ub);gO.render(p.jsx(fS.StrictMode,{children:p.jsx(bD,{children:p.jsx(mO,{})})}));export{vE as A,fb as W};
