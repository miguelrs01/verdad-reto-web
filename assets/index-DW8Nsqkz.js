(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function EE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var um={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function eS(){if(Ev)return Gl;Ev=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Gl.Fragment=e,Gl.jsx=n,Gl.jsxs=n,Gl}var Tv;function tS(){return Tv||(Tv=1,um.exports=eS()),um.exports}var y=tS(),hm={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function nS(){if(wv)return Ce;wv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),b=Symbol.iterator;function S(D){return D===null||typeof D!="object"?null:(D=b&&D[b]||D["@@iterator"],typeof D=="function"?D:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,K={};function H(D,Z,ce){this.props=D,this.context=Z,this.refs=K,this.updater=ce||j}H.prototype.isReactComponent={},H.prototype.setState=function(D,Z){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Z,"setState")},H.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function oe(){}oe.prototype=H.prototype;function se(D,Z,ce){this.props=D,this.context=Z,this.refs=K,this.updater=ce||j}var re=se.prototype=new oe;re.constructor=se,k(re,H.prototype),re.isPureReactComponent=!0;var fe=Array.isArray,he={H:null,A:null,T:null,S:null,V:null},ae=Object.prototype.hasOwnProperty;function R(D,Z,ce,ie,ve,De){return ce=De.ref,{$$typeof:i,type:D,key:Z,ref:ce!==void 0?ce:null,props:De}}function x(D,Z){return R(D.type,Z,void 0,void 0,void 0,D.props)}function N(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function P(D){var Z={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ce){return Z[ce]})}var M=/\/+/g;function O(D,Z){return typeof D=="object"&&D!==null&&D.key!=null?P(""+D.key):Z.toString(36)}function I(){}function ze(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(I,I):(D.status="pending",D.then(function(Z){D.status==="pending"&&(D.status="fulfilled",D.value=Z)},function(Z){D.status==="pending"&&(D.status="rejected",D.reason=Z)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Ie(D,Z,ce,ie,ve){var De=typeof D;(De==="undefined"||De==="boolean")&&(D=null);var xe=!1;if(D===null)xe=!0;else switch(De){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(D.$$typeof){case i:case e:xe=!0;break;case T:return xe=D._init,Ie(xe(D._payload),Z,ce,ie,ve)}}if(xe)return ve=ve(D),xe=ie===""?"."+O(D,0):ie,fe(ve)?(ce="",xe!=null&&(ce=xe.replace(M,"$&/")+"/"),Ie(ve,Z,ce,"",function(Un){return Un})):ve!=null&&(N(ve)&&(ve=x(ve,ce+(ve.key==null||D&&D.key===ve.key?"":(""+ve.key).replace(M,"$&/")+"/")+xe)),Z.push(ve)),1;xe=0;var Pt=ie===""?".":ie+":";if(fe(D))for(var tt=0;tt<D.length;tt++)ie=D[tt],De=Pt+O(ie,tt),xe+=Ie(ie,Z,ce,De,ve);else if(tt=S(D),typeof tt=="function")for(D=tt.call(D),tt=0;!(ie=D.next()).done;)ie=ie.value,De=Pt+O(ie,tt++),xe+=Ie(ie,Z,ce,De,ve);else if(De==="object"){if(typeof D.then=="function")return Ie(ze(D),Z,ce,ie,ve);throw Z=String(D),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return xe}function z(D,Z,ce){if(D==null)return D;var ie=[],ve=0;return Ie(D,ie,"","",function(De){return Z.call(ce,De,ve++)}),ie}function ee(D){if(D._status===-1){var Z=D._result;Z=Z(),Z.then(function(ce){(D._status===0||D._status===-1)&&(D._status=1,D._result=ce)},function(ce){(D._status===0||D._status===-1)&&(D._status=2,D._result=ce)}),D._status===-1&&(D._status=0,D._result=Z)}if(D._status===1)return D._result.default;throw D._result}var te=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function pe(){}return Ce.Children={map:z,forEach:function(D,Z,ce){z(D,function(){Z.apply(this,arguments)},ce)},count:function(D){var Z=0;return z(D,function(){Z++}),Z},toArray:function(D){return z(D,function(Z){return Z})||[]},only:function(D){if(!N(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ce.Component=H,Ce.Fragment=n,Ce.Profiler=o,Ce.PureComponent=se,Ce.StrictMode=s,Ce.Suspense=g,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=he,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(D){return he.H.useMemoCache(D)}},Ce.cache=function(D){return function(){return D.apply(null,arguments)}},Ce.cloneElement=function(D,Z,ce){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ie=k({},D.props),ve=D.key,De=void 0;if(Z!=null)for(xe in Z.ref!==void 0&&(De=void 0),Z.key!==void 0&&(ve=""+Z.key),Z)!ae.call(Z,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&Z.ref===void 0||(ie[xe]=Z[xe]);var xe=arguments.length-2;if(xe===1)ie.children=ce;else if(1<xe){for(var Pt=Array(xe),tt=0;tt<xe;tt++)Pt[tt]=arguments[tt+2];ie.children=Pt}return R(D.type,ve,void 0,void 0,De,ie)},Ce.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Ce.createElement=function(D,Z,ce){var ie,ve={},De=null;if(Z!=null)for(ie in Z.key!==void 0&&(De=""+Z.key),Z)ae.call(Z,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ve[ie]=Z[ie]);var xe=arguments.length-2;if(xe===1)ve.children=ce;else if(1<xe){for(var Pt=Array(xe),tt=0;tt<xe;tt++)Pt[tt]=arguments[tt+2];ve.children=Pt}if(D&&D.defaultProps)for(ie in xe=D.defaultProps,xe)ve[ie]===void 0&&(ve[ie]=xe[ie]);return R(D,De,void 0,void 0,null,ve)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(D){return{$$typeof:m,render:D}},Ce.isValidElement=N,Ce.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:ee}},Ce.memo=function(D,Z){return{$$typeof:_,type:D,compare:Z===void 0?null:Z}},Ce.startTransition=function(D){var Z=he.T,ce={};he.T=ce;try{var ie=D(),ve=he.S;ve!==null&&ve(ce,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(pe,te)}catch(De){te(De)}finally{he.T=Z}},Ce.unstable_useCacheRefresh=function(){return he.H.useCacheRefresh()},Ce.use=function(D){return he.H.use(D)},Ce.useActionState=function(D,Z,ce){return he.H.useActionState(D,Z,ce)},Ce.useCallback=function(D,Z){return he.H.useCallback(D,Z)},Ce.useContext=function(D){return he.H.useContext(D)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(D,Z){return he.H.useDeferredValue(D,Z)},Ce.useEffect=function(D,Z,ce){var ie=he.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(D,Z)},Ce.useId=function(){return he.H.useId()},Ce.useImperativeHandle=function(D,Z,ce){return he.H.useImperativeHandle(D,Z,ce)},Ce.useInsertionEffect=function(D,Z){return he.H.useInsertionEffect(D,Z)},Ce.useLayoutEffect=function(D,Z){return he.H.useLayoutEffect(D,Z)},Ce.useMemo=function(D,Z){return he.H.useMemo(D,Z)},Ce.useOptimistic=function(D,Z){return he.H.useOptimistic(D,Z)},Ce.useReducer=function(D,Z,ce){return he.H.useReducer(D,Z,ce)},Ce.useRef=function(D){return he.H.useRef(D)},Ce.useState=function(D){return he.H.useState(D)},Ce.useSyncExternalStore=function(D,Z,ce){return he.H.useSyncExternalStore(D,Z,ce)},Ce.useTransition=function(){return he.H.useTransition()},Ce.version="19.1.1",Ce}var bv;function ng(){return bv||(bv=1,hm.exports=nS()),hm.exports}var ne=ng();const rS=EE(ne);var dm={exports:{}},Ql={},fm={exports:{}},mm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function iS(){return Av||(Av=1,(function(i){function e(z,ee){var te=z.length;z.push(ee);e:for(;0<te;){var pe=te-1>>>1,D=z[pe];if(0<o(D,ee))z[pe]=ee,z[te]=D,te=pe;else break e}}function n(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var ee=z[0],te=z.pop();if(te!==ee){z[0]=te;e:for(var pe=0,D=z.length,Z=D>>>1;pe<Z;){var ce=2*(pe+1)-1,ie=z[ce],ve=ce+1,De=z[ve];if(0>o(ie,te))ve<D&&0>o(De,ie)?(z[pe]=De,z[ve]=te,pe=ve):(z[pe]=ie,z[ce]=te,pe=ce);else if(ve<D&&0>o(De,te))z[pe]=De,z[ve]=te,pe=ve;else break e}}return ee}function o(z,ee){var te=z.sortIndex-ee.sortIndex;return te!==0?te:z.id-ee.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var g=[],_=[],T=1,b=null,S=3,j=!1,k=!1,K=!1,H=!1,oe=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function fe(z){for(var ee=n(_);ee!==null;){if(ee.callback===null)s(_);else if(ee.startTime<=z)s(_),ee.sortIndex=ee.expirationTime,e(g,ee);else break;ee=n(_)}}function he(z){if(K=!1,fe(z),!k)if(n(g)!==null)k=!0,ae||(ae=!0,O());else{var ee=n(_);ee!==null&&Ie(he,ee.startTime-z)}}var ae=!1,R=-1,x=5,N=-1;function P(){return H?!0:!(i.unstable_now()-N<x)}function M(){if(H=!1,ae){var z=i.unstable_now();N=z;var ee=!0;try{e:{k=!1,K&&(K=!1,se(R),R=-1),j=!0;var te=S;try{t:{for(fe(z),b=n(g);b!==null&&!(b.expirationTime>z&&P());){var pe=b.callback;if(typeof pe=="function"){b.callback=null,S=b.priorityLevel;var D=pe(b.expirationTime<=z);if(z=i.unstable_now(),typeof D=="function"){b.callback=D,fe(z),ee=!0;break t}b===n(g)&&s(g),fe(z)}else s(g);b=n(g)}if(b!==null)ee=!0;else{var Z=n(_);Z!==null&&Ie(he,Z.startTime-z),ee=!1}}break e}finally{b=null,S=te,j=!1}ee=void 0}}finally{ee?O():ae=!1}}}var O;if(typeof re=="function")O=function(){re(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ze=I.port2;I.port1.onmessage=M,O=function(){ze.postMessage(null)}}else O=function(){oe(M,0)};function Ie(z,ee){R=oe(function(){z(i.unstable_now())},ee)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(z){switch(S){case 1:case 2:case 3:var ee=3;break;default:ee=S}var te=S;S=ee;try{return z()}finally{S=te}},i.unstable_requestPaint=function(){H=!0},i.unstable_runWithPriority=function(z,ee){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var te=S;S=z;try{return ee()}finally{S=te}},i.unstable_scheduleCallback=function(z,ee,te){var pe=i.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?pe+te:pe):te=pe,z){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=te+D,z={id:T++,callback:ee,priorityLevel:z,startTime:te,expirationTime:D,sortIndex:-1},te>pe?(z.sortIndex=te,e(_,z),n(g)===null&&z===n(_)&&(K?(se(R),R=-1):K=!0,Ie(he,te-pe))):(z.sortIndex=D,e(g,z),k||j||(k=!0,ae||(ae=!0,O()))),z},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(z){var ee=S;return function(){var te=S;S=ee;try{return z.apply(this,arguments)}finally{S=te}}}})(mm)),mm}var Sv;function sS(){return Sv||(Sv=1,fm.exports=iS()),fm.exports}var gm={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function aS(){if(xv)return on;xv=1;var i=ng();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,_,T){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:_,implementation:T}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,on.createPortal=function(g,_){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(g,_,null,T)},on.flushSync=function(g){var _=d.T,T=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=_,s.p=T,s.d.f()}},on.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(g,_))},on.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},on.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var T=_.as,b=m(T,_.crossOrigin),S=typeof _.integrity=="string"?_.integrity:void 0,j=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;T==="style"?s.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:j}):T==="script"&&s.d.X(g,{crossOrigin:b,integrity:S,fetchPriority:j,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},on.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var T=m(_.as,_.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(g)},on.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var T=_.as,b=m(T,_.crossOrigin);s.d.L(g,T,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},on.preloadModule=function(g,_){if(typeof g=="string")if(_){var T=m(_.as,_.crossOrigin);s.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(g)},on.requestFormReset=function(g){s.d.r(g)},on.unstable_batchedUpdates=function(g,_){return g(_)},on.useFormState=function(g,_,T){return d.H.useFormState(g,_,T)},on.useFormStatus=function(){return d.H.useHostTransitionStatus()},on.version="19.1.1",on}var Rv;function oS(){if(Rv)return gm.exports;Rv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),gm.exports=aS(),gm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function lS(){if(Iv)return Ql;Iv=1;var i=sS(),e=ng(),n=oS();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(s(188))}function g(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),t;if(f===l)return m(h),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var E=!1,w=h.child;w;){if(w===a){E=!0,a=h,l=f;break}if(w===l){E=!0,l=h,a=f;break}w=w.sibling}if(!E){for(w=f.child;w;){if(w===a){E=!0,a=f,l=h;break}if(w===l){E=!0,l=f,a=h;break}w=w.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function _(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=_(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),oe=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),re=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function O(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function ze(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case k:return"Fragment";case H:return"Profiler";case K:return"StrictMode";case he:return"Suspense";case ae:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case j:return"Portal";case re:return(t.displayName||"Context")+".Provider";case se:return(t._context.displayName||"Context")+".Consumer";case fe:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return r=t.displayName||null,r!==null?r:ze(t.type)||"Memo";case x:r=t._payload,t=t._init;try{return ze(t(r))}catch{}}return null}var Ie=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},pe=[],D=-1;function Z(t){return{current:t}}function ce(t){0>D||(t.current=pe[D],pe[D]=null,D--)}function ie(t,r){D++,pe[D]=t.current,t.current=r}var ve=Z(null),De=Z(null),xe=Z(null),Pt=Z(null);function tt(t,r){switch(ie(xe,r),ie(De,t),ie(ve,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Y_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Y_(r),t=X_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ce(ve),ie(ve,t)}function Un(){ce(ve),ce(De),ce(xe)}function zn(t){t.memoizedState!==null&&ie(Pt,t);var r=ve.current,a=X_(r,t.type);r!==a&&(ie(De,t),ie(ve,a))}function nr(t){De.current===t&&(ce(ve),ce(De)),Pt.current===t&&(ce(Pt),zl._currentValue=te)}var Ur=Object.prototype.hasOwnProperty,zr=i.unstable_scheduleCallback,qr=i.unstable_cancelCallback,Ii=i.unstable_shouldYield,pa=i.unstable_requestPaint,En=i.unstable_now,qo=i.unstable_getCurrentPriorityLevel,Is=i.unstable_ImmediatePriority,Ni=i.unstable_UserBlockingPriority,Br=i.unstable_NormalPriority,Bo=i.unstable_LowPriority,Ci=i.unstable_IdlePriority,Ns=i.log,ya=i.unstable_setDisableYieldValue,ut=null,Ye=null;function sn(t){if(typeof Ns=="function"&&ya(t),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(ut,t)}catch{}}var zt=Math.clz32?Math.clz32:Hr,_a=Math.log,va=Math.LN2;function Hr(t){return t>>>=0,t===0?32:31-(_a(t)/va|0)|0}var Fr=256,Gr=4194304;function Rn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Di(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~f,l!==0?h=Rn(l):(E&=w,E!==0?h=Rn(E):a||(a=w&~t,a!==0&&(h=Rn(a))))):(w=l&~f,w!==0?h=Rn(w):E!==0?h=Rn(E):a||(a=l&~t,a!==0&&(h=Rn(a)))),h===0?0:r!==0&&r!==h&&(r&f)===0&&(f=h&-h,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:h}function Qr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function me(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ye(){var t=Fr;return Fr<<=1,(Fr&4194048)===0&&(Fr=256),t}function Ot(){var t=Gr;return Gr<<=1,(Gr&62914560)===0&&(Gr=4194304),t}function mn(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Kr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ho(t,r,a,l,h,f){var E=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,C=t.expirationTimes,B=t.hiddenUpdates;for(a=E&~a;0<a;){var Y=31-zt(a),W=1<<Y;w[Y]=0,C[Y]=-1;var F=B[Y];if(F!==null)for(B[Y]=null,Y=0;Y<F.length;Y++){var G=F[Y];G!==null&&(G.lane&=-536870913)}a&=~W}l!==0&&fr(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(E&~r))}function fr(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-zt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Fo(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-zt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function Pi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ea(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Oi(){var t=ee.p;return t!==0?t:(t=window.event,t===void 0?32:mv(t.type))}function jc(t,r){var a=ee.p;try{return ee.p=t,r()}finally{ee.p=a}}var ht=Math.random().toString(36).slice(2),Mt="__reactFiber$"+ht,St="__reactProps$"+ht,qn="__reactContainer$"+ht,Go="__reactEvents$"+ht,dd="__reactListeners$"+ht,Mi="__reactHandles$"+ht,Lc="__reactResources$"+ht,Cs="__reactMarker$"+ht;function Vi(t){delete t[Mt],delete t[St],delete t[Go],delete t[dd],delete t[Mi]}function Yr(t){var r=t[Mt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[qn]||a[Mt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=J_(t);t!==null;){if(a=t[Mt])return a;t=J_(t)}return r}t=a,a=t.parentNode}return null}function mr(t){if(t=t[Mt]||t[qn]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function gr(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function gn(t){var r=t[Lc];return r||(r=t[Lc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Tt(t){t[Cs]=!0}var Qo=new Set,Ta={};function rr(t,r){Xr(t,r),Xr(t+"Capture",r)}function Xr(t,r){for(Ta[t]=r,t=0;t<r.length;t++)Qo.add(r[t])}var Uc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zc={},Ds={};function qc(t){return Ur.call(Ds,t)?!0:Ur.call(zc,t)?!1:Uc.test(t)?Ds[t]=!0:(zc[t]=!0,!1)}function ki(t,r,a){if(qc(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function pr(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Xt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Ps,Bc;function $r(t){if(Ps===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ps=r&&r[1]||"",Bc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ps+t+Bc}var wa=!1;function ba(t,r){if(!t||wa)return"";wa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(G){var F=G}Reflect.construct(t,[],W)}else{try{W.call()}catch(G){F=G}t.call(W.prototype)}}else{try{throw Error()}catch(G){F=G}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(G){if(G&&F&&typeof G.stack=="string")return[G.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),E=f[0],w=f[1];if(E&&w){var C=E.split(`
`),B=w.split(`
`);for(h=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===C.length||h===B.length)for(l=C.length-1,h=B.length-1;1<=l&&0<=h&&C[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(C[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||C[l]!==B[h]){var Y=`
`+C[l].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=l&&0<=h);break}}}finally{wa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?$r(a):""}function Ko(t){switch(t.tag){case 26:case 27:case 5:return $r(t.type);case 16:return $r("Lazy");case 13:return $r("Suspense");case 19:return $r("SuspenseList");case 0:case 15:return ba(t.type,!1);case 11:return ba(t.type.render,!1);case 1:return ba(t.type,!0);case 31:return $r("Activity");default:return""}}function Aa(t){try{var r="";do r+=Ko(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function pn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function fd(t){var r=Yo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,f.call(this,E)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Sa(t){t._valueTracker||(t._valueTracker=fd(t))}function Xo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Yo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Os(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var md=/[\n"\\]/g;function xt(t){return t.replace(md,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function In(t,r,a,l,h,f,E,w){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),r!=null?E==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+pn(r)):t.value!==""+pn(r)&&(t.value=""+pn(r)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),r!=null?ji(t,E,pn(r)):a!=null?ji(t,E,pn(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+pn(w):t.removeAttribute("name")}function Ms(t,r,a,l,h,f,E,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null))return;a=a!=null?""+pn(a):"",r=r!=null?""+pn(r):a,w||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function ji(t,r,a){r==="number"&&Os(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Wr(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+pn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function nt(t,r,a){if(r!=null&&(r=""+pn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+pn(a):""}function Vs(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Ie(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=pn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Bn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var ks=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hc(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||ks.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function $o(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&Hc(t,h,l)}else for(var f in r)r.hasOwnProperty(f)&&Hc(t,f,r[f])}function Wo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xa(t){return pd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Zr=null;function Hn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jr=null,ei=null;function Zo(t){var r=mr(t);if(r&&(t=r.stateNode)){var a=t[St]||null;e:switch(t=r.stateNode,r.type){case"input":if(In(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+xt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[St]||null;if(!h)throw Error(s(90));In(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Xo(l)}break e;case"textarea":nt(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Wr(t,!!a.multiple,r,!1)}}}var yr=!1;function Fc(t,r,a){if(yr)return t(r,a);yr=!0;try{var l=t(r);return l}finally{if(yr=!1,(Jr!==null||ei!==null)&&(ju(),Jr&&(r=Jr,t=ei,ei=Jr=null,Zo(r),t)))for(r=0;r<t.length;r++)Zo(t[r])}}function js(t,r){var a=t.stateNode;if(a===null)return null;var l=a[St]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fn=!1;if(ir)try{var Ls={};Object.defineProperty(Ls,"passive",{get:function(){Fn=!0}}),window.addEventListener("test",Ls,Ls),window.removeEventListener("test",Ls,Ls)}catch{Fn=!1}var _r=null,Li=null,ti=null;function Jo(){if(ti)return ti;var t,r=Li,a=r.length,l,h="value"in _r?_r.value:_r.textContent,f=h.length;for(t=0;t<a&&r[t]===h[t];t++);var E=a-t;for(l=1;l<=E&&r[a-l]===h[f-l];l++);return ti=h.slice(t,1<l?1-l:void 0)}function vr(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Er(){return!0}function el(){return!1}function qt(t){function r(a,l,h,f,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Er:el,this.isPropagationStopped=el,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Er)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Er)},persist:function(){},isPersistent:Er}),r}var $e={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ra=qt($e),Us=T({},$e,{view:0,detail:0}),Gc=qt(Us),Ia,Na,Tr,zs=T({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tr&&(Tr&&t.type==="mousemove"?(Ia=t.screenX-Tr.screenX,Na=t.screenY-Tr.screenY):Na=Ia=0,Tr=t),Ia)},movementY:function(t){return"movementY"in t?t.movementY:Na}}),Gn=qt(zs),Qc=T({},zs,{dataTransfer:0}),yd=qt(Qc),qs=T({},Us,{relatedTarget:0}),Ca=qt(qs),tl=T({},$e,{animationName:0,elapsedTime:0,pseudoElement:0}),Da=qt(tl),Kc=T({},$e,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Pa=qt(Kc),_d=T({},$e,{data:0}),nl=qt(_d),Bs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rl(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Xc[t])?!!r[t]:!1}function Hs(){return rl}var $c=T({},Us,{key:function(t){if(t.key){var r=Bs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=vr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hs,charCode:function(t){return t.type==="keypress"?vr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Oa=qt($c),Wc=T({},zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),il=qt(Wc),ni=T({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hs}),Zc=qt(ni),Jc=T({},$e,{propertyName:0,elapsedTime:0,pseudoElement:0}),eu=qt(Jc),tu=T({},zs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ma=qt(tu),yn=T({},$e,{newState:0,oldState:0}),nu=qt(yn),ru=[9,13,27,32],wr=ir&&"CompositionEvent"in window,u=null;ir&&"documentMode"in document&&(u=document.documentMode);var p=ir&&"TextEvent"in window&&!u,v=ir&&(!wr||u&&8<u&&11>=u),A=" ",U=!1;function Q(t,r){switch(t){case"keyup":return ru.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function le(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qe=!1;function Vt(t,r){switch(t){case"compositionend":return le(r);case"keypress":return r.which!==32?null:(U=!0,A);case"textInput":return t=r.data,t===A&&U?null:t;default:return null}}function Be(t,r){if(qe)return t==="compositionend"||!wr&&Q(t,r)?(t=Jo(),ti=Li=_r=null,qe=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var Bt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Bt[t.type]:r==="textarea"}function ri(t,r,a,l){Jr?ei?ei.push(l):ei=[l]:Jr=l,r=Hu(r,"onChange"),0<r.length&&(a=new Ra("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var $t=null,br=null;function sl(t){H_(t,0)}function iu(t){var r=gr(t);if(Xo(r))return t}function up(t,r){if(t==="change")return r}var hp=!1;if(ir){var vd;if(ir){var Ed="oninput"in document;if(!Ed){var dp=document.createElement("div");dp.setAttribute("oninput","return;"),Ed=typeof dp.oninput=="function"}vd=Ed}else vd=!1;hp=vd&&(!document.documentMode||9<document.documentMode)}function fp(){$t&&($t.detachEvent("onpropertychange",mp),br=$t=null)}function mp(t){if(t.propertyName==="value"&&iu(br)){var r=[];ri(r,br,t,Hn(t)),Fc(sl,r)}}function Cb(t,r,a){t==="focusin"?(fp(),$t=r,br=a,$t.attachEvent("onpropertychange",mp)):t==="focusout"&&fp()}function Db(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iu(br)}function Pb(t,r){if(t==="click")return iu(r)}function Ob(t,r){if(t==="input"||t==="change")return iu(r)}function Mb(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Nn=typeof Object.is=="function"?Object.is:Mb;function al(t,r){if(Nn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Ur.call(r,h)||!Nn(t[h],r[h]))return!1}return!0}function gp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pp(t,r){var a=gp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=gp(a)}}function yp(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?yp(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function _p(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Os(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Os(t.document)}return r}function Td(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Vb=ir&&"documentMode"in document&&11>=document.documentMode,Va=null,wd=null,ol=null,bd=!1;function vp(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;bd||Va==null||Va!==Os(l)||(l=Va,"selectionStart"in l&&Td(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ol&&al(ol,l)||(ol=l,l=Hu(wd,"onSelect"),0<l.length&&(r=new Ra("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Va)))}function Fs(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var ka={animationend:Fs("Animation","AnimationEnd"),animationiteration:Fs("Animation","AnimationIteration"),animationstart:Fs("Animation","AnimationStart"),transitionrun:Fs("Transition","TransitionRun"),transitionstart:Fs("Transition","TransitionStart"),transitioncancel:Fs("Transition","TransitionCancel"),transitionend:Fs("Transition","TransitionEnd")},Ad={},Ep={};ir&&(Ep=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Gs(t){if(Ad[t])return Ad[t];if(!ka[t])return t;var r=ka[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Ep)return Ad[t]=r[a];return t}var Tp=Gs("animationend"),wp=Gs("animationiteration"),bp=Gs("animationstart"),kb=Gs("transitionrun"),jb=Gs("transitionstart"),Lb=Gs("transitioncancel"),Ap=Gs("transitionend"),Sp=new Map,Sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sd.push("scrollEnd");function sr(t,r){Sp.set(t,r),rr(r,[t])}var xp=new WeakMap;function Qn(t,r){if(typeof t=="object"&&t!==null){var a=xp.get(t);return a!==void 0?a:(r={value:t,source:r,stack:Aa(r)},xp.set(t,r),r)}return{value:t,source:r,stack:Aa(r)}}var Kn=[],ja=0,xd=0;function su(){for(var t=ja,r=xd=ja=0;r<t;){var a=Kn[r];Kn[r++]=null;var l=Kn[r];Kn[r++]=null;var h=Kn[r];Kn[r++]=null;var f=Kn[r];if(Kn[r++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}f!==0&&Rp(a,h,f)}}function au(t,r,a,l){Kn[ja++]=t,Kn[ja++]=r,Kn[ja++]=a,Kn[ja++]=l,xd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Rd(t,r,a,l){return au(t,r,a,l),ou(t)}function La(t,r){return au(t,null,null,r),ou(t)}function Rp(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&r!==null&&(h=31-zt(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),f):null}function ou(t){if(50<Pl)throw Pl=0,Mf=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ua={};function Ub(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,r,a,l){return new Ub(t,r,a,l)}function Id(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ii(t,r){var a=t.alternate;return a===null?(a=Cn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Ip(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function lu(t,r,a,l,h,f){var E=0;if(l=t,typeof t=="function")Id(t)&&(E=1);else if(typeof t=="string")E=qA(t,a,ve.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=Cn(31,a,r,h),t.elementType=N,t.lanes=f,t;case k:return Qs(a.children,h,f,r);case K:E=8,h|=24;break;case H:return t=Cn(12,a,r,h|2),t.elementType=H,t.lanes=f,t;case he:return t=Cn(13,a,r,h),t.elementType=he,t.lanes=f,t;case ae:return t=Cn(19,a,r,h),t.elementType=ae,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oe:case re:E=10;break e;case se:E=9;break e;case fe:E=11;break e;case R:E=14;break e;case x:E=16,l=null;break e}E=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Cn(E,a,r,h),r.elementType=t,r.type=l,r.lanes=f,r}function Qs(t,r,a,l){return t=Cn(7,t,l,r),t.lanes=a,t}function Nd(t,r,a){return t=Cn(6,t,null,r),t.lanes=a,t}function Cd(t,r,a){return r=Cn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var za=[],qa=0,cu=null,uu=0,Yn=[],Xn=0,Ks=null,si=1,ai="";function Ys(t,r){za[qa++]=uu,za[qa++]=cu,cu=t,uu=r}function Np(t,r,a){Yn[Xn++]=si,Yn[Xn++]=ai,Yn[Xn++]=Ks,Ks=t;var l=si;t=ai;var h=32-zt(l)-1;l&=~(1<<h),a+=1;var f=32-zt(r)+h;if(30<f){var E=h-h%5;f=(l&(1<<E)-1).toString(32),l>>=E,h-=E,si=1<<32-zt(r)+h|a<<h|l,ai=f+t}else si=1<<f|a<<h|l,ai=t}function Dd(t){t.return!==null&&(Ys(t,1),Np(t,1,0))}function Pd(t){for(;t===cu;)cu=za[--qa],za[qa]=null,uu=za[--qa],za[qa]=null;for(;t===Ks;)Ks=Yn[--Xn],Yn[Xn]=null,ai=Yn[--Xn],Yn[Xn]=null,si=Yn[--Xn],Yn[Xn]=null}var _n=null,pt=null,Xe=!1,Xs=null,Ar=!1,Od=Error(s(519));function $s(t){var r=Error(s(418,""));throw ul(Qn(r,t)),Od}function Cp(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Mt]=t,r[St]=l,a){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(a=0;a<Ml.length;a++)ke(Ml[a],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":ke("invalid",r),Ms(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Sa(r);break;case"select":ke("invalid",r);break;case"textarea":ke("invalid",r),Vs(r,l.value,l.defaultValue,l.children),Sa(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||K_(r.textContent,a)?(l.popover!=null&&(ke("beforetoggle",r),ke("toggle",r)),l.onScroll!=null&&ke("scroll",r),l.onScrollEnd!=null&&ke("scrollend",r),l.onClick!=null&&(r.onclick=Fu),r=!0):r=!1,r||$s(t)}function Dp(t){for(_n=t.return;_n;)switch(_n.tag){case 5:case 13:Ar=!1;return;case 27:case 3:Ar=!0;return;default:_n=_n.return}}function ll(t){if(t!==_n)return!1;if(!Xe)return Dp(t),Xe=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||$f(t.type,t.memoizedProps)),a=!a),a&&pt&&$s(t),Dp(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){pt=or(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}pt=null}}else r===27?(r=pt,es(t.type)?(t=em,em=null,pt=t):pt=r):pt=_n?or(t.stateNode.nextSibling):null;return!0}function cl(){pt=_n=null,Xe=!1}function Pp(){var t=Xs;return t!==null&&(bn===null?bn=t:bn.push.apply(bn,t),Xs=null),t}function ul(t){Xs===null?Xs=[t]:Xs.push(t)}var Md=Z(null),Ws=null,oi=null;function Ui(t,r,a){ie(Md,r._currentValue),r._currentValue=a}function li(t){t._currentValue=Md.current,ce(Md)}function Vd(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function kd(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var E=h.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=h;for(var C=0;C<r.length;C++)if(w.context===r[C]){f.lanes|=a,w=f.alternate,w!==null&&(w.lanes|=a),Vd(f.return,a,t),l||(E=null);break e}f=w.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(s(341));E.lanes|=a,f=E.alternate,f!==null&&(f.lanes|=a),Vd(E,a,t),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===t){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function hl(t,r,a,l){t=null;for(var h=r,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var w=h.type;Nn(h.pendingProps.value,E.value)||(t!==null?t.push(w):t=[w])}}else if(h===Pt.current){if(E=h.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(zl):t=[zl])}h=h.return}t!==null&&kd(r,t,a,l),r.flags|=262144}function hu(t){for(t=t.firstContext;t!==null;){if(!Nn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Zs(t){Ws=t,oi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function an(t){return Op(Ws,t)}function du(t,r){return Ws===null&&Zs(t),Op(t,r)}function Op(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},oi===null){if(t===null)throw Error(s(308));oi=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else oi=oi.next=r;return a}var zb=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},qb=i.unstable_scheduleCallback,Bb=i.unstable_NormalPriority,jt={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jd(){return{controller:new zb,data:new Map,refCount:0}}function dl(t){t.refCount--,t.refCount===0&&qb(Bb,function(){t.controller.abort()})}var fl=null,Ld=0,Ba=0,Ha=null;function Hb(t,r){if(fl===null){var a=fl=[];Ld=0,Ba=qf(),Ha={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ld++,r.then(Mp,Mp),r}function Mp(){if(--Ld===0&&fl!==null){Ha!==null&&(Ha.status="fulfilled");var t=fl;fl=null,Ba=0,Ha=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Fb(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Vp=z.S;z.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Hb(t,r),Vp!==null&&Vp(t,r)};var Js=Z(null);function Ud(){var t=Js.current;return t!==null?t:lt.pooledCache}function fu(t,r){r===null?ie(Js,Js.current):ie(Js,r.pool)}function kp(){var t=Ud();return t===null?null:{parent:jt._currentValue,pool:t}}var ml=Error(s(460)),jp=Error(s(474)),mu=Error(s(542)),zd={then:function(){}};function Lp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function gu(){}function Up(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(gu,gu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,qp(t),t;default:if(typeof r.status=="string")r.then(gu,gu);else{if(t=lt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,qp(t),t}throw gl=r,ml}}var gl=null;function zp(){if(gl===null)throw Error(s(459));var t=gl;return gl=null,t}function qp(t){if(t===ml||t===mu)throw Error(s(483))}var zi=!1;function qd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function qi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Bi(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(We&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=ou(t),Rp(t,null,a),r}return au(t,l,r,a),ou(t)}function pl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Fo(t,a)}}function Hd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=E:f=f.next=E,a=a.next}while(a!==null);f===null?h=f=r:f=f.next=r}else h=f=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Fd=!1;function yl(){if(Fd){var t=Ha;if(t!==null)throw t}}function _l(t,r,a,l){Fd=!1;var h=t.updateQueue;zi=!1;var f=h.firstBaseUpdate,E=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var C=w,B=C.next;C.next=null,E===null?f=B:E.next=B,E=C;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,w=Y.lastBaseUpdate,w!==E&&(w===null?Y.firstBaseUpdate=B:w.next=B,Y.lastBaseUpdate=C))}if(f!==null){var W=h.baseState;E=0,Y=B=C=null,w=f;do{var F=w.lane&-536870913,G=F!==w.lane;if(G?(He&F)===F:(l&F)===F){F!==0&&F===Ba&&(Fd=!0),Y!==null&&(Y=Y.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Re=t,we=w;F=r;var st=a;switch(we.tag){case 1:if(Re=we.payload,typeof Re=="function"){W=Re.call(st,W,F);break e}W=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=we.payload,F=typeof Re=="function"?Re.call(st,W,F):Re,F==null)break e;W=T({},W,F);break e;case 2:zi=!0}}F=w.callback,F!==null&&(t.flags|=64,G&&(t.flags|=8192),G=h.callbacks,G===null?h.callbacks=[F]:G.push(F))}else G={lane:F,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Y===null?(B=Y=G,C=W):Y=Y.next=G,E|=F;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;G=w,w=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);Y===null&&(C=W),h.baseState=C,h.firstBaseUpdate=B,h.lastBaseUpdate=Y,f===null&&(h.shared.lanes=0),$i|=E,t.lanes=E,t.memoizedState=W}}function Bp(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Hp(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Bp(a[t],r)}var Fa=Z(null),pu=Z(0);function Fp(t,r){t=gi,ie(pu,t),ie(Fa,r),gi=t|r.baseLanes}function Gd(){ie(pu,gi),ie(Fa,Fa.current)}function Qd(){gi=pu.current,ce(Fa),ce(pu)}var Hi=0,Pe=null,rt=null,Rt=null,yu=!1,Ga=!1,ea=!1,_u=0,vl=0,Qa=null,Gb=0;function wt(){throw Error(s(321))}function Kd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Nn(t[a],r[a]))return!1;return!0}function Yd(t,r,a,l,h,f){return Hi=f,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,z.H=t===null||t.memoizedState===null?Ry:Iy,ea=!1,f=a(l,h),ea=!1,Ga&&(f=Qp(r,a,l,h)),Gp(t),f}function Gp(t){z.H=Au;var r=rt!==null&&rt.next!==null;if(Hi=0,Rt=rt=Pe=null,yu=!1,vl=0,Qa=null,r)throw Error(s(300));t===null||Ht||(t=t.dependencies,t!==null&&hu(t)&&(Ht=!0))}function Qp(t,r,a,l){Pe=t;var h=0;do{if(Ga&&(Qa=null),vl=0,Ga=!1,25<=h)throw Error(s(301));if(h+=1,Rt=rt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}z.H=Zb,f=r(a,l)}while(Ga);return f}function Qb(){var t=z.H,r=t.useState()[0];return r=typeof r.then=="function"?El(r):r,t=t.useState()[0],(rt!==null?rt.memoizedState:null)!==t&&(Pe.flags|=1024),r}function Xd(){var t=_u!==0;return _u=0,t}function $d(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Wd(t){if(yu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}yu=!1}Hi=0,Rt=rt=Pe=null,Ga=!1,vl=_u=0,Qa=null}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Pe.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function It(){if(rt===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var r=Rt===null?Pe.memoizedState:Rt.next;if(r!==null)Rt=r,rt=t;else{if(t===null)throw Pe.alternate===null?Error(s(467)):Error(s(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Rt===null?Pe.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function Zd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function El(t){var r=vl;return vl+=1,Qa===null&&(Qa=[]),t=Up(Qa,t,r),r=Pe,(Rt===null?r.memoizedState:Rt.next)===null&&(r=r.alternate,z.H=r===null||r.memoizedState===null?Ry:Iy),t}function vu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return El(t);if(t.$$typeof===re)return an(t)}throw Error(s(438,String(t)))}function Jd(t){var r=null,a=Pe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Pe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Zd(),Pe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=P;return r.index++,a}function ci(t,r){return typeof r=="function"?r(t):r}function Eu(t){var r=It();return ef(r,rt,t)}function ef(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var E=h.next;h.next=f.next,f.next=E}r.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{r=h.next;var w=E=null,C=null,B=r,Y=!1;do{var W=B.lane&-536870913;if(W!==B.lane?(He&W)===W:(Hi&W)===W){var F=B.revertLane;if(F===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),W===Ba&&(Y=!0);else if((Hi&F)===F){B=B.next,F===Ba&&(Y=!0);continue}else W={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},C===null?(w=C=W,E=f):C=C.next=W,Pe.lanes|=F,$i|=F;W=B.action,ea&&a(f,W),f=B.hasEagerState?B.eagerState:a(f,W)}else F={lane:W,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},C===null?(w=C=F,E=f):C=C.next=F,Pe.lanes|=W,$i|=W;B=B.next}while(B!==null&&B!==r);if(C===null?E=f:C.next=w,!Nn(f,t.memoizedState)&&(Ht=!0,Y&&(a=Ha,a!==null)))throw a;t.memoizedState=f,t.baseState=E,t.baseQueue=C,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function tf(t){var r=It(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=r.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do f=t(f,E.action),E=E.next;while(E!==h);Nn(f,r.memoizedState)||(Ht=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function Kp(t,r,a){var l=Pe,h=It(),f=Xe;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var E=!Nn((rt||h).memoizedState,a);E&&(h.memoizedState=a,Ht=!0),h=h.queue;var w=$p.bind(null,l,h,t);if(Tl(2048,8,w,[t]),h.getSnapshot!==r||E||Rt!==null&&Rt.memoizedState.tag&1){if(l.flags|=2048,Ka(9,Tu(),Xp.bind(null,l,h,a,r),null),lt===null)throw Error(s(349));f||(Hi&124)!==0||Yp(l,r,a)}return a}function Yp(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Pe.updateQueue,r===null?(r=Zd(),Pe.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Xp(t,r,a,l){r.value=a,r.getSnapshot=l,Wp(r)&&Zp(t)}function $p(t,r,a){return a(function(){Wp(r)&&Zp(t)})}function Wp(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Nn(t,a)}catch{return!0}}function Zp(t){var r=La(t,2);r!==null&&Vn(r,t,2)}function nf(t){var r=Tn();if(typeof t=="function"){var a=t;if(t=a(),ea){sn(!0);try{a()}finally{sn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:t},r}function Jp(t,r,a,l){return t.baseState=a,ef(t,rt,typeof l=="function"?l:ci)}function Kb(t,r,a,l,h){if(bu(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};z.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,ey(r,f)):(f.next=a.next,r.pending=a.next=f)}}function ey(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var f=z.T,E={};z.T=E;try{var w=a(h,l),C=z.S;C!==null&&C(E,w),ty(t,r,w)}catch(B){rf(t,r,B)}finally{z.T=f}}else try{f=a(h,l),ty(t,r,f)}catch(B){rf(t,r,B)}}function ty(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ny(t,r,l)},function(l){return rf(t,r,l)}):ny(t,r,a)}function ny(t,r,a){r.status="fulfilled",r.value=a,ry(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,ey(t,a)))}function rf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,ry(r),r=r.next;while(r!==l)}t.action=null}function ry(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function iy(t,r){return r}function sy(t,r){if(Xe){var a=lt.formState;if(a!==null){e:{var l=Pe;if(Xe){if(pt){t:{for(var h=pt,f=Ar;h.nodeType!==8;){if(!f){h=null;break t}if(h=or(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){pt=or(h.nextSibling),l=h.data==="F!";break e}}$s(l)}l=!1}l&&(r=a[0])}}return a=Tn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iy,lastRenderedState:r},a.queue=l,a=Ay.bind(null,Pe,l),l.dispatch=a,l=nf(!1),f=cf.bind(null,Pe,!1,l.queue),l=Tn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=Kb.bind(null,Pe,h,f,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function ay(t){var r=It();return oy(r,rt,t)}function oy(t,r,a){if(r=ef(t,r,iy)[0],t=Eu(ci)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=El(r)}catch(E){throw E===ml?mu:E}else l=r;r=It();var h=r.queue,f=h.dispatch;return a!==r.memoizedState&&(Pe.flags|=2048,Ka(9,Tu(),Yb.bind(null,h,a),null)),[l,f,t]}function Yb(t,r){t.action=r}function ly(t){var r=It(),a=rt;if(a!==null)return oy(r,a,t);It(),r=r.memoizedState,a=It();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Ka(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Pe.updateQueue,r===null&&(r=Zd(),Pe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function Tu(){return{destroy:void 0,resource:void 0}}function cy(){return It().memoizedState}function wu(t,r,a,l){var h=Tn();l=l===void 0?null:l,Pe.flags|=t,h.memoizedState=Ka(1|r,Tu(),a,l)}function Tl(t,r,a,l){var h=It();l=l===void 0?null:l;var f=h.memoizedState.inst;rt!==null&&l!==null&&Kd(l,rt.memoizedState.deps)?h.memoizedState=Ka(r,f,a,l):(Pe.flags|=t,h.memoizedState=Ka(1|r,f,a,l))}function uy(t,r){wu(8390656,8,t,r)}function hy(t,r){Tl(2048,8,t,r)}function dy(t,r){return Tl(4,2,t,r)}function fy(t,r){return Tl(4,4,t,r)}function my(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function gy(t,r,a){a=a!=null?a.concat([t]):null,Tl(4,4,my.bind(null,r,t),a)}function sf(){}function py(t,r){var a=It();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Kd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function yy(t,r){var a=It();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Kd(r,l[1]))return l[0];if(l=t(),ea){sn(!0);try{t()}finally{sn(!1)}}return a.memoizedState=[l,r],l}function af(t,r,a){return a===void 0||(Hi&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=E_(),Pe.lanes|=t,$i|=t,a)}function _y(t,r,a,l){return Nn(a,r)?a:Fa.current!==null?(t=af(t,a,l),Nn(t,r)||(Ht=!0),t):(Hi&42)===0?(Ht=!0,t.memoizedState=a):(t=E_(),Pe.lanes|=t,$i|=t,r)}function vy(t,r,a,l,h){var f=ee.p;ee.p=f!==0&&8>f?f:8;var E=z.T,w={};z.T=w,cf(t,!1,r,a);try{var C=h(),B=z.S;if(B!==null&&B(w,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Y=Fb(C,l);wl(t,r,Y,Mn(t))}else wl(t,r,l,Mn(t))}catch(W){wl(t,r,{then:function(){},status:"rejected",reason:W},Mn())}finally{ee.p=f,z.T=E}}function Xb(){}function of(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=Ey(t).queue;vy(t,h,r,te,a===null?Xb:function(){return Ty(t),a(l)})}function Ey(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:te},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Ty(t){var r=Ey(t).next.queue;wl(t,r,{},Mn())}function lf(){return an(zl)}function wy(){return It().memoizedState}function by(){return It().memoizedState}function $b(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Mn();t=qi(a);var l=Bi(r,t,a);l!==null&&(Vn(l,r,a),pl(l,r,a)),r={cache:jd()},t.payload=r;return}r=r.return}}function Wb(t,r,a){var l=Mn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},bu(t)?Sy(r,a):(a=Rd(t,r,a,l),a!==null&&(Vn(a,t,l),xy(a,r,l)))}function Ay(t,r,a){var l=Mn();wl(t,r,a,l)}function wl(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(bu(t))Sy(r,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var E=r.lastRenderedState,w=f(E,a);if(h.hasEagerState=!0,h.eagerState=w,Nn(w,E))return au(t,r,h,0),lt===null&&su(),!1}catch{}finally{}if(a=Rd(t,r,h,l),a!==null)return Vn(a,t,l),xy(a,r,l),!0}return!1}function cf(t,r,a,l){if(l={lane:2,revertLane:qf(),action:l,hasEagerState:!1,eagerState:null,next:null},bu(t)){if(r)throw Error(s(479))}else r=Rd(t,a,l,2),r!==null&&Vn(r,t,2)}function bu(t){var r=t.alternate;return t===Pe||r!==null&&r===Pe}function Sy(t,r){Ga=yu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function xy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Fo(t,a)}}var Au={readContext:an,use:vu,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt},Ry={readContext:an,use:vu,useCallback:function(t,r){return Tn().memoizedState=[t,r===void 0?null:r],t},useContext:an,useEffect:uy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,wu(4194308,4,my.bind(null,r,t),a)},useLayoutEffect:function(t,r){return wu(4194308,4,t,r)},useInsertionEffect:function(t,r){wu(4,2,t,r)},useMemo:function(t,r){var a=Tn();r=r===void 0?null:r;var l=t();if(ea){sn(!0);try{t()}finally{sn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Tn();if(a!==void 0){var h=a(r);if(ea){sn(!0);try{a(r)}finally{sn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=Wb.bind(null,Pe,t),[l.memoizedState,t]},useRef:function(t){var r=Tn();return t={current:t},r.memoizedState=t},useState:function(t){t=nf(t);var r=t.queue,a=Ay.bind(null,Pe,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:sf,useDeferredValue:function(t,r){var a=Tn();return af(a,t,r)},useTransition:function(){var t=nf(!1);return t=vy.bind(null,Pe,t.queue,!0,!1),Tn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Pe,h=Tn();if(Xe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),lt===null)throw Error(s(349));(He&124)!==0||Yp(l,r,a)}h.memoizedState=a;var f={value:a,getSnapshot:r};return h.queue=f,uy($p.bind(null,l,f,t),[t]),l.flags|=2048,Ka(9,Tu(),Xp.bind(null,l,f,a,r),null),a},useId:function(){var t=Tn(),r=lt.identifierPrefix;if(Xe){var a=ai,l=si;a=(l&~(1<<32-zt(l)-1)).toString(32)+a,r=""+r+"R"+a,a=_u++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=Gb++,r=""+r+"r"+a.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:lf,useFormState:sy,useActionState:sy,useOptimistic:function(t){var r=Tn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=cf.bind(null,Pe,!0,a),a.dispatch=r,[t,r]},useMemoCache:Jd,useCacheRefresh:function(){return Tn().memoizedState=$b.bind(null,Pe)}},Iy={readContext:an,use:vu,useCallback:py,useContext:an,useEffect:hy,useImperativeHandle:gy,useInsertionEffect:dy,useLayoutEffect:fy,useMemo:yy,useReducer:Eu,useRef:cy,useState:function(){return Eu(ci)},useDebugValue:sf,useDeferredValue:function(t,r){var a=It();return _y(a,rt.memoizedState,t,r)},useTransition:function(){var t=Eu(ci)[0],r=It().memoizedState;return[typeof t=="boolean"?t:El(t),r]},useSyncExternalStore:Kp,useId:wy,useHostTransitionStatus:lf,useFormState:ay,useActionState:ay,useOptimistic:function(t,r){var a=It();return Jp(a,rt,t,r)},useMemoCache:Jd,useCacheRefresh:by},Zb={readContext:an,use:vu,useCallback:py,useContext:an,useEffect:hy,useImperativeHandle:gy,useInsertionEffect:dy,useLayoutEffect:fy,useMemo:yy,useReducer:tf,useRef:cy,useState:function(){return tf(ci)},useDebugValue:sf,useDeferredValue:function(t,r){var a=It();return rt===null?af(a,t,r):_y(a,rt.memoizedState,t,r)},useTransition:function(){var t=tf(ci)[0],r=It().memoizedState;return[typeof t=="boolean"?t:El(t),r]},useSyncExternalStore:Kp,useId:wy,useHostTransitionStatus:lf,useFormState:ly,useActionState:ly,useOptimistic:function(t,r){var a=It();return rt!==null?Jp(a,rt,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Jd,useCacheRefresh:by},Ya=null,bl=0;function Su(t){var r=bl;return bl+=1,Ya===null&&(Ya=[]),Up(Ya,t,r)}function Al(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function xu(t,r){throw r.$$typeof===b?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Ny(t){var r=t._init;return r(t._payload)}function Cy(t){function r(L,V){if(t){var q=L.deletions;q===null?(L.deletions=[V],L.flags|=16):q.push(V)}}function a(L,V){if(!t)return null;for(;V!==null;)r(L,V),V=V.sibling;return null}function l(L){for(var V=new Map;L!==null;)L.key!==null?V.set(L.key,L):V.set(L.index,L),L=L.sibling;return V}function h(L,V){return L=ii(L,V),L.index=0,L.sibling=null,L}function f(L,V,q){return L.index=q,t?(q=L.alternate,q!==null?(q=q.index,q<V?(L.flags|=67108866,V):q):(L.flags|=67108866,V)):(L.flags|=1048576,V)}function E(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function w(L,V,q,$){return V===null||V.tag!==6?(V=Nd(q,L.mode,$),V.return=L,V):(V=h(V,q),V.return=L,V)}function C(L,V,q,$){var ge=q.type;return ge===k?Y(L,V,q.props.children,$,q.key):V!==null&&(V.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===x&&Ny(ge)===V.type)?(V=h(V,q.props),Al(V,q),V.return=L,V):(V=lu(q.type,q.key,q.props,null,L.mode,$),Al(V,q),V.return=L,V)}function B(L,V,q,$){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=Cd(q,L.mode,$),V.return=L,V):(V=h(V,q.children||[]),V.return=L,V)}function Y(L,V,q,$,ge){return V===null||V.tag!==7?(V=Qs(q,L.mode,$,ge),V.return=L,V):(V=h(V,q),V.return=L,V)}function W(L,V,q){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Nd(""+V,L.mode,q),V.return=L,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return q=lu(V.type,V.key,V.props,null,L.mode,q),Al(q,V),q.return=L,q;case j:return V=Cd(V,L.mode,q),V.return=L,V;case x:var $=V._init;return V=$(V._payload),W(L,V,q)}if(Ie(V)||O(V))return V=Qs(V,L.mode,q,null),V.return=L,V;if(typeof V.then=="function")return W(L,Su(V),q);if(V.$$typeof===re)return W(L,du(L,V),q);xu(L,V)}return null}function F(L,V,q,$){var ge=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ge!==null?null:w(L,V,""+q,$);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return q.key===ge?C(L,V,q,$):null;case j:return q.key===ge?B(L,V,q,$):null;case x:return ge=q._init,q=ge(q._payload),F(L,V,q,$)}if(Ie(q)||O(q))return ge!==null?null:Y(L,V,q,$,null);if(typeof q.then=="function")return F(L,V,Su(q),$);if(q.$$typeof===re)return F(L,V,du(L,q),$);xu(L,q)}return null}function G(L,V,q,$,ge){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return L=L.get(q)||null,w(V,L,""+$,ge);if(typeof $=="object"&&$!==null){switch($.$$typeof){case S:return L=L.get($.key===null?q:$.key)||null,C(V,L,$,ge);case j:return L=L.get($.key===null?q:$.key)||null,B(V,L,$,ge);case x:var Oe=$._init;return $=Oe($._payload),G(L,V,q,$,ge)}if(Ie($)||O($))return L=L.get(q)||null,Y(V,L,$,ge,null);if(typeof $.then=="function")return G(L,V,q,Su($),ge);if($.$$typeof===re)return G(L,V,q,du(V,$),ge);xu(V,$)}return null}function Re(L,V,q,$){for(var ge=null,Oe=null,_e=V,be=V=0,Gt=null;_e!==null&&be<q.length;be++){_e.index>be?(Gt=_e,_e=null):Gt=_e.sibling;var Ke=F(L,_e,q[be],$);if(Ke===null){_e===null&&(_e=Gt);break}t&&_e&&Ke.alternate===null&&r(L,_e),V=f(Ke,V,be),Oe===null?ge=Ke:Oe.sibling=Ke,Oe=Ke,_e=Gt}if(be===q.length)return a(L,_e),Xe&&Ys(L,be),ge;if(_e===null){for(;be<q.length;be++)_e=W(L,q[be],$),_e!==null&&(V=f(_e,V,be),Oe===null?ge=_e:Oe.sibling=_e,Oe=_e);return Xe&&Ys(L,be),ge}for(_e=l(_e);be<q.length;be++)Gt=G(_e,L,be,q[be],$),Gt!==null&&(t&&Gt.alternate!==null&&_e.delete(Gt.key===null?be:Gt.key),V=f(Gt,V,be),Oe===null?ge=Gt:Oe.sibling=Gt,Oe=Gt);return t&&_e.forEach(function(ss){return r(L,ss)}),Xe&&Ys(L,be),ge}function we(L,V,q,$){if(q==null)throw Error(s(151));for(var ge=null,Oe=null,_e=V,be=V=0,Gt=null,Ke=q.next();_e!==null&&!Ke.done;be++,Ke=q.next()){_e.index>be?(Gt=_e,_e=null):Gt=_e.sibling;var ss=F(L,_e,Ke.value,$);if(ss===null){_e===null&&(_e=Gt);break}t&&_e&&ss.alternate===null&&r(L,_e),V=f(ss,V,be),Oe===null?ge=ss:Oe.sibling=ss,Oe=ss,_e=Gt}if(Ke.done)return a(L,_e),Xe&&Ys(L,be),ge;if(_e===null){for(;!Ke.done;be++,Ke=q.next())Ke=W(L,Ke.value,$),Ke!==null&&(V=f(Ke,V,be),Oe===null?ge=Ke:Oe.sibling=Ke,Oe=Ke);return Xe&&Ys(L,be),ge}for(_e=l(_e);!Ke.done;be++,Ke=q.next())Ke=G(_e,L,be,Ke.value,$),Ke!==null&&(t&&Ke.alternate!==null&&_e.delete(Ke.key===null?be:Ke.key),V=f(Ke,V,be),Oe===null?ge=Ke:Oe.sibling=Ke,Oe=Ke);return t&&_e.forEach(function(JA){return r(L,JA)}),Xe&&Ys(L,be),ge}function st(L,V,q,$){if(typeof q=="object"&&q!==null&&q.type===k&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case S:e:{for(var ge=q.key;V!==null;){if(V.key===ge){if(ge=q.type,ge===k){if(V.tag===7){a(L,V.sibling),$=h(V,q.props.children),$.return=L,L=$;break e}}else if(V.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===x&&Ny(ge)===V.type){a(L,V.sibling),$=h(V,q.props),Al($,q),$.return=L,L=$;break e}a(L,V);break}else r(L,V);V=V.sibling}q.type===k?($=Qs(q.props.children,L.mode,$,q.key),$.return=L,L=$):($=lu(q.type,q.key,q.props,null,L.mode,$),Al($,q),$.return=L,L=$)}return E(L);case j:e:{for(ge=q.key;V!==null;){if(V.key===ge)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){a(L,V.sibling),$=h(V,q.children||[]),$.return=L,L=$;break e}else{a(L,V);break}else r(L,V);V=V.sibling}$=Cd(q,L.mode,$),$.return=L,L=$}return E(L);case x:return ge=q._init,q=ge(q._payload),st(L,V,q,$)}if(Ie(q))return Re(L,V,q,$);if(O(q)){if(ge=O(q),typeof ge!="function")throw Error(s(150));return q=ge.call(q),we(L,V,q,$)}if(typeof q.then=="function")return st(L,V,Su(q),$);if(q.$$typeof===re)return st(L,V,du(L,q),$);xu(L,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,V!==null&&V.tag===6?(a(L,V.sibling),$=h(V,q),$.return=L,L=$):(a(L,V),$=Nd(q,L.mode,$),$.return=L,L=$),E(L)):a(L,V)}return function(L,V,q,$){try{bl=0;var ge=st(L,V,q,$);return Ya=null,ge}catch(_e){if(_e===ml||_e===mu)throw _e;var Oe=Cn(29,_e,null,L.mode);return Oe.lanes=$,Oe.return=L,Oe}finally{}}}var Xa=Cy(!0),Dy=Cy(!1),$n=Z(null),Sr=null;function Fi(t){var r=t.alternate;ie(Lt,Lt.current&1),ie($n,t),Sr===null&&(r===null||Fa.current!==null||r.memoizedState!==null)&&(Sr=t)}function Py(t){if(t.tag===22){if(ie(Lt,Lt.current),ie($n,t),Sr===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Sr=t)}}else Gi()}function Gi(){ie(Lt,Lt.current),ie($n,$n.current)}function ui(t){ce($n),Sr===t&&(Sr=null),ce(Lt)}var Lt=Z(0);function Ru(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Jf(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function uf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var hf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Mn(),h=qi(l);h.payload=r,a!=null&&(h.callback=a),r=Bi(t,h,l),r!==null&&(Vn(r,t,l),pl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Mn(),h=qi(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Bi(t,h,l),r!==null&&(Vn(r,t,l),pl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Mn(),l=qi(a);l.tag=2,r!=null&&(l.callback=r),r=Bi(t,l,a),r!==null&&(Vn(r,t,a),pl(r,t,a))}};function Oy(t,r,a,l,h,f,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,E):r.prototype&&r.prototype.isPureReactComponent?!al(a,l)||!al(h,f):!0}function My(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&hf.enqueueReplaceState(r,r.state,null)}function ta(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Iu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Vy(t){Iu(t)}function ky(t){console.error(t)}function jy(t){Iu(t)}function Nu(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Ly(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function df(t,r,a){return a=qi(a),a.tag=3,a.payload={element:null},a.callback=function(){Nu(t,r)},a}function Uy(t){return t=qi(t),t.tag=3,t}function zy(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){Ly(r,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){Ly(r,a,l),typeof h!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function Jb(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&hl(r,a,h,!0),a=$n.current,a!==null){switch(a.tag){case 13:return Sr===null?kf():a.alternate===null&&yt===0&&(yt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===zd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Lf(t,l,h)),!1;case 22:return a.flags|=65536,l===zd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Lf(t,l,h)),!1}throw Error(s(435,a.tag))}return Lf(t,l,h),kf(),!1}if(Xe)return r=$n.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Od&&(t=Error(s(422),{cause:l}),ul(Qn(t,a)))):(l!==Od&&(r=Error(s(423),{cause:l}),ul(Qn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Qn(l,a),h=df(t.stateNode,l,h),Hd(t,h),yt!==4&&(yt=2)),!1;var f=Error(s(520),{cause:l});if(f=Qn(f,a),Dl===null?Dl=[f]:Dl.push(f),yt!==4&&(yt=2),r===null)return!0;l=Qn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=df(a.stateNode,l,t),Hd(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Wi===null||!Wi.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Uy(h),zy(h,t,a,l),Hd(a,h),!1}a=a.return}while(a!==null);return!1}var qy=Error(s(461)),Ht=!1;function Wt(t,r,a,l){r.child=t===null?Dy(r,null,a,l):Xa(r,t.child,a,l)}function By(t,r,a,l,h){a=a.render;var f=r.ref;if("ref"in l){var E={};for(var w in l)w!=="ref"&&(E[w]=l[w])}else E=l;return Zs(r),l=Yd(t,r,a,E,f,h),w=Xd(),t!==null&&!Ht?($d(t,r,h),hi(t,r,h)):(Xe&&w&&Dd(r),r.flags|=1,Wt(t,r,l,h),r.child)}function Hy(t,r,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!Id(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,Fy(t,r,f,l,h)):(t=lu(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!Ef(t,h)){var E=f.memoizedProps;if(a=a.compare,a=a!==null?a:al,a(E,l)&&t.ref===r.ref)return hi(t,r,h)}return r.flags|=1,t=ii(f,l),t.ref=r.ref,t.return=r,r.child=t}function Fy(t,r,a,l,h){if(t!==null){var f=t.memoizedProps;if(al(f,l)&&t.ref===r.ref)if(Ht=!1,r.pendingProps=l=f,Ef(t,h))(t.flags&131072)!==0&&(Ht=!0);else return r.lanes=t.lanes,hi(t,r,h)}return ff(t,r,a,l,h)}function Gy(t,r,a){var l=r.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=r.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;r.childLanes=f&~l}else r.childLanes=0,r.child=null;return Qy(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&fu(r,f!==null?f.cachePool:null),f!==null?Fp(r,f):Gd(),Py(r);else return r.lanes=r.childLanes=536870912,Qy(t,r,f!==null?f.baseLanes|a:a,a)}else f!==null?(fu(r,f.cachePool),Fp(r,f),Gi(),r.memoizedState=null):(t!==null&&fu(r,null),Gd(),Gi());return Wt(t,r,h,a),r.child}function Qy(t,r,a,l){var h=Ud();return h=h===null?null:{parent:jt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&fu(r,null),Gd(),Py(r),t!==null&&hl(t,r,l,!0),null}function Cu(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function ff(t,r,a,l,h){return Zs(r),a=Yd(t,r,a,l,void 0,h),l=Xd(),t!==null&&!Ht?($d(t,r,h),hi(t,r,h)):(Xe&&l&&Dd(r),r.flags|=1,Wt(t,r,a,h),r.child)}function Ky(t,r,a,l,h,f){return Zs(r),r.updateQueue=null,a=Qp(r,l,a,h),Gp(t),l=Xd(),t!==null&&!Ht?($d(t,r,f),hi(t,r,f)):(Xe&&l&&Dd(r),r.flags|=1,Wt(t,r,a,f),r.child)}function Yy(t,r,a,l,h){if(Zs(r),r.stateNode===null){var f=Ua,E=a.contextType;typeof E=="object"&&E!==null&&(f=an(E)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=hf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},qd(r),E=a.contextType,f.context=typeof E=="object"&&E!==null?an(E):Ua,f.state=r.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(uf(r,a,E,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&hf.enqueueReplaceState(f,f.state,null),_l(r,l,f,h),yl(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var w=r.memoizedProps,C=ta(a,w);f.props=C;var B=f.context,Y=a.contextType;E=Ua,typeof Y=="object"&&Y!==null&&(E=an(Y));var W=a.getDerivedStateFromProps;Y=typeof W=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,Y||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||B!==E)&&My(r,f,l,E),zi=!1;var F=r.memoizedState;f.state=F,_l(r,l,f,h),yl(),B=r.memoizedState,w||F!==B||zi?(typeof W=="function"&&(uf(r,a,W,l),B=r.memoizedState),(C=zi||Oy(r,a,C,l,F,B,E))?(Y||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=B),f.props=l,f.state=B,f.context=E,l=C):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,Bd(t,r),E=r.memoizedProps,Y=ta(a,E),f.props=Y,W=r.pendingProps,F=f.context,B=a.contextType,C=Ua,typeof B=="object"&&B!==null&&(C=an(B)),w=a.getDerivedStateFromProps,(B=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==W||F!==C)&&My(r,f,l,C),zi=!1,F=r.memoizedState,f.state=F,_l(r,l,f,h),yl();var G=r.memoizedState;E!==W||F!==G||zi||t!==null&&t.dependencies!==null&&hu(t.dependencies)?(typeof w=="function"&&(uf(r,a,w,l),G=r.memoizedState),(Y=zi||Oy(r,a,Y,l,F,G,C)||t!==null&&t.dependencies!==null&&hu(t.dependencies))?(B||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,G,C),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,G,C)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&F===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&F===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=G),f.props=l,f.state=G,f.context=C,l=Y):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&F===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&F===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,Cu(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=Xa(r,t.child,null,h),r.child=Xa(r,null,a,h)):Wt(t,r,a,h),r.memoizedState=f.state,t=r.child):t=hi(t,r,h),t}function Xy(t,r,a,l){return cl(),r.flags|=256,Wt(t,r,a,l),r.child}var mf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gf(t){return{baseLanes:t,cachePool:kp()}}function pf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Wn),t}function $y(t,r,a){var l=r.pendingProps,h=!1,f=(r.flags&128)!==0,E;if((E=f)||(E=t!==null&&t.memoizedState===null?!1:(Lt.current&2)!==0),E&&(h=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,t===null){if(Xe){if(h?Fi(r):Gi(),Xe){var w=pt,C;if(C=w){e:{for(C=w,w=Ar;C.nodeType!==8;){if(!w){w=null;break e}if(C=or(C.nextSibling),C===null){w=null;break e}}w=C}w!==null?(r.memoizedState={dehydrated:w,treeContext:Ks!==null?{id:si,overflow:ai}:null,retryLane:536870912,hydrationErrors:null},C=Cn(18,null,null,0),C.stateNode=w,C.return=r,r.child=C,_n=r,pt=null,C=!0):C=!1}C||$s(r)}if(w=r.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return Jf(w)?r.lanes=32:r.lanes=536870912,null;ui(r)}return w=l.children,l=l.fallback,h?(Gi(),h=r.mode,w=Du({mode:"hidden",children:w},h),l=Qs(l,h,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,h=r.child,h.memoizedState=gf(a),h.childLanes=pf(t,E,a),r.memoizedState=mf,l):(Fi(r),yf(r,w))}if(C=t.memoizedState,C!==null&&(w=C.dehydrated,w!==null)){if(f)r.flags&256?(Fi(r),r.flags&=-257,r=_f(t,r,a)):r.memoizedState!==null?(Gi(),r.child=t.child,r.flags|=128,r=null):(Gi(),h=l.fallback,w=r.mode,l=Du({mode:"visible",children:l.children},w),h=Qs(h,w,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,Xa(r,t.child,null,a),l=r.child,l.memoizedState=gf(a),l.childLanes=pf(t,E,a),r.memoizedState=mf,r=h);else if(Fi(r),Jf(w)){if(E=w.nextSibling&&w.nextSibling.dataset,E)var B=E.dgst;E=B,l=Error(s(419)),l.stack="",l.digest=E,ul({value:l,source:null,stack:null}),r=_f(t,r,a)}else if(Ht||hl(t,r,a,!1),E=(a&t.childLanes)!==0,Ht||E){if(E=lt,E!==null&&(l=a&-a,l=(l&42)!==0?1:Pi(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==C.retryLane))throw C.retryLane=l,La(t,l),Vn(E,t,l),qy;w.data==="$?"||kf(),r=_f(t,r,a)}else w.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=C.treeContext,pt=or(w.nextSibling),_n=r,Xe=!0,Xs=null,Ar=!1,t!==null&&(Yn[Xn++]=si,Yn[Xn++]=ai,Yn[Xn++]=Ks,si=t.id,ai=t.overflow,Ks=r),r=yf(r,l.children),r.flags|=4096);return r}return h?(Gi(),h=l.fallback,w=r.mode,C=t.child,B=C.sibling,l=ii(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,B!==null?h=ii(B,h):(h=Qs(h,w,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,w=t.child.memoizedState,w===null?w=gf(a):(C=w.cachePool,C!==null?(B=jt._currentValue,C=C.parent!==B?{parent:B,pool:B}:C):C=kp(),w={baseLanes:w.baseLanes|a,cachePool:C}),h.memoizedState=w,h.childLanes=pf(t,E,a),r.memoizedState=mf,l):(Fi(r),a=t.child,t=a.sibling,a=ii(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(E=r.deletions,E===null?(r.deletions=[t],r.flags|=16):E.push(t)),r.child=a,r.memoizedState=null,a)}function yf(t,r){return r=Du({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Du(t,r){return t=Cn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function _f(t,r,a){return Xa(r,t.child,null,a),t=yf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Wy(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Vd(t.return,r,a)}function vf(t,r,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function Zy(t,r,a){var l=r.pendingProps,h=l.revealOrder,f=l.tail;if(Wt(t,r,l.children,a),l=Lt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wy(t,a,r);else if(t.tag===19)Wy(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ie(Lt,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&Ru(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),vf(r,!1,h,a,f);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Ru(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}vf(r,!0,a,null,f);break;case"together":vf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function hi(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),$i|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(hl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=ii(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=ii(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Ef(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&hu(t)))}function eA(t,r,a){switch(r.tag){case 3:tt(r,r.stateNode.containerInfo),Ui(r,jt,t.memoizedState.cache),cl();break;case 27:case 5:zn(r);break;case 4:tt(r,r.stateNode.containerInfo);break;case 10:Ui(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Fi(r),r.flags|=128,null):(a&r.child.childLanes)!==0?$y(t,r,a):(Fi(r),t=hi(t,r,a),t!==null?t.sibling:null);Fi(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(hl(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return Zy(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(Lt,Lt.current),l)break;return null;case 22:case 23:return r.lanes=0,Gy(t,r,a);case 24:Ui(r,jt,t.memoizedState.cache)}return hi(t,r,a)}function Jy(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ht=!0;else{if(!Ef(t,a)&&(r.flags&128)===0)return Ht=!1,eA(t,r,a);Ht=(t.flags&131072)!==0}else Ht=!1,Xe&&(r.flags&1048576)!==0&&Np(r,uu,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")Id(l)?(t=ta(l,t),r.tag=1,r=Yy(null,r,l,t,a)):(r.tag=0,r=ff(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===fe){r.tag=11,r=By(null,r,l,t,a);break e}else if(h===R){r.tag=14,r=Hy(null,r,l,t,a);break e}}throw r=ze(l)||l,Error(s(306,r,""))}}return r;case 0:return ff(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=ta(l,r.pendingProps),Yy(t,r,l,h,a);case 3:e:{if(tt(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;h=f.element,Bd(t,r),_l(r,l,null,a);var E=r.memoizedState;if(l=E.cache,Ui(r,jt,l),l!==f.cache&&kd(r,[jt],a,!0),yl(),l=E.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=Xy(t,r,l,a);break e}else if(l!==h){h=Qn(Error(s(424)),r),ul(h),r=Xy(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(pt=or(t.firstChild),_n=r,Xe=!0,Xs=null,Ar=!0,a=Dy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(cl(),l===h){r=hi(t,r,a);break e}Wt(t,r,l,a)}r=r.child}return r;case 26:return Cu(t,r),t===null?(a=rv(r.type,null,r.pendingProps,null))?r.memoizedState=a:Xe||(a=r.type,t=r.pendingProps,l=Gu(xe.current).createElement(a),l[Mt]=r,l[St]=t,Jt(l,a,t),Tt(l),r.stateNode=l):r.memoizedState=rv(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return zn(r),t===null&&Xe&&(l=r.stateNode=ev(r.type,r.pendingProps,xe.current),_n=r,Ar=!0,h=pt,es(r.type)?(em=h,pt=or(l.firstChild)):pt=h),Wt(t,r,r.pendingProps.children,a),Cu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Xe&&((h=l=pt)&&(l=IA(l,r.type,r.pendingProps,Ar),l!==null?(r.stateNode=l,_n=r,pt=or(l.firstChild),Ar=!1,h=!0):h=!1),h||$s(r)),zn(r),h=r.type,f=r.pendingProps,E=t!==null?t.memoizedProps:null,l=f.children,$f(h,f)?l=null:E!==null&&$f(h,E)&&(r.flags|=32),r.memoizedState!==null&&(h=Yd(t,r,Qb,null,null,a),zl._currentValue=h),Cu(t,r),Wt(t,r,l,a),r.child;case 6:return t===null&&Xe&&((t=a=pt)&&(a=NA(a,r.pendingProps,Ar),a!==null?(r.stateNode=a,_n=r,pt=null,t=!0):t=!1),t||$s(r)),null;case 13:return $y(t,r,a);case 4:return tt(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Xa(r,null,l,a):Wt(t,r,l,a),r.child;case 11:return By(t,r,r.type,r.pendingProps,a);case 7:return Wt(t,r,r.pendingProps,a),r.child;case 8:return Wt(t,r,r.pendingProps.children,a),r.child;case 12:return Wt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Ui(r,r.type,l.value),Wt(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Zs(r),h=an(h),l=l(h),r.flags|=1,Wt(t,r,l,a),r.child;case 14:return Hy(t,r,r.type,r.pendingProps,a);case 15:return Fy(t,r,r.type,r.pendingProps,a);case 19:return Zy(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Du(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=ii(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return Gy(t,r,a);case 24:return Zs(r),l=an(jt),t===null?(h=Ud(),h===null&&(h=lt,f=jd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),r.memoizedState={parent:l,cache:h},qd(r),Ui(r,jt,h)):((t.lanes&a)!==0&&(Bd(t,r),_l(r,null,null,a),yl()),h=t.memoizedState,f=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Ui(r,jt,l)):(l=f.cache,Ui(r,jt,l),l!==h.cache&&kd(r,[jt],a,!0))),Wt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function di(t){t.flags|=4}function e_(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!lv(r)){if(r=$n.current,r!==null&&((He&4194048)===He?Sr!==null:(He&62914560)!==He&&(He&536870912)===0||r!==Sr))throw gl=zd,jp;t.flags|=8192}}function Pu(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Ot():536870912,t.lanes|=r,Ja|=r)}function Sl(t,r){if(!Xe)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function mt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function tA(t,r,a){var l=r.pendingProps;switch(Pd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(r),null;case 1:return mt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),li(jt),Un(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ll(r)?di(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Pp())),mt(r),null;case 26:return a=r.memoizedState,t===null?(di(r),a!==null?(mt(r),e_(r,a)):(mt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(di(r),mt(r),e_(r,a)):(mt(r),r.flags&=-16777217):(t.memoizedProps!==l&&di(r),mt(r),r.flags&=-16777217),null;case 27:nr(r),a=xe.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&di(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return mt(r),null}t=ve.current,ll(r)?Cp(r):(t=ev(h,l,a),r.stateNode=t,di(r))}return mt(r),null;case 5:if(nr(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&di(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return mt(r),null}if(t=ve.current,ll(r))Cp(r);else{switch(h=Gu(xe.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Mt]=r,t[St]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(Jt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&di(r)}}return mt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&di(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=xe.current,ll(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=_n,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Mt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||K_(t.nodeValue,a)),t||$s(r)}else t=Gu(t).createTextNode(l),t[Mt]=r,r.stateNode=t}return mt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=ll(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Mt]=r}else cl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),h=!1}else h=Pp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(ui(r),r):(ui(r),null)}if(ui(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Pu(r,r.updateQueue),mt(r),null;case 4:return Un(),t===null&&Gf(r.stateNode.containerInfo),mt(r),null;case 10:return li(r.type),mt(r),null;case 19:if(ce(Lt),h=r.memoizedState,h===null)return mt(r),null;if(l=(r.flags&128)!==0,f=h.rendering,f===null)if(l)Sl(h,!1);else{if(yt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=Ru(t),f!==null){for(r.flags|=128,Sl(h,!1),t=f.updateQueue,r.updateQueue=t,Pu(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Ip(a,t),a=a.sibling;return ie(Lt,Lt.current&1|2),r.child}t=t.sibling}h.tail!==null&&En()>Vu&&(r.flags|=128,l=!0,Sl(h,!1),r.lanes=4194304)}else{if(!l)if(t=Ru(f),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Pu(r,t),Sl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Xe)return mt(r),null}else 2*En()-h.renderingStartTime>Vu&&a!==536870912&&(r.flags|=128,l=!0,Sl(h,!1),r.lanes=4194304);h.isBackwards?(f.sibling=r.child,r.child=f):(t=h.last,t!==null?t.sibling=f:r.child=f,h.last=f)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=En(),r.sibling=null,t=Lt.current,ie(Lt,l?t&1|2:t&1),r):(mt(r),null);case 22:case 23:return ui(r),Qd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(mt(r),r.subtreeFlags&6&&(r.flags|=8192)):mt(r),a=r.updateQueue,a!==null&&Pu(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&ce(Js),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),li(jt),mt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function nA(t,r){switch(Pd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return li(jt),Un(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return nr(r),null;case 13:if(ui(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));cl()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ce(Lt),null;case 4:return Un(),null;case 10:return li(r.type),null;case 22:case 23:return ui(r),Qd(),t!==null&&ce(Js),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return li(jt),null;case 25:return null;default:return null}}function t_(t,r){switch(Pd(r),r.tag){case 3:li(jt),Un();break;case 26:case 27:case 5:nr(r);break;case 4:Un();break;case 13:ui(r);break;case 19:ce(Lt);break;case 10:li(r.type);break;case 22:case 23:ui(r),Qd(),t!==null&&ce(Js);break;case 24:li(jt)}}function xl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,E=a.inst;l=f(),E.destroy=l}a=a.next}while(a!==h)}}catch(w){ot(r,r.return,w)}}function Qi(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var E=l.inst,w=E.destroy;if(w!==void 0){E.destroy=void 0,h=r;var C=a,B=w;try{B()}catch(Y){ot(h,C,Y)}}}l=l.next}while(l!==f)}}catch(Y){ot(r,r.return,Y)}}function n_(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Hp(r,a)}catch(l){ot(t,t.return,l)}}}function r_(t,r,a){a.props=ta(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ot(t,r,l)}}function Rl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){ot(t,r,h)}}function xr(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ot(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ot(t,r,h)}else a.current=null}function i_(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ot(t,t.return,h)}}function Tf(t,r,a){try{var l=t.stateNode;bA(l,t.type,a,r),l[St]=r}catch(h){ot(t,t.return,h)}}function s_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&es(t.type)||t.tag===4}function wf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||s_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&es(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Fu));else if(l!==4&&(l===27&&es(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(bf(t,r,a),t=t.sibling;t!==null;)bf(t,r,a),t=t.sibling}function Ou(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&es(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Ou(t,r,a),t=t.sibling;t!==null;)Ou(t,r,a),t=t.sibling}function a_(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Jt(r,l,a),r[Mt]=t,r[St]=a}catch(f){ot(t,t.return,f)}}var fi=!1,bt=!1,Af=!1,o_=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function rA(t,r){if(t=t.containerInfo,Yf=Wu,t=_p(t),Td(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var E=0,w=-1,C=-1,B=0,Y=0,W=t,F=null;t:for(;;){for(var G;W!==a||h!==0&&W.nodeType!==3||(w=E+h),W!==f||l!==0&&W.nodeType!==3||(C=E+l),W.nodeType===3&&(E+=W.nodeValue.length),(G=W.firstChild)!==null;)F=W,W=G;for(;;){if(W===t)break t;if(F===a&&++B===h&&(w=E),F===f&&++Y===l&&(C=E),(G=W.nextSibling)!==null)break;W=F,F=W.parentNode}W=G}a=w===-1||C===-1?null:{start:w,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Xf={focusedElem:t,selectionRange:a},Wu=!1,Ft=r;Ft!==null;)if(r=Ft,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Ft=t;else for(;Ft!==null;){switch(r=Ft,f=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Re=ta(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Re,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(we){ot(a,a.return,we)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Zf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Zf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Ft=t;break}Ft=r.return}}function l_(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ki(t,a),l&4&&xl(5,a);break;case 1:if(Ki(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(E){ot(a,a.return,E)}else{var h=ta(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(E){ot(a,a.return,E)}}l&64&&n_(a),l&512&&Rl(a,a.return);break;case 3:if(Ki(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Hp(t,r)}catch(E){ot(a,a.return,E)}}break;case 27:r===null&&l&4&&a_(a);case 26:case 5:Ki(t,a),r===null&&l&4&&i_(a),l&512&&Rl(a,a.return);break;case 12:Ki(t,a);break;case 13:Ki(t,a),l&4&&h_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=dA.bind(null,a),CA(t,a))));break;case 22:if(l=a.memoizedState!==null||fi,!l){r=r!==null&&r.memoizedState!==null||bt,h=fi;var f=bt;fi=l,(bt=r)&&!f?Yi(t,a,(a.subtreeFlags&8772)!==0):Ki(t,a),fi=h,bt=f}break;case 30:break;default:Ki(t,a)}}function c_(t){var r=t.alternate;r!==null&&(t.alternate=null,c_(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Vi(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var dt=null,wn=!1;function mi(t,r,a){for(a=a.child;a!==null;)u_(t,r,a),a=a.sibling}function u_(t,r,a){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(ut,a)}catch{}switch(a.tag){case 26:bt||xr(a,r),mi(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:bt||xr(a,r);var l=dt,h=wn;es(a.type)&&(dt=a.stateNode,wn=!1),mi(t,r,a),kl(a.stateNode),dt=l,wn=h;break;case 5:bt||xr(a,r);case 6:if(l=dt,h=wn,dt=null,mi(t,r,a),dt=l,wn=h,dt!==null)if(wn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(f){ot(a,r,f)}else try{dt.removeChild(a.stateNode)}catch(f){ot(a,r,f)}break;case 18:dt!==null&&(wn?(t=dt,Z_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Fl(t)):Z_(dt,a.stateNode));break;case 4:l=dt,h=wn,dt=a.stateNode.containerInfo,wn=!0,mi(t,r,a),dt=l,wn=h;break;case 0:case 11:case 14:case 15:bt||Qi(2,a,r),bt||Qi(4,a,r),mi(t,r,a);break;case 1:bt||(xr(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&r_(a,r,l)),mi(t,r,a);break;case 21:mi(t,r,a);break;case 22:bt=(l=bt)||a.memoizedState!==null,mi(t,r,a),bt=l;break;default:mi(t,r,a)}}function h_(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Fl(t)}catch(a){ot(r,r.return,a)}}function iA(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new o_),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new o_),r;default:throw Error(s(435,t.tag))}}function Sf(t,r){var a=iA(t);r.forEach(function(l){var h=fA.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Dn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,E=r,w=E;e:for(;w!==null;){switch(w.tag){case 27:if(es(w.type)){dt=w.stateNode,wn=!1;break e}break;case 5:dt=w.stateNode,wn=!1;break e;case 3:case 4:dt=w.stateNode.containerInfo,wn=!0;break e}w=w.return}if(dt===null)throw Error(s(160));u_(f,E,h),dt=null,wn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)d_(r,t),r=r.sibling}var ar=null;function d_(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Dn(r,t),Pn(t),l&4&&(Qi(3,t,t.return),xl(3,t),Qi(5,t,t.return));break;case 1:Dn(r,t),Pn(t),l&512&&(bt||a===null||xr(a,a.return)),l&64&&fi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ar;if(Dn(r,t),Pn(t),l&512&&(bt||a===null||xr(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Cs]||f[Mt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Jt(f,l,a),f[Mt]=t,Tt(f),l=f;break e;case"link":var E=av("link","href",h).get(l+(a.href||""));if(E){for(var w=0;w<E.length;w++)if(f=E[w],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(w,1);break t}}f=h.createElement(l),Jt(f,l,a),h.head.appendChild(f);break;case"meta":if(E=av("meta","content",h).get(l+(a.content||""))){for(w=0;w<E.length;w++)if(f=E[w],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(w,1);break t}}f=h.createElement(l),Jt(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[Mt]=t,Tt(f),l=f}t.stateNode=l}else ov(h,t.type,t.stateNode);else t.stateNode=sv(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?ov(h,t.type,t.stateNode):sv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Tf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Dn(r,t),Pn(t),l&512&&(bt||a===null||xr(a,a.return)),a!==null&&l&4&&Tf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Dn(r,t),Pn(t),l&512&&(bt||a===null||xr(a,a.return)),t.flags&32){h=t.stateNode;try{Bn(h,"")}catch(G){ot(t,t.return,G)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Tf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Af=!0);break;case 6:if(Dn(r,t),Pn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(G){ot(t,t.return,G)}}break;case 3:if(Yu=null,h=ar,ar=Qu(r.containerInfo),Dn(r,t),ar=h,Pn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Fl(r.containerInfo)}catch(G){ot(t,t.return,G)}Af&&(Af=!1,f_(t));break;case 4:l=ar,ar=Qu(t.stateNode.containerInfo),Dn(r,t),Pn(t),ar=l;break;case 12:Dn(r,t),Pn(t);break;case 13:Dn(r,t),Pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Df=En()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Sf(t,l)));break;case 22:h=t.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,B=fi,Y=bt;if(fi=B||h,bt=Y||C,Dn(r,t),bt=Y,fi=B,Pn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||C||fi||bt||na(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){C=a=r;try{if(f=C.stateNode,h)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{w=C.stateNode;var W=C.memoizedProps.style,F=W!=null&&W.hasOwnProperty("display")?W.display:null;w.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(G){ot(C,C.return,G)}}}else if(r.tag===6){if(a===null){C=r;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(G){ot(C,C.return,G)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Sf(t,a))));break;case 19:Dn(r,t),Pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Sf(t,l)));break;case 30:break;case 21:break;default:Dn(r,t),Pn(t)}}function Pn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(s_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=wf(t);Ou(t,f,h);break;case 5:var E=a.stateNode;a.flags&32&&(Bn(E,""),a.flags&=-33);var w=wf(t);Ou(t,w,E);break;case 3:case 4:var C=a.stateNode.containerInfo,B=wf(t);bf(t,B,C);break;default:throw Error(s(161))}}catch(Y){ot(t,t.return,Y)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function f_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;f_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ki(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)l_(t,r.alternate,r),r=r.sibling}function na(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Qi(4,r,r.return),na(r);break;case 1:xr(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&r_(r,r.return,a),na(r);break;case 27:kl(r.stateNode);case 26:case 5:xr(r,r.return),na(r);break;case 22:r.memoizedState===null&&na(r);break;case 30:na(r);break;default:na(r)}t=t.sibling}}function Yi(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,f=r,E=f.flags;switch(f.tag){case 0:case 11:case 15:Yi(h,f,a),xl(4,f);break;case 1:if(Yi(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){ot(l,l.return,B)}if(l=f,h=l.updateQueue,h!==null){var w=l.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)Bp(C[h],w)}catch(B){ot(l,l.return,B)}}a&&E&64&&n_(f),Rl(f,f.return);break;case 27:a_(f);case 26:case 5:Yi(h,f,a),a&&l===null&&E&4&&i_(f),Rl(f,f.return);break;case 12:Yi(h,f,a);break;case 13:Yi(h,f,a),a&&E&4&&h_(h,f);break;case 22:f.memoizedState===null&&Yi(h,f,a),Rl(f,f.return);break;case 30:break;default:Yi(h,f,a)}r=r.sibling}}function xf(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&dl(a))}function Rf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&dl(t))}function Rr(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)m_(t,r,a,l),r=r.sibling}function m_(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Rr(t,r,a,l),h&2048&&xl(9,r);break;case 1:Rr(t,r,a,l);break;case 3:Rr(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&dl(t)));break;case 12:if(h&2048){Rr(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,E=f.id,w=f.onPostCommit;typeof w=="function"&&w(E,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){ot(r,r.return,C)}}else Rr(t,r,a,l);break;case 13:Rr(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,E=r.alternate,r.memoizedState!==null?f._visibility&2?Rr(t,r,a,l):Il(t,r):f._visibility&2?Rr(t,r,a,l):(f._visibility|=2,$a(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&xf(E,r);break;case 24:Rr(t,r,a,l),h&2048&&Rf(r.alternate,r);break;default:Rr(t,r,a,l)}}function $a(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var f=t,E=r,w=a,C=l,B=E.flags;switch(E.tag){case 0:case 11:case 15:$a(f,E,w,C,h),xl(8,E);break;case 23:break;case 22:var Y=E.stateNode;E.memoizedState!==null?Y._visibility&2?$a(f,E,w,C,h):Il(f,E):(Y._visibility|=2,$a(f,E,w,C,h)),h&&B&2048&&xf(E.alternate,E);break;case 24:$a(f,E,w,C,h),h&&B&2048&&Rf(E.alternate,E);break;default:$a(f,E,w,C,h)}r=r.sibling}}function Il(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:Il(a,l),h&2048&&xf(l.alternate,l);break;case 24:Il(a,l),h&2048&&Rf(l.alternate,l);break;default:Il(a,l)}r=r.sibling}}var Nl=8192;function Wa(t){if(t.subtreeFlags&Nl)for(t=t.child;t!==null;)g_(t),t=t.sibling}function g_(t){switch(t.tag){case 26:Wa(t),t.flags&Nl&&t.memoizedState!==null&&HA(ar,t.memoizedState,t.memoizedProps);break;case 5:Wa(t);break;case 3:case 4:var r=ar;ar=Qu(t.stateNode.containerInfo),Wa(t),ar=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Nl,Nl=16777216,Wa(t),Nl=r):Wa(t));break;default:Wa(t)}}function p_(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Cl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Ft=l,__(l,t)}p_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)y_(t),t=t.sibling}function y_(t){switch(t.tag){case 0:case 11:case 15:Cl(t),t.flags&2048&&Qi(9,t,t.return);break;case 3:Cl(t);break;case 12:Cl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Mu(t)):Cl(t);break;default:Cl(t)}}function Mu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Ft=l,__(l,t)}p_(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Qi(8,r,r.return),Mu(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Mu(r));break;default:Mu(r)}t=t.sibling}}function __(t,r){for(;Ft!==null;){var a=Ft;switch(a.tag){case 0:case 11:case 15:Qi(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:dl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ft=l;else e:for(a=t;Ft!==null;){l=Ft;var h=l.sibling,f=l.return;if(c_(l),l===a){Ft=null;break e}if(h!==null){h.return=f,Ft=h;break e}Ft=f}}}var sA={getCacheForType:function(t){var r=an(jt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},aA=typeof WeakMap=="function"?WeakMap:Map,We=0,lt=null,Ve=null,He=0,Ze=0,On=null,Xi=!1,Za=!1,If=!1,gi=0,yt=0,$i=0,ra=0,Nf=0,Wn=0,Ja=0,Dl=null,bn=null,Cf=!1,Df=0,Vu=1/0,ku=null,Wi=null,Zt=0,Zi=null,eo=null,to=0,Pf=0,Of=null,v_=null,Pl=0,Mf=null;function Mn(){if((We&2)!==0&&He!==0)return He&-He;if(z.T!==null){var t=Ba;return t!==0?t:qf()}return Oi()}function E_(){Wn===0&&(Wn=(He&536870912)===0||Xe?ye():536870912);var t=$n.current;return t!==null&&(t.flags|=32),Wn}function Vn(t,r,a){(t===lt&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)&&(no(t,0),Ji(t,He,Wn,!1)),Kr(t,a),((We&2)===0||t!==lt)&&(t===lt&&((We&2)===0&&(ra|=a),yt===4&&Ji(t,He,Wn,!1)),Ir(t))}function T_(t,r,a){if((We&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||Qr(t,r),h=l?cA(t,r):jf(t,r,!0),f=l;do{if(h===0){Za&&!l&&Ji(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!oA(a)){h=jf(t,r,!1),f=!1;continue}if(h===2){if(f=r,t.errorRecoveryDisabledLanes&f)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var w=t;h=Dl;var C=w.current.memoizedState.isDehydrated;if(C&&(no(w,E).flags|=256),E=jf(w,E,!1),E!==2){if(If&&!C){w.errorRecoveryDisabledLanes|=f,ra|=f,h=4;break e}f=bn,bn=h,f!==null&&(bn===null?bn=f:bn.push.apply(bn,f))}h=E}if(f=!1,h!==2)continue}}if(h===1){no(t,0),Ji(t,r,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Ji(l,r,Wn,!Xi);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=Df+300-En(),10<h)){if(Ji(l,r,Wn,!Xi),Di(l,0,!0)!==0)break e;l.timeoutHandle=$_(w_.bind(null,l,a,bn,ku,Cf,r,Wn,ra,Ja,Xi,f,2,-0,0),h);break e}w_(l,a,bn,ku,Cf,r,Wn,ra,Ja,Xi,f,0,-0,0)}}break}while(!0);Ir(t)}function w_(t,r,a,l,h,f,E,w,C,B,Y,W,F,G){if(t.timeoutHandle=-1,W=r.subtreeFlags,(W&8192||(W&16785408)===16785408)&&(Ul={stylesheets:null,count:0,unsuspend:BA},g_(r),W=FA(),W!==null)){t.cancelPendingCommit=W(N_.bind(null,t,r,f,a,l,h,E,w,C,Y,1,F,G)),Ji(t,f,E,!B);return}N_(t,r,f,a,l,h,E,w,C)}function oA(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!Nn(f(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ji(t,r,a,l){r&=~Nf,r&=~ra,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var f=31-zt(h),E=1<<f;l[f]=-1,h&=~E}a!==0&&fr(t,a,r)}function ju(){return(We&6)===0?(Ol(0),!1):!0}function Vf(){if(Ve!==null){if(Ze===0)var t=Ve.return;else t=Ve,oi=Ws=null,Wd(t),Ya=null,bl=0,t=Ve;for(;t!==null;)t_(t.alternate,t),t=t.return;Ve=null}}function no(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,SA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Vf(),lt=t,Ve=a=ii(t.current,null),He=r,Ze=0,On=null,Xi=!1,Za=Qr(t,r),If=!1,Ja=Wn=Nf=ra=$i=yt=0,bn=Dl=null,Cf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-zt(l),f=1<<h;r|=t[h],l&=~f}return gi=r,su(),a}function b_(t,r){Pe=null,z.H=Au,r===ml||r===mu?(r=zp(),Ze=3):r===jp?(r=zp(),Ze=4):Ze=r===qy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,On=r,Ve===null&&(yt=1,Nu(t,Qn(r,t.current)))}function A_(){var t=z.H;return z.H=Au,t===null?Au:t}function S_(){var t=z.A;return z.A=sA,t}function kf(){yt=4,Xi||(He&4194048)!==He&&$n.current!==null||(Za=!0),($i&134217727)===0&&(ra&134217727)===0||lt===null||Ji(lt,He,Wn,!1)}function jf(t,r,a){var l=We;We|=2;var h=A_(),f=S_();(lt!==t||He!==r)&&(ku=null,no(t,r)),r=!1;var E=yt;e:do try{if(Ze!==0&&Ve!==null){var w=Ve,C=On;switch(Ze){case 8:Vf(),E=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(r=!0);var B=Ze;if(Ze=0,On=null,ro(t,w,C,B),a&&Za){E=0;break e}break;default:B=Ze,Ze=0,On=null,ro(t,w,C,B)}}lA(),E=yt;break}catch(Y){b_(t,Y)}while(!0);return r&&t.shellSuspendCounter++,oi=Ws=null,We=l,z.H=h,z.A=f,Ve===null&&(lt=null,He=0,su()),E}function lA(){for(;Ve!==null;)x_(Ve)}function cA(t,r){var a=We;We|=2;var l=A_(),h=S_();lt!==t||He!==r?(ku=null,Vu=En()+500,no(t,r)):Za=Qr(t,r);e:do try{if(Ze!==0&&Ve!==null){r=Ve;var f=On;t:switch(Ze){case 1:Ze=0,On=null,ro(t,r,f,1);break;case 2:case 9:if(Lp(f)){Ze=0,On=null,R_(r);break}r=function(){Ze!==2&&Ze!==9||lt!==t||(Ze=7),Ir(t)},f.then(r,r);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Lp(f)?(Ze=0,On=null,R_(r)):(Ze=0,On=null,ro(t,r,f,7));break;case 5:var E=null;switch(Ve.tag){case 26:E=Ve.memoizedState;case 5:case 27:var w=Ve;if(!E||lv(E)){Ze=0,On=null;var C=w.sibling;if(C!==null)Ve=C;else{var B=w.return;B!==null?(Ve=B,Lu(B)):Ve=null}break t}}Ze=0,On=null,ro(t,r,f,5);break;case 6:Ze=0,On=null,ro(t,r,f,6);break;case 8:Vf(),yt=6;break e;default:throw Error(s(462))}}uA();break}catch(Y){b_(t,Y)}while(!0);return oi=Ws=null,z.H=l,z.A=h,We=a,Ve!==null?0:(lt=null,He=0,su(),yt)}function uA(){for(;Ve!==null&&!Ii();)x_(Ve)}function x_(t){var r=Jy(t.alternate,t,gi);t.memoizedProps=t.pendingProps,r===null?Lu(t):Ve=r}function R_(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Ky(a,r,r.pendingProps,r.type,void 0,He);break;case 11:r=Ky(a,r,r.pendingProps,r.type.render,r.ref,He);break;case 5:Wd(r);default:t_(a,r),r=Ve=Ip(r,gi),r=Jy(a,r,gi)}t.memoizedProps=t.pendingProps,r===null?Lu(t):Ve=r}function ro(t,r,a,l){oi=Ws=null,Wd(r),Ya=null,bl=0;var h=r.return;try{if(Jb(t,h,r,a,He)){yt=1,Nu(t,Qn(a,t.current)),Ve=null;return}}catch(f){if(h!==null)throw Ve=h,f;yt=1,Nu(t,Qn(a,t.current)),Ve=null;return}r.flags&32768?(Xe||l===1?t=!0:Za||(He&536870912)!==0?t=!1:(Xi=t=!0,(l===2||l===9||l===3||l===6)&&(l=$n.current,l!==null&&l.tag===13&&(l.flags|=16384))),I_(r,t)):Lu(r)}function Lu(t){var r=t;do{if((r.flags&32768)!==0){I_(r,Xi);return}t=r.return;var a=tA(r.alternate,r,gi);if(a!==null){Ve=a;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=t}while(r!==null);yt===0&&(yt=5)}function I_(t,r){do{var a=nA(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);yt=6,Ve=null}function N_(t,r,a,l,h,f,E,w,C){t.cancelPendingCommit=null;do Uu();while(Zt!==0);if((We&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=xd,Ho(t,a,f,E,w,C),t===lt&&(Ve=lt=null,He=0),eo=r,Zi=t,to=a,Pf=f,Of=h,v_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,mA(Br,function(){return M_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=z.T,z.T=null,h=ee.p,ee.p=2,E=We,We|=4;try{rA(t,r,a)}finally{We=E,ee.p=h,z.T=l}}Zt=1,C_(),D_(),P_()}}function C_(){if(Zt===1){Zt=0;var t=Zi,r=eo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=z.T,z.T=null;var l=ee.p;ee.p=2;var h=We;We|=4;try{d_(r,t);var f=Xf,E=_p(t.containerInfo),w=f.focusedElem,C=f.selectionRange;if(E!==w&&w&&w.ownerDocument&&yp(w.ownerDocument.documentElement,w)){if(C!==null&&Td(w)){var B=C.start,Y=C.end;if(Y===void 0&&(Y=B),"selectionStart"in w)w.selectionStart=B,w.selectionEnd=Math.min(Y,w.value.length);else{var W=w.ownerDocument||document,F=W&&W.defaultView||window;if(F.getSelection){var G=F.getSelection(),Re=w.textContent.length,we=Math.min(C.start,Re),st=C.end===void 0?we:Math.min(C.end,Re);!G.extend&&we>st&&(E=st,st=we,we=E);var L=pp(w,we),V=pp(w,st);if(L&&V&&(G.rangeCount!==1||G.anchorNode!==L.node||G.anchorOffset!==L.offset||G.focusNode!==V.node||G.focusOffset!==V.offset)){var q=W.createRange();q.setStart(L.node,L.offset),G.removeAllRanges(),we>st?(G.addRange(q),G.extend(V.node,V.offset)):(q.setEnd(V.node,V.offset),G.addRange(q))}}}}for(W=[],G=w;G=G.parentNode;)G.nodeType===1&&W.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<W.length;w++){var $=W[w];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Wu=!!Yf,Xf=Yf=null}finally{We=h,ee.p=l,z.T=a}}t.current=r,Zt=2}}function D_(){if(Zt===2){Zt=0;var t=Zi,r=eo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=z.T,z.T=null;var l=ee.p;ee.p=2;var h=We;We|=4;try{l_(t,r.alternate,r)}finally{We=h,ee.p=l,z.T=a}}Zt=3}}function P_(){if(Zt===4||Zt===3){Zt=0,pa();var t=Zi,r=eo,a=to,l=v_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Zt=5:(Zt=0,eo=Zi=null,O_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Wi=null),Ea(a),r=r.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(ut,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=z.T,h=ee.p,ee.p=2,z.T=null;try{for(var f=t.onRecoverableError,E=0;E<l.length;E++){var w=l[E];f(w.value,{componentStack:w.stack})}}finally{z.T=r,ee.p=h}}(to&3)!==0&&Uu(),Ir(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Mf?Pl++:(Pl=0,Mf=t):Pl=0,Ol(0)}}function O_(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,dl(r)))}function Uu(t){return C_(),D_(),P_(),M_()}function M_(){if(Zt!==5)return!1;var t=Zi,r=Pf;Pf=0;var a=Ea(to),l=z.T,h=ee.p;try{ee.p=32>a?32:a,z.T=null,a=Of,Of=null;var f=Zi,E=to;if(Zt=0,eo=Zi=null,to=0,(We&6)!==0)throw Error(s(331));var w=We;if(We|=4,y_(f.current),m_(f,f.current,E,a),We=w,Ol(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(ut,f)}catch{}return!0}finally{ee.p=h,z.T=l,O_(t,r)}}function V_(t,r,a){r=Qn(a,r),r=df(t.stateNode,r,2),t=Bi(t,r,2),t!==null&&(Kr(t,2),Ir(t))}function ot(t,r,a){if(t.tag===3)V_(t,t,a);else for(;r!==null;){if(r.tag===3){V_(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Wi===null||!Wi.has(l))){t=Qn(a,t),a=Uy(2),l=Bi(r,a,2),l!==null&&(zy(a,l,r,t),Kr(l,2),Ir(l));break}}r=r.return}}function Lf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new aA;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(If=!0,h.add(a),t=hA.bind(null,t,r,a),r.then(t,t))}function hA(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,lt===t&&(He&a)===a&&(yt===4||yt===3&&(He&62914560)===He&&300>En()-Df?(We&2)===0&&no(t,0):Nf|=a,Ja===He&&(Ja=0)),Ir(t)}function k_(t,r){r===0&&(r=Ot()),t=La(t,r),t!==null&&(Kr(t,r),Ir(t))}function dA(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),k_(t,a)}function fA(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),k_(t,a)}function mA(t,r){return zr(t,r)}var zu=null,io=null,Uf=!1,qu=!1,zf=!1,ia=0;function Ir(t){t!==io&&t.next===null&&(io===null?zu=io=t:io=io.next=t),qu=!0,Uf||(Uf=!0,pA())}function Ol(t,r){if(!zf&&qu){zf=!0;do for(var a=!1,l=zu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var E=l.suspendedLanes,w=l.pingedLanes;f=(1<<31-zt(42|t)+1)-1,f&=h&~(E&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,z_(l,f))}else f=He,f=Di(l,l===lt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Qr(l,f)||(a=!0,z_(l,f));l=l.next}while(a);zf=!1}}function gA(){j_()}function j_(){qu=Uf=!1;var t=0;ia!==0&&(AA()&&(t=ia),ia=0);for(var r=En(),a=null,l=zu;l!==null;){var h=l.next,f=L_(l,r);f===0?(l.next=null,a===null?zu=h:a.next=h,h===null&&(io=a)):(a=l,(t!==0||(f&3)!==0)&&(qu=!0)),l=h}Ol(t)}function L_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var E=31-zt(f),w=1<<E,C=h[E];C===-1?((w&a)===0||(w&l)!==0)&&(h[E]=me(w,r)):C<=r&&(t.expiredLanes|=w),f&=~w}if(r=lt,a=He,a=Di(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&qr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Qr(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&qr(l),Ea(a)){case 2:case 8:a=Ni;break;case 32:a=Br;break;case 268435456:a=Ci;break;default:a=Br}return l=U_.bind(null,t),a=zr(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&qr(l),t.callbackPriority=2,t.callbackNode=null,2}function U_(t,r){if(Zt!==0&&Zt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Uu()&&t.callbackNode!==a)return null;var l=He;return l=Di(t,t===lt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(T_(t,l,r),L_(t,En()),t.callbackNode!=null&&t.callbackNode===a?U_.bind(null,t):null)}function z_(t,r){if(Uu())return null;T_(t,r,!0)}function pA(){xA(function(){(We&6)!==0?zr(Is,gA):j_()})}function qf(){return ia===0&&(ia=ye()),ia}function q_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:xa(""+t)}function B_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function yA(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var f=q_((h[St]||null).action),E=l.submitter;E&&(r=(r=E[St]||null)?q_(r.formAction):E.getAttribute("formAction"),r!==null&&(f=r,E=null));var w=new Ra("action","action",null,l,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ia!==0){var C=E?B_(h,E):new FormData(h);of(a,{pending:!0,data:C,method:h.method,action:f},null,C)}}else typeof f=="function"&&(w.preventDefault(),C=E?B_(h,E):new FormData(h),of(a,{pending:!0,data:C,method:h.method,action:f},f,C))},currentTarget:h}]})}}for(var Bf=0;Bf<Sd.length;Bf++){var Hf=Sd[Bf],_A=Hf.toLowerCase(),vA=Hf[0].toUpperCase()+Hf.slice(1);sr(_A,"on"+vA)}sr(Tp,"onAnimationEnd"),sr(wp,"onAnimationIteration"),sr(bp,"onAnimationStart"),sr("dblclick","onDoubleClick"),sr("focusin","onFocus"),sr("focusout","onBlur"),sr(kb,"onTransitionRun"),sr(jb,"onTransitionStart"),sr(Lb,"onTransitionCancel"),sr(Ap,"onTransitionEnd"),Xr("onMouseEnter",["mouseout","mouseover"]),Xr("onMouseLeave",["mouseout","mouseover"]),Xr("onPointerEnter",["pointerout","pointerover"]),Xr("onPointerLeave",["pointerout","pointerover"]),rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ml));function H_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var E=l.length-1;0<=E;E--){var w=l[E],C=w.instance,B=w.currentTarget;if(w=w.listener,C!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=B;try{f(h)}catch(Y){Iu(Y)}h.currentTarget=null,f=C}else for(E=0;E<l.length;E++){if(w=l[E],C=w.instance,B=w.currentTarget,w=w.listener,C!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=B;try{f(h)}catch(Y){Iu(Y)}h.currentTarget=null,f=C}}}}function ke(t,r){var a=r[Go];a===void 0&&(a=r[Go]=new Set);var l=t+"__bubble";a.has(l)||(F_(r,t,2,!1),a.add(l))}function Ff(t,r,a){var l=0;r&&(l|=4),F_(a,t,l,r)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function Gf(t){if(!t[Bu]){t[Bu]=!0,Qo.forEach(function(a){a!=="selectionchange"&&(EA.has(a)||Ff(a,!1,t),Ff(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Bu]||(r[Bu]=!0,Ff("selectionchange",!1,r))}}function F_(t,r,a,l){switch(mv(r)){case 2:var h=KA;break;case 8:h=YA;break;default:h=sm}a=h.bind(null,r,a,t),h=void 0,!Fn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function Qf(t,r,a,l,h){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var w=l.stateNode.containerInfo;if(w===h)break;if(E===4)for(E=l.return;E!==null;){var C=E.tag;if((C===3||C===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;w!==null;){if(E=Yr(w),E===null)return;if(C=E.tag,C===5||C===6||C===26||C===27){l=f=E;continue e}w=w.parentNode}}l=l.return}Fc(function(){var B=f,Y=Hn(a),W=[];e:{var F=Sp.get(t);if(F!==void 0){var G=Ra,Re=t;switch(t){case"keypress":if(vr(a)===0)break e;case"keydown":case"keyup":G=Oa;break;case"focusin":Re="focus",G=Ca;break;case"focusout":Re="blur",G=Ca;break;case"beforeblur":case"afterblur":G=Ca;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=yd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=Zc;break;case Tp:case wp:case bp:G=Da;break;case Ap:G=eu;break;case"scroll":case"scrollend":G=Gc;break;case"wheel":G=Ma;break;case"copy":case"cut":case"paste":G=Pa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=il;break;case"toggle":case"beforetoggle":G=nu}var we=(r&4)!==0,st=!we&&(t==="scroll"||t==="scrollend"),L=we?F!==null?F+"Capture":null:F;we=[];for(var V=B,q;V!==null;){var $=V;if(q=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||q===null||L===null||($=js(V,L),$!=null&&we.push(Vl(V,$,q))),st)break;V=V.return}0<we.length&&(F=new G(F,Re,null,a,Y),W.push({event:F,listeners:we}))}}if((r&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",F&&a!==Zr&&(Re=a.relatedTarget||a.fromElement)&&(Yr(Re)||Re[qn]))break e;if((G||F)&&(F=Y.window===Y?Y:(F=Y.ownerDocument)?F.defaultView||F.parentWindow:window,G?(Re=a.relatedTarget||a.toElement,G=B,Re=Re?Yr(Re):null,Re!==null&&(st=c(Re),we=Re.tag,Re!==st||we!==5&&we!==27&&we!==6)&&(Re=null)):(G=null,Re=B),G!==Re)){if(we=Gn,$="onMouseLeave",L="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(we=il,$="onPointerLeave",L="onPointerEnter",V="pointer"),st=G==null?F:gr(G),q=Re==null?F:gr(Re),F=new we($,V+"leave",G,a,Y),F.target=st,F.relatedTarget=q,$=null,Yr(Y)===B&&(we=new we(L,V+"enter",Re,a,Y),we.target=q,we.relatedTarget=st,$=we),st=$,G&&Re)t:{for(we=G,L=Re,V=0,q=we;q;q=so(q))V++;for(q=0,$=L;$;$=so($))q++;for(;0<V-q;)we=so(we),V--;for(;0<q-V;)L=so(L),q--;for(;V--;){if(we===L||L!==null&&we===L.alternate)break t;we=so(we),L=so(L)}we=null}else we=null;G!==null&&G_(W,F,G,we,!1),Re!==null&&st!==null&&G_(W,st,Re,we,!0)}}e:{if(F=B?gr(B):window,G=F.nodeName&&F.nodeName.toLowerCase(),G==="select"||G==="input"&&F.type==="file")var ge=up;else if(kt(F))if(hp)ge=Ob;else{ge=Db;var Oe=Cb}else G=F.nodeName,!G||G.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?B&&Wo(B.elementType)&&(ge=up):ge=Pb;if(ge&&(ge=ge(t,B))){ri(W,ge,a,Y);break e}Oe&&Oe(t,F,B),t==="focusout"&&B&&F.type==="number"&&B.memoizedProps.value!=null&&ji(F,"number",F.value)}switch(Oe=B?gr(B):window,t){case"focusin":(kt(Oe)||Oe.contentEditable==="true")&&(Va=Oe,wd=B,ol=null);break;case"focusout":ol=wd=Va=null;break;case"mousedown":bd=!0;break;case"contextmenu":case"mouseup":case"dragend":bd=!1,vp(W,a,Y);break;case"selectionchange":if(Vb)break;case"keydown":case"keyup":vp(W,a,Y)}var _e;if(wr)e:{switch(t){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else qe?Q(t,a)&&(be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(v&&a.locale!=="ko"&&(qe||be!=="onCompositionStart"?be==="onCompositionEnd"&&qe&&(_e=Jo()):(_r=Y,Li="value"in _r?_r.value:_r.textContent,qe=!0)),Oe=Hu(B,be),0<Oe.length&&(be=new nl(be,t,null,a,Y),W.push({event:be,listeners:Oe}),_e?be.data=_e:(_e=le(a),_e!==null&&(be.data=_e)))),(_e=p?Vt(t,a):Be(t,a))&&(be=Hu(B,"onBeforeInput"),0<be.length&&(Oe=new nl("onBeforeInput","beforeinput",null,a,Y),W.push({event:Oe,listeners:be}),Oe.data=_e)),yA(W,t,B,a,Y)}H_(W,r)})}function Vl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Hu(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=js(t,a),h!=null&&l.unshift(Vl(t,h,f)),h=js(t,r),h!=null&&l.push(Vl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function so(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function G_(t,r,a,l,h){for(var f=r._reactName,E=[];a!==null&&a!==l;){var w=a,C=w.alternate,B=w.stateNode;if(w=w.tag,C!==null&&C===l)break;w!==5&&w!==26&&w!==27||B===null||(C=B,h?(B=js(a,f),B!=null&&E.unshift(Vl(a,B,C))):h||(B=js(a,f),B!=null&&E.push(Vl(a,B,C)))),a=a.return}E.length!==0&&t.push({event:r,listeners:E})}var TA=/\r\n?/g,wA=/\u0000|\uFFFD/g;function Q_(t){return(typeof t=="string"?t:""+t).replace(TA,`
`).replace(wA,"")}function K_(t,r){return r=Q_(r),Q_(t)===r}function Fu(){}function it(t,r,a,l,h,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Bn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Bn(t,""+l);break;case"className":pr(t,"class",l);break;case"tabIndex":pr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":pr(t,a,l);break;case"style":$o(t,l,f);break;case"data":if(r!=="object"){pr(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=xa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&it(t,r,"name",h.name,h,null),it(t,r,"formEncType",h.formEncType,h,null),it(t,r,"formMethod",h.formMethod,h,null),it(t,r,"formTarget",h.formTarget,h,null)):(it(t,r,"encType",h.encType,h,null),it(t,r,"method",h.method,h,null),it(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=xa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Fu);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=xa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":ke("beforetoggle",t),ke("toggle",t),ki(t,"popover",l);break;case"xlinkActuate":Xt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Xt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Xt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Xt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Xt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Xt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Xt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Xt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Xt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ki(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=gd.get(a)||a,ki(t,a,l))}}function Kf(t,r,a,l,h,f){switch(a){case"style":$o(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Bn(t,l):(typeof l=="number"||typeof l=="bigint")&&Bn(t,""+l);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Fu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ta.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),f=t[St]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ki(t,a,l)}}}function Jt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",t),ke("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var E=a[f];if(E!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:it(t,r,f,E,a,null)}}h&&it(t,r,"srcSet",a.srcSet,a,null),l&&it(t,r,"src",a.src,a,null);return;case"input":ke("invalid",t);var w=f=E=h=null,C=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var Y=a[l];if(Y!=null)switch(l){case"name":h=Y;break;case"type":E=Y;break;case"checked":C=Y;break;case"defaultChecked":B=Y;break;case"value":f=Y;break;case"defaultValue":w=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:it(t,r,l,Y,a,null)}}Ms(t,f,w,C,B,E,h,!1),Sa(t);return;case"select":ke("invalid",t),l=E=f=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":f=w;break;case"defaultValue":E=w;break;case"multiple":l=w;default:it(t,r,h,w,a,null)}r=f,a=E,t.multiple=!!l,r!=null?Wr(t,!!l,r,!1):a!=null&&Wr(t,!!l,a,!0);return;case"textarea":ke("invalid",t),f=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(w=a[E],w!=null))switch(E){case"value":l=w;break;case"defaultValue":h=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:it(t,r,E,w,a,null)}Vs(t,l,h,f),Sa(t);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:it(t,r,C,l,a,null)}return;case"dialog":ke("beforetoggle",t),ke("toggle",t),ke("cancel",t),ke("close",t);break;case"iframe":case"object":ke("load",t);break;case"video":case"audio":for(l=0;l<Ml.length;l++)ke(Ml[l],t);break;case"image":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"embed":case"source":case"link":ke("error",t),ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:it(t,r,B,l,a,null)}return;default:if(Wo(r)){for(Y in a)a.hasOwnProperty(Y)&&(l=a[Y],l!==void 0&&Kf(t,r,Y,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&it(t,r,w,l,a,null))}function bA(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,E=null,w=null,C=null,B=null,Y=null;for(G in a){var W=a[G];if(a.hasOwnProperty(G)&&W!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":C=W;default:l.hasOwnProperty(G)||it(t,r,G,null,l,W)}}for(var F in l){var G=l[F];if(W=a[F],l.hasOwnProperty(F)&&(G!=null||W!=null))switch(F){case"type":f=G;break;case"name":h=G;break;case"checked":B=G;break;case"defaultChecked":Y=G;break;case"value":E=G;break;case"defaultValue":w=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:G!==W&&it(t,r,F,G,l,W)}}In(t,E,w,C,B,Y,f,h);return;case"select":G=E=w=F=null;for(f in a)if(C=a[f],a.hasOwnProperty(f)&&C!=null)switch(f){case"value":break;case"multiple":G=C;default:l.hasOwnProperty(f)||it(t,r,f,null,l,C)}for(h in l)if(f=l[h],C=a[h],l.hasOwnProperty(h)&&(f!=null||C!=null))switch(h){case"value":F=f;break;case"defaultValue":w=f;break;case"multiple":E=f;default:f!==C&&it(t,r,h,f,l,C)}r=w,a=E,l=G,F!=null?Wr(t,!!a,F,!1):!!l!=!!a&&(r!=null?Wr(t,!!a,r,!0):Wr(t,!!a,a?[]:"",!1));return;case"textarea":G=F=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:it(t,r,w,null,l,h)}for(E in l)if(h=l[E],f=a[E],l.hasOwnProperty(E)&&(h!=null||f!=null))switch(E){case"value":F=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&it(t,r,E,h,l,f)}nt(t,F,G);return;case"option":for(var Re in a)if(F=a[Re],a.hasOwnProperty(Re)&&F!=null&&!l.hasOwnProperty(Re))switch(Re){case"selected":t.selected=!1;break;default:it(t,r,Re,null,l,F)}for(C in l)if(F=l[C],G=a[C],l.hasOwnProperty(C)&&F!==G&&(F!=null||G!=null))switch(C){case"selected":t.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:it(t,r,C,F,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)F=a[we],a.hasOwnProperty(we)&&F!=null&&!l.hasOwnProperty(we)&&it(t,r,we,null,l,F);for(B in l)if(F=l[B],G=a[B],l.hasOwnProperty(B)&&F!==G&&(F!=null||G!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,r));break;default:it(t,r,B,F,l,G)}return;default:if(Wo(r)){for(var st in a)F=a[st],a.hasOwnProperty(st)&&F!==void 0&&!l.hasOwnProperty(st)&&Kf(t,r,st,void 0,l,F);for(Y in l)F=l[Y],G=a[Y],!l.hasOwnProperty(Y)||F===G||F===void 0&&G===void 0||Kf(t,r,Y,F,l,G);return}}for(var L in a)F=a[L],a.hasOwnProperty(L)&&F!=null&&!l.hasOwnProperty(L)&&it(t,r,L,null,l,F);for(W in l)F=l[W],G=a[W],!l.hasOwnProperty(W)||F===G||F==null&&G==null||it(t,r,W,F,l,G)}var Yf=null,Xf=null;function Gu(t){return t.nodeType===9?t:t.ownerDocument}function Y_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function X_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function $f(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Wf=null;function AA(){var t=window.event;return t&&t.type==="popstate"?t===Wf?!1:(Wf=t,!0):(Wf=null,!1)}var $_=typeof setTimeout=="function"?setTimeout:void 0,SA=typeof clearTimeout=="function"?clearTimeout:void 0,W_=typeof Promise=="function"?Promise:void 0,xA=typeof queueMicrotask=="function"?queueMicrotask:typeof W_<"u"?function(t){return W_.resolve(null).then(t).catch(RA)}:$_;function RA(t){setTimeout(function(){throw t})}function es(t){return t==="head"}function Z_(t,r){var a=r,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var E=t.ownerDocument;if(a&1&&kl(E.documentElement),a&2&&kl(E.body),a&4)for(a=E.head,kl(a),E=a.firstChild;E;){var w=E.nextSibling,C=E.nodeName;E[Cs]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=w}}if(h===0){t.removeChild(f),Fl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Fl(r)}function Zf(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Zf(a),Vi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function IA(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Cs])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=or(t.nextSibling),t===null)break}return null}function NA(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=or(t.nextSibling),t===null))return null;return t}function Jf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function CA(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function or(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var em=null;function J_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function ev(t,r,a){switch(r=Gu(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function kl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Vi(t)}var Zn=new Map,tv=new Set;function Qu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var pi=ee.d;ee.d={f:DA,r:PA,D:OA,C:MA,L:VA,m:kA,X:LA,S:jA,M:UA};function DA(){var t=pi.f(),r=ju();return t||r}function PA(t){var r=mr(t);r!==null&&r.tag===5&&r.type==="form"?Ty(r):pi.r(t)}var ao=typeof document>"u"?null:document;function nv(t,r,a){var l=ao;if(l&&typeof r=="string"&&r){var h=xt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),tv.has(h)||(tv.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Jt(r,"link",t),Tt(r),l.head.appendChild(r)))}}function OA(t){pi.D(t),nv("dns-prefetch",t,null)}function MA(t,r){pi.C(t,r),nv("preconnect",t,r)}function VA(t,r,a){pi.L(t,r,a);var l=ao;if(l&&t&&r){var h='link[rel="preload"][as="'+xt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+xt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+xt(a.imageSizes)+'"]')):h+='[href="'+xt(t)+'"]';var f=h;switch(r){case"style":f=oo(t);break;case"script":f=lo(t)}Zn.has(f)||(t=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Zn.set(f,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(jl(f))||r==="script"&&l.querySelector(Ll(f))||(r=l.createElement("link"),Jt(r,"link",t),Tt(r),l.head.appendChild(r)))}}function kA(t,r){pi.m(t,r);var a=ao;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+xt(l)+'"][href="'+xt(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=lo(t)}if(!Zn.has(f)&&(t=T({rel:"modulepreload",href:t},r),Zn.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ll(f)))return}l=a.createElement("link"),Jt(l,"link",t),Tt(l),a.head.appendChild(l)}}}function jA(t,r,a){pi.S(t,r,a);var l=ao;if(l&&t){var h=gn(l).hoistableStyles,f=oo(t);r=r||"default";var E=h.get(f);if(!E){var w={loading:0,preload:null};if(E=l.querySelector(jl(f)))w.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Zn.get(f))&&tm(t,a);var C=E=l.createElement("link");Tt(C),Jt(C,"link",t),C._p=new Promise(function(B,Y){C.onload=B,C.onerror=Y}),C.addEventListener("load",function(){w.loading|=1}),C.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Ku(E,r,l)}E={type:"stylesheet",instance:E,count:1,state:w},h.set(f,E)}}}function LA(t,r){pi.X(t,r);var a=ao;if(a&&t){var l=gn(a).hoistableScripts,h=lo(t),f=l.get(h);f||(f=a.querySelector(Ll(h)),f||(t=T({src:t,async:!0},r),(r=Zn.get(h))&&nm(t,r),f=a.createElement("script"),Tt(f),Jt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function UA(t,r){pi.M(t,r);var a=ao;if(a&&t){var l=gn(a).hoistableScripts,h=lo(t),f=l.get(h);f||(f=a.querySelector(Ll(h)),f||(t=T({src:t,async:!0,type:"module"},r),(r=Zn.get(h))&&nm(t,r),f=a.createElement("script"),Tt(f),Jt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function rv(t,r,a,l){var h=(h=xe.current)?Qu(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=oo(a.href),a=gn(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=oo(a.href);var f=gn(h).hoistableStyles,E=f.get(t);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,E),(f=h.querySelector(jl(t)))&&!f._p&&(E.instance=f,E.state.loading=5),Zn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zn.set(t,a),f||zA(h,t,a,E.state))),r&&l===null)throw Error(s(528,""));return E}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=lo(a),a=gn(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function oo(t){return'href="'+xt(t)+'"'}function jl(t){return'link[rel="stylesheet"]['+t+"]"}function iv(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function zA(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Jt(r,"link",a),Tt(r),t.head.appendChild(r))}function lo(t){return'[src="'+xt(t)+'"]'}function Ll(t){return"script[async]"+t}function sv(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+xt(a.href)+'"]');if(l)return r.instance=l,Tt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Tt(l),Jt(l,"style",h),Ku(l,a.precedence,t),r.instance=l;case"stylesheet":h=oo(a.href);var f=t.querySelector(jl(h));if(f)return r.state.loading|=4,r.instance=f,Tt(f),f;l=iv(a),(h=Zn.get(h))&&tm(l,h),f=(t.ownerDocument||t).createElement("link"),Tt(f);var E=f;return E._p=new Promise(function(w,C){E.onload=w,E.onerror=C}),Jt(f,"link",l),r.state.loading|=4,Ku(f,a.precedence,t),r.instance=f;case"script":return f=lo(a.src),(h=t.querySelector(Ll(f)))?(r.instance=h,Tt(h),h):(l=a,(h=Zn.get(f))&&(l=T({},a),nm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Tt(h),Jt(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Ku(l,a.precedence,t));return r.instance}function Ku(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,E=0;E<l.length;E++){var w=l[E];if(w.dataset.precedence===r)f=w;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function tm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function nm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Yu=null;function av(t,r,a){if(Yu===null){var l=new Map,h=Yu=new Map;h.set(a,l)}else h=Yu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Cs]||f[Mt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(r)||"";E=t+E;var w=l.get(E);w?w.push(f):l.set(E,[f])}}return l}function ov(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function qA(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function lv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Ul=null;function BA(){}function HA(t,r,a){if(Ul===null)throw Error(s(475));var l=Ul;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=oo(a.href),f=t.querySelector(jl(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Xu.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=f,Tt(f);return}f=t.ownerDocument||t,a=iv(a),(h=Zn.get(h))&&tm(a,h),f=f.createElement("link"),Tt(f);var E=f;E._p=new Promise(function(w,C){E.onload=w,E.onerror=C}),Jt(f,"link",a),r.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Xu.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function FA(){if(Ul===null)throw Error(s(475));var t=Ul;return t.stylesheets&&t.count===0&&rm(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&rm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Xu(){if(this.count--,this.count===0){if(this.stylesheets)rm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $u=null;function rm(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$u=new Map,r.forEach(GA,t),$u=null,Xu.call(t))}function GA(t,r){if(!(r.state.loading&4)){var a=$u.get(t);if(a)var l=a.get(null);else{a=new Map,$u.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var E=h[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=r.instance,E=h.getAttribute("data-precedence"),f=a.get(E)||l,f===l&&a.set(null,h),a.set(E,h),this.count++,l=Xu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var zl={$$typeof:re,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function QA(t,r,a,l,h,f,E,w){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mn(0),this.hiddenUpdates=mn(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function cv(t,r,a,l,h,f,E,w,C,B,Y,W){return t=new QA(t,r,a,E,w,C,B,W),r=1,f===!0&&(r|=24),f=Cn(3,null,null,r),t.current=f,f.stateNode=t,r=jd(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},qd(f),t}function uv(t){return t?(t=Ua,t):Ua}function hv(t,r,a,l,h,f){h=uv(h),l.context===null?l.context=h:l.pendingContext=h,l=qi(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Bi(t,l,r),a!==null&&(Vn(a,t,r),pl(a,t,r))}function dv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function im(t,r){dv(t,r),(t=t.alternate)&&dv(t,r)}function fv(t){if(t.tag===13){var r=La(t,67108864);r!==null&&Vn(r,t,67108864),im(t,67108864)}}var Wu=!0;function KA(t,r,a,l){var h=z.T;z.T=null;var f=ee.p;try{ee.p=2,sm(t,r,a,l)}finally{ee.p=f,z.T=h}}function YA(t,r,a,l){var h=z.T;z.T=null;var f=ee.p;try{ee.p=8,sm(t,r,a,l)}finally{ee.p=f,z.T=h}}function sm(t,r,a,l){if(Wu){var h=am(l);if(h===null)Qf(t,r,l,Zu,a),gv(t,l);else if($A(h,t,r,a,l))l.stopPropagation();else if(gv(t,l),r&4&&-1<XA.indexOf(t)){for(;h!==null;){var f=mr(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=Rn(f.pendingLanes);if(E!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;E;){var C=1<<31-zt(E);w.entanglements[1]|=C,E&=~C}Ir(f),(We&6)===0&&(Vu=En()+500,Ol(0))}}break;case 13:w=La(f,2),w!==null&&Vn(w,f,2),ju(),im(f,2)}if(f=am(l),f===null&&Qf(t,r,l,Zu,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else Qf(t,r,l,null,a)}}function am(t){return t=Hn(t),om(t)}var Zu=null;function om(t){if(Zu=null,t=Yr(t),t!==null){var r=c(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Zu=t,null}function mv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qo()){case Is:return 2;case Ni:return 8;case Br:case Bo:return 32;case Ci:return 268435456;default:return 32}default:return 32}}var lm=!1,ts=null,ns=null,rs=null,ql=new Map,Bl=new Map,is=[],XA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gv(t,r){switch(t){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":ql.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bl.delete(r.pointerId)}}function Hl(t,r,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},r!==null&&(r=mr(r),r!==null&&fv(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function $A(t,r,a,l,h){switch(r){case"focusin":return ts=Hl(ts,t,r,a,l,h),!0;case"dragenter":return ns=Hl(ns,t,r,a,l,h),!0;case"mouseover":return rs=Hl(rs,t,r,a,l,h),!0;case"pointerover":var f=h.pointerId;return ql.set(f,Hl(ql.get(f)||null,t,r,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Bl.set(f,Hl(Bl.get(f)||null,t,r,a,l,h)),!0}return!1}function pv(t){var r=Yr(t.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,jc(t.priority,function(){if(a.tag===13){var l=Mn();l=Pi(l);var h=La(a,l);h!==null&&Vn(h,a,l),im(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ju(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=am(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Zr=l,a.target.dispatchEvent(l),Zr=null}else return r=mr(a),r!==null&&fv(r),t.blockedOn=a,!1;r.shift()}return!0}function yv(t,r,a){Ju(t)&&a.delete(r)}function WA(){lm=!1,ts!==null&&Ju(ts)&&(ts=null),ns!==null&&Ju(ns)&&(ns=null),rs!==null&&Ju(rs)&&(rs=null),ql.forEach(yv),Bl.forEach(yv)}function eh(t,r){t.blockedOn===r&&(t.blockedOn=null,lm||(lm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,WA)))}var th=null;function _v(t){th!==t&&(th=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){th===t&&(th=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(om(l||a)===null)continue;break}var f=mr(a);f!==null&&(t.splice(r,3),r-=3,of(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Fl(t){function r(C){return eh(C,t)}ts!==null&&eh(ts,t),ns!==null&&eh(ns,t),rs!==null&&eh(rs,t),ql.forEach(r),Bl.forEach(r);for(var a=0;a<is.length;a++){var l=is[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<is.length&&(a=is[0],a.blockedOn===null);)pv(a),a.blockedOn===null&&is.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],E=h[St]||null;if(typeof f=="function")E||_v(a);else if(E){var w=null;if(f&&f.hasAttribute("formAction")){if(h=f,E=f[St]||null)w=E.formAction;else if(om(h)!==null)continue}else w=E.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),_v(a)}}}function cm(t){this._internalRoot=t}nh.prototype.render=cm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Mn();hv(a,l,t,r,null,null)},nh.prototype.unmount=cm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;hv(t.current,2,null,t,null,null),ju(),r[qn]=null}};function nh(t){this._internalRoot=t}nh.prototype.unstable_scheduleHydration=function(t){if(t){var r=Oi();t={blockedOn:null,target:t,priority:r};for(var a=0;a<is.length&&r!==0&&r<is[a].priority;a++);is.splice(a,0,t),a===0&&pv(t)}};var vv=e.version;if(vv!=="19.1.1")throw Error(s(527,vv,"19.1.1"));ee.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(r),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var ZA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{ut=rh.inject(ZA),Ye=rh}catch{}}return Ql.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=Vy,f=ky,E=jy,w=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(w=r.unstable_transitionCallbacks)),r=cv(t,1,!1,null,null,a,l,h,f,E,w,null),t[qn]=r.current,Gf(t),new cm(r)},Ql.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=Vy,E=ky,w=jy,C=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(C=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),r=cv(t,1,!0,r,a??null,l,h,f,E,w,C,B),r.context=uv(null),a=r.current,l=Mn(),l=Pi(l),h=qi(l),h.callback=null,Bi(a,h,l),a=l,r.current.lanes=a,Kr(r,a),Ir(r),t[qn]=r.current,Gf(t),new nh(r)},Ql.version="19.1.1",Ql}var Nv;function cS(){if(Nv)return dm.exports;Nv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),dm.exports=lS(),dm.exports}var uS=cS();const hS=EE(uS);var Je=(i=>(i[i.Setup=0]="Setup",i[i.Login=1]="Login",i[i.Profile=2]="Profile",i[i.Shop=3]="Shop",i[i.PackSelection=4]="PackSelection",i[i.RoundConfiguration=5]="RoundConfiguration",i[i.Game=6]="Game",i[i.RoundEnd=7]="RoundEnd",i[i.GameEnd=8]="GameEnd",i))(Je||{});const ih={CHANGES_BEFORE_AD:3,MAX_CHANGE_ATTEMPTS:10};var Jn=(i=>(i.Pack="pack",i.Question="question",i.Dare="dare",i))(Jn||{}),tc=(i=>(i.Pending="pending",i.Discarded="discarded",i.Possible="possible",i.Accepted="accepted",i))(tc||{});const ft={MAX_SUGGESTIONS_PER_DAY:5,MAX_SUGGESTIONS_PER_WEEK:15,MIN_TITLE_LENGTH:5,MAX_TITLE_LENGTH:100,MIN_CONTENT_LENGTH:10,MAX_CONTENT_LENGTH:500},xn=({children:i,className:e})=>y.jsx("div",{className:`bg-gray-800 border border-purple-500/30 rounded-2xl shadow-lg shadow-purple-900/20 p-6 sm:p-8 ${e}`,children:i}),dS=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Cv=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),TE=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),wE=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),po=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),fS=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),bE=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),mS=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),gS=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),pS=({players:i,setPlayers:e})=>{const[n,s]=ne.useState(""),o=d=>{d.preventDefault(),n.trim()&&!i.includes(n.trim())&&(e([...i,n.trim()]),s(""))},c=d=>{e(i.filter((m,g)=>g!==d))};return y.jsxs(xn,{children:[y.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-pink-400",children:"Aadir Jugadores"}),y.jsxs("form",{onSubmit:o,className:"flex flex-col gap-2 mb-4",children:[y.jsx("input",{type:"text",value:n,onChange:d=>s(d.target.value),placeholder:"Nombre del jugador",className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-purple-500"}),y.jsx("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md transition text-base",children:"Aadir"})]}),y.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:i.map((d,m)=>y.jsxs("li",{className:"flex justify-between items-center bg-gray-700/50 p-2 rounded-md animate-fade-in",children:[y.jsx("span",{className:"font-medium",children:d}),y.jsx("button",{onClick:()=>c(m),className:"text-gray-400 hover:text-red-500 transition",children:y.jsx(dS,{className:"w-5 h-5"})})]},m))})]})},Me=({children:i,variant:e="primary",className:n,...s})=>{const o="px-6 py-3 font-bold rounded-lg text-white transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 disabled:opacity-50 disabled:cursor-not-allowed",c={primary:"bg-purple-600 hover:bg-purple-700 focus:ring-purple-500/50 shadow-lg shadow-purple-600/30",secondary:"bg-pink-500 hover:bg-pink-600 focus:ring-pink-500/50 shadow-lg shadow-pink-500/30",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500/50"};return y.jsx("button",{className:`${o} ${c[e]} ${n}`,...s,children:i})},yS=({availablePacks:i,purchasedPacks:e,adWatchedPacks:n,referralUnlockedPacks:s,onContinue:o,onBack:c,onGoToShop:d,onPlayDemo:m})=>{const T=i.some(b=>b.id==="base")?i:[{id:"base",name:"Pack Base",description:"Preguntas y retos bsicos incluidos",price:"INCLUIDO",icon:"",questionsUrl:"",daresUrl:"",allowDemo:!1,demoPlaysCount:0},...i];return e.length>0,y.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:y.jsxs(xn,{className:"w-full max-w-2xl text-center",children:[y.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Packs Disponibles"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Estos son los packs que tienes disponibles para jugar"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:T.map(b=>{const S=b.id==="base"||e.includes(b.id),j=b.id==="base",k=n.includes(b.id),K=s.includes(b.id),H=S||K;return y.jsxs("div",{className:`relative p-4 rounded-lg border transition-all duration-200 ${S?"border-green-500 bg-green-500/10":K?"border-blue-500 bg-blue-500/10":k?"border-yellow-500 bg-yellow-500/10":"border-gray-600 bg-gray-800/50 opacity-60"}`,children:[y.jsx("div",{className:"absolute top-2 right-2",children:S?y.jsx(Cv,{className:"w-6 h-6 text-green-500"}):K?y.jsx(Cv,{className:"w-6 h-6 text-blue-500"}):y.jsx(po,{className:"w-6 h-6 text-yellow-500"})}),y.jsx("div",{className:"text-4xl mb-2",children:b.icon}),y.jsx("h3",{className:`text-xl font-bold mb-2 ${H||k?"text-white":"text-gray-400"}`,children:b.name}),y.jsx("p",{className:`text-sm mb-3 ${H||k?"text-gray-300":"text-gray-500"}`,children:b.description}),b.isReferralUnlockable&&!H&&y.jsxs("p",{className:"text-xs text-blue-400 mb-2",children:[" Requiere ",b.requiredReferrals," referidos"]}),y.jsx("div",{className:`text-lg font-semibold ${S?"text-green-400":K?"text-blue-400":"text-yellow-400"}`,children:j?"INCLUIDO":S?"COMPRADO":K?"POR REFERIDOS":k?"DEMO VISTO":"PREMIUM"}),!H&&!k&&y.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg flex items-center justify-center",children:y.jsxs("div",{className:"text-center",children:[y.jsx(po,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),y.jsx("p",{className:"text-yellow-400 font-semibold text-sm mb-3",children:b.isReferralUnlockable?`${b.requiredReferrals} REFERIDOS`:"PREMIUM"}),b.allowDemo&&y.jsx(Me,{onClick:oe=>{oe.stopPropagation(),m(b.id)},variant:"secondary",className:"px-3 py-1 text-xs bg-yellow-500 hover:bg-yellow-600 text-white border border-yellow-400 shadow-md",children:" Jugar Demo"})]})})]},b.id)})}),i.some(b=>!e.includes(b.id))&&y.jsx("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:y.jsxs("p",{className:"text-yellow-400 text-sm",children:[y.jsx(po,{className:"w-4 h-4 inline mr-2"}),"Los packs premium estn bloqueados. Visita la tienda para desbloquearlos."]})}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[y.jsx(Me,{onClick:c,variant:"secondary",className:"px-6",children:"Volver"}),y.jsx(Me,{onClick:d,variant:"secondary",className:"px-6 bg-yellow-600 hover:bg-yellow-700 text-white",children:"Ir a la Tienda"}),y.jsx(Me,{onClick:o,className:"px-6",disabled:!1,children:"Continuar al Juego"})]})]})})},_S="modulepreload",vS=function(i,e){return new URL(i,e).href},Dv={},AE=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let d=function(T){return Promise.all(T.map(b=>Promise.resolve(b).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};const m=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),_=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=d(n.map(T=>{if(T=vS(T,s),T in Dv)return;Dv[T]=!0;const b=T.endsWith(".css"),S=b?'[rel="stylesheet"]':"";if(!!s)for(let K=m.length-1;K>=0;K--){const H=m[K];if(H.href===T&&(!b||H.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${T}"]${S}`))return;const k=document.createElement("link");if(k.rel=b?"stylesheet":_S,b||(k.as="script"),k.crossOrigin="",k.href=T,_&&k.setAttribute("nonce",_),document.head.appendChild(k),b)return new Promise((K,H)=>{k.addEventListener("load",K),k.addEventListener("error",()=>H(new Error(`Unable to preload CSS for ${T}`)))})}))}function c(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return o.then(d=>{for(const m of d||[])m.status==="rejected"&&c(m.reason);return e().catch(c)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var wo;(function(i){i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE"})(wo||(wo={}));class pm extends Error{constructor(e,n,s){super(e),this.message=e,this.code=n,this.data=s}}const ES=i=>{var e,n;return i!=null&&i.androidBridge?"android":!((n=(e=i==null?void 0:i.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},TS=i=>{const e=i.CapacitorCustomPlatform||null,n=i.Capacitor||{},s=n.Plugins=n.Plugins||{},o=()=>e!==null?e.name:ES(i),c=()=>o()!=="web",d=b=>{const S=_.get(b);return!!(S!=null&&S.platforms.has(o())||m(b))},m=b=>{var S;return(S=n.PluginHeaders)===null||S===void 0?void 0:S.find(j=>j.name===b)},g=b=>i.console.error(b),_=new Map,T=(b,S={})=>{const j=_.get(b);if(j)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),j.proxy;const k=o(),K=m(b);let H;const oe=async()=>(!H&&k in S?H=typeof S[k]=="function"?H=await S[k]():H=S[k]:e!==null&&!H&&"web"in S&&(H=typeof S.web=="function"?H=await S.web():H=S.web),H),se=(x,N)=>{var P,M;if(K){const O=K==null?void 0:K.methods.find(I=>N===I.name);if(O)return O.rtype==="promise"?I=>n.nativePromise(b,N.toString(),I):(I,ze)=>n.nativeCallback(b,N.toString(),I,ze);if(x)return(P=x[N])===null||P===void 0?void 0:P.bind(x)}else{if(x)return(M=x[N])===null||M===void 0?void 0:M.bind(x);throw new pm(`"${b}" plugin is not implemented on ${k}`,wo.Unimplemented)}},re=x=>{let N;const P=(...M)=>{const O=oe().then(I=>{const ze=se(I,x);if(ze){const Ie=ze(...M);return N=Ie==null?void 0:Ie.remove,Ie}else throw new pm(`"${b}.${x}()" is not implemented on ${k}`,wo.Unimplemented)});return x==="addListener"&&(O.remove=async()=>N()),O};return P.toString=()=>`${x.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:x,writable:!1,configurable:!1}),P},fe=re("addListener"),he=re("removeListener"),ae=(x,N)=>{const P=fe({eventName:x},N),M=async()=>{const I=await P;he({eventName:x,callbackId:I},N)},O=new Promise(I=>P.then(()=>I({remove:M})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await M()},O},R=new Proxy({},{get(x,N){switch(N){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return K?ae:fe;case"removeListener":return he;default:return re(N)}}});return s[b]=R,_.set(b,{name:b,proxy:R,platforms:new Set([...Object.keys(S),...K?[k]:[]])}),R};return n.convertFileSrc||(n.convertFileSrc=b=>b),n.getPlatform=o,n.handleError=g,n.isNativePlatform=c,n.isPluginAvailable=d,n.registerPlugin=T,n.Exception=pm,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},wS=i=>i.Capacitor=TS(i),un=wS(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),rg=un.registerPlugin;class SE{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(n);const c=this.windowListeners[e];c&&!c.registered&&this.addWindowListener(c),s&&this.sendRetainedArgumentsForEvent(e);const d=async()=>this.removeListener(e,n);return Promise.resolve({remove:d})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,s){const o=this.listeners[e];if(!o){if(s){let c=this.retainedEventArguments[e];c||(c=[]),c.push(n),this.retainedEventArguments[e]=c}return}o.forEach(c=>c(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:s=>{this.notifyListeners(n,s)}}}unimplemented(e="not implemented"){return new un.Exception(e,wo.Unimplemented)}unavailable(e="not available"){return new un.Exception(e,wo.Unavailable)}async removeListener(e,n){const s=this.listeners[e];if(!s)return;const o=s.indexOf(n);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(s=>{this.notifyListeners(e,s)}))}}const Pv=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ov=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class bS extends SE{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(s=>{if(s.length<=0)return;let[o,c]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=Ov(o).trim(),c=Ov(c).trim(),n[o]=c}),n}async setCookie(e){try{const n=Pv(e.key),s=Pv(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,c=(e.path||"/").replace("path=",""),d=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${s||""}${o}; path=${c}; ${d};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}rg("CapacitorCookies",{web:()=>new bS});const AS=async i=>new Promise((e,n)=>{const s=new FileReader;s.onload=()=>{const o=s.result;e(o.indexOf(",")>=0?o.split(",")[1]:o)},s.onerror=o=>n(o),s.readAsDataURL(i)}),SS=(i={})=>{const e=Object.keys(i);return Object.keys(i).map(o=>o.toLocaleLowerCase()).reduce((o,c,d)=>(o[c]=i[e[d]],o),{})},xS=(i,e=!0)=>i?Object.entries(i).reduce((s,o)=>{const[c,d]=o;let m,g;return Array.isArray(d)?(g="",d.forEach(_=>{m=e?encodeURIComponent(_):_,g+=`${c}=${m}&`}),g.slice(0,-1)):(m=e?encodeURIComponent(d):d,g=`${c}=${m}`),`${s}&${g}`},"").substr(1):null,RS=(i,e={})=>{const n=Object.assign({method:i.method||"GET",headers:i.headers},e),o=SS(i.headers)["content-type"]||"";if(typeof i.data=="string")n.body=i.data;else if(o.includes("application/x-www-form-urlencoded")){const c=new URLSearchParams;for(const[d,m]of Object.entries(i.data||{}))c.set(d,m);n.body=c.toString()}else if(o.includes("multipart/form-data")||i.data instanceof FormData){const c=new FormData;if(i.data instanceof FormData)i.data.forEach((m,g)=>{c.append(g,m)});else for(const m of Object.keys(i.data))c.append(m,i.data[m]);n.body=c;const d=new Headers(n.headers);d.delete("content-type"),n.headers=d}else(o.includes("application/json")||typeof i.data=="object")&&(n.body=JSON.stringify(i.data));return n};class IS extends SE{async request(e){const n=RS(e,e.webFetchExtra),s=xS(e.params,e.shouldEncodeUrlParams),o=s?`${e.url}?${s}`:e.url,c=await fetch(o,n),d=c.headers.get("content-type")||"";let{responseType:m="text"}=c.ok?e:{};d.includes("application/json")&&(m="json");let g,_;switch(m){case"arraybuffer":case"blob":_=await c.blob(),g=await AS(_);break;case"json":g=await c.json();break;case"document":case"text":default:g=await c.text()}const T={};return c.headers.forEach((b,S)=>{T[S]=b}),{data:g,headers:T,status:c.status,url:c.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}rg("CapacitorHttp",{web:()=>new IS});var Mv;(function(i){i.General="General",i.ParentalGuidance="ParentalGuidance",i.Teen="Teen",i.MatureAudience="MatureAudience"})(Mv||(Mv={}));var Vv;(function(i){i.SizeChanged="bannerAdSizeChanged",i.Loaded="bannerAdLoaded",i.FailedToLoad="bannerAdFailedToLoad",i.Opened="bannerAdOpened",i.Closed="bannerAdClosed",i.AdImpression="bannerAdImpression"})(Vv||(Vv={}));var Nm;(function(i){i.TOP_CENTER="TOP_CENTER",i.CENTER="CENTER",i.BOTTOM_CENTER="BOTTOM_CENTER"})(Nm||(Nm={}));var Cm;(function(i){i.BANNER="BANNER",i.FULL_BANNER="FULL_BANNER",i.LARGE_BANNER="LARGE_BANNER",i.MEDIUM_RECTANGLE="MEDIUM_RECTANGLE",i.LEADERBOARD="LEADERBOARD",i.ADAPTIVE_BANNER="ADAPTIVE_BANNER",i.SMART_BANNER="SMART_BANNER"})(Cm||(Cm={}));var nc;(function(i){i.Loaded="interstitialAdLoaded",i.FailedToLoad="interstitialAdFailedToLoad",i.Showed="interstitialAdShowed",i.FailedToShow="interstitialAdFailedToShow",i.Dismissed="interstitialAdDismissed"})(nc||(nc={}));var kv;(function(i){i.Loaded="onRewardedInterstitialAdLoaded",i.FailedToLoad="onRewardedInterstitialAdFailedToLoad",i.Showed="onRewardedInterstitialAdShowed",i.FailedToShow="onRewardedInterstitialAdFailedToShow",i.Dismissed="onRewardedInterstitialAdDismissed",i.Rewarded="onRewardedInterstitialAdReward"})(kv||(kv={}));var mo;(function(i){i.Loaded="onRewardedVideoAdLoaded",i.FailedToLoad="onRewardedVideoAdFailedToLoad",i.Showed="onRewardedVideoAdShowed",i.FailedToShow="onRewardedVideoAdFailedToShow",i.Dismissed="onRewardedVideoAdDismissed",i.Rewarded="onRewardedVideoAdReward"})(mo||(mo={}));var jv;(function(i){i.NOT_REQUIRED="NOT_REQUIRED",i.OBTAINED="OBTAINED",i.REQUIRED="REQUIRED",i.UNKNOWN="UNKNOWN"})(jv||(jv={}));var Lv;(function(i){i[i.DISABLED=0]="DISABLED",i[i.EEA=1]="EEA",i[i.NOT_EEA=2]="NOT_EEA"})(Lv||(Lv={}));const ln=rg("AdMob",{web:()=>AE(()=>import("./web-BrdCFZ-Y.js"),[],import.meta.url).then(i=>new i.AdMobWeb)});class NS{constructor(){this.isInitialized=!1,this.config=null}async initialize(e){if(this.isInitialized){this.config={...this.config,...e};return}try{this.config=e,un.isNativePlatform()?(await ln.initialize({requestTrackingAuthorization:!0,testingDevices:e.testMode?["YOUR_DEVICE_ID"]:[],initializeForTesting:e.testMode||!1}),this.isInitialized=!0,console.log("AdMob initialized successfully")):console.log("AdMob not available on web platform")}catch(n){throw console.error("Failed to initialize AdMob:",n),n}}async showBannerAd(e){if(!this.isInitialized||!this.config)throw new Error("AdMob not initialized");if(!un.isNativePlatform())throw new Error("AdMob banners only available on native platforms");if(!this.config.bannerAdUnitId)throw new Error("bannerAdUnitId not configured");try{const n={adId:this.config.bannerAdUnitId,adSize:Cm.ADAPTIVE_BANNER,position:Nm.BOTTOM_CENTER,margin:0,isTesting:this.config.testMode||!1,...e};await ln.showBanner(n),console.log("Banner ad shown successfully")}catch(n){throw console.error("Failed to show banner ad:",n),n}}async hideBannerAd(){if(this.isInitialized&&un.isNativePlatform())try{await ln.hideBanner(),console.log("Banner ad hidden successfully")}catch(e){console.error("Failed to hide banner ad:",e)}}async resumeBannerAd(){if(this.isInitialized&&un.isNativePlatform())try{await ln.resumeBanner(),console.log("Banner ad resumed successfully")}catch(e){console.error("Failed to resume banner ad:",e)}}async removeBannerAd(){if(this.isInitialized&&un.isNativePlatform())try{await ln.removeBanner(),console.log("Banner ad removed successfully")}catch(e){console.error("Failed to remove banner ad:",e)}}async showInterstitial(){if(!this.isInitialized||!this.config)return console.warn("AdMob not initialized"),!1;if(!un.isNativePlatform())return console.warn("Interstitials are only available on native platforms"),!1;if(!this.config.interstitialAdUnitId)return console.warn("No interstitialAdUnitId configured"),!1;let e=null,n=null,s=null;try{const o=new Promise((m,g)=>{setTimeout(()=>g(new Error("Interstitial ad timeout")),3e4)}),c=new Promise(async(m,g)=>{try{e=await ln.addListener(nc.Loaded,S=>{console.log("Interstitial loaded")}),s=await ln.addListener(nc.FailedToLoad,S=>{console.error("Interstitial failed to load:",S),g(new Error("Failed to load interstitial"))});let _=null;const T=new Promise(S=>{_=S});n=await ln.addListener(nc.Dismissed,()=>{console.log("Interstitial dismissed"),_&&_()});const b={adId:this.config.interstitialAdUnitId,isTesting:this.config.testMode||!1};await ln.prepareInterstitial(b),await ln.showInterstitial(),await T,m(!0)}catch(_){g(_)}});return await Promise.race([c,o])}catch(o){return console.error("Failed to show interstitial ad:",o),!1}finally{try{e&&await e.remove(),n&&await n.remove(),s&&await s.remove()}catch(o){console.warn("Error cleaning up interstitial listeners:",o)}}}async showRewarded(){if(!this.isInitialized||!this.config)return console.warn("AdMob not initialized"),!1;if(!un.isNativePlatform())return console.warn("Rewarded ads are only available on native platforms"),!1;if(!this.config.rewardedAdUnitId)return console.warn("No rewardedAdUnitId configured"),!1;let e=null,n=null,s=null,o=null;try{const c=new Promise((g,_)=>{setTimeout(()=>_(new Error("Rewarded ad timeout")),3e4)}),d=new Promise(async(g,_)=>{try{let T=!1;e=await ln.addListener(mo.Loaded,k=>{console.log("Rewarded loaded")}),o=await ln.addListener(mo.FailedToLoad,k=>{console.error("Rewarded failed to load:",k),_(new Error("Failed to load rewarded ad"))}),n=await ln.addListener(mo.Rewarded,k=>{T=!0,console.log("User rewarded",k)});let b=null;const S=new Promise(k=>{b=k});s=await ln.addListener(mo.Dismissed,()=>{console.log("Rewarded dismissed"),b&&b()});const j={adId:this.config.rewardedAdUnitId,isTesting:this.config.testMode||!1};await ln.prepareRewardVideoAd(j),await ln.showRewardVideoAd(),await S,g(T)}catch(T){_(T)}});return await Promise.race([d,c])}catch(c){return console.error("Failed to show rewarded ad:",c),!1}finally{try{e&&await e.remove(),n&&await n.remove(),s&&await s.remove(),o&&await o.remove()}catch(c){console.warn("Error cleaning up rewarded listeners:",c)}}}async showBestMonetizingAd(){var e,n;return(e=this.config)!=null&&e.rewardedAdUnitId&&await this.showRewarded()?"rewarded":(n=this.config)!=null&&n.interstitialAdUnitId&&await this.showInterstitial()?"interstitial":"none"}isNativePlatform(){return un.isNativePlatform()}isWebPlatform(){return un.getPlatform()==="web"}getConfig(){return this.config}}const hs=new NS,CS=({pack:i,isOpen:e,onClose:n,onStartDemo:s,onAdWatched:o})=>{const[c,d]=ne.useState(!1),[m,g]=ne.useState(null);if(!e)return null;const _=async()=>{d(!0),g(null);try{await hs.showInterstitial()?(o&&o(i.id),s(),n()):g("No se pudo cargar el anuncio. Necesitas ver un anuncio para jugar el demo.")}catch(T){console.error("Error al mostrar anuncio:",T),g("Error al cargar el anuncio. Necesitas ver un anuncio para jugar el demo.")}finally{d(!1)}};return y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 animate-fade-in",children:y.jsxs(xn,{className:"w-full max-w-md relative",children:[y.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:y.jsx(mS,{className:"w-6 h-6"})}),y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"text-6xl mb-4",children:i.icon}),y.jsxs("h2",{className:"text-2xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-500",children:["Demo: ",i.name]}),y.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:y.jsxs("div",{className:"flex items-start gap-3 text-left",children:[y.jsx(gS,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),y.jsxs("div",{className:"text-sm text-blue-300",children:[y.jsx("p",{className:"mb-2",children:y.jsx("strong",{children:"Qu incluye el demo?"})}),y.jsxs("ul",{className:"space-y-1 text-xs",children:[y.jsx("li",{children:" Podrs probar 5 preguntas y 5 retos que siempre sern los mismos (el pack incluye muchos ms)"}),y.jsx("li",{children:" Puedes jugar de forma ilimitada"}),y.jsx("li",{children:" Solo necesitas ver un anuncio antes de cada partida"}),y.jsx("li",{children:" Perfecto para probar si te gusta el pack"})]})]})]})}),m&&y.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mb-4",children:y.jsx("p",{className:"text-yellow-400 text-sm",children:m})}),y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsx(Me,{onClick:_,disabled:c,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:c?y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Cargando anuncio..."]}):y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y.jsx("span",{role:"img","aria-label":"gem",children:""}),"Ver anuncio y jugar demo"]})}),y.jsx(Me,{onClick:n,variant:"secondary",className:"w-full",disabled:c,children:"Volver atrs"})]}),y.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"Te gusta el pack? Al final de la partida podrs comprarlo completo."})]})]})})},DS=({players:i,currentPlayerIndex:e,onNextPlayer:n,onNewGame:s,questions:o,dares:c,roundConfig:d,gameProgress:m,onRoundEnd:g,onQuestionAsked:_,onDareCompleted:T,onQuestionChange:b,onAdRequired:S,questionChangeState:j={changesCount:0,isAdLoading:!1,isAdPlaying:!1}})=>{const[k,K]=ne.useState(null),[H,oe]=ne.useState(null),[se,re]=ne.useState(new Set),[fe,he]=ne.useState(new Set),ae=i[e],R=ne.useMemo(()=>o.map((O,I)=>({item:O,index:I})),[o]),x=ne.useMemo(()=>c.map((O,I)=>({item:O,index:I})),[c]),N=O=>{const I=O==="pregunta"?R:x,ze=O==="pregunta"?se:fe,Ie=O==="pregunta"?re:he,z=I.filter(ee=>!ze.has(ee.index));if(z.length===0){Ie(new Set);const ee=Math.floor(Math.random()*I.length),te=I[ee];K(te.item),Ie(pe=>new Set(pe).add(te.index))}else{const ee=Math.floor(Math.random()*z.length),te=z[ee];K(te.item),Ie(pe=>new Set(pe).add(te.index))}oe(O),O==="pregunta"&&_?_():O==="reto"&&T&&T()},P=async()=>{if(!k||!H)return;if(j.changesCount>=ih.CHANGES_BEFORE_AD-1&&S)try{await S()}catch(te){console.error("Error showing ad:",te);return}const I=H==="pregunta"?R:x,ze=H==="pregunta"?se:fe,Ie=H==="pregunta"?re:he;let z=0,ee=null;for(;z<ih.MAX_CHANGE_ATTEMPTS&&!ee;){const te=I.filter(pe=>!ze.has(pe.index)&&pe.item.text!==k.text);if(te.length===0){Ie(new Set);const pe=I.filter(D=>D.item.text!==k.text);if(pe.length>0){const D=Math.floor(Math.random()*pe.length),Z=pe[D];ee=Z.item,Ie(ce=>new Set([Z.index]))}else break}else{const pe=Math.floor(Math.random()*te.length),D=te[pe];ee=D.item,Ie(Z=>new Set(Z).add(D.index))}z++}ee&&(K(ee),b&&b())},M=()=>{K(null),oe(null),e===i.length-1?m.currentRound+1>d.totalRounds?n():g():n()};return y.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center animate-fade-in",children:[y.jsxs(xn,{className:"w-full max-w-lg min-h-[24rem] flex flex-col justify-between",children:[y.jsxs("div",{children:[y.jsx("div",{className:"mb-2",children:y.jsxs("p",{className:"text-sm text-gray-500",children:["Ronda ",m.currentRound," de ",d.totalRounds]})}),y.jsx("p",{className:"text-lg text-gray-400",children:"Turno de:"}),y.jsx("h2",{className:"text-4xl font-bold my-4 text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400",children:ae})]}),k?y.jsxs("div",{className:"animate-fade-in",children:[y.jsx("h3",{className:"text-2xl font-bold mb-6 text-cyan-400 capitalize",children:H}),y.jsx("p",{className:"text-xl md:text-2xl leading-relaxed",children:k.text}),y.jsxs("div",{className:"mt-6 flex flex-col items-center gap-2",children:[y.jsxs(Me,{onClick:P,variant:"secondary",className:"text-sm px-4 py-2",disabled:j.isAdLoading||j.isAdPlaying,children:[" Cambiar ",H]}),y.jsxs("p",{className:"text-xs text-gray-500",children:["Cambios restantes antes del anuncio: ",ih.CHANGES_BEFORE_AD-j.changesCount%ih.CHANGES_BEFORE_AD]}),(j.isAdLoading||j.isAdPlaying)&&y.jsx("p",{className:"text-xs text-yellow-400",children:j.isAdLoading?"Cargando anuncio...":"Reproduciendo anuncio..."})]})]}):y.jsxs("div",{className:"animate-fade-in",children:[y.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Verdad o Reto?"}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[y.jsx(Me,{onClick:()=>N("pregunta"),className:"w-full sm:w-auto",children:"Pregunta"}),y.jsx(Me,{onClick:()=>N("reto"),variant:"secondary",className:"w-full sm:w-auto",children:"Reto"})]})]}),y.jsx("div",{className:"mt-8",children:k&&y.jsx(Me,{onClick:M,children:"Siguiente Jugador"})})]}),y.jsx("button",{onClick:s,className:"mt-6 text-sm text-gray-500 hover:text-gray-300 transition",children:"Empezar nuevo juego"})]})},PS=({onSelectRounds:i,onBack:e})=>{const n=[{value:5,label:"5 Rondas",description:"Partida rpida (15-20 min)"},{value:10,label:"10 Rondas",description:"Partida estndar (30-40 min)"},{value:15,label:"15 Rondas",description:"Partida larga (45-60 min)"}];return y.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 animate-fade-in",children:y.jsxs(xn,{className:"w-full max-w-2xl text-center",children:[y.jsx("h1",{className:"text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Configurar Partida"}),y.jsx("p",{className:"text-gray-400 mb-8",children:"Elige cuntas rondas quieres jugar"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:n.map(s=>y.jsxs("div",{className:"relative p-6 rounded-lg border border-gray-600 bg-gray-800/50 hover:border-purple-500 transition-all duration-200 cursor-pointer group",onClick:()=>i(s.value),children:[y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:s.value}),y.jsx("div",{className:"text-lg font-semibold text-white mb-2",children:s.label}),y.jsx("div",{className:"text-sm text-gray-400",children:s.description})]}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]},s.value))}),y.jsx("div",{className:"text-sm text-gray-500 mb-6",children:" Al final de cada ronda se mostrar un anuncio breve"}),y.jsx("div",{className:"flex gap-4 justify-center",children:y.jsx(Me,{onClick:e,variant:"secondary",className:"px-6",children:"Volver"})})]})})},xE=({dataAdSlot:i,className:e,style:n,fallbackContent:s,timeout:o=5e3,admobConfig:c})=>{const[d,m]=ne.useState("loading"),[g,_]=ne.useState(!1),[T,b]=ne.useState(!1);return ne.useEffect(()=>{let S,j=null,k=!0;return(async()=>{try{S=setTimeout(()=>{k&&d==="loading"&&(console.warn("Ad loading timeout reached"),m("timeout"),_(!0))},o);const H=un.isNativePlatform();if(b(H),H&&c)try{await hs.initialize({...c,bannerAdUnitId:i}),await hs.showBannerAd(),k&&(m("loaded"),clearTimeout(S));return}catch(oe){console.warn("AdMob failed:",oe),k&&(m("error"),_(!0),clearTimeout(S));return}if(typeof window<"u"&&!H){let oe=0;const se=10,re=()=>{if(k)if(window.adsbygoogle||oe>=se)try{(window.adsbygoogle=window.adsbygoogle||[]).push({}),setTimeout(()=>{if(k){if(j=document.querySelector(`[data-ad-slot="${i}"]`),j){const fe=j.innerHTML;fe&&fe.trim()!==""?m("loaded"):(m("error"),_(!0))}else m("error"),_(!0);clearTimeout(S)}},2e3)}catch(fe){console.error("Error loading AdSense ad:",fe),k&&(m("error"),_(!0),clearTimeout(S))}else oe++,setTimeout(re,200)};re()}else H&&!c&&(console.warn("Native platform detected but no AdMob config provided"),k&&(m("error"),_(!0),clearTimeout(S)))}catch(H){console.error("Error in ad loading process:",H),k&&(m("error"),_(!0),clearTimeout(S))}})(),()=>{k=!1,S&&clearTimeout(S),T&&d==="loaded"&&hs.removeBannerAd().catch(console.error)}},[i,o,c]),g?y.jsx("div",{className:`ad-fallback ${e||""}`,style:n,children:s||y.jsx("div",{className:"ad-fallback-message"})}):y.jsxs("div",{className:`ad-container ${e||""}`,style:n,children:[d==="loading"&&y.jsx("div",{className:"ad-loading",children:y.jsx("div",{className:"loading-spinner"})}),y.jsx("ins",{className:"adsbygoogle",style:{display:d==="loaded"?"block":"none",textAlign:"center",width:"100%",height:"auto"},"data-ad-client":"ca-pub-XXXXXXXXXXXXXXXX","data-ad-slot":i,"data-ad-format":"auto","data-full-width-responsive":"true"})]})},OS=({roundStats:i,currentRound:e,totalRounds:n,onContinue:s,onEndGame:o,hasNoAds:c=!1})=>{var k;const[d,m]=ne.useState(!1),[g,_]=ne.useState(!1),[T,b]=ne.useState(5);ne.useEffect(()=>{let K=!0;const H=async()=>{try{await hs.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),m(!0);const re=await hs.showInterstitial();K&&(_(!0),console.log("Anuncio intersticial mostrado:",re))}catch(re){console.warn("Fallo al mostrar anuncio nativo:",re),K&&(m(!0),_(!0))}};if(!c&&un.isNativePlatform())return H(),()=>{K=!1};if(c){m(!0),_(!0);return}const oe=setTimeout(()=>{m(!0)},800);let se;return d&&!g&&(se=setInterval(()=>{b(re=>re<=1?(_(!0),se&&clearInterval(se),0):re-1)},1e3)),()=>{clearTimeout(oe),se&&clearInterval(se)}},[c,d,g]);const S=e>=n,j=un.isNativePlatform();return y.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:y.jsxs(xn,{className:"w-full max-w-2xl text-center",children:[y.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-green-500 to-blue-500",children:S?"Partida Completada!":`Ronda ${i.roundNumber} Completada!`}),!S&&y.jsxs("p",{className:"text-gray-400 mb-6",children:["Ronda ",e," de ",n]}),y.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-6",children:[y.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Estadsticas de la Ronda"}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-2xl font-bold text-blue-400",children:i.questionsAsked}),y.jsx("div",{className:"text-sm text-gray-400",children:"Preguntas"})]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-2xl font-bold text-purple-400",children:i.daresCompleted}),y.jsx("div",{className:"text-sm text-gray-400",children:"Retos"})]})]}),y.jsxs("div",{className:"mt-4",children:[y.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Jugadores participantes:"}),y.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:((k=i.playersParticipated)==null?void 0:k.map((K,H)=>y.jsx("span",{className:"px-3 py-1 bg-purple-600 text-white rounded-full text-sm",children:K},H)))||y.jsx("span",{className:"text-gray-400 text-sm",children:"No hay jugadores registrados"})})]})]}),!c&&y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[y.jsxs("div",{className:"text-center mb-4",children:[y.jsx("div",{className:"text-lg font-semibold mb-2",children:" Anuncio"}),g?y.jsx("div",{className:"text-green-400 mb-4",children:" Anuncio completado"}):y.jsxs("div",{className:"mb-4",children:[y.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",j?"":`${T}s`]}),!j&&y.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:y.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-T)/5*100}%`}})})]})]}),!j&&y.jsx(xE,{dataAdSlot:"1234567890",className:"round-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},fallbackContent:y.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),y.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:S?y.jsx(Me,{onClick:o,className:"px-8 py-3 text-lg",disabled:!c&&!g,children:"Ver Resultados Finales"}):y.jsxs(y.Fragment,{children:[y.jsx(Me,{onClick:o,variant:"secondary",className:"px-6",disabled:!c&&!g,children:"Terminar Partida"}),y.jsx(Me,{onClick:s,className:"px-8 py-3 text-lg",disabled:!c&&!g,children:"Siguiente Ronda"})]})}),!g&&y.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Los botones se habilitarn cuando termine el anuncio"})]})})},MS=({gameStats:i,players:e,onNewGame:n,onBackToMenu:s,hasNoAds:o=!1,isDemoMode:c=!1,demoPackId:d=null})=>{const m=i.gameEndTime&&i.gameStartTime?Math.round((i.gameEndTime.getTime()-i.gameStartTime.getTime())/1e3/60):0,g=i.totalRounds>0?Math.round(i.totalQuestions/i.totalRounds):0,_=i.totalRounds>0?Math.round(i.totalDares/i.totalRounds):0,[T,b]=ne.useState(!1),[S,j]=ne.useState(!1),[k,K]=ne.useState(5),H=un.isNativePlatform();return ne.useEffect(()=>{let oe=!0;const se=async()=>{try{await hs.initialize({appId:"ca-app-pub-9300246128306730~2733575476",interstitialAdUnitId:"ca-app-pub-9300246128306730/5383789546",testMode:!0}),j(!0);const he=await hs.showInterstitial();oe&&(b(!0),console.log("Anuncio intersticial al final de partida mostrado:",he))}catch(he){console.warn("Error mostrando anuncio al final de partida:",he),oe&&(j(!0),b(!0))}};if(!o&&H)return se(),()=>{oe=!1};if(o){b(!0),j(!0);return}const re=setTimeout(()=>j(!0),800);let fe;return S&&!T&&(fe=setInterval(()=>{K(he=>he<=1?(b(!0),fe&&clearInterval(fe),0):he-1)},1e3)),()=>{clearTimeout(re),fe&&clearInterval(fe)}},[o,H,S,T]),y.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] p-4 animate-fade-in",children:y.jsxs(xn,{className:"w-full max-w-4xl text-center",children:[y.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500",children:" Partida Finalizada! "}),y.jsx("p",{className:"text-gray-400 mb-8 text-base sm:text-lg",children:"Esperamos que se hayan divertido mucho!"}),!o&&y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[y.jsxs("div",{className:"text-center mb-4",children:[y.jsx("div",{className:"text-lg font-semibold mb-2",children:" Anuncio"}),T?y.jsx("div",{className:"text-green-400 mb-4",children:" Anuncio completado"}):y.jsxs("div",{className:"mb-4",children:[y.jsxs("div",{className:"text-gray-400 mb-2",children:["Viendo anuncio... ",H?"":`${k}s`]}),!H&&y.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:y.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-1000",style:{width:`${(5-k)/5*100}%`}})})]})]}),!H&&y.jsx(xE,{dataAdSlot:"1234567890",className:"game-end-ad",style:{minHeight:"250px",width:"100%",maxWidth:"728px",margin:"0 auto"},fallbackContent:y.jsx("div",{className:"text-center text-gray-500 py-4"}),timeout:8e3})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[y.jsxs("div",{className:"bg-gradient-to-br from-blue-600/20 to-blue-800/20 rounded-lg p-6 border border-blue-500/30",children:[y.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-blue-400 mb-2",children:i.totalRounds}),y.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Rondas Jugadas"}),y.jsxs("div",{className:"text-sm text-gray-400",children:[m," minutos"]})]}),y.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-purple-800/20 rounded-lg p-6 border border-purple-500/30",children:[y.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-purple-400 mb-2",children:i.totalQuestions}),y.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Preguntas"}),y.jsxs("div",{className:"text-sm text-gray-400",children:[g," por ronda"]})]}),y.jsxs("div",{className:"bg-gradient-to-br from-pink-600/20 to-pink-800/20 rounded-lg p-6 border border-pink-500/30",children:[y.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-pink-400 mb-2",children:i.totalDares}),y.jsx("div",{className:"text-base sm:text-lg text-white mb-1",children:"Retos"}),y.jsxs("div",{className:"text-sm text-gray-400",children:[_," por ronda"]})]})]}),y.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[y.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Jugadores Participantes"}),y.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:e.map((oe,se)=>y.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full",children:[y.jsx("span",{className:"text-lg",children:""}),y.jsx("span",{className:"font-medium",children:oe})]},se))})]}),i.roundStats.length>0&&y.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8",children:[y.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-white",children:"Resumen por Rondas"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.roundStats.map((oe,se)=>{var re;return y.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 border border-gray-600",children:[y.jsxs("div",{className:"text-base sm:text-lg font-semibold text-purple-400 mb-2",children:["Ronda ",oe.roundNumber]}),y.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[y.jsxs("div",{children:[" ",oe.questionsAsked," preguntas"]}),y.jsxs("div",{children:[" ",oe.daresCompleted," retos"]}),y.jsxs("div",{children:[" ",((re=oe.playersParticipated)==null?void 0:re.length)||0," jugadores"]})]})]},se)})})]}),c?y.jsxs("div",{className:"bg-gradient-to-r from-yellow-600/20 to-orange-600/20 rounded-lg p-6 mb-8 border border-yellow-500/30",children:[y.jsx("div",{className:"text-3xl mb-3",children:""}),y.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"Demo Completado!"}),y.jsx("p",{className:"text-gray-300 mb-4",children:"Te gust este pack? Hay muchas ms preguntas y retos esperndote!"}),y.jsxs("div",{className:"bg-yellow-500/10 rounded-lg p-4 border border-yellow-500/30",children:[y.jsx("p",{className:"text-yellow-200 font-medium mb-2",children:" Sabas que?"}),y.jsx("p",{className:"text-gray-300 text-sm",children:"El pack completo incluye ms de 50 preguntas y retos nicos, perfectos para cualquier ocasin!"})]}),y.jsx("div",{className:"mt-4",children:y.jsx(Me,{onClick:s,className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-semibold rounded-lg",children:" Ir a la Tienda!"})})]}):y.jsxs("div",{className:"bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-lg p-6 mb-8 border border-purple-500/30",children:[y.jsx("div",{className:"text-2xl mb-2",children:""}),y.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Gracias por jugar!"}),y.jsx("p",{className:"text-gray-300",children:"Esperamos que hayan creado recuerdos increbles. No olviden compartir sus mejores momentos!"})]}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[y.jsx(Me,{onClick:n,className:"px-8 py-3 text-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",disabled:!o&&!T,children:" Nueva Partida"}),y.jsx(Me,{onClick:s,variant:"secondary",className:"px-8 py-3 text-lg",disabled:!o&&!T,children:" Men Principal"})]}),y.jsxs("div",{className:"mt-8 text-xs text-gray-500",children:[y.jsx("p",{children:"Te gust el juego? Comprtelo con tus amigos!"}),y.jsx("p",{className:"mt-1",children:"Verdad o Reto - La diversin nunca termina"})]})]})})},VS=()=>{};var Uv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},kS=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],d=i[n++],m=i[n++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},IE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const c=i[o],d=o+1<i.length,m=d?i[o+1]:0,g=o+2<i.length,_=g?i[o+2]:0,T=c>>2,b=(c&3)<<4|m>>4;let S=(m&15)<<2|_>>6,j=_&63;g||(j=64,d||(S=64)),s.push(n[T],n[b],n[S],n[j])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(RE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):kS(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const _=o<i.length?n[i.charAt(o)]:64;++o;const b=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||m==null||_==null||b==null)throw new jS;const S=c<<2|m>>4;if(s.push(S),_!==64){const j=m<<4&240|_>>2;if(s.push(j),b!==64){const k=_<<6&192|b;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class jS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LS=function(i){const e=RE(i);return IE.encodeByteArray(e,!0)},bh=function(i){return LS(i).replace(/\./g,"")},NE=function(i){try{return IE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=()=>US().__FIREBASE_DEFAULTS__,qS=()=>{if(typeof process>"u"||typeof Uv>"u")return;const i=Uv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},BS=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&NE(i[1]);return e&&JSON.parse(e)},Gh=()=>{try{return VS()||zS()||qS()||BS()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},CE=i=>{var e,n;return(n=(e=Gh())==null?void 0:e.emulatorHosts)==null?void 0:n[i]},HS=i=>{const e=CE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},DE=()=>{var i;return(i=Gh())==null?void 0:i.config},PE=i=>{var e;return(e=Gh())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function OE(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[bh(JSON.stringify(n)),bh(JSON.stringify(d)),""].join(".")}const rc={};function QS(){const i={prod:[],emulator:[]};for(const e of Object.keys(rc))rc[e]?i.emulator.push(e):i.prod.push(e);return i}function KS(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let zv=!1;function ME(i,e){if(typeof window>"u"||typeof document>"u"||!Do(window.location.host)||rc[i]===e||rc[i]||zv)return;rc[i]=e;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",c=QS().prod.length>0;function d(){const S=document.getElementById(s);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,j){S.setAttribute("width","24"),S.setAttribute("id",j),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function _(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{zv=!0,d()},S}function T(S,j){S.setAttribute("id",j),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function b(){const S=KS(s),j=n("text"),k=document.getElementById(j)||document.createElement("span"),K=n("learnmore"),H=document.getElementById(K)||document.createElement("a"),oe=n("preprendIcon"),se=document.getElementById(oe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const re=S.element;m(re),T(H,K);const fe=_();g(se,oe),re.append(se,k,H,fe),document.body.appendChild(re)}c?(k.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function XS(){var e;const i=(e=Gh())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $S(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WS(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function ZS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JS(){const i=fn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function ex(){return!XS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tx(){try{return typeof indexedDB=="object"}catch{return!1}}function nx(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="FirebaseError";class xi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=rx,Object.setPrototypeOf(this,xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wc.prototype.create)}}class wc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?ix(c,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new xi(o,m,s)}}function ix(i,e){return i.replace(sx,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const sx=/\{\$([^}]+)}/g;function ax(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function la(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=i[o],d=e[o];if(qv(c)&&qv(d)){if(!la(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function qv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Xl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,c]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function $l(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function ox(i,e){const n=new lx(i,e);return n.subscribe.bind(n)}class lx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");cx(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=ym),o.error===void 0&&(o.error=ym),o.complete===void 0&&(o.complete=ym);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cx(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function ym(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(i){return i&&i._delegate?i._delegate:i}class ca{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new FS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dx(e))try{this.getOrInitializeService({instanceIdentifier:sa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sa){return this.instances.has(e)}getOptions(e=sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:hx(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=sa){return this.component?this.component.multipleInstances?e:sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hx(i){return i===sa?void 0:i}function dx(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ux(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(je||(je={}));const mx={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},gx=je.INFO,px={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},yx=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=px[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ig{constructor(e){this.name=e,this._logLevel=gx,this._logHandler=yx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const _x=(i,e)=>e.some(n=>i instanceof n);let Bv,Hv;function vx(){return Bv||(Bv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ex(){return Hv||(Hv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VE=new WeakMap,Dm=new WeakMap,kE=new WeakMap,_m=new WeakMap,sg=new WeakMap;function Tx(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{n(ds(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&VE.set(n,i)}).catch(()=>{}),sg.set(e,i),e}function wx(i){if(Dm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});Dm.set(i,e)}let Pm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Dm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||kE.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ds(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function bx(i){Pm=i(Pm)}function Ax(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(vm(this),e,...n);return kE.set(s,e.sort?e.sort():[e]),ds(s)}:Ex().includes(i)?function(...e){return i.apply(vm(this),e),ds(VE.get(this))}:function(...e){return ds(i.apply(vm(this),e))}}function Sx(i){return typeof i=="function"?Ax(i):(i instanceof IDBTransaction&&wx(i),_x(i,vx())?new Proxy(i,Pm):i)}function ds(i){if(i instanceof IDBRequest)return Tx(i);if(_m.has(i))return _m.get(i);const e=Sx(i);return e!==i&&(_m.set(i,e),sg.set(e,i)),e}const vm=i=>sg.get(i);function xx(i,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(i,e),m=ds(d);return s&&d.addEventListener("upgradeneeded",g=>{s(ds(d.result),g.oldVersion,g.newVersion,ds(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const Rx=["get","getKey","getAll","getAllKeys","count"],Ix=["put","add","delete","clear"],Em=new Map;function Fv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Em.get(e))return Em.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=Ix.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Rx.includes(n)))return;const c=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let _=g.store;return s&&(_=_.index(m.shift())),(await Promise.all([_[n](...m),o&&g.done]))[0]};return Em.set(e,c),c}bx(i=>({...i,get:(e,n,s)=>Fv(e,n)||i.get(e,n,s),has:(e,n)=>!!Fv(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Cx(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Cx(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Om="@firebase/app",Gv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new ig("@firebase/app"),Dx="@firebase/app-compat",Px="@firebase/analytics-compat",Ox="@firebase/analytics",Mx="@firebase/app-check-compat",Vx="@firebase/app-check",kx="@firebase/auth",jx="@firebase/auth-compat",Lx="@firebase/database",Ux="@firebase/data-connect",zx="@firebase/database-compat",qx="@firebase/functions",Bx="@firebase/functions-compat",Hx="@firebase/installations",Fx="@firebase/installations-compat",Gx="@firebase/messaging",Qx="@firebase/messaging-compat",Kx="@firebase/performance",Yx="@firebase/performance-compat",Xx="@firebase/remote-config",$x="@firebase/remote-config-compat",Wx="@firebase/storage",Zx="@firebase/storage-compat",Jx="@firebase/firestore",e1="@firebase/ai",t1="@firebase/firestore-compat",n1="firebase",r1="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="[DEFAULT]",i1={[Om]:"fire-core",[Dx]:"fire-core-compat",[Ox]:"fire-analytics",[Px]:"fire-analytics-compat",[Vx]:"fire-app-check",[Mx]:"fire-app-check-compat",[kx]:"fire-auth",[jx]:"fire-auth-compat",[Lx]:"fire-rtdb",[Ux]:"fire-data-connect",[zx]:"fire-rtdb-compat",[qx]:"fire-fn",[Bx]:"fire-fn-compat",[Hx]:"fire-iid",[Fx]:"fire-iid-compat",[Gx]:"fire-fcm",[Qx]:"fire-fcm-compat",[Kx]:"fire-perf",[Yx]:"fire-perf-compat",[Xx]:"fire-rc",[$x]:"fire-rc-compat",[Wx]:"fire-gcs",[Zx]:"fire-gcs-compat",[Jx]:"fire-fst",[t1]:"fire-fst-compat",[e1]:"fire-vertex","fire-js":"fire-js",[n1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new Map,s1=new Map,Vm=new Map;function Qv(i,e){try{i.container.addComponent(e)}catch(n){Ei.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function bo(i){const e=i.name;if(Vm.has(e))return Ei.debug(`There were multiple attempts to register component ${e}.`),!1;Vm.set(e,i);for(const n of Ah.values())Qv(n,i);for(const n of s1.values())Qv(n,i);return!0}function ag(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Sn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fs=new wc("app","Firebase",a1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ca("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=r1;function jE(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:Mm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw fs.create("bad-app-name",{appName:String(o)});if(n||(n=DE()),!n)throw fs.create("no-options");const c=Ah.get(o);if(c){if(la(n,c.options)&&la(s,c.config))return c;throw fs.create("duplicate-app",{appName:o})}const d=new fx(o);for(const g of Vm.values())d.addComponent(g);const m=new o1(n,s,d);return Ah.set(o,m),m}function LE(i=Mm){const e=Ah.get(i);if(!e&&i===Mm&&DE())return jE();if(!e)throw fs.create("no-app",{appName:i});return e}function ms(i,e,n){let s=i1[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ei.warn(d.join(" "));return}bo(new ca(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="firebase-heartbeat-database",c1=1,uc="firebase-heartbeat-store";let Tm=null;function UE(){return Tm||(Tm=xx(l1,c1,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(uc)}catch(n){console.warn(n)}}}}).catch(i=>{throw fs.create("idb-open",{originalErrorMessage:i.message})})),Tm}async function u1(i){try{const n=(await UE()).transaction(uc),s=await n.objectStore(uc).get(zE(i));return await n.done,s}catch(e){if(e instanceof xi)Ei.warn(e.message);else{const n=fs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ei.warn(n.message)}}}async function Kv(i,e){try{const s=(await UE()).transaction(uc,"readwrite");await s.objectStore(uc).put(e,zE(i)),await s.done}catch(n){if(n instanceof xi)Ei.warn(n.message);else{const s=fs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ei.warn(s.message)}}}function zE(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=1024,d1=30;class f1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new g1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Yv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>d1){const d=p1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ei.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Yv(),{heartbeatsToSend:s,unsentEntries:o}=m1(this._heartbeatsCache.heartbeats),c=bh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Ei.warn(n),""}}}function Yv(){return new Date().toISOString().substring(0,10)}function m1(i,e=h1){const n=[];let s=i.slice();for(const o of i){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),Xv(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Xv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class g1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tx()?nx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await u1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Kv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Kv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Xv(i){return bh(JSON.stringify({version:2,heartbeats:i})).length}function p1(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(i){bo(new ca("platform-logger",e=>new Nx(e),"PRIVATE")),bo(new ca("heartbeat",e=>new f1(e),"PRIVATE")),ms(Om,Gv,i),ms(Om,Gv,"esm2020"),ms("fire-js","")}y1("");function qE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _1=qE,BE=new wc("auth","Firebase",qE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new ig("@firebase/auth");function v1(i,...e){Sh.logLevel<=je.WARN&&Sh.warn(`Auth (${Po}): ${i}`,...e)}function fh(i,...e){Sh.logLevel<=je.ERROR&&Sh.error(`Auth (${Po}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(i,...e){throw lg(i,...e)}function cr(i,...e){return lg(i,...e)}function og(i,e,n){const s={..._1(),[e]:n};return new wc("auth","Firebase",s).create(e,{appName:i.name})}function Cr(i){return og(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function E1(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&tr(i,"argument-error"),og(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lg(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return BE.create(i,...e)}function Se(i,e,...n){if(!i)throw lg(e,...n)}function _i(i){const e="INTERNAL ASSERTION FAILED: "+i;throw fh(e),new Error(e)}function Ti(i,e){i||_i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function T1(){return $v()==="http:"||$v()==="https:"}function $v(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(T1()||WS()||"connection"in navigator)?navigator.onLine:!0}function b1(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ti(n>e,"Short delay should be less than long delay!"),this.isMobile=YS()||ZS()}get(){return w1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(i,e){Ti(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],x1=new Ac(3e4,6e4);function Ri(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function jr(i,e,n,s,o={}){return FE(i,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const m=bc({key:i.config.apiKey,...d}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const _={method:e,headers:g,...c};return $S()||(_.referrerPolicy="no-referrer"),i.emulatorConfig&&Do(i.emulatorConfig.host)&&(_.credentials="include"),HE.fetch()(await GE(i,i.config.apiHost,n,m),_)})}async function FE(i,e,n){i._canInitEmulator=!1;const s={...A1,...e};try{const o=new I1(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw sh(i,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw sh(i,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw sh(i,"email-already-in-use",d);if(g==="USER_DISABLED")throw sh(i,"user-disabled",d);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw og(i,T,_);tr(i,T)}}catch(o){if(o instanceof xi)throw o;tr(i,"network-request-failed",{message:String(o)})}}async function Sc(i,e,n,s,o={}){const c=await jr(i,e,n,s,o);return"mfaPendingCredential"in c&&tr(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function GE(i,e,n,s){const o=`${e}${n}?${s}`,c=i,d=c.config.emulator?cg(i.config,o):`${i.config.apiScheme}://${o}`;return S1.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function R1(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class I1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(cr(this.auth,"network-request-failed")),x1.get())})}}function sh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=cr(i,e,s);return o.customData._tokenResponse=n,o}function Wv(i){return i!==void 0&&i.enterprise!==void 0}class N1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return R1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function C1(i,e){return jr(i,"GET","/v2/recaptchaConfig",Ri(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(i,e){return jr(i,"POST","/v1/accounts:delete",e)}async function xh(i,e){return jr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function P1(i,e=!1){const n=vt(i),s=await n.getIdToken(e),o=ug(s);Se(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:s,authTime:ic(wm(o.auth_time)),issuedAtTime:ic(wm(o.iat)),expirationTime:ic(wm(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function wm(i){return Number(i)*1e3}function ug(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return fh("JWT malformed, contained fewer than 3 sections"),null;try{const o=NE(n);return o?JSON.parse(o):(fh("Failed to decode base64 JWT payload"),null)}catch(o){return fh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Zv(i){const e=ug(i);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof xi&&O1(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function O1({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ic(this.lastLoginAt),this.creationTime=ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rh(i){var b;const e=i.auth,n=await i.getIdToken(),s=await Ao(i,xh(e,{idToken:n}));Se(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const c=(b=o.providerUserInfo)!=null&&b.length?QE(o.providerUserInfo):[],d=k1(i.providerData,c),m=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!(d!=null&&d.length),_=m?g:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new jm(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(i,T)}async function V1(i){const e=vt(i);await Rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function k1(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function QE(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j1(i,e){const n=await FE(i,{},async()=>{const s=bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,d=await GE(i,o,"/v1/token",`key=${c}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return i.emulatorConfig&&Do(i.emulatorConfig.host)&&(g.credentials="include"),HE.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function L1(i,e){return jr(i,"POST","/v2/accounts:revokeToken",Ri(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const n=Zv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await j1(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,d=new yo;return s&&(Se(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Se(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yo,this.toJSON())}_performRefresh(){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(i,e){Se(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class lr{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new M1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new jm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ao(this,this.stsTokenManager.getToken(this.auth,e));return Se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return P1(this,e)}reload(){return V1(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new lr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Rh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sn(this.auth.app))return Promise.reject(Cr(this.auth));const e=await this.getIdToken();return await Ao(this,D1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,_=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:b,emailVerified:S,isAnonymous:j,providerData:k,stsTokenManager:K}=n;Se(b&&K,e,"internal-error");const H=yo.fromJSON(this.name,K);Se(typeof b=="string",e,"internal-error"),as(s,e.name),as(o,e.name),Se(typeof S=="boolean",e,"internal-error"),Se(typeof j=="boolean",e,"internal-error"),as(c,e.name),as(d,e.name),as(m,e.name),as(g,e.name),as(_,e.name),as(T,e.name);const oe=new lr({uid:b,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:j,photoURL:d,phoneNumber:c,tenantId:m,stsTokenManager:H,createdAt:_,lastLoginAt:T});return k&&Array.isArray(k)&&(oe.providerData=k.map(se=>({...se}))),g&&(oe._redirectEventId=g),oe}static async _fromIdTokenResponse(e,n,s=!1){const o=new yo;o.updateFromServerResponse(n);const c=new lr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Rh(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Se(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?QE(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),m=new yo;m.updateFromIdToken(s);const g=new lr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new jm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=new Map;function vi(i){Ti(i instanceof Function,"Expected a class definition");let e=Jv.get(i);return e?(Ti(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Jv.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}KE.type="NONE";const e0=KE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(i,e,n){return`firebase:${i}:${e}:${n}`}class _o{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=mh(this.userKey,o.apiKey,c),this.fullPersistenceKey=mh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await xh(this.auth,{idToken:e}).catch(()=>{});return n?lr._fromGetAccountInfoResponse(this.auth,n,e):null}return lr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new _o(vi(e0),e,s);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=o[0]||vi(e0);const d=mh(s,e.config.apiKey,e.name);let m=null;for(const _ of n)try{const T=await _._get(d);if(T){let b;if(typeof T=="string"){const S=await xh(e,{idToken:T}).catch(()=>{});if(!S)break;b=await lr._fromGetAccountInfoResponse(e,S,T)}else b=lr._fromJSON(e,T);_!==c&&(m=b),c=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new _o(c,e,s):(c=g[0],m&&await c._set(d,m.toJSON()),await Promise.all(n.map(async _=>{if(_!==c)try{await _._remove(d)}catch{}})),new _o(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(JE(e))return"Blackberry";if(eT(e))return"Webos";if(XE(e))return"Safari";if((e.includes("chrome/")||$E(e))&&!e.includes("edge/"))return"Chrome";if(ZE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function YE(i=fn()){return/firefox\//i.test(i)}function XE(i=fn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $E(i=fn()){return/crios\//i.test(i)}function WE(i=fn()){return/iemobile/i.test(i)}function ZE(i=fn()){return/android/i.test(i)}function JE(i=fn()){return/blackberry/i.test(i)}function eT(i=fn()){return/webos/i.test(i)}function hg(i=fn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function U1(i=fn()){var e;return hg(i)&&!!((e=window.navigator)!=null&&e.standalone)}function z1(){return JS()&&document.documentMode===10}function tT(i=fn()){return hg(i)||ZE(i)||eT(i)||JE(i)||/windows phone/i.test(i)||WE(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(i,e=[]){let n;switch(i){case"Browser":n=t0(fn());break;case"Worker":n=`${t0(fn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Po}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,m)=>{try{const g=e(c);d(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(i,e={}){return jr(i,"GET","/v2/passwordPolicy",Ri(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=6;class F1{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??H1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new n0(this),this.idTokenSubscription=new n0(this),this.beforeStateQueue=new q1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vi(n)),this._initializationPromise=this.queue(async()=>{var s,o,c;if(!this._deleted&&(this.persistenceManager=await _o.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xh(this,{idToken:e}),s=await lr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Sn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,m=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===m)&&(g!=null&&g.user)&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(d){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=b1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sn(this.app))return Promise.reject(Cr(this));const n=e?vt(e):null;return n&&Se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sn(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sn(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await B1(this),n=new F1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await L1(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vi(e)||this._popupRedirectResolver;Se(n,this,"argument-error"),this.redirectPersistenceManager=await _o.create(this,[vi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(Sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&v1(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Lr(i){return vt(i)}class n0{constructor(e){this.auth=e,this.observer=null,this.addObserver=ox(n=>this.observer=n)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Q1(i){Qh=i}function rT(i){return Qh.loadJS(i)}function K1(){return Qh.recaptchaEnterpriseScript}function Y1(){return Qh.gapiScript}function X1(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class $1{constructor(){this.enterprise=new W1}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class W1{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Z1="recaptcha-enterprise",iT="NO_RECAPTCHA";class J1{constructor(e){this.type=Z1,this.auth=Lr(e)}async verify(e="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{C1(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new N1(g);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,d(_.siteKey)}}).catch(g=>{m(g)})})}function o(c,d,m){const g=window.grecaptcha;Wv(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(_=>{d(_)}).catch(()=>{d(iT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $1().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(m=>{if(!n&&Wv(window.grecaptcha))o(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=K1();g.length!==0&&(g+=m),rT(g).then(()=>{o(m,c,d)}).catch(_=>{d(_)})}}).catch(m=>{d(m)})})}}async function r0(i,e,n,s=!1,o=!1){const c=new J1(i);let d;if(o)d=iT;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Ih(i,e,n,s,o){var c;if((c=i._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await r0(i,e,n,n==="getOobCode");return s(i,d)}else return s(i,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await r0(i,e,n,n==="getOobCode");return s(i,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(i,e){const n=ag(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(la(c,e??{}))return o;tr(o,"already-initialized")}return n.initialize({options:e})}function tR(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(vi);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function nR(i,e,n){const s=Lr(i);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=sT(e),{host:d,port:m}=rR(e),g=m===null?"":`:${m}`,_={url:`${c}//${d}${g}/`},T=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(la(_,s.config.emulator)&&la(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,Do(d)?(OE(`${c}//${d}${g}`),ME("Auth",!0)):iR()}function sT(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function rR(i){const e=sT(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:i0(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:i0(d)}}}function i0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function iR(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,n){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}async function sR(i,e){return jr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(i,e){return Sc(i,"POST","/v1/accounts:signInWithPassword",Ri(i,e))}async function aT(i,e){return jr(i,"POST","/v1/accounts:sendOobCode",Ri(i,e))}async function oR(i,e){return aT(i,e)}async function lR(i,e){return aT(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(i,e){return Sc(i,"POST","/v1/accounts:signInWithEmailLink",Ri(i,e))}async function uR(i,e){return Sc(i,"POST","/v1/accounts:signInWithEmailLink",Ri(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends dg{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new hc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new hc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ih(e,n,"signInWithPassword",aR);case"emailLink":return cR(e,{email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ih(e,s,"signUpPassword",sR);case"emailLink":return uR(e,{idToken:n,email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vo(i,e){return Sc(i,"POST","/v1/accounts:signInWithIdp",Ri(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="http://localhost";class ua extends dg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ua(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):tr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=n;if(!s||!o)return null;const d=new ua(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return vo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,vo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vo(e,n)}buildRequest(){const e={requestUri:hR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fR(i){const e=Xl($l(i)).link,n=e?Xl($l(e)).deep_link_id:null,s=Xl($l(i)).deep_link_id;return(s?Xl($l(s)).link:null)||s||n||e||i}class fg{constructor(e){const n=Xl($l(e)),s=n.apiKey??null,o=n.oobCode??null,c=dR(n.mode??null);Se(s&&o&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=fR(e);try{return new fg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,n){return hc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=fg.parseLink(n);return Se(s,"argument-error"),hc._fromEmailAndCode(e,s.code,s.tenantId)}}Oo.PROVIDER_ID="password";Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends mg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends xc{constructor(){super("facebook.com")}static credential(e){return ua._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.FACEBOOK_SIGN_IN_METHOD="facebook.com";os.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ua._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return yi.credential(n,s)}catch{return null}}}yi.GOOGLE_SIGN_IN_METHOD="google.com";yi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends xc{constructor(){super("github.com")}static credential(e){return ua._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.GITHUB_SIGN_IN_METHOD="github.com";ls.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends xc{constructor(){super("twitter.com")}static credential(e,n){return ua._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return cs.credential(n,s)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oT(i,e){return Sc(i,"POST","/v1/accounts:signUp",Ri(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await lr._fromIdTokenResponse(e,s,o),d=s0(s);return new wi({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=s0(s);return new wi({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function s0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mR(i){var o;if(Sn(i.app))return Promise.reject(Cr(i));const e=Lr(i);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new wi({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await oT(e,{returnSecureToken:!0}),s=await wi._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends xi{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Nh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Nh(e,n,s,o)}}function lT(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Nh._fromErrorAndOperation(i,c,e,s):c})}async function gR(i,e,n=!1){const s=await Ao(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return wi._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(i,e,n=!1){const{auth:s}=i;if(Sn(s.app))return Promise.reject(Cr(s));const o="reauthenticate";try{const c=await Ao(i,lT(s,o,e,i),n);Se(c.idToken,s,"internal-error");const d=ug(c.idToken);Se(d,s,"internal-error");const{sub:m}=d;return Se(i.uid===m,s,"user-mismatch"),wi._forOperation(i,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&tr(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cT(i,e,n=!1){if(Sn(i.app))return Promise.reject(Cr(i));const s="signIn",o=await lT(i,s,e),c=await wi._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(c.user),c}async function yR(i,e){return cT(Lr(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uT(i){const e=Lr(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _R(i,e,n){const s=Lr(i);await Ih(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",lR)}async function vR(i,e,n){if(Sn(i.app))return Promise.reject(Cr(i));const s=Lr(i),d=await Ih(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oT).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&uT(i),g}),m=await wi._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function ER(i,e,n){return Sn(i.app)?Promise.reject(Cr(i)):yR(vt(i),Oo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&uT(i),s})}async function hT(i,e){const n=vt(i),o={requestType:"VERIFY_EMAIL",idToken:await i.getIdToken()},{email:c}=await oR(n.auth,o);c!==i.email&&await i.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(i,e){return jr(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(i,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=vt(i),c={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},d=await Ao(s,TR(s.auth,c));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const m=s.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function bR(i,e,n,s){return vt(i).onIdTokenChanged(e,n,s)}function AR(i,e,n){return vt(i).beforeAuthStateChanged(e,n)}function SR(i,e,n,s){return vt(i).onAuthStateChanged(e,n,s)}function xR(i){return vt(i).signOut()}const Ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=1e3,IR=10;class fT extends dT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);z1()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,IR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},RR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fT.type="LOCAL";const NR=fT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT extends dT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mT.type="SESSION";const gT=mT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Kh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async _=>_(n.origin,c)),g=await CR(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((m,g)=>{const _=gg("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(b){const S=b;if(S.data.eventId===_)switch(S.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(S.data.response);break;default:clearTimeout(T),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(){return window}function PR(i){Dr().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(){return typeof Dr().WorkerGlobalScope<"u"&&typeof Dr().importScripts=="function"}async function OR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MR(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function VR(){return pT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="firebaseLocalStorageDb",kR=1,Dh="firebaseLocalStorage",_T="fbase_key";class Rc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yh(i,e){return i.transaction([Dh],e?"readwrite":"readonly").objectStore(Dh)}function jR(){const i=indexedDB.deleteDatabase(yT);return new Rc(i).toPromise()}function Lm(){const i=indexedDB.open(yT,kR);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Dh,{keyPath:_T})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Dh)?e(s):(s.close(),await jR(),e(await Lm()))})})}async function a0(i,e,n){const s=Yh(i,!0).put({[_T]:e,value:n});return new Rc(s).toPromise()}async function LR(i,e){const n=Yh(i,!1).get(e),s=await new Rc(n).toPromise();return s===void 0?null:s.value}function o0(i,e){const n=Yh(i,!0).delete(e);return new Rc(n).toPromise()}const UR=800,zR=3;class vT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>zR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kh._getInstance(VR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await OR(),!this.activeServiceWorker)return;this.sender=new DR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lm();return await a0(e,Ch,"1"),await o0(e,Ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>a0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>LR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>o0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Yh(o,!1).getAll();return new Rc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vT.type="LOCAL";const qR=vT;new Ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(i,e){return e?vi(e):(Se(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg extends dg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BR(i){return cT(i.auth,new pg(i),i.bypassAuthState)}function HR(i){const{auth:e,user:n}=i;return Se(n,e,"internal-error"),pR(n,new pg(i),i.bypassAuthState)}async function FR(i){const{auth:e,user:n}=i;return Se(n,e,"internal-error"),gR(n,new pg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BR;case"linkViaPopup":case"linkViaRedirect":return FR;case"reauthViaPopup":case"reauthViaRedirect":return HR;default:tr(this.auth,"internal-error")}}resolve(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=new Ac(2e3,1e4);async function QR(i,e,n){if(Sn(i.app))return Promise.reject(cr(i,"operation-not-supported-in-this-environment"));const s=Lr(i);E1(i,e,mg);const o=ET(s,n);return new aa(s,"signInViaPopup",e,o).executeNotNull()}class aa extends TT{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,aa.currentPopupAction&&aa.currentPopupAction.cancel(),aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Ti(this.filter.length===1,"Popup operations only handle one event");const e=gg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GR.get())};e()}}aa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="pendingRedirect",gh=new Map;class YR extends TT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=gh.get(this.auth._key());if(!e){try{const s=await XR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}gh.set(this.auth._key(),e)}return this.bypassAuthState||gh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XR(i,e){const n=ZR(e),s=WR(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function $R(i,e){gh.set(i._key(),e)}function WR(i){return vi(i._redirectPersistence)}function ZR(i){return mh(KR,i.config.apiKey,i.name)}async function JR(i,e,n=!1){if(Sn(i.app))return Promise.reject(Cr(i));const s=Lr(i),o=ET(s,e),d=await new YR(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=600*1e3;class tI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!wT(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(cr(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eI&&this.cachedEventUids.clear(),this.cachedEventUids.has(l0(e))}saveEventToCache(e){this.cachedEventUids.add(l0(e)),this.lastProcessedEventTime=Date.now()}}function l0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function wT({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nI(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wT(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rI(i,e={}){return jr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sI=/^https?/;async function aI(i){if(i.config.emulator)return;const{authorizedDomains:e}=await rI(i);for(const n of e)try{if(oI(n))return}catch{}tr(i,"unauthorized-domain")}function oI(i){const e=km(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!sI.test(n))return!1;if(iI.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=new Ac(3e4,6e4);function c0(){const i=Dr().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function cI(i){return new Promise((e,n)=>{var o,c,d;function s(){c0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{c0(),n(cr(i,"network-request-failed"))},timeout:lI.get()})}if((c=(o=Dr().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=Dr().gapi)!=null&&d.load)s();else{const m=X1("iframefcb");return Dr()[m]=()=>{gapi.load?s():n(cr(i,"network-request-failed"))},rT(`${Y1()}?onload=${m}`).catch(g=>n(g))}}).catch(e=>{throw ph=null,e})}let ph=null;function uI(i){return ph=ph||cI(i),ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=new Ac(5e3,15e3),dI="__/auth/iframe",fI="emulator/auth/iframe",mI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pI(i){const e=i.config;Se(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?cg(e,fI):`https://${i.config.authDomain}/${dI}`,s={apiKey:e.apiKey,appName:i.name,v:Po},o=gI.get(i.config.apiHost);o&&(s.eid=o);const c=i._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${bc(s).slice(1)}`}async function yI(i){const e=await uI(i),n=Dr().gapi;return Se(n,i,"internal-error"),e.open({where:document.body,url:pI(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mI,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=cr(i,"network-request-failed"),m=Dr().setTimeout(()=>{c(d)},hI.get());function g(){Dr().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vI=500,EI=600,TI="_blank",wI="http://localhost";class u0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bI(i,e,n,s=vI,o=EI){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={..._I,width:s.toString(),height:o.toString(),top:c,left:d},_=fn().toLowerCase();n&&(m=$E(_)?TI:n),YE(_)&&(e=e||wI,g.scrollbars="yes");const T=Object.entries(g).reduce((S,[j,k])=>`${S}${j}=${k},`,"");if(U1(_)&&m!=="_self")return AI(e||"",m),new u0(null);const b=window.open(e||"",m,T);Se(b,i,"popup-blocked");try{b.focus()}catch{}return new u0(b)}function AI(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="__/auth/handler",xI="emulator/auth/handler",RI=encodeURIComponent("fac");async function h0(i,e,n,s,o,c){Se(i.config.authDomain,i,"auth-domain-config-required"),Se(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Po,eventId:o};if(e instanceof mg){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",ax(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,b]of Object.entries({}))d[T]=b}if(e instanceof xc){const T=e.getScopes().filter(b=>b!=="");T.length>0&&(d.scopes=T.join(","))}i.tenantId&&(d.tid=i.tenantId);const m=d;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await i._getAppCheckToken(),_=g?`#${RI}=${encodeURIComponent(g)}`:"";return`${II(i)}?${bc(m).slice(1)}${_}`}function II({config:i}){return i.emulator?cg(i,xI):`https://${i.authDomain}/${SI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="webStorageSupport";class NI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gT,this._completeRedirectFn=JR,this._overrideRedirectResult=$R}async _openPopup(e,n,s,o){var d;Ti((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await h0(e,n,s,km(),o);return bI(e,c,gg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await h0(e,n,s,km(),o);return PR(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Ti(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await yI(e),s=new tI(e);return n.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(bm,{type:bm},o=>{var d;const c=(d=o==null?void 0:o[0])==null?void 0:d[bm];c!==void 0&&n(!!c),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tT()||XE()||hg()}}const CI=NI;var d0="@firebase/auth",f0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OI(i){bo(new ca("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;Se(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nT(i)},_=new G1(s,o,c,g);return tR(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),bo(new ca("auth-internal",e=>{const n=Lr(e.getProvider("auth").getImmediate());return(s=>new DI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(d0,f0,PI(i)),ms(d0,f0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=300,VI=PE("authIdTokenMaxAge")||MI;let m0=null;const kI=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>VI)return;const o=n==null?void 0:n.token;m0!==o&&(m0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function jI(i=LE()){const e=ag(i,"auth");if(e.isInitialized())return e.getImmediate();const n=eR(i,{popupRedirectResolver:CI,persistence:[qR,NR,gT]}),s=PE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=kI(c.toString());AR(n,d,()=>d(n.currentUser)),bR(n,m=>d(m))}}const o=CE("auth");return o&&nR(n,`http://${o}`),n}function LI(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}Q1({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const c=cr("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",LI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OI("Browser");var g0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gs,bT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,x){function N(){}N.prototype=x.prototype,R.D=x.prototype,R.prototype=new N,R.prototype.constructor=R,R.C=function(P,M,O){for(var I=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)I[ze-2]=arguments[ze];return x.prototype[M].apply(P,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,x,N){N||(N=0);var P=Array(16);if(typeof x=="string")for(var M=0;16>M;++M)P[M]=x.charCodeAt(N++)|x.charCodeAt(N++)<<8|x.charCodeAt(N++)<<16|x.charCodeAt(N++)<<24;else for(M=0;16>M;++M)P[M]=x[N++]|x[N++]<<8|x[N++]<<16|x[N++]<<24;x=R.g[0],N=R.g[1],M=R.g[2];var O=R.g[3],I=x+(O^N&(M^O))+P[0]+3614090360&4294967295;x=N+(I<<7&4294967295|I>>>25),I=O+(M^x&(N^M))+P[1]+3905402710&4294967295,O=x+(I<<12&4294967295|I>>>20),I=M+(N^O&(x^N))+P[2]+606105819&4294967295,M=O+(I<<17&4294967295|I>>>15),I=N+(x^M&(O^x))+P[3]+3250441966&4294967295,N=M+(I<<22&4294967295|I>>>10),I=x+(O^N&(M^O))+P[4]+4118548399&4294967295,x=N+(I<<7&4294967295|I>>>25),I=O+(M^x&(N^M))+P[5]+1200080426&4294967295,O=x+(I<<12&4294967295|I>>>20),I=M+(N^O&(x^N))+P[6]+2821735955&4294967295,M=O+(I<<17&4294967295|I>>>15),I=N+(x^M&(O^x))+P[7]+4249261313&4294967295,N=M+(I<<22&4294967295|I>>>10),I=x+(O^N&(M^O))+P[8]+1770035416&4294967295,x=N+(I<<7&4294967295|I>>>25),I=O+(M^x&(N^M))+P[9]+2336552879&4294967295,O=x+(I<<12&4294967295|I>>>20),I=M+(N^O&(x^N))+P[10]+4294925233&4294967295,M=O+(I<<17&4294967295|I>>>15),I=N+(x^M&(O^x))+P[11]+2304563134&4294967295,N=M+(I<<22&4294967295|I>>>10),I=x+(O^N&(M^O))+P[12]+1804603682&4294967295,x=N+(I<<7&4294967295|I>>>25),I=O+(M^x&(N^M))+P[13]+4254626195&4294967295,O=x+(I<<12&4294967295|I>>>20),I=M+(N^O&(x^N))+P[14]+2792965006&4294967295,M=O+(I<<17&4294967295|I>>>15),I=N+(x^M&(O^x))+P[15]+1236535329&4294967295,N=M+(I<<22&4294967295|I>>>10),I=x+(M^O&(N^M))+P[1]+4129170786&4294967295,x=N+(I<<5&4294967295|I>>>27),I=O+(N^M&(x^N))+P[6]+3225465664&4294967295,O=x+(I<<9&4294967295|I>>>23),I=M+(x^N&(O^x))+P[11]+643717713&4294967295,M=O+(I<<14&4294967295|I>>>18),I=N+(O^x&(M^O))+P[0]+3921069994&4294967295,N=M+(I<<20&4294967295|I>>>12),I=x+(M^O&(N^M))+P[5]+3593408605&4294967295,x=N+(I<<5&4294967295|I>>>27),I=O+(N^M&(x^N))+P[10]+38016083&4294967295,O=x+(I<<9&4294967295|I>>>23),I=M+(x^N&(O^x))+P[15]+3634488961&4294967295,M=O+(I<<14&4294967295|I>>>18),I=N+(O^x&(M^O))+P[4]+3889429448&4294967295,N=M+(I<<20&4294967295|I>>>12),I=x+(M^O&(N^M))+P[9]+568446438&4294967295,x=N+(I<<5&4294967295|I>>>27),I=O+(N^M&(x^N))+P[14]+3275163606&4294967295,O=x+(I<<9&4294967295|I>>>23),I=M+(x^N&(O^x))+P[3]+4107603335&4294967295,M=O+(I<<14&4294967295|I>>>18),I=N+(O^x&(M^O))+P[8]+1163531501&4294967295,N=M+(I<<20&4294967295|I>>>12),I=x+(M^O&(N^M))+P[13]+2850285829&4294967295,x=N+(I<<5&4294967295|I>>>27),I=O+(N^M&(x^N))+P[2]+4243563512&4294967295,O=x+(I<<9&4294967295|I>>>23),I=M+(x^N&(O^x))+P[7]+1735328473&4294967295,M=O+(I<<14&4294967295|I>>>18),I=N+(O^x&(M^O))+P[12]+2368359562&4294967295,N=M+(I<<20&4294967295|I>>>12),I=x+(N^M^O)+P[5]+4294588738&4294967295,x=N+(I<<4&4294967295|I>>>28),I=O+(x^N^M)+P[8]+2272392833&4294967295,O=x+(I<<11&4294967295|I>>>21),I=M+(O^x^N)+P[11]+1839030562&4294967295,M=O+(I<<16&4294967295|I>>>16),I=N+(M^O^x)+P[14]+4259657740&4294967295,N=M+(I<<23&4294967295|I>>>9),I=x+(N^M^O)+P[1]+2763975236&4294967295,x=N+(I<<4&4294967295|I>>>28),I=O+(x^N^M)+P[4]+1272893353&4294967295,O=x+(I<<11&4294967295|I>>>21),I=M+(O^x^N)+P[7]+4139469664&4294967295,M=O+(I<<16&4294967295|I>>>16),I=N+(M^O^x)+P[10]+3200236656&4294967295,N=M+(I<<23&4294967295|I>>>9),I=x+(N^M^O)+P[13]+681279174&4294967295,x=N+(I<<4&4294967295|I>>>28),I=O+(x^N^M)+P[0]+3936430074&4294967295,O=x+(I<<11&4294967295|I>>>21),I=M+(O^x^N)+P[3]+3572445317&4294967295,M=O+(I<<16&4294967295|I>>>16),I=N+(M^O^x)+P[6]+76029189&4294967295,N=M+(I<<23&4294967295|I>>>9),I=x+(N^M^O)+P[9]+3654602809&4294967295,x=N+(I<<4&4294967295|I>>>28),I=O+(x^N^M)+P[12]+3873151461&4294967295,O=x+(I<<11&4294967295|I>>>21),I=M+(O^x^N)+P[15]+530742520&4294967295,M=O+(I<<16&4294967295|I>>>16),I=N+(M^O^x)+P[2]+3299628645&4294967295,N=M+(I<<23&4294967295|I>>>9),I=x+(M^(N|~O))+P[0]+4096336452&4294967295,x=N+(I<<6&4294967295|I>>>26),I=O+(N^(x|~M))+P[7]+1126891415&4294967295,O=x+(I<<10&4294967295|I>>>22),I=M+(x^(O|~N))+P[14]+2878612391&4294967295,M=O+(I<<15&4294967295|I>>>17),I=N+(O^(M|~x))+P[5]+4237533241&4294967295,N=M+(I<<21&4294967295|I>>>11),I=x+(M^(N|~O))+P[12]+1700485571&4294967295,x=N+(I<<6&4294967295|I>>>26),I=O+(N^(x|~M))+P[3]+2399980690&4294967295,O=x+(I<<10&4294967295|I>>>22),I=M+(x^(O|~N))+P[10]+4293915773&4294967295,M=O+(I<<15&4294967295|I>>>17),I=N+(O^(M|~x))+P[1]+2240044497&4294967295,N=M+(I<<21&4294967295|I>>>11),I=x+(M^(N|~O))+P[8]+1873313359&4294967295,x=N+(I<<6&4294967295|I>>>26),I=O+(N^(x|~M))+P[15]+4264355552&4294967295,O=x+(I<<10&4294967295|I>>>22),I=M+(x^(O|~N))+P[6]+2734768916&4294967295,M=O+(I<<15&4294967295|I>>>17),I=N+(O^(M|~x))+P[13]+1309151649&4294967295,N=M+(I<<21&4294967295|I>>>11),I=x+(M^(N|~O))+P[4]+4149444226&4294967295,x=N+(I<<6&4294967295|I>>>26),I=O+(N^(x|~M))+P[11]+3174756917&4294967295,O=x+(I<<10&4294967295|I>>>22),I=M+(x^(O|~N))+P[2]+718787259&4294967295,M=O+(I<<15&4294967295|I>>>17),I=N+(O^(M|~x))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+x&4294967295,R.g[1]=R.g[1]+(M+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+M&4294967295,R.g[3]=R.g[3]+O&4294967295}s.prototype.u=function(R,x){x===void 0&&(x=R.length);for(var N=x-this.blockSize,P=this.B,M=this.h,O=0;O<x;){if(M==0)for(;O<=N;)o(this,R,O),O+=this.blockSize;if(typeof R=="string"){for(;O<x;)if(P[M++]=R.charCodeAt(O++),M==this.blockSize){o(this,P),M=0;break}}else for(;O<x;)if(P[M++]=R[O++],M==this.blockSize){o(this,P),M=0;break}}this.h=M,this.o+=x},s.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var x=1;x<R.length-8;++x)R[x]=0;var N=8*this.o;for(x=R.length-8;x<R.length;++x)R[x]=N&255,N/=256;for(this.u(R),R=Array(16),x=N=0;4>x;++x)for(var P=0;32>P;P+=8)R[N++]=this.g[x]>>>P&255;return R};function c(R,x){var N=m;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=x(R)}function d(R,x){this.h=x;for(var N=[],P=!0,M=R.length-1;0<=M;M--){var O=R[M]|0;P&&O==x||(N[M]=O,P=!1)}this.g=N}var m={};function g(R){return-128<=R&&128>R?c(R,function(x){return new d([x|0],0>x?-1:0)}):new d([R|0],0>R?-1:0)}function _(R){if(isNaN(R)||!isFinite(R))return b;if(0>R)return H(_(-R));for(var x=[],N=1,P=0;R>=N;P++)x[P]=R/N|0,N*=4294967296;return new d(x,0)}function T(R,x){if(R.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(R.charAt(0)=="-")return H(T(R.substring(1),x));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=_(Math.pow(x,8)),P=b,M=0;M<R.length;M+=8){var O=Math.min(8,R.length-M),I=parseInt(R.substring(M,M+O),x);8>O?(O=_(Math.pow(x,O)),P=P.j(O).add(_(I))):(P=P.j(N),P=P.add(_(I)))}return P}var b=g(0),S=g(1),j=g(16777216);i=d.prototype,i.m=function(){if(K(this))return-H(this).m();for(var R=0,x=1,N=0;N<this.g.length;N++){var P=this.i(N);R+=(0<=P?P:4294967296+P)*x,x*=4294967296}return R},i.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(k(this))return"0";if(K(this))return"-"+H(this).toString(R);for(var x=_(Math.pow(R,6)),N=this,P="";;){var M=fe(N,x).g;N=oe(N,M.j(x));var O=((0<N.g.length?N.g[0]:N.h)>>>0).toString(R);if(N=M,k(N))return O+P;for(;6>O.length;)O="0"+O;P=O+P}},i.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function k(R){if(R.h!=0)return!1;for(var x=0;x<R.g.length;x++)if(R.g[x]!=0)return!1;return!0}function K(R){return R.h==-1}i.l=function(R){return R=oe(this,R),K(R)?-1:k(R)?0:1};function H(R){for(var x=R.g.length,N=[],P=0;P<x;P++)N[P]=~R.g[P];return new d(N,~R.h).add(S)}i.abs=function(){return K(this)?H(this):this},i.add=function(R){for(var x=Math.max(this.g.length,R.g.length),N=[],P=0,M=0;M<=x;M++){var O=P+(this.i(M)&65535)+(R.i(M)&65535),I=(O>>>16)+(this.i(M)>>>16)+(R.i(M)>>>16);P=I>>>16,O&=65535,I&=65535,N[M]=I<<16|O}return new d(N,N[N.length-1]&-2147483648?-1:0)};function oe(R,x){return R.add(H(x))}i.j=function(R){if(k(this)||k(R))return b;if(K(this))return K(R)?H(this).j(H(R)):H(H(this).j(R));if(K(R))return H(this.j(H(R)));if(0>this.l(j)&&0>R.l(j))return _(this.m()*R.m());for(var x=this.g.length+R.g.length,N=[],P=0;P<2*x;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(var M=0;M<R.g.length;M++){var O=this.i(P)>>>16,I=this.i(P)&65535,ze=R.i(M)>>>16,Ie=R.i(M)&65535;N[2*P+2*M]+=I*Ie,se(N,2*P+2*M),N[2*P+2*M+1]+=O*Ie,se(N,2*P+2*M+1),N[2*P+2*M+1]+=I*ze,se(N,2*P+2*M+1),N[2*P+2*M+2]+=O*ze,se(N,2*P+2*M+2)}for(P=0;P<x;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=x;P<2*x;P++)N[P]=0;return new d(N,0)};function se(R,x){for(;(R[x]&65535)!=R[x];)R[x+1]+=R[x]>>>16,R[x]&=65535,x++}function re(R,x){this.g=R,this.h=x}function fe(R,x){if(k(x))throw Error("division by zero");if(k(R))return new re(b,b);if(K(R))return x=fe(H(R),x),new re(H(x.g),H(x.h));if(K(x))return x=fe(R,H(x)),new re(H(x.g),x.h);if(30<R.g.length){if(K(R)||K(x))throw Error("slowDivide_ only works with positive integers.");for(var N=S,P=x;0>=P.l(R);)N=he(N),P=he(P);var M=ae(N,1),O=ae(P,1);for(P=ae(P,2),N=ae(N,2);!k(P);){var I=O.add(P);0>=I.l(R)&&(M=M.add(N),O=I),P=ae(P,1),N=ae(N,1)}return x=oe(R,M.j(x)),new re(M,x)}for(M=b;0<=R.l(x);){for(N=Math.max(1,Math.floor(R.m()/x.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),O=_(N),I=O.j(x);K(I)||0<I.l(R);)N-=P,O=_(N),I=O.j(x);k(O)&&(O=S),M=M.add(O),R=oe(R,I)}return new re(M,R)}i.A=function(R){return fe(this,R).h},i.and=function(R){for(var x=Math.max(this.g.length,R.g.length),N=[],P=0;P<x;P++)N[P]=this.i(P)&R.i(P);return new d(N,this.h&R.h)},i.or=function(R){for(var x=Math.max(this.g.length,R.g.length),N=[],P=0;P<x;P++)N[P]=this.i(P)|R.i(P);return new d(N,this.h|R.h)},i.xor=function(R){for(var x=Math.max(this.g.length,R.g.length),N=[],P=0;P<x;P++)N[P]=this.i(P)^R.i(P);return new d(N,this.h^R.h)};function he(R){for(var x=R.g.length+1,N=[],P=0;P<x;P++)N[P]=R.i(P)<<1|R.i(P-1)>>>31;return new d(N,R.h)}function ae(R,x){var N=x>>5;x%=32;for(var P=R.g.length-N,M=[],O=0;O<P;O++)M[O]=0<x?R.i(O+N)>>>x|R.i(O+N+1)<<32-x:R.i(O+N);return new d(M,R.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,bT=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=T,gs=d}).apply(typeof g0<"u"?g0:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AT,Wl,ST,yh,Um,xT,RT,IT;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,v){return u==Array.prototype||u==Object.prototype||(u[p]=v.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var p=0;p<u.length;++p){var v=u[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(u,p){if(p)e:{var v=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var U=u[A];if(!(U in v))break e;v=v[U]}u=u[u.length-1],A=v[u],p=p(A),p!=A&&p!=null&&e(v,u,{configurable:!0,writable:!0,value:p})}}function c(u,p){u instanceof String&&(u+="");var v=0,A=!1,U={next:function(){if(!A&&v<u.length){var Q=v++;return{value:p(Q,u[Q]),done:!1}}return A=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(u){return u||function(){return c(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function g(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function _(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function T(u,p,v){return u.call.apply(u.bind,arguments)}function b(u,p,v){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,A),u.apply(p,U)}}return function(){return u.apply(p,arguments)}}function S(u,p,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:b,S.apply(null,arguments)}function j(u,p){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function k(u,p){function v(){}v.prototype=p.prototype,u.aa=p.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(A,U,Q){for(var le=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)le[qe-2]=arguments[qe];return p.prototype[U].apply(A,le)}}function K(u){const p=u.length;if(0<p){const v=Array(p);for(let A=0;A<p;A++)v[A]=u[A];return v}return[]}function H(u,p){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(g(A)){const U=u.length||0,Q=A.length||0;u.length=U+Q;for(let le=0;le<Q;le++)u[U+le]=A[le]}else u.push(A)}}class oe{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function se(u){return/^[\s\xa0]*$/.test(u)}function re(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function fe(u){return fe[" "](u),u}fe[" "]=function(){};var he=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function ae(u,p,v){for(const A in u)p.call(v,u[A],A,u)}function R(u,p){for(const v in u)p.call(void 0,u[v],v,u)}function x(u){const p={};for(const v in u)p[v]=u[v];return p}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,p){let v,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(v in A)u[v]=A[v];for(let Q=0;Q<N.length;Q++)v=N[Q],Object.prototype.hasOwnProperty.call(A,v)&&(u[v]=A[v])}}function M(u){var p=1;u=u.split(":");const v=[];for(;0<p&&u.length;)v.push(u.shift()),p--;return u.length&&v.push(u.join(":")),v}function O(u){m.setTimeout(()=>{throw u},0)}function I(){var u=pe;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class ze{constructor(){this.h=this.g=null}add(p,v){const A=Ie.get();A.set(p,v),this.h?this.h.next=A:this.g=A,this.h=A}}var Ie=new oe(()=>new z,u=>u.reset());class z{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,te=!1,pe=new ze,D=()=>{const u=m.Promise.resolve(void 0);ee=()=>{u.then(Z)}};var Z=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(v){O(v)}var p=Ie;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}te=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};m.addEventListener("test",v,p),m.removeEventListener("test",v,p)}catch{}return u})();function De(u,p){if(ie.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(he){e:{try{fe(p.nodeName);var U=!0;break e}catch{}U=!1}U||(p=null)}}else v=="mouseover"?p=u.fromElement:v=="mouseout"&&(p=u.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:xe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&De.aa.h.call(this)}}k(De,ie);var xe={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Pt="closure_listenable_"+(1e6*Math.random()|0),tt=0;function Un(u,p,v,A,U){this.listener=u,this.proxy=null,this.src=p,this.type=v,this.capture=!!A,this.ha=U,this.key=++tt,this.da=this.fa=!1}function zn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function nr(u){this.src=u,this.g={},this.h=0}nr.prototype.add=function(u,p,v,A,U){var Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);var le=zr(u,p,A,U);return-1<le?(p=u[le],v||(p.fa=!1)):(p=new Un(p,this.src,Q,!!A,U),p.fa=v,u.push(p)),p};function Ur(u,p){var v=p.type;if(v in u.g){var A=u.g[v],U=Array.prototype.indexOf.call(A,p,void 0),Q;(Q=0<=U)&&Array.prototype.splice.call(A,U,1),Q&&(zn(p),u.g[v].length==0&&(delete u.g[v],u.h--))}}function zr(u,p,v,A){for(var U=0;U<u.length;++U){var Q=u[U];if(!Q.da&&Q.listener==p&&Q.capture==!!v&&Q.ha==A)return U}return-1}var qr="closure_lm_"+(1e6*Math.random()|0),Ii={};function pa(u,p,v,A,U){if(Array.isArray(p)){for(var Q=0;Q<p.length;Q++)pa(u,p[Q],v,A,U);return null}return v=ya(v),u&&u[Pt]?u.K(p,v,_(A)?!!A.capture:!1,U):En(u,p,v,!1,A,U)}function En(u,p,v,A,U,Q){if(!p)throw Error("Invalid event type");var le=_(U)?!!U.capture:!!U,qe=Ci(u);if(qe||(u[qr]=qe=new nr(u)),v=qe.add(p,v,A,le,Q),v.proxy)return v;if(A=qo(),v.proxy=A,A.src=u,A.listener=v,u.addEventListener)ve||(U=le),U===void 0&&(U=!1),u.addEventListener(p.toString(),A,U);else if(u.attachEvent)u.attachEvent(Br(p.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function qo(){function u(v){return p.call(u.src,u.listener,v)}const p=Bo;return u}function Is(u,p,v,A,U){if(Array.isArray(p))for(var Q=0;Q<p.length;Q++)Is(u,p[Q],v,A,U);else A=_(A)?!!A.capture:!!A,v=ya(v),u&&u[Pt]?(u=u.i,p=String(p).toString(),p in u.g&&(Q=u.g[p],v=zr(Q,v,A,U),-1<v&&(zn(Q[v]),Array.prototype.splice.call(Q,v,1),Q.length==0&&(delete u.g[p],u.h--)))):u&&(u=Ci(u))&&(p=u.g[p.toString()],u=-1,p&&(u=zr(p,v,A,U)),(v=-1<u?p[u]:null)&&Ni(v))}function Ni(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Pt])Ur(p.i,u);else{var v=u.type,A=u.proxy;p.removeEventListener?p.removeEventListener(v,A,u.capture):p.detachEvent?p.detachEvent(Br(v),A):p.addListener&&p.removeListener&&p.removeListener(A),(v=Ci(p))?(Ur(v,u),v.h==0&&(v.src=null,p[qr]=null)):zn(u)}}}function Br(u){return u in Ii?Ii[u]:Ii[u]="on"+u}function Bo(u,p){if(u.da)u=!0;else{p=new De(p,this);var v=u.listener,A=u.ha||u.src;u.fa&&Ni(u),u=v.call(A,p)}return u}function Ci(u){return u=u[qr],u instanceof nr?u:null}var Ns="__closure_events_fn_"+(1e9*Math.random()>>>0);function ya(u){return typeof u=="function"?u:(u[Ns]||(u[Ns]=function(p){return u.handleEvent(p)}),u[Ns])}function ut(){ce.call(this),this.i=new nr(this),this.M=this,this.F=null}k(ut,ce),ut.prototype[Pt]=!0,ut.prototype.removeEventListener=function(u,p,v,A){Is(this,u,p,v,A)};function Ye(u,p){var v,A=u.F;if(A)for(v=[];A;A=A.F)v.push(A);if(u=u.M,A=p.type||p,typeof p=="string")p=new ie(p,u);else if(p instanceof ie)p.target=p.target||u;else{var U=p;p=new ie(A,u),P(p,U)}if(U=!0,v)for(var Q=v.length-1;0<=Q;Q--){var le=p.g=v[Q];U=sn(le,A,!0,p)&&U}if(le=p.g=u,U=sn(le,A,!0,p)&&U,U=sn(le,A,!1,p)&&U,v)for(Q=0;Q<v.length;Q++)le=p.g=v[Q],U=sn(le,A,!1,p)&&U}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var v=u.g[p],A=0;A<v.length;A++)zn(v[A]);delete u.g[p],u.h--}}this.F=null},ut.prototype.K=function(u,p,v,A){return this.i.add(String(u),p,!1,v,A)},ut.prototype.L=function(u,p,v,A){return this.i.add(String(u),p,!0,v,A)};function sn(u,p,v,A){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var U=!0,Q=0;Q<p.length;++Q){var le=p[Q];if(le&&!le.da&&le.capture==v){var qe=le.listener,Vt=le.ha||le.src;le.fa&&Ur(u.i,le),U=qe.call(Vt,A)!==!1&&U}}return U&&!A.defaultPrevented}function zt(u,p,v){if(typeof u=="function")v&&(u=S(u,v));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(u,p||0)}function _a(u){u.g=zt(()=>{u.g=null,u.i&&(u.i=!1,_a(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class va extends ce{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:_a(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hr(u){ce.call(this),this.h=u,this.g={}}k(Hr,ce);var Fr=[];function Gr(u){ae(u.g,function(p,v){this.g.hasOwnProperty(v)&&Ni(p)},u),u.g={}}Hr.prototype.N=function(){Hr.aa.N.call(this),Gr(this)},Hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rn=m.JSON.stringify,Di=m.JSON.parse,Qr=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function me(){}me.prototype.h=null;function ye(u){return u.h||(u.h=u.i())}function Ot(){}var mn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kr(){ie.call(this,"d")}k(Kr,ie);function Ho(){ie.call(this,"c")}k(Ho,ie);var fr={},Fo=null;function Pi(){return Fo=Fo||new ut}fr.La="serverreachability";function Ea(u){ie.call(this,fr.La,u)}k(Ea,ie);function Oi(u){const p=Pi();Ye(p,new Ea(p))}fr.STAT_EVENT="statevent";function jc(u,p){ie.call(this,fr.STAT_EVENT,u),this.stat=p}k(jc,ie);function ht(u){const p=Pi();Ye(p,new jc(p,u))}fr.Ma="timingevent";function Mt(u,p){ie.call(this,fr.Ma,u),this.size=p}k(Mt,ie);function St(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},p)}function qn(){this.g=!0}qn.prototype.xa=function(){this.g=!1};function Go(u,p,v,A,U,Q){u.info(function(){if(u.g)if(Q)for(var le="",qe=Q.split("&"),Vt=0;Vt<qe.length;Vt++){var Be=qe[Vt].split("=");if(1<Be.length){var Bt=Be[0];Be=Be[1];var kt=Bt.split("_");le=2<=kt.length&&kt[1]=="type"?le+(Bt+"="+Be+"&"):le+(Bt+"=redacted&")}}else le=null;else le=Q;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+p+`
`+v+`
`+le})}function dd(u,p,v,A,U,Q,le){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+p+`
`+v+`
`+Q+" "+le})}function Mi(u,p,v,A){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Cs(u,v)+(A?" "+A:"")})}function Lc(u,p){u.info(function(){return"TIMEOUT: "+p})}qn.prototype.info=function(){};function Cs(u,p){if(!u.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var A=v[u];if(!(2>A.length)){var U=A[1];if(Array.isArray(U)&&!(1>U.length)){var Q=U[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var le=1;le<U.length;le++)U[le]=""}}}}return Rn(v)}catch{return p}}var Vi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mr;function gr(){}k(gr,me),gr.prototype.g=function(){return new XMLHttpRequest},gr.prototype.i=function(){return{}},mr=new gr;function gn(u,p,v,A){this.j=u,this.i=p,this.l=v,this.R=A||1,this.U=new Hr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tt}function Tt(){this.i=null,this.g="",this.h=!1}var Qo={},Ta={};function rr(u,p,v){u.L=1,u.v=Vs(In(p)),u.m=v,u.P=!0,Xr(u,null)}function Xr(u,p){u.F=Date.now(),Ds(u),u.A=In(u.v);var v=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Zo(v.i,"t",A),u.C=0,v=u.j.J,u.h=new Tt,u.g=eu(u.j,v?p:null,!u.m),0<u.O&&(u.M=new va(S(u.Y,u,u.g),u.O)),p=u.U,v=u.g,A=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(Fr[0]=U.toString()),U=Fr);for(var Q=0;Q<U.length;Q++){var le=pa(v,U[Q],A||p.handleEvent,!1,p.h||p);if(!le)break;p.g[le.key]=le}p=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Oi(),Go(u.i,u.u,u.A,u.l,u.R,u.m)}gn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Gn(u)==3?p.j():this.Y(u)},gn.prototype.Y=function(u){try{if(u==this.g)e:{const kt=Gn(this.g);var p=this.g.Ba();const ri=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Qc(this.g)))){this.J||kt!=4||p==7||(p==8||0>=ri?Oi(3):Oi(2)),ki(this);var v=this.g.Z();this.X=v;t:if(Uc(this)){var A=Qc(this.g);u="";var U=A.length,Q=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xt(this),pr(this);var le="";break t}this.h.i=new m.TextDecoder}for(p=0;p<U;p++)this.h.h=!0,u+=this.h.i.decode(A[p],{stream:!(Q&&p==U-1)});A.length=0,this.h.g+=u,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=v==200,dd(this.i,this.u,this.A,this.l,this.R,kt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Vt=this.g;if((qe=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(qe)){var Be=qe;break t}}Be=null}if(v=Be)Mi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ps(this,v);else{this.o=!1,this.s=3,ht(12),Xt(this),pr(this);break e}}if(this.P){v=!0;let $t;for(;!this.J&&this.C<le.length;)if($t=zc(this,le),$t==Ta){kt==4&&(this.s=4,ht(14),v=!1),Mi(this.i,this.l,null,"[Incomplete Response]");break}else if($t==Qo){this.s=4,ht(15),Mi(this.i,this.l,le,"[Invalid Chunk]"),v=!1;break}else Mi(this.i,this.l,$t,null),Ps(this,$t);if(Uc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||le.length!=0||this.h.h||(this.s=1,ht(16),v=!1),this.o=this.o&&v,!v)Mi(this.i,this.l,le,"[Invalid Chunked Response]"),Xt(this),pr(this);else if(0<le.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Hs(Bt),Bt.M=!0,ht(11))}}else Mi(this.i,this.l,le,null),Ps(this,le);kt==4&&Xt(this),this.o&&!this.J&&(kt==4?Wc(this.j,this):(this.o=!1,Ds(this)))}else yd(this.g),v==400&&0<le.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),Xt(this),pr(this)}}}catch{}finally{}};function Uc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function zc(u,p){var v=u.C,A=p.indexOf(`
`,v);return A==-1?Ta:(v=Number(p.substring(v,A)),isNaN(v)?Qo:(A+=1,A+v>p.length?Ta:(p=p.slice(A,A+v),u.C=A+v,p)))}gn.prototype.cancel=function(){this.J=!0,Xt(this)};function Ds(u){u.S=Date.now()+u.I,qc(u,u.I)}function qc(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=St(S(u.ba,u),p)}function ki(u){u.B&&(m.clearTimeout(u.B),u.B=null)}gn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Lc(this.i,this.A),this.L!=2&&(Oi(),ht(17)),Xt(this),this.s=2,pr(this)):qc(this,this.S-u)};function pr(u){u.j.G==0||u.J||Wc(u.j,u)}function Xt(u){ki(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Gr(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Ps(u,p){try{var v=u.j;if(v.G!=0&&(v.g==u||Ko(v.h,u))){if(!u.K&&Ko(v.h,u)&&v.G==3){try{var A=v.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Oa(v),Da(v);else break e;rl(v),ht(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=St(S(v.Za,v),6e3));if(1>=ba(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else ni(v,11)}else if((u.K||v.g==u)&&Oa(v),!se(p))for(U=v.Da.g.parse(p),p=0;p<U.length;p++){let Be=U[p];if(v.T=Be[0],Be=Be[1],v.G==2)if(Be[0]=="c"){v.K=Be[1],v.ia=Be[2];const Bt=Be[3];Bt!=null&&(v.la=Bt,v.j.info("VER="+v.la));const kt=Be[4];kt!=null&&(v.Aa=kt,v.j.info("SVER="+v.Aa));const ri=Be[5];ri!=null&&typeof ri=="number"&&0<ri&&(A=1.5*ri,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const $t=u.g;if($t){const br=$t.g?$t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(br){var Q=A.h;Q.g||br.indexOf("spdy")==-1&&br.indexOf("quic")==-1&&br.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Aa(Q,Q.h),Q.h=null))}if(A.D){const sl=$t.g?$t.g.getResponseHeader("X-HTTP-Session-Id"):null;sl&&(A.ya=sl,nt(A.I,A.D,sl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var le=u;if(A.qa=Jc(A,A.J?A.ia:null,A.W),le.K){pn(A.h,le);var qe=le,Vt=A.L;Vt&&(qe.I=Vt),qe.B&&(ki(qe),Ds(qe)),A.g=le}else Xc(A);0<v.i.length&&Pa(v)}else Be[0]!="stop"&&Be[0]!="close"||ni(v,7);else v.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?ni(v,7):tl(v):Be[0]!="noop"&&v.l&&v.l.ta(Be),v.v=0)}}Oi(4)}catch{}}var Bc=class{constructor(u,p){this.g=u,this.map=p}};function $r(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ba(u){return u.h?1:u.g?u.g.size:0}function Ko(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Aa(u,p){u.g?u.g.add(p):u.h=p}function pn(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}$r.prototype.cancel=function(){if(this.i=Yo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Yo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const v of u.g.values())p=p.concat(v.D);return p}return K(u.i)}function fd(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var p=[],v=u.length,A=0;A<v;A++)p.push(u[A]);return p}p=[],v=0;for(A in u)p[v++]=u[A];return p}function Sa(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var p=[];u=u.length;for(var v=0;v<u;v++)p.push(v);return p}p=[],v=0;for(const A in u)p[v++]=A;return p}}}function Xo(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var v=Sa(u),A=fd(u),U=A.length,Q=0;Q<U;Q++)p.call(void 0,A[Q],v&&v[Q],u)}var Os=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function md(u,p){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var A=u[v].indexOf("="),U=null;if(0<=A){var Q=u[v].substring(0,A);U=u[v].substring(A+1)}else Q=u[v];p(Q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function xt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof xt){this.h=u.h,Ms(this,u.j),this.o=u.o,this.g=u.g,ji(this,u.s),this.l=u.l;var p=u.i,v=new Zr;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),Wr(this,v),this.m=u.m}else u&&(p=String(u).match(Os))?(this.h=!1,Ms(this,p[1]||"",!0),this.o=Bn(p[2]||""),this.g=Bn(p[3]||"",!0),ji(this,p[4]),this.l=Bn(p[5]||"",!0),Wr(this,p[6]||"",!0),this.m=Bn(p[7]||"")):(this.h=!1,this.i=new Zr(null,this.h))}xt.prototype.toString=function(){var u=[],p=this.j;p&&u.push(ks(p,$o,!0),":");var v=this.g;return(v||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ks(p,$o,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(ks(v,v.charAt(0)=="/"?gd:Wo,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",ks(v,xa)),u.join("")};function In(u){return new xt(u)}function Ms(u,p,v){u.j=v?Bn(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function ji(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Wr(u,p,v){p instanceof Zr?(u.i=p,Fc(u.i,u.h)):(v||(p=ks(p,pd)),u.i=new Zr(p,u.h))}function nt(u,p,v){u.i.set(p,v)}function Vs(u){return nt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Bn(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ks(u,p,v){return typeof u=="string"?(u=encodeURI(u).replace(p,Hc),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Hc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var $o=/[#\/\?@]/g,Wo=/[#\?:]/g,gd=/[#\?]/g,pd=/[#\?@]/g,xa=/#/g;function Zr(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Hn(u){u.g||(u.g=new Map,u.h=0,u.i&&md(u.i,function(p,v){u.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}i=Zr.prototype,i.add=function(u,p){Hn(this),this.i=null,u=yr(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(p),this.h+=1,this};function Jr(u,p){Hn(u),p=yr(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function ei(u,p){return Hn(u),p=yr(u,p),u.g.has(p)}i.forEach=function(u,p){Hn(this),this.g.forEach(function(v,A){v.forEach(function(U){u.call(p,U,A,this)},this)},this)},i.na=function(){Hn(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let A=0;A<p.length;A++){const U=u[A];for(let Q=0;Q<U.length;Q++)v.push(p[A])}return v},i.V=function(u){Hn(this);let p=[];if(typeof u=="string")ei(this,u)&&(p=p.concat(this.g.get(yr(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)p=p.concat(u[v])}return p},i.set=function(u,p){return Hn(this),this.i=null,u=yr(this,u),ei(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},i.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Zo(u,p,v){Jr(u,p),0<v.length&&(u.i=null,u.g.set(yr(u,p),K(v)),u.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var A=p[v];const Q=encodeURIComponent(String(A)),le=this.V(A);for(A=0;A<le.length;A++){var U=Q;le[A]!==""&&(U+="="+encodeURIComponent(String(le[A]))),u.push(U)}}return this.i=u.join("&")};function yr(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Fc(u,p){p&&!u.j&&(Hn(u),u.i=null,u.g.forEach(function(v,A){var U=A.toLowerCase();A!=U&&(Jr(this,A),Zo(this,U,v))},u)),u.j=p}function js(u,p){const v=new qn;if(m.Image){const A=new Image;A.onload=j(Fn,v,"TestLoadImage: loaded",!0,p,A),A.onerror=j(Fn,v,"TestLoadImage: error",!1,p,A),A.onabort=j(Fn,v,"TestLoadImage: abort",!1,p,A),A.ontimeout=j(Fn,v,"TestLoadImage: timeout",!1,p,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else p(!1)}function ir(u,p){const v=new qn,A=new AbortController,U=setTimeout(()=>{A.abort(),Fn(v,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:A.signal}).then(Q=>{clearTimeout(U),Q.ok?Fn(v,"TestPingServer: ok",!0,p):Fn(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(U),Fn(v,"TestPingServer: error",!1,p)})}function Fn(u,p,v,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(v)}catch{}}function Ls(){this.g=new Qr}function _r(u,p,v){const A=v||"";try{Xo(u,function(U,Q){let le=U;_(U)&&(le=Rn(U)),p.push(A+Q+"="+encodeURIComponent(le))})}catch(U){throw p.push(A+"type="+encodeURIComponent("_badmap")),U}}function Li(u){this.l=u.Ub||null,this.j=u.eb||!1}k(Li,me),Li.prototype.g=function(){return new ti(this.l,this.j)},Li.prototype.i=(function(u){return function(){return u}})({});function ti(u,p){ut.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(ti,ut),i=ti.prototype,i.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Er(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vr(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Er(this)),this.g&&(this.readyState=3,Er(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?vr(this):Er(this),this.readyState==3&&Jo(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,vr(this))},i.Qa=function(u){this.g&&(this.response=u,vr(this))},i.ga=function(){this.g&&vr(this)};function vr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Er(u)}i.setRequestHeader=function(u,p){this.u.append(u,p)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=p.next();return u.join(`\r
`)};function Er(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ti.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function el(u){let p="";return ae(u,function(v,A){p+=A,p+=":",p+=v,p+=`\r
`}),p}function qt(u,p,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=el(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):nt(u,p,v))}function $e(u){ut.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k($e,ut);var Ra=/^https?$/i,Us=["POST","PUT"];i=$e.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,p,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mr.g(),this.v=this.o?ye(this.o):ye(mr),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(Q){Gc(this,Q);return}if(u=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)v.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Q of A.keys())v.set(Q,A.get(Q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),U=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Us,p,void 0))||A||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of v)this.g.setRequestHeader(Q,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zs(this),this.u=!0,this.g.send(u),this.u=!1}catch(Q){Gc(this,Q)}};function Gc(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Ia(u),Tr(u)}function Ia(u){u.A||(u.A=!0,Ye(u,"complete"),Ye(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ye(this,"complete"),Ye(this,"abort"),Tr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tr(this,!0)),$e.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Na(this):this.bb())},i.bb=function(){Na(this)};function Na(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Gn(u)!=4||u.Z()!=2)){if(u.u&&Gn(u)==4)zt(u.Ea,0,u);else if(Ye(u,"readystatechange"),Gn(u)==4){u.h=!1;try{const le=u.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var A;if(A=le===0){var U=String(u.D).match(Os)[1]||null;!U&&m.self&&m.self.location&&(U=m.self.location.protocol.slice(0,-1)),A=!Ra.test(U?U.toLowerCase():"")}v=A}if(v)Ye(u,"complete"),Ye(u,"success");else{u.m=6;try{var Q=2<Gn(u)?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.Z()+"]",Ia(u)}}finally{Tr(u)}}}}function Tr(u,p){if(u.g){zs(u);const v=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Ye(u,"ready");try{v.onreadystatechange=A}catch{}}}function zs(u){u.I&&(m.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function Gn(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Di(p)}};function Qc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function yd(u){const p={};u=(u.g&&2<=Gn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(se(u[A]))continue;var v=M(u[A]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=p[U]||[];p[U]=Q,Q.push(v)}R(p,function(A){return A.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qs(u,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||p}function Ca(u){this.Aa=0,this.i=[],this.j=new qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qs("baseRetryDelayMs",5e3,u),this.cb=qs("retryDelaySeedMs",1e4,u),this.Wa=qs("forwardChannelMaxRetries",2,u),this.wa=qs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new $r(u&&u.concurrentRequestLimit),this.Da=new Ls,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ca.prototype,i.la=8,i.G=1,i.connect=function(u,p,v,A){ht(0),this.W=u,this.H=p||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=Jc(this,null,this.W),Pa(this)};function tl(u){if(Kc(u),u.G==3){var p=u.U++,v=In(u.I);if(nt(v,"SID",u.K),nt(v,"RID",p),nt(v,"TYPE","terminate"),Bs(u,v),p=new gn(u,u.j,p),p.L=2,p.v=Vs(In(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=p.v,v=!0),v||(p.g=eu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ds(p)}Zc(u)}function Da(u){u.g&&(Hs(u),u.g.cancel(),u.g=null)}function Kc(u){Da(u),u.u&&(m.clearTimeout(u.u),u.u=null),Oa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function Pa(u){if(!wa(u.h)&&!u.s){u.s=!0;var p=u.Ga;ee||D(),te||(ee(),te=!0),pe.add(p,u),u.B=0}}function _d(u,p){return ba(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=St(S(u.Ga,u,p),il(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new gn(this,this.j,u);let Q=this.o;if(this.S&&(Q?(Q=x(Q),P(Q,this.S)):Q=this.S),this.m!==null||this.O||(U.H=Q,Q=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=Yc(this,U,p),v=In(this.I),nt(v,"RID",u),nt(v,"CVER",22),this.D&&nt(v,"X-HTTP-Session-Id",this.D),Bs(this,v),Q&&(this.O?p="headers="+encodeURIComponent(String(el(Q)))+"&"+p:this.m&&qt(v,this.m,Q)),Aa(this.h,U),this.Ua&&nt(v,"TYPE","init"),this.P?(nt(v,"$req",p),nt(v,"SID","null"),U.T=!0,rr(U,v,null)):rr(U,v,p),this.G=2}}else this.G==3&&(u?nl(this,u):this.i.length==0||wa(this.h)||nl(this))};function nl(u,p){var v;p?v=p.l:v=u.U++;const A=In(u.I);nt(A,"SID",u.K),nt(A,"RID",v),nt(A,"AID",u.T),Bs(u,A),u.m&&u.o&&qt(A,u.m,u.o),v=new gn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Yc(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Aa(u.h,v),rr(v,A,p)}function Bs(u,p){u.H&&ae(u.H,function(v,A){nt(p,A,v)}),u.l&&Xo({},function(v,A){nt(p,A,v)})}function Yc(u,p,v){v=Math.min(u.i.length,v);var A=u.l?S(u.l.Na,u.l,u):null;e:{var U=u.i;let Q=-1;for(;;){const le=["count="+v];Q==-1?0<v?(Q=U[0].g,le.push("ofs="+Q)):Q=0:le.push("ofs="+Q);let qe=!0;for(let Vt=0;Vt<v;Vt++){let Be=U[Vt].g;const Bt=U[Vt].map;if(Be-=Q,0>Be)Q=Math.max(0,U[Vt].g-100),qe=!1;else try{_r(Bt,le,"req"+Be+"_")}catch{A&&A(Bt)}}if(qe){A=le.join("&");break e}}}return u=u.i.splice(0,v),p.D=u,A}function Xc(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ee||D(),te||(ee(),te=!0),pe.add(p,u),u.v=0}}function rl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=St(S(u.Fa,u),il(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,$c(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=St(S(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),Da(this),$c(this))};function Hs(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function $c(u){u.g=new gn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=In(u.qa);nt(p,"RID","rpc"),nt(p,"SID",u.K),nt(p,"AID",u.T),nt(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&nt(p,"TO",u.ja),nt(p,"TYPE","xmlhttp"),Bs(u,p),u.m&&u.o&&qt(p,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Vs(In(p)),v.m=null,v.P=!0,Xr(v,u)}i.Za=function(){this.C!=null&&(this.C=null,Da(this),rl(this),ht(19))};function Oa(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function Wc(u,p){var v=null;if(u.g==p){Oa(u),Hs(u),u.g=null;var A=2}else if(Ko(u.h,p))v=p.D,pn(u.h,p),A=1;else return;if(u.G!=0){if(p.o)if(A==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var U=u.B;A=Pi(),Ye(A,new Mt(A,v)),Pa(u)}else Xc(u);else if(U=p.s,U==3||U==0&&0<p.X||!(A==1&&_d(u,p)||A==2&&rl(u)))switch(v&&0<v.length&&(p=u.h,p.i=p.i.concat(v)),U){case 1:ni(u,5);break;case 4:ni(u,10);break;case 3:ni(u,6);break;default:ni(u,2)}}}function il(u,p){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*p}function ni(u,p){if(u.j.info("Error code "+p),p==2){var v=S(u.fb,u),A=u.Xa;const U=!A;A=new xt(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ms(A,"https"),Vs(A),U?js(A.toString(),v):ir(A.toString(),v)}else ht(2);u.G=0,u.l&&u.l.sa(p),Zc(u),Kc(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Zc(u){if(u.G=0,u.ka=[],u.l){const p=Yo(u.h);(p.length!=0||u.i.length!=0)&&(H(u.ka,p),H(u.ka,u.i),u.h.i.length=0,K(u.i),u.i.length=0),u.l.ra()}}function Jc(u,p,v){var A=v instanceof xt?In(v):new xt(v);if(A.g!="")p&&(A.g=p+"."+A.g),ji(A,A.s);else{var U=m.location;A=U.protocol,p=p?p+"."+U.hostname:U.hostname,U=+U.port;var Q=new xt(null);A&&Ms(Q,A),p&&(Q.g=p),U&&ji(Q,U),v&&(Q.l=v),A=Q}return v=u.D,p=u.ya,v&&p&&nt(A,v,p),nt(A,"VER",u.la),Bs(u,A),A}function eu(u,p,v){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new $e(new Li({eb:v})):new $e(u.pa),p.Ha(u.J),p}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function tu(){}i=tu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Ma(){}Ma.prototype.g=function(u,p){return new yn(u,p)};function yn(u,p){ut.call(this),this.g=new Ca(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!se(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!se(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new wr(this)}k(yn,ut),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){tl(this.g)},yn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Rn(u),u=v);p.i.push(new Bc(p.Ya++,u)),p.G==3&&Pa(p)},yn.prototype.N=function(){this.g.l=null,delete this.j,tl(this.g),delete this.g,yn.aa.N.call(this)};function nu(u){Kr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const v in p){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}k(nu,Kr);function ru(){Ho.call(this),this.status=1}k(ru,Ho);function wr(u){this.g=u}k(wr,tu),wr.prototype.ua=function(){Ye(this.g,"a")},wr.prototype.ta=function(u){Ye(this.g,new nu(u))},wr.prototype.sa=function(u){Ye(this.g,new ru)},wr.prototype.ra=function(){Ye(this.g,"b")},Ma.prototype.createWebChannel=Ma.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,IT=function(){return new Ma},RT=function(){return Pi()},xT=fr,Um={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vi.NO_ERROR=0,Vi.TIMEOUT=8,Vi.HTTP_ERROR=6,yh=Vi,Yr.COMPLETE="complete",ST=Yr,Ot.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",ut.prototype.listen=ut.prototype.K,Wl=Ot,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,AT=$e}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});const p0="@firebase/firestore",y0="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new ig("@firebase/firestore");function co(){return ha.logLevel}function de(i,...e){if(ha.logLevel<=je.DEBUG){const n=e.map(yg);ha.debug(`Firestore (${Mo}): ${i}`,...n)}}function bi(i,...e){if(ha.logLevel<=je.ERROR){const n=e.map(yg);ha.error(`Firestore (${Mo}): ${i}`,...n)}}function So(i,...e){if(ha.logLevel<=je.WARN){const n=e.map(yg);ha.warn(`Firestore (${Mo}): ${i}`,...n)}}function yg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,NT(i,s,n)}function NT(i,e,n){let s=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw bi(s),new Error(s)}function Ge(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||NT(e,o,s)}function Ne(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends xi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(hn.UNAUTHENTICATED)))}shutdown(){}}class zI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class qI{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ge(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Pr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Pr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ge(typeof s.accessToken=="string",31837,{l:s}),new CT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class BI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class HI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new BI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ge(this.o===void 0,3512);const s=c=>{c.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,de("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new _0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=GI(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<n&&(s+=e.charAt(o[c]%62))}return s}}function Le(i,e){return i<e?-1:i>e?1:0}function zm(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),c=e.charAt(s);if(o!==c)return Am(o)===Am(c)?Le(o,c):Am(o)?1:-1}return Le(i.length,e.length)}const QI=55296,KI=57343;function Am(i){const e=i.charCodeAt(0);return e>=QI&&e<=KI}function xo(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="__name__";class Nr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Te(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Nr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nr?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const c=Nr.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Le(e.length,n.length)}static compareSegments(e,n){const s=Nr.isNumericId(e),o=Nr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Nr.extractNumericId(e).compare(Nr.extractNumericId(n)):zm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gs.fromString(e.substring(4,e.length-2))}}class at extends Nr{construct(e,n,s){return new at(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ue(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new at(n)}static emptyPath(){return new at([])}}const YI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Nr{construct(e,n,s){return new tn(e,n,s)}static isValidIdentifier(e){return YI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===v0}static keyField(){return new tn([v0])}static fromServerFormat(e){const n=[];let s="",o=0;const c=()=>{if(s.length===0)throw new ue(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ue(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ue(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(c(),o++)}if(c(),d)throw new ue(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(n)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(at.fromString(e))}static fromName(e){return new Ee(at.fromString(e).popFirst(5))}static empty(){return new Ee(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(i,e,n){if(!n)throw new ue(X.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function XI(i,e,n,s){if(e===!0&&s===!0)throw new ue(X.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function E0(i){if(!Ee.isDocumentKey(i))throw new ue(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function T0(i){if(Ee.isDocumentKey(i))throw new ue(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function PT(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Xh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Te(12329,{type:typeof i})}function ur(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ue(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xh(i);throw new ue(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(i,e){const n={typeString:i};return e&&(n.value=e),n}function Ic(i,e){if(!PT(i))throw new ue(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new ue(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=-62135596800,b0=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*b0);return new et(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<w0)throw new ue(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/b0}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ic(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-w0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:Dt("string",et._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new et(0,0))}static max(){return new Ae(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=-1;function $I(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(s===1e9?new et(n+1,0):new et(n,s));return new _s(o,Ee.empty(),e)}function WI(i){return new _s(i.readTime,i.key,dc)}class _s{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new _s(Ae.min(),Ee.empty(),dc)}static max(){return new _s(Ae.max(),Ee.empty(),dc)}}function ZI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(i.documentKey,e.documentKey),n!==0?n:Le(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(i){if(i.code!==X.FAILED_PRECONDITION||i.message!==JI)throw i;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):J.reject(n)}static resolve(e){return new J(((n,s)=>{n(e)}))}static reject(e){return new J(((n,s)=>{s(e)}))}static waitFor(e){return new J(((n,s)=>{let o=0,c=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++c,d&&c===o&&n()}),(g=>s(g)))})),d=!0,c===o&&n()}))}static or(e){let n=J.resolve(!1);for(const s of e)n=n.next((o=>o?J.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,c)=>{s.push(n.call(this,o,c))})),this.waitFor(s)}static mapArray(e,n){return new J(((s,o)=>{const c=e.length,d=new Array(c);let m=0;for(let g=0;g<c;g++){const _=g;n(e[_]).next((T=>{d[_]=T,++m,m===c&&s(d)}),(T=>o(T)))}}))}static doWhile(e,n){return new J(((s,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):s()};c()}))}}function tN(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ko(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$h.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=-1;function Nc(i){return i==null}function Ph(i){return i===0&&1/i==-1/0}function nN(i){return typeof i=="number"&&Number.isInteger(i)&&!Ph(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="";function rN(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=A0(e)),e=iN(i.get(n),e);return A0(e)}function iN(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case OT:n+="";break;default:n+=c}}return n}function A0(i){return i+OT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ss(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function MT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){this.comparator=e,this.root=n||en.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??en.RED,this.left=o??en.EMPTY,this.right=c??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,c){return new en(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return en.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,s,o,c){return this}insert(e,n,s){return new en(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new x0(this.data.getIterator())}getIteratorFrom(e){return new x0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class x0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new jn([])}unionWith(e){let n=new Ut(tn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new VT("Invalid base64 string: "+c):c}})(e);return new rn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new rn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const sN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(i){if(Ge(!!i,39018),typeof i=="string"){let e=0;const n=sN.exec(i);if(Ge(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(i.seconds),nanos:At(i.nanos)}}function At(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Es(i){return typeof i=="string"?rn.fromBase64String(i):rn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="server_timestamp",jT="__type__",LT="__previous_value__",UT="__local_write_time__";function Eg(i){var n,s;return((s=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[jT])==null?void 0:s.stringValue)===kT}function Wh(i){const e=i.mapValue.fields[LT];return Eg(e)?Wh(e):e}function fc(i){const e=vs(i.mapValue.fields[UT].timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n,s,o,c,d,m,g,_,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=T}}const Oh="(default)";class mc{constructor(e,n){this.projectId=e,this.database=n||Oh}static empty(){return new mc("","")}get isDefaultDatabase(){return this.database===Oh}isEqual(e){return e instanceof mc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="__type__",oN="__max__",lh={mapValue:{}},qT="__vector__",Mh="value";function Ts(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Eg(i)?4:cN(i)?9007199254740991:lN(i)?10:11:Te(28295,{value:i})}function kr(i,e){if(i===e)return!0;const n=Ts(i);if(n!==Ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return fc(i).isEqual(fc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=vs(o.timestampValue),m=vs(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return Es(o.bytesValue).isEqual(Es(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return At(o.geoPointValue.latitude)===At(c.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return At(o.integerValue)===At(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=At(o.doubleValue),m=At(c.doubleValue);return d===m?Ph(d)===Ph(m):isNaN(d)&&isNaN(m)}return!1})(i,e);case 9:return xo(i.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},m=c.mapValue.fields||{};if(S0(d)!==S0(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!kr(d[g],m[g])))return!1;return!0})(i,e);default:return Te(52216,{left:i})}}function gc(i,e){return(i.values||[]).find((n=>kr(n,e)))!==void 0}function Ro(i,e){if(i===e)return 0;const n=Ts(i),s=Ts(e);if(n!==s)return Le(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(i.booleanValue,e.booleanValue);case 2:return(function(c,d){const m=At(c.integerValue||c.doubleValue),g=At(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return R0(i.timestampValue,e.timestampValue);case 4:return R0(fc(i),fc(e));case 5:return zm(i.stringValue,e.stringValue);case 6:return(function(c,d){const m=Es(c),g=Es(d);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(c,d){const m=c.split("/"),g=d.split("/");for(let _=0;_<m.length&&_<g.length;_++){const T=Le(m[_],g[_]);if(T!==0)return T}return Le(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,d){const m=Le(At(c.latitude),At(d.latitude));return m!==0?m:Le(At(c.longitude),At(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return I0(i.arrayValue,e.arrayValue);case 10:return(function(c,d){var S,j,k,K;const m=c.fields||{},g=d.fields||{},_=(S=m[Mh])==null?void 0:S.arrayValue,T=(j=g[Mh])==null?void 0:j.arrayValue,b=Le(((k=_==null?void 0:_.values)==null?void 0:k.length)||0,((K=T==null?void 0:T.values)==null?void 0:K.length)||0);return b!==0?b:I0(_,T)})(i.mapValue,e.mapValue);case 11:return(function(c,d){if(c===lh.mapValue&&d===lh.mapValue)return 0;if(c===lh.mapValue)return 1;if(d===lh.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),_=d.fields||{},T=Object.keys(_);g.sort(),T.sort();for(let b=0;b<g.length&&b<T.length;++b){const S=zm(g[b],T[b]);if(S!==0)return S;const j=Ro(m[g[b]],_[T[b]]);if(j!==0)return j}return Le(g.length,T.length)})(i.mapValue,e.mapValue);default:throw Te(23264,{he:n})}}function R0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Le(i,e);const n=vs(i),s=vs(e),o=Le(n.seconds,s.seconds);return o!==0?o:Le(n.nanos,s.nanos)}function I0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const c=Ro(n[o],s[o]);if(c)return c}return Le(n.length,s.length)}function Io(i){return qm(i)}function qm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=vs(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Es(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Ee.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const c of n.values||[])o?o=!1:s+=",",s+=qm(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of s)c?c=!1:o+=",",o+=`${d}:${qm(n.fields[d])}`;return o+"}"})(i.mapValue):Te(61005,{value:i})}function _h(i){switch(Ts(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wh(i);return e?16+_h(e):16;case 5:return 2*i.stringValue.length;case 6:return Es(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+_h(c)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Ss(s.fields,((c,d)=>{o+=c.length+_h(d)})),o})(i.mapValue);default:throw Te(13486,{value:i})}}function N0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Bm(i){return!!i&&"integerValue"in i}function Tg(i){return!!i&&"arrayValue"in i}function C0(i){return!!i&&"nullValue"in i}function D0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function vh(i){return!!i&&"mapValue"in i}function lN(i){var n,s;return((s=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[zT])==null?void 0:s.stringValue)===qT}function sc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Ss(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=sc(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sc(i.arrayValue.values[n]);return e}return{...i}}function cN(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===oN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!vh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(n)}setAll(e){let n=tn.emptyPath(),s={},o=[];e.forEach(((d,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}d?s[m.lastSegment()]=sc(d):o.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,o)}delete(e){const n=this.field(e.popLast());vh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];vh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Ss(n,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new vn(sc(this.value))}}function BT(i){const e=[];return Ss(i.fields,((n,s)=>{const o=new tn([n]);if(vh(s)){const c=BT(s.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n,s,o,c,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Kt(e,0,Ae.min(),Ae.min(),Ae.min(),vn.empty(),0)}static newFoundDocument(e,n,s,o){return new Kt(e,1,n,Ae.min(),s,o,0)}static newNoDocument(e,n){return new Kt(e,2,n,Ae.min(),Ae.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new Kt(e,3,n,Ae.min(),Ae.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n){this.position=e,this.inclusive=n}}function P0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const c=e[o],d=i.position[o];if(c.field.isKeyField()?s=Ee.comparator(Ee.fromName(d.referenceValue),n.key):s=Ro(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function O0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!kr(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n="asc"){this.field=e,this.dir=n}}function uN(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{}class Ct extends HT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new dN(e,n,s):n==="array-contains"?new gN(e,s):n==="in"?new pN(e,s):n==="not-in"?new yN(e,s):n==="array-contains-any"?new _N(e,s):new Ct(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new fN(e,s):new mN(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ro(n,this.value)):n!==null&&Ts(this.value)===Ts(n)&&this.matchesComparison(Ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hr extends HT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new hr(e,n)}matches(e){return FT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function FT(i){return i.op==="and"}function GT(i){return hN(i)&&FT(i)}function hN(i){for(const e of i.filters)if(e instanceof hr)return!1;return!0}function Hm(i){if(i instanceof Ct)return i.field.canonicalString()+i.op.toString()+Io(i.value);if(GT(i))return i.filters.map((e=>Hm(e))).join(",");{const e=i.filters.map((n=>Hm(n))).join(",");return`${i.op}(${e})`}}function QT(i,e){return i instanceof Ct?(function(s,o){return o instanceof Ct&&s.op===o.op&&s.field.isEqual(o.field)&&kr(s.value,o.value)})(i,e):i instanceof hr?(function(s,o){return o instanceof hr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,d,m)=>c&&QT(d,o.filters[m])),!0):!1})(i,e):void Te(19439)}function KT(i){return i instanceof Ct?(function(n){return`${n.field.canonicalString()} ${n.op} ${Io(n.value)}`})(i):i instanceof hr?(function(n){return n.op.toString()+" {"+n.getFilters().map(KT).join(" ,")+"}"})(i):"Filter"}class dN extends Ct{constructor(e,n,s){super(e,n,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class fN extends Ct{constructor(e,n){super(e,"in",n),this.keys=YT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class mN extends Ct{constructor(e,n){super(e,"not-in",n),this.keys=YT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function YT(i,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((s=>Ee.fromName(s.referenceValue)))}class gN extends Ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tg(n)&&gc(n.arrayValue,this.value)}}class pN extends Ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gc(this.value.arrayValue,n)}}class yN extends Ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!gc(this.value.arrayValue,n)}}class _N extends Ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>gc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,n=null,s=[],o=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=d,this.endAt=m,this.Te=null}}function M0(i,e=null,n=[],s=[],o=null,c=null,d=null){return new vN(i,e,n,s,o,c,d)}function wg(i){const e=Ne(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Hm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Nc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Io(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Io(s))).join(",")),e.Te=n}return e.Te}function bg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!uN(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!QT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!O0(i.startAt,e.startAt)&&O0(i.endAt,e.endAt)}function Fm(i){return Ee.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n=null,s=[],o=[],c=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function EN(i,e,n,s,o,c,d,m){return new jo(i,e,n,s,o,c,d,m)}function Ag(i){return new jo(i)}function V0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function XT(i){return i.collectionGroup!==null}function ac(i){const e=Ne(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Ut(tn.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new pc(c,s))})),n.has(tn.keyField().canonicalString())||e.Ie.push(new pc(tn.keyField(),s))}return e.Ie}function Or(i){const e=Ne(i);return e.Ee||(e.Ee=TN(e,ac(i))),e.Ee}function TN(i,e){if(i.limitType==="F")return M0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new pc(o.field,c)}));const n=i.endAt?new Vh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Vh(i.startAt.position,i.startAt.inclusive):null;return M0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Gm(i,e){const n=i.filters.concat([e]);return new jo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function kh(i,e,n){return new jo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Zh(i,e){return bg(Or(i),Or(e))&&i.limitType===e.limitType}function $T(i){return`${wg(Or(i))}|lt:${i.limitType}`}function uo(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>KT(o))).join(", ")}]`),Nc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Io(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Io(o))).join(",")),`Target(${s})`})(Or(i))}; limitType=${i.limitType})`}function Jh(i,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ee.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,o){for(const c of ac(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(d,m,g){const _=P0(d,m,g);return d.inclusive?_<=0:_<0})(s.startAt,ac(s),o)||s.endAt&&!(function(d,m,g){const _=P0(d,m,g);return d.inclusive?_>=0:_>0})(s.endAt,ac(s),o))})(i,e)}function wN(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function WT(i){return(e,n)=>{let s=!1;for(const o of ac(i)){const c=bN(o,e,n);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function bN(i,e,n){const s=i.field.isKeyField()?Ee.comparator(e.key,n.key):(function(c,d,m){const g=d.data.field(c),_=m.data.field(c);return g!==null&&_!==null?Ro(g,_):Te(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ss(this.inner,((n,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return MT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=new gt(Ee.comparator);function Ai(){return AN}const ZT=new gt(Ee.comparator);function Zl(...i){let e=ZT;for(const n of i)e=e.insert(n.key,n);return e}function JT(i){let e=ZT;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function oa(){return oc()}function ew(){return oc()}function oc(){return new fa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const SN=new gt(Ee.comparator),xN=new Ut(Ee.comparator);function Ue(...i){let e=xN;for(const n of i)e=e.add(n);return e}const RN=new Ut(Le);function IN(){return RN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(e)?"-0":e}}function tw(i){return{integerValue:""+i}}function nw(i,e){return nN(e)?tw(e):Sg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this._=void 0}}function NN(i,e,n){return i instanceof jh?(function(o,c){const d={fields:{[jT]:{stringValue:kT},[UT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Eg(c)&&(c=Wh(c)),c&&(d.fields[LT]=c),{mapValue:d}})(n,e):i instanceof yc?iw(i,e):i instanceof _c?sw(i,e):(function(o,c){const d=rw(o,c),m=k0(d)+k0(o.Ae);return Bm(d)&&Bm(o.Ae)?tw(m):Sg(o.serializer,m)})(i,e)}function CN(i,e,n){return i instanceof yc?iw(i,e):i instanceof _c?sw(i,e):n}function rw(i,e){return i instanceof vc?(function(s){return Bm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class jh extends ed{}class yc extends ed{constructor(e){super(),this.elements=e}}function iw(i,e){const n=aw(e);for(const s of i.elements)n.some((o=>kr(o,s)))||n.push(s);return{arrayValue:{values:n}}}class _c extends ed{constructor(e){super(),this.elements=e}}function sw(i,e){let n=aw(e);for(const s of i.elements)n=n.filter((o=>!kr(o,s)));return{arrayValue:{values:n}}}class vc extends ed{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function k0(i){return At(i.integerValue||i.doubleValue)}function aw(i){return Tg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n){this.field=e,this.transform=n}}function PN(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof yc&&o instanceof yc||s instanceof _c&&o instanceof _c?xo(s.elements,o.elements,kr):s instanceof vc&&o instanceof vc?kr(s.Ae,o.Ae):s instanceof jh&&o instanceof jh})(i.transform,e.transform)}class ON{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class td{}function ow(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new xg(i.key,dn.none()):new Cc(i.key,i.data,dn.none());{const n=i.data,s=vn.empty();let o=new Ut(tn.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),o=o.add(c)}return new xs(i.key,s,new jn(o.toArray()),dn.none())}}function MN(i,e,n){i instanceof Cc?(function(o,c,d){const m=o.value.clone(),g=L0(o.fieldTransforms,c,d.transformResults);m.setAll(g),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(i,e,n):i instanceof xs?(function(o,c,d){if(!Eh(o.precondition,c))return void c.convertToUnknownDocument(d.version);const m=L0(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(lw(o)),g.setAll(m),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(i,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function lc(i,e,n,s){return i instanceof Cc?(function(c,d,m,g){if(!Eh(c.precondition,d))return m;const _=c.value.clone(),T=U0(c.fieldTransforms,g,d);return _.setAll(T),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(i,e,n,s):i instanceof xs?(function(c,d,m,g){if(!Eh(c.precondition,d))return m;const _=U0(c.fieldTransforms,g,d),T=d.data;return T.setAll(lw(c)),T.setAll(_),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(i,e,n,s):(function(c,d,m){return Eh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(i,e,n)}function VN(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),c=rw(s.transform,o||null);c!=null&&(n===null&&(n=vn.empty()),n.set(s.field,c))}return n||null}function j0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&xo(s,o,((c,d)=>PN(c,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Cc extends td{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class xs extends td{constructor(e,n,s,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function lw(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function L0(i,e,n){const s=new Map;Ge(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const c=i[o],d=c.transform,m=e.data.field(c.field);s.set(c.field,CN(d,m,n[o]))}return s}function U0(i,e,n){const s=new Map;for(const o of i){const c=o.transform,d=n.data.field(o.field);s.set(o.field,NN(c,d,e))}return s}class xg extends td{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cw extends td{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&MN(c,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=lc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=lc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=ew();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(o.key)?null:m;const g=ow(d,m);g!==null&&s.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Ae.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&xo(this.mutations,e.mutations,((n,s)=>j0(n,s)))&&xo(this.baseMutations,e.baseMutations,((n,s)=>j0(n,s)))}}class Rg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ge(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return SN})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,s[d].version);return new Rg(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Fe;function uw(i){switch(i){case X.OK:return Te(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Te(15467,{code:i})}}function hw(i){if(i===void 0)return bi("GRPC error has no .code"),X.UNKNOWN;switch(i){case Nt.OK:return X.OK;case Nt.CANCELLED:return X.CANCELLED;case Nt.UNKNOWN:return X.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return X.INTERNAL;case Nt.UNAVAILABLE:return X.UNAVAILABLE;case Nt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Nt.NOT_FOUND:return X.NOT_FOUND;case Nt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Nt.ABORTED:return X.ABORTED;case Nt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Nt.DATA_LOSS:return X.DATA_LOSS;default:return Te(39323,{code:i})}}(Fe=Nt||(Nt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=new gs([4294967295,4294967295],0);function z0(i){const e=UN().encode(i),n=new bT;return n.update(e),new Uint8Array(n.digest())}function q0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new gs([n,s],0),new gs([o,c],0)]}class Ig{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Jl(`Invalid padding: ${n}`);if(s<0)throw new Jl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Jl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Jl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=gs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(gs.fromNumber(s)));return o.compare(zN)===1&&(o=new gs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=z0(e),[s,o]=q0(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Ig(c,o,n);return s.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const n=z0(e),[s,o]=q0(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n,s,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Dc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new nd(Ae.min(),o,new gt(Le),Ai(),Ue())}}class Dc{constructor(e,n,s,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Dc(s,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class dw{constructor(e,n){this.targetId=e,this.Ce=n}}class fw{constructor(e,n,s=rn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class B0{constructor(){this.ve=0,this.Fe=H0(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),n=Ue(),s=Ue();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Te(38017,{changeType:c})}})),new Dc(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=H0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ai(),this.Je=ch(),this.He=ch(),this.Ye=new gt(Le)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(Fm(c))if(s===0){const d=new Ee(c.path);this.et(n,d,Kt.newNoDocument(d,Ae.min()))}else Ge(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const m=this.ut(e),g=m?this.ct(m,e,d):1;if(g!==0){this.it(n);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=n;let d,m;try{d=Es(s).toUint8Array()}catch(g){if(g instanceof VT)return So("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Ig(d,o,c)}catch(g){return So(g instanceof Jl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((c=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const m=this.ot(d);if(m){if(c.current&&Fm(m.target)){const g=new Ee(m.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Kt.newNoDocument(g,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=Ue();this.He.forEach(((c,d)=>{let m=!0;d.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new nd(e,n,this.Ye,this.je,s);return this.je=Ai(),this.Je=ch(),this.He=ch(),this.Ye=new gt(Le),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new B0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ut(Le),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ut(Le),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new B0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ch(){return new gt(Ee.comparator)}function H0(){return new gt(Ee.comparator)}const BN={asc:"ASCENDING",desc:"DESCENDING"},HN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FN={and:"AND",or:"OR"};class GN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Qm(i,e){return i.useProto3Json||Nc(e)?e:{value:e}}function Lh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mw(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function QN(i,e){return Lh(i,e.toTimestamp())}function Ln(i){return Ge(!!i,49232),Ae.fromTimestamp((function(n){const s=vs(n);return new et(s.seconds,s.nanos)})(i))}function Ng(i,e){return Km(i,e).canonicalString()}function Km(i,e){const n=(function(o){return new at(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function gw(i){const e=at.fromString(i);return Ge(Tw(e),10190,{key:e.toString()}),e}function Uh(i,e){return Ng(i.databaseId,e.path)}function cc(i,e){const n=gw(e);if(n.get(1)!==i.databaseId.projectId)throw new ue(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ue(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ee(yw(n))}function pw(i,e){return Ng(i.databaseId,e)}function KN(i){const e=gw(i);return e.length===4?at.emptyPath():yw(e)}function Ym(i){return new at(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function yw(i){return Ge(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function F0(i,e,n){return{name:Uh(i,e),fields:n.value.mapValue.fields}}function YN(i,e){return"found"in e?(function(s,o){Ge(!!o.found,43571),o.found.name,o.found.updateTime;const c=cc(s,o.found.name),d=Ln(o.found.updateTime),m=o.found.createTime?Ln(o.found.createTime):Ae.min(),g=new vn({mapValue:{fields:o.found.fields}});return Kt.newFoundDocument(c,d,m,g)})(i,e):"missing"in e?(function(s,o){Ge(!!o.missing,3894),Ge(!!o.readTime,22933);const c=cc(s,o.missing),d=Ln(o.readTime);return Kt.newNoDocument(c,d)})(i,e):Te(7234,{result:e})}function XN(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Te(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(_,T){return _.useProto3Json?(Ge(T===void 0||typeof T=="string",58123),rn.fromBase64String(T||"")):(Ge(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),rn.fromUint8Array(T||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(_){const T=_.code===void 0?X.UNKNOWN:hw(_.code);return new ue(T,_.message||"")})(d);n=new fw(s,o,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=cc(i,s.document.name),c=Ln(s.document.updateTime),d=s.document.createTime?Ln(s.document.createTime):Ae.min(),m=new vn({mapValue:{fields:s.document.fields}}),g=Kt.newFoundDocument(o,c,d,m),_=s.targetIds||[],T=s.removedTargetIds||[];n=new Th(_,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=cc(i,s.document),c=s.readTime?Ln(s.readTime):Ae.min(),d=Kt.newNoDocument(o,c),m=s.removedTargetIds||[];n=new Th([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=cc(i,s.document),c=s.removedTargetIds||[];n=new Th([],c,o,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,d=new LN(o,c),m=s.targetId;n=new dw(m,d)}}return n}function _w(i,e){let n;if(e instanceof Cc)n={update:F0(i,e.key,e.value)};else if(e instanceof xg)n={delete:Uh(i,e.key)};else if(e instanceof xs)n={update:F0(i,e.key,e.data),updateMask:iC(e.fieldMask)};else{if(!(e instanceof cw))return Te(16599,{Vt:e.type});n={verify:Uh(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const m=d.transform;if(m instanceof jh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof yc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof _c)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof vc)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw Te(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:QN(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Te(27497)})(i,e.precondition)),n}function $N(i,e){return i&&i.length>0?(Ge(e!==void 0,14353),i.map((n=>(function(o,c){let d=o.updateTime?Ln(o.updateTime):Ln(c);return d.isEqual(Ae.min())&&(d=Ln(c)),new ON(d,o.transformResults||[])})(n,e)))):[]}function WN(i,e){return{documents:[pw(i,e.path)]}}function ZN(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=pw(i,o);const c=(function(_){if(_.length!==0)return Ew(hr.create(_,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(_){if(_.length!==0)return _.map((T=>(function(S){return{field:ho(S.field),direction:tC(S.dir)}})(T)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=Qm(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:o}}function JN(i){let e=KN(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ge(s===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(b){const S=vw(b);return S instanceof hr&&GT(S)?S.getFilters():[S]})(n.where));let d=[];n.orderBy&&(d=(function(b){return b.map((S=>(function(k){return new pc(fo(k.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(S)))})(n.orderBy));let m=null;n.limit&&(m=(function(b){let S;return S=typeof b=="object"?b.value:b,Nc(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(b){const S=!!b.before,j=b.values||[];return new Vh(j,S)})(n.startAt));let _=null;return n.endAt&&(_=(function(b){const S=!b.before,j=b.values||[];return new Vh(j,S)})(n.endAt)),EN(e,o,d,c,m,"F",g,_)}function eC(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vw(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=fo(n.unaryFilter.field);return Ct.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=fo(n.unaryFilter.field);return Ct.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=fo(n.unaryFilter.field);return Ct.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=fo(n.unaryFilter.field);return Ct.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Ct.create(fo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return hr.create(n.compositeFilter.filters.map((s=>vw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(n.compositeFilter.op))})(i):Te(30097,{filter:i})}function tC(i){return BN[i]}function nC(i){return HN[i]}function rC(i){return FN[i]}function ho(i){return{fieldPath:i.canonicalString()}}function fo(i){return tn.fromServerFormat(i.fieldPath)}function Ew(i){return i instanceof Ct?(function(n){if(n.op==="=="){if(D0(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NAN"}};if(C0(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(D0(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NAN"}};if(C0(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(n.field),op:nC(n.op),value:n.value}}})(i):i instanceof hr?(function(n){const s=n.getFilters().map((o=>Ew(o)));return s.length===1?s[0]:{compositeFilter:{op:rC(n.op),filters:s}}})(i):Te(54877,{filter:i})}function iC(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Tw(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,s,o,c=Ae.min(),d=Ae.min(),m=rn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.yt=e}}function aC(i){const e=JN({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?kh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.Cn=new lC}addToCollectionParentIndex(e,n){return this.Cn.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(_s.min())}updateCollectionGroup(e,n,s){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class lC{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Ut(at.comparator),c=!o.has(s);return this.index[n]=o.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ut(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ww=41943040;class An{static withCacheSize(e){return new An(e,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(ww,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new No(0)}static cr(){return new No(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="LruGarbageCollector",cC=1048576;function K0([i,e],[n,s]){const o=Le(i,n);return o===0?Le(e,s):o}class uC{constructor(e){this.Ir=e,this.buffer=new Ut(K0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();K0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class hC{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(Q0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ko(n)?de(Q0,"Ignoring IndexedDB error during garbage collection: ",n):await Vo(n)}await this.Vr(3e5)}))}}class dC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return J.resolve($h.ce);const s=new uC(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(G0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),G0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,c,d,m,g,_;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,d=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(s=b,m=Date.now(),this.removeTargets(e,s,n)))).next((b=>(c=b,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(_=Date.now(),co()<=je.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(_-g)+`ms
Total Duration: ${_-T}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:b}))))}}function fC(i,e){return new dC(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.changes=new fa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?J.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&lc(s.mutation,o,jn.empty(),et.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ue()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ue()){const o=oa();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((c=>{let d=Zl();return c.forEach(((m,g)=>{d=d.insert(m,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=oa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ue())))}populateOverlays(e,n,s){const o=[];return s.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,m)=>{n.set(d,m)}))}))}computeViews(e,n,s,o){let c=Ai();const d=oc(),m=(function(){return oc()})();return n.forEach(((g,_)=>{const T=s.get(_.key);o.has(_.key)&&(T===void 0||T.mutation instanceof xs)?c=c.insert(_.key,_):T!==void 0?(d.set(_.key,T.mutation.getFieldMask()),lc(T.mutation,_,T.mutation.getFieldMask(),et.now())):d.set(_.key,jn.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((_,T)=>d.set(_,T))),n.forEach(((_,T)=>m.set(_,new gC(T,d.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=oc();let o=new gt(((d,m)=>d-m)),c=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const m of d)m.keys().forEach((g=>{const _=n.get(g);if(_===null)return;let T=s.get(g)||jn.empty();T=m.applyToLocalView(_,T),s.set(g,T);const b=(o.get(m.batchId)||Ue()).add(g);o=o.insert(m.batchId,b)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,T=g.value,b=ew();T.forEach((S=>{if(!c.has(S)){const j=ow(n.get(S),s.get(S));j!==null&&b.set(S,j),c=c.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,_,b))}return J.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return Ee.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):XT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-c.size):J.resolve(oa());let m=dc,g=c;return d.next((_=>J.forEach(_,((T,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),c.get(T)?J.resolve():this.remoteDocumentCache.getEntry(e,T).next((S=>{g=g.insert(T,S)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,g,_,Ue()))).next((T=>({batchId:m,changes:JT(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((s=>{let o=Zl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const c=n.collectionGroup;let d=Zl();return this.indexManager.getCollectionParents(e,c).next((m=>J.forEach(m,(g=>{const _=(function(b,S){return new jo(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,s,o).next((T=>{T.forEach(((b,S)=>{d=d.insert(b,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,o)))).next((d=>{c.forEach(((g,_)=>{const T=_.getKey();d.get(T)===null&&(d=d.insert(T,Kt.newInvalidDocument(T)))}));let m=Zl();return d.forEach(((g,_)=>{const T=c.get(g);T!==void 0&&lc(T.mutation,_,jn.empty(),et.now()),Jh(n,_)&&(m=m.insert(g,_))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return J.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ln(o.createTime)}})(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:aC(o.bundledQuery),readTime:Ln(o.readTime)}})(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this.overlays=new gt(Ee.comparator),this.qr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const s=oa();return J.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,c)=>{this.St(e,n,c)})),J.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),J.resolve()}getOverlaysForCollection(e,n,s){const o=oa(),c=n.length+1,d=new Ee(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===c&&g.largestBatchId>s&&o.set(g.getKey(),g)}return J.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let c=new gt(((_,T)=>_-T));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>s){let T=c.get(_.largestBatchId);T===null&&(T=oa(),c=c.insert(_.largestBatchId,T)),T.set(_.getKey(),_)}}const m=oa(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,T)=>m.set(_,T))),!(m.size()>=o)););return J.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new jN(n,s));let c=this.qr.get(n);c===void 0&&(c=Ue(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(){this.Qr=new Ut(Qt.$r),this.Ur=new Ut(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Qt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Qt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Ee(new at([])),s=new Qt(n,e),o=new Qt(n,e+1),c=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ee(new at([])),s=new Qt(n,e),o=new Qt(n,e+1);let c=Ue();return this.Ur.forEachInRange([s,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Qt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Qt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ee.comparator(e.key,n.key)||Le(e.Yr,n.Yr)}static Kr(e,n){return Le(e.Yr,n.Yr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ut(Qt.$r)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new kN(c,n,s,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new Qt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return J.resolve(d)}lookupMutationBatch(e,n){return J.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),c=o<0?0:o;return J.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?vg:this.tr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Qt(n,0),o=new Qt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(d=>{const m=this.Xr(d.Yr);c.push(m)})),J.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ut(Le);return n.forEach((o=>{const c=new Qt(o,0),d=new Qt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(m=>{s=s.add(m.Yr)}))})),J.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let c=s;Ee.isDocumentKey(c)||(c=c.child(""));const d=new Qt(new Ee(c),0);let m=new Ut(Le);return this.Zr.forEachWhile((g=>{const _=g.key.path;return!!s.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Yr)),!0)}),d),J.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ge(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return J.forEach(n.mutations,(o=>{const c=new Qt(o.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Qt(n,0),o=this.Zr.firstAfterOrEqual(s);return J.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.ri=e,this.docs=(function(){return new gt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),c=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return J.resolve(s?s.document.mutableCopy():Kt.newInvalidDocument(n))}getEntries(e,n){let s=Ai();return n.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():Kt.newInvalidDocument(o))})),J.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let c=Ai();const d=n.path,m=new Ee(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:T}}=g.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||ZI(WI(T),s)<=0||(o.has(T.key)||Jh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return J.resolve(c)}getAllFromCollectionGroup(e,n,s,o){Te(9500)}ii(e,n){return J.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new wC(this)}getSize(e){return J.resolve(this.size)}}class wC extends mC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),J.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.persistence=e,this.si=new fa((n=>wg(n)),bg),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new Cg,this.targetCount=0,this.ai=No.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),J.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new No(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Pr(n),J.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,s){let o=0;const c=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),J.waitFor(c).next((()=>o))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return J.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),J.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),J.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return J.resolve(s)}containsKey(e,n){return J.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n){this.ui={},this.overlays={},this.ci=new $h(0),this.li=!1,this.li=!0,this.hi=new vC,this.referenceDelegate=e(this),this.Pi=new bC(this),this.indexManager=new oC,this.remoteDocumentCache=(function(o){return new TC(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new sC(n),this.Ii=new yC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _C,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new EC(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){de("MemoryPersistence","Starting transaction:",e);const o=new AC(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return J.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class AC extends eN{constructor(e){super(),this.currentSequenceNumber=e}}class Dg{constructor(e){this.persistence=e,this.Ri=new Cg,this.Vi=null}static mi(e){return new Dg(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),J.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),J.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.fi,(s=>{const o=Ee.fromPath(s);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Ae.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return J.or([()=>J.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class zh{constructor(e,n){this.persistence=e,this.pi=new fa((s=>rN(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=fC(this,n)}static mi(e,n){return new zh(e,n)}Ei(){}di(e){return J.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return J.forEach(this.pi,((s,o)=>this.br(e,s,o).next((c=>c?J.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((m=>{m||(s++,c.removeEntry(d,Ae.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),J.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),J.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),J.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_h(e.data.value)),n}br(e,n,s){return J.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return J.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Ue(),o=Ue();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Pg(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ex()?8:tN(fn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,o,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new SC;return this.Ss(e,n,d).next((m=>{if(c.result=m,this.Vs)return this.bs(e,n,d,m.size)}))})).next((()=>c.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(co()<=je.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),J.resolve()):(co()<=je.DEBUG&&de("QueryEngine","Query:",uo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(co()<=je.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Or(n))):J.resolve())}ys(e,n){if(V0(n))return J.resolve(null);let s=Or(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=kh(n,null,"F"),s=Or(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=Ue(...c);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const _=this.Ds(n,m);return this.Cs(n,_,d,g.readTime)?this.ys(e,kh(n,null,"F")):this.vs(e,_,n,g)}))))})))))}ws(e,n,s,o){return V0(n)||o.isEqual(Ae.min())?J.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,o)?J.resolve(null):(co()<=je.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),uo(n)),this.vs(e,d,n,$I(o,dc)).next((m=>m)))}))}Ds(e,n){let s=new Ut(WT(e));return n.forEach(((o,c)=>{Jh(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,s){return co()<=je.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",uo(n)),this.ps.getDocumentsMatchingQuery(e,n,_s.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="LocalStore",RC=3e8;class IC{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new gt(Le),this.xs=new fa((c=>wg(c)),bg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function NC(i,e,n,s){return new IC(i,e,n,s)}async function Aw(i,e){const n=Ne(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],m=[];let g=Ue();for(const _ of o){d.push(_.batchId);for(const T of _.mutations)g=g.add(T.key)}for(const _ of c){m.push(_.batchId);for(const T of _.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(s,g).next((_=>({Ls:_,removedBatchIds:d,addedBatchIds:m})))}))}))}function CC(i,e){const n=Ne(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,_,T){const b=_.batch,S=b.keys();let j=J.resolve();return S.forEach((k=>{j=j.next((()=>T.getEntry(g,k))).next((K=>{const H=_.docVersions.get(k);Ge(H!==null,48541),K.version.compareTo(H)<0&&(b.applyToRemoteDocument(K,_),K.isValidDocument()&&(K.setReadTime(_.commitVersion),T.addEntry(K)))}))})),j.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=Ue();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function Sw(i){const e=Ne(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function DC(i,e){const n=Ne(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((T,b)=>{const S=o.get(b);if(!S)return;m.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,b))));let j=S.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?j=j.withResumeToken(rn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):T.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(T.resumeToken,s)),o=o.insert(b,j),(function(K,H,oe){return K.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=RC?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0})(S,j,T)&&m.push(n.Pi.updateTargetData(c,j))}));let g=Ai(),_=Ue();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),m.push(PC(c,d,e.documentUpdates).next((T=>{g=T.ks,_=T.qs}))),!s.isEqual(Ae.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((b=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(T)}return J.waitFor(m).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,_))).next((()=>g))})).then((c=>(n.Ms=o,c)))}function PC(i,e,n){let s=Ue(),o=Ue();return n.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let d=Ai();return n.forEach(((m,g)=>{const _=c.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ae.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):de(Og,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)})),{ks:d,qs:o}}))}function OC(i,e){const n=Ne(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=vg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function MC(i,e){const n=Ne(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((c=>c?(o=c,J.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new us(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Xm(i,e,n){const s=Ne(i),o=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!ko(d))throw d;de(Og,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Y0(i,e,n){const s=Ne(i);let o=Ae.min(),c=Ue();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,_,T){const b=Ne(g),S=b.xs.get(T);return S!==void 0?J.resolve(b.Ms.get(S)):b.Pi.getTargetData(_,T)})(s,d,Or(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,m.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:Ae.min(),n?c:Ue()))).next((m=>(VC(s,wN(e),m),{documents:m,Qs:c})))))}function VC(i,e,n){let s=i.Os.get(e)||Ae.min();n.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.Os.set(e,s)}class X0{constructor(){this.activeTargetIds=IN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kC{constructor(){this.Mo=new X0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new X0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="ConnectivityMonitor";class W0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de($0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de($0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh=null;function $m(){return uh===null?uh=(function(){return 268435456+Math.round(2147483648*Math.random())})():uh++,"0x"+uh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="RestConnection",LC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class UC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Oh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,c){const d=$m(),m=this.zo(e,n.toUriEncodedString());de(Sm,`Sending RPC '${e}' ${d}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:_}=new URL(m),T=Do(_);return this.Jo(e,m,g,s,T).then((b=>(de(Sm,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw So(Sm,`RPC '${e}' ${d} failed with error: `,b,"url: ",m,"request:",s),b}))}Ho(e,n,s,o,c,d){return this.Go(e,n,s,o,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const s=LC[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class qC extends UC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,c){const d=$m();return new Promise(((m,g)=>{const _=new AT;_.setWithCredentials(!0),_.listenOnce(ST.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case yh.NO_ERROR:const b=_.getResponseJson();de(cn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),m(b);break;case yh.TIMEOUT:de(cn,`RPC '${e}' ${d} timed out`),g(new ue(X.DEADLINE_EXCEEDED,"Request time out"));break;case yh.HTTP_ERROR:const S=_.getStatus();if(de(cn,`RPC '${e}' ${d} failed with status:`,S,"response text:",_.getResponseText()),S>0){let j=_.getResponseJson();Array.isArray(j)&&(j=j[0]);const k=j==null?void 0:j.error;if(k&&k.status&&k.message){const K=(function(oe){const se=oe.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(se)>=0?se:X.UNKNOWN})(k.status);g(new ue(K,k.message))}else g(new ue(X.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new ue(X.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{de(cn,`RPC '${e}' ${d} completed.`)}}));const T=JSON.stringify(o);de(cn,`RPC '${e}' ${d} sending request:`,o),_.send(n,"POST",T,s,15)}))}T_(e,n,s){const o=$m(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=IT(),m=RT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const T=c.join("");de(cn,`Creating RPC '${e}' stream ${o}: ${T}`,g);const b=d.createWebChannel(T,g);this.I_(b);let S=!1,j=!1;const k=new zC({Yo:H=>{j?de(cn,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(S||(de(cn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),S=!0),de(cn,`RPC '${e}' stream ${o} sending:`,H),b.send(H))},Zo:()=>b.close()}),K=(H,oe,se)=>{H.listen(oe,(re=>{try{se(re)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return K(b,Wl.EventType.OPEN,(()=>{j||(de(cn,`RPC '${e}' stream ${o} transport opened.`),k.o_())})),K(b,Wl.EventType.CLOSE,(()=>{j||(j=!0,de(cn,`RPC '${e}' stream ${o} transport closed`),k.a_(),this.E_(b))})),K(b,Wl.EventType.ERROR,(H=>{j||(j=!0,So(cn,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),k.a_(new ue(X.UNAVAILABLE,"The operation could not be completed")))})),K(b,Wl.EventType.MESSAGE,(H=>{var oe;if(!j){const se=H.data[0];Ge(!!se,16349);const re=se,fe=(re==null?void 0:re.error)||((oe=re[0])==null?void 0:oe.error);if(fe){de(cn,`RPC '${e}' stream ${o} received error:`,fe);const he=fe.status;let ae=(function(N){const P=Nt[N];if(P!==void 0)return hw(P)})(he),R=fe.message;ae===void 0&&(ae=X.INTERNAL,R="Unknown error status: "+he+" with message "+fe.message),j=!0,k.a_(new ue(ae,R)),b.close()}else de(cn,`RPC '${e}' stream ${o} received:`,se),k.u_(se)}})),K(m,xT.STAT_EVENT,(H=>{H.stat===Um.PROXY?de(cn,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===Um.NOPROXY&&de(cn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function xm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(i){return new GN(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="PersistentStream";class xw{constructor(e,n,s,o,c,d,m,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Mg(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(bi(n.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new ue(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(Z0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(de(Z0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class BC extends xw{constructor(e,n,s,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=XN(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Ae.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ae.min():d.readTime?Ln(d.readTime):Ae.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Ym(this.serializer),n.addTarget=(function(c,d){let m;const g=d.target;if(m=Fm(g)?{documents:WN(c,g)}:{query:ZN(c,g).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=mw(c,d.resumeToken);const _=Qm(c,d.expectedCount);_!==null&&(m.expectedCount=_)}else if(d.snapshotVersion.compareTo(Ae.min())>0){m.readTime=Lh(c,d.snapshotVersion.toTimestamp());const _=Qm(c,d.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const s=eC(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Ym(this.serializer),n.removeTarget=e,this.q_(n)}}class HC extends xw{constructor(e,n,s,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=$N(e.writeResults,e.commitTime),s=Ln(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Ym(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>_w(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{}class GC extends FC{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ue(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Km(n,s),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(X.UNKNOWN,c.toString())}))}Ho(e,n,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,Km(n,s),o,d,m,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ue(X.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class QC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bi(n),this.aa=!1):de("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="RemoteStore";class KC{constructor(e,n,s,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{ma(this)&&(de(da,"Restarting streams for network reachability change."),await(async function(g){const _=Ne(g);_.Ea.add(4),await Pc(_),_.Ra.set("Unknown"),_.Ea.delete(4),await id(_)})(this))}))})),this.Ra=new QC(s,o)}}async function id(i){if(ma(i))for(const e of i.da)await e(!0)}async function Pc(i){for(const e of i.da)await e(!1)}function Rw(i,e){const n=Ne(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Lg(n)?jg(n):Lo(n).O_()&&kg(n,e))}function Vg(i,e){const n=Ne(i),s=Lo(n);n.Ia.delete(e),s.O_()&&Iw(n,e),n.Ia.size===0&&(s.O_()?s.L_():ma(n)&&n.Ra.set("Unknown"))}function kg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lo(i).Y_(e)}function Iw(i,e){i.Va.Ue(e),Lo(i).Z_(e)}function jg(i){i.Va=new qN({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Lo(i).start(),i.Ra.ua()}function Lg(i){return ma(i)&&!Lo(i).x_()&&i.Ia.size>0}function ma(i){return Ne(i).Ea.size===0}function Nw(i){i.Va=void 0}async function YC(i){i.Ra.set("Online")}async function XC(i){i.Ia.forEach(((e,n)=>{kg(i,e)}))}async function $C(i,e){Nw(i),Lg(i)?(i.Ra.ha(e),jg(i)):i.Ra.set("Unknown")}async function WC(i,e,n){if(i.Ra.set("Online"),e instanceof fw&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(s){de(da,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await qh(i,s)}else if(e instanceof Th?i.Va.Ze(e):e instanceof dw?i.Va.st(e):i.Va.tt(e),!n.isEqual(Ae.min()))try{const s=await Sw(i.localStore);n.compareTo(s)>=0&&await(function(c,d){const m=c.Va.Tt(d);return m.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const T=c.Ia.get(_);T&&c.Ia.set(_,T.withResumeToken(g.resumeToken,d))}})),m.targetMismatches.forEach(((g,_)=>{const T=c.Ia.get(g);if(!T)return;c.Ia.set(g,T.withResumeToken(rn.EMPTY_BYTE_STRING,T.snapshotVersion)),Iw(c,g);const b=new us(T.target,g,_,T.sequenceNumber);kg(c,b)})),c.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){de(da,"Failed to raise snapshot:",s),await qh(i,s)}}async function qh(i,e,n){if(!ko(e))throw e;i.Ea.add(1),await Pc(i),i.Ra.set("Offline"),n||(n=()=>Sw(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{de(da,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await id(i)}))}function Cw(i,e){return e().catch((n=>qh(i,n,e)))}async function sd(i){const e=Ne(i),n=ws(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vg;for(;ZC(e);)try{const o=await OC(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,JC(e,o)}catch(o){await qh(e,o)}Dw(e)&&Pw(e)}function ZC(i){return ma(i)&&i.Ta.length<10}function JC(i,e){i.Ta.push(e);const n=ws(i);n.O_()&&n.X_&&n.ea(e.mutations)}function Dw(i){return ma(i)&&!ws(i).x_()&&i.Ta.length>0}function Pw(i){ws(i).start()}async function e2(i){ws(i).ra()}async function t2(i){const e=ws(i);for(const n of i.Ta)e.ea(n.mutations)}async function n2(i,e,n){const s=i.Ta.shift(),o=Rg.from(s,e,n);await Cw(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await sd(i)}async function r2(i,e){e&&ws(i).X_&&await(async function(s,o){if((function(d){return uw(d)&&d!==X.ABORTED})(o.code)){const c=s.Ta.shift();ws(s).B_(),await Cw(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await sd(s)}})(i,e),Dw(i)&&Pw(i)}async function J0(i,e){const n=Ne(i);n.asyncQueue.verifyOperationInProgress(),de(da,"RemoteStore received new credentials");const s=ma(n);n.Ea.add(3),await Pc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await id(n)}async function i2(i,e){const n=Ne(i);e?(n.Ea.delete(2),await id(n)):e||(n.Ea.add(2),await Pc(n),n.Ra.set("Unknown"))}function Lo(i){return i.ma||(i.ma=(function(n,s,o){const c=Ne(n);return c.sa(),new BC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:YC.bind(null,i),t_:XC.bind(null,i),r_:$C.bind(null,i),H_:WC.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Lg(i)?jg(i):i.Ra.set("Unknown")):(await i.ma.stop(),Nw(i))}))),i.ma}function ws(i){return i.fa||(i.fa=(function(n,s,o){const c=Ne(n);return c.sa(),new HC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:e2.bind(null,i),r_:r2.bind(null,i),ta:t2.bind(null,i),na:n2.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await sd(i)):(await i.fa.stop(),i.Ta.length>0&&(de(da,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,n,s,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,c){const d=Date.now()+s,m=new Ug(e,n,d,o,c);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zg(i,e){if(bi("AsyncQueue",`${e}: ${i}`),ko(i))return new ue(X.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{static emptySet(e){return new Eo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ee.comparator(n.key,s.key):(n,s)=>Ee.comparator(n.key,s.key),this.keyedMap=Zl(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Eo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(){this.ga=new gt(Ee.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Co{constructor(e,n,s,o,c,d,m,g,_){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,n,s,o,c){const d=[];return n.forEach((m=>{d.push({type:0,doc:m})})),new Co(e,n,Eo.emptySet(n),d,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class a2{constructor(){this.queries=tE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Ne(n),c=o.queries;o.queries=tE(),c.forEach(((d,m)=>{for(const g of m.Sa)g.onError(s)}))})(this,new ue(X.ABORTED,"Firestore shutting down"))}}function tE(){return new fa((i=>$T(i)),Zh)}async function Ow(i,e){const n=Ne(i);let s=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new s2,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=zg(d,`Initialization of query '${uo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&qg(n)}async function Mw(i,e){const n=Ne(i),s=e.query;let o=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function o2(i,e){const n=Ne(i);let s=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const m of d.Sa)m.Fa(o)&&(s=!0);d.wa=o}}s&&qg(n)}function l2(i,e,n){const s=Ne(i),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);s.queries.delete(e)}function qg(i){i.Ca.forEach((e=>{e.next()}))}var Wm,nE;(nE=Wm||(Wm={})).Ma="default",nE.Cache="cache";class Vw{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Co(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Wm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this.key=e}}class jw{constructor(e){this.key=e}}class c2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=WT(e),this.tu=new Eo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new eE,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,b)=>{const S=o.get(T),j=Jh(this.query,b)?b:null,k=!!S&&this.mutatedKeys.has(S.key),K=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let H=!1;S&&j?S.data.isEqual(j.data)?k!==K&&(s.track({type:3,doc:j}),H=!0):this.su(S,j)||(s.track({type:2,doc:j}),H=!0,(g&&this.eu(j,g)>0||_&&this.eu(j,_)<0)&&(m=!0)):!S&&j?(s.track({type:0,doc:j}),H=!0):S&&!j&&(s.track({type:1,doc:S}),H=!0,(g||_)&&(m=!0)),H&&(j?(d=d.add(j),c=K?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{tu:d,iu:s,Cs:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((T,b)=>(function(j,k){const K=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:H})}};return K(j)-K(k)})(T.type,b.type)||this.eu(T.doc,b.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,_=g!==this.Za;return this.Za=g,d.length!==0||_?{snapshot:new Co(this.query,e.tu,c,d,e.mutatedKeys,g===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new eE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new jw(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new kw(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Co.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Bg="SyncEngine";class u2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class h2{constructor(e){this.key=e,this.hu=!1}}class d2{constructor(e,n,s,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new fa((m=>$T(m)),Zh),this.Iu=new Map,this.Eu=new Set,this.du=new gt(Ee.comparator),this.Au=new Map,this.Ru=new Cg,this.Vu={},this.mu=new Map,this.fu=No.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function f2(i,e,n=!0){const s=Hw(i);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await Lw(s,e,n,!0),o}async function m2(i,e){const n=Hw(i);await Lw(n,e,!0,!1)}async function Lw(i,e,n,s){const o=await MC(i.localStore,Or(e)),c=o.targetId,d=i.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await g2(i,e,c,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&Rw(i.remoteStore,o),m}async function g2(i,e,n,s,o){i.pu=(b,S,j)=>(async function(K,H,oe,se){let re=H.view.ru(oe);re.Cs&&(re=await Y0(K.localStore,H.query,!1).then((({documents:R})=>H.view.ru(R,re))));const fe=se&&se.targetChanges.get(H.targetId),he=se&&se.targetMismatches.get(H.targetId)!=null,ae=H.view.applyChanges(re,K.isPrimaryClient,fe,he);return iE(K,H.targetId,ae.au),ae.snapshot})(i,b,S,j);const c=await Y0(i.localStore,e,!0),d=new c2(e,c.Qs),m=d.ru(c.documents),g=Dc.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),_=d.applyChanges(m,i.isPrimaryClient,g);iE(i,n,_.au);const T=new u2(e,n,d);return i.Tu.set(e,T),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),_.snapshot}async function p2(i,e,n){const s=Ne(i),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((d=>!Zh(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Xm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Vg(s.remoteStore,o.targetId),Zm(s,o.targetId)})).catch(Vo)):(Zm(s,o.targetId),await Xm(s.localStore,o.targetId,!0))}async function y2(i,e){const n=Ne(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Vg(n.remoteStore,s.targetId))}async function _2(i,e,n){const s=S2(i);try{const o=await(function(d,m){const g=Ne(d),_=et.now(),T=m.reduce(((j,k)=>j.add(k.key)),Ue());let b,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let k=Ai(),K=Ue();return g.Ns.getEntries(j,T).next((H=>{k=H,k.forEach(((oe,se)=>{se.isValidDocument()||(K=K.add(oe))}))})).next((()=>g.localDocuments.getOverlayedDocuments(j,k))).next((H=>{b=H;const oe=[];for(const se of m){const re=VN(se,b.get(se.key).overlayedDocument);re!=null&&oe.push(new xs(se.key,re,BT(re.value.mapValue),dn.exists(!0)))}return g.mutationQueue.addMutationBatch(j,_,oe,m)})).next((H=>{S=H;const oe=H.applyToLocalDocumentSet(b,K);return g.documentOverlayCache.saveOverlays(j,H.batchId,oe)}))})).then((()=>({batchId:S.batchId,changes:JT(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,m,g){let _=d.Vu[d.currentUser.toKey()];_||(_=new gt(Le)),_=_.insert(m,g),d.Vu[d.currentUser.toKey()]=_})(s,o.batchId,n),await Oc(s,o.changes),await sd(s.remoteStore)}catch(o){const c=zg(o,"Failed to persist write");n.reject(c)}}async function Uw(i,e){const n=Ne(i);try{const s=await DC(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Au.get(c);d&&(Ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Ge(d.hu,14607):o.removedDocuments.size>0&&(Ge(d.hu,42227),d.hu=!1))})),await Oc(n,s,e)}catch(s){await Vo(s)}}function rE(i,e,n){const s=Ne(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((c,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const g=Ne(d);g.onlineState=m;let _=!1;g.queries.forEach(((T,b)=>{for(const S of b.Sa)S.va(m)&&(_=!0)})),_&&qg(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function v2(i,e,n){const s=Ne(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),c=o&&o.key;if(c){let d=new gt(Ee.comparator);d=d.insert(c,Kt.newNoDocument(c,Ae.min()));const m=Ue().add(c),g=new nd(Ae.min(),new Map,new gt(Le),d,m);await Uw(s,g),s.du=s.du.remove(c),s.Au.delete(e),Hg(s)}else await Xm(s.localStore,e,!1).then((()=>Zm(s,e,n))).catch(Vo)}async function E2(i,e){const n=Ne(i),s=e.batch.batchId;try{const o=await CC(n.localStore,e);qw(n,s,null),zw(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Oc(n,o)}catch(o){await Vo(o)}}async function T2(i,e,n){const s=Ne(i);try{const o=await(function(d,m){const g=Ne(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let T;return g.mutationQueue.lookupMutationBatch(_,m).next((b=>(Ge(b!==null,37113),T=b.keys(),g.mutationQueue.removeMutationBatch(_,b)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,T,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,T))).next((()=>g.localDocuments.getDocuments(_,T)))}))})(s.localStore,e);qw(s,e,n),zw(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Oc(s,o)}catch(o){await Vo(o)}}function zw(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function qw(i,e,n){const s=Ne(i);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Zm(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||Bw(i,s)}))}function Bw(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Vg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Hg(i))}function iE(i,e,n){for(const s of n)s instanceof kw?(i.Ru.addReference(s.key,e),w2(i,s)):s instanceof jw?(de(Bg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||Bw(i,s.key)):Te(19791,{wu:s})}function w2(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(de(Bg,"New document in limbo: "+n),i.Eu.add(s),Hg(i))}function Hg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Ee(at.fromString(e)),s=i.fu.next();i.Au.set(s,new h2(n)),i.du=i.du.insert(n,s),Rw(i.remoteStore,new us(Or(Ag(n.path)),s,"TargetPurposeLimboResolution",$h.ce))}}async function Oc(i,e,n){const s=Ne(i),o=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{d.push(s.pu(g,e,n).then((_=>{var T;if((_||n)&&s.isPrimaryClient){const b=_?!_.fromCache:(T=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(_){o.push(_);const b=Pg.As(g.targetId,_);c.push(b)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(g,_){const T=Ne(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>J.forEach(_,(S=>J.forEach(S.Es,(j=>T.persistence.referenceDelegate.addReference(b,S.targetId,j))).next((()=>J.forEach(S.ds,(j=>T.persistence.referenceDelegate.removeReference(b,S.targetId,j)))))))))}catch(b){if(!ko(b))throw b;de(Og,"Failed to update sequence numbers: "+b)}for(const b of _){const S=b.targetId;if(!b.fromCache){const j=T.Ms.get(S),k=j.snapshotVersion,K=j.withLastLimboFreeSnapshotVersion(k);T.Ms=T.Ms.insert(S,K)}}})(s.localStore,c))}async function b2(i,e){const n=Ne(i);if(!n.currentUser.isEqual(e)){de(Bg,"User change. New user:",e.toKey());const s=await Aw(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new ue(X.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Oc(n,s.Ls)}}function A2(i,e){const n=Ne(i),s=n.Au.get(e);if(s&&s.hu)return Ue().add(s.key);{let o=Ue();const c=n.Iu.get(e);if(!c)return o;for(const d of c){const m=n.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function Hw(i){const e=Ne(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Uw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=v2.bind(null,e),e.Pu.H_=o2.bind(null,e.eventManager),e.Pu.yu=l2.bind(null,e.eventManager),e}function S2(i){const e=Ne(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=E2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=T2.bind(null,e),e}class Bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return NC(this.persistence,new xC,e.initialUser,this.serializer)}Cu(e){return new bw(Dg.mi,this.serializer)}Du(e){return new kC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bh.provider={build:()=>new Bh};class x2 extends Bh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ge(this.persistence.referenceDelegate instanceof zh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new hC(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new bw((s=>zh.mi(s,n)),this.serializer)}}class Jm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>rE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=b2.bind(null,this.syncEngine),await i2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new a2})()}createDatastore(e){const n=rd(e.databaseInfo.databaseId),s=(function(c){return new qC(c)})(e.databaseInfo);return(function(c,d,m,g){return new GC(c,d,m,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,c,d,m){return new KC(s,o,c,d,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>rE(this.syncEngine,n,0)),(function(){return W0.v()?new W0:new jC})())}createSyncEngine(e,n){return(function(o,c,d,m,g,_,T){const b=new d2(o,c,d,m,g,_);return T&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const c=Ne(o);de(da,"RemoteStore shutting down."),c.Ea.add(5),await Pc(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Jm.provider={build:()=>new Jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ue(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,c){const d=Ne(o),m={documents:c.map((b=>Uh(d.serializer,b)))},g=await d.Ho("BatchGetDocuments",d.serializer.databaseId,at.emptyPath(),m,c.length),_=new Map;g.forEach((b=>{const S=YN(d.serializer,b);_.set(S.key.toString(),S)}));const T=[];return c.forEach((b=>{const S=_.get(b.toString());Ge(!!S,55234,{key:b}),T.push(S)})),T})(this.datastore,e);return n.forEach((s=>this.recordVersion(s))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new xg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,s)=>{const o=Ee.fromPath(s);this.mutations.push(new cw(o,this.precondition(o)))})),await(async function(s,o){const c=Ne(s),d={writes:o.map((m=>_w(c.serializer,m)))};await c.Go("Commit",c.serializer.databaseId,at.emptyPath(),d)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Te(50498,{Gu:e.constructor.name});n=Ae.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new ue(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ae.min())?dn.exists(!1):dn.updateTime(n):dn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ae.min()))throw new ue(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dn.updateTime(n)}return dn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n,s,o,c){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=o,this.deferred=c,this.zu=s.maxAttempts,this.M_=new Mg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new R2(this.datastore),n=this.Hu(e);n&&n.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Nc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!uw(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="FirestoreClient";class N2{constructor(e,n,s,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=hn.UNAUTHENTICATED,this.clientId=_g.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{de(bs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(de(bs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=zg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Rm(i,e){i.asyncQueue.verifyOperationInProgress(),de(bs,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Aw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function sE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await C2(i);de(bs,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>J0(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>J0(e.remoteStore,o))),i._onlineComponents=e}async function C2(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){de(bs,"Using user provided OfflineComponentProvider");try{await Rm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;So("Error using user provided cache. Falling back to memory cache: "+n),await Rm(i,new Bh)}}else de(bs,"Using default OfflineComponentProvider"),await Rm(i,new x2(void 0));return i._offlineComponents}async function Fg(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(de(bs,"Using user provided OnlineComponentProvider"),await sE(i,i._uninitializedComponentsProvider._online)):(de(bs,"Using default OnlineComponentProvider"),await sE(i,new Jm))),i._onlineComponents}function D2(i){return Fg(i).then((e=>e.syncEngine))}function P2(i){return Fg(i).then((e=>e.datastore))}async function Gw(i){const e=await Fg(i),n=e.eventManager;return n.onListen=f2.bind(null,e.syncEngine),n.onUnlisten=p2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=m2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=y2.bind(null,e.syncEngine),n}function O2(i,e,n={}){const s=new Pr;return i.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,g,_){const T=new Fw({next:S=>{T.Nu(),d.enqueueAndForget((()=>Mw(c,b)));const j=S.docs.has(m);!j&&S.fromCache?_.reject(new ue(X.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&S.fromCache&&g&&g.source==="server"?_.reject(new ue(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),b=new Vw(Ag(m.path),T,{includeMetadataChanges:!0,qa:!0});return Ow(c,b)})(await Gw(i),i.asyncQueue,e,n,s))),s.promise}function M2(i,e,n={}){const s=new Pr;return i.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,g,_){const T=new Fw({next:S=>{T.Nu(),d.enqueueAndForget((()=>Mw(c,b))),S.fromCache&&g.source==="server"?_.reject(new ue(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),b=new Vw(m,T,{includeMetadataChanges:!0,qa:!0});return Ow(c,b)})(await Gw(i),i.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="firestore.googleapis.com",oE=!0;class lE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Kw,this.ssl=oE}else this.host=e.host,this.ssl=e.ssl??oE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ww;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cC)throw new ue(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ad{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new UI;switch(s.type){case"firstParty":return new HI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ue(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=aE.get(n);s&&(de("ComponentProvider","Removing Datastore"),aE.delete(n),s.terminate())})(this),Promise.resolve()}}function V2(i,e,n,s={}){var _;i=ur(i,ad);const o=Do(e),c=i._getSettings(),d={...c,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(OE(`https://${m}`),ME("Firestore",!0)),c.host!==Kw&&c.host!==m&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:s};if(!la(g,d)&&(i._setSettings(g),s.mockUserToken)){let T,b;if(typeof s.mockUserToken=="string")T=s.mockUserToken,b=hn.MOCK_USER;else{T=GS(s.mockUserToken,(_=i._app)==null?void 0:_.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new ue(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new hn(S)}i._authCredentials=new zI(new CT(T,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class _t{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Ic(n,_t._jsonSchema))return new _t(e,s||null,new Ee(at.fromString(n.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:Dt("string",_t._jsonSchemaVersion),referencePath:Dt("string")};class ps extends Rs{constructor(e,n,s){super(e,n,Ag(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new Ee(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function Et(i,e,...n){if(i=vt(i),DT("collection","path",e),i instanceof ad){const s=at.fromString(e,...n);return T0(s),new ps(i,null,s)}{if(!(i instanceof _t||i instanceof ps))throw new ue(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(at.fromString(e,...n));return T0(s),new ps(i.firestore,null,s)}}function er(i,e,...n){if(i=vt(i),arguments.length===1&&(e=_g.newId()),DT("doc","path",e),i instanceof ad){const s=at.fromString(e,...n);return E0(s),new _t(i,null,new Ee(s))}{if(!(i instanceof _t||i instanceof ps))throw new ue(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(at.fromString(e,...n));return E0(s),new _t(i.firestore,i instanceof ps?i.converter:null,new Ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="AsyncQueue";class uE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Mg(this,"async_queue_retry"),this._c=()=>{const s=xm();s&&de(cE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=xm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=xm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Pr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ko(e))throw e;de(cE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,bi("INTERNAL UNHANDLED ERROR: ",hE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Ug.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:hE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function hE(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class ga extends ad{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new uE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uE(e),this._firestoreClient=void 0,await e}}}function k2(i,e){const n=typeof i=="object"?i:LE(),s=typeof i=="string"?i:Oh,o=ag(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=HS("firestore");c&&V2(o,...c)}return o}function od(i){if(i._terminated)throw new ue(X.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||j2(i),i._firestoreClient}function j2(i){var s,o,c;const e=i._freezeSettings(),n=(function(m,g,_,T){return new aN(m,g,_,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,Qw(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(i._databaseId,((s=i._app)==null?void 0:s.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new N2(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kn(rn.fromBase64String(e))}catch(n){throw new ue(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kn(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ic(e,kn._jsonSchema))return kn.fromBase64String(e.bytes)}}kn._jsonSchemaVersion="firestore/bytes/1.0",kn._jsonSchema={type:Dt("string",kn._jsonSchemaVersion),bytes:Dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mr._jsonSchemaVersion}}static fromJSON(e){if(Ic(e,Mr._jsonSchema))return new Mr(e.latitude,e.longitude)}}Mr._jsonSchemaVersion="firestore/geoPoint/1.0",Mr._jsonSchema={type:Dt("string",Mr._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ic(e,Vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Vr(e.vectorValues);throw new ue(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vr._jsonSchemaVersion="firestore/vectorValue/1.0",Vr._jsonSchema={type:Dt("string",Vr._jsonSchemaVersion),vectorValues:Dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=/^__.*__$/;class U2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cc(e,this.data,n,this.fieldTransforms)}}class Yw{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new xs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Xw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:i})}}class Gg{constructor(e,n,s,o,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Gg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Xw(this.Ac)&&L2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class z2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||rd(e)}Cc(e,n,s,o=!1){return new Gg({Ac:e,methodName:n,Dc:s,path:tn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vc(i){const e=i._freezeSettings(),n=rd(i._databaseId);return new z2(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Qg(i,e,n,s,o,c={}){const d=i.Cc(c.merge||c.mergeFields?2:0,e,n,o);Yg("Data must be an object, but it was:",d,s);const m=Zw(s,d);let g,_;if(c.merge)g=new jn(d.fieldMask),_=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const b of c.mergeFields){const S=eg(e,b,n);if(!d.contains(S))throw new ue(X.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);eb(T,S)||T.push(S)}g=new jn(T),_=d.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,_=d.fieldTransforms;return new U2(new vn(m),g,_)}class cd extends ld{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cd}}class Kg extends ld{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new vc(e.serializer,nw(e.serializer,this.Fc));return new DN(e.path,n)}isEqual(e){return e instanceof Kg&&this.Fc===e.Fc}}function $w(i,e,n,s){const o=i.Cc(1,e,n);Yg("Data must be an object, but it was:",o,s);const c=[],d=vn.empty();Ss(s,((g,_)=>{const T=Xg(e,g,n);_=vt(_);const b=o.yc(T);if(_ instanceof cd)c.push(T);else{const S=kc(_,b);S!=null&&(c.push(T),d.set(T,S))}}));const m=new jn(c);return new Yw(d,m,o.fieldTransforms)}function Ww(i,e,n,s,o,c){const d=i.Cc(1,e,n),m=[eg(e,s,n)],g=[o];if(c.length%2!=0)throw new ue(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<c.length;S+=2)m.push(eg(e,c[S])),g.push(c[S+1]);const _=[],T=vn.empty();for(let S=m.length-1;S>=0;--S)if(!eb(_,m[S])){const j=m[S];let k=g[S];k=vt(k);const K=d.yc(j);if(k instanceof cd)_.push(j);else{const H=kc(k,K);H!=null&&(_.push(j),T.set(j,H))}}const b=new jn(_);return new Yw(T,b,d.fieldTransforms)}function q2(i,e,n,s=!1){return kc(n,i.Cc(s?4:3,e))}function kc(i,e){if(Jw(i=vt(i)))return Yg("Unsupported field value:",e,i),Zw(i,e);if(i instanceof ld)return(function(s,o){if(!Xw(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let d=0;for(const m of s){let g=kc(m,o.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(i,e)}return(function(s,o){if((s=vt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return nw(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=et.fromDate(s);return{timestampValue:Lh(o.serializer,c)}}if(s instanceof et){const c=new et(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Lh(o.serializer,c)}}if(s instanceof Mr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof kn)return{bytesValue:mw(o.serializer,s._byteString)};if(s instanceof _t){const c=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ng(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Vr)return(function(d,m){return{mapValue:{fields:{[zT]:{stringValue:qT},[Mh]:{arrayValue:{values:d.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return Sg(m.serializer,_)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Xh(s)}`)})(i,e)}function Zw(i,e){const n={};return MT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ss(i,((s,o)=>{const c=kc(o,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function Jw(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof et||i instanceof Mr||i instanceof kn||i instanceof _t||i instanceof ld||i instanceof Vr)}function Yg(i,e,n){if(!Jw(n)||!PT(n)){const s=Xh(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function eg(i,e,n){if((e=vt(e))instanceof Mc)return e._internalPath;if(typeof e=="string")return Xg(i,e);throw Hh("Field path arguments must be of type string or ",i,!1,void 0,n)}const B2=new RegExp("[~\\*/\\[\\]]");function Xg(i,e,n){if(e.search(B2)>=0)throw Hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Mc(...e.split("."))._internalPath}catch{throw Hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Hh(i,e,n,s,o){const c=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${o}`),g+=")"),new ue(X.INVALID_ARGUMENT,m+i+g)}function eb(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n,s,o,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new H2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ud("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class H2 extends Fh{data(){return super.data()}}function ud(i,e){return typeof e=="string"?Xg(i,e):e instanceof Mc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ue(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $g{}class Wg extends $g{}function nn(i,e,...n){let s=[];e instanceof $g&&s.push(e),s=s.concat(n),(function(c){const d=c.filter((g=>g instanceof Zg)).length,m=c.filter((g=>g instanceof hd)).length;if(d>1||d>0&&m>0)throw new ue(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class hd extends Wg{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new hd(e,n,s)}_apply(e){const n=this._parse(e);return nb(e._query,n),new Rs(e.firestore,e.converter,Gm(e._query,n))}_parse(e){const n=Vc(e.firestore);return(function(c,d,m,g,_,T,b){let S;if(_.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ue(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){fE(b,T);const k=[];for(const K of b)k.push(dE(g,c,K));S={arrayValue:{values:k}}}else S=dE(g,c,b)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||fE(b,T),S=q2(m,d,b,T==="in"||T==="not-in");return Ct.create(_,T,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ct(i,e,n){const s=e,o=ud("where",i);return hd._create(o,s,n)}class Zg extends $g{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Zg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:hr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const m=c.getFlattenedFilters();for(const g of m)nb(d,g),d=Gm(d,g)})(e._query,n),new Rs(e.firestore,e.converter,Gm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jg extends Wg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Jg(e,n)}_apply(e){const n=(function(o,c,d){if(o.startAt!==null)throw new ue(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ue(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pc(c,d)})(e._query,this._field,this._direction);return new Rs(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new jo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function tb(i,e="asc"){const n=e,s=ud("orderBy",i);return Jg._create(s,n)}class ep extends Wg{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new ep(e,n,s)}_apply(e){return new Rs(e.firestore,e.converter,kh(e._query,this._limit,this._limitType))}}function G2(i){return ep._create("limit",i,"F")}function dE(i,e,n){if(typeof(n=vt(n))=="string"){if(n==="")throw new ue(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XT(e)&&n.indexOf("/")!==-1)throw new ue(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(at.fromString(n));if(!Ee.isDocumentKey(s))throw new ue(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return N0(i,new Ee(s))}if(n instanceof _t)return N0(i,n._key);throw new ue(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xh(n)}.`)}function fE(i,e){if(!Array.isArray(i)||i.length===0)throw new ue(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nb(i,e){const n=(function(o,c){for(const d of o)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ue(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rb{convertValue(e,n="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ss(e,((o,c)=>{s[o]=this.convertValue(c,n)})),s}convertVectorValue(e){var s,o,c;const n=(c=(o=(s=e.fields)==null?void 0:s[Mh].arrayValue)==null?void 0:o.values)==null?void 0:c.map((d=>At(d.doubleValue)));return new Vr(n)}convertGeoPoint(e){return new Mr(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Wh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(fc(e));default:return null}}convertTimestamp(e){const n=vs(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=at.fromString(e);Ge(Tw(s),9688,{name:e});const o=new mc(s.get(1),s.get(3)),c=new Ee(s.popFirst(5));return o.isEqual(n)||bi(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class Q2 extends rb{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}class go{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ys extends Fh{constructor(e,n,s,o,c,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ud("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ys._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",ys._jsonSchema={type:Dt("string",ys._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class wh extends ys{data(e={}){return super.data(e)}}class To{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new go(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new wh(this._firestore,this._userDataWriter,s.key,s,new go(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const g=new wh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new go(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new wh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new go(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,T=-1;return m.type!==0&&(_=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),T=d.indexOf(m.doc.key)),{type:K2(m.type),doc:g,oldIndex:_,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=To._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_g.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function K2(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(i){i=ur(i,_t);const e=ur(i.firestore,ga);return O2(od(e),i._key).then((n=>Y2(e,i,n)))}To._jsonSchemaVersion="firestore/querySnapshot/1.0",To._jsonSchema={type:Dt("string",To._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class np extends rb{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function Yt(i){i=ur(i,Rs);const e=ur(i.firestore,ga),n=od(e),s=new np(e);return F2(i._query),M2(n,i._query).then((o=>new To(e,s,i,o)))}function ib(i,e,n){i=ur(i,_t);const s=ur(i.firestore,ga),o=tp(i.converter,e,n);return ip(s,[Qg(Vc(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,dn.none())])}function sb(i,e,n,...s){i=ur(i,_t);const o=ur(i.firestore,ga),c=Vc(o);let d;return d=typeof(e=vt(e))=="string"||e instanceof Mc?Ww(c,"updateDoc",i._key,e,n,s):$w(c,"updateDoc",i._key,e),ip(o,[d.toMutation(i._key,dn.exists(!0))])}function rp(i,e){const n=ur(i.firestore,ga),s=er(i),o=tp(i.converter,e);return ip(n,[Qg(Vc(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,dn.exists(!1))]).then((()=>s))}function ip(i,e){return(function(s,o){const c=new Pr;return s.asyncQueue.enqueueAndForget((async()=>_2(await D2(s),o,c))),c.promise})(od(i),e)}function Y2(i,e,n){const s=n.docs.get(e._key),o=new np(i);return new ys(i,o,e._key,s,new go(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2={maxAttempts:5};function ec(i,e){if((i=vt(i)).firestore!==e)throw new ue(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Vc(e)}get(e){const n=ec(e,this._firestore),s=new Q2(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return Te(24041);const c=o[0];if(c.isFoundDocument())return new Fh(this._firestore,s,c.key,c,n.converter);if(c.isNoDocument())return new Fh(this._firestore,s,n._key,null,n.converter);throw Te(18433,{doc:c})}))}set(e,n,s){const o=ec(e,this._firestore),c=tp(o.converter,n,s),d=Qg(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,s);return this._transaction.set(o._key,d),this}update(e,n,s,...o){const c=ec(e,this._firestore);let d;return d=typeof(n=vt(n))=="string"||n instanceof Mc?Ww(this._dataReader,"Transaction.update",c._key,n,s,o):$w(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,d),this}delete(e){const n=ec(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2 extends $2{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ec(e,this._firestore),s=new np(this._firestore);return super.get(e).then((o=>new ys(this._firestore,s,n._key,o._document,new go(!1,!1),n.converter)))}}function Z2(i,e,n){i=ur(i,ga);const s={...X2,...n};return(function(c){if(c.maxAttempts<1)throw new ue(X.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(c,d,m){const g=new Pr;return c.asyncQueue.enqueueAndForget((async()=>{const _=await P2(c);new I2(c.asyncQueue,_,m,d,g).ju()})),g.promise})(od(i),(o=>e(new W2(i,o))),s)}function ab(i){return new Kg("increment",i)}(function(e,n=!0){(function(o){Mo=o})(Po),bo(new ca("firestore",((s,{instanceIdentifier:o,options:c})=>{const d=s.getProvider("app").getImmediate(),m=new ga(new qI(s.getProvider("auth-internal")),new FI(d,s.getProvider("app-check-internal")),(function(_,T){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ue(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(_.options.projectId,T)})(d,o),d);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),ms(p0,y0,e),ms(p0,y0,"esm2020")})();var J2="firebase",eD="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(J2,eD,"app");const tD={apiKey:"AIzaSyCDZJqOx5eXpu3cD_FBJ8oi-hYvLCpbDXE",authDomain:"verdadreto-bec6a.firebaseapp.com",projectId:"verdadreto-bec6a",storageBucket:"verdadreto-bec6a.firebasestorage.app",messagingSenderId:"938969209658",appId:"1:938969209658:web:534282f57a8ff381c00e03"},ob=jE(tD),Qe=k2(ob),dr=jI(ob),lb=new yi;lb.setCustomParameters({prompt:"select_account"});const mE=()=>{const i="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<6;n++)e+=i.charAt(Math.floor(Math.random()*i.length));return e},nD=async i=>{try{const e=Et(Qe,"users"),n=nn(e,ct("referralCode","==",i));return(await Yt(n)).empty}catch(e){return console.error("Error checking referral code uniqueness:",e),!1}},rD=async()=>{let i,e=!1,n=0;const s=10;do i=mE(),e=await nD(i),n++;while(!e&&n<s);return e||(i=mE()+Date.now().toString().slice(-2)),i},sp=async(i,e)=>{try{const n=er(Qe,"users",i.uid);if(!(await Si(n)).exists()){const o=await rD(),c={uid:i.uid,email:i.email,displayName:i.displayName,photoURL:i.photoURL,isAnonymous:i.isAnonymous,emailVerified:i.emailVerified,referralCode:o,referralCount:0,createdAt:new Date,...e&&{usedReferralCode:e}};await ib(n,c)}}catch(n){console.error("Error creating user profile:",n)}},Uo=i=>({uid:i.uid,email:i.email,displayName:i.displayName,photoURL:i.photoURL,isAnonymous:i.isAnonymous,emailVerified:i.emailVerified}),cb=async i=>{try{const e=await QR(dr,lb);return await sp(e.user,i),Uo(e.user)}catch(e){throw console.error("Error al iniciar sesin con Google:",e),new Error(e.message||"Error al iniciar sesin con Google")}},ub=async(i,e)=>{try{const n=await ER(dr,i,e);return Uo(n.user)}catch(n){throw console.error("Error al iniciar sesin:",n),new Error(op(n.code))}},hb=async(i,e,n,s)=>{try{const o=await vR(dr,i,e);return n&&await wR(o.user,{displayName:n}),await sp(o.user,s),await hT(o.user),Uo(o.user)}catch(o){throw console.error("Error al registrarse:",o),new Error(op(o.code))}},db=async()=>{try{const i=await mR(dr);return await sp(i.user),Uo(i.user)}catch(i){throw console.error("Error al iniciar sesin annima:",i),new Error("Error al iniciar sesin annima")}},iD=async()=>{try{await xR(dr)}catch(i){throw console.error("Error al cerrar sesin:",i),new Error("Error al cerrar sesin")}},fb=async i=>{try{await _R(dr,i)}catch(e){throw console.error("Error al enviar email de restablecimiento:",e),new Error(op(e.code))}},mb=async()=>{try{if(dr.currentUser)await hT(dr.currentUser);else throw new Error("No hay usuario autenticado")}catch(i){throw console.error("Error al reenviar verificacin:",i),new Error("Error al reenviar verificacin de email")}},gb=i=>SR(dr,e=>{i(e?Uo(e):null)}),ap=()=>dr.currentUser?Uo(dr.currentUser):null,tg=()=>{const i=ap();return i!==null&&!i.isAnonymous&&i.emailVerified},op=i=>{switch(i){case"auth/user-not-found":return"No existe una cuenta con este email";case"auth/wrong-password":return"Contrasea incorrecta";case"auth/email-already-in-use":return"Ya existe una cuenta con este email";case"auth/weak-password":return"La contrasea debe tener al menos 6 caracteres";case"auth/invalid-email":return"Email invlido";case"auth/too-many-requests":return"Demasiados intentos fallidos. Intenta ms tarde";case"auth/network-request-failed":return"Error de conexin. Verifica tu internet";default:return"Error de autenticacin. Intenta nuevamente"}},sD=Object.freeze(Object.defineProperty({__proto__:null,canPurchase:tg,getCurrentUser:ap,logout:iD,onAuthStateChange:gb,registerWithEmail:hb,resendEmailVerification:mb,resetPassword:fb,signInAnonymous:db,signInWithEmail:ub,signInWithGoogle:cb},Symbol.toStringTag,{value:"Module"})),pb=ne.createContext(void 0),aD=({children:i})=>{const[e,n]=ne.useState({user:null,isLoading:!0,isAuthenticated:!1});ne.useEffect(()=>{const m=gb(g=>{n({user:g,isLoading:!1,isAuthenticated:g!==null&&!g.isAnonymous})});return()=>m()},[]);const d={...e,login:()=>{},logout:async()=>{try{const{logout:m}=await AE(async()=>{const{logout:g}=await Promise.resolve().then(()=>sD);return{logout:g}},void 0,import.meta.url);await m()}catch(m){console.error("Error al cerrar sesin:",m)}},refreshUser:()=>{const m=ap();n(g=>({...g,user:m,isAuthenticated:m!==null&&!m.isAnonymous}))}};return y.jsx(pb.Provider,{value:d,children:i})},zo=()=>{const i=ne.useContext(pb);if(i===void 0)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return i},As={PURCHASED_PACKS:"verdad_reto_purchased_packs",CACHED_GAME_ITEMS:"verdad_reto_cached_items",CACHED_CATEGORIES:"verdad_reto_cached_categories",CACHE_PERMISSION:"verdad_reto_cache_permission",LAST_SYNC:"verdad_reto_last_sync"},oD=()=>{const i=localStorage.getItem(As.CACHE_PERMISSION);if(i==="granted")return!0;if(i==="denied")return!1;const e=window.confirm(`Deseas permitir que la aplicacin guarde los packs comprados localmente para poder jugar sin conexin?

Esto mejorar tu experiencia permitindote acceder a tus packs incluso sin internet.`);return localStorage.setItem(As.CACHE_PERMISSION,e?"granted":"denied"),e},Ec=()=>localStorage.getItem(As.CACHE_PERMISSION)==="granted",lD=async(i,e,n)=>{if(!Ec()){console.log("Cache permission not granted, skipping cache");return}try{const s={pack:i,gameData:{items:e,categories:n,timestamp:Date.now()},timestamp:Date.now()},o=lp();o[i.id]=s,localStorage.setItem(As.PURCHASED_PACKS,JSON.stringify(o)),localStorage.setItem(As.LAST_SYNC,Date.now().toString()),console.log(`Pack ${i.name} cached successfully`)}catch(s){console.error("Error caching pack:",s)}},lp=()=>{try{const i=localStorage.getItem(As.PURCHASED_PACKS);return i?JSON.parse(i):{}}catch(i){return console.error("Error reading cached packs:",i),{}}},cD=i=>{if(!Ec())return null;try{const e=lp(),n=[],s=[];for(const o of i){const c=e[o];c&&(n.push(...c.gameData.items),s.push(...c.gameData.categories))}return n.length===0?null:{items:n,categories:[...new Set(s)]}}catch(e){return console.error("Error reading cached game data:",e),null}},uD=()=>{Object.values(As).forEach(i=>{localStorage.removeItem(i)}),console.log("Cache cleared successfully")},yb=()=>{const i=lp(),e=localStorage.getItem(As.LAST_SYNC);return{hasPermission:Ec(),packsCount:Object.keys(i).length,lastSync:e?new Date(parseInt(e)):null,packs:Object.keys(i)}};var _b="basil",hD=function(e){return e===3?"v3":e},vb="https://js.stripe.com",dD="".concat(vb,"/").concat(_b,"/stripe.js"),fD=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,mD=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var gD=function(e){return fD.test(e)||mD.test(e)},pD=function(){for(var e=document.querySelectorAll('script[src^="'.concat(vb,'"]')),n=0;n<e.length;n++){var s=e[n];if(gD(s.src))return s}return null},gE=function(e){var n="",s=document.createElement("script");s.src="".concat(dD).concat(n);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(s),s},yD=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:n})},Kl=null,hh=null,dh=null,_D=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},vD=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},ED=function(e){return Kl!==null?Kl:(Kl=new Promise(function(n,s){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var o=pD();if(!(o&&e)){if(!o)o=gE(e);else if(o&&dh!==null&&hh!==null){var c;o.removeEventListener("load",dh),o.removeEventListener("error",hh),(c=o.parentNode)===null||c===void 0||c.removeChild(o),o=gE(e)}}dh=vD(n,s),hh=_D(s),o.addEventListener("load",dh),o.addEventListener("error",hh)}catch(d){s(d);return}}),Kl.catch(function(n){return Kl=null,Promise.reject(n)}))},TD=function(e,n,s){if(e===null)return null;var o=n[0],c=o.match(/^pk_test/),d=hD(e.version),m=_b;c&&d!==m&&console.warn("Stripe.js@".concat(d," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(m,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var g=e.apply(void 0,n);return yD(g,s),g},Yl,Eb=!1,Tb=function(){return Yl||(Yl=ED(null).catch(function(e){return Yl=null,Promise.reject(e)}),Yl)};Promise.resolve().then(function(){return Tb()}).catch(function(i){Eb||console.warn(i)});var wD=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];Eb=!0;var o=Date.now();return Tb().then(function(c){return TD(c,n,o)})};const bD="pk_live_51S2dpMEamlsERKowyMSm4kgm11dMknJLyZGy9gZsIBBd3BQo3l9Vnn0TYKWcmuDtnq23YEsHo7FL69hGEM3UAboz00Onx53LCm";let Im=null;const AD=()=>(Im||(Im=wD(bD)),Im),wb=async()=>{try{const i=await Si(er(Qe,"config","stripe"));return i.exists()?i.data():null}catch(i){return console.error("Error obteniendo configuracin de Stripe:",i),null}},SD=async(i,e,n)=>{try{if(!i.isPremium)throw new Error("Este pack no requiere pago");const s=await wb();if(!s)throw new Error("Configuracin de Stripe no disponible");const o=i.priceAmount||0,c=i.originalPriceAmount||i.priceAmount||0;console.log("Creando sesin de checkout:",{packId:i.id,originalAmount:c,finalAmount:o,hasDiscount:i.hasDiscount,discountReason:i.discountReason});const d=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packId:i.id,priceId:i.stripePriceId,userEmail:e,userId:n,successUrl:`${window.location.origin}${s.successUrl}&pack=${i.id}`,cancelUrl:`${window.location.origin}${s.cancelUrl}`,hasDiscount:i.hasDiscount,finalAmount:o,originalAmount:c,discountReason:i.discountReason})});if(!d.ok){const g=await d.json();throw new Error(g.error||"Error creando sesin de pago")}const m=await d.json();return{sessionId:m.id,url:m.url}}catch(s){throw console.error("Error creando sesin de checkout:",s),s}},xD=async(i,e,n)=>{try{const s=await AD();if(!s)throw new Error("Stripe no est disponible");const o=await SD(i,e,n);if(!o)throw new Error("No se pudo crear la sesin de pago");await RD({userId:n,packId:i.id,stripeSessionId:o.sessionId,purchaseDate:new Date,amount:i.priceAmount||0,currency:i.currency||"EUR",status:"pending",email:e});const{error:c}=await s.redirectToCheckout({sessionId:o.sessionId});if(c)throw new Error(c.message)}catch(s){throw console.error("Error redirigiendo a checkout:",s),s}},RD=async i=>{try{return(await rp(Et(Qe,"userPurchases"),{...i,purchaseDate:i.purchaseDate.toISOString()})).id}catch(e){throw console.error("Error guardando compra pendiente:",e),e}},ID=async i=>{try{const e=nn(Et(Qe,"userPurchases"),ct("userId","==",i),ct("status","==","completed"));return(await Yt(e)).docs.map(s=>({id:s.id,...s.data(),purchaseDate:new Date(s.data().purchaseDate)}))}catch(e){return console.error("Error obteniendo compras del usuario:",e),[]}},pE=async i=>{try{return(await ID(i)).map(n=>n.packId)}catch(e){return console.error("Error obteniendo packs comprados:",e),[]}},ND=({onClose:i})=>{const[e,n]=ne.useState(null),[s,o]=ne.useState(!1);ne.useEffect(()=>{c()},[]);const c=()=>{const g=yb();n(g)},d=async()=>{o(!0);try{oD()&&c()}finally{o(!1)}},m=()=>{window.confirm("Ests seguro de que quieres eliminar todos los datos guardados localmente?")&&(uD(),c())};return e?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-xl font-bold",children:"Almacenamiento Local"}),y.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"font-semibold mb-2",children:"Estado del Cach"}),y.jsxs("div",{className:"space-y-2 text-sm",children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"Permiso:"}),y.jsx("span",{className:`font-medium ${e.hasPermission?"text-green-600":"text-red-600"}`,children:e.hasPermission?"Activado":"Desactivado"})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"Packs guardados:"}),y.jsx("span",{className:"font-medium",children:e.packsCount})]}),e.lastSync&&y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"ltima sincronizacin:"}),y.jsxs("span",{className:"font-medium text-xs",children:[e.lastSync.toLocaleDateString()," ",e.lastSync.toLocaleTimeString()]})]})]})]}),e.packsCount>0&&y.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"font-semibold mb-2",children:"Packs Disponibles Sin Conexin"}),y.jsx("div",{className:"space-y-1 text-sm",children:e.packs.map(g=>y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),y.jsx("span",{className:"capitalize",children:g.replace("-"," ")})]},g))})]}),y.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"font-semibold mb-2",children:"Qu es el almacenamiento local?"}),y.jsx("p",{className:"text-sm text-gray-700",children:"Permite guardar los packs que compres en tu dispositivo para poder jugar sin conexin a internet. Los datos se mantienen seguros en tu navegador."})]}),y.jsxs("div",{className:"flex flex-col space-y-2",children:[e.hasPermission?y.jsx("div",{className:"text-center text-green-600 font-medium",children:" Almacenamiento local activado"}):y.jsx(Me,{onClick:d,disabled:s,className:"w-full bg-green-600 hover:bg-green-700",children:s?"Procesando...":"Activar Almacenamiento Local"}),e.packsCount>0&&y.jsx(Me,{onClick:m,className:"w-full bg-red-600 hover:bg-red-700",children:"Limpiar Datos Guardados"}),y.jsx(Me,{onClick:i,className:"w-full bg-gray-600 hover:bg-gray-700",children:"Cerrar"})]})]})]})}):y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:y.jsx("div",{className:"text-center",children:"Cargando informacin del cach..."})})})},CD=({pack:i,onBack:e,onSuccess:n})=>{const{user:s}=zo(),[o,c]=ne.useState(!1),[d,m]=ne.useState(null),[g,_]=ne.useState(null);ne.useEffect(()=>{(async()=>{try{const j=await wb();_(j)}catch{m("Error cargando configuracin de pago")}})()},[]);const T=async()=>{if(!s||!s.email){m("Debes estar autenticado para realizar una compra");return}if(!i.isPremium){m("Este pack no requiere pago");return}c(!0),m(null);try{await xD(i,s.email,s.uid),n&&n()}catch(S){m(S.message||"Error procesando el pago"),c(!1)}},b=(S,j)=>new Intl.NumberFormat("es-ES",{style:"currency",currency:j.toUpperCase()}).format(S/100);return g?y.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:y.jsxs("div",{className:"w-full max-w-md",children:[y.jsxs("div",{className:"relative text-center mb-8",children:[y.jsx("button",{onClick:e,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:y.jsx(wE,{className:"w-8 h-8"})}),y.jsx("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Checkout"})]}),y.jsxs(xn,{className:"p-6",children:[y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("div",{className:"text-6xl mb-4",children:i.icon}),y.jsx("h2",{className:"text-2xl font-bold text-cyan-400 mb-2",children:i.name}),y.jsx("p",{className:"text-gray-400 mb-4",children:i.description}),i.priceAmount&&i.currency&&y.jsxs("div",{className:"bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-lg p-4 mb-4",children:[y.jsx("div",{className:"text-3xl font-bold text-white",children:b(i.priceAmount,i.currency)}),y.jsx("div",{className:"text-sm text-gray-300",children:"Pago nico"})]})]}),y.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 mb-6",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx(po,{className:"w-5 h-5 text-green-400"}),y.jsx("span",{className:"text-green-400 font-semibold",children:"Pago seguro"})]}),y.jsx("p",{className:"text-sm text-gray-300",children:"Tu pago est protegido por Stripe. No almacenamos informacin de tarjetas de crdito."})]}),s&&y.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:[y.jsxs("div",{className:"text-sm text-gray-300",children:[y.jsx("strong",{children:"Cuenta:"})," ",s.displayName||s.email]}),y.jsxs("div",{className:"text-sm text-gray-300",children:[y.jsx("strong",{children:"Email:"})," ",s.email]})]}),d&&y.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6",children:y.jsx("p",{className:"text-red-200 text-sm",children:d})}),y.jsx(Me,{onClick:T,disabled:o||!s,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:o?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Procesando..."]}):y.jsxs(y.Fragment,{children:[y.jsx(bE,{className:"w-5 h-5"}),"Pagar con Stripe"]})}),y.jsx("div",{className:"mt-4 text-center",children:y.jsx("p",{className:"text-xs text-gray-400",children:"Al continuar, aceptas nuestros trminos de servicio y poltica de privacidad."})})]}),y.jsxs("div",{className:"mt-6 text-center",children:[y.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Mtodos de pago aceptados:"}),y.jsxs("div",{className:"flex justify-center gap-2",children:[y.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Visa"}),y.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"Mastercard"}),y.jsx("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-gray-300",children:"American Express"})]})]})]})}):y.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),y.jsx("p",{className:"text-gray-400",children:"Cargando configuracin de pago..."})]})})},DD=({availablePacks:i,purchasedPacks:e,onPurchase:n,onBack:s,onGoToLogin:o})=>{const{user:c,isAuthenticated:d}=zo(),[m,g]=ne.useState(!1),[_,T]=ne.useState(!1),[b,S]=ne.useState(!1),[j,k]=ne.useState(null),[K,H]=ne.useState([]),[oe,se]=ne.useState(!1);ne.useEffect(()=>{(async()=>{if(c&&d){se(!0);try{const x=await pE(c.uid);H(x)}catch(x){console.error("Error cargando compras del usuario:",x)}finally{se(!1)}}else H([])})()},[c,d]);const re=R=>{const x=i.find(N=>N.id===R);if(x){if(!x.isPremium||x.id==="base"){if(!tg()){g(!0),setTimeout(()=>g(!1),3e3);return}n(R);return}if(!tg()){g(!0),setTimeout(()=>g(!1),3e3);return}k(x),S(!0)}},fe=async()=>{if(S(!1),k(null),c&&d)try{const R=await pE(c.uid);H(R),j&&R.includes(j.id)&&n(j.id)}catch(R){console.error("Error actualizando compras:",R)}},he=()=>{S(!1),k(null)},ae=yb();return y.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in",children:y.jsxs("div",{className:"w-full max-w-2xl",children:[y.jsxs("div",{className:"relative text-center mb-8",children:[y.jsx("button",{onClick:s,className:"absolute left-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:y.jsx(wE,{className:"w-8 h-8"})}),y.jsx("button",{onClick:()=>T(!0),className:"absolute right-0 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",title:"Gestionar almacenamiento local",children:y.jsxs("div",{className:"relative",children:[y.jsx(TE,{className:"w-8 h-8"}),ae.packsCount>0&&y.jsx("span",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:ae.packsCount})]})}),y.jsx("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Tienda de Paquetes"}),y.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 text-sm",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(fS,{className:"w-4 h-4"}),c?y.jsx("span",{className:`${d?"text-green-400":"text-yellow-400"}`,children:d?`Conectado como ${c.displayName||c.email}`:"Usuario annimo - Inicia sesin para comprar"}):y.jsx("span",{className:"text-gray-400",children:"No conectado"})]}),c&&d&&y.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:y.jsx("a",{href:"https://verdad-reto.es.eu.org/delete-account.html",target:"_blank",rel:"noopener noreferrer",className:"hover:text-red-400 transition-colors",children:"Eliminar cuenta"})})]})]}),m&&y.jsxs("div",{className:"mb-6 p-4 bg-yellow-500/20 border border-yellow-500 rounded-lg text-center",children:[y.jsx("p",{className:"text-yellow-100 mb-2",children:"Necesitas iniciar sesin y verificar tu email para comprar packs premium"}),o&&y.jsx(Me,{onClick:o,className:"bg-yellow-600 hover:bg-yellow-700",children:"Ir a Iniciar Sesin"})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(R=>{const x=e.includes(R.id),N=K.includes(R.id),P=x||N,M=R.id==="base",O=R.isPremium&&!M,I=O&&!P;return y.jsxs(xn,{className:`flex flex-col text-center border-2 transition-all ${P?"border-green-500/50":I?"border-yellow-500/50 opacity-75":"border-transparent hover:border-pink-500/50"}`,children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"text-5xl mb-4",children:R.icon}),I&&y.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-500 rounded-full p-1",children:y.jsx(po,{className:"w-4 h-4 text-black"})})]}),y.jsx("h2",{className:`text-2xl font-bold ${P?"text-green-400":I?"text-yellow-400":"text-cyan-400"}`,children:R.name}),y.jsx("p",{className:"text-gray-400 mt-2 mb-2 flex-grow",children:R.description}),O&&R.priceAmount&&R.currency&&y.jsxs("div",{className:"mb-4",children:[R.hasDiscount&&R.originalPriceAmount?y.jsxs("div",{className:"space-y-1",children:[y.jsx("div",{className:"text-sm text-gray-500 line-through",children:new Intl.NumberFormat("es-ES",{style:"currency",currency:R.currency.toUpperCase()}).format(R.originalPriceAmount/100)}),y.jsx("div",{className:`text-lg font-bold ${P?"text-green-400":"text-red-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:R.currency.toUpperCase()}).format(R.priceAmount/100)}),y.jsx("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:R.discountPercentage?`-${R.discountPercentage}%`:`-${new Intl.NumberFormat("es-ES",{style:"currency",currency:R.currency.toUpperCase()}).format((R.originalPriceAmount-R.priceAmount)/100)}`}),R.discountReason&&y.jsx("div",{className:"text-xs text-yellow-400 italic",children:R.discountReason})]}):y.jsx("div",{className:`text-lg font-bold ${P?"text-green-400":"text-yellow-400"}`,children:new Intl.NumberFormat("es-ES",{style:"currency",currency:R.currency.toUpperCase()}).format(R.priceAmount/100)}),y.jsx("div",{className:"text-xs text-gray-500",children:"Pago nico"})]}),P?y.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-green-700 text-green-200",children:" Comprado"}):M?y.jsx("div",{className:"mt-auto w-full px-6 py-3 font-bold rounded-lg bg-blue-700 text-blue-200",children:"Incluido"}):O?y.jsx(Me,{onClick:()=>re(R.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",disabled:oe,children:oe?y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):y.jsxs(y.Fragment,{children:[y.jsx(bE,{className:"w-4 h-4"}),"Comprar ",R.price]})}):y.jsxs(Me,{onClick:()=>re(R.id),variant:"secondary",className:"mt-auto w-full flex items-center justify-center gap-2",children:[y.jsx(po,{className:"w-4 h-4"}),"Desbloquear (",R.price,")"]})]},R.id)})}),_&&y.jsx(ND,{onClose:()=>T(!1)}),b&&j&&y.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:y.jsx("div",{className:"w-full h-full",children:y.jsx(CD,{pack:j,onBack:he,onSuccess:fe})})})]})})},PD=i=>{var n;if(!i.hasDiscount||!i.priceAmount)return i;if(i.discountValidUntil&&new Date>i.discountValidUntil)return{...i,hasDiscount:!1};let e=i.priceAmount;return i.discountPercentage?e=i.priceAmount*(1-i.discountPercentage/100):i.discountAmount&&(e=i.priceAmount-i.discountAmount),e=Math.max(0,Math.round(e)),{...i,originalPriceAmount:i.priceAmount,priceAmount:e,price:new Intl.NumberFormat("es-ES",{style:"currency",currency:((n=i.currency)==null?void 0:n.toUpperCase())||"EUR"}).format(e/100)}},cp=async()=>{try{const i=Et(Qe,"packs"),e=await Yt(i);return e.empty?(console.warn("No packs found in Firebase database"),[]):e.docs.map(o=>{const c=o.data();return{id:o.id,name:c.name,description:c.description,price:c.price,icon:c.icon,isActive:c.isActive??!0,priceAmount:c.priceAmount,currency:c.currency,isPremium:c.isPremium??!1,stripeProductId:c.stripeProductId,stripePriceId:c.stripePriceId,hasDiscount:c.hasDiscount??!1,discountPercentage:c.discountPercentage,discountAmount:c.discountAmount,discountReason:c.discountReason,discountValidUntil:c.discountValidUntil?c.discountValidUntil.toDate():void 0,originalPriceAmount:c.originalPriceAmount,allowDemo:c.allowDemo??!1,demoPlaysCount:c.demoPlaysCount??0}}).filter(o=>o.isActive).map(o=>PD(o))}catch(i){throw console.error("Error connecting to Firebase:",i),new Error("No se pudo conectar a la base de datos. Verifica tu conexin a internet.")}},OD=async i=>{try{if(!i||i.length===0)return console.warn("No categories provided for questions query"),[];const e=Et(Qe,"gameItems"),n=nn(e,ct("type","==","question"),ct("category","in",i)),s=await Yt(n);return s.empty?(console.warn("No questions found in Firebase database for categories:",i),[]):s.docs.map(c=>{const d=c.data();return{text:d.text,category:d.category}})}catch(e){throw console.error("Error fetching questions from Firebase:",e),new Error("No se pudieron cargar las preguntas. Verifica tu conexin a internet.")}},MD=async i=>{try{if(!i||i.length===0)return console.warn("No categories provided for dares query"),[];const e=Et(Qe,"gameItems"),n=nn(e,ct("type","==","dare"),ct("category","in",i)),s=await Yt(n);return s.empty?(console.warn("No dares found in Firebase database for categories:",i),[]):s.docs.map(c=>{const d=c.data();return{text:d.text,category:d.category}})}catch(e){throw console.error("Error fetching dares from Firebase:",e),new Error("No se pudieron cargar los retos. Verifica tu conexin a internet.")}},VD=async i=>{try{if(!i||i.length===0)return console.warn("No pack IDs provided for categories query"),[];const e=Et(Qe,"gameItems"),n=nn(e,ct("packId","in",i)),s=await Yt(n);return s.empty?(console.warn("No categories found in Firebase database for packs:",i),[]):[...new Set(s.docs.map(c=>c.data().category))]}catch(e){throw console.error("Error fetching categories from Firebase:",e),new Error("No se pudieron cargar las categoras. Verifica tu conexin a internet.")}},kD=async i=>{try{if(!i||i.length===0)return console.warn("No pack IDs provided for game data query"),{questions:[],dares:[],categories:[]};const e=await VD(i),[n,s]=await Promise.all([OD(e),MD(e)]);if(Ec()&&(n.length>0||s.length>0)){const o=[...n,...s],c=i.reduce((d,m)=>{const g=o.filter(T=>T.packId===m),_=e.filter(T=>g.some(b=>b.category===T));return g.length>0&&(d[m]={items:g,categories:_}),d},{});for(const[d,m]of Object.entries(c)){const _=(await cp()).find(T=>T.id===d);_&&await lD(_,m.items,m.categories)}}return{questions:n,dares:s,categories:e}}catch(e){console.error("Error fetching game data from Firebase:",e);const n=cD(i);if(n){console.log("Using cached game data for offline play");const s=n.items.filter(c=>!("type"in c)||c.type==="question"),o=n.items.filter(c=>"type"in c&&c.type==="dare");return{questions:s,dares:o,categories:n.categories}}throw Ec()?new Error("No hay conexin a internet y no tienes datos guardados para estos packs."):new Error("No hay conexin a internet y no tienes packs guardados localmente. Deseas activar el almacenamiento local para jugar sin conexin?")}},jD=async i=>{try{const e=Et(Qe,"gameItems"),n=nn(e,ct("packId","==",i),ct("isDemo","==",!0)),o=(await Yt(n)).docs.map(g=>({id:g.id,...g.data()})),c=o.filter(g=>g.type==="question").map(g=>({text:g.text,category:g.category,isDemo:!0,packId:g.packId})),d=o.filter(g=>g.type==="dare").map(g=>({text:g.text,category:g.category,isDemo:!0,packId:g.packId})),m=[...new Set(o.map(g=>g.category))];return{questions:c,dares:d,categories:m}}catch(e){return console.error("Error fetching demo data:",e),{questions:[],dares:[],categories:[]}}},LD=async(i,e)=>{try{const n={packId:i,userId:e||"anonymous",timestamp:new Date,type:"demo_play"};await rp(Et(Qe,"demoLogs"),n);const s=Et(Qe,"packs"),o=er(s,i),c=await Si(o);if(c.exists()){const d=c.data().demoPlaysCount||0;await sb(o,{demoPlaysCount:d+1})}console.log("Demo play logged successfully")}catch(n){console.error("Error logging demo play:",n)}},bb=async(i,e)=>{try{if(!i||i.trim().length===0)return{isValid:!1,error:"El cdigo de referido no puede estar vaco"};const n=Et(Qe,"users"),s=nn(n,ct("referralCode","==",i.toUpperCase())),o=await Yt(s);if(o.empty)return{isValid:!1,error:"Cdigo de referido no vlido"};const c=o.docs[0],d=c.data(),m=c.id;if(m===e)return{isValid:!1,error:"No puedes usar tu propio cdigo de referido"};const g=await Si(er(Qe,"users",e));if(g.exists()&&g.data().usedReferralCode)return{isValid:!1,error:"Ya has usado un cdigo de referido anteriormente"};const _=new Date,T=new Date(_.getTime()-3600*1e3),b=Et(Qe,"referrals"),S=nn(b,ct("referrerUid","==",m),ct("createdAt",">=",T));if((await Yt(S)).size>=5)return{isValid:!1,message:"Lmite de referidos por hora excedido. Intenta ms tarde."};const k=new Date(_.getTime()-1440*60*1e3),K=nn(b,ct("referrerUid","==",m),ct("createdAt",">=",k));return(await Yt(K)).size>=20?{isValid:!1,message:"Lmite diario de referidos excedido. Intenta maana."}:{isValid:!0,referrerName:d.displayName||d.email||"Usuario"}}catch(n){return console.error("Error validating referral code:",n),{isValid:!1,error:"Error al validar el cdigo de referido"}}},UD=async(i,e)=>{try{return await Z2(Qe,async n=>{var fe;const s=Et(Qe,"users"),o=nn(s,ct("referralCode","==",i.toUpperCase())),c=await Yt(o);if(c.empty)throw new Error("Cdigo de referido no vlido");const d=c.docs[0],m=er(Qe,"users",d.id),g=er(Qe,"users",e),_=await n.get(g);if(_.exists()&&_.data().usedReferralCode)throw new Error("Ya has usado un cdigo de referido");if(d.id===e)throw new Error("No puedes usar tu propio cdigo");const T=new Date,b=_.data(),S=((fe=b==null?void 0:b.createdAt)==null?void 0:fe.toDate())||new Date,j=new Date(T.getTime()-300*1e3);if(S>j)throw new Error("Usuario muy reciente, posible abuso");const k=b==null?void 0:b.lastKnownIP,K=d.data(),H=K==null?void 0:K.lastKnownIP;k&&H&&k===H&&console.warn("Posible abuso: misma IP para referrer y referido");const oe=b==null?void 0:b.deviceId,se=K==null?void 0:K.deviceId;if(oe&&se&&oe===se)throw new Error("No se puede usar el mismo dispositivo para referir");n.update(m,{referralCount:ab(1)}),n.update(g,{usedReferralCode:i.toUpperCase(),referredBy:d.id,referralProcessedAt:T});const re=er(Et(Qe,"referrals"));return n.set(re,{referrerId:d.id,referredUserId:e,referralCode:i.toUpperCase(),createdAt:T,status:"completed",referrerIP:H||null,referredUserIP:k||null,sameIP:k&&H?k===H:!1,userAccountAge:T.getTime()-S.getTime()}),!0})}catch(n){return console.error("Error processing referral:",n),!1}},zD=async i=>{var e;try{const n=await Si(er(Qe,"users",i));if(!n.exists())return null;const s=n.data(),o=Et(Qe,"referrals"),c=nn(o,ct("referrerId","==",i)),d=await Yt(c),m=[];for(const g of d.docs){const _=g.data(),T=await Si(g(Qe,"users",_.referredUserId));if(T.exists()){const b=T.data();m.push({id:_.referredUserId,name:b.displayName||b.email||"Usuario",joinedAt:((e=_.createdAt)==null?void 0:e.toDate())||new Date})}}return{referralCode:s.referralCode||"",referralCount:s.referralCount||0,usedReferralCode:s.usedReferralCode||null,referredBy:s.referredBy||null,referredUsers:m}}catch(n){return console.error("Error getting user referral data:",n),null}},qD=async i=>{try{const e=await Si(er(Qe,"users",i));if(!e.exists())return[];const s=e.data().referralCount||0,o=Et(Qe,"packs"),c=nn(o,ct("isReferralUnlockable","==",!0)),d=await Yt(c),m=[];return d.forEach(g=>{const T=g.data().requiredReferrals||0;s>=T&&m.push(g.id)}),m}catch(e){return console.error("Error checking referral pack unlocks:",e),[]}},yE=async(i,e)=>{try{const n=er(Qe,"userQuestionChangeStats",i);(await Si(n)).exists()?await sb(n,{totalChanges:ab(1),adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,updatedAt:new Date}):await ib(n,{userId:i,totalChanges:e.totalChanges,adsWatched:e.adsWatched,lastChangeDate:e.lastChangeDate||new Date,createdAt:new Date,updatedAt:new Date}),console.log("Question change stats saved successfully")}catch(n){console.error("Error saving question change stats:",n)}},Ab=async i=>{try{const e=Et(Qe,"suggestions"),n=nn(e,ct("userId","==",i),ct("status","==","accepted"));return(await Yt(n)).size}catch(e){return console.error("Error getting user accepted suggestions count:",e),0}},BD=({onBack:i,onSuccess:e})=>{const[n,s]=ne.useState("login"),[o,c]=ne.useState(""),[d,m]=ne.useState(""),[g,_]=ne.useState(""),[T,b]=ne.useState(""),[S,j]=ne.useState(""),[k,K]=ne.useState(null),[H,oe]=ne.useState(!1),[se,re]=ne.useState(!1),[fe,he]=ne.useState(""),[ae,R]=ne.useState(""),{refreshUser:x,user:N}=zo(),P=async()=>{re(!0),he("");try{const te=n==="register"&&S&&(k!=null&&k.isValid)?S:void 0;await cb(te),x(),e()}catch(te){he(te.message)}finally{re(!1)}},M=async()=>{re(!0),he("");try{await db(),x(),e()}catch(te){he(te.message)}finally{re(!1)}},O=async te=>{te.preventDefault(),re(!0),he(""),R("");try{if(n==="login"){const pe=await ub(o,d);if(x(),!pe.emailVerified){R("Tu email no est verificado. Revisa tu bandeja de entrada o reenva la verificacin.");return}e()}else if(n==="register"){if(d!==g)throw new Error("Las contraseas no coinciden");const pe=S&&(k!=null&&k.isValid)?S:void 0;await hb(o,d,T,pe),R("Cuenta creada exitosamente. Revisa tu email para verificar tu cuenta antes de poder comprar packs premium."),s("login")}else n==="forgot-password"&&(await fb(o),R("Email de restablecimiento enviado. Revisa tu bandeja de entrada."),s("login"))}catch(pe){he(pe.message)}finally{re(!1)}},I=async()=>{re(!0),he("");try{await mb(),R("Email de verificacin reenviado.")}catch(te){he(te.message)}finally{re(!1)}},ze=()=>{c(""),m(""),_(""),b(""),j(""),K(null),he(""),R("")},Ie=async te=>{if(!te.trim()){K(null);return}oe(!0);try{const pe="temp-"+Date.now(),D=await bb(te,pe);K({isValid:D.isValid,message:D.isValid?`Cdigo vlido de ${D.referrerName}`:D.error||"Cdigo no vlido"})}catch{K({isValid:!1,message:"Error al validar cdigo"})}finally{oe(!1)}},z=te=>{j(te.toUpperCase()),te.trim().length>=6?Ie(te):K(null)},ee=te=>{s(te),ze()};return y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:y.jsxs(xn,{className:"w-full max-w-md p-8 space-y-6",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:n==="login"?"Iniciar Sesin":n==="register"?"Crear Cuenta":"Recuperar Contrasea"}),y.jsx("p",{className:"text-white/80",children:n==="login"?"Accede a tu cuenta para comprar packs premium":n==="register"?"Crea una cuenta para acceder a contenido premium":"Ingresa tu email para recuperar tu contrasea"})]}),fe&&y.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:fe}),ae&&y.jsxs("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:[y.jsx("p",{children:ae}),ae.includes("no est verificado")&&y.jsx(Me,{onClick:I,disabled:se,className:"mt-2 bg-green-600 hover:bg-green-700 text-sm",children:"Reenviar verificacin"})]}),y.jsxs("form",{onSubmit:O,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Email"}),y.jsx("input",{type:"email",value:o,onChange:te=>c(te.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"tu@email.com",required:!0})]}),n!=="forgot-password"&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Contrasea"}),y.jsx("input",{type:"password",value:d,onChange:te=>m(te.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"",required:!0,minLength:6})]}),n==="register"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Confirmar Contrasea"}),y.jsx("input",{type:"password",value:g,onChange:te=>_(te.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"",required:!0,minLength:6})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Nombre (opcional)"}),y.jsx("input",{type:"text",value:T,onChange:te=>b(te.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50",placeholder:"Tu nombre"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Cdigo de Referido (opcional)"}),y.jsx("input",{type:"text",value:S,onChange:te=>z(te.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${k===null?"border-white/20 focus:ring-white/50":k.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ej: ABC123",maxLength:8}),H&&y.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando cdigo..."}),k&&y.jsx("p",{className:`text-sm mt-1 ${k.isValid?"text-green-400":"text-red-400"}`,children:k.message})]})]}),y.jsx(Me,{type:"submit",disabled:se,className:"w-full",children:se?"Cargando...":n==="login"?"Iniciar Sesin":n==="register"?"Crear Cuenta":"Enviar Email"})]}),n!=="forgot-password"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-white/20"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-2 bg-transparent text-white/60",children:"o"})})]}),y.jsxs(Me,{onClick:P,disabled:se,className:"w-full bg-white text-gray-900 hover:bg-gray-100",children:[y.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[y.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),y.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),y.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),y.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar con Google"]})]}),y.jsxs("div",{className:"text-center space-y-2",children:[n==="login"&&y.jsxs(y.Fragment,{children:[y.jsx("button",{type:"button",onClick:()=>ee("forgot-password"),className:"text-white/80 hover:text-white text-sm underline",children:"Olvidaste tu contrasea?"}),y.jsxs("div",{children:[y.jsx("span",{className:"text-white/60 text-sm",children:"No tienes cuenta? "}),y.jsx("button",{type:"button",onClick:()=>ee("register"),className:"text-white hover:text-white/80 text-sm underline",children:"Regstrate"})]})]}),n==="register"&&y.jsxs("div",{children:[y.jsx("span",{className:"text-white/60 text-sm",children:"Ya tienes cuenta? "}),y.jsx("button",{type:"button",onClick:()=>ee("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Inicia sesin"})]}),n==="forgot-password"&&y.jsx("button",{type:"button",onClick:()=>ee("login"),className:"text-white hover:text-white/80 text-sm underline",children:"Volver al inicio de sesin"})]}),y.jsxs("div",{className:"border-t border-white/20 pt-4",children:[y.jsx(Me,{onClick:M,disabled:se,className:"w-full bg-white/10 hover:bg-white/20 text-white border border-white/20",children:"Continuar sin cuenta"}),y.jsx("p",{className:"text-white/60 text-xs text-center mt-2",children:"Podrs jugar pero no comprar packs premium"})]}),y.jsx("div",{className:"text-center",children:y.jsx(Me,{onClick:i,className:"text-white/80 hover:text-white bg-transparent",children:" Volver"})})]})})},Tc="suggestions",HD=async(i,e,n)=>{try{const s=new Date;if(!await xb(e))throw new Error("Has alcanzado el lmite de sugerencias permitidas");const c=await Sb(e,i.title,i.content);if(!c.isValid)throw new Error(c.error||"Contenido no vlido");const d={type:i.type,authorUid:e,authorName:n,title:i.title,content:i.content,targetPackId:i.targetPackId,status:tc.Pending,createdAt:s,updatedAt:s};if(i.targetPackId){const g=await Si(er(Qe,"packs",i.targetPackId));g.exists()&&(d.targetPackName=g.data().name)}return(await rp(Et(Qe,Tc),{...d,createdAt:et.fromDate(d.createdAt),updatedAt:et.fromDate(d.updatedAt)})).id}catch(s){throw console.error("Error creating suggestion:",s),s}},FD=["spam","test","prueba","asdf","qwerty","123","abc"],_E=i=>{const e=i.toLowerCase();return FD.some(n=>e.includes(n.toLowerCase()))},GD=async(i,e,n)=>{try{const s=nn(Et(Qe,Tc),ct("authorUid","==",i),tb("createdAt","desc"),G2(10)),o=await Yt(s);for(const c of o.docs){const d=c.data();if(d.title===e||d.content===n)return!0;const m=vE(e,d.title),g=vE(n,d.content);if(m>.8||g>.8)return!0}return!1}catch(s){return console.error("Error checking duplicate content:",s),!1}},vE=(i,e)=>{const n=i.toLowerCase().split(/\s+/),s=e.toLowerCase().split(/\s+/),o=new Set(n),c=new Set(s),d=new Set([...o].filter(g=>c.has(g))),m=new Set([...o,...c]);return d.size/m.size},Sb=async(i,e,n)=>e.length<ft.MIN_TITLE_LENGTH?{isValid:!1,error:`El ttulo debe tener al menos ${ft.MIN_TITLE_LENGTH} caracteres`}:e.length>ft.MAX_TITLE_LENGTH?{isValid:!1,error:`El ttulo no puede exceder ${ft.MAX_TITLE_LENGTH} caracteres`}:n.length<ft.MIN_CONTENT_LENGTH?{isValid:!1,error:`El contenido debe tener al menos ${ft.MIN_CONTENT_LENGTH} caracteres`}:n.length>ft.MAX_CONTENT_LENGTH?{isValid:!1,error:`El contenido no puede exceder ${ft.MAX_CONTENT_LENGTH} caracteres`}:_E(e)||_E(n)?{isValid:!1,error:"El contenido contiene palabras no permitidas"}:await GD(i,e,n)?{isValid:!1,error:"Ya has enviado una sugerencia similar recientemente"}:{isValid:!0},xb=async i=>{try{const e=new Date,n=new Date(e.getTime()-1440*60*1e3),s=new Date(e.getTime()-10080*60*1e3),o=nn(Et(Qe,Tc),ct("authorUid","==",i),ct("createdAt",">=",et.fromDate(n)));if((await Yt(o)).size>=ft.MAX_SUGGESTIONS_PER_DAY)return!1;const d=nn(Et(Qe,Tc),ct("authorUid","==",i),ct("createdAt",">=",et.fromDate(s)));return!((await Yt(d)).size>=ft.MAX_SUGGESTIONS_PER_WEEK)}catch(e){return console.error("Error checking suggestion limits:",e),!1}},QD=async i=>{try{const e=await Rb(i),n={total:e.length,pending:0,approved:0,rejected:0};return e.forEach(s=>{switch(s.status){case tc.Pending:n.pending++;break;case tc.Approved:n.approved++;break;case tc.Rejected:n.rejected++;break}}),n}catch(e){throw console.error("Error getting user suggestion stats:",e),e}},Rb=async i=>{try{const e=nn(Et(Qe,Tc),ct("authorUid","==",i),tb("createdAt","desc"));return(await Yt(e)).docs.map(s=>({id:s.id,...s.data(),createdAt:s.data().createdAt.toDate(),updatedAt:s.data().updatedAt.toDate()}))}catch(e){throw console.error("Error getting user suggestions:",e),e}},Ib=({onClose:i,onSuccess:e})=>{const{user:n}=zo(),[s,o]=ne.useState({type:Jn.Pack,title:"",content:"",targetPackId:void 0}),[c,d]=ne.useState([]),[m,g]=ne.useState(!1),[_,T]=ne.useState(null),[b,S]=ne.useState(!0),[j,k]=ne.useState(0);ne.useEffect(()=>{K(),H(),oe()},[n]);const K=async()=>{try{const ae=await cp();d(ae)}catch(ae){console.error("Error loading packs:",ae)}},H=async()=>{if(n)try{const ae=await xb(n.uid);S(ae),ae||T("Has alcanzado el lmite de sugerencias permitidas. Intenta ms tarde.")}catch(ae){console.error("Error checking user limits:",ae)}},oe=async()=>{if(n)try{const ae=await Ab(n.uid);k(ae)}catch(ae){console.error("Error loading accepted suggestions count:",ae)}},se=ae=>{o(R=>({...R,type:ae,targetPackId:ae===Jn.Pack?void 0:R.targetPackId}))},re=async ae=>{if(ae.preventDefault(),!(!n||!b)){if(s.title.length<ft.MIN_TITLE_LENGTH){T(`El ttulo debe tener al menos ${ft.MIN_TITLE_LENGTH} caracteres`);return}if(s.title.length>ft.MAX_TITLE_LENGTH){T(`El ttulo no puede exceder ${ft.MAX_TITLE_LENGTH} caracteres`);return}if(s.content.length<ft.MIN_CONTENT_LENGTH){T(`El contenido debe tener al menos ${ft.MIN_CONTENT_LENGTH} caracteres`);return}if(s.content.length>ft.MAX_CONTENT_LENGTH){T(`El contenido no puede exceder ${ft.MAX_CONTENT_LENGTH} caracteres`);return}if(s.type!==Jn.Pack&&!s.targetPackId){T("Debes seleccionar un pack para preguntas y retos");return}g(!0),T(null);try{const R=await Sb(n.uid,s.title,s.content);if(!R.isValid){T(R.error||"Contenido no vlido"),g(!1);return}await HD(s,n.uid,n.displayName||"Usuario annimo"),e(),i()}catch(R){T(R.message||"Error al enviar la sugerencia")}finally{g(!1)}}},fe=ae=>{switch(ae){case Jn.Pack:return"Pack nuevo";case Jn.Question:return"Pregunta";case Jn.Dare:return"Reto";default:return ae}},he=()=>{switch(s.type){case Jn.Pack:return"Describe tu idea para un nuevo pack: temtica, tipo de preguntas/retos, etc.";case Jn.Question:return"Escribe tu pregunta aqu...";case Jn.Dare:return"Describe el reto que propones...";default:return"Describe tu sugerencia..."}};return n?y.jsx("div",{className:"suggestion-form-overlay",children:y.jsxs("div",{className:"suggestion-form",children:[y.jsxs("div",{className:"suggestion-form-header",children:[y.jsxs("div",{children:[y.jsx("h2",{children:"Enviar Sugerencia"}),y.jsxs("p",{className:"accepted-count",children:["Sugerencias aprobadas: ",y.jsx("strong",{children:j})]})]}),y.jsx("button",{className:"close-button",onClick:i,children:""})]}),y.jsxs("form",{onSubmit:re,children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Tipo de sugerencia:"}),y.jsx("div",{className:"type-selector",children:Object.values(Jn).map(ae=>y.jsx("button",{type:"button",className:`type-button ${s.type===ae?"active":""}`,onClick:()=>se(ae),children:fe(ae)},ae))})]}),s.type!==Jn.Pack&&y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"targetPack",children:"Pack de destino:"}),y.jsxs("select",{id:"targetPack",value:s.targetPackId||"",onChange:ae=>o(R=>({...R,targetPackId:ae.target.value||void 0})),required:!0,children:[y.jsx("option",{value:"",children:"Selecciona un pack"}),c.map(ae=>y.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"title",children:"Ttulo:"}),y.jsx("input",{type:"text",id:"title",value:s.title,onChange:ae=>o(R=>({...R,title:ae.target.value})),placeholder:`Ttulo de tu ${fe(s.type).toLowerCase()}`,maxLength:ft.MAX_TITLE_LENGTH,required:!0}),y.jsxs("small",{children:[s.title.length,"/",ft.MAX_TITLE_LENGTH," caracteres"]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"content",children:"Descripcin:"}),y.jsx("textarea",{id:"content",value:s.content,onChange:ae=>o(R=>({...R,content:ae.target.value})),placeholder:he(),maxLength:ft.MAX_CONTENT_LENGTH,rows:6,required:!0}),y.jsxs("small",{children:[s.content.length,"/",ft.MAX_CONTENT_LENGTH," caracteres"]})]}),_&&y.jsx("div",{className:"error-message",children:_}),y.jsxs("div",{className:"form-actions",children:[y.jsx("button",{type:"button",className:"cancel-button",onClick:i,children:"Cancelar"}),y.jsx("button",{type:"submit",className:"submit-button",disabled:m||!b,children:m?"Enviando...":"Enviar Sugerencia"})]})]}),y.jsxs("div",{className:"suggestion-info",children:[y.jsx("h4",{children:"Informacin importante:"}),y.jsxs("ul",{children:[y.jsxs("li",{children:["Mximo ",ft.MAX_SUGGESTIONS_PER_DAY," sugerencias por da"]}),y.jsxs("li",{children:["Mximo ",ft.MAX_SUGGESTIONS_PER_WEEK," sugerencias por semana"]}),y.jsx("li",{children:"No podrs editar ni eliminar tu sugerencia una vez enviada"}),y.jsx("li",{children:"Recibirs notificaciones sobre el estado de tu sugerencia"})]})]})]})}):y.jsx("div",{className:"suggestion-form-overlay",children:y.jsxs("div",{className:"suggestion-form",children:[y.jsxs("div",{className:"suggestion-form-header",children:[y.jsx("h2",{children:"Iniciar sesin requerido"}),y.jsx("button",{className:"close-button",onClick:i,children:""})]}),y.jsx("p",{children:"Debes iniciar sesin para enviar sugerencias."}),y.jsx("button",{className:"cancel-button",onClick:i,children:"Cerrar"})]})})},KD=({onBack:i})=>{var Ie;const{user:e}=zo(),[n,s]=ne.useState(null),[o,c]=ne.useState(""),[d,m]=ne.useState(null),[g,_]=ne.useState(!1),[T,b]=ne.useState(!1),[S,j]=ne.useState(!0),[k,K]=ne.useState(""),[H,oe]=ne.useState(""),[se,re]=ne.useState(0),[fe,he]=ne.useState(!1),[ae,R]=ne.useState(null),[x,N]=ne.useState([]);ne.useEffect(()=>{P()},[e]);const P=async()=>{if(e!=null&&e.uid){j(!0);try{const[z,ee,te,pe]=await Promise.all([zD(e.uid),Ab(e.uid),QD(e.uid),Rb(e.uid)]);s(z),re(ee),R(te),N(pe)}catch(z){console.error("Error loading user data:",z),K("Error al cargar datos del usuario")}finally{j(!1)}}},M=async z=>{if(!z.trim()){m(null);return}if(!(e!=null&&e.uid)){m({isValid:!1,message:"Error de autenticacin"});return}_(!0);try{const ee=await bb(z,e.uid);m({isValid:ee.isValid,message:ee.isValid?`Cdigo vlido de ${ee.referrerName}`:ee.error||"Cdigo no vlido"})}catch{m({isValid:!1,message:"Error al validar cdigo"})}finally{_(!1)}},O=z=>{c(z.toUpperCase()),z.trim().length>=6?M(z):m(null)},I=async()=>{if(!(!(e!=null&&e.uid)||!o||!(d!=null&&d.isValid))){b(!0),K(""),oe("");try{await UD(o,e.uid)?(oe("Cdigo de referido aplicado exitosamente!"),c(""),m(null),await P()):K("Error al procesar el cdigo de referido")}catch{K("Error al procesar el cdigo de referido")}finally{b(!1)}}},ze=async()=>{if(n!=null&&n.referralCode)try{await navigator.clipboard.writeText(n.referralCode),oe("Cdigo copiado al portapapeles!"),setTimeout(()=>oe(""),3e3)}catch{K("Error al copiar el cdigo")}};return S?y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:y.jsx(xn,{className:"w-full max-w-2xl p-8",children:y.jsxs("div",{className:"text-center text-white",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),y.jsx("p",{children:"Cargando perfil..."})]})})}):y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 flex items-center justify-center p-4",children:[y.jsxs(xn,{className:"w-full max-w-2xl p-8 space-y-6",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h1",{className:"text-3xl font-bold text-white",children:"Mi Perfil"}),y.jsx(Me,{onClick:i,className:"bg-white/20 hover:bg-white/30 text-white",children:"Volver"})]}),k&&y.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-3 rounded",children:k}),H&&y.jsx("div",{className:"bg-green-500/20 border border-green-500 text-green-100 px-4 py-3 rounded",children:H}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Informacin Personal"}),y.jsxs("div",{className:"space-y-2 text-white/80",children:[y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Email:"})," ",e==null?void 0:e.email]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Nombre:"})," ",(e==null?void 0:e.displayName)||"No especificado"]})]})]}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mi Cdigo de Referido"}),y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx("div",{className:"flex-1",children:y.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Tu cdigo:"}),y.jsx("p",{className:"text-2xl font-bold text-white tracking-wider",children:(n==null?void 0:n.referralCode)||"Cargando..."})]})}),y.jsx(Me,{onClick:ze,className:"bg-blue-600 hover:bg-blue-700",disabled:!(n!=null&&n.referralCode),children:"Copiar"})]}),y.jsx("p",{className:"text-white/60 text-sm mt-2",children:"Comparte este cdigo con tus amigos para ganar referidos"})]}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mis Estadsticas"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[y.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-3xl font-bold text-white",children:(n==null?void 0:n.referralCount)||0}),y.jsx("p",{className:"text-white/60 text-sm",children:"Total de referidos"})]}),y.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-3xl font-bold text-white",children:((Ie=n==null?void 0:n.referredUsers)==null?void 0:Ie.length)||0}),y.jsx("p",{className:"text-white/60 text-sm",children:"Usuarios activos"})]}),y.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-3xl font-bold text-green-400",children:se}),y.jsx("p",{className:"text-white/60 text-sm",children:"Sugerencias aceptadas"})]})]}),(n==null?void 0:n.referredUsers)&&n.referredUsers.length>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Usuarios Referidos"}),y.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:n.referredUsers.map((z,ee)=>y.jsxs("div",{className:"bg-white/10 rounded p-3 flex justify-between items-center",children:[y.jsx("span",{className:"text-white",children:z.name}),y.jsx("span",{className:"text-white/60 text-sm",children:z.joinedAt.toLocaleDateString()})]},z.id))})]})]}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Contribuir con Sugerencias"}),y.jsx("p",{className:"text-white/60 text-sm mb-4",children:"Tienes ideas para nuevos packs, preguntas o retos? Comprtelas con nosotros!"}),y.jsx(Me,{onClick:()=>he(!0),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2",children:" Recomendar Pack/Pregunta/Reto"})]}),!(n!=null&&n.usedReferralCode)&&y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Usar Cdigo de Referido"}),y.jsx("p",{className:"text-white/60 text-sm mb-4",children:"Tienes un cdigo de referido? salo aqu para ayudar a un amigo."}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("input",{type:"text",value:o,onChange:z=>O(z.target.value),className:`w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 ${d===null?"border-white/20 focus:ring-white/50":d.isValid?"border-green-500 focus:ring-green-500":"border-red-500 focus:ring-red-500"}`,placeholder:"Ingresa el cdigo de referido",maxLength:8}),g&&y.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Validando cdigo..."}),d&&y.jsx("p",{className:`text-sm mt-1 ${d.isValid?"text-green-400":"text-red-400"}`,children:d.message})]}),y.jsx(Me,{onClick:I,disabled:!(d!=null&&d.isValid)||T,className:"w-full bg-green-600 hover:bg-green-700",children:T?"Procesando...":"Usar Cdigo"})]})]}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Mis Sugerencias"}),ae&&y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[y.jsxs("div",{className:"bg-white/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-2xl font-bold text-white",children:ae.total}),y.jsx("p",{className:"text-white/60 text-sm",children:"Total"})]}),y.jsxs("div",{className:"bg-yellow-500/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-2xl font-bold text-yellow-300",children:ae.pending}),y.jsx("p",{className:"text-white/60 text-sm",children:"Pendientes"})]}),y.jsxs("div",{className:"bg-green-500/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-2xl font-bold text-green-300",children:ae.approved}),y.jsx("p",{className:"text-white/60 text-sm",children:"Aprobadas"})]}),y.jsxs("div",{className:"bg-red-500/20 rounded-lg p-4 text-center",children:[y.jsx("p",{className:"text-2xl font-bold text-red-300",children:ae.rejected}),y.jsx("p",{className:"text-white/60 text-sm",children:"Rechazadas"})]})]}),x.length>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Sugerencias Recientes"}),y.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:x.slice(0,5).map(z=>y.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[y.jsxs("div",{className:"flex justify-between items-start mb-2",children:[y.jsx("h4",{className:"font-medium text-white truncate flex-1 mr-2",children:z.title}),y.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${z.status==="pending"?"bg-yellow-500/20 text-yellow-300":z.status==="approved"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:z.status==="pending"?"Pendiente":z.status==="approved"?"Aprobada":"Rechazada"})]}),y.jsx("p",{className:"text-white/60 text-sm line-clamp-2",children:z.content}),y.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-white/40",children:[y.jsx("span",{children:z.type==="question"?"Pregunta":"Reto"}),y.jsx("span",{children:z.createdAt.toLocaleDateString()})]})]},z.id))}),x.length>5&&y.jsxs("p",{className:"text-white/60 text-sm mt-3 text-center",children:["Y ",x.length-5," sugerencias ms..."]})]}),x.length===0&&ae&&y.jsxs("div",{className:"text-center py-8",children:[y.jsx("p",{className:"text-white/60",children:"No has enviado sugerencias an"}),y.jsx("p",{className:"text-white/40 text-sm mt-1",children:"Comparte tus ideas para mejorar el juego!"})]})]}),(n==null?void 0:n.usedReferralCode)&&y.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Cdigo de Referido Usado"}),y.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[y.jsx("p",{className:"text-white/60 text-sm",children:"Ya has usado el cdigo:"}),y.jsx("p",{className:"text-xl font-bold text-white tracking-wider",children:n.usedReferralCode})]})]})]}),fe&&y.jsx(Ib,{isOpen:fe,onClose:()=>he(!1)})]})},YD=()=>{const{user:i}=zo(),[e,n]=ne.useState(Je.Setup),[s,o]=ne.useState([]),[c,d]=ne.useState([]),[m,g]=ne.useState([]),[_,T]=ne.useState(0),[b,S]=ne.useState({totalRounds:5}),[j,k]=ne.useState({currentRound:1,playersCompletedInRound:0}),[K,H]=ne.useState({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),[oe,se]=ne.useState({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),[re,fe]=ne.useState({isLoading:!0,error:null}),[he,ae]=ne.useState([]),[R,x]=ne.useState(()=>{try{const me=window.localStorage.getItem("purchasedPacks");return me?JSON.parse(me):[]}catch(me){return console.error("Error reading from localStorage",me),[]}}),[N,P]=ne.useState(!1),[M,O]=ne.useState(null),[I,ze]=ne.useState(!1),[Ie,z]=ne.useState(null),[ee,te]=ne.useState([]),[pe,D]=ne.useState([]),[Z,ce]=ne.useState({changesCount:0,isAdLoading:!1,isAdPlaying:!1,lastChangedItem:void 0}),[ie,ve]=ne.useState({totalChanges:0,adsWatched:0,lastChangeDate:void 0}),[De,xe]=ne.useState(!1),[Pt,tt]=ne.useState(!1),Un=ne.useCallback(async me=>{try{const ye=await qD(me);D(ye)}catch(ye){console.error("Error loading referral unlocked packs:",ye),D([])}},[]);ne.useEffect(()=>{(async()=>{try{const ye=await cp();ae(ye)}catch(ye){console.error("Error loading available packs:",ye)}})()},[]),ne.useEffect(()=>{try{window.localStorage.setItem("purchasedPacks",JSON.stringify(R))}catch(me){console.error("Error writing to localStorage",me)}},[R,pe]);const zn=ne.useCallback(async()=>{fe({isLoading:!0,error:null});try{const me=["base",...R.filter(Ot=>Ot!=="base"),...pe.filter(Ot=>Ot!=="base"&&!R.includes(Ot))],ye=await kD(me);d(ye.questions),g(ye.dares),fe({isLoading:!1,error:null})}catch(me){console.error("Error loading game data:",me),fe({isLoading:!1,error:me instanceof Error?me.message:"Error desconocido"})}},[R]);ne.useEffect(()=>{zn()},[zn]);const nr=()=>{if(s.length<2){alert("Se necesitan al menos 2 jugadores para empezar.");return}n(Je.PackSelection)},Ur=()=>{n(Je.RoundConfiguration)},zr=()=>{n(Je.Setup)},qr=()=>{n(Je.Shop)},Ii=()=>{n(Je.Login)},pa=me=>{n(Je.Setup),me!=null&&me.uid&&Un(me.uid)},En=ne.useCallback(async()=>{const me={...ie,totalChanges:ie.totalChanges+1,lastChangeDate:new Date};if(ce(ye=>({...ye,changesCount:ye.changesCount+1})),ve(me),i&&!i.isAnonymous)try{await yE(i.uid,me)}catch(ye){console.error("Error saving question change stats:",ye)}},[ie,i]),qo=ne.useCallback(async()=>new Promise((me,ye)=>{ce(Ot=>({...Ot,isAdLoading:!0})),setTimeout(()=>{ce(Ot=>({...Ot,isAdLoading:!1,isAdPlaying:!0})),setTimeout(()=>{ce(mn=>({...mn,isAdPlaying:!1,changesCount:0}));const Ot={...ie,adsWatched:ie.adsWatched+1};if(ve(Ot),i&&!i.isAnonymous)try{yE(i.uid,Ot).catch(mn=>{console.error("Error saving ad watched stats:",mn)})}catch(mn){console.error("Error saving ad watched stats:",mn)}me()},3e3)},1e3)}),[ie,i]),Is=()=>{n(Je.Setup)},Ni=me=>{const ye=he.find(Ot=>Ot.id===me);ye&&(z(ye),ze(!0))},Br=()=>{ze(!1),z(null)},Bo=me=>{te(ye=>ye.includes(me)?ye:[...ye,me])},Ci=async()=>{if(Ie)try{const me=await jD(Ie.id);if(me.questions.length===0&&me.dares.length===0){alert("Este pack no tiene contenido demo disponible.");return}P(!0),O(Ie.id),d(me.questions),g(me.dares),await LD(Ie.id),n(Je.RoundConfiguration)}catch(me){console.error("Error starting demo:",me),alert("Error al cargar el demo. Intntalo de nuevo.")}},Ns=me=>{S(me),H({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:new Date,gameEndTime:null,roundStats:[]}),se({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),k({currentRound:1,playersCompletedInRound:0}),n(Je.Game)},ya=()=>{const me=(_+1)%s.length;if(T(me),me===0){const ye=j.currentRound+1;ye>b.totalRounds?sn():(k({currentRound:ye,playersCompletedInRound:0}),se({roundNumber:ye,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}))}else k(ye=>({...ye,playersCompletedInRound:ye.playersCompletedInRound+1}))},ut=()=>{const me={...oe,roundEndTime:new Date};H(ye=>({...ye,totalRounds:ye.totalRounds+1,roundStats:[...ye.roundStats,me]})),n(Je.RoundEnd)},Ye=()=>{const me=j.currentRound+1;k({currentRound:me,playersCompletedInRound:0}),se({roundNumber:me,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),T(0),n(Je.Game)},sn=()=>{H(me=>({...me,gameEndTime:new Date})),n(Je.GameEnd)},zt=()=>{const me=s[_];se(ye=>({...ye,questionsAsked:ye.questionsAsked+1,playersParticipated:ye.playersParticipated.includes(me)?ye.playersParticipated:[...ye.playersParticipated,me]})),H(ye=>({...ye,totalQuestions:ye.totalQuestions+1}))},_a=()=>{const me=s[_];se(ye=>({...ye,daresCompleted:ye.daresCompleted+1,playersParticipated:ye.playersParticipated.includes(me)?ye.playersParticipated:[...ye.playersParticipated,me]})),H(ye=>({...ye,totalDares:ye.totalDares+1}))},va=ne.useCallback(()=>{n(Je.Setup),o([]),T(0),S({totalRounds:5}),k({currentRound:1,playersCompletedInRound:0}),H({totalRounds:0,totalQuestions:0,totalDares:0,gameStartTime:null,gameEndTime:null,roundStats:[]}),se({roundNumber:1,questionsAsked:0,daresCompleted:0,playersParticipated:[],roundStartTime:new Date,roundEndTime:null}),P(!1),O(null),ze(!1),z(null),te([])},[]),Hr=me=>{R.includes(me)||x([...R,me])},Fr=()=>R.includes("no-ads"),Gr=()=>{xe(!1)},Rn=()=>{console.log("Sugerencia enviada exitosamente")},Di=()=>{tt(!1)},Qr=()=>{switch(e){case Je.Setup:return y.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-900 bg-opacity-50 backdrop-blur-sm",children:y.jsxs("div",{className:"w-full max-w-md mx-auto animate-fade-in",children:[y.jsx("h1",{className:"text-5xl font-extrabold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Verdad o Reto"}),y.jsx("p",{className:"text-center text-gray-400 mb-8",children:"El juego para animar la fiesta"}),y.jsxs("div",{className:"space-y-6",children:[y.jsx(pS,{players:s,setPlayers:o}),re.isLoading&&y.jsx(xn,{className:"text-center text-gray-400",children:y.jsx("p",{children:"Cargando datos desde Firebase..."})}),re.error&&y.jsxs(xn,{className:"text-center text-red-400",children:[y.jsxs("p",{children:["Error de conexin: ",re.error]}),y.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Verifica tu configuracin de Firebase"}),y.jsx(Me,{onClick:zn,className:"mt-4",variant:"secondary",children:"Reintentar"})]}),!re.isLoading&&!re.error&&y.jsxs("div",{className:"flex flex-col gap-4",children:[y.jsx(Me,{onClick:nr,className:"w-full text-lg",disabled:s.length<2||c.length===0||m.length===0,children:"Empezar a Jugar"}),y.jsxs(Me,{onClick:()=>n(Je.Shop),variant:"secondary",className:"w-full text-lg flex items-center justify-center gap-2",children:[y.jsx(TE,{className:"w-6 h-6"}),"Tienda de Paquetes"]}),i&&!i.isAnonymous?y.jsx(Me,{onClick:()=>n(Je.Profile),variant:"secondary",className:"w-full text-lg",children:"Mi Perfil"}):y.jsx(Me,{onClick:Ii,variant:"secondary",className:"w-full text-lg",children:"Iniciar Sesin"})]})]})]})});case Je.Login:return y.jsx(BD,{onBack:Is,onSuccess:pa});case Je.Profile:return y.jsx(KD,{onBack:Di});case Je.Shop:return y.jsx(DD,{availablePacks:he,purchasedPacks:R,onPurchase:Hr,onBack:()=>n(Je.Setup),onGoToLogin:Ii});case Je.PackSelection:return y.jsxs(y.Fragment,{children:[y.jsx(yS,{availablePacks:he,purchasedPacks:R,adWatchedPacks:ee,referralUnlockedPacks:pe,onContinue:Ur,onBack:zr,onGoToShop:qr,onPlayDemo:Ni}),y.jsx(CS,{pack:Ie,isOpen:I,onClose:Br,onStartDemo:Ci,onAdWatched:Bo})]});case Je.RoundConfiguration:return y.jsx(PS,{onSelectRounds:me=>{Ns({totalRounds:me})},onBack:()=>n(Je.PackSelection)});case Je.Game:return y.jsx(DS,{players:s,currentPlayerIndex:_,onNextPlayer:ya,onNewGame:va,questions:c,dares:m,roundConfig:b,gameProgress:j,onRoundEnd:ut,onQuestionAsked:zt,onDareCompleted:_a,onQuestionChange:En,onAdRequired:qo,questionChangeState:Z});case Je.RoundEnd:return y.jsx(OS,{roundStats:oe,currentRound:j.currentRound,totalRounds:b.totalRounds,onContinue:Ye,onEndGame:sn,hasNoAds:Fr()});case Je.GameEnd:return y.jsx(MS,{gameStats:K,players:s,onNewGame:va,onBackToMenu:()=>n(Je.Setup),isDemoMode:N,demoPackId:M});default:return y.jsx("div",{children:"Error: Estado de juego desconocido."})}};return y.jsxs("main",{className:"relative min-h-screen bg-gray-900 overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-purple-900/30 via-transparent to-pink-900/30"}),y.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-96 h-96 bg-purple-600 rounded-full filter blur-3xl opacity-20 animate-blob"}),y.jsx("div",{className:"absolute bottom-[-10%] right-[5%] w-96 h-96 bg-pink-600 rounded-full filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),y.jsx("div",{className:"absolute top-[10%] right-[-15%] w-80 h-80 bg-cyan-600 rounded-full filter blur-3xl opacity-10 animate-blob animation-delay-4000"}),y.jsx("div",{className:"relative z-10",children:Qr()}),y.jsx("style",{children:`
          .animate-blob {
            animation: blob 7s infinite;
          }
          .animation-delay-2000 {
            animation-delay: 2s;
          }
          .animation-delay-4000 {
            animation-delay: 4s;
          }
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
          }
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `}),De&&y.jsx(Ib,{onClose:Gr,onSuccess:Rn})]})},Nb=document.getElementById("root");if(!Nb)throw new Error("Could not find root element to mount to");const XD=hS.createRoot(Nb);XD.render(y.jsx(rS.StrictMode,{children:y.jsx(aD,{children:y.jsx(YD,{})})}));export{jv as A,SE as W};
